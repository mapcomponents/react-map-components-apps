var yG=Object.defineProperty;var x8=e=>{throw TypeError(e)};var _G=(e,t,r)=>t in e?yG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ce=(e,t,r)=>_G(e,typeof t!="symbol"?t+"":t,r),hE=(e,t,r)=>t.has(e)||x8("Cannot "+r);var dt=(e,t,r)=>(hE(e,t,"read from private field"),r?r.call(e):t.get(e)),Cn=(e,t,r)=>t.has(e)?x8("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),jr=(e,t,r,n)=>(hE(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),ni=(e,t,r)=>(hE(e,t,"access private method"),r);var Xb=(e,t,r,n)=>({set _(i){jr(e,t,i,r)},get _(){return dt(e,t,n)}});function l9(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function PS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function c9(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var u9={exports:{}},IS={},h9={exports:{}},Xn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q2=Symbol.for("react.element"),vG=Symbol.for("react.portal"),bG=Symbol.for("react.fragment"),xG=Symbol.for("react.strict_mode"),wG=Symbol.for("react.profiler"),SG=Symbol.for("react.provider"),AG=Symbol.for("react.context"),EG=Symbol.for("react.forward_ref"),TG=Symbol.for("react.suspense"),CG=Symbol.for("react.memo"),PG=Symbol.for("react.lazy"),w8=Symbol.iterator;function IG(e){return e===null||typeof e!="object"?null:(e=w8&&e[w8]||e["@@iterator"],typeof e=="function"?e:null)}var f9={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d9=Object.assign,p9={};function I_(e,t,r){this.props=e,this.context=t,this.refs=p9,this.updater=r||f9}I_.prototype.isReactComponent={};I_.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};I_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function g9(){}g9.prototype=I_.prototype;function sI(e,t,r){this.props=e,this.context=t,this.refs=p9,this.updater=r||f9}var aI=sI.prototype=new g9;aI.constructor=sI;d9(aI,I_.prototype);aI.isPureReactComponent=!0;var S8=Array.isArray,m9=Object.prototype.hasOwnProperty,lI={current:null},y9={key:!0,ref:!0,__self:!0,__source:!0};function _9(e,t,r){var n,i={},o=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)m9.call(t,n)&&!y9.hasOwnProperty(n)&&(i[n]=t[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var f=Array(s),p=0;p<s;p++)f[p]=arguments[p+2];i.children=f}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:q2,type:e,key:o,ref:l,props:i,_owner:lI.current}}function RG(e,t){return{$$typeof:q2,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function cI(e){return typeof e=="object"&&e!==null&&e.$$typeof===q2}function kG(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var A8=/\/+/g;function fE(e,t){return typeof e=="object"&&e!==null&&e.key!=null?kG(""+e.key):t.toString(36)}function rw(e,t,r,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case q2:case vG:l=!0}}if(l)return l=e,i=i(l),e=n===""?"."+fE(l,0):n,S8(i)?(r="",e!=null&&(r=e.replace(A8,"$&/")+"/"),rw(i,t,r,"",function(p){return p})):i!=null&&(cI(i)&&(i=RG(i,r+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(A8,"$&/")+"/")+e)),t.push(i)),1;if(l=0,n=n===""?".":n+":",S8(e))for(var s=0;s<e.length;s++){o=e[s];var f=n+fE(o,s);l+=rw(o,t,r,f,i)}else if(f=IG(e),typeof f=="function")for(e=f.call(e),s=0;!(o=e.next()).done;)o=o.value,f=n+fE(o,s++),l+=rw(o,t,r,f,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Kb(e,t,r){if(e==null)return e;var n=[],i=0;return rw(e,n,"","",function(o){return t.call(r,o,i++)}),n}function MG(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fl={current:null},nw={transition:null},OG={ReactCurrentDispatcher:Fl,ReactCurrentBatchConfig:nw,ReactCurrentOwner:lI};function v9(){throw Error("act(...) is not supported in production builds of React.")}Xn.Children={map:Kb,forEach:function(e,t,r){Kb(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Kb(e,function(){t++}),t},toArray:function(e){return Kb(e,function(t){return t})||[]},only:function(e){if(!cI(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Xn.Component=I_;Xn.Fragment=bG;Xn.Profiler=wG;Xn.PureComponent=sI;Xn.StrictMode=xG;Xn.Suspense=TG;Xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OG;Xn.act=v9;Xn.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=d9({},e.props),i=e.key,o=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=lI.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(f in t)m9.call(t,f)&&!y9.hasOwnProperty(f)&&(n[f]=t[f]===void 0&&s!==void 0?s[f]:t[f])}var f=arguments.length-2;if(f===1)n.children=r;else if(1<f){s=Array(f);for(var p=0;p<f;p++)s[p]=arguments[p+2];n.children=s}return{$$typeof:q2,type:e.type,key:i,ref:o,props:n,_owner:l}};Xn.createContext=function(e){return e={$$typeof:AG,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:SG,_context:e},e.Consumer=e};Xn.createElement=_9;Xn.createFactory=function(e){var t=_9.bind(null,e);return t.type=e,t};Xn.createRef=function(){return{current:null}};Xn.forwardRef=function(e){return{$$typeof:EG,render:e}};Xn.isValidElement=cI;Xn.lazy=function(e){return{$$typeof:PG,_payload:{_status:-1,_result:e},_init:MG}};Xn.memo=function(e,t){return{$$typeof:CG,type:e,compare:t===void 0?null:t}};Xn.startTransition=function(e){var t=nw.transition;nw.transition={};try{e()}finally{nw.transition=t}};Xn.unstable_act=v9;Xn.useCallback=function(e,t){return Fl.current.useCallback(e,t)};Xn.useContext=function(e){return Fl.current.useContext(e)};Xn.useDebugValue=function(){};Xn.useDeferredValue=function(e){return Fl.current.useDeferredValue(e)};Xn.useEffect=function(e,t){return Fl.current.useEffect(e,t)};Xn.useId=function(){return Fl.current.useId()};Xn.useImperativeHandle=function(e,t,r){return Fl.current.useImperativeHandle(e,t,r)};Xn.useInsertionEffect=function(e,t){return Fl.current.useInsertionEffect(e,t)};Xn.useLayoutEffect=function(e,t){return Fl.current.useLayoutEffect(e,t)};Xn.useMemo=function(e,t){return Fl.current.useMemo(e,t)};Xn.useReducer=function(e,t,r){return Fl.current.useReducer(e,t,r)};Xn.useRef=function(e){return Fl.current.useRef(e)};Xn.useState=function(e){return Fl.current.useState(e)};Xn.useSyncExternalStore=function(e,t,r){return Fl.current.useSyncExternalStore(e,t,r)};Xn.useTransition=function(){return Fl.current.useTransition()};Xn.version="18.3.1";h9.exports=Xn;var me=h9.exports;const Pe=PS(me),sC=l9({__proto__:null,default:Pe},[me]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NG=me,DG=Symbol.for("react.element"),LG=Symbol.for("react.fragment"),FG=Object.prototype.hasOwnProperty,BG=NG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zG={key:!0,ref:!0,__self:!0,__source:!0};function b9(e,t,r){var n,i={},o=null,l=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)FG.call(t,n)&&!zG.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:DG,type:e,key:o,ref:l,props:i,_owner:BG.current}}IS.Fragment=LG;IS.jsx=b9;IS.jsxs=b9;u9.exports=IS;var xt=u9.exports,aC={},x9={exports:{}},Kc={},w9={exports:{}},S9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Me,Ue){var Qe=Me.length;Me.push(Ue);e:for(;0<Qe;){var ct=Qe-1>>>1,ce=Me[ct];if(0<i(ce,Ue))Me[ct]=Ue,Me[Qe]=ce,Qe=ct;else break e}}function r(Me){return Me.length===0?null:Me[0]}function n(Me){if(Me.length===0)return null;var Ue=Me[0],Qe=Me.pop();if(Qe!==Ue){Me[0]=Qe;e:for(var ct=0,ce=Me.length,be=ce>>>1;ct<be;){var Oe=2*(ct+1)-1,Be=Me[Oe],qe=Oe+1,tt=Me[qe];if(0>i(Be,Qe))qe<ce&&0>i(tt,Be)?(Me[ct]=tt,Me[qe]=Qe,ct=qe):(Me[ct]=Be,Me[Oe]=Qe,ct=Oe);else if(qe<ce&&0>i(tt,Qe))Me[ct]=tt,Me[qe]=Qe,ct=qe;else break e}}return Ue}function i(Me,Ue){var Qe=Me.sortIndex-Ue.sortIndex;return Qe!==0?Qe:Me.id-Ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,s=l.now();e.unstable_now=function(){return l.now()-s}}var f=[],p=[],v=1,x=null,S=3,A=!1,k=!1,R=!1,z=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(Me){for(var Ue=r(p);Ue!==null;){if(Ue.callback===null)n(p);else if(Ue.startTime<=Me)n(p),Ue.sortIndex=Ue.expirationTime,t(f,Ue);else break;Ue=r(p)}}function K(Me){if(R=!1,U(Me),!k)if(r(f)!==null)k=!0,$e(ne);else{var Ue=r(p);Ue!==null&&Ze(K,Ue.startTime-Me)}}function ne(Me,Ue){k=!1,R&&(R=!1,N(re),re=-1),A=!0;var Qe=S;try{for(U(Ue),x=r(f);x!==null&&(!(x.expirationTime>Ue)||Me&&!G());){var ct=x.callback;if(typeof ct=="function"){x.callback=null,S=x.priorityLevel;var ce=ct(x.expirationTime<=Ue);Ue=e.unstable_now(),typeof ce=="function"?x.callback=ce:x===r(f)&&n(f),U(Ue)}else n(f);x=r(f)}if(x!==null)var be=!0;else{var Oe=r(p);Oe!==null&&Ze(K,Oe.startTime-Ue),be=!1}return be}finally{x=null,S=Qe,A=!1}}var ee=!1,Q=null,re=-1,Se=5,J=-1;function G(){return!(e.unstable_now()-J<Se)}function se(){if(Q!==null){var Me=e.unstable_now();J=Me;var Ue=!0;try{Ue=Q(!0,Me)}finally{Ue?ve():(ee=!1,Q=null)}}else ee=!1}var ve;if(typeof B=="function")ve=function(){B(se)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,je=ge.port2;ge.port1.onmessage=se,ve=function(){je.postMessage(null)}}else ve=function(){z(se,0)};function $e(Me){Q=Me,ee||(ee=!0,ve())}function Ze(Me,Ue){re=z(function(){Me(e.unstable_now())},Ue)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Me){Me.callback=null},e.unstable_continueExecution=function(){k||A||(k=!0,$e(ne))},e.unstable_forceFrameRate=function(Me){0>Me||125<Me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Se=0<Me?Math.floor(1e3/Me):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_getFirstCallbackNode=function(){return r(f)},e.unstable_next=function(Me){switch(S){case 1:case 2:case 3:var Ue=3;break;default:Ue=S}var Qe=S;S=Ue;try{return Me()}finally{S=Qe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Me,Ue){switch(Me){case 1:case 2:case 3:case 4:case 5:break;default:Me=3}var Qe=S;S=Me;try{return Ue()}finally{S=Qe}},e.unstable_scheduleCallback=function(Me,Ue,Qe){var ct=e.unstable_now();switch(typeof Qe=="object"&&Qe!==null?(Qe=Qe.delay,Qe=typeof Qe=="number"&&0<Qe?ct+Qe:ct):Qe=ct,Me){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=Qe+ce,Me={id:v++,callback:Ue,priorityLevel:Me,startTime:Qe,expirationTime:ce,sortIndex:-1},Qe>ct?(Me.sortIndex=Qe,t(p,Me),r(f)===null&&Me===r(p)&&(R?(N(re),re=-1):R=!0,Ze(K,Qe-ct))):(Me.sortIndex=ce,t(f,Me),k||A||(k=!0,$e(ne))),Me},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(Me){var Ue=S;return function(){var Qe=S;S=Ue;try{return Me.apply(this,arguments)}finally{S=Qe}}}})(S9);w9.exports=S9;var $G=w9.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UG=me,Wc=$G;function fr(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A9=new Set,Vv={};function um(e,t){n_(e,t),n_(e+"Capture",t)}function n_(e,t){for(Vv[e]=t,e=0;e<t.length;e++)A9.add(t[e])}var od=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lC=Object.prototype.hasOwnProperty,jG=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E8={},T8={};function VG(e){return lC.call(T8,e)?!0:lC.call(E8,e)?!1:jG.test(e)?T8[e]=!0:(E8[e]=!0,!1)}function HG(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qG(e,t,r,n){if(t===null||typeof t>"u"||HG(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Bl(e,t,r,n,i,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var $a={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$a[e]=new Bl(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$a[t]=new Bl(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$a[e]=new Bl(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$a[e]=new Bl(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$a[e]=new Bl(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$a[e]=new Bl(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$a[e]=new Bl(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$a[e]=new Bl(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$a[e]=new Bl(e,5,!1,e.toLowerCase(),null,!1,!1)});var uI=/[\-:]([a-z])/g;function hI(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(uI,hI);$a[t]=new Bl(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(uI,hI);$a[t]=new Bl(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(uI,hI);$a[t]=new Bl(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$a[e]=new Bl(e,1,!1,e.toLowerCase(),null,!1,!1)});$a.xlinkHref=new Bl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$a[e]=new Bl(e,1,!1,e.toLowerCase(),null,!0,!0)});function fI(e,t,r,n){var i=$a.hasOwnProperty(t)?$a[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(qG(t,r,i,n)&&(r=null),n||i===null?VG(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var _d=UG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gb=Symbol.for("react.element"),J0=Symbol.for("react.portal"),Q0=Symbol.for("react.fragment"),dI=Symbol.for("react.strict_mode"),cC=Symbol.for("react.profiler"),E9=Symbol.for("react.provider"),T9=Symbol.for("react.context"),pI=Symbol.for("react.forward_ref"),uC=Symbol.for("react.suspense"),hC=Symbol.for("react.suspense_list"),gI=Symbol.for("react.memo"),Yd=Symbol.for("react.lazy"),C9=Symbol.for("react.offscreen"),C8=Symbol.iterator;function v1(e){return e===null||typeof e!="object"?null:(e=C8&&e[C8]||e["@@iterator"],typeof e=="function"?e:null)}var qo=Object.assign,dE;function Q1(e){if(dE===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);dE=t&&t[1]||""}return`
`+dE+e}var pE=!1;function gE(e,t){if(!e||pE)return"";pE=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var n=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){n=p}e.call(t.prototype)}else{try{throw Error()}catch(p){n=p}e()}}catch(p){if(p&&n&&typeof p.stack=="string"){for(var i=p.stack.split(`
`),o=n.stack.split(`
`),l=i.length-1,s=o.length-1;1<=l&&0<=s&&i[l]!==o[s];)s--;for(;1<=l&&0<=s;l--,s--)if(i[l]!==o[s]){if(l!==1||s!==1)do if(l--,s--,0>s||i[l]!==o[s]){var f=`
`+i[l].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=l&&0<=s);break}}}finally{pE=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Q1(e):""}function WG(e){switch(e.tag){case 5:return Q1(e.type);case 16:return Q1("Lazy");case 13:return Q1("Suspense");case 19:return Q1("SuspenseList");case 0:case 2:case 15:return e=gE(e.type,!1),e;case 11:return e=gE(e.type.render,!1),e;case 1:return e=gE(e.type,!0),e;default:return""}}function fC(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Q0:return"Fragment";case J0:return"Portal";case cC:return"Profiler";case dI:return"StrictMode";case uC:return"Suspense";case hC:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case T9:return(e.displayName||"Context")+".Consumer";case E9:return(e._context.displayName||"Context")+".Provider";case pI:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gI:return t=e.displayName||null,t!==null?t:fC(e.type)||"Memo";case Yd:t=e._payload,e=e._init;try{return fC(e(t))}catch{}}return null}function XG(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fC(t);case 8:return t===dI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Pp(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function P9(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function KG(e){var t=P9(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){n=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Yb(e){e._valueTracker||(e._valueTracker=KG(e))}function I9(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=P9(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Bw(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function dC(e,t){var r=t.checked;return qo({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function P8(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Pp(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function R9(e,t){t=t.checked,t!=null&&fI(e,"checked",t,!1)}function pC(e,t){R9(e,t);var r=Pp(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?gC(e,t.type,r):t.hasOwnProperty("defaultValue")&&gC(e,t.type,Pp(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function I8(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function gC(e,t,r){(t!=="number"||Bw(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ev=Array.isArray;function xy(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Pp(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function mC(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(fr(91));return qo({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function R8(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(fr(92));if(ev(r)){if(1<r.length)throw Error(fr(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Pp(r)}}function k9(e,t){var r=Pp(t.value),n=Pp(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function k8(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function M9(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yC(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?M9(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zb,O9=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Zb=Zb||document.createElement("div"),Zb.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Hv(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var _v={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GG=["Webkit","ms","Moz","O"];Object.keys(_v).forEach(function(e){GG.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_v[t]=_v[e]})});function N9(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||_v.hasOwnProperty(e)&&_v[e]?(""+t).trim():t+"px"}function D9(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=N9(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var YG=qo({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _C(e,t){if(t){if(YG[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(fr(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(fr(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(fr(61))}if(t.style!=null&&typeof t.style!="object")throw Error(fr(62))}}function vC(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bC=null;function mI(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xC=null,wy=null,Sy=null;function M8(e){if(e=K2(e)){if(typeof xC!="function")throw Error(fr(280));var t=e.stateNode;t&&(t=NS(t),xC(e.stateNode,e.type,t))}}function L9(e){wy?Sy?Sy.push(e):Sy=[e]:wy=e}function F9(){if(wy){var e=wy,t=Sy;if(Sy=wy=null,M8(e),t)for(e=0;e<t.length;e++)M8(t[e])}}function B9(e,t){return e(t)}function z9(){}var mE=!1;function $9(e,t,r){if(mE)return e(t,r);mE=!0;try{return B9(e,t,r)}finally{mE=!1,(wy!==null||Sy!==null)&&(z9(),F9())}}function qv(e,t){var r=e.stateNode;if(r===null)return null;var n=NS(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(fr(231,t,typeof r));return r}var wC=!1;if(od)try{var b1={};Object.defineProperty(b1,"passive",{get:function(){wC=!0}}),window.addEventListener("test",b1,b1),window.removeEventListener("test",b1,b1)}catch{wC=!1}function ZG(e,t,r,n,i,o,l,s,f){var p=Array.prototype.slice.call(arguments,3);try{t.apply(r,p)}catch(v){this.onError(v)}}var vv=!1,zw=null,$w=!1,SC=null,JG={onError:function(e){vv=!0,zw=e}};function QG(e,t,r,n,i,o,l,s,f){vv=!1,zw=null,ZG.apply(JG,arguments)}function eY(e,t,r,n,i,o,l,s,f){if(QG.apply(this,arguments),vv){if(vv){var p=zw;vv=!1,zw=null}else throw Error(fr(198));$w||($w=!0,SC=p)}}function hm(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function U9(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function O8(e){if(hm(e)!==e)throw Error(fr(188))}function tY(e){var t=e.alternate;if(!t){if(t=hm(e),t===null)throw Error(fr(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return O8(i),e;if(o===n)return O8(i),t;o=o.sibling}throw Error(fr(188))}if(r.return!==n.return)r=i,n=o;else{for(var l=!1,s=i.child;s;){if(s===r){l=!0,r=i,n=o;break}if(s===n){l=!0,n=i,r=o;break}s=s.sibling}if(!l){for(s=o.child;s;){if(s===r){l=!0,r=o,n=i;break}if(s===n){l=!0,n=o,r=i;break}s=s.sibling}if(!l)throw Error(fr(189))}}if(r.alternate!==n)throw Error(fr(190))}if(r.tag!==3)throw Error(fr(188));return r.stateNode.current===r?e:t}function j9(e){return e=tY(e),e!==null?V9(e):null}function V9(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=V9(e);if(t!==null)return t;e=e.sibling}return null}var H9=Wc.unstable_scheduleCallback,N8=Wc.unstable_cancelCallback,rY=Wc.unstable_shouldYield,nY=Wc.unstable_requestPaint,ys=Wc.unstable_now,iY=Wc.unstable_getCurrentPriorityLevel,yI=Wc.unstable_ImmediatePriority,q9=Wc.unstable_UserBlockingPriority,Uw=Wc.unstable_NormalPriority,oY=Wc.unstable_LowPriority,W9=Wc.unstable_IdlePriority,RS=null,hf=null;function sY(e){if(hf&&typeof hf.onCommitFiberRoot=="function")try{hf.onCommitFiberRoot(RS,e,void 0,(e.current.flags&128)===128)}catch{}}var lh=Math.clz32?Math.clz32:cY,aY=Math.log,lY=Math.LN2;function cY(e){return e>>>=0,e===0?32:31-(aY(e)/lY|0)|0}var Jb=64,Qb=4194304;function tv(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function jw(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,l=r&268435455;if(l!==0){var s=l&~i;s!==0?n=tv(s):(o&=l,o!==0&&(n=tv(o)))}else l=r&~i,l!==0?n=tv(l):o!==0&&(n=tv(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-lh(t),i=1<<r,n|=e[r],t&=~i;return n}function uY(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hY(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-lh(o),s=1<<l,f=i[l];f===-1?(!(s&r)||s&n)&&(i[l]=uY(s,t)):f<=t&&(e.expiredLanes|=s),o&=~s}}function AC(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function X9(){var e=Jb;return Jb<<=1,!(Jb&4194240)&&(Jb=64),e}function yE(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function W2(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-lh(t),e[t]=r}function fY(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-lh(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}function _I(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-lh(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Ui=0;function K9(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var G9,vI,Y9,Z9,J9,EC=!1,ex=[],vp=null,bp=null,xp=null,Wv=new Map,Xv=new Map,rp=[],dY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function D8(e,t){switch(e){case"focusin":case"focusout":vp=null;break;case"dragenter":case"dragleave":bp=null;break;case"mouseover":case"mouseout":xp=null;break;case"pointerover":case"pointerout":Wv.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xv.delete(t.pointerId)}}function x1(e,t,r,n,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},t!==null&&(t=K2(t),t!==null&&vI(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function pY(e,t,r,n,i){switch(t){case"focusin":return vp=x1(vp,e,t,r,n,i),!0;case"dragenter":return bp=x1(bp,e,t,r,n,i),!0;case"mouseover":return xp=x1(xp,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return Wv.set(o,x1(Wv.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Xv.set(o,x1(Xv.get(o)||null,e,t,r,n,i)),!0}return!1}function Q9(e){var t=bg(e.target);if(t!==null){var r=hm(t);if(r!==null){if(t=r.tag,t===13){if(t=U9(r),t!==null){e.blockedOn=t,J9(e.priority,function(){Y9(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function iw(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=TC(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);bC=n,r.target.dispatchEvent(n),bC=null}else return t=K2(r),t!==null&&vI(t),e.blockedOn=r,!1;t.shift()}return!0}function L8(e,t,r){iw(e)&&r.delete(t)}function gY(){EC=!1,vp!==null&&iw(vp)&&(vp=null),bp!==null&&iw(bp)&&(bp=null),xp!==null&&iw(xp)&&(xp=null),Wv.forEach(L8),Xv.forEach(L8)}function w1(e,t){e.blockedOn===t&&(e.blockedOn=null,EC||(EC=!0,Wc.unstable_scheduleCallback(Wc.unstable_NormalPriority,gY)))}function Kv(e){function t(i){return w1(i,e)}if(0<ex.length){w1(ex[0],e);for(var r=1;r<ex.length;r++){var n=ex[r];n.blockedOn===e&&(n.blockedOn=null)}}for(vp!==null&&w1(vp,e),bp!==null&&w1(bp,e),xp!==null&&w1(xp,e),Wv.forEach(t),Xv.forEach(t),r=0;r<rp.length;r++)n=rp[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<rp.length&&(r=rp[0],r.blockedOn===null);)Q9(r),r.blockedOn===null&&rp.shift()}var Ay=_d.ReactCurrentBatchConfig,Vw=!0;function mY(e,t,r,n){var i=Ui,o=Ay.transition;Ay.transition=null;try{Ui=1,bI(e,t,r,n)}finally{Ui=i,Ay.transition=o}}function yY(e,t,r,n){var i=Ui,o=Ay.transition;Ay.transition=null;try{Ui=4,bI(e,t,r,n)}finally{Ui=i,Ay.transition=o}}function bI(e,t,r,n){if(Vw){var i=TC(e,t,r,n);if(i===null)CE(e,t,n,Hw,r),D8(e,n);else if(pY(i,e,t,r,n))n.stopPropagation();else if(D8(e,n),t&4&&-1<dY.indexOf(e)){for(;i!==null;){var o=K2(i);if(o!==null&&G9(o),o=TC(e,t,r,n),o===null&&CE(e,t,n,Hw,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else CE(e,t,n,null,r)}}var Hw=null;function TC(e,t,r,n){if(Hw=null,e=mI(n),e=bg(e),e!==null)if(t=hm(e),t===null)e=null;else if(r=t.tag,r===13){if(e=U9(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Hw=e,null}function ez(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iY()){case yI:return 1;case q9:return 4;case Uw:case oY:return 16;case W9:return 536870912;default:return 16}default:return 16}}var dp=null,xI=null,ow=null;function tz(){if(ow)return ow;var e,t=xI,r=t.length,n,i="value"in dp?dp.value:dp.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var l=r-e;for(n=1;n<=l&&t[r-n]===i[o-n];n++);return ow=i.slice(e,1<n?1-n:void 0)}function sw(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function tx(){return!0}function F8(){return!1}function Gc(e){function t(r,n,i,o,l){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?tx:F8,this.isPropagationStopped=F8,this}return qo(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=tx)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=tx)},persist:function(){},isPersistent:tx}),t}var R_={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wI=Gc(R_),X2=qo({},R_,{view:0,detail:0}),_Y=Gc(X2),_E,vE,S1,kS=qo({},X2,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:SI,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==S1&&(S1&&e.type==="mousemove"?(_E=e.screenX-S1.screenX,vE=e.screenY-S1.screenY):vE=_E=0,S1=e),_E)},movementY:function(e){return"movementY"in e?e.movementY:vE}}),B8=Gc(kS),vY=qo({},kS,{dataTransfer:0}),bY=Gc(vY),xY=qo({},X2,{relatedTarget:0}),bE=Gc(xY),wY=qo({},R_,{animationName:0,elapsedTime:0,pseudoElement:0}),SY=Gc(wY),AY=qo({},R_,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),EY=Gc(AY),TY=qo({},R_,{data:0}),z8=Gc(TY),CY={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PY={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},IY={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RY(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=IY[e])?!!t[e]:!1}function SI(){return RY}var kY=qo({},X2,{key:function(e){if(e.key){var t=CY[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=sw(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?PY[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:SI,charCode:function(e){return e.type==="keypress"?sw(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?sw(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),MY=Gc(kY),OY=qo({},kS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$8=Gc(OY),NY=qo({},X2,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:SI}),DY=Gc(NY),LY=qo({},R_,{propertyName:0,elapsedTime:0,pseudoElement:0}),FY=Gc(LY),BY=qo({},kS,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zY=Gc(BY),$Y=[9,13,27,32],AI=od&&"CompositionEvent"in window,bv=null;od&&"documentMode"in document&&(bv=document.documentMode);var UY=od&&"TextEvent"in window&&!bv,rz=od&&(!AI||bv&&8<bv&&11>=bv),U8=" ",j8=!1;function nz(e,t){switch(e){case"keyup":return $Y.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iz(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ey=!1;function jY(e,t){switch(e){case"compositionend":return iz(t);case"keypress":return t.which!==32?null:(j8=!0,U8);case"textInput":return e=t.data,e===U8&&j8?null:e;default:return null}}function VY(e,t){if(ey)return e==="compositionend"||!AI&&nz(e,t)?(e=tz(),ow=xI=dp=null,ey=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rz&&t.locale!=="ko"?null:t.data;default:return null}}var HY={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function V8(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!HY[e.type]:t==="textarea"}function oz(e,t,r,n){L9(n),t=qw(t,"onChange"),0<t.length&&(r=new wI("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var xv=null,Gv=null;function qY(e){mz(e,0)}function MS(e){var t=ny(e);if(I9(t))return e}function WY(e,t){if(e==="change")return t}var sz=!1;if(od){var xE;if(od){var wE="oninput"in document;if(!wE){var H8=document.createElement("div");H8.setAttribute("oninput","return;"),wE=typeof H8.oninput=="function"}xE=wE}else xE=!1;sz=xE&&(!document.documentMode||9<document.documentMode)}function q8(){xv&&(xv.detachEvent("onpropertychange",az),Gv=xv=null)}function az(e){if(e.propertyName==="value"&&MS(Gv)){var t=[];oz(t,Gv,e,mI(e)),$9(qY,t)}}function XY(e,t,r){e==="focusin"?(q8(),xv=t,Gv=r,xv.attachEvent("onpropertychange",az)):e==="focusout"&&q8()}function KY(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return MS(Gv)}function GY(e,t){if(e==="click")return MS(t)}function YY(e,t){if(e==="input"||e==="change")return MS(t)}function ZY(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hh=typeof Object.is=="function"?Object.is:ZY;function Yv(e,t){if(hh(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!lC.call(t,i)||!hh(e[i],t[i]))return!1}return!0}function W8(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function X8(e,t){var r=W8(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=W8(r)}}function lz(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lz(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function cz(){for(var e=window,t=Bw();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Bw(e.document)}return t}function EI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function JY(e){var t=cz(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&lz(r.ownerDocument.documentElement,r)){if(n!==null&&EI(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=X8(r,o);var l=X8(r,n);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var QY=od&&"documentMode"in document&&11>=document.documentMode,ty=null,CC=null,wv=null,PC=!1;function K8(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;PC||ty==null||ty!==Bw(n)||(n=ty,"selectionStart"in n&&EI(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),wv&&Yv(wv,n)||(wv=n,n=qw(CC,"onSelect"),0<n.length&&(t=new wI("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ty)))}function rx(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ry={animationend:rx("Animation","AnimationEnd"),animationiteration:rx("Animation","AnimationIteration"),animationstart:rx("Animation","AnimationStart"),transitionend:rx("Transition","TransitionEnd")},SE={},uz={};od&&(uz=document.createElement("div").style,"AnimationEvent"in window||(delete ry.animationend.animation,delete ry.animationiteration.animation,delete ry.animationstart.animation),"TransitionEvent"in window||delete ry.transitionend.transition);function OS(e){if(SE[e])return SE[e];if(!ry[e])return e;var t=ry[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in uz)return SE[e]=t[r];return e}var hz=OS("animationend"),fz=OS("animationiteration"),dz=OS("animationstart"),pz=OS("transitionend"),gz=new Map,G8="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fp(e,t){gz.set(e,t),um(t,[e])}for(var AE=0;AE<G8.length;AE++){var EE=G8[AE],eZ=EE.toLowerCase(),tZ=EE[0].toUpperCase()+EE.slice(1);Fp(eZ,"on"+tZ)}Fp(hz,"onAnimationEnd");Fp(fz,"onAnimationIteration");Fp(dz,"onAnimationStart");Fp("dblclick","onDoubleClick");Fp("focusin","onFocus");Fp("focusout","onBlur");Fp(pz,"onTransitionEnd");n_("onMouseEnter",["mouseout","mouseover"]);n_("onMouseLeave",["mouseout","mouseover"]);n_("onPointerEnter",["pointerout","pointerover"]);n_("onPointerLeave",["pointerout","pointerover"]);um("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));um("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));um("onBeforeInput",["compositionend","keypress","textInput","paste"]);um("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));um("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));um("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(rv));function Y8(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,eY(n,t,void 0,e),e.currentTarget=null}function mz(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var l=n.length-1;0<=l;l--){var s=n[l],f=s.instance,p=s.currentTarget;if(s=s.listener,f!==o&&i.isPropagationStopped())break e;Y8(i,s,p),o=f}else for(l=0;l<n.length;l++){if(s=n[l],f=s.instance,p=s.currentTarget,s=s.listener,f!==o&&i.isPropagationStopped())break e;Y8(i,s,p),o=f}}}if($w)throw e=SC,$w=!1,SC=null,e}function wo(e,t){var r=t[OC];r===void 0&&(r=t[OC]=new Set);var n=e+"__bubble";r.has(n)||(yz(t,e,2,!1),r.add(n))}function TE(e,t,r){var n=0;t&&(n|=4),yz(r,e,n,t)}var nx="_reactListening"+Math.random().toString(36).slice(2);function Zv(e){if(!e[nx]){e[nx]=!0,A9.forEach(function(r){r!=="selectionchange"&&(rZ.has(r)||TE(r,!1,e),TE(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[nx]||(t[nx]=!0,TE("selectionchange",!1,t))}}function yz(e,t,r,n){switch(ez(t)){case 1:var i=mY;break;case 4:i=yY;break;default:i=bI}r=i.bind(null,t,r,e),i=void 0,!wC||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function CE(e,t,r,n,i){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(l===4)for(l=n.return;l!==null;){var f=l.tag;if((f===3||f===4)&&(f=l.stateNode.containerInfo,f===i||f.nodeType===8&&f.parentNode===i))return;l=l.return}for(;s!==null;){if(l=bg(s),l===null)return;if(f=l.tag,f===5||f===6){n=o=l;continue e}s=s.parentNode}}n=n.return}$9(function(){var p=o,v=mI(r),x=[];e:{var S=gz.get(e);if(S!==void 0){var A=wI,k=e;switch(e){case"keypress":if(sw(r)===0)break e;case"keydown":case"keyup":A=MY;break;case"focusin":k="focus",A=bE;break;case"focusout":k="blur",A=bE;break;case"beforeblur":case"afterblur":A=bE;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=B8;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=bY;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=DY;break;case hz:case fz:case dz:A=SY;break;case pz:A=FY;break;case"scroll":A=_Y;break;case"wheel":A=zY;break;case"copy":case"cut":case"paste":A=EY;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=$8}var R=(t&4)!==0,z=!R&&e==="scroll",N=R?S!==null?S+"Capture":null:S;R=[];for(var B=p,U;B!==null;){U=B;var K=U.stateNode;if(U.tag===5&&K!==null&&(U=K,N!==null&&(K=qv(B,N),K!=null&&R.push(Jv(B,K,U)))),z)break;B=B.return}0<R.length&&(S=new A(S,k,null,r,v),x.push({event:S,listeners:R}))}}if(!(t&7)){e:{if(S=e==="mouseover"||e==="pointerover",A=e==="mouseout"||e==="pointerout",S&&r!==bC&&(k=r.relatedTarget||r.fromElement)&&(bg(k)||k[sd]))break e;if((A||S)&&(S=v.window===v?v:(S=v.ownerDocument)?S.defaultView||S.parentWindow:window,A?(k=r.relatedTarget||r.toElement,A=p,k=k?bg(k):null,k!==null&&(z=hm(k),k!==z||k.tag!==5&&k.tag!==6)&&(k=null)):(A=null,k=p),A!==k)){if(R=B8,K="onMouseLeave",N="onMouseEnter",B="mouse",(e==="pointerout"||e==="pointerover")&&(R=$8,K="onPointerLeave",N="onPointerEnter",B="pointer"),z=A==null?S:ny(A),U=k==null?S:ny(k),S=new R(K,B+"leave",A,r,v),S.target=z,S.relatedTarget=U,K=null,bg(v)===p&&(R=new R(N,B+"enter",k,r,v),R.target=U,R.relatedTarget=z,K=R),z=K,A&&k)t:{for(R=A,N=k,B=0,U=R;U;U=Qm(U))B++;for(U=0,K=N;K;K=Qm(K))U++;for(;0<B-U;)R=Qm(R),B--;for(;0<U-B;)N=Qm(N),U--;for(;B--;){if(R===N||N!==null&&R===N.alternate)break t;R=Qm(R),N=Qm(N)}R=null}else R=null;A!==null&&Z8(x,S,A,R,!1),k!==null&&z!==null&&Z8(x,z,k,R,!0)}}e:{if(S=p?ny(p):window,A=S.nodeName&&S.nodeName.toLowerCase(),A==="select"||A==="input"&&S.type==="file")var ne=WY;else if(V8(S))if(sz)ne=YY;else{ne=KY;var ee=XY}else(A=S.nodeName)&&A.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&(ne=GY);if(ne&&(ne=ne(e,p))){oz(x,ne,r,v);break e}ee&&ee(e,S,p),e==="focusout"&&(ee=S._wrapperState)&&ee.controlled&&S.type==="number"&&gC(S,"number",S.value)}switch(ee=p?ny(p):window,e){case"focusin":(V8(ee)||ee.contentEditable==="true")&&(ty=ee,CC=p,wv=null);break;case"focusout":wv=CC=ty=null;break;case"mousedown":PC=!0;break;case"contextmenu":case"mouseup":case"dragend":PC=!1,K8(x,r,v);break;case"selectionchange":if(QY)break;case"keydown":case"keyup":K8(x,r,v)}var Q;if(AI)e:{switch(e){case"compositionstart":var re="onCompositionStart";break e;case"compositionend":re="onCompositionEnd";break e;case"compositionupdate":re="onCompositionUpdate";break e}re=void 0}else ey?nz(e,r)&&(re="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(re="onCompositionStart");re&&(rz&&r.locale!=="ko"&&(ey||re!=="onCompositionStart"?re==="onCompositionEnd"&&ey&&(Q=tz()):(dp=v,xI="value"in dp?dp.value:dp.textContent,ey=!0)),ee=qw(p,re),0<ee.length&&(re=new z8(re,e,null,r,v),x.push({event:re,listeners:ee}),Q?re.data=Q:(Q=iz(r),Q!==null&&(re.data=Q)))),(Q=UY?jY(e,r):VY(e,r))&&(p=qw(p,"onBeforeInput"),0<p.length&&(v=new z8("onBeforeInput","beforeinput",null,r,v),x.push({event:v,listeners:p}),v.data=Q))}mz(x,t)})}function Jv(e,t,r){return{instance:e,listener:t,currentTarget:r}}function qw(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=qv(e,r),o!=null&&n.unshift(Jv(e,o,i)),o=qv(e,t),o!=null&&n.push(Jv(e,o,i))),e=e.return}return n}function Qm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Z8(e,t,r,n,i){for(var o=t._reactName,l=[];r!==null&&r!==n;){var s=r,f=s.alternate,p=s.stateNode;if(f!==null&&f===n)break;s.tag===5&&p!==null&&(s=p,i?(f=qv(r,o),f!=null&&l.unshift(Jv(r,f,s))):i||(f=qv(r,o),f!=null&&l.push(Jv(r,f,s)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var nZ=/\r\n?/g,iZ=/\u0000|\uFFFD/g;function J8(e){return(typeof e=="string"?e:""+e).replace(nZ,`
`).replace(iZ,"")}function ix(e,t,r){if(t=J8(t),J8(e)!==t&&r)throw Error(fr(425))}function Ww(){}var IC=null,RC=null;function kC(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var MC=typeof setTimeout=="function"?setTimeout:void 0,oZ=typeof clearTimeout=="function"?clearTimeout:void 0,Q8=typeof Promise=="function"?Promise:void 0,sZ=typeof queueMicrotask=="function"?queueMicrotask:typeof Q8<"u"?function(e){return Q8.resolve(null).then(e).catch(aZ)}:MC;function aZ(e){setTimeout(function(){throw e})}function PE(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Kv(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Kv(t)}function wp(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function eO(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var k_=Math.random().toString(36).slice(2),nf="__reactFiber$"+k_,Qv="__reactProps$"+k_,sd="__reactContainer$"+k_,OC="__reactEvents$"+k_,lZ="__reactListeners$"+k_,cZ="__reactHandles$"+k_;function bg(e){var t=e[nf];if(t)return t;for(var r=e.parentNode;r;){if(t=r[sd]||r[nf]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=eO(e);e!==null;){if(r=e[nf])return r;e=eO(e)}return t}e=r,r=e.parentNode}return null}function K2(e){return e=e[nf]||e[sd],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ny(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(fr(33))}function NS(e){return e[Qv]||null}var NC=[],iy=-1;function Bp(e){return{current:e}}function To(e){0>iy||(e.current=NC[iy],NC[iy]=null,iy--)}function ho(e,t){iy++,NC[iy]=e.current,e.current=t}var Ip={},ml=Bp(Ip),uc=Bp(!1),Kg=Ip;function i_(e,t){var r=e.type.contextTypes;if(!r)return Ip;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function hc(e){return e=e.childContextTypes,e!=null}function Xw(){To(uc),To(ml)}function tO(e,t,r){if(ml.current!==Ip)throw Error(fr(168));ho(ml,t),ho(uc,r)}function _z(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(fr(108,XG(e)||"Unknown",i));return qo({},r,n)}function Kw(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ip,Kg=ml.current,ho(ml,e),ho(uc,uc.current),!0}function rO(e,t,r){var n=e.stateNode;if(!n)throw Error(fr(169));r?(e=_z(e,t,Kg),n.__reactInternalMemoizedMergedChildContext=e,To(uc),To(ml),ho(ml,e)):To(uc),ho(uc,r)}var Zf=null,DS=!1,IE=!1;function vz(e){Zf===null?Zf=[e]:Zf.push(e)}function uZ(e){DS=!0,vz(e)}function zp(){if(!IE&&Zf!==null){IE=!0;var e=0,t=Ui;try{var r=Zf;for(Ui=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Zf=null,DS=!1}catch(i){throw Zf!==null&&(Zf=Zf.slice(e+1)),H9(yI,zp),i}finally{Ui=t,IE=!1}}return null}var oy=[],sy=0,Gw=null,Yw=0,yu=[],_u=0,Gg=null,Qf=1,ed="";function lg(e,t){oy[sy++]=Yw,oy[sy++]=Gw,Gw=e,Yw=t}function bz(e,t,r){yu[_u++]=Qf,yu[_u++]=ed,yu[_u++]=Gg,Gg=e;var n=Qf;e=ed;var i=32-lh(n)-1;n&=~(1<<i),r+=1;var o=32-lh(t)+i;if(30<o){var l=i-i%5;o=(n&(1<<l)-1).toString(32),n>>=l,i-=l,Qf=1<<32-lh(t)+i|r<<i|n,ed=o+e}else Qf=1<<o|r<<i|n,ed=e}function TI(e){e.return!==null&&(lg(e,1),bz(e,1,0))}function CI(e){for(;e===Gw;)Gw=oy[--sy],oy[sy]=null,Yw=oy[--sy],oy[sy]=null;for(;e===Gg;)Gg=yu[--_u],yu[_u]=null,ed=yu[--_u],yu[_u]=null,Qf=yu[--_u],yu[_u]=null}var Hc=null,Vc=null,No=!1,th=null;function xz(e,t){var r=Su(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function nO(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Hc=e,Vc=wp(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Hc=e,Vc=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Gg!==null?{id:Qf,overflow:ed}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Su(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Hc=e,Vc=null,!0):!1;default:return!1}}function DC(e){return(e.mode&1)!==0&&(e.flags&128)===0}function LC(e){if(No){var t=Vc;if(t){var r=t;if(!nO(e,t)){if(DC(e))throw Error(fr(418));t=wp(r.nextSibling);var n=Hc;t&&nO(e,t)?xz(n,r):(e.flags=e.flags&-4097|2,No=!1,Hc=e)}}else{if(DC(e))throw Error(fr(418));e.flags=e.flags&-4097|2,No=!1,Hc=e}}}function iO(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Hc=e}function ox(e){if(e!==Hc)return!1;if(!No)return iO(e),No=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!kC(e.type,e.memoizedProps)),t&&(t=Vc)){if(DC(e))throw wz(),Error(fr(418));for(;t;)xz(e,t),t=wp(t.nextSibling)}if(iO(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(fr(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Vc=wp(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Vc=null}}else Vc=Hc?wp(e.stateNode.nextSibling):null;return!0}function wz(){for(var e=Vc;e;)e=wp(e.nextSibling)}function o_(){Vc=Hc=null,No=!1}function PI(e){th===null?th=[e]:th.push(e)}var hZ=_d.ReactCurrentBatchConfig;function A1(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(fr(309));var n=r.stateNode}if(!n)throw Error(fr(147,e));var i=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var s=i.refs;l===null?delete s[o]:s[o]=l},t._stringRef=o,t)}if(typeof e!="string")throw Error(fr(284));if(!r._owner)throw Error(fr(290,e))}return e}function sx(e,t){throw e=Object.prototype.toString.call(t),Error(fr(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function oO(e){var t=e._init;return t(e._payload)}function Sz(e){function t(N,B){if(e){var U=N.deletions;U===null?(N.deletions=[B],N.flags|=16):U.push(B)}}function r(N,B){if(!e)return null;for(;B!==null;)t(N,B),B=B.sibling;return null}function n(N,B){for(N=new Map;B!==null;)B.key!==null?N.set(B.key,B):N.set(B.index,B),B=B.sibling;return N}function i(N,B){return N=Tp(N,B),N.index=0,N.sibling=null,N}function o(N,B,U){return N.index=U,e?(U=N.alternate,U!==null?(U=U.index,U<B?(N.flags|=2,B):U):(N.flags|=2,B)):(N.flags|=1048576,B)}function l(N){return e&&N.alternate===null&&(N.flags|=2),N}function s(N,B,U,K){return B===null||B.tag!==6?(B=LE(U,N.mode,K),B.return=N,B):(B=i(B,U),B.return=N,B)}function f(N,B,U,K){var ne=U.type;return ne===Q0?v(N,B,U.props.children,K,U.key):B!==null&&(B.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===Yd&&oO(ne)===B.type)?(K=i(B,U.props),K.ref=A1(N,B,U),K.return=N,K):(K=dw(U.type,U.key,U.props,null,N.mode,K),K.ref=A1(N,B,U),K.return=N,K)}function p(N,B,U,K){return B===null||B.tag!==4||B.stateNode.containerInfo!==U.containerInfo||B.stateNode.implementation!==U.implementation?(B=FE(U,N.mode,K),B.return=N,B):(B=i(B,U.children||[]),B.return=N,B)}function v(N,B,U,K,ne){return B===null||B.tag!==7?(B=Bg(U,N.mode,K,ne),B.return=N,B):(B=i(B,U),B.return=N,B)}function x(N,B,U){if(typeof B=="string"&&B!==""||typeof B=="number")return B=LE(""+B,N.mode,U),B.return=N,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Gb:return U=dw(B.type,B.key,B.props,null,N.mode,U),U.ref=A1(N,null,B),U.return=N,U;case J0:return B=FE(B,N.mode,U),B.return=N,B;case Yd:var K=B._init;return x(N,K(B._payload),U)}if(ev(B)||v1(B))return B=Bg(B,N.mode,U,null),B.return=N,B;sx(N,B)}return null}function S(N,B,U,K){var ne=B!==null?B.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return ne!==null?null:s(N,B,""+U,K);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Gb:return U.key===ne?f(N,B,U,K):null;case J0:return U.key===ne?p(N,B,U,K):null;case Yd:return ne=U._init,S(N,B,ne(U._payload),K)}if(ev(U)||v1(U))return ne!==null?null:v(N,B,U,K,null);sx(N,U)}return null}function A(N,B,U,K,ne){if(typeof K=="string"&&K!==""||typeof K=="number")return N=N.get(U)||null,s(B,N,""+K,ne);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case Gb:return N=N.get(K.key===null?U:K.key)||null,f(B,N,K,ne);case J0:return N=N.get(K.key===null?U:K.key)||null,p(B,N,K,ne);case Yd:var ee=K._init;return A(N,B,U,ee(K._payload),ne)}if(ev(K)||v1(K))return N=N.get(U)||null,v(B,N,K,ne,null);sx(B,K)}return null}function k(N,B,U,K){for(var ne=null,ee=null,Q=B,re=B=0,Se=null;Q!==null&&re<U.length;re++){Q.index>re?(Se=Q,Q=null):Se=Q.sibling;var J=S(N,Q,U[re],K);if(J===null){Q===null&&(Q=Se);break}e&&Q&&J.alternate===null&&t(N,Q),B=o(J,B,re),ee===null?ne=J:ee.sibling=J,ee=J,Q=Se}if(re===U.length)return r(N,Q),No&&lg(N,re),ne;if(Q===null){for(;re<U.length;re++)Q=x(N,U[re],K),Q!==null&&(B=o(Q,B,re),ee===null?ne=Q:ee.sibling=Q,ee=Q);return No&&lg(N,re),ne}for(Q=n(N,Q);re<U.length;re++)Se=A(Q,N,re,U[re],K),Se!==null&&(e&&Se.alternate!==null&&Q.delete(Se.key===null?re:Se.key),B=o(Se,B,re),ee===null?ne=Se:ee.sibling=Se,ee=Se);return e&&Q.forEach(function(G){return t(N,G)}),No&&lg(N,re),ne}function R(N,B,U,K){var ne=v1(U);if(typeof ne!="function")throw Error(fr(150));if(U=ne.call(U),U==null)throw Error(fr(151));for(var ee=ne=null,Q=B,re=B=0,Se=null,J=U.next();Q!==null&&!J.done;re++,J=U.next()){Q.index>re?(Se=Q,Q=null):Se=Q.sibling;var G=S(N,Q,J.value,K);if(G===null){Q===null&&(Q=Se);break}e&&Q&&G.alternate===null&&t(N,Q),B=o(G,B,re),ee===null?ne=G:ee.sibling=G,ee=G,Q=Se}if(J.done)return r(N,Q),No&&lg(N,re),ne;if(Q===null){for(;!J.done;re++,J=U.next())J=x(N,J.value,K),J!==null&&(B=o(J,B,re),ee===null?ne=J:ee.sibling=J,ee=J);return No&&lg(N,re),ne}for(Q=n(N,Q);!J.done;re++,J=U.next())J=A(Q,N,re,J.value,K),J!==null&&(e&&J.alternate!==null&&Q.delete(J.key===null?re:J.key),B=o(J,B,re),ee===null?ne=J:ee.sibling=J,ee=J);return e&&Q.forEach(function(se){return t(N,se)}),No&&lg(N,re),ne}function z(N,B,U,K){if(typeof U=="object"&&U!==null&&U.type===Q0&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case Gb:e:{for(var ne=U.key,ee=B;ee!==null;){if(ee.key===ne){if(ne=U.type,ne===Q0){if(ee.tag===7){r(N,ee.sibling),B=i(ee,U.props.children),B.return=N,N=B;break e}}else if(ee.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===Yd&&oO(ne)===ee.type){r(N,ee.sibling),B=i(ee,U.props),B.ref=A1(N,ee,U),B.return=N,N=B;break e}r(N,ee);break}else t(N,ee);ee=ee.sibling}U.type===Q0?(B=Bg(U.props.children,N.mode,K,U.key),B.return=N,N=B):(K=dw(U.type,U.key,U.props,null,N.mode,K),K.ref=A1(N,B,U),K.return=N,N=K)}return l(N);case J0:e:{for(ee=U.key;B!==null;){if(B.key===ee)if(B.tag===4&&B.stateNode.containerInfo===U.containerInfo&&B.stateNode.implementation===U.implementation){r(N,B.sibling),B=i(B,U.children||[]),B.return=N,N=B;break e}else{r(N,B);break}else t(N,B);B=B.sibling}B=FE(U,N.mode,K),B.return=N,N=B}return l(N);case Yd:return ee=U._init,z(N,B,ee(U._payload),K)}if(ev(U))return k(N,B,U,K);if(v1(U))return R(N,B,U,K);sx(N,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,B!==null&&B.tag===6?(r(N,B.sibling),B=i(B,U),B.return=N,N=B):(r(N,B),B=LE(U,N.mode,K),B.return=N,N=B),l(N)):r(N,B)}return z}var s_=Sz(!0),Az=Sz(!1),Zw=Bp(null),Jw=null,ay=null,II=null;function RI(){II=ay=Jw=null}function kI(e){var t=Zw.current;To(Zw),e._currentValue=t}function FC(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ey(e,t){Jw=e,II=ay=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ac=!0),e.firstContext=null)}function Ru(e){var t=e._currentValue;if(II!==e)if(e={context:e,memoizedValue:t,next:null},ay===null){if(Jw===null)throw Error(fr(308));ay=e,Jw.dependencies={lanes:0,firstContext:e}}else ay=ay.next=e;return t}var xg=null;function MI(e){xg===null?xg=[e]:xg.push(e)}function Ez(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,MI(t)):(r.next=i.next,i.next=r),t.interleaved=r,ad(e,n)}function ad(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Zd=!1;function OI(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tz(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function nd(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Sp(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,pi&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,ad(e,r)}return i=n.interleaved,i===null?(t.next=t,MI(n)):(t.next=i.next,i.next=t),n.interleaved=t,ad(e,r)}function aw(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,_I(e,r)}}function sO(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=l:o=o.next=l,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Qw(e,t,r,n){var i=e.updateQueue;Zd=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var f=s,p=f.next;f.next=null,l===null?o=p:l.next=p,l=f;var v=e.alternate;v!==null&&(v=v.updateQueue,s=v.lastBaseUpdate,s!==l&&(s===null?v.firstBaseUpdate=p:s.next=p,v.lastBaseUpdate=f))}if(o!==null){var x=i.baseState;l=0,v=p=f=null,s=o;do{var S=s.lane,A=s.eventTime;if((n&S)===S){v!==null&&(v=v.next={eventTime:A,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var k=e,R=s;switch(S=t,A=r,R.tag){case 1:if(k=R.payload,typeof k=="function"){x=k.call(A,x,S);break e}x=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=R.payload,S=typeof k=="function"?k.call(A,x,S):k,S==null)break e;x=qo({},x,S);break e;case 2:Zd=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,S=i.effects,S===null?i.effects=[s]:S.push(s))}else A={eventTime:A,lane:S,tag:s.tag,payload:s.payload,callback:s.callback,next:null},v===null?(p=v=A,f=x):v=v.next=A,l|=S;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;S=s,s=S.next,S.next=null,i.lastBaseUpdate=S,i.shared.pending=null}}while(!0);if(v===null&&(f=x),i.baseState=f,i.firstBaseUpdate=p,i.lastBaseUpdate=v,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Zg|=l,e.lanes=l,e.memoizedState=x}}function aO(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(fr(191,i));i.call(n)}}}var G2={},ff=Bp(G2),e2=Bp(G2),t2=Bp(G2);function wg(e){if(e===G2)throw Error(fr(174));return e}function NI(e,t){switch(ho(t2,t),ho(e2,e),ho(ff,G2),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:yC(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=yC(t,e)}To(ff),ho(ff,t)}function a_(){To(ff),To(e2),To(t2)}function Cz(e){wg(t2.current);var t=wg(ff.current),r=yC(t,e.type);t!==r&&(ho(e2,e),ho(ff,r))}function DI(e){e2.current===e&&(To(ff),To(e2))}var jo=Bp(0);function e5(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var RE=[];function LI(){for(var e=0;e<RE.length;e++)RE[e]._workInProgressVersionPrimary=null;RE.length=0}var lw=_d.ReactCurrentDispatcher,kE=_d.ReactCurrentBatchConfig,Yg=0,Ho=null,Ys=null,ha=null,t5=!1,Sv=!1,r2=0,fZ=0;function sl(){throw Error(fr(321))}function FI(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!hh(e[r],t[r]))return!1;return!0}function BI(e,t,r,n,i,o){if(Yg=o,Ho=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lw.current=e===null||e.memoizedState===null?mZ:yZ,e=r(n,i),Sv){o=0;do{if(Sv=!1,r2=0,25<=o)throw Error(fr(301));o+=1,ha=Ys=null,t.updateQueue=null,lw.current=_Z,e=r(n,i)}while(Sv)}if(lw.current=r5,t=Ys!==null&&Ys.next!==null,Yg=0,ha=Ys=Ho=null,t5=!1,t)throw Error(fr(300));return e}function zI(){var e=r2!==0;return r2=0,e}function Gh(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ha===null?Ho.memoizedState=ha=e:ha=ha.next=e,ha}function ku(){if(Ys===null){var e=Ho.alternate;e=e!==null?e.memoizedState:null}else e=Ys.next;var t=ha===null?Ho.memoizedState:ha.next;if(t!==null)ha=t,Ys=e;else{if(e===null)throw Error(fr(310));Ys=e,e={memoizedState:Ys.memoizedState,baseState:Ys.baseState,baseQueue:Ys.baseQueue,queue:Ys.queue,next:null},ha===null?Ho.memoizedState=ha=e:ha=ha.next=e}return ha}function n2(e,t){return typeof t=="function"?t(e):t}function ME(e){var t=ku(),r=t.queue;if(r===null)throw Error(fr(311));r.lastRenderedReducer=e;var n=Ys,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var s=l=null,f=null,p=o;do{var v=p.lane;if((Yg&v)===v)f!==null&&(f=f.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),n=p.hasEagerState?p.eagerState:e(n,p.action);else{var x={lane:v,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};f===null?(s=f=x,l=n):f=f.next=x,Ho.lanes|=v,Zg|=v}p=p.next}while(p!==null&&p!==o);f===null?l=n:f.next=s,hh(n,t.memoizedState)||(ac=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=f,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do o=i.lane,Ho.lanes|=o,Zg|=o,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function OE(e){var t=ku(),r=t.queue;if(r===null)throw Error(fr(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var l=i=i.next;do o=e(o,l.action),l=l.next;while(l!==i);hh(o,t.memoizedState)||(ac=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function Pz(){}function Iz(e,t){var r=Ho,n=ku(),i=t(),o=!hh(n.memoizedState,i);if(o&&(n.memoizedState=i,ac=!0),n=n.queue,$I(Mz.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||ha!==null&&ha.memoizedState.tag&1){if(r.flags|=2048,i2(9,kz.bind(null,r,n,i,t),void 0,null),da===null)throw Error(fr(349));Yg&30||Rz(r,t,i)}return i}function Rz(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ho.updateQueue,t===null?(t={lastEffect:null,stores:null},Ho.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function kz(e,t,r,n){t.value=r,t.getSnapshot=n,Oz(t)&&Nz(e)}function Mz(e,t,r){return r(function(){Oz(t)&&Nz(e)})}function Oz(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!hh(e,r)}catch{return!0}}function Nz(e){var t=ad(e,1);t!==null&&ch(t,e,1,-1)}function lO(e){var t=Gh();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n2,lastRenderedState:e},t.queue=e,e=e.dispatch=gZ.bind(null,Ho,e),[t.memoizedState,e]}function i2(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ho.updateQueue,t===null?(t={lastEffect:null,stores:null},Ho.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Dz(){return ku().memoizedState}function cw(e,t,r,n){var i=Gh();Ho.flags|=e,i.memoizedState=i2(1|t,r,void 0,n===void 0?null:n)}function LS(e,t,r,n){var i=ku();n=n===void 0?null:n;var o=void 0;if(Ys!==null){var l=Ys.memoizedState;if(o=l.destroy,n!==null&&FI(n,l.deps)){i.memoizedState=i2(t,r,o,n);return}}Ho.flags|=e,i.memoizedState=i2(1|t,r,o,n)}function cO(e,t){return cw(8390656,8,e,t)}function $I(e,t){return LS(2048,8,e,t)}function Lz(e,t){return LS(4,2,e,t)}function Fz(e,t){return LS(4,4,e,t)}function Bz(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zz(e,t,r){return r=r!=null?r.concat([e]):null,LS(4,4,Bz.bind(null,t,e),r)}function UI(){}function $z(e,t){var r=ku();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&FI(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Uz(e,t){var r=ku();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&FI(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function jz(e,t,r){return Yg&21?(hh(r,t)||(r=X9(),Ho.lanes|=r,Zg|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ac=!0),e.memoizedState=r)}function dZ(e,t){var r=Ui;Ui=r!==0&&4>r?r:4,e(!0);var n=kE.transition;kE.transition={};try{e(!1),t()}finally{Ui=r,kE.transition=n}}function Vz(){return ku().memoizedState}function pZ(e,t,r){var n=Ep(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Hz(e))qz(t,r);else if(r=Ez(e,t,r,n),r!==null){var i=Ll();ch(r,e,n,i),Wz(r,t,n)}}function gZ(e,t,r){var n=Ep(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Hz(e))qz(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,s=o(l,r);if(i.hasEagerState=!0,i.eagerState=s,hh(s,l)){var f=t.interleaved;f===null?(i.next=i,MI(t)):(i.next=f.next,f.next=i),t.interleaved=i;return}}catch{}finally{}r=Ez(e,t,i,n),r!==null&&(i=Ll(),ch(r,e,n,i),Wz(r,t,n))}}function Hz(e){var t=e.alternate;return e===Ho||t!==null&&t===Ho}function qz(e,t){Sv=t5=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Wz(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,_I(e,r)}}var r5={readContext:Ru,useCallback:sl,useContext:sl,useEffect:sl,useImperativeHandle:sl,useInsertionEffect:sl,useLayoutEffect:sl,useMemo:sl,useReducer:sl,useRef:sl,useState:sl,useDebugValue:sl,useDeferredValue:sl,useTransition:sl,useMutableSource:sl,useSyncExternalStore:sl,useId:sl,unstable_isNewReconciler:!1},mZ={readContext:Ru,useCallback:function(e,t){return Gh().memoizedState=[e,t===void 0?null:t],e},useContext:Ru,useEffect:cO,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,cw(4194308,4,Bz.bind(null,t,e),r)},useLayoutEffect:function(e,t){return cw(4194308,4,e,t)},useInsertionEffect:function(e,t){return cw(4,2,e,t)},useMemo:function(e,t){var r=Gh();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Gh();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=pZ.bind(null,Ho,e),[n.memoizedState,e]},useRef:function(e){var t=Gh();return e={current:e},t.memoizedState=e},useState:lO,useDebugValue:UI,useDeferredValue:function(e){return Gh().memoizedState=e},useTransition:function(){var e=lO(!1),t=e[0];return e=dZ.bind(null,e[1]),Gh().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ho,i=Gh();if(No){if(r===void 0)throw Error(fr(407));r=r()}else{if(r=t(),da===null)throw Error(fr(349));Yg&30||Rz(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,cO(Mz.bind(null,n,o,e),[e]),n.flags|=2048,i2(9,kz.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Gh(),t=da.identifierPrefix;if(No){var r=ed,n=Qf;r=(n&~(1<<32-lh(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=r2++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=fZ++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yZ={readContext:Ru,useCallback:$z,useContext:Ru,useEffect:$I,useImperativeHandle:zz,useInsertionEffect:Lz,useLayoutEffect:Fz,useMemo:Uz,useReducer:ME,useRef:Dz,useState:function(){return ME(n2)},useDebugValue:UI,useDeferredValue:function(e){var t=ku();return jz(t,Ys.memoizedState,e)},useTransition:function(){var e=ME(n2)[0],t=ku().memoizedState;return[e,t]},useMutableSource:Pz,useSyncExternalStore:Iz,useId:Vz,unstable_isNewReconciler:!1},_Z={readContext:Ru,useCallback:$z,useContext:Ru,useEffect:$I,useImperativeHandle:zz,useInsertionEffect:Lz,useLayoutEffect:Fz,useMemo:Uz,useReducer:OE,useRef:Dz,useState:function(){return OE(n2)},useDebugValue:UI,useDeferredValue:function(e){var t=ku();return Ys===null?t.memoizedState=e:jz(t,Ys.memoizedState,e)},useTransition:function(){var e=OE(n2)[0],t=ku().memoizedState;return[e,t]},useMutableSource:Pz,useSyncExternalStore:Iz,useId:Vz,unstable_isNewReconciler:!1};function Ju(e,t){if(e&&e.defaultProps){t=qo({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function BC(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:qo({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var FS={isMounted:function(e){return(e=e._reactInternals)?hm(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ll(),i=Ep(e),o=nd(n,i);o.payload=t,r!=null&&(o.callback=r),t=Sp(e,o,i),t!==null&&(ch(t,e,i,n),aw(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ll(),i=Ep(e),o=nd(n,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=Sp(e,o,i),t!==null&&(ch(t,e,i,n),aw(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ll(),n=Ep(e),i=nd(r,n);i.tag=2,t!=null&&(i.callback=t),t=Sp(e,i,n),t!==null&&(ch(t,e,n,r),aw(t,e,n))}};function uO(e,t,r,n,i,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,l):t.prototype&&t.prototype.isPureReactComponent?!Yv(r,n)||!Yv(i,o):!0}function Xz(e,t,r){var n=!1,i=Ip,o=t.contextType;return typeof o=="object"&&o!==null?o=Ru(o):(i=hc(t)?Kg:ml.current,n=t.contextTypes,o=(n=n!=null)?i_(e,i):Ip),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=FS,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function hO(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&FS.enqueueReplaceState(t,t.state,null)}function zC(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},OI(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Ru(o):(o=hc(t)?Kg:ml.current,i.context=i_(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(BC(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&FS.enqueueReplaceState(i,i.state,null),Qw(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function l_(e,t){try{var r="",n=t;do r+=WG(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function NE(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function $C(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var vZ=typeof WeakMap=="function"?WeakMap:Map;function Kz(e,t,r){r=nd(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){i5||(i5=!0,YC=n),$C(e,t)},r}function Gz(e,t,r){r=nd(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){$C(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){$C(e,t),typeof n!="function"&&(Ap===null?Ap=new Set([this]):Ap.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function fO(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new vZ;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=OZ.bind(null,e,t,r),t.then(e,e))}function dO(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function pO(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=nd(-1,1),t.tag=2,Sp(r,t,1))),r.lanes|=1),e)}var bZ=_d.ReactCurrentOwner,ac=!1;function kl(e,t,r,n){t.child=e===null?Az(t,null,r,n):s_(t,e.child,r,n)}function gO(e,t,r,n,i){r=r.render;var o=t.ref;return Ey(t,i),n=BI(e,t,r,n,o,i),r=zI(),e!==null&&!ac?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ld(e,t,i)):(No&&r&&TI(t),t.flags|=1,kl(e,t,n,i),t.child)}function mO(e,t,r,n,i){if(e===null){var o=r.type;return typeof o=="function"&&!GI(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,Yz(e,t,o,n,i)):(e=dw(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var l=o.memoizedProps;if(r=r.compare,r=r!==null?r:Yv,r(l,n)&&e.ref===t.ref)return ld(e,t,i)}return t.flags|=1,e=Tp(o,n),e.ref=t.ref,e.return=t,t.child=e}function Yz(e,t,r,n,i){if(e!==null){var o=e.memoizedProps;if(Yv(o,n)&&e.ref===t.ref)if(ac=!1,t.pendingProps=n=o,(e.lanes&i)!==0)e.flags&131072&&(ac=!0);else return t.lanes=e.lanes,ld(e,t,i)}return UC(e,t,r,n,i)}function Zz(e,t,r){var n=t.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ho(cy,Bc),Bc|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ho(cy,Bc),Bc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,ho(cy,Bc),Bc|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,ho(cy,Bc),Bc|=n;return kl(e,t,i,r),t.child}function Jz(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function UC(e,t,r,n,i){var o=hc(r)?Kg:ml.current;return o=i_(t,o),Ey(t,i),r=BI(e,t,r,n,o,i),n=zI(),e!==null&&!ac?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ld(e,t,i)):(No&&n&&TI(t),t.flags|=1,kl(e,t,r,i),t.child)}function yO(e,t,r,n,i){if(hc(r)){var o=!0;Kw(t)}else o=!1;if(Ey(t,i),t.stateNode===null)uw(e,t),Xz(t,r,n),zC(t,r,n,i),n=!0;else if(e===null){var l=t.stateNode,s=t.memoizedProps;l.props=s;var f=l.context,p=r.contextType;typeof p=="object"&&p!==null?p=Ru(p):(p=hc(r)?Kg:ml.current,p=i_(t,p));var v=r.getDerivedStateFromProps,x=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function";x||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(s!==n||f!==p)&&hO(t,l,n,p),Zd=!1;var S=t.memoizedState;l.state=S,Qw(t,n,l,i),f=t.memoizedState,s!==n||S!==f||uc.current||Zd?(typeof v=="function"&&(BC(t,r,v,n),f=t.memoizedState),(s=Zd||uO(t,r,s,n,S,f,p))?(x||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=f),l.props=n,l.state=f,l.context=p,n=s):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,Tz(e,t),s=t.memoizedProps,p=t.type===t.elementType?s:Ju(t.type,s),l.props=p,x=t.pendingProps,S=l.context,f=r.contextType,typeof f=="object"&&f!==null?f=Ru(f):(f=hc(r)?Kg:ml.current,f=i_(t,f));var A=r.getDerivedStateFromProps;(v=typeof A=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(s!==x||S!==f)&&hO(t,l,n,f),Zd=!1,S=t.memoizedState,l.state=S,Qw(t,n,l,i);var k=t.memoizedState;s!==x||S!==k||uc.current||Zd?(typeof A=="function"&&(BC(t,r,A,n),k=t.memoizedState),(p=Zd||uO(t,r,p,n,S,k,f)||!1)?(v||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,k,f),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,k,f)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||s===e.memoizedProps&&S===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&S===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=k),l.props=n,l.state=k,l.context=f,n=p):(typeof l.componentDidUpdate!="function"||s===e.memoizedProps&&S===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&S===e.memoizedState||(t.flags|=1024),n=!1)}return jC(e,t,r,n,o,i)}function jC(e,t,r,n,i,o){Jz(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return i&&rO(t,r,!1),ld(e,t,o);n=t.stateNode,bZ.current=t;var s=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=s_(t,e.child,null,o),t.child=s_(t,null,s,o)):kl(e,t,s,o),t.memoizedState=n.state,i&&rO(t,r,!0),t.child}function Qz(e){var t=e.stateNode;t.pendingContext?tO(e,t.pendingContext,t.pendingContext!==t.context):t.context&&tO(e,t.context,!1),NI(e,t.containerInfo)}function _O(e,t,r,n,i){return o_(),PI(i),t.flags|=256,kl(e,t,r,n),t.child}var VC={dehydrated:null,treeContext:null,retryLane:0};function HC(e){return{baseLanes:e,cachePool:null,transitions:null}}function e$(e,t,r){var n=t.pendingProps,i=jo.current,o=!1,l=(t.flags&128)!==0,s;if((s=l)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ho(jo,i&1),e===null)return LC(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,o?(n=t.mode,o=t.child,l={mode:"hidden",children:l},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=$S(l,n,0,null),e=Bg(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=HC(r),t.memoizedState=VC,e):jI(t,l));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return xZ(e,t,l,n,s,i,r);if(o){o=n.fallback,l=t.mode,i=e.child,s=i.sibling;var f={mode:"hidden",children:n.children};return!(l&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=f,t.deletions=null):(n=Tp(i,f),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=Tp(s,o):(o=Bg(o,l,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,l=e.child.memoizedState,l=l===null?HC(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=VC,n}return o=e.child,e=o.sibling,n=Tp(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function jI(e,t){return t=$S({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ax(e,t,r,n){return n!==null&&PI(n),s_(t,e.child,null,r),e=jI(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xZ(e,t,r,n,i,o,l){if(r)return t.flags&256?(t.flags&=-257,n=NE(Error(fr(422))),ax(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,i=t.mode,n=$S({mode:"visible",children:n.children},i,0,null),o=Bg(o,i,l,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&s_(t,e.child,null,l),t.child.memoizedState=HC(l),t.memoizedState=VC,o);if(!(t.mode&1))return ax(e,t,l,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,o=Error(fr(419)),n=NE(o,n,void 0),ax(e,t,l,n)}if(s=(l&e.childLanes)!==0,ac||s){if(n=da,n!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|l)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,ad(e,i),ch(n,e,i,-1))}return KI(),n=NE(Error(fr(421))),ax(e,t,l,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=NZ.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Vc=wp(i.nextSibling),Hc=t,No=!0,th=null,e!==null&&(yu[_u++]=Qf,yu[_u++]=ed,yu[_u++]=Gg,Qf=e.id,ed=e.overflow,Gg=t),t=jI(t,n.children),t.flags|=4096,t)}function vO(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),FC(e.return,t,r)}function DE(e,t,r,n,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function t$(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(kl(e,t,n.children,r),n=jo.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vO(e,r,t);else if(e.tag===19)vO(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ho(jo,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&e5(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),DE(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&e5(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}DE(t,!0,r,null,o);break;case"together":DE(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function uw(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ld(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Zg|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(fr(153));if(t.child!==null){for(e=t.child,r=Tp(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Tp(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function wZ(e,t,r){switch(t.tag){case 3:Qz(t),o_();break;case 5:Cz(t);break;case 1:hc(t.type)&&Kw(t);break;case 4:NI(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;ho(Zw,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ho(jo,jo.current&1),t.flags|=128,null):r&t.child.childLanes?e$(e,t,r):(ho(jo,jo.current&1),e=ld(e,t,r),e!==null?e.sibling:null);ho(jo,jo.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return t$(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ho(jo,jo.current),n)break;return null;case 22:case 23:return t.lanes=0,Zz(e,t,r)}return ld(e,t,r)}var r$,qC,n$,i$;r$=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};qC=function(){};n$=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,wg(ff.current);var o=null;switch(r){case"input":i=dC(e,i),n=dC(e,n),o=[];break;case"select":i=qo({},i,{value:void 0}),n=qo({},n,{value:void 0}),o=[];break;case"textarea":i=mC(e,i),n=mC(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ww)}_C(r,n);var l;r=null;for(p in i)if(!n.hasOwnProperty(p)&&i.hasOwnProperty(p)&&i[p]!=null)if(p==="style"){var s=i[p];for(l in s)s.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Vv.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in n){var f=n[p];if(s=i!=null?i[p]:void 0,n.hasOwnProperty(p)&&f!==s&&(f!=null||s!=null))if(p==="style")if(s){for(l in s)!s.hasOwnProperty(l)||f&&f.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in f)f.hasOwnProperty(l)&&s[l]!==f[l]&&(r||(r={}),r[l]=f[l])}else r||(o||(o=[]),o.push(p,r)),r=f;else p==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,s=s?s.__html:void 0,f!=null&&s!==f&&(o=o||[]).push(p,f)):p==="children"?typeof f!="string"&&typeof f!="number"||(o=o||[]).push(p,""+f):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Vv.hasOwnProperty(p)?(f!=null&&p==="onScroll"&&wo("scroll",e),o||s===f||(o=[])):(o=o||[]).push(p,f))}r&&(o=o||[]).push("style",r);var p=o;(t.updateQueue=p)&&(t.flags|=4)}};i$=function(e,t,r,n){r!==n&&(t.flags|=4)};function E1(e,t){if(!No)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function al(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function SZ(e,t,r){var n=t.pendingProps;switch(CI(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return al(t),null;case 1:return hc(t.type)&&Xw(),al(t),null;case 3:return n=t.stateNode,a_(),To(uc),To(ml),LI(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ox(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,th!==null&&(QC(th),th=null))),qC(e,t),al(t),null;case 5:DI(t);var i=wg(t2.current);if(r=t.type,e!==null&&t.stateNode!=null)n$(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(fr(166));return al(t),null}if(e=wg(ff.current),ox(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[nf]=t,n[Qv]=o,e=(t.mode&1)!==0,r){case"dialog":wo("cancel",n),wo("close",n);break;case"iframe":case"object":case"embed":wo("load",n);break;case"video":case"audio":for(i=0;i<rv.length;i++)wo(rv[i],n);break;case"source":wo("error",n);break;case"img":case"image":case"link":wo("error",n),wo("load",n);break;case"details":wo("toggle",n);break;case"input":P8(n,o),wo("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},wo("invalid",n);break;case"textarea":R8(n,o),wo("invalid",n)}_C(r,o),i=null;for(var l in o)if(o.hasOwnProperty(l)){var s=o[l];l==="children"?typeof s=="string"?n.textContent!==s&&(o.suppressHydrationWarning!==!0&&ix(n.textContent,s,e),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&ix(n.textContent,s,e),i=["children",""+s]):Vv.hasOwnProperty(l)&&s!=null&&l==="onScroll"&&wo("scroll",n)}switch(r){case"input":Yb(n),I8(n,o,!0);break;case"textarea":Yb(n),k8(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Ww)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=M9(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),r==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[nf]=t,e[Qv]=n,r$(e,t,!1,!1),t.stateNode=e;e:{switch(l=vC(r,n),r){case"dialog":wo("cancel",e),wo("close",e),i=n;break;case"iframe":case"object":case"embed":wo("load",e),i=n;break;case"video":case"audio":for(i=0;i<rv.length;i++)wo(rv[i],e);i=n;break;case"source":wo("error",e),i=n;break;case"img":case"image":case"link":wo("error",e),wo("load",e),i=n;break;case"details":wo("toggle",e),i=n;break;case"input":P8(e,n),i=dC(e,n),wo("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=qo({},n,{value:void 0}),wo("invalid",e);break;case"textarea":R8(e,n),i=mC(e,n),wo("invalid",e);break;default:i=n}_C(r,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var f=s[o];o==="style"?D9(e,f):o==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&O9(e,f)):o==="children"?typeof f=="string"?(r!=="textarea"||f!=="")&&Hv(e,f):typeof f=="number"&&Hv(e,""+f):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Vv.hasOwnProperty(o)?f!=null&&o==="onScroll"&&wo("scroll",e):f!=null&&fI(e,o,f,l))}switch(r){case"input":Yb(e),I8(e,n,!1);break;case"textarea":Yb(e),k8(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Pp(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?xy(e,!!n.multiple,o,!1):n.defaultValue!=null&&xy(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ww)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return al(t),null;case 6:if(e&&t.stateNode!=null)i$(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(fr(166));if(r=wg(t2.current),wg(ff.current),ox(t)){if(n=t.stateNode,r=t.memoizedProps,n[nf]=t,(o=n.nodeValue!==r)&&(e=Hc,e!==null))switch(e.tag){case 3:ix(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ix(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[nf]=t,t.stateNode=n}return al(t),null;case 13:if(To(jo),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(No&&Vc!==null&&t.mode&1&&!(t.flags&128))wz(),o_(),t.flags|=98560,o=!1;else if(o=ox(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(fr(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(fr(317));o[nf]=t}else o_(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;al(t),o=!1}else th!==null&&(QC(th),th=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||jo.current&1?Js===0&&(Js=3):KI())),t.updateQueue!==null&&(t.flags|=4),al(t),null);case 4:return a_(),qC(e,t),e===null&&Zv(t.stateNode.containerInfo),al(t),null;case 10:return kI(t.type._context),al(t),null;case 17:return hc(t.type)&&Xw(),al(t),null;case 19:if(To(jo),o=t.memoizedState,o===null)return al(t),null;if(n=(t.flags&128)!==0,l=o.rendering,l===null)if(n)E1(o,!1);else{if(Js!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=e5(e),l!==null){for(t.flags|=128,E1(o,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ho(jo,jo.current&1|2),t.child}e=e.sibling}o.tail!==null&&ys()>c_&&(t.flags|=128,n=!0,E1(o,!1),t.lanes=4194304)}else{if(!n)if(e=e5(l),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),E1(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!No)return al(t),null}else 2*ys()-o.renderingStartTime>c_&&r!==1073741824&&(t.flags|=128,n=!0,E1(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(r=o.last,r!==null?r.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ys(),t.sibling=null,r=jo.current,ho(jo,n?r&1|2:r&1),t):(al(t),null);case 22:case 23:return XI(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Bc&1073741824&&(al(t),t.subtreeFlags&6&&(t.flags|=8192)):al(t),null;case 24:return null;case 25:return null}throw Error(fr(156,t.tag))}function AZ(e,t){switch(CI(t),t.tag){case 1:return hc(t.type)&&Xw(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return a_(),To(uc),To(ml),LI(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return DI(t),null;case 13:if(To(jo),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(fr(340));o_()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return To(jo),null;case 4:return a_(),null;case 10:return kI(t.type._context),null;case 22:case 23:return XI(),null;case 24:return null;default:return null}}var lx=!1,gl=!1,EZ=typeof WeakSet=="function"?WeakSet:Set,$r=null;function ly(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){cs(e,t,n)}else r.current=null}function WC(e,t,r){try{r()}catch(n){cs(e,t,n)}}var bO=!1;function TZ(e,t){if(IC=Vw,e=cz(),EI(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var l=0,s=-1,f=-1,p=0,v=0,x=e,S=null;t:for(;;){for(var A;x!==r||i!==0&&x.nodeType!==3||(s=l+i),x!==o||n!==0&&x.nodeType!==3||(f=l+n),x.nodeType===3&&(l+=x.nodeValue.length),(A=x.firstChild)!==null;)S=x,x=A;for(;;){if(x===e)break t;if(S===r&&++p===i&&(s=l),S===o&&++v===n&&(f=l),(A=x.nextSibling)!==null)break;x=S,S=x.parentNode}x=A}r=s===-1||f===-1?null:{start:s,end:f}}else r=null}r=r||{start:0,end:0}}else r=null;for(RC={focusedElem:e,selectionRange:r},Vw=!1,$r=t;$r!==null;)if(t=$r,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$r=e;else for(;$r!==null;){t=$r;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var R=k.memoizedProps,z=k.memoizedState,N=t.stateNode,B=N.getSnapshotBeforeUpdate(t.elementType===t.type?R:Ju(t.type,R),z);N.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var U=t.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fr(163))}}catch(K){cs(t,t.return,K)}if(e=t.sibling,e!==null){e.return=t.return,$r=e;break}$r=t.return}return k=bO,bO=!1,k}function Av(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&WC(t,r,o)}i=i.next}while(i!==n)}}function BS(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function XC(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function o$(e){var t=e.alternate;t!==null&&(e.alternate=null,o$(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[nf],delete t[Qv],delete t[OC],delete t[lZ],delete t[cZ])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function s$(e){return e.tag===5||e.tag===3||e.tag===4}function xO(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||s$(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function KC(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ww));else if(n!==4&&(e=e.child,e!==null))for(KC(e,t,r),e=e.sibling;e!==null;)KC(e,t,r),e=e.sibling}function GC(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(GC(e,t,r),e=e.sibling;e!==null;)GC(e,t,r),e=e.sibling}var Oa=null,eh=!1;function Bd(e,t,r){for(r=r.child;r!==null;)a$(e,t,r),r=r.sibling}function a$(e,t,r){if(hf&&typeof hf.onCommitFiberUnmount=="function")try{hf.onCommitFiberUnmount(RS,r)}catch{}switch(r.tag){case 5:gl||ly(r,t);case 6:var n=Oa,i=eh;Oa=null,Bd(e,t,r),Oa=n,eh=i,Oa!==null&&(eh?(e=Oa,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Oa.removeChild(r.stateNode));break;case 18:Oa!==null&&(eh?(e=Oa,r=r.stateNode,e.nodeType===8?PE(e.parentNode,r):e.nodeType===1&&PE(e,r),Kv(e)):PE(Oa,r.stateNode));break;case 4:n=Oa,i=eh,Oa=r.stateNode.containerInfo,eh=!0,Bd(e,t,r),Oa=n,eh=i;break;case 0:case 11:case 14:case 15:if(!gl&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&WC(r,t,l),i=i.next}while(i!==n)}Bd(e,t,r);break;case 1:if(!gl&&(ly(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){cs(r,t,s)}Bd(e,t,r);break;case 21:Bd(e,t,r);break;case 22:r.mode&1?(gl=(n=gl)||r.memoizedState!==null,Bd(e,t,r),gl=n):Bd(e,t,r);break;default:Bd(e,t,r)}}function wO(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new EZ),t.forEach(function(n){var i=DZ.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Ku(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,l=t,s=l;e:for(;s!==null;){switch(s.tag){case 5:Oa=s.stateNode,eh=!1;break e;case 3:Oa=s.stateNode.containerInfo,eh=!0;break e;case 4:Oa=s.stateNode.containerInfo,eh=!0;break e}s=s.return}if(Oa===null)throw Error(fr(160));a$(o,l,i),Oa=null,eh=!1;var f=i.alternate;f!==null&&(f.return=null),i.return=null}catch(p){cs(i,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)l$(t,e),t=t.sibling}function l$(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ku(t,e),Uh(e),n&4){try{Av(3,e,e.return),BS(3,e)}catch(R){cs(e,e.return,R)}try{Av(5,e,e.return)}catch(R){cs(e,e.return,R)}}break;case 1:Ku(t,e),Uh(e),n&512&&r!==null&&ly(r,r.return);break;case 5:if(Ku(t,e),Uh(e),n&512&&r!==null&&ly(r,r.return),e.flags&32){var i=e.stateNode;try{Hv(i,"")}catch(R){cs(e,e.return,R)}}if(n&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,l=r!==null?r.memoizedProps:o,s=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&R9(i,o),vC(s,l);var p=vC(s,o);for(l=0;l<f.length;l+=2){var v=f[l],x=f[l+1];v==="style"?D9(i,x):v==="dangerouslySetInnerHTML"?O9(i,x):v==="children"?Hv(i,x):fI(i,v,x,p)}switch(s){case"input":pC(i,o);break;case"textarea":k9(i,o);break;case"select":var S=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var A=o.value;A!=null?xy(i,!!o.multiple,A,!1):S!==!!o.multiple&&(o.defaultValue!=null?xy(i,!!o.multiple,o.defaultValue,!0):xy(i,!!o.multiple,o.multiple?[]:"",!1))}i[Qv]=o}catch(R){cs(e,e.return,R)}}break;case 6:if(Ku(t,e),Uh(e),n&4){if(e.stateNode===null)throw Error(fr(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(R){cs(e,e.return,R)}}break;case 3:if(Ku(t,e),Uh(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Kv(t.containerInfo)}catch(R){cs(e,e.return,R)}break;case 4:Ku(t,e),Uh(e);break;case 13:Ku(t,e),Uh(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(qI=ys())),n&4&&wO(e);break;case 22:if(v=r!==null&&r.memoizedState!==null,e.mode&1?(gl=(p=gl)||v,Ku(t,e),gl=p):Ku(t,e),Uh(e),n&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!v&&e.mode&1)for($r=e,v=e.child;v!==null;){for(x=$r=v;$r!==null;){switch(S=$r,A=S.child,S.tag){case 0:case 11:case 14:case 15:Av(4,S,S.return);break;case 1:ly(S,S.return);var k=S.stateNode;if(typeof k.componentWillUnmount=="function"){n=S,r=S.return;try{t=n,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(R){cs(n,r,R)}}break;case 5:ly(S,S.return);break;case 22:if(S.memoizedState!==null){AO(x);continue}}A!==null?(A.return=S,$r=A):AO(x)}v=v.sibling}e:for(v=null,x=e;;){if(x.tag===5){if(v===null){v=x;try{i=x.stateNode,p?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=x.stateNode,f=x.memoizedProps.style,l=f!=null&&f.hasOwnProperty("display")?f.display:null,s.style.display=N9("display",l))}catch(R){cs(e,e.return,R)}}}else if(x.tag===6){if(v===null)try{x.stateNode.nodeValue=p?"":x.memoizedProps}catch(R){cs(e,e.return,R)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===e)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===e)break e;for(;x.sibling===null;){if(x.return===null||x.return===e)break e;v===x&&(v=null),x=x.return}v===x&&(v=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:Ku(t,e),Uh(e),n&4&&wO(e);break;case 21:break;default:Ku(t,e),Uh(e)}}function Uh(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(s$(r)){var n=r;break e}r=r.return}throw Error(fr(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Hv(i,""),n.flags&=-33);var o=xO(e);GC(e,o,i);break;case 3:case 4:var l=n.stateNode.containerInfo,s=xO(e);KC(e,s,l);break;default:throw Error(fr(161))}}catch(f){cs(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function CZ(e,t,r){$r=e,c$(e)}function c$(e,t,r){for(var n=(e.mode&1)!==0;$r!==null;){var i=$r,o=i.child;if(i.tag===22&&n){var l=i.memoizedState!==null||lx;if(!l){var s=i.alternate,f=s!==null&&s.memoizedState!==null||gl;s=lx;var p=gl;if(lx=l,(gl=f)&&!p)for($r=i;$r!==null;)l=$r,f=l.child,l.tag===22&&l.memoizedState!==null?EO(i):f!==null?(f.return=l,$r=f):EO(i);for(;o!==null;)$r=o,c$(o),o=o.sibling;$r=i,lx=s,gl=p}SO(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,$r=o):SO(e)}}function SO(e){for(;$r!==null;){var t=$r;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:gl||BS(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!gl)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Ju(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&aO(t,o,n);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}aO(t,l,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&r.focus();break;case"img":f.src&&(r.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var v=p.memoizedState;if(v!==null){var x=v.dehydrated;x!==null&&Kv(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fr(163))}gl||t.flags&512&&XC(t)}catch(S){cs(t,t.return,S)}}if(t===e){$r=null;break}if(r=t.sibling,r!==null){r.return=t.return,$r=r;break}$r=t.return}}function AO(e){for(;$r!==null;){var t=$r;if(t===e){$r=null;break}var r=t.sibling;if(r!==null){r.return=t.return,$r=r;break}$r=t.return}}function EO(e){for(;$r!==null;){var t=$r;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{BS(4,t)}catch(f){cs(t,r,f)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(f){cs(t,i,f)}}var o=t.return;try{XC(t)}catch(f){cs(t,o,f)}break;case 5:var l=t.return;try{XC(t)}catch(f){cs(t,l,f)}}}catch(f){cs(t,t.return,f)}if(t===e){$r=null;break}var s=t.sibling;if(s!==null){s.return=t.return,$r=s;break}$r=t.return}}var PZ=Math.ceil,n5=_d.ReactCurrentDispatcher,VI=_d.ReactCurrentOwner,Tu=_d.ReactCurrentBatchConfig,pi=0,da=null,Us=null,Ba=0,Bc=0,cy=Bp(0),Js=0,o2=null,Zg=0,zS=0,HI=0,Ev=null,ic=null,qI=0,c_=1/0,Gf=null,i5=!1,YC=null,Ap=null,cx=!1,pp=null,o5=0,Tv=0,ZC=null,hw=-1,fw=0;function Ll(){return pi&6?ys():hw!==-1?hw:hw=ys()}function Ep(e){return e.mode&1?pi&2&&Ba!==0?Ba&-Ba:hZ.transition!==null?(fw===0&&(fw=X9()),fw):(e=Ui,e!==0||(e=window.event,e=e===void 0?16:ez(e.type)),e):1}function ch(e,t,r,n){if(50<Tv)throw Tv=0,ZC=null,Error(fr(185));W2(e,r,n),(!(pi&2)||e!==da)&&(e===da&&(!(pi&2)&&(zS|=r),Js===4&&np(e,Ba)),fc(e,n),r===1&&pi===0&&!(t.mode&1)&&(c_=ys()+500,DS&&zp()))}function fc(e,t){var r=e.callbackNode;hY(e,t);var n=jw(e,e===da?Ba:0);if(n===0)r!==null&&N8(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&N8(r),t===1)e.tag===0?uZ(TO.bind(null,e)):vz(TO.bind(null,e)),sZ(function(){!(pi&6)&&zp()}),r=null;else{switch(K9(n)){case 1:r=yI;break;case 4:r=q9;break;case 16:r=Uw;break;case 536870912:r=W9;break;default:r=Uw}r=y$(r,u$.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function u$(e,t){if(hw=-1,fw=0,pi&6)throw Error(fr(327));var r=e.callbackNode;if(Ty()&&e.callbackNode!==r)return null;var n=jw(e,e===da?Ba:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=s5(e,n);else{t=n;var i=pi;pi|=2;var o=f$();(da!==e||Ba!==t)&&(Gf=null,c_=ys()+500,Fg(e,t));do try{kZ();break}catch(s){h$(e,s)}while(!0);RI(),n5.current=o,pi=i,Us!==null?t=0:(da=null,Ba=0,t=Js)}if(t!==0){if(t===2&&(i=AC(e),i!==0&&(n=i,t=JC(e,i))),t===1)throw r=o2,Fg(e,0),np(e,n),fc(e,ys()),r;if(t===6)np(e,n);else{if(i=e.current.alternate,!(n&30)&&!IZ(i)&&(t=s5(e,n),t===2&&(o=AC(e),o!==0&&(n=o,t=JC(e,o))),t===1))throw r=o2,Fg(e,0),np(e,n),fc(e,ys()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(fr(345));case 2:cg(e,ic,Gf);break;case 3:if(np(e,n),(n&130023424)===n&&(t=qI+500-ys(),10<t)){if(jw(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Ll(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=MC(cg.bind(null,e,ic,Gf),t);break}cg(e,ic,Gf);break;case 4:if(np(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var l=31-lh(n);o=1<<l,l=t[l],l>i&&(i=l),n&=~o}if(n=i,n=ys()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*PZ(n/1960))-n,10<n){e.timeoutHandle=MC(cg.bind(null,e,ic,Gf),n);break}cg(e,ic,Gf);break;case 5:cg(e,ic,Gf);break;default:throw Error(fr(329))}}}return fc(e,ys()),e.callbackNode===r?u$.bind(null,e):null}function JC(e,t){var r=Ev;return e.current.memoizedState.isDehydrated&&(Fg(e,t).flags|=256),e=s5(e,t),e!==2&&(t=ic,ic=r,t!==null&&QC(t)),e}function QC(e){ic===null?ic=e:ic.push.apply(ic,e)}function IZ(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!hh(o(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function np(e,t){for(t&=~HI,t&=~zS,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-lh(t),n=1<<r;e[r]=-1,t&=~n}}function TO(e){if(pi&6)throw Error(fr(327));Ty();var t=jw(e,0);if(!(t&1))return fc(e,ys()),null;var r=s5(e,t);if(e.tag!==0&&r===2){var n=AC(e);n!==0&&(t=n,r=JC(e,n))}if(r===1)throw r=o2,Fg(e,0),np(e,t),fc(e,ys()),r;if(r===6)throw Error(fr(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,cg(e,ic,Gf),fc(e,ys()),null}function WI(e,t){var r=pi;pi|=1;try{return e(t)}finally{pi=r,pi===0&&(c_=ys()+500,DS&&zp())}}function Jg(e){pp!==null&&pp.tag===0&&!(pi&6)&&Ty();var t=pi;pi|=1;var r=Tu.transition,n=Ui;try{if(Tu.transition=null,Ui=1,e)return e()}finally{Ui=n,Tu.transition=r,pi=t,!(pi&6)&&zp()}}function XI(){Bc=cy.current,To(cy)}function Fg(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,oZ(r)),Us!==null)for(r=Us.return;r!==null;){var n=r;switch(CI(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Xw();break;case 3:a_(),To(uc),To(ml),LI();break;case 5:DI(n);break;case 4:a_();break;case 13:To(jo);break;case 19:To(jo);break;case 10:kI(n.type._context);break;case 22:case 23:XI()}r=r.return}if(da=e,Us=e=Tp(e.current,null),Ba=Bc=t,Js=0,o2=null,HI=zS=Zg=0,ic=Ev=null,xg!==null){for(t=0;t<xg.length;t++)if(r=xg[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var l=o.next;o.next=i,n.next=l}r.pending=n}xg=null}return e}function h$(e,t){do{var r=Us;try{if(RI(),lw.current=r5,t5){for(var n=Ho.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}t5=!1}if(Yg=0,ha=Ys=Ho=null,Sv=!1,r2=0,VI.current=null,r===null||r.return===null){Js=1,o2=t,Us=null;break}e:{var o=e,l=r.return,s=r,f=t;if(t=Ba,s.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var p=f,v=s,x=v.tag;if(!(v.mode&1)&&(x===0||x===11||x===15)){var S=v.alternate;S?(v.updateQueue=S.updateQueue,v.memoizedState=S.memoizedState,v.lanes=S.lanes):(v.updateQueue=null,v.memoizedState=null)}var A=dO(l);if(A!==null){A.flags&=-257,pO(A,l,s,o,t),A.mode&1&&fO(o,p,t),t=A,f=p;var k=t.updateQueue;if(k===null){var R=new Set;R.add(f),t.updateQueue=R}else k.add(f);break e}else{if(!(t&1)){fO(o,p,t),KI();break e}f=Error(fr(426))}}else if(No&&s.mode&1){var z=dO(l);if(z!==null){!(z.flags&65536)&&(z.flags|=256),pO(z,l,s,o,t),PI(l_(f,s));break e}}o=f=l_(f,s),Js!==4&&(Js=2),Ev===null?Ev=[o]:Ev.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var N=Kz(o,f,t);sO(o,N);break e;case 1:s=f;var B=o.type,U=o.stateNode;if(!(o.flags&128)&&(typeof B.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Ap===null||!Ap.has(U)))){o.flags|=65536,t&=-t,o.lanes|=t;var K=Gz(o,s,t);sO(o,K);break e}}o=o.return}while(o!==null)}p$(r)}catch(ne){t=ne,Us===r&&r!==null&&(Us=r=r.return);continue}break}while(!0)}function f$(){var e=n5.current;return n5.current=r5,e===null?r5:e}function KI(){(Js===0||Js===3||Js===2)&&(Js=4),da===null||!(Zg&268435455)&&!(zS&268435455)||np(da,Ba)}function s5(e,t){var r=pi;pi|=2;var n=f$();(da!==e||Ba!==t)&&(Gf=null,Fg(e,t));do try{RZ();break}catch(i){h$(e,i)}while(!0);if(RI(),pi=r,n5.current=n,Us!==null)throw Error(fr(261));return da=null,Ba=0,Js}function RZ(){for(;Us!==null;)d$(Us)}function kZ(){for(;Us!==null&&!rY();)d$(Us)}function d$(e){var t=m$(e.alternate,e,Bc);e.memoizedProps=e.pendingProps,t===null?p$(e):Us=t,VI.current=null}function p$(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=AZ(r,t),r!==null){r.flags&=32767,Us=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Js=6,Us=null;return}}else if(r=SZ(r,t,Bc),r!==null){Us=r;return}if(t=t.sibling,t!==null){Us=t;return}Us=t=e}while(t!==null);Js===0&&(Js=5)}function cg(e,t,r){var n=Ui,i=Tu.transition;try{Tu.transition=null,Ui=1,MZ(e,t,r,n)}finally{Tu.transition=i,Ui=n}return null}function MZ(e,t,r,n){do Ty();while(pp!==null);if(pi&6)throw Error(fr(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(fr(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(fY(e,o),e===da&&(Us=da=null,Ba=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||cx||(cx=!0,y$(Uw,function(){return Ty(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Tu.transition,Tu.transition=null;var l=Ui;Ui=1;var s=pi;pi|=4,VI.current=null,TZ(e,r),l$(r,e),JY(RC),Vw=!!IC,RC=IC=null,e.current=r,CZ(r),nY(),pi=s,Ui=l,Tu.transition=o}else e.current=r;if(cx&&(cx=!1,pp=e,o5=i),o=e.pendingLanes,o===0&&(Ap=null),sY(r.stateNode),fc(e,ys()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(i5)throw i5=!1,e=YC,YC=null,e;return o5&1&&e.tag!==0&&Ty(),o=e.pendingLanes,o&1?e===ZC?Tv++:(Tv=0,ZC=e):Tv=0,zp(),null}function Ty(){if(pp!==null){var e=K9(o5),t=Tu.transition,r=Ui;try{if(Tu.transition=null,Ui=16>e?16:e,pp===null)var n=!1;else{if(e=pp,pp=null,o5=0,pi&6)throw Error(fr(331));var i=pi;for(pi|=4,$r=e.current;$r!==null;){var o=$r,l=o.child;if($r.flags&16){var s=o.deletions;if(s!==null){for(var f=0;f<s.length;f++){var p=s[f];for($r=p;$r!==null;){var v=$r;switch(v.tag){case 0:case 11:case 15:Av(8,v,o)}var x=v.child;if(x!==null)x.return=v,$r=x;else for(;$r!==null;){v=$r;var S=v.sibling,A=v.return;if(o$(v),v===p){$r=null;break}if(S!==null){S.return=A,$r=S;break}$r=A}}}var k=o.alternate;if(k!==null){var R=k.child;if(R!==null){k.child=null;do{var z=R.sibling;R.sibling=null,R=z}while(R!==null)}}$r=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,$r=l;else e:for(;$r!==null;){if(o=$r,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Av(9,o,o.return)}var N=o.sibling;if(N!==null){N.return=o.return,$r=N;break e}$r=o.return}}var B=e.current;for($r=B;$r!==null;){l=$r;var U=l.child;if(l.subtreeFlags&2064&&U!==null)U.return=l,$r=U;else e:for(l=B;$r!==null;){if(s=$r,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:BS(9,s)}}catch(ne){cs(s,s.return,ne)}if(s===l){$r=null;break e}var K=s.sibling;if(K!==null){K.return=s.return,$r=K;break e}$r=s.return}}if(pi=i,zp(),hf&&typeof hf.onPostCommitFiberRoot=="function")try{hf.onPostCommitFiberRoot(RS,e)}catch{}n=!0}return n}finally{Ui=r,Tu.transition=t}}return!1}function CO(e,t,r){t=l_(r,t),t=Kz(e,t,1),e=Sp(e,t,1),t=Ll(),e!==null&&(W2(e,1,t),fc(e,t))}function cs(e,t,r){if(e.tag===3)CO(e,e,r);else for(;t!==null;){if(t.tag===3){CO(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ap===null||!Ap.has(n))){e=l_(r,e),e=Gz(t,e,1),t=Sp(t,e,1),e=Ll(),t!==null&&(W2(t,1,e),fc(t,e));break}}t=t.return}}function OZ(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ll(),e.pingedLanes|=e.suspendedLanes&r,da===e&&(Ba&r)===r&&(Js===4||Js===3&&(Ba&130023424)===Ba&&500>ys()-qI?Fg(e,0):HI|=r),fc(e,t)}function g$(e,t){t===0&&(e.mode&1?(t=Qb,Qb<<=1,!(Qb&130023424)&&(Qb=4194304)):t=1);var r=Ll();e=ad(e,t),e!==null&&(W2(e,t,r),fc(e,r))}function NZ(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),g$(e,r)}function DZ(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(fr(314))}n!==null&&n.delete(t),g$(e,r)}var m$;m$=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||uc.current)ac=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ac=!1,wZ(e,t,r);ac=!!(e.flags&131072)}else ac=!1,No&&t.flags&1048576&&bz(t,Yw,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;uw(e,t),e=t.pendingProps;var i=i_(t,ml.current);Ey(t,r),i=BI(null,t,n,e,i,r);var o=zI();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,hc(n)?(o=!0,Kw(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,OI(t),i.updater=FS,t.stateNode=i,i._reactInternals=t,zC(t,n,e,r),t=jC(null,t,n,!0,o,r)):(t.tag=0,No&&o&&TI(t),kl(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(uw(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=FZ(n),e=Ju(n,e),i){case 0:t=UC(null,t,n,e,r);break e;case 1:t=yO(null,t,n,e,r);break e;case 11:t=gO(null,t,n,e,r);break e;case 14:t=mO(null,t,n,Ju(n.type,e),r);break e}throw Error(fr(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Ju(n,i),UC(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Ju(n,i),yO(e,t,n,i,r);case 3:e:{if(Qz(t),e===null)throw Error(fr(387));n=t.pendingProps,o=t.memoizedState,i=o.element,Tz(e,t),Qw(t,n,null,r);var l=t.memoizedState;if(n=l.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=l_(Error(fr(423)),t),t=_O(e,t,n,r,i);break e}else if(n!==i){i=l_(Error(fr(424)),t),t=_O(e,t,n,r,i);break e}else for(Vc=wp(t.stateNode.containerInfo.firstChild),Hc=t,No=!0,th=null,r=Az(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(o_(),n===i){t=ld(e,t,r);break e}kl(e,t,n,r)}t=t.child}return t;case 5:return Cz(t),e===null&&LC(t),n=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,l=i.children,kC(n,i)?l=null:o!==null&&kC(n,o)&&(t.flags|=32),Jz(e,t),kl(e,t,l,r),t.child;case 6:return e===null&&LC(t),null;case 13:return e$(e,t,r);case 4:return NI(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=s_(t,null,n,r):kl(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Ju(n,i),gO(e,t,n,i,r);case 7:return kl(e,t,t.pendingProps,r),t.child;case 8:return kl(e,t,t.pendingProps.children,r),t.child;case 12:return kl(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,l=i.value,ho(Zw,n._currentValue),n._currentValue=l,o!==null)if(hh(o.value,l)){if(o.children===i.children&&!uc.current){t=ld(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){l=o.child;for(var f=s.firstContext;f!==null;){if(f.context===n){if(o.tag===1){f=nd(-1,r&-r),f.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var v=p.pending;v===null?f.next=f:(f.next=v.next,v.next=f),p.pending=f}}o.lanes|=r,f=o.alternate,f!==null&&(f.lanes|=r),FC(o.return,r,t),s.lanes|=r;break}f=f.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(fr(341));l.lanes|=r,s=l.alternate,s!==null&&(s.lanes|=r),FC(l,r,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}kl(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Ey(t,r),i=Ru(i),n=n(i),t.flags|=1,kl(e,t,n,r),t.child;case 14:return n=t.type,i=Ju(n,t.pendingProps),i=Ju(n.type,i),mO(e,t,n,i,r);case 15:return Yz(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Ju(n,i),uw(e,t),t.tag=1,hc(n)?(e=!0,Kw(t)):e=!1,Ey(t,r),Xz(t,n,i),zC(t,n,i,r),jC(null,t,n,!0,e,r);case 19:return t$(e,t,r);case 22:return Zz(e,t,r)}throw Error(fr(156,t.tag))};function y$(e,t){return H9(e,t)}function LZ(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Su(e,t,r,n){return new LZ(e,t,r,n)}function GI(e){return e=e.prototype,!(!e||!e.isReactComponent)}function FZ(e){if(typeof e=="function")return GI(e)?1:0;if(e!=null){if(e=e.$$typeof,e===pI)return 11;if(e===gI)return 14}return 2}function Tp(e,t){var r=e.alternate;return r===null?(r=Su(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function dw(e,t,r,n,i,o){var l=2;if(n=e,typeof e=="function")GI(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Q0:return Bg(r.children,i,o,t);case dI:l=8,i|=8;break;case cC:return e=Su(12,r,t,i|2),e.elementType=cC,e.lanes=o,e;case uC:return e=Su(13,r,t,i),e.elementType=uC,e.lanes=o,e;case hC:return e=Su(19,r,t,i),e.elementType=hC,e.lanes=o,e;case C9:return $S(r,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case E9:l=10;break e;case T9:l=9;break e;case pI:l=11;break e;case gI:l=14;break e;case Yd:l=16,n=null;break e}throw Error(fr(130,e==null?e:typeof e,""))}return t=Su(l,r,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function Bg(e,t,r,n){return e=Su(7,e,n,t),e.lanes=r,e}function $S(e,t,r,n){return e=Su(22,e,n,t),e.elementType=C9,e.lanes=r,e.stateNode={isHidden:!1},e}function LE(e,t,r){return e=Su(6,e,null,t),e.lanes=r,e}function FE(e,t,r){return t=Su(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function BZ(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yE(0),this.expirationTimes=yE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yE(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function YI(e,t,r,n,i,o,l,s,f){return e=new BZ(e,t,r,s,f),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Su(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},OI(o),e}function zZ(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J0,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function _$(e){if(!e)return Ip;e=e._reactInternals;e:{if(hm(e)!==e||e.tag!==1)throw Error(fr(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(hc(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(fr(171))}if(e.tag===1){var r=e.type;if(hc(r))return _z(e,r,t)}return t}function v$(e,t,r,n,i,o,l,s,f){return e=YI(r,n,!0,e,i,o,l,s,f),e.context=_$(null),r=e.current,n=Ll(),i=Ep(r),o=nd(n,i),o.callback=t??null,Sp(r,o,i),e.current.lanes=i,W2(e,i,n),fc(e,n),e}function US(e,t,r,n){var i=t.current,o=Ll(),l=Ep(i);return r=_$(r),t.context===null?t.context=r:t.pendingContext=r,t=nd(o,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Sp(i,t,l),e!==null&&(ch(e,i,l,o),aw(e,i,l)),l}function a5(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function PO(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ZI(e,t){PO(e,t),(e=e.alternate)&&PO(e,t)}function $Z(){return null}var b$=typeof reportError=="function"?reportError:function(e){console.error(e)};function JI(e){this._internalRoot=e}jS.prototype.render=JI.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(fr(409));US(e,t,null,null)};jS.prototype.unmount=JI.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jg(function(){US(null,e,null,null)}),t[sd]=null}};function jS(e){this._internalRoot=e}jS.prototype.unstable_scheduleHydration=function(e){if(e){var t=Z9();e={blockedOn:null,target:e,priority:t};for(var r=0;r<rp.length&&t!==0&&t<rp[r].priority;r++);rp.splice(r,0,e),r===0&&Q9(e)}};function QI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function VS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function IO(){}function UZ(e,t,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var p=a5(l);o.call(p)}}var l=v$(t,n,e,0,null,!1,!1,"",IO);return e._reactRootContainer=l,e[sd]=l.current,Zv(e.nodeType===8?e.parentNode:e),Jg(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var p=a5(f);s.call(p)}}var f=YI(e,0,!1,null,null,!1,!1,"",IO);return e._reactRootContainer=f,e[sd]=f.current,Zv(e.nodeType===8?e.parentNode:e),Jg(function(){US(t,f,r,n)}),f}function HS(e,t,r,n,i){var o=r._reactRootContainer;if(o){var l=o;if(typeof i=="function"){var s=i;i=function(){var f=a5(l);s.call(f)}}US(t,l,e,i)}else l=UZ(r,t,e,i,n);return a5(l)}G9=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=tv(t.pendingLanes);r!==0&&(_I(t,r|1),fc(t,ys()),!(pi&6)&&(c_=ys()+500,zp()))}break;case 13:Jg(function(){var n=ad(e,1);if(n!==null){var i=Ll();ch(n,e,1,i)}}),ZI(e,1)}};vI=function(e){if(e.tag===13){var t=ad(e,134217728);if(t!==null){var r=Ll();ch(t,e,134217728,r)}ZI(e,134217728)}};Y9=function(e){if(e.tag===13){var t=Ep(e),r=ad(e,t);if(r!==null){var n=Ll();ch(r,e,t,n)}ZI(e,t)}};Z9=function(){return Ui};J9=function(e,t){var r=Ui;try{return Ui=e,t()}finally{Ui=r}};xC=function(e,t,r){switch(t){case"input":if(pC(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=NS(n);if(!i)throw Error(fr(90));I9(n),pC(n,i)}}}break;case"textarea":k9(e,r);break;case"select":t=r.value,t!=null&&xy(e,!!r.multiple,t,!1)}};B9=WI;z9=Jg;var jZ={usingClientEntryPoint:!1,Events:[K2,ny,NS,L9,F9,WI]},T1={findFiberByHostInstance:bg,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VZ={bundleType:T1.bundleType,version:T1.version,rendererPackageName:T1.rendererPackageName,rendererConfig:T1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_d.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=j9(e),e===null?null:e.stateNode},findFiberByHostInstance:T1.findFiberByHostInstance||$Z,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ux=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ux.isDisabled&&ux.supportsFiber)try{RS=ux.inject(VZ),hf=ux}catch{}}Kc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jZ;Kc.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!QI(t))throw Error(fr(200));return zZ(e,t,null,r)};Kc.createRoot=function(e,t){if(!QI(e))throw Error(fr(299));var r=!1,n="",i=b$;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=YI(e,1,!1,null,null,r,!1,n,i),e[sd]=t.current,Zv(e.nodeType===8?e.parentNode:e),new JI(t)};Kc.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(fr(188)):(e=Object.keys(e).join(","),Error(fr(268,e)));return e=j9(t),e=e===null?null:e.stateNode,e};Kc.flushSync=function(e){return Jg(e)};Kc.hydrate=function(e,t,r){if(!VS(t))throw Error(fr(200));return HS(null,e,t,!0,r)};Kc.hydrateRoot=function(e,t,r){if(!QI(e))throw Error(fr(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",l=b$;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=v$(t,null,e,1,r??null,i,!1,o,l),e[sd]=t.current,Zv(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new jS(t)};Kc.render=function(e,t,r){if(!VS(t))throw Error(fr(200));return HS(null,e,t,!1,r)};Kc.unmountComponentAtNode=function(e){if(!VS(e))throw Error(fr(40));return e._reactRootContainer?(Jg(function(){HS(null,null,e,!1,function(){e._reactRootContainer=null,e[sd]=null})}),!0):!1};Kc.unstable_batchedUpdates=WI;Kc.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!VS(r))throw Error(fr(200));if(e==null||e._reactInternals===void 0)throw Error(fr(38));return HS(e,t,r,!1,n)};Kc.version="18.3.1-next-f1338f8080-20240426";function x$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(x$)}catch(e){console.error(e)}}x$(),x9.exports=Kc;var s2=x9.exports;const hx=PS(s2);var RO=s2;aC.createRoot=RO.createRoot,aC.hydrateRoot=RO.hydrateRoot;var w$={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */(function(e,t){(function(r,n){e.exports=n()})(rf,function(){var r={},n={};function i(l,s,f){if(n[l]=f,l==="index"){var p="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",v={};return n.shared(v),n.index(r,v),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([p],{type:"text/javascript"}))),r}}i("shared",["exports"],function(l){function s(u,c,d,m){return new(d||(d=Promise))(function(w,E){function C(H){try{F(m.next(H))}catch(Y){E(Y)}}function O(H){try{F(m.throw(H))}catch(Y){E(Y)}}function F(H){var Y;H.done?w(H.value):(Y=H.value,Y instanceof d?Y:new d(function(te){te(Y)})).then(C,O)}F((m=m.apply(u,c||[])).next())})}function f(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}typeof SuppressedError=="function"&&SuppressedError;var p=v;function v(u,c){this.x=u,this.y=c}v.prototype={clone:function(){return new v(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,c){return this.clone()._rotateAround(u,c)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var c=u.x-this.x,d=u.y-this.y;return c*c+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,c){return Math.atan2(this.x*c-this.y*u,this.x*u+this.y*c)},_matMult:function(u){var c=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=c,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var c=Math.cos(u),d=Math.sin(u),m=d*this.x+c*this.y;return this.x=c*this.x-d*this.y,this.y=m,this},_rotateAround:function(u,c){var d=Math.cos(u),m=Math.sin(u),w=c.y+m*(this.x-c.x)+d*(this.y-c.y);return this.x=c.x+d*(this.x-c.x)-m*(this.y-c.y),this.y=w,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},v.convert=function(u){return u instanceof v?u:Array.isArray(u)?new v(u[0],u[1]):u};var x=f(p),S=A;function A(u,c,d,m){this.cx=3*u,this.bx=3*(d-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(m-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=c,this.p2x=d,this.p2y=m}A.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,c){if(c===void 0&&(c=1e-6),u<0)return 0;if(u>1)return 1;for(var d=u,m=0;m<8;m++){var w=this.sampleCurveX(d)-u;if(Math.abs(w)<c)return d;var E=this.sampleCurveDerivativeX(d);if(Math.abs(E)<1e-6)break;d-=w/E}var C=0,O=1;for(d=u,m=0;m<20&&(w=this.sampleCurveX(d),!(Math.abs(w-u)<c));m++)u>w?C=d:O=d,d=.5*(O-C)+C;return d},solve:function(u,c){return this.sampleCurveY(this.solveCurveX(u,c))}};var k=f(S);let R,z;function N(){return R==null&&(R=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),R}function B(){if(z==null&&(z=!1,N())){const c=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(c){for(let m=0;m<5*5;m++){const w=4*m;c.fillStyle=`rgb(${w},${w+1},${w+2})`,c.fillRect(m%5,Math.floor(m/5),1,1)}const d=c.getImageData(0,0,5,5).data;for(let m=0;m<5*5*4;m++)if(m%4!=3&&d[m]!==m){z=!0;break}}}return z||!1}function U(u,c,d,m){const w=new k(u,c,d,m);return E=>w.solve(E)}const K=U(.25,.1,.25,1);function ne(u,c,d){return Math.min(d,Math.max(c,u))}function ee(u,c,d){const m=d-c,w=((u-c)%m+m)%m+c;return w===c?d:w}function Q(u,...c){for(const d of c)for(const m in d)u[m]=d[m];return u}let re=1;function Se(u,c,d){const m={};for(const w in u)m[w]=c.call(this,u[w],w,u);return m}function J(u,c,d){const m={};for(const w in u)c.call(this,u[w],w,u)&&(m[w]=u[w]);return m}function G(u){return Array.isArray(u)?u.map(G):typeof u=="object"&&u?Se(u,G):u}const se={};function ve(u){se[u]||(typeof console<"u"&&console.warn(u),se[u]=!0)}function ge(u,c,d){return(d.y-u.y)*(c.x-u.x)>(c.y-u.y)*(d.x-u.x)}function je(u){return typeof WorkerGlobalScope<"u"&&u!==void 0&&u instanceof WorkerGlobalScope}let $e=null;function Ze(u){return typeof ImageBitmap<"u"&&u instanceof ImageBitmap}const Me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ue(u,c,d,m,w){return s(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const E=new VideoFrame(u,{timestamp:0});try{const C=E==null?void 0:E.format;if(!C||!C.startsWith("BGR")&&!C.startsWith("RGB"))throw new Error(`Unrecognized format ${C}`);const O=C.startsWith("BGR"),F=new Uint8ClampedArray(m*w*4);if(yield E.copyTo(F,function(H,Y,te,he,_e){const xe=4*Math.max(-Y,0),Re=(Math.max(0,te)-te)*he*4+xe,He=4*he,Ye=Math.max(0,Y),yt=Math.max(0,te);return{rect:{x:Ye,y:yt,width:Math.min(H.width,Y+he)-Ye,height:Math.min(H.height,te+_e)-yt},layout:[{offset:Re,stride:He}]}}(u,c,d,m,w)),O)for(let H=0;H<F.length;H+=4){const Y=F[H];F[H]=F[H+2],F[H+2]=Y}return F}finally{E.close()}})}let Qe,ct;const ce="AbortError";function be(){return new Error(ce)}const Oe={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Be(u){return Oe.REGISTERED_PROTOCOLS[u.substring(0,u.indexOf("://"))]}const qe="global-dispatcher";class tt extends Error{constructor(c,d,m,w){super(`AJAXError: ${d} (${c}): ${m}`),this.status=c,this.statusText=d,this.url=m,this.body=w}}const We=()=>je(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Xe=function(u,c){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){const m=Be(u.url);if(m)return m(u,c);if(je(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,targetMapId:qe},c)}if(!(/^file:/.test(d=u.url)||/^file:/.test(We())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(m,w){return s(this,void 0,void 0,function*(){const E=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:We(),signal:w.signal});m.type!=="json"||E.headers.has("Accept")||E.headers.set("Accept","application/json");const C=yield fetch(E);if(!C.ok){const H=yield C.blob();throw new tt(C.status,C.statusText,m.url,H)}let O;O=m.type==="arrayBuffer"||m.type==="image"?C.arrayBuffer():m.type==="json"?C.json():C.text();const F=yield O;if(w.signal.aborted)throw be();return{data:F,cacheControl:C.headers.get("Cache-Control"),expires:C.headers.get("Expires")}})}(u,c);if(je(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,mustQueue:!0,targetMapId:qe},c)}var d;return function(m,w){return new Promise((E,C)=>{var O;const F=new XMLHttpRequest;F.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(F.responseType="arraybuffer");for(const H in m.headers)F.setRequestHeader(H,m.headers[H]);m.type==="json"&&(F.responseType="text",!((O=m.headers)===null||O===void 0)&&O.Accept||F.setRequestHeader("Accept","application/json")),F.withCredentials=m.credentials==="include",F.onerror=()=>{C(new Error(F.statusText))},F.onload=()=>{if(!w.signal.aborted)if((F.status>=200&&F.status<300||F.status===0)&&F.response!==null){let H=F.response;if(m.type==="json")try{H=JSON.parse(F.response)}catch(Y){return void C(Y)}E({data:H,cacheControl:F.getResponseHeader("Cache-Control"),expires:F.getResponseHeader("Expires")})}else{const H=new Blob([F.response],{type:F.getResponseHeader("Content-Type")});C(new tt(F.status,F.statusText,m.url,H))}},w.signal.addEventListener("abort",()=>{F.abort(),C(be())}),F.send(m.body)})}(u,c)};function lt(u){if(!u||u.indexOf("://")<=0||u.indexOf("data:image/")===0||u.indexOf("blob:")===0)return!0;const c=new URL(u),d=window.location;return c.protocol===d.protocol&&c.host===d.host}function wt(u,c,d){d[u]&&d[u].indexOf(c)!==-1||(d[u]=d[u]||[],d[u].push(c))}function Lt(u,c,d){if(d&&d[u]){const m=d[u].indexOf(c);m!==-1&&d[u].splice(m,1)}}class At{constructor(c,d={}){Q(this,d),this.type=c}}class zt extends At{constructor(c,d={}){super("error",Q({error:c},d))}}class vt{on(c,d){return this._listeners=this._listeners||{},wt(c,d,this._listeners),this}off(c,d){return Lt(c,d,this._listeners),Lt(c,d,this._oneTimeListeners),this}once(c,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},wt(c,d,this._oneTimeListeners),this):new Promise(m=>this.once(c,m))}fire(c,d){typeof c=="string"&&(c=new At(c,d||{}));const m=c.type;if(this.listens(m)){c.target=this;const w=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const O of w)O.call(this,c);const E=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const O of E)Lt(m,O,this._oneTimeListeners),O.call(this,c);const C=this._eventedParent;C&&(Q(c,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(c))}else c instanceof zt&&console.error(c.error);return this}listens(c){return this._listeners&&this._listeners[c]&&this._listeners[c].length>0||this._oneTimeListeners&&this._oneTimeListeners[c]&&this._oneTimeListeners[c].length>0||this._eventedParent&&this._eventedParent.listens(c)}setEventedParent(c,d){return this._eventedParent=c,this._eventedParentData=d,this}}var pe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ur=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function sr(u,c){const d={};for(const m in u)m!=="ref"&&(d[m]=u[m]);return ur.forEach(m=>{m in c&&(d[m]=c[m])}),d}function Tt(u,c){if(Array.isArray(u)){if(!Array.isArray(c)||u.length!==c.length)return!1;for(let d=0;d<u.length;d++)if(!Tt(u[d],c[d]))return!1;return!0}if(typeof u=="object"&&u!==null&&c!==null){if(typeof c!="object"||Object.keys(u).length!==Object.keys(c).length)return!1;for(const d in u)if(!Tt(u[d],c[d]))return!1;return!0}return u===c}function Nt(u,c){u.push(c)}function Zt(u,c,d){Nt(d,{command:"addSource",args:[u,c[u]]})}function rr(u,c,d){Nt(c,{command:"removeSource",args:[u]}),d[u]=!0}function at(u,c,d,m){rr(u,d,m),Zt(u,c,d)}function It(u,c,d){let m;for(m in u[d])if(Object.prototype.hasOwnProperty.call(u[d],m)&&m!=="data"&&!Tt(u[d][m],c[d][m]))return!1;for(m in c[d])if(Object.prototype.hasOwnProperty.call(c[d],m)&&m!=="data"&&!Tt(u[d][m],c[d][m]))return!1;return!0}function Vt(u,c,d,m,w,E){u=u||{},c=c||{};for(const C in u)Object.prototype.hasOwnProperty.call(u,C)&&(Tt(u[C],c[C])||d.push({command:E,args:[m,C,c[C],w]}));for(const C in c)Object.prototype.hasOwnProperty.call(c,C)&&!Object.prototype.hasOwnProperty.call(u,C)&&(Tt(u[C],c[C])||d.push({command:E,args:[m,C,c[C],w]}))}function lr(u){return u.id}function Pr(u,c){return u[c.id]=c,u}class _t{constructor(c,d,m,w){this.message=(c?`${c}: `:"")+m,w&&(this.identifier=w),d!=null&&d.__line__&&(this.line=d.__line__)}}function Ut(u,...c){for(const d of c)for(const m in d)u[m]=d[m];return u}class _r extends Error{constructor(c,d){super(d),this.message=d,this.key=c}}class Kt{constructor(c,d=[]){this.parent=c,this.bindings={};for(const[m,w]of d)this.bindings[m]=w}concat(c){return new Kt(this,c)}get(c){if(this.bindings[c])return this.bindings[c];if(this.parent)return this.parent.get(c);throw new Error(`${c} not found in scope.`)}has(c){return!!this.bindings[c]||!!this.parent&&this.parent.has(c)}}const fn={kind:"null"},Dt={kind:"number"},Br={kind:"string"},dr={kind:"boolean"},nn={kind:"color"},Kn={kind:"object"},hr={kind:"value"},Gn={kind:"collator"},Nn={kind:"formatted"},gi={kind:"padding"},Yr={kind:"resolvedImage"},Ne={kind:"variableAnchorOffsetCollection"};function ae(u,c){return{kind:"array",itemType:u,N:c}}function ue(u){if(u.kind==="array"){const c=ue(u.itemType);return typeof u.N=="number"?`array<${c}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${c}>`}return u.kind}const Ee=[fn,Dt,Br,dr,nn,Nn,Kn,ae(hr),gi,Yr,Ne];function Fe(u,c){if(c.kind==="error")return null;if(u.kind==="array"){if(c.kind==="array"&&(c.N===0&&c.itemType.kind==="value"||!Fe(u.itemType,c.itemType))&&(typeof u.N!="number"||u.N===c.N))return null}else{if(u.kind===c.kind)return null;if(u.kind==="value"){for(const d of Ee)if(!Fe(d,c))return null}}return`Expected ${ue(u)} but found ${ue(c)} instead.`}function rt(u,c){return c.some(d=>d.kind===u.kind)}function it(u,c){return c.some(d=>d==="null"?u===null:d==="array"?Array.isArray(u):d==="object"?u&&!Array.isArray(u)&&typeof u=="object":d===typeof u)}function et(u,c){return u.kind==="array"&&c.kind==="array"?u.itemType.kind===c.itemType.kind&&typeof u.N=="number":u.kind===c.kind}const Ke=.96422,Et=.82521,Rt=4/29,gt=6/29,Wt=3*gt*gt,mr=gt*gt*gt,Ar=Math.PI/180,pn=180/Math.PI;function Or(u){return(u%=360)<0&&(u+=360),u}function en([u,c,d,m]){let w,E;const C=jn((.2225045*(u=Zr(u))+.7168786*(c=Zr(c))+.0606169*(d=Zr(d)))/1);u===c&&c===d?w=E=C:(w=jn((.4360747*u+.3850649*c+.1430804*d)/Ke),E=jn((.0139322*u+.0971045*c+.7141733*d)/Et));const O=116*C-16;return[O<0?0:O,500*(w-C),200*(C-E),m]}function Zr(u){return u<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function jn(u){return u>mr?Math.pow(u,1/3):u/Wt+Rt}function Jr([u,c,d,m]){let w=(u+16)/116,E=isNaN(c)?w:w+c/500,C=isNaN(d)?w:w-d/200;return w=1*vn(w),E=Ke*vn(E),C=Et*vn(C),[Ur(3.1338561*E-1.6168667*w-.4906146*C),Ur(-.9787684*E+1.9161415*w+.033454*C),Ur(.0719453*E-.2289914*w+1.4052427*C),m]}function Ur(u){return(u=u<=.00304?12.92*u:1.055*Math.pow(u,1/2.4)-.055)<0?0:u>1?1:u}function vn(u){return u>gt?u*u*u:Wt*(u-Rt)}function Fn(u){return parseInt(u.padEnd(2,u),16)/255}function ei(u,c){return mi(c?u/100:u,0,1)}function mi(u,c,d){return Math.min(Math.max(c,u),d)}function Ii(u){return!u.some(Number.isNaN)}const ma={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class En{constructor(c,d,m,w=1,E=!0){this.r=c,this.g=d,this.b=m,this.a=w,E||(this.r*=w,this.g*=w,this.b*=w,w||this.overwriteGetter("rgb",[c,d,m,w]))}static parse(c){if(c instanceof En)return c;if(typeof c!="string")return;const d=function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];const w=ma[m];if(w){const[C,O,F]=w;return[C/255,O/255,F/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){const C=m.length<6?1:2;let O=1;return[Fn(m.slice(O,O+=C)),Fn(m.slice(O,O+=C)),Fn(m.slice(O,O+=C)),Fn(m.slice(O,O+C)||"ff")]}if(m.startsWith("rgb")){const C=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){const[O,F,H,Y,te,he,_e,xe,Re,He,Ye,yt]=C,st=[Y||" ",_e||" ",He].join("");if(st==="  "||st==="  /"||st===",,"||st===",,,"){const ut=[H,he,Re].join(""),kt=ut==="%%%"?100:ut===""?255:0;if(kt){const tr=[mi(+F/kt,0,1),mi(+te/kt,0,1),mi(+xe/kt,0,1),Ye?ei(+Ye,yt):1];if(Ii(tr))return tr}}return}}const E=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(E){const[C,O,F,H,Y,te,he,_e,xe]=E,Re=[F||" ",Y||" ",he].join("");if(Re==="  "||Re==="  /"||Re===",,"||Re===",,,"){const He=[+O,mi(+H,0,100),mi(+te,0,100),_e?ei(+_e,xe):1];if(Ii(He))return function([Ye,yt,st,ut]){function kt(tr){const xr=(tr+Ye/30)%12,Xr=yt*Math.min(st,1-st);return st-Xr*Math.max(-1,Math.min(xr-3,9-xr,1))}return Ye=Or(Ye),yt/=100,st/=100,[kt(0),kt(8),kt(4),ut]}(He)}}}(c);return d?new En(...d,!1):void 0}get rgb(){const{r:c,g:d,b:m,a:w}=this,E=w||1/0;return this.overwriteGetter("rgb",[c/E,d/E,m/E,w])}get hcl(){return this.overwriteGetter("hcl",function(c){const[d,m,w,E]=en(c),C=Math.sqrt(m*m+w*w);return[Math.round(1e4*C)?Or(Math.atan2(w,m)*pn):NaN,C,d,E]}(this.rgb))}get lab(){return this.overwriteGetter("lab",en(this.rgb))}overwriteGetter(c,d){return Object.defineProperty(this,c,{value:d}),d}toString(){const[c,d,m,w]=this.rgb;return`rgba(${[c,d,m].map(E=>Math.round(255*E)).join(",")},${w})`}}En.black=new En(0,0,0,1),En.white=new En(1,1,1,1),En.transparent=new En(0,0,0,0),En.red=new En(1,0,0,1);class so{constructor(c,d,m){this.sensitivity=c?d?"variant":"case":d?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(c,d){return this.collator.compare(c,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Lo{constructor(c,d,m,w,E){this.text=c,this.image=d,this.scale=m,this.fontStack=w,this.textColor=E}}class yn{constructor(c){this.sections=c}static fromString(c){return new yn([new Lo(c,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(c=>c.text.length!==0||c.image&&c.image.name.length!==0)}static factory(c){return c instanceof yn?c:yn.fromString(c)}toString(){return this.sections.length===0?"":this.sections.map(c=>c.text).join("")}}class yi{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof yi)return c;if(typeof c=="number")return new yi([c,c,c,c]);if(Array.isArray(c)&&!(c.length<1||c.length>4)){for(const d of c)if(typeof d!="number")return;switch(c.length){case 1:c=[c[0],c[0],c[0],c[0]];break;case 2:c=[c[0],c[1],c[0],c[1]];break;case 3:c=[c[0],c[1],c[2],c[1]]}return new yi(c)}}toString(){return JSON.stringify(this.values)}}const Qs=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Vn{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof Vn)return c;if(Array.isArray(c)&&!(c.length<1)&&c.length%2==0){for(let d=0;d<c.length;d+=2){const m=c[d],w=c[d+1];if(typeof m!="string"||!Qs.has(m)||!Array.isArray(w)||w.length!==2||typeof w[0]!="number"||typeof w[1]!="number")return}return new Vn(c)}}toString(){return JSON.stringify(this.values)}}class zn{constructor(c){this.name=c.name,this.available=c.available}toString(){return this.name}static fromString(c){return c?new zn({name:c,available:!1}):null}}function Ts(u,c,d,m){return typeof u=="number"&&u>=0&&u<=255&&typeof c=="number"&&c>=0&&c<=255&&typeof d=="number"&&d>=0&&d<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[u,c,d,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[u,c,d,m]:[u,c,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ji(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof En||u instanceof so||u instanceof yn||u instanceof yi||u instanceof Vn||u instanceof zn)return!0;if(Array.isArray(u)){for(const c of u)if(!Ji(c))return!1;return!0}if(typeof u=="object"){for(const c in u)if(!Ji(u[c]))return!1;return!0}return!1}function Un(u){if(u===null)return fn;if(typeof u=="string")return Br;if(typeof u=="boolean")return dr;if(typeof u=="number")return Dt;if(u instanceof En)return nn;if(u instanceof so)return Gn;if(u instanceof yn)return Nn;if(u instanceof yi)return gi;if(u instanceof Vn)return Ne;if(u instanceof zn)return Yr;if(Array.isArray(u)){const c=u.length;let d;for(const m of u){const w=Un(m);if(d){if(d===w)continue;d=hr;break}d=w}return ae(d||hr,c)}return Kn}function kn(u){const c=typeof u;return u===null?"":c==="string"||c==="number"||c==="boolean"?String(u):u instanceof En||u instanceof yn||u instanceof yi||u instanceof Vn||u instanceof zn?u.toString():JSON.stringify(u)}class go{constructor(c,d){this.type=c,this.value=d}static parse(c,d){if(c.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${c.length-1} instead.`);if(!Ji(c[1]))return d.error("invalid value");const m=c[1];let w=Un(m);const E=d.expectedType;return w.kind!=="array"||w.N!==0||!E||E.kind!=="array"||typeof E.N=="number"&&E.N!==0||(w=E),new go(w,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class si{constructor(c){this.name="ExpressionEvaluationError",this.message=c}toJSON(){return this.message}}const ya={string:Br,number:Dt,boolean:dr,object:Kn};class ao{constructor(c,d){this.type=c,this.args=d}static parse(c,d){if(c.length<2)return d.error("Expected at least one argument.");let m,w=1;const E=c[0];if(E==="array"){let O,F;if(c.length>2){const H=c[1];if(typeof H!="string"||!(H in ya)||H==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);O=ya[H],w++}else O=hr;if(c.length>3){if(c[2]!==null&&(typeof c[2]!="number"||c[2]<0||c[2]!==Math.floor(c[2])))return d.error('The length argument to "array" must be a positive integer literal',2);F=c[2],w++}m=ae(O,F)}else{if(!ya[E])throw new Error(`Types doesn't contain name = ${E}`);m=ya[E]}const C=[];for(;w<c.length;w++){const O=d.parse(c[w],w,hr);if(!O)return null;C.push(O)}return new ao(m,C)}evaluate(c){for(let d=0;d<this.args.length;d++){const m=this.args[d].evaluate(c);if(!Fe(this.type,Un(m)))return m;if(d===this.args.length-1)throw new si(`Expected value to be of type ${ue(this.type)}, but found ${ue(Un(m))} instead.`)}throw new Error}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const _a={"to-boolean":dr,"to-color":nn,"to-number":Dt,"to-string":Br};class ci{constructor(c,d){this.type=c,this.args=d}static parse(c,d){if(c.length<2)return d.error("Expected at least one argument.");const m=c[0];if(!_a[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&c.length!==2)return d.error("Expected one argument.");const w=_a[m],E=[];for(let C=1;C<c.length;C++){const O=d.parse(c[C],C,hr);if(!O)return null;E.push(O)}return new ci(w,E)}evaluate(c){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(c);case"color":{let d,m;for(const w of this.args){if(d=w.evaluate(c),m=null,d instanceof En)return d;if(typeof d=="string"){const E=c.parseColor(d);if(E)return E}else if(Array.isArray(d)&&(m=d.length<3||d.length>4?`Invalid rbga value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:Ts(d[0],d[1],d[2],d[3]),!m))return new En(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new si(m||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"padding":{let d;for(const m of this.args){d=m.evaluate(c);const w=yi.parse(d);if(w)return w}throw new si(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"variableAnchorOffsetCollection":{let d;for(const m of this.args){d=m.evaluate(c);const w=Vn.parse(d);if(w)return w}throw new si(`Could not parse variableAnchorOffsetCollection from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"number":{let d=null;for(const m of this.args){if(d=m.evaluate(c),d===null)return 0;const w=Number(d);if(!isNaN(w))return w}throw new si(`Could not convert ${JSON.stringify(d)} to number.`)}case"formatted":return yn.fromString(kn(this.args[0].evaluate(c)));case"resolvedImage":return zn.fromString(kn(this.args[0].evaluate(c)));default:return kn(this.args[0].evaluate(c))}}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const Ko=["Unknown","Point","LineString","Polygon"];class mo{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ko[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(c){let d=this._parseColorCache[c];return d||(d=this._parseColorCache[c]=En.parse(c)),d}}class Cs{constructor(c,d,m=[],w,E=new Kt,C=[]){this.registry=c,this.path=m,this.key=m.map(O=>`[${O}]`).join(""),this.scope=E,this.errors=C,this.expectedType=w,this._isConstant=d}parse(c,d,m,w,E={}){return d?this.concat(d,m,w)._parse(c,E):this._parse(c,E)}_parse(c,d){function m(w,E,C){return C==="assert"?new ao(E,[w]):C==="coerce"?new ci(E,[w]):w}if(c!==null&&typeof c!="string"&&typeof c!="boolean"&&typeof c!="number"||(c=["literal",c]),Array.isArray(c)){if(c.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const w=c[0];if(typeof w!="string")return this.error(`Expression name must be a string, but found ${typeof w} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const E=this.registry[w];if(E){let C=E.parse(c,this);if(!C)return null;if(this.expectedType){const O=this.expectedType,F=C.type;if(O.kind!=="string"&&O.kind!=="number"&&O.kind!=="boolean"&&O.kind!=="object"&&O.kind!=="array"||F.kind!=="value")if(O.kind!=="color"&&O.kind!=="formatted"&&O.kind!=="resolvedImage"||F.kind!=="value"&&F.kind!=="string")if(O.kind!=="padding"||F.kind!=="value"&&F.kind!=="number"&&F.kind!=="array")if(O.kind!=="variableAnchorOffsetCollection"||F.kind!=="value"&&F.kind!=="array"){if(this.checkSubtype(O,F))return null}else C=m(C,O,d.typeAnnotation||"coerce");else C=m(C,O,d.typeAnnotation||"coerce");else C=m(C,O,d.typeAnnotation||"coerce");else C=m(C,O,d.typeAnnotation||"assert")}if(!(C instanceof go)&&C.type.kind!=="resolvedImage"&&this._isConstant(C)){const O=new mo;try{C=new go(C.type,C.evaluate(O))}catch(F){return this.error(F.message),null}}return C}return this.error(`Unknown expression "${w}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(c===void 0?"'undefined' value invalid. Use null instead.":typeof c=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof c} instead.`)}concat(c,d,m){const w=typeof c=="number"?this.path.concat(c):this.path,E=m?this.scope.concat(m):this.scope;return new Cs(this.registry,this._isConstant,w,d||null,E,this.errors)}error(c,...d){const m=`${this.key}${d.map(w=>`[${w}]`).join("")}`;this.errors.push(new _r(m,c))}checkSubtype(c,d){const m=Fe(c,d);return m&&this.error(m),m}}class hs{constructor(c,d){this.type=d.type,this.bindings=[].concat(c),this.result=d}evaluate(c){return this.result.evaluate(c)}eachChild(c){for(const d of this.bindings)c(d[1]);c(this.result)}static parse(c,d){if(c.length<4)return d.error(`Expected at least 3 arguments, but found ${c.length-1} instead.`);const m=[];for(let E=1;E<c.length-1;E+=2){const C=c[E];if(typeof C!="string")return d.error(`Expected string, but found ${typeof C} instead.`,E);if(/[^a-zA-Z0-9_]/.test(C))return d.error("Variable names must contain only alphanumeric characters or '_'.",E);const O=d.parse(c[E+1],E+1);if(!O)return null;m.push([C,O])}const w=d.parse(c[c.length-1],c.length-1,d.expectedType,m);return w?new hs(m,w):null}outputDefined(){return this.result.outputDefined()}}class xn{constructor(c,d){this.type=d.type,this.name=c,this.boundExpression=d}static parse(c,d){if(c.length!==2||typeof c[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const m=c[1];return d.scope.has(m)?new xn(m,d.scope.get(m)):d.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(c){return this.boundExpression.evaluate(c)}eachChild(){}outputDefined(){return!1}}class D{constructor(c,d,m){this.type=c,this.index=d,this.input=m}static parse(c,d){if(c.length!==3)return d.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const m=d.parse(c[1],1,Dt),w=d.parse(c[2],2,ae(d.expectedType||hr));return m&&w?new D(w.type.itemType,m,w):null}evaluate(c){const d=this.index.evaluate(c),m=this.input.evaluate(c);if(d<0)throw new si(`Array index out of bounds: ${d} < 0.`);if(d>=m.length)throw new si(`Array index out of bounds: ${d} > ${m.length-1}.`);if(d!==Math.floor(d))throw new si(`Array index must be an integer, but found ${d} instead.`);return m[d]}eachChild(c){c(this.index),c(this.input)}outputDefined(){return!1}}class X{constructor(c,d){this.type=dr,this.needle=c,this.haystack=d}static parse(c,d){if(c.length!==3)return d.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const m=d.parse(c[1],1,hr),w=d.parse(c[2],2,hr);return m&&w?rt(m.type,[dr,Br,Dt,fn,hr])?new X(m,w):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${ue(m.type)} instead`):null}evaluate(c){const d=this.needle.evaluate(c),m=this.haystack.evaluate(c);if(!m)return!1;if(!it(d,["boolean","string","number","null"]))throw new si(`Expected first argument to be of type boolean, string, number or null, but found ${ue(Un(d))} instead.`);if(!it(m,["string","array"]))throw new si(`Expected second argument to be of type array or string, but found ${ue(Un(m))} instead.`);return m.indexOf(d)>=0}eachChild(c){c(this.needle),c(this.haystack)}outputDefined(){return!0}}class j{constructor(c,d,m){this.type=Dt,this.needle=c,this.haystack=d,this.fromIndex=m}static parse(c,d){if(c.length<=2||c.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const m=d.parse(c[1],1,hr),w=d.parse(c[2],2,hr);if(!m||!w)return null;if(!rt(m.type,[dr,Br,Dt,fn,hr]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${ue(m.type)} instead`);if(c.length===4){const E=d.parse(c[3],3,Dt);return E?new j(m,w,E):null}return new j(m,w)}evaluate(c){const d=this.needle.evaluate(c),m=this.haystack.evaluate(c);if(!it(d,["boolean","string","number","null"]))throw new si(`Expected first argument to be of type boolean, string, number or null, but found ${ue(Un(d))} instead.`);let w;if(this.fromIndex&&(w=this.fromIndex.evaluate(c)),it(m,["string"])){const E=m.indexOf(d,w);return E===-1?-1:[...m.slice(0,E)].length}if(it(m,["array"]))return m.indexOf(d,w);throw new si(`Expected second argument to be of type array or string, but found ${ue(Un(m))} instead.`)}eachChild(c){c(this.needle),c(this.haystack),this.fromIndex&&c(this.fromIndex)}outputDefined(){return!1}}class Z{constructor(c,d,m,w,E,C){this.inputType=c,this.type=d,this.input=m,this.cases=w,this.outputs=E,this.otherwise=C}static parse(c,d){if(c.length<5)return d.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if(c.length%2!=1)return d.error("Expected an even number of arguments.");let m,w;d.expectedType&&d.expectedType.kind!=="value"&&(w=d.expectedType);const E={},C=[];for(let H=2;H<c.length-1;H+=2){let Y=c[H];const te=c[H+1];Array.isArray(Y)||(Y=[Y]);const he=d.concat(H);if(Y.length===0)return he.error("Expected at least one branch label.");for(const xe of Y){if(typeof xe!="number"&&typeof xe!="string")return he.error("Branch labels must be numbers or strings.");if(typeof xe=="number"&&Math.abs(xe)>Number.MAX_SAFE_INTEGER)return he.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof xe=="number"&&Math.floor(xe)!==xe)return he.error("Numeric branch labels must be integer values.");if(m){if(he.checkSubtype(m,Un(xe)))return null}else m=Un(xe);if(E[String(xe)]!==void 0)return he.error("Branch labels must be unique.");E[String(xe)]=C.length}const _e=d.parse(te,H,w);if(!_e)return null;w=w||_e.type,C.push(_e)}const O=d.parse(c[1],1,hr);if(!O)return null;const F=d.parse(c[c.length-1],c.length-1,w);return F?O.type.kind!=="value"&&d.concat(1).checkSubtype(m,O.type)?null:new Z(m,w,O,E,C,F):null}evaluate(c){const d=this.input.evaluate(c);return(Un(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(c)}eachChild(c){c(this.input),this.outputs.forEach(c),c(this.otherwise)}outputDefined(){return this.outputs.every(c=>c.outputDefined())&&this.otherwise.outputDefined()}}class de{constructor(c,d,m){this.type=c,this.branches=d,this.otherwise=m}static parse(c,d){if(c.length<4)return d.error(`Expected at least 3 arguments, but found only ${c.length-1}.`);if(c.length%2!=0)return d.error("Expected an odd number of arguments.");let m;d.expectedType&&d.expectedType.kind!=="value"&&(m=d.expectedType);const w=[];for(let C=1;C<c.length-1;C+=2){const O=d.parse(c[C],C,dr);if(!O)return null;const F=d.parse(c[C+1],C+1,m);if(!F)return null;w.push([O,F]),m=m||F.type}const E=d.parse(c[c.length-1],c.length-1,m);if(!E)return null;if(!m)throw new Error("Can't infer output type");return new de(m,w,E)}evaluate(c){for(const[d,m]of this.branches)if(d.evaluate(c))return m.evaluate(c);return this.otherwise.evaluate(c)}eachChild(c){for(const[d,m]of this.branches)c(d),c(m);c(this.otherwise)}outputDefined(){return this.branches.every(([c,d])=>d.outputDefined())&&this.otherwise.outputDefined()}}class we{constructor(c,d,m,w){this.type=c,this.input=d,this.beginIndex=m,this.endIndex=w}static parse(c,d){if(c.length<=2||c.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const m=d.parse(c[1],1,hr),w=d.parse(c[2],2,Dt);if(!m||!w)return null;if(!rt(m.type,[ae(hr),Br,hr]))return d.error(`Expected first argument to be of type array or string, but found ${ue(m.type)} instead`);if(c.length===4){const E=d.parse(c[3],3,Dt);return E?new we(m.type,m,w,E):null}return new we(m.type,m,w)}evaluate(c){const d=this.input.evaluate(c),m=this.beginIndex.evaluate(c);let w;if(this.endIndex&&(w=this.endIndex.evaluate(c)),it(d,["string"]))return[...d].slice(m,w).join("");if(it(d,["array"]))return d.slice(m,w);throw new si(`Expected first argument to be of type array or string, but found ${ue(Un(d))} instead.`)}eachChild(c){c(this.input),c(this.beginIndex),this.endIndex&&c(this.endIndex)}outputDefined(){return!1}}function Le(u,c){const d=u.length-1;let m,w,E=0,C=d,O=0;for(;E<=C;)if(O=Math.floor((E+C)/2),m=u[O],w=u[O+1],m<=c){if(O===d||c<w)return O;E=O+1}else{if(!(m>c))throw new si("Input is not a number.");C=O-1}return 0}class ft{constructor(c,d,m){this.type=c,this.input=d,this.labels=[],this.outputs=[];for(const[w,E]of m)this.labels.push(w),this.outputs.push(E)}static parse(c,d){if(c.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return d.error("Expected an even number of arguments.");const m=d.parse(c[1],1,Dt);if(!m)return null;const w=[];let E=null;d.expectedType&&d.expectedType.kind!=="value"&&(E=d.expectedType);for(let C=1;C<c.length;C+=2){const O=C===1?-1/0:c[C],F=c[C+1],H=C,Y=C+1;if(typeof O!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(w.length&&w[w.length-1][0]>=O)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',H);const te=d.parse(F,Y,E);if(!te)return null;E=E||te.type,w.push([O,te])}return new ft(E,m,w)}evaluate(c){const d=this.labels,m=this.outputs;if(d.length===1)return m[0].evaluate(c);const w=this.input.evaluate(c);if(w<=d[0])return m[0].evaluate(c);const E=d.length;return w>=d[E-1]?m[E-1].evaluate(c):m[Le(d,w)].evaluate(c)}eachChild(c){c(this.input);for(const d of this.outputs)c(d)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function Mt(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var Qt=er;function er(u,c,d,m){this.cx=3*u,this.bx=3*(d-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(m-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=c,this.p2x=d,this.p2y=m}er.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,c){if(c===void 0&&(c=1e-6),u<0)return 0;if(u>1)return 1;for(var d=u,m=0;m<8;m++){var w=this.sampleCurveX(d)-u;if(Math.abs(w)<c)return d;var E=this.sampleCurveDerivativeX(d);if(Math.abs(E)<1e-6)break;d-=w/E}var C=0,O=1;for(d=u,m=0;m<20&&(w=this.sampleCurveX(d),!(Math.abs(w-u)<c));m++)u>w?C=d:O=d,d=.5*(O-C)+C;return d},solve:function(u,c){return this.sampleCurveY(this.solveCurveX(u,c))}};var Jt=Mt(Qt);function yr(u,c,d){return u+d*(c-u)}function ti(u,c,d){return u.map((m,w)=>yr(m,c[w],d))}const zr={number:yr,color:function(u,c,d,m="rgb"){switch(m){case"rgb":{const[w,E,C,O]=ti(u.rgb,c.rgb,d);return new En(w,E,C,O,!1)}case"hcl":{const[w,E,C,O]=u.hcl,[F,H,Y,te]=c.hcl;let he,_e;if(isNaN(w)||isNaN(F))isNaN(w)?isNaN(F)?he=NaN:(he=F,C!==1&&C!==0||(_e=H)):(he=w,Y!==1&&Y!==0||(_e=E));else{let yt=F-w;F>w&&yt>180?yt-=360:F<w&&w-F>180&&(yt+=360),he=w+d*yt}const[xe,Re,He,Ye]=function([yt,st,ut,kt]){return yt=isNaN(yt)?0:yt*Ar,Jr([ut,Math.cos(yt)*st,Math.sin(yt)*st,kt])}([he,_e??yr(E,H,d),yr(C,Y,d),yr(O,te,d)]);return new En(xe,Re,He,Ye,!1)}case"lab":{const[w,E,C,O]=Jr(ti(u.lab,c.lab,d));return new En(w,E,C,O,!1)}}},array:ti,padding:function(u,c,d){return new yi(ti(u.values,c.values,d))},variableAnchorOffsetCollection:function(u,c,d){const m=u.values,w=c.values;if(m.length!==w.length)throw new si(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${c.toString()}`);const E=[];for(let C=0;C<m.length;C+=2){if(m[C]!==w[C])throw new si(`Cannot interpolate values containing mismatched anchors. from[${C}]: ${m[C]}, to[${C}]: ${w[C]}`);E.push(m[C]);const[O,F]=m[C+1],[H,Y]=w[C+1];E.push([yr(O,H,d),yr(F,Y,d)])}return new Vn(E)}};class br{constructor(c,d,m,w,E){this.type=c,this.operator=d,this.interpolation=m,this.input=w,this.labels=[],this.outputs=[];for(const[C,O]of E)this.labels.push(C),this.outputs.push(O)}static interpolationFactor(c,d,m,w){let E=0;if(c.name==="exponential")E=$t(d,c.base,m,w);else if(c.name==="linear")E=$t(d,1,m,w);else if(c.name==="cubic-bezier"){const C=c.controlPoints;E=new Jt(C[0],C[1],C[2],C[3]).solve($t(d,1,m,w))}return E}static parse(c,d){let[m,w,E,...C]=c;if(!Array.isArray(w)||w.length===0)return d.error("Expected an interpolation type expression.",1);if(w[0]==="linear")w={name:"linear"};else if(w[0]==="exponential"){const H=w[1];if(typeof H!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);w={name:"exponential",base:H}}else{if(w[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(w[0])}`,1,0);{const H=w.slice(1);if(H.length!==4||H.some(Y=>typeof Y!="number"||Y<0||Y>1))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);w={name:"cubic-bezier",controlPoints:H}}}if(c.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(E=d.parse(E,2,Dt),!E)return null;const O=[];let F=null;m==="interpolate-hcl"||m==="interpolate-lab"?F=nn:d.expectedType&&d.expectedType.kind!=="value"&&(F=d.expectedType);for(let H=0;H<C.length;H+=2){const Y=C[H],te=C[H+1],he=H+3,_e=H+4;if(typeof Y!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',he);if(O.length&&O[O.length-1][0]>=Y)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',he);const xe=d.parse(te,_e,F);if(!xe)return null;F=F||xe.type,O.push([Y,xe])}return et(F,Dt)||et(F,nn)||et(F,gi)||et(F,Ne)||et(F,ae(Dt))?new br(F,m,w,E,O):d.error(`Type ${ue(F)} is not interpolatable.`)}evaluate(c){const d=this.labels,m=this.outputs;if(d.length===1)return m[0].evaluate(c);const w=this.input.evaluate(c);if(w<=d[0])return m[0].evaluate(c);const E=d.length;if(w>=d[E-1])return m[E-1].evaluate(c);const C=Le(d,w),O=br.interpolationFactor(this.interpolation,w,d[C],d[C+1]),F=m[C].evaluate(c),H=m[C+1].evaluate(c);switch(this.operator){case"interpolate":return zr[this.type.kind](F,H,O);case"interpolate-hcl":return zr.color(F,H,O,"hcl");case"interpolate-lab":return zr.color(F,H,O,"lab")}}eachChild(c){c(this.input);for(const d of this.outputs)c(d)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function $t(u,c,d,m){const w=m-d,E=u-d;return w===0?0:c===1?E/w:(Math.pow(c,E)-1)/(Math.pow(c,w)-1)}class Tr{constructor(c,d){this.type=c,this.args=d}static parse(c,d){if(c.length<2)return d.error("Expectected at least one argument.");let m=null;const w=d.expectedType;w&&w.kind!=="value"&&(m=w);const E=[];for(const O of c.slice(1)){const F=d.parse(O,1+E.length,m,void 0,{typeAnnotation:"omit"});if(!F)return null;m=m||F.type,E.push(F)}if(!m)throw new Error("No output type");const C=w&&E.some(O=>Fe(w,O.type));return new Tr(C?hr:m,E)}evaluate(c){let d,m=null,w=0;for(const E of this.args)if(w++,m=E.evaluate(c),m&&m instanceof zn&&!m.available&&(d||(d=m.name),m=null,w===this.args.length&&(m=d)),m!==null)break;return m}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}function wn(u,c){return u==="=="||u==="!="?c.kind==="boolean"||c.kind==="string"||c.kind==="number"||c.kind==="null"||c.kind==="value":c.kind==="string"||c.kind==="number"||c.kind==="value"}function Hi(u,c,d,m){return m.compare(c,d)===0}function ai(u,c,d){const m=u!=="=="&&u!=="!=";return class S${constructor(E,C,O){this.type=dr,this.lhs=E,this.rhs=C,this.collator=O,this.hasUntypedArgument=E.type.kind==="value"||C.type.kind==="value"}static parse(E,C){if(E.length!==3&&E.length!==4)return C.error("Expected two or three arguments.");const O=E[0];let F=C.parse(E[1],1,hr);if(!F)return null;if(!wn(O,F.type))return C.concat(1).error(`"${O}" comparisons are not supported for type '${ue(F.type)}'.`);let H=C.parse(E[2],2,hr);if(!H)return null;if(!wn(O,H.type))return C.concat(2).error(`"${O}" comparisons are not supported for type '${ue(H.type)}'.`);if(F.type.kind!==H.type.kind&&F.type.kind!=="value"&&H.type.kind!=="value")return C.error(`Cannot compare types '${ue(F.type)}' and '${ue(H.type)}'.`);m&&(F.type.kind==="value"&&H.type.kind!=="value"?F=new ao(H.type,[F]):F.type.kind!=="value"&&H.type.kind==="value"&&(H=new ao(F.type,[H])));let Y=null;if(E.length===4){if(F.type.kind!=="string"&&H.type.kind!=="string"&&F.type.kind!=="value"&&H.type.kind!=="value")return C.error("Cannot use collator to compare non-string types.");if(Y=C.parse(E[3],3,Gn),!Y)return null}return new S$(F,H,Y)}evaluate(E){const C=this.lhs.evaluate(E),O=this.rhs.evaluate(E);if(m&&this.hasUntypedArgument){const F=Un(C),H=Un(O);if(F.kind!==H.kind||F.kind!=="string"&&F.kind!=="number")throw new si(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${F.kind}, ${H.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const F=Un(C),H=Un(O);if(F.kind!=="string"||H.kind!=="string")return c(E,C,O)}return this.collator?d(E,C,O,this.collator.evaluate(E)):c(E,C,O)}eachChild(E){E(this.lhs),E(this.rhs),this.collator&&E(this.collator)}outputDefined(){return!0}}}const zl=ai("==",function(u,c,d){return c===d},Hi),Qc=ai("!=",function(u,c,d){return c!==d},function(u,c,d,m){return!Hi(0,c,d,m)}),li=ai("<",function(u,c,d){return c<d},function(u,c,d,m){return m.compare(c,d)<0}),xh=ai(">",function(u,c,d){return c>d},function(u,c,d,m){return m.compare(c,d)>0}),Ef=ai("<=",function(u,c,d){return c<=d},function(u,c,d,m){return m.compare(c,d)<=0}),Ps=ai(">=",function(u,c,d){return c>=d},function(u,c,d,m){return m.compare(c,d)>=0});class ea{constructor(c,d,m){this.type=Gn,this.locale=m,this.caseSensitive=c,this.diacriticSensitive=d}static parse(c,d){if(c.length!==2)return d.error("Expected one argument.");const m=c[1];if(typeof m!="object"||Array.isArray(m))return d.error("Collator options argument must be an object.");const w=d.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,dr);if(!w)return null;const E=d.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,dr);if(!E)return null;let C=null;return m.locale&&(C=d.parse(m.locale,1,Br),!C)?null:new ea(w,E,C)}evaluate(c){return new so(this.caseSensitive.evaluate(c),this.diacriticSensitive.evaluate(c),this.locale?this.locale.evaluate(c):null)}eachChild(c){c(this.caseSensitive),c(this.diacriticSensitive),this.locale&&c(this.locale)}outputDefined(){return!1}}class va{constructor(c,d,m,w,E){this.type=Br,this.number=c,this.locale=d,this.currency=m,this.minFractionDigits=w,this.maxFractionDigits=E}static parse(c,d){if(c.length!==3)return d.error("Expected two arguments.");const m=d.parse(c[1],1,Dt);if(!m)return null;const w=c[2];if(typeof w!="object"||Array.isArray(w))return d.error("NumberFormat options argument must be an object.");let E=null;if(w.locale&&(E=d.parse(w.locale,1,Br),!E))return null;let C=null;if(w.currency&&(C=d.parse(w.currency,1,Br),!C))return null;let O=null;if(w["min-fraction-digits"]&&(O=d.parse(w["min-fraction-digits"],1,Dt),!O))return null;let F=null;return w["max-fraction-digits"]&&(F=d.parse(w["max-fraction-digits"],1,Dt),!F)?null:new va(m,E,C,O,F)}evaluate(c){return new Intl.NumberFormat(this.locale?this.locale.evaluate(c):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(c):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(c):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(c):void 0}).format(this.number.evaluate(c))}eachChild(c){c(this.number),this.locale&&c(this.locale),this.currency&&c(this.currency),this.minFractionDigits&&c(this.minFractionDigits),this.maxFractionDigits&&c(this.maxFractionDigits)}outputDefined(){return!1}}class xc{constructor(c){this.type=Nn,this.sections=c}static parse(c,d){if(c.length<2)return d.error("Expected at least one argument.");const m=c[1];if(!Array.isArray(m)&&typeof m=="object")return d.error("First argument must be an image or text section.");const w=[];let E=!1;for(let C=1;C<=c.length-1;++C){const O=c[C];if(E&&typeof O=="object"&&!Array.isArray(O)){E=!1;let F=null;if(O["font-scale"]&&(F=d.parse(O["font-scale"],1,Dt),!F))return null;let H=null;if(O["text-font"]&&(H=d.parse(O["text-font"],1,ae(Br)),!H))return null;let Y=null;if(O["text-color"]&&(Y=d.parse(O["text-color"],1,nn),!Y))return null;const te=w[w.length-1];te.scale=F,te.font=H,te.textColor=Y}else{const F=d.parse(c[C],1,hr);if(!F)return null;const H=F.type.kind;if(H!=="string"&&H!=="value"&&H!=="null"&&H!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");E=!0,w.push({content:F,scale:null,font:null,textColor:null})}}return new xc(w)}evaluate(c){return new yn(this.sections.map(d=>{const m=d.content.evaluate(c);return Un(m)===Yr?new Lo("",m,null,null,null):new Lo(kn(m),null,d.scale?d.scale.evaluate(c):null,d.font?d.font.evaluate(c).join(","):null,d.textColor?d.textColor.evaluate(c):null)}))}eachChild(c){for(const d of this.sections)c(d.content),d.scale&&c(d.scale),d.font&&c(d.font),d.textColor&&c(d.textColor)}outputDefined(){return!1}}class ba{constructor(c){this.type=Yr,this.input=c}static parse(c,d){if(c.length!==2)return d.error("Expected two arguments.");const m=d.parse(c[1],1,Br);return m?new ba(m):d.error("No image name provided.")}evaluate(c){const d=this.input.evaluate(c),m=zn.fromString(d);return m&&c.availableImages&&(m.available=c.availableImages.indexOf(d)>-1),m}eachChild(c){c(this.input)}outputDefined(){return!1}}class $l{constructor(c){this.type=Dt,this.input=c}static parse(c,d){if(c.length!==2)return d.error(`Expected 1 argument, but found ${c.length-1} instead.`);const m=d.parse(c[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${ue(m.type)} instead.`):new $l(m):null}evaluate(c){const d=this.input.evaluate(c);if(typeof d=="string")return[...d].length;if(Array.isArray(d))return d.length;throw new si(`Expected value to be of type string or array, but found ${ue(Un(d))} instead.`)}eachChild(c){c(this.input)}outputDefined(){return!1}}const Go=8192;function wh(u,c){const d=(180+u[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,w=Math.pow(2,c.z);return[Math.round(d*w*Go),Math.round(m*w*Go)]}function eu(u,c){const d=Math.pow(2,c.z);return[(w=(u[0]/Go+c.x)/d,360*w-180),(m=(u[1]/Go+c.y)/d,360/Math.PI*Math.atan(Math.exp((180-360*m)*Math.PI/180))-90)];var m,w}function Ha(u,c){u[0]=Math.min(u[0],c[0]),u[1]=Math.min(u[1],c[1]),u[2]=Math.max(u[2],c[0]),u[3]=Math.max(u[3],c[1])}function ta(u,c){return!(u[0]<=c[0]||u[2]>=c[2]||u[1]<=c[1]||u[3]>=c[3])}function Sn(u,c,d){const m=u[0]-c[0],w=u[1]-c[1],E=u[0]-d[0],C=u[1]-d[1];return m*C-E*w==0&&m*E<=0&&w*C<=0}function ra(u,c,d,m){return(w=[m[0]-d[0],m[1]-d[1]])[0]*(E=[c[0]-u[0],c[1]-u[1]])[1]-w[1]*E[0]!=0&&!(!Vs(u,c,d,m)||!Vs(d,m,u,c));var w,E}function Tf(u,c,d){for(const m of d)for(let w=0;w<m.length-1;++w)if(ra(u,c,m[w],m[w+1]))return!0;return!1}function js(u,c,d=!1){let m=!1;for(const O of c)for(let F=0;F<O.length-1;F++){if(Sn(u,O[F],O[F+1]))return d;(E=O[F])[1]>(w=u)[1]!=(C=O[F+1])[1]>w[1]&&w[0]<(C[0]-E[0])*(w[1]-E[1])/(C[1]-E[1])+E[0]&&(m=!m)}var w,E,C;return m}function Is(u,c){for(const d of c)if(js(u,d))return!0;return!1}function Ul(u,c){for(const d of u)if(!js(d,c))return!1;for(let d=0;d<u.length-1;++d)if(Tf(u[d],u[d+1],c))return!1;return!0}function jl(u,c){for(const d of c)if(Ul(u,d))return!0;return!1}function Vs(u,c,d,m){const w=m[0]-d[0],E=m[1]-d[1],C=(u[0]-d[0])*E-w*(u[1]-d[1]),O=(c[0]-d[0])*E-w*(c[1]-d[1]);return C>0&&O<0||C<0&&O>0}function _l(u,c,d){const m=[];for(let w=0;w<u.length;w++){const E=[];for(let C=0;C<u[w].length;C++){const O=wh(u[w][C],d);Ha(c,O),E.push(O)}m.push(E)}return m}function Fu(u,c,d){const m=[];for(let w=0;w<u.length;w++){const E=_l(u[w],c,d);m.push(E)}return m}function tu(u,c,d,m){if(u[0]<d[0]||u[0]>d[2]){const w=.5*m;let E=u[0]-d[0]>w?-m:d[0]-u[0]>w?m:0;E===0&&(E=u[0]-d[2]>w?-m:d[2]-u[0]>w?m:0),u[0]+=E}Ha(c,u)}function wc(u,c,d,m){const w=Math.pow(2,m.z)*Go,E=[m.x*Go,m.y*Go],C=[];for(const O of u)for(const F of O){const H=[F.x+E[0],F.y+E[1]];tu(H,c,d,w),C.push(H)}return C}function Vl(u,c,d,m){const w=Math.pow(2,m.z)*Go,E=[m.x*Go,m.y*Go],C=[];for(const F of u){const H=[];for(const Y of F){const te=[Y.x+E[0],Y.y+E[1]];Ha(c,te),H.push(te)}C.push(H)}if(c[2]-c[0]<=w/2){(O=c)[0]=O[1]=1/0,O[2]=O[3]=-1/0;for(const F of C)for(const H of F)tu(H,c,d,w)}var O;return C}class Hs{constructor(c,d){this.type=dr,this.geojson=c,this.geometries=d}static parse(c,d){if(c.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${c.length-1} instead.`);if(Ji(c[1])){const m=c[1];if(m.type==="FeatureCollection"){const w=[];for(const E of m.features){const{type:C,coordinates:O}=E.geometry;C==="Polygon"&&w.push(O),C==="MultiPolygon"&&w.push(...O)}if(w.length)return new Hs(m,{type:"MultiPolygon",coordinates:w})}else if(m.type==="Feature"){const w=m.geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new Hs(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new Hs(m,m)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(c){if(c.geometry()!=null&&c.canonicalID()!=null){if(c.geometryType()==="Point")return function(d,m){const w=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],C=d.canonicalID();if(m.type==="Polygon"){const O=_l(m.coordinates,E,C),F=wc(d.geometry(),w,E,C);if(!ta(w,E))return!1;for(const H of F)if(!js(H,O))return!1}if(m.type==="MultiPolygon"){const O=Fu(m.coordinates,E,C),F=wc(d.geometry(),w,E,C);if(!ta(w,E))return!1;for(const H of F)if(!Is(H,O))return!1}return!0}(c,this.geometries);if(c.geometryType()==="LineString")return function(d,m){const w=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],C=d.canonicalID();if(m.type==="Polygon"){const O=_l(m.coordinates,E,C),F=Vl(d.geometry(),w,E,C);if(!ta(w,E))return!1;for(const H of F)if(!Ul(H,O))return!1}if(m.type==="MultiPolygon"){const O=Fu(m.coordinates,E,C),F=Vl(d.geometry(),w,E,C);if(!ta(w,E))return!1;for(const H of F)if(!jl(H,O))return!1}return!0}(c,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Sc=class{constructor(u=[],c=(d,m)=>d<m?-1:d>m?1:0){if(this.data=u,this.length=this.data.length,this.compare=c,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],c=this.data.pop();return--this.length>0&&(this.data[0]=c,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:c,compare:d}=this,m=c[u];for(;u>0;){const w=u-1>>1,E=c[w];if(d(m,E)>=0)break;c[u]=E,u=w}c[u]=m}_down(u){const{data:c,compare:d}=this,m=this.length>>1,w=c[u];for(;u<m;){let E=1+(u<<1);const C=E+1;if(C<this.length&&d(c[C],c[E])<0&&(E=C),d(c[E],w)>=0)break;c[u]=c[E],u=E}c[u]=w}};function Bu(u,c,d,m,w){xa(u,c,d,m||u.length-1,w||ru)}function xa(u,c,d,m,w){for(;m>d;){if(m-d>600){var E=m-d+1,C=c-d+1,O=Math.log(E),F=.5*Math.exp(2*O/3),H=.5*Math.sqrt(O*F*(E-F)/E)*(C-E/2<0?-1:1);xa(u,c,Math.max(d,Math.floor(c-C*F/E+H)),Math.min(m,Math.floor(c+(E-C)*F/E+H)),w)}var Y=u[c],te=d,he=m;for(Hl(u,d,c),w(u[m],Y)>0&&Hl(u,d,m);te<he;){for(Hl(u,te,he),te++,he--;w(u[te],Y)<0;)te++;for(;w(u[he],Y)>0;)he--}w(u[d],Y)===0?Hl(u,d,he):Hl(u,++he,m),he<=c&&(d=he+1),c<=he&&(m=he-1)}}function Hl(u,c,d){var m=u[c];u[c]=u[d],u[d]=m}function ru(u,c){return u<c?-1:u>c?1:0}function qa(u,c){if(u.length<=1)return[u];const d=[];let m,w;for(const E of u){const C=na(E);C!==0&&(E.area=Math.abs(C),w===void 0&&(w=C<0),w===C<0?(m&&d.push(m),m=[E]):m.push(E))}if(m&&d.push(m),c>1)for(let E=0;E<d.length;E++)d[E].length<=c||(Bu(d[E],c,1,d[E].length-1,Ac),d[E]=d[E].slice(0,c));return d}function Ac(u,c){return c.area-u.area}function na(u){let c=0;for(let d,m,w=0,E=u.length,C=E-1;w<E;C=w++)d=u[w],m=u[C],c+=(m.x-d.x)*(d.y+m.y);return c}const ql=1/298.257223563,$=ql*(2-ql),ye=Math.PI/180;class Ve{constructor(c){const d=6378.137*ye*1e3,m=Math.cos(c*ye),w=1/(1-$*(1-m*m)),E=Math.sqrt(w);this.kx=d*E*m,this.ky=d*E*w*(1-$)}distance(c,d){const m=this.wrap(c[0]-d[0])*this.kx,w=(c[1]-d[1])*this.ky;return Math.sqrt(m*m+w*w)}pointOnLine(c,d){let m,w,E,C,O=1/0;for(let F=0;F<c.length-1;F++){let H=c[F][0],Y=c[F][1],te=this.wrap(c[F+1][0]-H)*this.kx,he=(c[F+1][1]-Y)*this.ky,_e=0;te===0&&he===0||(_e=(this.wrap(d[0]-H)*this.kx*te+(d[1]-Y)*this.ky*he)/(te*te+he*he),_e>1?(H=c[F+1][0],Y=c[F+1][1]):_e>0&&(H+=te/this.kx*_e,Y+=he/this.ky*_e)),te=this.wrap(d[0]-H)*this.kx,he=(d[1]-Y)*this.ky;const xe=te*te+he*he;xe<O&&(O=xe,m=H,w=Y,E=F,C=_e)}return{point:[m,w],index:E,t:Math.max(0,Math.min(1,C))}}wrap(c){for(;c<-180;)c+=360;for(;c>180;)c-=360;return c}}function ot(u,c){return c[0]-u[0]}function mt(u){return u[1]-u[0]+1}function Ot(u,c){return u[1]>=u[0]&&u[1]<c}function nr(u,c){if(u[0]>u[1])return[null,null];const d=mt(u);if(c){if(d===2)return[u,null];const w=Math.floor(d/2);return[[u[0],u[0]+w],[u[0]+w,u[1]]]}if(d===1)return[u,null];const m=Math.floor(d/2)-1;return[[u[0],u[0]+m],[u[0]+m+1,u[1]]]}function wr(u,c){if(!Ot(c,u.length))return[1/0,1/0,-1/0,-1/0];const d=[1/0,1/0,-1/0,-1/0];for(let m=c[0];m<=c[1];++m)Ha(d,u[m]);return d}function Hr(u){const c=[1/0,1/0,-1/0,-1/0];for(const d of u)for(const m of d)Ha(c,m);return c}function an(u){return u[0]!==-1/0&&u[1]!==-1/0&&u[2]!==1/0&&u[3]!==1/0}function ln(u,c,d){if(!an(u)||!an(c))return NaN;let m=0,w=0;return u[2]<c[0]&&(m=c[0]-u[2]),u[0]>c[2]&&(m=u[0]-c[2]),u[1]>c[3]&&(w=u[1]-c[3]),u[3]<c[1]&&(w=c[1]-u[3]),d.distance([0,0],[m,w])}function cn(u,c,d){const m=d.pointOnLine(c,u);return d.distance(u,m.point)}function Hn(u,c,d,m,w){const E=Math.min(cn(u,[d,m],w),cn(c,[d,m],w)),C=Math.min(cn(d,[u,c],w),cn(m,[u,c],w));return Math.min(E,C)}function wi(u,c,d,m,w){if(!Ot(c,u.length)||!Ot(m,d.length))return 1/0;let E=1/0;for(let C=c[0];C<c[1];++C){const O=u[C],F=u[C+1];for(let H=m[0];H<m[1];++H){const Y=d[H],te=d[H+1];if(ra(O,F,Y,te))return 0;E=Math.min(E,Hn(O,F,Y,te,w))}}return E}function un(u,c,d,m,w){if(!Ot(c,u.length)||!Ot(m,d.length))return NaN;let E=1/0;for(let C=c[0];C<=c[1];++C)for(let O=m[0];O<=m[1];++O)if(E=Math.min(E,w.distance(u[C],d[O])),E===0)return E;return E}function Yo(u,c,d){if(js(u,c,!0))return 0;let m=1/0;for(const w of c){const E=w[0],C=w[w.length-1];if(E!==C&&(m=Math.min(m,cn(u,[C,E],d)),m===0))return m;const O=d.pointOnLine(w,u);if(m=Math.min(m,d.distance(u,O.point)),m===0)return m}return m}function Lr(u,c,d,m){if(!Ot(c,u.length))return NaN;for(let E=c[0];E<=c[1];++E)if(js(u[E],d,!0))return 0;let w=1/0;for(let E=c[0];E<c[1];++E){const C=u[E],O=u[E+1];for(const F of d)for(let H=0,Y=F.length,te=Y-1;H<Y;te=H++){const he=F[te],_e=F[H];if(ra(C,O,he,_e))return 0;w=Math.min(w,Hn(C,O,he,_e,m))}}return w}function Co(u,c){for(const d of u)for(const m of d)if(js(m,c,!0))return!0;return!1}function Tn(u,c,d,m=1/0){const w=Hr(u),E=Hr(c);if(m!==1/0&&ln(w,E,d)>=m)return m;if(ta(w,E)){if(Co(u,c))return 0}else if(Co(c,u))return 0;let C=1/0;for(const O of u)for(let F=0,H=O.length,Y=H-1;F<H;Y=F++){const te=O[Y],he=O[F];for(const _e of c)for(let xe=0,Re=_e.length,He=Re-1;xe<Re;He=xe++){const Ye=_e[He],yt=_e[xe];if(ra(te,he,Ye,yt))return 0;C=Math.min(C,Hn(te,he,Ye,yt,d))}}return C}function Mn(u,c,d,m,w,E){if(!E)return;const C=ln(wr(m,E),w,d);C<c&&u.push([C,E,[0,0]])}function Wa(u,c,d,m,w,E,C){if(!E||!C)return;const O=ln(wr(m,E),wr(w,C),d);O<c&&u.push([O,E,C])}function vl(u,c,d,m,w=1/0){let E=Math.min(m.distance(u[0],d[0][0]),w);if(E===0)return E;const C=new Sc([[0,[0,u.length-1],[0,0]]],ot),O=Hr(d);for(;C.length>0;){const F=C.pop();if(F[0]>=E)continue;const H=F[1],Y=c?50:100;if(mt(H)<=Y){if(!Ot(H,u.length))return NaN;if(c){const te=Lr(u,H,d,m);if(isNaN(te)||te===0)return te;E=Math.min(E,te)}else for(let te=H[0];te<=H[1];++te){const he=Yo(u[te],d,m);if(E=Math.min(E,he),E===0)return 0}}else{const te=nr(H,c);Mn(C,E,m,u,O,te[0]),Mn(C,E,m,u,O,te[1])}}return E}function Xa(u,c,d,m,w,E=1/0){let C=Math.min(E,w.distance(u[0],d[0]));if(C===0)return C;const O=new Sc([[0,[0,u.length-1],[0,d.length-1]]],ot);for(;O.length>0;){const F=O.pop();if(F[0]>=C)continue;const H=F[1],Y=F[2],te=c?50:100,he=m?50:100;if(mt(H)<=te&&mt(Y)<=he){if(!Ot(H,u.length)&&Ot(Y,d.length))return NaN;let _e;if(c&&m)_e=wi(u,H,d,Y,w),C=Math.min(C,_e);else if(c&&!m){const xe=u.slice(H[0],H[1]+1);for(let Re=Y[0];Re<=Y[1];++Re)if(_e=cn(d[Re],xe,w),C=Math.min(C,_e),C===0)return C}else if(!c&&m){const xe=d.slice(Y[0],Y[1]+1);for(let Re=H[0];Re<=H[1];++Re)if(_e=cn(u[Re],xe,w),C=Math.min(C,_e),C===0)return C}else _e=un(u,H,d,Y,w),C=Math.min(C,_e)}else{const _e=nr(H,c),xe=nr(Y,m);Wa(O,C,w,u,d,_e[0],xe[0]),Wa(O,C,w,u,d,_e[0],xe[1]),Wa(O,C,w,u,d,_e[1],xe[0]),Wa(O,C,w,u,d,_e[1],xe[1])}}return C}function bl(u){return u.type==="MultiPolygon"?u.coordinates.map(c=>({type:"Polygon",coordinates:c})):u.type==="MultiLineString"?u.coordinates.map(c=>({type:"LineString",coordinates:c})):u.type==="MultiPoint"?u.coordinates.map(c=>({type:"Point",coordinates:c})):[u]}class Rs{constructor(c,d){this.type=Dt,this.geojson=c,this.geometries=d}static parse(c,d){if(c.length!==2)return d.error(`'distance' expression requires exactly one argument, but found ${c.length-1} instead.`);if(Ji(c[1])){const m=c[1];if(m.type==="FeatureCollection")return new Rs(m,m.features.map(w=>bl(w.geometry)).flat());if(m.type==="Feature")return new Rs(m,bl(m.geometry));if("type"in m&&"coordinates"in m)return new Rs(m,bl(m))}return d.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(c){if(c.geometry()!=null&&c.canonicalID()!=null){if(c.geometryType()==="Point")return function(d,m){const w=d.geometry(),E=w.flat().map(F=>eu([F.x,F.y],d.canonical));if(w.length===0)return NaN;const C=new Ve(E[0][1]);let O=1/0;for(const F of m){switch(F.type){case"Point":O=Math.min(O,Xa(E,!1,[F.coordinates],!1,C,O));break;case"LineString":O=Math.min(O,Xa(E,!1,F.coordinates,!0,C,O));break;case"Polygon":O=Math.min(O,vl(E,!1,F.coordinates,C,O))}if(O===0)return O}return O}(c,this.geometries);if(c.geometryType()==="LineString")return function(d,m){const w=d.geometry(),E=w.flat().map(F=>eu([F.x,F.y],d.canonical));if(w.length===0)return NaN;const C=new Ve(E[0][1]);let O=1/0;for(const F of m){switch(F.type){case"Point":O=Math.min(O,Xa(E,!0,[F.coordinates],!1,C,O));break;case"LineString":O=Math.min(O,Xa(E,!0,F.coordinates,!0,C,O));break;case"Polygon":O=Math.min(O,vl(E,!0,F.coordinates,C,O))}if(O===0)return O}return O}(c,this.geometries);if(c.geometryType()==="Polygon")return function(d,m){const w=d.geometry();if(w.length===0||w[0].length===0)return NaN;const E=qa(w,0).map(F=>F.map(H=>H.map(Y=>eu([Y.x,Y.y],d.canonical)))),C=new Ve(E[0][0][0][1]);let O=1/0;for(const F of m)for(const H of E){switch(F.type){case"Point":O=Math.min(O,vl([F.coordinates],!1,H,C,O));break;case"LineString":O=Math.min(O,vl(F.coordinates,!0,H,C,O));break;case"Polygon":O=Math.min(O,Tn(H,F.coordinates,C,O))}if(O===0)return O}return O}(c,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const fs={"==":zl,"!=":Qc,">":xh,"<":li,">=":Ps,"<=":Ef,array:ao,at:D,boolean:ao,case:de,coalesce:Tr,collator:ea,format:xc,image:ba,in:X,"index-of":j,interpolate:br,"interpolate-hcl":br,"interpolate-lab":br,length:$l,let:hs,literal:go,match:Z,number:ao,"number-format":va,object:ao,slice:we,step:ft,string:ao,"to-boolean":ci,"to-color":ci,"to-number":ci,"to-string":ci,var:xn,within:Hs,distance:Rs};class Fo{constructor(c,d,m,w){this.name=c,this.type=d,this._evaluate=m,this.args=w}evaluate(c){return this._evaluate(c,this.args)}eachChild(c){this.args.forEach(c)}outputDefined(){return!1}static parse(c,d){const m=c[0],w=Fo.definitions[m];if(!w)return d.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const E=Array.isArray(w)?w[0]:w.type,C=Array.isArray(w)?[[w[1],w[2]]]:w.overloads,O=C.filter(([H])=>!Array.isArray(H)||H.length===c.length-1);let F=null;for(const[H,Y]of O){F=new Cs(d.registry,xl,d.path,null,d.scope);const te=[];let he=!1;for(let _e=1;_e<c.length;_e++){const xe=c[_e],Re=Array.isArray(H)?H[_e-1]:H.type,He=F.parse(xe,1+te.length,Re);if(!He){he=!0;break}te.push(He)}if(!he)if(Array.isArray(H)&&H.length!==te.length)F.error(`Expected ${H.length} arguments, but found ${te.length} instead.`);else{for(let _e=0;_e<te.length;_e++){const xe=Array.isArray(H)?H[_e]:H.type,Re=te[_e];F.concat(_e+1).checkSubtype(xe,Re.type)}if(F.errors.length===0)return new Fo(m,E,Y,te)}}if(O.length===1)d.errors.push(...F.errors);else{const H=(O.length?O:C).map(([te])=>{return he=te,Array.isArray(he)?`(${he.map(ue).join(", ")})`:`(${ue(he.type)}...)`;var he}).join(" | "),Y=[];for(let te=1;te<c.length;te++){const he=d.parse(c[te],1+Y.length);if(!he)return null;Y.push(ue(he.type))}d.error(`Expected arguments of type ${H}, but found (${Y.join(", ")}) instead.`)}return null}static register(c,d){Fo.definitions=d;for(const m in d)c[m]=Fo}}function Mi(u,[c,d,m,w]){c=c.evaluate(u),d=d.evaluate(u),m=m.evaluate(u);const E=w?w.evaluate(u):1,C=Ts(c,d,m,E);if(C)throw new si(C);return new En(c/255,d/255,m/255,E,!1)}function Wl(u,c){return u in c}function ks(u,c){const d=c[u];return d===void 0?null:d}function qs(u){return{type:u}}function xl(u){if(u instanceof xn)return xl(u.boundExpression);if(u instanceof Fo&&u.name==="error"||u instanceof ea||u instanceof Hs||u instanceof Rs)return!1;const c=u instanceof ci||u instanceof ao;let d=!0;return u.eachChild(m=>{d=c?d&&xl(m):d&&m instanceof go}),!!d&&Qi(u)&&Ga(u,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Qi(u){if(u instanceof Fo&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof Hs||u instanceof Rs)return!1;let c=!0;return u.eachChild(d=>{c&&!Qi(d)&&(c=!1)}),c}function Ka(u){if(u instanceof Fo&&u.name==="feature-state")return!1;let c=!0;return u.eachChild(d=>{c&&!Ka(d)&&(c=!1)}),c}function Ga(u,c){if(u instanceof Fo&&c.indexOf(u.name)>=0)return!1;let d=!0;return u.eachChild(m=>{d&&!Ga(m,c)&&(d=!1)}),d}function Xl(u){return{result:"success",value:u}}function Bo(u){return{result:"error",value:u}}function Ms(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function zu(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function $u(u){return!!u.expression&&u.expression.interpolated}function nt(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function Ct(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function cr(u){return u}function kr(u,c){const d=c.type==="color",m=u.stops&&typeof u.stops[0][0]=="object",w=m||!(m||u.property!==void 0),E=u.type||($u(c)?"exponential":"interval");if(d||c.type==="padding"){const Y=d?En.parse:yi.parse;(u=Ut({},u)).stops&&(u.stops=u.stops.map(te=>[te[0],Y(te[1])])),u.default=Y(u.default?u.default:c.default)}if(u.colorSpace&&(C=u.colorSpace)!=="rgb"&&C!=="hcl"&&C!=="lab")throw new Error(`Unknown color space: "${u.colorSpace}"`);var C;let O,F,H;if(E==="exponential")O=qn;else if(E==="interval")O=Yn;else if(E==="categorical"){O=gn,F=Object.create(null);for(const Y of u.stops)F[Y[0]]=Y[1];H=typeof u.stops[0][0]}else{if(E!=="identity")throw new Error(`Unknown function type "${E}"`);O=zo}if(m){const Y={},te=[];for(let xe=0;xe<u.stops.length;xe++){const Re=u.stops[xe],He=Re[0].zoom;Y[He]===void 0&&(Y[He]={zoom:He,type:u.type,property:u.property,default:u.default,stops:[]},te.push(He)),Y[He].stops.push([Re[0].value,Re[1]])}const he=[];for(const xe of te)he.push([Y[xe].zoom,kr(Y[xe],c)]);const _e={name:"linear"};return{kind:"composite",interpolationType:_e,interpolationFactor:br.interpolationFactor.bind(void 0,_e),zoomStops:he.map(xe=>xe[0]),evaluate:({zoom:xe},Re)=>qn({stops:he,base:u.base},c,xe).evaluate(xe,Re)}}if(w){const Y=E==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:Y,interpolationFactor:br.interpolationFactor.bind(void 0,Y),zoomStops:u.stops.map(te=>te[0]),evaluate:({zoom:te})=>O(u,c,te,F,H)}}return{kind:"source",evaluate(Y,te){const he=te&&te.properties?te.properties[u.property]:void 0;return he===void 0?Rn(u.default,c.default):O(u,c,he,F,H)}}}function Rn(u,c,d){return u!==void 0?u:c!==void 0?c:d!==void 0?d:void 0}function gn(u,c,d,m,w){return Rn(typeof d===w?m[d]:void 0,u.default,c.default)}function Yn(u,c,d){if(nt(d)!=="number")return Rn(u.default,c.default);const m=u.stops.length;if(m===1||d<=u.stops[0][0])return u.stops[0][1];if(d>=u.stops[m-1][0])return u.stops[m-1][1];const w=Le(u.stops.map(E=>E[0]),d);return u.stops[w][1]}function qn(u,c,d){const m=u.base!==void 0?u.base:1;if(nt(d)!=="number")return Rn(u.default,c.default);const w=u.stops.length;if(w===1||d<=u.stops[0][0])return u.stops[0][1];if(d>=u.stops[w-1][0])return u.stops[w-1][1];const E=Le(u.stops.map(Y=>Y[0]),d),C=function(Y,te,he,_e){const xe=_e-he,Re=Y-he;return xe===0?0:te===1?Re/xe:(Math.pow(te,Re)-1)/(Math.pow(te,xe)-1)}(d,m,u.stops[E][0],u.stops[E+1][0]),O=u.stops[E][1],F=u.stops[E+1][1],H=zr[c.type]||cr;return typeof O.evaluate=="function"?{evaluate(...Y){const te=O.evaluate.apply(void 0,Y),he=F.evaluate.apply(void 0,Y);if(te!==void 0&&he!==void 0)return H(te,he,C,u.colorSpace)}}:H(O,F,C,u.colorSpace)}function zo(u,c,d){switch(c.type){case"color":d=En.parse(d);break;case"formatted":d=yn.fromString(d.toString());break;case"resolvedImage":d=zn.fromString(d.toString());break;case"padding":d=yi.parse(d);break;default:nt(d)===c.type||c.type==="enum"&&c.values[d]||(d=void 0)}return Rn(d,u.default,c.default)}Fo.register(fs,{error:[{kind:"error"},[Br],(u,[c])=>{throw new si(c.evaluate(u))}],typeof:[Br,[hr],(u,[c])=>ue(Un(c.evaluate(u)))],"to-rgba":[ae(Dt,4),[nn],(u,[c])=>{const[d,m,w,E]=c.evaluate(u).rgb;return[255*d,255*m,255*w,E]}],rgb:[nn,[Dt,Dt,Dt],Mi],rgba:[nn,[Dt,Dt,Dt,Dt],Mi],has:{type:dr,overloads:[[[Br],(u,[c])=>Wl(c.evaluate(u),u.properties())],[[Br,Kn],(u,[c,d])=>Wl(c.evaluate(u),d.evaluate(u))]]},get:{type:hr,overloads:[[[Br],(u,[c])=>ks(c.evaluate(u),u.properties())],[[Br,Kn],(u,[c,d])=>ks(c.evaluate(u),d.evaluate(u))]]},"feature-state":[hr,[Br],(u,[c])=>ks(c.evaluate(u),u.featureState||{})],properties:[Kn,[],u=>u.properties()],"geometry-type":[Br,[],u=>u.geometryType()],id:[hr,[],u=>u.id()],zoom:[Dt,[],u=>u.globals.zoom],"heatmap-density":[Dt,[],u=>u.globals.heatmapDensity||0],"line-progress":[Dt,[],u=>u.globals.lineProgress||0],accumulated:[hr,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[Dt,qs(Dt),(u,c)=>{let d=0;for(const m of c)d+=m.evaluate(u);return d}],"*":[Dt,qs(Dt),(u,c)=>{let d=1;for(const m of c)d*=m.evaluate(u);return d}],"-":{type:Dt,overloads:[[[Dt,Dt],(u,[c,d])=>c.evaluate(u)-d.evaluate(u)],[[Dt],(u,[c])=>-c.evaluate(u)]]},"/":[Dt,[Dt,Dt],(u,[c,d])=>c.evaluate(u)/d.evaluate(u)],"%":[Dt,[Dt,Dt],(u,[c,d])=>c.evaluate(u)%d.evaluate(u)],ln2:[Dt,[],()=>Math.LN2],pi:[Dt,[],()=>Math.PI],e:[Dt,[],()=>Math.E],"^":[Dt,[Dt,Dt],(u,[c,d])=>Math.pow(c.evaluate(u),d.evaluate(u))],sqrt:[Dt,[Dt],(u,[c])=>Math.sqrt(c.evaluate(u))],log10:[Dt,[Dt],(u,[c])=>Math.log(c.evaluate(u))/Math.LN10],ln:[Dt,[Dt],(u,[c])=>Math.log(c.evaluate(u))],log2:[Dt,[Dt],(u,[c])=>Math.log(c.evaluate(u))/Math.LN2],sin:[Dt,[Dt],(u,[c])=>Math.sin(c.evaluate(u))],cos:[Dt,[Dt],(u,[c])=>Math.cos(c.evaluate(u))],tan:[Dt,[Dt],(u,[c])=>Math.tan(c.evaluate(u))],asin:[Dt,[Dt],(u,[c])=>Math.asin(c.evaluate(u))],acos:[Dt,[Dt],(u,[c])=>Math.acos(c.evaluate(u))],atan:[Dt,[Dt],(u,[c])=>Math.atan(c.evaluate(u))],min:[Dt,qs(Dt),(u,c)=>Math.min(...c.map(d=>d.evaluate(u)))],max:[Dt,qs(Dt),(u,c)=>Math.max(...c.map(d=>d.evaluate(u)))],abs:[Dt,[Dt],(u,[c])=>Math.abs(c.evaluate(u))],round:[Dt,[Dt],(u,[c])=>{const d=c.evaluate(u);return d<0?-Math.round(-d):Math.round(d)}],floor:[Dt,[Dt],(u,[c])=>Math.floor(c.evaluate(u))],ceil:[Dt,[Dt],(u,[c])=>Math.ceil(c.evaluate(u))],"filter-==":[dr,[Br,hr],(u,[c,d])=>u.properties()[c.value]===d.value],"filter-id-==":[dr,[hr],(u,[c])=>u.id()===c.value],"filter-type-==":[dr,[Br],(u,[c])=>u.geometryType()===c.value],"filter-<":[dr,[Br,hr],(u,[c,d])=>{const m=u.properties()[c.value],w=d.value;return typeof m==typeof w&&m<w}],"filter-id-<":[dr,[hr],(u,[c])=>{const d=u.id(),m=c.value;return typeof d==typeof m&&d<m}],"filter->":[dr,[Br,hr],(u,[c,d])=>{const m=u.properties()[c.value],w=d.value;return typeof m==typeof w&&m>w}],"filter-id->":[dr,[hr],(u,[c])=>{const d=u.id(),m=c.value;return typeof d==typeof m&&d>m}],"filter-<=":[dr,[Br,hr],(u,[c,d])=>{const m=u.properties()[c.value],w=d.value;return typeof m==typeof w&&m<=w}],"filter-id-<=":[dr,[hr],(u,[c])=>{const d=u.id(),m=c.value;return typeof d==typeof m&&d<=m}],"filter->=":[dr,[Br,hr],(u,[c,d])=>{const m=u.properties()[c.value],w=d.value;return typeof m==typeof w&&m>=w}],"filter-id->=":[dr,[hr],(u,[c])=>{const d=u.id(),m=c.value;return typeof d==typeof m&&d>=m}],"filter-has":[dr,[hr],(u,[c])=>c.value in u.properties()],"filter-has-id":[dr,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[dr,[ae(Br)],(u,[c])=>c.value.indexOf(u.geometryType())>=0],"filter-id-in":[dr,[ae(hr)],(u,[c])=>c.value.indexOf(u.id())>=0],"filter-in-small":[dr,[Br,ae(hr)],(u,[c,d])=>d.value.indexOf(u.properties()[c.value])>=0],"filter-in-large":[dr,[Br,ae(hr)],(u,[c,d])=>function(m,w,E,C){for(;E<=C;){const O=E+C>>1;if(w[O]===m)return!0;w[O]>m?C=O-1:E=O+1}return!1}(u.properties()[c.value],d.value,0,d.value.length-1)],all:{type:dr,overloads:[[[dr,dr],(u,[c,d])=>c.evaluate(u)&&d.evaluate(u)],[qs(dr),(u,c)=>{for(const d of c)if(!d.evaluate(u))return!1;return!0}]]},any:{type:dr,overloads:[[[dr,dr],(u,[c,d])=>c.evaluate(u)||d.evaluate(u)],[qs(dr),(u,c)=>{for(const d of c)if(d.evaluate(u))return!0;return!1}]]},"!":[dr,[dr],(u,[c])=>!c.evaluate(u)],"is-supported-script":[dr,[Br],(u,[c])=>{const d=u.globals&&u.globals.isSupportedScript;return!d||d(c.evaluate(u))}],upcase:[Br,[Br],(u,[c])=>c.evaluate(u).toUpperCase()],downcase:[Br,[Br],(u,[c])=>c.evaluate(u).toLowerCase()],concat:[Br,qs(hr),(u,c)=>c.map(d=>kn(d.evaluate(u))).join("")],"resolved-locale":[Br,[Gn],(u,[c])=>c.evaluate(u).resolvedLocale()]});class _i{constructor(c,d){var m;this.expression=c,this._warningHistory={},this._evaluator=new mo,this._defaultValue=d?(m=d).type==="color"&&Ct(m.default)?new En(0,0,0,0):m.type==="color"?En.parse(m.default)||null:m.type==="padding"?yi.parse(m.default)||null:m.type==="variableAnchorOffsetCollection"?Vn.parse(m.default)||null:m.default===void 0?null:m.default:null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(c,d,m,w,E,C){return this._evaluator.globals=c,this._evaluator.feature=d,this._evaluator.featureState=m,this._evaluator.canonical=w,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=C,this.expression.evaluate(this._evaluator)}evaluate(c,d,m,w,E,C){this._evaluator.globals=c,this._evaluator.feature=d||null,this._evaluator.featureState=m||null,this._evaluator.canonical=w,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=C||null;try{const O=this.expression.evaluate(this._evaluator);if(O==null||typeof O=="number"&&O!=O)return this._defaultValue;if(this._enumValues&&!(O in this._enumValues))throw new si(`Expected value to be one of ${Object.keys(this._enumValues).map(F=>JSON.stringify(F)).join(", ")}, but found ${JSON.stringify(O)} instead.`);return O}catch(O){return this._warningHistory[O.message]||(this._warningHistory[O.message]=!0,typeof console<"u"&&console.warn(O.message)),this._defaultValue}}}function ri(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in fs}function Si(u,c){const d=new Cs(fs,xl,[],c?function(w){const E={color:nn,string:Br,number:Dt,enum:Br,boolean:dr,formatted:Nn,padding:gi,resolvedImage:Yr,variableAnchorOffsetCollection:Ne};return w.type==="array"?ae(E[w.value]||hr,w.length):E[w.type]}(c):void 0),m=d.parse(u,void 0,void 0,void 0,c&&c.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Xl(new _i(m,c)):Bo(d.errors)}class qi{constructor(c,d){this.kind=c,this._styleExpression=d,this.isStateDependent=c!=="constant"&&!Ka(d.expression)}evaluateWithoutErrorHandling(c,d,m,w,E,C){return this._styleExpression.evaluateWithoutErrorHandling(c,d,m,w,E,C)}evaluate(c,d,m,w,E,C){return this._styleExpression.evaluate(c,d,m,w,E,C)}}class vi{constructor(c,d,m,w){this.kind=c,this.zoomStops=m,this._styleExpression=d,this.isStateDependent=c!=="camera"&&!Ka(d.expression),this.interpolationType=w}evaluateWithoutErrorHandling(c,d,m,w,E,C){return this._styleExpression.evaluateWithoutErrorHandling(c,d,m,w,E,C)}evaluate(c,d,m,w,E,C){return this._styleExpression.evaluate(c,d,m,w,E,C)}interpolationFactor(c,d,m){return this.interpolationType?br.interpolationFactor(this.interpolationType,c,d,m):0}}function Zo(u,c){const d=Si(u,c);if(d.result==="error")return d;const m=d.value.expression,w=Qi(m);if(!w&&!Ms(c))return Bo([new _r("","data expressions not supported")]);const E=Ga(m,["zoom"]);if(!E&&!zu(c))return Bo([new _r("","zoom expressions not supported")]);const C=ds(m);return C||E?C instanceof _r?Bo([C]):C instanceof br&&!$u(c)?Bo([new _r("",'"interpolate" expressions cannot be used with this property')]):Xl(C?new vi(w?"camera":"composite",d.value,C.labels,C instanceof br?C.interpolation:void 0):new qi(w?"constant":"source",d.value)):Bo([new _r("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class $o{constructor(c,d){this._parameters=c,this._specification=d,Ut(this,kr(this._parameters,this._specification))}static deserialize(c){return new $o(c._parameters,c._specification)}static serialize(c){return{_parameters:c._parameters,_specification:c._specification}}}function ds(u){let c=null;if(u instanceof hs)c=ds(u.result);else if(u instanceof Tr){for(const d of u.args)if(c=ds(d),c)break}else(u instanceof ft||u instanceof br)&&u.input instanceof Fo&&u.input.name==="zoom"&&(c=u);return c instanceof _r||u.eachChild(d=>{const m=ds(d);m instanceof _r?c=m:!c&&m?c=new _r("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):c&&m&&c!==m&&(c=new _r("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),c}function Ws(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const c of u.slice(1))if(!Ws(c)&&typeof c!="boolean")return!1;return!0;default:return!0}}const yo={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ia(u){if(u==null)return{filter:()=>!0,needGeometry:!1};Ws(u)||(u=rn(u));const c=Si(u,yo);if(c.result==="error")throw new Error(c.value.map(d=>`${d.key}: ${d.message}`).join(", "));return{filter:(d,m,w)=>c.value.evaluate(d,m,{},w),needGeometry:ui(u)}}function bi(u,c){return u<c?-1:u>c?1:0}function ui(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let c=1;c<u.length;c++)if(ui(u[c]))return!0;return!1}function rn(u){if(!u)return!0;const c=u[0];return u.length<=1?c!=="any":c==="=="?on(u[1],u[2],"=="):c==="!="?Oi(on(u[1],u[2],"==")):c==="<"||c===">"||c==="<="||c===">="?on(u[1],u[2],c):c==="any"?(d=u.slice(1),["any"].concat(d.map(rn))):c==="all"?["all"].concat(u.slice(1).map(rn)):c==="none"?["all"].concat(u.slice(1).map(rn).map(Oi)):c==="in"?Jo(u[1],u.slice(2)):c==="!in"?Oi(Jo(u[1],u.slice(2))):c==="has"?_o(u[1]):c!=="!has"||Oi(_o(u[1]));var d}function on(u,c,d){switch(u){case"$type":return[`filter-type-${d}`,c];case"$id":return[`filter-id-${d}`,c];default:return[`filter-${d}`,u,c]}}function Jo(u,c){if(c.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",c]];case"$id":return["filter-id-in",["literal",c]];default:return c.length>200&&!c.some(d=>typeof d!=typeof c[0])?["filter-in-large",u,["literal",c.sort(bi)]]:["filter-in-small",u,["literal",c]]}}function _o(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function Oi(u){return["!",u]}function eo(u){const c=typeof u;if(c==="number"||c==="boolean"||c==="string"||u==null)return JSON.stringify(u);if(Array.isArray(u)){let w="[";for(const E of u)w+=`${eo(E)},`;return`${w}]`}const d=Object.keys(u).sort();let m="{";for(let w=0;w<d.length;w++)m+=`${JSON.stringify(d[w])}:${eo(u[d[w]])},`;return`${m}}`}function wa(u){let c="";for(const d of ur)c+=`/${eo(u[d])}`;return c}function Ya(u){const c=u.value;return c?[new _t(u.key,c,"constants have been deprecated as of v8")]:[]}function hi(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function ps(u){if(Array.isArray(u))return u.map(ps);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const c={};for(const d in u)c[d]=ps(u[d]);return c}return hi(u)}function vo(u){const c=u.key,d=u.value,m=u.valueSpec||{},w=u.objectElementValidators||{},E=u.style,C=u.styleSpec,O=u.validateSpec;let F=[];const H=nt(d);if(H!=="object")return[new _t(c,d,`object expected, ${H} found`)];for(const Y in d){const te=Y.split(".")[0],he=m[te]||m["*"];let _e;if(w[te])_e=w[te];else if(m[te])_e=O;else if(w["*"])_e=w["*"];else{if(!m["*"]){F.push(new _t(c,d[Y],`unknown property "${Y}"`));continue}_e=O}F=F.concat(_e({key:(c&&`${c}.`)+Y,value:d[Y],valueSpec:he,style:E,styleSpec:C,object:d,objectKey:Y,validateSpec:O},d))}for(const Y in m)w[Y]||m[Y].required&&m[Y].default===void 0&&d[Y]===void 0&&F.push(new _t(c,d,`missing required property "${Y}"`));return F}function oa(u){const c=u.value,d=u.valueSpec,m=u.style,w=u.styleSpec,E=u.key,C=u.arrayElementValidator||u.validateSpec;if(nt(c)!=="array")return[new _t(E,c,`array expected, ${nt(c)} found`)];if(d.length&&c.length!==d.length)return[new _t(E,c,`array length ${d.length} expected, length ${c.length} found`)];if(d["min-length"]&&c.length<d["min-length"])return[new _t(E,c,`array length at least ${d["min-length"]} expected, length ${c.length} found`)];let O={type:d.value,values:d.values};w.$version<7&&(O.function=d.function),nt(d.value)==="object"&&(O=d.value);let F=[];for(let H=0;H<c.length;H++)F=F.concat(C({array:c,arrayIndex:H,value:c[H],valueSpec:O,validateSpec:u.validateSpec,style:m,styleSpec:w,key:`${E}[${H}]`}));return F}function nu(u){const c=u.key,d=u.value,m=u.valueSpec;let w=nt(d);return w==="number"&&d!=d&&(w="NaN"),w!=="number"?[new _t(c,d,`number expected, ${w} found`)]:"minimum"in m&&d<m.minimum?[new _t(c,d,`${d} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&d>m.maximum?[new _t(c,d,`${d} is greater than the maximum value ${m.maximum}`)]:[]}function Za(u){const c=u.valueSpec,d=hi(u.value.type);let m,w,E,C={};const O=d!=="categorical"&&u.value.property===void 0,F=!O,H=nt(u.value.stops)==="array"&&nt(u.value.stops[0])==="array"&&nt(u.value.stops[0][0])==="object",Y=vo({key:u.key,value:u.value,valueSpec:u.styleSpec.function,validateSpec:u.validateSpec,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(_e){if(d==="identity")return[new _t(_e.key,_e.value,'identity function may not have a "stops" property')];let xe=[];const Re=_e.value;return xe=xe.concat(oa({key:_e.key,value:Re,valueSpec:_e.valueSpec,validateSpec:_e.validateSpec,style:_e.style,styleSpec:_e.styleSpec,arrayElementValidator:te})),nt(Re)==="array"&&Re.length===0&&xe.push(new _t(_e.key,Re,"array must have at least one stop")),xe},default:function(_e){return _e.validateSpec({key:_e.key,value:_e.value,valueSpec:c,validateSpec:_e.validateSpec,style:_e.style,styleSpec:_e.styleSpec})}}});return d==="identity"&&O&&Y.push(new _t(u.key,u.value,'missing required property "property"')),d==="identity"||u.value.stops||Y.push(new _t(u.key,u.value,'missing required property "stops"')),d==="exponential"&&u.valueSpec.expression&&!$u(u.valueSpec)&&Y.push(new _t(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(F&&!Ms(u.valueSpec)?Y.push(new _t(u.key,u.value,"property functions not supported")):O&&!zu(u.valueSpec)&&Y.push(new _t(u.key,u.value,"zoom functions not supported"))),d!=="categorical"&&!H||u.value.property!==void 0||Y.push(new _t(u.key,u.value,'"property" property is required')),Y;function te(_e){let xe=[];const Re=_e.value,He=_e.key;if(nt(Re)!=="array")return[new _t(He,Re,`array expected, ${nt(Re)} found`)];if(Re.length!==2)return[new _t(He,Re,`array length 2 expected, length ${Re.length} found`)];if(H){if(nt(Re[0])!=="object")return[new _t(He,Re,`object expected, ${nt(Re[0])} found`)];if(Re[0].zoom===void 0)return[new _t(He,Re,"object stop key must have zoom")];if(Re[0].value===void 0)return[new _t(He,Re,"object stop key must have value")];if(E&&E>hi(Re[0].zoom))return[new _t(He,Re[0].zoom,"stop zoom values must appear in ascending order")];hi(Re[0].zoom)!==E&&(E=hi(Re[0].zoom),w=void 0,C={}),xe=xe.concat(vo({key:`${He}[0]`,value:Re[0],valueSpec:{zoom:{}},validateSpec:_e.validateSpec,style:_e.style,styleSpec:_e.styleSpec,objectElementValidators:{zoom:nu,value:he}}))}else xe=xe.concat(he({key:`${He}[0]`,value:Re[0],valueSpec:{},validateSpec:_e.validateSpec,style:_e.style,styleSpec:_e.styleSpec},Re));return ri(ps(Re[1]))?xe.concat([new _t(`${He}[1]`,Re[1],"expressions are not allowed in function stops.")]):xe.concat(_e.validateSpec({key:`${He}[1]`,value:Re[1],valueSpec:c,validateSpec:_e.validateSpec,style:_e.style,styleSpec:_e.styleSpec}))}function he(_e,xe){const Re=nt(_e.value),He=hi(_e.value),Ye=_e.value!==null?_e.value:xe;if(m){if(Re!==m)return[new _t(_e.key,Ye,`${Re} stop domain type must match previous stop domain type ${m}`)]}else m=Re;if(Re!=="number"&&Re!=="string"&&Re!=="boolean")return[new _t(_e.key,Ye,"stop domain value must be a number, string, or boolean")];if(Re!=="number"&&d!=="categorical"){let yt=`number expected, ${Re} found`;return Ms(c)&&d===void 0&&(yt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new _t(_e.key,Ye,yt)]}return d!=="categorical"||Re!=="number"||isFinite(He)&&Math.floor(He)===He?d!=="categorical"&&Re==="number"&&w!==void 0&&He<w?[new _t(_e.key,Ye,"stop domain values must appear in ascending order")]:(w=He,d==="categorical"&&He in C?[new _t(_e.key,Ye,"stop domain values must be unique")]:(C[He]=!0,[])):[new _t(_e.key,Ye,`integer expected, found ${He}`)]}}function lo(u){const c=(u.expressionContext==="property"?Zo:Si)(ps(u.value),u.valueSpec);if(c.result==="error")return c.value.map(m=>new _t(`${u.key}${m.key}`,u.value,m.message));const d=c.value.expression||c.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!d.outputDefined())return[new _t(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!Ka(d))return[new _t(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!Ka(d))return[new _t(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!Ga(d,["zoom","feature-state"]))return[new _t(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!Qi(d))return[new _t(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ni(u){const c=u.key,d=u.value,m=u.valueSpec,w=[];return Array.isArray(m.values)?m.values.indexOf(hi(d))===-1&&w.push(new _t(c,d,`expected one of [${m.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(m.values).indexOf(hi(d))===-1&&w.push(new _t(c,d,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(d)} found`)),w}function wl(u){return Ws(ps(u.value))?lo(Ut({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Kl(u)}function Kl(u){const c=u.value,d=u.key;if(nt(c)!=="array")return[new _t(d,c,`array expected, ${nt(c)} found`)];const m=u.styleSpec;let w,E=[];if(c.length<1)return[new _t(d,c,"filter array must have at least 1 element")];switch(E=E.concat(Ni({key:`${d}[0]`,value:c[0],valueSpec:m.filter_operator,style:u.style,styleSpec:u.styleSpec})),hi(c[0])){case"<":case"<=":case">":case">=":c.length>=2&&hi(c[1])==="$type"&&E.push(new _t(d,c,`"$type" cannot be use with operator "${c[0]}"`));case"==":case"!=":c.length!==3&&E.push(new _t(d,c,`filter array for operator "${c[0]}" must have 3 elements`));case"in":case"!in":c.length>=2&&(w=nt(c[1]),w!=="string"&&E.push(new _t(`${d}[1]`,c[1],`string expected, ${w} found`)));for(let C=2;C<c.length;C++)w=nt(c[C]),hi(c[1])==="$type"?E=E.concat(Ni({key:`${d}[${C}]`,value:c[C],valueSpec:m.geometry_type,style:u.style,styleSpec:u.styleSpec})):w!=="string"&&w!=="number"&&w!=="boolean"&&E.push(new _t(`${d}[${C}]`,c[C],`string, number, or boolean expected, ${w} found`));break;case"any":case"all":case"none":for(let C=1;C<c.length;C++)E=E.concat(Kl({key:`${d}[${C}]`,value:c[C],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":w=nt(c[1]),c.length!==2?E.push(new _t(d,c,`filter array for "${c[0]}" operator must have 2 elements`)):w!=="string"&&E.push(new _t(`${d}[1]`,c[1],`string expected, ${w} found`))}return E}function Ec(u,c){const d=u.key,m=u.validateSpec,w=u.style,E=u.styleSpec,C=u.value,O=u.objectKey,F=E[`${c}_${u.layerType}`];if(!F)return[];const H=O.match(/^(.*)-transition$/);if(c==="paint"&&H&&F[H[1]]&&F[H[1]].transition)return m({key:d,value:C,valueSpec:E.transition,style:w,styleSpec:E});const Y=u.valueSpec||F[O];if(!Y)return[new _t(d,C,`unknown property "${O}"`)];let te;if(nt(C)==="string"&&Ms(Y)&&!Y.tokens&&(te=/^{([^}]+)}$/.exec(C)))return[new _t(d,C,`"${O}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(te[1])} }\`.`)];const he=[];return u.layerType==="symbol"&&(O==="text-field"&&w&&!w.glyphs&&he.push(new _t(d,C,'use of "text-field" requires a style "glyphs" property')),O==="text-font"&&Ct(ps(C))&&hi(C.type)==="identity"&&he.push(new _t(d,C,'"text-font" does not support identity functions'))),he.concat(m({key:u.key,value:C,valueSpec:Y,style:w,styleSpec:E,expressionContext:"property",propertyType:c,propertyKey:O}))}function Ja(u){return Ec(u,"paint")}function Sh(u){return Ec(u,"layout")}function Cf(u){let c=[];const d=u.value,m=u.key,w=u.style,E=u.styleSpec;d.type||d.ref||c.push(new _t(m,d,'either "type" or "ref" is required'));let C=hi(d.type);const O=hi(d.ref);if(d.id){const F=hi(d.id);for(let H=0;H<u.arrayIndex;H++){const Y=w.layers[H];hi(Y.id)===F&&c.push(new _t(m,d.id,`duplicate layer id "${d.id}", previously used at line ${Y.id.__line__}`))}}if("ref"in d){let F;["type","source","source-layer","filter","layout"].forEach(H=>{H in d&&c.push(new _t(m,d[H],`"${H}" is prohibited for ref layers`))}),w.layers.forEach(H=>{hi(H.id)===O&&(F=H)}),F?F.ref?c.push(new _t(m,d.ref,"ref cannot reference another ref layer")):C=hi(F.type):c.push(new _t(m,d.ref,`ref layer "${O}" not found`))}else if(C!=="background")if(d.source){const F=w.sources&&w.sources[d.source],H=F&&hi(F.type);F?H==="vector"&&C==="raster"?c.push(new _t(m,d.source,`layer "${d.id}" requires a raster source`)):H!=="raster-dem"&&C==="hillshade"?c.push(new _t(m,d.source,`layer "${d.id}" requires a raster-dem source`)):H==="raster"&&C!=="raster"?c.push(new _t(m,d.source,`layer "${d.id}" requires a vector source`)):H!=="vector"||d["source-layer"]?H==="raster-dem"&&C!=="hillshade"?c.push(new _t(m,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):C!=="line"||!d.paint||!d.paint["line-gradient"]||H==="geojson"&&F.lineMetrics||c.push(new _t(m,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):c.push(new _t(m,d,`layer "${d.id}" must specify a "source-layer"`)):c.push(new _t(m,d.source,`source "${d.source}" not found`))}else c.push(new _t(m,d,'missing required property "source"'));return c=c.concat(vo({key:m,value:d,valueSpec:E.layer,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,objectElementValidators:{"*":()=>[],type:()=>u.validateSpec({key:`${m}.type`,value:d.type,valueSpec:E.layer.type,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,object:d,objectKey:"type"}),filter:wl,layout:F=>vo({layer:d,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":H=>Sh(Ut({layerType:C},H))}}),paint:F=>vo({layer:d,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":H=>Ja(Ut({layerType:C},H))}})}})),c}function iu(u){const c=u.value,d=u.key,m=nt(c);return m!=="string"?[new _t(d,c,`string expected, ${m} found`)]:[]}const Ah={promoteId:function({key:u,value:c}){if(nt(c)==="string")return iu({key:u,value:c});{const d=[];for(const m in c)d.push(...iu({key:`${u}.${m}`,value:c[m]}));return d}}};function Uu(u){const c=u.value,d=u.key,m=u.styleSpec,w=u.style,E=u.validateSpec;if(!c.type)return[new _t(d,c,'"type" is required')];const C=hi(c.type);let O;switch(C){case"vector":case"raster":return O=vo({key:d,value:c,valueSpec:m[`source_${C.replace("-","_")}`],style:u.style,styleSpec:m,objectElementValidators:Ah,validateSpec:E}),O;case"raster-dem":return O=function(F){var H;const Y=(H=F.sourceName)!==null&&H!==void 0?H:"",te=F.value,he=F.styleSpec,_e=he.source_raster_dem,xe=F.style;let Re=[];const He=nt(te);if(te===void 0)return Re;if(He!=="object")return Re.push(new _t("source_raster_dem",te,`object expected, ${He} found`)),Re;const Ye=hi(te.encoding)==="custom",yt=["redFactor","greenFactor","blueFactor","baseShift"],st=F.value.encoding?`"${F.value.encoding}"`:"Default";for(const ut in te)!Ye&&yt.includes(ut)?Re.push(new _t(ut,te[ut],`In "${Y}": "${ut}" is only valid when "encoding" is set to "custom". ${st} encoding found`)):_e[ut]?Re=Re.concat(F.validateSpec({key:ut,value:te[ut],valueSpec:_e[ut],validateSpec:F.validateSpec,style:xe,styleSpec:he})):Re.push(new _t(ut,te[ut],`unknown property "${ut}"`));return Re}({sourceName:d,value:c,style:u.style,styleSpec:m,validateSpec:E}),O;case"geojson":if(O=vo({key:d,value:c,valueSpec:m.source_geojson,style:w,styleSpec:m,validateSpec:E,objectElementValidators:Ah}),c.cluster)for(const F in c.clusterProperties){const[H,Y]=c.clusterProperties[F],te=typeof H=="string"?[H,["accumulated"],["get",F]]:H;O.push(...lo({key:`${d}.${F}.map`,value:Y,validateSpec:E,expressionContext:"cluster-map"})),O.push(...lo({key:`${d}.${F}.reduce`,value:te,validateSpec:E,expressionContext:"cluster-reduce"}))}return O;case"video":return vo({key:d,value:c,valueSpec:m.source_video,style:w,validateSpec:E,styleSpec:m});case"image":return vo({key:d,value:c,valueSpec:m.source_image,style:w,validateSpec:E,styleSpec:m});case"canvas":return[new _t(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ni({key:`${d}.type`,value:c.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:w,validateSpec:E,styleSpec:m})}}function Eh(u){const c=u.value,d=u.styleSpec,m=d.light,w=u.style;let E=[];const C=nt(c);if(c===void 0)return E;if(C!=="object")return E=E.concat([new _t("light",c,`object expected, ${C} found`)]),E;for(const O in c){const F=O.match(/^(.*)-transition$/);E=E.concat(F&&m[F[1]]&&m[F[1]].transition?u.validateSpec({key:O,value:c[O],valueSpec:d.transition,validateSpec:u.validateSpec,style:w,styleSpec:d}):m[O]?u.validateSpec({key:O,value:c[O],valueSpec:m[O],validateSpec:u.validateSpec,style:w,styleSpec:d}):[new _t(O,c[O],`unknown property "${O}"`)])}return E}function Pf(u){const c=u.value,d=u.styleSpec,m=d.sky,w=u.style,E=nt(c);if(c===void 0)return[];if(E!=="object")return[new _t("sky",c,`object expected, ${E} found`)];let C=[];for(const O in c)C=C.concat(m[O]?u.validateSpec({key:O,value:c[O],valueSpec:m[O],style:w,styleSpec:d}):[new _t(O,c[O],`unknown property "${O}"`)]);return C}function Hp(u){const c=u.value,d=u.styleSpec,m=d.terrain,w=u.style;let E=[];const C=nt(c);if(c===void 0)return E;if(C!=="object")return E=E.concat([new _t("terrain",c,`object expected, ${C} found`)]),E;for(const O in c)E=E.concat(m[O]?u.validateSpec({key:O,value:c[O],valueSpec:m[O],validateSpec:u.validateSpec,style:w,styleSpec:d}):[new _t(O,c[O],`unknown property "${O}"`)]);return E}function qp(u){let c=[];const d=u.value,m=u.key;if(Array.isArray(d)){const w=[],E=[];for(const C in d)d[C].id&&w.includes(d[C].id)&&c.push(new _t(m,d,`all the sprites' ids must be unique, but ${d[C].id} is duplicated`)),w.push(d[C].id),d[C].url&&E.includes(d[C].url)&&c.push(new _t(m,d,`all the sprites' URLs must be unique, but ${d[C].url} is duplicated`)),E.push(d[C].url),c=c.concat(vo({key:`${m}[${C}]`,value:d[C],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:u.validateSpec}));return c}return iu({key:m,value:d})}const If={"*":()=>[],array:oa,boolean:function(u){const c=u.value,d=u.key,m=nt(c);return m!=="boolean"?[new _t(d,c,`boolean expected, ${m} found`)]:[]},number:nu,color:function(u){const c=u.key,d=u.value,m=nt(d);return m!=="string"?[new _t(c,d,`color expected, ${m} found`)]:En.parse(String(d))?[]:[new _t(c,d,`color expected, "${d}" found`)]},constants:Ya,enum:Ni,filter:wl,function:Za,layer:Cf,object:vo,source:Uu,light:Eh,sky:Pf,terrain:Hp,projection:function(u){const c=u.value,d=u.styleSpec,m=d.projection,w=u.style,E=nt(c);if(c===void 0)return[];if(E!=="object")return[new _t("projection",c,`object expected, ${E} found`)];let C=[];for(const O in c)C=C.concat(m[O]?u.validateSpec({key:O,value:c[O],valueSpec:m[O],style:w,styleSpec:d}):[new _t(O,c[O],`unknown property "${O}"`)]);return C},string:iu,formatted:function(u){return iu(u).length===0?[]:lo(u)},resolvedImage:function(u){return iu(u).length===0?[]:lo(u)},padding:function(u){const c=u.key,d=u.value;if(nt(d)==="array"){if(d.length<1||d.length>4)return[new _t(c,d,`padding requires 1 to 4 values; ${d.length} values found`)];const m={type:"number"};let w=[];for(let E=0;E<d.length;E++)w=w.concat(u.validateSpec({key:`${c}[${E}]`,value:d[E],validateSpec:u.validateSpec,valueSpec:m}));return w}return nu({key:c,value:d,valueSpec:{}})},variableAnchorOffsetCollection:function(u){const c=u.key,d=u.value,m=nt(d),w=u.styleSpec;if(m!=="array"||d.length<1||d.length%2!=0)return[new _t(c,d,"variableAnchorOffsetCollection requires a non-empty array of even length")];let E=[];for(let C=0;C<d.length;C+=2)E=E.concat(Ni({key:`${c}[${C}]`,value:d[C],valueSpec:w.layout_symbol["text-anchor"]})),E=E.concat(oa({key:`${c}[${C+1}]`,value:d[C+1],valueSpec:{length:2,value:"number"},validateSpec:u.validateSpec,style:u.style,styleSpec:w}));return E},sprite:qp};function Th(u){const c=u.value,d=u.valueSpec,m=u.styleSpec;return u.validateSpec=Th,d.expression&&Ct(hi(c))?Za(u):d.expression&&ri(ps(c))?lo(u):d.type&&If[d.type]?If[d.type](u):vo(Ut({},u,{valueSpec:d.type?m[d.type]:d}))}function km(u){const c=u.value,d=u.key,m=iu(u);return m.length||(c.indexOf("{fontstack}")===-1&&m.push(new _t(d,c,'"glyphs" url must include a "{fontstack}" token')),c.indexOf("{range}")===-1&&m.push(new _t(d,c,'"glyphs" url must include a "{range}" token'))),m}function Qa(u,c=pe){let d=[];return d=d.concat(Th({key:"",value:u,valueSpec:c.$root,styleSpec:c,style:u,validateSpec:Th,objectElementValidators:{glyphs:km,"*":()=>[]}})),u.constants&&(d=d.concat(Ya({key:"constants",value:u.constants,style:u,styleSpec:c,validateSpec:Th}))),Wp(d)}function Gl(u){return function(c){return u({...c,validateSpec:Th})}}function Wp(u){return[].concat(u).sort((c,d)=>c.line-d.line)}function Sa(u){return function(...c){return Wp(u.apply(this,c))}}Qa.source=Sa(Gl(Uu)),Qa.sprite=Sa(Gl(qp)),Qa.glyphs=Sa(Gl(km)),Qa.light=Sa(Gl(Eh)),Qa.sky=Sa(Gl(Pf)),Qa.terrain=Sa(Gl(Hp)),Qa.layer=Sa(Gl(Cf)),Qa.filter=Sa(Gl(wl)),Qa.paintProperty=Sa(Gl(Ja)),Qa.layoutProperty=Sa(Gl(Sh));const Tc=Qa,Rf=Tc.light,X_=Tc.sky,Mm=Tc.paintProperty,Xp=Tc.layoutProperty;function Kp(u,c){let d=!1;if(c&&c.length)for(const m of c)u.fire(new zt(new Error(m.message))),d=!0;return d}class Ch{constructor(c,d,m){const w=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;const C=new Int32Array(this.arrayBuffer);c=C[0],this.d=(d=C[1])+2*(m=C[2]);for(let F=0;F<this.d*this.d;F++){const H=C[3+F],Y=C[3+F+1];w.push(H===Y?null:C.subarray(H,Y))}const O=C[3+w.length+1];this.keys=C.subarray(C[3+w.length],O),this.bboxes=C.subarray(O),this.insert=this._insertReadonly}else{this.d=d+2*m;for(let C=0;C<this.d*this.d;C++)w.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=c,this.padding=m,this.scale=d/c,this.uid=0;const E=m/d*c;this.min=-E,this.max=c+E}insert(c,d,m,w,E){this._forEachCell(d,m,w,E,this._insertCell,this.uid++,void 0,void 0),this.keys.push(c),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(w),this.bboxes.push(E)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(c,d,m,w,E,C){this.cells[E].push(C)}query(c,d,m,w,E){const C=this.min,O=this.max;if(c<=C&&d<=C&&O<=m&&O<=w&&!E)return Array.prototype.slice.call(this.keys);{const F=[];return this._forEachCell(c,d,m,w,this._queryCell,F,{},E),F}}_queryCell(c,d,m,w,E,C,O,F){const H=this.cells[E];if(H!==null){const Y=this.keys,te=this.bboxes;for(let he=0;he<H.length;he++){const _e=H[he];if(O[_e]===void 0){const xe=4*_e;(F?F(te[xe+0],te[xe+1],te[xe+2],te[xe+3]):c<=te[xe+2]&&d<=te[xe+3]&&m>=te[xe+0]&&w>=te[xe+1])?(O[_e]=!0,C.push(Y[_e])):O[_e]=!1}}}}_forEachCell(c,d,m,w,E,C,O,F){const H=this._convertToCellCoord(c),Y=this._convertToCellCoord(d),te=this._convertToCellCoord(m),he=this._convertToCellCoord(w);for(let _e=H;_e<=te;_e++)for(let xe=Y;xe<=he;xe++){const Re=this.d*xe+_e;if((!F||F(this._convertFromCellCoord(_e),this._convertFromCellCoord(xe),this._convertFromCellCoord(_e+1),this._convertFromCellCoord(xe+1)))&&E.call(this,c,d,m,w,Re,C,O,F))return}}_convertFromCellCoord(c){return(c-this.padding)/this.scale}_convertToCellCoord(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const c=this.cells,d=3+this.cells.length+1+1;let m=0;for(let C=0;C<this.cells.length;C++)m+=this.cells[C].length;const w=new Int32Array(d+m+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;let E=d;for(let C=0;C<c.length;C++){const O=c[C];w[3+C]=E,w.set(O,E),E+=O.length}return w[3+c.length]=E,w.set(this.keys,E),E+=this.keys.length,w[3+c.length+1]=E,w.set(this.bboxes,E),E+=this.bboxes.length,w.buffer}static serialize(c,d){const m=c.toArrayBuffer();return d&&d.push(m),{buffer:m}}static deserialize(c){return new Ch(c.buffer)}}const el={};function Sr(u,c,d={}){if(el[u])throw new Error(`${u} is already registered.`);Object.defineProperty(c,"_classRegistryKey",{value:u,writeable:!1}),el[u]={klass:c,omit:d.omit||[],shallow:d.shallow||[]}}Sr("Object",Object),Sr("TransferableGridIndex",Ch),Sr("Color",En),Sr("Error",Error),Sr("AJAXError",tt),Sr("ResolvedImage",zn),Sr("StylePropertyFunction",$o),Sr("StyleExpression",_i,{omit:["_evaluator"]}),Sr("ZoomDependentExpression",vi),Sr("ZoomConstantExpression",qi),Sr("CompoundExpression",Fo,{omit:["_evaluate"]});for(const u in fs)fs[u]._classRegistryKey||Sr(`Expression_${u}`,fs[u]);function Sl(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function Aa(u){return u.$name||u.constructor._classRegistryKey}function Yl(u){return!function(c){if(c===null||typeof c!="object")return!1;const d=Aa(c);return!(!d||d==="Object")}(u)&&(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||u instanceof Error||Sl(u)||Ze(u)||ArrayBuffer.isView(u)||u instanceof ImageData)}function Ph(u,c){if(Yl(u))return(Sl(u)||Ze(u))&&c&&c.push(u),ArrayBuffer.isView(u)&&c&&c.push(u.buffer),u instanceof ImageData&&c&&c.push(u.data.buffer),u;if(Array.isArray(u)){const E=[];for(const C of u)E.push(Ph(C,c));return E}if(typeof u!="object")throw new Error("can't serialize object of type "+typeof u);const d=Aa(u);if(!d)throw new Error(`can't serialize object of unregistered class ${u.constructor.name}`);if(!el[d])throw new Error(`${d} is not registered.`);const{klass:m}=el[d],w=m.serialize?m.serialize(u,c):{};if(m.serialize){if(c&&w===c[c.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const E in u){if(!u.hasOwnProperty(E)||el[d].omit.indexOf(E)>=0)continue;const C=u[E];w[E]=el[d].shallow.indexOf(E)>=0?C:Ph(C,c)}u instanceof Error&&(w.message=u.message)}if(w.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(w.$name=d),w}function ju(u){if(Yl(u))return u;if(Array.isArray(u))return u.map(ju);if(typeof u!="object")throw new Error("can't deserialize object of type "+typeof u);const c=Aa(u)||"Object";if(!el[c])throw new Error(`can't deserialize unregistered class ${c}`);const{klass:d}=el[c];if(!d)throw new Error(`can't deserialize unregistered class ${c}`);if(d.deserialize)return d.deserialize(u);const m=Object.create(d.prototype);for(const w of Object.keys(u)){if(w==="$name")continue;const E=u[w];m[w]=el[c].shallow.indexOf(w)>=0?E:ju(E)}return m}class Zl{constructor(){this.first=!0}update(c,d){const m=Math.floor(c);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=c,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=d),c!==this.lastZoom&&(this.lastZoom=c,this.lastFloorZoom=m,!0))}}const dn={"Latin-1 Supplement":u=>u>=128&&u<=255,"Hangul Jamo":u=>u>=4352&&u<=4607,Khmer:u=>u>=6016&&u<=6143,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Katakana:u=>u>=12448&&u<=12543,Kanbun:u=>u>=12688&&u<=12703,"CJK Strokes":u=>u>=12736&&u<=12783,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"Private Use Area":u=>u>=57344&&u<=63743,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519};function Gp(u){for(const c of u)if(Zp(c.charCodeAt(0)))return!0;return!1}function K_(u){for(const c of u)if(!Vu(c.charCodeAt(0)))return!1;return!0}function Td(u){const c=u.map(d=>{try{return new RegExp(`\\p{sc=${d}}`,"u").source}catch{return null}}).filter(d=>d);return new RegExp(c.join("|"),"u")}const Om=Td(["Arab","Dupl","Mong","Ougr","Syrc"]);function Vu(u){return!Om.test(String.fromCodePoint(u))}const Yp=Td(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Zp(u){return!(u!==746&&u!==747&&(u<4352||!(dn["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||dn["CJK Compatibility"](u)||dn["CJK Strokes"](u)||!(!dn["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||dn["Enclosed CJK Letters and Months"](u)||dn["Ideographic Description Characters"](u)||dn.Kanbun(u)||dn.Katakana(u)&&u!==12540||!(!dn["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!dn["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||dn["Vertical Forms"](u)||dn["Yijing Hexagram Symbols"](u)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(u))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(u))||Yp.test(String.fromCodePoint(u)))))}function kf(u){return!(Zp(u)||function(c){return!!(dn["Latin-1 Supplement"](c)&&(c===167||c===169||c===174||c===177||c===188||c===189||c===190||c===215||c===247)||dn["General Punctuation"](c)&&(c===8214||c===8224||c===8225||c===8240||c===8241||c===8251||c===8252||c===8258||c===8263||c===8264||c===8265||c===8273)||dn["Letterlike Symbols"](c)||dn["Number Forms"](c)||dn["Miscellaneous Technical"](c)&&(c>=8960&&c<=8967||c>=8972&&c<=8991||c>=8996&&c<=9e3||c===9003||c>=9085&&c<=9114||c>=9150&&c<=9165||c===9167||c>=9169&&c<=9179||c>=9186&&c<=9215)||dn["Control Pictures"](c)&&c!==9251||dn["Optical Character Recognition"](c)||dn["Enclosed Alphanumerics"](c)||dn["Geometric Shapes"](c)||dn["Miscellaneous Symbols"](c)&&!(c>=9754&&c<=9759)||dn["Miscellaneous Symbols and Arrows"](c)&&(c>=11026&&c<=11055||c>=11088&&c<=11097||c>=11192&&c<=11243)||dn["CJK Symbols and Punctuation"](c)||dn.Katakana(c)||dn["Private Use Area"](c)||dn["CJK Compatibility Forms"](c)||dn["Small Form Variants"](c)||dn["Halfwidth and Fullwidth Forms"](c)||c===8734||c===8756||c===8757||c>=9984&&c<=10087||c>=10102&&c<=10131||c===65532||c===65533)}(u))}const Cd=Td(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Hu(u){return Cd.test(String.fromCodePoint(u))}function Jp(u,c){return!(!c&&Hu(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||dn.Khmer(u))}function Nm(u){for(const c of u)if(Hu(c.charCodeAt(0)))return!0;return!1}const Ea=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(u){this.pluginStatus=u.pluginStatus,this.pluginURL=u.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(u){this.applyArabicShaping=u.applyArabicShaping,this.processBidirectionalText=u.processBidirectionalText,this.processStyledBidirectionalText=u.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Ai{constructor(c,d){this.zoom=c,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Zl,this.transition={})}isSupportedScript(c){return function(d,m){for(const w of d)if(!Jp(w.charCodeAt(0),m))return!1;return!0}(c,Ea.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const c=this.zoom,d=c-Math.floor(c),m=this.crossFadingFactor();return c>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*d}}}class Ih{constructor(c,d){this.property=c,this.value=d,this.expression=function(m,w){if(Ct(m))return new $o(m,w);if(ri(m)){const E=Zo(m,w);if(E.result==="error")throw new Error(E.value.map(C=>`${C.key}: ${C.message}`).join(", "));return E.value}{let E=m;return w.type==="color"&&typeof m=="string"?E=En.parse(m):w.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?w.type==="variableAnchorOffsetCollection"&&Array.isArray(m)&&(E=Vn.parse(m)):E=yi.parse(m),{kind:"constant",evaluate:()=>E}}}(d===void 0?c.specification.default:d,c.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(c,d,m){return this.property.possiblyEvaluate(this,c,d,m)}}class Pd{constructor(c){this.property=c,this.value=new Ih(c,void 0)}transitioned(c,d){return new Dm(this.property,this.value,d,Q({},c.transition,this.transition),c.now)}untransitioned(){return new Dm(this.property,this.value,null,{},0)}}class Id{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitionablePropertyValues)}getValue(c){return G(this._values[c].value.value)}setValue(c,d){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new Pd(this._values[c].property)),this._values[c].value=new Ih(this._values[c].property,d===null?void 0:G(d))}getTransition(c){return G(this._values[c].transition)}setTransition(c,d){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new Pd(this._values[c].property)),this._values[c].transition=G(d)||void 0}serialize(){const c={};for(const d of Object.keys(this._values)){const m=this.getValue(d);m!==void 0&&(c[d]=m);const w=this.getTransition(d);w!==void 0&&(c[`${d}-transition`]=w)}return c}transitioned(c,d){const m=new Mf(this._properties);for(const w of Object.keys(this._values))m._values[w]=this._values[w].transitioned(c,d._values[w]);return m}untransitioned(){const c=new Mf(this._properties);for(const d of Object.keys(this._values))c._values[d]=this._values[d].untransitioned();return c}}class Dm{constructor(c,d,m,w,E){this.property=c,this.value=d,this.begin=E+w.delay||0,this.end=this.begin+w.duration||0,c.specification.transition&&(w.delay||w.duration)&&(this.prior=m)}possiblyEvaluate(c,d,m){const w=c.now||0,E=this.value.possiblyEvaluate(c,d,m),C=this.prior;if(C){if(w>this.end)return this.prior=null,E;if(this.value.isDataDriven())return this.prior=null,E;if(w<this.begin)return C.possiblyEvaluate(c,d,m);{const O=(w-this.begin)/(this.end-this.begin);return this.property.interpolate(C.possiblyEvaluate(c,d,m),E,function(F){if(F<=0)return 0;if(F>=1)return 1;const H=F*F,Y=H*F;return 4*(F<.5?Y:3*(F-H)+Y-.75)}(O))}}return E}}class Mf{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitioningPropertyValues)}possiblyEvaluate(c,d,m){const w=new ou(this._properties);for(const E of Object.keys(this._values))w._values[E]=this._values[E].possiblyEvaluate(c,d,m);return w}hasTransition(){for(const c of Object.keys(this._values))if(this._values[c].prior)return!0;return!1}}class Of{constructor(c){this._properties=c,this._values=Object.create(c.defaultPropertyValues)}hasValue(c){return this._values[c].value!==void 0}getValue(c){return G(this._values[c].value)}setValue(c,d){this._values[c]=new Ih(this._values[c].property,d===null?void 0:G(d))}serialize(){const c={};for(const d of Object.keys(this._values)){const m=this.getValue(d);m!==void 0&&(c[d]=m)}return c}possiblyEvaluate(c,d,m){const w=new ou(this._properties);for(const E of Object.keys(this._values))w._values[E]=this._values[E].possiblyEvaluate(c,d,m);return w}}class Al{constructor(c,d,m){this.property=c,this.value=d,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(c){return this.value.kind==="constant"?this.value.value:c}evaluate(c,d,m,w){return this.property.evaluate(this.value,this.parameters,c,d,m,w)}}class ou{constructor(c){this._properties=c,this._values=Object.create(c.defaultPossiblyEvaluatedValues)}get(c){return this._values[c]}}class Rr{constructor(c){this.specification=c}possiblyEvaluate(c,d){if(c.isDataDriven())throw new Error("Value should not be data driven");return c.expression.evaluate(d)}interpolate(c,d,m){const w=zr[this.specification.type];return w?w(c,d,m):c}}class qr{constructor(c,d){this.specification=c,this.overrides=d}possiblyEvaluate(c,d,m,w){return new Al(this,c.expression.kind==="constant"||c.expression.kind==="camera"?{kind:"constant",value:c.expression.evaluate(d,null,{},m,w)}:c.expression,d)}interpolate(c,d,m){if(c.value.kind!=="constant"||d.value.kind!=="constant")return c;if(c.value.value===void 0||d.value.value===void 0)return new Al(this,{kind:"constant",value:void 0},c.parameters);const w=zr[this.specification.type];if(w){const E=w(c.value.value,d.value.value,m);return new Al(this,{kind:"constant",value:E},c.parameters)}return c}evaluate(c,d,m,w,E,C){return c.kind==="constant"?c.value:c.evaluate(d,m,w,E,C)}}class Nf extends qr{possiblyEvaluate(c,d,m,w){if(c.value===void 0)return new Al(this,{kind:"constant",value:void 0},d);if(c.expression.kind==="constant"){const E=c.expression.evaluate(d,null,{},m,w),C=c.property.specification.type==="resolvedImage"&&typeof E!="string"?E.name:E,O=this._calculate(C,C,C,d);return new Al(this,{kind:"constant",value:O},d)}if(c.expression.kind==="camera"){const E=this._calculate(c.expression.evaluate({zoom:d.zoom-1}),c.expression.evaluate({zoom:d.zoom}),c.expression.evaluate({zoom:d.zoom+1}),d);return new Al(this,{kind:"constant",value:E},d)}return new Al(this,c.expression,d)}evaluate(c,d,m,w,E,C){if(c.kind==="source"){const O=c.evaluate(d,m,w,E,C);return this._calculate(O,O,O,d)}return c.kind==="composite"?this._calculate(c.evaluate({zoom:Math.floor(d.zoom)-1},m,w),c.evaluate({zoom:Math.floor(d.zoom)},m,w),c.evaluate({zoom:Math.floor(d.zoom)+1},m,w),d):c.value}_calculate(c,d,m,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:c,to:d}:{from:m,to:d}}interpolate(c){return c}}class T{constructor(c){this.specification=c}possiblyEvaluate(c,d,m,w){if(c.value!==void 0){if(c.expression.kind==="constant"){const E=c.expression.evaluate(d,null,{},m,w);return this._calculate(E,E,E,d)}return this._calculate(c.expression.evaluate(new Ai(Math.floor(d.zoom-1),d)),c.expression.evaluate(new Ai(Math.floor(d.zoom),d)),c.expression.evaluate(new Ai(Math.floor(d.zoom+1),d)),d)}}_calculate(c,d,m,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:c,to:d}:{from:m,to:d}}interpolate(c){return c}}class M{constructor(c){this.specification=c}possiblyEvaluate(c,d,m,w){return!!c.expression.evaluate(d,null,{},m,w)}interpolate(){return!1}}class y{constructor(c){this.properties=c,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in c){const m=c[d];m.specification.overridable&&this.overridableProperties.push(d);const w=this.defaultPropertyValues[d]=new Ih(m,void 0),E=this.defaultTransitionablePropertyValues[d]=new Pd(m);this.defaultTransitioningPropertyValues[d]=E.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=w.possiblyEvaluate({})}}}Sr("DataDrivenProperty",qr),Sr("DataConstantProperty",Rr),Sr("CrossFadedDataDrivenProperty",Nf),Sr("CrossFadedProperty",T),Sr("ColorRampProperty",M);const a="-transition";class h extends vt{constructor(c,d){if(super(),this.id=c.id,this.type=c.type,this._featureFilter={filter:()=>!0,needGeometry:!1},c.type!=="custom"&&(this.metadata=c.metadata,this.minzoom=c.minzoom,this.maxzoom=c.maxzoom,c.type!=="background"&&(this.source=c.source,this.sourceLayer=c["source-layer"],this.filter=c.filter),d.layout&&(this._unevaluatedLayout=new Of(d.layout)),d.paint)){this._transitionablePaint=new Id(d.paint);for(const m in c.paint)this.setPaintProperty(m,c.paint[m],{validate:!1});for(const m in c.layout)this.setLayoutProperty(m,c.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ou(d.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(c){return c==="visibility"?this.visibility:this._unevaluatedLayout.getValue(c)}setLayoutProperty(c,d,m={}){d!=null&&this._validate(Xp,`layers.${this.id}.layout.${c}`,c,d,m)||(c!=="visibility"?this._unevaluatedLayout.setValue(c,d):this.visibility=d)}getPaintProperty(c){return c.endsWith(a)?this._transitionablePaint.getTransition(c.slice(0,-11)):this._transitionablePaint.getValue(c)}setPaintProperty(c,d,m={}){if(d!=null&&this._validate(Mm,`layers.${this.id}.paint.${c}`,c,d,m))return!1;if(c.endsWith(a))return this._transitionablePaint.setTransition(c.slice(0,-11),d||void 0),!1;{const w=this._transitionablePaint._values[c],E=w.property.specification["property-type"]==="cross-faded-data-driven",C=w.value.isDataDriven(),O=w.value;this._transitionablePaint.setValue(c,d),this._handleSpecialPaintPropertyUpdate(c);const F=this._transitionablePaint._values[c].value;return F.isDataDriven()||C||E||this._handleOverridablePaintPropertyUpdate(c,O,F)}}_handleSpecialPaintPropertyUpdate(c){}_handleOverridablePaintPropertyUpdate(c,d,m){return!1}isHidden(c){return!!(this.minzoom&&c<this.minzoom)||!!(this.maxzoom&&c>=this.maxzoom)||this.visibility==="none"}updateTransitions(c){this._transitioningPaint=this._transitionablePaint.transitioned(c,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(c,d){c.getCrossfadeParameters&&(this._crossfadeParameters=c.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(c,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(c,void 0,d)}serialize(){const c={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(c.layout=c.layout||{},c.layout.visibility=this.visibility),J(c,(d,m)=>!(d===void 0||m==="layout"&&!Object.keys(d).length||m==="paint"&&!Object.keys(d).length))}_validate(c,d,m,w,E={}){return(!E||E.validate!==!1)&&Kp(this,c.call(Tc,{key:d,layerType:this.type,objectKey:m,value:w,styleSpec:pe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const c in this.paint._values){const d=this.paint.get(c);if(d instanceof Al&&Ms(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}const g={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class _{constructor(c,d){this._structArray=c,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class b{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(c,d){return c._trim(),d&&(c.isTransferred=!0,d.push(c.arrayBuffer)),{length:c.length,arrayBuffer:c.arrayBuffer}}static deserialize(c){const d=Object.create(this.prototype);return d.arrayBuffer=c.arrayBuffer,d.length=c.length,d.capacity=c.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(c){this.reserve(c),this.length=c}reserve(c){if(c>this.capacity){this.capacity=Math.max(c,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function P(u,c=1){let d=0,m=0;return{members:u.map(w=>{const E=g[w.type].BYTES_PER_ELEMENT,C=d=I(d,Math.max(c,E)),O=w.components||1;return m=Math.max(m,E),d+=E*O,{name:w.name,type:w.type,components:O,offset:C}}),size:I(d,Math.max(m,c)),alignment:c}}function I(u,c){return Math.ceil(u/c)*c}class L extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,d){const m=this.length;return this.resize(m+1),this.emplace(m,c,d)}emplace(c,d,m){const w=2*c;return this.int16[w+0]=d,this.int16[w+1]=m,c}}L.prototype.bytesPerElement=4,Sr("StructArrayLayout2i4",L);class V extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,d,m){const w=this.length;return this.resize(w+1),this.emplace(w,c,d,m)}emplace(c,d,m,w){const E=3*c;return this.int16[E+0]=d,this.int16[E+1]=m,this.int16[E+2]=w,c}}V.prototype.bytesPerElement=6,Sr("StructArrayLayout3i6",V);class W extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,d,m,w){const E=this.length;return this.resize(E+1),this.emplace(E,c,d,m,w)}emplace(c,d,m,w,E){const C=4*c;return this.int16[C+0]=d,this.int16[C+1]=m,this.int16[C+2]=w,this.int16[C+3]=E,c}}W.prototype.bytesPerElement=8,Sr("StructArrayLayout4i8",W);class q extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,d,m,w,E,C){const O=this.length;return this.resize(O+1),this.emplace(O,c,d,m,w,E,C)}emplace(c,d,m,w,E,C,O){const F=6*c;return this.int16[F+0]=d,this.int16[F+1]=m,this.int16[F+2]=w,this.int16[F+3]=E,this.int16[F+4]=C,this.int16[F+5]=O,c}}q.prototype.bytesPerElement=12,Sr("StructArrayLayout2i4i12",q);class oe extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,d,m,w,E,C){const O=this.length;return this.resize(O+1),this.emplace(O,c,d,m,w,E,C)}emplace(c,d,m,w,E,C,O){const F=4*c,H=8*c;return this.int16[F+0]=d,this.int16[F+1]=m,this.uint8[H+4]=w,this.uint8[H+5]=E,this.uint8[H+6]=C,this.uint8[H+7]=O,c}}oe.prototype.bytesPerElement=8,Sr("StructArrayLayout2i4ub8",oe);class le extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,d){const m=this.length;return this.resize(m+1),this.emplace(m,c,d)}emplace(c,d,m){const w=2*c;return this.float32[w+0]=d,this.float32[w+1]=m,c}}le.prototype.bytesPerElement=8,Sr("StructArrayLayout2f8",le);class ie extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,d,m,w,E,C,O,F,H,Y){const te=this.length;return this.resize(te+1),this.emplace(te,c,d,m,w,E,C,O,F,H,Y)}emplace(c,d,m,w,E,C,O,F,H,Y,te){const he=10*c;return this.uint16[he+0]=d,this.uint16[he+1]=m,this.uint16[he+2]=w,this.uint16[he+3]=E,this.uint16[he+4]=C,this.uint16[he+5]=O,this.uint16[he+6]=F,this.uint16[he+7]=H,this.uint16[he+8]=Y,this.uint16[he+9]=te,c}}ie.prototype.bytesPerElement=20,Sr("StructArrayLayout10ui20",ie);class fe extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,d,m,w,E,C,O,F,H,Y,te,he){const _e=this.length;return this.resize(_e+1),this.emplace(_e,c,d,m,w,E,C,O,F,H,Y,te,he)}emplace(c,d,m,w,E,C,O,F,H,Y,te,he,_e){const xe=12*c;return this.int16[xe+0]=d,this.int16[xe+1]=m,this.int16[xe+2]=w,this.int16[xe+3]=E,this.uint16[xe+4]=C,this.uint16[xe+5]=O,this.uint16[xe+6]=F,this.uint16[xe+7]=H,this.int16[xe+8]=Y,this.int16[xe+9]=te,this.int16[xe+10]=he,this.int16[xe+11]=_e,c}}fe.prototype.bytesPerElement=24,Sr("StructArrayLayout4i4ui4i24",fe);class Ae extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,d,m){const w=this.length;return this.resize(w+1),this.emplace(w,c,d,m)}emplace(c,d,m,w){const E=3*c;return this.float32[E+0]=d,this.float32[E+1]=m,this.float32[E+2]=w,c}}Ae.prototype.bytesPerElement=12,Sr("StructArrayLayout3f12",Ae);class Te extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(c){const d=this.length;return this.resize(d+1),this.emplace(d,c)}emplace(c,d){return this.uint32[1*c+0]=d,c}}Te.prototype.bytesPerElement=4,Sr("StructArrayLayout1ul4",Te);class ke extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,d,m,w,E,C,O,F,H){const Y=this.length;return this.resize(Y+1),this.emplace(Y,c,d,m,w,E,C,O,F,H)}emplace(c,d,m,w,E,C,O,F,H,Y){const te=10*c,he=5*c;return this.int16[te+0]=d,this.int16[te+1]=m,this.int16[te+2]=w,this.int16[te+3]=E,this.int16[te+4]=C,this.int16[te+5]=O,this.uint32[he+3]=F,this.uint16[te+8]=H,this.uint16[te+9]=Y,c}}ke.prototype.bytesPerElement=20,Sr("StructArrayLayout6i1ul2ui20",ke);class Ie extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,d,m,w,E,C){const O=this.length;return this.resize(O+1),this.emplace(O,c,d,m,w,E,C)}emplace(c,d,m,w,E,C,O){const F=6*c;return this.int16[F+0]=d,this.int16[F+1]=m,this.int16[F+2]=w,this.int16[F+3]=E,this.int16[F+4]=C,this.int16[F+5]=O,c}}Ie.prototype.bytesPerElement=12,Sr("StructArrayLayout2i2i2i12",Ie);class ze extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,d,m,w,E){const C=this.length;return this.resize(C+1),this.emplace(C,c,d,m,w,E)}emplace(c,d,m,w,E,C){const O=4*c,F=8*c;return this.float32[O+0]=d,this.float32[O+1]=m,this.float32[O+2]=w,this.int16[F+6]=E,this.int16[F+7]=C,c}}ze.prototype.bytesPerElement=16,Sr("StructArrayLayout2f1f2i16",ze);class Je extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,d,m,w,E,C){const O=this.length;return this.resize(O+1),this.emplace(O,c,d,m,w,E,C)}emplace(c,d,m,w,E,C,O){const F=16*c,H=4*c,Y=8*c;return this.uint8[F+0]=d,this.uint8[F+1]=m,this.float32[H+1]=w,this.float32[H+2]=E,this.int16[Y+6]=C,this.int16[Y+7]=O,c}}Je.prototype.bytesPerElement=16,Sr("StructArrayLayout2ub2f2i16",Je);class Ge extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,d,m){const w=this.length;return this.resize(w+1),this.emplace(w,c,d,m)}emplace(c,d,m,w){const E=3*c;return this.uint16[E+0]=d,this.uint16[E+1]=m,this.uint16[E+2]=w,c}}Ge.prototype.bytesPerElement=6,Sr("StructArrayLayout3ui6",Ge);class Pt extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,d,m,w,E,C,O,F,H,Y,te,he,_e,xe,Re,He,Ye){const yt=this.length;return this.resize(yt+1),this.emplace(yt,c,d,m,w,E,C,O,F,H,Y,te,he,_e,xe,Re,He,Ye)}emplace(c,d,m,w,E,C,O,F,H,Y,te,he,_e,xe,Re,He,Ye,yt){const st=24*c,ut=12*c,kt=48*c;return this.int16[st+0]=d,this.int16[st+1]=m,this.uint16[st+2]=w,this.uint16[st+3]=E,this.uint32[ut+2]=C,this.uint32[ut+3]=O,this.uint32[ut+4]=F,this.uint16[st+10]=H,this.uint16[st+11]=Y,this.uint16[st+12]=te,this.float32[ut+7]=he,this.float32[ut+8]=_e,this.uint8[kt+36]=xe,this.uint8[kt+37]=Re,this.uint8[kt+38]=He,this.uint32[ut+10]=Ye,this.int16[st+22]=yt,c}}Pt.prototype.bytesPerElement=48,Sr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Pt);class Ft extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,d,m,w,E,C,O,F,H,Y,te,he,_e,xe,Re,He,Ye,yt,st,ut,kt,tr,xr,Xr,vr,gr,Dr,Cr){const Er=this.length;return this.resize(Er+1),this.emplace(Er,c,d,m,w,E,C,O,F,H,Y,te,he,_e,xe,Re,He,Ye,yt,st,ut,kt,tr,xr,Xr,vr,gr,Dr,Cr)}emplace(c,d,m,w,E,C,O,F,H,Y,te,he,_e,xe,Re,He,Ye,yt,st,ut,kt,tr,xr,Xr,vr,gr,Dr,Cr,Er){const Bt=32*c,Fr=16*c;return this.int16[Bt+0]=d,this.int16[Bt+1]=m,this.int16[Bt+2]=w,this.int16[Bt+3]=E,this.int16[Bt+4]=C,this.int16[Bt+5]=O,this.int16[Bt+6]=F,this.int16[Bt+7]=H,this.uint16[Bt+8]=Y,this.uint16[Bt+9]=te,this.uint16[Bt+10]=he,this.uint16[Bt+11]=_e,this.uint16[Bt+12]=xe,this.uint16[Bt+13]=Re,this.uint16[Bt+14]=He,this.uint16[Bt+15]=Ye,this.uint16[Bt+16]=yt,this.uint16[Bt+17]=st,this.uint16[Bt+18]=ut,this.uint16[Bt+19]=kt,this.uint16[Bt+20]=tr,this.uint16[Bt+21]=xr,this.uint16[Bt+22]=Xr,this.uint32[Fr+12]=vr,this.float32[Fr+13]=gr,this.float32[Fr+14]=Dr,this.uint16[Bt+30]=Cr,this.uint16[Bt+31]=Er,c}}Ft.prototype.bytesPerElement=64,Sr("StructArrayLayout8i15ui1ul2f2ui64",Ft);class Ht extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c){const d=this.length;return this.resize(d+1),this.emplace(d,c)}emplace(c,d){return this.float32[1*c+0]=d,c}}Ht.prototype.bytesPerElement=4,Sr("StructArrayLayout1f4",Ht);class Gt extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,d,m){const w=this.length;return this.resize(w+1),this.emplace(w,c,d,m)}emplace(c,d,m,w){const E=3*c;return this.uint16[6*c+0]=d,this.float32[E+1]=m,this.float32[E+2]=w,c}}Gt.prototype.bytesPerElement=12,Sr("StructArrayLayout1ui2f12",Gt);class Xt extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,d,m){const w=this.length;return this.resize(w+1),this.emplace(w,c,d,m)}emplace(c,d,m,w){const E=4*c;return this.uint32[2*c+0]=d,this.uint16[E+2]=m,this.uint16[E+3]=w,c}}Xt.prototype.bytesPerElement=8,Sr("StructArrayLayout1ul2ui8",Xt);class qt extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,d){const m=this.length;return this.resize(m+1),this.emplace(m,c,d)}emplace(c,d,m){const w=2*c;return this.uint16[w+0]=d,this.uint16[w+1]=m,c}}qt.prototype.bytesPerElement=4,Sr("StructArrayLayout2ui4",qt);class Yt extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c){const d=this.length;return this.resize(d+1),this.emplace(d,c)}emplace(c,d){return this.uint16[1*c+0]=d,c}}Yt.prototype.bytesPerElement=2,Sr("StructArrayLayout1ui2",Yt);class Ir extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,d,m,w){const E=this.length;return this.resize(E+1),this.emplace(E,c,d,m,w)}emplace(c,d,m,w,E){const C=4*c;return this.float32[C+0]=d,this.float32[C+1]=m,this.float32[C+2]=w,this.float32[C+3]=E,c}}Ir.prototype.bytesPerElement=16,Sr("StructArrayLayout4f16",Ir);class ir extends _{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new x(this.anchorPointX,this.anchorPointY)}}ir.prototype.size=20;class or extends ke{get(c){return new ir(this,c)}}Sr("CollisionBoxArray",or);class Nr extends _{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(c){this._structArray.uint8[this._pos1+37]=c}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(c){this._structArray.uint8[this._pos1+38]=c}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(c){this._structArray.uint32[this._pos4+10]=c}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Nr.prototype.size=48;class Qr extends Pt{get(c){return new Nr(this,c)}}Sr("PlacedSymbolArray",Qr);class Wr extends _{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(c){this._structArray.uint32[this._pos4+12]=c}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Wr.prototype.size=64;class sn extends Ft{get(c){return new Wr(this,c)}}Sr("SymbolInstanceArray",sn);class An extends Ht{getoffsetX(c){return this.float32[1*c+0]}}Sr("GlyphOffsetArray",An);class Zn extends V{getx(c){return this.int16[3*c+0]}gety(c){return this.int16[3*c+1]}gettileUnitDistanceFromAnchor(c){return this.int16[3*c+2]}}Sr("SymbolLineVertexArray",Zn);class Di extends _{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Di.prototype.size=12;class $n extends Gt{get(c){return new Di(this,c)}}Sr("TextAnchorOffsetArray",$n);class to extends _{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}to.prototype.size=8;class Jn extends Xt{get(c){return new to(this,c)}}Sr("FeatureIndexArray",Jn);class Wi extends L{}class bo extends L{}class Xs extends L{}class Ta extends q{}class Li extends oe{}class su extends le{}class Ca extends ie{}class Df extends fe{}class Rh extends Ae{}class Os extends Te{}class Ks extends Ie{}class Qo extends Je{}class Ns extends Ge{}class co extends qt{}const gs=P([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ds}=gs;class Dn{constructor(c=[]){this.segments=c}prepareSegment(c,d,m,w){let E=this.segments[this.segments.length-1];return c>Dn.MAX_VERTEX_ARRAY_LENGTH&&ve(`Max vertices per segment is ${Dn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${c}`),(!E||E.vertexLength+c>Dn.MAX_VERTEX_ARRAY_LENGTH||E.sortKey!==w)&&(E={vertexOffset:d.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},w!==void 0&&(E.sortKey=w),this.segments.push(E)),E}get(){return this.segments}destroy(){for(const c of this.segments)for(const d in c.vaos)c.vaos[d].destroy()}static simpleSegment(c,d,m,w){return new Dn([{vertexOffset:c,primitiveOffset:d,vertexLength:m,primitiveLength:w,vaos:{},sortKey:0}])}}function Jl(u,c){return 256*(u=ne(Math.floor(u),0,255))+ne(Math.floor(c),0,255)}Dn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Sr("SegmentVector",Dn);const au=P([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Cc={exports:{}},kh={exports:{}};kh.exports=function(u,c){var d,m,w,E,C,O,F,H;for(m=u.length-(d=3&u.length),w=c,C=3432918353,O=461845907,H=0;H<m;)F=255&u.charCodeAt(H)|(255&u.charCodeAt(++H))<<8|(255&u.charCodeAt(++H))<<16|(255&u.charCodeAt(++H))<<24,++H,w=27492+(65535&(E=5*(65535&(w=(w^=F=(65535&(F=(F=(65535&F)*C+(((F>>>16)*C&65535)<<16)&4294967295)<<15|F>>>17))*O+(((F>>>16)*O&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(F=0,d){case 3:F^=(255&u.charCodeAt(H+2))<<16;case 2:F^=(255&u.charCodeAt(H+1))<<8;case 1:w^=F=(65535&(F=(F=(65535&(F^=255&u.charCodeAt(H)))*C+(((F>>>16)*C&65535)<<16)&4294967295)<<15|F>>>17))*O+(((F>>>16)*O&65535)<<16)&4294967295}return w^=u.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0};var G_=kh.exports,Lm={exports:{}};Lm.exports=function(u,c){for(var d,m=u.length,w=c^m,E=0;m>=4;)d=1540483477*(65535&(d=255&u.charCodeAt(E)|(255&u.charCodeAt(++E))<<8|(255&u.charCodeAt(++E))<<16|(255&u.charCodeAt(++E))<<24))+((1540483477*(d>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),m-=4,++E;switch(m){case 3:w^=(255&u.charCodeAt(E+2))<<16;case 2:w^=(255&u.charCodeAt(E+1))<<8;case 1:w=1540483477*(65535&(w^=255&u.charCodeAt(E)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0};var Ql=G_,Pc=Lm.exports;Cc.exports=Ql,Cc.exports.murmur3=Ql,Cc.exports.murmur2=Pc;var Rd=f(Cc.exports);class Lf{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(c,d,m,w){this.ids.push(kd(c)),this.positions.push(d,m,w)}getPositions(c){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=kd(c);let m=0,w=this.ids.length-1;for(;m<w;){const C=m+w>>1;this.ids[C]>=d?w=C:m=C+1}const E=[];for(;this.ids[m]===d;)E.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return E}static serialize(c,d){const m=new Float64Array(c.ids),w=new Uint32Array(c.positions);return Ff(m,w,0,m.length-1),d&&d.push(m.buffer,w.buffer),{ids:m,positions:w}}static deserialize(c){const d=new Lf;return d.ids=c.ids,d.positions=c.positions,d.indexed=!0,d}}function kd(u){const c=+u;return!isNaN(c)&&c<=Number.MAX_SAFE_INTEGER?c:Rd(String(u))}function Ff(u,c,d,m){for(;d<m;){const w=u[d+m>>1];let E=d-1,C=m+1;for(;;){do E++;while(u[E]<w);do C--;while(u[C]>w);if(E>=C)break;Ic(u,E,C),Ic(c,3*E,3*C),Ic(c,3*E+1,3*C+1),Ic(c,3*E+2,3*C+2)}C-d<m-C?(Ff(u,c,d,C),d=C+1):(Ff(u,c,C+1,m),m=C)}}function Ic(u,c,d){const m=u[c];u[c]=u[d],u[d]=m}Sr("FeaturePositionMap",Lf);class Mh{constructor(c,d){this.gl=c.gl,this.location=d}}class Qp extends Mh{constructor(c,d){super(c,d),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))}}class eg extends Mh{constructor(c,d){super(c,d),this.current=[0,0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3]))}}class Fm extends Mh{constructor(c,d){super(c,d),this.current=En.transparent}set(c){c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a))}}const tg=new Float32Array(16);function Bm(u){return[Jl(255*u.r,255*u.g),Jl(255*u.b,255*u.a)]}class rg{constructor(c,d,m){this.value=c,this.uniformNames=d.map(w=>`u_${w}`),this.type=m}setUniform(c,d,m){c.set(m.constantOr(this.value))}getBinding(c,d,m){return this.type==="color"?new Fm(c,d):new Qp(c,d)}}class qu{constructor(c,d){this.uniformNames=d.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(c,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=c.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=c.tlbr}setUniform(c,d,m,w){const E=w==="u_pattern_to"?this.patternTo:w==="u_pattern_from"?this.patternFrom:w==="u_pixel_ratio_to"?this.pixelRatioTo:w==="u_pixel_ratio_from"?this.pixelRatioFrom:null;E&&c.set(E)}getBinding(c,d,m){return m.substr(0,9)==="u_pattern"?new eg(c,d):new Qp(c,d)}}class lu{constructor(c,d,m,w){this.expression=c,this.type=m,this.maxValue=0,this.paintVertexAttributes=d.map(E=>({name:`a_${E}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new w}populatePaintArray(c,d,m,w,E){const C=this.paintVertexArray.length,O=this.expression.evaluate(new Ai(0),d,{},w,[],E);this.paintVertexArray.resize(c),this._setPaintValue(C,c,O)}updatePaintArray(c,d,m,w){const E=this.expression.evaluate({zoom:0},m,w);this._setPaintValue(c,d,E)}_setPaintValue(c,d,m){if(this.type==="color"){const w=Bm(m);for(let E=c;E<d;E++)this.paintVertexArray.emplace(E,w[0],w[1])}else{for(let w=c;w<d;w++)this.paintVertexArray.emplace(w,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class El{constructor(c,d,m,w,E,C){this.expression=c,this.uniformNames=d.map(O=>`u_${O}_t`),this.type=m,this.useIntegerZoom=w,this.zoom=E,this.maxValue=0,this.paintVertexAttributes=d.map(O=>({name:`a_${O}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new C}populatePaintArray(c,d,m,w,E){const C=this.expression.evaluate(new Ai(this.zoom),d,{},w,[],E),O=this.expression.evaluate(new Ai(this.zoom+1),d,{},w,[],E),F=this.paintVertexArray.length;this.paintVertexArray.resize(c),this._setPaintValue(F,c,C,O)}updatePaintArray(c,d,m,w){const E=this.expression.evaluate({zoom:this.zoom},m,w),C=this.expression.evaluate({zoom:this.zoom+1},m,w);this._setPaintValue(c,d,E,C)}_setPaintValue(c,d,m,w){if(this.type==="color"){const E=Bm(m),C=Bm(w);for(let O=c;O<d;O++)this.paintVertexArray.emplace(O,E[0],E[1],C[0],C[1])}else{for(let E=c;E<d;E++)this.paintVertexArray.emplace(E,m,w);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(w))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(c,d){const m=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,w=ne(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);c.set(w)}getBinding(c,d,m){return new Qp(c,d)}}class Pa{constructor(c,d,m,w,E,C){this.expression=c,this.type=d,this.useIntegerZoom=m,this.zoom=w,this.layerId=C,this.zoomInPaintVertexArray=new E,this.zoomOutPaintVertexArray=new E}populatePaintArray(c,d,m){const w=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(c),this.zoomOutPaintVertexArray.resize(c),this._setPaintValues(w,c,d.patterns&&d.patterns[this.layerId],m)}updatePaintArray(c,d,m,w,E){this._setPaintValues(c,d,m.patterns&&m.patterns[this.layerId],E)}_setPaintValues(c,d,m,w){if(!w||!m)return;const{min:E,mid:C,max:O}=m,F=w[E],H=w[C],Y=w[O];if(F&&H&&Y)for(let te=c;te<d;te++)this.zoomInPaintVertexArray.emplace(te,H.tl[0],H.tl[1],H.br[0],H.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],H.pixelRatio,F.pixelRatio),this.zoomOutPaintVertexArray.emplace(te,H.tl[0],H.tl[1],H.br[0],H.br[1],Y.tl[0],Y.tl[1],Y.br[0],Y.br[1],H.pixelRatio,Y.pixelRatio)}upload(c){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=c.createVertexBuffer(this.zoomInPaintVertexArray,au.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=c.createVertexBuffer(this.zoomOutPaintVertexArray,au.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Y_{constructor(c,d,m){this.binders={},this._buffers=[];const w=[];for(const E in c.paint._values){if(!m(E))continue;const C=c.paint.get(E);if(!(C instanceof Al&&Ms(C.property.specification)))continue;const O=CA(E,c.type),F=C.value,H=C.property.specification.type,Y=C.property.useIntegerZoom,te=C.property.specification["property-type"],he=te==="cross-faded"||te==="cross-faded-data-driven";if(F.kind==="constant")this.binders[E]=he?new qu(F.value,O):new rg(F.value,O,H),w.push(`/u_${E}`);else if(F.kind==="source"||he){const _e=Z_(E,H,"source");this.binders[E]=he?new Pa(F,H,Y,d,_e,c.id):new lu(F,O,H,_e),w.push(`/a_${E}`)}else{const _e=Z_(E,H,"composite");this.binders[E]=new El(F,O,H,Y,d,_e),w.push(`/z_${E}`)}}this.cacheKey=w.sort().join("")}getMaxValue(c){const d=this.binders[c];return d instanceof lu||d instanceof El?d.maxValue:0}populatePaintArrays(c,d,m,w,E){for(const C in this.binders){const O=this.binders[C];(O instanceof lu||O instanceof El||O instanceof Pa)&&O.populatePaintArray(c,d,m,w,E)}}setConstantPatternPositions(c,d){for(const m in this.binders){const w=this.binders[m];w instanceof qu&&w.setConstantPatternPositions(c,d)}}updatePaintArrays(c,d,m,w,E){let C=!1;for(const O in c){const F=d.getPositions(O);for(const H of F){const Y=m.feature(H.index);for(const te in this.binders){const he=this.binders[te];if((he instanceof lu||he instanceof El||he instanceof Pa)&&he.expression.isStateDependent===!0){const _e=w.paint.get(te);he.expression=_e.value,he.updatePaintArray(H.start,H.end,Y,c[O],E),C=!0}}}}return C}defines(){const c=[];for(const d in this.binders){const m=this.binders[d];(m instanceof rg||m instanceof qu)&&c.push(...m.uniformNames.map(w=>`#define HAS_UNIFORM_${w}`))}return c}getBinderAttributes(){const c=[];for(const d in this.binders){const m=this.binders[d];if(m instanceof lu||m instanceof El)for(let w=0;w<m.paintVertexAttributes.length;w++)c.push(m.paintVertexAttributes[w].name);else if(m instanceof Pa)for(let w=0;w<au.members.length;w++)c.push(au.members[w].name)}return c}getBinderUniforms(){const c=[];for(const d in this.binders){const m=this.binders[d];if(m instanceof rg||m instanceof qu||m instanceof El)for(const w of m.uniformNames)c.push(w)}return c}getPaintVertexBuffers(){return this._buffers}getUniforms(c,d){const m=[];for(const w in this.binders){const E=this.binders[w];if(E instanceof rg||E instanceof qu||E instanceof El){for(const C of E.uniformNames)if(d[C]){const O=E.getBinding(c,d[C],C);m.push({name:C,property:w,binding:O})}}}return m}setUniforms(c,d,m,w){for(const{name:E,property:C,binding:O}of d)this.binders[C].setUniform(O,w,m.get(C),E)}updatePaintBuffers(c){this._buffers=[];for(const d in this.binders){const m=this.binders[d];if(c&&m instanceof Pa){const w=c.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;w&&this._buffers.push(w)}else(m instanceof lu||m instanceof El)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(c){for(const d in this.binders){const m=this.binders[d];(m instanceof lu||m instanceof El||m instanceof Pa)&&m.upload(c)}this.updatePaintBuffers()}destroy(){for(const c in this.binders){const d=this.binders[c];(d instanceof lu||d instanceof El||d instanceof Pa)&&d.destroy()}}}class Oh{constructor(c,d,m=()=>!0){this.programConfigurations={};for(const w of c)this.programConfigurations[w.id]=new Y_(w,d,m);this.needsUpload=!1,this._featureMap=new Lf,this._bufferOffset=0}populatePaintArrays(c,d,m,w,E,C){for(const O in this.programConfigurations)this.programConfigurations[O].populatePaintArrays(c,d,w,E,C);d.id!==void 0&&this._featureMap.add(d.id,m,this._bufferOffset,c),this._bufferOffset=c,this.needsUpload=!0}updatePaintArrays(c,d,m,w){for(const E of m)this.needsUpload=this.programConfigurations[E.id].updatePaintArrays(c,this._featureMap,d,E,w)||this.needsUpload}get(c){return this.programConfigurations[c]}upload(c){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(c);this.needsUpload=!1}}destroy(){for(const c in this.programConfigurations)this.programConfigurations[c].destroy()}}function CA(u,c){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${c}-`,"").replace(/-/g,"_")]}function Z_(u,c,d){const m={color:{source:le,composite:Ir},number:{source:Ht,composite:le}},w=function(E){return{"line-pattern":{source:Ca,composite:Ca},"fill-pattern":{source:Ca,composite:Ca},"fill-extrusion-pattern":{source:Ca,composite:Ca}}[E]}(u);return w&&w[d]||m[c][d]}Sr("ConstantBinder",rg),Sr("CrossFadedConstantBinder",qu),Sr("SourceExpressionBinder",lu),Sr("CrossFadedCompositeBinder",Pa),Sr("CompositeExpressionBinder",El),Sr("ProgramConfiguration",Y_,{omit:["_buffers"]}),Sr("ProgramConfigurationSet",Oh);const Fi=8192,J_=Math.pow(2,14)-1,Q_=-J_-1;function Bf(u){const c=Fi/u.extent,d=u.loadGeometry();for(let m=0;m<d.length;m++){const w=d[m];for(let E=0;E<w.length;E++){const C=w[E],O=Math.round(C.x*c),F=Math.round(C.y*c);C.x=ne(O,Q_,J_),C.y=ne(F,Q_,J_),(O<C.x||O>C.x+1||F<C.y||F>C.y+1)&&ve("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function Nh(u,c){return{type:u.type,id:u.id,properties:u.properties,geometry:c?Bf(u):[]}}function zm(u,c,d,m,w){u.emplaceBack(2*c+(m+1)/2,2*d+(w+1)/2)}class zf{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(d=>d.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new bo,this.indexArray=new Ns,this.segments=new Dn,this.programConfigurations=new Oh(c.layers,c.zoom),this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(c,d,m){const w=this.layers[0],E=[];let C=null,O=!1;w.type==="circle"&&(C=w.layout.get("circle-sort-key"),O=!C.isConstant());for(const{feature:F,id:H,index:Y,sourceLayerIndex:te}of c){const he=this.layers[0]._featureFilter.needGeometry,_e=Nh(F,he);if(!this.layers[0]._featureFilter.filter(new Ai(this.zoom),_e,m))continue;const xe=O?C.evaluate(_e,{},m):void 0,Re={id:H,properties:F.properties,type:F.type,sourceLayerIndex:te,index:Y,geometry:he?_e.geometry:Bf(F),patterns:{},sortKey:xe};E.push(Re)}O&&E.sort((F,H)=>F.sortKey-H.sortKey);for(const F of E){const{geometry:H,index:Y,sourceLayerIndex:te}=F,he=c[Y].feature;this.addFeature(F,H,Y,m),d.featureIndex.insert(he,H,Y,te,this.index)}}update(c,d,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,d,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Ds),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(c,d,m,w){for(const E of d)for(const C of E){const O=C.x,F=C.y;if(O<0||O>=Fi||F<0||F>=Fi)continue;const H=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,c.sortKey),Y=H.vertexLength;zm(this.layoutVertexArray,O,F,-1,-1),zm(this.layoutVertexArray,O,F,1,-1),zm(this.layoutVertexArray,O,F,1,1),zm(this.layoutVertexArray,O,F,-1,1),this.indexArray.emplaceBack(Y,Y+1,Y+2),this.indexArray.emplaceBack(Y,Y+3,Y+2),H.vertexLength+=4,H.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,m,{},w)}}function $m(u,c){for(let d=0;d<u.length;d++)if(Lh(c,u[d]))return!0;for(let d=0;d<c.length;d++)if(Lh(u,c[d]))return!0;return!!uu(u,c)}function Um(u,c,d){return!!Lh(u,c)||!!ng(c,u,d)}function cu(u,c){if(u.length===1)return Pb(c,u[0]);for(let d=0;d<c.length;d++){const m=c[d];for(let w=0;w<m.length;w++)if(Lh(u,m[w]))return!0}for(let d=0;d<u.length;d++)if(Pb(c,u[d]))return!0;for(let d=0;d<c.length;d++)if(uu(u,c[d]))return!0;return!1}function Dh(u,c,d){if(u.length>1){if(uu(u,c))return!0;for(let m=0;m<c.length;m++)if(ng(c[m],u,d))return!0}for(let m=0;m<u.length;m++)if(ng(u[m],c,d))return!0;return!1}function uu(u,c){if(u.length===0||c.length===0)return!1;for(let d=0;d<u.length-1;d++){const m=u[d],w=u[d+1];for(let E=0;E<c.length-1;E++)if(jm(m,w,c[E],c[E+1]))return!0}return!1}function jm(u,c,d,m){return ge(u,d,m)!==ge(c,d,m)&&ge(u,c,d)!==ge(u,c,m)}function ng(u,c,d){const m=d*d;if(c.length===1)return u.distSqr(c[0])<m;for(let w=1;w<c.length;w++)if(e1(u,c[w-1],c[w])<m)return!0;return!1}function e1(u,c,d){const m=c.distSqr(d);if(m===0)return u.distSqr(c);const w=((u.x-c.x)*(d.x-c.x)+(u.y-c.y)*(d.y-c.y))/m;return u.distSqr(w<0?c:w>1?d:d.sub(c)._mult(w)._add(c))}function Pb(u,c){let d,m,w,E=!1;for(let C=0;C<u.length;C++){d=u[C];for(let O=0,F=d.length-1;O<d.length;F=O++)m=d[O],w=d[F],m.y>c.y!=w.y>c.y&&c.x<(w.x-m.x)*(c.y-m.y)/(w.y-m.y)+m.x&&(E=!E)}return E}function Lh(u,c){let d=!1;for(let m=0,w=u.length-1;m<u.length;w=m++){const E=u[m],C=u[w];E.y>c.y!=C.y>c.y&&c.x<(C.x-E.x)*(c.y-E.y)/(C.y-E.y)+E.x&&(d=!d)}return d}function t1(u,c,d){const m=d[0],w=d[2];if(u.x<m.x&&c.x<m.x||u.x>w.x&&c.x>w.x||u.y<m.y&&c.y<m.y||u.y>w.y&&c.y>w.y)return!1;const E=ge(u,c,d[0]);return E!==ge(u,c,d[1])||E!==ge(u,c,d[2])||E!==ge(u,c,d[3])}function r1(u,c,d){const m=c.paint.get(u).value;return m.kind==="constant"?m.value:d.programConfigurations.get(c.id).getMaxValue(u)}function Ib(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function Rb(u,c,d,m,w){if(!c[0]&&!c[1])return u;const E=x.convert(c)._mult(w);d==="viewport"&&E._rotate(-m);const C=[];for(let O=0;O<u.length;O++)C.push(u[O].sub(E));return C}let X6,K6;Sr("CircleBucket",zf,{omit:["layers"]});var kX={get paint(){return K6=K6||new y({"circle-radius":new qr(pe.paint_circle["circle-radius"]),"circle-color":new qr(pe.paint_circle["circle-color"]),"circle-blur":new qr(pe.paint_circle["circle-blur"]),"circle-opacity":new qr(pe.paint_circle["circle-opacity"]),"circle-translate":new Rr(pe.paint_circle["circle-translate"]),"circle-translate-anchor":new Rr(pe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Rr(pe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Rr(pe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new qr(pe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new qr(pe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new qr(pe.paint_circle["circle-stroke-opacity"])})},get layout(){return X6=X6||new y({"circle-sort-key":new qr(pe.layout_circle["circle-sort-key"])})}},tl=1e-6,Vm=typeof Float32Array<"u"?Float32Array:Array;function PA(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function G6(u,c,d){var m=c[0],w=c[1],E=c[2],C=c[3],O=c[4],F=c[5],H=c[6],Y=c[7],te=c[8],he=c[9],_e=c[10],xe=c[11],Re=c[12],He=c[13],Ye=c[14],yt=c[15],st=d[0],ut=d[1],kt=d[2],tr=d[3];return u[0]=st*m+ut*O+kt*te+tr*Re,u[1]=st*w+ut*F+kt*he+tr*He,u[2]=st*E+ut*H+kt*_e+tr*Ye,u[3]=st*C+ut*Y+kt*xe+tr*yt,u[4]=(st=d[4])*m+(ut=d[5])*O+(kt=d[6])*te+(tr=d[7])*Re,u[5]=st*w+ut*F+kt*he+tr*He,u[6]=st*E+ut*H+kt*_e+tr*Ye,u[7]=st*C+ut*Y+kt*xe+tr*yt,u[8]=(st=d[8])*m+(ut=d[9])*O+(kt=d[10])*te+(tr=d[11])*Re,u[9]=st*w+ut*F+kt*he+tr*He,u[10]=st*E+ut*H+kt*_e+tr*Ye,u[11]=st*C+ut*Y+kt*xe+tr*yt,u[12]=(st=d[12])*m+(ut=d[13])*O+(kt=d[14])*te+(tr=d[15])*Re,u[13]=st*w+ut*F+kt*he+tr*He,u[14]=st*E+ut*H+kt*_e+tr*Ye,u[15]=st*C+ut*Y+kt*xe+tr*yt,u}Math.hypot||(Math.hypot=function(){for(var u=0,c=arguments.length;c--;)u+=arguments[c]*arguments[c];return Math.sqrt(u)});var n1,MX=G6;function kb(u,c,d){var m=c[0],w=c[1],E=c[2],C=c[3];return u[0]=d[0]*m+d[4]*w+d[8]*E+d[12]*C,u[1]=d[1]*m+d[5]*w+d[9]*E+d[13]*C,u[2]=d[2]*m+d[6]*w+d[10]*E+d[14]*C,u[3]=d[3]*m+d[7]*w+d[11]*E+d[15]*C,u}n1=new Vm(4),Vm!=Float32Array&&(n1[0]=0,n1[1]=0,n1[2]=0,n1[3]=0);class OX extends h{constructor(c){super(c,kX)}createBucket(c){return new zf(c)}queryRadius(c){const d=c;return r1("circle-radius",this,d)+r1("circle-stroke-width",this,d)+Ib(this.paint.get("circle-translate"))}queryIntersectsFeature(c,d,m,w,E,C,O,F){const H=Rb(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),C.angle,O),Y=this.paint.get("circle-radius").evaluate(d,m)+this.paint.get("circle-stroke-width").evaluate(d,m),te=this.paint.get("circle-pitch-alignment")==="map",he=te?H:function(xe,Re){return xe.map(He=>Y6(He,Re))}(H,F),_e=te?Y*O:Y;for(const xe of w)for(const Re of xe){const He=te?Re:Y6(Re,F);let Ye=_e;const yt=kb([],[Re.x,Re.y,0,1],F);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ye*=yt[3]/C.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ye*=C.cameraToCenterDistance/yt[3]),Um(he,He,Ye))return!0}return!1}}function Y6(u,c){const d=kb([],[u.x,u.y,0,1],c);return new x(d[0]/d[3],d[1]/d[3])}class Z6 extends zf{}let J6;Sr("HeatmapBucket",Z6,{omit:["layers"]});var NX={get paint(){return J6=J6||new y({"heatmap-radius":new qr(pe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new qr(pe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Rr(pe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new M(pe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Rr(pe.paint_heatmap["heatmap-opacity"])})}};function IA(u,{width:c,height:d},m,w){if(w){if(w instanceof Uint8ClampedArray)w=new Uint8Array(w.buffer);else if(w.length!==c*d*m)throw new RangeError(`mismatched image size. expected: ${w.length} but got: ${c*d*m}`)}else w=new Uint8Array(c*d*m);return u.width=c,u.height=d,u.data=w,u}function Q6(u,{width:c,height:d},m){if(c===u.width&&d===u.height)return;const w=IA({},{width:c,height:d},m);RA(u,w,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,c),height:Math.min(u.height,d)},m),u.width=c,u.height=d,u.data=w.data}function RA(u,c,d,m,w,E){if(w.width===0||w.height===0)return c;if(w.width>u.width||w.height>u.height||d.x>u.width-w.width||d.y>u.height-w.height)throw new RangeError("out of range source coordinates for image copy");if(w.width>c.width||w.height>c.height||m.x>c.width-w.width||m.y>c.height-w.height)throw new RangeError("out of range destination coordinates for image copy");const C=u.data,O=c.data;if(C===O)throw new Error("srcData equals dstData, so image is already copied");for(let F=0;F<w.height;F++){const H=((d.y+F)*u.width+d.x)*E,Y=((m.y+F)*c.width+m.x)*E;for(let te=0;te<w.width*E;te++)O[Y+te]=C[H+te]}return c}class i1{constructor(c,d){IA(this,c,1,d)}resize(c){Q6(this,c,1)}clone(){return new i1({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,d,m,w,E){RA(c,d,m,w,E,1)}}class Rc{constructor(c,d){IA(this,c,4,d)}resize(c){Q6(this,c,4)}replace(c,d){d?this.data.set(c):this.data=c instanceof Uint8ClampedArray?new Uint8Array(c.buffer):c}clone(){return new Rc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,d,m,w,E){RA(c,d,m,w,E,4)}}function eM(u){const c={},d=u.resolution||256,m=u.clips?u.clips.length:1,w=u.image||new Rc({width:d,height:m});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const E=(C,O,F)=>{c[u.evaluationKey]=F;const H=u.expression.evaluate(c);w.data[C+O+0]=Math.floor(255*H.r/H.a),w.data[C+O+1]=Math.floor(255*H.g/H.a),w.data[C+O+2]=Math.floor(255*H.b/H.a),w.data[C+O+3]=Math.floor(255*H.a)};if(u.clips)for(let C=0,O=0;C<m;++C,O+=4*d)for(let F=0,H=0;F<d;F++,H+=4){const Y=F/(d-1),{start:te,end:he}=u.clips[C];E(O,H,te*(1-Y)+he*Y)}else for(let C=0,O=0;C<d;C++,O+=4)E(0,O,C/(d-1));return w}Sr("AlphaImage",i1),Sr("RGBAImage",Rc);const kA="big-fb";class DX extends h{createBucket(c){return new Z6(c)}constructor(c){super(c,NX),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=eM({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(kA)&&this.heatmapFbos.delete(kA)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let tM;var LX={get paint(){return tM=tM||new y({"hillshade-illumination-direction":new Rr(pe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Rr(pe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Rr(pe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Rr(pe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Rr(pe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Rr(pe.paint_hillshade["hillshade-accent-color"])})}};class FX extends h{constructor(c){super(c,LX)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const BX=P([{name:"a_pos",components:2,type:"Int16"}],4),{members:zX}=BX;function rM(u,c,d=2){const m=c&&c.length,w=m?c[0]*d:u.length;let E=nM(u,0,w,d,!0);const C=[];if(!E||E.next===E.prev)return C;let O,F,H;if(m&&(E=function(Y,te,he,_e){const xe=[];for(let Re=0,He=te.length;Re<He;Re++){const Ye=nM(Y,te[Re]*_e,Re<He-1?te[Re+1]*_e:Y.length,_e,!1);Ye===Ye.next&&(Ye.steiner=!0),xe.push(XX(Ye))}xe.sort(HX);for(let Re=0;Re<xe.length;Re++)he=qX(xe[Re],he);return he}(u,c,E,d)),u.length>80*d){O=1/0,F=1/0;let Y=-1/0,te=-1/0;for(let he=d;he<w;he+=d){const _e=u[he],xe=u[he+1];_e<O&&(O=_e),xe<F&&(F=xe),_e>Y&&(Y=_e),xe>te&&(te=xe)}H=Math.max(Y-O,te-F),H=H!==0?32767/H:0}return o1(E,C,d,O,F,H,0),C}function nM(u,c,d,m,w){let E;if(w===function(C,O,F,H){let Y=0;for(let te=O,he=F-H;te<F;te+=H)Y+=(C[he]-C[te])*(C[te+1]+C[he+1]),he=te;return Y}(u,c,d,m)>0)for(let C=c;C<d;C+=m)E=sM(C/m|0,u[C],u[C+1],E);else for(let C=d-m;C>=c;C-=m)E=sM(C/m|0,u[C],u[C+1],E);return E&&Mb(E,E.next)&&(a1(E),E=E.next),E}function ig(u,c){if(!u)return u;c||(c=u);let d,m=u;do if(d=!1,m.steiner||!Mb(m,m.next)&&Uo(m.prev,m,m.next)!==0)m=m.next;else{if(a1(m),m=c=m.prev,m===m.next)break;d=!0}while(d||m!==c);return c}function o1(u,c,d,m,w,E,C){if(!u)return;!C&&E&&function(F,H,Y,te){let he=F;do he.z===0&&(he.z=MA(he.x,he.y,H,Y,te)),he.prevZ=he.prev,he.nextZ=he.next,he=he.next;while(he!==F);he.prevZ.nextZ=null,he.prevZ=null,function(_e){let xe,Re=1;do{let He,Ye=_e;_e=null;let yt=null;for(xe=0;Ye;){xe++;let st=Ye,ut=0;for(let tr=0;tr<Re&&(ut++,st=st.nextZ,st);tr++);let kt=Re;for(;ut>0||kt>0&&st;)ut!==0&&(kt===0||!st||Ye.z<=st.z)?(He=Ye,Ye=Ye.nextZ,ut--):(He=st,st=st.nextZ,kt--),yt?yt.nextZ=He:_e=He,He.prevZ=yt,yt=He;Ye=st}yt.nextZ=null,Re*=2}while(xe>1)}(he)}(u,m,w,E);let O=u;for(;u.prev!==u.next;){const F=u.prev,H=u.next;if(E?UX(u,m,w,E):$X(u))c.push(F.i,u.i,H.i),a1(u),u=H.next,O=H.next;else if((u=H)===O){C?C===1?o1(u=jX(ig(u),c),c,d,m,w,E,2):C===2&&VX(u,c,d,m,w,E):o1(ig(u),c,d,m,w,E,1);break}}}function $X(u){const c=u.prev,d=u,m=u.next;if(Uo(c,d,m)>=0)return!1;const w=c.x,E=d.x,C=m.x,O=c.y,F=d.y,H=m.y,Y=w<E?w<C?w:C:E<C?E:C,te=O<F?O<H?O:H:F<H?F:H,he=w>E?w>C?w:C:E>C?E:C,_e=O>F?O>H?O:H:F>H?F:H;let xe=m.next;for(;xe!==c;){if(xe.x>=Y&&xe.x<=he&&xe.y>=te&&xe.y<=_e&&Hm(w,O,E,F,C,H,xe.x,xe.y)&&Uo(xe.prev,xe,xe.next)>=0)return!1;xe=xe.next}return!0}function UX(u,c,d,m){const w=u.prev,E=u,C=u.next;if(Uo(w,E,C)>=0)return!1;const O=w.x,F=E.x,H=C.x,Y=w.y,te=E.y,he=C.y,_e=O<F?O<H?O:H:F<H?F:H,xe=Y<te?Y<he?Y:he:te<he?te:he,Re=O>F?O>H?O:H:F>H?F:H,He=Y>te?Y>he?Y:he:te>he?te:he,Ye=MA(_e,xe,c,d,m),yt=MA(Re,He,c,d,m);let st=u.prevZ,ut=u.nextZ;for(;st&&st.z>=Ye&&ut&&ut.z<=yt;){if(st.x>=_e&&st.x<=Re&&st.y>=xe&&st.y<=He&&st!==w&&st!==C&&Hm(O,Y,F,te,H,he,st.x,st.y)&&Uo(st.prev,st,st.next)>=0||(st=st.prevZ,ut.x>=_e&&ut.x<=Re&&ut.y>=xe&&ut.y<=He&&ut!==w&&ut!==C&&Hm(O,Y,F,te,H,he,ut.x,ut.y)&&Uo(ut.prev,ut,ut.next)>=0))return!1;ut=ut.nextZ}for(;st&&st.z>=Ye;){if(st.x>=_e&&st.x<=Re&&st.y>=xe&&st.y<=He&&st!==w&&st!==C&&Hm(O,Y,F,te,H,he,st.x,st.y)&&Uo(st.prev,st,st.next)>=0)return!1;st=st.prevZ}for(;ut&&ut.z<=yt;){if(ut.x>=_e&&ut.x<=Re&&ut.y>=xe&&ut.y<=He&&ut!==w&&ut!==C&&Hm(O,Y,F,te,H,he,ut.x,ut.y)&&Uo(ut.prev,ut,ut.next)>=0)return!1;ut=ut.nextZ}return!0}function jX(u,c){let d=u;do{const m=d.prev,w=d.next.next;!Mb(m,w)&&iM(m,d,d.next,w)&&s1(m,w)&&s1(w,m)&&(c.push(m.i,d.i,w.i),a1(d),a1(d.next),d=u=w),d=d.next}while(d!==u);return ig(d)}function VX(u,c,d,m,w,E){let C=u;do{let O=C.next.next;for(;O!==C.prev;){if(C.i!==O.i&&KX(C,O)){let F=oM(C,O);return C=ig(C,C.next),F=ig(F,F.next),o1(C,c,d,m,w,E,0),void o1(F,c,d,m,w,E,0)}O=O.next}C=C.next}while(C!==u)}function HX(u,c){return u.x-c.x}function qX(u,c){const d=function(w,E){let C=E;const O=w.x,F=w.y;let H,Y=-1/0;do{if(F<=C.y&&F>=C.next.y&&C.next.y!==C.y){const Re=C.x+(F-C.y)*(C.next.x-C.x)/(C.next.y-C.y);if(Re<=O&&Re>Y&&(Y=Re,H=C.x<C.next.x?C:C.next,Re===O))return H}C=C.next}while(C!==E);if(!H)return null;const te=H,he=H.x,_e=H.y;let xe=1/0;C=H;do{if(O>=C.x&&C.x>=he&&O!==C.x&&Hm(F<_e?O:Y,F,he,_e,F<_e?Y:O,F,C.x,C.y)){const Re=Math.abs(F-C.y)/(O-C.x);s1(C,w)&&(Re<xe||Re===xe&&(C.x>H.x||C.x===H.x&&WX(H,C)))&&(H=C,xe=Re)}C=C.next}while(C!==te);return H}(u,c);if(!d)return c;const m=oM(d,u);return ig(m,m.next),ig(d,d.next)}function WX(u,c){return Uo(u.prev,u,c.prev)<0&&Uo(c.next,u,u.next)<0}function MA(u,c,d,m,w){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-d)*w|0)|u<<8))|u<<4))|u<<2))|u<<1))|(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-m)*w|0)|c<<8))|c<<4))|c<<2))|c<<1))<<1}function XX(u){let c=u,d=u;do(c.x<d.x||c.x===d.x&&c.y<d.y)&&(d=c),c=c.next;while(c!==u);return d}function Hm(u,c,d,m,w,E,C,O){return(w-C)*(c-O)>=(u-C)*(E-O)&&(u-C)*(m-O)>=(d-C)*(c-O)&&(d-C)*(E-O)>=(w-C)*(m-O)}function KX(u,c){return u.next.i!==c.i&&u.prev.i!==c.i&&!function(d,m){let w=d;do{if(w.i!==d.i&&w.next.i!==d.i&&w.i!==m.i&&w.next.i!==m.i&&iM(w,w.next,d,m))return!0;w=w.next}while(w!==d);return!1}(u,c)&&(s1(u,c)&&s1(c,u)&&function(d,m){let w=d,E=!1;const C=(d.x+m.x)/2,O=(d.y+m.y)/2;do w.y>O!=w.next.y>O&&w.next.y!==w.y&&C<(w.next.x-w.x)*(O-w.y)/(w.next.y-w.y)+w.x&&(E=!E),w=w.next;while(w!==d);return E}(u,c)&&(Uo(u.prev,u,c.prev)||Uo(u,c.prev,c))||Mb(u,c)&&Uo(u.prev,u,u.next)>0&&Uo(c.prev,c,c.next)>0)}function Uo(u,c,d){return(c.y-u.y)*(d.x-c.x)-(c.x-u.x)*(d.y-c.y)}function Mb(u,c){return u.x===c.x&&u.y===c.y}function iM(u,c,d,m){const w=Nb(Uo(u,c,d)),E=Nb(Uo(u,c,m)),C=Nb(Uo(d,m,u)),O=Nb(Uo(d,m,c));return w!==E&&C!==O||!(w!==0||!Ob(u,d,c))||!(E!==0||!Ob(u,m,c))||!(C!==0||!Ob(d,u,m))||!(O!==0||!Ob(d,c,m))}function Ob(u,c,d){return c.x<=Math.max(u.x,d.x)&&c.x>=Math.min(u.x,d.x)&&c.y<=Math.max(u.y,d.y)&&c.y>=Math.min(u.y,d.y)}function Nb(u){return u>0?1:u<0?-1:0}function s1(u,c){return Uo(u.prev,u,u.next)<0?Uo(u,c,u.next)>=0&&Uo(u,u.prev,c)>=0:Uo(u,c,u.prev)<0||Uo(u,u.next,c)<0}function oM(u,c){const d=OA(u.i,u.x,u.y),m=OA(c.i,c.x,c.y),w=u.next,E=c.prev;return u.next=c,c.prev=u,d.next=w,w.prev=d,m.next=d,d.prev=m,E.next=m,m.prev=E,m}function sM(u,c,d,m){const w=OA(u,c,d);return m?(w.next=m.next,w.prev=m,m.next.prev=w,m.next=w):(w.prev=w,w.next=w),w}function a1(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function OA(u,c,d){return{i:u,x:c,y:d,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function NA(u,c,d){const m=d.patternDependencies;let w=!1;for(const E of c){const C=E.paint.get(`${u}-pattern`);C.isConstant()||(w=!0);const O=C.constantOr(null);O&&(w=!0,m[O.to]=!0,m[O.from]=!0)}return w}function DA(u,c,d,m,w){const E=w.patternDependencies;for(const C of c){const O=C.paint.get(`${u}-pattern`).value;if(O.kind!=="constant"){let F=O.evaluate({zoom:m-1},d,{},w.availableImages),H=O.evaluate({zoom:m},d,{},w.availableImages),Y=O.evaluate({zoom:m+1},d,{},w.availableImages);F=F&&F.name?F.name:F,H=H&&H.name?H.name:H,Y=Y&&Y.name?Y.name:Y,E[F]=!0,E[H]=!0,E[Y]=!0,d.patterns[C.id]={min:F,mid:H,max:Y}}}return d}class LA{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(d=>d.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Xs,this.indexArray=new Ns,this.indexArray2=new co,this.programConfigurations=new Oh(c.layers,c.zoom),this.segments=new Dn,this.segments2=new Dn,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(c,d,m){this.hasPattern=NA("fill",this.layers,d);const w=this.layers[0].layout.get("fill-sort-key"),E=!w.isConstant(),C=[];for(const{feature:O,id:F,index:H,sourceLayerIndex:Y}of c){const te=this.layers[0]._featureFilter.needGeometry,he=Nh(O,te);if(!this.layers[0]._featureFilter.filter(new Ai(this.zoom),he,m))continue;const _e=E?w.evaluate(he,{},m,d.availableImages):void 0,xe={id:F,properties:O.properties,type:O.type,sourceLayerIndex:Y,index:H,geometry:te?he.geometry:Bf(O),patterns:{},sortKey:_e};C.push(xe)}E&&C.sort((O,F)=>O.sortKey-F.sortKey);for(const O of C){const{geometry:F,index:H,sourceLayerIndex:Y}=O;if(this.hasPattern){const te=DA("fill",this.layers,O,this.zoom,d);this.patternFeatures.push(te)}else this.addFeature(O,F,H,m,{});d.featureIndex.insert(c[H].feature,F,H,Y,this.index)}}update(c,d,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,d,this.stateDependentLayers,m)}addFeatures(c,d,m){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,d,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,zX),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.indexBuffer2=c.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(c,d,m,w,E){for(const C of qa(d,500)){let O=0;for(const _e of C)O+=_e.length;const F=this.segments.prepareSegment(O,this.layoutVertexArray,this.indexArray),H=F.vertexLength,Y=[],te=[];for(const _e of C){if(_e.length===0)continue;_e!==C[0]&&te.push(Y.length/2);const xe=this.segments2.prepareSegment(_e.length,this.layoutVertexArray,this.indexArray2),Re=xe.vertexLength;this.layoutVertexArray.emplaceBack(_e[0].x,_e[0].y),this.indexArray2.emplaceBack(Re+_e.length-1,Re),Y.push(_e[0].x),Y.push(_e[0].y);for(let He=1;He<_e.length;He++)this.layoutVertexArray.emplaceBack(_e[He].x,_e[He].y),this.indexArray2.emplaceBack(Re+He-1,Re+He),Y.push(_e[He].x),Y.push(_e[He].y);xe.vertexLength+=_e.length,xe.primitiveLength+=_e.length}const he=rM(Y,te);for(let _e=0;_e<he.length;_e+=3)this.indexArray.emplaceBack(H+he[_e],H+he[_e+1],H+he[_e+2]);F.vertexLength+=O,F.primitiveLength+=he.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,m,E,w)}}let aM,lM;Sr("FillBucket",LA,{omit:["layers","patternFeatures"]});var GX={get paint(){return lM=lM||new y({"fill-antialias":new Rr(pe.paint_fill["fill-antialias"]),"fill-opacity":new qr(pe.paint_fill["fill-opacity"]),"fill-color":new qr(pe.paint_fill["fill-color"]),"fill-outline-color":new qr(pe.paint_fill["fill-outline-color"]),"fill-translate":new Rr(pe.paint_fill["fill-translate"]),"fill-translate-anchor":new Rr(pe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Nf(pe.paint_fill["fill-pattern"])})},get layout(){return aM=aM||new y({"fill-sort-key":new qr(pe.layout_fill["fill-sort-key"])})}};class YX extends h{constructor(c){super(c,GX)}recalculate(c,d){super.recalculate(c,d);const m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new LA(c)}queryRadius(){return Ib(this.paint.get("fill-translate"))}queryIntersectsFeature(c,d,m,w,E,C,O){return cu(Rb(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),C.angle,O),w)}isTileClipped(){return!0}}const ZX=P([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),JX=P([{name:"a_centroid",components:2,type:"Int16"}],4),{members:QX}=ZX;var Md={},eK=p,cM=qm;function qm(u,c,d,m,w){this.properties={},this.extent=d,this.type=0,this._pbf=u,this._geometry=-1,this._keys=m,this._values=w,u.readFields(tK,this,c)}function tK(u,c,d){u==1?c.id=d.readVarint():u==2?function(m,w){for(var E=m.readVarint()+m.pos;m.pos<E;){var C=w._keys[m.readVarint()],O=w._values[m.readVarint()];w.properties[C]=O}}(d,c):u==3?c.type=d.readVarint():u==4&&(c._geometry=d.pos)}function rK(u){for(var c,d,m=0,w=0,E=u.length,C=E-1;w<E;C=w++)m+=((d=u[C]).x-(c=u[w]).x)*(c.y+d.y);return m}qm.types=["Unknown","Point","LineString","Polygon"],qm.prototype.loadGeometry=function(){var u=this._pbf;u.pos=this._geometry;for(var c,d=u.readVarint()+u.pos,m=1,w=0,E=0,C=0,O=[];u.pos<d;){if(w<=0){var F=u.readVarint();m=7&F,w=F>>3}if(w--,m===1||m===2)E+=u.readSVarint(),C+=u.readSVarint(),m===1&&(c&&O.push(c),c=[]),c.push(new eK(E,C));else{if(m!==7)throw new Error("unknown command "+m);c&&c.push(c[0].clone())}}return c&&O.push(c),O},qm.prototype.bbox=function(){var u=this._pbf;u.pos=this._geometry;for(var c=u.readVarint()+u.pos,d=1,m=0,w=0,E=0,C=1/0,O=-1/0,F=1/0,H=-1/0;u.pos<c;){if(m<=0){var Y=u.readVarint();d=7&Y,m=Y>>3}if(m--,d===1||d===2)(w+=u.readSVarint())<C&&(C=w),w>O&&(O=w),(E+=u.readSVarint())<F&&(F=E),E>H&&(H=E);else if(d!==7)throw new Error("unknown command "+d)}return[C,F,O,H]},qm.prototype.toGeoJSON=function(u,c,d){var m,w,E=this.extent*Math.pow(2,d),C=this.extent*u,O=this.extent*c,F=this.loadGeometry(),H=qm.types[this.type];function Y(_e){for(var xe=0;xe<_e.length;xe++){var Re=_e[xe];_e[xe]=[360*(Re.x+C)/E-180,360/Math.PI*Math.atan(Math.exp((180-360*(Re.y+O)/E)*Math.PI/180))-90]}}switch(this.type){case 1:var te=[];for(m=0;m<F.length;m++)te[m]=F[m][0];Y(F=te);break;case 2:for(m=0;m<F.length;m++)Y(F[m]);break;case 3:for(F=function(_e){var xe=_e.length;if(xe<=1)return[_e];for(var Re,He,Ye=[],yt=0;yt<xe;yt++){var st=rK(_e[yt]);st!==0&&(He===void 0&&(He=st<0),He===st<0?(Re&&Ye.push(Re),Re=[_e[yt]]):Re.push(_e[yt]))}return Re&&Ye.push(Re),Ye}(F),m=0;m<F.length;m++)for(w=0;w<F[m].length;w++)Y(F[m][w])}F.length===1?F=F[0]:H="Multi"+H;var he={type:"Feature",geometry:{type:H,coordinates:F},properties:this.properties};return"id"in this&&(he.id=this.id),he};var nK=cM,uM=hM;function hM(u,c){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(iK,this,c),this.length=this._features.length}function iK(u,c,d){u===15?c.version=d.readVarint():u===1?c.name=d.readString():u===5?c.extent=d.readVarint():u===2?c._features.push(d.pos):u===3?c._keys.push(d.readString()):u===4&&c._values.push(function(m){for(var w=null,E=m.readVarint()+m.pos;m.pos<E;){var C=m.readVarint()>>3;w=C===1?m.readString():C===2?m.readFloat():C===3?m.readDouble():C===4?m.readVarint64():C===5?m.readVarint():C===6?m.readSVarint():C===7?m.readBoolean():null}return w}(d))}hM.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var c=this._pbf.readVarint()+this._pbf.pos;return new nK(this._pbf,c,this.extent,this._keys,this._values)};var oK=uM;function sK(u,c,d){if(u===3){var m=new oK(d,d.readVarint()+d.pos);m.length&&(c[m.name]=m)}}Md.VectorTile=function(u,c){this.layers=u.readFields(sK,{},c)},Md.VectorTileFeature=cM,Md.VectorTileLayer=uM;const aK=Md.VectorTileFeature.types,FA=Math.pow(2,13);function l1(u,c,d,m,w,E,C,O){u.emplaceBack(c,d,2*Math.floor(m*FA)+C,w*FA*2,E*FA*2,Math.round(O))}class BA{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(d=>d.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new Ta,this.centroidVertexArray=new Wi,this.indexArray=new Ns,this.programConfigurations=new Oh(c.layers,c.zoom),this.segments=new Dn,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(c,d,m){this.features=[],this.hasPattern=NA("fill-extrusion",this.layers,d);for(const{feature:w,id:E,index:C,sourceLayerIndex:O}of c){const F=this.layers[0]._featureFilter.needGeometry,H=Nh(w,F);if(!this.layers[0]._featureFilter.filter(new Ai(this.zoom),H,m))continue;const Y={id:E,sourceLayerIndex:O,index:C,geometry:F?H.geometry:Bf(w),properties:w.properties,type:w.type,patterns:{}};this.hasPattern?this.features.push(DA("fill-extrusion",this.layers,Y,this.zoom,d)):this.addFeature(Y,Y.geometry,C,m,{}),d.featureIndex.insert(w,Y.geometry,C,O,this.index,!0)}}addFeatures(c,d,m){for(const w of this.features){const{geometry:E}=w;this.addFeature(w,E,w.index,d,m)}}update(c,d,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,d,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,QX),this.centroidVertexBuffer=c.createVertexBuffer(this.centroidVertexArray,JX.members,!0),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(c,d,m,w,E){for(const C of qa(d,500)){const O={x:0,y:0,vertexCount:0};let F=0;for(const xe of C)F+=xe.length;let H=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const xe of C){if(xe.length===0||cK(xe))continue;let Re=0;for(let He=0;He<xe.length;He++){const Ye=xe[He];if(He>=1){const yt=xe[He-1];if(!lK(Ye,yt)){H.vertexLength+4>Dn.MAX_VERTEX_ARRAY_LENGTH&&(H=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const st=Ye.sub(yt)._perp()._unit(),ut=yt.dist(Ye);Re+ut>32768&&(Re=0),l1(this.layoutVertexArray,Ye.x,Ye.y,st.x,st.y,0,0,Re),l1(this.layoutVertexArray,Ye.x,Ye.y,st.x,st.y,0,1,Re),O.x+=2*Ye.x,O.y+=2*Ye.y,O.vertexCount+=2,Re+=ut,l1(this.layoutVertexArray,yt.x,yt.y,st.x,st.y,0,0,Re),l1(this.layoutVertexArray,yt.x,yt.y,st.x,st.y,0,1,Re),O.x+=2*yt.x,O.y+=2*yt.y,O.vertexCount+=2;const kt=H.vertexLength;this.indexArray.emplaceBack(kt,kt+2,kt+1),this.indexArray.emplaceBack(kt+1,kt+2,kt+3),H.vertexLength+=4,H.primitiveLength+=2}}}}if(H.vertexLength+F>Dn.MAX_VERTEX_ARRAY_LENGTH&&(H=this.segments.prepareSegment(F,this.layoutVertexArray,this.indexArray)),aK[c.type]!=="Polygon")continue;const Y=[],te=[],he=H.vertexLength;for(const xe of C)if(xe.length!==0){xe!==C[0]&&te.push(Y.length/2);for(let Re=0;Re<xe.length;Re++){const He=xe[Re];l1(this.layoutVertexArray,He.x,He.y,0,0,1,1,0),O.x+=He.x,O.y+=He.y,O.vertexCount+=1,Y.push(He.x),Y.push(He.y)}}const _e=rM(Y,te);for(let xe=0;xe<_e.length;xe+=3)this.indexArray.emplaceBack(he+_e[xe],he+_e[xe+2],he+_e[xe+1]);H.primitiveLength+=_e.length/3,H.vertexLength+=F;for(let xe=0;xe<O.vertexCount;xe++){const Re=Math.floor(O.x/O.vertexCount),He=Math.floor(O.y/O.vertexCount);this.centroidVertexArray.emplaceBack(Re,He)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,m,E,w)}}function lK(u,c){return u.x===c.x&&(u.x<0||u.x>Fi)||u.y===c.y&&(u.y<0||u.y>Fi)}function cK(u){return u.every(c=>c.x<0)||u.every(c=>c.x>Fi)||u.every(c=>c.y<0)||u.every(c=>c.y>Fi)}let fM;Sr("FillExtrusionBucket",BA,{omit:["layers","features"]});var uK={get paint(){return fM=fM||new y({"fill-extrusion-opacity":new Rr(pe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new qr(pe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Rr(pe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Rr(pe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Nf(pe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new qr(pe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new qr(pe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Rr(pe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class hK extends h{constructor(c){super(c,uK)}createBucket(c){return new BA(c)}queryRadius(){return Ib(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(c,d,m,w,E,C,O,F){const H=Rb(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),C.angle,O),Y=this.paint.get("fill-extrusion-height").evaluate(d,m),te=this.paint.get("fill-extrusion-base").evaluate(d,m),he=function(xe,Re,He,Ye){const yt=[];for(const st of xe){const ut=[st.x,st.y,0,1];kb(ut,ut,Re),yt.push(new x(ut[0]/ut[3],ut[1]/ut[3]))}return yt}(H,F),_e=function(xe,Re,He,Ye){const yt=[],st=[],ut=Ye[8]*Re,kt=Ye[9]*Re,tr=Ye[10]*Re,xr=Ye[11]*Re,Xr=Ye[8]*He,vr=Ye[9]*He,gr=Ye[10]*He,Dr=Ye[11]*He;for(const Cr of xe){const Er=[],Bt=[];for(const Fr of Cr){const Mr=Fr.x,hn=Fr.y,Ri=Ye[0]*Mr+Ye[4]*hn+Ye[12],Ti=Ye[1]*Mr+Ye[5]*hn+Ye[13],Ls=Ye[2]*Mr+Ye[6]*hn+Ye[14],hu=Ye[3]*Mr+Ye[7]*hn+Ye[15],aa=Ls+tr,Fs=hu+xr,rl=Ri+Xr,nl=Ti+vr,il=Ls+gr,Po=hu+Dr,Bs=new x((Ri+ut)/Fs,(Ti+kt)/Fs);Bs.z=aa/Fs,Er.push(Bs);const Ia=new x(rl/Po,nl/Po);Ia.z=il/Po,Bt.push(Ia)}yt.push(Er),st.push(Bt)}return[yt,st]}(w,te,Y,F);return function(xe,Re,He){let Ye=1/0;cu(He,Re)&&(Ye=dM(He,Re[0]));for(let yt=0;yt<Re.length;yt++){const st=Re[yt],ut=xe[yt];for(let kt=0;kt<st.length-1;kt++){const tr=st[kt],xr=[tr,st[kt+1],ut[kt+1],ut[kt],tr];$m(He,xr)&&(Ye=Math.min(Ye,dM(He,xr)))}}return Ye!==1/0&&Ye}(_e[0],_e[1],he)}}function c1(u,c){return u.x*c.x+u.y*c.y}function dM(u,c){if(u.length===1){let d=0;const m=c[d++];let w;for(;!w||m.equals(w);)if(w=c[d++],!w)return 1/0;for(;d<c.length;d++){const E=c[d],C=u[0],O=w.sub(m),F=E.sub(m),H=C.sub(m),Y=c1(O,O),te=c1(O,F),he=c1(F,F),_e=c1(H,O),xe=c1(H,F),Re=Y*he-te*te,He=(he*_e-te*xe)/Re,Ye=(Y*xe-te*_e)/Re,yt=m.z*(1-He-Ye)+w.z*He+E.z*Ye;if(isFinite(yt))return yt}return 1/0}{let d=1/0;for(const m of c)d=Math.min(d,m.z);return d}}const fK=P([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:dK}=fK,pK=P([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:gK}=pK,mK=Md.VectorTileFeature.types,yK=Math.cos(Math.PI/180*37.5),pM=Math.pow(2,14)/.5;class zA{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(d=>d.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(d=>{this.gradients[d.id]={}}),this.layoutVertexArray=new Li,this.layoutVertexArray2=new su,this.indexArray=new Ns,this.programConfigurations=new Oh(c.layers,c.zoom),this.segments=new Dn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(c,d,m){this.hasPattern=NA("line",this.layers,d);const w=this.layers[0].layout.get("line-sort-key"),E=!w.isConstant(),C=[];for(const{feature:O,id:F,index:H,sourceLayerIndex:Y}of c){const te=this.layers[0]._featureFilter.needGeometry,he=Nh(O,te);if(!this.layers[0]._featureFilter.filter(new Ai(this.zoom),he,m))continue;const _e=E?w.evaluate(he,{},m):void 0,xe={id:F,properties:O.properties,type:O.type,sourceLayerIndex:Y,index:H,geometry:te?he.geometry:Bf(O),patterns:{},sortKey:_e};C.push(xe)}E&&C.sort((O,F)=>O.sortKey-F.sortKey);for(const O of C){const{geometry:F,index:H,sourceLayerIndex:Y}=O;if(this.hasPattern){const te=DA("line",this.layers,O,this.zoom,d);this.patternFeatures.push(te)}else this.addFeature(O,F,H,m,{});d.featureIndex.insert(c[H].feature,F,H,Y,this.index)}}update(c,d,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,d,this.stateDependentLayers,m)}addFeatures(c,d,m){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,d,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=c.createVertexBuffer(this.layoutVertexArray2,gK)),this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,dK),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(c){if(c.properties&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_end"))return{start:+c.properties.mapbox_clip_start,end:+c.properties.mapbox_clip_end}}addFeature(c,d,m,w,E){const C=this.layers[0].layout,O=C.get("line-join").evaluate(c,{}),F=C.get("line-cap"),H=C.get("line-miter-limit"),Y=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(c);for(const te of d)this.addLine(te,c,O,F,H,Y);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,m,E,w)}addLine(c,d,m,w,E,C){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ye=0;Ye<c.length-1;Ye++)this.totalDistance+=c[Ye].dist(c[Ye+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const O=mK[d.type]==="Polygon";let F=c.length;for(;F>=2&&c[F-1].equals(c[F-2]);)F--;let H=0;for(;H<F-1&&c[H].equals(c[H+1]);)H++;if(F<(O?3:2))return;m==="bevel"&&(E=1.05);const Y=this.overscaling<=16?15*Fi/(512*this.overscaling):0,te=this.segments.prepareSegment(10*F,this.layoutVertexArray,this.indexArray);let he,_e,xe,Re,He;this.e1=this.e2=-1,O&&(he=c[F-2],He=c[H].sub(he)._unit()._perp());for(let Ye=H;Ye<F;Ye++){if(xe=Ye===F-1?O?c[H+1]:void 0:c[Ye+1],xe&&c[Ye].equals(xe))continue;He&&(Re=He),he&&(_e=he),he=c[Ye],He=xe?xe.sub(he)._unit()._perp():Re,Re=Re||He;let yt=Re.add(He);yt.x===0&&yt.y===0||yt._unit();const st=Re.x*He.x+Re.y*He.y,ut=yt.x*He.x+yt.y*He.y,kt=ut!==0?1/ut:1/0,tr=2*Math.sqrt(2-2*ut),xr=ut<yK&&_e&&xe,Xr=Re.x*He.y-Re.y*He.x>0;if(xr&&Ye>H){const Dr=he.dist(_e);if(Dr>2*Y){const Cr=he.sub(he.sub(_e)._mult(Y/Dr)._round());this.updateDistance(_e,Cr),this.addCurrentVertex(Cr,Re,0,0,te),_e=Cr}}const vr=_e&&xe;let gr=vr?m:O?"butt":w;if(vr&&gr==="round"&&(kt<C?gr="miter":kt<=2&&(gr="fakeround")),gr==="miter"&&kt>E&&(gr="bevel"),gr==="bevel"&&(kt>2&&(gr="flipbevel"),kt<E&&(gr="miter")),_e&&this.updateDistance(_e,he),gr==="miter")yt._mult(kt),this.addCurrentVertex(he,yt,0,0,te);else if(gr==="flipbevel"){if(kt>100)yt=He.mult(-1);else{const Dr=kt*Re.add(He).mag()/Re.sub(He).mag();yt._perp()._mult(Dr*(Xr?-1:1))}this.addCurrentVertex(he,yt,0,0,te),this.addCurrentVertex(he,yt.mult(-1),0,0,te)}else if(gr==="bevel"||gr==="fakeround"){const Dr=-Math.sqrt(kt*kt-1),Cr=Xr?Dr:0,Er=Xr?0:Dr;if(_e&&this.addCurrentVertex(he,Re,Cr,Er,te),gr==="fakeround"){const Bt=Math.round(180*tr/Math.PI/20);for(let Fr=1;Fr<Bt;Fr++){let Mr=Fr/Bt;if(Mr!==.5){const Ri=Mr-.5;Mr+=Mr*Ri*(Mr-1)*((1.0904+st*(st*(3.55645-1.43519*st)-3.2452))*Ri*Ri+(.848013+st*(.215638*st-1.06021)))}const hn=He.sub(Re)._mult(Mr)._add(Re)._unit()._mult(Xr?-1:1);this.addHalfVertex(he,hn.x,hn.y,!1,Xr,0,te)}}xe&&this.addCurrentVertex(he,He,-Cr,-Er,te)}else if(gr==="butt")this.addCurrentVertex(he,yt,0,0,te);else if(gr==="square"){const Dr=_e?1:-1;this.addCurrentVertex(he,yt,Dr,Dr,te)}else gr==="round"&&(_e&&(this.addCurrentVertex(he,Re,0,0,te),this.addCurrentVertex(he,Re,1,1,te,!0)),xe&&(this.addCurrentVertex(he,He,-1,-1,te,!0),this.addCurrentVertex(he,He,0,0,te)));if(xr&&Ye<F-1){const Dr=he.dist(xe);if(Dr>2*Y){const Cr=he.add(xe.sub(he)._mult(Y/Dr)._round());this.updateDistance(he,Cr),this.addCurrentVertex(Cr,He,0,0,te),he=Cr}}}}addCurrentVertex(c,d,m,w,E,C=!1){const O=d.y*w-d.x,F=-d.y-d.x*w;this.addHalfVertex(c,d.x+d.y*m,d.y-d.x*m,C,!1,m,E),this.addHalfVertex(c,O,F,C,!0,-w,E),this.distance>pM/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(c,d,m,w,E,C))}addHalfVertex({x:c,y:d},m,w,E,C,O,F){const H=.5*(this.lineClips?this.scaledDistance*(pM-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((c<<1)+(E?1:0),(d<<1)+(C?1:0),Math.round(63*m)+128,Math.round(63*w)+128,1+(O===0?0:O<0?-1:1)|(63&H)<<2,H>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Y=F.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Y),F.primitiveLength++),C?this.e2=Y:this.e1=Y}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(c,d){this.distance+=c.dist(d),this.updateScaledDistance()}}let gM,mM;Sr("LineBucket",zA,{omit:["layers","patternFeatures"]});var yM={get paint(){return mM=mM||new y({"line-opacity":new qr(pe.paint_line["line-opacity"]),"line-color":new qr(pe.paint_line["line-color"]),"line-translate":new Rr(pe.paint_line["line-translate"]),"line-translate-anchor":new Rr(pe.paint_line["line-translate-anchor"]),"line-width":new qr(pe.paint_line["line-width"]),"line-gap-width":new qr(pe.paint_line["line-gap-width"]),"line-offset":new qr(pe.paint_line["line-offset"]),"line-blur":new qr(pe.paint_line["line-blur"]),"line-dasharray":new T(pe.paint_line["line-dasharray"]),"line-pattern":new Nf(pe.paint_line["line-pattern"]),"line-gradient":new M(pe.paint_line["line-gradient"])})},get layout(){return gM=gM||new y({"line-cap":new Rr(pe.layout_line["line-cap"]),"line-join":new qr(pe.layout_line["line-join"]),"line-miter-limit":new Rr(pe.layout_line["line-miter-limit"]),"line-round-limit":new Rr(pe.layout_line["line-round-limit"]),"line-sort-key":new qr(pe.layout_line["line-sort-key"])})}};class _K extends qr{possiblyEvaluate(c,d){return d=new Ai(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),super.possiblyEvaluate(c,d)}evaluate(c,d,m,w){return d=Q({},d,{zoom:Math.floor(d.zoom)}),super.evaluate(c,d,m,w)}}let Db;class vK extends h{constructor(c){super(c,yM),this.gradientVersion=0,Db||(Db=new _K(yM.paint.properties["line-width"].specification),Db.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(c){if(c==="line-gradient"){const d=this.gradientExpression();this.stepInterpolant=!!function(m){return m._styleExpression!==void 0}(d)&&d._styleExpression.expression instanceof ft,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(c,d){super.recalculate(c,d),this.paint._values["line-floorwidth"]=Db.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new zA(c)}queryRadius(c){const d=c,m=_M(r1("line-width",this,d),r1("line-gap-width",this,d)),w=r1("line-offset",this,d);return m/2+Math.abs(w)+Ib(this.paint.get("line-translate"))}queryIntersectsFeature(c,d,m,w,E,C,O){const F=Rb(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),C.angle,O),H=O/2*_M(this.paint.get("line-width").evaluate(d,m),this.paint.get("line-gap-width").evaluate(d,m)),Y=this.paint.get("line-offset").evaluate(d,m);return Y&&(w=function(te,he){const _e=[];for(let xe=0;xe<te.length;xe++){const Re=te[xe],He=[];for(let Ye=0;Ye<Re.length;Ye++){const yt=Re[Ye-1],st=Re[Ye],ut=Re[Ye+1],kt=Ye===0?new x(0,0):st.sub(yt)._unit()._perp(),tr=Ye===Re.length-1?new x(0,0):ut.sub(st)._unit()._perp(),xr=kt._add(tr)._unit(),Xr=xr.x*tr.x+xr.y*tr.y;Xr!==0&&xr._mult(1/Xr),He.push(xr._mult(he)._add(st))}_e.push(He)}return _e}(w,Y*O)),function(te,he,_e){for(let xe=0;xe<he.length;xe++){const Re=he[xe];if(te.length>=3){for(let He=0;He<Re.length;He++)if(Lh(te,Re[He]))return!0}if(Dh(te,Re,_e))return!0}return!1}(F,w,H)}isTileClipped(){return!0}}function _M(u,c){return c>0?c+2*u:u}const bK=P([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),xK=P([{name:"a_projected_pos",components:3,type:"Float32"}],4);P([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const wK=P([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);P([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const vM=P([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),SK=P([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function AK(u,c,d){return u.sections.forEach(m=>{m.text=function(w,E,C){const O=E.layout.get("text-transform").evaluate(C,{});return O==="uppercase"?w=w.toLocaleUpperCase():O==="lowercase"&&(w=w.toLocaleLowerCase()),Ea.applyArabicShaping&&(w=Ea.applyArabicShaping(w)),w}(m.text,c,d)}),u}P([{name:"triangle",components:3,type:"Uint16"}]),P([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),P([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),P([{type:"Float32",name:"offsetX"}]),P([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),P([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const u1={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var ms=24,bM=Ei,xM=function(u,c,d,m,w){var E,C,O=8*w-m-1,F=(1<<O)-1,H=F>>1,Y=-7,te=w-1,he=-1,_e=u[c+te];for(te+=he,E=_e&(1<<-Y)-1,_e>>=-Y,Y+=O;Y>0;E=256*E+u[c+te],te+=he,Y-=8);for(C=E&(1<<-Y)-1,E>>=-Y,Y+=m;Y>0;C=256*C+u[c+te],te+=he,Y-=8);if(E===0)E=1-H;else{if(E===F)return C?NaN:1/0*(_e?-1:1);C+=Math.pow(2,m),E-=H}return(_e?-1:1)*C*Math.pow(2,E-m)},wM=function(u,c,d,m,w,E){var C,O,F,H=8*E-w-1,Y=(1<<H)-1,te=Y>>1,he=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,_e=0,xe=1,Re=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(O=isNaN(c)?1:0,C=Y):(C=Math.floor(Math.log(c)/Math.LN2),c*(F=Math.pow(2,-C))<1&&(C--,F*=2),(c+=C+te>=1?he/F:he*Math.pow(2,1-te))*F>=2&&(C++,F/=2),C+te>=Y?(O=0,C=Y):C+te>=1?(O=(c*F-1)*Math.pow(2,w),C+=te):(O=c*Math.pow(2,te-1)*Math.pow(2,w),C=0));w>=8;u[d+_e]=255&O,_e+=xe,O/=256,w-=8);for(C=C<<w|O,H+=w;H>0;u[d+_e]=255&C,_e+=xe,C/=256,H-=8);u[d+_e-xe]|=128*Re};function Ei(u){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(u)?u:new Uint8Array(u||0),this.pos=0,this.type=0,this.length=this.buf.length}Ei.Varint=0,Ei.Fixed64=1,Ei.Bytes=2,Ei.Fixed32=5;var $A=4294967296,SM=1/$A,AM=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function $f(u){return u.type===Ei.Bytes?u.readVarint()+u.pos:u.pos+1}function Wm(u,c,d){return d?4294967296*c+(u>>>0):4294967296*(c>>>0)+(u>>>0)}function EM(u,c,d){var m=c<=16383?1:c<=2097151?2:c<=268435455?3:Math.floor(Math.log(c)/(7*Math.LN2));d.realloc(m);for(var w=d.pos-1;w>=u;w--)d.buf[w+m]=d.buf[w]}function EK(u,c){for(var d=0;d<u.length;d++)c.writeVarint(u[d])}function TK(u,c){for(var d=0;d<u.length;d++)c.writeSVarint(u[d])}function CK(u,c){for(var d=0;d<u.length;d++)c.writeFloat(u[d])}function PK(u,c){for(var d=0;d<u.length;d++)c.writeDouble(u[d])}function IK(u,c){for(var d=0;d<u.length;d++)c.writeBoolean(u[d])}function RK(u,c){for(var d=0;d<u.length;d++)c.writeFixed32(u[d])}function kK(u,c){for(var d=0;d<u.length;d++)c.writeSFixed32(u[d])}function MK(u,c){for(var d=0;d<u.length;d++)c.writeFixed64(u[d])}function OK(u,c){for(var d=0;d<u.length;d++)c.writeSFixed64(u[d])}function Lb(u,c){return(u[c]|u[c+1]<<8|u[c+2]<<16)+16777216*u[c+3]}function Xm(u,c,d){u[d]=c,u[d+1]=c>>>8,u[d+2]=c>>>16,u[d+3]=c>>>24}function TM(u,c){return(u[c]|u[c+1]<<8|u[c+2]<<16)+(u[c+3]<<24)}Ei.prototype={destroy:function(){this.buf=null},readFields:function(u,c,d){for(d=d||this.length;this.pos<d;){var m=this.readVarint(),w=m>>3,E=this.pos;this.type=7&m,u(w,c,this),this.pos===E&&this.skip(m)}return c},readMessage:function(u,c){return this.readFields(u,c,this.readVarint()+this.pos)},readFixed32:function(){var u=Lb(this.buf,this.pos);return this.pos+=4,u},readSFixed32:function(){var u=TM(this.buf,this.pos);return this.pos+=4,u},readFixed64:function(){var u=Lb(this.buf,this.pos)+Lb(this.buf,this.pos+4)*$A;return this.pos+=8,u},readSFixed64:function(){var u=Lb(this.buf,this.pos)+TM(this.buf,this.pos+4)*$A;return this.pos+=8,u},readFloat:function(){var u=xM(this.buf,this.pos,!0,23,4);return this.pos+=4,u},readDouble:function(){var u=xM(this.buf,this.pos,!0,52,8);return this.pos+=8,u},readVarint:function(u){var c,d,m=this.buf;return c=127&(d=m[this.pos++]),d<128?c:(c|=(127&(d=m[this.pos++]))<<7,d<128?c:(c|=(127&(d=m[this.pos++]))<<14,d<128?c:(c|=(127&(d=m[this.pos++]))<<21,d<128?c:function(w,E,C){var O,F,H=C.buf;if(O=(112&(F=H[C.pos++]))>>4,F<128||(O|=(127&(F=H[C.pos++]))<<3,F<128)||(O|=(127&(F=H[C.pos++]))<<10,F<128)||(O|=(127&(F=H[C.pos++]))<<17,F<128)||(O|=(127&(F=H[C.pos++]))<<24,F<128)||(O|=(1&(F=H[C.pos++]))<<31,F<128))return Wm(w,O,E);throw new Error("Expected varint not more than 10 bytes")}(c|=(15&(d=m[this.pos]))<<28,u,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var u=this.readVarint();return u%2==1?(u+1)/-2:u/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var u=this.readVarint()+this.pos,c=this.pos;return this.pos=u,u-c>=12&&AM?function(d,m,w){return AM.decode(d.subarray(m,w))}(this.buf,c,u):function(d,m,w){for(var E="",C=m;C<w;){var O,F,H,Y=d[C],te=null,he=Y>239?4:Y>223?3:Y>191?2:1;if(C+he>w)break;he===1?Y<128&&(te=Y):he===2?(192&(O=d[C+1]))==128&&(te=(31&Y)<<6|63&O)<=127&&(te=null):he===3?(F=d[C+2],(192&(O=d[C+1]))==128&&(192&F)==128&&((te=(15&Y)<<12|(63&O)<<6|63&F)<=2047||te>=55296&&te<=57343)&&(te=null)):he===4&&(F=d[C+2],H=d[C+3],(192&(O=d[C+1]))==128&&(192&F)==128&&(192&H)==128&&((te=(15&Y)<<18|(63&O)<<12|(63&F)<<6|63&H)<=65535||te>=1114112)&&(te=null)),te===null?(te=65533,he=1):te>65535&&(te-=65536,E+=String.fromCharCode(te>>>10&1023|55296),te=56320|1023&te),E+=String.fromCharCode(te),C+=he}return E}(this.buf,c,u)},readBytes:function(){var u=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,u);return this.pos=u,c},readPackedVarint:function(u,c){if(this.type!==Ei.Bytes)return u.push(this.readVarint(c));var d=$f(this);for(u=u||[];this.pos<d;)u.push(this.readVarint(c));return u},readPackedSVarint:function(u){if(this.type!==Ei.Bytes)return u.push(this.readSVarint());var c=$f(this);for(u=u||[];this.pos<c;)u.push(this.readSVarint());return u},readPackedBoolean:function(u){if(this.type!==Ei.Bytes)return u.push(this.readBoolean());var c=$f(this);for(u=u||[];this.pos<c;)u.push(this.readBoolean());return u},readPackedFloat:function(u){if(this.type!==Ei.Bytes)return u.push(this.readFloat());var c=$f(this);for(u=u||[];this.pos<c;)u.push(this.readFloat());return u},readPackedDouble:function(u){if(this.type!==Ei.Bytes)return u.push(this.readDouble());var c=$f(this);for(u=u||[];this.pos<c;)u.push(this.readDouble());return u},readPackedFixed32:function(u){if(this.type!==Ei.Bytes)return u.push(this.readFixed32());var c=$f(this);for(u=u||[];this.pos<c;)u.push(this.readFixed32());return u},readPackedSFixed32:function(u){if(this.type!==Ei.Bytes)return u.push(this.readSFixed32());var c=$f(this);for(u=u||[];this.pos<c;)u.push(this.readSFixed32());return u},readPackedFixed64:function(u){if(this.type!==Ei.Bytes)return u.push(this.readFixed64());var c=$f(this);for(u=u||[];this.pos<c;)u.push(this.readFixed64());return u},readPackedSFixed64:function(u){if(this.type!==Ei.Bytes)return u.push(this.readSFixed64());var c=$f(this);for(u=u||[];this.pos<c;)u.push(this.readSFixed64());return u},skip:function(u){var c=7&u;if(c===Ei.Varint)for(;this.buf[this.pos++]>127;);else if(c===Ei.Bytes)this.pos=this.readVarint()+this.pos;else if(c===Ei.Fixed32)this.pos+=4;else{if(c!==Ei.Fixed64)throw new Error("Unimplemented type: "+c);this.pos+=8}},writeTag:function(u,c){this.writeVarint(u<<3|c)},realloc:function(u){for(var c=this.length||16;c<this.pos+u;)c*=2;if(c!==this.length){var d=new Uint8Array(c);d.set(this.buf),this.buf=d,this.length=c}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(u){this.realloc(4),Xm(this.buf,u,this.pos),this.pos+=4},writeSFixed32:function(u){this.realloc(4),Xm(this.buf,u,this.pos),this.pos+=4},writeFixed64:function(u){this.realloc(8),Xm(this.buf,-1&u,this.pos),Xm(this.buf,Math.floor(u*SM),this.pos+4),this.pos+=8},writeSFixed64:function(u){this.realloc(8),Xm(this.buf,-1&u,this.pos),Xm(this.buf,Math.floor(u*SM),this.pos+4),this.pos+=8},writeVarint:function(u){(u=+u||0)>268435455||u<0?function(c,d){var m,w;if(c>=0?(m=c%4294967296|0,w=c/4294967296|0):(w=~(-c/4294967296),4294967295^(m=~(-c%4294967296))?m=m+1|0:(m=0,w=w+1|0)),c>=18446744073709552e3||c<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),function(E,C,O){O.buf[O.pos++]=127&E|128,E>>>=7,O.buf[O.pos++]=127&E|128,E>>>=7,O.buf[O.pos++]=127&E|128,E>>>=7,O.buf[O.pos++]=127&E|128,O.buf[O.pos]=127&(E>>>=7)}(m,0,d),function(E,C){var O=(7&E)<<4;C.buf[C.pos++]|=O|((E>>>=3)?128:0),E&&(C.buf[C.pos++]=127&E|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=127&E|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=127&E|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=127&E|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=127&E)))))}(w,d)}(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(u){this.writeVarint(u<0?2*-u-1:2*u)},writeBoolean:function(u){this.writeVarint(!!u)},writeString:function(u){u=String(u),this.realloc(4*u.length),this.pos++;var c=this.pos;this.pos=function(m,w,E){for(var C,O,F=0;F<w.length;F++){if((C=w.charCodeAt(F))>55295&&C<57344){if(!O){C>56319||F+1===w.length?(m[E++]=239,m[E++]=191,m[E++]=189):O=C;continue}if(C<56320){m[E++]=239,m[E++]=191,m[E++]=189,O=C;continue}C=O-55296<<10|C-56320|65536,O=null}else O&&(m[E++]=239,m[E++]=191,m[E++]=189,O=null);C<128?m[E++]=C:(C<2048?m[E++]=C>>6|192:(C<65536?m[E++]=C>>12|224:(m[E++]=C>>18|240,m[E++]=C>>12&63|128),m[E++]=C>>6&63|128),m[E++]=63&C|128)}return E}(this.buf,u,this.pos);var d=this.pos-c;d>=128&&EM(c,d,this),this.pos=c-1,this.writeVarint(d),this.pos+=d},writeFloat:function(u){this.realloc(4),wM(this.buf,u,this.pos,!0,23,4),this.pos+=4},writeDouble:function(u){this.realloc(8),wM(this.buf,u,this.pos,!0,52,8),this.pos+=8},writeBytes:function(u){var c=u.length;this.writeVarint(c),this.realloc(c);for(var d=0;d<c;d++)this.buf[this.pos++]=u[d]},writeRawMessage:function(u,c){this.pos++;var d=this.pos;u(c,this);var m=this.pos-d;m>=128&&EM(d,m,this),this.pos=d-1,this.writeVarint(m),this.pos+=m},writeMessage:function(u,c,d){this.writeTag(u,Ei.Bytes),this.writeRawMessage(c,d)},writePackedVarint:function(u,c){c.length&&this.writeMessage(u,EK,c)},writePackedSVarint:function(u,c){c.length&&this.writeMessage(u,TK,c)},writePackedBoolean:function(u,c){c.length&&this.writeMessage(u,IK,c)},writePackedFloat:function(u,c){c.length&&this.writeMessage(u,CK,c)},writePackedDouble:function(u,c){c.length&&this.writeMessage(u,PK,c)},writePackedFixed32:function(u,c){c.length&&this.writeMessage(u,RK,c)},writePackedSFixed32:function(u,c){c.length&&this.writeMessage(u,kK,c)},writePackedFixed64:function(u,c){c.length&&this.writeMessage(u,MK,c)},writePackedSFixed64:function(u,c){c.length&&this.writeMessage(u,OK,c)},writeBytesField:function(u,c){this.writeTag(u,Ei.Bytes),this.writeBytes(c)},writeFixed32Field:function(u,c){this.writeTag(u,Ei.Fixed32),this.writeFixed32(c)},writeSFixed32Field:function(u,c){this.writeTag(u,Ei.Fixed32),this.writeSFixed32(c)},writeFixed64Field:function(u,c){this.writeTag(u,Ei.Fixed64),this.writeFixed64(c)},writeSFixed64Field:function(u,c){this.writeTag(u,Ei.Fixed64),this.writeSFixed64(c)},writeVarintField:function(u,c){this.writeTag(u,Ei.Varint),this.writeVarint(c)},writeSVarintField:function(u,c){this.writeTag(u,Ei.Varint),this.writeSVarint(c)},writeStringField:function(u,c){this.writeTag(u,Ei.Bytes),this.writeString(c)},writeFloatField:function(u,c){this.writeTag(u,Ei.Fixed32),this.writeFloat(c)},writeDoubleField:function(u,c){this.writeTag(u,Ei.Fixed64),this.writeDouble(c)},writeBooleanField:function(u,c){this.writeVarintField(u,!!c)}};var UA=f(bM);const jA=3;function NK(u,c,d){u===1&&d.readMessage(DK,c)}function DK(u,c,d){if(u===3){const{id:m,bitmap:w,width:E,height:C,left:O,top:F,advance:H}=d.readMessage(LK,{});c.push({id:m,bitmap:new i1({width:E+2*jA,height:C+2*jA},w),metrics:{width:E,height:C,left:O,top:F,advance:H}})}}function LK(u,c,d){u===1?c.id=d.readVarint():u===2?c.bitmap=d.readBytes():u===3?c.width=d.readVarint():u===4?c.height=d.readVarint():u===5?c.left=d.readSVarint():u===6?c.top=d.readSVarint():u===7&&(c.advance=d.readVarint())}const CM=jA;function PM(u){let c=0,d=0;for(const C of u)c+=C.w*C.h,d=Math.max(d,C.w);u.sort((C,O)=>O.h-C.h);const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),d),h:1/0}];let w=0,E=0;for(const C of u)for(let O=m.length-1;O>=0;O--){const F=m[O];if(!(C.w>F.w||C.h>F.h)){if(C.x=F.x,C.y=F.y,E=Math.max(E,C.y+C.h),w=Math.max(w,C.x+C.w),C.w===F.w&&C.h===F.h){const H=m.pop();O<m.length&&(m[O]=H)}else C.h===F.h?(F.x+=C.w,F.w-=C.w):C.w===F.w?(F.y+=C.h,F.h-=C.h):(m.push({x:F.x+C.w,y:F.y,w:F.w-C.w,h:C.h}),F.y+=C.h,F.h-=C.h);break}}return{w,h:E,fill:c/(w*E)||0}}const Tl=1;class VA{constructor(c,{pixelRatio:d,version:m,stretchX:w,stretchY:E,content:C,textFitWidth:O,textFitHeight:F}){this.paddedRect=c,this.pixelRatio=d,this.stretchX=w,this.stretchY=E,this.content=C,this.version=m,this.textFitWidth=O,this.textFitHeight=F}get tl(){return[this.paddedRect.x+Tl,this.paddedRect.y+Tl]}get br(){return[this.paddedRect.x+this.paddedRect.w-Tl,this.paddedRect.y+this.paddedRect.h-Tl]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Tl)/this.pixelRatio,(this.paddedRect.h-2*Tl)/this.pixelRatio]}}class IM{constructor(c,d){const m={},w={};this.haveRenderCallbacks=[];const E=[];this.addImages(c,m,E),this.addImages(d,w,E);const{w:C,h:O}=PM(E),F=new Rc({width:C||1,height:O||1});for(const H in c){const Y=c[H],te=m[H].paddedRect;Rc.copy(Y.data,F,{x:0,y:0},{x:te.x+Tl,y:te.y+Tl},Y.data)}for(const H in d){const Y=d[H],te=w[H].paddedRect,he=te.x+Tl,_e=te.y+Tl,xe=Y.data.width,Re=Y.data.height;Rc.copy(Y.data,F,{x:0,y:0},{x:he,y:_e},Y.data),Rc.copy(Y.data,F,{x:0,y:Re-1},{x:he,y:_e-1},{width:xe,height:1}),Rc.copy(Y.data,F,{x:0,y:0},{x:he,y:_e+Re},{width:xe,height:1}),Rc.copy(Y.data,F,{x:xe-1,y:0},{x:he-1,y:_e},{width:1,height:Re}),Rc.copy(Y.data,F,{x:0,y:0},{x:he+xe,y:_e},{width:1,height:Re})}this.image=F,this.iconPositions=m,this.patternPositions=w}addImages(c,d,m){for(const w in c){const E=c[w],C={x:0,y:0,w:E.data.width+2*Tl,h:E.data.height+2*Tl};m.push(C),d[w]=new VA(C,E),E.hasRenderCallback&&this.haveRenderCallbacks.push(w)}}patchUpdatedImages(c,d){c.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in c.updatedImages)this.patchUpdatedImage(this.iconPositions[m],c.getImage(m),d),this.patchUpdatedImage(this.patternPositions[m],c.getImage(m),d)}patchUpdatedImage(c,d,m){if(!c||!d||c.version===d.version)return;c.version=d.version;const[w,E]=c.tl;m.update(d.data,void 0,{x:w,y:E})}}var Od;Sr("ImagePosition",VA),Sr("ImageAtlas",IM),l.ah=void 0,(Od=l.ah||(l.ah={}))[Od.none=0]="none",Od[Od.horizontal=1]="horizontal",Od[Od.vertical=2]="vertical",Od[Od.horizontalOnly=3]="horizontalOnly";const h1=-17;class f1{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(c,d){const m=new f1;return m.scale=c||1,m.fontStack=d,m}static forImage(c){const d=new f1;return d.imageName=c,d}}class Km{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(c,d){const m=new Km;for(let w=0;w<c.sections.length;w++){const E=c.sections[w];E.image?m.addImageSection(E):m.addTextSection(E,d)}return m}length(){return this.text.length}getSection(c){return this.sections[this.sectionIndex[c]]}getSectionIndex(c){return this.sectionIndex[c]}getCharCode(c){return this.text.charCodeAt(c)}verticalizePunctuation(){this.text=function(c){let d="";for(let m=0;m<c.length;m++){const w=c.charCodeAt(m+1)||null,E=c.charCodeAt(m-1)||null;d+=w&&kf(w)&&!u1[c[m+1]]||E&&kf(E)&&!u1[c[m-1]]||!u1[c[m]]?c[m]:u1[c[m]]}return d}(this.text)}trim(){let c=0;for(let m=0;m<this.text.length&&Bb[this.text.charCodeAt(m)];m++)c++;let d=this.text.length;for(let m=this.text.length-1;m>=0&&m>=c&&Bb[this.text.charCodeAt(m)];m--)d--;this.text=this.text.substring(c,d),this.sectionIndex=this.sectionIndex.slice(c,d)}substring(c,d){const m=new Km;return m.text=this.text.substring(c,d),m.sectionIndex=this.sectionIndex.slice(c,d),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((c,d)=>Math.max(c,this.sections[d].scale),0)}addTextSection(c,d){this.text+=c.text,this.sections.push(f1.forText(c.scale,c.fontStack||d));const m=this.sections.length-1;for(let w=0;w<c.text.length;++w)this.sectionIndex.push(m)}addImageSection(c){const d=c.image?c.image.name:"";if(d.length===0)return void ve("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(f1.forImage(d)),this.sectionIndex.push(this.sections.length-1)):ve("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Fb(u,c,d,m,w,E,C,O,F,H,Y,te,he,_e,xe){const Re=Km.fromFeature(u,w);let He;te===l.ah.vertical&&Re.verticalizePunctuation();const{processBidirectionalText:Ye,processStyledBidirectionalText:yt}=Ea;if(Ye&&Re.sections.length===1){He=[];const kt=Ye(Re.toString(),HA(Re,H,E,c,m,_e));for(const tr of kt){const xr=new Km;xr.text=tr,xr.sections=Re.sections;for(let Xr=0;Xr<tr.length;Xr++)xr.sectionIndex.push(0);He.push(xr)}}else if(yt){He=[];const kt=yt(Re.text,Re.sectionIndex,HA(Re,H,E,c,m,_e));for(const tr of kt){const xr=new Km;xr.text=tr[0],xr.sectionIndex=tr[1],xr.sections=Re.sections,He.push(xr)}}else He=function(kt,tr){const xr=[],Xr=kt.text;let vr=0;for(const gr of tr)xr.push(kt.substring(vr,gr)),vr=gr;return vr<Xr.length&&xr.push(kt.substring(vr,Xr.length)),xr}(Re,HA(Re,H,E,c,m,_e));const st=[],ut={positionedLines:st,text:Re.toString(),top:Y[1],bottom:Y[1],left:Y[0],right:Y[0],writingMode:te,iconsInText:!1,verticalizable:!1};return function(kt,tr,xr,Xr,vr,gr,Dr,Cr,Er,Bt,Fr,Mr){let hn=0,Ri=h1,Ti=0,Ls=0;const hu=Cr==="right"?1:Cr==="left"?0:.5;let aa=0;for(const Po of vr){Po.trim();const Bs=Po.getMaxScale(),Ia=(Bs-1)*ms,la={positionedGlyphs:[],lineOffset:0};kt.positionedLines[aa]=la;const ol=la.positionedGlyphs;let ca=0;if(!Po.length()){Ri+=gr,++aa;continue}for(let Cl=0;Cl<Po.length();Cl++){const Qn=Po.getSection(Cl),Bi=Po.getSectionIndex(Cl),Xi=Po.getCharCode(Cl);let ec=0,xo=null,Jm=null,Bh=null,zh=ms;const fu=!(Er===l.ah.horizontal||!Fr&&!Zp(Xi)||Fr&&(Bb[Xi]||(Fs=Xi,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Fs)))));if(Qn.imageName){const Oc=Xr[Qn.imageName];if(!Oc)continue;Bh=Qn.imageName,kt.iconsInText=kt.iconsInText||!0,Jm=Oc.paddedRect;const Gs=Oc.displaySize;Qn.scale=Qn.scale*ms/Mr,xo={width:Gs[0],height:Gs[1],left:Tl,top:-CM,advance:fu?Gs[1]:Gs[0]},ec=Ia+(ms-Gs[1]*Qn.scale),zh=xo.advance;const Uf=fu?Gs[0]*Qn.scale-ms*Bs:Gs[1]*Qn.scale-ms*Bs;Uf>0&&Uf>ca&&(ca=Uf)}else{const Oc=xr[Qn.fontStack],Gs=Oc&&Oc[Xi];if(Gs&&Gs.rect)Jm=Gs.rect,xo=Gs.metrics;else{const Uf=tr[Qn.fontStack],_1=Uf&&Uf[Xi];if(!_1)continue;xo=_1.metrics}ec=(Bs-Qn.scale)*ms}fu?(kt.verticalizable=!0,ol.push({glyph:Xi,imageName:Bh,x:hn,y:Ri+ec,vertical:fu,scale:Qn.scale,fontStack:Qn.fontStack,sectionIndex:Bi,metrics:xo,rect:Jm}),hn+=zh*Qn.scale+Bt):(ol.push({glyph:Xi,imageName:Bh,x:hn,y:Ri+ec,vertical:fu,scale:Qn.scale,fontStack:Qn.fontStack,sectionIndex:Bi,metrics:xo,rect:Jm}),hn+=xo.advance*Qn.scale+Bt)}ol.length!==0&&(Ti=Math.max(hn-Bt,Ti),$K(ol,0,ol.length-1,hu,ca)),hn=0;const Mc=gr*Bs+ca;la.lineOffset=Math.max(ca,Ia),Ri+=Mc,Ls=Math.max(Mc,Ls),++aa}var Fs;const rl=Ri-h1,{horizontalAlign:nl,verticalAlign:il}=qA(Dr);(function(Po,Bs,Ia,la,ol,ca,Mc,Cl,Qn){const Bi=(Bs-Ia)*ol;let Xi=0;Xi=ca!==Mc?-Cl*la-h1:(-la*Qn+.5)*Mc;for(const ec of Po)for(const xo of ec.positionedGlyphs)xo.x+=Bi,xo.y+=Xi})(kt.positionedLines,hu,nl,il,Ti,Ls,gr,rl,vr.length),kt.top+=-il*rl,kt.bottom=kt.top+rl,kt.left+=-nl*Ti,kt.right=kt.left+Ti}(ut,c,d,m,He,C,O,F,te,H,he,xe),!function(kt){for(const tr of kt)if(tr.positionedGlyphs.length!==0)return!1;return!0}(st)&&ut}const Bb={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},FK={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},BK={40:!0};function RM(u,c,d,m,w,E){if(c.imageName){const C=m[c.imageName];return C?C.displaySize[0]*c.scale*ms/E+w:0}{const C=d[c.fontStack],O=C&&C[u];return O?O.metrics.advance*c.scale+w:0}}function kM(u,c,d,m){const w=Math.pow(u-c,2);return m?u<c?w/2:2*w:w+Math.abs(d)*d}function zK(u,c,d){let m=0;return u===10&&(m-=1e4),d&&(m+=150),u!==40&&u!==65288||(m+=50),c!==41&&c!==65289||(m+=50),m}function MM(u,c,d,m,w,E){let C=null,O=kM(c,d,w,E);for(const F of m){const H=kM(c-F.x,d,w,E)+F.badness;H<=O&&(C=F,O=H)}return{index:u,x:c,priorBreak:C,badness:O}}function OM(u){return u?OM(u.priorBreak).concat(u.index):[]}function HA(u,c,d,m,w,E){if(!u)return[];const C=[],O=function(te,he,_e,xe,Re,He){let Ye=0;for(let yt=0;yt<te.length();yt++){const st=te.getSection(yt);Ye+=RM(te.getCharCode(yt),st,xe,Re,he,He)}return Ye/Math.max(1,Math.ceil(Ye/_e))}(u,c,d,m,w,E),F=u.text.indexOf("")>=0;let H=0;for(let te=0;te<u.length();te++){const he=u.getSection(te),_e=u.getCharCode(te);if(Bb[_e]||(H+=RM(_e,he,m,w,c,E)),te<u.length()-1){const xe=!((Y=_e)<11904)&&(!!dn["CJK Compatibility Forms"](Y)||!!dn["CJK Compatibility"](Y)||!!dn["CJK Strokes"](Y)||!!dn["CJK Symbols and Punctuation"](Y)||!!dn["Enclosed CJK Letters and Months"](Y)||!!dn["Halfwidth and Fullwidth Forms"](Y)||!!dn["Ideographic Description Characters"](Y)||!!dn["Vertical Forms"](Y)||Yp.test(String.fromCodePoint(Y)));(FK[_e]||xe||he.imageName||te!==u.length()-2&&BK[u.getCharCode(te+1)])&&C.push(MM(te+1,H,O,C,zK(_e,u.getCharCode(te+1),xe&&F),!1))}}var Y;return OM(MM(u.length(),H,O,C,0,!0))}function qA(u){let c=.5,d=.5;switch(u){case"right":case"top-right":case"bottom-right":c=1;break;case"left":case"top-left":case"bottom-left":c=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:c,verticalAlign:d}}function $K(u,c,d,m,w){if(!m&&!w)return;const E=u[d],C=(u[d].x+E.metrics.advance*E.scale)*m;for(let O=c;O<=d;O++)u[O].x-=C,u[O].y+=w}function UK(u,c,d){const{horizontalAlign:m,verticalAlign:w}=qA(d),E=c[0]-u.displaySize[0]*m,C=c[1]-u.displaySize[1]*w;return{image:u,top:C,bottom:C+u.displaySize[1],left:E,right:E+u.displaySize[0]}}function NM(u){var c,d;let m=u.left,w=u.top,E=u.right-m,C=u.bottom-w;const O=(c=u.image.textFitWidth)!==null&&c!==void 0?c:"stretchOrShrink",F=(d=u.image.textFitHeight)!==null&&d!==void 0?d:"stretchOrShrink",H=(u.image.content[2]-u.image.content[0])/(u.image.content[3]-u.image.content[1]);if(F==="proportional"){if(O==="stretchOnly"&&E/C<H||O==="proportional"){const Y=Math.ceil(C*H);m*=Y/E,E=Y}}else if(O==="proportional"&&F==="stretchOnly"&&H!==0&&E/C>H){const Y=Math.ceil(E/H);w*=Y/C,C=Y}return{x1:m,y1:w,x2:m+E,y2:w+C}}function DM(u,c,d,m,w,E){const C=u.image;let O;if(C.content){const He=C.content,Ye=C.pixelRatio||1;O=[He[0]/Ye,He[1]/Ye,C.displaySize[0]-He[2]/Ye,C.displaySize[1]-He[3]/Ye]}const F=c.left*E,H=c.right*E;let Y,te,he,_e;d==="width"||d==="both"?(_e=w[0]+F-m[3],te=w[0]+H+m[1]):(_e=w[0]+(F+H-C.displaySize[0])/2,te=_e+C.displaySize[0]);const xe=c.top*E,Re=c.bottom*E;return d==="height"||d==="both"?(Y=w[1]+xe-m[0],he=w[1]+Re+m[2]):(Y=w[1]+(xe+Re-C.displaySize[1])/2,he=Y+C.displaySize[1]),{image:C,top:Y,right:te,bottom:he,left:_e,collisionPadding:O}}const d1=255,Fh=128,Nd=d1*Fh;function LM(u,c){const{expression:d}=c;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new Ai(u+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:w}=d;let E=0;for(;E<m.length&&m[E]<=u;)E++;E=Math.max(0,E-1);let C=E;for(;C<m.length&&m[C]<u+1;)C++;C=Math.min(m.length-1,C);const O=m[E],F=m[C];return d.kind==="composite"?{kind:"composite",minZoom:O,maxZoom:F,interpolationType:w}:{kind:"camera",minZoom:O,maxZoom:F,minSize:d.evaluate(new Ai(O)),maxSize:d.evaluate(new Ai(F)),interpolationType:w}}}function WA(u,c,d){let m="never";const w=u.get(c);return w?m=w:u.get(d)&&(m="always"),m}const jK=Md.VectorTileFeature.types,VK=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function zb(u,c,d,m,w,E,C,O,F,H,Y,te,he){const _e=O?Math.min(Nd,Math.round(O[0])):0,xe=O?Math.min(Nd,Math.round(O[1])):0;u.emplaceBack(c,d,Math.round(32*m),Math.round(32*w),E,C,(_e<<1)+(F?1:0),xe,16*H,16*Y,256*te,256*he)}function XA(u,c,d){u.emplaceBack(c.x,c.y,d),u.emplaceBack(c.x,c.y,d),u.emplaceBack(c.x,c.y,d),u.emplaceBack(c.x,c.y,d)}function HK(u){for(const c of u.sections)if(Nm(c.text))return!0;return!1}class KA{constructor(c){this.layoutVertexArray=new Df,this.indexArray=new Ns,this.programConfigurations=c,this.segments=new Dn,this.dynamicLayoutVertexArray=new Rh,this.opacityVertexArray=new Os,this.hasVisibleVertices=!1,this.placedSymbolArray=new Qr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(c,d,m,w){this.isEmpty()||(m&&(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,bK.members),this.indexBuffer=c.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=c.createVertexBuffer(this.dynamicLayoutVertexArray,xK.members,!0),this.opacityVertexBuffer=c.createVertexBuffer(this.opacityVertexArray,VK,!0),this.opacityVertexBuffer.itemSize=1),(m||w)&&this.programConfigurations.upload(c))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Sr("SymbolBuffers",KA);class GA{constructor(c,d,m){this.layoutVertexArray=new c,this.layoutAttributes=d,this.indexArray=new m,this.segments=new Dn,this.collisionVertexArray=new Qo}upload(c){this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=c.createVertexBuffer(this.collisionVertexArray,wK.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Sr("CollisionBuffers",GA);class Gm{constructor(c){this.collisionBoxArray=c.collisionBoxArray,this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(C=>C.id),this.index=c.index,this.pixelRatio=c.pixelRatio,this.sourceLayerIndex=c.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=PA([]),this.placementViewportMatrix=PA([]);const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=LM(this.zoom,d["text-size"]),this.iconSizeData=LM(this.zoom,d["icon-size"]);const m=this.layers[0].layout,w=m.get("symbol-sort-key"),E=m.get("symbol-z-order");this.canOverlap=WA(m,"text-overlap","text-allow-overlap")!=="never"||WA(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=E!=="viewport-y"&&!w.isConstant(),this.sortFeaturesByY=(E==="viewport-y"||E==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(C=>l.ah[C])),this.stateDependentLayerIds=this.layers.filter(C=>C.isStateDependent()).map(C=>C.id),this.sourceID=c.sourceID}createArrays(){this.text=new KA(new Oh(this.layers,this.zoom,c=>/^text/.test(c))),this.icon=new KA(new Oh(this.layers,this.zoom,c=>/^icon/.test(c))),this.glyphOffsetArray=new An,this.lineVertexArray=new Zn,this.symbolInstances=new sn,this.textAnchorOffsets=new $n}calculateGlyphDependencies(c,d,m,w,E){for(let C=0;C<c.length;C++)if(d[c.charCodeAt(C)]=!0,(m||w)&&E){const O=u1[c.charAt(C)];O&&(d[O.charCodeAt(0)]=!0)}}populate(c,d,m){const w=this.layers[0],E=w.layout,C=E.get("text-font"),O=E.get("text-field"),F=E.get("icon-image"),H=(O.value.kind!=="constant"||O.value.value instanceof yn&&!O.value.value.isEmpty()||O.value.value.toString().length>0)&&(C.value.kind!=="constant"||C.value.value.length>0),Y=F.value.kind!=="constant"||!!F.value.value||Object.keys(F.parameters).length>0,te=E.get("symbol-sort-key");if(this.features=[],!H&&!Y)return;const he=d.iconDependencies,_e=d.glyphDependencies,xe=d.availableImages,Re=new Ai(this.zoom);for(const{feature:He,id:Ye,index:yt,sourceLayerIndex:st}of c){const ut=w._featureFilter.needGeometry,kt=Nh(He,ut);if(!w._featureFilter.filter(Re,kt,m))continue;let tr,xr;if(ut||(kt.geometry=Bf(He)),H){const vr=w.getValueAndResolveTokens("text-field",kt,m,xe),gr=yn.factory(vr),Dr=this.hasRTLText=this.hasRTLText||HK(gr);(!Dr||Ea.getRTLTextPluginStatus()==="unavailable"||Dr&&Ea.isParsed())&&(tr=AK(gr,w,kt))}if(Y){const vr=w.getValueAndResolveTokens("icon-image",kt,m,xe);xr=vr instanceof zn?vr:zn.fromString(vr)}if(!tr&&!xr)continue;const Xr=this.sortFeaturesByKey?te.evaluate(kt,{},m):void 0;if(this.features.push({id:Ye,text:tr,icon:xr,index:yt,sourceLayerIndex:st,geometry:kt.geometry,properties:He.properties,type:jK[He.type],sortKey:Xr}),xr&&(he[xr.name]=!0),tr){const vr=C.evaluate(kt,{},m).join(","),gr=E.get("text-rotation-alignment")!=="viewport"&&E.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ah.vertical)>=0;for(const Dr of tr.sections)if(Dr.image)he[Dr.image.name]=!0;else{const Cr=Gp(tr.toString()),Er=Dr.fontStack||vr,Bt=_e[Er]=_e[Er]||{};this.calculateGlyphDependencies(Dr.text,Bt,gr,this.allowVerticalPlacement,Cr)}}}E.get("symbol-placement")==="line"&&(this.features=function(He){const Ye={},yt={},st=[];let ut=0;function kt(vr){st.push(He[vr]),ut++}function tr(vr,gr,Dr){const Cr=yt[vr];return delete yt[vr],yt[gr]=Cr,st[Cr].geometry[0].pop(),st[Cr].geometry[0]=st[Cr].geometry[0].concat(Dr[0]),Cr}function xr(vr,gr,Dr){const Cr=Ye[gr];return delete Ye[gr],Ye[vr]=Cr,st[Cr].geometry[0].shift(),st[Cr].geometry[0]=Dr[0].concat(st[Cr].geometry[0]),Cr}function Xr(vr,gr,Dr){const Cr=Dr?gr[0][gr[0].length-1]:gr[0][0];return`${vr}:${Cr.x}:${Cr.y}`}for(let vr=0;vr<He.length;vr++){const gr=He[vr],Dr=gr.geometry,Cr=gr.text?gr.text.toString():null;if(!Cr){kt(vr);continue}const Er=Xr(Cr,Dr),Bt=Xr(Cr,Dr,!0);if(Er in yt&&Bt in Ye&&yt[Er]!==Ye[Bt]){const Fr=xr(Er,Bt,Dr),Mr=tr(Er,Bt,st[Fr].geometry);delete Ye[Er],delete yt[Bt],yt[Xr(Cr,st[Mr].geometry,!0)]=Mr,st[Fr].geometry=null}else Er in yt?tr(Er,Bt,Dr):Bt in Ye?xr(Er,Bt,Dr):(kt(vr),Ye[Er]=ut-1,yt[Bt]=ut-1)}return st.filter(vr=>vr.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((He,Ye)=>He.sortKey-Ye.sortKey)}update(c,d,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(c,d,this.layers,m),this.icon.programConfigurations.updatePaintArrays(c,d,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(c){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(c),this.iconCollisionBox.upload(c)),this.text.upload(c,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(c,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(c,d){const m=this.lineVertexArray.length;if(c.segment!==void 0){let w=c.dist(d[c.segment+1]),E=c.dist(d[c.segment]);const C={};for(let O=c.segment+1;O<d.length;O++)C[O]={x:d[O].x,y:d[O].y,tileUnitDistanceFromAnchor:w},O<d.length-1&&(w+=d[O+1].dist(d[O]));for(let O=c.segment||0;O>=0;O--)C[O]={x:d[O].x,y:d[O].y,tileUnitDistanceFromAnchor:E},O>0&&(E+=d[O-1].dist(d[O]));for(let O=0;O<d.length;O++){const F=C[O];this.lineVertexArray.emplaceBack(F.x,F.y,F.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(c,d,m,w,E,C,O,F,H,Y,te,he){const _e=c.indexArray,xe=c.layoutVertexArray,Re=c.segments.prepareSegment(4*d.length,xe,_e,this.canOverlap?C.sortKey:void 0),He=this.glyphOffsetArray.length,Ye=Re.vertexLength,yt=this.allowVerticalPlacement&&O===l.ah.vertical?Math.PI/2:0,st=C.text&&C.text.sections;for(let ut=0;ut<d.length;ut++){const{tl:kt,tr,bl:xr,br:Xr,tex:vr,pixelOffsetTL:gr,pixelOffsetBR:Dr,minFontScaleX:Cr,minFontScaleY:Er,glyphOffset:Bt,isSDF:Fr,sectionIndex:Mr}=d[ut],hn=Re.vertexLength,Ri=Bt[1];zb(xe,F.x,F.y,kt.x,Ri+kt.y,vr.x,vr.y,m,Fr,gr.x,gr.y,Cr,Er),zb(xe,F.x,F.y,tr.x,Ri+tr.y,vr.x+vr.w,vr.y,m,Fr,Dr.x,gr.y,Cr,Er),zb(xe,F.x,F.y,xr.x,Ri+xr.y,vr.x,vr.y+vr.h,m,Fr,gr.x,Dr.y,Cr,Er),zb(xe,F.x,F.y,Xr.x,Ri+Xr.y,vr.x+vr.w,vr.y+vr.h,m,Fr,Dr.x,Dr.y,Cr,Er),XA(c.dynamicLayoutVertexArray,F,yt),_e.emplaceBack(hn,hn+1,hn+2),_e.emplaceBack(hn+1,hn+2,hn+3),Re.vertexLength+=4,Re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Bt[0]),ut!==d.length-1&&Mr===d[ut+1].sectionIndex||c.programConfigurations.populatePaintArrays(xe.length,C,C.index,{},he,st&&st[Mr])}c.placedSymbolArray.emplaceBack(F.x,F.y,He,this.glyphOffsetArray.length-He,Ye,H,Y,F.segment,m?m[0]:0,m?m[1]:0,w[0],w[1],O,0,!1,0,te)}_addCollisionDebugVertex(c,d,m,w,E,C){return d.emplaceBack(0,0),c.emplaceBack(m.x,m.y,w,E,Math.round(C.x),Math.round(C.y))}addCollisionDebugVertices(c,d,m,w,E,C,O){const F=E.segments.prepareSegment(4,E.layoutVertexArray,E.indexArray),H=F.vertexLength,Y=E.layoutVertexArray,te=E.collisionVertexArray,he=O.anchorX,_e=O.anchorY;this._addCollisionDebugVertex(Y,te,C,he,_e,new x(c,d)),this._addCollisionDebugVertex(Y,te,C,he,_e,new x(m,d)),this._addCollisionDebugVertex(Y,te,C,he,_e,new x(m,w)),this._addCollisionDebugVertex(Y,te,C,he,_e,new x(c,w)),F.vertexLength+=4;const xe=E.indexArray;xe.emplaceBack(H,H+1),xe.emplaceBack(H+1,H+2),xe.emplaceBack(H+2,H+3),xe.emplaceBack(H+3,H),F.primitiveLength+=4}addDebugCollisionBoxes(c,d,m,w){for(let E=c;E<d;E++){const C=this.collisionBoxArray.get(E);this.addCollisionDebugVertices(C.x1,C.y1,C.x2,C.y2,w?this.textCollisionBox:this.iconCollisionBox,C.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new GA(Ks,vM.members,co),this.iconCollisionBox=new GA(Ks,vM.members,co);for(let c=0;c<this.symbolInstances.length;c++){const d=this.symbolInstances.get(c);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(c,d,m,w,E,C,O,F,H){const Y={};for(let te=d;te<m;te++){const he=c.get(te);Y.textBox={x1:he.x1,y1:he.y1,x2:he.x2,y2:he.y2,anchorPointX:he.anchorPointX,anchorPointY:he.anchorPointY},Y.textFeatureIndex=he.featureIndex;break}for(let te=w;te<E;te++){const he=c.get(te);Y.verticalTextBox={x1:he.x1,y1:he.y1,x2:he.x2,y2:he.y2,anchorPointX:he.anchorPointX,anchorPointY:he.anchorPointY},Y.verticalTextFeatureIndex=he.featureIndex;break}for(let te=C;te<O;te++){const he=c.get(te);Y.iconBox={x1:he.x1,y1:he.y1,x2:he.x2,y2:he.y2,anchorPointX:he.anchorPointX,anchorPointY:he.anchorPointY},Y.iconFeatureIndex=he.featureIndex;break}for(let te=F;te<H;te++){const he=c.get(te);Y.verticalIconBox={x1:he.x1,y1:he.y1,x2:he.x2,y2:he.y2,anchorPointX:he.anchorPointX,anchorPointY:he.anchorPointY},Y.verticalIconFeatureIndex=he.featureIndex;break}return Y}deserializeCollisionBoxes(c){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const m=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(c,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(c,d){const m=c.placedSymbolArray.get(d),w=m.vertexStartIndex+4*m.numGlyphs;for(let E=m.vertexStartIndex;E<w;E+=4)c.indexArray.emplaceBack(E,E+1,E+2),c.indexArray.emplaceBack(E+1,E+2,E+3)}getSortedSymbolIndexes(c){if(this.sortedAngle===c&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(c),m=Math.cos(c),w=[],E=[],C=[];for(let O=0;O<this.symbolInstances.length;++O){C.push(O);const F=this.symbolInstances.get(O);w.push(0|Math.round(d*F.anchorX+m*F.anchorY)),E.push(F.featureIndex)}return C.sort((O,F)=>w[O]-w[F]||E[F]-E[O]),C}addToSortKeyRanges(c,d){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===d?m.symbolInstanceEnd=c+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:c,symbolInstanceEnd:c+1})}sortFeatures(c){if(this.sortFeaturesByY&&this.sortedAngle!==c&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(c),this.sortedAngle=c,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const m=this.symbolInstances.get(d);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((w,E,C)=>{w>=0&&C.indexOf(w)===E&&this.addIndicesForPlacedSymbol(this.text,w)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let FM,BM;Sr("SymbolBucket",Gm,{omit:["layers","collisionBoxArray","features","compareText"]}),Gm.MAX_GLYPHS=65535,Gm.addDynamicAttributes=XA;var YA={get paint(){return BM=BM||new y({"icon-opacity":new qr(pe.paint_symbol["icon-opacity"]),"icon-color":new qr(pe.paint_symbol["icon-color"]),"icon-halo-color":new qr(pe.paint_symbol["icon-halo-color"]),"icon-halo-width":new qr(pe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new qr(pe.paint_symbol["icon-halo-blur"]),"icon-translate":new Rr(pe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Rr(pe.paint_symbol["icon-translate-anchor"]),"text-opacity":new qr(pe.paint_symbol["text-opacity"]),"text-color":new qr(pe.paint_symbol["text-color"],{runtimeType:nn,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new qr(pe.paint_symbol["text-halo-color"]),"text-halo-width":new qr(pe.paint_symbol["text-halo-width"]),"text-halo-blur":new qr(pe.paint_symbol["text-halo-blur"]),"text-translate":new Rr(pe.paint_symbol["text-translate"]),"text-translate-anchor":new Rr(pe.paint_symbol["text-translate-anchor"])})},get layout(){return FM=FM||new y({"symbol-placement":new Rr(pe.layout_symbol["symbol-placement"]),"symbol-spacing":new Rr(pe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Rr(pe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new qr(pe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Rr(pe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Rr(pe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Rr(pe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Rr(pe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Rr(pe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Rr(pe.layout_symbol["icon-rotation-alignment"]),"icon-size":new qr(pe.layout_symbol["icon-size"]),"icon-text-fit":new Rr(pe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Rr(pe.layout_symbol["icon-text-fit-padding"]),"icon-image":new qr(pe.layout_symbol["icon-image"]),"icon-rotate":new qr(pe.layout_symbol["icon-rotate"]),"icon-padding":new qr(pe.layout_symbol["icon-padding"]),"icon-keep-upright":new Rr(pe.layout_symbol["icon-keep-upright"]),"icon-offset":new qr(pe.layout_symbol["icon-offset"]),"icon-anchor":new qr(pe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Rr(pe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Rr(pe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Rr(pe.layout_symbol["text-rotation-alignment"]),"text-field":new qr(pe.layout_symbol["text-field"]),"text-font":new qr(pe.layout_symbol["text-font"]),"text-size":new qr(pe.layout_symbol["text-size"]),"text-max-width":new qr(pe.layout_symbol["text-max-width"]),"text-line-height":new Rr(pe.layout_symbol["text-line-height"]),"text-letter-spacing":new qr(pe.layout_symbol["text-letter-spacing"]),"text-justify":new qr(pe.layout_symbol["text-justify"]),"text-radial-offset":new qr(pe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Rr(pe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new qr(pe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new qr(pe.layout_symbol["text-anchor"]),"text-max-angle":new Rr(pe.layout_symbol["text-max-angle"]),"text-writing-mode":new Rr(pe.layout_symbol["text-writing-mode"]),"text-rotate":new qr(pe.layout_symbol["text-rotate"]),"text-padding":new Rr(pe.layout_symbol["text-padding"]),"text-keep-upright":new Rr(pe.layout_symbol["text-keep-upright"]),"text-transform":new qr(pe.layout_symbol["text-transform"]),"text-offset":new qr(pe.layout_symbol["text-offset"]),"text-allow-overlap":new Rr(pe.layout_symbol["text-allow-overlap"]),"text-overlap":new Rr(pe.layout_symbol["text-overlap"]),"text-ignore-placement":new Rr(pe.layout_symbol["text-ignore-placement"]),"text-optional":new Rr(pe.layout_symbol["text-optional"])})}};class zM{constructor(c){if(c.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=c.property.overrides?c.property.overrides.runtimeType:fn,this.defaultValue=c}evaluate(c){if(c.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(c.formattedSection))return d.getOverride(c.formattedSection)}return c.feature&&c.featureState?this.defaultValue.evaluate(c.feature,c.featureState):this.defaultValue.property.specification.default}eachChild(c){this.defaultValue.isConstant()||c(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Sr("FormatSectionOverride",zM,{omit:["defaultValue"]});class $b extends h{constructor(c){super(c,YA)}recalculate(c,d){if(super.recalculate(c,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const w=[];for(const E of m)w.indexOf(E)<0&&w.push(E);this.layout._values["text-writing-mode"]=w}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(c,d,m,w){const E=this.layout.get(c).evaluate(d,{},m,w),C=this._unevaluatedLayout._values[c];return C.isDataDriven()||ri(C.value)||!E?E:function(O,F){return F.replace(/{([^{}]+)}/g,(H,Y)=>O&&Y in O?String(O[Y]):"")}(d.properties,E)}createBucket(c){return new Gm(c)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const c of YA.paint.overridableProperties){if(!$b.hasPaintOverride(this.layout,c))continue;const d=this.paint.get(c),m=new zM(d),w=new _i(m,d.property.specification);let E=null;E=d.value.kind==="constant"||d.value.kind==="source"?new qi("source",w):new vi("composite",w,d.value.zoomStops),this.paint._values[c]=new Al(d.property,E,d.parameters)}}_handleOverridablePaintPropertyUpdate(c,d,m){return!(!this.layout||d.isDataDriven()||m.isDataDriven())&&$b.hasPaintOverride(this.layout,c)}static hasPaintOverride(c,d){const m=c.get("text-field"),w=YA.paint.properties[d];let E=!1;const C=O=>{for(const F of O)if(w.overrides&&w.overrides.hasOverride(F))return void(E=!0)};if(m.value.kind==="constant"&&m.value.value instanceof yn)C(m.value.value.sections);else if(m.value.kind==="source"){const O=H=>{E||(H instanceof go&&Un(H.value)===Nn?C(H.value.sections):H instanceof xc?C(H.sections):H.eachChild(O))},F=m.value;F._styleExpression&&O(F._styleExpression.expression)}return E}}let $M;var qK={get paint(){return $M=$M||new y({"background-color":new Rr(pe.paint_background["background-color"]),"background-pattern":new T(pe.paint_background["background-pattern"]),"background-opacity":new Rr(pe.paint_background["background-opacity"])})}};class WK extends h{constructor(c){super(c,qK)}}let UM;var XK={get paint(){return UM=UM||new y({"raster-opacity":new Rr(pe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Rr(pe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Rr(pe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Rr(pe.paint_raster["raster-brightness-max"]),"raster-saturation":new Rr(pe.paint_raster["raster-saturation"]),"raster-contrast":new Rr(pe.paint_raster["raster-contrast"]),"raster-resampling":new Rr(pe.paint_raster["raster-resampling"]),"raster-fade-duration":new Rr(pe.paint_raster["raster-fade-duration"])})}};class KK extends h{constructor(c){super(c,XK)}}class GK extends h{constructor(c){super(c,{}),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=c}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class YK{constructor(c){this._methodToThrottle=c,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const ZA=63710088e-1;class Dd{constructor(c,d){if(isNaN(c)||isNaN(d))throw new Error(`Invalid LngLat object: (${c}, ${d})`);if(this.lng=+c,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Dd(ee(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(c){const d=Math.PI/180,m=this.lat*d,w=c.lat*d,E=Math.sin(m)*Math.sin(w)+Math.cos(m)*Math.cos(w)*Math.cos((c.lng-this.lng)*d);return ZA*Math.acos(Math.min(E,1))}static convert(c){if(c instanceof Dd)return c;if(Array.isArray(c)&&(c.length===2||c.length===3))return new Dd(Number(c[0]),Number(c[1]));if(!Array.isArray(c)&&typeof c=="object"&&c!==null)return new Dd(Number("lng"in c?c.lng:c.lon),Number(c.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const jM=2*Math.PI*ZA;function VM(u){return jM*Math.cos(u*Math.PI/180)}function HM(u){return(180+u)/360}function qM(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function WM(u,c){return u/VM(c)}function JA(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}class p1{constructor(c,d,m=0){this.x=+c,this.y=+d,this.z=+m}static fromLngLat(c,d=0){const m=Dd.convert(c);return new p1(HM(m.lng),qM(m.lat),WM(d,m.lat))}toLngLat(){return new Dd(360*this.x-180,JA(this.y))}toAltitude(){return this.z*VM(JA(this.y))}meterInMercatorCoordinateUnits(){return 1/jM*(c=JA(this.y),1/Math.cos(c*Math.PI/180));var c}}function XM(u,c,d){var m=2*Math.PI*6378137/256/Math.pow(2,d);return[u*m-2*Math.PI*6378137/2,c*m-2*Math.PI*6378137/2]}class QA{constructor(c,d,m){if(!function(w,E,C){return!(w<0||w>25||C<0||C>=Math.pow(2,w)||E<0||E>=Math.pow(2,w))}(c,d,m))throw new Error(`x=${d}, y=${m}, z=${c} outside of bounds. 0<=x<${Math.pow(2,c)}, 0<=y<${Math.pow(2,c)} 0<=z<=25 `);this.z=c,this.x=d,this.y=m,this.key=g1(0,c,c,d,m)}equals(c){return this.z===c.z&&this.x===c.x&&this.y===c.y}url(c,d,m){const w=(C=this.y,O=this.z,F=XM(256*(E=this.x),256*(C=Math.pow(2,O)-C-1),O),H=XM(256*(E+1),256*(C+1),O),F[0]+","+F[1]+","+H[0]+","+H[1]);var E,C,O,F,H;const Y=function(te,he,_e){let xe,Re="";for(let He=te;He>0;He--)xe=1<<He-1,Re+=(he&xe?1:0)+(_e&xe?2:0);return Re}(this.z,this.x,this.y);return c[(this.x+this.y)%c.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,Y).replace(/{bbox-epsg-3857}/g,w)}isChildOf(c){const d=this.z-c.z;return d>0&&c.x===this.x>>d&&c.y===this.y>>d}getTilePoint(c){const d=Math.pow(2,this.z);return new x((c.x*d-this.x)*Fi,(c.y*d-this.y)*Fi)}toString(){return`${this.z}/${this.x}/${this.y}`}}class KM{constructor(c,d){this.wrap=c,this.canonical=d,this.key=g1(c,d.z,d.z,d.x,d.y)}}class kc{constructor(c,d,m,w,E){if(c<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${c}; z = ${m}`);this.overscaledZ=c,this.wrap=d,this.canonical=new QA(m,+w,+E),this.key=g1(d,c,m,w,E)}clone(){return new kc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(c){return this.overscaledZ===c.overscaledZ&&this.wrap===c.wrap&&this.canonical.equals(c.canonical)}scaledTo(c){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-c;return c>this.canonical.z?new kc(c,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new kc(c,this.wrap,c,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(c,d){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-c;return c>this.canonical.z?g1(this.wrap*+d,c,this.canonical.z,this.canonical.x,this.canonical.y):g1(this.wrap*+d,c,c,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(c){if(c.wrap!==this.wrap)return!1;const d=this.canonical.z-c.canonical.z;return c.overscaledZ===0||c.overscaledZ<this.overscaledZ&&c.canonical.x===this.canonical.x>>d&&c.canonical.y===this.canonical.y>>d}children(c){if(this.overscaledZ>=c)return[new kc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,m=2*this.canonical.x,w=2*this.canonical.y;return[new kc(d,this.wrap,d,m,w),new kc(d,this.wrap,d,m+1,w),new kc(d,this.wrap,d,m,w+1),new kc(d,this.wrap,d,m+1,w+1)]}isLessThan(c){return this.wrap<c.wrap||!(this.wrap>c.wrap)&&(this.overscaledZ<c.overscaledZ||!(this.overscaledZ>c.overscaledZ)&&(this.canonical.x<c.canonical.x||!(this.canonical.x>c.canonical.x)&&this.canonical.y<c.canonical.y))}wrapped(){return new kc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(c){return new kc(this.overscaledZ,c,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new KM(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(c){return this.canonical.getTilePoint(new p1(c.x-this.wrap,c.y))}}function g1(u,c,d,m,w){(u*=2)<0&&(u=-1*u-1);const E=1<<d;return(E*E*u+E*w+m).toString(36)+d.toString(36)+c.toString(36)}Sr("CanonicalTileID",QA),Sr("OverscaledTileID",kc,{omit:["posMatrix"]});class GM{constructor(c,d,m,w=1,E=1,C=1,O=0){if(this.uid=c,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void ve(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=d.height;const F=this.dim=d.height-2;switch(this.data=new Uint32Array(d.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=w,this.greenFactor=E,this.blueFactor=C,this.baseShift=O;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let H=0;H<F;H++)this.data[this._idx(-1,H)]=this.data[this._idx(0,H)],this.data[this._idx(F,H)]=this.data[this._idx(F-1,H)],this.data[this._idx(H,-1)]=this.data[this._idx(H,0)],this.data[this._idx(H,F)]=this.data[this._idx(H,F-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(F,-1)]=this.data[this._idx(F-1,0)],this.data[this._idx(-1,F)]=this.data[this._idx(0,F-1)],this.data[this._idx(F,F)]=this.data[this._idx(F-1,F-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let H=0;H<F;H++)for(let Y=0;Y<F;Y++){const te=this.get(H,Y);te>this.max&&(this.max=te),te<this.min&&(this.min=te)}}get(c,d){const m=new Uint8Array(this.data.buffer),w=4*this._idx(c,d);return this.unpack(m[w],m[w+1],m[w+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(c,d){if(c<-1||c>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(c+1)}unpack(c,d,m){return c*this.redFactor+d*this.greenFactor+m*this.blueFactor-this.baseShift}getPixels(){return new Rc({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(c,d,m){if(this.dim!==c.dim)throw new Error("dem dimension mismatch");let w=d*this.dim,E=d*this.dim+this.dim,C=m*this.dim,O=m*this.dim+this.dim;switch(d){case-1:w=E-1;break;case 1:E=w+1}switch(m){case-1:C=O-1;break;case 1:O=C+1}const F=-d*this.dim,H=-m*this.dim;for(let Y=C;Y<O;Y++)for(let te=w;te<E;te++)this.data[this._idx(te,Y)]=c.data[this._idx(te+F,Y+H)]}}Sr("DEMData",GM);class YM{constructor(c){this._stringToNumber={},this._numberToString=[];for(let d=0;d<c.length;d++){const m=c[d];this._stringToNumber[m]=d,this._numberToString[d]=m}}encode(c){return this._stringToNumber[c]}decode(c){if(c>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${c} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[c]}}class ZM{constructor(c,d,m,w,E){this.type="Feature",this._vectorTileFeature=c,c._z=d,c._x=m,c._y=w,this.properties=c.properties,this.id=E}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(c){this._geometry=c}toJSON(){const c={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(c[d]=this[d]);return c}}class JM{constructor(c,d){this.tileID=c,this.x=c.canonical.x,this.y=c.canonical.y,this.z=c.canonical.z,this.grid=new Ch(Fi,16,0),this.grid3D=new Ch(Fi,16,0),this.featureIndexArray=new Jn,this.promoteId=d}insert(c,d,m,w,E,C){const O=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,w,E);const F=C?this.grid3D:this.grid;for(let H=0;H<d.length;H++){const Y=d[H],te=[1/0,1/0,-1/0,-1/0];for(let he=0;he<Y.length;he++){const _e=Y[he];te[0]=Math.min(te[0],_e.x),te[1]=Math.min(te[1],_e.y),te[2]=Math.max(te[2],_e.x),te[3]=Math.max(te[3],_e.y)}te[0]<Fi&&te[1]<Fi&&te[2]>=0&&te[3]>=0&&F.insert(O,te[0],te[1],te[2],te[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Md.VectorTile(new UA(this.rawTileData)).layers,this.sourceLayerCoder=new YM(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(c,d,m,w){this.loadVTLayers();const E=c.params||{},C=Fi/c.tileSize/c.scale,O=ia(E.filter),F=c.queryGeometry,H=c.queryPadding*C,Y=e8(F),te=this.grid.query(Y.minX-H,Y.minY-H,Y.maxX+H,Y.maxY+H),he=e8(c.cameraQueryGeometry),_e=this.grid3D.query(he.minX-H,he.minY-H,he.maxX+H,he.maxY+H,(He,Ye,yt,st)=>function(ut,kt,tr,xr,Xr){for(const gr of ut)if(kt<=gr.x&&tr<=gr.y&&xr>=gr.x&&Xr>=gr.y)return!0;const vr=[new x(kt,tr),new x(kt,Xr),new x(xr,Xr),new x(xr,tr)];if(ut.length>2){for(const gr of vr)if(Lh(ut,gr))return!0}for(let gr=0;gr<ut.length-1;gr++)if(t1(ut[gr],ut[gr+1],vr))return!0;return!1}(c.cameraQueryGeometry,He-H,Ye-H,yt+H,st+H));for(const He of _e)te.push(He);te.sort(ZK);const xe={};let Re;for(let He=0;He<te.length;He++){const Ye=te[He];if(Ye===Re)continue;Re=Ye;const yt=this.featureIndexArray.get(Ye);let st=null;this.loadMatchingFeature(xe,yt.bucketIndex,yt.sourceLayerIndex,yt.featureIndex,O,E.layers,E.availableImages,d,m,w,(ut,kt,tr)=>(st||(st=Bf(ut)),kt.queryIntersectsFeature(F,ut,tr,st,this.z,c.transform,C,c.pixelPosMatrix)))}return xe}loadMatchingFeature(c,d,m,w,E,C,O,F,H,Y,te){const he=this.bucketLayerIDs[d];if(C&&!function(He,Ye){for(let yt=0;yt<He.length;yt++)if(Ye.indexOf(He[yt])>=0)return!0;return!1}(C,he))return;const _e=this.sourceLayerCoder.decode(m),xe=this.vtLayers[_e].feature(w);if(E.needGeometry){const He=Nh(xe,!0);if(!E.filter(new Ai(this.tileID.overscaledZ),He,this.tileID.canonical))return}else if(!E.filter(new Ai(this.tileID.overscaledZ),xe))return;const Re=this.getId(xe,_e);for(let He=0;He<he.length;He++){const Ye=he[He];if(C&&C.indexOf(Ye)<0)continue;const yt=F[Ye];if(!yt)continue;let st={};Re&&Y&&(st=Y.getState(yt.sourceLayer||"_geojsonTileLayer",Re));const ut=Q({},H[Ye]);ut.paint=QM(ut.paint,yt.paint,xe,st,O),ut.layout=QM(ut.layout,yt.layout,xe,st,O);const kt=!te||te(xe,yt,st);if(!kt)continue;const tr=new ZM(xe,this.z,this.x,this.y,Re);tr.layer=ut;let xr=c[Ye];xr===void 0&&(xr=c[Ye]=[]),xr.push({featureIndex:w,feature:tr,intersectionZ:kt})}}lookupSymbolFeatures(c,d,m,w,E,C,O,F){const H={};this.loadVTLayers();const Y=ia(E);for(const te of c)this.loadMatchingFeature(H,m,w,te,Y,C,O,F,d);return H}hasLayer(c){for(const d of this.bucketLayerIDs)for(const m of d)if(c===m)return!0;return!1}getId(c,d){let m=c.id;return this.promoteId&&(m=c.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof m=="boolean"&&(m=Number(m))),m}}function QM(u,c,d,m,w){return Se(u,(E,C)=>{const O=c instanceof ou?c.get(C):null;return O&&O.evaluate?O.evaluate(d,m,w):O})}function e8(u){let c=1/0,d=1/0,m=-1/0,w=-1/0;for(const E of u)c=Math.min(c,E.x),d=Math.min(d,E.y),m=Math.max(m,E.x),w=Math.max(w,E.y);return{minX:c,minY:d,maxX:m,maxY:w}}function ZK(u,c){return c-u}function t8(u,c,d,m,w){const E=[];for(let C=0;C<u.length;C++){const O=u[C];let F;for(let H=0;H<O.length-1;H++){let Y=O[H],te=O[H+1];Y.x<c&&te.x<c||(Y.x<c?Y=new x(c,Y.y+(c-Y.x)/(te.x-Y.x)*(te.y-Y.y))._round():te.x<c&&(te=new x(c,Y.y+(c-Y.x)/(te.x-Y.x)*(te.y-Y.y))._round()),Y.y<d&&te.y<d||(Y.y<d?Y=new x(Y.x+(d-Y.y)/(te.y-Y.y)*(te.x-Y.x),d)._round():te.y<d&&(te=new x(Y.x+(d-Y.y)/(te.y-Y.y)*(te.x-Y.x),d)._round()),Y.x>=m&&te.x>=m||(Y.x>=m?Y=new x(m,Y.y+(m-Y.x)/(te.x-Y.x)*(te.y-Y.y))._round():te.x>=m&&(te=new x(m,Y.y+(m-Y.x)/(te.x-Y.x)*(te.y-Y.y))._round()),Y.y>=w&&te.y>=w||(Y.y>=w?Y=new x(Y.x+(w-Y.y)/(te.y-Y.y)*(te.x-Y.x),w)._round():te.y>=w&&(te=new x(Y.x+(w-Y.y)/(te.y-Y.y)*(te.x-Y.x),w)._round()),F&&Y.equals(F[F.length-1])||(F=[Y],E.push(F)),F.push(te)))))}}return E}Sr("FeatureIndex",JM,{omit:["rawTileData","sourceLayerCoder"]});class Ld extends x{constructor(c,d,m,w){super(c,d),this.angle=m,w!==void 0&&(this.segment=w)}clone(){return new Ld(this.x,this.y,this.angle,this.segment)}}function r8(u,c,d,m,w){if(c.segment===void 0||d===0)return!0;let E=c,C=c.segment+1,O=0;for(;O>-d/2;){if(C--,C<0)return!1;O-=u[C].dist(E),E=u[C]}O+=u[C].dist(u[C+1]),C++;const F=[];let H=0;for(;O<d/2;){const Y=u[C],te=u[C+1];if(!te)return!1;let he=u[C-1].angleTo(Y)-Y.angleTo(te);for(he=Math.abs((he+3*Math.PI)%(2*Math.PI)-Math.PI),F.push({distance:O,angleDelta:he}),H+=he;O-F[0].distance>m;)H-=F.shift().angleDelta;if(H>w)return!1;C++,O+=Y.dist(te)}return!0}function n8(u){let c=0;for(let d=0;d<u.length-1;d++)c+=u[d].dist(u[d+1]);return c}function i8(u,c,d){return u?.6*c*d:0}function o8(u,c){return Math.max(u?u.right-u.left:0,c?c.right-c.left:0)}function JK(u,c,d,m,w,E){const C=i8(d,w,E),O=o8(d,m)*E;let F=0;const H=n8(u)/2;for(let Y=0;Y<u.length-1;Y++){const te=u[Y],he=u[Y+1],_e=te.dist(he);if(F+_e>H){const xe=(H-F)/_e,Re=zr.number(te.x,he.x,xe),He=zr.number(te.y,he.y,xe),Ye=new Ld(Re,He,he.angleTo(te),Y);return Ye._round(),!C||r8(u,Ye,O,C,c)?Ye:void 0}F+=_e}}function QK(u,c,d,m,w,E,C,O,F){const H=i8(m,E,C),Y=o8(m,w),te=Y*C,he=u[0].x===0||u[0].x===F||u[0].y===0||u[0].y===F;return c-te<c/4&&(c=te+c/4),s8(u,he?c/2*O%c:(Y/2+2*E)*C*O%c,c,H,d,te,he,!1,F)}function s8(u,c,d,m,w,E,C,O,F){const H=E/2,Y=n8(u);let te=0,he=c-d,_e=[];for(let xe=0;xe<u.length-1;xe++){const Re=u[xe],He=u[xe+1],Ye=Re.dist(He),yt=He.angleTo(Re);for(;he+d<te+Ye;){he+=d;const st=(he-te)/Ye,ut=zr.number(Re.x,He.x,st),kt=zr.number(Re.y,He.y,st);if(ut>=0&&ut<F&&kt>=0&&kt<F&&he-H>=0&&he+H<=Y){const tr=new Ld(ut,kt,yt,xe);tr._round(),m&&!r8(u,tr,E,m,w)||_e.push(tr)}}te+=Ye}return O||_e.length||C||(_e=s8(u,te/2,d,m,w,E,C,!0,F)),_e}Sr("Anchor",Ld);const Ym=Tl;function a8(u,c,d,m){const w=[],E=u.image,C=E.pixelRatio,O=E.paddedRect.w-2*Ym,F=E.paddedRect.h-2*Ym;let H={x1:u.left,y1:u.top,x2:u.right,y2:u.bottom};const Y=E.stretchX||[[0,O]],te=E.stretchY||[[0,F]],he=(Bt,Fr)=>Bt+Fr[1]-Fr[0],_e=Y.reduce(he,0),xe=te.reduce(he,0),Re=O-_e,He=F-xe;let Ye=0,yt=_e,st=0,ut=xe,kt=0,tr=Re,xr=0,Xr=He;if(E.content&&m){const Bt=E.content,Fr=Bt[2]-Bt[0],Mr=Bt[3]-Bt[1];(E.textFitWidth||E.textFitHeight)&&(H=NM(u)),Ye=Ub(Y,0,Bt[0]),st=Ub(te,0,Bt[1]),yt=Ub(Y,Bt[0],Bt[2]),ut=Ub(te,Bt[1],Bt[3]),kt=Bt[0]-Ye,xr=Bt[1]-st,tr=Fr-yt,Xr=Mr-ut}const vr=H.x1,gr=H.y1,Dr=H.x2-vr,Cr=H.y2-gr,Er=(Bt,Fr,Mr,hn)=>{const Ri=jb(Bt.stretch-Ye,yt,Dr,vr),Ti=Vb(Bt.fixed-kt,tr,Bt.stretch,_e),Ls=jb(Fr.stretch-st,ut,Cr,gr),hu=Vb(Fr.fixed-xr,Xr,Fr.stretch,xe),aa=jb(Mr.stretch-Ye,yt,Dr,vr),Fs=Vb(Mr.fixed-kt,tr,Mr.stretch,_e),rl=jb(hn.stretch-st,ut,Cr,gr),nl=Vb(hn.fixed-xr,Xr,hn.stretch,xe),il=new x(Ri,Ls),Po=new x(aa,Ls),Bs=new x(aa,rl),Ia=new x(Ri,rl),la=new x(Ti/C,hu/C),ol=new x(Fs/C,nl/C),ca=c*Math.PI/180;if(ca){const Qn=Math.sin(ca),Bi=Math.cos(ca),Xi=[Bi,-Qn,Qn,Bi];il._matMult(Xi),Po._matMult(Xi),Ia._matMult(Xi),Bs._matMult(Xi)}const Mc=Bt.stretch+Bt.fixed,Cl=Fr.stretch+Fr.fixed;return{tl:il,tr:Po,bl:Ia,br:Bs,tex:{x:E.paddedRect.x+Ym+Mc,y:E.paddedRect.y+Ym+Cl,w:Mr.stretch+Mr.fixed-Mc,h:hn.stretch+hn.fixed-Cl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:la,pixelOffsetBR:ol,minFontScaleX:tr/C/Dr,minFontScaleY:Xr/C/Cr,isSDF:d}};if(m&&(E.stretchX||E.stretchY)){const Bt=l8(Y,Re,_e),Fr=l8(te,He,xe);for(let Mr=0;Mr<Bt.length-1;Mr++){const hn=Bt[Mr],Ri=Bt[Mr+1];for(let Ti=0;Ti<Fr.length-1;Ti++)w.push(Er(hn,Fr[Ti],Ri,Fr[Ti+1]))}}else w.push(Er({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:O+1},{fixed:0,stretch:F+1}));return w}function Ub(u,c,d){let m=0;for(const w of u)m+=Math.max(c,Math.min(d,w[1]))-Math.max(c,Math.min(d,w[0]));return m}function l8(u,c,d){const m=[{fixed:-Ym,stretch:0}];for(const[w,E]of u){const C=m[m.length-1];m.push({fixed:w-C.stretch,stretch:C.stretch}),m.push({fixed:w-C.stretch,stretch:C.stretch+(E-w)})}return m.push({fixed:c+Ym,stretch:d}),m}function jb(u,c,d,m){return u/c*d+m}function Vb(u,c,d,m){return u-c*d/m}class Hb{constructor(c,d,m,w,E,C,O,F,H,Y){var te;if(this.boxStartIndex=c.length,H){let he=C.top,_e=C.bottom;const xe=C.collisionPadding;xe&&(he-=xe[1],_e+=xe[3]);let Re=_e-he;Re>0&&(Re=Math.max(10,Re),this.circleDiameter=Re)}else{const he=!((te=C.image)===null||te===void 0)&&te.content&&(C.image.textFitWidth||C.image.textFitHeight)?NM(C):{x1:C.left,y1:C.top,x2:C.right,y2:C.bottom};he.y1=he.y1*O-F[0],he.y2=he.y2*O+F[2],he.x1=he.x1*O-F[3],he.x2=he.x2*O+F[1];const _e=C.collisionPadding;if(_e&&(he.x1-=_e[0]*O,he.y1-=_e[1]*O,he.x2+=_e[2]*O,he.y2+=_e[3]*O),Y){const xe=new x(he.x1,he.y1),Re=new x(he.x2,he.y1),He=new x(he.x1,he.y2),Ye=new x(he.x2,he.y2),yt=Y*Math.PI/180;xe._rotate(yt),Re._rotate(yt),He._rotate(yt),Ye._rotate(yt),he.x1=Math.min(xe.x,Re.x,He.x,Ye.x),he.x2=Math.max(xe.x,Re.x,He.x,Ye.x),he.y1=Math.min(xe.y,Re.y,He.y,Ye.y),he.y2=Math.max(xe.y,Re.y,He.y,Ye.y)}c.emplaceBack(d.x,d.y,he.x1,he.y1,he.x2,he.y2,m,w,E)}this.boxEndIndex=c.length}}class eG{constructor(c=[],d=(m,w)=>m<w?-1:m>w?1:0){if(this.data=c,this.length=this.data.length,this.compare=d,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;const c=this.data[0],d=this.data.pop();return--this.length>0&&(this.data[0]=d,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:d,compare:m}=this,w=d[c];for(;c>0;){const E=c-1>>1,C=d[E];if(m(w,C)>=0)break;d[c]=C,c=E}d[c]=w}_down(c){const{data:d,compare:m}=this,w=this.length>>1,E=d[c];for(;c<w;){let C=1+(c<<1);const O=C+1;if(O<this.length&&m(d[O],d[C])<0&&(C=O),m(d[C],E)>=0)break;d[c]=d[C],c=C}d[c]=E}}function tG(u,c=1,d=!1){let m=1/0,w=1/0,E=-1/0,C=-1/0;const O=u[0];for(let _e=0;_e<O.length;_e++){const xe=O[_e];(!_e||xe.x<m)&&(m=xe.x),(!_e||xe.y<w)&&(w=xe.y),(!_e||xe.x>E)&&(E=xe.x),(!_e||xe.y>C)&&(C=xe.y)}const F=Math.min(E-m,C-w);let H=F/2;const Y=new eG([],rG);if(F===0)return new x(m,w);for(let _e=m;_e<E;_e+=F)for(let xe=w;xe<C;xe+=F)Y.push(new Zm(_e+H,xe+H,H,u));let te=function(_e){let xe=0,Re=0,He=0;const Ye=_e[0];for(let yt=0,st=Ye.length,ut=st-1;yt<st;ut=yt++){const kt=Ye[yt],tr=Ye[ut],xr=kt.x*tr.y-tr.x*kt.y;Re+=(kt.x+tr.x)*xr,He+=(kt.y+tr.y)*xr,xe+=3*xr}return new Zm(Re/xe,He/xe,0,_e)}(u),he=Y.length;for(;Y.length;){const _e=Y.pop();(_e.d>te.d||!te.d)&&(te=_e,d&&console.log("found best %d after %d probes",Math.round(1e4*_e.d)/1e4,he)),_e.max-te.d<=c||(H=_e.h/2,Y.push(new Zm(_e.p.x-H,_e.p.y-H,H,u)),Y.push(new Zm(_e.p.x+H,_e.p.y-H,H,u)),Y.push(new Zm(_e.p.x-H,_e.p.y+H,H,u)),Y.push(new Zm(_e.p.x+H,_e.p.y+H,H,u)),he+=4)}return d&&(console.log(`num probes: ${he}`),console.log(`best distance: ${te.d}`)),te.p}function rG(u,c){return c.max-u.max}function Zm(u,c,d,m){this.p=new x(u,c),this.h=d,this.d=function(w,E){let C=!1,O=1/0;for(let F=0;F<E.length;F++){const H=E[F];for(let Y=0,te=H.length,he=te-1;Y<te;he=Y++){const _e=H[Y],xe=H[he];_e.y>w.y!=xe.y>w.y&&w.x<(xe.x-_e.x)*(w.y-_e.y)/(xe.y-_e.y)+_e.x&&(C=!C),O=Math.min(O,e1(w,_e,xe))}}return(C?1:-1)*Math.sqrt(O)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}var sa;l.aq=void 0,(sa=l.aq||(l.aq={}))[sa.center=1]="center",sa[sa.left=2]="left",sa[sa.right=3]="right",sa[sa.top=4]="top",sa[sa.bottom=5]="bottom",sa[sa["top-left"]=6]="top-left",sa[sa["top-right"]=7]="top-right",sa[sa["bottom-left"]=8]="bottom-left",sa[sa["bottom-right"]=9]="bottom-right";const Fd=7,eE=Number.POSITIVE_INFINITY;function c8(u,c){return c[1]!==eE?function(d,m,w){let E=0,C=0;switch(m=Math.abs(m),w=Math.abs(w),d){case"top-right":case"top-left":case"top":C=w-Fd;break;case"bottom-right":case"bottom-left":case"bottom":C=-w+Fd}switch(d){case"top-right":case"bottom-right":case"right":E=-m;break;case"top-left":case"bottom-left":case"left":E=m}return[E,C]}(u,c[0],c[1]):function(d,m){let w=0,E=0;m<0&&(m=0);const C=m/Math.SQRT2;switch(d){case"top-right":case"top-left":E=C-Fd;break;case"bottom-right":case"bottom-left":E=-C+Fd;break;case"bottom":E=-m+Fd;break;case"top":E=m-Fd}switch(d){case"top-right":case"bottom-right":w=-C;break;case"top-left":case"bottom-left":w=C;break;case"left":w=m;break;case"right":w=-m}return[w,E]}(u,c[0])}function u8(u,c,d){var m;const w=u.layout,E=(m=w.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(c,{},d);if(E){const O=E.values,F=[];for(let H=0;H<O.length;H+=2){const Y=F[H]=O[H],te=O[H+1].map(he=>he*ms);Y.startsWith("top")?te[1]-=Fd:Y.startsWith("bottom")&&(te[1]+=Fd),F[H+1]=te}return new Vn(F)}const C=w.get("text-variable-anchor");if(C){let O;O=u._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[w.get("text-radial-offset").evaluate(c,{},d)*ms,eE]:w.get("text-offset").evaluate(c,{},d).map(H=>H*ms);const F=[];for(const H of C)F.push(H,c8(H,O));return new Vn(F)}return null}function tE(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function nG(u,c,d,m,w,E,C,O,F,H,Y){let te=E.textMaxSize.evaluate(c,{});te===void 0&&(te=C);const he=u.layers[0].layout,_e=he.get("icon-offset").evaluate(c,{},Y),xe=f8(d.horizontal),Re=C/24,He=u.tilePixelRatio*Re,Ye=u.tilePixelRatio*te/24,yt=u.tilePixelRatio*O,st=u.tilePixelRatio*he.get("symbol-spacing"),ut=he.get("text-padding")*u.tilePixelRatio,kt=function(Bt,Fr,Mr,hn=1){const Ri=Bt.get("icon-padding").evaluate(Fr,{},Mr),Ti=Ri&&Ri.values;return[Ti[0]*hn,Ti[1]*hn,Ti[2]*hn,Ti[3]*hn]}(he,c,Y,u.tilePixelRatio),tr=he.get("text-max-angle")/180*Math.PI,xr=he.get("text-rotation-alignment")!=="viewport"&&he.get("symbol-placement")!=="point",Xr=he.get("icon-rotation-alignment")==="map"&&he.get("symbol-placement")!=="point",vr=he.get("symbol-placement"),gr=st/2,Dr=he.get("icon-text-fit");let Cr;m&&Dr!=="none"&&(u.allowVerticalPlacement&&d.vertical&&(Cr=DM(m,d.vertical,Dr,he.get("icon-text-fit-padding"),_e,Re)),xe&&(m=DM(m,xe,Dr,he.get("icon-text-fit-padding"),_e,Re)));const Er=(Bt,Fr)=>{Fr.x<0||Fr.x>=Fi||Fr.y<0||Fr.y>=Fi||function(Mr,hn,Ri,Ti,Ls,hu,aa,Fs,rl,nl,il,Po,Bs,Ia,la,ol,ca,Mc,Cl,Qn,Bi,Xi,ec,xo,Jm){const Bh=Mr.addToLineVertexArray(hn,Ri);let zh,fu,Oc,Gs,Uf=0,_1=0,m8=0,y8=0,cE=-1,uE=-1;const jf={};let _8=Rd("");if(Mr.allowVerticalPlacement&&Ti.vertical){const Ra=Fs.layout.get("text-rotate").evaluate(Bi,{},xo)+90;Oc=new Hb(rl,hn,nl,il,Po,Ti.vertical,Bs,Ia,la,Ra),aa&&(Gs=new Hb(rl,hn,nl,il,Po,aa,ca,Mc,la,Ra))}if(Ls){const Ra=Fs.layout.get("icon-rotate").evaluate(Bi,{}),Nc=Fs.layout.get("icon-text-fit")!=="none",og=a8(Ls,Ra,ec,Nc),Xu=aa?a8(aa,Ra,ec,Nc):void 0;fu=new Hb(rl,hn,nl,il,Po,Ls,ca,Mc,!1,Ra),Uf=4*og.length;const sg=Mr.iconSizeData;let $h=null;sg.kind==="source"?($h=[Fh*Fs.layout.get("icon-size").evaluate(Bi,{})],$h[0]>Nd&&ve(`${Mr.layerIds[0]}: Value for "icon-size" is >= ${d1}. Reduce your "icon-size".`)):sg.kind==="composite"&&($h=[Fh*Xi.compositeIconSizes[0].evaluate(Bi,{},xo),Fh*Xi.compositeIconSizes[1].evaluate(Bi,{},xo)],($h[0]>Nd||$h[1]>Nd)&&ve(`${Mr.layerIds[0]}: Value for "icon-size" is >= ${d1}. Reduce your "icon-size".`)),Mr.addSymbols(Mr.icon,og,$h,Qn,Cl,Bi,l.ah.none,hn,Bh.lineStartIndex,Bh.lineLength,-1,xo),cE=Mr.icon.placedSymbolArray.length-1,Xu&&(_1=4*Xu.length,Mr.addSymbols(Mr.icon,Xu,$h,Qn,Cl,Bi,l.ah.vertical,hn,Bh.lineStartIndex,Bh.lineLength,-1,xo),uE=Mr.icon.placedSymbolArray.length-1)}const v8=Object.keys(Ti.horizontal);for(const Ra of v8){const Nc=Ti.horizontal[Ra];if(!zh){_8=Rd(Nc.text);const Xu=Fs.layout.get("text-rotate").evaluate(Bi,{},xo);zh=new Hb(rl,hn,nl,il,Po,Nc,Bs,Ia,la,Xu)}const og=Nc.positionedLines.length===1;if(m8+=h8(Mr,hn,Nc,hu,Fs,la,Bi,ol,Bh,Ti.vertical?l.ah.horizontal:l.ah.horizontalOnly,og?v8:[Ra],jf,cE,Xi,xo),og)break}Ti.vertical&&(y8+=h8(Mr,hn,Ti.vertical,hu,Fs,la,Bi,ol,Bh,l.ah.vertical,["vertical"],jf,uE,Xi,xo));const sG=zh?zh.boxStartIndex:Mr.collisionBoxArray.length,aG=zh?zh.boxEndIndex:Mr.collisionBoxArray.length,lG=Oc?Oc.boxStartIndex:Mr.collisionBoxArray.length,cG=Oc?Oc.boxEndIndex:Mr.collisionBoxArray.length,uG=fu?fu.boxStartIndex:Mr.collisionBoxArray.length,hG=fu?fu.boxEndIndex:Mr.collisionBoxArray.length,fG=Gs?Gs.boxStartIndex:Mr.collisionBoxArray.length,dG=Gs?Gs.boxEndIndex:Mr.collisionBoxArray.length;let Wu=-1;const Wb=(Ra,Nc)=>Ra&&Ra.circleDiameter?Math.max(Ra.circleDiameter,Nc):Nc;Wu=Wb(zh,Wu),Wu=Wb(Oc,Wu),Wu=Wb(fu,Wu),Wu=Wb(Gs,Wu);const b8=Wu>-1?1:0;b8&&(Wu*=Jm/ms),Mr.glyphOffsetArray.length>=Gm.MAX_GLYPHS&&ve("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Bi.sortKey!==void 0&&Mr.addToSortKeyRanges(Mr.symbolInstances.length,Bi.sortKey);const pG=u8(Fs,Bi,xo),[gG,mG]=function(Ra,Nc){const og=Ra.length,Xu=Nc==null?void 0:Nc.values;if((Xu==null?void 0:Xu.length)>0)for(let sg=0;sg<Xu.length;sg+=2){const $h=Xu[sg+1];Ra.emplaceBack(l.aq[Xu[sg]],$h[0],$h[1])}return[og,Ra.length]}(Mr.textAnchorOffsets,pG);Mr.symbolInstances.emplaceBack(hn.x,hn.y,jf.right>=0?jf.right:-1,jf.center>=0?jf.center:-1,jf.left>=0?jf.left:-1,jf.vertical||-1,cE,uE,_8,sG,aG,lG,cG,uG,hG,fG,dG,nl,m8,y8,Uf,_1,b8,0,Bs,Wu,gG,mG)}(u,Fr,Bt,d,m,w,Cr,u.layers[0],u.collisionBoxArray,c.index,c.sourceLayerIndex,u.index,He,[ut,ut,ut,ut],xr,F,yt,kt,Xr,_e,c,E,H,Y,C)};if(vr==="line")for(const Bt of t8(c.geometry,0,0,Fi,Fi)){const Fr=QK(Bt,st,tr,d.vertical||xe,m,24,Ye,u.overscaling,Fi);for(const Mr of Fr)xe&&iG(u,xe.text,gr,Mr)||Er(Bt,Mr)}else if(vr==="line-center"){for(const Bt of c.geometry)if(Bt.length>1){const Fr=JK(Bt,tr,d.vertical||xe,m,24,Ye);Fr&&Er(Bt,Fr)}}else if(c.type==="Polygon")for(const Bt of qa(c.geometry,0)){const Fr=tG(Bt,16);Er(Bt[0],new Ld(Fr.x,Fr.y,0))}else if(c.type==="LineString")for(const Bt of c.geometry)Er(Bt,new Ld(Bt[0].x,Bt[0].y,0));else if(c.type==="Point")for(const Bt of c.geometry)for(const Fr of Bt)Er([Fr],new Ld(Fr.x,Fr.y,0))}function h8(u,c,d,m,w,E,C,O,F,H,Y,te,he,_e,xe){const Re=function(yt,st,ut,kt,tr,xr,Xr,vr){const gr=kt.layout.get("text-rotate").evaluate(xr,{})*Math.PI/180,Dr=[];for(const Cr of st.positionedLines)for(const Er of Cr.positionedGlyphs){if(!Er.rect)continue;const Bt=Er.rect||{};let Fr=CM+1,Mr=!0,hn=1,Ri=0;const Ti=(tr||vr)&&Er.vertical,Ls=Er.metrics.advance*Er.scale/2;if(vr&&st.verticalizable&&(Ri=Cr.lineOffset/2-(Er.imageName?-(ms-Er.metrics.width*Er.scale)/2:(Er.scale-1)*ms)),Er.imageName){const Qn=Xr[Er.imageName];Mr=Qn.sdf,hn=Qn.pixelRatio,Fr=Tl/hn}const hu=tr?[Er.x+Ls,Er.y]:[0,0];let aa=tr?[0,0]:[Er.x+Ls+ut[0],Er.y+ut[1]-Ri],Fs=[0,0];Ti&&(Fs=aa,aa=[0,0]);const rl=Er.metrics.isDoubleResolution?2:1,nl=(Er.metrics.left-Fr)*Er.scale-Ls+aa[0],il=(-Er.metrics.top-Fr)*Er.scale+aa[1],Po=nl+Bt.w/rl*Er.scale/hn,Bs=il+Bt.h/rl*Er.scale/hn,Ia=new x(nl,il),la=new x(Po,il),ol=new x(nl,Bs),ca=new x(Po,Bs);if(Ti){const Qn=new x(-Ls,Ls-h1),Bi=-Math.PI/2,Xi=ms/2-Ls,ec=new x(5-h1-Xi,-(Er.imageName?Xi:0)),xo=new x(...Fs);Ia._rotateAround(Bi,Qn)._add(ec)._add(xo),la._rotateAround(Bi,Qn)._add(ec)._add(xo),ol._rotateAround(Bi,Qn)._add(ec)._add(xo),ca._rotateAround(Bi,Qn)._add(ec)._add(xo)}if(gr){const Qn=Math.sin(gr),Bi=Math.cos(gr),Xi=[Bi,-Qn,Qn,Bi];Ia._matMult(Xi),la._matMult(Xi),ol._matMult(Xi),ca._matMult(Xi)}const Mc=new x(0,0),Cl=new x(0,0);Dr.push({tl:Ia,tr:la,bl:ol,br:ca,tex:Bt,writingMode:st.writingMode,glyphOffset:hu,sectionIndex:Er.sectionIndex,isSDF:Mr,pixelOffsetTL:Mc,pixelOffsetBR:Cl,minFontScaleX:0,minFontScaleY:0})}return Dr}(0,d,O,w,E,C,m,u.allowVerticalPlacement),He=u.textSizeData;let Ye=null;He.kind==="source"?(Ye=[Fh*w.layout.get("text-size").evaluate(C,{})],Ye[0]>Nd&&ve(`${u.layerIds[0]}: Value for "text-size" is >= ${d1}. Reduce your "text-size".`)):He.kind==="composite"&&(Ye=[Fh*_e.compositeTextSizes[0].evaluate(C,{},xe),Fh*_e.compositeTextSizes[1].evaluate(C,{},xe)],(Ye[0]>Nd||Ye[1]>Nd)&&ve(`${u.layerIds[0]}: Value for "text-size" is >= ${d1}. Reduce your "text-size".`)),u.addSymbols(u.text,Re,Ye,O,E,C,H,c,F.lineStartIndex,F.lineLength,he,xe);for(const yt of Y)te[yt]=u.text.placedSymbolArray.length-1;return 4*Re.length}function f8(u){for(const c in u)return u[c];return null}function iG(u,c,d,m){const w=u.compareText;if(c in w){const E=w[c];for(let C=E.length-1;C>=0;C--)if(m.dist(E[C])<d)return!0}else w[c]=[];return w[c].push(m),!1}const d8=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class rE{static from(c){if(!(c instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,m]=new Uint8Array(c,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const w=m>>4;if(w!==1)throw new Error(`Got v${w} data when expected v1.`);const E=d8[15&m];if(!E)throw new Error("Unrecognized array type.");const[C]=new Uint16Array(c,2,1),[O]=new Uint32Array(c,4,1);return new rE(O,C,E,c)}constructor(c,d=64,m=Float64Array,w){if(isNaN(c)||c<0)throw new Error(`Unpexpected numItems value: ${c}.`);this.numItems=+c,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=m,this.IndexArrayType=c<65536?Uint16Array:Uint32Array;const E=d8.indexOf(this.ArrayType),C=2*c*this.ArrayType.BYTES_PER_ELEMENT,O=c*this.IndexArrayType.BYTES_PER_ELEMENT,F=(8-O%8)%8;if(E<0)throw new Error(`Unexpected typed array class: ${m}.`);w&&w instanceof ArrayBuffer?(this.data=w,this.ids=new this.IndexArrayType(this.data,8,c),this.coords=new this.ArrayType(this.data,8+O+F,2*c),this._pos=2*c,this._finished=!0):(this.data=new ArrayBuffer(8+C+O+F),this.ids=new this.IndexArrayType(this.data,8,c),this.coords=new this.ArrayType(this.data,8+O+F,2*c),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+E]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=c)}add(c,d){const m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=c,this.coords[this._pos++]=d,m}finish(){const c=this._pos>>1;if(c!==this.numItems)throw new Error(`Added ${c} items when expected ${this.numItems}.`);return nE(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(c,d,m,w){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:E,coords:C,nodeSize:O}=this,F=[0,E.length-1,0],H=[];for(;F.length;){const Y=F.pop()||0,te=F.pop()||0,he=F.pop()||0;if(te-he<=O){for(let He=he;He<=te;He++){const Ye=C[2*He],yt=C[2*He+1];Ye>=c&&Ye<=m&&yt>=d&&yt<=w&&H.push(E[He])}continue}const _e=he+te>>1,xe=C[2*_e],Re=C[2*_e+1];xe>=c&&xe<=m&&Re>=d&&Re<=w&&H.push(E[_e]),(Y===0?c<=xe:d<=Re)&&(F.push(he),F.push(_e-1),F.push(1-Y)),(Y===0?m>=xe:w>=Re)&&(F.push(_e+1),F.push(te),F.push(1-Y))}return H}within(c,d,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:E,nodeSize:C}=this,O=[0,w.length-1,0],F=[],H=m*m;for(;O.length;){const Y=O.pop()||0,te=O.pop()||0,he=O.pop()||0;if(te-he<=C){for(let He=he;He<=te;He++)g8(E[2*He],E[2*He+1],c,d)<=H&&F.push(w[He]);continue}const _e=he+te>>1,xe=E[2*_e],Re=E[2*_e+1];g8(xe,Re,c,d)<=H&&F.push(w[_e]),(Y===0?c-m<=xe:d-m<=Re)&&(O.push(he),O.push(_e-1),O.push(1-Y)),(Y===0?c+m>=xe:d+m>=Re)&&(O.push(_e+1),O.push(te),O.push(1-Y))}return F}}function nE(u,c,d,m,w,E){if(w-m<=d)return;const C=m+w>>1;p8(u,c,C,m,w,E),nE(u,c,d,m,C-1,1-E),nE(u,c,d,C+1,w,1-E)}function p8(u,c,d,m,w,E){for(;w>m;){if(w-m>600){const H=w-m+1,Y=d-m+1,te=Math.log(H),he=.5*Math.exp(2*te/3),_e=.5*Math.sqrt(te*he*(H-he)/H)*(Y-H/2<0?-1:1);p8(u,c,d,Math.max(m,Math.floor(d-Y*he/H+_e)),Math.min(w,Math.floor(d+(H-Y)*he/H+_e)),E)}const C=c[2*d+E];let O=m,F=w;for(m1(u,c,m,d),c[2*w+E]>C&&m1(u,c,m,w);O<F;){for(m1(u,c,O,F),O++,F--;c[2*O+E]<C;)O++;for(;c[2*F+E]>C;)F--}c[2*m+E]===C?m1(u,c,m,F):(F++,m1(u,c,F,w)),F<=d&&(m=F+1),d<=F&&(w=F-1)}}function m1(u,c,d,m){iE(u,d,m),iE(c,2*d,2*m),iE(c,2*d+1,2*m+1)}function iE(u,c,d){const m=u[c];u[c]=u[d],u[d]=m}function g8(u,c,d,m){const w=u-d,E=c-m;return w*w+E*E}var oE;l.bg=void 0,(oE=l.bg||(l.bg={})).create="create",oE.load="load",oE.fullLoad="fullLoad";let qb=null,y1=[];const sE=1e3/60,aE="loadTime",lE="fullLoadTime",oG={mark(u){performance.mark(u)},frame(u){const c=u;qb!=null&&y1.push(c-qb),qb=c},clearMetrics(){qb=null,y1=[],performance.clearMeasures(aE),performance.clearMeasures(lE);for(const u in l.bg)performance.clearMarks(l.bg[u])},getPerformanceMetrics(){performance.measure(aE,l.bg.create,l.bg.load),performance.measure(lE,l.bg.create,l.bg.fullLoad);const u=performance.getEntriesByName(aE)[0].duration,c=performance.getEntriesByName(lE)[0].duration,d=y1.length,m=1/(y1.reduce((E,C)=>E+C,0)/d/1e3),w=y1.filter(E=>E>sE).reduce((E,C)=>E+(C-sE)/sE,0);return{loadTime:u,fullLoadTime:c,fps:m,percentDroppedFrames:w/(d+w)*100,totalFrames:d}}};l.$=class extends W{},l.A=Vm,l.B=X_,l.C=function(u){if($e==null){const c=u.navigator?u.navigator.userAgent:null;$e=!!u.safari||!(!c||!(/\b(iPad|iPhone|iPod)\b/.test(c)||c.match("Safari")&&!c.match("Chrome")))}return $e},l.D=Rr,l.E=vt,l.F=class{constructor(u,c){this.target=u,this.mapId=c,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new YK(()=>this.process()),this.subscription=function(d,m,w,E){return d.addEventListener(m,w,!1),{unsubscribe:()=>{d.removeEventListener(m,w,!1)}}}(this.target,"message",d=>this.receive(d)),this.globalScope=je(self)?u:window}registerMessageHandler(u,c){this.messageHandlers[u]=c}sendAsync(u,c){return new Promise((d,m)=>{const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[w]={resolve:d,reject:m},c&&c.signal.addEventListener("abort",()=>{delete this.resolveRejects[w];const O={id:w,type:"<cancel>",origin:location.origin,targetMapId:u.targetMapId,sourceMapId:this.mapId};this.target.postMessage(O)},{once:!0});const E=[],C=Object.assign(Object.assign({},u),{id:w,sourceMapId:this.mapId,origin:location.origin,data:Ph(u.data,E)});this.target.postMessage(C,{transfer:E})})}receive(u){const c=u.data,d=c.id;if(!(c.origin!=="file://"&&location.origin!=="file://"&&c.origin!=="resource://android"&&location.origin!=="resource://android"&&c.origin!==location.origin||c.targetMapId&&this.mapId!==c.targetMapId)){if(c.type==="<cancel>"){delete this.tasks[d];const m=this.abortControllers[d];return delete this.abortControllers[d],void(m&&m.abort())}if(je(self)||c.mustQueue)return this.tasks[d]=c,this.taskQueue.push(d),void this.invoker.trigger();this.processTask(d,c)}}process(){if(this.taskQueue.length===0)return;const u=this.taskQueue.shift(),c=this.tasks[u];delete this.tasks[u],this.taskQueue.length>0&&this.invoker.trigger(),c&&this.processTask(u,c)}processTask(u,c){return s(this,void 0,void 0,function*(){if(c.type==="<response>"){const w=this.resolveRejects[u];return delete this.resolveRejects[u],w?void(c.error?w.reject(ju(c.error)):w.resolve(ju(c.data))):void 0}if(!this.messageHandlers[c.type])return void this.completeTask(u,new Error(`Could not find a registered handler for ${c.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const d=ju(c.data),m=new AbortController;this.abortControllers[u]=m;try{const w=yield this.messageHandlers[c.type](c.sourceMapId,d,m);this.completeTask(u,null,w)}catch(w){this.completeTask(u,w)}})}completeTask(u,c,d){const m=[];delete this.abortControllers[u];const w={id:u,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:c?Ph(c):null,data:Ph(d,m)};this.target.postMessage(w,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},l.G=qe,l.H=function(){var u=new Vm(16);return Vm!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},l.I=VA,l.J=function(u,c,d){var m,w,E,C,O,F,H,Y,te,he,_e,xe,Re=d[0],He=d[1],Ye=d[2];return c===u?(u[12]=c[0]*Re+c[4]*He+c[8]*Ye+c[12],u[13]=c[1]*Re+c[5]*He+c[9]*Ye+c[13],u[14]=c[2]*Re+c[6]*He+c[10]*Ye+c[14],u[15]=c[3]*Re+c[7]*He+c[11]*Ye+c[15]):(w=c[1],E=c[2],C=c[3],O=c[4],F=c[5],H=c[6],Y=c[7],te=c[8],he=c[9],_e=c[10],xe=c[11],u[0]=m=c[0],u[1]=w,u[2]=E,u[3]=C,u[4]=O,u[5]=F,u[6]=H,u[7]=Y,u[8]=te,u[9]=he,u[10]=_e,u[11]=xe,u[12]=m*Re+O*He+te*Ye+c[12],u[13]=w*Re+F*He+he*Ye+c[13],u[14]=E*Re+H*He+_e*Ye+c[14],u[15]=C*Re+Y*He+xe*Ye+c[15]),u},l.K=function(u,c,d){var m=d[0],w=d[1],E=d[2];return u[0]=c[0]*m,u[1]=c[1]*m,u[2]=c[2]*m,u[3]=c[3]*m,u[4]=c[4]*w,u[5]=c[5]*w,u[6]=c[6]*w,u[7]=c[7]*w,u[8]=c[8]*E,u[9]=c[9]*E,u[10]=c[10]*E,u[11]=c[11]*E,u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15],u},l.L=G6,l.M=function(u,c){const d={};for(let m=0;m<c.length;m++){const w=c[m];w in u&&(d[w]=u[w])}return d},l.N=Dd,l.O=HM,l.P=x,l.Q=qM,l.R=Rc,l.S=kc,l.T=Id,l.U=N,l.V=B,l.W=Ue,l.X=Fi,l.Y=P,l.Z=p1,l._=s,l.a=Oe,l.a$=function(u,c){var d=u[0],m=u[1],w=u[2],E=u[3],C=u[4],O=u[5],F=u[6],H=u[7],Y=u[8],te=u[9],he=u[10],_e=u[11],xe=u[12],Re=u[13],He=u[14],Ye=u[15],yt=c[0],st=c[1],ut=c[2],kt=c[3],tr=c[4],xr=c[5],Xr=c[6],vr=c[7],gr=c[8],Dr=c[9],Cr=c[10],Er=c[11],Bt=c[12],Fr=c[13],Mr=c[14],hn=c[15];return Math.abs(d-yt)<=tl*Math.max(1,Math.abs(d),Math.abs(yt))&&Math.abs(m-st)<=tl*Math.max(1,Math.abs(m),Math.abs(st))&&Math.abs(w-ut)<=tl*Math.max(1,Math.abs(w),Math.abs(ut))&&Math.abs(E-kt)<=tl*Math.max(1,Math.abs(E),Math.abs(kt))&&Math.abs(C-tr)<=tl*Math.max(1,Math.abs(C),Math.abs(tr))&&Math.abs(O-xr)<=tl*Math.max(1,Math.abs(O),Math.abs(xr))&&Math.abs(F-Xr)<=tl*Math.max(1,Math.abs(F),Math.abs(Xr))&&Math.abs(H-vr)<=tl*Math.max(1,Math.abs(H),Math.abs(vr))&&Math.abs(Y-gr)<=tl*Math.max(1,Math.abs(Y),Math.abs(gr))&&Math.abs(te-Dr)<=tl*Math.max(1,Math.abs(te),Math.abs(Dr))&&Math.abs(he-Cr)<=tl*Math.max(1,Math.abs(he),Math.abs(Cr))&&Math.abs(_e-Er)<=tl*Math.max(1,Math.abs(_e),Math.abs(Er))&&Math.abs(xe-Bt)<=tl*Math.max(1,Math.abs(xe),Math.abs(Bt))&&Math.abs(Re-Fr)<=tl*Math.max(1,Math.abs(Re),Math.abs(Fr))&&Math.abs(He-Mr)<=tl*Math.max(1,Math.abs(He),Math.abs(Mr))&&Math.abs(Ye-hn)<=tl*Math.max(1,Math.abs(Ye),Math.abs(hn))},l.a0=Dn,l.a1=QA,l.a2=_t,l.a3=u=>{const c=window.document.createElement("video");return c.muted=!0,new Promise(d=>{c.onloadstart=()=>{d(c)};for(const m of u){const w=window.document.createElement("source");lt(m)||(c.crossOrigin="Anonymous"),w.src=m,c.appendChild(w)}})},l.a4=function(){return re++},l.a5=or,l.a6=Gm,l.a7=ia,l.a8=Nh,l.a9=ZM,l.aA=function(u){if(u.type==="custom")return new GK(u);switch(u.type){case"background":return new WK(u);case"circle":return new OX(u);case"fill":return new YX(u);case"fill-extrusion":return new hK(u);case"heatmap":return new DX(u);case"hillshade":return new FX(u);case"line":return new vK(u);case"raster":return new KK(u);case"symbol":return new $b(u)}},l.aB=G,l.aC=function(u,c){if(!u)return[{command:"setStyle",args:[c]}];let d=[];try{if(!Tt(u.version,c.version))return[{command:"setStyle",args:[c]}];Tt(u.center,c.center)||d.push({command:"setCenter",args:[c.center]}),Tt(u.zoom,c.zoom)||d.push({command:"setZoom",args:[c.zoom]}),Tt(u.bearing,c.bearing)||d.push({command:"setBearing",args:[c.bearing]}),Tt(u.pitch,c.pitch)||d.push({command:"setPitch",args:[c.pitch]}),Tt(u.sprite,c.sprite)||d.push({command:"setSprite",args:[c.sprite]}),Tt(u.glyphs,c.glyphs)||d.push({command:"setGlyphs",args:[c.glyphs]}),Tt(u.transition,c.transition)||d.push({command:"setTransition",args:[c.transition]}),Tt(u.light,c.light)||d.push({command:"setLight",args:[c.light]}),Tt(u.terrain,c.terrain)||d.push({command:"setTerrain",args:[c.terrain]}),Tt(u.sky,c.sky)||d.push({command:"setSky",args:[c.sky]}),Tt(u.projection,c.projection)||d.push({command:"setProjection",args:[c.projection]});const m={},w=[];(function(C,O,F,H){let Y;for(Y in O=O||{},C=C||{})Object.prototype.hasOwnProperty.call(C,Y)&&(Object.prototype.hasOwnProperty.call(O,Y)||rr(Y,F,H));for(Y in O)Object.prototype.hasOwnProperty.call(O,Y)&&(Object.prototype.hasOwnProperty.call(C,Y)?Tt(C[Y],O[Y])||(C[Y].type==="geojson"&&O[Y].type==="geojson"&&It(C,O,Y)?Nt(F,{command:"setGeoJSONSourceData",args:[Y,O[Y].data]}):at(Y,O,F,H)):Zt(Y,O,F))})(u.sources,c.sources,w,m);const E=[];u.layers&&u.layers.forEach(C=>{"source"in C&&m[C.source]?d.push({command:"removeLayer",args:[C.id]}):E.push(C)}),d=d.concat(w),function(C,O,F){O=O||[];const H=(C=C||[]).map(lr),Y=O.map(lr),te=C.reduce(Pr,{}),he=O.reduce(Pr,{}),_e=H.slice(),xe=Object.create(null);let Re,He,Ye,yt,st;for(let ut=0,kt=0;ut<H.length;ut++)Re=H[ut],Object.prototype.hasOwnProperty.call(he,Re)?kt++:(Nt(F,{command:"removeLayer",args:[Re]}),_e.splice(_e.indexOf(Re,kt),1));for(let ut=0,kt=0;ut<Y.length;ut++)Re=Y[Y.length-1-ut],_e[_e.length-1-ut]!==Re&&(Object.prototype.hasOwnProperty.call(te,Re)?(Nt(F,{command:"removeLayer",args:[Re]}),_e.splice(_e.lastIndexOf(Re,_e.length-kt),1)):kt++,yt=_e[_e.length-ut],Nt(F,{command:"addLayer",args:[he[Re],yt]}),_e.splice(_e.length-ut,0,Re),xe[Re]=!0);for(let ut=0;ut<Y.length;ut++)if(Re=Y[ut],He=te[Re],Ye=he[Re],!xe[Re]&&!Tt(He,Ye))if(Tt(He.source,Ye.source)&&Tt(He["source-layer"],Ye["source-layer"])&&Tt(He.type,Ye.type)){for(st in Vt(He.layout,Ye.layout,F,Re,null,"setLayoutProperty"),Vt(He.paint,Ye.paint,F,Re,null,"setPaintProperty"),Tt(He.filter,Ye.filter)||Nt(F,{command:"setFilter",args:[Re,Ye.filter]}),Tt(He.minzoom,Ye.minzoom)&&Tt(He.maxzoom,Ye.maxzoom)||Nt(F,{command:"setLayerZoomRange",args:[Re,Ye.minzoom,Ye.maxzoom]}),He)Object.prototype.hasOwnProperty.call(He,st)&&st!=="layout"&&st!=="paint"&&st!=="filter"&&st!=="metadata"&&st!=="minzoom"&&st!=="maxzoom"&&(st.indexOf("paint.")===0?Vt(He[st],Ye[st],F,Re,st.slice(6),"setPaintProperty"):Tt(He[st],Ye[st])||Nt(F,{command:"setLayerProperty",args:[Re,st,Ye[st]]}));for(st in Ye)Object.prototype.hasOwnProperty.call(Ye,st)&&!Object.prototype.hasOwnProperty.call(He,st)&&st!=="layout"&&st!=="paint"&&st!=="filter"&&st!=="metadata"&&st!=="minzoom"&&st!=="maxzoom"&&(st.indexOf("paint.")===0?Vt(He[st],Ye[st],F,Re,st.slice(6),"setPaintProperty"):Tt(He[st],Ye[st])||Nt(F,{command:"setLayerProperty",args:[Re,st,Ye[st]]}))}else Nt(F,{command:"removeLayer",args:[Re]}),yt=_e[_e.lastIndexOf(Re)+1],Nt(F,{command:"addLayer",args:[Ye,yt]})}(E,c.layers,d)}catch(m){console.warn("Unable to compute style diff:",m),d=[{command:"setStyle",args:[c]}]}return d},l.aD=function(u){const c=[],d=u.id;return d===void 0&&c.push({message:`layers.${d}: missing required property "id"`}),u.render===void 0&&c.push({message:`layers.${d}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&c.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),c},l.aE=function u(c,d){if(Array.isArray(c)){if(!Array.isArray(d)||c.length!==d.length)return!1;for(let m=0;m<c.length;m++)if(!u(c[m],d[m]))return!1;return!0}if(typeof c=="object"&&c!==null&&d!==null){if(typeof d!="object"||Object.keys(c).length!==Object.keys(d).length)return!1;for(const m in c)if(!u(c[m],d[m]))return!1;return!0}return c===d},l.aF=Se,l.aG=J,l.aH=class extends Mh{constructor(u,c){super(u,c),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},l.aI=Qp,l.aJ=class extends Mh{constructor(u,c){super(u,c),this.current=tg}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let c=1;c<16;c++)if(u[c]!==this.current[c]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},l.aK=eg,l.aL=Fm,l.aM=En,l.aN=class extends Mh{constructor(u,c){super(u,c),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},l.aO=class extends Mh{constructor(u,c){super(u,c),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},l.aP=function(u,c,d,m,w,E,C){var O=1/(c-d),F=1/(m-w),H=1/(E-C);return u[0]=-2*O,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*F,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*H,u[11]=0,u[12]=(c+d)*O,u[13]=(w+m)*F,u[14]=(C+E)*H,u[15]=1,u},l.aQ=MX,l.aR=class extends ze{},l.aS=SK,l.aT=class extends Ge{},l.aU=kA,l.aV=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},l.aW=eM,l.aX=Wi,l.aY=Ns,l.aZ=class extends Yt{},l.a_=function(u,c){return u[0]===c[0]&&u[1]===c[1]&&u[2]===c[2]&&u[3]===c[3]&&u[4]===c[4]&&u[5]===c[5]&&u[6]===c[6]&&u[7]===c[7]&&u[8]===c[8]&&u[9]===c[9]&&u[10]===c[10]&&u[11]===c[11]&&u[12]===c[12]&&u[13]===c[13]&&u[14]===c[14]&&u[15]===c[15]},l.aa=function(u){const c={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(d,m,w,E)=>{const C=w||E;return c[m]=!C||C.toLowerCase(),""}),c["max-age"]){const d=parseInt(c["max-age"],10);isNaN(d)?delete c["max-age"]:c["max-age"]=d}return c},l.ab=function(u,c){const d=[];for(const m in u)m in c||d.push(m);return d},l.ac=ne,l.ad=function(u,c,d){var m=Math.sin(d),w=Math.cos(d),E=c[0],C=c[1],O=c[2],F=c[3],H=c[4],Y=c[5],te=c[6],he=c[7];return c!==u&&(u[8]=c[8],u[9]=c[9],u[10]=c[10],u[11]=c[11],u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15]),u[0]=E*w+H*m,u[1]=C*w+Y*m,u[2]=O*w+te*m,u[3]=F*w+he*m,u[4]=H*w-E*m,u[5]=Y*w-C*m,u[6]=te*w-O*m,u[7]=he*w-F*m,u},l.ae=function(u){var c=new Vm(16);return c[0]=u[0],c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=u[6],c[7]=u[7],c[8]=u[8],c[9]=u[9],c[10]=u[10],c[11]=u[11],c[12]=u[12],c[13]=u[13],c[14]=u[14],c[15]=u[15],c},l.af=kb,l.ag=function(u,c){let d=0,m=0;if(u.kind==="constant")m=u.layoutSize;else if(u.kind!=="source"){const{interpolationType:w,minZoom:E,maxZoom:C}=u,O=w?ne(br.interpolationFactor(w,c,E,C),0,1):0;u.kind==="camera"?m=zr.number(u.minSize,u.maxSize,O):d=O}return{uSizeT:d,uSize:m}},l.ai=function(u,{uSize:c,uSizeT:d},{lowerSize:m,upperSize:w}){return u.kind==="source"?m/Fh:u.kind==="composite"?zr.number(m/Fh,w/Fh,d):c},l.aj=XA,l.ak=function(u,c,d,m){const w=c.y-u.y,E=c.x-u.x,C=m.y-d.y,O=m.x-d.x,F=C*E-O*w;if(F===0)return null;const H=(O*(u.y-d.y)-C*(u.x-d.x))/F;return new x(u.x+H*E,u.y+H*w)},l.al=t8,l.am=$m,l.an=PA,l.ao=function(u){let c=1/0,d=1/0,m=-1/0,w=-1/0;for(const E of u)c=Math.min(c,E.x),d=Math.min(d,E.y),m=Math.max(m,E.x),w=Math.max(w,E.y);return[c,d,m,w]},l.ap=ms,l.ar=WA,l.as=function(u,c){var d=c[0],m=c[1],w=c[2],E=c[3],C=c[4],O=c[5],F=c[6],H=c[7],Y=c[8],te=c[9],he=c[10],_e=c[11],xe=c[12],Re=c[13],He=c[14],Ye=c[15],yt=d*O-m*C,st=d*F-w*C,ut=d*H-E*C,kt=m*F-w*O,tr=m*H-E*O,xr=w*H-E*F,Xr=Y*Re-te*xe,vr=Y*He-he*xe,gr=Y*Ye-_e*xe,Dr=te*He-he*Re,Cr=te*Ye-_e*Re,Er=he*Ye-_e*He,Bt=yt*Er-st*Cr+ut*Dr+kt*gr-tr*vr+xr*Xr;return Bt?(u[0]=(O*Er-F*Cr+H*Dr)*(Bt=1/Bt),u[1]=(w*Cr-m*Er-E*Dr)*Bt,u[2]=(Re*xr-He*tr+Ye*kt)*Bt,u[3]=(he*tr-te*xr-_e*kt)*Bt,u[4]=(F*gr-C*Er-H*vr)*Bt,u[5]=(d*Er-w*gr+E*vr)*Bt,u[6]=(He*ut-xe*xr-Ye*st)*Bt,u[7]=(Y*xr-he*ut+_e*st)*Bt,u[8]=(C*Cr-O*gr+H*Xr)*Bt,u[9]=(m*gr-d*Cr-E*Xr)*Bt,u[10]=(xe*tr-Re*ut+Ye*yt)*Bt,u[11]=(te*ut-Y*tr-_e*yt)*Bt,u[12]=(O*vr-C*Dr-F*Xr)*Bt,u[13]=(d*Dr-m*vr+w*Xr)*Bt,u[14]=(Re*st-xe*kt-He*yt)*Bt,u[15]=(Y*kt-te*st+he*yt)*Bt,u):null},l.at=tE,l.au=qA,l.av=rE,l.aw=function(){const u={},c=pe.$version;for(const d in pe.$root){const m=pe.$root[d];if(m.required){let w=null;w=d==="version"?c:m.type==="array"?[]:{},w!=null&&(u[d]=w)}}return u},l.ax=Zl,l.ay=We,l.az=function(u){u=u.slice();const c=Object.create(null);for(let d=0;d<u.length;d++)c[u[d].id]=u[d];for(let d=0;d<u.length;d++)"ref"in u[d]&&(u[d]=sr(u[d],c[u[d].ref]));return u},l.b=Ze,l.b0=function(u,c){return u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u[4]=c[4],u[5]=c[5],u[6]=c[6],u[7]=c[7],u[8]=c[8],u[9]=c[9],u[10]=c[10],u[11]=c[11],u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15],u},l.b1=function(u,c,d){return u[0]=c[0]*d[0],u[1]=c[1]*d[1],u[2]=c[2]*d[2],u[3]=c[3]*d[3],u},l.b2=function(u,c){return u[0]*c[0]+u[1]*c[1]+u[2]*c[2]+u[3]*c[3]},l.b3=ee,l.b4=KM,l.b5=WM,l.b6=function(u,c,d,m,w){var E,C=1/Math.tan(c/2);return u[0]=C/d,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=C,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,w!=null&&w!==1/0?(u[10]=(w+m)*(E=1/(m-w)),u[14]=2*w*m*E):(u[10]=-1,u[14]=-2*m),u},l.b7=function(u,c,d){var m=Math.sin(d),w=Math.cos(d),E=c[4],C=c[5],O=c[6],F=c[7],H=c[8],Y=c[9],te=c[10],he=c[11];return c!==u&&(u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15]),u[4]=E*w+H*m,u[5]=C*w+Y*m,u[6]=O*w+te*m,u[7]=F*w+he*m,u[8]=H*w-E*m,u[9]=Y*w-C*m,u[10]=te*w-O*m,u[11]=he*w-F*m,u},l.b8=U,l.b9=K,l.bA=bM,l.bB=function(u){return u.message===ce},l.bC=Si,l.bD=Ea,l.ba=function(u){return u*Math.PI/180},l.bb=function(u,c){const{x:d,y:m}=p1.fromLngLat(c);return!(u<0||u>25||m<0||m>=1||d<0||d>=1)},l.bc=function(u,c){return u[0]=c[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=c[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=c[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},l.bd=class extends V{},l.be=ZA,l.bf=oG,l.bh=tt,l.bi=function(u,c){Oe.REGISTERED_PROTOCOLS[u]=c},l.bj=function(u){delete Oe.REGISTERED_PROTOCOLS[u]},l.bk=function(u,c){const d={};for(let w=0;w<u.length;w++){const E=c&&c[u[w].id]||wa(u[w]);c&&(c[u[w].id]=E);let C=d[E];C||(C=d[E]=[]),C.push(u[w])}const m=[];for(const w in d)m.push(d[w]);return m},l.bl=Sr,l.bm=YM,l.bn=JM,l.bo=IM,l.bp=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=Fi/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;const c=u.bucket.layers[0],d=c.layout,m=c._unevaluatedLayout._values,w={layoutIconSize:m["icon-size"].possiblyEvaluate(new Ai(u.bucket.zoom+1),u.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new Ai(u.bucket.zoom+1),u.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new Ai(18))};if(u.bucket.textSizeData.kind==="composite"){const{minZoom:H,maxZoom:Y}=u.bucket.textSizeData;w.compositeTextSizes=[m["text-size"].possiblyEvaluate(new Ai(H),u.canonical),m["text-size"].possiblyEvaluate(new Ai(Y),u.canonical)]}if(u.bucket.iconSizeData.kind==="composite"){const{minZoom:H,maxZoom:Y}=u.bucket.iconSizeData;w.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new Ai(H),u.canonical),m["icon-size"].possiblyEvaluate(new Ai(Y),u.canonical)]}const E=d.get("text-line-height")*ms,C=d.get("text-rotation-alignment")!=="viewport"&&d.get("symbol-placement")!=="point",O=d.get("text-keep-upright"),F=d.get("text-size");for(const H of u.bucket.features){const Y=d.get("text-font").evaluate(H,{},u.canonical).join(","),te=F.evaluate(H,{},u.canonical),he=w.layoutTextSize.evaluate(H,{},u.canonical),_e=w.layoutIconSize.evaluate(H,{},u.canonical),xe={horizontal:{},vertical:void 0},Re=H.text;let He,Ye=[0,0];if(Re){const ut=Re.toString(),kt=d.get("text-letter-spacing").evaluate(H,{},u.canonical)*ms,tr=K_(ut)?kt:0,xr=d.get("text-anchor").evaluate(H,{},u.canonical),Xr=u8(c,H,u.canonical);if(!Xr){const Cr=d.get("text-radial-offset").evaluate(H,{},u.canonical);Ye=Cr?c8(xr,[Cr*ms,eE]):d.get("text-offset").evaluate(H,{},u.canonical).map(Er=>Er*ms)}let vr=C?"center":d.get("text-justify").evaluate(H,{},u.canonical);const gr=d.get("symbol-placement")==="point"?d.get("text-max-width").evaluate(H,{},u.canonical)*ms:1/0,Dr=()=>{u.bucket.allowVerticalPlacement&&Gp(ut)&&(xe.vertical=Fb(Re,u.glyphMap,u.glyphPositions,u.imagePositions,Y,gr,E,xr,"left",tr,Ye,l.ah.vertical,!0,he,te))};if(!C&&Xr){const Cr=new Set;if(vr==="auto")for(let Bt=0;Bt<Xr.values.length;Bt+=2)Cr.add(tE(Xr.values[Bt]));else Cr.add(vr);let Er=!1;for(const Bt of Cr)if(!xe.horizontal[Bt])if(Er)xe.horizontal[Bt]=xe.horizontal[0];else{const Fr=Fb(Re,u.glyphMap,u.glyphPositions,u.imagePositions,Y,gr,E,"center",Bt,tr,Ye,l.ah.horizontal,!1,he,te);Fr&&(xe.horizontal[Bt]=Fr,Er=Fr.positionedLines.length===1)}Dr()}else{vr==="auto"&&(vr=tE(xr));const Cr=Fb(Re,u.glyphMap,u.glyphPositions,u.imagePositions,Y,gr,E,xr,vr,tr,Ye,l.ah.horizontal,!1,he,te);Cr&&(xe.horizontal[vr]=Cr),Dr(),Gp(ut)&&C&&O&&(xe.vertical=Fb(Re,u.glyphMap,u.glyphPositions,u.imagePositions,Y,gr,E,xr,vr,tr,Ye,l.ah.vertical,!1,he,te))}}let yt=!1;if(H.icon&&H.icon.name){const ut=u.imageMap[H.icon.name];ut&&(He=UK(u.imagePositions[H.icon.name],d.get("icon-offset").evaluate(H,{},u.canonical),d.get("icon-anchor").evaluate(H,{},u.canonical)),yt=!!ut.sdf,u.bucket.sdfIcons===void 0?u.bucket.sdfIcons=yt:u.bucket.sdfIcons!==yt&&ve("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ut.pixelRatio!==u.bucket.pixelRatio||d.get("icon-rotate").constantOr(1)!==0)&&(u.bucket.iconsNeedLinear=!0))}const st=f8(xe.horizontal)||xe.vertical;u.bucket.iconsInText=!!st&&st.iconsInText,(st||He)&&nG(u.bucket,H,xe,He,u.imageMap,w,he,_e,Ye,yt,u.canonical)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},l.bq=zA,l.br=LA,l.bs=BA,l.bt=Md,l.bu=UA,l.bv=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return u.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},l.bw=function(u,c,d,m,w){return s(this,void 0,void 0,function*(){if(B())try{return yield Ue(u,c,d,m,w)}catch{}return function(E,C,O,F,H){const Y=E.width,te=E.height;Qe&&ct||(Qe=new OffscreenCanvas(Y,te),ct=Qe.getContext("2d",{willReadFrequently:!0})),Qe.width=Y,Qe.height=te,ct.drawImage(E,0,0,Y,te);const he=ct.getImageData(C,O,F,H);return ct.clearRect(0,0,Y,te),he.data}(u,c,d,m,w)})},l.bx=GM,l.by=f,l.bz=p,l.c=be,l.d=u=>s(void 0,void 0,void 0,function*(){if(u.byteLength===0)return createImageBitmap(new ImageData(1,1));const c=new Blob([new Uint8Array(u)],{type:"image/png"});try{return createImageBitmap(c)}catch(d){throw new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),l.e=Q,l.f=u=>new Promise((c,d)=>{const m=new Image;m.onload=()=>{c(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame(()=>{m.src=Me})},m.onerror=()=>d(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const w=new Blob([new Uint8Array(u)],{type:"image/png"});m.src=u.byteLength?URL.createObjectURL(w):Me}),l.g=Be,l.h=(u,c)=>Xe(Q(u,{type:"json"}),c),l.i=je,l.j=zt,l.k=At,l.l=(u,c)=>Xe(Q(u,{type:"arrayBuffer"}),c),l.m=Xe,l.n=function(u){return new UA(u).readFields(NK,[])},l.o=i1,l.p=PM,l.q=y,l.r=Rf,l.s=lt,l.t=Kp,l.u=Tc,l.v=pe,l.w=ve,l.x=function([u,c,d]){return c+=90,c*=Math.PI/180,d*=Math.PI/180,{x:u*Math.cos(c)*Math.sin(d),y:u*Math.sin(c)*Math.sin(d),z:u*Math.cos(d)}},l.y=zr,l.z=Ai}),i("worker",["./shared"],function(l){class s{constructor(ae){this.keyCache={},ae&&this.replace(ae)}replace(ae){this._layerConfigs={},this._layers={},this.update(ae,[])}update(ae,ue){for(const Fe of ae){this._layerConfigs[Fe.id]=Fe;const rt=this._layers[Fe.id]=l.aA(Fe);rt._featureFilter=l.a7(rt.filter),this.keyCache[Fe.id]&&delete this.keyCache[Fe.id]}for(const Fe of ue)delete this.keyCache[Fe],delete this._layerConfigs[Fe],delete this._layers[Fe];this.familiesBySource={};const Ee=l.bk(Object.values(this._layerConfigs),this.keyCache);for(const Fe of Ee){const rt=Fe.map(gt=>this._layers[gt.id]),it=rt[0];if(it.visibility==="none")continue;const et=it.source||"";let Ke=this.familiesBySource[et];Ke||(Ke=this.familiesBySource[et]={});const Et=it.sourceLayer||"_geojsonTileLayer";let Rt=Ke[Et];Rt||(Rt=Ke[Et]=[]),Rt.push(rt)}}}class f{constructor(ae){const ue={},Ee=[];for(const et in ae){const Ke=ae[et],Et=ue[et]={};for(const Rt in Ke){const gt=Ke[+Rt];if(!gt||gt.bitmap.width===0||gt.bitmap.height===0)continue;const Wt={x:0,y:0,w:gt.bitmap.width+2,h:gt.bitmap.height+2};Ee.push(Wt),Et[Rt]={rect:Wt,metrics:gt.metrics}}}const{w:Fe,h:rt}=l.p(Ee),it=new l.o({width:Fe||1,height:rt||1});for(const et in ae){const Ke=ae[et];for(const Et in Ke){const Rt=Ke[+Et];if(!Rt||Rt.bitmap.width===0||Rt.bitmap.height===0)continue;const gt=ue[et][Et].rect;l.o.copy(Rt.bitmap,it,{x:0,y:0},{x:gt.x+1,y:gt.y+1},Rt.bitmap)}}this.image=it,this.positions=ue}}l.bl("GlyphAtlas",f);class p{constructor(ae){this.tileID=new l.S(ae.tileID.overscaledZ,ae.tileID.wrap,ae.tileID.canonical.z,ae.tileID.canonical.x,ae.tileID.canonical.y),this.uid=ae.uid,this.zoom=ae.zoom,this.pixelRatio=ae.pixelRatio,this.tileSize=ae.tileSize,this.source=ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ae.showCollisionBoxes,this.collectResourceTiming=!!ae.collectResourceTiming,this.returnDependencies=!!ae.returnDependencies,this.promoteId=ae.promoteId,this.inFlightDependencies=[]}parse(ae,ue,Ee,Fe){return l._(this,void 0,void 0,function*(){this.status="parsing",this.data=ae,this.collisionBoxArray=new l.a5;const rt=new l.bm(Object.keys(ae.layers).sort()),it=new l.bn(this.tileID,this.promoteId);it.bucketLayerIDs=[];const et={},Ke={featureIndex:it,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ee},Et=ue.familiesBySource[this.source];for(const Ur in Et){const vn=ae.layers[Ur];if(!vn)continue;vn.version===1&&l.w(`Vector tile source "${this.source}" layer "${Ur}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Fn=rt.encode(Ur),ei=[];for(let mi=0;mi<vn.length;mi++){const Ii=vn.feature(mi),ma=it.getId(Ii,Ur);ei.push({feature:Ii,id:ma,index:mi,sourceLayerIndex:Fn})}for(const mi of Et[Ur]){const Ii=mi[0];Ii.source!==this.source&&l.w(`layer.source = ${Ii.source} does not equal this.source = ${this.source}`),Ii.minzoom&&this.zoom<Math.floor(Ii.minzoom)||Ii.maxzoom&&this.zoom>=Ii.maxzoom||Ii.visibility!=="none"&&(v(mi,this.zoom,Ee),(et[Ii.id]=Ii.createBucket({index:it.bucketLayerIDs.length,layers:mi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Fn,sourceID:this.source})).populate(ei,Ke,this.tileID.canonical),it.bucketLayerIDs.push(mi.map(ma=>ma.id)))}}const Rt=l.aF(Ke.glyphDependencies,Ur=>Object.keys(Ur).map(Number));this.inFlightDependencies.forEach(Ur=>Ur==null?void 0:Ur.abort()),this.inFlightDependencies=[];let gt=Promise.resolve({});if(Object.keys(Rt).length){const Ur=new AbortController;this.inFlightDependencies.push(Ur),gt=Fe.sendAsync({type:"GG",data:{stacks:Rt,source:this.source,tileID:this.tileID,type:"glyphs"}},Ur)}const Wt=Object.keys(Ke.iconDependencies);let mr=Promise.resolve({});if(Wt.length){const Ur=new AbortController;this.inFlightDependencies.push(Ur),mr=Fe.sendAsync({type:"GI",data:{icons:Wt,source:this.source,tileID:this.tileID,type:"icons"}},Ur)}const Ar=Object.keys(Ke.patternDependencies);let pn=Promise.resolve({});if(Ar.length){const Ur=new AbortController;this.inFlightDependencies.push(Ur),pn=Fe.sendAsync({type:"GI",data:{icons:Ar,source:this.source,tileID:this.tileID,type:"patterns"}},Ur)}const[Or,en,Zr]=yield Promise.all([gt,mr,pn]),jn=new f(Or),Jr=new l.bo(en,Zr);for(const Ur in et){const vn=et[Ur];vn instanceof l.a6?(v(vn.layers,this.zoom,Ee),l.bp({bucket:vn,glyphMap:Or,glyphPositions:jn.positions,imageMap:en,imagePositions:Jr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):vn.hasPattern&&(vn instanceof l.bq||vn instanceof l.br||vn instanceof l.bs)&&(v(vn.layers,this.zoom,Ee),vn.addFeatures(Ke,this.tileID.canonical,Jr.patternPositions))}return this.status="done",{buckets:Object.values(et).filter(Ur=>!Ur.isEmpty()),featureIndex:it,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:jn.image,imageAtlas:Jr,glyphMap:this.returnDependencies?Or:null,iconMap:this.returnDependencies?en:null,glyphPositions:this.returnDependencies?jn.positions:null}})}}function v(Ne,ae,ue){const Ee=new l.z(ae);for(const Fe of Ne)Fe.recalculate(Ee,ue)}class x{constructor(ae,ue,Ee){this.actor=ae,this.layerIndex=ue,this.availableImages=Ee,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ae,ue){return l._(this,void 0,void 0,function*(){const Ee=yield l.l(ae.request,ue);try{return{vectorTile:new l.bt.VectorTile(new l.bu(Ee.data)),rawData:Ee.data,cacheControl:Ee.cacheControl,expires:Ee.expires}}catch(Fe){const rt=new Uint8Array(Ee.data);let it=`Unable to parse the tile at ${ae.request.url}, `;throw it+=rt[0]===31&&rt[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Fe.message}`,new Error(it)}})}loadTile(ae){return l._(this,void 0,void 0,function*(){const ue=ae.uid,Ee=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new l.bv(ae.request),Fe=new p(ae);this.loading[ue]=Fe;const rt=new AbortController;Fe.abort=rt;try{const it=yield this.loadVectorTile(ae,rt);if(delete this.loading[ue],!it)return null;const et=it.rawData,Ke={};it.expires&&(Ke.expires=it.expires),it.cacheControl&&(Ke.cacheControl=it.cacheControl);const Et={};if(Ee){const gt=Ee.finish();gt&&(Et.resourceTiming=JSON.parse(JSON.stringify(gt)))}Fe.vectorTile=it.vectorTile;const Rt=Fe.parse(it.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[ue]=Fe,this.fetching[ue]={rawTileData:et,cacheControl:Ke,resourceTiming:Et};try{const gt=yield Rt;return l.e({rawTileData:et.slice(0)},gt,Ke,Et)}finally{delete this.fetching[ue]}}catch(it){throw delete this.loading[ue],Fe.status="done",this.loaded[ue]=Fe,it}})}reloadTile(ae){return l._(this,void 0,void 0,function*(){const ue=ae.uid;if(!this.loaded||!this.loaded[ue])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Ee=this.loaded[ue];if(Ee.showCollisionBoxes=ae.showCollisionBoxes,Ee.status==="parsing"){const Fe=yield Ee.parse(Ee.vectorTile,this.layerIndex,this.availableImages,this.actor);let rt;if(this.fetching[ue]){const{rawTileData:it,cacheControl:et,resourceTiming:Ke}=this.fetching[ue];delete this.fetching[ue],rt=l.e({rawTileData:it.slice(0)},Fe,et,Ke)}else rt=Fe;return rt}if(Ee.status==="done"&&Ee.vectorTile)return Ee.parse(Ee.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(ae){return l._(this,void 0,void 0,function*(){const ue=this.loading,Ee=ae.uid;ue&&ue[Ee]&&ue[Ee].abort&&(ue[Ee].abort.abort(),delete ue[Ee])})}removeTile(ae){return l._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ae.uid]&&delete this.loaded[ae.uid]})}}class S{constructor(){this.loaded={}}loadTile(ae){return l._(this,void 0,void 0,function*(){const{uid:ue,encoding:Ee,rawImageData:Fe,redFactor:rt,greenFactor:it,blueFactor:et,baseShift:Ke}=ae,Et=Fe.width+2,Rt=Fe.height+2,gt=l.b(Fe)?new l.R({width:Et,height:Rt},yield l.bw(Fe,-1,-1,Et,Rt)):Fe,Wt=new l.bx(ue,gt,Ee,rt,it,et,Ke);return this.loaded=this.loaded||{},this.loaded[ue]=Wt,Wt})}removeTile(ae){const ue=this.loaded,Ee=ae.uid;ue&&ue[Ee]&&delete ue[Ee]}}function A(Ne,ae){if(Ne.length!==0){k(Ne[0],ae);for(var ue=1;ue<Ne.length;ue++)k(Ne[ue],!ae)}}function k(Ne,ae){for(var ue=0,Ee=0,Fe=0,rt=Ne.length,it=rt-1;Fe<rt;it=Fe++){var et=(Ne[Fe][0]-Ne[it][0])*(Ne[it][1]+Ne[Fe][1]),Ke=ue+et;Ee+=Math.abs(ue)>=Math.abs(et)?ue-Ke+et:et-Ke+ue,ue=Ke}ue+Ee>=0!=!!ae&&Ne.reverse()}var R=l.by(function Ne(ae,ue){var Ee,Fe=ae&&ae.type;if(Fe==="FeatureCollection")for(Ee=0;Ee<ae.features.length;Ee++)Ne(ae.features[Ee],ue);else if(Fe==="GeometryCollection")for(Ee=0;Ee<ae.geometries.length;Ee++)Ne(ae.geometries[Ee],ue);else if(Fe==="Feature")Ne(ae.geometry,ue);else if(Fe==="Polygon")A(ae.coordinates,ue);else if(Fe==="MultiPolygon")for(Ee=0;Ee<ae.coordinates.length;Ee++)A(ae.coordinates[Ee],ue);return ae});const z=l.bt.VectorTileFeature.prototype.toGeoJSON;var N={exports:{}},B=l.bz,U=l.bt.VectorTileFeature,K=ne;function ne(Ne,ae){this.options=ae||{},this.features=Ne,this.length=Ne.length}function ee(Ne,ae){this.id=typeof Ne.id=="number"?Ne.id:void 0,this.type=Ne.type,this.rawGeometry=Ne.type===1?[Ne.geometry]:Ne.geometry,this.properties=Ne.tags,this.extent=ae||4096}ne.prototype.feature=function(Ne){return new ee(this.features[Ne],this.options.extent)},ee.prototype.loadGeometry=function(){var Ne=this.rawGeometry;this.geometry=[];for(var ae=0;ae<Ne.length;ae++){for(var ue=Ne[ae],Ee=[],Fe=0;Fe<ue.length;Fe++)Ee.push(new B(ue[Fe][0],ue[Fe][1]));this.geometry.push(Ee)}return this.geometry},ee.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ne=this.geometry,ae=1/0,ue=-1/0,Ee=1/0,Fe=-1/0,rt=0;rt<Ne.length;rt++)for(var it=Ne[rt],et=0;et<it.length;et++){var Ke=it[et];ae=Math.min(ae,Ke.x),ue=Math.max(ue,Ke.x),Ee=Math.min(Ee,Ke.y),Fe=Math.max(Fe,Ke.y)}return[ae,Ee,ue,Fe]},ee.prototype.toGeoJSON=U.prototype.toGeoJSON;var Q=l.bA,re=K;function Se(Ne){var ae=new Q;return function(ue,Ee){for(var Fe in ue.layers)Ee.writeMessage(3,J,ue.layers[Fe])}(Ne,ae),ae.finish()}function J(Ne,ae){var ue;ae.writeVarintField(15,Ne.version||1),ae.writeStringField(1,Ne.name||""),ae.writeVarintField(5,Ne.extent||4096);var Ee={keys:[],values:[],keycache:{},valuecache:{}};for(ue=0;ue<Ne.length;ue++)Ee.feature=Ne.feature(ue),ae.writeMessage(2,G,Ee);var Fe=Ee.keys;for(ue=0;ue<Fe.length;ue++)ae.writeStringField(3,Fe[ue]);var rt=Ee.values;for(ue=0;ue<rt.length;ue++)ae.writeMessage(4,$e,rt[ue])}function G(Ne,ae){var ue=Ne.feature;ue.id!==void 0&&ae.writeVarintField(1,ue.id),ae.writeMessage(2,se,Ne),ae.writeVarintField(3,ue.type),ae.writeMessage(4,je,ue)}function se(Ne,ae){var ue=Ne.feature,Ee=Ne.keys,Fe=Ne.values,rt=Ne.keycache,it=Ne.valuecache;for(var et in ue.properties){var Ke=ue.properties[et],Et=rt[et];if(Ke!==null){Et===void 0&&(Ee.push(et),rt[et]=Et=Ee.length-1),ae.writeVarint(Et);var Rt=typeof Ke;Rt!=="string"&&Rt!=="boolean"&&Rt!=="number"&&(Ke=JSON.stringify(Ke));var gt=Rt+":"+Ke,Wt=it[gt];Wt===void 0&&(Fe.push(Ke),it[gt]=Wt=Fe.length-1),ae.writeVarint(Wt)}}}function ve(Ne,ae){return(ae<<3)+(7&Ne)}function ge(Ne){return Ne<<1^Ne>>31}function je(Ne,ae){for(var ue=Ne.loadGeometry(),Ee=Ne.type,Fe=0,rt=0,it=ue.length,et=0;et<it;et++){var Ke=ue[et],Et=1;Ee===1&&(Et=Ke.length),ae.writeVarint(ve(1,Et));for(var Rt=Ee===3?Ke.length-1:Ke.length,gt=0;gt<Rt;gt++){gt===1&&Ee!==1&&ae.writeVarint(ve(2,Rt-1));var Wt=Ke[gt].x-Fe,mr=Ke[gt].y-rt;ae.writeVarint(ge(Wt)),ae.writeVarint(ge(mr)),Fe+=Wt,rt+=mr}Ee===3&&ae.writeVarint(ve(7,1))}}function $e(Ne,ae){var ue=typeof Ne;ue==="string"?ae.writeStringField(1,Ne):ue==="boolean"?ae.writeBooleanField(7,Ne):ue==="number"&&(Ne%1!=0?ae.writeDoubleField(3,Ne):Ne<0?ae.writeSVarintField(6,Ne):ae.writeVarintField(5,Ne))}N.exports=Se,N.exports.fromVectorTileJs=Se,N.exports.fromGeojsonVt=function(Ne,ae){ae=ae||{};var ue={};for(var Ee in Ne)ue[Ee]=new re(Ne[Ee].features,ae),ue[Ee].name=Ee,ue[Ee].version=ae.version,ue[Ee].extent=ae.extent;return Se({layers:ue})},N.exports.GeoJSONWrapper=re;var Ze=l.by(N.exports);const Me={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ne=>Ne},Ue=Math.fround||(Qe=new Float32Array(1),Ne=>(Qe[0]=+Ne,Qe[0]));var Qe;const ct=3,ce=5,be=6;class Oe{constructor(ae){this.options=Object.assign(Object.create(Me),ae),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ae){const{log:ue,minZoom:Ee,maxZoom:Fe}=this.options;ue&&console.time("total time");const rt=`prepare ${ae.length} points`;ue&&console.time(rt),this.points=ae;const it=[];for(let Ke=0;Ke<ae.length;Ke++){const Et=ae[Ke];if(!Et.geometry)continue;const[Rt,gt]=Et.geometry.coordinates,Wt=Ue(tt(Rt)),mr=Ue(We(gt));it.push(Wt,mr,1/0,Ke,-1,1),this.options.reduce&&it.push(0)}let et=this.trees[Fe+1]=this._createTree(it);ue&&console.timeEnd(rt);for(let Ke=Fe;Ke>=Ee;Ke--){const Et=+Date.now();et=this.trees[Ke]=this._createTree(this._cluster(et,Ke)),ue&&console.log("z%d: %d clusters in %dms",Ke,et.numItems,+Date.now()-Et)}return ue&&console.timeEnd("total time"),this}getClusters(ae,ue){let Ee=((ae[0]+180)%360+360)%360-180;const Fe=Math.max(-90,Math.min(90,ae[1]));let rt=ae[2]===180?180:((ae[2]+180)%360+360)%360-180;const it=Math.max(-90,Math.min(90,ae[3]));if(ae[2]-ae[0]>=360)Ee=-180,rt=180;else if(Ee>rt){const gt=this.getClusters([Ee,Fe,180,it],ue),Wt=this.getClusters([-180,Fe,rt,it],ue);return gt.concat(Wt)}const et=this.trees[this._limitZoom(ue)],Ke=et.range(tt(Ee),We(it),tt(rt),We(Fe)),Et=et.data,Rt=[];for(const gt of Ke){const Wt=this.stride*gt;Rt.push(Et[Wt+ce]>1?Be(Et,Wt,this.clusterProps):this.points[Et[Wt+ct]])}return Rt}getChildren(ae){const ue=this._getOriginId(ae),Ee=this._getOriginZoom(ae),Fe="No cluster with the specified id.",rt=this.trees[Ee];if(!rt)throw new Error(Fe);const it=rt.data;if(ue*this.stride>=it.length)throw new Error(Fe);const et=this.options.radius/(this.options.extent*Math.pow(2,Ee-1)),Ke=rt.within(it[ue*this.stride],it[ue*this.stride+1],et),Et=[];for(const Rt of Ke){const gt=Rt*this.stride;it[gt+4]===ae&&Et.push(it[gt+ce]>1?Be(it,gt,this.clusterProps):this.points[it[gt+ct]])}if(Et.length===0)throw new Error(Fe);return Et}getLeaves(ae,ue,Ee){const Fe=[];return this._appendLeaves(Fe,ae,ue=ue||10,Ee=Ee||0,0),Fe}getTile(ae,ue,Ee){const Fe=this.trees[this._limitZoom(ae)],rt=Math.pow(2,ae),{extent:it,radius:et}=this.options,Ke=et/it,Et=(Ee-Ke)/rt,Rt=(Ee+1+Ke)/rt,gt={features:[]};return this._addTileFeatures(Fe.range((ue-Ke)/rt,Et,(ue+1+Ke)/rt,Rt),Fe.data,ue,Ee,rt,gt),ue===0&&this._addTileFeatures(Fe.range(1-Ke/rt,Et,1,Rt),Fe.data,rt,Ee,rt,gt),ue===rt-1&&this._addTileFeatures(Fe.range(0,Et,Ke/rt,Rt),Fe.data,-1,Ee,rt,gt),gt.features.length?gt:null}getClusterExpansionZoom(ae){let ue=this._getOriginZoom(ae)-1;for(;ue<=this.options.maxZoom;){const Ee=this.getChildren(ae);if(ue++,Ee.length!==1)break;ae=Ee[0].properties.cluster_id}return ue}_appendLeaves(ae,ue,Ee,Fe,rt){const it=this.getChildren(ue);for(const et of it){const Ke=et.properties;if(Ke&&Ke.cluster?rt+Ke.point_count<=Fe?rt+=Ke.point_count:rt=this._appendLeaves(ae,Ke.cluster_id,Ee,Fe,rt):rt<Fe?rt++:ae.push(et),ae.length===Ee)break}return rt}_createTree(ae){const ue=new l.av(ae.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Ee=0;Ee<ae.length;Ee+=this.stride)ue.add(ae[Ee],ae[Ee+1]);return ue.finish(),ue.data=ae,ue}_addTileFeatures(ae,ue,Ee,Fe,rt,it){for(const et of ae){const Ke=et*this.stride,Et=ue[Ke+ce]>1;let Rt,gt,Wt;if(Et)Rt=qe(ue,Ke,this.clusterProps),gt=ue[Ke],Wt=ue[Ke+1];else{const pn=this.points[ue[Ke+ct]];Rt=pn.properties;const[Or,en]=pn.geometry.coordinates;gt=tt(Or),Wt=We(en)}const mr={type:1,geometry:[[Math.round(this.options.extent*(gt*rt-Ee)),Math.round(this.options.extent*(Wt*rt-Fe))]],tags:Rt};let Ar;Ar=Et||this.options.generateId?ue[Ke+ct]:this.points[ue[Ke+ct]].id,Ar!==void 0&&(mr.id=Ar),it.features.push(mr)}}_limitZoom(ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+ae),this.options.maxZoom+1))}_cluster(ae,ue){const{radius:Ee,extent:Fe,reduce:rt,minPoints:it}=this.options,et=Ee/(Fe*Math.pow(2,ue)),Ke=ae.data,Et=[],Rt=this.stride;for(let gt=0;gt<Ke.length;gt+=Rt){if(Ke[gt+2]<=ue)continue;Ke[gt+2]=ue;const Wt=Ke[gt],mr=Ke[gt+1],Ar=ae.within(Ke[gt],Ke[gt+1],et),pn=Ke[gt+ce];let Or=pn;for(const en of Ar){const Zr=en*Rt;Ke[Zr+2]>ue&&(Or+=Ke[Zr+ce])}if(Or>pn&&Or>=it){let en,Zr=Wt*pn,jn=mr*pn,Jr=-1;const Ur=((gt/Rt|0)<<5)+(ue+1)+this.points.length;for(const vn of Ar){const Fn=vn*Rt;if(Ke[Fn+2]<=ue)continue;Ke[Fn+2]=ue;const ei=Ke[Fn+ce];Zr+=Ke[Fn]*ei,jn+=Ke[Fn+1]*ei,Ke[Fn+4]=Ur,rt&&(en||(en=this._map(Ke,gt,!0),Jr=this.clusterProps.length,this.clusterProps.push(en)),rt(en,this._map(Ke,Fn)))}Ke[gt+4]=Ur,Et.push(Zr/Or,jn/Or,1/0,Ur,-1,Or),rt&&Et.push(Jr)}else{for(let en=0;en<Rt;en++)Et.push(Ke[gt+en]);if(Or>1)for(const en of Ar){const Zr=en*Rt;if(!(Ke[Zr+2]<=ue)){Ke[Zr+2]=ue;for(let jn=0;jn<Rt;jn++)Et.push(Ke[Zr+jn])}}}}return Et}_getOriginId(ae){return ae-this.points.length>>5}_getOriginZoom(ae){return(ae-this.points.length)%32}_map(ae,ue,Ee){if(ae[ue+ce]>1){const it=this.clusterProps[ae[ue+be]];return Ee?Object.assign({},it):it}const Fe=this.points[ae[ue+ct]].properties,rt=this.options.map(Fe);return Ee&&rt===Fe?Object.assign({},rt):rt}}function Be(Ne,ae,ue){return{type:"Feature",id:Ne[ae+ct],properties:qe(Ne,ae,ue),geometry:{type:"Point",coordinates:[(Ee=Ne[ae],360*(Ee-.5)),Xe(Ne[ae+1])]}};var Ee}function qe(Ne,ae,ue){const Ee=Ne[ae+ce],Fe=Ee>=1e4?`${Math.round(Ee/1e3)}k`:Ee>=1e3?Math.round(Ee/100)/10+"k":Ee,rt=Ne[ae+be],it=rt===-1?{}:Object.assign({},ue[rt]);return Object.assign(it,{cluster:!0,cluster_id:Ne[ae+ct],point_count:Ee,point_count_abbreviated:Fe})}function tt(Ne){return Ne/360+.5}function We(Ne){const ae=Math.sin(Ne*Math.PI/180),ue=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return ue<0?0:ue>1?1:ue}function Xe(Ne){const ae=(180-360*Ne)*Math.PI/180;return 360*Math.atan(Math.exp(ae))/Math.PI-90}function lt(Ne,ae,ue,Ee){let Fe=Ee;const rt=ae+(ue-ae>>1);let it,et=ue-ae;const Ke=Ne[ae],Et=Ne[ae+1],Rt=Ne[ue],gt=Ne[ue+1];for(let Wt=ae+3;Wt<ue;Wt+=3){const mr=wt(Ne[Wt],Ne[Wt+1],Ke,Et,Rt,gt);if(mr>Fe)it=Wt,Fe=mr;else if(mr===Fe){const Ar=Math.abs(Wt-rt);Ar<et&&(it=Wt,et=Ar)}}Fe>Ee&&(it-ae>3&&lt(Ne,ae,it,Ee),Ne[it+2]=Fe,ue-it>3&&lt(Ne,it,ue,Ee))}function wt(Ne,ae,ue,Ee,Fe,rt){let it=Fe-ue,et=rt-Ee;if(it!==0||et!==0){const Ke=((Ne-ue)*it+(ae-Ee)*et)/(it*it+et*et);Ke>1?(ue=Fe,Ee=rt):Ke>0&&(ue+=it*Ke,Ee+=et*Ke)}return it=Ne-ue,et=ae-Ee,it*it+et*et}function Lt(Ne,ae,ue,Ee){const Fe={id:Ne??null,type:ae,geometry:ue,tags:Ee,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")At(Fe,ue);else if(ae==="Polygon")At(Fe,ue[0]);else if(ae==="MultiLineString")for(const rt of ue)At(Fe,rt);else if(ae==="MultiPolygon")for(const rt of ue)At(Fe,rt[0]);return Fe}function At(Ne,ae){for(let ue=0;ue<ae.length;ue+=3)Ne.minX=Math.min(Ne.minX,ae[ue]),Ne.minY=Math.min(Ne.minY,ae[ue+1]),Ne.maxX=Math.max(Ne.maxX,ae[ue]),Ne.maxY=Math.max(Ne.maxY,ae[ue+1])}function zt(Ne,ae,ue,Ee){if(!ae.geometry)return;const Fe=ae.geometry.coordinates;if(Fe&&Fe.length===0)return;const rt=ae.geometry.type,it=Math.pow(ue.tolerance/((1<<ue.maxZoom)*ue.extent),2);let et=[],Ke=ae.id;if(ue.promoteId?Ke=ae.properties[ue.promoteId]:ue.generateId&&(Ke=Ee||0),rt==="Point")vt(Fe,et);else if(rt==="MultiPoint")for(const Et of Fe)vt(Et,et);else if(rt==="LineString")pe(Fe,et,it,!1);else if(rt==="MultiLineString"){if(ue.lineMetrics){for(const Et of Fe)et=[],pe(Et,et,it,!1),Ne.push(Lt(Ke,"LineString",et,ae.properties));return}ur(Fe,et,it,!1)}else if(rt==="Polygon")ur(Fe,et,it,!0);else{if(rt!=="MultiPolygon"){if(rt==="GeometryCollection"){for(const Et of ae.geometry.geometries)zt(Ne,{id:Ke,geometry:Et,properties:ae.properties},ue,Ee);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Et of Fe){const Rt=[];ur(Et,Rt,it,!0),et.push(Rt)}}Ne.push(Lt(Ke,rt,et,ae.properties))}function vt(Ne,ae){ae.push(sr(Ne[0]),Tt(Ne[1]),0)}function pe(Ne,ae,ue,Ee){let Fe,rt,it=0;for(let Ke=0;Ke<Ne.length;Ke++){const Et=sr(Ne[Ke][0]),Rt=Tt(Ne[Ke][1]);ae.push(Et,Rt,0),Ke>0&&(it+=Ee?(Fe*Rt-Et*rt)/2:Math.sqrt(Math.pow(Et-Fe,2)+Math.pow(Rt-rt,2))),Fe=Et,rt=Rt}const et=ae.length-3;ae[2]=1,lt(ae,0,et,ue),ae[et+2]=1,ae.size=Math.abs(it),ae.start=0,ae.end=ae.size}function ur(Ne,ae,ue,Ee){for(let Fe=0;Fe<Ne.length;Fe++){const rt=[];pe(Ne[Fe],rt,ue,Ee),ae.push(rt)}}function sr(Ne){return Ne/360+.5}function Tt(Ne){const ae=Math.sin(Ne*Math.PI/180),ue=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return ue<0?0:ue>1?1:ue}function Nt(Ne,ae,ue,Ee,Fe,rt,it,et){if(Ee/=ae,rt>=(ue/=ae)&&it<Ee)return Ne;if(it<ue||rt>=Ee)return null;const Ke=[];for(const Et of Ne){const Rt=Et.geometry;let gt=Et.type;const Wt=Fe===0?Et.minX:Et.minY,mr=Fe===0?Et.maxX:Et.maxY;if(Wt>=ue&&mr<Ee){Ke.push(Et);continue}if(mr<ue||Wt>=Ee)continue;let Ar=[];if(gt==="Point"||gt==="MultiPoint")Zt(Rt,Ar,ue,Ee,Fe);else if(gt==="LineString")rr(Rt,Ar,ue,Ee,Fe,!1,et.lineMetrics);else if(gt==="MultiLineString")It(Rt,Ar,ue,Ee,Fe,!1);else if(gt==="Polygon")It(Rt,Ar,ue,Ee,Fe,!0);else if(gt==="MultiPolygon")for(const pn of Rt){const Or=[];It(pn,Or,ue,Ee,Fe,!0),Or.length&&Ar.push(Or)}if(Ar.length){if(et.lineMetrics&&gt==="LineString"){for(const pn of Ar)Ke.push(Lt(Et.id,gt,pn,Et.tags));continue}gt!=="LineString"&&gt!=="MultiLineString"||(Ar.length===1?(gt="LineString",Ar=Ar[0]):gt="MultiLineString"),gt!=="Point"&&gt!=="MultiPoint"||(gt=Ar.length===3?"Point":"MultiPoint"),Ke.push(Lt(Et.id,gt,Ar,Et.tags))}}return Ke.length?Ke:null}function Zt(Ne,ae,ue,Ee,Fe){for(let rt=0;rt<Ne.length;rt+=3){const it=Ne[rt+Fe];it>=ue&&it<=Ee&&Vt(ae,Ne[rt],Ne[rt+1],Ne[rt+2])}}function rr(Ne,ae,ue,Ee,Fe,rt,it){let et=at(Ne);const Ke=Fe===0?lr:Pr;let Et,Rt,gt=Ne.start;for(let Or=0;Or<Ne.length-3;Or+=3){const en=Ne[Or],Zr=Ne[Or+1],jn=Ne[Or+2],Jr=Ne[Or+3],Ur=Ne[Or+4],vn=Fe===0?en:Zr,Fn=Fe===0?Jr:Ur;let ei=!1;it&&(Et=Math.sqrt(Math.pow(en-Jr,2)+Math.pow(Zr-Ur,2))),vn<ue?Fn>ue&&(Rt=Ke(et,en,Zr,Jr,Ur,ue),it&&(et.start=gt+Et*Rt)):vn>Ee?Fn<Ee&&(Rt=Ke(et,en,Zr,Jr,Ur,Ee),it&&(et.start=gt+Et*Rt)):Vt(et,en,Zr,jn),Fn<ue&&vn>=ue&&(Rt=Ke(et,en,Zr,Jr,Ur,ue),ei=!0),Fn>Ee&&vn<=Ee&&(Rt=Ke(et,en,Zr,Jr,Ur,Ee),ei=!0),!rt&&ei&&(it&&(et.end=gt+Et*Rt),ae.push(et),et=at(Ne)),it&&(gt+=Et)}let Wt=Ne.length-3;const mr=Ne[Wt],Ar=Ne[Wt+1],pn=Fe===0?mr:Ar;pn>=ue&&pn<=Ee&&Vt(et,mr,Ar,Ne[Wt+2]),Wt=et.length-3,rt&&Wt>=3&&(et[Wt]!==et[0]||et[Wt+1]!==et[1])&&Vt(et,et[0],et[1],et[2]),et.length&&ae.push(et)}function at(Ne){const ae=[];return ae.size=Ne.size,ae.start=Ne.start,ae.end=Ne.end,ae}function It(Ne,ae,ue,Ee,Fe,rt){for(const it of Ne)rr(it,ae,ue,Ee,Fe,rt,!1)}function Vt(Ne,ae,ue,Ee){Ne.push(ae,ue,Ee)}function lr(Ne,ae,ue,Ee,Fe,rt){const it=(rt-ae)/(Ee-ae);return Vt(Ne,rt,ue+(Fe-ue)*it,1),it}function Pr(Ne,ae,ue,Ee,Fe,rt){const it=(rt-ue)/(Fe-ue);return Vt(Ne,ae+(Ee-ae)*it,rt,1),it}function _t(Ne,ae){const ue=[];for(let Ee=0;Ee<Ne.length;Ee++){const Fe=Ne[Ee],rt=Fe.type;let it;if(rt==="Point"||rt==="MultiPoint"||rt==="LineString")it=Ut(Fe.geometry,ae);else if(rt==="MultiLineString"||rt==="Polygon"){it=[];for(const et of Fe.geometry)it.push(Ut(et,ae))}else if(rt==="MultiPolygon"){it=[];for(const et of Fe.geometry){const Ke=[];for(const Et of et)Ke.push(Ut(Et,ae));it.push(Ke)}}ue.push(Lt(Fe.id,rt,it,Fe.tags))}return ue}function Ut(Ne,ae){const ue=[];ue.size=Ne.size,Ne.start!==void 0&&(ue.start=Ne.start,ue.end=Ne.end);for(let Ee=0;Ee<Ne.length;Ee+=3)ue.push(Ne[Ee]+ae,Ne[Ee+1],Ne[Ee+2]);return ue}function _r(Ne,ae){if(Ne.transformed)return Ne;const ue=1<<Ne.z,Ee=Ne.x,Fe=Ne.y;for(const rt of Ne.features){const it=rt.geometry,et=rt.type;if(rt.geometry=[],et===1)for(let Ke=0;Ke<it.length;Ke+=2)rt.geometry.push(Kt(it[Ke],it[Ke+1],ae,ue,Ee,Fe));else for(let Ke=0;Ke<it.length;Ke++){const Et=[];for(let Rt=0;Rt<it[Ke].length;Rt+=2)Et.push(Kt(it[Ke][Rt],it[Ke][Rt+1],ae,ue,Ee,Fe));rt.geometry.push(Et)}}return Ne.transformed=!0,Ne}function Kt(Ne,ae,ue,Ee,Fe,rt){return[Math.round(ue*(Ne*Ee-Fe)),Math.round(ue*(ae*Ee-rt))]}function fn(Ne,ae,ue,Ee,Fe){const rt=ae===Fe.maxZoom?0:Fe.tolerance/((1<<ae)*Fe.extent),it={features:[],numPoints:0,numSimplified:0,numFeatures:Ne.length,source:null,x:ue,y:Ee,z:ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const et of Ne)Dt(it,et,rt,Fe);return it}function Dt(Ne,ae,ue,Ee){const Fe=ae.geometry,rt=ae.type,it=[];if(Ne.minX=Math.min(Ne.minX,ae.minX),Ne.minY=Math.min(Ne.minY,ae.minY),Ne.maxX=Math.max(Ne.maxX,ae.maxX),Ne.maxY=Math.max(Ne.maxY,ae.maxY),rt==="Point"||rt==="MultiPoint")for(let et=0;et<Fe.length;et+=3)it.push(Fe[et],Fe[et+1]),Ne.numPoints++,Ne.numSimplified++;else if(rt==="LineString")Br(it,Fe,Ne,ue,!1,!1);else if(rt==="MultiLineString"||rt==="Polygon")for(let et=0;et<Fe.length;et++)Br(it,Fe[et],Ne,ue,rt==="Polygon",et===0);else if(rt==="MultiPolygon")for(let et=0;et<Fe.length;et++){const Ke=Fe[et];for(let Et=0;Et<Ke.length;Et++)Br(it,Ke[Et],Ne,ue,!0,Et===0)}if(it.length){let et=ae.tags||null;if(rt==="LineString"&&Ee.lineMetrics){et={};for(const Et in ae.tags)et[Et]=ae.tags[Et];et.mapbox_clip_start=Fe.start/Fe.size,et.mapbox_clip_end=Fe.end/Fe.size}const Ke={geometry:it,type:rt==="Polygon"||rt==="MultiPolygon"?3:rt==="LineString"||rt==="MultiLineString"?2:1,tags:et};ae.id!==null&&(Ke.id=ae.id),Ne.features.push(Ke)}}function Br(Ne,ae,ue,Ee,Fe,rt){const it=Ee*Ee;if(Ee>0&&ae.size<(Fe?it:Ee))return void(ue.numPoints+=ae.length/3);const et=[];for(let Ke=0;Ke<ae.length;Ke+=3)(Ee===0||ae[Ke+2]>it)&&(ue.numSimplified++,et.push(ae[Ke],ae[Ke+1])),ue.numPoints++;Fe&&function(Ke,Et){let Rt=0;for(let gt=0,Wt=Ke.length,mr=Wt-2;gt<Wt;mr=gt,gt+=2)Rt+=(Ke[gt]-Ke[mr])*(Ke[gt+1]+Ke[mr+1]);if(Rt>0===Et)for(let gt=0,Wt=Ke.length;gt<Wt/2;gt+=2){const mr=Ke[gt],Ar=Ke[gt+1];Ke[gt]=Ke[Wt-2-gt],Ke[gt+1]=Ke[Wt-1-gt],Ke[Wt-2-gt]=mr,Ke[Wt-1-gt]=Ar}}(et,rt),Ne.push(et)}const dr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class nn{constructor(ae,ue){const Ee=(ue=this.options=function(rt,it){for(const et in it)rt[et]=it[et];return rt}(Object.create(dr),ue)).debug;if(Ee&&console.time("preprocess data"),ue.maxZoom<0||ue.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ue.promoteId&&ue.generateId)throw new Error("promoteId and generateId cannot be used together.");let Fe=function(rt,it){const et=[];if(rt.type==="FeatureCollection")for(let Ke=0;Ke<rt.features.length;Ke++)zt(et,rt.features[Ke],it,Ke);else zt(et,rt.type==="Feature"?rt:{geometry:rt},it);return et}(ae,ue);this.tiles={},this.tileCoords=[],Ee&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ue.indexMaxZoom,ue.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Fe=function(rt,it){const et=it.buffer/it.extent;let Ke=rt;const Et=Nt(rt,1,-1-et,et,0,-1,2,it),Rt=Nt(rt,1,1-et,2+et,0,-1,2,it);return(Et||Rt)&&(Ke=Nt(rt,1,-et,1+et,0,-1,2,it)||[],Et&&(Ke=_t(Et,1).concat(Ke)),Rt&&(Ke=Ke.concat(_t(Rt,-1)))),Ke}(Fe,ue),Fe.length&&this.splitTile(Fe,0,0,0),Ee&&(Fe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ae,ue,Ee,Fe,rt,it,et){const Ke=[ae,ue,Ee,Fe],Et=this.options,Rt=Et.debug;for(;Ke.length;){Fe=Ke.pop(),Ee=Ke.pop(),ue=Ke.pop(),ae=Ke.pop();const gt=1<<ue,Wt=Kn(ue,Ee,Fe);let mr=this.tiles[Wt];if(!mr&&(Rt>1&&console.time("creation"),mr=this.tiles[Wt]=fn(ae,ue,Ee,Fe,Et),this.tileCoords.push({z:ue,x:Ee,y:Fe}),Rt)){Rt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ue,Ee,Fe,mr.numFeatures,mr.numPoints,mr.numSimplified),console.timeEnd("creation"));const ei=`z${ue}`;this.stats[ei]=(this.stats[ei]||0)+1,this.total++}if(mr.source=ae,rt==null){if(ue===Et.indexMaxZoom||mr.numPoints<=Et.indexMaxPoints)continue}else{if(ue===Et.maxZoom||ue===rt)continue;if(rt!=null){const ei=rt-ue;if(Ee!==it>>ei||Fe!==et>>ei)continue}}if(mr.source=null,ae.length===0)continue;Rt>1&&console.time("clipping");const Ar=.5*Et.buffer/Et.extent,pn=.5-Ar,Or=.5+Ar,en=1+Ar;let Zr=null,jn=null,Jr=null,Ur=null,vn=Nt(ae,gt,Ee-Ar,Ee+Or,0,mr.minX,mr.maxX,Et),Fn=Nt(ae,gt,Ee+pn,Ee+en,0,mr.minX,mr.maxX,Et);ae=null,vn&&(Zr=Nt(vn,gt,Fe-Ar,Fe+Or,1,mr.minY,mr.maxY,Et),jn=Nt(vn,gt,Fe+pn,Fe+en,1,mr.minY,mr.maxY,Et),vn=null),Fn&&(Jr=Nt(Fn,gt,Fe-Ar,Fe+Or,1,mr.minY,mr.maxY,Et),Ur=Nt(Fn,gt,Fe+pn,Fe+en,1,mr.minY,mr.maxY,Et),Fn=null),Rt>1&&console.timeEnd("clipping"),Ke.push(Zr||[],ue+1,2*Ee,2*Fe),Ke.push(jn||[],ue+1,2*Ee,2*Fe+1),Ke.push(Jr||[],ue+1,2*Ee+1,2*Fe),Ke.push(Ur||[],ue+1,2*Ee+1,2*Fe+1)}}getTile(ae,ue,Ee){ae=+ae,ue=+ue,Ee=+Ee;const Fe=this.options,{extent:rt,debug:it}=Fe;if(ae<0||ae>24)return null;const et=1<<ae,Ke=Kn(ae,ue=ue+et&et-1,Ee);if(this.tiles[Ke])return _r(this.tiles[Ke],rt);it>1&&console.log("drilling down to z%d-%d-%d",ae,ue,Ee);let Et,Rt=ae,gt=ue,Wt=Ee;for(;!Et&&Rt>0;)Rt--,gt>>=1,Wt>>=1,Et=this.tiles[Kn(Rt,gt,Wt)];return Et&&Et.source?(it>1&&(console.log("found parent tile z%d-%d-%d",Rt,gt,Wt),console.time("drilling down")),this.splitTile(Et.source,Rt,gt,Wt,ae,ue,Ee),it>1&&console.timeEnd("drilling down"),this.tiles[Ke]?_r(this.tiles[Ke],rt):null):null}}function Kn(Ne,ae,ue){return 32*((1<<Ne)*ue+ae)+Ne}function hr(Ne,ae){return ae?Ne.properties[ae]:Ne.id}function Gn(Ne,ae){if(Ne==null)return!0;if(Ne.type==="Feature")return hr(Ne,ae)!=null;if(Ne.type==="FeatureCollection"){const ue=new Set;for(const Ee of Ne.features){const Fe=hr(Ee,ae);if(Fe==null||ue.has(Fe))return!1;ue.add(Fe)}return!0}return!1}function Nn(Ne,ae){const ue=new Map;if(Ne!=null)if(Ne.type==="Feature")ue.set(hr(Ne,ae),Ne);else for(const Ee of Ne.features)ue.set(hr(Ee,ae),Ee);return ue}class gi extends x{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ae,ue){return l._(this,void 0,void 0,function*(){const Ee=ae.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Fe=this._geoJSONIndex.getTile(Ee.z,Ee.x,Ee.y);if(!Fe)return null;const rt=new class{constructor(et){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.X,this.length=et.length,this._features=et}feature(et){return new class{constructor(Ke){this._feature=Ke,this.extent=l.X,this.type=Ke.type,this.properties=Ke.tags,"id"in Ke&&!isNaN(Ke.id)&&(this.id=parseInt(Ke.id,10))}loadGeometry(){if(this._feature.type===1){const Ke=[];for(const Et of this._feature.geometry)Ke.push([new l.P(Et[0],Et[1])]);return Ke}{const Ke=[];for(const Et of this._feature.geometry){const Rt=[];for(const gt of Et)Rt.push(new l.P(gt[0],gt[1]));Ke.push(Rt)}return Ke}}toGeoJSON(Ke,Et,Rt){return z.call(this,Ke,Et,Rt)}}(this._features[et])}}(Fe.features);let it=Ze(rt);return it.byteOffset===0&&it.byteLength===it.buffer.byteLength||(it=new Uint8Array(it)),{vectorTile:rt,rawData:it.buffer}})}loadData(ae){return l._(this,void 0,void 0,function*(){var ue;(ue=this._pendingRequest)===null||ue===void 0||ue.abort();const Ee=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new l.bv(ae.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ae,this._pendingRequest),this._geoJSONIndex=ae.cluster?new Oe(function({superclusterOptions:it,clusterProperties:et}){if(!et||!it)return it;const Ke={},Et={},Rt={accumulated:null,zoom:0},gt={properties:null},Wt=Object.keys(et);for(const mr of Wt){const[Ar,pn]=et[mr],Or=l.bC(pn),en=l.bC(typeof Ar=="string"?[Ar,["accumulated"],["get",mr]]:Ar);Ke[mr]=Or.value,Et[mr]=en.value}return it.map=mr=>{gt.properties=mr;const Ar={};for(const pn of Wt)Ar[pn]=Ke[pn].evaluate(Rt,gt);return Ar},it.reduce=(mr,Ar)=>{gt.properties=Ar;for(const pn of Wt)Rt.accumulated=mr[pn],mr[pn]=Et[pn].evaluate(Rt,gt)},it}(ae)).load((yield this._pendingData).features):(Fe=yield this._pendingData,new nn(Fe,ae.geojsonVtOptions)),this.loaded={};const rt={};if(Ee){const it=Ee.finish();it&&(rt.resourceTiming={},rt.resourceTiming[ae.source]=JSON.parse(JSON.stringify(it)))}return rt}catch(rt){if(delete this._pendingRequest,l.bB(rt))return{abandoned:!0};throw rt}var Fe})}getData(){return l._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ae){const ue=this.loaded;return ue&&ue[ae.uid]?super.reloadTile(ae):this.loadTile(ae)}loadAndProcessGeoJSON(ae,ue){return l._(this,void 0,void 0,function*(){let Ee=yield this.loadGeoJSON(ae,ue);if(delete this._pendingRequest,typeof Ee!="object")throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(R(Ee,!0),ae.filter){const Fe=l.bC(ae.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Fe.result==="error")throw new Error(Fe.value.map(it=>`${it.key}: ${it.message}`).join(", "));Ee={type:"FeatureCollection",features:Ee.features.filter(it=>Fe.value.evaluate({zoom:0},it))}}return Ee})}loadGeoJSON(ae,ue){return l._(this,void 0,void 0,function*(){const{promoteId:Ee}=ae;if(ae.request){const Fe=yield l.h(ae.request,ue);return this._dataUpdateable=Gn(Fe.data,Ee)?Nn(Fe.data,Ee):void 0,Fe.data}if(typeof ae.data=="string")try{const Fe=JSON.parse(ae.data);return this._dataUpdateable=Gn(Fe,Ee)?Nn(Fe,Ee):void 0,Fe}catch{throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`)}if(!ae.dataDiff)throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ae.source}`);return function(Fe,rt,it){var et,Ke,Et,Rt;if(rt.removeAll&&Fe.clear(),rt.remove)for(const gt of rt.remove)Fe.delete(gt);if(rt.add)for(const gt of rt.add){const Wt=hr(gt,it);Wt!=null&&Fe.set(Wt,gt)}if(rt.update)for(const gt of rt.update){let Wt=Fe.get(gt.id);if(Wt==null)continue;const mr=!gt.removeAllProperties&&(((et=gt.removeProperties)===null||et===void 0?void 0:et.length)>0||((Ke=gt.addOrUpdateProperties)===null||Ke===void 0?void 0:Ke.length)>0);if((gt.newGeometry||gt.removeAllProperties||mr)&&(Wt=Object.assign({},Wt),Fe.set(gt.id,Wt),mr&&(Wt.properties=Object.assign({},Wt.properties))),gt.newGeometry&&(Wt.geometry=gt.newGeometry),gt.removeAllProperties)Wt.properties={};else if(((Et=gt.removeProperties)===null||Et===void 0?void 0:Et.length)>0)for(const Ar of gt.removeProperties)Object.prototype.hasOwnProperty.call(Wt.properties,Ar)&&delete Wt.properties[Ar];if(((Rt=gt.addOrUpdateProperties)===null||Rt===void 0?void 0:Rt.length)>0)for(const{key:Ar,value:pn}of gt.addOrUpdateProperties)Wt.properties[Ar]=pn}}(this._dataUpdateable,ae.dataDiff,Ee),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ae){return l._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ae){return this._geoJSONIndex.getClusterExpansionZoom(ae.clusterId)}getClusterChildren(ae){return this._geoJSONIndex.getChildren(ae.clusterId)}getClusterLeaves(ae){return this._geoJSONIndex.getLeaves(ae.clusterId,ae.limit,ae.offset)}}class Yr{constructor(ae){this.self=ae,this.actor=new l.F(ae),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ue,Ee)=>{if(this.externalWorkerSourceTypes[ue])throw new Error(`Worker source with name "${ue}" already registered.`);this.externalWorkerSourceTypes[ue]=Ee},this.self.addProtocol=l.bi,this.self.removeProtocol=l.bj,this.self.registerRTLTextPlugin=ue=>{if(l.bD.isParsed())throw new Error("RTL text plugin already registered.");l.bD.setMethods(ue)},this.actor.registerMessageHandler("LDT",(ue,Ee)=>this._getDEMWorkerSource(ue,Ee.source).loadTile(Ee)),this.actor.registerMessageHandler("RDT",(ue,Ee)=>l._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ue,Ee.source).removeTile(Ee)})),this.actor.registerMessageHandler("GCEZ",(ue,Ee)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,Ee.type,Ee.source).getClusterExpansionZoom(Ee)})),this.actor.registerMessageHandler("GCC",(ue,Ee)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,Ee.type,Ee.source).getClusterChildren(Ee)})),this.actor.registerMessageHandler("GCL",(ue,Ee)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,Ee.type,Ee.source).getClusterLeaves(Ee)})),this.actor.registerMessageHandler("LD",(ue,Ee)=>this._getWorkerSource(ue,Ee.type,Ee.source).loadData(Ee)),this.actor.registerMessageHandler("GD",(ue,Ee)=>this._getWorkerSource(ue,Ee.type,Ee.source).getData()),this.actor.registerMessageHandler("LT",(ue,Ee)=>this._getWorkerSource(ue,Ee.type,Ee.source).loadTile(Ee)),this.actor.registerMessageHandler("RT",(ue,Ee)=>this._getWorkerSource(ue,Ee.type,Ee.source).reloadTile(Ee)),this.actor.registerMessageHandler("AT",(ue,Ee)=>this._getWorkerSource(ue,Ee.type,Ee.source).abortTile(Ee)),this.actor.registerMessageHandler("RMT",(ue,Ee)=>this._getWorkerSource(ue,Ee.type,Ee.source).removeTile(Ee)),this.actor.registerMessageHandler("RS",(ue,Ee)=>l._(this,void 0,void 0,function*(){if(!this.workerSources[ue]||!this.workerSources[ue][Ee.type]||!this.workerSources[ue][Ee.type][Ee.source])return;const Fe=this.workerSources[ue][Ee.type][Ee.source];delete this.workerSources[ue][Ee.type][Ee.source],Fe.removeSource!==void 0&&Fe.removeSource(Ee)})),this.actor.registerMessageHandler("RM",ue=>l._(this,void 0,void 0,function*(){delete this.layerIndexes[ue],delete this.availableImages[ue],delete this.workerSources[ue],delete this.demWorkerSources[ue]})),this.actor.registerMessageHandler("SR",(ue,Ee)=>l._(this,void 0,void 0,function*(){this.referrer=Ee})),this.actor.registerMessageHandler("SRPS",(ue,Ee)=>this._syncRTLPluginState(ue,Ee)),this.actor.registerMessageHandler("IS",(ue,Ee)=>l._(this,void 0,void 0,function*(){this.self.importScripts(Ee)})),this.actor.registerMessageHandler("SI",(ue,Ee)=>this._setImages(ue,Ee)),this.actor.registerMessageHandler("UL",(ue,Ee)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(ue).update(Ee.layers,Ee.removedIds)})),this.actor.registerMessageHandler("SL",(ue,Ee)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(ue).replace(Ee)}))}_setImages(ae,ue){return l._(this,void 0,void 0,function*(){this.availableImages[ae]=ue;for(const Ee in this.workerSources[ae]){const Fe=this.workerSources[ae][Ee];for(const rt in Fe)Fe[rt].availableImages=ue}})}_syncRTLPluginState(ae,ue){return l._(this,void 0,void 0,function*(){if(l.bD.isParsed())return l.bD.getState();if(ue.pluginStatus!=="loading")return l.bD.setState(ue),ue;const Ee=ue.pluginURL;if(this.self.importScripts(Ee),l.bD.isParsed()){const Fe={pluginStatus:"loaded",pluginURL:Ee};return l.bD.setState(Fe),Fe}throw l.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${Ee}`)})}_getAvailableImages(ae){let ue=this.availableImages[ae];return ue||(ue=[]),ue}_getLayerIndex(ae){let ue=this.layerIndexes[ae];return ue||(ue=this.layerIndexes[ae]=new s),ue}_getWorkerSource(ae,ue,Ee){if(this.workerSources[ae]||(this.workerSources[ae]={}),this.workerSources[ae][ue]||(this.workerSources[ae][ue]={}),!this.workerSources[ae][ue][Ee]){const Fe={sendAsync:(rt,it)=>(rt.targetMapId=ae,this.actor.sendAsync(rt,it))};switch(ue){case"vector":this.workerSources[ae][ue][Ee]=new x(Fe,this._getLayerIndex(ae),this._getAvailableImages(ae));break;case"geojson":this.workerSources[ae][ue][Ee]=new gi(Fe,this._getLayerIndex(ae),this._getAvailableImages(ae));break;default:this.workerSources[ae][ue][Ee]=new this.externalWorkerSourceTypes[ue](Fe,this._getLayerIndex(ae),this._getAvailableImages(ae))}}return this.workerSources[ae][ue][Ee]}_getDEMWorkerSource(ae,ue){return this.demWorkerSources[ae]||(this.demWorkerSources[ae]={}),this.demWorkerSources[ae][ue]||(this.demWorkerSources[ae][ue]=new S),this.demWorkerSources[ae][ue]}}return l.i(self)&&(self.worker=new Yr(self)),Yr}),i("index",["exports","./shared"],function(l,s){var f="4.7.1";let p,v;const x={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:y=>new Promise((a,h)=>{const g=requestAnimationFrame(a);y.signal.addEventListener("abort",()=>{cancelAnimationFrame(g),h(s.c())})}),getImageData(y,a=0){return this.getImageCanvasContext(y).getImageData(-a,-a,y.width+2*a,y.height+2*a)},getImageCanvasContext(y){const a=window.document.createElement("canvas"),h=a.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return a.width=y.width,a.height=y.height,h.drawImage(y,0,0,y.width,y.height),h},resolveURL:y=>(p||(p=document.createElement("a")),p.href=y,p.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(v==null&&(v=matchMedia("(prefers-reduced-motion: reduce)")),v.matches)}};class S{static testProp(a){if(!S.docStyle)return a[0];for(let h=0;h<a.length;h++)if(a[h]in S.docStyle)return a[h];return a[0]}static create(a,h,g){const _=window.document.createElement(a);return h!==void 0&&(_.className=h),g&&g.appendChild(_),_}static createNS(a,h){return window.document.createElementNS(a,h)}static disableDrag(){S.docStyle&&S.selectProp&&(S.userSelect=S.docStyle[S.selectProp],S.docStyle[S.selectProp]="none")}static enableDrag(){S.docStyle&&S.selectProp&&(S.docStyle[S.selectProp]=S.userSelect)}static setTransform(a,h){a.style[S.transformProp]=h}static addEventListener(a,h,g,_={}){a.addEventListener(h,g,"passive"in _?_:_.capture)}static removeEventListener(a,h,g,_={}){a.removeEventListener(h,g,"passive"in _?_:_.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",S.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",S.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",S.suppressClickInternal,!0)},0)}static getScale(a){const h=a.getBoundingClientRect();return{x:h.width/a.offsetWidth||1,y:h.height/a.offsetHeight||1,boundingClientRect:h}}static getPoint(a,h,g){const _=h.boundingClientRect;return new s.P((g.clientX-_.left)/h.x-a.clientLeft,(g.clientY-_.top)/h.y-a.clientTop)}static mousePos(a,h){const g=S.getScale(a);return S.getPoint(a,g,h)}static touchPos(a,h){const g=[],_=S.getScale(a);for(let b=0;b<h.length;b++)g.push(S.getPoint(a,_,h[b]));return g}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}}S.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,S.selectProp=S.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),S.transformProp=S.testProp(["transform","WebkitTransform"]);const A={supported:!1,testSupport:function(y){!z&&R&&(N?B(y):k=y)}};let k,R,z=!1,N=!1;function B(y){const a=y.createTexture();y.bindTexture(y.TEXTURE_2D,a);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,R),y.isContextLost())return;A.supported=!0}catch{}y.deleteTexture(a),z=!0}var U;typeof document<"u"&&(R=document.createElement("img"),R.onload=()=>{k&&B(k),k=null,N=!0},R.onerror=()=>{z=!0,k=null},R.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let a,h,g,_;y.resetRequestQueue=()=>{a=[],h=0,g=0,_={}},y.addThrottleControl=L=>{const V=g++;return _[V]=L,V},y.removeThrottleControl=L=>{delete _[L],P()},y.getImage=(L,V,W=!0)=>new Promise((q,oe)=>{A.supported&&(L.headers||(L.headers={}),L.headers.accept="image/webp,*/*"),s.e(L,{type:"image"}),a.push({abortController:V,requestParameters:L,supportImageRefresh:W,state:"queued",onError:le=>{oe(le)},onSuccess:le=>{q(le)}}),P()});const b=L=>s._(this,void 0,void 0,function*(){L.state="running";const{requestParameters:V,supportImageRefresh:W,onError:q,onSuccess:oe,abortController:le}=L,ie=W===!1&&!s.i(self)&&!s.g(V.url)&&(!V.headers||Object.keys(V.headers).reduce((Te,ke)=>Te&&ke==="accept",!0));h++;const fe=ie?I(V,le):s.m(V,le);try{const Te=yield fe;delete L.abortController,L.state="completed",Te.data instanceof HTMLImageElement||s.b(Te.data)?oe(Te):Te.data&&oe({data:yield(Ae=Te.data,typeof createImageBitmap=="function"?s.d(Ae):s.f(Ae)),cacheControl:Te.cacheControl,expires:Te.expires})}catch(Te){delete L.abortController,q(Te)}finally{h--,P()}var Ae}),P=()=>{const L=(()=>{for(const V of Object.keys(_))if(_[V]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let V=h;V<L&&a.length>0;V++){const W=a.shift();W.abortController.signal.aborted?V--:b(W)}},I=(L,V)=>new Promise((W,q)=>{const oe=new Image,le=L.url,ie=L.credentials;ie&&ie==="include"?oe.crossOrigin="use-credentials":(ie&&ie==="same-origin"||!s.s(le))&&(oe.crossOrigin="anonymous"),V.signal.addEventListener("abort",()=>{oe.src="",q(s.c())}),oe.fetchPriority="high",oe.onload=()=>{oe.onerror=oe.onload=null,W({data:oe})},oe.onerror=()=>{oe.onerror=oe.onload=null,V.signal.aborted||q(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},oe.src=le})}(U||(U={})),U.resetRequestQueue();class K{constructor(a){this._transformRequestFn=a}transformRequest(a,h){return this._transformRequestFn&&this._transformRequestFn(a,h)||{url:a}}setTransformRequest(a){this._transformRequestFn=a}}function ne(y){var a=new s.A(3);return a[0]=y[0],a[1]=y[1],a[2]=y[2],a}var ee,Q=function(y,a,h){return y[0]=a[0]-h[0],y[1]=a[1]-h[1],y[2]=a[2]-h[2],y};ee=new s.A(3),s.A!=Float32Array&&(ee[0]=0,ee[1]=0,ee[2]=0);var re=function(y){var a=y[0],h=y[1];return a*a+h*h};function Se(y){const a=[];if(typeof y=="string")a.push({id:"default",url:y});else if(y&&y.length>0){const h=[];for(const{id:g,url:_}of y){const b=`${g}${_}`;h.indexOf(b)===-1&&(h.push(b),a.push({id:g,url:_}))}}return a}function J(y,a,h){const g=y.split("?");return g[0]+=`${a}${h}`,g.join("?")}(function(){var y=new s.A(2);s.A!=Float32Array&&(y[0]=0,y[1]=0)})();class G{constructor(a,h,g,_){this.context=a,this.format=g,this.texture=a.gl.createTexture(),this.update(h,_)}update(a,h,g){const{width:_,height:b}=a,P=!(this.size&&this.size[0]===_&&this.size[1]===b||g),{context:I}=this,{gl:L}=I;if(this.useMipmap=!!(h&&h.useMipmap),L.bindTexture(L.TEXTURE_2D,this.texture),I.pixelStoreUnpackFlipY.set(!1),I.pixelStoreUnpack.set(1),I.pixelStoreUnpackPremultiplyAlpha.set(this.format===L.RGBA&&(!h||h.premultiply!==!1)),P)this.size=[_,b],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||s.b(a)?L.texImage2D(L.TEXTURE_2D,0,this.format,this.format,L.UNSIGNED_BYTE,a):L.texImage2D(L.TEXTURE_2D,0,this.format,_,b,0,this.format,L.UNSIGNED_BYTE,a.data);else{const{x:V,y:W}=g||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||s.b(a)?L.texSubImage2D(L.TEXTURE_2D,0,V,W,L.RGBA,L.UNSIGNED_BYTE,a):L.texSubImage2D(L.TEXTURE_2D,0,V,W,_,b,L.RGBA,L.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&L.generateMipmap(L.TEXTURE_2D)}bind(a,h,g){const{context:_}=this,{gl:b}=_;b.bindTexture(b.TEXTURE_2D,this.texture),g!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=b.LINEAR),a!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,g||a),this.filter=a),h!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,h),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,h),this.wrap=h)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}function se(y){const{userImage:a}=y;return!!(a&&a.render&&a.render())&&(y.data.replace(new Uint8Array(a.data.buffer)),!0)}class ve extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(const{ids:h,promiseResolve:g}of this.requestors)g(this._getImagesForIds(h));this.requestors=[]}}getImage(a){const h=this.images[a];if(h&&!h.data&&h.spriteData){const g=h.spriteData;h.data=new s.R({width:g.width,height:g.height},g.context.getImageData(g.x,g.y,g.width,g.height).data),h.spriteData=null}return h}addImage(a,h){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,h)&&(this.images[a]=h)}_validate(a,h){let g=!0;const _=h.data||h.spriteData;return this._validateStretch(h.stretchX,_&&_.width)||(this.fire(new s.j(new Error(`Image "${a}" has invalid "stretchX" value`))),g=!1),this._validateStretch(h.stretchY,_&&_.height)||(this.fire(new s.j(new Error(`Image "${a}" has invalid "stretchY" value`))),g=!1),this._validateContent(h.content,h)||(this.fire(new s.j(new Error(`Image "${a}" has invalid "content" value`))),g=!1),g}_validateStretch(a,h){if(!a)return!0;let g=0;for(const _ of a){if(_[0]<g||_[1]<_[0]||h<_[1])return!1;g=_[1]}return!0}_validateContent(a,h){if(!a)return!0;if(a.length!==4)return!1;const g=h.spriteData,_=g&&g.width||h.data.width,b=g&&g.height||h.data.height;return!(a[0]<0||_<a[0]||a[1]<0||b<a[1]||a[2]<0||_<a[2]||a[3]<0||b<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,h,g=!0){const _=this.getImage(a);if(g&&(_.data.width!==h.data.width||_.data.height!==h.data.height))throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=_.version+1,this.images[a]=h,this.updatedImages[a]=!0}removeImage(a){const h=this.images[a];delete this.images[a],delete this.patterns[a],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a){return new Promise((h,g)=>{let _=!0;if(!this.isLoaded())for(const b of a)this.images[b]||(_=!1);this.isLoaded()||_?h(this._getImagesForIds(a)):this.requestors.push({ids:a,promiseResolve:h})})}_getImagesForIds(a){const h={};for(const g of a){let _=this.getImage(g);_||(this.fire(new s.k("styleimagemissing",{id:g})),_=this.getImage(g)),_?h[g]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,textFitWidth:_.textFitWidth,textFitHeight:_.textFitHeight,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:s.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return h}getPixelSize(){const{width:a,height:h}=this.atlasImage;return{width:a,height:h}}getPattern(a){const h=this.patterns[a],g=this.getImage(a);if(!g)return null;if(h&&h.position.version===g.version)return h.position;if(h)h.position.version=g.version;else{const _={w:g.data.width+2,h:g.data.height+2,x:0,y:0},b=new s.I(_,g);this.patterns[a]={bin:_,position:b}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){const h=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new G(a,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const a=[];for(const b in this.patterns)a.push(this.patterns[b].bin);const{w:h,h:g}=s.p(a),_=this.atlasImage;_.resize({width:h||1,height:g||1});for(const b in this.patterns){const{bin:P}=this.patterns[b],I=P.x+1,L=P.y+1,V=this.getImage(b).data,W=V.width,q=V.height;s.R.copy(V,_,{x:0,y:0},{x:I,y:L},{width:W,height:q}),s.R.copy(V,_,{x:0,y:q-1},{x:I,y:L-1},{width:W,height:1}),s.R.copy(V,_,{x:0,y:0},{x:I,y:L+q},{width:W,height:1}),s.R.copy(V,_,{x:W-1,y:0},{x:I-1,y:L},{width:1,height:q}),s.R.copy(V,_,{x:0,y:0},{x:I+W,y:L},{width:1,height:q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(const h of a){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const g=this.getImage(h);g||s.w(`Image with ID: "${h}" was not found`),se(g)&&this.updateImage(h,g)}}}const ge=1e20;function je(y,a,h,g,_,b,P,I,L){for(let V=a;V<a+g;V++)$e(y,h*b+V,b,_,P,I,L);for(let V=h;V<h+_;V++)$e(y,V*b+a,1,g,P,I,L)}function $e(y,a,h,g,_,b,P){b[0]=0,P[0]=-ge,P[1]=ge,_[0]=y[a];for(let I=1,L=0,V=0;I<g;I++){_[I]=y[a+I*h];const W=I*I;do{const q=b[L];V=(_[I]-_[q]+W-q*q)/(I-q)/2}while(V<=P[L]&&--L>-1);L++,b[L]=I,P[L]=V,P[L+1]=ge}for(let I=0,L=0;I<g;I++){for(;P[L+1]<I;)L++;const V=b[L],W=I-V;y[a+I*h]=_[V]+W*W}}class Ze{constructor(a,h){this.requestManager=a,this.localIdeographFontFamily=h,this.entries={}}setURL(a){this.url=a}getGlyphs(a){return s._(this,void 0,void 0,function*(){const h=[];for(const b in a)for(const P of a[b])h.push(this._getAndCacheGlyphsPromise(b,P));const g=yield Promise.all(h),_={};for(const{stack:b,id:P,glyph:I}of g)_[b]||(_[b]={}),_[b][P]=I&&{id:I.id,bitmap:I.bitmap.clone(),metrics:I.metrics};return _})}_getAndCacheGlyphsPromise(a,h){return s._(this,void 0,void 0,function*(){let g=this.entries[a];g||(g=this.entries[a]={glyphs:{},requests:{},ranges:{}});let _=g.glyphs[h];if(_!==void 0)return{stack:a,id:h,glyph:_};if(_=this._tinySDF(g,a,h),_)return g.glyphs[h]=_,{stack:a,id:h,glyph:_};const b=Math.floor(h/256);if(256*b>65535)throw new Error("glyphs > 65535 not supported");if(g.ranges[b])return{stack:a,id:h,glyph:_};if(!this.url)throw new Error("glyphsUrl is not set");if(!g.requests[b]){const I=Ze.loadGlyphRange(a,b,this.url,this.requestManager);g.requests[b]=I}const P=yield g.requests[b];for(const I in P)this._doesCharSupportLocalGlyph(+I)||(g.glyphs[+I]=P[+I]);return g.ranges[b]=!0,{stack:a,id:h,glyph:P[h]||null}})}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(a))}_tinySDF(a,h,g){const _=this.localIdeographFontFamily;if(!_||!this._doesCharSupportLocalGlyph(g))return;let b=a.tinySDF;if(!b){let I="400";/bold/i.test(h)?I="900":/medium/i.test(h)?I="500":/light/i.test(h)&&(I="200"),b=a.tinySDF=new Ze.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:_,fontWeight:I})}const P=b.draw(String.fromCharCode(g));return{id:g,bitmap:new s.o({width:P.width||60,height:P.height||60},P.data),metrics:{width:P.glyphWidth/2||24,height:P.glyphHeight/2||24,left:P.glyphLeft/2+.5||0,top:P.glyphTop/2-27.5||-8,advance:P.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ze.loadGlyphRange=function(y,a,h,g){return s._(this,void 0,void 0,function*(){const _=256*a,b=_+255,P=g.transformRequest(h.replace("{fontstack}",y).replace("{range}",`${_}-${b}`),"Glyphs"),I=yield s.l(P,new AbortController);if(!I||!I.data)throw new Error(`Could not load glyph range. range: ${a}, ${_}-${b}`);const L={};for(const V of s.n(I.data))L[V.id]=V;return L})},Ze.TinySDF=class{constructor({fontSize:y=24,buffer:a=3,radius:h=8,cutoff:g=.25,fontFamily:_="sans-serif",fontWeight:b="normal",fontStyle:P="normal"}={}){this.buffer=a,this.cutoff=g,this.radius=h;const I=this.size=y+4*a,L=this._createCanvas(I),V=this.ctx=L.getContext("2d",{willReadFrequently:!0});V.font=`${P} ${b} ${y}px ${_}`,V.textBaseline="alphabetic",V.textAlign="left",V.fillStyle="black",this.gridOuter=new Float64Array(I*I),this.gridInner=new Float64Array(I*I),this.f=new Float64Array(I),this.z=new Float64Array(I+1),this.v=new Uint16Array(I)}_createCanvas(y){const a=document.createElement("canvas");return a.width=a.height=y,a}draw(y){const{width:a,actualBoundingBoxAscent:h,actualBoundingBoxDescent:g,actualBoundingBoxLeft:_,actualBoundingBoxRight:b}=this.ctx.measureText(y),P=Math.ceil(h),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-_))),L=Math.min(this.size-this.buffer,P+Math.ceil(g)),V=I+2*this.buffer,W=L+2*this.buffer,q=Math.max(V*W,0),oe=new Uint8ClampedArray(q),le={data:oe,width:V,height:W,glyphWidth:I,glyphHeight:L,glyphTop:P,glyphLeft:0,glyphAdvance:a};if(I===0||L===0)return le;const{ctx:ie,buffer:fe,gridInner:Ae,gridOuter:Te}=this;ie.clearRect(fe,fe,I,L),ie.fillText(y,fe,fe+P);const ke=ie.getImageData(fe,fe,I,L);Te.fill(ge,0,q),Ae.fill(0,0,q);for(let Ie=0;Ie<L;Ie++)for(let ze=0;ze<I;ze++){const Je=ke.data[4*(Ie*I+ze)+3]/255;if(Je===0)continue;const Ge=(Ie+fe)*V+ze+fe;if(Je===1)Te[Ge]=0,Ae[Ge]=ge;else{const Pt=.5-Je;Te[Ge]=Pt>0?Pt*Pt:0,Ae[Ge]=Pt<0?Pt*Pt:0}}je(Te,0,0,V,W,V,this.f,this.v,this.z),je(Ae,fe,fe,I,L,V,this.f,this.v,this.z);for(let Ie=0;Ie<q;Ie++){const ze=Math.sqrt(Te[Ie])-Math.sqrt(Ae[Ie]);oe[Ie]=Math.round(255-255*(ze/this.radius+this.cutoff))}return le}};class Me{constructor(){this.specification=s.v.light.position}possiblyEvaluate(a,h){return s.x(a.expression.evaluate(h))}interpolate(a,h,g){return{x:s.y.number(a.x,h.x,g),y:s.y.number(a.y,h.y,g),z:s.y.number(a.z,h.z,g)}}}let Ue;class Qe extends s.E{constructor(a){super(),Ue=Ue||new s.q({anchor:new s.D(s.v.light.anchor),position:new Me,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.T(Ue),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,h={}){if(!this._validate(s.r,a,h))for(const g in a){const _=a[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),_):this._transitionable.setValue(g,_)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,h,g){return(!g||g.validate!==!1)&&s.t(this,a.call(s.u,{value:h,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}const ct=new s.q({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class ce extends s.E{constructor(a){super(),this._transitionable=new s.T(ct),this.setSky(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.z(0))}setSky(a,h={}){if(!this._validate(s.B,a,h)){a||(a={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const g in a){const _=a[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),_):this._transitionable.setValue(g,_)}}}getSky(){return this._transitionable.serialize()}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,h,g={}){return(g==null?void 0:g.validate)!==!1&&s.t(this,a.call(s.u,s.e({value:h,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(a){return a<60?0:a<70?(a-60)/10:1}}class be{constructor(a,h){this.width=a,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,h){const g=a.join(",")+String(h);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(a,h)),this.dashEntry[g]}getDashRanges(a,h,g){const _=[];let b=a.length%2==1?-a[a.length-1]*g:0,P=a[0]*g,I=!0;_.push({left:b,right:P,isDash:I,zeroLength:a[0]===0});let L=a[0];for(let V=1;V<a.length;V++){I=!I;const W=a[V];b=L*g,L+=W,P=L*g,_.push({left:b,right:P,isDash:I,zeroLength:W===0})}return _}addRoundDash(a,h,g){const _=h/2;for(let b=-g;b<=g;b++){const P=this.width*(this.nextRow+g+b);let I=0,L=a[I];for(let V=0;V<this.width;V++){V/L.right>1&&(L=a[++I]);const W=Math.abs(V-L.left),q=Math.abs(V-L.right),oe=Math.min(W,q);let le;const ie=b/g*(_+1);if(L.isDash){const fe=_-Math.abs(ie);le=Math.sqrt(oe*oe+fe*fe)}else le=_-Math.sqrt(oe*oe+ie*ie);this.data[P+V]=Math.max(0,Math.min(255,le+128))}}}addRegularDash(a){for(let I=a.length-1;I>=0;--I){const L=a[I],V=a[I+1];L.zeroLength?a.splice(I,1):V&&V.isDash===L.isDash&&(V.left=L.left,a.splice(I,1))}const h=a[0],g=a[a.length-1];h.isDash===g.isDash&&(h.left=g.left-this.width,g.right=h.right+this.width);const _=this.width*this.nextRow;let b=0,P=a[b];for(let I=0;I<this.width;I++){I/P.right>1&&(P=a[++b]);const L=Math.abs(I-P.left),V=Math.abs(I-P.right),W=Math.min(L,V);this.data[_+I]=Math.max(0,Math.min(255,(P.isDash?W:-W)+128))}}addDash(a,h){const g=h?7:0,_=2*g+1;if(this.nextRow+_>this.height)return s.w("LineAtlas out of space"),null;let b=0;for(let I=0;I<a.length;I++)b+=a[I];if(b!==0){const I=this.width/b,L=this.getDashRanges(a,this.width,I);h?this.addRoundDash(L,I,g):this.addRegularDash(L)}const P={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:b};return this.nextRow+=_,this.dirty=!0,P}bind(a){const h=a.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}const Oe="maplibre_preloaded_worker_pool";class Be{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<Be.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Oe]}numActive(){return Object.keys(this.active).length}}const qe=Math.floor(x.hardwareConcurrency/2);let tt,We;function Xe(){return tt||(tt=new Be),tt}Be.workerCount=s.C(globalThis)?Math.max(Math.min(qe,3),1):1;class lt{constructor(a,h){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=h;const g=this.workerPool.acquire(h);for(let _=0;_<g.length;_++){const b=new s.F(g[_],h);b.name=`Worker ${_}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,h){const g=[];for(const _ of this.actors)g.push(_.sendAsync({type:a,data:h}));return Promise.all(g)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach(h=>{h.remove()}),this.actors=[],a&&this.workerPool.release(this.id)}registerMessageHandler(a,h){for(const g of this.actors)g.registerMessageHandler(a,h)}}function wt(){return We||(We=new lt(Xe(),s.G),We.registerMessageHandler("GR",(y,a,h)=>s.m(a,h))),We}function Lt(y,a){const h=s.H();return s.J(h,h,[1,1,0]),s.K(h,h,[.5*y.width,.5*y.height,1]),s.L(h,h,y.calculatePosMatrix(a.toUnwrapped()))}function At(y,a,h,g,_,b){const P=function(q,oe,le){if(q)for(const ie of q){const fe=oe[ie];if(fe&&fe.source===le&&fe.type==="fill-extrusion")return!0}else for(const ie in oe){const fe=oe[ie];if(fe.source===le&&fe.type==="fill-extrusion")return!0}return!1}(_&&_.layers,a,y.id),I=b.maxPitchScaleFactor(),L=y.tilesIn(g,I,P);L.sort(zt);const V=[];for(const q of L)V.push({wrappedTileID:q.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(a,h,y._state,q.queryGeometry,q.cameraQueryGeometry,q.scale,_,b,I,Lt(y.transform,q.tileID))});const W=function(q){const oe={},le={};for(const ie of q){const fe=ie.queryResults,Ae=ie.wrappedTileID,Te=le[Ae]=le[Ae]||{};for(const ke in fe){const Ie=fe[ke],ze=Te[ke]=Te[ke]||{},Je=oe[ke]=oe[ke]||[];for(const Ge of Ie)ze[Ge.featureIndex]||(ze[Ge.featureIndex]=!0,Je.push(Ge))}}return oe}(V);for(const q in W)W[q].forEach(oe=>{const le=oe.feature,ie=y.getFeatureState(le.layer["source-layer"],le.id);le.source=le.layer.source,le.layer["source-layer"]&&(le.sourceLayer=le.layer["source-layer"]),le.state=ie});return W}function zt(y,a){const h=y.tileID,g=a.tileID;return h.overscaledZ-g.overscaledZ||h.canonical.y-g.canonical.y||h.wrap-g.wrap||h.canonical.x-g.canonical.x}function vt(y,a,h){return s._(this,void 0,void 0,function*(){let g=y;if(y.url?g=(yield s.h(a.transformRequest(y.url,"Source"),h)).data:yield x.frameAsync(h),!g)return null;const _=s.M(s.e(g,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in g&&g.vector_layers&&(_.vectorLayerIds=g.vector_layers.map(b=>b.id)),_})}class pe{constructor(a,h){a&&(h?this.setSouthWest(a).setNorthEast(h):Array.isArray(a)&&(a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof s.N?new s.N(a.lng,a.lat):s.N.convert(a),this}setSouthWest(a){return this._sw=a instanceof s.N?new s.N(a.lng,a.lat):s.N.convert(a),this}extend(a){const h=this._sw,g=this._ne;let _,b;if(a instanceof s.N)_=a,b=a;else{if(!(a instanceof pe))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(pe.convert(a)):this.extend(s.N.convert(a)):a&&("lng"in a||"lon"in a)&&"lat"in a?this.extend(s.N.convert(a)):this;if(_=a._sw,b=a._ne,!_||!b)return this}return h||g?(h.lng=Math.min(_.lng,h.lng),h.lat=Math.min(_.lat,h.lat),g.lng=Math.max(b.lng,g.lng),g.lat=Math.max(b.lat,g.lat)):(this._sw=new s.N(_.lng,_.lat),this._ne=new s.N(b.lng,b.lat)),this}getCenter(){return new s.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.N(this.getWest(),this.getNorth())}getSouthEast(){return new s.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:h,lat:g}=s.N.convert(a);let _=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&_}static convert(a){return a instanceof pe?a:a&&new pe(a)}static fromLngLat(a,h=0){const g=360*h/40075017,_=g/Math.cos(Math.PI/180*a.lat);return new pe(new s.N(a.lng-_,a.lat-g),new s.N(a.lng+_,a.lat+g))}adjustAntiMeridian(){const a=new s.N(this._sw.lng,this._sw.lat),h=new s.N(this._ne.lng,this._ne.lat);return new pe(a,a.lng>h.lng?new s.N(h.lng+360,h.lat):h)}}class ur{constructor(a,h,g){this.bounds=pe.convert(this.validateBounds(a)),this.minzoom=h||0,this.maxzoom=g||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const h=Math.pow(2,a.z),g=Math.floor(s.O(this.bounds.getWest())*h),_=Math.floor(s.Q(this.bounds.getNorth())*h),b=Math.ceil(s.O(this.bounds.getEast())*h),P=Math.ceil(s.Q(this.bounds.getSouth())*h);return a.x>=g&&a.x<b&&a.y>=_&&a.y<P}}class sr extends s.E{constructor(a,h,g,_){if(super(),this.id=a,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.M(h,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield vt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),a&&(s.e(this,a),a.bounds&&(this.tileBounds=new ur(a.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new s.j(a))}})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.abort(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(a){return s._(this,void 0,void 0,function*(){const h=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(h,"Tile"),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};g.request.collectResourceTiming=this._collectResourceTiming;let _="RT";if(a.actor&&a.state!=="expired"){if(a.state==="loading")return new Promise((b,P)=>{a.reloadPromise={resolve:b,reject:P}})}else a.actor=this.dispatcher.getActor(),_="LT";a.abortController=new AbortController;try{const b=yield a.actor.sendAsync({type:_,data:g},a.abortController);if(delete a.abortController,a.aborted)return;this._afterTileLoadWorkerResponse(a,b)}catch(b){if(delete a.abortController,a.aborted)return;if(b&&b.status!==404)throw b;this._afterTileLoadWorkerResponse(a,null)}})}_afterTileLoadWorkerResponse(a,h){if(h&&h.resourceTiming&&(a.resourceTiming=h.resourceTiming),h&&this.map._refreshExpiredTiles&&a.setExpiryData(h),a.loadVectorData(h,this.map.painter),a.reloadPromise){const g=a.reloadPromise;a.reloadPromise=null,this.loadTile(a).then(g.resolve).catch(g.reject)}}abortTile(a){return s._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.actor&&(yield a.actor.sendAsync({type:"AT",data:{uid:a.uid,type:this.type,source:this.id}}))})}unloadTile(a){return s._(this,void 0,void 0,function*(){a.unloadVectorData(),a.actor&&(yield a.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Tt extends s.E{constructor(a,h,g,_){super(),this.id=a,this.dispatcher=g,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},h),s.e(this,s.M(h,["url","scheme","tileSize"]))}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield vt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,a&&(s.e(this,a),a.bounds&&(this.tileBounds=new ur(a.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new s.j(a))}})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}serialize(){return s.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a){return s._(this,void 0,void 0,function*(){const h=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.abortController=new AbortController;try{const g=yield U.getImage(this.map._requestManager.transformRequest(h,"Tile"),a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(g&&g.data){this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&a.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const _=this.map.painter.context,b=_.gl,P=g.data;a.texture=this.map.painter.getTileTexture(P.width),a.texture?a.texture.update(P,{useMipmap:!0}):(a.texture=new G(_,P,b.RGBA,{useMipmap:!0}),a.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST)),a.state="loaded"}}catch(g){if(delete a.abortController,a.aborted)a.state="unloaded";else if(g)throw a.state="errored",g}})}abortTile(a){return s._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController)})}unloadTile(a){return s._(this,void 0,void 0,function*(){a.texture&&this.map.painter.saveTileTexture(a.texture)})}hasTransition(){return!1}}class Nt extends Tt{constructor(a,h,g,_){super(a,h,g,_),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox",this.redFactor=h.redFactor,this.greenFactor=h.greenFactor,this.blueFactor=h.blueFactor,this.baseShift=h.baseShift}loadTile(a){return s._(this,void 0,void 0,function*(){const h=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(h,"Tile");a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.abortController=new AbortController;try{const _=yield U.getImage(g,a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(_&&_.data){const b=_.data;this.map._refreshExpiredTiles&&_.cacheControl&&_.expires&&a.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const P=s.b(b)&&s.U()?b:yield this.readImageNow(b),I={type:this.type,uid:a.uid,source:this.id,rawImageData:P,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!a.actor||a.state==="expired"){a.actor=this.dispatcher.getActor();const L=yield a.actor.sendAsync({type:"LDT",data:I});a.dem=L,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded"}}}catch(_){if(delete a.abortController,a.aborted)a.state="unloaded";else if(_)throw a.state="errored",_}})}readImageNow(a){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.V()){const h=a.width+2,g=a.height+2;try{return new s.R({width:h,height:g},yield s.W(a,-1,-1,h,g))}catch{}}return x.getImageData(a,1)})}_getNeighboringTiles(a){const h=a.canonical,g=Math.pow(2,h.z),_=(h.x-1+g)%g,b=h.x===0?a.wrap-1:a.wrap,P=(h.x+1+g)%g,I=h.x+1===g?a.wrap+1:a.wrap,L={};return L[new s.S(a.overscaledZ,b,h.z,_,h.y).key]={backfilled:!1},L[new s.S(a.overscaledZ,I,h.z,P,h.y).key]={backfilled:!1},h.y>0&&(L[new s.S(a.overscaledZ,b,h.z,_,h.y-1).key]={backfilled:!1},L[new s.S(a.overscaledZ,a.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},L[new s.S(a.overscaledZ,I,h.z,P,h.y-1).key]={backfilled:!1}),h.y+1<g&&(L[new s.S(a.overscaledZ,b,h.z,_,h.y+1).key]={backfilled:!1},L[new s.S(a.overscaledZ,a.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},L[new s.S(a.overscaledZ,I,h.z,P,h.y+1).key]={backfilled:!1}),L}unloadTile(a){return s._(this,void 0,void 0,function*(){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&(yield a.actor.sendAsync({type:"RDT",data:{type:this.type,uid:a.uid,source:this.id}}))})}}class Zt extends s.E{constructor(a,h,g,_){super(),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=g.getActor(),this.setEventedParent(_),this._data=h.data,this._options=s.e({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId;const b=s.X/this.tileSize;h.clusterMaxZoom!==void 0&&this.maxzoom<=h.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${h.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:(h.buffer!==void 0?h.buffer:128)*b,tolerance:(h.tolerance!==void 0?h.tolerance:.375)*b,extent:s.X,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:h.clusterMaxZoom!==void 0?h.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,h.clusterMinPoints||2),extent:s.X,radius:(h.clusterRadius||50)*b,log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._updateWorkerData(),this}updateData(a){return this._updateWorkerData(a),this}getData(){return s._(this,void 0,void 0,function*(){const a=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:a})})}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(a.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=a.clusterRadius),a.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=a.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(a){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:a,source:this.id}})}getClusterChildren(a){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:a,source:this.id}})}getClusterLeaves(a,h,g){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:a,limit:h,offset:g}})}_updateWorkerData(a){return s._(this,void 0,void 0,function*(){const h=s.e({type:this.type},this.workerOptions);a?h.dataDiff=a:typeof this._data=="string"?(h.request=this.map._requestManager.transformRequest(x.resolveURL(this._data),"Source"),h.request.collectResourceTiming=this._collectResourceTiming):h.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.k("dataloading",{dataType:"source"}));try{const g=yield this.actor.sendAsync({type:"LD",data:h});if(this._pendingLoads--,this._removed||g.abandoned)return void this.fire(new s.k("dataabort",{dataType:"source"}));let _=null;g.resourceTiming&&g.resourceTiming[this.id]&&(_=g.resourceTiming[this.id].slice(0));const b={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&s.e(b,{resourceTiming:_}),this.fire(new s.k("data",Object.assign(Object.assign({},b),{sourceDataType:"metadata"}))),this.fire(new s.k("data",Object.assign(Object.assign({},b),{sourceDataType:"content"})))}catch(g){if(this._pendingLoads--,this._removed)return void this.fire(new s.k("dataabort",{dataType:"source"}));this.fire(new s.j(g))}})}loaded(){return this._pendingLoads===0}loadTile(a){return s._(this,void 0,void 0,function*(){const h=a.actor?"RT":"LT";a.actor=this.actor;const g={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};a.abortController=new AbortController;const _=yield this.actor.sendAsync({type:h,data:g},a.abortController);delete a.abortController,a.unloadVectorData(),a.aborted||a.loadVectorData(_,this.map.painter,h==="RT")})}abortTile(a){return s._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.aborted=!0})}unloadTile(a){return s._(this,void 0,void 0,function*(){a.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var rr=s.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class at extends s.E{constructor(a,h,g,_){super(),this.id=a,this.dispatcher=g,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=h}load(a){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const h=yield U.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,h&&h.data&&(this.image=h.data,a&&(this.coordinates=a),this._finishLoading())}catch(h){this._request=null,this._loaded=!0,this.fire(new s.j(h))}})}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=a.url,this.load(a.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(a){this.coordinates=a;const h=a.map(s.Z.fromLngLat);this.tileID=function(_){let b=1/0,P=1/0,I=-1/0,L=-1/0;for(const oe of _)b=Math.min(b,oe.x),P=Math.min(P,oe.y),I=Math.max(I,oe.x),L=Math.max(L,oe.y);const V=Math.max(I-b,L-P),W=Math.max(0,Math.floor(-Math.log(V)/Math.LN2)),q=Math.pow(2,W);return new s.a1(W,Math.floor((b+I)/2*q),Math.floor((P+L)/2*q))}(h),this.minzoom=this.maxzoom=this.tileID.z;const g=h.map(_=>this.tileID.getTilePoint(_)._round());return this._boundsArray=new s.$,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,s.X,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,s.X),this._boundsArray.emplaceBack(g[2].x,g[2].y,s.X,s.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const a=this.map.painter.context,h=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,rr.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new G(a,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));let g=!1;for(const _ in this.tiles){const b=this.tiles[_];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,g=!0)}g&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(a){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={}):a.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class It extends at{constructor(a,h,g,_){super(a,h,g,_),this.roundZoom=!0,this.type="video",this.options=h}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;const a=this.options;this.urls=[];for(const h of a.urls)this.urls.push(this.map._requestManager.transformRequest(h,"Source").url);try{const h=yield s.a3(this.urls);if(this._loaded=!0,!h)return;this.video=h,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(h){this.fire(new s.j(h))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){const h=this.video.seekable;a<h.start(0)||a>h.end(0)?this.fire(new s.j(new s.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const a=this.map.painter.context,h=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,rr.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.texSubImage2D(h.TEXTURE_2D,0,0,0,h.RGBA,h.UNSIGNED_BYTE,this.video)):(this.texture=new G(a,this.video,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));let g=!1;for(const _ in this.tiles){const b=this.tiles[_];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,g=!0)}g&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Vt extends at{constructor(a,h,g,_){super(a,h,g,_),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(P=>typeof P!="number"))||this.fire(new s.j(new s.a2(`sources.${a}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.j(new s.a2(`sources.${a}`,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new s.j(new s.a2(`sources.${a}`,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new s.j(new s.a2(`sources.${a}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.j(new s.a2(`sources.${a}`,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const h=this.map.painter.context,g=h.gl;this.boundsBuffer||(this.boundsBuffer=h.createVertexBuffer(this._boundsArray,rr.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new G(h,this.canvas,g.RGBA,{premultiply:!0});let _=!1;for(const b in this.tiles){const P=this.tiles[b];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture,_=!0)}_&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}const lr={},Pr=y=>{switch(y){case"geojson":return Zt;case"image":return at;case"raster":return Tt;case"raster-dem":return Nt;case"vector":return sr;case"video":return It;case"canvas":return Vt}return lr[y]},_t="RTLPluginLoaded";class Ut extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=wt()}_syncState(a){return this.status=a,this.dispatcher.broadcast("SRPS",{pluginStatus:a,pluginURL:this.url}).catch(h=>{throw this.status="error",h})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(a){return s._(this,arguments,void 0,function*(h,g=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=x.resolveURL(h),!this.url)throw new Error(`requested url ${h} is invalid`);if(this.status==="unavailable"){if(!g)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return s._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.k(_t))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let _r=null;function Kt(){return _r||(_r=new Ut),_r}class fn{constructor(a,h){this.timeAdded=0,this.fadeEndTime=0,this.tileID=a,this.uid=s.a4(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){const h=a+this.timeAdded;h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,h,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(_,b){const P={};if(!b)return P;for(const I of _){const L=I.layerIds.map(V=>b.getLayer(V)).filter(Boolean);if(L.length!==0){I.layers=L,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map(V=>L.filter(W=>W.id===V)[0]));for(const V of L)P[V.id]=I}}return P}(a.buckets,h.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const b=this.buckets[_];if(b instanceof s.a6){if(this.hasSymbolBuckets=!0,!g)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const b=this.buckets[_];if(b instanceof s.a6&&b.hasRTLText){this.hasRTLText=!0,Kt().lazyLoad();break}}this.queryPadding=0;for(const _ in this.buckets){const b=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(_).queryRadius(b))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new s.a5}unloadVectorData(){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(const g in this.buckets){const _=this.buckets[g];_.uploadPending()&&_.upload(a)}const h=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new G(a,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new G(a,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,h,g,_,b,P,I,L,V,W){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:b,scale:P,tileSize:this.tileSize,pixelPosMatrix:W,transform:L,params:I,queryPadding:this.queryPadding*V},a,h,g):{}}querySourceFeatures(a,h){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const _=g.loadVTLayers(),b=h&&h.sourceLayer?h.sourceLayer:"",P=_._geojsonTileLayer||_[b];if(!P)return;const I=s.a7(h&&h.filter),{z:L,x:V,y:W}=this.tileID.canonical,q={z:L,x:V,y:W};for(let oe=0;oe<P.length;oe++){const le=P.feature(oe);if(I.needGeometry){const Ae=s.a8(le,!0);if(!I.filter(new s.z(this.tileID.overscaledZ),Ae,this.tileID.canonical))continue}else if(!I.filter(new s.z(this.tileID.overscaledZ),le))continue;const ie=g.getId(le,b),fe=new s.a9(le,L,V,W,ie);fe.tile=q,a.push(fe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const h=this.expirationTime;if(a.cacheControl){const g=s.aa(a.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const g=Date.now();let _=!1;if(this.expirationTime>g)_=!1;else if(h)if(this.expirationTime<h)_=!0;else{const b=this.expirationTime-h;b?this.expirationTime=g+Math.max(b,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0)return;const g=this.latestFeatureIndex.loadVTLayers();for(const _ in this.buckets){if(!h.style.hasLayer(_))continue;const b=this.buckets[_],P=b.layers[0].sourceLayer||"_geojsonTileLayer",I=g[P],L=a[P];if(!I||!L||Object.keys(L).length===0)continue;b.update(L,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});const V=h&&h.style&&h.style.getLayer(_);V&&(this.queryPadding=Math.max(this.queryPadding,V.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<x.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=x.now()+a}setDependencies(a,h){const g={};for(const _ of h)g[_]=!0;this.dependencies[a]=g}hasDependency(a,h){for(const g of a){const _=this.dependencies[g];if(_){for(const b of h)if(_[b])return!0}}return!1}}class Dt{constructor(a,h){this.max=a,this.onRemove=h,this.reset()}reset(){for(const a in this.data)for(const h of this.data[a])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(a,h,g){const _=a.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);const b={value:h,timeout:void 0};if(g!==void 0&&(b.timeout=setTimeout(()=>{this.remove(a,b)},g)),this.data[_].push(b),this.order.push(_),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const h=this.data[a].shift();return h.timeout&&clearTimeout(h.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),h.value}getByKey(a){const h=this.data[a];return h?h[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,h){if(!this.has(a))return this;const g=a.wrapped().key,_=h===void 0?0:this.data[g].indexOf(h),b=this.data[g][_];return this.data[g].splice(_,1),b.timeout&&clearTimeout(b.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(b.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(a){const h=[];for(const g in this.data)for(const _ of this.data[g])a(_.value)||h.push(_);for(const g of h)this.remove(g.value.tileID,g)}}class Br{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,h,g){const _=String(h);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][_]=this.stateChanges[a][_]||{},s.e(this.stateChanges[a][_],g),this.deletedStates[a]===null){this.deletedStates[a]={};for(const b in this.state[a])b!==_&&(this.deletedStates[a][b]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][_]===null){this.deletedStates[a][_]={};for(const b in this.state[a][_])g[b]||(this.deletedStates[a][_][b]=null)}else for(const b in g)this.deletedStates[a]&&this.deletedStates[a][_]&&this.deletedStates[a][_][b]===null&&delete this.deletedStates[a][_][b]}removeFeatureState(a,h,g){if(this.deletedStates[a]===null)return;const _=String(h);if(this.deletedStates[a]=this.deletedStates[a]||{},g&&h!==void 0)this.deletedStates[a][_]!==null&&(this.deletedStates[a][_]=this.deletedStates[a][_]||{},this.deletedStates[a][_][g]=null);else if(h!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][_])for(g in this.deletedStates[a][_]={},this.stateChanges[a][_])this.deletedStates[a][_][g]=null;else this.deletedStates[a][_]=null;else this.deletedStates[a]=null}getState(a,h){const g=String(h),_=s.e({},(this.state[a]||{})[g],(this.stateChanges[a]||{})[g]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){const b=this.deletedStates[a][h];if(b===null)return{};for(const P in b)delete _[P]}return _}initializeTileState(a,h){a.setFeatureState(this.state,h)}coalesceChanges(a,h){const g={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const b={};for(const P in this.stateChanges[_])this.state[_][P]||(this.state[_][P]={}),s.e(this.state[_][P],this.stateChanges[_][P]),b[P]=this.state[_][P];g[_]=b}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const b={};if(this.deletedStates[_]===null)for(const P in this.state[_])b[P]={},this.state[_][P]={};else for(const P in this.deletedStates[_]){if(this.deletedStates[_][P]===null)this.state[_][P]={};else for(const I of Object.keys(this.deletedStates[_][P]))delete this.state[_][P][I];b[P]=this.state[_][P]}g[_]=g[_]||{},s.e(g[_],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(const _ in a)a[_].setFeatureState(g,h)}}class dr extends s.E{constructor(a,h,g){super(),this.id=a,this.dispatcher=g,this.on("data",_=>this._dataHandler(_)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((_,b,P,I)=>{const L=new(Pr(b.type))(_,b,P,I);if(L.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${L.id}`);return L})(a,h,g,this),this._tiles={},this._cache=new Dt(0,_=>this._unloadTile(_)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Br,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const a in this._tiles){const h=this._tiles[a];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,h,g){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(a),this._tileLoaded(a,h,g)}catch(_){a.state="errored",_.status!==404?this._source.fire(new s.j(_,{tile:a})):this.update(this.transform,this.terrain)}})}_unloadTile(a){this._source.unloadTile&&this._source.unloadTile(a)}_abortTile(a){this._source.abortTile&&this._source.abortTile(a),this._source.fire(new s.k("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const g=this._tiles[h];g.upload(a),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(nn).map(a=>a.key)}getRenderableIds(a){const h=[];for(const g in this._tiles)this._isIdRenderable(g,a)&&h.push(this._tiles[g]);return a?h.sort((g,_)=>{const b=g.tileID,P=_.tileID,I=new s.P(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),L=new s.P(P.canonical.x,P.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-P.overscaledZ||L.y-I.y||L.x-I.x}).map(g=>g.tileID.key):h.map(g=>g.tileID).sort(nn).map(g=>g.key)}hasRenderableParent(a){const h=this.findLoadedParent(a,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(a,h){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(h||!this._tiles[a].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")}}_reloadTile(a,h){return s._(this,void 0,void 0,function*(){const g=this._tiles[a];g&&(g.state!=="loading"&&(g.state=h),yield this._loadTile(g,a,h))})}_tileLoaded(a,h,g){a.timeAdded=x.now(),g==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(h,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new s.k("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){const h=this.getRenderableIds();for(let _=0;_<h.length;_++){const b=h[_];if(a.neighboringTiles&&a.neighboringTiles[b]){const P=this.getTileByID(b);g(a,P),g(P,a)}}function g(_,b){_.needsHillshadePrepare=!0,_.needsTerrainPrepare=!0;let P=b.tileID.canonical.x-_.tileID.canonical.x;const I=b.tileID.canonical.y-_.tileID.canonical.y,L=Math.pow(2,_.tileID.canonical.z),V=b.tileID.key;P===0&&I===0||Math.abs(I)>1||(Math.abs(P)>1&&(Math.abs(P+L)===1?P+=L:Math.abs(P-L)===1&&(P-=L)),b.dem&&_.dem&&(_.dem.backfillBorder(b.dem,P,I),_.neighboringTiles&&_.neighboringTiles[V]&&(_.neighboringTiles[V].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,h,g,_){for(const b in this._tiles){let P=this._tiles[b];if(_[b]||!P.hasData()||P.tileID.overscaledZ<=h||P.tileID.overscaledZ>g)continue;let I=P.tileID;for(;P&&P.tileID.overscaledZ>h+1;){const V=P.tileID.scaledTo(P.tileID.overscaledZ-1);P=this._tiles[V.key],P&&P.hasData()&&(I=V)}let L=I;for(;L.overscaledZ>h;)if(L=L.scaledTo(L.overscaledZ-1),a[L.key]){_[I.key]=I;break}}}findLoadedParent(a,h){if(a.key in this._loadedParentTiles){const g=this._loadedParentTiles[a.key];return g&&g.tileID.overscaledZ>=h?g:null}for(let g=a.overscaledZ-1;g>=h;g--){const _=a.scaledTo(g),b=this._getLoadedTile(_);if(b)return b}}findLoadedSibling(a){return this._getLoadedTile(a)}_getLoadedTile(a){const h=this._tiles[a.key];return h&&h.hasData()?h:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){const h=Math.ceil(a.width/this._source.tileSize)+1,g=Math.ceil(a.height/this._source.tileSize)+1,_=Math.floor(h*g*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(b)}handleWrapJump(a){const h=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,h){const g={};for(const _ in this._tiles){const b=this._tiles[_];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+h),g[b.tileID.key]=b}this._tiles=g;for(const _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(const _ in this._tiles)this._setTileReloadTimer(_,this._tiles[_])}}_updateCoveredAndRetainedTiles(a,h,g,_,b,P){const I={},L={},V=Object.keys(a),W=x.now();for(const q of V){const oe=a[q],le=this._tiles[q];if(!le||le.fadeEndTime!==0&&le.fadeEndTime<=W)continue;const ie=this.findLoadedParent(oe,h),fe=this.findLoadedSibling(oe),Ae=ie||fe||null;Ae&&(this._addTile(Ae.tileID),I[Ae.tileID.key]=Ae.tileID),L[q]=oe}this._retainLoadedChildren(L,_,g,a);for(const q in I)a[q]||(this._coveredTiles[q]=!0,a[q]=I[q]);if(P){const q={},oe={};for(const le of b)this._tiles[le.key].hasData()?q[le.key]=le:oe[le.key]=le;for(const le in oe){const ie=oe[le].children(this._source.maxzoom);this._tiles[ie[0].key]&&this._tiles[ie[1].key]&&this._tiles[ie[2].key]&&this._tiles[ie[3].key]&&(q[ie[0].key]=a[ie[0].key]=ie[0],q[ie[1].key]=a[ie[1].key]=ie[1],q[ie[2].key]=a[ie[2].key]=ie[2],q[ie[3].key]=a[ie[3].key]=ie[3],delete oe[le])}for(const le in oe){const ie=oe[le],fe=this.findLoadedParent(ie,this._source.minzoom),Ae=this.findLoadedSibling(ie),Te=fe||Ae||null;if(Te){q[Te.tileID.key]=a[Te.tileID.key]=Te.tileID;for(const ke in q)q[ke].isChildOf(Te.tileID)&&delete q[ke]}}for(const le in this._tiles)q[le]||(this._coveredTiles[le]=!0)}}update(a,h){if(!this._sourceLoaded||this._paused)return;let g;this.transform=a,this.terrain=h,this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(W=>new s.S(W.canonical.z,W.wrap,W.canonical.z,W.canonical.x,W.canonical.y)):(g=a.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h}),this._source.hasTile&&(g=g.filter(W=>this._source.hasTile(W)))):g=[];const _=a.coveringZoomLevel(this._source),b=Math.max(_-dr.maxOverzooming,this._source.minzoom),P=Math.max(_+dr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const W={};for(const q of g)if(q.canonical.z>this._source.minzoom){const oe=q.scaledTo(q.canonical.z-1);W[oe.key]=oe;const le=q.scaledTo(Math.max(this._source.minzoom,Math.min(q.canonical.z,5)));W[le.key]=le}g=g.concat(Object.values(W))}const I=g.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,I&&this.fire(new s.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const L=this._updateRetainedTiles(g,_);Kn(this._source.type)&&this._updateCoveredAndRetainedTiles(L,b,P,_,g,h);for(const W in L)this._tiles[W].clearFadeHold();const V=s.ab(this._tiles,L);for(const W of V){const q=this._tiles[W];q.hasSymbolBuckets&&!q.holdingForFade()?q.setHoldDuration(this.map._fadeDuration):q.hasSymbolBuckets&&!q.symbolFadeFinished()||this._removeTile(W)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,h){var g;const _={},b={},P=Math.max(h-dr.maxOverzooming,this._source.minzoom),I=Math.max(h+dr.maxUnderzooming,this._source.minzoom),L={};for(const V of a){const W=this._addTile(V);_[V.key]=V,W.hasData()||h<this._source.maxzoom&&(L[V.key]=V)}this._retainLoadedChildren(L,h,I,_);for(const V of a){let W=this._tiles[V.key];if(W.hasData())continue;if(h+1>this._source.maxzoom){const oe=V.children(this._source.maxzoom)[0],le=this.getTile(oe);if(le&&le.hasData()){_[oe.key]=oe;continue}}else{const oe=V.children(this._source.maxzoom);if(_[oe[0].key]&&_[oe[1].key]&&_[oe[2].key]&&_[oe[3].key])continue}let q=W.wasRequested();for(let oe=V.overscaledZ-1;oe>=P;--oe){const le=V.scaledTo(oe);if(b[le.key])break;if(b[le.key]=!0,W=this.getTile(le),!W&&q&&(W=this._addTile(le)),W){const ie=W.hasData();if((ie||!(!((g=this.map)===null||g===void 0)&&g.cancelPendingTileRequestsWhileZooming)||q)&&(_[le.key]=le),q=W.wasRequested(),ie)break}}}return _}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const h=[];let g,_=this._tiles[a].tileID;for(;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){g=this._loadedParentTiles[_.key];break}h.push(_.key);const b=_.scaledTo(_.overscaledZ-1);if(g=this._getLoadedTile(b),g)break;_=b}for(const b of h)this._loadedParentTiles[b]=g}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const a in this._tiles){const h=this._tiles[a].tileID,g=this._getLoadedTile(h);this._loadedSiblingTiles[h.key]=g}}_addTile(a){let h=this._tiles[a.key];if(h)return h;h=this._cache.getAndRemove(a),h&&(this._setTileReloadTimer(a.key,h),h.tileID=a,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,h)));const g=h;return h||(h=new fn(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(h,a.key,h.state)),h.uses++,this._tiles[a.key]=h,g||this._source.fire(new s.k("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(a,h){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const g=h.getExpiryTimeout();g&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},g))}_removeTile(a){const h=this._tiles[a];h&&(h.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}_dataHandler(a){const h=a.sourceDataType;a.dataType==="source"&&h==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&a.dataType==="source"&&h==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,h,g){const _=[],b=this.transform;if(!b)return _;const P=g?b.getCameraQueryGeometry(a):a,I=a.map(ie=>b.pointCoordinate(ie,this.terrain)),L=P.map(ie=>b.pointCoordinate(ie,this.terrain)),V=this.getIds();let W=1/0,q=1/0,oe=-1/0,le=-1/0;for(const ie of L)W=Math.min(W,ie.x),q=Math.min(q,ie.y),oe=Math.max(oe,ie.x),le=Math.max(le,ie.y);for(let ie=0;ie<V.length;ie++){const fe=this._tiles[V[ie]];if(fe.holdingForFade())continue;const Ae=fe.tileID,Te=Math.pow(2,b.zoom-fe.tileID.overscaledZ),ke=h*fe.queryPadding*s.X/fe.tileSize/Te,Ie=[Ae.getTilePoint(new s.Z(W,q)),Ae.getTilePoint(new s.Z(oe,le))];if(Ie[0].x-ke<s.X&&Ie[0].y-ke<s.X&&Ie[1].x+ke>=0&&Ie[1].y+ke>=0){const ze=I.map(Ge=>Ae.getTilePoint(Ge)),Je=L.map(Ge=>Ae.getTilePoint(Ge));_.push({tile:fe,tileID:Ae,queryGeometry:ze,cameraQueryGeometry:Je,scale:Te})}}return _}getVisibleCoordinates(a){const h=this.getRenderableIds(a).map(g=>this._tiles[g].tileID);for(const g of h)g.posMatrix=this.transform.calculatePosMatrix(g.toUnwrapped());return h}hasTransition(){if(this._source.hasTransition())return!0;if(Kn(this._source.type)){const a=x.now();for(const h in this._tiles)if(this._tiles[h].fadeEndTime>=a)return!0}return!1}setFeatureState(a,h,g){this._state.updateState(a=a||"_geojsonTileLayer",h,g)}removeFeatureState(a,h,g){this._state.removeFeatureState(a=a||"_geojsonTileLayer",h,g)}getFeatureState(a,h){return this._state.getState(a=a||"_geojsonTileLayer",h)}setDependencies(a,h,g){const _=this._tiles[a];_&&_.setDependencies(h,g)}reloadTilesForDependencies(a,h){for(const g in this._tiles)this._tiles[g].hasDependency(a,h)&&this._reloadTile(g,"reloading");this._cache.filter(g=>!g.hasDependency(a,h))}}function nn(y,a){const h=Math.abs(2*y.wrap)-+(y.wrap<0),g=Math.abs(2*a.wrap)-+(a.wrap<0);return y.overscaledZ-a.overscaledZ||g-h||a.canonical.y-y.canonical.y||a.canonical.x-y.canonical.x}function Kn(y){return y==="raster"||y==="image"||y==="video"}dr.maxOverzooming=10,dr.maxUnderzooming=3;class hr{constructor(a,h){this.reset(a,h)}reset(a,h){this.points=a||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=s.ac(a,0,1);let h=1,g=this._distances[h];const _=a*this.paddedLength+this.padding;for(;g<_&&h<this._distances.length;)g=this._distances[++h];const b=h-1,P=this._distances[b],I=g-P,L=I>0?(_-P)/I:0;return this.points[b].mult(1-L).add(this.points[h].mult(L))}}function Gn(y,a){let h=!0;return y==="always"||y!=="never"&&a!=="never"||(h=!1),h}class Nn{constructor(a,h,g){const _=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(a/g),this.yCellCount=Math.ceil(h/g);for(let P=0;P<this.xCellCount*this.yCellCount;P++)_.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=h,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,h,g,_,b){this._forEachCell(h,g,_,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(_),this.bboxes.push(b)}insertCircle(a,h,g,_){this._forEachCell(h-_,g-_,h+_,g+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(h),this.circles.push(g),this.circles.push(_)}_insertBoxCell(a,h,g,_,b,P){this.boxCells[b].push(P)}_insertCircleCell(a,h,g,_,b,P){this.circleCells[b].push(P)}_query(a,h,g,_,b,P,I){if(g<0||a>this.width||_<0||h>this.height)return[];const L=[];if(a<=0&&h<=0&&this.width<=g&&this.height<=_){if(b)return[{key:null,x1:a,y1:h,x2:g,y2:_}];for(let V=0;V<this.boxKeys.length;V++)L.push({key:this.boxKeys[V],x1:this.bboxes[4*V],y1:this.bboxes[4*V+1],x2:this.bboxes[4*V+2],y2:this.bboxes[4*V+3]});for(let V=0;V<this.circleKeys.length;V++){const W=this.circles[3*V],q=this.circles[3*V+1],oe=this.circles[3*V+2];L.push({key:this.circleKeys[V],x1:W-oe,y1:q-oe,x2:W+oe,y2:q+oe})}}else this._forEachCell(a,h,g,_,this._queryCell,L,{hitTest:b,overlapMode:P,seenUids:{box:{},circle:{}}},I);return L}query(a,h,g,_){return this._query(a,h,g,_,!1,null)}hitTest(a,h,g,_,b,P){return this._query(a,h,g,_,!0,b,P).length>0}hitTestCircle(a,h,g,_,b){const P=a-g,I=a+g,L=h-g,V=h+g;if(I<0||P>this.width||V<0||L>this.height)return!1;const W=[];return this._forEachCell(P,L,I,V,this._queryCellCircle,W,{hitTest:!0,overlapMode:_,circle:{x:a,y:h,radius:g},seenUids:{box:{},circle:{}}},b),W.length>0}_queryCell(a,h,g,_,b,P,I,L){const{seenUids:V,hitTest:W,overlapMode:q}=I,oe=this.boxCells[b];if(oe!==null){const ie=this.bboxes;for(const fe of oe)if(!V.box[fe]){V.box[fe]=!0;const Ae=4*fe,Te=this.boxKeys[fe];if(a<=ie[Ae+2]&&h<=ie[Ae+3]&&g>=ie[Ae+0]&&_>=ie[Ae+1]&&(!L||L(Te))&&(!W||!Gn(q,Te.overlapMode))&&(P.push({key:Te,x1:ie[Ae],y1:ie[Ae+1],x2:ie[Ae+2],y2:ie[Ae+3]}),W))return!0}}const le=this.circleCells[b];if(le!==null){const ie=this.circles;for(const fe of le)if(!V.circle[fe]){V.circle[fe]=!0;const Ae=3*fe,Te=this.circleKeys[fe];if(this._circleAndRectCollide(ie[Ae],ie[Ae+1],ie[Ae+2],a,h,g,_)&&(!L||L(Te))&&(!W||!Gn(q,Te.overlapMode))){const ke=ie[Ae],Ie=ie[Ae+1],ze=ie[Ae+2];if(P.push({key:Te,x1:ke-ze,y1:Ie-ze,x2:ke+ze,y2:Ie+ze}),W)return!0}}}return!1}_queryCellCircle(a,h,g,_,b,P,I,L){const{circle:V,seenUids:W,overlapMode:q}=I,oe=this.boxCells[b];if(oe!==null){const ie=this.bboxes;for(const fe of oe)if(!W.box[fe]){W.box[fe]=!0;const Ae=4*fe,Te=this.boxKeys[fe];if(this._circleAndRectCollide(V.x,V.y,V.radius,ie[Ae+0],ie[Ae+1],ie[Ae+2],ie[Ae+3])&&(!L||L(Te))&&!Gn(q,Te.overlapMode))return P.push(!0),!0}}const le=this.circleCells[b];if(le!==null){const ie=this.circles;for(const fe of le)if(!W.circle[fe]){W.circle[fe]=!0;const Ae=3*fe,Te=this.circleKeys[fe];if(this._circlesCollide(ie[Ae],ie[Ae+1],ie[Ae+2],V.x,V.y,V.radius)&&(!L||L(Te))&&!Gn(q,Te.overlapMode))return P.push(!0),!0}}}_forEachCell(a,h,g,_,b,P,I,L){const V=this._convertToXCellCoord(a),W=this._convertToYCellCoord(h),q=this._convertToXCellCoord(g),oe=this._convertToYCellCoord(_);for(let le=V;le<=q;le++)for(let ie=W;ie<=oe;ie++)if(b.call(this,a,h,g,_,this.xCellCount*ie+le,P,I,L))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,h,g,_,b,P){const I=_-a,L=b-h,V=g+P;return V*V>I*I+L*L}_circleAndRectCollide(a,h,g,_,b,P,I){const L=(P-_)/2,V=Math.abs(a-(_+L));if(V>L+g)return!1;const W=(I-b)/2,q=Math.abs(h-(b+W));if(q>W+g)return!1;if(V<=L||q<=W)return!0;const oe=V-L,le=q-W;return oe*oe+le*le<=g*g}}function gi(y,a,h,g,_){const b=s.H();return a?(s.K(b,b,[1/_,1/_,1]),h||s.ad(b,b,g.angle)):s.L(b,g.labelPlaneMatrix,y),b}function Yr(y,a,h,g,_){if(a){const b=s.ae(y);return s.K(b,b,[_,_,1]),h||s.ad(b,b,-g.angle),b}return g.glCoordMatrix}function Ne(y,a,h,g){let _;g?(_=[y,a,g(y,a),1],s.af(_,_,h)):(_=[y,a,0,1],pn(_,_,h));const b=_[3];return{point:new s.P(_[0]/b,_[1]/b),signedDistanceFromCamera:b,isOccluded:!1}}function ae(y,a){return .5+y/a*.5}function ue(y,a){return y.x>=-a[0]&&y.x<=a[0]&&y.y>=-a[1]&&y.y<=a[1]}function Ee(y,a,h,g,_,b,P,I,L,V,W,q,oe,le,ie){const fe=g?y.textSizeData:y.iconSizeData,Ae=s.ag(fe,h.transform.zoom),Te=[256/h.width*2+1,256/h.height*2+1],ke=g?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;ke.clear();const Ie=y.lineVertexArray,ze=g?y.text.placedSymbolArray:y.icon.placedSymbolArray,Je=h.transform.width/h.transform.height;let Ge=!1;for(let Pt=0;Pt<ze.length;Pt++){const Ft=ze.get(Pt);if(Ft.hidden||Ft.writingMode===s.ah.vertical&&!Ge){Ar(Ft.numGlyphs,ke);continue}Ge=!1;const Ht=Ne(Ft.anchorX,Ft.anchorY,a,ie);if(!ue(Ht.point,Te)){Ar(Ft.numGlyphs,ke);continue}const Gt=ae(h.transform.cameraToCenterDistance,Ht.signedDistanceFromCamera),Xt=s.ai(fe,Ae,Ft),qt=P?Xt/Gt:Xt*Gt,Yt={getElevation:ie,labelPlaneMatrix:_,lineVertexArray:Ie,pitchWithMap:P,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:V,tileAnchorPoint:new s.P(Ft.anchorX,Ft.anchorY),unwrappedTileID:W,width:q,height:oe,translation:le},Ir=it(Yt,Ft,qt,!1,I,a,b,y.glyphOffsetArray,ke,Je,L);Ge=Ir.useVertical,(Ir.notEnoughRoom||Ge||Ir.needsFlipping&&it(Yt,Ft,qt,!0,I,a,b,y.glyphOffsetArray,ke,Je,L).notEnoughRoom)&&Ar(Ft.numGlyphs,ke)}g?y.text.dynamicLayoutVertexBuffer.updateData(ke):y.icon.dynamicLayoutVertexBuffer.updateData(ke)}function Fe(y,a,h,g,_,b,P,I){const L=b.glyphStartIndex+b.numGlyphs,V=b.lineStartIndex,W=b.lineStartIndex+b.lineLength,q=a.getoffsetX(b.glyphStartIndex),oe=a.getoffsetX(L-1),le=Wt(y*q,h,g,_,b.segment,V,W,I,P);if(!le)return null;const ie=Wt(y*oe,h,g,_,b.segment,V,W,I,P);return ie?I.projectionCache.anyProjectionOccluded?null:{first:le,last:ie}:null}function rt(y,a,h,g){return y===s.ah.horizontal&&Math.abs(h.y-a.y)>Math.abs(h.x-a.x)*g?{useVertical:!0}:(y===s.ah.vertical?a.y<h.y:a.x>h.x)?{needsFlipping:!0}:null}function it(y,a,h,g,_,b,P,I,L,V,W){const q=h/24,oe=a.lineOffsetX*q,le=a.lineOffsetY*q;let ie;if(a.numGlyphs>1){const fe=a.glyphStartIndex+a.numGlyphs,Ae=a.lineStartIndex,Te=a.lineStartIndex+a.lineLength,ke=Fe(q,I,oe,le,g,a,W,y);if(!ke)return{notEnoughRoom:!0};const Ie=Ne(ke.first.point.x,ke.first.point.y,P,y.getElevation).point,ze=Ne(ke.last.point.x,ke.last.point.y,P,y.getElevation).point;if(_&&!g){const Je=rt(a.writingMode,Ie,ze,V);if(Je)return Je}ie=[ke.first];for(let Je=a.glyphStartIndex+1;Je<fe-1;Je++)ie.push(Wt(q*I.getoffsetX(Je),oe,le,g,a.segment,Ae,Te,y,W));ie.push(ke.last)}else{if(_&&!g){const Ae=Ne(y.tileAnchorPoint.x,y.tileAnchorPoint.y,b,y.getElevation).point,Te=a.lineStartIndex+a.segment+1,ke=new s.P(y.lineVertexArray.getx(Te),y.lineVertexArray.gety(Te)),Ie=Ne(ke.x,ke.y,b,y.getElevation),ze=Ie.signedDistanceFromCamera>0?Ie.point:function(Ge,Pt,Ft,Ht,Gt,Xt){return et(Ge,Pt,Ft,1,Gt,Xt)}(y.tileAnchorPoint,ke,Ae,0,b,y),Je=rt(a.writingMode,Ae,ze,V);if(Je)return Je}const fe=Wt(q*I.getoffsetX(a.glyphStartIndex),oe,le,g,a.segment,a.lineStartIndex,a.lineStartIndex+a.lineLength,y,W);if(!fe||y.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ie=[fe]}for(const fe of ie)s.aj(L,fe.point,fe.angle);return{}}function et(y,a,h,g,_,b){const P=y.add(y.sub(a)._unit()),I=_!==void 0?Ne(P.x,P.y,_,b.getElevation).point:Et(P.x,P.y,b).point,L=h.sub(I);return h.add(L._mult(g/L.mag()))}function Ke(y,a,h){const g=a.projectionCache;if(g.projections[y])return g.projections[y];const _=new s.P(a.lineVertexArray.getx(y),a.lineVertexArray.gety(y)),b=Et(_.x,_.y,a);if(b.signedDistanceFromCamera>0)return g.projections[y]=b.point,g.anyProjectionOccluded=g.anyProjectionOccluded||b.isOccluded,b.point;const P=y-h.direction;return function(I,L,V,W,q){return et(I,L,V,W,void 0,q)}(h.distanceFromAnchor===0?a.tileAnchorPoint:new s.P(a.lineVertexArray.getx(P),a.lineVertexArray.gety(P)),_,h.previousVertex,h.absOffsetX-h.distanceFromAnchor+1,a)}function Et(y,a,h){const g=y+h.translation[0],_=a+h.translation[1];let b;return!h.pitchWithMap&&h.projection.useSpecialProjectionForSymbols?(b=h.projection.projectTileCoordinates(g,_,h.unwrappedTileID,h.getElevation),b.point.x=(.5*b.point.x+.5)*h.width,b.point.y=(.5*-b.point.y+.5)*h.height):(b=Ne(g,_,h.labelPlaneMatrix,h.getElevation),b.isOccluded=!1),b}function Rt(y,a,h){return y._unit()._perp()._mult(a*h)}function gt(y,a,h,g,_,b,P,I,L){if(I.projectionCache.offsets[y])return I.projectionCache.offsets[y];const V=h.add(a);if(y+L.direction<g||y+L.direction>=_)return I.projectionCache.offsets[y]=V,V;const W=Ke(y+L.direction,I,L),q=Rt(W.sub(h),P,L.direction),oe=h.add(q),le=W.add(q);return I.projectionCache.offsets[y]=s.ak(b,V,oe,le)||V,I.projectionCache.offsets[y]}function Wt(y,a,h,g,_,b,P,I,L){const V=g?y-a:y+a;let W=V>0?1:-1,q=0;g&&(W*=-1,q=Math.PI),W<0&&(q+=Math.PI);let oe,le=W>0?b+_:b+_+1;I.projectionCache.cachedAnchorPoint?oe=I.projectionCache.cachedAnchorPoint:(oe=Et(I.tileAnchorPoint.x,I.tileAnchorPoint.y,I).point,I.projectionCache.cachedAnchorPoint=oe);let ie,fe,Ae=oe,Te=oe,ke=0,Ie=0;const ze=Math.abs(V),Je=[];let Ge;for(;ke+Ie<=ze;){if(le+=W,le<b||le>=P)return null;ke+=Ie,Te=Ae,fe=ie;const Ht={absOffsetX:ze,direction:W,distanceFromAnchor:ke,previousVertex:Te};if(Ae=Ke(le,I,Ht),h===0)Je.push(Te),Ge=Ae.sub(Te);else{let Gt;const Xt=Ae.sub(Te);Gt=Xt.mag()===0?Rt(Ke(le+W,I,Ht).sub(Ae),h,W):Rt(Xt,h,W),fe||(fe=Te.add(Gt)),ie=gt(le,Gt,Ae,b,P,fe,h,I,Ht),Je.push(fe),Ge=ie.sub(fe)}Ie=Ge.mag()}const Pt=Ge._mult((ze-ke)/Ie)._add(fe||Te),Ft=q+Math.atan2(Ae.y-Te.y,Ae.x-Te.x);return Je.push(Pt),{point:Pt,angle:L?Ft:0,path:Je}}const mr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ar(y,a){for(let h=0;h<y;h++){const g=a.length;a.resize(g+4),a.float32.set(mr,3*g)}}function pn(y,a,h){const g=a[0],_=a[1];return y[0]=h[0]*g+h[4]*_+h[12],y[1]=h[1]*g+h[5]*_+h[13],y[3]=h[3]*g+h[7]*_+h[15],y}const Or=100;class en{constructor(a,h,g=new Nn(a.width+200,a.height+200,25),_=new Nn(a.width+200,a.height+200,25)){this.transform=a,this.mapProjection=h,this.grid=g,this.ignoredGrid=_,this.pitchFactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+Or,this.screenBottomBoundary=a.height+Or,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,h,g,_,b,P,I,L,V,W,q){const oe=a.anchorPointX+L[0],le=a.anchorPointY+L[1],ie=this.projectAndGetPerspectiveRatio(_,oe,le,b,W),fe=g*ie.perspectiveRatio;let Ae;if(P||I)Ae=this._projectCollisionBox(a,fe,_,b,P,I,L,ie,W,q);else{const Je=ie.point.x+(q?q.x*fe:0),Ge=ie.point.y+(q?q.y*fe:0);Ae={allPointsOccluded:!1,box:[Je+a.x1*fe,Ge+a.y1*fe,Je+a.x2*fe,Ge+a.y2*fe]}}const[Te,ke,Ie,ze]=Ae.box;return this.mapProjection.useSpecialProjectionForSymbols&&(P?Ae.allPointsOccluded:this.mapProjection.isOccluded(oe,le,b))||ie.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(Te,ke,Ie,ze)||h!=="always"&&this.grid.hitTest(Te,ke,Ie,ze,h,V)?{box:[Te,ke,Ie,ze],placeable:!1,offscreen:!1}:{box:[Te,ke,Ie,ze],placeable:!0,offscreen:this.isOffscreen(Te,ke,Ie,ze)}}placeCollisionCircles(a,h,g,_,b,P,I,L,V,W,q,oe,le,ie,fe,Ae){const Te=[],ke=new s.P(h.anchorX,h.anchorY),Ie=this.getPerspectiveRatio(P,ke.x,ke.y,I,Ae),ze=(q?b/Ie:b*Ie)/s.ap,Je={getElevation:Ae,labelPlaneMatrix:L,lineVertexArray:g,pitchWithMap:q,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ke,unwrappedTileID:I,width:this.transform.width,height:this.transform.height,translation:fe},Ge=Fe(ze,_,h.lineOffsetX*ze,h.lineOffsetY*ze,!1,h,!1,Je);let Pt=!1,Ft=!1,Ht=!0;if(Ge){const Gt=.5*le*Ie+ie,Xt=new s.P(-100,-100),qt=new s.P(this.screenRightBoundary,this.screenBottomBoundary),Yt=new hr,Ir=Ge.first,ir=Ge.last;let or=[];for(let Wr=Ir.path.length-1;Wr>=1;Wr--)or.push(Ir.path[Wr]);for(let Wr=1;Wr<ir.path.length;Wr++)or.push(ir.path[Wr]);const Nr=2.5*Gt;if(V){const Wr=this.projectPathToScreenSpace(or,Je,V);or=Wr.some(sn=>sn.signedDistanceFromCamera<=0)?[]:Wr.map(sn=>sn.point)}let Qr=[];if(or.length>0){const Wr=or[0].clone(),sn=or[0].clone();for(let An=1;An<or.length;An++)Wr.x=Math.min(Wr.x,or[An].x),Wr.y=Math.min(Wr.y,or[An].y),sn.x=Math.max(sn.x,or[An].x),sn.y=Math.max(sn.y,or[An].y);Qr=Wr.x>=Xt.x&&sn.x<=qt.x&&Wr.y>=Xt.y&&sn.y<=qt.y?[or]:sn.x<Xt.x||Wr.x>qt.x||sn.y<Xt.y||Wr.y>qt.y?[]:s.al([or],Xt.x,Xt.y,qt.x,qt.y)}for(const Wr of Qr){Yt.reset(Wr,.25*Gt);let sn=0;sn=Yt.length<=.5*Gt?1:Math.ceil(Yt.paddedLength/Nr)+1;for(let An=0;An<sn;An++){const Zn=An/Math.max(sn-1,1),Di=Yt.lerp(Zn),$n=Di.x+Or,to=Di.y+Or;Te.push($n,to,Gt,0);const Jn=$n-Gt,Wi=to-Gt,bo=$n+Gt,Xs=to+Gt;if(Ht=Ht&&this.isOffscreen(Jn,Wi,bo,Xs),Ft=Ft||this.isInsideGrid(Jn,Wi,bo,Xs),a!=="always"&&this.grid.hitTestCircle($n,to,Gt,a,oe)&&(Pt=!0,!W))return{circles:[],offscreen:!1,collisionDetected:Pt}}}}return{circles:!W&&Pt||!Ft||Ie<this.perspectiveRatioCutoff?[]:Te,offscreen:Ht,collisionDetected:Pt}}projectPathToScreenSpace(a,h,g){return a.map(_=>Ne(_.x,_.y,g,h.getElevation))}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let g=1/0,_=1/0,b=-1/0,P=-1/0;for(const W of a){const q=new s.P(W.x+Or,W.y+Or);g=Math.min(g,q.x),_=Math.min(_,q.y),b=Math.max(b,q.x),P=Math.max(P,q.y),h.push(q)}const I=this.grid.query(g,_,b,P).concat(this.ignoredGrid.query(g,_,b,P)),L={},V={};for(const W of I){const q=W.key;if(L[q.bucketInstanceId]===void 0&&(L[q.bucketInstanceId]={}),L[q.bucketInstanceId][q.featureIndex])continue;const oe=[new s.P(W.x1,W.y1),new s.P(W.x2,W.y1),new s.P(W.x2,W.y2),new s.P(W.x1,W.y2)];s.am(h,oe)&&(L[q.bucketInstanceId][q.featureIndex]=!0,V[q.bucketInstanceId]===void 0&&(V[q.bucketInstanceId]=[]),V[q.bucketInstanceId].push(q.featureIndex))}return V}insertCollisionBox(a,h,g,_,b,P){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:b,collisionGroupID:P,overlapMode:h},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,h,g,_,b,P){const I=g?this.ignoredGrid:this.grid,L={bucketInstanceId:_,featureIndex:b,collisionGroupID:P,overlapMode:h};for(let V=0;V<a.length;V+=4)I.insertCircle(L,a[V],a[V+1],a[V+2])}projectAndGetPerspectiveRatio(a,h,g,_,b){let P;b?(P=[h,g,b(h,g),1],s.af(P,P,a)):(P=[h,g,0,1],pn(P,P,a));const I=P[3];return{point:new s.P((P[0]/I+1)/2*this.transform.width+Or,(-P[1]/I+1)/2*this.transform.height+Or),perspectiveRatio:.5+this.transform.cameraToCenterDistance/I*.5,isOccluded:!1,signedDistanceFromCamera:I}}getPerspectiveRatio(a,h,g,_,b){const P=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(h,g,_,b):Ne(h,g,a,b);return .5+this.transform.cameraToCenterDistance/P.signedDistanceFromCamera*.5}isOffscreen(a,h,g,_){return g<Or||a>=this.screenRightBoundary||_<Or||h>this.screenBottomBoundary}isInsideGrid(a,h,g,_){return g>=0&&a<this.gridRightBoundary&&_>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const a=s.an([]);return s.J(a,a,[-100,-100,0]),a}_projectCollisionBox(a,h,g,_,b,P,I,L,V,W){let q=new s.P(1,0),oe=new s.P(0,1);const le=new s.P(a.anchorPointX+I[0],a.anchorPointY+I[1]);if(P&&!b){const Ht=this.projectAndGetPerspectiveRatio(g,le.x+1,le.y,_,V).point.sub(L.point).unit(),Gt=Math.atan(Ht.y/Ht.x)+(Ht.x<0?Math.PI:0),Xt=Math.sin(Gt),qt=Math.cos(Gt);q=new s.P(qt,Xt),oe=new s.P(-Xt,qt)}else if(!P&&b){const Ht=-this.transform.angle,Gt=Math.sin(Ht),Xt=Math.cos(Ht);q=new s.P(Xt,Gt),oe=new s.P(-Gt,Xt)}let ie=L.point,fe=h;if(b){ie=le;const Ht=this.transform.zoom-Math.floor(this.transform.zoom);fe=Math.pow(2,-Ht),fe*=this.mapProjection.getPitchedTextCorrection(this.transform,le,_),W||(fe*=s.ac(.5+L.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}W&&(ie=ie.add(q.mult(W.x*fe)).add(oe.mult(W.y*fe)));const Ae=a.x1*fe,Te=a.x2*fe,ke=(Ae+Te)/2,Ie=a.y1*fe,ze=a.y2*fe,Je=(Ie+ze)/2,Ge=[{offsetX:Ae,offsetY:Ie},{offsetX:ke,offsetY:Ie},{offsetX:Te,offsetY:Ie},{offsetX:Te,offsetY:Je},{offsetX:Te,offsetY:ze},{offsetX:ke,offsetY:ze},{offsetX:Ae,offsetY:ze},{offsetX:Ae,offsetY:Je}];let Pt=[];for(const{offsetX:Ht,offsetY:Gt}of Ge)Pt.push(new s.P(ie.x+q.x*Ht+oe.x*Gt,ie.y+q.y*Ht+oe.y*Gt));let Ft=!1;if(b){const Ht=Pt.map(Gt=>this.projectAndGetPerspectiveRatio(g,Gt.x,Gt.y,_,V));Ft=Ht.some(Gt=>!Gt.isOccluded),Pt=Ht.map(Gt=>Gt.point)}else Ft=!0;return{box:s.ao(Pt),allPointsOccluded:!Ft}}}function Zr(y,a,h){return a*(s.X/(y.tileSize*Math.pow(2,h-y.tileID.overscaledZ)))}class jn{constructor(a,h,g,_){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?h:-h))):_&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class Jr{constructor(a,h,g,_,b){this.text=new jn(a?a.text:null,h,g,b),this.icon=new jn(a?a.icon:null,h,_,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ur{constructor(a,h,g){this.text=a,this.icon=h,this.skipFade=g}}class vn{constructor(){this.invProjMatrix=s.H(),this.viewportMatrix=s.H(),this.circles=[]}}class Fn{constructor(a,h,g,_,b){this.bucketInstanceId=a,this.featureIndex=h,this.sourceLayerIndex=g,this.bucketIndex=_,this.tileID=b}}class ei{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const h=++this.maxGroupID;this.collisionGroups[a]={ID:h,predicate:g=>g.collisionGroupID===h}}return this.collisionGroups[a]}}function mi(y,a,h,g,_){const{horizontalAlign:b,verticalAlign:P}=s.au(y);return new s.P(-(b-.5)*a+g[0]*_,-(P-.5)*h+g[1]*_)}class Ii{constructor(a,h,g,_,b,P){this.transform=a.clone(),this.terrain=g,this.collisionIndex=new en(this.transform,h),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=_,this.retainedQueryData={},this.collisionGroups=new ei(b),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=P,P&&(P.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(a){const h=this.terrain;return h?(g,_)=>h.getElevation(a,g,_):null}getBucketParts(a,h,g,_){const b=g.getBucket(h),P=g.latestFeatureIndex;if(!b||!P||h.id!==b.layerIds[0])return;const I=g.collisionBoxArray,L=b.layers[0].layout,V=b.layers[0].paint,W=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),q=g.tileSize/s.X,oe=g.tileID.toUnwrapped(),le=this.transform.calculatePosMatrix(oe),ie=L.get("text-pitch-alignment")==="map",fe=L.get("text-rotation-alignment")==="map",Ae=Zr(g,1,this.transform.zoom),Te=this.collisionIndex.mapProjection.translatePosition(this.transform,g,V.get("text-translate"),V.get("text-translate-anchor")),ke=this.collisionIndex.mapProjection.translatePosition(this.transform,g,V.get("icon-translate"),V.get("icon-translate-anchor")),Ie=gi(le,ie,fe,this.transform,Ae);let ze=null;if(ie){const Ge=Yr(le,ie,fe,this.transform,Ae);ze=s.L([],this.transform.labelPlaneMatrix,Ge)}this.retainedQueryData[b.bucketInstanceId]=new Fn(b.bucketInstanceId,P,b.sourceLayerIndex,b.index,g.tileID);const Je={bucket:b,layout:L,translationText:Te,translationIcon:ke,posMatrix:le,unwrappedTileID:oe,textLabelPlaneMatrix:Ie,labelToScreenMatrix:ze,scale:W,textPixelRatio:q,holdingForFade:g.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:s.ag(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(_)for(const Ge of b.sortKeyRanges){const{sortKey:Pt,symbolInstanceStart:Ft,symbolInstanceEnd:Ht}=Ge;a.push({sortKey:Pt,symbolInstanceStart:Ft,symbolInstanceEnd:Ht,parameters:Je})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:Je})}attemptAnchorPlacement(a,h,g,_,b,P,I,L,V,W,q,oe,le,ie,fe,Ae,Te,ke,Ie){const ze=s.aq[a.textAnchor],Je=[a.textOffset0,a.textOffset1],Ge=mi(ze,g,_,Je,b),Pt=this.collisionIndex.placeCollisionBox(h,oe,L,V,W,I,P,Ae,q.predicate,Ie,Ge);if((!ke||this.collisionIndex.placeCollisionBox(ke,oe,L,V,W,I,P,Te,q.predicate,Ie,Ge).placeable)&&Pt.placeable){let Ft;if(this.prevPlacement&&this.prevPlacement.variableOffsets[le.crossTileID]&&this.prevPlacement.placements[le.crossTileID]&&this.prevPlacement.placements[le.crossTileID].text&&(Ft=this.prevPlacement.variableOffsets[le.crossTileID].anchor),le.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[le.crossTileID]={textOffset:Je,width:g,height:_,anchor:ze,textBoxScale:b,prevAnchor:Ft},this.markUsedJustification(ie,ze,le,fe),ie.allowVerticalPlacement&&(this.markUsedOrientation(ie,fe,le),this.placedOrientations[le.crossTileID]=fe),{shift:Ge,placedGlyphBoxes:Pt}}}placeLayerBucketPart(a,h,g){const{bucket:_,layout:b,translationText:P,translationIcon:I,posMatrix:L,unwrappedTileID:V,textLabelPlaneMatrix:W,labelToScreenMatrix:q,textPixelRatio:oe,holdingForFade:le,collisionBoxArray:ie,partiallyEvaluatedTextSize:fe,collisionGroup:Ae}=a.parameters,Te=b.get("text-optional"),ke=b.get("icon-optional"),Ie=s.ar(b,"text-overlap","text-allow-overlap"),ze=Ie==="always",Je=s.ar(b,"icon-overlap","icon-allow-overlap"),Ge=Je==="always",Pt=b.get("text-rotation-alignment")==="map",Ft=b.get("text-pitch-alignment")==="map",Ht=b.get("icon-text-fit")!=="none",Gt=b.get("symbol-z-order")==="viewport-y",Xt=ze&&(Ge||!_.hasIconData()||ke),qt=Ge&&(ze||!_.hasTextData()||Te);!_.collisionArrays&&ie&&_.deserializeCollisionBoxes(ie);const Yt=this._getTerrainElevationFunc(this.retainedQueryData[_.bucketInstanceId].tileID),Ir=(ir,or,Nr)=>{var Qr,Wr;if(h[ir.crossTileID])return;if(le)return void(this.placements[ir.crossTileID]=new Ur(!1,!1,!1));let sn=!1,An=!1,Zn=!0,Di=null,$n={box:null,placeable:!1,offscreen:null},to={box:null,placeable:!1,offscreen:null},Jn=null,Wi=null,bo=null,Xs=0,Ta=0,Li=0;or.textFeatureIndex?Xs=or.textFeatureIndex:ir.useRuntimeCollisionCircles&&(Xs=ir.featureIndex),or.verticalTextFeatureIndex&&(Ta=or.verticalTextFeatureIndex);const su=or.textBox;if(su){const Os=co=>{let gs=s.ah.horizontal;if(_.allowVerticalPlacement&&!co&&this.prevPlacement){const Ds=this.prevPlacement.placedOrientations[ir.crossTileID];Ds&&(this.placedOrientations[ir.crossTileID]=Ds,gs=Ds,this.markUsedOrientation(_,gs,ir))}return gs},Ks=(co,gs)=>{if(_.allowVerticalPlacement&&ir.numVerticalGlyphVertices>0&&or.verticalTextBox){for(const Ds of _.writingModes)if(Ds===s.ah.vertical?($n=gs(),to=$n):$n=co(),$n&&$n.placeable)break}else $n=co()},Qo=ir.textAnchorOffsetStartIndex,Ns=ir.textAnchorOffsetEndIndex;if(Ns===Qo){const co=(gs,Ds)=>{const Dn=this.collisionIndex.placeCollisionBox(gs,Ie,oe,L,V,Ft,Pt,P,Ae.predicate,Yt);return Dn&&Dn.placeable&&(this.markUsedOrientation(_,Ds,ir),this.placedOrientations[ir.crossTileID]=Ds),Dn};Ks(()=>co(su,s.ah.horizontal),()=>{const gs=or.verticalTextBox;return _.allowVerticalPlacement&&ir.numVerticalGlyphVertices>0&&gs?co(gs,s.ah.vertical):{box:null,offscreen:null}}),Os($n&&$n.placeable)}else{let co=s.aq[(Wr=(Qr=this.prevPlacement)===null||Qr===void 0?void 0:Qr.variableOffsets[ir.crossTileID])===null||Wr===void 0?void 0:Wr.anchor];const gs=(Dn,Jl,au)=>{const Cc=Dn.x2-Dn.x1,kh=Dn.y2-Dn.y1,G_=ir.textBoxScale,Lm=Ht&&Je==="never"?Jl:null;let Ql=null,Pc=Ie==="never"?1:2,Rd="never";co&&Pc++;for(let Lf=0;Lf<Pc;Lf++){for(let kd=Qo;kd<Ns;kd++){const Ff=_.textAnchorOffsets.get(kd);if(co&&Ff.textAnchor!==co)continue;const Ic=this.attemptAnchorPlacement(Ff,Dn,Cc,kh,G_,Pt,Ft,oe,L,V,Ae,Rd,ir,_,au,P,I,Lm,Yt);if(Ic&&(Ql=Ic.placedGlyphBoxes,Ql&&Ql.placeable))return sn=!0,Di=Ic.shift,Ql}co?co=null:Rd=Ie}return g&&!Ql&&(Ql={box:this.collisionIndex.placeCollisionBox(su,"always",oe,L,V,Ft,Pt,P,Ae.predicate,Yt,new s.P(0,0)).box,offscreen:!1,placeable:!1}),Ql};Ks(()=>gs(su,or.iconBox,s.ah.horizontal),()=>{const Dn=or.verticalTextBox;return _.allowVerticalPlacement&&(!$n||!$n.placeable)&&ir.numVerticalGlyphVertices>0&&Dn?gs(Dn,or.verticalIconBox,s.ah.vertical):{box:null,occluded:!0,offscreen:null}}),$n&&(sn=$n.placeable,Zn=$n.offscreen);const Ds=Os($n&&$n.placeable);if(!sn&&this.prevPlacement){const Dn=this.prevPlacement.variableOffsets[ir.crossTileID];Dn&&(this.variableOffsets[ir.crossTileID]=Dn,this.markUsedJustification(_,Dn.anchor,ir,Ds))}}}if(Jn=$n,sn=Jn&&Jn.placeable,Zn=Jn&&Jn.offscreen,ir.useRuntimeCollisionCircles){const Os=_.text.placedSymbolArray.get(ir.centerJustifiedTextSymbolIndex),Ks=s.ai(_.textSizeData,fe,Os),Qo=b.get("text-padding");Wi=this.collisionIndex.placeCollisionCircles(Ie,Os,_.lineVertexArray,_.glyphOffsetArray,Ks,L,V,W,q,g,Ft,Ae.predicate,ir.collisionCircleDiameter,Qo,P,Yt),Wi.circles.length&&Wi.collisionDetected&&!g&&s.w("Collisions detected, but collision boxes are not shown"),sn=ze||Wi.circles.length>0&&!Wi.collisionDetected,Zn=Zn&&Wi.offscreen}if(or.iconFeatureIndex&&(Li=or.iconFeatureIndex),or.iconBox){const Os=Ks=>this.collisionIndex.placeCollisionBox(Ks,Je,oe,L,V,Ft,Pt,I,Ae.predicate,Yt,Ht&&Di?Di:void 0);to&&to.placeable&&or.verticalIconBox?(bo=Os(or.verticalIconBox),An=bo.placeable):(bo=Os(or.iconBox),An=bo.placeable),Zn=Zn&&bo.offscreen}const Ca=Te||ir.numHorizontalGlyphVertices===0&&ir.numVerticalGlyphVertices===0,Df=ke||ir.numIconVertices===0;Ca||Df?Df?Ca||(An=An&&sn):sn=An&&sn:An=sn=An&&sn;const Rh=An&&bo.placeable;if(sn&&Jn.placeable&&this.collisionIndex.insertCollisionBox(Jn.box,Ie,b.get("text-ignore-placement"),_.bucketInstanceId,to&&to.placeable&&Ta?Ta:Xs,Ae.ID),Rh&&this.collisionIndex.insertCollisionBox(bo.box,Je,b.get("icon-ignore-placement"),_.bucketInstanceId,Li,Ae.ID),Wi&&sn&&this.collisionIndex.insertCollisionCircles(Wi.circles,Ie,b.get("text-ignore-placement"),_.bucketInstanceId,Xs,Ae.ID),g&&this.storeCollisionData(_.bucketInstanceId,Nr,or,Jn,bo,Wi),ir.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(_.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ir.crossTileID]=new Ur(sn||Xt,An||qt,Zn||_.justReloaded),h[ir.crossTileID]=!0};if(Gt){if(a.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ir=_.getSortedSymbolIndexes(this.transform.angle);for(let or=ir.length-1;or>=0;--or){const Nr=ir[or];Ir(_.symbolInstances.get(Nr),_.collisionArrays[Nr],Nr)}}else for(let ir=a.symbolInstanceStart;ir<a.symbolInstanceEnd;ir++)Ir(_.symbolInstances.get(ir),_.collisionArrays[ir],ir);if(g&&_.bucketInstanceId in this.collisionCircleArrays){const ir=this.collisionCircleArrays[_.bucketInstanceId];s.as(ir.invProjMatrix,L),ir.viewportMatrix=this.collisionIndex.getViewportMatrix()}_.justReloaded=!1}storeCollisionData(a,h,g,_,b,P){if(g.textBox||g.iconBox){let I,L;this.collisionBoxArrays.has(a)?I=this.collisionBoxArrays.get(a):(I=new Map,this.collisionBoxArrays.set(a,I)),I.has(h)?L=I.get(h):(L={text:null,icon:null},I.set(h,L)),g.textBox&&(L.text=_.box),g.iconBox&&(L.icon=b.box)}if(P){let I=this.collisionCircleArrays[a];I===void 0&&(I=this.collisionCircleArrays[a]=new vn);for(let L=0;L<P.circles.length;L+=4)I.circles.push(P.circles[L+0]),I.circles.push(P.circles[L+1]),I.circles.push(P.circles[L+2]),I.circles.push(P.collisionDetected?1:0)}}markUsedJustification(a,h,g,_){let b;b=_===s.ah.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[s.at(h)];const P=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(const I of P)I>=0&&(a.text.placedSymbolArray.get(I).crossTileID=b>=0&&I!==b?0:g.crossTileID)}markUsedOrientation(a,h,g){const _=h===s.ah.horizontal||h===s.ah.horizontalOnly?h:0,b=h===s.ah.vertical?h:0,P=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(const I of P)a.text.placedSymbolArray.get(I).placedOrientation=_;g.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let g=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const _=h?h.symbolFadeChange(a):1,b=h?h.opacities:{},P=h?h.variableOffsets:{},I=h?h.placedOrientations:{};for(const L in this.placements){const V=this.placements[L],W=b[L];W?(this.opacities[L]=new Jr(W,_,V.text,V.icon),g=g||V.text!==W.text.placed||V.icon!==W.icon.placed):(this.opacities[L]=new Jr(null,_,V.text,V.icon,V.skipFade),g=g||V.text||V.icon)}for(const L in b){const V=b[L];if(!this.opacities[L]){const W=new Jr(V,_,!1,!1);W.isHidden()||(this.opacities[L]=W,g=g||V.text.placed||V.icon.placed)}}for(const L in P)this.variableOffsets[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.variableOffsets[L]=P[L]);for(const L in I)this.placedOrientations[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.placedOrientations[L]=I[L]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:a)}updateLayerOpacities(a,h){const g={};for(const _ of h){const b=_.getBucket(a);b&&_.latestFeatureIndex&&a.id===b.layerIds[0]&&this.updateBucketOpacities(b,_.tileID,g,_.collisionBoxArray)}}updateBucketOpacities(a,h,g,_){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const b=a.layers[0],P=b.layout,I=new Jr(null,0,!1,!1,!0),L=P.get("text-allow-overlap"),V=P.get("icon-allow-overlap"),W=b._unevaluatedLayout.hasValue("text-variable-anchor")||b._unevaluatedLayout.hasValue("text-variable-anchor-offset"),q=P.get("text-rotation-alignment")==="map",oe=P.get("text-pitch-alignment")==="map",le=P.get("icon-text-fit")!=="none",ie=new Jr(null,0,L&&(V||!a.hasIconData()||P.get("icon-optional")),V&&(L||!a.hasTextData()||P.get("text-optional")),!0);!a.collisionArrays&&_&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(_);const fe=(Te,ke,Ie)=>{for(let ze=0;ze<ke/4;ze++)Te.opacityVertexArray.emplaceBack(Ie);Te.hasVisibleVertices=Te.hasVisibleVertices||Ie!==Ts},Ae=this.collisionBoxArrays.get(a.bucketInstanceId);for(let Te=0;Te<a.symbolInstances.length;Te++){const ke=a.symbolInstances.get(Te),{numHorizontalGlyphVertices:Ie,numVerticalGlyphVertices:ze,crossTileID:Je}=ke;let Ge=this.opacities[Je];g[Je]?Ge=I:Ge||(Ge=ie,this.opacities[Je]=Ge),g[Je]=!0;const Pt=ke.numIconVertices>0,Ft=this.placedOrientations[ke.crossTileID],Ht=Ft===s.ah.vertical,Gt=Ft===s.ah.horizontal||Ft===s.ah.horizontalOnly;if(Ie>0||ze>0){const qt=zn(Ge.text);fe(a.text,Ie,Ht?Ts:qt),fe(a.text,ze,Gt?Ts:qt);const Yt=Ge.text.isHidden();[ke.rightJustifiedTextSymbolIndex,ke.centerJustifiedTextSymbolIndex,ke.leftJustifiedTextSymbolIndex].forEach(or=>{or>=0&&(a.text.placedSymbolArray.get(or).hidden=Yt||Ht?1:0)}),ke.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(ke.verticalPlacedTextSymbolIndex).hidden=Yt||Gt?1:0);const Ir=this.variableOffsets[ke.crossTileID];Ir&&this.markUsedJustification(a,Ir.anchor,ke,Ft);const ir=this.placedOrientations[ke.crossTileID];ir&&(this.markUsedJustification(a,"left",ke,ir),this.markUsedOrientation(a,ir,ke))}if(Pt){const qt=zn(Ge.icon),Yt=!(le&&ke.verticalPlacedIconSymbolIndex&&Ht);ke.placedIconSymbolIndex>=0&&(fe(a.icon,ke.numIconVertices,Yt?qt:Ts),a.icon.placedSymbolArray.get(ke.placedIconSymbolIndex).hidden=Ge.icon.isHidden()),ke.verticalPlacedIconSymbolIndex>=0&&(fe(a.icon,ke.numVerticalIconVertices,Yt?Ts:qt),a.icon.placedSymbolArray.get(ke.verticalPlacedIconSymbolIndex).hidden=Ge.icon.isHidden())}const Xt=Ae&&Ae.has(Te)?Ae.get(Te):{text:null,icon:null};if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const qt=a.collisionArrays[Te];if(qt){let Yt=new s.P(0,0);if(qt.textBox||qt.verticalTextBox){let Ir=!0;if(W){const ir=this.variableOffsets[Je];ir?(Yt=mi(ir.anchor,ir.width,ir.height,ir.textOffset,ir.textBoxScale),q&&Yt._rotate(oe?this.transform.angle:-this.transform.angle)):Ir=!1}if(qt.textBox||qt.verticalTextBox){let ir;qt.textBox&&(ir=Ht),qt.verticalTextBox&&(ir=Gt),ma(a.textCollisionBox.collisionVertexArray,Ge.text.placed,!Ir||ir,Xt.text,Yt.x,Yt.y)}}if(qt.iconBox||qt.verticalIconBox){const Ir=!!(!Gt&&qt.verticalIconBox);let ir;qt.iconBox&&(ir=Ir),qt.verticalIconBox&&(ir=!Ir),ma(a.iconCollisionBox.collisionVertexArray,Ge.icon.placed,ir,Xt.icon,le?Yt.x:0,le?Yt.y:0)}}}}if(a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);if(a.bucketInstanceId in this.collisionCircleArrays){const Te=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=Te.invProjMatrix,a.placementViewportMatrix=Te.viewportMatrix,a.collisionCircleArray=Te.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,h){const g=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*g>a}setStale(){this.stale=!0}}function ma(y,a,h,g,_,b){g&&g.length!==0||(g=[0,0,0,0]);const P=g[0]-Or,I=g[1]-Or,L=g[2]-Or,V=g[3]-Or;y.emplaceBack(a?1:0,h?1:0,_||0,b||0,P,I),y.emplaceBack(a?1:0,h?1:0,_||0,b||0,L,I),y.emplaceBack(a?1:0,h?1:0,_||0,b||0,L,V),y.emplaceBack(a?1:0,h?1:0,_||0,b||0,P,V)}const En=Math.pow(2,25),so=Math.pow(2,24),Lo=Math.pow(2,17),yn=Math.pow(2,16),yi=Math.pow(2,9),Qs=Math.pow(2,8),Vn=Math.pow(2,1);function zn(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const a=y.placed?1:0,h=Math.floor(127*y.opacity);return h*En+a*so+h*Lo+a*yn+h*yi+a*Qs+h*Vn+a}const Ts=0;function Ji(){return{isOccluded:(y,a,h)=>!1,getPitchedTextCorrection:(y,a,h)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(y,a,h,g){throw new Error("Not implemented.")},translatePosition:(y,a,h,g)=>function(_,b,P,I,L=!1){if(!P[0]&&!P[1])return[0,0];const V=L?I==="map"?_.angle:0:I==="viewport"?-_.angle:0;if(V){const W=Math.sin(V),q=Math.cos(V);P=[P[0]*q-P[1]*W,P[0]*W+P[1]*q]}return[L?P[0]:Zr(b,P[0],_.zoom),L?P[1]:Zr(b,P[1],_.zoom)]}(y,a,h,g),getCircleRadiusCorrection:y=>1}}class Un{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,h,g,_,b){const P=this._bucketParts;for(;this._currentTileIndex<a.length;)if(h.getBucketParts(P,_,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort((I,L)=>I.sortKey-L.sortKey));this._currentPartIndex<P.length;)if(h.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,b())return!0;return!1}}class kn{constructor(a,h,g,_,b,P,I,L){this.placement=new Ii(a,Ji(),h,P,I,L),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(a,h,g){const _=x.now(),b=()=>!this._forceFullPlacement&&x.now()-_>2;for(;this._currentPlacementIndex>=0;){const P=h[a[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=I)&&(!P.maxzoom||P.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new Un(P)),this._inProgressLayer.continuePlacement(g[P.source],this.placement,this._showCollisionBoxes,P,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const go=512/s.X/2;class si{constructor(a,h,g){this.tileID=a,this.bucketInstanceId=g,this._symbolsByKey={};const _=new Map;for(let b=0;b<h.length;b++){const P=h.get(b),I=P.key,L=_.get(I);L?L.push(P):_.set(I,[P])}for(const[b,P]of _){const I={positions:P.map(L=>({x:Math.floor(L.anchorX*go),y:Math.floor(L.anchorY*go)})),crossTileIDs:P.map(L=>L.crossTileID)};if(I.positions.length>128){const L=new s.av(I.positions.length,16,Uint16Array);for(const{x:V,y:W}of I.positions)L.add(V,W);L.finish(),delete I.positions,I.index=L}this._symbolsByKey[b]=I}}getScaledCoordinates(a,h){const{x:g,y:_,z:b}=this.tileID.canonical,{x:P,y:I,z:L}=h.canonical,V=go/Math.pow(2,L-b),W=(I*s.X+a.anchorY)*V,q=_*s.X*go;return{x:Math.floor((P*s.X+a.anchorX)*V-g*s.X*go),y:Math.floor(W-q)}}findMatches(a,h,g){const _=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let b=0;b<a.length;b++){const P=a.get(b);if(P.crossTileID)continue;const I=this._symbolsByKey[P.key];if(!I)continue;const L=this.getScaledCoordinates(P,h);if(I.index){const V=I.index.range(L.x-_,L.y-_,L.x+_,L.y+_).sort();for(const W of V){const q=I.crossTileIDs[W];if(!g[q]){g[q]=!0,P.crossTileID=q;break}}}else if(I.positions)for(let V=0;V<I.positions.length;V++){const W=I.positions[V],q=I.crossTileIDs[V];if(Math.abs(W.x-L.x)<=_&&Math.abs(W.y-L.y)<=_&&!g[q]){g[q]=!0,P.crossTileID=q;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:a})=>a)}}class ya{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ao{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const h=Math.round((a-this.lng)/360);if(h!==0)for(const g in this.indexes){const _=this.indexes[g],b={};for(const P in _){const I=_[P];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+h),b[I.tileID.key]=I}this.indexes[g]=b}this.lng=a}addBucket(a,h,g){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let b=0;b<h.symbolInstances.length;b++)h.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});const _=this.usedCrossTileIDs[a.overscaledZ];for(const b in this.indexes){const P=this.indexes[b];if(Number(b)>a.overscaledZ)for(const I in P){const L=P[I];L.tileID.isChildOf(a)&&L.findMatches(h.symbolInstances,a,_)}else{const I=P[a.scaledTo(Number(b)).key];I&&I.findMatches(h.symbolInstances,a,_)}}for(let b=0;b<h.symbolInstances.length;b++){const P=h.symbolInstances.get(b);P.crossTileID||(P.crossTileID=g.generate(),_[P.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new si(a,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(a,h){for(const g of h.getCrossTileIDsLists())for(const _ of g)delete this.usedCrossTileIDs[a][_]}removeStaleBuckets(a){let h=!1;for(const g in this.indexes){const _=this.indexes[g];for(const b in _)a[_[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,_[b]),delete _[b],h=!0)}return h}}class _a{constructor(){this.layerIndexes={},this.crossTileIDs=new ya,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,h,g){let _=this.layerIndexes[a.id];_===void 0&&(_=this.layerIndexes[a.id]=new ao);let b=!1;const P={};_.handleWrapJump(g);for(const I of h){const L=I.getBucket(a);L&&a.id===L.layerIds[0]&&(L.bucketInstanceId||(L.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(I.tileID,L,this.crossTileIDs)&&(b=!0),P[L.bucketInstanceId]=!0)}return _.removeStaleBuckets(P)&&(b=!0),b}pruneUnusedLayers(a){const h={};a.forEach(g=>{h[g]=!0});for(const g in this.layerIndexes)h[g]||delete this.layerIndexes[g]}}const ci=(y,a)=>s.t(y,a&&a.filter(h=>h.identifier!=="source.canvas")),Ko=s.aw();class mo extends s.E{constructor(a,h={}){super(),this._rtlPluginLoaded=()=>{for(const g in this.sourceCaches){const _=this.sourceCaches[g].getSource().type;_!=="vector"&&_!=="geojson"||this.sourceCaches[g].reload()}},this.map=a,this.dispatcher=new lt(Xe(),a._getMapId()),this.dispatcher.registerMessageHandler("GG",(g,_)=>this.getGlyphs(g,_)),this.dispatcher.registerMessageHandler("GI",(g,_)=>this.getImages(g,_)),this.imageManager=new ve,this.imageManager.setEventedParent(this),this.glyphManager=new Ze(a._requestManager,h.localIdeographFontFamily),this.lineAtlas=new be(256,512),this.crossTileSymbolIndex=new _a,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",s.ay()),Kt().on(_t,this._rtlPluginLoaded),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const _=this.sourceCaches[g.sourceId];if(!_)return;const b=_.getSource();if(b&&b.vectorLayerIds)for(const P in this._layers){const I=this._layers[P];I.source===b.id&&this._validateLayer(I)}})}loadURL(a,h={},g){this.fire(new s.k("dataloading",{dataType:"style"})),h.validate=typeof h.validate!="boolean"||h.validate;const _=this.map._requestManager.transformRequest(a,"Style");this._loadStyleRequest=new AbortController;const b=this._loadStyleRequest;s.h(_,this._loadStyleRequest).then(P=>{this._loadStyleRequest=null,this._load(P.data,h,g)}).catch(P=>{this._loadStyleRequest=null,P&&!b.signal.aborted&&this.fire(new s.j(P))})}loadJSON(a,h={},g){this.fire(new s.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,x.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,h.validate=h.validate!==!1,this._load(a,h,g)}).catch(()=>{})}loadEmpty(){this.fire(new s.k("dataloading",{dataType:"style"})),this._load(Ko,{validate:!1})}_load(a,h,g){var _;const b=h.transformStyle?h.transformStyle(g,a):a;if(!h.validate||!ci(this,s.u(b))){this._loaded=!0,this.stylesheet=b;for(const P in b.sources)this.addSource(P,b.sources[P],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new Qe(this.stylesheet.light),this.sky=new ce(this.stylesheet.sky),this.map.setTerrain((_=this.stylesheet.terrain)!==null&&_!==void 0?_:null),this.fire(new s.k("data",{dataType:"style"})),this.fire(new s.k("style.load"))}}_createLayers(){const a=s.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",a),this._order=a.map(h=>h.id),this._layers={},this._serializedLayers=null;for(const h of a){const g=s.aA(h);g.setEventedParent(this,{layer:{id:h.id}}),this._layers[h.id]=g}}_loadSprite(a,h=!1,g=void 0){let _;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(b,P,I,L){return s._(this,void 0,void 0,function*(){const V=Se(b),W=I>1?"@2x":"",q={},oe={};for(const{id:le,url:ie}of V){const fe=P.transformRequest(J(ie,W,".json"),"SpriteJSON");q[le]=s.h(fe,L);const Ae=P.transformRequest(J(ie,W,".png"),"SpriteImage");oe[le]=U.getImage(Ae,L)}return yield Promise.all([...Object.values(q),...Object.values(oe)]),function(le,ie){return s._(this,void 0,void 0,function*(){const fe={};for(const Ae in le){fe[Ae]={};const Te=x.getImageCanvasContext((yield ie[Ae]).data),ke=(yield le[Ae]).data;for(const Ie in ke){const{width:ze,height:Je,x:Ge,y:Pt,sdf:Ft,pixelRatio:Ht,stretchX:Gt,stretchY:Xt,content:qt,textFitWidth:Yt,textFitHeight:Ir}=ke[Ie];fe[Ae][Ie]={data:null,pixelRatio:Ht,sdf:Ft,stretchX:Gt,stretchY:Xt,content:qt,textFitWidth:Yt,textFitHeight:Ir,spriteData:{width:ze,height:Je,x:Ge,y:Pt,context:Te}}}}return fe})}(q,oe)})}(a,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(b=>{if(this._spriteRequest=null,b)for(const P in b){this._spritesImagesIds[P]=[];const I=this._spritesImagesIds[P]?this._spritesImagesIds[P].filter(L=>!(L in b)):[];for(const L of I)this.imageManager.removeImage(L),this._changedImages[L]=!0;for(const L in b[P]){const V=P==="default"?L:`${P}:${L}`;this._spritesImagesIds[P].push(V),V in this.imageManager.images?this.imageManager.updateImage(V,b[P][L],!1):this.imageManager.addImage(V,b[P][L]),h&&(this._changedImages[V]=!0)}}}).catch(b=>{this._spriteRequest=null,_=b,this.fire(new s.j(_))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),h&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"})),g&&g(_)})}_unloadSprite(){for(const a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}_validateLayer(a){const h=this.sourceCaches[a.source];if(!h)return;const g=a.sourceLayer;if(!g)return;const _=h.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(g)===-1)&&this.fire(new s.j(new Error(`Source layer "${g}" does not exist on source "${_.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a,h=!1){const g=this._serializedAllLayers();if(!a||a.length===0)return Object.values(h?s.aB(g):g);const _=[];for(const b of a)if(g[b]){const P=h?s.aB(g[b]):g[b];_.push(P)}return _}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};const h=Object.keys(this._layers);for(const g of h){const _=this._layers[g];_.type!=="custom"&&(a[g]=_.serialize())}return a}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(const a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;const h=this._changed;if(h){const _=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(_.length||b.length)&&this._updateWorkerLayers(_,b);for(const P in this._updatedSources){const I=this._updatedSources[P];if(I==="reload")this._reloadSource(P);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(P)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(a);this.light.updateTransitions(a),this.sky.updateTransitions(a),this._resetUpdates()}const g={};for(const _ in this.sourceCaches){const b=this.sourceCaches[_];g[_]=b.used,b.used=!1}for(const _ of this._order){const b=this._layers[_];b.recalculate(a,this._availableImages),!b.isHidden(a.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const _ in g){const b=this.sourceCaches[_];!!g[_]!=!!b.used&&b.fire(new s.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(a),this.sky.recalculate(a),this.z=a.zoom,h&&this.fire(new s.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=Object.keys(this._changedImages);if(a.length){for(const h in this.sourceCaches)this.sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,h){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(a,!1),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,h={}){var g;this._checkLoaded();const _=this.serialize();if(a=h.transformStyle?h.transformStyle(_,a):a,((g=h.validate)===null||g===void 0||g)&&ci(this,s.u(a)))return!1;(a=s.aB(a)).layers=s.az(a.layers);const b=s.aC(_,a),P=this._getOperationsToPerform(b);if(P.unimplemented.length>0)throw new Error(`Unimplemented: ${P.unimplemented.join(", ")}.`);if(P.operations.length===0)return!1;for(const I of P.operations)I();return this.stylesheet=a,this._serializedLayers=null,!0}_getOperationsToPerform(a){const h=[],g=[];for(const _ of a)switch(_.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":h.push(()=>this.addLayer.apply(this,_.args));break;case"removeLayer":h.push(()=>this.removeLayer.apply(this,_.args));break;case"setPaintProperty":h.push(()=>this.setPaintProperty.apply(this,_.args));break;case"setLayoutProperty":h.push(()=>this.setLayoutProperty.apply(this,_.args));break;case"setFilter":h.push(()=>this.setFilter.apply(this,_.args));break;case"addSource":h.push(()=>this.addSource.apply(this,_.args));break;case"removeSource":h.push(()=>this.removeSource.apply(this,_.args));break;case"setLayerZoomRange":h.push(()=>this.setLayerZoomRange.apply(this,_.args));break;case"setLight":h.push(()=>this.setLight.apply(this,_.args));break;case"setGeoJSONSourceData":h.push(()=>this.setGeoJSONSourceData.apply(this,_.args));break;case"setGlyphs":h.push(()=>this.setGlyphs.apply(this,_.args));break;case"setSprite":h.push(()=>this.setSprite.apply(this,_.args));break;case"setSky":h.push(()=>this.setSky.apply(this,_.args));break;case"setTerrain":h.push(()=>this.map.setTerrain.apply(this,_.args));break;case"setTransition":h.push(()=>{});break;default:g.push(_.command)}return{operations:h,unimplemented:g}}addImage(a,h){if(this.getImage(a))return this.fire(new s.j(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,h),this._afterImageUpdated(a)}updateImage(a,h){this.imageManager.updateImage(a,h)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new s.j(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,h,g={}){if(this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error(`Source "${a}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(s.u.source,`sources.${a}`,h,null,g))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const _=this.sourceCaches[a]=new dr(a,h,this.dispatcher);_.style=this,_.setEventedParent(this,()=>({isSourceLoaded:_.loaded(),source:_.serialize(),sourceId:a})),_.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(const g in this._layers)if(this._layers[g].source===a)return this.fire(new s.j(new Error(`Source "${a}" cannot be removed while layer "${g}" is using it.`)));const h=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],h.fire(new s.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,h){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error(`There is no source with this ID=${a}`);const g=this.sourceCaches[a].getSource();if(g.type!=="geojson")throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(h),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,h,g={}){this._checkLoaded();const _=a.id;if(this.getLayer(_))return void this.fire(new s.j(new Error(`Layer "${_}" already exists on this map.`)));let b;if(a.type==="custom"){if(ci(this,s.aD(a)))return;b=s.aA(a)}else{if("source"in a&&typeof a.source=="object"&&(this.addSource(_,a.source),a=s.aB(a),a=s.e(a,{source:_})),this._validate(s.u.layer,`layers.${_}`,a,{arrayIndex:-1},g))return;b=s.aA(a),this._validateLayer(b),b.setEventedParent(this,{layer:{id:_}})}const P=h?this._order.indexOf(h):this._order.length;if(h&&P===-1)this.fire(new s.j(new Error(`Cannot add layer "${_}" before non-existing layer "${h}".`)));else{if(this._order.splice(P,0,_),this._layerOrderChanged=!0,this._layers[_]=b,this._removedLayers[_]&&b.source&&b.type!=="custom"){const I=this._removedLayers[_];delete this._removedLayers[_],I.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(a,h){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new s.j(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===h)return;const g=this._order.indexOf(a);this._order.splice(g,1);const _=h?this._order.indexOf(h):this._order.length;h&&_===-1?this.fire(new s.j(new Error(`Cannot move layer "${a}" before non-existing layer "${h}".`))):(this._order.splice(_,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();const h=this._layers[a];if(!h)return void this.fire(new s.j(new Error(`Cannot remove non-existing layer "${a}".`)));h.setEventedParent(null);const g=this._order.indexOf(a);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=h,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],h.onRemove&&h.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,h,g){this._checkLoaded();const _=this.getLayer(a);_?_.minzoom===h&&_.maxzoom===g||(h!=null&&(_.minzoom=h),g!=null&&(_.maxzoom=g),this._updateLayer(_)):this.fire(new s.j(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,h,g={}){this._checkLoaded();const _=this.getLayer(a);if(_){if(!s.aE(_.filter,h))return h==null?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(s.u.filter,`layers.${_.id}.filter`,h,null,g)||(_.filter=s.aB(h),this._updateLayer(_)))}else this.fire(new s.j(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return s.aB(this.getLayer(a).filter)}setLayoutProperty(a,h,g,_={}){this._checkLoaded();const b=this.getLayer(a);b?s.aE(b.getLayoutProperty(h),g)||(b.setLayoutProperty(h,g,_),this._updateLayer(b)):this.fire(new s.j(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,h){const g=this.getLayer(a);if(g)return g.getLayoutProperty(h);this.fire(new s.j(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,h,g,_={}){this._checkLoaded();const b=this.getLayer(a);b?s.aE(b.getPaintProperty(h),g)||(b.setPaintProperty(h,g,_)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[a]=!0,this._serializedLayers=null):this.fire(new s.j(new Error(`Cannot style non-existing layer "${a}".`)))}getPaintProperty(a,h){return this.getLayer(a).getPaintProperty(h)}setFeatureState(a,h){this._checkLoaded();const g=a.source,_=a.sourceLayer,b=this.sourceCaches[g];if(b===void 0)return void this.fire(new s.j(new Error(`The source '${g}' does not exist in the map's style.`)));const P=b.getSource().type;P==="geojson"&&_?this.fire(new s.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):P!=="vector"||_?(a.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),b.setFeatureState(_,a.id,h)):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,h){this._checkLoaded();const g=a.source,_=this.sourceCaches[g];if(_===void 0)return void this.fire(new s.j(new Error(`The source '${g}' does not exist in the map's style.`)));const b=_.getSource().type,P=b==="vector"?a.sourceLayer:void 0;b!=="vector"||P?h&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new s.j(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(P,a.id,h):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();const h=a.source,g=a.sourceLayer,_=this.sourceCaches[h];if(_!==void 0)return _.getSource().type!=="vector"||g?(a.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),_.getFeatureState(g,a.id)):void this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.j(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const a=s.aF(this.sourceCaches,b=>b.serialize()),h=this._serializeByIds(this._order,!0),g=this.map.getTerrain()||void 0,_=this.stylesheet;return s.aG({version:_.version,name:_.name,metadata:_.metadata,light:_.light,sky:_.sky,center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,sprite:_.sprite,glyphs:_.glyphs,transition:_.transition,sources:a,layers:h,terrain:g},b=>b!==void 0)}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){const h=P=>this._layers[P].type==="fill-extrusion",g={},_=[];for(let P=this._order.length-1;P>=0;P--){const I=this._order[P];if(h(I)){g[I]=P;for(const L of a){const V=L[I];if(V)for(const W of V)_.push(W)}}}_.sort((P,I)=>I.intersectionZ-P.intersectionZ);const b=[];for(let P=this._order.length-1;P>=0;P--){const I=this._order[P];if(h(I))for(let L=_.length-1;L>=0;L--){const V=_[L].feature;if(g[V.layer.id]<P)break;b.push(V),_.pop()}else for(const L of a){const V=L[I];if(V)for(const W of V)b.push(W.feature)}}return b}queryRenderedFeatures(a,h,g){h&&h.filter&&this._validate(s.u.filter,"queryRenderedFeatures.filter",h.filter,null,h);const _={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new s.j(new Error("parameters.layers must be an Array."))),[];for(const I of h.layers){const L=this._layers[I];if(!L)return this.fire(new s.j(new Error(`The layer '${I}' does not exist in the map's style and cannot be queried for features.`))),[];_[L.source]=!0}}const b=[];h.availableImages=this._availableImages;const P=this._serializedAllLayers();for(const I in this.sourceCaches)h.layers&&!_[I]||b.push(At(this.sourceCaches[I],this._layers,P,a,h,g));return this.placement&&b.push(function(I,L,V,W,q,oe,le){const ie={},fe=oe.queryRenderedSymbols(W),Ae=[];for(const Te of Object.keys(fe).map(Number))Ae.push(le[Te]);Ae.sort(zt);for(const Te of Ae){const ke=Te.featureIndex.lookupSymbolFeatures(fe[Te.bucketInstanceId],L,Te.bucketIndex,Te.sourceLayerIndex,q.filter,q.layers,q.availableImages,I);for(const Ie in ke){const ze=ie[Ie]=ie[Ie]||[],Je=ke[Ie];Je.sort((Ge,Pt)=>{const Ft=Te.featureSortOrder;if(Ft){const Ht=Ft.indexOf(Ge.featureIndex);return Ft.indexOf(Pt.featureIndex)-Ht}return Pt.featureIndex-Ge.featureIndex});for(const Ge of Je)ze.push(Ge)}}for(const Te in ie)ie[Te].forEach(ke=>{const Ie=ke.feature,ze=V[I[Te].source].getFeatureState(Ie.layer["source-layer"],Ie.id);Ie.source=Ie.layer.source,Ie.layer["source-layer"]&&(Ie.sourceLayer=Ie.layer["source-layer"]),Ie.state=ze});return ie}(this._layers,P,this.sourceCaches,a,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(a,h){h&&h.filter&&this._validate(s.u.filter,"querySourceFeatures.filter",h.filter,null,h);const g=this.sourceCaches[a];return g?function(_,b){const P=_.getRenderableIds().map(V=>_.getTileByID(V)),I=[],L={};for(let V=0;V<P.length;V++){const W=P[V],q=W.tileID.canonical.key;L[q]||(L[q]=!0,W.querySourceFeatures(I,b))}return I}(g,h):[]}getLight(){return this.light.getLight()}setLight(a,h={}){this._checkLoaded();const g=this.light.getLight();let _=!1;for(const P in a)if(!s.aE(a[P],g[P])){_=!0;break}if(!_)return;const b={now:x.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,h),this.light.updateTransitions(b)}getSky(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.sky}setSky(a,h={}){const g=this.getSky();let _=!1;if(!a&&!g)return;if(a&&!g)_=!0;else if(!a&&g)_=!0;else for(const P in a)if(!s.aE(a[P],g[P])){_=!0;break}if(!_)return;const b={now:x.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=a,this.sky.setSky(a,h),this.sky.updateTransitions(b)}_validate(a,h,g,_,b={}){return(!b||b.validate!==!1)&&ci(this,a.call(s.u,s.e({key:h,style:this.serialize(),value:g,styleSpec:s.v},_)))}_remove(a=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Kt().off(_t,this._rtlPluginLoaded);for(const h in this._layers)this._layers[h].setEventedParent(null);for(const h in this.sourceCaches){const g=this.sourceCaches[h];g.setEventedParent(null),g.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),a&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(const h in this.sourceCaches)this.sourceCaches[h].update(a,this.map.terrain)}_generateCollisionBoxes(){for(const a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,h,g,_,b=!1){let P=!1,I=!1;const L={};for(const V of this._order){const W=this._layers[V];if(W.type!=="symbol")continue;if(!L[W.source]){const oe=this.sourceCaches[W.source];L[W.source]=oe.getRenderableIds(!0).map(le=>oe.getTileByID(le)).sort((le,ie)=>ie.tileID.overscaledZ-le.tileID.overscaledZ||(le.tileID.isLessThan(ie.tileID)?-1:1))}const q=this.crossTileSymbolIndex.addLayer(W,L[W.source],a.center.lng);P=P||q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(x.now(),a.zoom))&&(this.pauseablePlacement=new kn(a,this.map.terrain,this._order,b,h,g,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(x.now()),I=!0),P&&this.pauseablePlacement.placement.setStale()),I||P)for(const V of this._order){const W=this._layers[V];W.type==="symbol"&&this.placement.updateLayerOpacities(W,L[W.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(x.now())}_releaseSymbolFadeTiles(){for(const a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,h){return s._(this,void 0,void 0,function*(){const g=yield this.imageManager.getImages(h.icons);this._updateTilesForChangedImages();const _=this.sourceCaches[h.source];return _&&_.setDependencies(h.tileID.key,h.type,h.icons),g})}getGlyphs(a,h){return s._(this,void 0,void 0,function*(){const g=yield this.glyphManager.getGlyphs(h.stacks),_=this.sourceCaches[h.source];return _&&_.setDependencies(h.tileID.key,h.type,[""]),g})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,h={}){this._checkLoaded(),a&&this._validate(s.u.glyphs,"glyphs",a,null,h)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,h,g={},_){this._checkLoaded();const b=[{id:a,url:h}],P=[...Se(this.stylesheet.sprite),...b];this._validate(s.u.sprite,"sprite",P,null,g)||(this.stylesheet.sprite=P,this._loadSprite(b,!0,_))}removeSprite(a){this._checkLoaded();const h=Se(this.stylesheet.sprite);if(h.find(g=>g.id===a)){if(this._spritesImagesIds[a])for(const g of this._spritesImagesIds[a])this.imageManager.removeImage(g),this._changedImages[g]=!0;h.splice(h.findIndex(g=>g.id===a),1),this.stylesheet.sprite=h.length>0?h:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}else this.fire(new s.j(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return Se(this.stylesheet.sprite)}setSprite(a,h={},g){this._checkLoaded(),a&&this._validate(s.u.sprite,"sprite",a,null,h)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,g):(this._unloadSprite(),g&&g(null)))}}var Cs=s.Y([{name:"a_pos",type:"Int16",components:2}]);const hs={prelude:xn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:xn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:xn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:xn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:xn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:xn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:xn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:xn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:xn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:xn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:xn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:xn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:xn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:xn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:xn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:xn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:xn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:xn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:xn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:xn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:xn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:xn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:xn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:xn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:xn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:xn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:xn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:xn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:xn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:xn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function xn(y,a){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=a.match(/attribute ([\w]+) ([\w]+)/g),_=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=b?b.concat(_):_,I={};return{fragmentSource:y=y.replace(h,(L,V,W,q,oe)=>(I[oe]=!0,V==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
varying ${W} ${q} ${oe};
#else
uniform ${W} ${q} u_${oe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${oe}
    ${W} ${q} ${oe} = u_${oe};
#endif
`)),vertexSource:a=a.replace(h,(L,V,W,q,oe)=>{const le=q==="float"?"vec2":"vec4",ie=oe.match(/color/)?"color":le;return I[oe]?V==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
uniform lowp float u_${oe}_t;
attribute ${W} ${le} a_${oe};
varying ${W} ${q} ${oe};
#else
uniform ${W} ${q} u_${oe};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${oe}
    ${oe} = a_${oe};
#else
    ${W} ${q} ${oe} = u_${oe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${oe}
    ${oe} = unpack_mix_${ie}(a_${oe}, u_${oe}_t);
#else
    ${W} ${q} ${oe} = u_${oe};
#endif
`:V==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
uniform lowp float u_${oe}_t;
attribute ${W} ${le} a_${oe};
#else
uniform ${W} ${q} u_${oe};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${oe}
    ${W} ${q} ${oe} = a_${oe};
#else
    ${W} ${q} ${oe} = u_${oe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${oe}
    ${W} ${q} ${oe} = unpack_mix_${ie}(a_${oe}, u_${oe}_t);
#else
    ${W} ${q} ${oe} = u_${oe};
#endif
`}),staticAttributes:g,staticUniforms:P}}class D{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,h,g,_,b,P,I,L,V){this.context=a;let W=this.boundPaintVertexBuffers.length!==_.length;for(let q=0;!W&&q<_.length;q++)this.boundPaintVertexBuffers[q]!==_[q]&&(W=!0);!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==g||W||this.boundIndexBuffer!==b||this.boundVertexOffset!==P||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==L||this.boundDynamicVertexBuffer3!==V?this.freshBind(h,g,_,b,P,I,L,V):(a.bindVertexArray.set(this.vao),I&&I.bind(),b&&b.dynamicDraw&&b.bind(),L&&L.bind(),V&&V.bind())}freshBind(a,h,g,_,b,P,I,L){const V=a.numAttributes,W=this.context,q=W.gl;this.vao&&this.destroy(),this.vao=W.createVertexArray(),W.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=_,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=L,h.enableAttributes(q,a);for(const oe of g)oe.enableAttributes(q,a);P&&P.enableAttributes(q,a),I&&I.enableAttributes(q,a),L&&L.enableAttributes(q,a),h.bind(),h.setVertexAttribPointers(q,a,b);for(const oe of g)oe.bind(),oe.setVertexAttribPointers(q,a,b);P&&(P.bind(),P.setVertexAttribPointers(q,a,b)),_&&_.bind(),I&&(I.bind(),I.setVertexAttribPointers(q,a,b)),L&&(L.bind(),L.setVertexAttribPointers(q,a,b)),W.currentNumAttributes=V}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const X=(y,a,h,g,_)=>({u_matrix:y,u_texture:0,u_ele_delta:a,u_fog_matrix:h,u_fog_color:g?g.properties.get("fog-color"):s.aM.white,u_fog_ground_blend:g?g.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:g?g.calculateFogBlendOpacity(_):0,u_horizon_color:g?g.properties.get("horizon-color"):s.aM.white,u_horizon_fog_blend:g?g.properties.get("horizon-fog-blend"):1});function j(y){const a=[];for(let h=0;h<y.length;h++){if(y[h]===null)continue;const g=y[h].split(" ");a.push(g.pop())}return a}class Z{constructor(a,h,g,_,b,P){const I=a.gl;this.program=I.createProgram();const L=j(h.staticAttributes),V=g?g.getBinderAttributes():[],W=L.concat(V),q=hs.prelude.staticUniforms?j(hs.prelude.staticUniforms):[],oe=h.staticUniforms?j(h.staticUniforms):[],le=g?g.getBinderUniforms():[],ie=q.concat(oe).concat(le),fe=[];for(const Ge of ie)fe.indexOf(Ge)<0&&fe.push(Ge);const Ae=g?g.defines():[];b&&Ae.push("#define OVERDRAW_INSPECTOR;"),P&&Ae.push("#define TERRAIN3D;");const Te=Ae.concat(hs.prelude.fragmentSource,h.fragmentSource).join(`
`),ke=Ae.concat(hs.prelude.vertexSource,h.vertexSource).join(`
`),Ie=I.createShader(I.FRAGMENT_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(Ie,Te),I.compileShader(Ie),!I.getShaderParameter(Ie,I.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${I.getShaderInfoLog(Ie)}`);I.attachShader(this.program,Ie);const ze=I.createShader(I.VERTEX_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(ze,ke),I.compileShader(ze),!I.getShaderParameter(ze,I.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${I.getShaderInfoLog(ze)}`);I.attachShader(this.program,ze),this.attributes={};const Je={};this.numAttributes=W.length;for(let Ge=0;Ge<this.numAttributes;Ge++)W[Ge]&&(I.bindAttribLocation(this.program,Ge,W[Ge]),this.attributes[W[Ge]]=Ge);if(I.linkProgram(this.program),!I.getProgramParameter(this.program,I.LINK_STATUS))throw new Error(`Program failed to link: ${I.getProgramInfoLog(this.program)}`);I.deleteShader(ze),I.deleteShader(Ie);for(let Ge=0;Ge<fe.length;Ge++){const Pt=fe[Ge];if(Pt&&!Je[Pt]){const Ft=I.getUniformLocation(this.program,Pt);Ft&&(Je[Pt]=Ft)}}this.fixedUniforms=_(a,Je),this.terrainUniforms=((Ge,Pt)=>({u_depth:new s.aH(Ge,Pt.u_depth),u_terrain:new s.aH(Ge,Pt.u_terrain),u_terrain_dim:new s.aI(Ge,Pt.u_terrain_dim),u_terrain_matrix:new s.aJ(Ge,Pt.u_terrain_matrix),u_terrain_unpack:new s.aK(Ge,Pt.u_terrain_unpack),u_terrain_exaggeration:new s.aI(Ge,Pt.u_terrain_exaggeration)}))(a,Je),this.binderUniforms=g?g.getUniforms(a,Je):[]}draw(a,h,g,_,b,P,I,L,V,W,q,oe,le,ie,fe,Ae,Te,ke){const Ie=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(g),a.setStencilMode(_),a.setColorMode(b),a.setCullFace(P),L){a.activeTexture.set(Ie.TEXTURE2),Ie.bindTexture(Ie.TEXTURE_2D,L.depthTexture),a.activeTexture.set(Ie.TEXTURE3),Ie.bindTexture(Ie.TEXTURE_2D,L.texture);for(const Je in this.terrainUniforms)this.terrainUniforms[Je].set(L[Je])}for(const Je in this.fixedUniforms)this.fixedUniforms[Je].set(I[Je]);fe&&fe.setUniforms(a,this.binderUniforms,le,{zoom:ie});let ze=0;switch(h){case Ie.LINES:ze=2;break;case Ie.TRIANGLES:ze=3;break;case Ie.LINE_STRIP:ze=1}for(const Je of oe.get()){const Ge=Je.vaos||(Je.vaos={});(Ge[V]||(Ge[V]=new D)).bind(a,this,W,fe?fe.getPaintVertexBuffers():[],q,Je.vertexOffset,Ae,Te,ke),Ie.drawElements(h,Je.primitiveLength*ze,Ie.UNSIGNED_SHORT,Je.primitiveOffset*ze*2)}}}function de(y,a,h){const g=1/Zr(h,1,a.transform.tileZoom),_=Math.pow(2,h.tileID.overscaledZ),b=h.tileSize*Math.pow(2,a.transform.tileZoom)/_,P=b*(h.tileID.canonical.x+h.tileID.wrap*_),I=b*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[g,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[P>>16,I>>16],u_pixel_coord_lower:[65535&P,65535&I]}}const we=(y,a,h,g)=>{const _=a.style.light,b=_.properties.get("position"),P=[b.x,b.y,b.z],I=function(){var V=new s.A(9);return s.A!=Float32Array&&(V[1]=0,V[2]=0,V[3]=0,V[5]=0,V[6]=0,V[7]=0),V[0]=1,V[4]=1,V[8]=1,V}();_.properties.get("anchor")==="viewport"&&function(V,W){var q=Math.sin(W),oe=Math.cos(W);V[0]=oe,V[1]=q,V[2]=0,V[3]=-q,V[4]=oe,V[5]=0,V[6]=0,V[7]=0,V[8]=1}(I,-a.transform.angle),function(V,W,q){var oe=W[0],le=W[1],ie=W[2];V[0]=oe*q[0]+le*q[3]+ie*q[6],V[1]=oe*q[1]+le*q[4]+ie*q[7],V[2]=oe*q[2]+le*q[5]+ie*q[8]}(P,P,I);const L=_.properties.get("color");return{u_matrix:y,u_lightpos:P,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[L.r,L.g,L.b],u_vertical_gradient:+h,u_opacity:g}},Le=(y,a,h,g,_,b,P)=>s.e(we(y,a,h,g),de(b,a,P),{u_height_factor:-Math.pow(2,_.overscaledZ)/P.tileSize/8}),ft=y=>({u_matrix:y}),Mt=(y,a,h,g)=>s.e(ft(y),de(h,a,g)),Qt=(y,a)=>({u_matrix:y,u_world:a}),er=(y,a,h,g,_)=>s.e(Mt(y,a,h,g),{u_world:_}),Jt=(y,a,h,g)=>{const _=y.transform;let b,P;if(g.paint.get("circle-pitch-alignment")==="map"){const I=Zr(h,1,_.zoom);b=!0,P=[I,I]}else b=!1,P=_.pixelsToGLUnits;return{u_camera_to_center_distance:_.cameraToCenterDistance,u_scale_with_map:+(g.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(a.posMatrix,h,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:P}},yr=(y,a,h)=>({u_matrix:y,u_inv_matrix:a,u_camera_to_center_distance:h.cameraToCenterDistance,u_viewport_size:[h.width,h.height]}),ti=(y,a,h=1)=>({u_matrix:y,u_color:a,u_overlay:0,u_overlay_scale:h}),zr=y=>({u_matrix:y}),br=(y,a,h,g)=>({u_matrix:y,u_extrude_scale:Zr(a,1,h),u_intensity:g}),$t=(y,a,h,g)=>{const _=s.H();s.aP(_,0,y.width,y.height,0,0,1);const b=y.context.gl;return{u_matrix:_,u_world:[b.drawingBufferWidth,b.drawingBufferHeight],u_image:h,u_color_ramp:g,u_opacity:a.paint.get("heatmap-opacity")}};function Tr(y,a){const h=Math.pow(2,a.canonical.z),g=a.canonical.y;return[new s.Z(0,g/h).toLngLat().lat,new s.Z(0,(g+1)/h).toLngLat().lat]}const wn=(y,a,h,g)=>{const _=y.transform;return{u_matrix:li(y,a,h,g),u_ratio:1/Zr(a,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Hi=(y,a,h,g,_)=>s.e(wn(y,a,h,_),{u_image:0,u_image_height:g}),ai=(y,a,h,g,_)=>{const b=y.transform,P=Qc(a,b);return{u_matrix:li(y,a,h,_),u_texsize:a.imageAtlasTexture.size,u_ratio:1/Zr(a,1,b.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[P,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},zl=(y,a,h,g,_,b)=>{const P=y.lineAtlas,I=Qc(a,y.transform),L=h.layout.get("line-cap")==="round",V=P.getDash(g.from,L),W=P.getDash(g.to,L),q=V.width*_.fromScale,oe=W.width*_.toScale;return s.e(wn(y,a,h,b),{u_patternscale_a:[I/q,-V.height/2],u_patternscale_b:[I/oe,-W.height/2],u_sdfgamma:P.width/(256*Math.min(q,oe)*y.pixelRatio)/2,u_image:0,u_tex_y_a:V.y,u_tex_y_b:W.y,u_mix:_.t})};function Qc(y,a){return 1/Zr(y,1,a.tileZoom)}function li(y,a,h,g){return y.translatePosMatrix(g?g.posMatrix:a.tileID.posMatrix,a,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}const xh=(y,a,h,g,_)=>{return{u_matrix:y,u_tl_parent:a,u_scale_parent:h,u_buffer_scale:1,u_fade_t:g.mix,u_opacity:g.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(P=_.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(b=_.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Ef(_.paint.get("raster-hue-rotate"))};var b,P};function Ef(y){y*=Math.PI/180;const a=Math.sin(y),h=Math.cos(y);return[(2*h+1)/3,(-Math.sqrt(3)*a-h+1)/3,(Math.sqrt(3)*a-h+1)/3]}const Ps=(y,a,h,g,_,b,P,I,L,V,W,q,oe,le)=>{const ie=P.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:ie.cameraToCenterDistance,u_pitch:ie.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:ie.width/ie.height,u_fade_change:P.options.fadeDuration?P.symbolFadeChange:1,u_matrix:I,u_label_plane_matrix:L,u_coord_matrix:V,u_is_text:+q,u_pitch_with_map:+g,u_is_along_line:_,u_is_variable_anchor:b,u_texsize:oe,u_texture:0,u_translation:W,u_pitched_scale:le}},ea=(y,a,h,g,_,b,P,I,L,V,W,q,oe,le,ie)=>{const fe=P.transform;return s.e(Ps(y,a,h,g,_,b,P,I,L,V,W,q,oe,ie),{u_gamma_scale:g?Math.cos(fe._pitch)*fe.cameraToCenterDistance:1,u_device_pixel_ratio:P.pixelRatio,u_is_halo:+le})},va=(y,a,h,g,_,b,P,I,L,V,W,q,oe,le)=>s.e(ea(y,a,h,g,_,b,P,I,L,V,W,!0,q,!0,le),{u_texsize_icon:oe,u_texture_icon:1}),xc=(y,a,h)=>({u_matrix:y,u_opacity:a,u_color:h}),ba=(y,a,h,g,_,b)=>s.e(function(P,I,L,V){const W=L.imageManager.getPattern(P.from.toString()),q=L.imageManager.getPattern(P.to.toString()),{width:oe,height:le}=L.imageManager.getPixelSize(),ie=Math.pow(2,V.tileID.overscaledZ),fe=V.tileSize*Math.pow(2,L.transform.tileZoom)/ie,Ae=fe*(V.tileID.canonical.x+V.tileID.wrap*ie),Te=fe*V.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:W.tl,u_pattern_br_a:W.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[oe,le],u_mix:I.t,u_pattern_size_a:W.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/Zr(V,1,L.transform.tileZoom),u_pixel_coord_upper:[Ae>>16,Te>>16],u_pixel_coord_lower:[65535&Ae,65535&Te]}}(g,b,h,_),{u_matrix:y,u_opacity:a}),$l={fillExtrusion:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix),u_lightpos:new s.aN(y,a.u_lightpos),u_lightintensity:new s.aI(y,a.u_lightintensity),u_lightcolor:new s.aN(y,a.u_lightcolor),u_vertical_gradient:new s.aI(y,a.u_vertical_gradient),u_opacity:new s.aI(y,a.u_opacity)}),fillExtrusionPattern:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix),u_lightpos:new s.aN(y,a.u_lightpos),u_lightintensity:new s.aI(y,a.u_lightintensity),u_lightcolor:new s.aN(y,a.u_lightcolor),u_vertical_gradient:new s.aI(y,a.u_vertical_gradient),u_height_factor:new s.aI(y,a.u_height_factor),u_image:new s.aH(y,a.u_image),u_texsize:new s.aO(y,a.u_texsize),u_pixel_coord_upper:new s.aO(y,a.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(y,a.u_pixel_coord_lower),u_scale:new s.aN(y,a.u_scale),u_fade:new s.aI(y,a.u_fade),u_opacity:new s.aI(y,a.u_opacity)}),fill:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix)}),fillPattern:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix),u_image:new s.aH(y,a.u_image),u_texsize:new s.aO(y,a.u_texsize),u_pixel_coord_upper:new s.aO(y,a.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(y,a.u_pixel_coord_lower),u_scale:new s.aN(y,a.u_scale),u_fade:new s.aI(y,a.u_fade)}),fillOutline:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix),u_world:new s.aO(y,a.u_world)}),fillOutlinePattern:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix),u_world:new s.aO(y,a.u_world),u_image:new s.aH(y,a.u_image),u_texsize:new s.aO(y,a.u_texsize),u_pixel_coord_upper:new s.aO(y,a.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(y,a.u_pixel_coord_lower),u_scale:new s.aN(y,a.u_scale),u_fade:new s.aI(y,a.u_fade)}),circle:(y,a)=>({u_camera_to_center_distance:new s.aI(y,a.u_camera_to_center_distance),u_scale_with_map:new s.aH(y,a.u_scale_with_map),u_pitch_with_map:new s.aH(y,a.u_pitch_with_map),u_extrude_scale:new s.aO(y,a.u_extrude_scale),u_device_pixel_ratio:new s.aI(y,a.u_device_pixel_ratio),u_matrix:new s.aJ(y,a.u_matrix)}),collisionBox:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix),u_pixel_extrude_scale:new s.aO(y,a.u_pixel_extrude_scale)}),collisionCircle:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix),u_inv_matrix:new s.aJ(y,a.u_inv_matrix),u_camera_to_center_distance:new s.aI(y,a.u_camera_to_center_distance),u_viewport_size:new s.aO(y,a.u_viewport_size)}),debug:(y,a)=>({u_color:new s.aL(y,a.u_color),u_matrix:new s.aJ(y,a.u_matrix),u_overlay:new s.aH(y,a.u_overlay),u_overlay_scale:new s.aI(y,a.u_overlay_scale)}),clippingMask:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix)}),heatmap:(y,a)=>({u_extrude_scale:new s.aI(y,a.u_extrude_scale),u_intensity:new s.aI(y,a.u_intensity),u_matrix:new s.aJ(y,a.u_matrix)}),heatmapTexture:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix),u_world:new s.aO(y,a.u_world),u_image:new s.aH(y,a.u_image),u_color_ramp:new s.aH(y,a.u_color_ramp),u_opacity:new s.aI(y,a.u_opacity)}),hillshade:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix),u_image:new s.aH(y,a.u_image),u_latrange:new s.aO(y,a.u_latrange),u_light:new s.aO(y,a.u_light),u_shadow:new s.aL(y,a.u_shadow),u_highlight:new s.aL(y,a.u_highlight),u_accent:new s.aL(y,a.u_accent)}),hillshadePrepare:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix),u_image:new s.aH(y,a.u_image),u_dimension:new s.aO(y,a.u_dimension),u_zoom:new s.aI(y,a.u_zoom),u_unpack:new s.aK(y,a.u_unpack)}),line:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix),u_ratio:new s.aI(y,a.u_ratio),u_device_pixel_ratio:new s.aI(y,a.u_device_pixel_ratio),u_units_to_pixels:new s.aO(y,a.u_units_to_pixels)}),lineGradient:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix),u_ratio:new s.aI(y,a.u_ratio),u_device_pixel_ratio:new s.aI(y,a.u_device_pixel_ratio),u_units_to_pixels:new s.aO(y,a.u_units_to_pixels),u_image:new s.aH(y,a.u_image),u_image_height:new s.aI(y,a.u_image_height)}),linePattern:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix),u_texsize:new s.aO(y,a.u_texsize),u_ratio:new s.aI(y,a.u_ratio),u_device_pixel_ratio:new s.aI(y,a.u_device_pixel_ratio),u_image:new s.aH(y,a.u_image),u_units_to_pixels:new s.aO(y,a.u_units_to_pixels),u_scale:new s.aN(y,a.u_scale),u_fade:new s.aI(y,a.u_fade)}),lineSDF:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix),u_ratio:new s.aI(y,a.u_ratio),u_device_pixel_ratio:new s.aI(y,a.u_device_pixel_ratio),u_units_to_pixels:new s.aO(y,a.u_units_to_pixels),u_patternscale_a:new s.aO(y,a.u_patternscale_a),u_patternscale_b:new s.aO(y,a.u_patternscale_b),u_sdfgamma:new s.aI(y,a.u_sdfgamma),u_image:new s.aH(y,a.u_image),u_tex_y_a:new s.aI(y,a.u_tex_y_a),u_tex_y_b:new s.aI(y,a.u_tex_y_b),u_mix:new s.aI(y,a.u_mix)}),raster:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix),u_tl_parent:new s.aO(y,a.u_tl_parent),u_scale_parent:new s.aI(y,a.u_scale_parent),u_buffer_scale:new s.aI(y,a.u_buffer_scale),u_fade_t:new s.aI(y,a.u_fade_t),u_opacity:new s.aI(y,a.u_opacity),u_image0:new s.aH(y,a.u_image0),u_image1:new s.aH(y,a.u_image1),u_brightness_low:new s.aI(y,a.u_brightness_low),u_brightness_high:new s.aI(y,a.u_brightness_high),u_saturation_factor:new s.aI(y,a.u_saturation_factor),u_contrast_factor:new s.aI(y,a.u_contrast_factor),u_spin_weights:new s.aN(y,a.u_spin_weights)}),symbolIcon:(y,a)=>({u_is_size_zoom_constant:new s.aH(y,a.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(y,a.u_is_size_feature_constant),u_size_t:new s.aI(y,a.u_size_t),u_size:new s.aI(y,a.u_size),u_camera_to_center_distance:new s.aI(y,a.u_camera_to_center_distance),u_pitch:new s.aI(y,a.u_pitch),u_rotate_symbol:new s.aH(y,a.u_rotate_symbol),u_aspect_ratio:new s.aI(y,a.u_aspect_ratio),u_fade_change:new s.aI(y,a.u_fade_change),u_matrix:new s.aJ(y,a.u_matrix),u_label_plane_matrix:new s.aJ(y,a.u_label_plane_matrix),u_coord_matrix:new s.aJ(y,a.u_coord_matrix),u_is_text:new s.aH(y,a.u_is_text),u_pitch_with_map:new s.aH(y,a.u_pitch_with_map),u_is_along_line:new s.aH(y,a.u_is_along_line),u_is_variable_anchor:new s.aH(y,a.u_is_variable_anchor),u_texsize:new s.aO(y,a.u_texsize),u_texture:new s.aH(y,a.u_texture),u_translation:new s.aO(y,a.u_translation),u_pitched_scale:new s.aI(y,a.u_pitched_scale)}),symbolSDF:(y,a)=>({u_is_size_zoom_constant:new s.aH(y,a.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(y,a.u_is_size_feature_constant),u_size_t:new s.aI(y,a.u_size_t),u_size:new s.aI(y,a.u_size),u_camera_to_center_distance:new s.aI(y,a.u_camera_to_center_distance),u_pitch:new s.aI(y,a.u_pitch),u_rotate_symbol:new s.aH(y,a.u_rotate_symbol),u_aspect_ratio:new s.aI(y,a.u_aspect_ratio),u_fade_change:new s.aI(y,a.u_fade_change),u_matrix:new s.aJ(y,a.u_matrix),u_label_plane_matrix:new s.aJ(y,a.u_label_plane_matrix),u_coord_matrix:new s.aJ(y,a.u_coord_matrix),u_is_text:new s.aH(y,a.u_is_text),u_pitch_with_map:new s.aH(y,a.u_pitch_with_map),u_is_along_line:new s.aH(y,a.u_is_along_line),u_is_variable_anchor:new s.aH(y,a.u_is_variable_anchor),u_texsize:new s.aO(y,a.u_texsize),u_texture:new s.aH(y,a.u_texture),u_gamma_scale:new s.aI(y,a.u_gamma_scale),u_device_pixel_ratio:new s.aI(y,a.u_device_pixel_ratio),u_is_halo:new s.aH(y,a.u_is_halo),u_translation:new s.aO(y,a.u_translation),u_pitched_scale:new s.aI(y,a.u_pitched_scale)}),symbolTextAndIcon:(y,a)=>({u_is_size_zoom_constant:new s.aH(y,a.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(y,a.u_is_size_feature_constant),u_size_t:new s.aI(y,a.u_size_t),u_size:new s.aI(y,a.u_size),u_camera_to_center_distance:new s.aI(y,a.u_camera_to_center_distance),u_pitch:new s.aI(y,a.u_pitch),u_rotate_symbol:new s.aH(y,a.u_rotate_symbol),u_aspect_ratio:new s.aI(y,a.u_aspect_ratio),u_fade_change:new s.aI(y,a.u_fade_change),u_matrix:new s.aJ(y,a.u_matrix),u_label_plane_matrix:new s.aJ(y,a.u_label_plane_matrix),u_coord_matrix:new s.aJ(y,a.u_coord_matrix),u_is_text:new s.aH(y,a.u_is_text),u_pitch_with_map:new s.aH(y,a.u_pitch_with_map),u_is_along_line:new s.aH(y,a.u_is_along_line),u_is_variable_anchor:new s.aH(y,a.u_is_variable_anchor),u_texsize:new s.aO(y,a.u_texsize),u_texsize_icon:new s.aO(y,a.u_texsize_icon),u_texture:new s.aH(y,a.u_texture),u_texture_icon:new s.aH(y,a.u_texture_icon),u_gamma_scale:new s.aI(y,a.u_gamma_scale),u_device_pixel_ratio:new s.aI(y,a.u_device_pixel_ratio),u_is_halo:new s.aH(y,a.u_is_halo),u_translation:new s.aO(y,a.u_translation),u_pitched_scale:new s.aI(y,a.u_pitched_scale)}),background:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix),u_opacity:new s.aI(y,a.u_opacity),u_color:new s.aL(y,a.u_color)}),backgroundPattern:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix),u_opacity:new s.aI(y,a.u_opacity),u_image:new s.aH(y,a.u_image),u_pattern_tl_a:new s.aO(y,a.u_pattern_tl_a),u_pattern_br_a:new s.aO(y,a.u_pattern_br_a),u_pattern_tl_b:new s.aO(y,a.u_pattern_tl_b),u_pattern_br_b:new s.aO(y,a.u_pattern_br_b),u_texsize:new s.aO(y,a.u_texsize),u_mix:new s.aI(y,a.u_mix),u_pattern_size_a:new s.aO(y,a.u_pattern_size_a),u_pattern_size_b:new s.aO(y,a.u_pattern_size_b),u_scale_a:new s.aI(y,a.u_scale_a),u_scale_b:new s.aI(y,a.u_scale_b),u_pixel_coord_upper:new s.aO(y,a.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(y,a.u_pixel_coord_lower),u_tile_units_to_pixels:new s.aI(y,a.u_tile_units_to_pixels)}),terrain:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix),u_texture:new s.aH(y,a.u_texture),u_ele_delta:new s.aI(y,a.u_ele_delta),u_fog_matrix:new s.aJ(y,a.u_fog_matrix),u_fog_color:new s.aL(y,a.u_fog_color),u_fog_ground_blend:new s.aI(y,a.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.aI(y,a.u_fog_ground_blend_opacity),u_horizon_color:new s.aL(y,a.u_horizon_color),u_horizon_fog_blend:new s.aI(y,a.u_horizon_fog_blend)}),terrainDepth:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix),u_ele_delta:new s.aI(y,a.u_ele_delta)}),terrainCoords:(y,a)=>({u_matrix:new s.aJ(y,a.u_matrix),u_texture:new s.aH(y,a.u_texture),u_terrain_coords_id:new s.aI(y,a.u_terrain_coords_id),u_ele_delta:new s.aI(y,a.u_ele_delta)}),sky:(y,a)=>({u_sky_color:new s.aL(y,a.u_sky_color),u_horizon_color:new s.aL(y,a.u_horizon_color),u_horizon:new s.aI(y,a.u_horizon),u_sky_horizon_blend:new s.aI(y,a.u_sky_horizon_blend)})};class Go{constructor(a,h,g){this.context=a;const _=a.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){const h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const wh={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class eu{constructor(a,h,g,_){this.length=h.length,this.attributes=g,this.itemSize=h.bytesPerElement,this.dynamicDraw=_,this.context=a;const b=a.gl;this.buffer=b.createBuffer(),a.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,h){for(let g=0;g<this.attributes.length;g++){const _=h.attributes[this.attributes[g].name];_!==void 0&&a.enableVertexAttribArray(_)}}setVertexAttribPointers(a,h,g){for(let _=0;_<this.attributes.length;_++){const b=this.attributes[_],P=h.attributes[b.name];P!==void 0&&a.vertexAttribPointer(P,b.components,a[wh[b.type]],!1,this.itemSize,b.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ha=new WeakMap;function ta(y){var a;if(Ha.has(y))return Ha.get(y);{const h=(a=y.getParameter(y.VERSION))===null||a===void 0?void 0:a.startsWith("WebGL 2.0");return Ha.set(y,h),h}}class Sn{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ra extends Sn{getDefault(){return s.aM.transparent}set(a){const h=this.current;(a.r!==h.r||a.g!==h.g||a.b!==h.b||a.a!==h.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Tf extends Sn{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class js extends Sn{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class Is extends Sn{getDefault(){return[!0,!0,!0,!0]}set(a){const h=this.current;(a[0]!==h[0]||a[1]!==h[1]||a[2]!==h[2]||a[3]!==h[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Ul extends Sn{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class jl extends Sn{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class Vs extends Sn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const h=this.current;(a.func!==h.func||a.ref!==h.ref||a.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class _l extends Sn{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const h=this.current;(a[0]!==h[0]||a[1]!==h[1]||a[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class Fu extends Sn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;a?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=a,this.dirty=!1}}class tu extends Sn{getDefault(){return[0,1]}set(a){const h=this.current;(a[0]!==h[0]||a[1]!==h[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class wc extends Sn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;a?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=a,this.dirty=!1}}class Vl extends Sn{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class Hs extends Sn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;a?h.enable(h.BLEND):h.disable(h.BLEND),this.current=a,this.dirty=!1}}class Sc extends Sn{getDefault(){const a=this.gl;return[a.ONE,a.ZERO]}set(a){const h=this.current;(a[0]!==h[0]||a[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class Bu extends Sn{getDefault(){return s.aM.transparent}set(a){const h=this.current;(a.r!==h.r||a.g!==h.g||a.b!==h.b||a.a!==h.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class xa extends Sn{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class Hl extends Sn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;a?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=a,this.dirty=!1}}class ru extends Sn{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class qa extends Sn{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class Ac extends Sn{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class na extends Sn{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class ql extends Sn{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const h=this.current;(a[0]!==h[0]||a[1]!==h[1]||a[2]!==h[2]||a[3]!==h[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class $ extends Sn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class ye extends Sn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Ve extends Sn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class ot extends Sn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class mt extends Sn{getDefault(){return null}set(a){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Ot extends Sn{getDefault(){return null}set(a){var h;if(a===this.current&&!this.dirty)return;const g=this.gl;ta(g)?g.bindVertexArray(a):(h=g.getExtension("OES_vertex_array_object"))===null||h===void 0||h.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class nr extends Sn{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class wr extends Sn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class Hr extends Sn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class an extends Sn{constructor(a,h){super(a),this.context=a,this.parent=h}getDefault(){return null}}class ln extends an{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class cn extends an{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Hn extends an{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class wi{constructor(a,h,g,_,b){this.context=a,this.width=h,this.height=g;const P=a.gl,I=this.framebuffer=P.createFramebuffer();if(this.colorAttachment=new ln(a,I),_)this.depthAttachment=b?new Hn(a,I):new cn(a,I);else if(b)throw new Error("Stencil cannot be set without depth");if(P.checkFramebufferStatus(P.FRAMEBUFFER)!==P.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const a=this.context.gl,h=this.colorAttachment.get();if(h&&a.deleteTexture(h),this.depthAttachment){const g=this.depthAttachment.get();g&&a.deleteRenderbuffer(g)}a.deleteFramebuffer(this.framebuffer)}}class un{constructor(a,h,g){this.blendFunction=a,this.blendColor=h,this.mask=g}}un.Replace=[1,0],un.disabled=new un(un.Replace,s.aM.transparent,[!1,!1,!1,!1]),un.unblended=new un(un.Replace,s.aM.transparent,[!0,!0,!0,!0]),un.alphaBlended=new un([1,771],s.aM.transparent,[!0,!0,!0,!0]);class Yo{constructor(a){var h,g;if(this.gl=a,this.clearColor=new ra(this),this.clearDepth=new Tf(this),this.clearStencil=new js(this),this.colorMask=new Is(this),this.depthMask=new Ul(this),this.stencilMask=new jl(this),this.stencilFunc=new Vs(this),this.stencilOp=new _l(this),this.stencilTest=new Fu(this),this.depthRange=new tu(this),this.depthTest=new wc(this),this.depthFunc=new Vl(this),this.blend=new Hs(this),this.blendFunc=new Sc(this),this.blendColor=new Bu(this),this.blendEquation=new xa(this),this.cullFace=new Hl(this),this.cullFaceSide=new ru(this),this.frontFace=new qa(this),this.program=new Ac(this),this.activeTexture=new na(this),this.viewport=new ql(this),this.bindFramebuffer=new $(this),this.bindRenderbuffer=new ye(this),this.bindTexture=new Ve(this),this.bindVertexBuffer=new ot(this),this.bindElementBuffer=new mt(this),this.bindVertexArray=new Ot(this),this.pixelStoreUnpack=new nr(this),this.pixelStoreUnpackPremultiplyAlpha=new wr(this),this.pixelStoreUnpackFlipY=new Hr(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),ta(a)){this.HALF_FLOAT=a.HALF_FLOAT;const _=a.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(h=a.RGBA16F)!==null&&h!==void 0?h:_==null?void 0:_.RGBA16F_EXT,this.RGB16F=(g=a.RGB16F)!==null&&g!==void 0?g:_==null?void 0:_.RGB16F_EXT,a.getExtension("EXT_color_buffer_float")}else{a.getExtension("EXT_color_buffer_half_float"),a.getExtension("OES_texture_half_float_linear");const _=a.getExtension("OES_texture_half_float");this.HALF_FLOAT=_==null?void 0:_.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,h){return new Go(this,a,h)}createVertexBuffer(a,h,g){return new eu(this,a,h,g)}createRenderbuffer(a,h,g){const _=this.gl,b=_.createRenderbuffer();return this.bindRenderbuffer.set(b),_.renderbufferStorage(_.RENDERBUFFER,a,h,g),this.bindRenderbuffer.set(null),b}createFramebuffer(a,h,g,_){return new wi(this,a,h,g,_)}clear({color:a,depth:h,stencil:g}){const _=this.gl;let b=0;a&&(b|=_.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(b|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),g!==void 0&&(b|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),_.clear(b)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){s.aE(a.blendFunction,un.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return ta(this.gl)?this.gl.createVertexArray():(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var h;return ta(this.gl)?this.gl.deleteVertexArray(a):(h=this.gl.getExtension("OES_vertex_array_object"))===null||h===void 0?void 0:h.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}class Lr{constructor(a,h,g){this.func=a,this.mask=h,this.range=g}}Lr.ReadOnly=!1,Lr.ReadWrite=!0,Lr.disabled=new Lr(519,Lr.ReadOnly,[0,1]);const Co=7680;class Tn{constructor(a,h,g,_,b,P){this.test=a,this.ref=h,this.mask=g,this.fail=_,this.depthFail=b,this.pass=P}}Tn.disabled=new Tn({func:519,mask:0},0,0,Co,Co,Co);class Mn{constructor(a,h,g){this.enable=a,this.mode=h,this.frontFace=g}}let Wa;function vl(y,a,h,g,_){const b=y.context,P=b.gl,I=y.useProgram("collisionBox"),L=[];let V=0,W=0;for(let Te=0;Te<g.length;Te++){const ke=g[Te],Ie=a.getTile(ke).getBucket(h);if(!Ie)continue;const ze=_?Ie.textCollisionBox:Ie.iconCollisionBox,Je=Ie.collisionCircleArray;if(Je.length>0){const Ge=s.H();s.aQ(Ge,Ie.placementInvProjMatrix,y.transform.glCoordMatrix),s.aQ(Ge,Ge,Ie.placementViewportMatrix),L.push({circleArray:Je,circleOffset:W,transform:ke.posMatrix,invTransform:Ge,coord:ke}),V+=Je.length/4,W=V}ze&&I.draw(b,P.LINES,Lr.disabled,Tn.disabled,y.colorModeForRenderPass(),Mn.disabled,{u_matrix:ke.posMatrix,u_pixel_extrude_scale:[1/(q=y.transform).width,1/q.height]},y.style.map.terrain&&y.style.map.terrain.getTerrainData(ke),h.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,null,y.transform.zoom,null,null,ze.collisionVertexBuffer)}var q;if(!_||!L.length)return;const oe=y.useProgram("collisionCircle"),le=new s.aR;le.resize(4*V),le._trim();let ie=0;for(const Te of L)for(let ke=0;ke<Te.circleArray.length/4;ke++){const Ie=4*ke,ze=Te.circleArray[Ie+0],Je=Te.circleArray[Ie+1],Ge=Te.circleArray[Ie+2],Pt=Te.circleArray[Ie+3];le.emplace(ie++,ze,Je,Ge,Pt,0),le.emplace(ie++,ze,Je,Ge,Pt,1),le.emplace(ie++,ze,Je,Ge,Pt,2),le.emplace(ie++,ze,Je,Ge,Pt,3)}(!Wa||Wa.length<2*V)&&(Wa=function(Te){const ke=2*Te,Ie=new s.aT;Ie.resize(ke),Ie._trim();for(let ze=0;ze<ke;ze++){const Je=6*ze;Ie.uint16[Je+0]=4*ze+0,Ie.uint16[Je+1]=4*ze+1,Ie.uint16[Je+2]=4*ze+2,Ie.uint16[Je+3]=4*ze+2,Ie.uint16[Je+4]=4*ze+3,Ie.uint16[Je+5]=4*ze+0}return Ie}(V));const fe=b.createIndexBuffer(Wa,!0),Ae=b.createVertexBuffer(le,s.aS.members,!0);for(const Te of L){const ke=yr(Te.transform,Te.invTransform,y.transform);oe.draw(b,P.TRIANGLES,Lr.disabled,Tn.disabled,y.colorModeForRenderPass(),Mn.disabled,ke,y.style.map.terrain&&y.style.map.terrain.getTerrainData(Te.coord),h.id,Ae,fe,s.a0.simpleSegment(0,2*Te.circleOffset,Te.circleArray.length,Te.circleArray.length/2),null,y.transform.zoom,null,null,null)}Ae.destroy(),fe.destroy()}Mn.disabled=new Mn(!1,1029,2305),Mn.backCCW=new Mn(!0,1029,2305);const Xa=s.an(new Float32Array(16));function bl(y,a,h,g,_,b){const{horizontalAlign:P,verticalAlign:I}=s.au(y);return new s.P((-(P-.5)*a/_+g[0])*b,(-(I-.5)*h/_+g[1])*b)}function Rs(y,a,h,g,_,b){const P=a.tileAnchorPoint.add(new s.P(a.translation[0],a.translation[1]));if(a.pitchWithMap){let I=g.mult(b);h||(I=I.rotate(-_));const L=P.add(I);return Ne(L.x,L.y,a.labelPlaneMatrix,a.getElevation).point}if(h){const I=Et(a.tileAnchorPoint.x+1,a.tileAnchorPoint.y,a).point.sub(y),L=Math.atan(I.y/I.x)+(I.x<0?Math.PI:0);return y.add(g.rotate(L))}return y.add(g)}function fs(y,a,h,g,_,b,P,I,L,V,W,q,oe,le){const ie=y.text.placedSymbolArray,fe=y.text.dynamicLayoutVertexArray,Ae=y.icon.dynamicLayoutVertexArray,Te={};fe.clear();for(let ke=0;ke<ie.length;ke++){const Ie=ie.get(ke),ze=Ie.hidden||!Ie.crossTileID||y.allowVerticalPlacement&&!Ie.placedOrientation?null:g[Ie.crossTileID];if(ze){const Je=new s.P(Ie.anchorX,Ie.anchorY),Ge={getElevation:le,width:_.width,height:_.height,labelPlaneMatrix:b,lineVertexArray:null,pitchWithMap:h,projection:W,projectionCache:null,tileAnchorPoint:Je,translation:q,unwrappedTileID:oe},Pt=h?Ne(Je.x,Je.y,P,le):Et(Je.x,Je.y,Ge),Ft=ae(_.cameraToCenterDistance,Pt.signedDistanceFromCamera);let Ht=s.ai(y.textSizeData,L,Ie)*Ft/s.ap;h&&(Ht*=y.tilePixelRatio/I);const{width:Gt,height:Xt,anchor:qt,textOffset:Yt,textBoxScale:Ir}=ze,ir=bl(qt,Gt,Xt,Yt,Ir,Ht),or=W.getPitchedTextCorrection(_,Je.add(new s.P(q[0],q[1])),oe),Nr=Rs(Pt.point,Ge,a,ir,_.angle,or),Qr=y.allowVerticalPlacement&&Ie.placedOrientation===s.ah.vertical?Math.PI/2:0;for(let Wr=0;Wr<Ie.numGlyphs;Wr++)s.aj(fe,Nr,Qr);V&&Ie.associatedIconIndex>=0&&(Te[Ie.associatedIconIndex]={shiftedAnchor:Nr,angle:Qr})}else Ar(Ie.numGlyphs,fe)}if(V){Ae.clear();const ke=y.icon.placedSymbolArray;for(let Ie=0;Ie<ke.length;Ie++){const ze=ke.get(Ie);if(ze.hidden)Ar(ze.numGlyphs,Ae);else{const Je=Te[Ie];if(Je)for(let Ge=0;Ge<ze.numGlyphs;Ge++)s.aj(Ae,Je.shiftedAnchor,Je.angle);else Ar(ze.numGlyphs,Ae)}}y.icon.dynamicLayoutVertexBuffer.updateData(Ae)}y.text.dynamicLayoutVertexBuffer.updateData(fe)}function Fo(y,a,h){return h.iconsInText&&a?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Mi(y,a,h,g,_,b,P,I,L,V,W,q){const oe=y.context,le=oe.gl,ie=y.transform,fe=Ji(),Ae=I==="map",Te=L==="map",ke=I!=="viewport"&&h.layout.get("symbol-placement")!=="point",Ie=Ae&&!Te&&!ke,ze=!Te&&ke,Je=!h.layout.get("symbol-sort-key").isConstant();let Ge=!1;const Pt=y.depthModeForSublayer(0,Lr.ReadOnly),Ft=h._unevaluatedLayout.hasValue("text-variable-anchor")||h._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ht=[],Gt=fe.getCircleRadiusCorrection(ie);for(const Xt of g){const qt=a.getTile(Xt),Yt=qt.getBucket(h);if(!Yt)continue;const Ir=_?Yt.text:Yt.icon;if(!Ir||!Ir.segments.get().length||!Ir.hasVisibleVertices)continue;const ir=Ir.programConfigurations.get(h.id),or=_||Yt.sdfIcons,Nr=_?Yt.textSizeData:Yt.iconSizeData,Qr=Te||ie.pitch!==0,Wr=y.useProgram(Fo(or,_,Yt),ir),sn=s.ag(Nr,ie.zoom),An=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Xt);let Zn,Di,$n,to,Jn=[0,0],Wi=null;if(_)Di=qt.glyphAtlasTexture,$n=le.LINEAR,Zn=qt.glyphAtlasTexture.size,Yt.iconsInText&&(Jn=qt.imageAtlasTexture.size,Wi=qt.imageAtlasTexture,to=Qr||y.options.rotating||y.options.zooming||Nr.kind==="composite"||Nr.kind==="camera"?le.LINEAR:le.NEAREST);else{const Dn=h.layout.get("icon-size").constantOr(0)!==1||Yt.iconsNeedLinear;Di=qt.imageAtlasTexture,$n=or||y.options.rotating||y.options.zooming||Dn||Qr?le.LINEAR:le.NEAREST,Zn=qt.imageAtlasTexture.size}const bo=Zr(qt,1,y.transform.zoom),Xs=ze?Xt.posMatrix:Xa,Ta=gi(Xs,Te,Ae,y.transform,bo),Li=Yr(Xs,Te,Ae,y.transform,bo),su=Yr(Xt.posMatrix,Te,Ae,y.transform,bo),Ca=fe.translatePosition(y.transform,qt,b,P),Df=Ft&&Yt.hasTextData(),Rh=h.layout.get("icon-text-fit")!=="none"&&Df&&Yt.hasIconData();if(ke){const Dn=y.style.map.terrain?(au,Cc)=>y.style.map.terrain.getElevation(Xt,au,Cc):null,Jl=h.layout.get("text-rotation-alignment")==="map";Ee(Yt,Xt.posMatrix,y,_,Ta,su,Te,V,Jl,fe,Xt.toUnwrapped(),ie.width,ie.height,Ca,Dn)}const Os=Xt.posMatrix,Ks=_&&Ft||Rh,Qo=ke||Ks?Xa:Ta,Ns=Li,co=or&&h.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let gs;gs=or?Yt.iconsInText?va(Nr.kind,sn,Ie,Te,ke,Ks,y,Os,Qo,Ns,Ca,Zn,Jn,Gt):ea(Nr.kind,sn,Ie,Te,ke,Ks,y,Os,Qo,Ns,Ca,_,Zn,!0,Gt):Ps(Nr.kind,sn,Ie,Te,ke,Ks,y,Os,Qo,Ns,Ca,_,Zn,Gt);const Ds={program:Wr,buffers:Ir,uniformValues:gs,atlasTexture:Di,atlasTextureIcon:Wi,atlasInterpolation:$n,atlasInterpolationIcon:to,isSDF:or,hasHalo:co};if(Je&&Yt.canOverlap){Ge=!0;const Dn=Ir.segments.get();for(const Jl of Dn)Ht.push({segments:new s.a0([Jl]),sortKey:Jl.sortKey,state:Ds,terrainData:An})}else Ht.push({segments:Ir.segments,sortKey:0,state:Ds,terrainData:An})}Ge&&Ht.sort((Xt,qt)=>Xt.sortKey-qt.sortKey);for(const Xt of Ht){const qt=Xt.state;if(oe.activeTexture.set(le.TEXTURE0),qt.atlasTexture.bind(qt.atlasInterpolation,le.CLAMP_TO_EDGE),qt.atlasTextureIcon&&(oe.activeTexture.set(le.TEXTURE1),qt.atlasTextureIcon&&qt.atlasTextureIcon.bind(qt.atlasInterpolationIcon,le.CLAMP_TO_EDGE)),qt.isSDF){const Yt=qt.uniformValues;qt.hasHalo&&(Yt.u_is_halo=1,Wl(qt.buffers,Xt.segments,h,y,qt.program,Pt,W,q,Yt,Xt.terrainData)),Yt.u_is_halo=0}Wl(qt.buffers,Xt.segments,h,y,qt.program,Pt,W,q,qt.uniformValues,Xt.terrainData)}}function Wl(y,a,h,g,_,b,P,I,L,V){const W=g.context;_.draw(W,W.gl.TRIANGLES,b,P,I,Mn.disabled,L,V,h.id,y.layoutVertexBuffer,y.indexBuffer,a,h.paint,g.transform.zoom,y.programConfigurations.get(h.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function ks(y,a,h,g){const _=y.context,b=_.gl,P=Tn.disabled,I=new un([b.ONE,b.ONE],s.aM.transparent,[!0,!0,!0,!0]),L=a.getBucket(h);if(!L)return;const V=g.key;let W=h.heatmapFbos.get(V);W||(W=xl(_,a.tileSize,a.tileSize),h.heatmapFbos.set(V,W)),_.bindFramebuffer.set(W.framebuffer),_.viewport.set([0,0,a.tileSize,a.tileSize]),_.clear({color:s.aM.transparent});const q=L.programConfigurations.get(h.id),oe=y.useProgram("heatmap",q),le=y.style.map.terrain.getTerrainData(g);oe.draw(_,b.TRIANGLES,Lr.disabled,P,I,Mn.disabled,br(g.posMatrix,a,y.transform.zoom,h.paint.get("heatmap-intensity")),le,h.id,L.layoutVertexBuffer,L.indexBuffer,L.segments,h.paint,y.transform.zoom,q)}function qs(y,a,h){const g=y.context,_=g.gl;g.setColorMode(y.colorModeForRenderPass());const b=Qi(g,a),P=h.key,I=a.heatmapFbos.get(P);I&&(g.activeTexture.set(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,I.colorAttachment.get()),g.activeTexture.set(_.TEXTURE1),b.bind(_.LINEAR,_.CLAMP_TO_EDGE),y.useProgram("heatmapTexture").draw(g,_.TRIANGLES,Lr.disabled,Tn.disabled,y.colorModeForRenderPass(),Mn.disabled,$t(y,a,0,1),null,a.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments,a.paint,y.transform.zoom),I.destroy(),a.heatmapFbos.delete(P))}function xl(y,a,h){var g,_;const b=y.gl,P=b.createTexture();b.bindTexture(b.TEXTURE_2D,P),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);const I=(g=y.HALF_FLOAT)!==null&&g!==void 0?g:b.UNSIGNED_BYTE,L=(_=y.RGBA16F)!==null&&_!==void 0?_:b.RGBA;b.texImage2D(b.TEXTURE_2D,0,L,a,h,0,b.RGBA,I,null);const V=y.createFramebuffer(a,h,!1,!1);return V.colorAttachment.set(P),V}function Qi(y,a){return a.colorRampTexture||(a.colorRampTexture=new G(y,a.colorRamp,y.gl.RGBA)),a.colorRampTexture}function Ka(y,a,h,g,_){if(!h||!g||!g.imageAtlas)return;const b=g.imageAtlas.patternPositions;let P=b[h.to.toString()],I=b[h.from.toString()];if(!P&&I&&(P=I),!I&&P&&(I=P),!P||!I){const L=_.getPaintProperty(a);P=b[L],I=b[L]}P&&I&&y.setConstantPatternPositions(P,I)}function Ga(y,a,h,g,_,b,P){const I=y.context.gl,L="fill-pattern",V=h.paint.get(L),W=V&&V.constantOr(1),q=h.getCrossfadeParameters();let oe,le,ie,fe,Ae;P?(le=W&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",oe=I.LINES):(le=W?"fillPattern":"fill",oe=I.TRIANGLES);const Te=V.constantOr(null);for(const ke of g){const Ie=a.getTile(ke);if(W&&!Ie.patternsLoaded())continue;const ze=Ie.getBucket(h);if(!ze)continue;const Je=ze.programConfigurations.get(h.id),Ge=y.useProgram(le,Je),Pt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ke);W&&(y.context.activeTexture.set(I.TEXTURE0),Ie.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),Je.updatePaintBuffers(q)),Ka(Je,L,Te,Ie,h);const Ft=Pt?ke:null,Ht=y.translatePosMatrix(Ft?Ft.posMatrix:ke.posMatrix,Ie,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(P){fe=ze.indexBuffer2,Ae=ze.segments2;const Gt=[I.drawingBufferWidth,I.drawingBufferHeight];ie=le==="fillOutlinePattern"&&W?er(Ht,y,q,Ie,Gt):Qt(Ht,Gt)}else fe=ze.indexBuffer,Ae=ze.segments,ie=W?Mt(Ht,y,q,Ie):ft(Ht);Ge.draw(y.context,oe,_,y.stencilModeForClipping(ke),b,Mn.disabled,ie,Pt,h.id,ze.layoutVertexBuffer,fe,Ae,h.paint,y.transform.zoom,Je)}}function Xl(y,a,h,g,_,b,P){const I=y.context,L=I.gl,V="fill-extrusion-pattern",W=h.paint.get(V),q=W.constantOr(1),oe=h.getCrossfadeParameters(),le=h.paint.get("fill-extrusion-opacity"),ie=W.constantOr(null);for(const fe of g){const Ae=a.getTile(fe),Te=Ae.getBucket(h);if(!Te)continue;const ke=y.style.map.terrain&&y.style.map.terrain.getTerrainData(fe),Ie=Te.programConfigurations.get(h.id),ze=y.useProgram(q?"fillExtrusionPattern":"fillExtrusion",Ie);q&&(y.context.activeTexture.set(L.TEXTURE0),Ae.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),Ie.updatePaintBuffers(oe)),Ka(Ie,V,ie,Ae,h);const Je=y.translatePosMatrix(fe.posMatrix,Ae,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),Ge=h.paint.get("fill-extrusion-vertical-gradient"),Pt=q?Le(Je,y,Ge,le,fe,oe,Ae):we(Je,y,Ge,le);ze.draw(I,I.gl.TRIANGLES,_,b,P,Mn.backCCW,Pt,ke,h.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,h.paint,y.transform.zoom,Ie,y.style.map.terrain&&Te.centroidVertexBuffer)}}function Bo(y,a,h,g,_,b,P){const I=y.context,L=I.gl,V=h.fbo;if(!V)return;const W=y.useProgram("hillshade"),q=y.style.map.terrain&&y.style.map.terrain.getTerrainData(a);I.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,V.colorAttachment.get()),W.draw(I,L.TRIANGLES,_,b,P,Mn.disabled,((oe,le,ie,fe)=>{const Ae=ie.paint.get("hillshade-shadow-color"),Te=ie.paint.get("hillshade-highlight-color"),ke=ie.paint.get("hillshade-accent-color");let Ie=ie.paint.get("hillshade-illumination-direction")*(Math.PI/180);ie.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ie-=oe.transform.angle);const ze=!oe.options.moving;return{u_matrix:fe?fe.posMatrix:oe.transform.calculatePosMatrix(le.tileID.toUnwrapped(),ze),u_image:0,u_latrange:Tr(0,le.tileID),u_light:[ie.paint.get("hillshade-exaggeration"),Ie],u_shadow:Ae,u_highlight:Te,u_accent:ke}})(y,h,g,q?a:null),q,g.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Ms(y,a,h,g,_,b){const P=y.context,I=P.gl,L=a.dem;if(L&&L.data){const V=L.dim,W=L.stride,q=L.getPixels();if(P.activeTexture.set(I.TEXTURE1),P.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||y.getTileTexture(W),a.demTexture){const le=a.demTexture;le.update(q,{premultiply:!1}),le.bind(I.NEAREST,I.CLAMP_TO_EDGE)}else a.demTexture=new G(P,q,I.RGBA,{premultiply:!1}),a.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);P.activeTexture.set(I.TEXTURE0);let oe=a.fbo;if(!oe){const le=new G(P,{width:V,height:V,data:null},I.RGBA);le.bind(I.LINEAR,I.CLAMP_TO_EDGE),oe=a.fbo=P.createFramebuffer(V,V,!0,!1),oe.colorAttachment.set(le.texture)}P.bindFramebuffer.set(oe.framebuffer),P.viewport.set([0,0,V,V]),y.useProgram("hillshadePrepare").draw(P,I.TRIANGLES,g,_,b,Mn.disabled,((le,ie)=>{const fe=ie.stride,Ae=s.H();return s.aP(Ae,0,s.X,-s.X,0,0,1),s.J(Ae,Ae,[0,-s.X,0]),{u_matrix:Ae,u_image:1,u_dimension:[fe,fe],u_zoom:le.overscaledZ,u_unpack:ie.getUnpackVector()}})(a.tileID,L),null,h.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),a.needsHillshadePrepare=!1}}function zu(y,a,h,g,_,b){const P=g.paint.get("raster-fade-duration");if(!b&&P>0){const I=x.now(),L=(I-y.timeAdded)/P,V=a?(I-a.timeAdded)/P:-1,W=h.getSource(),q=_.coveringZoomLevel({tileSize:W.tileSize,roundZoom:W.roundZoom}),oe=!a||Math.abs(a.tileID.overscaledZ-q)>Math.abs(y.tileID.overscaledZ-q),le=oe&&y.refreshedUponExpiration?1:s.ac(oe?L:1-V,0,1);return y.refreshedUponExpiration&&L>=1&&(y.refreshedUponExpiration=!1),a?{opacity:1,mix:1-le}:{opacity:le,mix:0}}return{opacity:1,mix:0}}const $u=new s.aM(1,0,0,1),nt=new s.aM(0,1,0,1),Ct=new s.aM(0,0,1,1),cr=new s.aM(1,0,1,1),kr=new s.aM(0,1,1,1);function Rn(y,a,h,g){Yn(y,0,a+h/2,y.transform.width,h,g)}function gn(y,a,h,g){Yn(y,a-h/2,0,h,y.transform.height,g)}function Yn(y,a,h,g,_,b){const P=y.context,I=P.gl;I.enable(I.SCISSOR_TEST),I.scissor(a*y.pixelRatio,h*y.pixelRatio,g*y.pixelRatio,_*y.pixelRatio),P.clear({color:b}),I.disable(I.SCISSOR_TEST)}function qn(y,a,h){const g=y.context,_=g.gl,b=h.posMatrix,P=y.useProgram("debug"),I=Lr.disabled,L=Tn.disabled,V=y.colorModeForRenderPass(),W="$debug",q=y.style.map.terrain&&y.style.map.terrain.getTerrainData(h);g.activeTexture.set(_.TEXTURE0);const oe=a.getTileByID(h.key).latestRawTileData,le=Math.floor((oe&&oe.byteLength||0)/1024),ie=a.getTile(h).tileSize,fe=512/Math.min(ie,512)*(h.overscaledZ/y.transform.zoom)*.5;let Ae=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(Ae+=` => ${h.overscaledZ}`),function(Te,ke){Te.initDebugOverlayCanvas();const Ie=Te.debugOverlayCanvas,ze=Te.context.gl,Je=Te.debugOverlayCanvas.getContext("2d");Je.clearRect(0,0,Ie.width,Ie.height),Je.shadowColor="white",Je.shadowBlur=2,Je.lineWidth=1.5,Je.strokeStyle="white",Je.textBaseline="top",Je.font="bold 36px Open Sans, sans-serif",Je.fillText(ke,5,5),Je.strokeText(ke,5,5),Te.debugOverlayTexture.update(Ie),Te.debugOverlayTexture.bind(ze.LINEAR,ze.CLAMP_TO_EDGE)}(y,`${Ae} ${le}kB`),P.draw(g,_.TRIANGLES,I,L,un.alphaBlended,Mn.disabled,ti(b,s.aM.transparent,fe),null,W,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),P.draw(g,_.LINE_STRIP,I,L,V,Mn.disabled,ti(b,s.aM.red),q,W,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function zo(y,a,h){const g=y.context,_=g.gl,b=y.colorModeForRenderPass(),P=new Lr(_.LEQUAL,Lr.ReadWrite,y.depthRangeFor3D),I=y.useProgram("terrain"),L=a.getTerrainMesh();g.bindFramebuffer.set(null),g.viewport.set([0,0,y.width,y.height]);for(const V of h){const W=y.renderToTexture.getTexture(V),q=a.getTerrainData(V.tileID);g.activeTexture.set(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,W.texture);const oe=y.transform.calculatePosMatrix(V.tileID.toUnwrapped()),le=a.getMeshFrameDelta(y.transform.zoom),ie=y.transform.calculateFogMatrix(V.tileID.toUnwrapped()),fe=X(oe,le,ie,y.style.sky,y.transform.pitch);I.draw(g,_.TRIANGLES,P,Tn.disabled,b,Mn.backCCW,fe,q,"terrain",L.vertexBuffer,L.indexBuffer,L.segments)}}class _i{constructor(a,h,g){this.vertexBuffer=a,this.indexBuffer=h,this.segments=g}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class ri{constructor(a,h){this.context=new Yo(a),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=dr.maxUnderzooming+dr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new _a}resize(a,h,g){if(this.width=Math.floor(a*g),this.height=Math.floor(h*g),this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style._order)this.style._layers[_].resize()}setup(){const a=this.context,h=new s.aX;h.emplaceBack(0,0),h.emplaceBack(s.X,0),h.emplaceBack(0,s.X),h.emplaceBack(s.X,s.X),this.tileExtentBuffer=a.createVertexBuffer(h,Cs.members),this.tileExtentSegments=s.a0.simpleSegment(0,0,4,2);const g=new s.aX;g.emplaceBack(0,0),g.emplaceBack(s.X,0),g.emplaceBack(0,s.X),g.emplaceBack(s.X,s.X),this.debugBuffer=a.createVertexBuffer(g,Cs.members),this.debugSegments=s.a0.simpleSegment(0,0,4,5);const _=new s.$;_.emplaceBack(0,0,0,0),_.emplaceBack(s.X,0,s.X,0),_.emplaceBack(0,s.X,0,s.X),_.emplaceBack(s.X,s.X,s.X,s.X),this.rasterBoundsBuffer=a.createVertexBuffer(_,rr.members),this.rasterBoundsSegments=s.a0.simpleSegment(0,0,4,2);const b=new s.aX;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(b,Cs.members),this.viewportSegments=s.a0.simpleSegment(0,0,4,2);const P=new s.aZ;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(P);const I=new s.aY;I.emplaceBack(0,1,2),I.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(I);const L=this.context.gl;this.stencilClearMode=new Tn({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO)}clearStencil(){const a=this.context,h=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const g=s.H();s.aP(g,0,this.width,this.height,0,0,1),s.K(g,g,[h.drawingBufferWidth,h.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(a,h.TRIANGLES,Lr.disabled,this.stencilClearMode,un.disabled,Mn.disabled,zr(g),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,h){if(this.currentStencilSource===a.source||!a.isTileClipped()||!h||!h.length)return;this.currentStencilSource=a.source;const g=this.context,_=g.gl;this.nextStencilID+h.length>256&&this.clearStencil(),g.setColorMode(un.disabled),g.setDepthMode(Lr.disabled);const b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of h){const I=this._tileClippingMaskIDs[P.key]=this.nextStencilID++,L=this.style.map.terrain&&this.style.map.terrain.getTerrainData(P);b.draw(g,_.TRIANGLES,Lr.disabled,new Tn({func:_.ALWAYS,mask:0},I,255,_.KEEP,_.KEEP,_.REPLACE),un.disabled,Mn.disabled,zr(P.posMatrix),L,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,h=this.context.gl;return new Tn({func:h.NOTEQUAL,mask:255},a,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(a){const h=this.context.gl;return new Tn({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(a){const h=this.context.gl,g=a.sort((P,I)=>I.overscaledZ-P.overscaledZ),_=g[g.length-1].overscaledZ,b=g[0].overscaledZ-_+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const P={};for(let I=0;I<b;I++)P[I+_]=new Tn({func:h.GEQUAL,mask:255},I+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=b,[P,g]}return[{[_]:Tn.disabled},g]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new un([a.CONSTANT_COLOR,a.ONE],new s.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?un.unblended:un.alphaBlended}depthModeForSublayer(a,h,g){if(!this.opaquePassEnabledForLayer())return Lr.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Lr(g||this.context.gl.LEQUAL,h,[_,_])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,h){this.style=a,this.options=h,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(x.now()),this.imageManager.beginFrame();const g=this.style._order,_=this.style.sourceCaches,b={},P={},I={};for(const L in _){const V=_[L];V.used&&V.prepare(this.context),b[L]=V.getVisibleCoordinates(),P[L]=b[L].slice().reverse(),I[L]=V.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let L=0;L<g.length;L++)if(this.style._layers[g[L]].is3D()){this.opaquePassCutoff=L;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const L of g){const V=this.style._layers[L];if(!V.hasOffscreenPass()||V.isHidden(this.transform.zoom))continue;const W=P[V.source];(V.type==="custom"||W.length)&&this.renderLayer(this,_[V.source],V,W)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?s.aM.black:s.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(L,V){const W=L.context,q=W.gl,oe=((Te,ke,Ie)=>({u_sky_color:Te.properties.get("sky-color"),u_horizon_color:Te.properties.get("horizon-color"),u_horizon:(ke.height/2+ke.getHorizon())*Ie,u_sky_horizon_blend:Te.properties.get("sky-horizon-blend")*ke.height/2*Ie}))(V,L.style.map.transform,L.pixelRatio),le=new Lr(q.LEQUAL,Lr.ReadWrite,[0,1]),ie=Tn.disabled,fe=L.colorModeForRenderPass(),Ae=L.useProgram("sky");if(!V.mesh){const Te=new s.aX;Te.emplaceBack(-1,-1),Te.emplaceBack(1,-1),Te.emplaceBack(1,1),Te.emplaceBack(-1,1);const ke=new s.aY;ke.emplaceBack(0,1,2),ke.emplaceBack(0,2,3),V.mesh=new _i(W.createVertexBuffer(Te,Cs.members),W.createIndexBuffer(ke),s.a0.simpleSegment(0,0,Te.length,ke.length))}Ae.draw(W,q.TRIANGLES,le,ie,fe,Mn.disabled,oe,void 0,"sky",V.mesh.vertexBuffer,V.mesh.indexBuffer,V.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const L=this.style._layers[g[this.currentLayer]],V=_[L.source],W=b[L.source];this._renderTileClippingMasks(L,W),this.renderLayer(this,V,L,W)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const L=this.style._layers[g[this.currentLayer]],V=_[L.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(L))continue;const W=(L.type==="symbol"?I:P)[L.source];this._renderTileClippingMasks(L,b[L.source]),this.renderLayer(this,V,L,W)}if(this.options.showTileBoundaries){const L=function(V,W){let q=null;const oe=Object.values(V._layers).flatMap(Ae=>Ae.source&&!Ae.isHidden(W)?[V.sourceCaches[Ae.source]]:[]),le=oe.filter(Ae=>Ae.getSource().type==="vector"),ie=oe.filter(Ae=>Ae.getSource().type!=="vector"),fe=Ae=>{(!q||q.getSource().maxzoom<Ae.getSource().maxzoom)&&(q=Ae)};return le.forEach(Ae=>fe(Ae)),q||ie.forEach(Ae=>fe(Ae)),q}(this.style,this.transform.zoom);L&&function(V,W,q){for(let oe=0;oe<q.length;oe++)qn(V,W,q[oe])}(this,L,L.getVisibleCoordinates())}this.options.showPadding&&function(L){const V=L.transform.padding;Rn(L,L.transform.height-(V.top||0),3,$u),Rn(L,V.bottom||0,3,nt),gn(L,V.left||0,3,Ct),gn(L,L.transform.width-(V.right||0),3,cr);const W=L.transform.centerPoint;(function(q,oe,le,ie){Yn(q,oe-1,le-10,2,20,ie),Yn(q,oe-10,le-1,20,2,ie)})(L,W.x,L.transform.height-W.y,kr)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(a){if(!this.style||!this.style.map||!this.style.map.terrain)return;const h=this.terrainFacilitator.matrix,g=this.transform.modelViewProjectionMatrix;let _=this.terrainFacilitator.dirty;_||(_=a?!s.a_(h,g):!s.a$(h,g)),_||(_=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),_&&(s.b0(h,g),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(b,P){const I=b.context,L=I.gl,V=un.unblended,W=new Lr(L.LEQUAL,Lr.ReadWrite,[0,1]),q=P.getTerrainMesh(),oe=P.sourceCache.getRenderableTiles(),le=b.useProgram("terrainDepth");I.bindFramebuffer.set(P.getFramebuffer("depth").framebuffer),I.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),I.clear({color:s.aM.transparent,depth:1});for(const ie of oe){const fe=P.getTerrainData(ie.tileID),Ae={u_matrix:b.transform.calculatePosMatrix(ie.tileID.toUnwrapped()),u_ele_delta:P.getMeshFrameDelta(b.transform.zoom)};le.draw(I,L.TRIANGLES,W,Tn.disabled,V,Mn.backCCW,Ae,fe,"terrain",q.vertexBuffer,q.indexBuffer,q.segments)}I.bindFramebuffer.set(null),I.viewport.set([0,0,b.width,b.height])}(this,this.style.map.terrain),function(b,P){const I=b.context,L=I.gl,V=un.unblended,W=new Lr(L.LEQUAL,Lr.ReadWrite,[0,1]),q=P.getTerrainMesh(),oe=P.getCoordsTexture(),le=P.sourceCache.getRenderableTiles(),ie=b.useProgram("terrainCoords");I.bindFramebuffer.set(P.getFramebuffer("coords").framebuffer),I.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),I.clear({color:s.aM.transparent,depth:1}),P.coordsIndex=[];for(const fe of le){const Ae=P.getTerrainData(fe.tileID);I.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,oe.texture);const Te={u_matrix:b.transform.calculatePosMatrix(fe.tileID.toUnwrapped()),u_terrain_coords_id:(255-P.coordsIndex.length)/255,u_texture:0,u_ele_delta:P.getMeshFrameDelta(b.transform.zoom)};ie.draw(I,L.TRIANGLES,W,Tn.disabled,V,Mn.backCCW,Te,Ae,"terrain",q.vertexBuffer,q.indexBuffer,q.segments),P.coordsIndex.push(fe.tileID.key)}I.bindFramebuffer.set(null),I.viewport.set([0,0,b.width,b.height])}(this,this.style.map.terrain))}renderLayer(a,h,g,_){if(!g.isHidden(this.transform.zoom)&&(g.type==="background"||g.type==="custom"||(_||[]).length))switch(this.id=g.id,g.type){case"symbol":(function(b,P,I,L,V){if(b.renderPass!=="translucent")return;const W=Tn.disabled,q=b.colorModeForRenderPass();(I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(oe,le,ie,fe,Ae,Te,ke,Ie,ze){const Je=le.transform,Ge=Ji(),Pt=Ae==="map",Ft=Te==="map";for(const Ht of oe){const Gt=fe.getTile(Ht),Xt=Gt.getBucket(ie);if(!Xt||!Xt.text||!Xt.text.segments.get().length)continue;const qt=s.ag(Xt.textSizeData,Je.zoom),Yt=Zr(Gt,1,le.transform.zoom),Ir=gi(Ht.posMatrix,Ft,Pt,le.transform,Yt),ir=ie.layout.get("icon-text-fit")!=="none"&&Xt.hasIconData();if(qt){const or=Math.pow(2,Je.zoom-Gt.tileID.overscaledZ),Nr=le.style.map.terrain?(Wr,sn)=>le.style.map.terrain.getElevation(Ht,Wr,sn):null,Qr=Ge.translatePosition(Je,Gt,ke,Ie);fs(Xt,Pt,Ft,ze,Je,Ir,Ht.posMatrix,or,qt,ir,Ge,Qr,Ht.toUnwrapped(),Nr)}}}(L,b,I,P,I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),V),I.paint.get("icon-opacity").constantOr(1)!==0&&Mi(b,P,I,L,!1,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),I.layout.get("icon-rotation-alignment"),I.layout.get("icon-pitch-alignment"),I.layout.get("icon-keep-upright"),W,q),I.paint.get("text-opacity").constantOr(1)!==0&&Mi(b,P,I,L,!0,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.layout.get("text-keep-upright"),W,q),P.map.showCollisionBoxes&&(vl(b,P,I,L,!0),vl(b,P,I,L,!1))})(a,h,g,_,this.style.placement.variableOffsets);break;case"circle":(function(b,P,I,L){if(b.renderPass!=="translucent")return;const V=I.paint.get("circle-opacity"),W=I.paint.get("circle-stroke-width"),q=I.paint.get("circle-stroke-opacity"),oe=!I.layout.get("circle-sort-key").isConstant();if(V.constantOr(1)===0&&(W.constantOr(1)===0||q.constantOr(1)===0))return;const le=b.context,ie=le.gl,fe=b.depthModeForSublayer(0,Lr.ReadOnly),Ae=Tn.disabled,Te=b.colorModeForRenderPass(),ke=[];for(let Ie=0;Ie<L.length;Ie++){const ze=L[Ie],Je=P.getTile(ze),Ge=Je.getBucket(I);if(!Ge)continue;const Pt=Ge.programConfigurations.get(I.id),Ft=b.useProgram("circle",Pt),Ht=Ge.layoutVertexBuffer,Gt=Ge.indexBuffer,Xt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(ze),qt={programConfiguration:Pt,program:Ft,layoutVertexBuffer:Ht,indexBuffer:Gt,uniformValues:Jt(b,ze,Je,I),terrainData:Xt};if(oe){const Yt=Ge.segments.get();for(const Ir of Yt)ke.push({segments:new s.a0([Ir]),sortKey:Ir.sortKey,state:qt})}else ke.push({segments:Ge.segments,sortKey:0,state:qt})}oe&&ke.sort((Ie,ze)=>Ie.sortKey-ze.sortKey);for(const Ie of ke){const{programConfiguration:ze,program:Je,layoutVertexBuffer:Ge,indexBuffer:Pt,uniformValues:Ft,terrainData:Ht}=Ie.state;Je.draw(le,ie.TRIANGLES,fe,Ae,Te,Mn.disabled,Ft,Ht,I.id,Ge,Pt,Ie.segments,I.paint,b.transform.zoom,ze)}})(a,h,g,_);break;case"heatmap":(function(b,P,I,L){if(I.paint.get("heatmap-opacity")===0)return;const V=b.context;if(b.style.map.terrain){for(const W of L){const q=P.getTile(W);P.hasRenderableParent(W)||(b.renderPass==="offscreen"?ks(b,q,I,W):b.renderPass==="translucent"&&qs(b,I,W))}V.viewport.set([0,0,b.width,b.height])}else b.renderPass==="offscreen"?function(W,q,oe,le){const ie=W.context,fe=ie.gl,Ae=Tn.disabled,Te=new un([fe.ONE,fe.ONE],s.aM.transparent,[!0,!0,!0,!0]);(function(ke,Ie,ze){const Je=ke.gl;ke.activeTexture.set(Je.TEXTURE1),ke.viewport.set([0,0,Ie.width/4,Ie.height/4]);let Ge=ze.heatmapFbos.get(s.aU);Ge?(Je.bindTexture(Je.TEXTURE_2D,Ge.colorAttachment.get()),ke.bindFramebuffer.set(Ge.framebuffer)):(Ge=xl(ke,Ie.width/4,Ie.height/4),ze.heatmapFbos.set(s.aU,Ge))})(ie,W,oe),ie.clear({color:s.aM.transparent});for(let ke=0;ke<le.length;ke++){const Ie=le[ke];if(q.hasRenderableParent(Ie))continue;const ze=q.getTile(Ie),Je=ze.getBucket(oe);if(!Je)continue;const Ge=Je.programConfigurations.get(oe.id),Pt=W.useProgram("heatmap",Ge),{zoom:Ft}=W.transform;Pt.draw(ie,fe.TRIANGLES,Lr.disabled,Ae,Te,Mn.disabled,br(Ie.posMatrix,ze,Ft,oe.paint.get("heatmap-intensity")),null,oe.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,oe.paint,W.transform.zoom,Ge)}ie.viewport.set([0,0,W.width,W.height])}(b,P,I,L):b.renderPass==="translucent"&&function(W,q){const oe=W.context,le=oe.gl;oe.setColorMode(W.colorModeForRenderPass());const ie=q.heatmapFbos.get(s.aU);ie&&(oe.activeTexture.set(le.TEXTURE0),le.bindTexture(le.TEXTURE_2D,ie.colorAttachment.get()),oe.activeTexture.set(le.TEXTURE1),Qi(oe,q).bind(le.LINEAR,le.CLAMP_TO_EDGE),W.useProgram("heatmapTexture").draw(oe,le.TRIANGLES,Lr.disabled,Tn.disabled,W.colorModeForRenderPass(),Mn.disabled,$t(W,q,0,1),null,q.id,W.viewportBuffer,W.quadTriangleIndexBuffer,W.viewportSegments,q.paint,W.transform.zoom))}(b,I)})(a,h,g,_);break;case"line":(function(b,P,I,L){if(b.renderPass!=="translucent")return;const V=I.paint.get("line-opacity"),W=I.paint.get("line-width");if(V.constantOr(1)===0||W.constantOr(1)===0)return;const q=b.depthModeForSublayer(0,Lr.ReadOnly),oe=b.colorModeForRenderPass(),le=I.paint.get("line-dasharray"),ie=I.paint.get("line-pattern"),fe=ie.constantOr(1),Ae=I.paint.get("line-gradient"),Te=I.getCrossfadeParameters(),ke=fe?"linePattern":le?"lineSDF":Ae?"lineGradient":"line",Ie=b.context,ze=Ie.gl;let Je=!0;for(const Ge of L){const Pt=P.getTile(Ge);if(fe&&!Pt.patternsLoaded())continue;const Ft=Pt.getBucket(I);if(!Ft)continue;const Ht=Ft.programConfigurations.get(I.id),Gt=b.context.program.get(),Xt=b.useProgram(ke,Ht),qt=Je||Xt.program!==Gt,Yt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ge),Ir=ie.constantOr(null);if(Ir&&Pt.imageAtlas){const Nr=Pt.imageAtlas,Qr=Nr.patternPositions[Ir.to.toString()],Wr=Nr.patternPositions[Ir.from.toString()];Qr&&Wr&&Ht.setConstantPatternPositions(Qr,Wr)}const ir=Yt?Ge:null,or=fe?ai(b,Pt,I,Te,ir):le?zl(b,Pt,I,le,Te,ir):Ae?Hi(b,Pt,I,Ft.lineClipsArray.length,ir):wn(b,Pt,I,ir);if(fe)Ie.activeTexture.set(ze.TEXTURE0),Pt.imageAtlasTexture.bind(ze.LINEAR,ze.CLAMP_TO_EDGE),Ht.updatePaintBuffers(Te);else if(le&&(qt||b.lineAtlas.dirty))Ie.activeTexture.set(ze.TEXTURE0),b.lineAtlas.bind(Ie);else if(Ae){const Nr=Ft.gradients[I.id];let Qr=Nr.texture;if(I.gradientVersion!==Nr.version){let Wr=256;if(I.stepInterpolant){const sn=P.getSource().maxzoom,An=Ge.canonical.z===sn?Math.ceil(1<<b.transform.maxZoom-Ge.canonical.z):1;Wr=s.ac(s.aV(Ft.maxLineLength/s.X*1024*An),256,Ie.maxTextureSize)}Nr.gradient=s.aW({expression:I.gradientExpression(),evaluationKey:"lineProgress",resolution:Wr,image:Nr.gradient||void 0,clips:Ft.lineClipsArray}),Nr.texture?Nr.texture.update(Nr.gradient):Nr.texture=new G(Ie,Nr.gradient,ze.RGBA),Nr.version=I.gradientVersion,Qr=Nr.texture}Ie.activeTexture.set(ze.TEXTURE0),Qr.bind(I.stepInterpolant?ze.NEAREST:ze.LINEAR,ze.CLAMP_TO_EDGE)}Xt.draw(Ie,ze.TRIANGLES,q,b.stencilModeForClipping(Ge),oe,Mn.disabled,or,Yt,I.id,Ft.layoutVertexBuffer,Ft.indexBuffer,Ft.segments,I.paint,b.transform.zoom,Ht,Ft.layoutVertexBuffer2),Je=!1}})(a,h,g,_);break;case"fill":(function(b,P,I,L){const V=I.paint.get("fill-color"),W=I.paint.get("fill-opacity");if(W.constantOr(1)===0)return;const q=b.colorModeForRenderPass(),oe=I.paint.get("fill-pattern"),le=b.opaquePassEnabledForLayer()&&!oe.constantOr(1)&&V.constantOr(s.aM.transparent).a===1&&W.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===le){const ie=b.depthModeForSublayer(1,b.renderPass==="opaque"?Lr.ReadWrite:Lr.ReadOnly);Ga(b,P,I,L,ie,q,!1)}if(b.renderPass==="translucent"&&I.paint.get("fill-antialias")){const ie=b.depthModeForSublayer(I.getPaintProperty("fill-outline-color")?2:0,Lr.ReadOnly);Ga(b,P,I,L,ie,q,!0)}})(a,h,g,_);break;case"fill-extrusion":(function(b,P,I,L){const V=I.paint.get("fill-extrusion-opacity");if(V!==0&&b.renderPass==="translucent"){const W=new Lr(b.context.gl.LEQUAL,Lr.ReadWrite,b.depthRangeFor3D);if(V!==1||I.paint.get("fill-extrusion-pattern").constantOr(1))Xl(b,P,I,L,W,Tn.disabled,un.disabled),Xl(b,P,I,L,W,b.stencilModeFor3D(),b.colorModeForRenderPass());else{const q=b.colorModeForRenderPass();Xl(b,P,I,L,W,Tn.disabled,q)}}})(a,h,g,_);break;case"hillshade":(function(b,P,I,L){if(b.renderPass!=="offscreen"&&b.renderPass!=="translucent")return;const V=b.context,W=b.depthModeForSublayer(0,Lr.ReadOnly),q=b.colorModeForRenderPass(),[oe,le]=b.renderPass==="translucent"?b.stencilConfigForOverlap(L):[{},L];for(const ie of le){const fe=P.getTile(ie);fe.needsHillshadePrepare!==void 0&&fe.needsHillshadePrepare&&b.renderPass==="offscreen"?Ms(b,fe,I,W,Tn.disabled,q):b.renderPass==="translucent"&&Bo(b,ie,fe,I,W,oe[ie.overscaledZ],q)}V.viewport.set([0,0,b.width,b.height])})(a,h,g,_);break;case"raster":(function(b,P,I,L){if(b.renderPass!=="translucent"||I.paint.get("raster-opacity")===0||!L.length)return;const V=b.context,W=V.gl,q=P.getSource(),oe=b.useProgram("raster"),le=b.colorModeForRenderPass(),[ie,fe]=q instanceof at?[{},L]:b.stencilConfigForOverlap(L),Ae=fe[fe.length-1].overscaledZ,Te=!b.options.moving;for(const ke of fe){const Ie=b.depthModeForSublayer(ke.overscaledZ-Ae,I.paint.get("raster-opacity")===1?Lr.ReadWrite:Lr.ReadOnly,W.LESS),ze=P.getTile(ke);ze.registerFadeDuration(I.paint.get("raster-fade-duration"));const Je=P.findLoadedParent(ke,0),Ge=P.findLoadedSibling(ke),Pt=zu(ze,Je||Ge||null,P,I,b.transform,b.style.map.terrain);let Ft,Ht;const Gt=I.paint.get("raster-resampling")==="nearest"?W.NEAREST:W.LINEAR;V.activeTexture.set(W.TEXTURE0),ze.texture.bind(Gt,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),V.activeTexture.set(W.TEXTURE1),Je?(Je.texture.bind(Gt,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),Ft=Math.pow(2,Je.tileID.overscaledZ-ze.tileID.overscaledZ),Ht=[ze.tileID.canonical.x*Ft%1,ze.tileID.canonical.y*Ft%1]):ze.texture.bind(Gt,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),ze.texture.useMipmap&&V.extTextureFilterAnisotropic&&b.transform.pitch>20&&W.texParameterf(W.TEXTURE_2D,V.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,V.extTextureFilterAnisotropicMax);const Xt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(ke),qt=Xt?ke:null,Yt=qt?qt.posMatrix:b.transform.calculatePosMatrix(ke.toUnwrapped(),Te),Ir=xh(Yt,Ht||[0,0],Ft||1,Pt,I);q instanceof at?oe.draw(V,W.TRIANGLES,Ie,Tn.disabled,le,Mn.disabled,Ir,Xt,I.id,q.boundsBuffer,b.quadTriangleIndexBuffer,q.boundsSegments):oe.draw(V,W.TRIANGLES,Ie,ie[ke.overscaledZ],le,Mn.disabled,Ir,Xt,I.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}})(a,h,g,_);break;case"background":(function(b,P,I,L){const V=I.paint.get("background-color"),W=I.paint.get("background-opacity");if(W===0)return;const q=b.context,oe=q.gl,le=b.transform,ie=le.tileSize,fe=I.paint.get("background-pattern");if(b.isPatternMissing(fe))return;const Ae=!fe&&V.a===1&&W===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass!==Ae)return;const Te=Tn.disabled,ke=b.depthModeForSublayer(0,Ae==="opaque"?Lr.ReadWrite:Lr.ReadOnly),Ie=b.colorModeForRenderPass(),ze=b.useProgram(fe?"backgroundPattern":"background"),Je=L||le.coveringTiles({tileSize:ie,terrain:b.style.map.terrain});fe&&(q.activeTexture.set(oe.TEXTURE0),b.imageManager.bind(b.context));const Ge=I.getCrossfadeParameters();for(const Pt of Je){const Ft=L?Pt.posMatrix:b.transform.calculatePosMatrix(Pt.toUnwrapped()),Ht=fe?ba(Ft,W,b,fe,{tileID:Pt,tileSize:ie},Ge):xc(Ft,W,V),Gt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Pt);ze.draw(q,oe.TRIANGLES,ke,Te,Ie,Mn.disabled,Ht,Gt,I.id,b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}})(a,0,g,_);break;case"custom":(function(b,P,I){const L=b.context,V=I.implementation;if(b.renderPass==="offscreen"){const W=V.prerender;W&&(b.setCustomLayerDefaults(),L.setColorMode(b.colorModeForRenderPass()),W.call(V,L.gl,b.transform.customLayerMatrix()),L.setDirty(),b.setBaseState())}else if(b.renderPass==="translucent"){b.setCustomLayerDefaults(),L.setColorMode(b.colorModeForRenderPass()),L.setStencilMode(Tn.disabled);const W=V.renderingMode==="3d"?new Lr(b.context.gl.LEQUAL,Lr.ReadWrite,b.depthRangeFor3D):b.depthModeForSublayer(0,Lr.ReadOnly);L.setDepthMode(W),V.render(L.gl,b.transform.customLayerMatrix(),{farZ:b.transform.farZ,nearZ:b.transform.nearZ,fov:b.transform._fov,modelViewProjectionMatrix:b.transform.modelViewProjectionMatrix,projectionMatrix:b.transform.projectionMatrix}),L.setDirty(),b.setBaseState(),L.bindFramebuffer.set(null)}})(a,0,g)}}translatePosMatrix(a,h,g,_,b){if(!g[0]&&!g[1])return a;const P=b?_==="map"?this.transform.angle:0:_==="viewport"?-this.transform.angle:0;if(P){const V=Math.sin(P),W=Math.cos(P);g=[g[0]*W-g[1]*V,g[0]*V+g[1]*W]}const I=[b?g[0]:Zr(h,g[0],this.transform.zoom),b?g[1]:Zr(h,g[1],this.transform.zoom),0],L=new Float32Array(16);return s.J(L,a,I),L}saveTileTexture(a){const h=this._tileTextures[a.size[0]];h?h.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){const h=this._tileTextures[a];return h&&h.length>0?h.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;const h=this.imageManager.getPattern(a.from.toString()),g=this.imageManager.getPattern(a.to.toString());return!h||!g}useProgram(a,h){this.cache=this.cache||{};const g=a+(h?h.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[g]||(this.cache[g]=new Z(this.context,hs[a],h,$l[a],this._showOverdrawInspector,this.style.map.terrain)),this.cache[g]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new G(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:a,drawingBufferHeight:h}=this.context.gl;return this.width!==a||this.height!==h}}class Si{constructor(a,h){this.points=a,this.planes=h}static fromInvProjectionMatrix(a,h,g){const _=Math.pow(2,g),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{const L=1/(I=s.af([],I,a))[3]/h*_;return s.b1(I,I,[L,L,1/I[3],L])}),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{const L=function(oe,le){var ie=le[0],fe=le[1],Ae=le[2],Te=ie*ie+fe*fe+Ae*Ae;return Te>0&&(Te=1/Math.sqrt(Te)),oe[0]=le[0]*Te,oe[1]=le[1]*Te,oe[2]=le[2]*Te,oe}([],function(oe,le,ie){var fe=le[0],Ae=le[1],Te=le[2],ke=ie[0],Ie=ie[1],ze=ie[2];return oe[0]=Ae*ze-Te*Ie,oe[1]=Te*ke-fe*ze,oe[2]=fe*Ie-Ae*ke,oe}([],Q([],b[I[0]],b[I[1]]),Q([],b[I[2]],b[I[1]]))),V=-((W=L)[0]*(q=b[I[1]])[0]+W[1]*q[1]+W[2]*q[2]);var W,q;return L.concat(V)});return new Si(b,P)}}class qi{constructor(a,h){this.min=a,this.max=h,this.center=function(g,_,b){return g[0]=.5*_[0],g[1]=.5*_[1],g[2]=.5*_[2],g}([],function(g,_,b){return g[0]=_[0]+b[0],g[1]=_[1]+b[1],g[2]=_[2]+b[2],g}([],this.min,this.max))}quadrant(a){const h=[a%2==0,a<2],g=ne(this.min),_=ne(this.max);for(let b=0;b<h.length;b++)g[b]=h[b]?this.min[b]:this.center[b],_[b]=h[b]?this.center[b]:this.max[b];return _[2]=this.max[2],new qi(g,_)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersects(a){const h=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let g=!0;for(let _=0;_<a.planes.length;_++){const b=a.planes[_];let P=0;for(let I=0;I<h.length;I++)s.b2(b,h[I])>=0&&P++;if(P===0)return 0;P!==h.length&&(g=!1)}if(g)return 2;for(let _=0;_<3;_++){let b=Number.MAX_VALUE,P=-Number.MAX_VALUE;for(let I=0;I<a.points.length;I++){const L=a.points[I][_]-this.min[_];b=Math.min(b,L),P=Math.max(P,L)}if(P<0||b>this.max[_]-this.min[_])return 0}return 1}}class vi{constructor(a=0,h=0,g=0,_=0){if(isNaN(a)||a<0||isNaN(h)||h<0||isNaN(g)||g<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=h,this.left=g,this.right=_}interpolate(a,h,g){return h.top!=null&&a.top!=null&&(this.top=s.y.number(a.top,h.top,g)),h.bottom!=null&&a.bottom!=null&&(this.bottom=s.y.number(a.bottom,h.bottom,g)),h.left!=null&&a.left!=null&&(this.left=s.y.number(a.left,h.left,g)),h.right!=null&&a.right!=null&&(this.right=s.y.number(a.right,h.right,g)),this}getCenter(a,h){const g=s.ac((this.left+a-this.right)/2,0,a),_=s.ac((this.top+h-this.bottom)/2,0,h);return new s.P(g,_)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new vi(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Zo=85.051129;class $o{constructor(a,h,g,_,b){this.tileSize=512,this._renderWorldCopies=b===void 0||!!b,this._minZoom=a||0,this._maxZoom=h||22,this._minPitch=g??0,this._maxPitch=_??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new vi,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const a=new $o(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return a.apply(this),a}apply(a){this.tileSize=a.tileSize,this.latRange=a.latRange,this.lngRange=a.lngRange,this.width=a.width,this.height=a.height,this._center=a._center,this._elevation=a._elevation,this.minElevationForCurrentTile=a.minElevationForCurrentTile,this.zoom=a.zoom,this.angle=a.angle,this._fov=a._fov,this._pitch=a._pitch,this._unmodified=a._unmodified,this._edgeInsets=a._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(a){const h=-s.b3(a,-180,180)*Math.PI/180;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=function(){var g=new s.A(4);return s.A!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}(),function(g,_,b){var P=_[0],I=_[1],L=_[2],V=_[3],W=Math.sin(b),q=Math.cos(b);g[0]=P*q+L*W,g[1]=I*q+V*W,g[2]=P*-W+L*q,g[3]=I*-W+V*q}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(a){const h=s.ac(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=a/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(a){const h=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this.tileZoom=Math.max(0,Math.floor(h)),this.scale=this.zoomScale(h),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,h,g){this._unmodified=!1,this._edgeInsets.interpolate(a,h,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){const h=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(a){const h=[new s.b4(0,a)];if(this._renderWorldCopies){const g=this.pointCoordinate(new s.P(0,0)),_=this.pointCoordinate(new s.P(this.width,0)),b=this.pointCoordinate(new s.P(this.width,this.height)),P=this.pointCoordinate(new s.P(0,this.height)),I=Math.floor(Math.min(g.x,_.x,b.x,P.x)),L=Math.floor(Math.max(g.x,_.x,b.x,P.x)),V=1;for(let W=I-V;W<=L+V;W++)W!==0&&h.push(new s.b4(W,a))}return h}coveringTiles(a){var h,g;let _=this.coveringZoomLevel(a);const b=_;if(a.minzoom!==void 0&&_<a.minzoom)return[];a.maxzoom!==void 0&&_>a.maxzoom&&(_=a.maxzoom);const P=this.pointCoordinate(this.getCameraPoint()),I=s.Z.fromLngLat(this.center),L=Math.pow(2,_),V=[L*P.x,L*P.y,0],W=[L*I.x,L*I.y,0],q=Si.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,_);let oe=a.minzoom||0;!a.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(oe=_);const le=a.terrain?2/Math.min(this.tileSize,a.tileSize)*this.tileSize:3,ie=Ie=>({aabb:new qi([Ie*L,0,0],[(Ie+1)*L,L,0]),zoom:0,x:0,y:0,wrap:Ie,fullyVisible:!1}),fe=[],Ae=[],Te=_,ke=a.reparseOverscaled?b:_;if(this._renderWorldCopies)for(let Ie=1;Ie<=3;Ie++)fe.push(ie(-Ie)),fe.push(ie(Ie));for(fe.push(ie(0));fe.length>0;){const Ie=fe.pop(),ze=Ie.x,Je=Ie.y;let Ge=Ie.fullyVisible;if(!Ge){const Xt=Ie.aabb.intersects(q);if(Xt===0)continue;Ge=Xt===2}const Pt=a.terrain?V:W,Ft=Ie.aabb.distanceX(Pt),Ht=Ie.aabb.distanceY(Pt),Gt=Math.max(Math.abs(Ft),Math.abs(Ht));if(Ie.zoom===Te||Gt>le+(1<<Te-Ie.zoom)-2&&Ie.zoom>=oe){const Xt=Te-Ie.zoom,qt=V[0]-.5-(ze<<Xt),Yt=V[1]-.5-(Je<<Xt);Ae.push({tileID:new s.S(Ie.zoom===Te?ke:Ie.zoom,Ie.wrap,Ie.zoom,ze,Je),distanceSq:re([W[0]-.5-ze,W[1]-.5-Je]),tileDistanceToCamera:Math.sqrt(qt*qt+Yt*Yt)})}else for(let Xt=0;Xt<4;Xt++){const qt=(ze<<1)+Xt%2,Yt=(Je<<1)+(Xt>>1),Ir=Ie.zoom+1;let ir=Ie.aabb.quadrant(Xt);if(a.terrain){const or=new s.S(Ir,Ie.wrap,Ir,qt,Yt),Nr=a.terrain.getMinMaxElevation(or),Qr=(h=Nr.minElevation)!==null&&h!==void 0?h:this.elevation,Wr=(g=Nr.maxElevation)!==null&&g!==void 0?g:this.elevation;ir=new qi([ir.min[0],ir.min[1],Qr],[ir.max[0],ir.max[1],Wr])}fe.push({aabb:ir,zoom:Ir,x:qt,y:Yt,wrap:Ie.wrap,fullyVisible:Ge})}}return Ae.sort((Ie,ze)=>Ie.distanceSq-ze.distanceSq).map(Ie=>Ie.tileID)}resize(a,h){this.width=a,this.height=h,this.pixelsToGLUnits=[2/a,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){const h=s.ac(a.lat,-85.051129,Zo);return new s.P(s.O(a.lng)*this.worldSize,s.Q(h)*this.worldSize)}unproject(a){return new s.Z(a.x/this.worldSize,a.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(a){const h=this.elevation,g=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,_=this.pointLocation(this.centerPoint,a),b=a.getElevationForLngLatZoom(_,this.tileZoom);if(!(this.elevation-b))return;const P=g+h-b,I=Math.cos(this._pitch)*this.cameraToCenterDistance/P/s.b5(1,_.lat),L=this.scaleZoom(I/this.tileSize);this._elevation=b,this._center=_,this.zoom=L}setLocationAtPoint(a,h){const g=this.pointCoordinate(h),_=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(a),P=new s.Z(b.x-(g.x-_.x),b.y-(g.y-_.y));this.center=this.coordinateLocation(P),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(a,h){return h?this.coordinatePoint(this.locationCoordinate(a),h.getElevationForLngLatZoom(a,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(a))}pointLocation(a,h){return this.coordinateLocation(this.pointCoordinate(a,h))}locationCoordinate(a){return s.Z.fromLngLat(a)}coordinateLocation(a){return a&&a.toLngLat()}pointCoordinate(a,h){if(h){const oe=h.pointCoordinate(a);if(oe!=null)return oe}const g=[a.x,a.y,0,1],_=[a.x,a.y,1,1];s.af(g,g,this.pixelMatrixInverse),s.af(_,_,this.pixelMatrixInverse);const b=g[3],P=_[3],I=g[1]/b,L=_[1]/P,V=g[2]/b,W=_[2]/P,q=V===W?0:(0-V)/(W-V);return new s.Z(s.y.number(g[0]/b,_[0]/P,q)/this.worldSize,s.y.number(I,L,q)/this.worldSize)}coordinatePoint(a,h=0,g=this.pixelMatrix){const _=[a.x*this.worldSize,a.y*this.worldSize,h,1];return s.af(_,_,g),new s.P(_[0]/_[3],_[1]/_[3])}getBounds(){const a=Math.max(0,this.height/2-this.getHorizon());return new pe().extend(this.pointLocation(new s.P(0,a))).extend(this.pointLocation(new s.P(this.width,a))).extend(this.pointLocation(new s.P(this.width,this.height))).extend(this.pointLocation(new s.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new pe([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(a){a?(this.lngRange=[a.getWest(),a.getEast()],this.latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Zo])}calculateTileMatrix(a){const h=a.canonical,g=this.worldSize/this.zoomScale(h.z),_=h.x+Math.pow(2,h.z)*a.wrap,b=s.an(new Float64Array(16));return s.J(b,b,[_*g,h.y*g,0]),s.K(b,b,[g/s.X,g/s.X,1]),b}calculatePosMatrix(a,h=!1){const g=a.key,_=h?this._alignedPosMatrixCache:this._posMatrixCache;if(_[g])return _[g];const b=this.calculateTileMatrix(a);return s.L(b,h?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,b),_[g]=new Float32Array(b),_[g]}calculateFogMatrix(a){const h=a.key,g=this._fogMatrixCache;if(g[h])return g[h];const _=this.calculateTileMatrix(a);return s.L(_,this.fogMatrix,_),g[h]=new Float32Array(_),g[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(a,h){h=s.ac(+h,this.minZoom,this.maxZoom);const g={center:new s.N(a.lng,a.lat),zoom:h};let _=this.lngRange;if(!this._renderWorldCopies&&_===null){const Ie=179.9999999999;_=[-Ie,Ie]}const b=this.tileSize*this.zoomScale(g.zoom);let P=0,I=b,L=0,V=b,W=0,q=0;const{x:oe,y:le}=this.size;if(this.latRange){const Ie=this.latRange;P=s.Q(Ie[1])*b,I=s.Q(Ie[0])*b,I-P<le&&(W=le/(I-P))}_&&(L=s.b3(s.O(_[0])*b,0,b),V=s.b3(s.O(_[1])*b,0,b),V<L&&(V+=b),V-L<oe&&(q=oe/(V-L)));const{x:ie,y:fe}=this.project.call({worldSize:b},a);let Ae,Te;const ke=Math.max(q||0,W||0);if(ke){const Ie=new s.P(q?(V+L)/2:ie,W?(I+P)/2:fe);return g.center=this.unproject.call({worldSize:b},Ie).wrap(),g.zoom+=this.scaleZoom(ke),g}if(this.latRange){const Ie=le/2;fe-Ie<P&&(Te=P+Ie),fe+Ie>I&&(Te=I-Ie)}if(_){const Ie=(L+V)/2;let ze=ie;this._renderWorldCopies&&(ze=s.b3(ie,Ie-b/2,Ie+b/2));const Je=oe/2;ze-Je<L&&(Ae=L+Je),ze+Je>V&&(Ae=V-Je)}if(Ae!==void 0||Te!==void 0){const Ie=new s.P(Ae??ie,Te??fe);g.center=this.unproject.call({worldSize:b},Ie).wrap()}return g}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const a=this._unmodified,{center:h,zoom:g}=this.getConstrained(this.center,this.zoom);this.center=h,this.zoom=g,this._unmodified=a,this._constraining=!1}_calcMatrices(){if(!this.height)return;const a=this.centerOffset,h=this.point.x,g=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=s.b5(1,this.center.lat)*this.worldSize;let _=s.an(new Float64Array(16));s.K(_,_,[this.width/2,-this.height/2,1]),s.J(_,_,[1,-1,0]),this.labelPlaneMatrix=_,_=s.an(new Float64Array(16)),s.K(_,_,[1,-1,1]),s.J(_,_,[-1,-1,0]),s.K(_,_,[2/this.width,2/this.height,1]),this.glCoordMatrix=_;const b=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),P=Math.min(this.elevation,this.minElevationForCurrentTile),I=b-P*this._pixelPerMeter/Math.cos(this._pitch),L=P<0?I:b,V=Math.PI/2+this._pitch,W=this._fov*(.5+a.y/this.height),q=Math.sin(W)*L/Math.sin(s.ac(Math.PI-V-W,.01,Math.PI-.01)),oe=this.getHorizon(),le=2*Math.atan(oe/this.cameraToCenterDistance)*(.5+a.y/(2*oe)),ie=Math.sin(le)*L/Math.sin(s.ac(Math.PI-V-le,.01,Math.PI-.01)),fe=Math.min(q,ie);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*fe+L),this.nearZ=this.height/50,_=new Float64Array(16),s.b6(_,this._fov,this.width/this.height,this.nearZ,this.farZ),_[8]=2*-a.x/this.width,_[9]=2*a.y/this.height,this.projectionMatrix=s.ae(_),s.K(_,_,[1,-1,1]),s.J(_,_,[0,0,-this.cameraToCenterDistance]),s.b7(_,_,this._pitch),s.ad(_,_,this.angle),s.J(_,_,[-h,-g,0]),this.mercatorMatrix=s.K([],_,[this.worldSize,this.worldSize,this.worldSize]),s.K(_,_,[1,1,this._pixelPerMeter]),this.pixelMatrix=s.L(new Float64Array(16),this.labelPlaneMatrix,_),s.J(_,_,[0,0,-this.elevation]),this.modelViewProjectionMatrix=_,this.invModelViewProjectionMatrix=s.as([],_),this.fogMatrix=new Float64Array(16),s.b6(this.fogMatrix,this._fov,this.width/this.height,b,this.farZ),this.fogMatrix[8]=2*-a.x/this.width,this.fogMatrix[9]=2*a.y/this.height,s.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),s.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),s.b7(this.fogMatrix,this.fogMatrix,this._pitch),s.ad(this.fogMatrix,this.fogMatrix,this.angle),s.J(this.fogMatrix,this.fogMatrix,[-h,-g,0]),s.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),s.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=s.L(new Float64Array(16),this.labelPlaneMatrix,_);const Ae=this.width%2/2,Te=this.height%2/2,ke=Math.cos(this.angle),Ie=Math.sin(this.angle),ze=h-Math.round(h)+ke*Ae+Ie*Te,Je=g-Math.round(g)+ke*Te+Ie*Ae,Ge=new Float64Array(_);if(s.J(Ge,Ge,[ze>.5?ze-1:ze,Je>.5?Je-1:Je,0]),this.alignedModelViewProjectionMatrix=Ge,_=s.as(new Float64Array(16),this.pixelMatrix),!_)throw new Error("failed to invert matrix");this.pixelMatrixInverse=_,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const a=this.pointCoordinate(new s.P(0,0)),h=[a.x*this.worldSize,a.y*this.worldSize,0,1];return s.af(h,h,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(0,a))}getCameraQueryGeometry(a){const h=this.getCameraPoint();if(a.length===1)return[a[0],h];{let g=h.x,_=h.y,b=h.x,P=h.y;for(const I of a)g=Math.min(g,I.x),_=Math.min(_,I.y),b=Math.max(b,I.x),P=Math.max(P,I.y);return[new s.P(g,_),new s.P(b,_),new s.P(b,P),new s.P(g,P),new s.P(g,_)]}}lngLatToCameraDepth(a,h){const g=this.locationCoordinate(a),_=[g.x*this.worldSize,g.y*this.worldSize,h,1];return s.af(_,_,this.modelViewProjectionMatrix),_[2]/_[3]}}function ds(y,a){let h,g=!1,_=null,b=null;const P=()=>{_=null,g&&(y.apply(b,h),_=setTimeout(P,a),g=!1)};return(...I)=>(g=!0,b=this,h=I,_||P(),_)}class Ws{constructor(a){this._getCurrentHash=()=>{const h=window.location.hash.replace("#","");if(this._hashName){let g;return h.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(g=_)}),(g&&g[1]||"").split("/")}return h.split("/")},this._onHashChange=()=>{const h=this._getCurrentHash();if(h.length>=3&&!h.some(g=>isNaN(g))){const g=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(h[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:g,pitch:+(h[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const h=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,h)},this._removeHash=()=>{const h=this._getCurrentHash();if(h.length===0)return;const g=h.join("/");let _=g;_.split("&").length>0&&(_=_.split("&")[0]),this._hashName&&(_=`${this._hashName}=${g}`);let b=window.location.hash.replace(_,"");b.startsWith("#&")?b=b.slice(0,1)+b.slice(2):b==="#"&&(b="");let P=window.location.href.replace(/(#.+)?$/,b);P=P.replace("&&","&"),window.history.replaceState(window.history.state,null,P)},this._updateHash=ds(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(a){const h=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,_=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,_),P=Math.round(h.lng*b)/b,I=Math.round(h.lat*b)/b,L=this._map.getBearing(),V=this._map.getPitch();let W="";if(W+=a?`/${P}/${I}/${g}`:`${g}/${I}/${P}`,(L||V)&&(W+="/"+Math.round(10*L)/10),V&&(W+=`/${Math.round(V)}`),this._hashName){const q=this._hashName;let oe=!1;const le=window.location.hash.slice(1).split("&").map(ie=>{const fe=ie.split("=")[0];return fe===q?(oe=!0,`${fe}=${W}`):ie}).filter(ie=>ie);return oe||le.push(`${q}=${W}`),`#${le.join("&")}`}return`#${W}`}}const yo={linearity:.3,easing:s.b8(0,0,.3,1)},ia=s.e({deceleration:2500,maxSpeed:1400},yo),bi=s.e({deceleration:20,maxSpeed:1400},yo),ui=s.e({deceleration:1e3,maxSpeed:360},yo),rn=s.e({deceleration:1e3,maxSpeed:90},yo);class on{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:x.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,h=x.now();for(;a.length>0&&h-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const h={zoom:0,bearing:0,pitch:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)h.zoom+=b.zoomDelta||0,h.bearing+=b.bearingDelta||0,h.pitch+=b.pitchDelta||0,b.panDelta&&h.pan._add(b.panDelta),b.around&&(h.around=b.around),b.pinchAround&&(h.pinchAround=b.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(h.pan.mag()){const b=_o(h.pan.mag(),g,s.e({},ia,a||{}));_.offset=h.pan.mult(b.amount/h.pan.mag()),_.center=this._map.transform.center,Jo(_,b)}if(h.zoom){const b=_o(h.zoom,g,bi);_.zoom=this._map.transform.zoom+b.amount,Jo(_,b)}if(h.bearing){const b=_o(h.bearing,g,ui);_.bearing=this._map.transform.bearing+s.ac(b.amount,-179,179),Jo(_,b)}if(h.pitch){const b=_o(h.pitch,g,rn);_.pitch=this._map.transform.pitch+b.amount,Jo(_,b)}if(_.zoom||_.bearing){const b=h.pinchAround===void 0?h.around:h.pinchAround;_.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),s.e(_,{noMoveStart:!0})}}function Jo(y,a){(!y.duration||y.duration<a.duration)&&(y.duration=a.duration,y.easing=a.easing)}function _o(y,a,h){const{maxSpeed:g,linearity:_,deceleration:b}=h,P=s.ac(y*_/(a/1e3),-g,g),I=Math.abs(P)/(b*_);return{easing:h.easing,duration:1e3*I,amount:P*(I/2)}}class Oi extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,h,g,_={}){const b=S.mousePos(h.getCanvas(),g),P=h.unproject(b);super(a,s.e({point:b,lngLat:P,originalEvent:g},_)),this._defaultPrevented=!1,this.target=h}}class eo extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,h,g){const _=a==="touchend"?g.changedTouches:g.touches,b=S.touchPos(h.getCanvasContainer(),_),P=b.map(L=>h.unproject(L)),I=b.reduce((L,V,W,q)=>L.add(V.div(q.length)),new s.P(0,0));super(a,{points:b,point:I,lngLats:P,lngLat:h.unproject(I),originalEvent:g}),this._defaultPrevented=!1}}class wa extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,h,g){super(a,{originalEvent:g}),this._defaultPrevented=!1}}class Ya{constructor(a,h){this._map=a,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new wa(a.type,this._map,a))}mousedown(a,h){return this._mousedownPos=h,this._firePreventable(new Oi(a.type,this._map,a))}mouseup(a){this._map.fire(new Oi(a.type,this._map,a))}click(a,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new Oi(a.type,this._map,a))}dblclick(a){return this._firePreventable(new Oi(a.type,this._map,a))}mouseover(a){this._map.fire(new Oi(a.type,this._map,a))}mouseout(a){this._map.fire(new Oi(a.type,this._map,a))}touchstart(a){return this._firePreventable(new eo(a.type,this._map,a))}touchmove(a){this._map.fire(new eo(a.type,this._map,a))}touchend(a){this._map.fire(new eo(a.type,this._map,a))}touchcancel(a){this._map.fire(new eo(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class hi{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new Oi(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Oi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new Oi(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ps{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.pointLocation(s.P.convert(a),this._map.terrain)}}class vo{constructor(a,h){this._map=a,this._tr=new ps(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,h){this.isEnabled()&&a.shiftKey&&a.button===0&&(S.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(a,h){if(!this._active)return;const g=h;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;const _=this._startPos;this._lastPos=g,this._box||(this._box=S.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));const b=Math.min(_.x,g.x),P=Math.max(_.x,g.x),I=Math.min(_.y,g.y),L=Math.max(_.y,g.y);S.setTransform(this._box,`translate(${b}px,${I}px)`),this._box.style.width=P-b+"px",this._box.style.height=L-I+"px"}mouseupWindow(a,h){if(!this._active||a.button!==0)return;const g=this._startPos,_=h;if(this.reset(),S.suppressClick(),g.x!==_.x||g.y!==_.y)return this._map.fire(new s.k("boxzoomend",{originalEvent:a})),{cameraAnimation:b=>b.fitScreenCoordinates(g,_,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(S.remove(this._box),this._box=null),S.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,h){return this._map.fire(new s.k(a,{originalEvent:h}))}}function oa(y,a){if(y.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${a.length}`);const h={};for(let g=0;g<y.length;g++)h[y[g].identifier]=a[g];return h}class nu{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,h,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=a.timeStamp),g.length===this.numTouches&&(this.centroid=function(_){const b=new s.P(0,0);for(const P of _)b._add(P);return b.div(_.length)}(h),this.touches=oa(g,h)))}touchmove(a,h,g){if(this.aborted||!this.centroid)return;const _=oa(g,h);for(const b in this.touches){const P=_[b];(!P||P.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(a,h,g){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class Za{constructor(a){this.singleTap=new nu(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,h,g){this.singleTap.touchstart(a,h,g)}touchmove(a,h,g){this.singleTap.touchmove(a,h,g)}touchend(a,h,g){const _=this.singleTap.touchend(a,h,g);if(_){const b=a.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(_)<30;if(b&&P||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class lo{constructor(a){this._tr=new ps(a),this._zoomIn=new Za({numTouches:1,numTaps:2}),this._zoomOut=new Za({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,h,g){this._zoomIn.touchstart(a,h,g),this._zoomOut.touchstart(a,h,g)}touchmove(a,h,g){this._zoomIn.touchmove(a,h,g),this._zoomOut.touchmove(a,h,g)}touchend(a,h,g){const _=this._zoomIn.touchend(a,h,g),b=this._zoomOut.touchend(a,h,g),P=this._tr;return _?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:P.zoom+1,around:P.unproject(_)},{originalEvent:a})}):b?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:P.zoom-1,around:P.unproject(b)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ni{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){const h=this._moveFunction(...a);if(h.bearingDelta||h.pitchDelta||h.around||h.panDelta)return this._active=!0,h}dragStart(a,h){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=h.length?h[0]:h,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,h){if(!this.isEnabled())return;const g=this._lastPoint;if(!g)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);const _=h.length?h[0]:h;return!this._moved&&_.dist(g)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=_,this._move(g,_))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&S.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const wl={0:1,2:2};class Kl{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){const h=S.mouseButton(a);this._eventButton=h}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!function(h,g){const _=wl[g];return h.buttons===void 0||(h.buttons&_)!==_}(a,this._eventButton)}isValidEndEvent(a){return S.mouseButton(a)===this._eventButton}}class Ec{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return a.targetTouches.length===1}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}const Ja=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=a=>{a.preventDefault()}},Sh=({enable:y,clickTolerance:a,bearingDegreesPerPixelMoved:h=.8})=>{const g=new Kl({checkCorrectEvent:_=>S.mouseButton(_)===0&&_.ctrlKey||S.mouseButton(_)===2});return new Ni({clickTolerance:a,move:(_,b)=>({bearingDelta:(b.x-_.x)*h}),moveStateManager:g,enable:y,assignEvents:Ja})},Cf=({enable:y,clickTolerance:a,pitchDegreesPerPixelMoved:h=-.5})=>{const g=new Kl({checkCorrectEvent:_=>S.mouseButton(_)===0&&_.ctrlKey||S.mouseButton(_)===2});return new Ni({clickTolerance:a,move:(_,b)=>({pitchDelta:(b.y-_.y)*h}),moveStateManager:g,enable:y,assignEvents:Ja})};class iu{constructor(a,h){this._clickTolerance=a.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(a){return a<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(a,h,g){return this._calculateTransform(a,h,g)}touchmove(a,h,g){if(this._active){if(!this._shouldBePrevented(g.length))return a.preventDefault(),this._calculateTransform(a,h,g);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",a)}}touchend(a,h,g){this._calculateTransform(a,h,g),this._active&&this._shouldBePrevented(g.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,h,g){g.length>0&&(this._active=!0);const _=oa(g,h),b=new s.P(0,0),P=new s.P(0,0);let I=0;for(const V in _){const W=_[V],q=this._touches[V];q&&(b._add(W),P._add(W.sub(q)),I++,_[V]=W)}if(this._touches=_,this._shouldBePrevented(I)||!P.mag())return;const L=P.div(I);return this._sum._add(L),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(I),panDelta:L}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ah{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,h,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([h[0],h[1]]))}touchmove(a,h,g){if(!this._firstTwoTouches)return;a.preventDefault();const[_,b]=this._firstTwoTouches,P=Uu(g,h,_),I=Uu(g,h,b);if(!P||!I)return;const L=this._aroundCenter?null:P.add(I).div(2);return this._move([P,I],L,a)}touchend(a,h,g){if(!this._firstTwoTouches)return;const[_,b]=this._firstTwoTouches,P=Uu(g,h,_),I=Uu(g,h,b);P&&I||(this._active&&S.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Uu(y,a,h){for(let g=0;g<y.length;g++)if(y[g].identifier===h)return a[g]}function Eh(y,a){return Math.log(y/a)/Math.LN2}class Pf extends Ah{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,h){const g=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Eh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Eh(this._distance,g),pinchAround:h}}}function Hp(y,a){return 180*y.angleWith(a)/Math.PI}class qp extends Ah{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,h,g){const _=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Hp(this._vector,_),pinchAround:h}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const h=25/(Math.PI*this._minDiameter)*360,g=Hp(a,this._startVector);return Math.abs(g)<h}}function If(y){return Math.abs(y.y)>Math.abs(y.x)}class Th extends Ah{constructor(a){super(),this._currentTouchCount=0,this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,h,g){super.touchstart(a,h,g),this._currentTouchCount=g.length}_start(a){this._lastPoints=a,If(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,h,g){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const _=a[0].sub(this._lastPoints[0]),b=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(_,b,g.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(_.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(a,h,g){if(this._valid!==void 0)return this._valid;const _=a.mag()>=2,b=h.mag()>=2;if(!_&&!b)return;if(!_||!b)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;const P=a.y>0==h.y>0;return If(a)&&If(h)&&P}}const km={panStep:100,bearingStep:15,pitchStep:10};class Qa{constructor(a){this._tr=new ps(a);const h=km;this._panStep=h.panStep,this._bearingStep=h.bearingStep,this._pitchStep=h.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let h=0,g=0,_=0,b=0,P=0;switch(a.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:a.shiftKey?g=-1:(a.preventDefault(),b=-1);break;case 39:a.shiftKey?g=1:(a.preventDefault(),b=1);break;case 38:a.shiftKey?_=1:(a.preventDefault(),P=-1);break;case 40:a.shiftKey?_=-1:(a.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(g=0,_=0),{cameraAnimation:I=>{const L=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:Gl,zoom:h?Math.round(L.zoom)+h*(a.shiftKey?2:1):L.zoom,bearing:L.bearing+g*this._bearingStep,pitch:L.pitch+_*this._pitchStep,offset:[-b*this._panStep,-P*this._panStep],center:L.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Gl(y){return y*(2-y)}const Wp=4.000244140625;class Sa{constructor(a,h){this._onTimeout=g=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(g)},this._map=a,this._tr=new ps(a),this._triggerRenderFrame=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(a){return!!this._map.cooperativeGestures.isEnabled()&&!(a.ctrlKey||this._map.cooperativeGestures.isBypassed(a))}wheel(a){if(!this.isEnabled())return;if(this._shouldBePrevented(a))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",a);let h=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const g=x.now(),_=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,h!==0&&h%Wp==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(_*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),a.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=a,this._delta-=h,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=S.mousePos(this._map.getCanvas(),a),g=this._tr;this._around=h.y>g.transform.height/2-g.transform.getHorizon()?s.N.convert(this._aroundCenter?g.center:g.unproject(h)):s.N.convert(g.center),this._aroundPoint=g.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._tr.transform;if(this._delta!==0){const L=this._type==="wheel"&&Math.abs(this._delta)>Wp?this._wheelZoomRate:this._defaultZoomRate;let V=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&V!==0&&(V=1/V);const W=typeof this._targetZoom=="number"?a.zoomScale(this._targetZoom):a.scale;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(W*V))),this._type==="wheel"&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const h=typeof this._targetZoom=="number"?this._targetZoom:a.zoom,g=this._startZoom,_=this._easing;let b,P=!1;const I=x.now()-this._lastWheelEventTime;if(this._type==="wheel"&&g&&_&&I){const L=Math.min(I/200,1),V=_(L);b=s.y.number(g,h,V),L<1?this._frameId||(this._frameId=!0):P=!0}else b=h,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:b-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let h=s.b9;if(this._prevEase){const g=this._prevEase,_=(x.now()-g.start)/g.duration,b=g.easing(_+.01)-g.easing(_),P=.27/Math.sqrt(b*b+1e-4)*.01,I=Math.sqrt(.0729-P*P);h=s.b8(P,I,.25,1)}return this._prevEase={start:x.now(),duration:a,easing:h},h}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Tc{constructor(a,h){this._clickZoom=a,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Rf{constructor(a){this._tr=new ps(a),this.reset()}reset(){this._active=!1}dblclick(a,h){return a.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:this._tr.zoom+(a.shiftKey?-1:1),around:this._tr.unproject(h)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class X_{constructor(){this._tap=new Za({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,h,g){if(!this._swipePoint)if(this._tapTime){const _=h[0],b=a.timeStamp-this._tapTime<500,P=this._tapPoint.dist(_)<30;b&&P?g.length>0&&(this._swipePoint=_,this._swipeTouch=g[0].identifier):this.reset()}else this._tap.touchstart(a,h,g)}touchmove(a,h,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const _=h[0],b=_.y-this._swipePoint.y;return this._swipePoint=_,a.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(a,h,g)}touchend(a,h,g){if(this._tapTime)this._swipePoint&&g.length===0&&this.reset();else{const _=this._tap.touchend(a,h,g);_&&(this._tapTime=a.timeStamp,this._tapPoint=_)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Mm{constructor(a,h,g){this._el=a,this._mousePan=h,this._touchPan=g}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Xp{constructor(a,h,g){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=h,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Kp{constructor(a,h,g,_){this._el=a,this._touchZoom=h,this._touchRotate=g,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Ch{constructor(a,h){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=a,this._options=h,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const a=this._map.getCanvasContainer();a.classList.add("maplibregl-cooperative-gestures"),this._container=S.create("div","maplibregl-cooperative-gesture-screen",a);let h=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(h=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const g=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),_=document.createElement("div");_.className="maplibregl-desktop-message",_.textContent=h,this._container.appendChild(_);const b=document.createElement("div");b.className="maplibregl-mobile-message",b.textContent=g,this._container.appendChild(b),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(S.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(a){return a[this._bypassKey]}notifyGestureBlocked(a,h){this._enabled&&(this._map.fire(new s.k("cooperativegestureprevented",{gestureType:a,originalEvent:h})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const el=y=>y.zoom||y.drag||y.pitch||y.rotate;class Sr extends s.k{}function Sl(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class Aa{constructor(a,h){this.handleWindowEvent=_=>{this.handleEvent(_,`${_.type}Window`)},this.handleEvent=(_,b)=>{if(_.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const P=_.type==="renderFrame"?void 0:_,I={needsRenderFrame:!1},L={},V={},W=_.touches,q=W?this._getMapTouches(W):void 0,oe=q?S.touchPos(this._map.getCanvas(),q):S.mousePos(this._map.getCanvas(),_);for(const{handlerName:fe,handler:Ae,allowed:Te}of this._handlers){if(!Ae.isEnabled())continue;let ke;this._blockedByActive(V,Te,fe)?Ae.reset():Ae[b||_.type]&&(ke=Ae[b||_.type](_,oe,q),this.mergeHandlerResult(I,L,ke,fe,P),ke&&ke.needsRenderFrame&&this._triggerRenderFrame()),(ke||Ae.isActive())&&(V[fe]=Ae)}const le={};for(const fe in this._previousActiveHandlers)V[fe]||(le[fe]=P);this._previousActiveHandlers=V,(Object.keys(le).length||Sl(I))&&(this._changes.push([I,L,le]),this._triggerRenderFrame()),(Object.keys(V).length||Sl(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ie}=I;ie&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ie(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new on(a),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(const[_,b,P]of this._listeners)S.addEventListener(_,b,_===document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[a,h,g]of this._listeners)S.removeEventListener(a,h,a===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(a){const h=this._map,g=h.getCanvasContainer();this._add("mapEvent",new Ya(h,a));const _=h.boxZoom=new vo(h,a);this._add("boxZoom",_),a.interactive&&a.boxZoom&&_.enable();const b=h.cooperativeGestures=new Ch(h,a.cooperativeGestures);this._add("cooperativeGestures",b),a.cooperativeGestures&&b.enable();const P=new lo(h),I=new Rf(h);h.doubleClickZoom=new Tc(I,P),this._add("tapZoom",P),this._add("clickZoom",I),a.interactive&&a.doubleClickZoom&&h.doubleClickZoom.enable();const L=new X_;this._add("tapDragZoom",L);const V=h.touchPitch=new Th(h);this._add("touchPitch",V),a.interactive&&a.touchPitch&&h.touchPitch.enable(a.touchPitch);const W=Sh(a),q=Cf(a);h.dragRotate=new Xp(a,W,q),this._add("mouseRotate",W,["mousePitch"]),this._add("mousePitch",q,["mouseRotate"]),a.interactive&&a.dragRotate&&h.dragRotate.enable();const oe=(({enable:ke,clickTolerance:Ie})=>{const ze=new Kl({checkCorrectEvent:Je=>S.mouseButton(Je)===0&&!Je.ctrlKey});return new Ni({clickTolerance:Ie,move:(Je,Ge)=>({around:Ge,panDelta:Ge.sub(Je)}),activateOnStart:!0,moveStateManager:ze,enable:ke,assignEvents:Ja})})(a),le=new iu(a,h);h.dragPan=new Mm(g,oe,le),this._add("mousePan",oe),this._add("touchPan",le,["touchZoom","touchRotate"]),a.interactive&&a.dragPan&&h.dragPan.enable(a.dragPan);const ie=new qp,fe=new Pf;h.touchZoomRotate=new Kp(g,fe,ie,L),this._add("touchRotate",ie,["touchPan","touchZoom"]),this._add("touchZoom",fe,["touchPan","touchRotate"]),a.interactive&&a.touchZoomRotate&&h.touchZoomRotate.enable(a.touchZoomRotate);const Ae=h.scrollZoom=new Sa(h,()=>this._triggerRenderFrame());this._add("scrollZoom",Ae,["mousePan"]),a.interactive&&a.scrollZoom&&h.scrollZoom.enable(a.scrollZoom);const Te=h.keyboard=new Qa(h);this._add("keyboard",Te),a.interactive&&a.keyboard&&h.keyboard.enable(),this._add("blockableMapEvent",new hi(h))}_add(a,h,g){this._handlers.push({handlerName:a,handler:h,allowed:g}),this._handlersById[a]=h}stop(a){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!el(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,h,g){for(const _ in a)if(_!==g&&(!h||h.indexOf(_)<0))return!0;return!1}_getMapTouches(a){const h=[];for(const g of a)this._el.contains(g.target)&&h.push(g);return h}mergeHandlerResult(a,h,g,_,b){if(!g)return;s.e(a,g);const P={handlerName:_,originalEvent:g.originalEvent||b};g.zoomDelta!==void 0&&(h.zoom=P),g.panDelta!==void 0&&(h.drag=P),g.pitchDelta!==void 0&&(h.pitch=P),g.bearingDelta!==void 0&&(h.rotate=P)}_applyChanges(){const a={},h={},g={};for(const[_,b,P]of this._changes)_.panDelta&&(a.panDelta=(a.panDelta||new s.P(0,0))._add(_.panDelta)),_.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+_.pitchDelta),_.around!==void 0&&(a.around=_.around),_.pinchAround!==void 0&&(a.pinchAround=_.pinchAround),_.noInertia&&(a.noInertia=_.noInertia),s.e(h,b),s.e(g,P);this._updateMapTransform(a,h,g),this._changes=[]}_updateMapTransform(a,h,g){const _=this._map,b=_._getTransformForUpdate(),P=_.terrain;if(!(Sl(a)||P&&this._terrainMovement))return this._fireEvents(h,g,!0);let{panDelta:I,zoomDelta:L,bearingDelta:V,pitchDelta:W,around:q,pinchAround:oe}=a;oe!==void 0&&(q=oe),_._stop(!0),q=q||_.transform.centerPoint;const le=b.pointLocation(I?q.sub(I):q);V&&(b.bearing+=V),W&&(b.pitch+=W),L&&(b.zoom+=L),P?this._terrainMovement||!h.drag&&!h.zoom?h.drag&&this._terrainMovement?b.center=b.pointLocation(b.centerPoint.sub(I)):b.setLocationAtPoint(le,q):(this._terrainMovement=!0,this._map._elevationFreeze=!0,b.setLocationAtPoint(le,q)):b.setLocationAtPoint(le,q),_._applyUpdatedTransform(b),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(h,g,!0)}_fireEvents(a,h,g){const _=el(this._eventsInProgress),b=el(a),P={};for(const q in a){const{originalEvent:oe}=a[q];this._eventsInProgress[q]||(P[`${q}start`]=oe),this._eventsInProgress[q]=a[q]}!_&&b&&this._fireEvent("movestart",b.originalEvent);for(const q in P)this._fireEvent(q,P[q]);b&&this._fireEvent("move",b.originalEvent);for(const q in a){const{originalEvent:oe}=a[q];this._fireEvent(q,oe)}const I={};let L;for(const q in this._eventsInProgress){const{handlerName:oe,originalEvent:le}=this._eventsInProgress[q];this._handlersById[oe].isActive()||(delete this._eventsInProgress[q],L=h[oe]||le,I[`${q}end`]=L)}for(const q in I)this._fireEvent(q,I[q]);const V=el(this._eventsInProgress),W=(_||b)&&!V;if(W&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const q=this._map._getTransformForUpdate();q.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(q)}if(g&&W){this._updatingCamera=!0;const q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),oe=le=>le!==0&&-this._bearingSnap<le&&le<this._bearingSnap;!q||!q.essential&&x.prefersReducedMotion?(this._map.fire(new s.k("moveend",{originalEvent:L})),oe(this._map.getBearing())&&this._map.resetNorth()):(oe(q.bearing||this._map.getBearing())&&(q.bearing=0),q.freezeElevation=!0,this._map.easeTo(q,{originalEvent:L})),this._updatingCamera=!1}}_fireEvent(a,h){this._map.fire(new s.k(a,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{delete this._frameId,this.handleEvent(new Sr("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Yl extends s.E{constructor(a,h){super(),this._renderFrameCallback=()=>{const g=Math.min((x.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(g)),g<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=h.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new s.N(this.transform.center.lng,this.transform.center.lat)}setCenter(a,h){return this.jumpTo({center:a},h)}panBy(a,h,g){return a=s.P.convert(a).mult(-1),this.panTo(this.transform.center,s.e({offset:a},h),g)}panTo(a,h,g){return this.easeTo(s.e({center:a},h),g)}getZoom(){return this.transform.zoom}setZoom(a,h){return this.jumpTo({zoom:a},h),this}zoomTo(a,h,g){return this.easeTo(s.e({zoom:a},h),g)}zoomIn(a,h){return this.zoomTo(this.getZoom()+1,a,h),this}zoomOut(a,h){return this.zoomTo(this.getZoom()-1,a,h),this}getBearing(){return this.transform.bearing}setBearing(a,h){return this.jumpTo({bearing:a},h),this}getPadding(){return this.transform.padding}setPadding(a,h){return this.jumpTo({padding:a},h),this}rotateTo(a,h,g){return this.easeTo(s.e({bearing:a},h),g)}resetNorth(a,h){return this.rotateTo(0,s.e({duration:1e3},a),h),this}resetNorthPitch(a,h){return this.easeTo(s.e({bearing:0,pitch:0,duration:1e3},a),h),this}snapToNorth(a,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,h):this}getPitch(){return this.transform.pitch}setPitch(a,h){return this.jumpTo({pitch:a},h),this}cameraForBounds(a,h){a=pe.convert(a).adjustAntiMeridian();const g=h&&h.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),g,h)}_cameraForBoxAndBearing(a,h,g,_){const b={top:0,bottom:0,right:0,left:0};if(typeof(_=s.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){const Xt=_.padding;_.padding={top:Xt,bottom:Xt,right:Xt,left:Xt}}_.padding=s.e(b,_.padding);const P=this.transform,I=P.padding,L=new pe(a,h),V=P.project(L.getNorthWest()),W=P.project(L.getNorthEast()),q=P.project(L.getSouthEast()),oe=P.project(L.getSouthWest()),le=s.ba(-g),ie=V.rotate(le),fe=W.rotate(le),Ae=q.rotate(le),Te=oe.rotate(le),ke=new s.P(Math.max(ie.x,fe.x,Te.x,Ae.x),Math.max(ie.y,fe.y,Te.y,Ae.y)),Ie=new s.P(Math.min(ie.x,fe.x,Te.x,Ae.x),Math.min(ie.y,fe.y,Te.y,Ae.y)),ze=ke.sub(Ie),Je=(P.width-(I.left+I.right+_.padding.left+_.padding.right))/ze.x,Ge=(P.height-(I.top+I.bottom+_.padding.top+_.padding.bottom))/ze.y;if(Ge<0||Je<0)return void s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Pt=Math.min(P.scaleZoom(P.scale*Math.min(Je,Ge)),_.maxZoom),Ft=s.P.convert(_.offset),Ht=new s.P((_.padding.left-_.padding.right)/2,(_.padding.top-_.padding.bottom)/2).rotate(s.ba(g)),Gt=Ft.add(Ht).mult(P.scale/P.zoomScale(Pt));return{center:P.unproject(V.add(q).div(2).sub(Gt)),zoom:Pt,bearing:g}}fitBounds(a,h,g){return this._fitInternal(this.cameraForBounds(a,h),h,g)}fitScreenCoordinates(a,h,g,_,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.P.convert(a)),this.transform.pointLocation(s.P.convert(h)),g,_),_,b)}_fitInternal(a,h,g){return a?(delete(h=s.e(a,h)).padding,h.linear?this.easeTo(h,g):this.flyTo(h,g)):this}jumpTo(a,h){this.stop();const g=this._getTransformForUpdate();let _=!1,b=!1,P=!1;return"zoom"in a&&g.zoom!==+a.zoom&&(_=!0,g.zoom=+a.zoom),a.center!==void 0&&(g.center=s.N.convert(a.center)),"bearing"in a&&g.bearing!==+a.bearing&&(b=!0,g.bearing=+a.bearing),"pitch"in a&&g.pitch!==+a.pitch&&(P=!0,g.pitch=+a.pitch),a.padding==null||g.isPaddingEqual(a.padding)||(g.padding=a.padding),this._applyUpdatedTransform(g),this.fire(new s.k("movestart",h)).fire(new s.k("move",h)),_&&this.fire(new s.k("zoomstart",h)).fire(new s.k("zoom",h)).fire(new s.k("zoomend",h)),b&&this.fire(new s.k("rotatestart",h)).fire(new s.k("rotate",h)).fire(new s.k("rotateend",h)),P&&this.fire(new s.k("pitchstart",h)).fire(new s.k("pitch",h)).fire(new s.k("pitchend",h)),this.fire(new s.k("moveend",h))}calculateCameraOptionsFromTo(a,h,g,_=0){const b=s.Z.fromLngLat(a,h),P=s.Z.fromLngLat(g,_),I=P.x-b.x,L=P.y-b.y,V=P.z-b.z,W=Math.hypot(I,L,V);if(W===0)throw new Error("Can't calculate camera options with same From and To");const q=Math.hypot(I,L),oe=this.transform.scaleZoom(this.transform.cameraToCenterDistance/W/this.transform.tileSize),le=180*Math.atan2(I,-L)/Math.PI;let ie=180*Math.acos(q/W)/Math.PI;return ie=V<0?90-ie:90+ie,{center:P.toLngLat(),zoom:oe,pitch:ie,bearing:le}}easeTo(a,h){var g;this._stop(!1,a.easeId),((a=s.e({offset:[0,0],duration:500,easing:s.b9},a)).animate===!1||!a.essential&&x.prefersReducedMotion)&&(a.duration=0);const _=this._getTransformForUpdate(),b=_.zoom,P=_.bearing,I=_.pitch,L=_.padding,V="bearing"in a?this._normalizeBearing(a.bearing,P):P,W="pitch"in a?+a.pitch:I,q="padding"in a?a.padding:_.padding,oe=s.P.convert(a.offset);let le=_.centerPoint.add(oe);const ie=_.pointLocation(le),{center:fe,zoom:Ae}=_.getConstrained(s.N.convert(a.center||ie),(g=a.zoom)!==null&&g!==void 0?g:b);this._normalizeCenter(fe,_);const Te=_.project(ie),ke=_.project(fe).sub(Te),Ie=_.zoomScale(Ae-b);let ze,Je;a.around&&(ze=s.N.convert(a.around),Je=_.locationPoint(ze));const Ge={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ae!==b,this._rotating=this._rotating||P!==V,this._pitching=this._pitching||W!==I,this._padding=!_.isPaddingEqual(q),this._easeId=a.easeId,this._prepareEase(h,a.noMoveStart,Ge),this.terrain&&this._prepareElevation(fe),this._ease(Pt=>{if(this._zooming&&(_.zoom=s.y.number(b,Ae,Pt)),this._rotating&&(_.bearing=s.y.number(P,V,Pt)),this._pitching&&(_.pitch=s.y.number(I,W,Pt)),this._padding&&(_.interpolatePadding(L,q,Pt),le=_.centerPoint.add(oe)),this.terrain&&!a.freezeElevation&&this._updateElevation(Pt),ze)_.setLocationAtPoint(ze,Je);else{const Ft=_.zoomScale(_.zoom-b),Ht=Ae>b?Math.min(2,Ie):Math.max(.5,Ie),Gt=Math.pow(Ht,1-Pt),Xt=_.unproject(Te.add(ke.mult(Pt*Gt)).mult(Ft));_.setLocationAtPoint(_.renderWorldCopies?Xt.wrap():Xt,le)}this._applyUpdatedTransform(_),this._fireMoveEvents(h)},Pt=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(h,Pt)},a),this}_prepareEase(a,h,g={}){this._moving=!0,h||g.moving||this.fire(new s.k("movestart",a)),this._zooming&&!g.zooming&&this.fire(new s.k("zoomstart",a)),this._rotating&&!g.rotating&&this.fire(new s.k("rotatestart",a)),this._pitching&&!g.pitching&&this.fire(new s.k("pitchstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const h=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&h!==this._elevationTarget){const g=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(g-(h-(g*a+this._elevationStart))/(1-a)),this._elevationTarget=h}this.transform.elevation=s.y.number(this._elevationStart,this._elevationTarget,a)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(a){const h=a.getCameraPosition(),g=this.terrain.getElevationForLngLatZoom(h.lngLat,a.zoom);if(h.altitude<g){const _=this.calculateCameraOptionsFromTo(h.lngLat,g,a.center,a.elevation);return{pitch:_.pitch,zoom:_.zoom}}return{}}_applyUpdatedTransform(a){const h=[];if(this.terrain&&h.push(_=>this._elevateCameraIfInsideTerrain(_)),this.transformCameraUpdate&&h.push(_=>this.transformCameraUpdate(_)),!h.length)return;const g=a.clone();for(const _ of h){const b=g.clone(),{center:P,zoom:I,pitch:L,bearing:V,elevation:W}=_(b);P&&(b.center=P),I!==void 0&&(b.zoom=I),L!==void 0&&(b.pitch=L),V!==void 0&&(b.bearing=V),W!==void 0&&(b.elevation=W),g.apply(b)}this.transform.apply(g)}_fireMoveEvents(a){this.fire(new s.k("move",a)),this._zooming&&this.fire(new s.k("zoom",a)),this._rotating&&this.fire(new s.k("rotate",a)),this._pitching&&this.fire(new s.k("pitch",a))}_afterEase(a,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId;const g=this._zooming,_=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new s.k("zoomend",a)),_&&this.fire(new s.k("rotateend",a)),b&&this.fire(new s.k("pitchend",a)),this.fire(new s.k("moveend",a))}flyTo(a,h){var g;if(!a.essential&&x.prefersReducedMotion){const or=s.M(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(or,h)}this.stop(),a=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.b9},a);const _=this._getTransformForUpdate(),b=_.zoom,P=_.bearing,I=_.pitch,L=_.padding,V="bearing"in a?this._normalizeBearing(a.bearing,P):P,W="pitch"in a?+a.pitch:I,q="padding"in a?a.padding:_.padding,oe=s.P.convert(a.offset);let le=_.centerPoint.add(oe);const ie=_.pointLocation(le),{center:fe,zoom:Ae}=_.getConstrained(s.N.convert(a.center||ie),(g=a.zoom)!==null&&g!==void 0?g:b);this._normalizeCenter(fe,_);const Te=_.zoomScale(Ae-b),ke=_.project(ie),Ie=_.project(fe).sub(ke);let ze=a.curve;const Je=Math.max(_.width,_.height),Ge=Je/Te,Pt=Ie.mag();if("minZoom"in a){const or=s.ac(Math.min(a.minZoom,b,Ae),_.minZoom,_.maxZoom),Nr=Je/_.zoomScale(or-b);ze=Math.sqrt(Nr/Pt*2)}const Ft=ze*ze;function Ht(or){const Nr=(Ge*Ge-Je*Je+(or?-1:1)*Ft*Ft*Pt*Pt)/(2*(or?Ge:Je)*Ft*Pt);return Math.log(Math.sqrt(Nr*Nr+1)-Nr)}function Gt(or){return(Math.exp(or)-Math.exp(-or))/2}function Xt(or){return(Math.exp(or)+Math.exp(-or))/2}const qt=Ht(!1);let Yt=function(or){return Xt(qt)/Xt(qt+ze*or)},Ir=function(or){return Je*((Xt(qt)*(Gt(Nr=qt+ze*or)/Xt(Nr))-Gt(qt))/Ft)/Pt;var Nr},ir=(Ht(!0)-qt)/ze;if(Math.abs(Pt)<1e-6||!isFinite(ir)){if(Math.abs(Je-Ge)<1e-6)return this.easeTo(a,h);const or=Ge<Je?-1:1;ir=Math.abs(Math.log(Ge/Je))/ze,Ir=()=>0,Yt=Nr=>Math.exp(or*ze*Nr)}return a.duration="duration"in a?+a.duration:1e3*ir/("screenSpeed"in a?+a.screenSpeed/ze:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=P!==V,this._pitching=W!==I,this._padding=!_.isPaddingEqual(q),this._prepareEase(h,!1),this.terrain&&this._prepareElevation(fe),this._ease(or=>{const Nr=or*ir,Qr=1/Yt(Nr);_.zoom=or===1?Ae:b+_.scaleZoom(Qr),this._rotating&&(_.bearing=s.y.number(P,V,or)),this._pitching&&(_.pitch=s.y.number(I,W,or)),this._padding&&(_.interpolatePadding(L,q,or),le=_.centerPoint.add(oe)),this.terrain&&!a.freezeElevation&&this._updateElevation(or);const Wr=or===1?fe:_.unproject(ke.add(Ie.mult(Ir(Nr))).mult(Qr));_.setLocationAtPoint(_.renderWorldCopies?Wr.wrap():Wr,le),this._applyUpdatedTransform(_),this._fireMoveEvents(h)},()=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(h)},a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,h){var g;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,h)}return a||(g=this.handlers)===null||g===void 0||g.stop(!1),this}_ease(a,h,g){g.animate===!1||g.duration===0?(a(1),h()):(this._easeStart=x.now(),this._easeOptions=g,this._onEaseFrame=a,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,h){a=s.b3(a,-180,180);const g=Math.abs(a-h);return Math.abs(a-360-h)<g&&(a-=360),Math.abs(a+360-h)<g&&(a+=360),a}_normalizeCenter(a,h){if(!h.renderWorldCopies||h.lngRange)return;const g=a.lng-h.center.lng;a.lng+=g>180?-360:g<-180?360:0}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLatZoom(s.N.convert(a),this.transform.tileZoom)-this.transform.elevation:null}}const Ph={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class ju{constructor(a=Ph){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=h=>{!h||h.sourceDataType!=="metadata"&&h.sourceDataType!=="visibility"&&h.dataType!=="style"&&h.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=a}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options.compact,this._container=S.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=S.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=S.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){S.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,h){const g=this._map._getUIString(`AttributionControl.${h}`);a.title=g,a.setAttribute("aria-label",g)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(_=>typeof _!="string"?"":_)):typeof this.options.customAttribution=="string"&&a.push(this.options.customAttribution)),this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const h=this._map.style.sourceCaches;for(const _ in h){const b=h[_];if(b.used||b.usedForTerrain){const P=b.getSource();P.attribution&&a.indexOf(P.attribution)<0&&a.push(P.attribution)}}a=a.filter(_=>String(_).trim()),a.sort((_,b)=>_.length-b.length),a=a.filter((_,b)=>{for(let P=b+1;P<a.length;P++)if(a[P].indexOf(_)>=0)return!1;return!0});const g=a.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,a.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Zl{constructor(a={}){this._updateCompact=()=>{const h=this._container.children;if(h.length){const g=h[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&g.classList.add("maplibregl-compact"):g.classList.remove("maplibregl-compact")}},this.options=a}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=S.create("div","maplibregl-ctrl");const h=S.create("a","maplibregl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){S.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class dn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const h=++this._id;return this._queue.push({callback:a,id:h,cancelled:!1}),h}remove(a){const h=this._currentlyRunning,g=h?this._queue.concat(h):this._queue;for(const _ of g)if(_.id===a)return void(_.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const h=this._currentlyRunning=this._queue;this._queue=[];for(const g of h)if(!g.cancelled&&(g.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Gp=s.Y([{name:"a_pos3d",type:"Int16",components:3}]);class K_ extends s.E{constructor(a){super(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,a.usedForTerrain=!0,a.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,h){this.sourceCache.update(a,h),this._renderableTilesKeys=[];const g={};for(const _ of a.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h}))g[_.key]=!0,this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.posMatrix=new Float64Array(16),s.aP(_.posMatrix,0,s.X,0,s.X,0,1),this._tiles[_.key]=new fn(_,this.tileSize));for(const _ in this._tiles)g[_]||delete this._tiles[_]}freeRtt(a){for(const h in this._tiles){const g=this._tiles[h];(!a||g.tileID.equals(a)||g.tileID.isChildOf(a)||a.isChildOf(g.tileID))&&(g.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(a=>this.getTileByID(a))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a){const h={};for(const g of this._renderableTilesKeys){const _=this._tiles[g].tileID;if(_.canonical.equals(a.canonical)){const b=a.clone();b.posMatrix=new Float64Array(16),s.aP(b.posMatrix,0,s.X,0,s.X,0,1),h[g]=b}else if(_.canonical.isChildOf(a.canonical)){const b=a.clone();b.posMatrix=new Float64Array(16);const P=_.canonical.z-a.canonical.z,I=_.canonical.x-(_.canonical.x>>P<<P),L=_.canonical.y-(_.canonical.y>>P<<P),V=s.X>>P;s.aP(b.posMatrix,0,V,0,V,0,1),s.J(b.posMatrix,b.posMatrix,[-I*V,-L*V,0]),h[g]=b}else if(a.canonical.isChildOf(_.canonical)){const b=a.clone();b.posMatrix=new Float64Array(16);const P=a.canonical.z-_.canonical.z,I=a.canonical.x-(a.canonical.x>>P<<P),L=a.canonical.y-(a.canonical.y>>P<<P),V=s.X>>P;s.aP(b.posMatrix,0,s.X,0,s.X,0,1),s.J(b.posMatrix,b.posMatrix,[I*V,L*V,0]),s.K(b.posMatrix,b.posMatrix,[1/2**P,1/2**P,0]),h[g]=b}}return h}getSourceTile(a,h){const g=this.sourceCache._source;let _=a.overscaledZ-this.deltaZoom;if(_>g.maxzoom&&(_=g.maxzoom),_<g.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(_).key);let b=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!b||!b.dem)&&h)for(;_>=g.minzoom&&(!b||!b.dem);)b=this.sourceCache.getTileByID(a.scaledTo(_--).key);return b}tilesAfterTime(a=Date.now()){return Object.values(this._tiles).filter(h=>h.timeAdded>=a)}}class Td{constructor(a,h,g){this.painter=a,this.sourceCache=new K_(h),this.options=g,this.exaggeration=typeof g.exaggeration=="number"?g.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,h,g,_=s.X){var b;if(!(h>=0&&h<_&&g>=0&&g<_))return 0;const P=this.getTerrainData(a),I=(b=P.tile)===null||b===void 0?void 0:b.dem;if(!I)return 0;const L=function(ie,fe,Ae){var Te=fe[0],ke=fe[1];return ie[0]=Ae[0]*Te+Ae[4]*ke+Ae[12],ie[1]=Ae[1]*Te+Ae[5]*ke+Ae[13],ie}([],[h/_*s.X,g/_*s.X],P.u_terrain_matrix),V=[L[0]*I.dim,L[1]*I.dim],W=Math.floor(V[0]),q=Math.floor(V[1]),oe=V[0]-W,le=V[1]-q;return I.get(W,q)*(1-oe)*(1-le)+I.get(W+1,q)*oe*(1-le)+I.get(W,q+1)*(1-oe)*le+I.get(W+1,q+1)*oe*le}getElevationForLngLatZoom(a,h){if(!s.bb(h,a.wrap()))return 0;const{tileID:g,mercatorX:_,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(a,h);return this.getElevation(g,_%s.X,b%s.X,s.X)}getElevation(a,h,g,_=s.X){return this.getDEMElevation(a,h,g,_)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){const _=this.painter.context,b=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new G(_,b,_.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new G(_,new s.R({width:1,height:1}),_.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.an([])}const h=this.sourceCache.getSourceTile(a,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){const _=this.painter.context;h.demTexture=this.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new G(_,h.dem.getPixels(),_.gl.RGBA,{premultiply:!1}),h.demTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}const g=h&&h+h.tileID.key+a.key;if(g&&!this._demMatrixCache[g]){const _=this.sourceCache.sourceCache._source.maxzoom;let b=a.canonical.z-h.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=_?b=a.canonical.z-_:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const P=a.canonical.x-(a.canonical.x>>b<<b),I=a.canonical.y-(a.canonical.y>>b<<b),L=s.bc(new Float64Array(16),[1/(s.X<<b),1/(s.X<<b),0]);s.J(L,L,[P*s.X,I*s.X,0]),this._demMatrixCache[a.key]={matrix:L,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getFramebuffer(a){const h=this.painter,g=h.width/devicePixelRatio,_=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===_||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new G(h.context,{width:g,height:_,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new G(h.context,{width:g,height:_,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(g,_,!0,!1),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,g,_))),this._fbo.colorAttachment.set(a==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,P=0;b<this._coordsTextureSize;b++)for(let I=0;I<this._coordsTextureSize;I++,P+=4)h[P+0]=255&I,h[P+1]=255&b,h[P+2]=I>>8<<4|b>>8,h[P+3]=0;const g=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),_=new G(a,g,a.gl.RGBA,{premultiply:!1});return _.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=_,_}pointCoordinate(a){this.painter.maybeDrawDepthAndCoords(!0);const h=new Uint8Array(4),g=this.painter.context,_=g.gl,b=Math.round(a.x*this.painter.pixelRatio/devicePixelRatio),P=Math.round(a.y*this.painter.pixelRatio/devicePixelRatio),I=Math.round(this.painter.height/devicePixelRatio);g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(b,I-P-1,1,1,_.RGBA,_.UNSIGNED_BYTE,h),g.bindFramebuffer.set(null);const L=h[0]+(h[2]>>4<<8),V=h[1]+((15&h[2])<<8),W=this.coordsIndex[255-h[3]],q=W&&this.sourceCache.getTileByID(W);if(!q)return null;const oe=this._coordsTextureSize,le=(1<<q.tileID.canonical.z)*oe;return new s.Z((q.tileID.canonical.x*oe+L)/le+q.tileID.wrap,(q.tileID.canonical.y*oe+V)/le,this.getElevation(q.tileID,L,V,oe))}depthAtPoint(a){const h=new Uint8Array(4),g=this.painter.context,_=g.gl;return g.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),_.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,h),g.bindFramebuffer.set(null),(h[0]/16777216+h[1]/65536+h[2]/256+h[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const a=this.painter.context,h=new s.bd,g=new s.aY,_=this.meshSize,b=s.X/_,P=_*_;for(let q=0;q<=_;q++)for(let oe=0;oe<=_;oe++)h.emplaceBack(oe*b,q*b,0);for(let q=0;q<P;q+=_+1)for(let oe=0;oe<_;oe++)g.emplaceBack(oe+q,_+oe+q+1,_+oe+q+2),g.emplaceBack(oe+q,_+oe+q+2,oe+q+1);const I=h.length,L=I+2*(_+1);for(const q of[0,1])for(let oe=0;oe<=_;oe++)for(const le of[0,1])h.emplaceBack(oe*b,q*s.X,le);for(let q=0;q<2*_;q+=2)g.emplaceBack(L+q,L+q+1,L+q+3),g.emplaceBack(L+q,L+q+3,L+q+2),g.emplaceBack(I+q,I+q+3,I+q+1),g.emplaceBack(I+q,I+q+2,I+q+3);const V=h.length,W=V+2*(_+1);for(const q of[0,1])for(let oe=0;oe<=_;oe++)for(const le of[0,1])h.emplaceBack(q*s.X,oe*b,le);for(let q=0;q<2*_;q+=2)g.emplaceBack(V+q,V+q+1,V+q+3),g.emplaceBack(V+q,V+q+3,V+q+2),g.emplaceBack(W+q,W+q+3,W+q+1),g.emplaceBack(W+q,W+q+2,W+q+3);return this._mesh=new _i(a.createVertexBuffer(h,Gp.members),a.createIndexBuffer(g),s.a0.simpleSegment(0,0,h.length,g.length)),this._mesh}getMeshFrameDelta(a){return 2*Math.PI*s.be/Math.pow(2,a)/5}getMinTileElevationForLngLatZoom(a,h){var g;const{tileID:_}=this._getOverscaledTileIDFromLngLatZoom(a,h);return(g=this.getMinMaxElevation(_).minElevation)!==null&&g!==void 0?g:0}getMinMaxElevation(a){const h=this.getTerrainData(a).tile,g={minElevation:null,maxElevation:null};return h&&h.dem&&(g.minElevation=h.dem.min*this.exaggeration,g.maxElevation=h.dem.max*this.exaggeration),g}_getOverscaledTileIDFromLngLatZoom(a,h){const g=s.Z.fromLngLat(a.wrap()),_=(1<<h)*s.X,b=g.x*_,P=g.y*_,I=Math.floor(b/s.X),L=Math.floor(P/s.X);return{tileID:new s.S(h,0,h,I,L),mercatorX:b,mercatorY:P}}}class Om{constructor(a,h,g){this._context=a,this._size=h,this._tileSize=g,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){const h=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),g=new G(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return g.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),h.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),h.colorAttachment.set(g.texture),{id:a,fbo:h,texture:g,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(h=>a.id!==h),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(const h of this._recentlyUsed)if(!this._objects[h].inUse)return this._objects[h];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(const a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(a=>!a.inUse)===!1}}const Vu={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Yp{constructor(a,h){this.painter=a,this.terrain=h,this.pool=new Om(a.context,30,h.sourceCache.tileSize*h.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,h){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter(g=>!a._layers[g].isHidden(h)),this._coordsDescendingInv={};for(const g in a.sourceCaches){this._coordsDescendingInv[g]={};const _=a.sourceCaches[g].getVisibleCoordinates();for(const b of _){const P=this.terrain.sourceCache.getTerrainCoords(b);for(const I in P)this._coordsDescendingInv[g][I]||(this._coordsDescendingInv[g][I]=[]),this._coordsDescendingInv[g][I].push(P[I])}}this._coordsDescendingInvStr={};for(const g of a._order){const _=a._layers[g],b=_.source;if(Vu[_.type]&&!this._coordsDescendingInvStr[b]){this._coordsDescendingInvStr[b]={};for(const P in this._coordsDescendingInv[b])this._coordsDescendingInvStr[b][P]=this._coordsDescendingInv[b][P].map(I=>I.key).sort().join()}}for(const g of this._renderableTiles)for(const _ in this._coordsDescendingInvStr){const b=this._coordsDescendingInvStr[_][g.tileID.key];b&&b!==g.rttCoords[_]&&(g.rtt=[])}}renderLayer(a){if(a.isHidden(this.painter.transform.zoom))return!1;const h=a.type,g=this.painter,_=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(Vu[h]&&(this._prevType&&Vu[this._prevType]||this._stacks.push([]),this._prevType=h,this._stacks[this._stacks.length-1].push(a.id),!_))return!0;if(Vu[this._prevType]||Vu[h]&&_){this._prevType=h;const b=this._stacks.length-1,P=this._stacks[b]||[];for(const I of this._renderableTiles){if(this.pool.isFull()&&(zo(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(I),I.rtt[b]){const V=this.pool.getObjectForId(I.rtt[b].id);if(V.stamp===I.rtt[b].stamp){this.pool.useObject(V);continue}}const L=this.pool.getOrCreateFreeObject();this.pool.useObject(L),this.pool.stampObject(L),I.rtt[b]={id:L.id,stamp:L.stamp},g.context.bindFramebuffer.set(L.fbo.framebuffer),g.context.clear({color:s.aM.transparent,stencil:0}),g.currentStencilSource=void 0;for(let V=0;V<P.length;V++){const W=g.style._layers[P[V]],q=W.source?this._coordsDescendingInv[W.source][I.tileID.key]:[I.tileID];g.context.viewport.set([0,0,L.fbo.width,L.fbo.height]),g._renderTileClippingMasks(W,q),g.renderLayer(g,g.style.sourceCaches[W.source],W,q),W.source&&(I.rttCoords[W.source]=this._coordsDescendingInvStr[W.source][I.tileID.key])}}return zo(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Vu[h]}return!1}}const Zp={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},kf=f,Cd={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Ph,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Hu=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},Jp={showCompass:!0,showZoom:!0,visualizePitch:!1};class Nm{constructor(a,h,g=!1){this.mousedown=P=>{this.startMouse(s.e({},P,{ctrlKey:!0,preventDefault:()=>P.preventDefault()}),S.mousePos(this.element,P)),S.addEventListener(window,"mousemove",this.mousemove),S.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=P=>{this.moveMouse(P,S.mousePos(this.element,P))},this.mouseup=P=>{this.mouseRotate.dragEnd(P),this.mousePitch&&this.mousePitch.dragEnd(P),this.offTemp()},this.touchstart=P=>{P.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=S.touchPos(this.element,P.targetTouches)[0],this.startTouch(P,this._startPos),S.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),S.addEventListener(window,"touchend",this.touchend))},this.touchmove=P=>{P.targetTouches.length!==1?this.reset():(this._lastPos=S.touchPos(this.element,P.targetTouches)[0],this.moveTouch(P,this._lastPos))},this.touchend=P=>{P.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const _=a.dragRotate._mouseRotate.getClickTolerance(),b=a.dragRotate._mousePitch.getClickTolerance();this.element=h,this.mouseRotate=Sh({clickTolerance:_,enable:!0}),this.touchRotate=(({enable:P,clickTolerance:I,bearingDegreesPerPixelMoved:L=.8})=>{const V=new Ec;return new Ni({clickTolerance:I,move:(W,q)=>({bearingDelta:(q.x-W.x)*L}),moveStateManager:V,enable:P,assignEvents:Hu})})({clickTolerance:_,enable:!0}),this.map=a,g&&(this.mousePitch=Cf({clickTolerance:b,enable:!0}),this.touchPitch=(({enable:P,clickTolerance:I,pitchDegreesPerPixelMoved:L=-.5})=>{const V=new Ec;return new Ni({clickTolerance:I,move:(W,q)=>({pitchDelta:(q.y-W.y)*L}),moveStateManager:V,enable:P,assignEvents:Hu})})({clickTolerance:b,enable:!0})),S.addEventListener(h,"mousedown",this.mousedown),S.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),S.addEventListener(h,"touchcancel",this.reset)}startMouse(a,h){this.mouseRotate.dragStart(a,h),this.mousePitch&&this.mousePitch.dragStart(a,h),S.disableDrag()}startTouch(a,h){this.touchRotate.dragStart(a,h),this.touchPitch&&this.touchPitch.dragStart(a,h),S.disableDrag()}moveMouse(a,h){const g=this.map,{bearingDelta:_}=this.mouseRotate.dragMove(a,h)||{};if(_&&g.setBearing(g.getBearing()+_),this.mousePitch){const{pitchDelta:b}=this.mousePitch.dragMove(a,h)||{};b&&g.setPitch(g.getPitch()+b)}}moveTouch(a,h){const g=this.map,{bearingDelta:_}=this.touchRotate.dragMove(a,h)||{};if(_&&g.setBearing(g.getBearing()+_),this.touchPitch){const{pitchDelta:b}=this.touchPitch.dragMove(a,h)||{};b&&g.setPitch(g.getPitch()+b)}}off(){const a=this.element;S.removeEventListener(a,"mousedown",this.mousedown),S.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),S.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),S.removeEventListener(window,"touchend",this.touchend),S.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){S.enableDrag(),S.removeEventListener(window,"mousemove",this.mousemove),S.removeEventListener(window,"mouseup",this.mouseup),S.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),S.removeEventListener(window,"touchend",this.touchend)}}let Ea;function Ai(y,a,h){const g=new s.N(y.lng,y.lat);if(y=new s.N(y.lng,y.lat),a){const _=new s.N(y.lng-360,y.lat),b=new s.N(y.lng+360,y.lat),P=h.locationPoint(y).distSqr(a);h.locationPoint(_).distSqr(a)<P?y=_:h.locationPoint(b).distSqr(a)<P&&(y=b)}for(;Math.abs(y.lng-h.center.lng)>180;){const _=h.locationPoint(y);if(_.x>=0&&_.y>=0&&_.x<=h.width&&_.y<=h.height)break;y.lng>h.center.lng?y.lng-=360:y.lng+=360}return y.lng!==g.lng&&h.locationPoint(y).y>h.height/2-h.getHorizon()?y:g}const Ih={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Pd(y,a,h){const g=y.classList;for(const _ in Ih)g.remove(`maplibregl-${h}-anchor-${_}`);g.add(`maplibregl-${h}-anchor-${a}`)}class Id extends s.E{constructor(a){if(super(),this._onKeyPress=h=>{const g=h.code,_=h.charCode||h.keyCode;g!=="Space"&&g!=="Enter"&&_!==32&&_!==13||this.togglePopup()},this._onMapClick=h=>{const g=h.originalEvent.target,_=this._element;this._popup&&(g===_||_.contains(g))&&this.togglePopup()},this._update=h=>{var g;if(!this._map)return;const _=this._map.loaded()&&!this._map.isMoving();((h==null?void 0:h.type)==="terrain"||(h==null?void 0:h.type)==="render"&&!_)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Ai(this._lngLat,this._flatPos,this._map.transform):(g=this._lngLat)===null||g===void 0?void 0:g.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let b="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?b=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(b=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let P="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?P="rotateX(0deg)":this._pitchAlignment==="map"&&(P=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||h&&h.type!=="moveend"||(this._pos=this._pos.round()),S.setTransform(this._element,`${Ih[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${P} ${b}`),x.frameAsync(new AbortController).then(()=>{this._updateOpacity(h&&h.type==="moveend")}).catch(()=>{})},this._onMove=h=>{if(!this._isDragging){const g=this._clickTolerance||this._map._clickTolerance;this._isDragging=h.point.dist(this._pointerdownPos)>=g}this._isDragging&&(this._pos=h.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.k("dragstart"))),this.fire(new s.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.k("dragend")),this._state="inactive"},this._addDragHandler=h=>{this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(this._pos).add(this._offset),this._pointerdownPos=h.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._subpixelPositioning=a&&a.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(a==null?void 0:a.opacity,a==null?void 0:a.opacityWhenCovered),a&&a.element)this._element=a.element,this._offset=s.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=S.create("div");const h=S.createNS("http://www.w3.org/2000/svg","svg"),g=41,_=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${g}px`),h.setAttributeNS(null,"width",`${_}px`),h.setAttributeNS(null,"viewBox",`0 0 ${_} ${g}`);const b=S.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const P=S.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill-rule","nonzero");const I=S.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const L=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Te of L){const ke=S.createNS("http://www.w3.org/2000/svg","ellipse");ke.setAttributeNS(null,"opacity","0.04"),ke.setAttributeNS(null,"cx","10.5"),ke.setAttributeNS(null,"cy","5.80029008"),ke.setAttributeNS(null,"rx",Te.rx),ke.setAttributeNS(null,"ry",Te.ry),I.appendChild(ke)}const V=S.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"fill",this._color);const W=S.createNS("http://www.w3.org/2000/svg","path");W.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),V.appendChild(W);const q=S.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"opacity","0.25"),q.setAttributeNS(null,"fill","#000000");const oe=S.createNS("http://www.w3.org/2000/svg","path");oe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),q.appendChild(oe);const le=S.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"transform","translate(6.0, 7.0)"),le.setAttributeNS(null,"fill","#FFFFFF");const ie=S.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(8.0, 8.0)");const fe=S.createNS("http://www.w3.org/2000/svg","circle");fe.setAttributeNS(null,"fill","#000000"),fe.setAttributeNS(null,"opacity","0.25"),fe.setAttributeNS(null,"cx","5.5"),fe.setAttributeNS(null,"cy","5.5"),fe.setAttributeNS(null,"r","5.4999962");const Ae=S.createNS("http://www.w3.org/2000/svg","circle");Ae.setAttributeNS(null,"fill","#FFFFFF"),Ae.setAttributeNS(null,"cx","5.5"),Ae.setAttributeNS(null,"cy","5.5"),Ae.setAttributeNS(null,"r","5.4999962"),ie.appendChild(fe),ie.appendChild(Ae),P.appendChild(I),P.appendChild(V),P.appendChild(q),P.appendChild(le),P.appendChild(ie),h.appendChild(P),h.setAttributeNS(null,"height",g*this._scale+"px"),h.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(h),this._offset=s.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",h=>{h.preventDefault()}),this._element.addEventListener("mousedown",h=>{h.preventDefault()}),Pd(this._element,this._anchor,"marker"),a&&a.className)for(const h of a.className.split(" "))this._element.classList.add(h);this._popup=null}addTo(a){return this.remove(),this._map=a,this._element.setAttribute("aria-label",a._getUIString("Marker.Title")),a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),a.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),S.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=s.N.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const _=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(a){return this._subpixelPositioning=a,this}getPopup(){return this._popup}togglePopup(){const a=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:a?(a.isOpen()?a.remove():(a.setLngLat(this._lngLat),a.addTo(this._map)),this):this}_updateOpacity(a=!1){var h,g;if(!(!((h=this._map)===null||h===void 0)&&h.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(a)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const _=this._map,b=_.terrain.depthAtPoint(this._pos),P=_.terrain.getElevationForLngLatZoom(this._lngLat,_.transform.tileZoom);if(_.transform.lngLatToCameraDepth(this._lngLat,P)-b<.006)return void(this._element.style.opacity=this._opacity);const I=-this._offset.y/_.transform._pixelPerMeter,L=Math.sin(_.getPitch()*Math.PI/180)*I,V=_.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),W=_.transform.lngLatToCameraDepth(this._lngLat,P+L)-V>.006;!((g=this._popup)===null||g===void 0)&&g.isOpen()&&W&&this._popup.remove(),this._element.style.opacity=W?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(a){return this._offset=s.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(a,h){return a===void 0&&h===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),a!==void 0&&(this._opacity=a),h!==void 0&&(this._opacityWhenCovered=h),this._map&&this._updateOpacity(!0),this}}const Dm={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Mf=0,Of=!1;const Al={maxWidth:100,unit:"metric"};function ou(y,a,h){const g=h&&h.maxWidth||100,_=y._container.clientHeight/2,b=y.unproject([0,_]),P=y.unproject([g,_]),I=b.distanceTo(P);if(h&&h.unit==="imperial"){const L=3.2808*I;L>5280?Rr(a,g,L/5280,y._getUIString("ScaleControl.Miles")):Rr(a,g,L,y._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?Rr(a,g,I/1852,y._getUIString("ScaleControl.NauticalMiles")):I>=1e3?Rr(a,g,I/1e3,y._getUIString("ScaleControl.Kilometers")):Rr(a,g,I,y._getUIString("ScaleControl.Meters"))}function Rr(y,a,h,g){const _=function(b){const P=Math.pow(10,`${Math.floor(b)}`.length-1);let I=b/P;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(L){const V=Math.pow(10,Math.ceil(-Math.log(L)/Math.LN10));return Math.round(L*V)/V}(I),P*I}(h);y.style.width=a*(_/h)+"px",y.innerHTML=`${_}&nbsp;${g}`}const qr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Nf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function T(y){if(y){if(typeof y=="number"){const a=Math.round(Math.abs(y)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,y),"top-left":new s.P(a,a),"top-right":new s.P(-a,a),bottom:new s.P(0,-y),"bottom-left":new s.P(a,-a),"bottom-right":new s.P(-a,-a),left:new s.P(y,0),right:new s.P(-y,0)}}if(y instanceof s.P||Array.isArray(y)){const a=s.P.convert(y);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:s.P.convert(y.center||[0,0]),top:s.P.convert(y.top||[0,0]),"top-left":s.P.convert(y["top-left"]||[0,0]),"top-right":s.P.convert(y["top-right"]||[0,0]),bottom:s.P.convert(y.bottom||[0,0]),"bottom-left":s.P.convert(y["bottom-left"]||[0,0]),"bottom-right":s.P.convert(y["bottom-right"]||[0,0]),left:s.P.convert(y.left||[0,0]),right:s.P.convert(y.right||[0,0])}}return T(new s.P(0,0))}const M=f;l.AJAXError=s.bh,l.Evented=s.E,l.LngLat=s.N,l.MercatorCoordinate=s.Z,l.Point=s.P,l.addProtocol=s.bi,l.config=s.a,l.removeProtocol=s.bj,l.AttributionControl=ju,l.BoxZoomHandler=vo,l.CanvasSource=Vt,l.CooperativeGesturesHandler=Ch,l.DoubleClickZoomHandler=Tc,l.DragPanHandler=Mm,l.DragRotateHandler=Xp,l.EdgeInsets=vi,l.FullscreenControl=class extends s.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var a;let h=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((a=h==null?void 0:h.shadowRoot)===null||a===void 0)&&a.fullscreenElement;)h=h.shadowRoot.fullscreenElement;h===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=S.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){S.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=S.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);S.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},l.GeoJSONSource=Zt,l.GeolocateControl=class extends s.E{constructor(y){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new s.k("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.k("geolocate",a)),this._finish()}},this._updateCamera=a=>{const h=new s.N(a.coords.longitude,a.coords.latitude),g=a.coords.accuracy,_=this._map.getBearing(),b=s.e({bearing:_},this.options.fitBoundsOptions),P=pe.fromLngLat(h,g);this._map.fitBounds(P,b,{geolocateSource:!0})},this._updateMarker=a=>{if(a){const h=new s.N(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=a=>{if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&Of)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.k("error",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=S.create("button","maplibregl-ctrl-geolocate",this._container),S.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=a=>{if(this._map){if(a===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}else{const h=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=S.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Id({element:this._dotElement}),this._circleElement=S.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Id({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",h=>{h.geolocateSource||this._watchState!=="ACTIVE_LOCK"||h.originalEvent&&h.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.k("trackuserlocationend")),this.fire(new s.k("userlocationlostfocus")))})}},this.options=s.e({},Dm,y)}onAdd(y){return this._map=y,this._container=S.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return s._(this,arguments,void 0,function*(a=!1){if(Ea!==void 0&&!a)return Ea;if(window.navigator.permissions===void 0)return Ea=!!window.navigator.geolocation,Ea;try{Ea=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ea=!!window.navigator.geolocation}return Ea})}().then(a=>this._finishSetupUI(a)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),S.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Mf=0,Of=!1}_isOutOfMapMaxBounds(y){const a=this._map.getMaxBounds(),h=y.coords;return a&&(h.longitude<a.getWest()||h.longitude>a.getEast()||h.latitude<a.getSouth()||h.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),a=y.getSouthEast(),h=y.getNorthEast(),g=a.distanceTo(h),_=Math.ceil(this._accuracy/(g/this._map._container.clientHeight)*2);this._circleElement.style.width=`${_}px`,this._circleElement.style.height=`${_}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Mf--,Of=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.k("trackuserlocationstart")),this.fire(new s.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Mf++,Mf>1?(y={maximumAge:6e5,timeout:0},Of=!0):(y=this.options.positionOptions,Of=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},l.Hash=Ws,l.ImageSource=at,l.KeyboardHandler=Qa,l.LngLatBounds=pe,l.LogoControl=Zl,l.Map=class extends Yl{constructor(y){s.bf.mark(s.bg.create);const a=Object.assign(Object.assign({},Cd),y);if(a.minZoom!=null&&a.maxZoom!=null&&a.minZoom>a.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(a.minPitch!=null&&a.maxPitch!=null&&a.minPitch>a.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(a.minPitch!=null&&a.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(a.maxPitch!=null&&a.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new $o(a.minZoom,a.maxZoom,a.minPitch,a.maxPitch,a.renderWorldCopies),{bearingSnap:a.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new dn,this._controls=[],this._mapId=s.a4(),this._contextLost=h=>{h.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.k("webglcontextlost",{originalEvent:h}))},this._contextRestored=h=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.k("webglcontextrestored",{originalEvent:h}))},this._onMapScroll=h=>{if(h.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=a.interactive,this._maxTileCacheSize=a.maxTileCacheSize,this._maxTileCacheZoomLevels=a.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=a.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=a.preserveDrawingBuffer===!0,this._antialias=a.antialias===!0,this._trackResize=a.trackResize===!0,this._bearingSnap=a.bearingSnap,this._refreshExpiredTiles=a.refreshExpiredTiles===!0,this._fadeDuration=a.fadeDuration,this._crossSourceCollisions=a.crossSourceCollisions===!0,this._collectResourceTiming=a.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Zp),a.locale),this._clickTolerance=a.clickTolerance,this._overridePixelRatio=a.pixelRatio,this._maxCanvasSize=a.maxCanvasSize,this.transformCameraUpdate=a.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=a.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=U.addThrottleControl(()=>this.isMoving()),this._requestManager=new K(a.transformRequest),typeof a.container=="string"){if(this._container=document.getElementById(a.container),!this._container)throw new Error(`Container '${a.container}' not found.`)}else{if(!(a.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=a.container}if(a.maxBounds&&this.setMaxBounds(a.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let h=!1;const g=ds(_=>{this._trackResize&&!this._removed&&(this.resize(_),this.redraw())},50);this._resizeObserver=new ResizeObserver(_=>{h?g(_):h=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Aa(this,a),this._hash=a.hash&&new Ws(typeof a.hash=="string"&&a.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:a.center,zoom:a.zoom,bearing:a.bearing,pitch:a.pitch}),a.bounds&&(this.resize(),this.fitBounds(a.bounds,s.e({},a.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=a.localIdeographFontFamily,this._validateStyle=a.validateStyle,a.style&&this.setStyle(a.style,{localIdeographFontFamily:a.localIdeographFontFamily}),a.attributionControl&&this.addControl(new ju(typeof a.attributionControl=="boolean"?void 0:a.attributionControl)),a.maplibreLogo&&this.addControl(new Zl,a.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",h=>{this._update(h.dataType==="style"),this.fire(new s.k(`${h.dataType}data`,h))}),this.on("dataloading",h=>{this.fire(new s.k(`${h.dataType}dataloading`,h))}),this.on("dataabort",h=>{this.fire(new s.k("sourcedataabort",h))})}_getMapId(){return this._mapId}addControl(y,a){if(a===void 0&&(a=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new s.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=y.onAdd(this);this._controls.push(y);const g=this._controlPositions[a];return a.indexOf("bottom")!==-1?g.insertBefore(h,g.firstChild):g.appendChild(h),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new s.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(y);return a>-1&&this._controls.splice(a,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,a,h,g){return g==null&&this.terrain&&(g=this.terrain.getElevationForLngLatZoom(h,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,a,h,g)}resize(y){var a;const h=this._containerDimensions(),g=h[0],_=h[1],b=this._getClampedPixelRatio(g,_);if(this._resizeCanvas(g,_,b),this.painter.resize(g,_,b),this.painter.overLimit()){const I=this.painter.context.gl;this._maxCanvasSize=[I.drawingBufferWidth,I.drawingBufferHeight];const L=this._getClampedPixelRatio(g,_);this._resizeCanvas(g,_,L),this.painter.resize(g,_,L)}this.transform.resize(g,_),(a=this._requestedCameraState)===null||a===void 0||a.resize(g,_);const P=!this._moving;return P&&(this.stop(),this.fire(new s.k("movestart",y)).fire(new s.k("move",y))),this.fire(new s.k("resize",y)),P&&this.fire(new s.k("moveend",y)),this}_getClampedPixelRatio(y,a){const{0:h,1:g}=this._maxCanvasSize,_=this.getPixelRatio(),b=y*_,P=a*_;return Math.min(b>h?h/b:1,P>g?g/P:1)*_}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(pe.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}project(y){return this.transform.locationPoint(s.N.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(s.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,a,h){if(y==="mouseenter"||y==="mouseover"){let g=!1;return{layers:a,listener:h,delegates:{mousemove:b=>{const P=a.filter(L=>this.getLayer(L)),I=P.length!==0?this.queryRenderedFeatures(b.point,{layers:P}):[];I.length?g||(g=!0,h.call(this,new Oi(y,this,b.originalEvent,{features:I}))):g=!1},mouseout:()=>{g=!1}}}}if(y==="mouseleave"||y==="mouseout"){let g=!1;return{layers:a,listener:h,delegates:{mousemove:P=>{const I=a.filter(L=>this.getLayer(L));(I.length!==0?this.queryRenderedFeatures(P.point,{layers:I}):[]).length?g=!0:g&&(g=!1,h.call(this,new Oi(y,this,P.originalEvent)))},mouseout:P=>{g&&(g=!1,h.call(this,new Oi(y,this,P.originalEvent)))}}}}{const g=_=>{const b=a.filter(I=>this.getLayer(I)),P=b.length!==0?this.queryRenderedFeatures(_.point,{layers:b}):[];P.length&&(_.features=P,h.call(this,_),delete _.features)};return{layers:a,listener:h,delegates:{[y]:g}}}}_saveDelegatedListener(y,a){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(a)}_removeDelegatedListener(y,a,h){if(!this._delegatedListeners||!this._delegatedListeners[y])return;const g=this._delegatedListeners[y];for(let _=0;_<g.length;_++){const b=g[_];if(b.listener===h&&b.layers.length===a.length&&b.layers.every(P=>a.includes(P))){for(const P in b.delegates)this.off(P,b.delegates[P]);return void g.splice(_,1)}}}on(y,a,h){if(h===void 0)return super.on(y,a);const g=this._createDelegatedListener(y,typeof a=="string"?[a]:a,h);this._saveDelegatedListener(y,g);for(const _ in g.delegates)this.on(_,g.delegates[_]);return this}once(y,a,h){if(h===void 0)return super.once(y,a);const g=typeof a=="string"?[a]:a,_=this._createDelegatedListener(y,g,h);for(const b in _.delegates){const P=_.delegates[b];_.delegates[b]=(...I)=>{this._removeDelegatedListener(y,g,h),P(...I)}}this._saveDelegatedListener(y,_);for(const b in _.delegates)this.once(b,_.delegates[b]);return this}off(y,a,h){return h===void 0?super.off(y,a):(this._removeDelegatedListener(y,typeof a=="string"?[a]:a,h),this)}queryRenderedFeatures(y,a){if(!this.style)return[];let h;const g=y instanceof s.P||Array.isArray(y),_=g?y:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(g?{}:y)||{},_ instanceof s.P||typeof _[0]=="number")h=[s.P.convert(_)];else{const b=s.P.convert(_[0]),P=s.P.convert(_[1]);h=[b,new s.P(P.x,b.y),P,new s.P(b.x,P.y),b]}return this.style.queryRenderedFeatures(h,a,this.transform)}querySourceFeatures(y,a){return this.style.querySourceFeatures(y,a)}setStyle(y,a){return(a=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(y,a))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const a=this._locale[y];if(a==null)throw new Error(`Missing UI string '${y}'`);return a}_updateStyle(y,a){if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,a));const h=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new mo(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,a,h):this.style.loadJSON(y,a,h),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new mo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,a){if(typeof y=="string"){const h=this._requestManager.transformRequest(y,"Style");s.h(h,new AbortController).then(g=>{this._updateDiff(g.data,a)}).catch(g=>{g&&this.fire(new s.j(g))})}else typeof y=="object"&&this._updateDiff(y,a)}_updateDiff(y,a){try{this.style.setState(y,a)&&this._update(!0)}catch(h){s.w(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(y,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(y,a){return this._lazyInitEmptyStyle(),this.style.addSource(y,a),this._update(!0)}isSourceLoaded(y){const a=this.style&&this.style.sourceCaches[y];if(a!==void 0)return a.loaded();this.fire(new s.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const a=this.style.sourceCaches[y.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&a.reload();for(const h in this.style._layers){const g=this.style._layers[h];g.type==="hillshade"&&g.source===y.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Td(this.painter,a,y),this.painter.renderToTexture=new Yp(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=h=>{h.dataType==="style"?this.terrain.sourceCache.freeRtt():h.dataType==="source"&&h.tile&&(h.sourceId!==y.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(h.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new s.k("terrain",{terrain:y})),this}getTerrain(){var y,a;return(a=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&a!==void 0?a:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const a in y){const h=y[a]._tiles;for(const g in h){const _=h[g];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,a,h={}){const{pixelRatio:g=1,sdf:_=!1,stretchX:b,stretchY:P,content:I,textFitWidth:L,textFitHeight:V}=h;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||s.b(a))){if(a.width===void 0||a.height===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:W,height:q,data:oe}=a,le=a;return this.style.addImage(y,{data:new s.R({width:W,height:q},new Uint8Array(oe)),pixelRatio:g,stretchX:b,stretchY:P,content:I,textFitWidth:L,textFitHeight:V,sdf:_,version:0,userImage:le}),le.onAdd&&le.onAdd(this,y),this}}{const{width:W,height:q,data:oe}=x.getImageData(a);this.style.addImage(y,{data:new s.R({width:W,height:q},oe),pixelRatio:g,stretchX:b,stretchY:P,content:I,textFitWidth:L,textFitHeight:V,sdf:_,version:0})}}updateImage(y,a){const h=this.style.getImage(y);if(!h)return this.fire(new s.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=a instanceof HTMLImageElement||s.b(a)?x.getImageData(a):a,{width:_,height:b,data:P}=g;if(_===void 0||b===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==h.data.width||b!==h.data.height)return this.fire(new s.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(a instanceof HTMLImageElement||s.b(a));return h.data.replace(P,I),this.style.updateImage(y,h),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new s.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return U.getImage(this._requestManager.transformRequest(y,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,a){return this._lazyInitEmptyStyle(),this.style.addLayer(y,a),this._update(!0)}moveLayer(y,a){return this.style.moveLayer(y,a),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,a,h){return this.style.setLayerZoomRange(y,a,h),this._update(!0)}setFilter(y,a,h={}){return this.style.setFilter(y,a,h),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,a,h,g={}){return this.style.setPaintProperty(y,a,h,g),this._update(!0)}getPaintProperty(y,a){return this.style.getPaintProperty(y,a)}setLayoutProperty(y,a,h,g={}){return this.style.setLayoutProperty(y,a,h,g),this._update(!0)}getLayoutProperty(y,a){return this.style.getLayoutProperty(y,a)}setGlyphs(y,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,a,h={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,a,h,g=>{g||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,a,h=>{h||this._update(!0)}),this}setLight(y,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,a),this._update(!0)}getLight(){return this.style.getLight()}setSky(y){return this._lazyInitEmptyStyle(),this.style.setSky(y),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(y,a){return this.style.setFeatureState(y,a),this._update()}removeFeatureState(y,a){return this.style.removeFeatureState(y,a),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,a=0;return this._container&&(y=this._container.clientWidth||400,a=this._container.clientHeight||300),[y,a]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const a=this._canvasContainer=S.create("div","maplibregl-canvas-container",y);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=S.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const h=this._containerDimensions(),g=this._getClampedPixelRatio(h[0],h[1]);this._resizeCanvas(h[0],h[1],g);const _=this._controlContainer=S.create("div","maplibregl-control-container",y),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(P=>{b[P]=S.create("div",`maplibregl-ctrl-${P} `,_)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,a,h){this._canvas.width=Math.floor(h*y),this._canvas.height=Math.floor(h*a),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${a}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let a=null;this._canvas.addEventListener("webglcontextcreationerror",g=>{a={requestedAttributes:y},g&&(a.statusMessage=g.statusMessage,a.type=g.type)},{once:!0});const h=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!h){const g="Failed to initialize WebGL";throw a?(a.message=g,new Error(JSON.stringify(a))):new Error(g)}this.painter=new ri(h,this.transform),A.testSupport(h)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const a=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let h=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const _=this.transform.zoom,b=x.now();this.style.zoomHistory.update(_,b);const P=new s.z(_,{now:b,fadeDuration:a,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),I=P.crossFadingFactor();I===1&&I===this._crossFadingFactor||(h=!0,this._crossFadingFactor=I),this.style.update(P)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,a,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:a,showPadding:this.showPadding}),this.fire(new s.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.bf.mark(s.bg.load),this.fire(new s.k("load"))),this.style&&(this.style.hasTransitions()||h)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const g=this._sourcesDirty||this._styleDirty||this._placementDirty;return g||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.k("idle")),!this._loaded||this._fullyLoaded||g||(this._fullyLoaded=!0,s.bf.mark(s.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const h of this._controls)h.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),U.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const a=this.painter.context.gl.getExtension("WEBGL_lose_context");a!=null&&a.loseContext&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),S.remove(this._canvasContainer),S.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),s.bf.clearMetrics(),this._removed=!0,this.fire(new s.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,x.frameAsync(this._frameRequest).then(y=>{s.bf.frame(y),this._frameRequest=null,this._render(y)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return kf}getCameraTargetElevation(){return this.transform.elevation}},l.MapMouseEvent=Oi,l.MapTouchEvent=eo,l.MapWheelEvent=wa,l.Marker=Id,l.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const a=this._map.getZoom(),h=a===this._map.getMaxZoom(),g=a===this._map.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},this._rotateCompassArrow=()=>{const a=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=a},this._setButtonTitle=(a,h)=>{const g=this._map._getUIString(`NavigationControl.${h}`);a.title=g,a.setAttribute("aria-label",g)},this.options=s.e({},Jp,y),this._container=S.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",a=>this._map.zoomIn({},{originalEvent:a})),S.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",a=>this._map.zoomOut({},{originalEvent:a})),S.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})}),this._compassIcon=S.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Nm(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){S.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,a){const h=S.create("button",y,this._container);return h.type="button",h.addEventListener("click",a),h}},l.Popup=class extends s.E{constructor(y){super(),this.remove=()=>(this._content&&S.remove(this._content),this._container&&(S.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.k("close"))),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{var h;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=S.create("div","maplibregl-popup",this._map.getContainer()),this._tip=S.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const I of this.options.className.split(" "))this._container.classList.add(I);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Ai(this._lngLat,this._flatPos,this._map.transform):(h=this._lngLat)===null||h===void 0?void 0:h.wrap(),this._trackPointer&&!a)return;const g=this._flatPos=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&a?a:this._map.transform.locationPoint(this._lngLat));let _=this.options.anchor;const b=T(this.options.offset);if(!_){const I=this._container.offsetWidth,L=this._container.offsetHeight;let V;V=g.y+b.bottom.y<L?["top"]:g.y>this._map.transform.height-L?["bottom"]:[],g.x<I/2?V.push("left"):g.x>this._map.transform.width-I/2&&V.push("right"),_=V.length===0?"bottom":V.join("-")}let P=g.add(b[_]);this.options.subpixelPositioning||(P=P.round()),S.setTransform(this._container,`${Ih[_]} translate(${P.x}px,${P.y}px)`),Pd(this._container,_,"popup")},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(qr),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=s.N.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const a=document.createDocumentFragment(),h=document.createElement("body");let g;for(h.innerHTML=y;g=h.firstChild,g;)a.appendChild(g);return this.setDOMContent(a)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=S.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){return this._container&&this._container.classList.add(y),this}removeClassName(y){return this._container&&this._container.classList.remove(y),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=S.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Nf);y&&y.focus()}},l.RasterDEMTileSource=Nt,l.RasterTileSource=Tt,l.ScaleControl=class{constructor(y){this._onMove=()=>{ou(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,ou(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Al),y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=S.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){S.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},l.ScrollZoomHandler=Sa,l.Style=mo,l.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=S.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=S.create("button","maplibregl-ctrl-terrain",this._container),S.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){S.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},l.TwoFingersTouchPitchHandler=Th,l.TwoFingersTouchRotateHandler=qp,l.TwoFingersTouchZoomHandler=Pf,l.TwoFingersTouchZoomRotateHandler=Kp,l.VectorTileSource=sr,l.VideoSource=It,l.addSourceType=(y,a)=>s._(void 0,void 0,void 0,function*(){if(Pr(y))throw new Error(`A source type called "${y}" already exists.`);((h,g)=>{lr[h]=g})(y,a)}),l.clearPrewarmedResources=function(){const y=tt;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Oe),tt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},l.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},l.getRTLTextPluginStatus=function(){return Kt().getRTLTextPluginStatus()},l.getVersion=function(){return M},l.getWorkerCount=function(){return Be.workerCount},l.getWorkerUrl=function(){return s.a.WORKER_URL},l.importScriptInWorkers=function(y){return wt().broadcast("IS",y)},l.prewarm=function(){Xe().acquire(Oe)},l.setMaxParallelImageRequests=function(y){s.a.MAX_PARALLEL_IMAGE_REQUESTS=y},l.setRTLTextPlugin=function(y,a){return Kt().setRTLTextPlugin(y,a)},l.setWorkerCount=function(y){Be.workerCount=y},l.setWorkerUrl=function(y){s.a.WORKER_URL=y}});var o=r;return o})})(w$);var HZ=w$.exports;function fh(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const u_="$$material";function bt(){return bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bt.apply(this,arguments)}function Pn(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function l5(){return l5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l5.apply(this,arguments)}function A$(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var qZ=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,WZ=A$(function(e){return qZ.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),XZ=!1;function KZ(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function GZ(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var YZ=function(){function e(r){var n=this;this._insertTag=function(i){var o;n.tags.length===0?n.insertionPoint?o=n.insertionPoint.nextSibling:n.prepend?o=n.container.firstChild:o=n.before:o=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,o),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!XZ:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(GZ(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=KZ(i);try{o.insertRule(n,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},e}(),dl="-ms-",c5="-moz-",Ci="-webkit-",E$="comm",eR="rule",tR="decl",ZZ="@import",T$="@keyframes",JZ="@layer",QZ=Math.abs,qS=String.fromCharCode,eJ=Object.assign;function tJ(e,t){return Da(e,0)^45?(((t<<2^Da(e,0))<<2^Da(e,1))<<2^Da(e,2))<<2^Da(e,3):0}function C$(e){return e.trim()}function rJ(e,t){return(e=t.exec(e))?e[0]:e}function Pi(e,t,r){return e.replace(t,r)}function e4(e,t){return e.indexOf(t)}function Da(e,t){return e.charCodeAt(t)|0}function a2(e,t,r){return e.slice(t,r)}function ef(e){return e.length}function rR(e){return e.length}function fx(e,t){return t.push(e),e}function nJ(e,t){return e.map(t).join("")}var WS=1,h_=1,P$=0,dc=0,$s=0,M_="";function XS(e,t,r,n,i,o,l){return{value:e,root:t,parent:r,type:n,props:i,children:o,line:WS,column:h_,length:l,return:""}}function C1(e,t){return eJ(XS("",null,null,"",null,null,0),e,{length:-e.length},t)}function iJ(){return $s}function oJ(){return $s=dc>0?Da(M_,--dc):0,h_--,$s===10&&(h_=1,WS--),$s}function qc(){return $s=dc<P$?Da(M_,dc++):0,h_++,$s===10&&(h_=1,WS++),$s}function df(){return Da(M_,dc)}function pw(){return dc}function Y2(e,t){return a2(M_,e,t)}function l2(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function I$(e){return WS=h_=1,P$=ef(M_=e),dc=0,[]}function R$(e){return M_="",e}function gw(e){return C$(Y2(dc-1,t4(e===91?e+2:e===40?e+1:e)))}function sJ(e){for(;($s=df())&&$s<33;)qc();return l2(e)>2||l2($s)>3?"":" "}function aJ(e,t){for(;--t&&qc()&&!($s<48||$s>102||$s>57&&$s<65||$s>70&&$s<97););return Y2(e,pw()+(t<6&&df()==32&&qc()==32))}function t4(e){for(;qc();)switch($s){case e:return dc;case 34:case 39:e!==34&&e!==39&&t4($s);break;case 40:e===41&&t4(e);break;case 92:qc();break}return dc}function lJ(e,t){for(;qc()&&e+$s!==57;)if(e+$s===84&&df()===47)break;return"/*"+Y2(t,dc-1)+"*"+qS(e===47?e:qc())}function cJ(e){for(;!l2(df());)qc();return Y2(e,dc)}function uJ(e){return R$(mw("",null,null,null,[""],e=I$(e),0,[0],e))}function mw(e,t,r,n,i,o,l,s,f){for(var p=0,v=0,x=l,S=0,A=0,k=0,R=1,z=1,N=1,B=0,U="",K=i,ne=o,ee=n,Q=U;z;)switch(k=B,B=qc()){case 40:if(k!=108&&Da(Q,x-1)==58){e4(Q+=Pi(gw(B),"&","&\f"),"&\f")!=-1&&(N=-1);break}case 34:case 39:case 91:Q+=gw(B);break;case 9:case 10:case 13:case 32:Q+=sJ(k);break;case 92:Q+=aJ(pw()-1,7);continue;case 47:switch(df()){case 42:case 47:fx(hJ(lJ(qc(),pw()),t,r),f);break;default:Q+="/"}break;case 123*R:s[p++]=ef(Q)*N;case 125*R:case 59:case 0:switch(B){case 0:case 125:z=0;case 59+v:N==-1&&(Q=Pi(Q,/\f/g,"")),A>0&&ef(Q)-x&&fx(A>32?MO(Q+";",n,r,x-1):MO(Pi(Q," ","")+";",n,r,x-2),f);break;case 59:Q+=";";default:if(fx(ee=kO(Q,t,r,p,v,i,s,U,K=[],ne=[],x),o),B===123)if(v===0)mw(Q,t,ee,ee,K,o,x,s,ne);else switch(S===99&&Da(Q,3)===110?100:S){case 100:case 108:case 109:case 115:mw(e,ee,ee,n&&fx(kO(e,ee,ee,0,0,i,s,U,i,K=[],x),ne),i,ne,x,s,n?K:ne);break;default:mw(Q,ee,ee,ee,[""],ne,0,s,ne)}}p=v=A=0,R=N=1,U=Q="",x=l;break;case 58:x=1+ef(Q),A=k;default:if(R<1){if(B==123)--R;else if(B==125&&R++==0&&oJ()==125)continue}switch(Q+=qS(B),B*R){case 38:N=v>0?1:(Q+="\f",-1);break;case 44:s[p++]=(ef(Q)-1)*N,N=1;break;case 64:df()===45&&(Q+=gw(qc())),S=df(),v=x=ef(U=Q+=cJ(pw())),B++;break;case 45:k===45&&ef(Q)==2&&(R=0)}}return o}function kO(e,t,r,n,i,o,l,s,f,p,v){for(var x=i-1,S=i===0?o:[""],A=rR(S),k=0,R=0,z=0;k<n;++k)for(var N=0,B=a2(e,x+1,x=QZ(R=l[k])),U=e;N<A;++N)(U=C$(R>0?S[N]+" "+B:Pi(B,/&\f/g,S[N])))&&(f[z++]=U);return XS(e,t,r,i===0?eR:s,f,p,v)}function hJ(e,t,r){return XS(e,t,r,E$,qS(iJ()),a2(e,2,-2),0)}function MO(e,t,r,n){return XS(e,t,r,tR,a2(e,0,n),a2(e,n+1,-1),n)}function Cy(e,t){for(var r="",n=rR(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function fJ(e,t,r,n){switch(e.type){case JZ:if(e.children.length)break;case ZZ:case tR:return e.return=e.return||e.value;case E$:return"";case T$:return e.return=e.value+"{"+Cy(e.children,n)+"}";case eR:e.value=e.props.join(",")}return ef(r=Cy(e.children,n))?e.return=e.value+"{"+r+"}":""}function dJ(e){var t=rR(e);return function(r,n,i,o){for(var l="",s=0;s<t;s++)l+=e[s](r,n,i,o)||"";return l}}function pJ(e){return function(t){t.root||(t=t.return)&&e(t)}}var gJ=function(t,r,n){for(var i=0,o=0;i=o,o=df(),i===38&&o===12&&(r[n]=1),!l2(o);)qc();return Y2(t,dc)},mJ=function(t,r){var n=-1,i=44;do switch(l2(i)){case 0:i===38&&df()===12&&(r[n]=1),t[n]+=gJ(dc-1,r,n);break;case 2:t[n]+=gw(i);break;case 4:if(i===44){t[++n]=df()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=qS(i)}while(i=qc());return t},yJ=function(t,r){return R$(mJ(I$(t),r))},OO=new WeakMap,_J=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!OO.get(n))&&!i){OO.set(t,!0);for(var o=[],l=yJ(r,o),s=n.props,f=0,p=0;f<l.length;f++)for(var v=0;v<s.length;v++,p++)t.props[p]=o[f]?l[f].replace(/&\f/g,s[v]):s[v]+" "+l[f]}}},vJ=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function k$(e,t){switch(tJ(e,t)){case 5103:return Ci+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ci+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ci+e+c5+e+dl+e+e;case 6828:case 4268:return Ci+e+dl+e+e;case 6165:return Ci+e+dl+"flex-"+e+e;case 5187:return Ci+e+Pi(e,/(\w+).+(:[^]+)/,Ci+"box-$1$2"+dl+"flex-$1$2")+e;case 5443:return Ci+e+dl+"flex-item-"+Pi(e,/flex-|-self/,"")+e;case 4675:return Ci+e+dl+"flex-line-pack"+Pi(e,/align-content|flex-|-self/,"")+e;case 5548:return Ci+e+dl+Pi(e,"shrink","negative")+e;case 5292:return Ci+e+dl+Pi(e,"basis","preferred-size")+e;case 6060:return Ci+"box-"+Pi(e,"-grow","")+Ci+e+dl+Pi(e,"grow","positive")+e;case 4554:return Ci+Pi(e,/([^-])(transform)/g,"$1"+Ci+"$2")+e;case 6187:return Pi(Pi(Pi(e,/(zoom-|grab)/,Ci+"$1"),/(image-set)/,Ci+"$1"),e,"")+e;case 5495:case 3959:return Pi(e,/(image-set\([^]*)/,Ci+"$1$`$1");case 4968:return Pi(Pi(e,/(.+:)(flex-)?(.*)/,Ci+"box-pack:$3"+dl+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ci+e+e;case 4095:case 3583:case 4068:case 2532:return Pi(e,/(.+)-inline(.+)/,Ci+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ef(e)-1-t>6)switch(Da(e,t+1)){case 109:if(Da(e,t+4)!==45)break;case 102:return Pi(e,/(.+:)(.+)-([^]+)/,"$1"+Ci+"$2-$3$1"+c5+(Da(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~e4(e,"stretch")?k$(Pi(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Da(e,t+1)!==115)break;case 6444:switch(Da(e,ef(e)-3-(~e4(e,"!important")&&10))){case 107:return Pi(e,":",":"+Ci)+e;case 101:return Pi(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ci+(Da(e,14)===45?"inline-":"")+"box$3$1"+Ci+"$2$3$1"+dl+"$2box$3")+e}break;case 5936:switch(Da(e,t+11)){case 114:return Ci+e+dl+Pi(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ci+e+dl+Pi(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ci+e+dl+Pi(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Ci+e+dl+e+e}return e}var bJ=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case tR:t.return=k$(t.value,t.length);break;case T$:return Cy([C1(t,{value:Pi(t.value,"@","@"+Ci)})],i);case eR:if(t.length)return nJ(t.props,function(o){switch(rJ(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Cy([C1(t,{props:[Pi(o,/:(read-\w+)/,":"+c5+"$1")]})],i);case"::placeholder":return Cy([C1(t,{props:[Pi(o,/:(plac\w+)/,":"+Ci+"input-$1")]}),C1(t,{props:[Pi(o,/:(plac\w+)/,":"+c5+"$1")]}),C1(t,{props:[Pi(o,/:(plac\w+)/,dl+"input-$1")]})],i)}return""})}},xJ=[bJ],wJ=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(R){var z=R.getAttribute("data-emotion");z.indexOf(" ")!==-1&&(document.head.appendChild(R),R.setAttribute("data-s",""))})}var i=t.stylisPlugins||xJ,o={},l,s=[];l=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(R){for(var z=R.getAttribute("data-emotion").split(" "),N=1;N<z.length;N++)o[z[N]]=!0;s.push(R)});var f,p=[_J,vJ];{var v,x=[fJ,pJ(function(R){v.insert(R)})],S=dJ(p.concat(i,x)),A=function(z){return Cy(uJ(z),S)};f=function(z,N,B,U){v=B,A(z?z+"{"+N.styles+"}":N.styles),U&&(k.inserted[N.name]=!0)}}var k={key:r,sheet:new YZ({key:r,container:l,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:f};return k.sheet.hydrate(s),k},M$={exports:{}},Vi={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ga=typeof Symbol=="function"&&Symbol.for,nR=ga?Symbol.for("react.element"):60103,iR=ga?Symbol.for("react.portal"):60106,KS=ga?Symbol.for("react.fragment"):60107,GS=ga?Symbol.for("react.strict_mode"):60108,YS=ga?Symbol.for("react.profiler"):60114,ZS=ga?Symbol.for("react.provider"):60109,JS=ga?Symbol.for("react.context"):60110,oR=ga?Symbol.for("react.async_mode"):60111,QS=ga?Symbol.for("react.concurrent_mode"):60111,e3=ga?Symbol.for("react.forward_ref"):60112,t3=ga?Symbol.for("react.suspense"):60113,SJ=ga?Symbol.for("react.suspense_list"):60120,r3=ga?Symbol.for("react.memo"):60115,n3=ga?Symbol.for("react.lazy"):60116,AJ=ga?Symbol.for("react.block"):60121,EJ=ga?Symbol.for("react.fundamental"):60117,TJ=ga?Symbol.for("react.responder"):60118,CJ=ga?Symbol.for("react.scope"):60119;function Yc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case nR:switch(e=e.type,e){case oR:case QS:case KS:case YS:case GS:case t3:return e;default:switch(e=e&&e.$$typeof,e){case JS:case e3:case n3:case r3:case ZS:return e;default:return t}}case iR:return t}}}function O$(e){return Yc(e)===QS}Vi.AsyncMode=oR;Vi.ConcurrentMode=QS;Vi.ContextConsumer=JS;Vi.ContextProvider=ZS;Vi.Element=nR;Vi.ForwardRef=e3;Vi.Fragment=KS;Vi.Lazy=n3;Vi.Memo=r3;Vi.Portal=iR;Vi.Profiler=YS;Vi.StrictMode=GS;Vi.Suspense=t3;Vi.isAsyncMode=function(e){return O$(e)||Yc(e)===oR};Vi.isConcurrentMode=O$;Vi.isContextConsumer=function(e){return Yc(e)===JS};Vi.isContextProvider=function(e){return Yc(e)===ZS};Vi.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===nR};Vi.isForwardRef=function(e){return Yc(e)===e3};Vi.isFragment=function(e){return Yc(e)===KS};Vi.isLazy=function(e){return Yc(e)===n3};Vi.isMemo=function(e){return Yc(e)===r3};Vi.isPortal=function(e){return Yc(e)===iR};Vi.isProfiler=function(e){return Yc(e)===YS};Vi.isStrictMode=function(e){return Yc(e)===GS};Vi.isSuspense=function(e){return Yc(e)===t3};Vi.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===KS||e===QS||e===YS||e===GS||e===t3||e===SJ||typeof e=="object"&&e!==null&&(e.$$typeof===n3||e.$$typeof===r3||e.$$typeof===ZS||e.$$typeof===JS||e.$$typeof===e3||e.$$typeof===EJ||e.$$typeof===TJ||e.$$typeof===CJ||e.$$typeof===AJ)};Vi.typeOf=Yc;M$.exports=Vi;var PJ=M$.exports,N$=PJ,IJ={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},RJ={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},D$={};D$[N$.ForwardRef]=IJ;D$[N$.Memo]=RJ;var kJ=!0;function MJ(e,t,r){var n="";return r.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(n+=i+" ")}),n}var L$=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||kJ===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},F$=function(t,r,n){L$(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var o=r;do t.insert(r===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function OJ(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var NJ={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},DJ=!1,LJ=/[A-Z]|^ms/g,FJ=/_EMO_([^_]+?)_([^]*?)_EMO_/g,B$=function(t){return t.charCodeAt(1)===45},NO=function(t){return t!=null&&typeof t!="boolean"},BE=A$(function(e){return B$(e)?e:e.replace(LJ,"-$&").toLowerCase()}),DO=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(FJ,function(n,i,o){return tf={name:i,styles:o,next:tf},i})}return NJ[t]!==1&&!B$(t)&&typeof r=="number"&&r!==0?r+"px":r},BJ="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function c2(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return tf={name:i.name,styles:i.styles,next:tf},i.name;var o=r;if(o.styles!==void 0){var l=o.next;if(l!==void 0)for(;l!==void 0;)tf={name:l.name,styles:l.styles,next:tf},l=l.next;var s=o.styles+";";return s}return zJ(e,t,r)}case"function":{if(e!==void 0){var f=tf,p=r(e);return tf=f,c2(e,t,p)}break}}var v=r;if(t==null)return v;var x=t[v];return x!==void 0?x:v}function zJ(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=c2(e,t,r[i])+";";else for(var o in r){var l=r[o];if(typeof l!="object"){var s=l;t!=null&&t[s]!==void 0?n+=o+"{"+t[s]+"}":NO(s)&&(n+=BE(o)+":"+DO(o,s)+";")}else{if(o==="NO_COMPONENT_SELECTOR"&&DJ)throw new Error(BJ);if(Array.isArray(l)&&typeof l[0]=="string"&&(t==null||t[l[0]]===void 0))for(var f=0;f<l.length;f++)NO(l[f])&&(n+=BE(o)+":"+DO(o,l[f])+";");else{var p=c2(e,t,l);switch(o){case"animation":case"animationName":{n+=BE(o)+":"+p+";";break}default:n+=o+"{"+p+"}"}}}}return n}var LO=/label:\s*([^\s;{]+)\s*(;|$)/g,tf;function i3(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,i="";tf=void 0;var o=e[0];if(o==null||o.raw===void 0)n=!1,i+=c2(r,t,o);else{var l=o;i+=l[0]}for(var s=1;s<e.length;s++)if(i+=c2(r,t,e[s]),n){var f=o;i+=f[s]}LO.lastIndex=0;for(var p="",v;(v=LO.exec(i))!==null;)p+="-"+v[1];var x=OJ(i)+p;return{name:x,styles:i,next:tf}}var $J=function(t){return t()},z$=sC.useInsertionEffect?sC.useInsertionEffect:!1,UJ=z$||$J,FO=z$||me.useLayoutEffect,$$=me.createContext(typeof HTMLElement<"u"?wJ({key:"css"}):null);$$.Provider;var U$=function(t){return me.forwardRef(function(r,n){var i=me.useContext($$);return t(r,i,n)})},O_=me.createContext({}),jJ=U$(function(e,t){var r=e.styles,n=i3([r],void 0,me.useContext(O_)),i=me.useRef();return FO(function(){var o=t.key+"-global",l=new t.sheet.constructor({key:o,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),s=!1,f=document.querySelector('style[data-emotion="'+o+" "+n.name+'"]');return t.sheet.tags.length&&(l.before=t.sheet.tags[0]),f!==null&&(s=!0,f.setAttribute("data-emotion",o),l.hydrate([f])),i.current=[l,s],function(){l.flush()}},[t]),FO(function(){var o=i.current,l=o[0],s=o[1];if(s){o[1]=!1;return}if(n.next!==void 0&&F$(t,n.next,!0),l.tags.length){var f=l.tags[l.tags.length-1].nextElementSibling;l.before=f,l.flush()}t.insert("",n,l,!1)},[t,n.name]),null});function sR(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i3(t)}var $p=function(){var t=sR.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},VJ=WZ,HJ=function(t){return t!=="theme"},BO=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?VJ:HJ},zO=function(t,r,n){var i;if(r){var o=r.shouldForwardProp;i=t.__emotion_forwardProp&&o?function(l){return t.__emotion_forwardProp(l)&&o(l)}:o}return typeof i!="function"&&n&&(i=t.__emotion_forwardProp),i},qJ=!1,WJ=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return L$(r,n,i),UJ(function(){return F$(r,n,i)}),null},XJ=function e(t,r){var n=t.__emotion_real===t,i=n&&t.__emotion_base||t,o,l;r!==void 0&&(o=r.label,l=r.target);var s=zO(t,r,n),f=s||BO(i),p=!f("as");return function(){var v=arguments,x=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(o!==void 0&&x.push("label:"+o+";"),v[0]==null||v[0].raw===void 0)x.push.apply(x,v);else{x.push(v[0][0]);for(var S=v.length,A=1;A<S;A++)x.push(v[A],v[0][A])}var k=U$(function(R,z,N){var B=p&&R.as||i,U="",K=[],ne=R;if(R.theme==null){ne={};for(var ee in R)ne[ee]=R[ee];ne.theme=me.useContext(O_)}typeof R.className=="string"?U=MJ(z.registered,K,R.className):R.className!=null&&(U=R.className+" ");var Q=i3(x.concat(K),z.registered,ne);U+=z.key+"-"+Q.name,l!==void 0&&(U+=" "+l);var re=p&&s===void 0?BO(B):f,Se={};for(var J in R)p&&J==="as"||re(J)&&(Se[J]=R[J]);return Se.className=U,N&&(Se.ref=N),me.createElement(me.Fragment,null,me.createElement(WJ,{cache:z,serialized:Q,isStringTag:typeof B=="string"}),me.createElement(B,Se))});return k.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",k.defaultProps=t.defaultProps,k.__emotion_real=k,k.__emotion_base=i,k.__emotion_styles=x,k.__emotion_forwardProp=s,Object.defineProperty(k,"toString",{value:function(){return l===void 0&&qJ?"NO_COMPONENT_SELECTOR":"."+l}}),k.withComponent=function(R,z){return e(R,l5({},r,z,{shouldForwardProp:zO(k,z,!0)})).apply(void 0,x)},k}},KJ=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],u2=XJ.bind();KJ.forEach(function(e){u2[e]=u2(e)});var j$={exports:{}},GJ="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",YJ=GJ,ZJ=YJ;function V$(){}function H$(){}H$.resetWarningCache=V$;var JJ=function(){function e(n,i,o,l,s,f){if(f!==ZJ){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:H$,resetWarningCache:V$};return r.PropTypes=r,r};j$.exports=JJ();var QJ=j$.exports;const ar=PS(QJ);function q$(e,t){return u2(e,t)}const eQ=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function Py(){return Py=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Py.apply(this,arguments)}function Jf(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function W$(e){if(!Jf(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=W$(e[r])}),t}function za(e,t,r={clone:!0}){const n=r.clone?Py({},e):e;return Jf(e)&&Jf(t)&&Object.keys(t).forEach(i=>{i!=="__proto__"&&(Jf(t[i])&&i in e&&Jf(e[i])?n[i]=za(e[i],t[i],r):r.clone?n[i]=Jf(t[i])?W$(t[i]):t[i]:n[i]=t[i])}),n}function tn(e){if(typeof e!="string")throw new Error(fh(7));return e.charAt(0).toUpperCase()+e.slice(1)}function r4(...e){return e.reduce((t,r)=>r==null?t:function(...i){t.apply(this,i),r.apply(this,i)},()=>{})}function aR(e,t=166){let r;function n(...i){const o=()=>{e.apply(this,i)};clearTimeout(r),r=setTimeout(o,t)}return n.clear=()=>{clearTimeout(r)},n}function tQ(e,t){return()=>null}function X$(e,t){var r,n;return me.isValidElement(e)&&t.indexOf((r=e.type.muiName)!=null?r:(n=e.type)==null||(n=n._payload)==null||(n=n.value)==null?void 0:n.muiName)!==-1}function Fa(e){return e&&e.ownerDocument||document}function Cu(e){return Fa(e).defaultView||window}function rQ(e,t){return()=>null}function u5(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const cd=typeof window<"u"?me.useLayoutEffect:me.useEffect;let $O=0;function nQ(e){const[t,r]=me.useState(e),n=e||t;return me.useEffect(()=>{t==null&&($O+=1,r(`mui-${$O}`))},[t]),n}const UO=sC.useId;function iQ(e){if(UO!==void 0){const t=UO();return e??t}return nQ(e)}function oQ(e,t,r,n,i){return null}function K$({controlled:e,default:t,name:r,state:n="value"}){const{current:i}=me.useRef(e!==void 0),[o,l]=me.useState(t),s=i?e:o,f=me.useCallback(p=>{i||l(p)},[]);return[s,f]}function af(e){const t=me.useRef(e);return cd(()=>{t.current=e}),me.useRef((...r)=>(0,t.current)(...r)).current}function pc(...e){return me.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{u5(r,t)})},e)}const jO={};function sQ(e,t){const r=me.useRef(jO);return r.current===jO&&(r.current=e(t)),r}const aQ=[];function lQ(e){me.useEffect(e,aQ)}let G$=class Y${constructor(){this.currentId=0,this.clear=()=>{this.currentId!==0&&(clearTimeout(this.currentId),this.currentId=0)},this.disposeEffect=()=>this.clear}static create(){return new Y$}start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=0,r()},t)}};function Z$(){const e=sQ(G$.create).current;return lQ(e.disposeEffect),e}let o3=!0,n4=!1;const cQ=new G$,uQ={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function hQ(e){const{type:t,tagName:r}=e;return!!(r==="INPUT"&&uQ[t]&&!e.readOnly||r==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function fQ(e){e.metaKey||e.altKey||e.ctrlKey||(o3=!0)}function zE(){o3=!1}function dQ(){this.visibilityState==="hidden"&&n4&&(o3=!0)}function pQ(e){e.addEventListener("keydown",fQ,!0),e.addEventListener("mousedown",zE,!0),e.addEventListener("pointerdown",zE,!0),e.addEventListener("touchstart",zE,!0),e.addEventListener("visibilitychange",dQ,!0)}function gQ(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return o3||hQ(t)}function J$(){const e=me.useCallback(i=>{i!=null&&pQ(i.ownerDocument)},[]),t=me.useRef(!1);function r(){return t.current?(n4=!0,cQ.start(100,()=>{n4=!1}),t.current=!1,!0):!1}function n(i){return gQ(i)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:n,onBlur:r,ref:e}}function Q$(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}function mQ(e){return me.Children.toArray(e).filter(t=>me.isValidElement(t))}function s3(e,t){const r=Py({},t);return Object.keys(e).forEach(n=>{if(n.toString().match(/^(components|slots)$/))r[n]=Py({},e[n],r[n]);else if(n.toString().match(/^(componentsProps|slotProps)$/)){const i=e[n]||{},o=t[n];r[n]={},!o||!Object.keys(o)?r[n]=i:!i||!Object.keys(i)?r[n]=o:(r[n]=Py({},o),Object.keys(i).forEach(l=>{r[n][l]=s3(i[l],o[l])}))}else r[n]===void 0&&(r[n]=e[n])}),r}function us(e,t,r=void 0){const n={};return Object.keys(e).forEach(i=>{n[i]=e[i].reduce((o,l)=>{if(l){const s=t(l);s!==""&&o.push(s),r&&r[l]&&o.push(r[l])}return o},[]).join(" ")}),n}const VO=e=>e,yQ=()=>{let e=VO;return{configure(t){e=t},generate(t){return e(t)},reset(){e=VO}}},a3=yQ(),_Q={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Wo(e,t,r="Mui"){const n=_Q[t];return n?`${r}-${n}`:`${a3.generate(e)}-${t}`}function po(e,t,r="Mui"){const n={};return t.forEach(i=>{n[i]=Wo(e,i,r)}),n}function eU(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}const vQ=["values","unit","step"],bQ=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,n)=>r.val-n.val),t.reduce((r,n)=>bt({},r,{[n.key]:n.val}),{})};function xQ(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:n=5}=e,i=Pn(e,vQ),o=bQ(t),l=Object.keys(o);function s(S){return`@media (min-width:${typeof t[S]=="number"?t[S]:S}${r})`}function f(S){return`@media (max-width:${(typeof t[S]=="number"?t[S]:S)-n/100}${r})`}function p(S,A){const k=l.indexOf(A);return`@media (min-width:${typeof t[S]=="number"?t[S]:S}${r}) and (max-width:${(k!==-1&&typeof t[l[k]]=="number"?t[l[k]]:A)-n/100}${r})`}function v(S){return l.indexOf(S)+1<l.length?p(S,l[l.indexOf(S)+1]):s(S)}function x(S){const A=l.indexOf(S);return A===0?s(l[1]):A===l.length-1?f(l[A]):p(S,l[l.indexOf(S)+1]).replace("@media","@media not all and")}return bt({keys:l,values:o,up:s,down:f,between:p,only:v,not:x,unit:r},i)}const wQ={borderRadius:4};function Cv(e,t){return t?za(e,t,{clone:!1}):e}const lR={xs:0,sm:600,md:900,lg:1200,xl:1536},HO={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${lR[e]}px)`};function ud(e,t,r){const n=e.theme||{};if(Array.isArray(t)){const o=n.breakpoints||HO;return t.reduce((l,s,f)=>(l[o.up(o.keys[f])]=r(t[f]),l),{})}if(typeof t=="object"){const o=n.breakpoints||HO;return Object.keys(t).reduce((l,s)=>{if(Object.keys(o.values||lR).indexOf(s)!==-1){const f=o.up(s);l[f]=r(t[s],s)}else{const f=s;l[f]=t[f]}return l},{})}return r(t)}function SQ(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((n,i)=>{const o=e.up(i);return n[o]={},n},{}))||{}}function AQ(e,t){return e.reduce((r,n)=>{const i=r[n];return(!i||Object.keys(i).length===0)&&delete r[n],r},t)}function l3(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const n=`vars.${t}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,e);if(n!=null)return n}return t.split(".").reduce((n,i)=>n&&n[i]!=null?n[i]:null,e)}function h5(e,t,r,n=r){let i;return typeof e=="function"?i=e(r):Array.isArray(e)?i=e[r]||n:i=l3(e,r)||n,t&&(i=t(i,n,e)),i}function ws(e){const{prop:t,cssProperty:r=e.prop,themeKey:n,transform:i}=e,o=l=>{if(l[t]==null)return null;const s=l[t],f=l.theme,p=l3(f,n)||{};return ud(l,s,x=>{let S=h5(p,i,x);return x===S&&typeof x=="string"&&(S=h5(p,i,`${t}${x==="default"?"":tn(x)}`,x)),r===!1?S:{[r]:S}})};return o.propTypes={},o.filterProps=[t],o}function EQ(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const TQ={m:"margin",p:"padding"},CQ={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},qO={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},PQ=EQ(e=>{if(e.length>2)if(qO[e])e=qO[e];else return[e];const[t,r]=e.split(""),n=TQ[t],i=CQ[r]||"";return Array.isArray(i)?i.map(o=>n+o):[n+i]}),cR=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],uR=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...cR,...uR];function Z2(e,t,r,n){var i;const o=(i=l3(e,t,!1))!=null?i:r;return typeof o=="number"?l=>typeof l=="string"?l:o*l:Array.isArray(o)?l=>typeof l=="string"?l:o[l]:typeof o=="function"?o:()=>{}}function tU(e){return Z2(e,"spacing",8)}function J2(e,t){if(typeof t=="string"||t==null)return t;const r=Math.abs(t),n=e(r);return t>=0?n:typeof n=="number"?-n:`-${n}`}function IQ(e,t){return r=>e.reduce((n,i)=>(n[i]=J2(t,r),n),{})}function RQ(e,t,r,n){if(t.indexOf(r)===-1)return null;const i=PQ(r),o=IQ(i,n),l=e[r];return ud(e,l,o)}function rU(e,t){const r=tU(e.theme);return Object.keys(e).map(n=>RQ(e,t,n,r)).reduce(Cv,{})}function ts(e){return rU(e,cR)}ts.propTypes={};ts.filterProps=cR;function rs(e){return rU(e,uR)}rs.propTypes={};rs.filterProps=uR;function kQ(e=8){if(e.mui)return e;const t=tU({spacing:e}),r=(...n)=>(n.length===0?[1]:n).map(o=>{const l=t(o);return typeof l=="number"?`${l}px`:l}).join(" ");return r.mui=!0,r}function c3(...e){const t=e.reduce((n,i)=>(i.filterProps.forEach(o=>{n[o]=i}),n),{}),r=n=>Object.keys(n).reduce((i,o)=>t[o]?Cv(i,t[o](n)):i,{});return r.propTypes={},r.filterProps=e.reduce((n,i)=>n.concat(i.filterProps),[]),r}function vu(e){return typeof e!="number"?e:`${e}px solid`}function Ou(e,t){return ws({prop:e,themeKey:"borders",transform:t})}const MQ=Ou("border",vu),OQ=Ou("borderTop",vu),NQ=Ou("borderRight",vu),DQ=Ou("borderBottom",vu),LQ=Ou("borderLeft",vu),FQ=Ou("borderColor"),BQ=Ou("borderTopColor"),zQ=Ou("borderRightColor"),$Q=Ou("borderBottomColor"),UQ=Ou("borderLeftColor"),jQ=Ou("outline",vu),VQ=Ou("outlineColor"),u3=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Z2(e.theme,"shape.borderRadius",4),r=n=>({borderRadius:J2(t,n)});return ud(e,e.borderRadius,r)}return null};u3.propTypes={};u3.filterProps=["borderRadius"];c3(MQ,OQ,NQ,DQ,LQ,FQ,BQ,zQ,$Q,UQ,u3,jQ,VQ);const h3=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Z2(e.theme,"spacing",8),r=n=>({gap:J2(t,n)});return ud(e,e.gap,r)}return null};h3.propTypes={};h3.filterProps=["gap"];const f3=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Z2(e.theme,"spacing",8),r=n=>({columnGap:J2(t,n)});return ud(e,e.columnGap,r)}return null};f3.propTypes={};f3.filterProps=["columnGap"];const d3=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Z2(e.theme,"spacing",8),r=n=>({rowGap:J2(t,n)});return ud(e,e.rowGap,r)}return null};d3.propTypes={};d3.filterProps=["rowGap"];const HQ=ws({prop:"gridColumn"}),qQ=ws({prop:"gridRow"}),WQ=ws({prop:"gridAutoFlow"}),XQ=ws({prop:"gridAutoColumns"}),KQ=ws({prop:"gridAutoRows"}),GQ=ws({prop:"gridTemplateColumns"}),YQ=ws({prop:"gridTemplateRows"}),ZQ=ws({prop:"gridTemplateAreas"}),JQ=ws({prop:"gridArea"});c3(h3,f3,d3,HQ,qQ,WQ,XQ,KQ,GQ,YQ,ZQ,JQ);function Iy(e,t){return t==="grey"?t:e}const QQ=ws({prop:"color",themeKey:"palette",transform:Iy}),eee=ws({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Iy}),tee=ws({prop:"backgroundColor",themeKey:"palette",transform:Iy});c3(QQ,eee,tee);function $c(e){return e<=1&&e!==0?`${e*100}%`:e}const ree=ws({prop:"width",transform:$c}),hR=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var n,i;const o=((n=e.theme)==null||(n=n.breakpoints)==null||(n=n.values)==null?void 0:n[r])||lR[r];return o?((i=e.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${o}${e.theme.breakpoints.unit}`}:{maxWidth:o}:{maxWidth:$c(r)}};return ud(e,e.maxWidth,t)}return null};hR.filterProps=["maxWidth"];const nee=ws({prop:"minWidth",transform:$c}),iee=ws({prop:"height",transform:$c}),oee=ws({prop:"maxHeight",transform:$c}),see=ws({prop:"minHeight",transform:$c});ws({prop:"size",cssProperty:"width",transform:$c});ws({prop:"size",cssProperty:"height",transform:$c});const aee=ws({prop:"boxSizing"});c3(ree,hR,nee,iee,oee,see,aee);const p3={border:{themeKey:"borders",transform:vu},borderTop:{themeKey:"borders",transform:vu},borderRight:{themeKey:"borders",transform:vu},borderBottom:{themeKey:"borders",transform:vu},borderLeft:{themeKey:"borders",transform:vu},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:vu},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:u3},color:{themeKey:"palette",transform:Iy},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Iy},backgroundColor:{themeKey:"palette",transform:Iy},p:{style:rs},pt:{style:rs},pr:{style:rs},pb:{style:rs},pl:{style:rs},px:{style:rs},py:{style:rs},padding:{style:rs},paddingTop:{style:rs},paddingRight:{style:rs},paddingBottom:{style:rs},paddingLeft:{style:rs},paddingX:{style:rs},paddingY:{style:rs},paddingInline:{style:rs},paddingInlineStart:{style:rs},paddingInlineEnd:{style:rs},paddingBlock:{style:rs},paddingBlockStart:{style:rs},paddingBlockEnd:{style:rs},m:{style:ts},mt:{style:ts},mr:{style:ts},mb:{style:ts},ml:{style:ts},mx:{style:ts},my:{style:ts},margin:{style:ts},marginTop:{style:ts},marginRight:{style:ts},marginBottom:{style:ts},marginLeft:{style:ts},marginX:{style:ts},marginY:{style:ts},marginInline:{style:ts},marginInlineStart:{style:ts},marginInlineEnd:{style:ts},marginBlock:{style:ts},marginBlockStart:{style:ts},marginBlockEnd:{style:ts},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:h3},rowGap:{style:d3},columnGap:{style:f3},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:$c},maxWidth:{style:hR},minWidth:{transform:$c},height:{transform:$c},maxHeight:{transform:$c},minHeight:{transform:$c},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function lee(...e){const t=e.reduce((n,i)=>n.concat(Object.keys(i)),[]),r=new Set(t);return e.every(n=>r.size===Object.keys(n).length)}function cee(e,t){return typeof e=="function"?e(t):e}function uee(){function e(r,n,i,o){const l={[r]:n,theme:i},s=o[r];if(!s)return{[r]:n};const{cssProperty:f=r,themeKey:p,transform:v,style:x}=s;if(n==null)return null;if(p==="typography"&&n==="inherit")return{[r]:n};const S=l3(i,p)||{};return x?x(l):ud(l,n,k=>{let R=h5(S,v,k);return k===R&&typeof k=="string"&&(R=h5(S,v,`${r}${k==="default"?"":tn(k)}`,k)),f===!1?R:{[f]:R}})}function t(r){var n;const{sx:i,theme:o={}}=r||{};if(!i)return null;const l=(n=o.unstable_sxConfig)!=null?n:p3;function s(f){let p=f;if(typeof f=="function")p=f(o);else if(typeof f!="object")return f;if(!p)return null;const v=SQ(o.breakpoints),x=Object.keys(v);let S=v;return Object.keys(p).forEach(A=>{const k=cee(p[A],o);if(k!=null)if(typeof k=="object")if(l[A])S=Cv(S,e(A,k,o,l));else{const R=ud({theme:o},k,z=>({[A]:z}));lee(R,k)?S[A]=t({sx:k,theme:o}):S=Cv(S,R)}else S=Cv(S,e(A,k,o,l))}),AQ(x,S)}return Array.isArray(i)?i.map(s):s(i)}return t}const Q2=uee();Q2.filterProps=["sx"];function hee(e,t){const r=this;return r.vars&&typeof r.getColorSchemeSelector=="function"?{[r.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:r.palette.mode===e?t:{}}const fee=["breakpoints","palette","spacing","shape"];function fR(e={},...t){const{breakpoints:r={},palette:n={},spacing:i,shape:o={}}=e,l=Pn(e,fee),s=xQ(r),f=kQ(i);let p=za({breakpoints:s,direction:"ltr",components:{},palette:bt({mode:"light"},n),spacing:f,shape:bt({},wQ,o)},l);return p.applyStyles=hee,p=t.reduce((v,x)=>za(v,x),p),p.unstable_sxConfig=bt({},p3,l==null?void 0:l.unstable_sxConfig),p.unstable_sx=function(x){return Q2({sx:x,theme:this})},p}function dee(e){return Object.keys(e).length===0}function dR(e=null){const t=me.useContext(O_);return!t||dee(t)?e:t}const pee=fR();function pR(e=pee){return dR(e)}const gee=["sx"],mee=e=>{var t,r;const n={systemProps:{},otherProps:{}},i=(t=e==null||(r=e.theme)==null?void 0:r.unstable_sxConfig)!=null?t:p3;return Object.keys(e).forEach(o=>{i[o]?n.systemProps[o]=e[o]:n.otherProps[o]=e[o]}),n};function nU(e){const{sx:t}=e,r=Pn(e,gee),{systemProps:n,otherProps:i}=mee(r);let o;return Array.isArray(t)?o=[n,...t]:typeof t=="function"?o=(...l)=>{const s=t(...l);return Jf(s)?bt({},n,s):n}:o=bt({},n,t),bt({},i,{sx:o})}function iU(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=iU(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ln(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=iU(e))&&(n&&(n+=" "),n+=t);return n}const yee=["className","component"];function oU(e={}){const{themeId:t,defaultTheme:r,defaultClassName:n="MuiBox-root",generateClassName:i}=e,o=q$("div",{shouldForwardProp:s=>s!=="theme"&&s!=="sx"&&s!=="as"})(Q2);return me.forwardRef(function(f,p){const v=pR(r),x=nU(f),{className:S,component:A="div"}=x,k=Pn(x,yee);return xt.jsx(o,bt({as:A,ref:p,className:Ln(S,i?i(n):n),theme:t&&v[t]||v},k))})}const _ee=po("MuiBox",["root"]),vee=oU({defaultClassName:_ee.root,generateClassName:a3.generate}),bee=["ownerState"],xee=["variants"],wee=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function See(e){return Object.keys(e).length===0}function Aee(e){return typeof e=="string"&&e.charCodeAt(0)>96}function yw(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Eee=fR(),Tee=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function dx({defaultTheme:e,theme:t,themeId:r}){return See(t)?e:t[r]||t}function Cee(e){return e?(t,r)=>r[e]:null}function _w(e,t){let{ownerState:r}=t,n=Pn(t,bee);const i=typeof e=="function"?e(bt({ownerState:r},n)):e;if(Array.isArray(i))return i.flatMap(o=>_w(o,bt({ownerState:r},n)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:o=[]}=i;let s=Pn(i,xee);return o.forEach(f=>{let p=!0;typeof f.props=="function"?p=f.props(bt({ownerState:r},n)):Object.keys(f.props).forEach(v=>{(r==null?void 0:r[v])!==f.props[v]&&n[v]!==f.props[v]&&(p=!1)}),p&&(Array.isArray(s)||(s=[s]),s.push(typeof f.style=="function"?f.style(bt({ownerState:r},n)):f.style))}),s}return i}function sU(e={}){const{themeId:t,defaultTheme:r=Eee,rootShouldForwardProp:n=yw,slotShouldForwardProp:i=yw}=e,o=l=>Q2(bt({},l,{theme:dx(bt({},l,{defaultTheme:r,themeId:t}))}));return o.__mui_systemSx=!0,(l,s={})=>{eQ(l,ne=>ne.filter(ee=>!(ee!=null&&ee.__mui_systemSx)));const{name:f,slot:p,skipVariantsResolver:v,skipSx:x,overridesResolver:S=Cee(Tee(p))}=s,A=Pn(s,wee),k=v!==void 0?v:p&&p!=="Root"&&p!=="root"||!1,R=x||!1;let z,N=yw;p==="Root"||p==="root"?N=n:p?N=i:Aee(l)&&(N=void 0);const B=q$(l,bt({shouldForwardProp:N,label:z},A)),U=ne=>typeof ne=="function"&&ne.__emotion_real!==ne||Jf(ne)?ee=>_w(ne,bt({},ee,{theme:dx({theme:ee.theme,defaultTheme:r,themeId:t})})):ne,K=(ne,...ee)=>{let Q=U(ne);const re=ee?ee.map(U):[];f&&S&&re.push(G=>{const se=dx(bt({},G,{defaultTheme:r,themeId:t}));if(!se.components||!se.components[f]||!se.components[f].styleOverrides)return null;const ve=se.components[f].styleOverrides,ge={};return Object.entries(ve).forEach(([je,$e])=>{ge[je]=_w($e,bt({},G,{theme:se}))}),S(G,ge)}),f&&!k&&re.push(G=>{var se;const ve=dx(bt({},G,{defaultTheme:r,themeId:t})),ge=ve==null||(se=ve.components)==null||(se=se[f])==null?void 0:se.variants;return _w({variants:ge},bt({},G,{theme:ve}))}),R||re.push(o);const Se=re.length-ee.length;if(Array.isArray(ne)&&Se>0){const G=new Array(Se).fill("");Q=[...ne,...G],Q.raw=[...ne.raw,...G]}const J=B(Q,...re);return l.muiName&&(J.muiName=l.muiName),J};return B.withConfig&&(K.withConfig=B.withConfig),K}}const N_=sU();function aU(e){const{theme:t,name:r,props:n}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?n:s3(t.components[r].defaultProps,n)}function lU({props:e,name:t,defaultTheme:r,themeId:n}){let i=pR(r);return n&&(i=i[n]||i),aU({theme:i,name:t,props:e})}function gR(e,t=0,r=1){return eU(e,t,r)}function Pee(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(n=>n+n)),r?`rgb${r.length===4?"a":""}(${r.map((n,i)=>i<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function Qg(e){if(e.type)return e;if(e.charAt(0)==="#")return Qg(Pee(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error(fh(9,e));let n=e.substring(t+1,e.length-1),i;if(r==="color"){if(n=n.split(" "),i=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(fh(10,i))}else n=n.split(",");return n=n.map(o=>parseFloat(o)),{type:r,values:n,colorSpace:i}}function g3(e){const{type:t,colorSpace:r}=e;let{values:n}=e;return t.indexOf("rgb")!==-1?n=n.map((i,o)=>o<3?parseInt(i,10):i):t.indexOf("hsl")!==-1&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.indexOf("color")!==-1?n=`${r} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function Iee(e){e=Qg(e);const{values:t}=e,r=t[0],n=t[1]/100,i=t[2]/100,o=n*Math.min(i,1-i),l=(p,v=(p+r/30)%12)=>i-o*Math.max(Math.min(v-3,9-v,1),-1);let s="rgb";const f=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return e.type==="hsla"&&(s+="a",f.push(t[3])),g3({type:s,values:f})}function WO(e){e=Qg(e);let t=e.type==="hsl"||e.type==="hsla"?Qg(Iee(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Ree(e,t){const r=WO(e),n=WO(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function Nl(e,t){return e=Qg(e),t=gR(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,g3(e)}function kee(e,t){if(e=Qg(e),t=gR(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]*=1-t;return g3(e)}function Mee(e,t){if(e=Qg(e),t=gR(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return g3(e)}const cU=me.createContext(null);function uU(){return me.useContext(cU)}const Oee=typeof Symbol=="function"&&Symbol.for,Nee=Oee?Symbol.for("mui.nested"):"__THEME_NESTED__";function Dee(e,t){return typeof t=="function"?t(e):bt({},e,t)}function Lee(e){const{children:t,theme:r}=e,n=uU(),i=me.useMemo(()=>{const o=n===null?r:Dee(n,r);return o!=null&&(o[Nee]=n!==null),o},[r,n]);return xt.jsx(cU.Provider,{value:i,children:t})}const XO={};function KO(e,t,r,n=!1){return me.useMemo(()=>{const i=e&&t[e]||t;if(typeof r=="function"){const o=r(i),l=e?bt({},t,{[e]:o}):o;return n?()=>l:l}return e?bt({},t,{[e]:r}):bt({},t,r)},[e,t,r,n])}function Fee(e){const{children:t,theme:r,themeId:n}=e,i=dR(XO),o=uU()||XO,l=KO(n,i,r),s=KO(n,o,r,!0);return xt.jsx(Lee,{theme:s,children:xt.jsx(O_.Provider,{value:l,children:t})})}function Bee(e,t){return bt({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const h2={black:"#000",white:"#fff"},zee={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},e0={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},t0={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},P1={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},r0={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},n0={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},i0={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},$ee=["mode","contrastThreshold","tonalOffset"],GO={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:h2.white,default:h2.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},$E={text:{primary:h2.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:h2.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function YO(e,t,r,n){const i=n.light||n,o=n.dark||n*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=Mee(e.main,i):t==="dark"&&(e.dark=kee(e.main,o)))}function Uee(e="light"){return e==="dark"?{main:r0[200],light:r0[50],dark:r0[400]}:{main:r0[700],light:r0[400],dark:r0[800]}}function jee(e="light"){return e==="dark"?{main:e0[200],light:e0[50],dark:e0[400]}:{main:e0[500],light:e0[300],dark:e0[700]}}function Vee(e="light"){return e==="dark"?{main:t0[500],light:t0[300],dark:t0[700]}:{main:t0[700],light:t0[400],dark:t0[800]}}function Hee(e="light"){return e==="dark"?{main:n0[400],light:n0[300],dark:n0[700]}:{main:n0[700],light:n0[500],dark:n0[900]}}function qee(e="light"){return e==="dark"?{main:i0[400],light:i0[300],dark:i0[700]}:{main:i0[800],light:i0[500],dark:i0[900]}}function Wee(e="light"){return e==="dark"?{main:P1[400],light:P1[300],dark:P1[700]}:{main:"#ed6c02",light:P1[500],dark:P1[900]}}function Xee(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:n=.2}=e,i=Pn(e,$ee),o=e.primary||Uee(t),l=e.secondary||jee(t),s=e.error||Vee(t),f=e.info||Hee(t),p=e.success||qee(t),v=e.warning||Wee(t);function x(R){return Ree(R,$E.text.primary)>=r?$E.text.primary:GO.text.primary}const S=({color:R,name:z,mainShade:N=500,lightShade:B=300,darkShade:U=700})=>{if(R=bt({},R),!R.main&&R[N]&&(R.main=R[N]),!R.hasOwnProperty("main"))throw new Error(fh(11,z?` (${z})`:"",N));if(typeof R.main!="string")throw new Error(fh(12,z?` (${z})`:"",JSON.stringify(R.main)));return YO(R,"light",B,n),YO(R,"dark",U,n),R.contrastText||(R.contrastText=x(R.main)),R},A={dark:$E,light:GO};return za(bt({common:bt({},h2),mode:t,primary:S({color:o,name:"primary"}),secondary:S({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:S({color:s,name:"error"}),warning:S({color:v,name:"warning"}),info:S({color:f,name:"info"}),success:S({color:p,name:"success"}),grey:zee,contrastThreshold:r,getContrastText:x,augmentColor:S,tonalOffset:n},A[t]),i)}const Kee=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function Gee(e){return Math.round(e*1e5)/1e5}const ZO={textTransform:"uppercase"},JO='"Roboto", "Helvetica", "Arial", sans-serif';function Yee(e,t){const r=typeof t=="function"?t(e):t,{fontFamily:n=JO,fontSize:i=14,fontWeightLight:o=300,fontWeightRegular:l=400,fontWeightMedium:s=500,fontWeightBold:f=700,htmlFontSize:p=16,allVariants:v,pxToRem:x}=r,S=Pn(r,Kee),A=i/14,k=x||(N=>`${N/p*A}rem`),R=(N,B,U,K,ne)=>bt({fontFamily:n,fontWeight:N,fontSize:k(B),lineHeight:U},n===JO?{letterSpacing:`${Gee(K/B)}em`}:{},ne,v),z={h1:R(o,96,1.167,-1.5),h2:R(o,60,1.2,-.5),h3:R(l,48,1.167,0),h4:R(l,34,1.235,.25),h5:R(l,24,1.334,0),h6:R(s,20,1.6,.15),subtitle1:R(l,16,1.75,.15),subtitle2:R(s,14,1.57,.1),body1:R(l,16,1.5,.15),body2:R(l,14,1.43,.15),button:R(s,14,1.75,.4,ZO),caption:R(l,12,1.66,.4),overline:R(l,12,2.66,1,ZO),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return za(bt({htmlFontSize:p,pxToRem:k,fontFamily:n,fontSize:i,fontWeightLight:o,fontWeightRegular:l,fontWeightMedium:s,fontWeightBold:f},z),S,{clone:!1})}const Zee=.2,Jee=.14,Qee=.12;function Io(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${Zee})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${Jee})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${Qee})`].join(",")}const ete=["none",Io(0,2,1,-1,0,1,1,0,0,1,3,0),Io(0,3,1,-2,0,2,2,0,0,1,5,0),Io(0,3,3,-2,0,3,4,0,0,1,8,0),Io(0,2,4,-1,0,4,5,0,0,1,10,0),Io(0,3,5,-1,0,5,8,0,0,1,14,0),Io(0,3,5,-1,0,6,10,0,0,1,18,0),Io(0,4,5,-2,0,7,10,1,0,2,16,1),Io(0,5,5,-3,0,8,10,1,0,3,14,2),Io(0,5,6,-3,0,9,12,1,0,3,16,2),Io(0,6,6,-3,0,10,14,1,0,4,18,3),Io(0,6,7,-4,0,11,15,1,0,4,20,3),Io(0,7,8,-4,0,12,17,2,0,5,22,4),Io(0,7,8,-4,0,13,19,2,0,5,24,4),Io(0,7,9,-4,0,14,21,2,0,5,26,4),Io(0,8,9,-5,0,15,22,2,0,6,28,5),Io(0,8,10,-5,0,16,24,2,0,6,30,5),Io(0,8,11,-5,0,17,26,2,0,6,32,5),Io(0,9,11,-5,0,18,28,2,0,7,34,6),Io(0,9,12,-6,0,19,29,2,0,7,36,6),Io(0,10,13,-6,0,20,31,3,0,8,38,7),Io(0,10,13,-6,0,21,33,3,0,8,40,7),Io(0,10,14,-6,0,22,35,3,0,8,42,7),Io(0,11,14,-7,0,23,36,3,0,9,44,8),Io(0,11,15,-7,0,24,38,3,0,9,46,8)],tte=["duration","easing","delay"],rte={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},nte={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function QO(e){return`${Math.round(e)}ms`}function ite(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function ote(e){const t=bt({},rte,e.easing),r=bt({},nte,e.duration);return bt({getAutoHeightDuration:ite,create:(i=["all"],o={})=>{const{duration:l=r.standard,easing:s=t.easeInOut,delay:f=0}=o;return Pn(o,tte),(Array.isArray(i)?i:[i]).map(p=>`${p} ${typeof l=="string"?l:QO(l)} ${s} ${typeof f=="string"?f:QO(f)}`).join(",")}},e,{easing:t,duration:r})}const ste={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},ate=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function eb(e={},...t){const{mixins:r={},palette:n={},transitions:i={},typography:o={}}=e,l=Pn(e,ate);if(e.vars)throw new Error(fh(18));const s=Xee(n),f=fR(e);let p=za(f,{mixins:Bee(f.breakpoints,r),palette:s,shadows:ete.slice(),typography:Yee(s,o),transitions:ote(i),zIndex:bt({},ste)});return p=za(p,l),p=t.reduce((v,x)=>za(v,x),p),p.unstable_sxConfig=bt({},p3,l==null?void 0:l.unstable_sxConfig),p.unstable_sx=function(x){return Q2({sx:x,theme:this})},p}const mR=eb();function fm(){const e=pR(mR);return e[u_]||e}function Ss({props:e,name:t}){return lU({props:e,name:t,defaultTheme:mR,themeId:u_})}const dm=e=>yw(e)&&e!=="classes",mn=sU({themeId:u_,defaultTheme:mR,rootShouldForwardProp:dm}),lte=["theme"];function cte(e){let{theme:t}=e,r=Pn(e,lte);const n=t[u_];return xt.jsx(Fee,bt({},r,{themeId:n?u_:void 0,theme:n||t}))}const eN=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)};let px;const ute=new Uint8Array(16);function hte(){if(!px&&(px=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!px))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return px(ute)}const ka=[];for(let e=0;e<256;++e)ka.push((e+256).toString(16).slice(1));function fte(e,t=0){return ka[e[t+0]]+ka[e[t+1]]+ka[e[t+2]]+ka[e[t+3]]+"-"+ka[e[t+4]]+ka[e[t+5]]+"-"+ka[e[t+6]]+ka[e[t+7]]+"-"+ka[e[t+8]]+ka[e[t+9]]+"-"+ka[e[t+10]]+ka[e[t+11]]+ka[e[t+12]]+ka[e[t+13]]+ka[e[t+14]]+ka[e[t+15]]}const dte=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),tN={randomUUID:dte};function f2(e,t,r){if(tN.randomUUID&&!t&&!e)return tN.randomUUID();e=e||{};const n=e.random||(e.rng||hte)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,fte(n)}function pte(e){return Wo("MuiSvgIcon",e)}po("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const gte=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],mte=e=>{const{color:t,fontSize:r,classes:n}=e,i={root:["root",t!=="inherit"&&`color${tn(t)}`,`fontSize${tn(r)}`]};return us(i,pte,n)},yte=mn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${tn(r.color)}`],t[`fontSize${tn(r.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var r,n,i,o,l,s,f,p,v,x,S,A,k;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(r=e.transitions)==null||(n=r.create)==null?void 0:n.call(r,"fill",{duration:(i=e.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((o=e.typography)==null||(l=o.pxToRem)==null?void 0:l.call(o,20))||"1.25rem",medium:((s=e.typography)==null||(f=s.pxToRem)==null?void 0:f.call(s,24))||"1.5rem",large:((p=e.typography)==null||(v=p.pxToRem)==null?void 0:v.call(p,35))||"2.1875rem"}[t.fontSize],color:(x=(S=(e.vars||e).palette)==null||(S=S[t.color])==null?void 0:S.main)!=null?x:{action:(A=(e.vars||e).palette)==null||(A=A.action)==null?void 0:A.active,disabled:(k=(e.vars||e).palette)==null||(k=k.action)==null?void 0:k.disabled,inherit:void 0}[t.color]}}),i4=me.forwardRef(function(t,r){const n=Ss({props:t,name:"MuiSvgIcon"}),{children:i,className:o,color:l="inherit",component:s="svg",fontSize:f="medium",htmlColor:p,inheritViewBox:v=!1,titleAccess:x,viewBox:S="0 0 24 24"}=n,A=Pn(n,gte),k=me.isValidElement(i)&&i.type==="svg",R=bt({},n,{color:l,component:s,fontSize:f,instanceFontSize:t.fontSize,inheritViewBox:v,viewBox:S,hasSvgAsChild:k}),z={};v||(z.viewBox=S);const N=mte(R);return xt.jsxs(yte,bt({as:s,className:Ln(N.root,o),focusable:"false",color:p,"aria-hidden":x?void 0:!0,role:x?"img":void 0,ref:r},z,A,k&&i.props,{ownerState:R,children:[k?i.props.children:i,x?xt.jsx("title",{children:x}):null]}))});i4.muiName="SvgIcon";function yR(e,t){function r(n,i){return xt.jsx(i4,bt({"data-testid":`${t}Icon`,ref:i},n,{children:e}))}return r.muiName=i4.muiName,me.memo(me.forwardRef(r))}var Zi={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _R=Symbol.for("react.element"),vR=Symbol.for("react.portal"),m3=Symbol.for("react.fragment"),y3=Symbol.for("react.strict_mode"),_3=Symbol.for("react.profiler"),v3=Symbol.for("react.provider"),b3=Symbol.for("react.context"),_te=Symbol.for("react.server_context"),x3=Symbol.for("react.forward_ref"),w3=Symbol.for("react.suspense"),S3=Symbol.for("react.suspense_list"),A3=Symbol.for("react.memo"),E3=Symbol.for("react.lazy"),vte=Symbol.for("react.offscreen"),hU;hU=Symbol.for("react.module.reference");function Nu(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case _R:switch(e=e.type,e){case m3:case _3:case y3:case w3:case S3:return e;default:switch(e=e&&e.$$typeof,e){case _te:case b3:case x3:case E3:case A3:case v3:return e;default:return t}}case vR:return t}}}Zi.ContextConsumer=b3;Zi.ContextProvider=v3;Zi.Element=_R;Zi.ForwardRef=x3;Zi.Fragment=m3;Zi.Lazy=E3;Zi.Memo=A3;Zi.Portal=vR;Zi.Profiler=_3;Zi.StrictMode=y3;Zi.Suspense=w3;Zi.SuspenseList=S3;Zi.isAsyncMode=function(){return!1};Zi.isConcurrentMode=function(){return!1};Zi.isContextConsumer=function(e){return Nu(e)===b3};Zi.isContextProvider=function(e){return Nu(e)===v3};Zi.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===_R};Zi.isForwardRef=function(e){return Nu(e)===x3};Zi.isFragment=function(e){return Nu(e)===m3};Zi.isLazy=function(e){return Nu(e)===E3};Zi.isMemo=function(e){return Nu(e)===A3};Zi.isPortal=function(e){return Nu(e)===vR};Zi.isProfiler=function(e){return Nu(e)===_3};Zi.isStrictMode=function(e){return Nu(e)===y3};Zi.isSuspense=function(e){return Nu(e)===w3};Zi.isSuspenseList=function(e){return Nu(e)===S3};Zi.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===m3||e===_3||e===y3||e===w3||e===S3||e===vte||typeof e=="object"&&e!==null&&(e.$$typeof===E3||e.$$typeof===A3||e.$$typeof===v3||e.$$typeof===b3||e.$$typeof===x3||e.$$typeof===hU||e.getModuleId!==void 0)};Zi.typeOf=Nu;function fU(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function o4(e,t){return o4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},o4(e,t)}function dU(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o4(e,t)}const rN={disabled:!1},f5=Pe.createContext(null);var bte=function(t){return t.scrollTop},nv="unmounted",ug="exited",hg="entering",R0="entered",s4="exiting",ph=function(e){dU(t,e);function t(n,i){var o;o=e.call(this,n,i)||this;var l=i,s=l&&!l.isMounting?n.enter:n.appear,f;return o.appearStatus=null,n.in?s?(f=ug,o.appearStatus=hg):f=R0:n.unmountOnExit||n.mountOnEnter?f=nv:f=ug,o.state={status:f},o.nextCallback=null,o}t.getDerivedStateFromProps=function(i,o){var l=i.in;return l&&o.status===nv?{status:ug}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(i){var o=null;if(i!==this.props){var l=this.state.status;this.props.in?l!==hg&&l!==R0&&(o=hg):(l===hg||l===R0)&&(o=s4)}this.updateStatus(!1,o)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var i=this.props.timeout,o,l,s;return o=l=s=i,i!=null&&typeof i!="number"&&(o=i.exit,l=i.enter,s=i.appear!==void 0?i.appear:l),{exit:o,enter:l,appear:s}},r.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===hg){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:hx.findDOMNode(this);l&&bte(l)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ug&&this.setState({status:nv})},r.performEnter=function(i){var o=this,l=this.props.enter,s=this.context?this.context.isMounting:i,f=this.props.nodeRef?[s]:[hx.findDOMNode(this),s],p=f[0],v=f[1],x=this.getTimeouts(),S=s?x.appear:x.enter;if(!i&&!l||rN.disabled){this.safeSetState({status:R0},function(){o.props.onEntered(p)});return}this.props.onEnter(p,v),this.safeSetState({status:hg},function(){o.props.onEntering(p,v),o.onTransitionEnd(S,function(){o.safeSetState({status:R0},function(){o.props.onEntered(p,v)})})})},r.performExit=function(){var i=this,o=this.props.exit,l=this.getTimeouts(),s=this.props.nodeRef?void 0:hx.findDOMNode(this);if(!o||rN.disabled){this.safeSetState({status:ug},function(){i.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:s4},function(){i.props.onExiting(s),i.onTransitionEnd(l.exit,function(){i.safeSetState({status:ug},function(){i.props.onExited(s)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},r.setNextCallback=function(i){var o=this,l=!0;return this.nextCallback=function(s){l&&(l=!1,o.nextCallback=null,i(s))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},r.onTransitionEnd=function(i,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:hx.findDOMNode(this),s=i==null&&!this.props.addEndListener;if(!l||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var f=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],p=f[0],v=f[1];this.props.addEndListener(p,v)}i!=null&&setTimeout(this.nextCallback,i)},r.render=function(){var i=this.state.status;if(i===nv)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var s=fU(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Pe.createElement(f5.Provider,{value:null},typeof l=="function"?l(i,s):Pe.cloneElement(Pe.Children.only(l),s))},t}(Pe.Component);ph.contextType=f5;ph.propTypes={};function o0(){}ph.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:o0,onEntering:o0,onEntered:o0,onExit:o0,onExiting:o0,onExited:o0};ph.UNMOUNTED=nv;ph.EXITED=ug;ph.ENTERING=hg;ph.ENTERED=R0;ph.EXITING=s4;function xte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bR(e,t){var r=function(o){return t&&me.isValidElement(o)?t(o):o},n=Object.create(null);return e&&me.Children.map(e,function(i){return i}).forEach(function(i){n[i.key]=r(i)}),n}function wte(e,t){e=e||{},t=t||{};function r(v){return v in t?t[v]:e[v]}var n=Object.create(null),i=[];for(var o in e)o in t?i.length&&(n[o]=i,i=[]):i.push(o);var l,s={};for(var f in t){if(n[f])for(l=0;l<n[f].length;l++){var p=n[f][l];s[n[f][l]]=r(p)}s[f]=r(f)}for(l=0;l<i.length;l++)s[i[l]]=r(i[l]);return s}function Sg(e,t,r){return r[t]!=null?r[t]:e.props[t]}function Ste(e,t){return bR(e.children,function(r){return me.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:Sg(r,"appear",e),enter:Sg(r,"enter",e),exit:Sg(r,"exit",e)})})}function Ate(e,t,r){var n=bR(e.children),i=wte(t,n);return Object.keys(i).forEach(function(o){var l=i[o];if(me.isValidElement(l)){var s=o in t,f=o in n,p=t[o],v=me.isValidElement(p)&&!p.props.in;f&&(!s||v)?i[o]=me.cloneElement(l,{onExited:r.bind(null,l),in:!0,exit:Sg(l,"exit",e),enter:Sg(l,"enter",e)}):!f&&s&&!v?i[o]=me.cloneElement(l,{in:!1}):f&&s&&me.isValidElement(p)&&(i[o]=me.cloneElement(l,{onExited:r.bind(null,l),in:p.props.in,exit:Sg(l,"exit",e),enter:Sg(l,"enter",e)}))}}),i}var Ete=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Tte={component:"div",childFactory:function(t){return t}},T3=function(e){dU(t,e);function t(n,i){var o;o=e.call(this,n,i)||this;var l=o.handleExited.bind(xte(o));return o.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},o}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,o){var l=o.children,s=o.handleExited,f=o.firstRender;return{children:f?Ste(i,s):Ate(i,l,s),firstRender:!1}},r.handleExited=function(i,o){var l=bR(this.props.children);i.key in l||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(s){var f=l5({},s.children);return delete f[i.key],{children:f}}))},r.render=function(){var i=this.props,o=i.component,l=i.childFactory,s=fU(i,["component","childFactory"]),f=this.state.contextValue,p=Ete(this.state.children).map(l);return delete s.appear,delete s.enter,delete s.exit,o===null?Pe.createElement(f5.Provider,{value:f},p):Pe.createElement(f5.Provider,{value:f},Pe.createElement(o,s,p))},t}(Pe.Component);T3.propTypes={};T3.defaultProps=Tte;const xR=e=>e.scrollTop;function em(e,t){var r,n;const{timeout:i,easing:o,style:l={}}=e;return{duration:(r=l.transitionDuration)!=null?r:typeof i=="number"?i:i[t.mode]||0,easing:(n=l.transitionTimingFunction)!=null?n:typeof o=="object"?o[t.mode]:o,delay:l.transitionDelay}}function Cte(e){return Wo("MuiPaper",e)}po("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Pte=["className","component","elevation","square","variant"],Ite=e=>{const{square:t,elevation:r,variant:n,classes:i}=e,o={root:["root",n,!t&&"rounded",n==="elevation"&&`elevation${r}`]};return us(o,Cte,i)},Rte=mn("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],!r.square&&t.rounded,r.variant==="elevation"&&t[`elevation${r.elevation}`]]}})(({theme:e,ownerState:t})=>{var r;return bt({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&bt({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Nl("#fff",eN(t.elevation))}, ${Nl("#fff",eN(t.elevation))})`},e.vars&&{backgroundImage:(r=e.vars.overlays)==null?void 0:r[t.elevation]}))}),f_=me.forwardRef(function(t,r){const n=Ss({props:t,name:"MuiPaper"}),{className:i,component:o="div",elevation:l=1,square:s=!1,variant:f="elevation"}=n,p=Pn(n,Pte),v=bt({},n,{component:o,elevation:l,square:s,variant:f}),x=Ite(v);return xt.jsx(Rte,bt({as:o,ownerState:v,className:Ln(x.root,i),ref:r},p))});function sc(){return sc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sc.apply(this,arguments)}function d5(e){return typeof e=="string"}function kte(e,t,r){return e===void 0||d5(e)?t:sc({},t,{ownerState:sc({},t.ownerState,r)})}function pU(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&typeof e[n]=="function"&&!t.includes(n)).forEach(n=>{r[n]=e[n]}),r}function Mte(e,t,r){return typeof e=="function"?e(t,r):e}function Ote(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function nN(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function Nte(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:n,externalForwardedProps:i,className:o}=e;if(!t){const A=Ln(r==null?void 0:r.className,o,i==null?void 0:i.className,n==null?void 0:n.className),k=sc({},r==null?void 0:r.style,i==null?void 0:i.style,n==null?void 0:n.style),R=sc({},r,i,n);return A.length>0&&(R.className=A),Object.keys(k).length>0&&(R.style=k),{props:R,internalRef:void 0}}const l=pU(sc({},i,n)),s=nN(n),f=nN(i),p=t(l),v=Ln(p==null?void 0:p.className,r==null?void 0:r.className,o,i==null?void 0:i.className,n==null?void 0:n.className),x=sc({},p==null?void 0:p.style,r==null?void 0:r.style,i==null?void 0:i.style,n==null?void 0:n.style),S=sc({},p,r,f,s);return v.length>0&&(S.className=v),Object.keys(x).length>0&&(S.style=x),{props:S,internalRef:p.ref}}const Dte=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function d_(e){var t;const{elementType:r,externalSlotProps:n,ownerState:i,skipResolvingSlotProps:o=!1}=e,l=Ote(e,Dte),s=o?{}:Mte(n,i),{props:f,internalRef:p}=Nte(sc({},l,{externalSlotProps:s})),v=pc(p,s==null?void 0:s.ref,(t=e.additionalProps)==null?void 0:t.ref);return kte(r,sc({},f,{ref:v}),i)}function Lte(e){const{className:t,classes:r,pulsate:n=!1,rippleX:i,rippleY:o,rippleSize:l,in:s,onExited:f,timeout:p}=e,[v,x]=me.useState(!1),S=Ln(t,r.ripple,r.rippleVisible,n&&r.ripplePulsate),A={width:l,height:l,top:-(l/2)+o,left:-(l/2)+i},k=Ln(r.child,v&&r.childLeaving,n&&r.childPulsate);return!s&&!v&&x(!0),me.useEffect(()=>{if(!s&&f!=null){const R=setTimeout(f,p);return()=>{clearTimeout(R)}}},[f,s,p]),xt.jsx("span",{className:S,style:A,children:xt.jsx("span",{className:k})})}const gu=po("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Fte=["center","classes","className"];let C3=e=>e,iN,oN,sN,aN;const a4=550,Bte=80,zte=$p(iN||(iN=C3`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),$te=$p(oN||(oN=C3`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),Ute=$p(sN||(sN=C3`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),jte=mn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Vte=mn(Lte,{name:"MuiTouchRipple",slot:"Ripple"})(aN||(aN=C3`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),gu.rippleVisible,zte,a4,({theme:e})=>e.transitions.easing.easeInOut,gu.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,gu.child,gu.childLeaving,$te,a4,({theme:e})=>e.transitions.easing.easeInOut,gu.childPulsate,Ute,({theme:e})=>e.transitions.easing.easeInOut),Hte=me.forwardRef(function(t,r){const n=Ss({props:t,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:l}=n,s=Pn(n,Fte),[f,p]=me.useState([]),v=me.useRef(0),x=me.useRef(null);me.useEffect(()=>{x.current&&(x.current(),x.current=null)},[f]);const S=me.useRef(!1),A=Z$(),k=me.useRef(null),R=me.useRef(null),z=me.useCallback(K=>{const{pulsate:ne,rippleX:ee,rippleY:Q,rippleSize:re,cb:Se}=K;p(J=>[...J,xt.jsx(Vte,{classes:{ripple:Ln(o.ripple,gu.ripple),rippleVisible:Ln(o.rippleVisible,gu.rippleVisible),ripplePulsate:Ln(o.ripplePulsate,gu.ripplePulsate),child:Ln(o.child,gu.child),childLeaving:Ln(o.childLeaving,gu.childLeaving),childPulsate:Ln(o.childPulsate,gu.childPulsate)},timeout:a4,pulsate:ne,rippleX:ee,rippleY:Q,rippleSize:re},v.current)]),v.current+=1,x.current=Se},[o]),N=me.useCallback((K={},ne={},ee=()=>{})=>{const{pulsate:Q=!1,center:re=i||ne.pulsate,fakeElement:Se=!1}=ne;if((K==null?void 0:K.type)==="mousedown"&&S.current){S.current=!1;return}(K==null?void 0:K.type)==="touchstart"&&(S.current=!0);const J=Se?null:R.current,G=J?J.getBoundingClientRect():{width:0,height:0,left:0,top:0};let se,ve,ge;if(re||K===void 0||K.clientX===0&&K.clientY===0||!K.clientX&&!K.touches)se=Math.round(G.width/2),ve=Math.round(G.height/2);else{const{clientX:je,clientY:$e}=K.touches&&K.touches.length>0?K.touches[0]:K;se=Math.round(je-G.left),ve=Math.round($e-G.top)}if(re)ge=Math.sqrt((2*G.width**2+G.height**2)/3),ge%2===0&&(ge+=1);else{const je=Math.max(Math.abs((J?J.clientWidth:0)-se),se)*2+2,$e=Math.max(Math.abs((J?J.clientHeight:0)-ve),ve)*2+2;ge=Math.sqrt(je**2+$e**2)}K!=null&&K.touches?k.current===null&&(k.current=()=>{z({pulsate:Q,rippleX:se,rippleY:ve,rippleSize:ge,cb:ee})},A.start(Bte,()=>{k.current&&(k.current(),k.current=null)})):z({pulsate:Q,rippleX:se,rippleY:ve,rippleSize:ge,cb:ee})},[i,z,A]),B=me.useCallback(()=>{N({},{pulsate:!0})},[N]),U=me.useCallback((K,ne)=>{if(A.clear(),(K==null?void 0:K.type)==="touchend"&&k.current){k.current(),k.current=null,A.start(0,()=>{U(K,ne)});return}k.current=null,p(ee=>ee.length>0?ee.slice(1):ee),x.current=ne},[A]);return me.useImperativeHandle(r,()=>({pulsate:B,start:N,stop:U}),[B,N,U]),xt.jsx(jte,bt({className:Ln(gu.root,o.root,l),ref:R},s,{children:xt.jsx(T3,{component:null,exit:!0,children:f})}))});function qte(e){return Wo("MuiButtonBase",e)}const Wte=po("MuiButtonBase",["root","disabled","focusVisible"]),Xte=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Kte=e=>{const{disabled:t,focusVisible:r,focusVisibleClassName:n,classes:i}=e,l=us({root:["root",t&&"disabled",r&&"focusVisible"]},qte,i);return r&&n&&(l.root+=` ${n}`),l},Gte=mn("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Wte.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),P3=me.forwardRef(function(t,r){const n=Ss({props:t,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:l,className:s,component:f="button",disabled:p=!1,disableRipple:v=!1,disableTouchRipple:x=!1,focusRipple:S=!1,LinkComponent:A="a",onBlur:k,onClick:R,onContextMenu:z,onDragLeave:N,onFocus:B,onFocusVisible:U,onKeyDown:K,onKeyUp:ne,onMouseDown:ee,onMouseLeave:Q,onMouseUp:re,onTouchEnd:Se,onTouchMove:J,onTouchStart:G,tabIndex:se=0,TouchRippleProps:ve,touchRippleRef:ge,type:je}=n,$e=Pn(n,Xte),Ze=me.useRef(null),Me=me.useRef(null),Ue=pc(Me,ge),{isFocusVisibleRef:Qe,onFocus:ct,onBlur:ce,ref:be}=J$(),[Oe,Be]=me.useState(!1);p&&Oe&&Be(!1),me.useImperativeHandle(i,()=>({focusVisible:()=>{Be(!0),Ze.current.focus()}}),[]);const[qe,tt]=me.useState(!1);me.useEffect(()=>{tt(!0)},[]);const We=qe&&!v&&!p;me.useEffect(()=>{Oe&&S&&!v&&qe&&Me.current.pulsate()},[v,S,Oe,qe]);function Xe(Ut,_r,Kt=x){return af(fn=>(_r&&_r(fn),!Kt&&Me.current&&Me.current[Ut](fn),!0))}const lt=Xe("start",ee),wt=Xe("stop",z),Lt=Xe("stop",N),At=Xe("stop",re),zt=Xe("stop",Ut=>{Oe&&Ut.preventDefault(),Q&&Q(Ut)}),vt=Xe("start",G),pe=Xe("stop",Se),ur=Xe("stop",J),sr=Xe("stop",Ut=>{ce(Ut),Qe.current===!1&&Be(!1),k&&k(Ut)},!1),Tt=af(Ut=>{Ze.current||(Ze.current=Ut.currentTarget),ct(Ut),Qe.current===!0&&(Be(!0),U&&U(Ut)),B&&B(Ut)}),Nt=()=>{const Ut=Ze.current;return f&&f!=="button"&&!(Ut.tagName==="A"&&Ut.href)},Zt=me.useRef(!1),rr=af(Ut=>{S&&!Zt.current&&Oe&&Me.current&&Ut.key===" "&&(Zt.current=!0,Me.current.stop(Ut,()=>{Me.current.start(Ut)})),Ut.target===Ut.currentTarget&&Nt()&&Ut.key===" "&&Ut.preventDefault(),K&&K(Ut),Ut.target===Ut.currentTarget&&Nt()&&Ut.key==="Enter"&&!p&&(Ut.preventDefault(),R&&R(Ut))}),at=af(Ut=>{S&&Ut.key===" "&&Me.current&&Oe&&!Ut.defaultPrevented&&(Zt.current=!1,Me.current.stop(Ut,()=>{Me.current.pulsate(Ut)})),ne&&ne(Ut),R&&Ut.target===Ut.currentTarget&&Nt()&&Ut.key===" "&&!Ut.defaultPrevented&&R(Ut)});let It=f;It==="button"&&($e.href||$e.to)&&(It=A);const Vt={};It==="button"?(Vt.type=je===void 0?"button":je,Vt.disabled=p):(!$e.href&&!$e.to&&(Vt.role="button"),p&&(Vt["aria-disabled"]=p));const lr=pc(r,be,Ze),Pr=bt({},n,{centerRipple:o,component:f,disabled:p,disableRipple:v,disableTouchRipple:x,focusRipple:S,tabIndex:se,focusVisible:Oe}),_t=Kte(Pr);return xt.jsxs(Gte,bt({as:It,className:Ln(_t.root,s),ownerState:Pr,onBlur:sr,onClick:R,onContextMenu:wt,onFocus:Tt,onKeyDown:rr,onKeyUp:at,onMouseDown:lt,onMouseLeave:zt,onMouseUp:At,onDragLeave:Lt,onTouchEnd:pe,onTouchMove:ur,onTouchStart:vt,ref:lr,tabIndex:p?-1:se,type:je},Vt,$e,{children:[l,We?xt.jsx(Hte,bt({ref:Ue,center:o},ve)):null]}))});function Yte(e){return Wo("MuiIconButton",e)}const Zte=po("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Jte=["edge","children","className","color","disabled","disableFocusRipple","size"],Qte=e=>{const{classes:t,disabled:r,color:n,edge:i,size:o}=e,l={root:["root",r&&"disabled",n!=="default"&&`color${tn(n)}`,i&&`edge${tn(i)}`,`size${tn(o)}`]};return us(l,Yte,t)},ere=mn(P3,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="default"&&t[`color${tn(r.color)}`],r.edge&&t[`edge${tn(r.edge)}`],t[`size${tn(r.size)}`]]}})(({theme:e,ownerState:t})=>bt({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Nl(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var r;const n=(r=(e.vars||e).palette)==null?void 0:r[t.color];return bt({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&bt({color:n==null?void 0:n.main},!t.disableRipple&&{"&:hover":bt({},n&&{backgroundColor:e.vars?`rgba(${n.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Nl(n.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${Zte.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),pm=me.forwardRef(function(t,r){const n=Ss({props:t,name:"MuiIconButton"}),{edge:i=!1,children:o,className:l,color:s="default",disabled:f=!1,disableFocusRipple:p=!1,size:v="medium"}=n,x=Pn(n,Jte),S=bt({},n,{edge:i,color:s,disabled:f,disableFocusRipple:p,size:v}),A=Qte(S);return xt.jsx(ere,bt({className:Ln(A.root,l),centerRipple:!0,focusRipple:!p,disabled:f,ref:r,ownerState:S},x,{children:o}))});function tre(e){return Wo("MuiTypography",e)}po("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const rre=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],nre=e=>{const{align:t,gutterBottom:r,noWrap:n,paragraph:i,variant:o,classes:l}=e,s={root:["root",o,e.align!=="inherit"&&`align${tn(t)}`,r&&"gutterBottom",n&&"noWrap",i&&"paragraph"]};return us(s,tre,l)},ire=mn("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],r.align!=="inherit"&&t[`align${tn(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>bt({margin:0},t.variant==="inherit"&&{font:"inherit"},t.variant!=="inherit"&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),lN={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},ore={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},sre=e=>ore[e]||e,cN=me.forwardRef(function(t,r){const n=Ss({props:t,name:"MuiTypography"}),i=sre(n.color),o=nU(bt({},n,{color:i})),{align:l="inherit",className:s,component:f,gutterBottom:p=!1,noWrap:v=!1,paragraph:x=!1,variant:S="body1",variantMapping:A=lN}=o,k=Pn(o,rre),R=bt({},o,{align:l,color:i,className:s,component:f,gutterBottom:p,noWrap:v,paragraph:x,variant:S,variantMapping:A}),z=f||(x?"p":A[S]||lN[S])||"span",N=nre(R);return xt.jsx(ire,bt({as:z,ref:r,ownerState:R,className:Ln(N.root,s)},k))});function are(e){return Wo("MuiAppBar",e)}po("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const lre=["className","color","enableColorOnDark","position"],cre=e=>{const{color:t,position:r,classes:n}=e,i={root:["root",`color${tn(t)}`,`position${tn(r)}`]};return us(i,are,n)},gx=(e,t)=>e?`${e==null?void 0:e.replace(")","")}, ${t})`:t,ure=mn(f_,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`position${tn(r.position)}`],t[`color${tn(r.color)}`]]}})(({theme:e,ownerState:t})=>{const r=e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[900];return bt({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},t.position==="fixed"&&{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},t.position==="absolute"&&{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},t.position==="sticky"&&{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},t.position==="static"&&{position:"static"},t.position==="relative"&&{position:"relative"},!e.vars&&bt({},t.color==="default"&&{backgroundColor:r,color:e.palette.getContrastText(r)},t.color&&t.color!=="default"&&t.color!=="inherit"&&t.color!=="transparent"&&{backgroundColor:e.palette[t.color].main,color:e.palette[t.color].contrastText},t.color==="inherit"&&{color:"inherit"},e.palette.mode==="dark"&&!t.enableColorOnDark&&{backgroundColor:null,color:null},t.color==="transparent"&&bt({backgroundColor:"transparent",color:"inherit"},e.palette.mode==="dark"&&{backgroundImage:"none"})),e.vars&&bt({},t.color==="default"&&{"--AppBar-background":t.enableColorOnDark?e.vars.palette.AppBar.defaultBg:gx(e.vars.palette.AppBar.darkBg,e.vars.palette.AppBar.defaultBg),"--AppBar-color":t.enableColorOnDark?e.vars.palette.text.primary:gx(e.vars.palette.AppBar.darkColor,e.vars.palette.text.primary)},t.color&&!t.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":t.enableColorOnDark?e.vars.palette[t.color].main:gx(e.vars.palette.AppBar.darkBg,e.vars.palette[t.color].main),"--AppBar-color":t.enableColorOnDark?e.vars.palette[t.color].contrastText:gx(e.vars.palette.AppBar.darkColor,e.vars.palette[t.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:t.color==="inherit"?"inherit":"var(--AppBar-color)"},t.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),hre=me.forwardRef(function(t,r){const n=Ss({props:t,name:"MuiAppBar"}),{className:i,color:o="primary",enableColorOnDark:l=!1,position:s="fixed"}=n,f=Pn(n,lre),p=bt({},n,{color:o,position:s,enableColorOnDark:l}),v=cre(p);return xt.jsx(ure,bt({square:!0,component:"header",ownerState:p,elevation:4,className:Ln(v.root,i,s==="fixed"&&"mui-fixed"),ref:r},f))}),fre=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function dre(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function pre(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=n=>e.ownerDocument.querySelector(`input[type="radio"]${n}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function gre(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||pre(e))}function mre(e){const t=[],r=[];return Array.from(e.querySelectorAll(fre)).forEach((n,i)=>{const o=dre(n);o===-1||!gre(n)||(o===0?t.push(n):r.push({documentOrder:i,tabIndex:o,node:n}))}),r.sort((n,i)=>n.tabIndex===i.tabIndex?n.documentOrder-i.documentOrder:n.tabIndex-i.tabIndex).map(n=>n.node).concat(t)}function yre(){return!0}function _re(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:n=!1,disableRestoreFocus:i=!1,getTabbable:o=mre,isEnabled:l=yre,open:s}=e,f=me.useRef(!1),p=me.useRef(null),v=me.useRef(null),x=me.useRef(null),S=me.useRef(null),A=me.useRef(!1),k=me.useRef(null),R=pc(t.ref,k),z=me.useRef(null);me.useEffect(()=>{!s||!k.current||(A.current=!r)},[r,s]),me.useEffect(()=>{if(!s||!k.current)return;const U=Fa(k.current);return k.current.contains(U.activeElement)||(k.current.hasAttribute("tabIndex")||k.current.setAttribute("tabIndex","-1"),A.current&&k.current.focus()),()=>{i||(x.current&&x.current.focus&&(f.current=!0,x.current.focus()),x.current=null)}},[s]),me.useEffect(()=>{if(!s||!k.current)return;const U=Fa(k.current),K=Q=>{z.current=Q,!(n||!l()||Q.key!=="Tab")&&U.activeElement===k.current&&Q.shiftKey&&(f.current=!0,v.current&&v.current.focus())},ne=()=>{const Q=k.current;if(Q===null)return;if(!U.hasFocus()||!l()||f.current){f.current=!1;return}if(Q.contains(U.activeElement)||n&&U.activeElement!==p.current&&U.activeElement!==v.current)return;if(U.activeElement!==S.current)S.current=null;else if(S.current!==null)return;if(!A.current)return;let re=[];if((U.activeElement===p.current||U.activeElement===v.current)&&(re=o(k.current)),re.length>0){var Se,J;const G=!!((Se=z.current)!=null&&Se.shiftKey&&((J=z.current)==null?void 0:J.key)==="Tab"),se=re[0],ve=re[re.length-1];typeof se!="string"&&typeof ve!="string"&&(G?ve.focus():se.focus())}else Q.focus()};U.addEventListener("focusin",ne),U.addEventListener("keydown",K,!0);const ee=setInterval(()=>{U.activeElement&&U.activeElement.tagName==="BODY"&&ne()},50);return()=>{clearInterval(ee),U.removeEventListener("focusin",ne),U.removeEventListener("keydown",K,!0)}},[r,n,i,l,s,o]);const N=U=>{x.current===null&&(x.current=U.relatedTarget),A.current=!0,S.current=U.target;const K=t.props.onFocus;K&&K(U)},B=U=>{x.current===null&&(x.current=U.relatedTarget),A.current=!0};return xt.jsxs(me.Fragment,{children:[xt.jsx("div",{tabIndex:s?0:-1,onFocus:B,ref:p,"data-testid":"sentinelStart"}),me.cloneElement(t,{ref:R,onFocus:N}),xt.jsx("div",{tabIndex:s?0:-1,onFocus:B,ref:v,"data-testid":"sentinelEnd"})]})}function vre(e){return typeof e=="function"?e():e}const bre=me.forwardRef(function(t,r){const{children:n,container:i,disablePortal:o=!1}=t,[l,s]=me.useState(null),f=pc(me.isValidElement(n)?n.ref:null,r);if(cd(()=>{o||s(vre(i)||document.body)},[i,o]),cd(()=>{if(l&&!o)return u5(r,l),()=>{u5(r,null)}},[r,l,o]),o){if(me.isValidElement(n)){const p={ref:f};return me.cloneElement(n,p)}return xt.jsx(me.Fragment,{children:n})}return xt.jsx(me.Fragment,{children:l&&s2.createPortal(n,l)})});function xre(e){const t=Fa(e);return t.body===e?Cu(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Pv(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function uN(e){return parseInt(Cu(e).getComputedStyle(e).paddingRight,10)||0}function wre(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,n=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||n}function hN(e,t,r,n,i){const o=[t,r,...n];[].forEach.call(e.children,l=>{const s=o.indexOf(l)===-1,f=!wre(l);s&&f&&Pv(l,i)})}function UE(e,t){let r=-1;return e.some((n,i)=>t(n)?(r=i,!0):!1),r}function Sre(e,t){const r=[],n=e.container;if(!t.disableScrollLock){if(xre(n)){const l=Q$(Fa(n));r.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight=`${uN(n)+l}px`;const s=Fa(n).querySelectorAll(".mui-fixed");[].forEach.call(s,f=>{r.push({value:f.style.paddingRight,property:"padding-right",el:f}),f.style.paddingRight=`${uN(f)+l}px`})}let o;if(n.parentNode instanceof DocumentFragment)o=Fa(n).body;else{const l=n.parentElement,s=Cu(n);o=(l==null?void 0:l.nodeName)==="HTML"&&s.getComputedStyle(l).overflowY==="scroll"?l:n}r.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{r.forEach(({value:o,el:l,property:s})=>{o?l.style.setProperty(s,o):l.style.removeProperty(s)})}}function Are(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class Ere{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,r){let n=this.modals.indexOf(t);if(n!==-1)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&Pv(t.modalRef,!1);const i=Are(r);hN(r,t.mount,t.modalRef,i,!0);const o=UE(this.containers,l=>l.container===r);return o!==-1?(this.containers[o].modals.push(t),n):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:i}),n)}mount(t,r){const n=UE(this.containers,o=>o.modals.indexOf(t)!==-1),i=this.containers[n];i.restore||(i.restore=Sre(i,r))}remove(t,r=!0){const n=this.modals.indexOf(t);if(n===-1)return n;const i=UE(this.containers,l=>l.modals.indexOf(t)!==-1),o=this.containers[i];if(o.modals.splice(o.modals.indexOf(t),1),this.modals.splice(n,1),o.modals.length===0)o.restore&&o.restore(),t.modalRef&&Pv(t.modalRef,r),hN(o.container,t.mount,t.modalRef,o.hiddenSiblings,!1),this.containers.splice(i,1);else{const l=o.modals[o.modals.length-1];l.modalRef&&Pv(l.modalRef,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function Tre(e){return typeof e=="function"?e():e}function Cre(e){return e?e.props.hasOwnProperty("in"):!1}const Pre=new Ere;function Ire(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:n=!1,manager:i=Pre,closeAfterTransition:o=!1,onTransitionEnter:l,onTransitionExited:s,children:f,onClose:p,open:v,rootRef:x}=e,S=me.useRef({}),A=me.useRef(null),k=me.useRef(null),R=pc(k,x),[z,N]=me.useState(!v),B=Cre(f);let U=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(U=!1);const K=()=>Fa(A.current),ne=()=>(S.current.modalRef=k.current,S.current.mount=A.current,S.current),ee=()=>{i.mount(ne(),{disableScrollLock:n}),k.current&&(k.current.scrollTop=0)},Q=af(()=>{const $e=Tre(t)||K().body;i.add(ne(),$e),k.current&&ee()}),re=me.useCallback(()=>i.isTopModal(ne()),[i]),Se=af($e=>{A.current=$e,$e&&(v&&re()?ee():k.current&&Pv(k.current,U))}),J=me.useCallback(()=>{i.remove(ne(),U)},[U,i]);me.useEffect(()=>()=>{J()},[J]),me.useEffect(()=>{v?Q():(!B||!o)&&J()},[v,J,B,o,Q]);const G=$e=>Ze=>{var Me;(Me=$e.onKeyDown)==null||Me.call($e,Ze),!(Ze.key!=="Escape"||Ze.which===229||!re())&&(r||(Ze.stopPropagation(),p&&p(Ze,"escapeKeyDown")))},se=$e=>Ze=>{var Me;(Me=$e.onClick)==null||Me.call($e,Ze),Ze.target===Ze.currentTarget&&p&&p(Ze,"backdropClick")};return{getRootProps:($e={})=>{const Ze=pU(e);delete Ze.onTransitionEnter,delete Ze.onTransitionExited;const Me=sc({},Ze,$e);return sc({role:"presentation"},Me,{onKeyDown:G(Me),ref:R})},getBackdropProps:($e={})=>{const Ze=$e;return sc({"aria-hidden":!0},Ze,{onClick:se(Ze),open:v})},getTransitionProps:()=>{const $e=()=>{N(!1),l&&l()},Ze=()=>{N(!0),s&&s(),o&&J()};return{onEnter:r4($e,f==null?void 0:f.props.onEnter),onExited:r4(Ze,f==null?void 0:f.props.onExited)}},rootRef:R,portalRef:Se,isTopModal:re,exited:z,hasTransition:B}}function Rre(e){const{children:t,defer:r=!1,fallback:n=null}=e,[i,o]=me.useState(!1);return cd(()=>{r||o(!0)},[r]),me.useEffect(()=>{r&&o(!0)},[r]),xt.jsx(me.Fragment,{children:i?t:n})}const kre=me.createContext(void 0);function Mre(){return me.useContext(kre)}const Ore=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Nre={entering:{opacity:1},entered:{opacity:1}},Dre=me.forwardRef(function(t,r){const n=fm(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:l=!0,children:s,easing:f,in:p,onEnter:v,onEntered:x,onEntering:S,onExit:A,onExited:k,onExiting:R,style:z,timeout:N=i,TransitionComponent:B=ph}=t,U=Pn(t,Ore),K=me.useRef(null),ne=pc(K,s.ref,r),ee=ge=>je=>{if(ge){const $e=K.current;je===void 0?ge($e):ge($e,je)}},Q=ee(S),re=ee((ge,je)=>{xR(ge);const $e=em({style:z,timeout:N,easing:f},{mode:"enter"});ge.style.webkitTransition=n.transitions.create("opacity",$e),ge.style.transition=n.transitions.create("opacity",$e),v&&v(ge,je)}),Se=ee(x),J=ee(R),G=ee(ge=>{const je=em({style:z,timeout:N,easing:f},{mode:"exit"});ge.style.webkitTransition=n.transitions.create("opacity",je),ge.style.transition=n.transitions.create("opacity",je),A&&A(ge)}),se=ee(k),ve=ge=>{o&&o(K.current,ge)};return xt.jsx(B,bt({appear:l,in:p,nodeRef:K,onEnter:re,onEntered:Se,onEntering:Q,onExit:G,onExited:se,onExiting:J,addEndListener:ve,timeout:N},U,{children:(ge,je)=>me.cloneElement(s,bt({style:bt({opacity:0,visibility:ge==="exited"&&!p?"hidden":void 0},Nre[ge],z,s.props.style),ref:ne},je))}))});function Lre(e){return Wo("MuiBackdrop",e)}po("MuiBackdrop",["root","invisible"]);const Fre=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],Bre=e=>{const{classes:t,invisible:r}=e;return us({root:["root",r&&"invisible"]},Lre,t)},zre=mn("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.invisible&&t.invisible]}})(({ownerState:e})=>bt({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),$re=me.forwardRef(function(t,r){var n,i,o;const l=Ss({props:t,name:"MuiBackdrop"}),{children:s,className:f,component:p="div",components:v={},componentsProps:x={},invisible:S=!1,open:A,slotProps:k={},slots:R={},TransitionComponent:z=Dre,transitionDuration:N}=l,B=Pn(l,Fre),U=bt({},l,{component:p,invisible:S}),K=Bre(U),ne=(n=k.root)!=null?n:x.root;return xt.jsx(z,bt({in:A,timeout:N},B,{children:xt.jsx(zre,bt({"aria-hidden":!0},ne,{as:(i=(o=R.root)!=null?o:v.Root)!=null?i:p,className:Ln(K.root,f,ne==null?void 0:ne.className),ownerState:bt({},U,ne==null?void 0:ne.ownerState),classes:K,ref:r,children:s}))}))}),Ure=po("MuiBox",["root"]),jre=eb(),Ol=oU({themeId:u_,defaultTheme:jre,defaultClassName:Ure.root,generateClassName:a3.generate});function Vre(e){return Wo("MuiButton",e)}const mx=po("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),gU=me.createContext({}),mU=me.createContext(void 0),Hre=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],qre=e=>{const{color:t,disableElevation:r,fullWidth:n,size:i,variant:o,classes:l}=e,s={root:["root",o,`${o}${tn(t)}`,`size${tn(i)}`,`${o}Size${tn(i)}`,t==="inherit"&&"colorInherit",r&&"disableElevation",n&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${tn(i)}`],endIcon:["endIcon",`iconSize${tn(i)}`]},f=us(s,Vre,l);return bt({},l,f)},yU=e=>bt({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),Wre=mn(P3,{shouldForwardProp:e=>dm(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${tn(r.color)}`],t[`size${tn(r.size)}`],t[`${r.variant}Size${tn(r.size)}`],r.color==="inherit"&&t.colorInherit,r.disableElevation&&t.disableElevation,r.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var r,n;const i=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],o=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return bt({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":bt({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Nl(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Nl(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Nl(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:o,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":bt({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${mx.focusVisible}`]:bt({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${mx.disabled}`]:bt({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${Nl(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(r=(n=e.palette).getContrastText)==null?void 0:r.call(n,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:i,boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${mx.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${mx.disabled}`]:{boxShadow:"none"}}),Xre=mn("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.startIcon,t[`iconSize${tn(r.size)}`]]}})(({ownerState:e})=>bt({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},yU(e))),Kre=mn("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.endIcon,t[`iconSize${tn(r.size)}`]]}})(({ownerState:e})=>bt({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},yU(e))),Iv=me.forwardRef(function(t,r){const n=me.useContext(gU),i=me.useContext(mU),o=s3(n,t),l=Ss({props:o,name:"MuiButton"}),{children:s,color:f="primary",component:p="button",className:v,disabled:x=!1,disableElevation:S=!1,disableFocusRipple:A=!1,endIcon:k,focusVisibleClassName:R,fullWidth:z=!1,size:N="medium",startIcon:B,type:U,variant:K="text"}=l,ne=Pn(l,Hre),ee=bt({},l,{color:f,component:p,disabled:x,disableElevation:S,disableFocusRipple:A,fullWidth:z,size:N,type:U,variant:K}),Q=qre(ee),re=B&&xt.jsx(Xre,{className:Q.startIcon,ownerState:ee,children:B}),Se=k&&xt.jsx(Kre,{className:Q.endIcon,ownerState:ee,children:k}),J=i||"";return xt.jsxs(Wre,bt({ownerState:ee,className:Ln(n.className,Q.root,v,J),component:p,disabled:x,focusRipple:!A,focusVisibleClassName:Ln(Q.focusVisible,R),ref:r,type:U},ne,{classes:Q,children:[re,s,Se]}))});function Gre(e){return Wo("MuiButtonGroup",e)}const Na=po("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),Yre=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],Zre=(e,t)=>{const{ownerState:r}=e;return[{[`& .${Na.grouped}`]:t.grouped},{[`& .${Na.grouped}`]:t[`grouped${tn(r.orientation)}`]},{[`& .${Na.grouped}`]:t[`grouped${tn(r.variant)}`]},{[`& .${Na.grouped}`]:t[`grouped${tn(r.variant)}${tn(r.orientation)}`]},{[`& .${Na.grouped}`]:t[`grouped${tn(r.variant)}${tn(r.color)}`]},{[`& .${Na.firstButton}`]:t.firstButton},{[`& .${Na.lastButton}`]:t.lastButton},{[`& .${Na.middleButton}`]:t.middleButton},t.root,t[r.variant],r.disableElevation===!0&&t.disableElevation,r.fullWidth&&t.fullWidth,r.orientation==="vertical"&&t.vertical]},Jre=e=>{const{classes:t,color:r,disabled:n,disableElevation:i,fullWidth:o,orientation:l,variant:s}=e,f={root:["root",s,l==="vertical"&&"vertical",o&&"fullWidth",i&&"disableElevation"],grouped:["grouped",`grouped${tn(l)}`,`grouped${tn(s)}`,`grouped${tn(s)}${tn(l)}`,`grouped${tn(s)}${tn(r)}`,n&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return us(f,Gre,t)},Qre=mn("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:Zre})(({theme:e,ownerState:t})=>bt({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[2]},t.disableElevation&&{boxShadow:"none"},t.fullWidth&&{width:"100%"},t.orientation==="vertical"&&{flexDirection:"column"},{[`& .${Na.grouped}`]:bt({minWidth:40,"&:hover":bt({},t.variant==="contained"&&{boxShadow:"none"})},t.variant==="contained"&&{boxShadow:"none"}),[`& .${Na.firstButton},& .${Na.middleButton}`]:bt({},t.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},t.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},t.variant==="text"&&t.orientation==="horizontal"&&{borderRight:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Na.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}},t.variant==="text"&&t.orientation==="vertical"&&{borderBottom:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Na.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}},t.variant==="text"&&t.color!=="inherit"&&{borderColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:Nl(e.palette[t.color].main,.5)},t.variant==="outlined"&&t.orientation==="horizontal"&&{borderRightColor:"transparent"},t.variant==="outlined"&&t.orientation==="vertical"&&{borderBottomColor:"transparent"},t.variant==="contained"&&t.orientation==="horizontal"&&{borderRight:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${Na.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}},t.variant==="contained"&&t.orientation==="vertical"&&{borderBottom:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${Na.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}},t.variant==="contained"&&t.color!=="inherit"&&{borderColor:(e.vars||e).palette[t.color].dark},{"&:hover":bt({},t.variant==="outlined"&&t.orientation==="horizontal"&&{borderRightColor:"currentColor"},t.variant==="outlined"&&t.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${Na.lastButton},& .${Na.middleButton}`]:bt({},t.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},t.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},t.variant==="outlined"&&t.orientation==="horizontal"&&{marginLeft:-1},t.variant==="outlined"&&t.orientation==="vertical"&&{marginTop:-1})})),ene=me.forwardRef(function(t,r){const n=Ss({props:t,name:"MuiButtonGroup"}),{children:i,className:o,color:l="primary",component:s="div",disabled:f=!1,disableElevation:p=!1,disableFocusRipple:v=!1,disableRipple:x=!1,fullWidth:S=!1,orientation:A="horizontal",size:k="medium",variant:R="outlined"}=n,z=Pn(n,Yre),N=bt({},n,{color:l,component:s,disabled:f,disableElevation:p,disableFocusRipple:v,disableRipple:x,fullWidth:S,orientation:A,size:k,variant:R}),B=Jre(N),U=me.useMemo(()=>({className:B.grouped,color:l,disabled:f,disableElevation:p,disableFocusRipple:v,disableRipple:x,fullWidth:S,size:k,variant:R}),[l,f,p,v,x,S,k,R,B.grouped]),K=mQ(i),ne=K.length,ee=Q=>{const re=Q===0,Se=Q===ne-1;return re&&Se?"":re?B.firstButton:Se?B.lastButton:B.middleButton};return xt.jsx(Qre,bt({as:s,role:"group",className:Ln(B.root,o),ref:r,ownerState:N},z,{children:xt.jsx(gU.Provider,{value:U,children:K.map((Q,re)=>xt.jsx(mU.Provider,{value:ee(re),children:Q},re))})}))});function tne(e){return Wo("PrivateSwitchBase",e)}po("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const rne=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],nne=e=>{const{classes:t,checked:r,disabled:n,edge:i}=e,o={root:["root",r&&"checked",n&&"disabled",i&&`edge${tn(i)}`],input:["input"]};return us(o,tne,t)},ine=mn(P3)(({ownerState:e})=>bt({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),one=mn("input",{shouldForwardProp:dm})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),sne=me.forwardRef(function(t,r){const{autoFocus:n,checked:i,checkedIcon:o,className:l,defaultChecked:s,disabled:f,disableFocusRipple:p=!1,edge:v=!1,icon:x,id:S,inputProps:A,inputRef:k,name:R,onBlur:z,onChange:N,onFocus:B,readOnly:U,required:K=!1,tabIndex:ne,type:ee,value:Q}=t,re=Pn(t,rne),[Se,J]=K$({controlled:i,default:!!s,name:"SwitchBase",state:"checked"}),G=Mre(),se=Ue=>{B&&B(Ue),G&&G.onFocus&&G.onFocus(Ue)},ve=Ue=>{z&&z(Ue),G&&G.onBlur&&G.onBlur(Ue)},ge=Ue=>{if(Ue.nativeEvent.defaultPrevented)return;const Qe=Ue.target.checked;J(Qe),N&&N(Ue,Qe)};let je=f;G&&typeof je>"u"&&(je=G.disabled);const $e=ee==="checkbox"||ee==="radio",Ze=bt({},t,{checked:Se,disabled:je,disableFocusRipple:p,edge:v}),Me=nne(Ze);return xt.jsxs(ine,bt({component:"span",className:Ln(Me.root,l),centerRipple:!0,focusRipple:!p,disabled:je,tabIndex:null,role:void 0,onFocus:se,onBlur:ve,ownerState:Ze,ref:r},re,{children:[xt.jsx(one,bt({autoFocus:n,checked:i,defaultChecked:s,className:Me.input,disabled:je,id:$e?S:void 0,name:R,onChange:ge,readOnly:U,ref:k,required:K,ownerState:Ze,tabIndex:ne,type:ee},ee==="checkbox"&&Q===void 0?{}:{value:Q},A)),Se?o:x]}))}),ane=yR(xt.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),lne=yR(xt.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),cne=yR(xt.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function une(e){return Wo("MuiCheckbox",e)}const jE=po("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),hne=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],fne=e=>{const{classes:t,indeterminate:r,color:n,size:i}=e,o={root:["root",r&&"indeterminate",`color${tn(n)}`,`size${tn(i)}`]},l=us(o,une,t);return bt({},t,l)},dne=mn(sne,{shouldForwardProp:e=>dm(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,t[`size${tn(r.size)}`],r.color!=="default"&&t[`color${tn(r.color)}`]]}})(({theme:e,ownerState:t})=>bt({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Nl(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${jE.checked}, &.${jE.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${jE.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),pne=xt.jsx(lne,{}),gne=xt.jsx(ane,{}),mne=xt.jsx(cne,{}),_U=me.forwardRef(function(t,r){var n,i;const o=Ss({props:t,name:"MuiCheckbox"}),{checkedIcon:l=pne,color:s="primary",icon:f=gne,indeterminate:p=!1,indeterminateIcon:v=mne,inputProps:x,size:S="medium",className:A}=o,k=Pn(o,hne),R=p?v:f,z=p?v:l,N=bt({},o,{color:s,indeterminate:p,size:S}),B=fne(N);return xt.jsx(dne,bt({type:"checkbox",inputProps:bt({"data-indeterminate":p},x),icon:me.cloneElement(R,{fontSize:(n=R.props.fontSize)!=null?n:S}),checkedIcon:me.cloneElement(z,{fontSize:(i=z.props.fontSize)!=null?i:S}),ownerState:N,ref:r,className:Ln(B.root,A)},k,{classes:B}))});function yne(e){return Wo("MuiModal",e)}po("MuiModal",["root","hidden","backdrop"]);const _ne=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],vne=e=>{const{open:t,exited:r,classes:n}=e;return us({root:["root",!t&&r&&"hidden"],backdrop:["backdrop"]},yne,n)},bne=mn("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.open&&r.exited&&t.hidden]}})(({theme:e,ownerState:t})=>bt({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),xne=mn($re,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),vU=me.forwardRef(function(t,r){var n,i,o,l,s,f;const p=Ss({name:"MuiModal",props:t}),{BackdropComponent:v=xne,BackdropProps:x,className:S,closeAfterTransition:A=!1,children:k,container:R,component:z,components:N={},componentsProps:B={},disableAutoFocus:U=!1,disableEnforceFocus:K=!1,disableEscapeKeyDown:ne=!1,disablePortal:ee=!1,disableRestoreFocus:Q=!1,disableScrollLock:re=!1,hideBackdrop:Se=!1,keepMounted:J=!1,onBackdropClick:G,open:se,slotProps:ve,slots:ge}=p,je=Pn(p,_ne),$e=bt({},p,{closeAfterTransition:A,disableAutoFocus:U,disableEnforceFocus:K,disableEscapeKeyDown:ne,disablePortal:ee,disableRestoreFocus:Q,disableScrollLock:re,hideBackdrop:Se,keepMounted:J}),{getRootProps:Ze,getBackdropProps:Me,getTransitionProps:Ue,portalRef:Qe,isTopModal:ct,exited:ce,hasTransition:be}=Ire(bt({},$e,{rootRef:r})),Oe=bt({},$e,{exited:ce}),Be=vne(Oe),qe={};if(k.props.tabIndex===void 0&&(qe.tabIndex="-1"),be){const{onEnter:At,onExited:zt}=Ue();qe.onEnter=At,qe.onExited=zt}const tt=(n=(i=ge==null?void 0:ge.root)!=null?i:N.Root)!=null?n:bne,We=(o=(l=ge==null?void 0:ge.backdrop)!=null?l:N.Backdrop)!=null?o:v,Xe=(s=ve==null?void 0:ve.root)!=null?s:B.root,lt=(f=ve==null?void 0:ve.backdrop)!=null?f:B.backdrop,wt=d_({elementType:tt,externalSlotProps:Xe,externalForwardedProps:je,getSlotProps:Ze,additionalProps:{ref:r,as:z},ownerState:Oe,className:Ln(S,Xe==null?void 0:Xe.className,Be==null?void 0:Be.root,!Oe.open&&Oe.exited&&(Be==null?void 0:Be.hidden))}),Lt=d_({elementType:We,externalSlotProps:lt,additionalProps:x,getSlotProps:At=>Me(bt({},At,{onClick:zt=>{G&&G(zt),At!=null&&At.onClick&&At.onClick(zt)}})),className:Ln(lt==null?void 0:lt.className,x==null?void 0:x.className,Be==null?void 0:Be.backdrop),ownerState:Oe});return!J&&!se&&(!be||ce)?null:xt.jsx(bre,{ref:Qe,container:R,disablePortal:ee,children:xt.jsxs(tt,bt({},wt,{children:[!Se&&v?xt.jsx(We,bt({},Lt)):null,xt.jsx(_re,{disableEnforceFocus:K,disableAutoFocus:U,disableRestoreFocus:Q,isEnabled:ct,open:se,children:me.cloneElement(k,qe)})]}))})});function wne(e){return Wo("MuiDivider",e)}po("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const Sne=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],Ane=e=>{const{absolute:t,children:r,classes:n,flexItem:i,light:o,orientation:l,textAlign:s,variant:f}=e;return us({root:["root",t&&"absolute",f,o&&"light",l==="vertical"&&"vertical",i&&"flexItem",r&&"withChildren",r&&l==="vertical"&&"withChildrenVertical",s==="right"&&l!=="vertical"&&"textAlignRight",s==="left"&&l!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",l==="vertical"&&"wrapperVertical"]},wne,n)},Ene=mn("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,r.orientation==="vertical"&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&r.orientation==="vertical"&&t.withChildrenVertical,r.textAlign==="right"&&r.orientation!=="vertical"&&t.textAlignRight,r.textAlign==="left"&&r.orientation!=="vertical"&&t.textAlignLeft]}})(({theme:e,ownerState:t})=>bt({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:Nl(e.palette.divider,.08)},t.variant==="inset"&&{marginLeft:72},t.variant==="middle"&&t.orientation==="horizontal"&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},t.variant==="middle"&&t.orientation==="vertical"&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},t.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"}),({ownerState:e})=>bt({},e.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}}),({theme:e,ownerState:t})=>bt({},t.children&&t.orientation!=="vertical"&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`}}),({theme:e,ownerState:t})=>bt({},t.children&&t.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`}}),({ownerState:e})=>bt({},e.textAlign==="right"&&e.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},e.textAlign==="left"&&e.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),Tne=mn("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.wrapper,r.orientation==="vertical"&&t.wrapperVertical]}})(({theme:e,ownerState:t})=>bt({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},t.orientation==="vertical"&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`})),bU=me.forwardRef(function(t,r){const n=Ss({props:t,name:"MuiDivider"}),{absolute:i=!1,children:o,className:l,component:s=o?"div":"hr",flexItem:f=!1,light:p=!1,orientation:v="horizontal",role:x=s!=="hr"?"separator":void 0,textAlign:S="center",variant:A="fullWidth"}=n,k=Pn(n,Sne),R=bt({},n,{absolute:i,component:s,flexItem:f,light:p,orientation:v,role:x,textAlign:S,variant:A}),z=Ane(R);return xt.jsx(Ene,bt({as:s,className:Ln(z.root,l),role:x,ref:r,ownerState:R},k,{children:o?xt.jsx(Tne,{className:z.wrapper,ownerState:R,children:o}):null}))});bU.muiSkipListHighlight=!0;const Cne=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Pne(e,t,r){const n=t.getBoundingClientRect(),i=r&&r.getBoundingClientRect(),o=Cu(t);let l;if(t.fakeTransform)l=t.fakeTransform;else{const p=o.getComputedStyle(t);l=p.getPropertyValue("-webkit-transform")||p.getPropertyValue("transform")}let s=0,f=0;if(l&&l!=="none"&&typeof l=="string"){const p=l.split("(")[1].split(")")[0].split(",");s=parseInt(p[4],10),f=parseInt(p[5],10)}return e==="left"?i?`translateX(${i.right+s-n.left}px)`:`translateX(${o.innerWidth+s-n.left}px)`:e==="right"?i?`translateX(-${n.right-i.left-s}px)`:`translateX(-${n.left+n.width-s}px)`:e==="up"?i?`translateY(${i.bottom+f-n.top}px)`:`translateY(${o.innerHeight+f-n.top}px)`:i?`translateY(-${n.top-i.top+n.height-f}px)`:`translateY(-${n.top+n.height-f}px)`}function Ine(e){return typeof e=="function"?e():e}function yx(e,t,r){const n=Ine(r),i=Pne(e,t,n);i&&(t.style.webkitTransform=i,t.style.transform=i)}const Rne=me.forwardRef(function(t,r){const n=fm(),i={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},o={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:l,appear:s=!0,children:f,container:p,direction:v="down",easing:x=i,in:S,onEnter:A,onEntered:k,onEntering:R,onExit:z,onExited:N,onExiting:B,style:U,timeout:K=o,TransitionComponent:ne=ph}=t,ee=Pn(t,Cne),Q=me.useRef(null),re=pc(f.ref,Q,r),Se=Me=>Ue=>{Me&&(Ue===void 0?Me(Q.current):Me(Q.current,Ue))},J=Se((Me,Ue)=>{yx(v,Me,p),xR(Me),A&&A(Me,Ue)}),G=Se((Me,Ue)=>{const Qe=em({timeout:K,style:U,easing:x},{mode:"enter"});Me.style.webkitTransition=n.transitions.create("-webkit-transform",bt({},Qe)),Me.style.transition=n.transitions.create("transform",bt({},Qe)),Me.style.webkitTransform="none",Me.style.transform="none",R&&R(Me,Ue)}),se=Se(k),ve=Se(B),ge=Se(Me=>{const Ue=em({timeout:K,style:U,easing:x},{mode:"exit"});Me.style.webkitTransition=n.transitions.create("-webkit-transform",Ue),Me.style.transition=n.transitions.create("transform",Ue),yx(v,Me,p),z&&z(Me)}),je=Se(Me=>{Me.style.webkitTransition="",Me.style.transition="",N&&N(Me)}),$e=Me=>{l&&l(Q.current,Me)},Ze=me.useCallback(()=>{Q.current&&yx(v,Q.current,p)},[v,p]);return me.useEffect(()=>{if(S||v==="down"||v==="right")return;const Me=aR(()=>{Q.current&&yx(v,Q.current,p)}),Ue=Cu(Q.current);return Ue.addEventListener("resize",Me),()=>{Me.clear(),Ue.removeEventListener("resize",Me)}},[v,S,p]),me.useEffect(()=>{S||Ze()},[S,Ze]),xt.jsx(ne,bt({nodeRef:Q,onEnter:J,onEntered:se,onEntering:G,onExit:ge,onExited:je,onExiting:ve,addEndListener:$e,appear:s,in:S,timeout:K},ee,{children:(Me,Ue)=>me.cloneElement(f,bt({ref:re,style:bt({visibility:Me==="exited"&&!S?"hidden":void 0},U,f.props.style)},Ue))}))});function kne(e){return Wo("MuiDrawer",e)}po("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const Mne=["BackdropProps"],One=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],xU=(e,t)=>{const{ownerState:r}=e;return[t.root,(r.variant==="permanent"||r.variant==="persistent")&&t.docked,t.modal]},Nne=e=>{const{classes:t,anchor:r,variant:n}=e,i={root:["root"],docked:[(n==="permanent"||n==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${tn(r)}`,n!=="temporary"&&`paperAnchorDocked${tn(r)}`]};return us(i,kne,t)},Dne=mn(vU,{name:"MuiDrawer",slot:"Root",overridesResolver:xU})(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer})),fN=mn("div",{shouldForwardProp:dm,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:xU})({flex:"0 0 auto"}),Lne=mn(f_,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`paperAnchor${tn(r.anchor)}`],r.variant!=="temporary"&&t[`paperAnchorDocked${tn(r.anchor)}`]]}})(({theme:e,ownerState:t})=>bt({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},t.anchor==="left"&&{left:0},t.anchor==="top"&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},t.anchor==="right"&&{right:0},t.anchor==="bottom"&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},t.anchor==="left"&&t.variant!=="temporary"&&{borderRight:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="top"&&t.variant!=="temporary"&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="right"&&t.variant!=="temporary"&&{borderLeft:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="bottom"&&t.variant!=="temporary"&&{borderTop:`1px solid ${(e.vars||e).palette.divider}`})),wU={left:"right",right:"left",top:"down",bottom:"up"};function gg(e){return["left","right"].indexOf(e)!==-1}function iv(e,t){return e.direction==="rtl"&&gg(t)?wU[t]:t}const SU=me.forwardRef(function(t,r){const n=Ss({props:t,name:"MuiDrawer"}),i=fm(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:l="left",BackdropProps:s,children:f,className:p,elevation:v=16,hideBackdrop:x=!1,ModalProps:{BackdropProps:S}={},onClose:A,open:k=!1,PaperProps:R={},SlideProps:z,TransitionComponent:N=Rne,transitionDuration:B=o,variant:U="temporary"}=n,K=Pn(n.ModalProps,Mne),ne=Pn(n,One),ee=me.useRef(!1);me.useEffect(()=>{ee.current=!0},[]);const Q=iv(i,l),Se=bt({},n,{anchor:l,elevation:v,open:k,variant:U},ne),J=Nne(Se),G=xt.jsx(Lne,bt({elevation:U==="temporary"?v:0,square:!0},R,{className:Ln(J.paper,R.className),ownerState:Se,children:f}));if(U==="permanent")return xt.jsx(fN,bt({className:Ln(J.root,J.docked,p),ownerState:Se,ref:r},ne,{children:G}));const se=xt.jsx(N,bt({in:k,direction:wU[Q],timeout:B,appear:ee.current},z,{children:G}));return U==="persistent"?xt.jsx(fN,bt({className:Ln(J.root,J.docked,p),ownerState:Se,ref:r},ne,{children:se})):xt.jsx(Dne,bt({BackdropProps:bt({},s,S,{transitionDuration:B}),className:Ln(J.root,J.modal,p),open:k,ownerState:Se,onClose:A,hideBackdrop:x,ref:r},ne,K,{children:se}))}),Fne=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function l4(e){return`scale(${e}, ${e**2})`}const Bne={entering:{opacity:1,transform:l4(1)},entered:{opacity:1,transform:"none"}},VE=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),AU=me.forwardRef(function(t,r){const{addEndListener:n,appear:i=!0,children:o,easing:l,in:s,onEnter:f,onEntered:p,onEntering:v,onExit:x,onExited:S,onExiting:A,style:k,timeout:R="auto",TransitionComponent:z=ph}=t,N=Pn(t,Fne),B=Z$(),U=me.useRef(),K=fm(),ne=me.useRef(null),ee=pc(ne,o.ref,r),Q=je=>$e=>{if(je){const Ze=ne.current;$e===void 0?je(Ze):je(Ze,$e)}},re=Q(v),Se=Q((je,$e)=>{xR(je);const{duration:Ze,delay:Me,easing:Ue}=em({style:k,timeout:R,easing:l},{mode:"enter"});let Qe;R==="auto"?(Qe=K.transitions.getAutoHeightDuration(je.clientHeight),U.current=Qe):Qe=Ze,je.style.transition=[K.transitions.create("opacity",{duration:Qe,delay:Me}),K.transitions.create("transform",{duration:VE?Qe:Qe*.666,delay:Me,easing:Ue})].join(","),f&&f(je,$e)}),J=Q(p),G=Q(A),se=Q(je=>{const{duration:$e,delay:Ze,easing:Me}=em({style:k,timeout:R,easing:l},{mode:"exit"});let Ue;R==="auto"?(Ue=K.transitions.getAutoHeightDuration(je.clientHeight),U.current=Ue):Ue=$e,je.style.transition=[K.transitions.create("opacity",{duration:Ue,delay:Ze}),K.transitions.create("transform",{duration:VE?Ue:Ue*.666,delay:VE?Ze:Ze||Ue*.333,easing:Me})].join(","),je.style.opacity=0,je.style.transform=l4(.75),x&&x(je)}),ve=Q(S),ge=je=>{R==="auto"&&B.start(U.current||0,je),n&&n(ne.current,je)};return xt.jsx(z,bt({appear:i,in:s,nodeRef:ne,onEnter:Se,onEntered:J,onEntering:re,onExit:se,onExited:ve,onExiting:G,addEndListener:ge,timeout:R==="auto"?null:R},N,{children:(je,$e)=>me.cloneElement(o,bt({style:bt({opacity:0,transform:l4(.75),visibility:je==="exited"&&!s?"hidden":void 0},Bne[je],k,o.props.style),ref:ee},$e))}))});AU.muiSupportAuto=!0;function zne(e,t,r,n,i){const[o,l]=me.useState(()=>i&&r?r(e).matches:n?n(e).matches:t);return cd(()=>{let s=!0;if(!r)return;const f=r(e),p=()=>{s&&l(f.matches)};return p(),f.addListener(p),()=>{s=!1,f.removeListener(p)}},[e,r]),o}const EU=me.useSyncExternalStore;function $ne(e,t,r,n,i){const o=me.useCallback(()=>t,[t]),l=me.useMemo(()=>{if(i&&r)return()=>r(e).matches;if(n!==null){const{matches:v}=n(e);return()=>v}return o},[o,e,n,i,r]),[s,f]=me.useMemo(()=>{if(r===null)return[o,()=>()=>{}];const v=r(e);return[()=>v.matches,x=>(v.addListener(x),()=>{v.removeListener(x)})]},[o,r,e]);return EU(f,s,l)}function TU(e,t={}){const r=dR(),n=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:i=!1,matchMedia:o=n?window.matchMedia:null,ssrMatchMedia:l=null,noSsr:s=!1}=aU({name:"MuiUseMediaQuery",props:t,theme:r});let f=typeof e=="function"?e(r):e;return f=f.replace(/^@media( ?)/m,""),(EU!==void 0?$ne:zne)(f,i,o,l,s)}const Ry=me.createContext({});function Une(e){return Wo("MuiList",e)}po("MuiList",["root","padding","dense","subheader"]);const jne=["children","className","component","dense","disablePadding","subheader"],Vne=e=>{const{classes:t,disablePadding:r,dense:n,subheader:i}=e;return us({root:["root",!r&&"padding",n&&"dense",i&&"subheader"]},Une,t)},Hne=mn("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disablePadding&&t.padding,r.dense&&t.dense,r.subheader&&t.subheader]}})(({ownerState:e})=>bt({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),wR=me.forwardRef(function(t,r){const n=Ss({props:t,name:"MuiList"}),{children:i,className:o,component:l="ul",dense:s=!1,disablePadding:f=!1,subheader:p}=n,v=Pn(n,jne),x=me.useMemo(()=>({dense:s}),[s]),S=bt({},n,{component:l,dense:s,disablePadding:f}),A=Vne(S);return xt.jsx(Ry.Provider,{value:x,children:xt.jsxs(Hne,bt({as:l,className:Ln(A.root,o),ref:r,ownerState:S},v,{children:[p,i]}))})});function qne(e){return Wo("MuiListItem",e)}const k0=po("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),Wne=po("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function Xne(e){return Wo("MuiListItemSecondaryAction",e)}po("MuiListItemSecondaryAction",["root","disableGutters"]);const Kne=["className"],Gne=e=>{const{disableGutters:t,classes:r}=e;return us({root:["root",t&&"disableGutters"]},Xne,r)},Yne=mn("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.disableGutters&&t.disableGutters]}})(({ownerState:e})=>bt({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})),CU=me.forwardRef(function(t,r){const n=Ss({props:t,name:"MuiListItemSecondaryAction"}),{className:i}=n,o=Pn(n,Kne),l=me.useContext(Ry),s=bt({},n,{disableGutters:l.disableGutters}),f=Gne(s);return xt.jsx(Yne,bt({className:Ln(f.root,i),ownerState:s,ref:r},o))});CU.muiName="ListItemSecondaryAction";const Zne=["className"],Jne=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],Qne=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.alignItems==="flex-start"&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters,!r.disablePadding&&t.padding,r.button&&t.button,r.hasSecondaryAction&&t.secondaryAction]},eie=e=>{const{alignItems:t,button:r,classes:n,dense:i,disabled:o,disableGutters:l,disablePadding:s,divider:f,hasSecondaryAction:p,selected:v}=e;return us({root:["root",i&&"dense",!l&&"gutters",!s&&"padding",f&&"divider",o&&"disabled",r&&"button",t==="flex-start"&&"alignItemsFlexStart",p&&"secondaryAction",v&&"selected"],container:["container"]},qne,n)},tie=mn("div",{name:"MuiListItem",slot:"Root",overridesResolver:Qne})(({theme:e,ownerState:t})=>bt({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&bt({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${Wne.root}`]:{paddingRight:48}},{[`&.${k0.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${k0.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Nl(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${k0.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Nl(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${k0.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.alignItems==="flex-start"&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${k0.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Nl(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Nl(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48})),rie=mn("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),PU=me.forwardRef(function(t,r){const n=Ss({props:t,name:"MuiListItem"}),{alignItems:i="center",autoFocus:o=!1,button:l=!1,children:s,className:f,component:p,components:v={},componentsProps:x={},ContainerComponent:S="li",ContainerProps:{className:A}={},dense:k=!1,disabled:R=!1,disableGutters:z=!1,disablePadding:N=!1,divider:B=!1,focusVisibleClassName:U,secondaryAction:K,selected:ne=!1,slotProps:ee={},slots:Q={}}=n,re=Pn(n.ContainerProps,Zne),Se=Pn(n,Jne),J=me.useContext(Ry),G=me.useMemo(()=>({dense:k||J.dense||!1,alignItems:i,disableGutters:z}),[i,J.dense,k,z]),se=me.useRef(null);cd(()=>{o&&se.current&&se.current.focus()},[o]);const ve=me.Children.toArray(s),ge=ve.length&&X$(ve[ve.length-1],["ListItemSecondaryAction"]),je=bt({},n,{alignItems:i,autoFocus:o,button:l,dense:G.dense,disabled:R,disableGutters:z,disablePadding:N,divider:B,hasSecondaryAction:ge,selected:ne}),$e=eie(je),Ze=pc(se,r),Me=Q.root||v.Root||tie,Ue=ee.root||x.root||{},Qe=bt({className:Ln($e.root,Ue.className,f),disabled:R},Se);let ct=p||"li";return l&&(Qe.component=p||"div",Qe.focusVisibleClassName=Ln(k0.focusVisible,U),ct=P3),ge?(ct=!Qe.component&&!p?"div":ct,S==="li"&&(ct==="li"?ct="div":Qe.component==="li"&&(Qe.component="div")),xt.jsx(Ry.Provider,{value:G,children:xt.jsxs(rie,bt({as:S,className:Ln($e.container,A),ref:Ze,ownerState:je},re,{children:[xt.jsx(Me,bt({},Ue,!d5(Me)&&{as:ct,ownerState:bt({},je,Ue.ownerState)},Qe,{children:ve})),ve.pop()]}))})):xt.jsx(Ry.Provider,{value:G,children:xt.jsxs(Me,bt({},Ue,{as:ct,ref:Ze},!d5(Me)&&{ownerState:bt({},je,Ue.ownerState)},Qe,{children:[ve,K&&xt.jsx(CU,{children:K})]}))})});function nie(e){return Wo("MuiListItemIcon",e)}po("MuiListItemIcon",["root","alignItemsFlexStart"]);const iie=["className"],oie=e=>{const{alignItems:t,classes:r}=e;return us({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},nie,r)},sie=mn("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(({theme:e,ownerState:t})=>bt({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex"},t.alignItems==="flex-start"&&{marginTop:8})),IU=me.forwardRef(function(t,r){const n=Ss({props:t,name:"MuiListItemIcon"}),{className:i}=n,o=Pn(n,iie),l=me.useContext(Ry),s=bt({},n,{alignItems:l.alignItems}),f=oie(s);return xt.jsx(sie,bt({className:Ln(f.root,i),ownerState:s,ref:r},o))}),aie=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function HE(e,t,r){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:r?null:e.firstChild}function dN(e,t,r){return e===t?r?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:r?null:e.lastChild}function RU(e,t){if(t===void 0)return!0;let r=e.innerText;return r===void 0&&(r=e.textContent),r=r.trim().toLowerCase(),r.length===0?!1:t.repeating?r[0]===t.keys[0]:r.indexOf(t.keys.join(""))===0}function I1(e,t,r,n,i,o){let l=!1,s=i(e,t,t?r:!1);for(;s;){if(s===e.firstChild){if(l)return!1;l=!0}const f=n?!1:s.disabled||s.getAttribute("aria-disabled")==="true";if(!s.hasAttribute("tabindex")||!RU(s,o)||f)s=i(e,s,r);else return s.focus(),!0}return!1}const lie=me.forwardRef(function(t,r){const{actions:n,autoFocus:i=!1,autoFocusItem:o=!1,children:l,className:s,disabledItemsFocusable:f=!1,disableListWrap:p=!1,onKeyDown:v,variant:x="selectedMenu"}=t,S=Pn(t,aie),A=me.useRef(null),k=me.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});cd(()=>{i&&A.current.focus()},[i]),me.useImperativeHandle(n,()=>({adjustStyleForScrollbar:(U,K)=>{const ne=!A.current.style.width;if(U.clientHeight<A.current.clientHeight&&ne){const ee=`${Q$(Fa(U))}px`;A.current.style[K.direction==="rtl"?"paddingLeft":"paddingRight"]=ee,A.current.style.width=`calc(100% + ${ee})`}return A.current}}),[]);const R=U=>{const K=A.current,ne=U.key,ee=Fa(K).activeElement;if(ne==="ArrowDown")U.preventDefault(),I1(K,ee,p,f,HE);else if(ne==="ArrowUp")U.preventDefault(),I1(K,ee,p,f,dN);else if(ne==="Home")U.preventDefault(),I1(K,null,p,f,HE);else if(ne==="End")U.preventDefault(),I1(K,null,p,f,dN);else if(ne.length===1){const Q=k.current,re=ne.toLowerCase(),Se=performance.now();Q.keys.length>0&&(Se-Q.lastTime>500?(Q.keys=[],Q.repeating=!0,Q.previousKeyMatched=!0):Q.repeating&&re!==Q.keys[0]&&(Q.repeating=!1)),Q.lastTime=Se,Q.keys.push(re);const J=ee&&!Q.repeating&&RU(ee,Q);Q.previousKeyMatched&&(J||I1(K,ee,!1,f,HE,Q))?U.preventDefault():Q.previousKeyMatched=!1}v&&v(U)},z=pc(A,r);let N=-1;me.Children.forEach(l,(U,K)=>{if(!me.isValidElement(U)){N===K&&(N+=1,N>=l.length&&(N=-1));return}U.props.disabled||(x==="selectedMenu"&&U.props.selected||N===-1)&&(N=K),N===K&&(U.props.disabled||U.props.muiSkipListHighlight||U.type.muiSkipListHighlight)&&(N+=1,N>=l.length&&(N=-1))});const B=me.Children.map(l,(U,K)=>{if(K===N){const ne={};return o&&(ne.autoFocus=!0),U.props.tabIndex===void 0&&x==="selectedMenu"&&(ne.tabIndex=0),me.cloneElement(U,ne)}return U});return xt.jsx(wR,bt({role:"menu",ref:z,className:s,onKeyDown:R,tabIndex:i?0:-1},S,{children:B}))});function cie(e){return Wo("MuiPopover",e)}po("MuiPopover",["root","paper"]);const uie=["onEntering"],hie=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],fie=["slotProps"];function pN(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.height/2:t==="bottom"&&(r=e.height),r}function gN(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.width/2:t==="right"&&(r=e.width),r}function mN(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function qE(e){return typeof e=="function"?e():e}const die=e=>{const{classes:t}=e;return us({root:["root"],paper:["paper"]},cie,t)},pie=mn(vU,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),kU=mn(f_,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),gie=me.forwardRef(function(t,r){var n,i,o;const l=Ss({props:t,name:"MuiPopover"}),{action:s,anchorEl:f,anchorOrigin:p={vertical:"top",horizontal:"left"},anchorPosition:v,anchorReference:x="anchorEl",children:S,className:A,container:k,elevation:R=8,marginThreshold:z=16,open:N,PaperProps:B={},slots:U,slotProps:K,transformOrigin:ne={vertical:"top",horizontal:"left"},TransitionComponent:ee=AU,transitionDuration:Q="auto",TransitionProps:{onEntering:re}={},disableScrollLock:Se=!1}=l,J=Pn(l.TransitionProps,uie),G=Pn(l,hie),se=(n=K==null?void 0:K.paper)!=null?n:B,ve=me.useRef(),ge=pc(ve,se.ref),je=bt({},l,{anchorOrigin:p,anchorReference:x,elevation:R,marginThreshold:z,externalPaperSlotProps:se,transformOrigin:ne,TransitionComponent:ee,transitionDuration:Q,TransitionProps:J}),$e=die(je),Ze=me.useCallback(()=>{if(x==="anchorPosition")return v;const At=qE(f),vt=(At&&At.nodeType===1?At:Fa(ve.current).body).getBoundingClientRect();return{top:vt.top+pN(vt,p.vertical),left:vt.left+gN(vt,p.horizontal)}},[f,p.horizontal,p.vertical,v,x]),Me=me.useCallback(At=>({vertical:pN(At,ne.vertical),horizontal:gN(At,ne.horizontal)}),[ne.horizontal,ne.vertical]),Ue=me.useCallback(At=>{const zt={width:At.offsetWidth,height:At.offsetHeight},vt=Me(zt);if(x==="none")return{top:null,left:null,transformOrigin:mN(vt)};const pe=Ze();let ur=pe.top-vt.vertical,sr=pe.left-vt.horizontal;const Tt=ur+zt.height,Nt=sr+zt.width,Zt=Cu(qE(f)),rr=Zt.innerHeight-z,at=Zt.innerWidth-z;if(z!==null&&ur<z){const It=ur-z;ur-=It,vt.vertical+=It}else if(z!==null&&Tt>rr){const It=Tt-rr;ur-=It,vt.vertical+=It}if(z!==null&&sr<z){const It=sr-z;sr-=It,vt.horizontal+=It}else if(Nt>at){const It=Nt-at;sr-=It,vt.horizontal+=It}return{top:`${Math.round(ur)}px`,left:`${Math.round(sr)}px`,transformOrigin:mN(vt)}},[f,x,Ze,Me,z]),[Qe,ct]=me.useState(N),ce=me.useCallback(()=>{const At=ve.current;if(!At)return;const zt=Ue(At);zt.top!==null&&(At.style.top=zt.top),zt.left!==null&&(At.style.left=zt.left),At.style.transformOrigin=zt.transformOrigin,ct(!0)},[Ue]);me.useEffect(()=>(Se&&window.addEventListener("scroll",ce),()=>window.removeEventListener("scroll",ce)),[f,Se,ce]);const be=(At,zt)=>{re&&re(At,zt),ce()},Oe=()=>{ct(!1)};me.useEffect(()=>{N&&ce()}),me.useImperativeHandle(s,()=>N?{updatePosition:()=>{ce()}}:null,[N,ce]),me.useEffect(()=>{if(!N)return;const At=aR(()=>{ce()}),zt=Cu(f);return zt.addEventListener("resize",At),()=>{At.clear(),zt.removeEventListener("resize",At)}},[f,N,ce]);let Be=Q;Q==="auto"&&!ee.muiSupportAuto&&(Be=void 0);const qe=k||(f?Fa(qE(f)).body:void 0),tt=(i=U==null?void 0:U.root)!=null?i:pie,We=(o=U==null?void 0:U.paper)!=null?o:kU,Xe=d_({elementType:We,externalSlotProps:bt({},se,{style:Qe?se.style:bt({},se.style,{opacity:0})}),additionalProps:{elevation:R,ref:ge},ownerState:je,className:Ln($e.paper,se==null?void 0:se.className)}),lt=d_({elementType:tt,externalSlotProps:(K==null?void 0:K.root)||{},externalForwardedProps:G,additionalProps:{ref:r,slotProps:{backdrop:{invisible:!0}},container:qe,open:N},ownerState:je,className:Ln($e.root,A)}),{slotProps:wt}=lt,Lt=Pn(lt,fie);return xt.jsx(tt,bt({},Lt,!d5(tt)&&{slotProps:wt,disableScrollLock:Se},{children:xt.jsx(ee,bt({appear:!0,in:N,onEntering:be,onExited:Oe,timeout:Be},J,{children:xt.jsx(We,bt({},Xe,{children:S}))}))}))});function mie(e){return Wo("MuiMenu",e)}po("MuiMenu",["root","paper","list"]);const yie=["onEntering"],_ie=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],vie={vertical:"top",horizontal:"right"},bie={vertical:"top",horizontal:"left"},xie=e=>{const{classes:t}=e;return us({root:["root"],paper:["paper"],list:["list"]},mie,t)},wie=mn(gie,{shouldForwardProp:e=>dm(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Sie=mn(kU,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Aie=mn(lie,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),Eie=me.forwardRef(function(t,r){var n,i;const o=Ss({props:t,name:"MuiMenu"}),{autoFocus:l=!0,children:s,className:f,disableAutoFocusItem:p=!1,MenuListProps:v={},onClose:x,open:S,PaperProps:A={},PopoverClasses:k,transitionDuration:R="auto",TransitionProps:{onEntering:z}={},variant:N="selectedMenu",slots:B={},slotProps:U={}}=o,K=Pn(o.TransitionProps,yie),ne=Pn(o,_ie),ee=fm(),Q=ee.direction==="rtl",re=bt({},o,{autoFocus:l,disableAutoFocusItem:p,MenuListProps:v,onEntering:z,PaperProps:A,transitionDuration:R,TransitionProps:K,variant:N}),Se=xie(re),J=l&&!p&&S,G=me.useRef(null),se=(Ue,Qe)=>{G.current&&G.current.adjustStyleForScrollbar(Ue,ee),z&&z(Ue,Qe)},ve=Ue=>{Ue.key==="Tab"&&(Ue.preventDefault(),x&&x(Ue,"tabKeyDown"))};let ge=-1;me.Children.map(s,(Ue,Qe)=>{me.isValidElement(Ue)&&(Ue.props.disabled||(N==="selectedMenu"&&Ue.props.selected||ge===-1)&&(ge=Qe))});const je=(n=B.paper)!=null?n:Sie,$e=(i=U.paper)!=null?i:A,Ze=d_({elementType:B.root,externalSlotProps:U.root,ownerState:re,className:[Se.root,f]}),Me=d_({elementType:je,externalSlotProps:$e,ownerState:re,className:Se.paper});return xt.jsx(wie,bt({onClose:x,anchorOrigin:{vertical:"bottom",horizontal:Q?"right":"left"},transformOrigin:Q?vie:bie,slots:{paper:je,root:B.root},slotProps:{root:Ze,paper:Me},open:S,ref:r,transitionDuration:R,TransitionProps:bt({onEntering:se},K),ownerState:re},ne,{classes:k,children:xt.jsx(Aie,bt({onKeyDown:ve,actions:G,autoFocus:l&&(ge===-1||p),autoFocusItem:J,variant:N},v,{className:Ln(Se.list,v.className),children:s}))}))}),Tie=["anchor","classes","className","width","style"],Cie=mn("div",{shouldForwardProp:dm})(({theme:e,ownerState:t})=>bt({position:"fixed",top:0,left:0,bottom:0,zIndex:e.zIndex.drawer-1},t.anchor==="left"&&{right:"auto"},t.anchor==="right"&&{left:"auto",right:0},t.anchor==="top"&&{bottom:"auto",right:0},t.anchor==="bottom"&&{top:"auto",bottom:0,right:0})),Pie=me.forwardRef(function(t,r){const{anchor:n,classes:i={},className:o,width:l,style:s}=t,f=Pn(t,Tie),p=t;return xt.jsx(Cie,bt({className:Ln("PrivateSwipeArea-root",i.root,i[`anchor${tn(n)}`],o),ref:r,style:bt({[gg(n)?"width":"height"]:l},s),ownerState:p},f))}),Iie=["BackdropProps"],Rie=["anchor","disableBackdropTransition","disableDiscovery","disableSwipeToOpen","hideBackdrop","hysteresis","allowSwipeInChildren","minFlingVelocity","ModalProps","onClose","onOpen","open","PaperProps","SwipeAreaProps","swipeAreaWidth","transitionDuration","variant"],_x=3,WE=20;let Vf=null;function XE(e,t,r){return e==="right"?r.body.offsetWidth-t[0].pageX:t[0].pageX}function KE(e,t,r){return e==="bottom"?r.innerHeight-t[0].clientY:t[0].clientY}function R1(e,t){return e?t.clientWidth:t.clientHeight}function yN(e,t,r,n){return Math.min(Math.max(r?t-e:n+t-e,0),n)}function kie(e,t){const r=[];for(;e&&e!==t.parentElement;){const n=Cu(t).getComputedStyle(e);n.getPropertyValue("position")==="absolute"||n.getPropertyValue("overflow-x")==="hidden"||(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&r.push(e),e=e.parentElement}return r}function Mie({domTreeShapes:e,start:t,current:r,anchor:n}){const i={scrollPosition:{x:"scrollLeft",y:"scrollTop"},scrollLength:{x:"scrollWidth",y:"scrollHeight"},clientLength:{x:"clientWidth",y:"clientHeight"}};return e.some(o=>{let l=r>=t;(n==="top"||n==="left")&&(l=!l);const s=n==="left"||n==="right"?"x":"y",f=Math.round(o[i.scrollPosition[s]]),p=f>0,v=f+o[i.clientLength[s]]<o[i.scrollLength[s]];return!!(l&&v||!l&&p)})}const Oie=typeof navigator<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent),Nie=me.forwardRef(function(t,r){const n=lU({name:"MuiSwipeableDrawer",props:t}),i=fm(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:l="left",disableBackdropTransition:s=!1,disableDiscovery:f=!1,disableSwipeToOpen:p=Oie,hideBackdrop:v,hysteresis:x=.52,allowSwipeInChildren:S=!1,minFlingVelocity:A=450,ModalProps:{BackdropProps:k}={},onClose:R,onOpen:z,open:N=!1,PaperProps:B={},SwipeAreaProps:U,swipeAreaWidth:K=20,transitionDuration:ne=o,variant:ee="temporary"}=n,Q=Pn(n.ModalProps,Iie),re=Pn(n,Rie),[Se,J]=me.useState(!1),G=me.useRef({isSwiping:null}),se=me.useRef(),ve=me.useRef(),ge=me.useRef(),je=pc(B.ref,ge),$e=me.useRef(!1),Ze=me.useRef();cd(()=>{Ze.current=null},[N]);const Me=me.useCallback((be,Oe={})=>{const{mode:Be=null,changeTransition:qe=!0}=Oe,tt=iv(i,l),We=["right","bottom"].indexOf(tt)!==-1?1:-1,Xe=gg(l),lt=Xe?`translate(${We*be}px, 0)`:`translate(0, ${We*be}px)`,wt=ge.current.style;wt.webkitTransform=lt,wt.transform=lt;let Lt="";if(Be&&(Lt=i.transitions.create("all",em({easing:void 0,style:void 0,timeout:ne},{mode:Be}))),qe&&(wt.webkitTransition=Lt,wt.transition=Lt),!s&&!v){const At=ve.current.style;At.opacity=1-be/R1(Xe,ge.current),qe&&(At.webkitTransition=Lt,At.transition=Lt)}},[l,s,v,i,ne]),Ue=af(be=>{if(!$e.current)return;if(Vf=null,$e.current=!1,s2.flushSync(()=>{J(!1)}),!G.current.isSwiping){G.current.isSwiping=null;return}G.current.isSwiping=null;const Oe=iv(i,l),Be=gg(l);let qe;Be?qe=XE(Oe,be.changedTouches,Fa(be.currentTarget)):qe=KE(Oe,be.changedTouches,Cu(be.currentTarget));const tt=Be?G.current.startX:G.current.startY,We=R1(Be,ge.current),Xe=yN(qe,tt,N,We),lt=Xe/We;if(Math.abs(G.current.velocity)>A&&(Ze.current=Math.abs((We-Xe)/G.current.velocity)*1e3),N){G.current.velocity>A||lt>x?R():Me(0,{mode:"exit"});return}G.current.velocity<-A||1-lt>x?z():Me(R1(Be,ge.current),{mode:"enter"})}),Qe=(be=!1)=>{if(!Se){(be||!(f&&S))&&s2.flushSync(()=>{J(!0)});const Oe=gg(l);!N&&ge.current&&Me(R1(Oe,ge.current)+(f?15:-WE),{changeTransition:!1}),G.current.velocity=0,G.current.lastTime=null,G.current.lastTranslate=null,G.current.paperHit=!1,$e.current=!0}},ct=af(be=>{if(!ge.current||!$e.current||Vf!==null&&Vf!==G.current)return;Qe(!0);const Oe=iv(i,l),Be=gg(l),qe=XE(Oe,be.touches,Fa(be.currentTarget)),tt=KE(Oe,be.touches,Cu(be.currentTarget));if(N&&ge.current.contains(be.target)&&Vf===null){const Lt=kie(be.target,ge.current);if(Mie({domTreeShapes:Lt,start:Be?G.current.startX:G.current.startY,current:Be?qe:tt,anchor:l})){Vf=!0;return}Vf=G.current}if(G.current.isSwiping==null){const Lt=Math.abs(qe-G.current.startX),At=Math.abs(tt-G.current.startY),zt=Be?Lt>At&&Lt>_x:At>Lt&&At>_x;if(zt&&be.cancelable&&be.preventDefault(),zt===!0||(Be?At>_x:Lt>_x)){if(G.current.isSwiping=zt,!zt){Ue(be);return}G.current.startX=qe,G.current.startY=tt,!f&&!N&&(Be?G.current.startX-=WE:G.current.startY-=WE)}}if(!G.current.isSwiping)return;const We=R1(Be,ge.current);let Xe=Be?G.current.startX:G.current.startY;N&&!G.current.paperHit&&(Xe=Math.min(Xe,We));const lt=yN(Be?qe:tt,Xe,N,We);if(N)if(G.current.paperHit)lt===0&&(G.current.startX=qe,G.current.startY=tt);else if(Be?qe<We:tt<We)G.current.paperHit=!0,G.current.startX=qe,G.current.startY=tt;else return;G.current.lastTranslate===null&&(G.current.lastTranslate=lt,G.current.lastTime=performance.now()+1);const wt=(lt-G.current.lastTranslate)/(performance.now()-G.current.lastTime)*1e3;G.current.velocity=G.current.velocity*.4+wt*.6,G.current.lastTranslate=lt,G.current.lastTime=performance.now(),be.cancelable&&be.preventDefault(),Me(lt)}),ce=af(be=>{if(be.defaultPrevented||be.defaultMuiPrevented||N&&(v||!ve.current.contains(be.target))&&!ge.current.contains(be.target))return;const Oe=iv(i,l),Be=gg(l),qe=XE(Oe,be.touches,Fa(be.currentTarget)),tt=KE(Oe,be.touches,Cu(be.currentTarget));if(!N){var We;if(p||!(be.target===se.current||(We=ge.current)!=null&&We.contains(be.target)&&(typeof S=="function"?S(be,se.current,ge.current):S)))return;if(Be){if(qe>K)return}else if(tt>K)return}be.defaultMuiPrevented=!0,Vf=null,G.current.startX=qe,G.current.startY=tt,Qe()});return me.useEffect(()=>{if(ee==="temporary"){const be=Fa(ge.current);return be.addEventListener("touchstart",ce),be.addEventListener("touchmove",ct,{passive:!N}),be.addEventListener("touchend",Ue),()=>{be.removeEventListener("touchstart",ce),be.removeEventListener("touchmove",ct,{passive:!N}),be.removeEventListener("touchend",Ue)}}},[ee,N,ce,ct,Ue]),me.useEffect(()=>()=>{Vf===G.current&&(Vf=null)},[]),me.useEffect(()=>{N||J(!1)},[N]),xt.jsxs(me.Fragment,{children:[xt.jsx(SU,bt({open:ee==="temporary"&&Se?!0:N,variant:ee,ModalProps:bt({BackdropProps:bt({},k,{ref:ve})},ee==="temporary"&&{keepMounted:!0},Q),hideBackdrop:v,PaperProps:bt({},B,{style:bt({pointerEvents:ee==="temporary"&&!N&&!S?"none":""},B.style),ref:je}),anchor:l,transitionDuration:Ze.current||ne,onClose:R,ref:r},re)),!p&&ee==="temporary"&&xt.jsx(Rre,{children:xt.jsx(Pie,bt({anchor:l,ref:se,width:K},U))})]})});function Die(e){return Wo("MuiToolbar",e)}po("MuiToolbar",["root","gutters","regular","dense"]);const Lie=["className","component","disableGutters","variant"],Fie=e=>{const{classes:t,disableGutters:r,variant:n}=e;return us({root:["root",!r&&"gutters",n]},Die,t)},Bie=mn("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableGutters&&t.gutters,t[r.variant]]}})(({theme:e,ownerState:t})=>bt({position:"relative",display:"flex",alignItems:"center"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},t.variant==="dense"&&{minHeight:48}),({theme:e,ownerState:t})=>t.variant==="regular"&&e.mixins.toolbar),zie=me.forwardRef(function(t,r){const n=Ss({props:t,name:"MuiToolbar"}),{className:i,component:o="div",disableGutters:l=!1,variant:s="regular"}=n,f=Pn(n,Lie),p=bt({},n,{component:o,disableGutters:l,variant:s}),v=Fie(p);return xt.jsx(Bie,bt({as:o,className:Ln(v.root,i),ref:r,ownerState:p},f))});var SR={},MU={exports:{}};(function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(MU);var Zc=MU.exports,GE={};function fi(){return fi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fi.apply(this,arguments)}function vf(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function $ie(e,t){return u2(e,t)}const Uie=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},jie=["values","unit","step"],Vie=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,n)=>r.val-n.val),t.reduce((r,n)=>fi({},r,{[n.key]:n.val}),{})};function Hie(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:n=5}=e,i=vf(e,jie),o=Vie(t),l=Object.keys(o);function s(S){return`@media (min-width:${typeof t[S]=="number"?t[S]:S}${r})`}function f(S){return`@media (max-width:${(typeof t[S]=="number"?t[S]:S)-n/100}${r})`}function p(S,A){const k=l.indexOf(A);return`@media (min-width:${typeof t[S]=="number"?t[S]:S}${r}) and (max-width:${(k!==-1&&typeof t[l[k]]=="number"?t[l[k]]:A)-n/100}${r})`}function v(S){return l.indexOf(S)+1<l.length?p(S,l[l.indexOf(S)+1]):s(S)}function x(S){const A=l.indexOf(S);return A===0?s(l[1]):A===l.length-1?f(l[A]):p(S,l[l.indexOf(S)+1]).replace("@media","@media not all and")}return fi({keys:l,values:o,up:s,down:f,between:p,only:v,not:x,unit:r},i)}const qie={borderRadius:4};function Rv(e,t){return t?za(e,t,{clone:!1}):e}const AR={xs:0,sm:600,md:900,lg:1200,xl:1536},_N={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${AR[e]}px)`};function hd(e,t,r){const n=e.theme||{};if(Array.isArray(t)){const o=n.breakpoints||_N;return t.reduce((l,s,f)=>(l[o.up(o.keys[f])]=r(t[f]),l),{})}if(typeof t=="object"){const o=n.breakpoints||_N;return Object.keys(t).reduce((l,s)=>{if(Object.keys(o.values||AR).indexOf(s)!==-1){const f=o.up(s);l[f]=r(t[s],s)}else{const f=s;l[f]=t[f]}return l},{})}return r(t)}function Wie(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((n,i)=>{const o=e.up(i);return n[o]={},n},{}))||{}}function Xie(e,t){return e.reduce((r,n)=>{const i=r[n];return(!i||Object.keys(i).length===0)&&delete r[n],r},t)}function I3(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const n=`vars.${t}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,e);if(n!=null)return n}return t.split(".").reduce((n,i)=>n&&n[i]!=null?n[i]:null,e)}function p5(e,t,r,n=r){let i;return typeof e=="function"?i=e(r):Array.isArray(e)?i=e[r]||n:i=I3(e,r)||n,t&&(i=t(i,n,e)),i}function As(e){const{prop:t,cssProperty:r=e.prop,themeKey:n,transform:i}=e,o=l=>{if(l[t]==null)return null;const s=l[t],f=l.theme,p=I3(f,n)||{};return hd(l,s,x=>{let S=p5(p,i,x);return x===S&&typeof x=="string"&&(S=p5(p,i,`${t}${x==="default"?"":tn(x)}`,x)),r===!1?S:{[r]:S}})};return o.propTypes={},o.filterProps=[t],o}function Kie(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const Gie={m:"margin",p:"padding"},Yie={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},vN={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Zie=Kie(e=>{if(e.length>2)if(vN[e])e=vN[e];else return[e];const[t,r]=e.split(""),n=Gie[t],i=Yie[r]||"";return Array.isArray(i)?i.map(o=>n+o):[n+i]}),ER=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],TR=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...ER,...TR];function tb(e,t,r,n){var i;const o=(i=I3(e,t,!1))!=null?i:r;return typeof o=="number"?l=>typeof l=="string"?l:o*l:Array.isArray(o)?l=>typeof l=="string"?l:o[l]:typeof o=="function"?o:()=>{}}function OU(e){return tb(e,"spacing",8)}function rb(e,t){if(typeof t=="string"||t==null)return t;const r=Math.abs(t),n=e(r);return t>=0?n:typeof n=="number"?-n:`-${n}`}function Jie(e,t){return r=>e.reduce((n,i)=>(n[i]=rb(t,r),n),{})}function Qie(e,t,r,n){if(t.indexOf(r)===-1)return null;const i=Zie(r),o=Jie(i,n),l=e[r];return hd(e,l,o)}function NU(e,t){const r=OU(e.theme);return Object.keys(e).map(n=>Qie(e,t,n,r)).reduce(Rv,{})}function ns(e){return NU(e,ER)}ns.propTypes={};ns.filterProps=ER;function is(e){return NU(e,TR)}is.propTypes={};is.filterProps=TR;function eoe(e=8){if(e.mui)return e;const t=OU({spacing:e}),r=(...n)=>(n.length===0?[1]:n).map(o=>{const l=t(o);return typeof l=="number"?`${l}px`:l}).join(" ");return r.mui=!0,r}function R3(...e){const t=e.reduce((n,i)=>(i.filterProps.forEach(o=>{n[o]=i}),n),{}),r=n=>Object.keys(n).reduce((i,o)=>t[o]?Rv(i,t[o](n)):i,{});return r.propTypes={},r.filterProps=e.reduce((n,i)=>n.concat(i.filterProps),[]),r}function bu(e){return typeof e!="number"?e:`${e}px solid`}function Du(e,t){return As({prop:e,themeKey:"borders",transform:t})}const toe=Du("border",bu),roe=Du("borderTop",bu),noe=Du("borderRight",bu),ioe=Du("borderBottom",bu),ooe=Du("borderLeft",bu),soe=Du("borderColor"),aoe=Du("borderTopColor"),loe=Du("borderRightColor"),coe=Du("borderBottomColor"),uoe=Du("borderLeftColor"),hoe=Du("outline",bu),foe=Du("outlineColor"),k3=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=tb(e.theme,"shape.borderRadius",4),r=n=>({borderRadius:rb(t,n)});return hd(e,e.borderRadius,r)}return null};k3.propTypes={};k3.filterProps=["borderRadius"];R3(toe,roe,noe,ioe,ooe,soe,aoe,loe,coe,uoe,k3,hoe,foe);const M3=e=>{if(e.gap!==void 0&&e.gap!==null){const t=tb(e.theme,"spacing",8),r=n=>({gap:rb(t,n)});return hd(e,e.gap,r)}return null};M3.propTypes={};M3.filterProps=["gap"];const O3=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=tb(e.theme,"spacing",8),r=n=>({columnGap:rb(t,n)});return hd(e,e.columnGap,r)}return null};O3.propTypes={};O3.filterProps=["columnGap"];const N3=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=tb(e.theme,"spacing",8),r=n=>({rowGap:rb(t,n)});return hd(e,e.rowGap,r)}return null};N3.propTypes={};N3.filterProps=["rowGap"];const doe=As({prop:"gridColumn"}),poe=As({prop:"gridRow"}),goe=As({prop:"gridAutoFlow"}),moe=As({prop:"gridAutoColumns"}),yoe=As({prop:"gridAutoRows"}),_oe=As({prop:"gridTemplateColumns"}),voe=As({prop:"gridTemplateRows"}),boe=As({prop:"gridTemplateAreas"}),xoe=As({prop:"gridArea"});R3(M3,O3,N3,doe,poe,goe,moe,yoe,_oe,voe,boe,xoe);function ky(e,t){return t==="grey"?t:e}const woe=As({prop:"color",themeKey:"palette",transform:ky}),Soe=As({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:ky}),Aoe=As({prop:"backgroundColor",themeKey:"palette",transform:ky});R3(woe,Soe,Aoe);function Uc(e){return e<=1&&e!==0?`${e*100}%`:e}const Eoe=As({prop:"width",transform:Uc}),CR=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var n,i;const o=((n=e.theme)==null||(n=n.breakpoints)==null||(n=n.values)==null?void 0:n[r])||AR[r];return o?((i=e.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${o}${e.theme.breakpoints.unit}`}:{maxWidth:o}:{maxWidth:Uc(r)}};return hd(e,e.maxWidth,t)}return null};CR.filterProps=["maxWidth"];const Toe=As({prop:"minWidth",transform:Uc}),Coe=As({prop:"height",transform:Uc}),Poe=As({prop:"maxHeight",transform:Uc}),Ioe=As({prop:"minHeight",transform:Uc});As({prop:"size",cssProperty:"width",transform:Uc});As({prop:"size",cssProperty:"height",transform:Uc});const Roe=As({prop:"boxSizing"});R3(Eoe,CR,Toe,Coe,Poe,Ioe,Roe);const PR={border:{themeKey:"borders",transform:bu},borderTop:{themeKey:"borders",transform:bu},borderRight:{themeKey:"borders",transform:bu},borderBottom:{themeKey:"borders",transform:bu},borderLeft:{themeKey:"borders",transform:bu},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:bu},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:k3},color:{themeKey:"palette",transform:ky},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:ky},backgroundColor:{themeKey:"palette",transform:ky},p:{style:is},pt:{style:is},pr:{style:is},pb:{style:is},pl:{style:is},px:{style:is},py:{style:is},padding:{style:is},paddingTop:{style:is},paddingRight:{style:is},paddingBottom:{style:is},paddingLeft:{style:is},paddingX:{style:is},paddingY:{style:is},paddingInline:{style:is},paddingInlineStart:{style:is},paddingInlineEnd:{style:is},paddingBlock:{style:is},paddingBlockStart:{style:is},paddingBlockEnd:{style:is},m:{style:ns},mt:{style:ns},mr:{style:ns},mb:{style:ns},ml:{style:ns},mx:{style:ns},my:{style:ns},margin:{style:ns},marginTop:{style:ns},marginRight:{style:ns},marginBottom:{style:ns},marginLeft:{style:ns},marginX:{style:ns},marginY:{style:ns},marginInline:{style:ns},marginInlineStart:{style:ns},marginInlineEnd:{style:ns},marginBlock:{style:ns},marginBlockStart:{style:ns},marginBlockEnd:{style:ns},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:M3},rowGap:{style:N3},columnGap:{style:O3},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Uc},maxWidth:{style:CR},minWidth:{transform:Uc},height:{transform:Uc},maxHeight:{transform:Uc},minHeight:{transform:Uc},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function koe(...e){const t=e.reduce((n,i)=>n.concat(Object.keys(i)),[]),r=new Set(t);return e.every(n=>r.size===Object.keys(n).length)}function Moe(e,t){return typeof e=="function"?e(t):e}function Ooe(){function e(r,n,i,o){const l={[r]:n,theme:i},s=o[r];if(!s)return{[r]:n};const{cssProperty:f=r,themeKey:p,transform:v,style:x}=s;if(n==null)return null;if(p==="typography"&&n==="inherit")return{[r]:n};const S=I3(i,p)||{};return x?x(l):hd(l,n,k=>{let R=p5(S,v,k);return k===R&&typeof k=="string"&&(R=p5(S,v,`${r}${k==="default"?"":tn(k)}`,k)),f===!1?R:{[f]:R}})}function t(r){var n;const{sx:i,theme:o={}}=r||{};if(!i)return null;const l=(n=o.unstable_sxConfig)!=null?n:PR;function s(f){let p=f;if(typeof f=="function")p=f(o);else if(typeof f!="object")return f;if(!p)return null;const v=Wie(o.breakpoints),x=Object.keys(v);let S=v;return Object.keys(p).forEach(A=>{const k=Moe(p[A],o);if(k!=null)if(typeof k=="object")if(l[A])S=Rv(S,e(A,k,o,l));else{const R=hd({theme:o},k,z=>({[A]:z}));koe(R,k)?S[A]=t({sx:k,theme:o}):S=Rv(S,R)}else S=Rv(S,e(A,k,o,l))}),Xie(x,S)}return Array.isArray(i)?i.map(s):s(i)}return t}const D3=Ooe();D3.filterProps=["sx"];function Noe(e,t){const r=this;return r.vars&&typeof r.getColorSchemeSelector=="function"?{[r.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:r.palette.mode===e?t:{}}const Doe=["breakpoints","palette","spacing","shape"];function IR(e={},...t){const{breakpoints:r={},palette:n={},spacing:i,shape:o={}}=e,l=vf(e,Doe),s=Hie(r),f=eoe(i);let p=za({breakpoints:s,direction:"ltr",components:{},palette:fi({mode:"light"},n),spacing:f,shape:fi({},qie,o)},l);return p.applyStyles=Noe,p=t.reduce((v,x)=>za(v,x),p),p.unstable_sxConfig=fi({},PR,l==null?void 0:l.unstable_sxConfig),p.unstable_sx=function(x){return D3({sx:x,theme:this})},p}function Loe(e){return Object.keys(e).length===0}function Foe(e=null){const t=me.useContext(O_);return!t||Loe(t)?e:t}const Boe=IR();function zoe(e=Boe){return Foe(e)}const $oe=["ownerState"],Uoe=["variants"],joe=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Voe(e){return Object.keys(e).length===0}function Hoe(e){return typeof e=="string"&&e.charCodeAt(0)>96}function vw(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const qoe=IR(),Woe=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function vx({defaultTheme:e,theme:t,themeId:r}){return Voe(t)?e:t[r]||t}function Xoe(e){return e?(t,r)=>r[e]:null}function bw(e,t){let{ownerState:r}=t,n=vf(t,$oe);const i=typeof e=="function"?e(fi({ownerState:r},n)):e;if(Array.isArray(i))return i.flatMap(o=>bw(o,fi({ownerState:r},n)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:o=[]}=i;let s=vf(i,Uoe);return o.forEach(f=>{let p=!0;typeof f.props=="function"?p=f.props(fi({ownerState:r},n)):Object.keys(f.props).forEach(v=>{(r==null?void 0:r[v])!==f.props[v]&&n[v]!==f.props[v]&&(p=!1)}),p&&(Array.isArray(s)||(s=[s]),s.push(typeof f.style=="function"?f.style(fi({ownerState:r},n)):f.style))}),s}return i}function Koe(e={}){const{themeId:t,defaultTheme:r=qoe,rootShouldForwardProp:n=vw,slotShouldForwardProp:i=vw}=e,o=l=>D3(fi({},l,{theme:vx(fi({},l,{defaultTheme:r,themeId:t}))}));return o.__mui_systemSx=!0,(l,s={})=>{Uie(l,ne=>ne.filter(ee=>!(ee!=null&&ee.__mui_systemSx)));const{name:f,slot:p,skipVariantsResolver:v,skipSx:x,overridesResolver:S=Xoe(Woe(p))}=s,A=vf(s,joe),k=v!==void 0?v:p&&p!=="Root"&&p!=="root"||!1,R=x||!1;let z,N=vw;p==="Root"||p==="root"?N=n:p?N=i:Hoe(l)&&(N=void 0);const B=$ie(l,fi({shouldForwardProp:N,label:z},A)),U=ne=>typeof ne=="function"&&ne.__emotion_real!==ne||Jf(ne)?ee=>bw(ne,fi({},ee,{theme:vx({theme:ee.theme,defaultTheme:r,themeId:t})})):ne,K=(ne,...ee)=>{let Q=U(ne);const re=ee?ee.map(U):[];f&&S&&re.push(G=>{const se=vx(fi({},G,{defaultTheme:r,themeId:t}));if(!se.components||!se.components[f]||!se.components[f].styleOverrides)return null;const ve=se.components[f].styleOverrides,ge={};return Object.entries(ve).forEach(([je,$e])=>{ge[je]=bw($e,fi({},G,{theme:se}))}),S(G,ge)}),f&&!k&&re.push(G=>{var se;const ve=vx(fi({},G,{defaultTheme:r,themeId:t})),ge=ve==null||(se=ve.components)==null||(se=se[f])==null?void 0:se.variants;return bw({variants:ge},fi({},G,{theme:ve}))}),R||re.push(o);const Se=re.length-ee.length;if(Array.isArray(ne)&&Se>0){const G=new Array(Se).fill("");Q=[...ne,...G],Q.raw=[...ne.raw,...G]}const J=B(Q,...re);return l.muiName&&(J.muiName=l.muiName),J};return B.withConfig&&(K.withConfig=B.withConfig),K}}function Goe(e){const{theme:t,name:r,props:n}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?n:s3(t.components[r].defaultProps,n)}function Yoe({props:e,name:t,defaultTheme:r,themeId:n}){let i=zoe(r);return n&&(i=i[n]||i),Goe({theme:i,name:t,props:e})}function DU(e,t=0,r=1){return eU(e,t,r)}function Zoe(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(n=>n+n)),r?`rgb${r.length===4?"a":""}(${r.map((n,i)=>i<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function p_(e){if(e.type)return e;if(e.charAt(0)==="#")return p_(Zoe(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error(fh(9,e));let n=e.substring(t+1,e.length-1),i;if(r==="color"){if(n=n.split(" "),i=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(fh(10,i))}else n=n.split(",");return n=n.map(o=>parseFloat(o)),{type:r,values:n,colorSpace:i}}function RR(e){const{type:t,colorSpace:r}=e;let{values:n}=e;return t.indexOf("rgb")!==-1?n=n.map((i,o)=>o<3?parseInt(i,10):i):t.indexOf("hsl")!==-1&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.indexOf("color")!==-1?n=`${r} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function Joe(e){e=p_(e);const{values:t}=e,r=t[0],n=t[1]/100,i=t[2]/100,o=n*Math.min(i,1-i),l=(p,v=(p+r/30)%12)=>i-o*Math.max(Math.min(v-3,9-v,1),-1);let s="rgb";const f=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return e.type==="hsla"&&(s+="a",f.push(t[3])),RR({type:s,values:f})}function bN(e){e=p_(e);let t=e.type==="hsl"||e.type==="hsla"?p_(Joe(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Qoe(e,t){const r=bN(e),n=bN(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function ese(e,t){if(e=p_(e),t=DU(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]*=1-t;return RR(e)}function tse(e,t){if(e=p_(e),t=DU(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return RR(e)}function rse(e,t){return fi({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const d2={black:"#000",white:"#fff"},nse={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},s0={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},a0={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},k1={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},l0={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},c0={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},u0={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},ise=["mode","contrastThreshold","tonalOffset"],xN={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:d2.white,default:d2.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},YE={text:{primary:d2.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:d2.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function wN(e,t,r,n){const i=n.light||n,o=n.dark||n*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=tse(e.main,i):t==="dark"&&(e.dark=ese(e.main,o)))}function ose(e="light"){return e==="dark"?{main:l0[200],light:l0[50],dark:l0[400]}:{main:l0[700],light:l0[400],dark:l0[800]}}function sse(e="light"){return e==="dark"?{main:s0[200],light:s0[50],dark:s0[400]}:{main:s0[500],light:s0[300],dark:s0[700]}}function ase(e="light"){return e==="dark"?{main:a0[500],light:a0[300],dark:a0[700]}:{main:a0[700],light:a0[400],dark:a0[800]}}function lse(e="light"){return e==="dark"?{main:c0[400],light:c0[300],dark:c0[700]}:{main:c0[700],light:c0[500],dark:c0[900]}}function cse(e="light"){return e==="dark"?{main:u0[400],light:u0[300],dark:u0[700]}:{main:u0[800],light:u0[500],dark:u0[900]}}function use(e="light"){return e==="dark"?{main:k1[400],light:k1[300],dark:k1[700]}:{main:"#ed6c02",light:k1[500],dark:k1[900]}}function hse(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:n=.2}=e,i=vf(e,ise),o=e.primary||ose(t),l=e.secondary||sse(t),s=e.error||ase(t),f=e.info||lse(t),p=e.success||cse(t),v=e.warning||use(t);function x(R){return Qoe(R,YE.text.primary)>=r?YE.text.primary:xN.text.primary}const S=({color:R,name:z,mainShade:N=500,lightShade:B=300,darkShade:U=700})=>{if(R=fi({},R),!R.main&&R[N]&&(R.main=R[N]),!R.hasOwnProperty("main"))throw new Error(fh(11,z?` (${z})`:"",N));if(typeof R.main!="string")throw new Error(fh(12,z?` (${z})`:"",JSON.stringify(R.main)));return wN(R,"light",B,n),wN(R,"dark",U,n),R.contrastText||(R.contrastText=x(R.main)),R},A={dark:YE,light:xN};return za(fi({common:fi({},d2),mode:t,primary:S({color:o,name:"primary"}),secondary:S({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:S({color:s,name:"error"}),warning:S({color:v,name:"warning"}),info:S({color:f,name:"info"}),success:S({color:p,name:"success"}),grey:nse,contrastThreshold:r,getContrastText:x,augmentColor:S,tonalOffset:n},A[t]),i)}const fse=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function dse(e){return Math.round(e*1e5)/1e5}const SN={textTransform:"uppercase"},AN='"Roboto", "Helvetica", "Arial", sans-serif';function pse(e,t){const r=typeof t=="function"?t(e):t,{fontFamily:n=AN,fontSize:i=14,fontWeightLight:o=300,fontWeightRegular:l=400,fontWeightMedium:s=500,fontWeightBold:f=700,htmlFontSize:p=16,allVariants:v,pxToRem:x}=r,S=vf(r,fse),A=i/14,k=x||(N=>`${N/p*A}rem`),R=(N,B,U,K,ne)=>fi({fontFamily:n,fontWeight:N,fontSize:k(B),lineHeight:U},n===AN?{letterSpacing:`${dse(K/B)}em`}:{},ne,v),z={h1:R(o,96,1.167,-1.5),h2:R(o,60,1.2,-.5),h3:R(l,48,1.167,0),h4:R(l,34,1.235,.25),h5:R(l,24,1.334,0),h6:R(s,20,1.6,.15),subtitle1:R(l,16,1.75,.15),subtitle2:R(s,14,1.57,.1),body1:R(l,16,1.5,.15),body2:R(l,14,1.43,.15),button:R(s,14,1.75,.4,SN),caption:R(l,12,1.66,.4),overline:R(l,12,2.66,1,SN),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return za(fi({htmlFontSize:p,pxToRem:k,fontFamily:n,fontSize:i,fontWeightLight:o,fontWeightRegular:l,fontWeightMedium:s,fontWeightBold:f},z),S,{clone:!1})}const gse=.2,mse=.14,yse=.12;function Ro(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${gse})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${mse})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${yse})`].join(",")}const _se=["none",Ro(0,2,1,-1,0,1,1,0,0,1,3,0),Ro(0,3,1,-2,0,2,2,0,0,1,5,0),Ro(0,3,3,-2,0,3,4,0,0,1,8,0),Ro(0,2,4,-1,0,4,5,0,0,1,10,0),Ro(0,3,5,-1,0,5,8,0,0,1,14,0),Ro(0,3,5,-1,0,6,10,0,0,1,18,0),Ro(0,4,5,-2,0,7,10,1,0,2,16,1),Ro(0,5,5,-3,0,8,10,1,0,3,14,2),Ro(0,5,6,-3,0,9,12,1,0,3,16,2),Ro(0,6,6,-3,0,10,14,1,0,4,18,3),Ro(0,6,7,-4,0,11,15,1,0,4,20,3),Ro(0,7,8,-4,0,12,17,2,0,5,22,4),Ro(0,7,8,-4,0,13,19,2,0,5,24,4),Ro(0,7,9,-4,0,14,21,2,0,5,26,4),Ro(0,8,9,-5,0,15,22,2,0,6,28,5),Ro(0,8,10,-5,0,16,24,2,0,6,30,5),Ro(0,8,11,-5,0,17,26,2,0,6,32,5),Ro(0,9,11,-5,0,18,28,2,0,7,34,6),Ro(0,9,12,-6,0,19,29,2,0,7,36,6),Ro(0,10,13,-6,0,20,31,3,0,8,38,7),Ro(0,10,13,-6,0,21,33,3,0,8,40,7),Ro(0,10,14,-6,0,22,35,3,0,8,42,7),Ro(0,11,14,-7,0,23,36,3,0,9,44,8),Ro(0,11,15,-7,0,24,38,3,0,9,46,8)],vse=["duration","easing","delay"],bse={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},xse={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function EN(e){return`${Math.round(e)}ms`}function wse(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Sse(e){const t=fi({},bse,e.easing),r=fi({},xse,e.duration);return fi({getAutoHeightDuration:wse,create:(i=["all"],o={})=>{const{duration:l=r.standard,easing:s=t.easeInOut,delay:f=0}=o;return vf(o,vse),(Array.isArray(i)?i:[i]).map(p=>`${p} ${typeof l=="string"?l:EN(l)} ${s} ${typeof f=="string"?f:EN(f)}`).join(",")}},e,{easing:t,duration:r})}const Ase={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Ese=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Tse(e={},...t){const{mixins:r={},palette:n={},transitions:i={},typography:o={}}=e,l=vf(e,Ese);if(e.vars)throw new Error(fh(18));const s=hse(n),f=IR(e);let p=za(f,{mixins:rse(f.breakpoints,r),palette:s,shadows:_se.slice(),typography:pse(s,o),transitions:Sse(i),zIndex:fi({},Ase)});return p=za(p,l),p=t.reduce((v,x)=>za(v,x),p),p.unstable_sxConfig=fi({},PR,l==null?void 0:l.unstable_sxConfig),p.unstable_sx=function(x){return D3({sx:x,theme:this})},p}const LU=Tse(),FU="$$material";function Cse({props:e,name:t}){return Yoe({props:e,name:t,defaultTheme:LU,themeId:FU})}const Pse=e=>vw(e)&&e!=="classes",Ise=Koe({themeId:FU,defaultTheme:LU,rootShouldForwardProp:Pse});function Rse(e){return Wo("MuiSvgIcon",e)}po("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const kse=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Mse=e=>{const{color:t,fontSize:r,classes:n}=e,i={root:["root",t!=="inherit"&&`color${tn(t)}`,`fontSize${tn(r)}`]};return us(i,Rse,n)},Ose=Ise("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${tn(r.color)}`],t[`fontSize${tn(r.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var r,n,i,o,l,s,f,p,v,x,S,A,k;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(r=e.transitions)==null||(n=r.create)==null?void 0:n.call(r,"fill",{duration:(i=e.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((o=e.typography)==null||(l=o.pxToRem)==null?void 0:l.call(o,20))||"1.25rem",medium:((s=e.typography)==null||(f=s.pxToRem)==null?void 0:f.call(s,24))||"1.5rem",large:((p=e.typography)==null||(v=p.pxToRem)==null?void 0:v.call(p,35))||"2.1875rem"}[t.fontSize],color:(x=(S=(e.vars||e).palette)==null||(S=S[t.color])==null?void 0:S.main)!=null?x:{action:(A=(e.vars||e).palette)==null||(A=A.action)==null?void 0:A.active,disabled:(k=(e.vars||e).palette)==null||(k=k.action)==null?void 0:k.disabled,inherit:void 0}[t.color]}}),c4=me.forwardRef(function(t,r){const n=Cse({props:t,name:"MuiSvgIcon"}),{children:i,className:o,color:l="inherit",component:s="svg",fontSize:f="medium",htmlColor:p,inheritViewBox:v=!1,titleAccess:x,viewBox:S="0 0 24 24"}=n,A=vf(n,kse),k=me.isValidElement(i)&&i.type==="svg",R=fi({},n,{color:l,component:s,fontSize:f,instanceFontSize:t.fontSize,inheritViewBox:v,viewBox:S,hasSvgAsChild:k}),z={};v||(z.viewBox=S);const N=Mse(R);return xt.jsxs(Ose,fi({as:s,className:Ln(N.root,o),focusable:"false",color:p,"aria-hidden":x?void 0:!0,role:x?"img":void 0,ref:r},z,A,k&&i.props,{ownerState:R,children:[k?i.props.children:i,x?xt.jsx("title",{children:x}):null]}))});c4.muiName="SvgIcon";function Nse(e,t){function r(n,i){return xt.jsx(c4,fi({"data-testid":`${t}Icon`,ref:i},n,{children:e}))}return r.muiName=c4.muiName,me.memo(me.forwardRef(r))}const Dse={configure:e=>{a3.configure(e)}},Lse=Object.freeze(Object.defineProperty({__proto__:null,capitalize:tn,createChainedFunction:r4,createSvgIcon:Nse,debounce:aR,deprecatedPropType:tQ,isMuiElement:X$,ownerDocument:Fa,ownerWindow:Cu,requirePropFactory:rQ,setRef:u5,unstable_ClassNameGenerator:Dse,unstable_useEnhancedEffect:cd,unstable_useId:iQ,unsupportedProp:oQ,useControlled:K$,useEventCallback:af,useForkRef:pc,useIsFocusVisible:J$},Symbol.toStringTag,{value:"Module"})),Fse=c9(Lse);var TN;function Jc(){return TN||(TN=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=Fse}(GE)),GE}var Bse=Zc;Object.defineProperty(SR,"__esModule",{value:!0});var BU=SR.default=void 0,zse=Bse(Jc()),$se=xt;BU=SR.default=(0,zse.default)((0,$se.jsx)("path",{d:"M5 15H3v4c0 1.1.9 2 2 2h4v-2H5zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2m0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2zM12 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"FilterCenterFocus");const Use="modulepreload",jse=function(e){return"/react-map-components-apps/pointcloud/"+e},CN={},u4=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),s=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(r.map(f=>{if(f=jse(f),f in CN)return;CN[f]=!0;const p=f.endsWith(".css"),v=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${v}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":Use,p||(x.as="script"),x.crossOrigin="",x.href=f,s&&x.setAttribute("nonce",s),document.head.appendChild(x),p)return new Promise((S,A)=>{x.addEventListener("load",S),x.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=l,window.dispatchEvent(s),!s.defaultPrevented)throw l}return i.then(l=>{for(const s of l||[])s.status==="rejected"&&o(s.reason);return t().catch(o)})};function $i(e){"@babel/helpers - typeof";return $i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$i(e)}var lc=Uint8Array,Dl=Uint16Array,p2=Uint32Array,L3=new lc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),F3=new lc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),h4=new lc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zU=function(e,t){for(var r=new Dl(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new p2(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)i[o]=o-r[n]<<5|n;return[r,i]},$U=zU(L3,2),UU=$U[0],f4=$U[1];UU[28]=258,f4[258]=28;var jU=zU(F3,0),Vse=jU[0],PN=jU[1],d4=new Dl(32768);for(var Eo=0;Eo<32768;++Eo){var zd=(Eo&43690)>>>1|(Eo&21845)<<1;zd=(zd&52428)>>>2|(zd&13107)<<2,zd=(zd&61680)>>>4|(zd&3855)<<4,d4[Eo]=((zd&65280)>>>8|(zd&255)<<8)>>>1}var pf=function(e,t,r){for(var n=e.length,i=0,o=new Dl(t);i<n;++i)++o[e[i]-1];var l=new Dl(t);for(i=0;i<t;++i)l[i]=l[i-1]+o[i-1]<<1;var s;if(r){s=new Dl(1<<t);var f=15-t;for(i=0;i<n;++i)if(e[i])for(var p=i<<4|e[i],v=t-e[i],x=l[e[i]-1]++<<v,S=x|(1<<v)-1;x<=S;++x)s[d4[x]>>>f]=p}else for(s=new Dl(n),i=0;i<n;++i)s[i]=d4[l[e[i]-1]++]>>>15-e[i];return s},Rp=new lc(288);for(var Eo=0;Eo<144;++Eo)Rp[Eo]=8;for(var Eo=144;Eo<256;++Eo)Rp[Eo]=9;for(var Eo=256;Eo<280;++Eo)Rp[Eo]=7;for(var Eo=280;Eo<288;++Eo)Rp[Eo]=8;var g2=new lc(32);for(var Eo=0;Eo<32;++Eo)g2[Eo]=5;var Hse=pf(Rp,9,0),qse=pf(Rp,9,1),Wse=pf(g2,5,0),Xse=pf(g2,5,1),ZE=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Gu=function(e,t,r){var n=t/8>>0;return(e[n]|e[n+1]<<8)>>>(t&7)&r},JE=function(e,t){var r=t/8>>0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>>(t&7)},kR=function(e){return(e/8>>0)+(e&7&&1)},VU=function(e,t,r){(r==null||r>e.length)&&(r=e.length);var n=new(e instanceof Dl?Dl:e instanceof p2?p2:lc)(r-t);return n.set(e.subarray(t,r)),n},Kse=function(e,t,r){var n=e.length,i=!t||r,o=!r||r.i;r||(r={}),t||(t=new lc(n*3));var l=function(qe){var tt=t.length;if(qe>tt){var We=new lc(Math.max(tt*2,qe));We.set(t),t=We}},s=r.f||0,f=r.p||0,p=r.b||0,v=r.l,x=r.d,S=r.m,A=r.n,k=n*8;do{if(!v){r.f=s=Gu(e,f,1);var R=Gu(e,f+1,3);if(f+=3,R)if(R==1)v=qse,x=Xse,S=9,A=5;else if(R==2){var U=Gu(e,f,31)+257,K=Gu(e,f+10,15)+4,ne=U+Gu(e,f+5,31)+1;f+=14;for(var ee=new lc(ne),Q=new lc(19),re=0;re<K;++re)Q[h4[re]]=Gu(e,f+re*3,7);f+=K*3;var Se=ZE(Q),J=(1<<Se)-1;if(!o&&f+ne*(Se+7)>k)break;for(var G=pf(Q,Se,1),re=0;re<ne;){var se=G[Gu(e,f,J)];f+=se&15;var z=se>>>4;if(z<16)ee[re++]=z;else{var ve=0,ge=0;for(z==16?(ge=3+Gu(e,f,3),f+=2,ve=ee[re-1]):z==17?(ge=3+Gu(e,f,7),f+=3):z==18&&(ge=11+Gu(e,f,127),f+=7);ge--;)ee[re++]=ve}}var je=ee.subarray(0,U),$e=ee.subarray(U);S=ZE(je),A=ZE($e),v=pf(je,S,1),x=pf($e,A,1)}else throw"invalid block type";else{var z=kR(f)+4,N=e[z-4]|e[z-3]<<8,B=z+N;if(B>n){if(o)throw"unexpected EOF";break}i&&l(p+N),t.set(e.subarray(z,B),p),r.b=p+=N,r.p=f=B*8;continue}if(f>k)throw"unexpected EOF"}i&&l(p+131072);for(var Ze=(1<<S)-1,Me=(1<<A)-1,Ue=S+A+18;o||f+Ue<k;){var ve=v[JE(e,f)&Ze],Qe=ve>>>4;if(f+=ve&15,f>k)throw"unexpected EOF";if(!ve)throw"invalid length/literal";if(Qe<256)t[p++]=Qe;else if(Qe==256){v=null;break}else{var ct=Qe-254;if(Qe>264){var re=Qe-257,ce=L3[re];ct=Gu(e,f,(1<<ce)-1)+UU[re],f+=ce}var be=x[JE(e,f)&Me],Oe=be>>>4;if(!be)throw"invalid distance";f+=be&15;var $e=Vse[Oe];if(Oe>3){var ce=F3[Oe];$e+=JE(e,f)&(1<<ce)-1,f+=ce}if(f>k)throw"unexpected EOF";i&&l(p+131072);for(var Be=p+ct;p<Be;p+=4)t[p]=t[p-$e],t[p+1]=t[p+1-$e],t[p+2]=t[p+2-$e],t[p+3]=t[p+3-$e];p=Be}}r.l=v,r.p=f,r.b=p,v&&(s=1,r.m=S,r.d=x,r.n=A)}while(!s);return p==t.length?t:VU(t,0,p)},Hf=function(e,t,r){r<<=t&7;var n=t/8>>0;e[n]|=r,e[n+1]|=r>>>8},M1=function(e,t,r){r<<=t&7;var n=t/8>>0;e[n]|=r,e[n+1]|=r>>>8,e[n+2]|=r>>>16},QE=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,o=r.slice();if(!i)return[new lc(0),0];if(i==1){var l=new lc(r[0].s+1);return l[r[0].s]=1,[l,1]}r.sort(function(ne,ee){return ne.f-ee.f}),r.push({s:-1,f:25001});var s=r[0],f=r[1],p=0,v=1,x=2;for(r[0]={s:-1,f:s.f+f.f,l:s,r:f};v!=i-1;)s=r[r[p].f<r[x].f?p++:x++],f=r[p!=v&&r[p].f<r[x].f?p++:x++],r[v++]={s:-1,f:s.f+f.f,l:s,r:f};for(var S=o[0].s,n=1;n<i;++n)o[n].s>S&&(S=o[n].s);var A=new Dl(S+1),k=p4(r[v-1],A,0);if(k>t){var n=0,R=0,z=k-t,N=1<<z;for(o.sort(function(ee,Q){return A[Q.s]-A[ee.s]||ee.f-Q.f});n<i;++n){var B=o[n].s;if(A[B]>t)R+=N-(1<<k-A[B]),A[B]=t;else break}for(R>>>=z;R>0;){var U=o[n].s;A[U]<t?R-=1<<t-A[U]++-1:++n}for(;n>=0&&R;--n){var K=o[n].s;A[K]==t&&(--A[K],++R)}k=t}return[new lc(A),k]},p4=function(e,t,r){return e.s==-1?Math.max(p4(e.l,t,r+1),p4(e.r,t,r+1)):t[e.s]=r},IN=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Dl(++t),n=0,i=e[0],o=1,l=function(f){r[n++]=f},s=1;s<=t;++s)if(e[s]==i&&s!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)l(32754);o>2&&(l(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(l(i),--o;o>6;o-=6)l(8304);o>2&&(l(o-3<<5|8208),o=0)}for(;o--;)l(i);o=1,i=e[s]}return[r.subarray(0,n),t]},O1=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},g4=function(e,t,r){var n=r.length,i=kR(t+2);e[i]=n&255,e[i+1]=n>>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var o=0;o<n;++o)e[i+o+4]=r[o];return(i+4+n)*8},RN=function(e,t,r,n,i,o,l,s,f,p,v){Hf(t,v++,r),++i[256];for(var x=QE(i,15),S=x[0],A=x[1],k=QE(o,15),R=k[0],z=k[1],N=IN(S),B=N[0],U=N[1],K=IN(R),ne=K[0],ee=K[1],Q=new Dl(19),re=0;re<B.length;++re)Q[B[re]&31]++;for(var re=0;re<ne.length;++re)Q[ne[re]&31]++;for(var Se=QE(Q,7),J=Se[0],G=Se[1],se=19;se>4&&!J[h4[se-1]];--se);var ve=p+5<<3,ge=O1(i,Rp)+O1(o,g2)+l,je=O1(i,S)+O1(o,R)+l+14+3*se+O1(Q,J)+(2*Q[16]+3*Q[17]+7*Q[18]);if(ve<=ge&&ve<=je)return g4(t,v,e.subarray(f,f+p));var $e,Ze,Me,Ue;if(Hf(t,v,1+(je<ge)),v+=2,je<ge){$e=pf(S,A,0),Ze=S,Me=pf(R,z,0),Ue=R;var Qe=pf(J,G,0);Hf(t,v,U-257),Hf(t,v+5,ee-1),Hf(t,v+10,se-4),v+=14;for(var re=0;re<se;++re)Hf(t,v+3*re,J[h4[re]]);v+=3*se;for(var ct=[B,ne],ce=0;ce<2;++ce)for(var be=ct[ce],re=0;re<be.length;++re){var Oe=be[re]&31;Hf(t,v,Qe[Oe]),v+=J[Oe],Oe>15&&(Hf(t,v,be[re]>>>5&127),v+=be[re]>>>12)}}else $e=Hse,Ze=Rp,Me=Wse,Ue=g2;for(var re=0;re<s;++re)if(n[re]>255){var Oe=n[re]>>>18&31;M1(t,v,$e[Oe+257]),v+=Ze[Oe+257],Oe>7&&(Hf(t,v,n[re]>>>23&31),v+=L3[Oe]);var Be=n[re]&31;M1(t,v,Me[Be]),v+=Ue[Be],Be>3&&(M1(t,v,n[re]>>>5&8191),v+=F3[Be])}else M1(t,v,$e[n[re]]),v+=Ze[n[re]];return M1(t,v,$e[256]),v+Ze[256]},Gse=new p2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Yse=function(e,t,r,n,i,o){var l=e.length,s=new lc(n+l+5*(1+Math.floor(l/7e3))+i),f=s.subarray(n,s.length-i),p=0;if(!t||l<8)for(var v=0;v<=l;v+=65535){var x=v+65535;x<l?p=g4(f,p,e.subarray(v,x)):(f[v]=o,p=g4(f,p,e.subarray(v,l)))}else{for(var S=Gse[t-1],A=S>>>13,k=S&8191,R=(1<<r)-1,z=new Dl(32768),N=new Dl(R+1),B=Math.ceil(r/3),U=2*B,K=function(zt){return(e[zt]^e[zt+1]<<B^e[zt+2]<<U)&R},ne=new p2(25e3),ee=new Dl(288),Q=new Dl(32),re=0,Se=0,v=0,J=0,G=0,se=0;v<l;++v){var ve=K(v),ge=v&32767,je=N[ve];if(z[ge]=je,N[ve]=ge,G<=v){var $e=l-v;if((re>7e3||J>24576)&&$e>423){p=RN(e,f,0,ne,ee,Q,Se,J,se,v-se,p),J=re=Se=0,se=v;for(var Ze=0;Ze<286;++Ze)ee[Ze]=0;for(var Ze=0;Ze<30;++Ze)Q[Ze]=0}var Me=2,Ue=0,Qe=k,ct=ge-je&32767;if($e>2&&ve==K(v-ct))for(var ce=Math.min(A,$e)-1,be=Math.min(32767,v),Oe=Math.min(258,$e);ct<=be&&--Qe&&ge!=je;){if(e[v+Me]==e[v+Me-ct]){for(var Be=0;Be<Oe&&e[v+Be]==e[v+Be-ct];++Be);if(Be>Me){if(Me=Be,Ue=ct,Be>ce)break;for(var qe=Math.min(ct,Be-2),tt=0,Ze=0;Ze<qe;++Ze){var We=v-ct+Ze+32768&32767,Xe=z[We],lt=We-Xe+32768&32767;lt>tt&&(tt=lt,je=We)}}}ge=je,je=z[ge],ct+=ge-je+32768&32767}if(Ue){ne[J++]=268435456|f4[Me]<<18|PN[Ue];var wt=f4[Me]&31,Lt=PN[Ue]&31;Se+=L3[wt]+F3[Lt],++ee[257+wt],++Q[Lt],G=v+Me,++re}else ne[J++]=e[v],++ee[e[v]]}}p=RN(e,f,o,ne,ee,Q,Se,J,se,v-se,p)}return VU(s,0,n+kR(p)+i)},Zse=function(){var e=1,t=0;return{p:function(r){for(var n=e,i=t,o=r.length,l=0;l!=o;){for(var s=Math.min(l+5552,o);l<s;++l)n+=r[l],i+=n;n%=65521,i%=65521}e=n,t=i},d:function(){return(e>>>8<<16|(t&255)<<8|t>>>8)+((e&255)<<23)*2}}},Jse=function(e,t,r,n,i){return Yse(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,r,n,!i)},Qse=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},eae=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;e[0]=120,e[1]=n<<6|(n?32-2*n:1)},tae=function(e){if((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function m4(e,t){t===void 0&&(t={});var r=Zse();r.p(e);var n=Jse(e,t,2,4);return eae(n,t),Qse(n,n.length-4,r.d()),n}function rae(e,t){return Kse((tae(e),e.subarray(2,-4)),t)}var _n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function eT(){_n.console&&typeof _n.console.log=="function"&&_n.console.log.apply(_n.console,arguments)}var io={log:eT,warn:function(e){_n.console&&(typeof _n.console.warn=="function"?_n.console.warn.apply(_n.console,arguments):eT.call(null,arguments))},error:function(e){_n.console&&(typeof _n.console.error=="function"?_n.console.error.apply(_n.console,arguments):eT(e))}};function tT(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){fg(n.response,t,r)},n.onerror=function(){io.error("could not download file")},n.send()}function kN(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function bx(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var kv,y4,fg=_n.saveAs||((typeof window>"u"?"undefined":$i(window))!=="object"||window!==_n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=_n.URL||_n.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?kN(i.href)?tT(e,t,r):bx(i,i.target="_blank"):bx(i)):(i.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){bx(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(kN(e))tT(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){bx(n)})}else navigator.msSaveOrOpenBlob(function(i,o){return o===void 0?o={autoBom:!1}:$i(o)!=="object"&&(io.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return tT(e,t,r);var i=e.type==="application/octet-stream",o=/constructor/i.test(_n.HTMLElement)||_n.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||i&&o)&&(typeof FileReader>"u"?"undefined":$i(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var v=s.result;v=l?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=v:location=v,n=null},s.readAsDataURL(e)}else{var f=_n.URL||_n.webkitURL,p=f.createObjectURL(e);n?n.location=p:location.href=p,n=null,setTimeout(function(){f.revokeObjectURL(p)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function HU(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,o=r[n].process,l=i.exec(e);l&&(t=o(l),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),f=this.g.toString(16),p=this.b.toString(16);return s.length==1&&(s="0"+s),f.length==1&&(f="0"+f),p.length==1&&(p="0"+p),"#"+s+f+p}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function rT(e,t){var r=e[0],n=e[1],i=e[2],o=e[3];r=ll(r,n,i,o,t[0],7,-680876936),o=ll(o,r,n,i,t[1],12,-389564586),i=ll(i,o,r,n,t[2],17,606105819),n=ll(n,i,o,r,t[3],22,-1044525330),r=ll(r,n,i,o,t[4],7,-176418897),o=ll(o,r,n,i,t[5],12,1200080426),i=ll(i,o,r,n,t[6],17,-1473231341),n=ll(n,i,o,r,t[7],22,-45705983),r=ll(r,n,i,o,t[8],7,1770035416),o=ll(o,r,n,i,t[9],12,-1958414417),i=ll(i,o,r,n,t[10],17,-42063),n=ll(n,i,o,r,t[11],22,-1990404162),r=ll(r,n,i,o,t[12],7,1804603682),o=ll(o,r,n,i,t[13],12,-40341101),i=ll(i,o,r,n,t[14],17,-1502002290),r=cl(r,n=ll(n,i,o,r,t[15],22,1236535329),i,o,t[1],5,-165796510),o=cl(o,r,n,i,t[6],9,-1069501632),i=cl(i,o,r,n,t[11],14,643717713),n=cl(n,i,o,r,t[0],20,-373897302),r=cl(r,n,i,o,t[5],5,-701558691),o=cl(o,r,n,i,t[10],9,38016083),i=cl(i,o,r,n,t[15],14,-660478335),n=cl(n,i,o,r,t[4],20,-405537848),r=cl(r,n,i,o,t[9],5,568446438),o=cl(o,r,n,i,t[14],9,-1019803690),i=cl(i,o,r,n,t[3],14,-187363961),n=cl(n,i,o,r,t[8],20,1163531501),r=cl(r,n,i,o,t[13],5,-1444681467),o=cl(o,r,n,i,t[2],9,-51403784),i=cl(i,o,r,n,t[7],14,1735328473),r=ul(r,n=cl(n,i,o,r,t[12],20,-1926607734),i,o,t[5],4,-378558),o=ul(o,r,n,i,t[8],11,-2022574463),i=ul(i,o,r,n,t[11],16,1839030562),n=ul(n,i,o,r,t[14],23,-35309556),r=ul(r,n,i,o,t[1],4,-1530992060),o=ul(o,r,n,i,t[4],11,1272893353),i=ul(i,o,r,n,t[7],16,-155497632),n=ul(n,i,o,r,t[10],23,-1094730640),r=ul(r,n,i,o,t[13],4,681279174),o=ul(o,r,n,i,t[0],11,-358537222),i=ul(i,o,r,n,t[3],16,-722521979),n=ul(n,i,o,r,t[6],23,76029189),r=ul(r,n,i,o,t[9],4,-640364487),o=ul(o,r,n,i,t[12],11,-421815835),i=ul(i,o,r,n,t[15],16,530742520),r=hl(r,n=ul(n,i,o,r,t[2],23,-995338651),i,o,t[0],6,-198630844),o=hl(o,r,n,i,t[7],10,1126891415),i=hl(i,o,r,n,t[14],15,-1416354905),n=hl(n,i,o,r,t[5],21,-57434055),r=hl(r,n,i,o,t[12],6,1700485571),o=hl(o,r,n,i,t[3],10,-1894986606),i=hl(i,o,r,n,t[10],15,-1051523),n=hl(n,i,o,r,t[1],21,-2054922799),r=hl(r,n,i,o,t[8],6,1873313359),o=hl(o,r,n,i,t[15],10,-30611744),i=hl(i,o,r,n,t[6],15,-1560198380),n=hl(n,i,o,r,t[13],21,1309151649),r=hl(r,n,i,o,t[4],6,-145523070),o=hl(o,r,n,i,t[11],10,-1120210379),i=hl(i,o,r,n,t[2],15,718787259),n=hl(n,i,o,r,t[9],21,-343485551),e[0]=gp(r,e[0]),e[1]=gp(n,e[1]),e[2]=gp(i,e[2]),e[3]=gp(o,e[3])}function B3(e,t,r,n,i,o){return t=gp(gp(t,e),gp(n,o)),gp(t<<i|t>>>32-i,r)}function ll(e,t,r,n,i,o,l){return B3(t&r|~t&n,e,t,i,o,l)}function cl(e,t,r,n,i,o,l){return B3(t&n|r&~n,e,t,i,o,l)}function ul(e,t,r,n,i,o,l){return B3(t^r^n,e,t,i,o,l)}function hl(e,t,r,n,i,o,l){return B3(r^(t|~n),e,t,i,o,l)}function qU(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)rT(n,nae(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(rT(n,i),t=0;t<16;t++)i[t]=0;return i[14]=8*r,rT(n,i),n}function nae(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}kv=_n.atob.bind(_n),y4=_n.btoa.bind(_n);var MN="0123456789abcdef".split("");function iae(e){for(var t="",r=0;r<4;r++)t+=MN[e>>8*r+4&15]+MN[e>>8*r&15];return t}function oae(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function _4(e){return qU(e).map(oae).join("")}var sae=function(e){for(var t=0;t<e.length;t++)e[t]=iae(e[t]);return e.join("")}(qU("hello"))!="5d41402abc4b2a76b9719d911017c592";function gp(e,t){if(sae){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function v4(e,t){var r,n,i,o;if(e!==r){for(var l=(i=e,o=1+(256/e.length>>0),new Array(o+1).join(i)),s=[],f=0;f<256;f++)s[f]=f;var p=0;for(f=0;f<256;f++){var v=s[f];p=(p+v+l.charCodeAt(f))%256,s[f]=s[p],s[p]=v}r=e,n=s}else s=n;var x=t.length,S=0,A=0,k="";for(f=0;f<x;f++)A=(A+(v=s[S=(S+1)%256]))%256,s[S]=s[A],s[A]=v,l=s[(s[S]+s[A])%256],k+=String.fromCharCode(t.charCodeAt(f)^l);return k}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var ON={print:4,modify:8,copy:16,"annot-forms":32};function M0(e,t,r,n){this.v=1,this.r=2;var i=192;e.forEach(function(s){if(ON.perm!==void 0)throw new Error("Invalid permission: "+s);i+=ON[s]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(t+this.padding).substr(0,32),l=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,l),this.P=-(1+(255^i)),this.encryptionKey=_4(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=v4(this.encryptionKey,this.padding)}function O0(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var i=e.charCodeAt(n);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=e[n]}return t}function NN(e){if($i(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var o=Math.random().toString(35);return t[r][o]=[n,!!i],o},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var o in t[r]){var l=t[r][o];try{l[0].apply(e,n)}catch(s){_n.console&&io.error("jsPDF PubSub Error",s.message,s)}l[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function g5(e){if(!(this instanceof g5))return new g5(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function WU(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function mg(e,t,r,n,i){if(!(this instanceof mg))return new mg(e,t,r,n,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,WU.call(this,n,i)}function uy(e,t,r,n,i){if(!(this instanceof uy))return new uy(e,t,r,n,i);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,WU.call(this,n,i)}function bn(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],o=arguments[3],l=[],s=1,f=16,p="S",v=null;$i(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,i=e.format||i,o=e.compress||e.compressPdf||o,(v=e.encryption||null)!==null&&(v.userPassword=v.userPassword||"",v.ownerPassword=v.ownerPassword||"",v.userPermissions=v.userPermissions||[]),s=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(f=e.floatPrecision),p=e.defaultPathOperation||"S"),l=e.filters||(o===!0?["FlateEncode"]:l),n=n||"mm",r=(""+(r||"P")).toLowerCase();var x=e.putOnlyUsedFonts||!1,S={},A={internal:{},__private__:{}};A.__private__.PubSub=NN;var k="1.3",R=A.__private__.getPdfVersion=function(){return k};A.__private__.setPdfVersion=function($){k=$};var z={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};A.__private__.getPageFormats=function(){return z};var N=A.__private__.getPageFormat=function($){return z[$]};i=i||"a4";var B={COMPAT:"compat",ADVANCED:"advanced"},U=B.COMPAT;function K(){this.saveGraphicsState(),pe(new et(Kt,0,0,-Kt,0,na()*Kt).toString()+" cm"),this.setFontSize(this.getFontSize()/Kt),p="n",U=B.ADVANCED}function ne(){this.restoreGraphicsState(),p="S",U=B.COMPAT}var ee=A.__private__.combineFontStyleAndFontWeight=function($,ye){if($=="bold"&&ye=="normal"||$=="bold"&&ye==400||$=="normal"&&ye=="italic"||$=="bold"&&ye=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ye&&($=ye==400||ye==="normal"?$==="italic"?"italic":"normal":ye!=700&&ye!=="bold"||$!=="normal"?(ye==700?"bold":ye)+""+$:"bold"),$};A.advancedAPI=function($){var ye=U===B.COMPAT;return ye&&K.call(this),typeof $!="function"||($(this),ye&&ne.call(this)),this},A.compatAPI=function($){var ye=U===B.ADVANCED;return ye&&ne.call(this),typeof $!="function"||($(this),ye&&K.call(this)),this},A.isAdvancedAPI=function(){return U===B.ADVANCED};var Q,re=function($){if(U!==B.ADVANCED)throw new Error($+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Se=A.roundToPrecision=A.__private__.roundToPrecision=function($,ye){var Ve=t||ye;if(isNaN($)||isNaN(Ve))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return $.toFixed(Ve).replace(/0+$/,"")};Q=A.hpf=A.__private__.hpf=typeof f=="number"?function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.hpf");return Se($,f)}:f==="smart"?function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.hpf");return Se($,$>-1&&$<1?16:5)}:function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.hpf");return Se($,16)};var J=A.f2=A.__private__.f2=function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.f2");return Se($,2)},G=A.__private__.f3=function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.f3");return Se($,3)},se=A.scale=A.__private__.scale=function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.scale");return U===B.COMPAT?$*Kt:U===B.ADVANCED?$:void 0},ve=function($){return U===B.COMPAT?na()-$:U===B.ADVANCED?$:void 0},ge=function($){return se(ve($))};A.__private__.setPrecision=A.setPrecision=function($){typeof parseInt($,10)=="number"&&(t=parseInt($,10))};var je,$e="00000000000000000000000000000000",Ze=A.__private__.getFileId=function(){return $e},Me=A.__private__.setFileId=function($){return $e=$!==void 0&&/^[a-fA-F0-9]{32}$/.test($)?$.toUpperCase():$e.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),v!==null&&(yr=new M0(v.userPermissions,v.userPassword,v.ownerPassword,$e)),$e};A.setFileId=function($){return Me($),this},A.getFileId=function(){return Ze()};var Ue=A.__private__.convertDateToPDFDate=function($){var ye=$.getTimezoneOffset(),Ve=ye<0?"+":"-",ot=Math.floor(Math.abs(ye/60)),mt=Math.abs(ye%60),Ot=[Ve,Oe(ot),"'",Oe(mt),"'"].join("");return["D:",$.getFullYear(),Oe($.getMonth()+1),Oe($.getDate()),Oe($.getHours()),Oe($.getMinutes()),Oe($.getSeconds()),Ot].join("")},Qe=A.__private__.convertPDFDateToDate=function($){var ye=parseInt($.substr(2,4),10),Ve=parseInt($.substr(6,2),10)-1,ot=parseInt($.substr(8,2),10),mt=parseInt($.substr(10,2),10),Ot=parseInt($.substr(12,2),10),nr=parseInt($.substr(14,2),10);return new Date(ye,Ve,ot,mt,Ot,nr,0)},ct=A.__private__.setCreationDate=function($){var ye;if($===void 0&&($=new Date),$ instanceof Date)ye=Ue($);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test($))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ye=$}return je=ye},ce=A.__private__.getCreationDate=function($){var ye=je;return $==="jsDate"&&(ye=Qe(je)),ye};A.setCreationDate=function($){return ct($),this},A.getCreationDate=function($){return ce($)};var be,Oe=A.__private__.padd2=function($){return("0"+parseInt($)).slice(-2)},Be=A.__private__.padd2Hex=function($){return("00"+($=$.toString())).substr($.length)},qe=0,tt=[],We=[],Xe=0,lt=[],wt=[],Lt=!1,At=We,zt=function(){qe=0,Xe=0,We=[],tt=[],lt=[],pn=Wt(),Or=Wt()};A.__private__.setCustomOutputDestination=function($){Lt=!0,At=$};var vt=function($){Lt||(At=$)};A.__private__.resetCustomOutputDestination=function(){Lt=!1,At=We};var pe=A.__private__.out=function($){return $=$.toString(),Xe+=$.length+1,At.push($),At},ur=A.__private__.write=function($){return pe(arguments.length===1?$.toString():Array.prototype.join.call(arguments," "))},sr=A.__private__.getArrayBuffer=function($){for(var ye=$.length,Ve=new ArrayBuffer(ye),ot=new Uint8Array(Ve);ye--;)ot[ye]=$.charCodeAt(ye);return Ve},Tt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];A.__private__.getStandardFonts=function(){return Tt};var Nt=e.fontSize||16;A.__private__.setFontSize=A.setFontSize=function($){return Nt=U===B.ADVANCED?$/Kt:$,this};var Zt,rr=A.__private__.getFontSize=A.getFontSize=function(){return U===B.COMPAT?Nt:Nt*Kt},at=e.R2L||!1;A.__private__.setR2L=A.setR2L=function($){return at=$,this},A.__private__.getR2L=A.getR2L=function(){return at};var It,Vt=A.__private__.setZoomMode=function($){var ye=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test($))Zt=$;else if(isNaN($)){if(ye.indexOf($)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+$+'" is not recognized.');Zt=$}else Zt=parseInt($,10)};A.__private__.getZoomMode=function(){return Zt};var lr,Pr=A.__private__.setPageMode=function($){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf($)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+$+'" is not recognized.');It=$};A.__private__.getPageMode=function(){return It};var _t=A.__private__.setLayoutMode=function($){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf($)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+$+'" is not recognized.');lr=$};A.__private__.getLayoutMode=function(){return lr},A.__private__.setDisplayMode=A.setDisplayMode=function($,ye,Ve){return Vt($),_t(ye),Pr(Ve),this};var Ut={title:"",subject:"",author:"",keywords:"",creator:""};A.__private__.getDocumentProperty=function($){if(Object.keys(Ut).indexOf($)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ut[$]},A.__private__.getDocumentProperties=function(){return Ut},A.__private__.setDocumentProperties=A.setProperties=A.setDocumentProperties=function($){for(var ye in Ut)Ut.hasOwnProperty(ye)&&$[ye]&&(Ut[ye]=$[ye]);return this},A.__private__.setDocumentProperty=function($,ye){if(Object.keys(Ut).indexOf($)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ut[$]=ye};var _r,Kt,fn,Dt,Br,dr={},nn={},Kn=[],hr={},Gn={},Nn={},gi={},Yr=null,Ne=0,ae=[],ue=new NN(A),Ee=e.hotfixes||[],Fe={},rt={},it=[],et=function $(ye,Ve,ot,mt,Ot,nr){if(!(this instanceof $))return new $(ye,Ve,ot,mt,Ot,nr);isNaN(ye)&&(ye=1),isNaN(Ve)&&(Ve=0),isNaN(ot)&&(ot=0),isNaN(mt)&&(mt=1),isNaN(Ot)&&(Ot=0),isNaN(nr)&&(nr=0),this._matrix=[ye,Ve,ot,mt,Ot,nr]};Object.defineProperty(et.prototype,"sx",{get:function(){return this._matrix[0]},set:function($){this._matrix[0]=$}}),Object.defineProperty(et.prototype,"shy",{get:function(){return this._matrix[1]},set:function($){this._matrix[1]=$}}),Object.defineProperty(et.prototype,"shx",{get:function(){return this._matrix[2]},set:function($){this._matrix[2]=$}}),Object.defineProperty(et.prototype,"sy",{get:function(){return this._matrix[3]},set:function($){this._matrix[3]=$}}),Object.defineProperty(et.prototype,"tx",{get:function(){return this._matrix[4]},set:function($){this._matrix[4]=$}}),Object.defineProperty(et.prototype,"ty",{get:function(){return this._matrix[5]},set:function($){this._matrix[5]=$}}),Object.defineProperty(et.prototype,"a",{get:function(){return this._matrix[0]},set:function($){this._matrix[0]=$}}),Object.defineProperty(et.prototype,"b",{get:function(){return this._matrix[1]},set:function($){this._matrix[1]=$}}),Object.defineProperty(et.prototype,"c",{get:function(){return this._matrix[2]},set:function($){this._matrix[2]=$}}),Object.defineProperty(et.prototype,"d",{get:function(){return this._matrix[3]},set:function($){this._matrix[3]=$}}),Object.defineProperty(et.prototype,"e",{get:function(){return this._matrix[4]},set:function($){this._matrix[4]=$}}),Object.defineProperty(et.prototype,"f",{get:function(){return this._matrix[5]},set:function($){this._matrix[5]=$}}),Object.defineProperty(et.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(et.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(et.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(et.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),et.prototype.join=function($){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Q).join($)},et.prototype.multiply=function($){var ye=$.sx*this.sx+$.shy*this.shx,Ve=$.sx*this.shy+$.shy*this.sy,ot=$.shx*this.sx+$.sy*this.shx,mt=$.shx*this.shy+$.sy*this.sy,Ot=$.tx*this.sx+$.ty*this.shx+this.tx,nr=$.tx*this.shy+$.ty*this.sy+this.ty;return new et(ye,Ve,ot,mt,Ot,nr)},et.prototype.decompose=function(){var $=this.sx,ye=this.shy,Ve=this.shx,ot=this.sy,mt=this.tx,Ot=this.ty,nr=Math.sqrt($*$+ye*ye),wr=($/=nr)*Ve+(ye/=nr)*ot;Ve-=$*wr,ot-=ye*wr;var Hr=Math.sqrt(Ve*Ve+ot*ot);return wr/=Hr,$*(ot/=Hr)<ye*(Ve/=Hr)&&($=-$,ye=-ye,wr=-wr,nr=-nr),{scale:new et(nr,0,0,Hr,0,0),translate:new et(1,0,0,1,mt,Ot),rotate:new et($,ye,-ye,$,0,0),skew:new et(1,0,wr,1,0,0)}},et.prototype.toString=function($){return this.join(" ")},et.prototype.inversed=function(){var $=this.sx,ye=this.shy,Ve=this.shx,ot=this.sy,mt=this.tx,Ot=this.ty,nr=1/($*ot-ye*Ve),wr=ot*nr,Hr=-ye*nr,an=-Ve*nr,ln=$*nr;return new et(wr,Hr,an,ln,-wr*mt-an*Ot,-Hr*mt-ln*Ot)},et.prototype.applyToPoint=function($){var ye=$.x*this.sx+$.y*this.shx+this.tx,Ve=$.x*this.shy+$.y*this.sy+this.ty;return new Hs(ye,Ve)},et.prototype.applyToRectangle=function($){var ye=this.applyToPoint($),Ve=this.applyToPoint(new Hs($.x+$.w,$.y+$.h));return new Sc(ye.x,ye.y,Ve.x-ye.x,Ve.y-ye.y)},et.prototype.clone=function(){var $=this.sx,ye=this.shy,Ve=this.shx,ot=this.sy,mt=this.tx,Ot=this.ty;return new et($,ye,Ve,ot,mt,Ot)},A.Matrix=et;var Ke=A.matrixMult=function($,ye){return ye.multiply($)},Et=new et(1,0,0,1,0,0);A.unitMatrix=A.identityMatrix=Et;var Rt=function($,ye){if(!Gn[$]){var Ve=(ye instanceof mg?"Sh":"P")+(Object.keys(hr).length+1).toString(10);ye.id=Ve,Gn[$]=Ve,hr[Ve]=ye,ue.publish("addPattern",ye)}};A.ShadingPattern=mg,A.TilingPattern=uy,A.addShadingPattern=function($,ye){return re("addShadingPattern()"),Rt($,ye),this},A.beginTilingPattern=function($){re("beginTilingPattern()"),xa($.boundingBox[0],$.boundingBox[1],$.boundingBox[2]-$.boundingBox[0],$.boundingBox[3]-$.boundingBox[1],$.matrix)},A.endTilingPattern=function($,ye){re("endTilingPattern()"),ye.stream=wt[be].join(`
`),Rt($,ye),ue.publish("endTilingPattern",ye),it.pop().restore()};var gt=A.__private__.newObject=function(){var $=Wt();return mr($,!0),$},Wt=A.__private__.newObjectDeferred=function(){return qe++,tt[qe]=function(){return Xe},qe},mr=function($,ye){return ye=typeof ye=="boolean"&&ye,tt[$]=Xe,ye&&pe($+" 0 obj"),$},Ar=A.__private__.newAdditionalObject=function(){var $={objId:Wt(),content:""};return lt.push($),$},pn=Wt(),Or=Wt(),en=A.__private__.decodeColorString=function($){var ye=$.split(" ");if(ye.length!==2||ye[1]!=="g"&&ye[1]!=="G")ye.length===5&&(ye[4]==="k"||ye[4]==="K")&&(ye=[(1-ye[0])*(1-ye[3]),(1-ye[1])*(1-ye[3]),(1-ye[2])*(1-ye[3]),"r"]);else{var Ve=parseFloat(ye[0]);ye=[Ve,Ve,Ve,"r"]}for(var ot="#",mt=0;mt<3;mt++)ot+=("0"+Math.floor(255*parseFloat(ye[mt])).toString(16)).slice(-2);return ot},Zr=A.__private__.encodeColorString=function($){var ye;typeof $=="string"&&($={ch1:$});var Ve=$.ch1,ot=$.ch2,mt=$.ch3,Ot=$.ch4,nr=$.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ve=="string"&&Ve.charAt(0)!=="#"){var wr=new HU(Ve);if(wr.ok)Ve=wr.toHex();else if(!/^\d*\.?\d*$/.test(Ve))throw new Error('Invalid color "'+Ve+'" passed to jsPDF.encodeColorString.')}if(typeof Ve=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ve)&&(Ve="#"+Ve[1]+Ve[1]+Ve[2]+Ve[2]+Ve[3]+Ve[3]),typeof Ve=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ve)){var Hr=parseInt(Ve.substr(1),16);Ve=Hr>>16&255,ot=Hr>>8&255,mt=255&Hr}if(ot===void 0||Ot===void 0&&Ve===ot&&ot===mt)if(typeof Ve=="string")ye=Ve+" "+nr[0];else switch($.precision){case 2:ye=J(Ve/255)+" "+nr[0];break;case 3:default:ye=G(Ve/255)+" "+nr[0]}else if(Ot===void 0||$i(Ot)==="object"){if(Ot&&!isNaN(Ot.a)&&Ot.a===0)return ye=["1.","1.","1.",nr[1]].join(" ");if(typeof Ve=="string")ye=[Ve,ot,mt,nr[1]].join(" ");else switch($.precision){case 2:ye=[J(Ve/255),J(ot/255),J(mt/255),nr[1]].join(" ");break;default:case 3:ye=[G(Ve/255),G(ot/255),G(mt/255),nr[1]].join(" ")}}else if(typeof Ve=="string")ye=[Ve,ot,mt,Ot,nr[2]].join(" ");else switch($.precision){case 2:ye=[J(Ve),J(ot),J(mt),J(Ot),nr[2]].join(" ");break;case 3:default:ye=[G(Ve),G(ot),G(mt),G(Ot),nr[2]].join(" ")}return ye},jn=A.__private__.getFilters=function(){return l},Jr=A.__private__.putStream=function($){var ye=($=$||{}).data||"",Ve=$.filters||jn(),ot=$.alreadyAppliedFilters||[],mt=$.addLength1||!1,Ot=ye.length,nr=$.objectId,wr=function(Yo){return Yo};if(v!==null&&nr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");v!==null&&(wr=yr.encryptor(nr,0));var Hr={};Ve===!0&&(Ve=["FlateEncode"]);var an=$.additionalKeyValues||[],ln=(Hr=bn.API.processDataByFilters!==void 0?bn.API.processDataByFilters(ye,Ve):{data:ye,reverseChain:[]}).reverseChain+(Array.isArray(ot)?ot.join(" "):ot.toString());if(Hr.data.length!==0&&(an.push({key:"Length",value:Hr.data.length}),mt===!0&&an.push({key:"Length1",value:Ot})),ln.length!=0)if(ln.split("/").length-1==1)an.push({key:"Filter",value:ln});else{an.push({key:"Filter",value:"["+ln+"]"});for(var cn=0;cn<an.length;cn+=1)if(an[cn].key==="DecodeParms"){for(var Hn=[],wi=0;wi<Hr.reverseChain.split("/").length-1;wi+=1)Hn.push("null");Hn.push(an[cn].value),an[cn].value="["+Hn.join(" ")+"]"}}pe("<<");for(var un=0;un<an.length;un++)pe("/"+an[un].key+" "+an[un].value);pe(">>"),Hr.data.length!==0&&(pe("stream"),pe(wr(Hr.data)),pe("endstream"))},Ur=A.__private__.putPage=function($){var ye=$.number,Ve=$.data,ot=$.objId,mt=$.contentsObjId;mr(ot,!0),pe("<</Type /Page"),pe("/Parent "+$.rootDictionaryObjId+" 0 R"),pe("/Resources "+$.resourceDictionaryObjId+" 0 R"),pe("/MediaBox ["+parseFloat(Q($.mediaBox.bottomLeftX))+" "+parseFloat(Q($.mediaBox.bottomLeftY))+" "+Q($.mediaBox.topRightX)+" "+Q($.mediaBox.topRightY)+"]"),$.cropBox!==null&&pe("/CropBox ["+Q($.cropBox.bottomLeftX)+" "+Q($.cropBox.bottomLeftY)+" "+Q($.cropBox.topRightX)+" "+Q($.cropBox.topRightY)+"]"),$.bleedBox!==null&&pe("/BleedBox ["+Q($.bleedBox.bottomLeftX)+" "+Q($.bleedBox.bottomLeftY)+" "+Q($.bleedBox.topRightX)+" "+Q($.bleedBox.topRightY)+"]"),$.trimBox!==null&&pe("/TrimBox ["+Q($.trimBox.bottomLeftX)+" "+Q($.trimBox.bottomLeftY)+" "+Q($.trimBox.topRightX)+" "+Q($.trimBox.topRightY)+"]"),$.artBox!==null&&pe("/ArtBox ["+Q($.artBox.bottomLeftX)+" "+Q($.artBox.bottomLeftY)+" "+Q($.artBox.topRightX)+" "+Q($.artBox.topRightY)+"]"),typeof $.userUnit=="number"&&$.userUnit!==1&&pe("/UserUnit "+$.userUnit),ue.publish("putPage",{objId:ot,pageContext:ae[ye],pageNumber:ye,page:Ve}),pe("/Contents "+mt+" 0 R"),pe(">>"),pe("endobj");var Ot=Ve.join(`
`);return U===B.ADVANCED&&(Ot+=`
Q`),mr(mt,!0),Jr({data:Ot,filters:jn(),objectId:mt}),pe("endobj"),ot},vn=A.__private__.putPages=function(){var $,ye,Ve=[];for($=1;$<=Ne;$++)ae[$].objId=Wt(),ae[$].contentsObjId=Wt();for($=1;$<=Ne;$++)Ve.push(Ur({number:$,data:wt[$],objId:ae[$].objId,contentsObjId:ae[$].contentsObjId,mediaBox:ae[$].mediaBox,cropBox:ae[$].cropBox,bleedBox:ae[$].bleedBox,trimBox:ae[$].trimBox,artBox:ae[$].artBox,userUnit:ae[$].userUnit,rootDictionaryObjId:pn,resourceDictionaryObjId:Or}));mr(pn,!0),pe("<</Type /Pages");var ot="/Kids [";for(ye=0;ye<Ne;ye++)ot+=Ve[ye]+" 0 R ";pe(ot+"]"),pe("/Count "+Ne),pe(">>"),pe("endobj"),ue.publish("postPutPages")},Fn=function($){ue.publish("putFont",{font:$,out:pe,newObject:gt,putStream:Jr}),$.isAlreadyPutted!==!0&&($.objectNumber=gt(),pe("<<"),pe("/Type /Font"),pe("/BaseFont /"+O0($.postScriptName)),pe("/Subtype /Type1"),typeof $.encoding=="string"&&pe("/Encoding /"+$.encoding),pe("/FirstChar 32"),pe("/LastChar 255"),pe(">>"),pe("endobj"))},ei=function(){for(var $ in dr)dr.hasOwnProperty($)&&(x===!1||x===!0&&S.hasOwnProperty($))&&Fn(dr[$])},mi=function($){$.objectNumber=gt();var ye=[];ye.push({key:"Type",value:"/XObject"}),ye.push({key:"Subtype",value:"/Form"}),ye.push({key:"BBox",value:"["+[Q($.x),Q($.y),Q($.x+$.width),Q($.y+$.height)].join(" ")+"]"}),ye.push({key:"Matrix",value:"["+$.matrix.toString()+"]"});var Ve=$.pages[1].join(`
`);Jr({data:Ve,additionalKeyValues:ye,objectId:$.objectNumber}),pe("endobj")},Ii=function(){for(var $ in Fe)Fe.hasOwnProperty($)&&mi(Fe[$])},ma=function($,ye){var Ve,ot=[],mt=1/(ye-1);for(Ve=0;Ve<1;Ve+=mt)ot.push(Ve);if(ot.push(1),$[0].offset!=0){var Ot={offset:0,color:$[0].color};$.unshift(Ot)}if($[$.length-1].offset!=1){var nr={offset:1,color:$[$.length-1].color};$.push(nr)}for(var wr="",Hr=0,an=0;an<ot.length;an++){for(Ve=ot[an];Ve>$[Hr+1].offset;)Hr++;var ln=$[Hr].offset,cn=(Ve-ln)/($[Hr+1].offset-ln),Hn=$[Hr].color,wi=$[Hr+1].color;wr+=Be(Math.round((1-cn)*Hn[0]+cn*wi[0]).toString(16))+Be(Math.round((1-cn)*Hn[1]+cn*wi[1]).toString(16))+Be(Math.round((1-cn)*Hn[2]+cn*wi[2]).toString(16))}return wr.trim()},En=function($,ye){ye||(ye=21);var Ve=gt(),ot=ma($.colors,ye),mt=[];mt.push({key:"FunctionType",value:"0"}),mt.push({key:"Domain",value:"[0.0 1.0]"}),mt.push({key:"Size",value:"["+ye+"]"}),mt.push({key:"BitsPerSample",value:"8"}),mt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),mt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Jr({data:ot,additionalKeyValues:mt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ve}),pe("endobj"),$.objectNumber=gt(),pe("<< /ShadingType "+$.type),pe("/ColorSpace /DeviceRGB");var Ot="/Coords ["+Q(parseFloat($.coords[0]))+" "+Q(parseFloat($.coords[1]))+" ";$.type===2?Ot+=Q(parseFloat($.coords[2]))+" "+Q(parseFloat($.coords[3])):Ot+=Q(parseFloat($.coords[2]))+" "+Q(parseFloat($.coords[3]))+" "+Q(parseFloat($.coords[4]))+" "+Q(parseFloat($.coords[5])),pe(Ot+="]"),$.matrix&&pe("/Matrix ["+$.matrix.toString()+"]"),pe("/Function "+Ve+" 0 R"),pe("/Extend [true true]"),pe(">>"),pe("endobj")},so=function($,ye){var Ve=Wt(),ot=gt();ye.push({resourcesOid:Ve,objectOid:ot}),$.objectNumber=ot;var mt=[];mt.push({key:"Type",value:"/Pattern"}),mt.push({key:"PatternType",value:"1"}),mt.push({key:"PaintType",value:"1"}),mt.push({key:"TilingType",value:"1"}),mt.push({key:"BBox",value:"["+$.boundingBox.map(Q).join(" ")+"]"}),mt.push({key:"XStep",value:Q($.xStep)}),mt.push({key:"YStep",value:Q($.yStep)}),mt.push({key:"Resources",value:Ve+" 0 R"}),$.matrix&&mt.push({key:"Matrix",value:"["+$.matrix.toString()+"]"}),Jr({data:$.stream,additionalKeyValues:mt,objectId:$.objectNumber}),pe("endobj")},Lo=function($){var ye;for(ye in hr)hr.hasOwnProperty(ye)&&(hr[ye]instanceof mg?En(hr[ye]):hr[ye]instanceof uy&&so(hr[ye],$))},yn=function($){for(var ye in $.objectNumber=gt(),pe("<<"),$)switch(ye){case"opacity":pe("/ca "+J($[ye]));break;case"stroke-opacity":pe("/CA "+J($[ye]))}pe(">>"),pe("endobj")},yi=function(){var $;for($ in Nn)Nn.hasOwnProperty($)&&yn(Nn[$])},Qs=function(){for(var $ in pe("/XObject <<"),Fe)Fe.hasOwnProperty($)&&Fe[$].objectNumber>=0&&pe("/"+$+" "+Fe[$].objectNumber+" 0 R");ue.publish("putXobjectDict"),pe(">>")},Vn=function(){yr.oid=gt(),pe("<<"),pe("/Filter /Standard"),pe("/V "+yr.v),pe("/R "+yr.r),pe("/U <"+yr.toHexString(yr.U)+">"),pe("/O <"+yr.toHexString(yr.O)+">"),pe("/P "+yr.P),pe(">>"),pe("endobj")},zn=function(){for(var $ in pe("/Font <<"),dr)dr.hasOwnProperty($)&&(x===!1||x===!0&&S.hasOwnProperty($))&&pe("/"+$+" "+dr[$].objectNumber+" 0 R");pe(">>")},Ts=function(){if(Object.keys(hr).length>0){for(var $ in pe("/Shading <<"),hr)hr.hasOwnProperty($)&&hr[$]instanceof mg&&hr[$].objectNumber>=0&&pe("/"+$+" "+hr[$].objectNumber+" 0 R");ue.publish("putShadingPatternDict"),pe(">>")}},Ji=function($){if(Object.keys(hr).length>0){for(var ye in pe("/Pattern <<"),hr)hr.hasOwnProperty(ye)&&hr[ye]instanceof A.TilingPattern&&hr[ye].objectNumber>=0&&hr[ye].objectNumber<$&&pe("/"+ye+" "+hr[ye].objectNumber+" 0 R");ue.publish("putTilingPatternDict"),pe(">>")}},Un=function(){if(Object.keys(Nn).length>0){var $;for($ in pe("/ExtGState <<"),Nn)Nn.hasOwnProperty($)&&Nn[$].objectNumber>=0&&pe("/"+$+" "+Nn[$].objectNumber+" 0 R");ue.publish("putGStateDict"),pe(">>")}},kn=function($){mr($.resourcesOid,!0),pe("<<"),pe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),zn(),Ts(),Ji($.objectOid),Un(),Qs(),pe(">>"),pe("endobj")},go=function(){var $=[];ei(),yi(),Ii(),Lo($),ue.publish("putResources"),$.forEach(kn),kn({resourcesOid:Or,objectOid:Number.MAX_SAFE_INTEGER}),ue.publish("postPutResources")},si=function(){ue.publish("putAdditionalObjects");for(var $=0;$<lt.length;$++){var ye=lt[$];mr(ye.objId,!0),pe(ye.content),pe("endobj")}ue.publish("postPutAdditionalObjects")},ya=function($){nn[$.fontName]=nn[$.fontName]||{},nn[$.fontName][$.fontStyle]=$.id},ao=function($,ye,Ve,ot,mt){var Ot={id:"F"+(Object.keys(dr).length+1).toString(10),postScriptName:$,fontName:ye,fontStyle:Ve,encoding:ot,isStandardFont:mt||!1,metadata:{}};return ue.publish("addFont",{font:Ot,instance:this}),dr[Ot.id]=Ot,ya(Ot),Ot.id},_a=function($){for(var ye=0,Ve=Tt.length;ye<Ve;ye++){var ot=ao.call(this,$[ye][0],$[ye][1],$[ye][2],Tt[ye][3],!0);x===!1&&(S[ot]=!0);var mt=$[ye][0].split("-");ya({id:ot,fontName:mt[0],fontStyle:mt[1]||""})}ue.publish("addFonts",{fonts:dr,dictionary:nn})},ci=function($){return $.foo=function(){try{return $.apply(this,arguments)}catch(ot){var ye=ot.stack||"";~ye.indexOf(" at ")&&(ye=ye.split(" at ")[1]);var Ve="Error in function "+ye.split(`
`)[0].split("<")[0]+": "+ot.message;if(!_n.console)throw new Error(Ve);_n.console.error(Ve,ot),_n.alert&&alert(Ve)}},$.foo.bar=$,$.foo},Ko=function($,ye){var Ve,ot,mt,Ot,nr,wr,Hr,an,ln;if(mt=(ye=ye||{}).sourceEncoding||"Unicode",nr=ye.outputEncoding,(ye.autoencode||nr)&&dr[_r].metadata&&dr[_r].metadata[mt]&&dr[_r].metadata[mt].encoding&&(Ot=dr[_r].metadata[mt].encoding,!nr&&dr[_r].encoding&&(nr=dr[_r].encoding),!nr&&Ot.codePages&&(nr=Ot.codePages[0]),typeof nr=="string"&&(nr=Ot[nr]),nr)){for(Hr=!1,wr=[],Ve=0,ot=$.length;Ve<ot;Ve++)(an=nr[$.charCodeAt(Ve)])?wr.push(String.fromCharCode(an)):wr.push($[Ve]),wr[Ve].charCodeAt(0)>>8&&(Hr=!0);$=wr.join("")}for(Ve=$.length;Hr===void 0&&Ve!==0;)$.charCodeAt(Ve-1)>>8&&(Hr=!0),Ve--;if(!Hr)return $;for(wr=ye.noBOM?[]:[254,255],Ve=0,ot=$.length;Ve<ot;Ve++){if((ln=(an=$.charCodeAt(Ve))>>8)>>8)throw new Error("Character at position "+Ve+" of string '"+$+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");wr.push(ln),wr.push(an-(ln<<8))}return String.fromCharCode.apply(void 0,wr)},mo=A.__private__.pdfEscape=A.pdfEscape=function($,ye){return Ko($,ye).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Cs=A.__private__.beginPage=function($){wt[++Ne]=[],ae[Ne]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number($[0]),topRightY:Number($[1])}},D(Ne),vt(wt[be])},hs=function($,ye){var Ve,ot,mt;switch(r=ye||r,typeof $=="string"&&(Ve=N($.toLowerCase()),Array.isArray(Ve)&&(ot=Ve[0],mt=Ve[1])),Array.isArray($)&&(ot=$[0]*Kt,mt=$[1]*Kt),isNaN(ot)&&(ot=i[0],mt=i[1]),(ot>14400||mt>14400)&&(io.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ot=Math.min(14400,ot),mt=Math.min(14400,mt)),i=[ot,mt],r.substr(0,1)){case"l":mt>ot&&(i=[mt,ot]);break;case"p":ot>mt&&(i=[mt,ot])}Cs(i),wh($l),pe(Is),tu!==0&&pe(tu+" J"),wc!==0&&pe(wc+" j"),ue.publish("addPage",{pageNumber:Ne})},xn=function($){$>0&&$<=Ne&&(wt.splice($,1),ae.splice($,1),Ne--,be>Ne&&(be=Ne),this.setPage(be))},D=function($){$>0&&$<=Ne&&(be=$)},X=A.__private__.getNumberOfPages=A.getNumberOfPages=function(){return wt.length-1},j=function($,ye,Ve){var ot,mt=void 0;return Ve=Ve||{},$=$!==void 0?$:dr[_r].fontName,ye=ye!==void 0?ye:dr[_r].fontStyle,ot=$.toLowerCase(),nn[ot]!==void 0&&nn[ot][ye]!==void 0?mt=nn[ot][ye]:nn[$]!==void 0&&nn[$][ye]!==void 0?mt=nn[$][ye]:Ve.disableWarning===!1&&io.warn("Unable to look up font label for font '"+$+"', '"+ye+"'. Refer to getFontList() for available fonts."),mt||Ve.noFallback||(mt=nn.times[ye])==null&&(mt=nn.times.normal),mt},Z=A.__private__.putInfo=function(){var $=gt(),ye=function(ot){return ot};for(var Ve in v!==null&&(ye=yr.encryptor($,0)),pe("<<"),pe("/Producer ("+mo(ye("jsPDF "+bn.version))+")"),Ut)Ut.hasOwnProperty(Ve)&&Ut[Ve]&&pe("/"+Ve.substr(0,1).toUpperCase()+Ve.substr(1)+" ("+mo(ye(Ut[Ve]))+")");pe("/CreationDate ("+mo(ye(je))+")"),pe(">>"),pe("endobj")},de=A.__private__.putCatalog=function($){var ye=($=$||{}).rootDictionaryObjId||pn;switch(gt(),pe("<<"),pe("/Type /Catalog"),pe("/Pages "+ye+" 0 R"),Zt||(Zt="fullwidth"),Zt){case"fullwidth":pe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":pe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":pe("/OpenAction [3 0 R /Fit]");break;case"original":pe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ve=""+Zt;Ve.substr(Ve.length-1)==="%"&&(Zt=parseInt(Zt)/100),typeof Zt=="number"&&pe("/OpenAction [3 0 R /XYZ null null "+J(Zt)+"]")}switch(lr||(lr="continuous"),lr){case"continuous":pe("/PageLayout /OneColumn");break;case"single":pe("/PageLayout /SinglePage");break;case"two":case"twoleft":pe("/PageLayout /TwoColumnLeft");break;case"tworight":pe("/PageLayout /TwoColumnRight")}It&&pe("/PageMode /"+It),ue.publish("putCatalog"),pe(">>"),pe("endobj")},we=A.__private__.putTrailer=function(){pe("trailer"),pe("<<"),pe("/Size "+(qe+1)),pe("/Root "+qe+" 0 R"),pe("/Info "+(qe-1)+" 0 R"),v!==null&&pe("/Encrypt "+yr.oid+" 0 R"),pe("/ID [ <"+$e+"> <"+$e+"> ]"),pe(">>")},Le=A.__private__.putHeader=function(){pe("%PDF-"+k),pe("%")},ft=A.__private__.putXRef=function(){var $="0000000000";pe("xref"),pe("0 "+(qe+1)),pe("0000000000 65535 f ");for(var ye=1;ye<=qe;ye++)typeof tt[ye]=="function"?pe(($+tt[ye]()).slice(-10)+" 00000 n "):tt[ye]!==void 0?pe(($+tt[ye]).slice(-10)+" 00000 n "):pe("0000000000 00000 n ")},Mt=A.__private__.buildDocument=function(){zt(),vt(We),ue.publish("buildDocument"),Le(),vn(),si(),go(),v!==null&&Vn(),Z(),de();var $=Xe;return ft(),we(),pe("startxref"),pe(""+$),pe("%%EOF"),vt(wt[be]),We.join(`
`)},Qt=A.__private__.getBlob=function($){return new Blob([sr($)],{type:"application/pdf"})},er=A.output=A.__private__.output=ci(function($,ye){switch(typeof(ye=ye||{})=="string"?ye={filename:ye}:ye.filename=ye.filename||"generated.pdf",$){case void 0:return Mt();case"save":A.save(ye.filename);break;case"arraybuffer":return sr(Mt());case"blob":return Qt(Mt());case"bloburi":case"bloburl":if(_n.URL!==void 0&&typeof _n.URL.createObjectURL=="function")return _n.URL&&_n.URL.createObjectURL(Qt(Mt()))||void 0;io.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ve="",ot=Mt();try{Ve=y4(ot)}catch{Ve=y4(unescape(encodeURIComponent(ot)))}return"data:application/pdf;filename="+ye.filename+";base64,"+Ve;case"pdfobjectnewwindow":if(Object.prototype.toString.call(_n)==="[object Window]"){var mt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ot=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ye.pdfObjectUrl&&(mt=ye.pdfObjectUrl,Ot="");var nr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+mt+'"'+Ot+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ye)+");<\/script></body></html>",wr=_n.open();return wr!==null&&wr.document.write(nr),wr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(_n)==="[object Window]"){var Hr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ye.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ye.filename+'" width="500px" height="400px" /></body></html>',an=_n.open();if(an!==null){an.document.write(Hr);var ln=this;an.document.documentElement.querySelector("#pdfViewer").onload=function(){an.document.title=ye.filename,an.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ln.output("bloburl"))}}return an}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(_n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var cn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ye)+'"></iframe></body></html>',Hn=_n.open();if(Hn!==null&&(Hn.document.write(cn),Hn.document.title=ye.filename),Hn||typeof safari>"u")return Hn;break;case"datauri":case"dataurl":return _n.document.location.href=this.output("datauristring",ye);default:return null}}),Jt=function($){return Array.isArray(Ee)===!0&&Ee.indexOf($)>-1};switch(n){case"pt":Kt=1;break;case"mm":Kt=72/25.4;break;case"cm":Kt=72/2.54;break;case"in":Kt=72;break;case"px":Kt=Jt("px_scaling")==1?.75:96/72;break;case"pc":case"em":Kt=12;break;case"ex":Kt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Kt=n}var yr=null;ct(),Me();var ti=function($){return v!==null?yr.encryptor($,0):function(ye){return ye}},zr=A.__private__.getPageInfo=A.getPageInfo=function($){if(isNaN($)||$%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ae[$].objId,pageNumber:$,pageContext:ae[$]}},br=A.__private__.getPageInfoByObjId=function($){if(isNaN($)||$%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ye in ae)if(ae[ye].objId===$)break;return zr(ye)},$t=A.__private__.getCurrentPageInfo=A.getCurrentPageInfo=function(){return{objId:ae[be].objId,pageNumber:be,pageContext:ae[be]}};A.addPage=function(){return hs.apply(this,arguments),this},A.setPage=function(){return D.apply(this,arguments),vt.call(this,wt[be]),this},A.insertPage=function($){return this.addPage(),this.movePage(be,$),this},A.movePage=function($,ye){var Ve,ot;if($>ye){Ve=wt[$],ot=ae[$];for(var mt=$;mt>ye;mt--)wt[mt]=wt[mt-1],ae[mt]=ae[mt-1];wt[ye]=Ve,ae[ye]=ot,this.setPage(ye)}else if($<ye){Ve=wt[$],ot=ae[$];for(var Ot=$;Ot<ye;Ot++)wt[Ot]=wt[Ot+1],ae[Ot]=ae[Ot+1];wt[ye]=Ve,ae[ye]=ot,this.setPage(ye)}return this},A.deletePage=function(){return xn.apply(this,arguments),this},A.__private__.text=A.text=function($,ye,Ve,ot,mt){var Ot,nr,wr,Hr,an,ln,cn,Hn,wi,un=(ot=ot||{}).scope||this;if(typeof $=="number"&&typeof ye=="number"&&(typeof Ve=="string"||Array.isArray(Ve))){var Yo=Ve;Ve=ye,ye=$,$=Yo}if(arguments[3]instanceof et?(re("The transform parameter of text() with a Matrix value"),wi=mt):(wr=arguments[4],Hr=arguments[5],$i(cn=arguments[3])==="object"&&cn!==null||(typeof wr=="string"&&(Hr=wr,wr=null),typeof cn=="string"&&(Hr=cn,cn=null),typeof cn=="number"&&(wr=cn,cn=null),ot={flags:cn,angle:wr,align:Hr})),isNaN(ye)||isNaN(Ve)||$==null)throw new Error("Invalid arguments passed to jsPDF.text");if($.length===0)return un;var Lr="",Co=!1,Tn=typeof ot.lineHeightFactor=="number"?ot.lineHeightFactor:ba,Mn=un.internal.scaleFactor;function Wa(bi){return bi=bi.split("	").join(Array(ot.TabLen||9).join(" ")),mo(bi,cn)}function vl(bi){for(var ui,rn=bi.concat(),on=[],Jo=rn.length;Jo--;)typeof(ui=rn.shift())=="string"?on.push(ui):Array.isArray(bi)&&(ui.length===1||ui[1]===void 0&&ui[2]===void 0)?on.push(ui[0]):on.push([ui[0],ui[1],ui[2]]);return on}function Xa(bi,ui){var rn;if(typeof bi=="string")rn=ui(bi)[0];else if(Array.isArray(bi)){for(var on,Jo,_o=bi.concat(),Oi=[],eo=_o.length;eo--;)typeof(on=_o.shift())=="string"?Oi.push(ui(on)[0]):Array.isArray(on)&&typeof on[0]=="string"&&(Jo=ui(on[0],on[1],on[2]),Oi.push([Jo[0],Jo[1],Jo[2]]));rn=Oi}return rn}var bl=!1,Rs=!0;if(typeof $=="string")bl=!0;else if(Array.isArray($)){var fs=$.concat();nr=[];for(var Fo,Mi=fs.length;Mi--;)(typeof(Fo=fs.shift())!="string"||Array.isArray(Fo)&&typeof Fo[0]!="string")&&(Rs=!1);bl=Rs}if(bl===!1)throw new Error('Type of text must be string or Array. "'+$+'" is not recognized.');typeof $=="string"&&($=$.match(/[\r?\n]/)?$.split(/\r\n|\r|\n/g):[$]);var Wl=Nt/un.internal.scaleFactor,ks=Wl*(Tn-1);switch(ot.baseline){case"bottom":Ve-=ks;break;case"top":Ve+=Wl-ks;break;case"hanging":Ve+=Wl-2*ks;break;case"middle":Ve+=Wl/2-ks}if((ln=ot.maxWidth||0)>0&&(typeof $=="string"?$=un.splitTextToSize($,ln):Object.prototype.toString.call($)==="[object Array]"&&($=$.reduce(function(bi,ui){return bi.concat(un.splitTextToSize(ui,ln))},[]))),Ot={text:$,x:ye,y:Ve,options:ot,mutex:{pdfEscape:mo,activeFontKey:_r,fonts:dr,activeFontSize:Nt}},ue.publish("preProcessText",Ot),$=Ot.text,wr=(ot=Ot.options).angle,!(wi instanceof et)&&wr&&typeof wr=="number"){wr*=Math.PI/180,ot.rotationDirection===0&&(wr=-wr),U===B.ADVANCED&&(wr=-wr);var qs=Math.cos(wr),xl=Math.sin(wr);wi=new et(qs,xl,-xl,qs,0,0)}else wr&&wr instanceof et&&(wi=wr);U!==B.ADVANCED||wi||(wi=Et),(an=ot.charSpace||_l)!==void 0&&(Lr+=Q(se(an))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Hn=ot.horizontalScale)!==void 0&&(Lr+=Q(100*Hn)+` Tz
`),ot.lang;var Qi=-1,Ka=ot.renderingMode!==void 0?ot.renderingMode:ot.stroke,Ga=un.internal.getCurrentPageInfo().pageContext;switch(Ka){case 0:case!1:case"fill":Qi=0;break;case 1:case!0:case"stroke":Qi=1;break;case 2:case"fillThenStroke":Qi=2;break;case 3:case"invisible":Qi=3;break;case 4:case"fillAndAddForClipping":Qi=4;break;case 5:case"strokeAndAddPathForClipping":Qi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Qi=6;break;case 7:case"addToPathForClipping":Qi=7}var Xl=Ga.usedRenderingMode!==void 0?Ga.usedRenderingMode:-1;Qi!==-1?Lr+=Qi+` Tr
`:Xl!==-1&&(Lr+=`0 Tr
`),Qi!==-1&&(Ga.usedRenderingMode=Qi),Hr=ot.align||"left";var Bo,Ms=Nt*Tn,zu=un.internal.pageSize.getWidth(),$u=dr[_r];an=ot.charSpace||_l,ln=ot.maxWidth||0,cn=Object.assign({autoencode:!0,noBOM:!0},ot.flags);var nt=[];if(Object.prototype.toString.call($)==="[object Array]"){var Ct;nr=vl($),Hr!=="left"&&(Bo=nr.map(function(bi){return un.getStringUnitWidth(bi,{font:$u,charSpace:an,fontSize:Nt,doKerning:!1})*Nt/Mn}));var cr,kr=0;if(Hr==="right"){ye-=Bo[0],$=[],Mi=nr.length;for(var Rn=0;Rn<Mi;Rn++)Rn===0?(cr=Sn(ye),Ct=ra(Ve)):(cr=se(kr-Bo[Rn]),Ct=-Ms),$.push([nr[Rn],cr,Ct]),kr=Bo[Rn]}else if(Hr==="center"){ye-=Bo[0]/2,$=[],Mi=nr.length;for(var gn=0;gn<Mi;gn++)gn===0?(cr=Sn(ye),Ct=ra(Ve)):(cr=se((kr-Bo[gn])/2),Ct=-Ms),$.push([nr[gn],cr,Ct]),kr=Bo[gn]}else if(Hr==="left"){$=[],Mi=nr.length;for(var Yn=0;Yn<Mi;Yn++)$.push(nr[Yn])}else{if(Hr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');$=[],Mi=nr.length,ln=ln!==0?ln:zu;for(var qn=0;qn<Mi;qn++)Ct=qn===0?ra(Ve):-Ms,cr=qn===0?Sn(ye):0,qn<Mi-1?nt.push(Q(se((ln-Bo[qn])/(nr[qn].split(" ").length-1)))):nt.push(0),$.push([nr[qn],cr,Ct])}}var zo=typeof ot.R2L=="boolean"?ot.R2L:at;zo===!0&&($=Xa($,function(bi,ui,rn){return[bi.split("").reverse().join(""),ui,rn]})),Ot={text:$,x:ye,y:Ve,options:ot,mutex:{pdfEscape:mo,activeFontKey:_r,fonts:dr,activeFontSize:Nt}},ue.publish("postProcessText",Ot),$=Ot.text,Co=Ot.mutex.isHex||!1;var _i=dr[_r].encoding;_i!=="WinAnsiEncoding"&&_i!=="StandardEncoding"||($=Xa($,function(bi,ui,rn){return[Wa(bi),ui,rn]})),nr=vl($),$=[];for(var ri,Si,qi,vi=0,Zo=1,$o=Array.isArray(nr[0])?Zo:vi,ds="",Ws=function(bi,ui,rn){var on="";return rn instanceof et?(rn=typeof ot.angle=="number"?Ke(rn,new et(1,0,0,1,bi,ui)):Ke(new et(1,0,0,1,bi,ui),rn),U===B.ADVANCED&&(rn=Ke(new et(1,0,0,-1,0,0),rn)),on=rn.join(" ")+` Tm
`):on=Q(bi)+" "+Q(ui)+` Td
`,on},yo=0;yo<nr.length;yo++){switch(ds="",$o){case Zo:qi=(Co?"<":"(")+nr[yo][0]+(Co?">":")"),ri=parseFloat(nr[yo][1]),Si=parseFloat(nr[yo][2]);break;case vi:qi=(Co?"<":"(")+nr[yo]+(Co?">":")"),ri=Sn(ye),Si=ra(Ve)}nt!==void 0&&nt[yo]!==void 0&&(ds=nt[yo]+` Tw
`),yo===0?$.push(ds+Ws(ri,Si,wi)+qi):$o===vi?$.push(ds+qi):$o===Zo&&$.push(ds+Ws(ri,Si,wi)+qi)}$=$o===vi?$.join(` Tj
T* `):$.join(` Tj
`),$+=` Tj
`;var ia=`BT
/`;return ia+=_r+" "+Nt+` Tf
`,ia+=Q(Nt*Tn)+` TL
`,ia+=jl+`
`,ia+=Lr,ia+=$,pe(ia+="ET"),S[_r]=!0,un};var Tr=A.__private__.clip=A.clip=function($){return pe($==="evenodd"?"W*":"W"),this};A.clipEvenOdd=function(){return Tr("evenodd")},A.__private__.discardPath=A.discardPath=function(){return pe("n"),this};var wn=A.__private__.isValidStyle=function($){var ye=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf($)!==-1&&(ye=!0),ye};A.__private__.setDefaultPathOperation=A.setDefaultPathOperation=function($){return wn($)&&(p=$),this};var Hi=A.__private__.getStyle=A.getStyle=function($){var ye=p;switch($){case"D":case"S":ye="S";break;case"F":ye="f";break;case"FD":case"DF":ye="B";break;case"f":case"f*":case"B":case"B*":ye=$}return ye},ai=A.close=function(){return pe("h"),this};A.stroke=function(){return pe("S"),this},A.fill=function($){return zl("f",$),this},A.fillEvenOdd=function($){return zl("f*",$),this},A.fillStroke=function($){return zl("B",$),this},A.fillStrokeEvenOdd=function($){return zl("B*",$),this};var zl=function($,ye){$i(ye)==="object"?xh(ye,$):pe($)},Qc=function($){$===null||U===B.ADVANCED&&$===void 0||($=Hi($),pe($))};function li($,ye,Ve,ot,mt){var Ot=new uy(ye||this.boundingBox,Ve||this.xStep,ot||this.yStep,this.gState,mt||this.matrix);Ot.stream=this.stream;var nr=$+"$$"+this.cloneIndex+++"$$";return Rt(nr,Ot),Ot}var xh=function($,ye){var Ve=Gn[$.key],ot=hr[Ve];if(ot instanceof mg)pe("q"),pe(Ef(ye)),ot.gState&&A.setGState(ot.gState),pe($.matrix.toString()+" cm"),pe("/"+Ve+" sh"),pe("Q");else if(ot instanceof uy){var mt=new et(1,0,0,-1,0,na());$.matrix&&(mt=mt.multiply($.matrix||Et),Ve=li.call(ot,$.key,$.boundingBox,$.xStep,$.yStep,mt).id),pe("q"),pe("/Pattern cs"),pe("/"+Ve+" scn"),ot.gState&&A.setGState(ot.gState),pe(ye),pe("Q")}},Ef=function($){switch($){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ps=A.moveTo=function($,ye){return pe(Q(se($))+" "+Q(ge(ye))+" m"),this},ea=A.lineTo=function($,ye){return pe(Q(se($))+" "+Q(ge(ye))+" l"),this},va=A.curveTo=function($,ye,Ve,ot,mt,Ot){return pe([Q(se($)),Q(ge(ye)),Q(se(Ve)),Q(ge(ot)),Q(se(mt)),Q(ge(Ot)),"c"].join(" ")),this};A.__private__.line=A.line=function($,ye,Ve,ot,mt){if(isNaN($)||isNaN(ye)||isNaN(Ve)||isNaN(ot)||!wn(mt))throw new Error("Invalid arguments passed to jsPDF.line");return U===B.COMPAT?this.lines([[Ve-$,ot-ye]],$,ye,[1,1],mt||"S"):this.lines([[Ve-$,ot-ye]],$,ye,[1,1]).stroke()},A.__private__.lines=A.lines=function($,ye,Ve,ot,mt,Ot){var nr,wr,Hr,an,ln,cn,Hn,wi,un,Yo,Lr,Co;if(typeof $=="number"&&(Co=Ve,Ve=ye,ye=$,$=Co),ot=ot||[1,1],Ot=Ot||!1,isNaN(ye)||isNaN(Ve)||!Array.isArray($)||!Array.isArray(ot)||!wn(mt)||typeof Ot!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ps(ye,Ve),nr=ot[0],wr=ot[1],an=$.length,Yo=ye,Lr=Ve,Hr=0;Hr<an;Hr++)(ln=$[Hr]).length===2?(Yo=ln[0]*nr+Yo,Lr=ln[1]*wr+Lr,ea(Yo,Lr)):(cn=ln[0]*nr+Yo,Hn=ln[1]*wr+Lr,wi=ln[2]*nr+Yo,un=ln[3]*wr+Lr,Yo=ln[4]*nr+Yo,Lr=ln[5]*wr+Lr,va(cn,Hn,wi,un,Yo,Lr));return Ot&&ai(),Qc(mt),this},A.path=function($){for(var ye=0;ye<$.length;ye++){var Ve=$[ye],ot=Ve.c;switch(Ve.op){case"m":Ps(ot[0],ot[1]);break;case"l":ea(ot[0],ot[1]);break;case"c":va.apply(this,ot);break;case"h":ai()}}return this},A.__private__.rect=A.rect=function($,ye,Ve,ot,mt){if(isNaN($)||isNaN(ye)||isNaN(Ve)||isNaN(ot)||!wn(mt))throw new Error("Invalid arguments passed to jsPDF.rect");return U===B.COMPAT&&(ot=-ot),pe([Q(se($)),Q(ge(ye)),Q(se(Ve)),Q(se(ot)),"re"].join(" ")),Qc(mt),this},A.__private__.triangle=A.triangle=function($,ye,Ve,ot,mt,Ot,nr){if(isNaN($)||isNaN(ye)||isNaN(Ve)||isNaN(ot)||isNaN(mt)||isNaN(Ot)||!wn(nr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ve-$,ot-ye],[mt-Ve,Ot-ot],[$-mt,ye-Ot]],$,ye,[1,1],nr,!0),this},A.__private__.roundedRect=A.roundedRect=function($,ye,Ve,ot,mt,Ot,nr){if(isNaN($)||isNaN(ye)||isNaN(Ve)||isNaN(ot)||isNaN(mt)||isNaN(Ot)||!wn(nr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var wr=4/3*(Math.SQRT2-1);return mt=Math.min(mt,.5*Ve),Ot=Math.min(Ot,.5*ot),this.lines([[Ve-2*mt,0],[mt*wr,0,mt,Ot-Ot*wr,mt,Ot],[0,ot-2*Ot],[0,Ot*wr,-mt*wr,Ot,-mt,Ot],[2*mt-Ve,0],[-mt*wr,0,-mt,-Ot*wr,-mt,-Ot],[0,2*Ot-ot],[0,-Ot*wr,mt*wr,-Ot,mt,-Ot]],$+mt,ye,[1,1],nr,!0),this},A.__private__.ellipse=A.ellipse=function($,ye,Ve,ot,mt){if(isNaN($)||isNaN(ye)||isNaN(Ve)||isNaN(ot)||!wn(mt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ot=4/3*(Math.SQRT2-1)*Ve,nr=4/3*(Math.SQRT2-1)*ot;return Ps($+Ve,ye),va($+Ve,ye-nr,$+Ot,ye-ot,$,ye-ot),va($-Ot,ye-ot,$-Ve,ye-nr,$-Ve,ye),va($-Ve,ye+nr,$-Ot,ye+ot,$,ye+ot),va($+Ot,ye+ot,$+Ve,ye+nr,$+Ve,ye),Qc(mt),this},A.__private__.circle=A.circle=function($,ye,Ve,ot){if(isNaN($)||isNaN(ye)||isNaN(Ve)||!wn(ot))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse($,ye,Ve,Ve,ot)},A.setFont=function($,ye,Ve){return Ve&&(ye=ee(ye,Ve)),_r=j($,ye,{disableWarning:!1}),this};var xc=A.__private__.getFont=A.getFont=function(){return dr[j.apply(A,arguments)]};A.__private__.getFontList=A.getFontList=function(){var $,ye,Ve={};for($ in nn)if(nn.hasOwnProperty($))for(ye in Ve[$]=[],nn[$])nn[$].hasOwnProperty(ye)&&Ve[$].push(ye);return Ve},A.addFont=function($,ye,Ve,ot,mt){var Ot=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ot.indexOf(arguments[3])!==-1?mt=arguments[3]:arguments[3]&&Ot.indexOf(arguments[3])==-1&&(Ve=ee(Ve,ot)),mt=mt||"Identity-H",ao.call(this,$,ye,Ve,mt)};var ba,$l=e.lineWidth||.200025,Go=A.__private__.getLineWidth=A.getLineWidth=function(){return $l},wh=A.__private__.setLineWidth=A.setLineWidth=function($){return $l=$,pe(Q(se($))+" w"),this};A.__private__.setLineDash=bn.API.setLineDash=bn.API.setLineDashPattern=function($,ye){if($=$||[],ye=ye||0,isNaN(ye)||!Array.isArray($))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return $=$.map(function(Ve){return Q(se(Ve))}).join(" "),ye=Q(se(ye)),pe("["+$+"] "+ye+" d"),this};var eu=A.__private__.getLineHeight=A.getLineHeight=function(){return Nt*ba};A.__private__.getLineHeight=A.getLineHeight=function(){return Nt*ba};var Ha=A.__private__.setLineHeightFactor=A.setLineHeightFactor=function($){return typeof($=$||1.15)=="number"&&(ba=$),this},ta=A.__private__.getLineHeightFactor=A.getLineHeightFactor=function(){return ba};Ha(e.lineHeight);var Sn=A.__private__.getHorizontalCoordinate=function($){return se($)},ra=A.__private__.getVerticalCoordinate=function($){return U===B.ADVANCED?$:ae[be].mediaBox.topRightY-ae[be].mediaBox.bottomLeftY-se($)},Tf=A.__private__.getHorizontalCoordinateString=A.getHorizontalCoordinateString=function($){return Q(Sn($))},js=A.__private__.getVerticalCoordinateString=A.getVerticalCoordinateString=function($){return Q(ra($))},Is=e.strokeColor||"0 G";A.__private__.getStrokeColor=A.getDrawColor=function(){return en(Is)},A.__private__.setStrokeColor=A.setDrawColor=function($,ye,Ve,ot){return Is=Zr({ch1:$,ch2:ye,ch3:Ve,ch4:ot,pdfColorType:"draw",precision:2}),pe(Is),this};var Ul=e.fillColor||"0 g";A.__private__.getFillColor=A.getFillColor=function(){return en(Ul)},A.__private__.setFillColor=A.setFillColor=function($,ye,Ve,ot){return Ul=Zr({ch1:$,ch2:ye,ch3:Ve,ch4:ot,pdfColorType:"fill",precision:2}),pe(Ul),this};var jl=e.textColor||"0 g",Vs=A.__private__.getTextColor=A.getTextColor=function(){return en(jl)};A.__private__.setTextColor=A.setTextColor=function($,ye,Ve,ot){return jl=Zr({ch1:$,ch2:ye,ch3:Ve,ch4:ot,pdfColorType:"text",precision:3}),this};var _l=e.charSpace,Fu=A.__private__.getCharSpace=A.getCharSpace=function(){return parseFloat(_l||0)};A.__private__.setCharSpace=A.setCharSpace=function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return _l=$,this};var tu=0;A.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},A.__private__.setLineCap=A.setLineCap=function($){var ye=A.CapJoinStyles[$];if(ye===void 0)throw new Error("Line cap style of '"+$+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return tu=ye,pe(ye+" J"),this};var wc=0;A.__private__.setLineJoin=A.setLineJoin=function($){var ye=A.CapJoinStyles[$];if(ye===void 0)throw new Error("Line join style of '"+$+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return wc=ye,pe(ye+" j"),this},A.__private__.setLineMiterLimit=A.__private__.setMiterLimit=A.setLineMiterLimit=A.setMiterLimit=function($){if($=$||0,isNaN($))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return pe(Q(se($))+" M"),this},A.GState=g5,A.setGState=function($){($=typeof $=="string"?Nn[gi[$]]:Vl(null,$)).equals(Yr)||(pe("/"+$.id+" gs"),Yr=$)};var Vl=function($,ye){if(!$||!gi[$]){var Ve=!1;for(var ot in Nn)if(Nn.hasOwnProperty(ot)&&Nn[ot].equals(ye)){Ve=!0;break}if(Ve)ye=Nn[ot];else{var mt="GS"+(Object.keys(Nn).length+1).toString(10);Nn[mt]=ye,ye.id=mt}return $&&(gi[$]=ye.id),ue.publish("addGState",ye),ye}};A.addGState=function($,ye){return Vl($,ye),this},A.saveGraphicsState=function(){return pe("q"),Kn.push({key:_r,size:Nt,color:jl}),this},A.restoreGraphicsState=function(){pe("Q");var $=Kn.pop();return _r=$.key,Nt=$.size,jl=$.color,Yr=null,this},A.setCurrentTransformationMatrix=function($){return pe($.toString()+" cm"),this},A.comment=function($){return pe("#"+$),this};var Hs=function($,ye){var Ve=$||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ve},set:function(Ot){isNaN(Ot)||(Ve=parseFloat(Ot))}});var ot=ye||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ot},set:function(Ot){isNaN(Ot)||(ot=parseFloat(Ot))}});var mt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return mt},set:function(Ot){mt=Ot.toString()}}),this},Sc=function($,ye,Ve,ot){Hs.call(this,$,ye),this.type="rect";var mt=Ve||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return mt},set:function(nr){isNaN(nr)||(mt=parseFloat(nr))}});var Ot=ot||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ot},set:function(nr){isNaN(nr)||(Ot=parseFloat(nr))}}),this},Bu=function(){this.page=Ne,this.currentPage=be,this.pages=wt.slice(0),this.pagesContext=ae.slice(0),this.x=fn,this.y=Dt,this.matrix=Br,this.width=qa(be),this.height=na(be),this.outputDestination=At,this.id="",this.objectNumber=-1};Bu.prototype.restore=function(){Ne=this.page,be=this.currentPage,ae=this.pagesContext,wt=this.pages,fn=this.x,Dt=this.y,Br=this.matrix,Ac(be,this.width),ql(be,this.height),At=this.outputDestination};var xa=function($,ye,Ve,ot,mt){it.push(new Bu),Ne=be=0,wt=[],fn=$,Dt=ye,Br=mt,Cs([Ve,ot])},Hl=function($){if(rt[$])it.pop().restore();else{var ye=new Bu,Ve="Xo"+(Object.keys(Fe).length+1).toString(10);ye.id=Ve,rt[$]=Ve,Fe[Ve]=ye,ue.publish("addFormObject",ye),it.pop().restore()}};for(var ru in A.beginFormObject=function($,ye,Ve,ot,mt){return xa($,ye,Ve,ot,mt),this},A.endFormObject=function($){return Hl($),this},A.doFormObject=function($,ye){var Ve=Fe[rt[$]];return pe("q"),pe(ye.toString()+" cm"),pe("/"+Ve.id+" Do"),pe("Q"),this},A.getFormObject=function($){var ye=Fe[rt[$]];return{x:ye.x,y:ye.y,width:ye.width,height:ye.height,matrix:ye.matrix}},A.save=function($,ye){return $=$||"generated.pdf",(ye=ye||{}).returnPromise=ye.returnPromise||!1,ye.returnPromise===!1?(fg(Qt(Mt()),$),typeof fg.unload=="function"&&_n.setTimeout&&setTimeout(fg.unload,911),this):new Promise(function(Ve,ot){try{var mt=fg(Qt(Mt()),$);typeof fg.unload=="function"&&_n.setTimeout&&setTimeout(fg.unload,911),Ve(mt)}catch(Ot){ot(Ot.message)}})},bn.API)bn.API.hasOwnProperty(ru)&&(ru==="events"&&bn.API.events.length?function($,ye){var Ve,ot,mt;for(mt=ye.length-1;mt!==-1;mt--)Ve=ye[mt][0],ot=ye[mt][1],$.subscribe.apply($,[Ve].concat(typeof ot=="function"?[ot]:ot))}(ue,bn.API.events):A[ru]=bn.API[ru]);var qa=A.getPageWidth=function($){return(ae[$=$||be].mediaBox.topRightX-ae[$].mediaBox.bottomLeftX)/Kt},Ac=A.setPageWidth=function($,ye){ae[$].mediaBox.topRightX=ye*Kt+ae[$].mediaBox.bottomLeftX},na=A.getPageHeight=function($){return(ae[$=$||be].mediaBox.topRightY-ae[$].mediaBox.bottomLeftY)/Kt},ql=A.setPageHeight=function($,ye){ae[$].mediaBox.topRightY=ye*Kt+ae[$].mediaBox.bottomLeftY};return A.internal={pdfEscape:mo,getStyle:Hi,getFont:xc,getFontSize:rr,getCharSpace:Fu,getTextColor:Vs,getLineHeight:eu,getLineHeightFactor:ta,getLineWidth:Go,write:ur,getHorizontalCoordinate:Sn,getVerticalCoordinate:ra,getCoordinateString:Tf,getVerticalCoordinateString:js,collections:{},newObject:gt,newAdditionalObject:Ar,newObjectDeferred:Wt,newObjectDeferredBegin:mr,getFilters:jn,putStream:Jr,events:ue,scaleFactor:Kt,pageSize:{getWidth:function(){return qa(be)},setWidth:function($){Ac(be,$)},getHeight:function(){return na(be)},setHeight:function($){ql(be,$)}},encryptionOptions:v,encryption:yr,getEncryptor:ti,output:er,getNumberOfPages:X,pages:wt,out:pe,f2:J,f3:G,getPageInfo:zr,getPageInfoByObjId:br,getCurrentPageInfo:$t,getPDFVersion:R,Point:Hs,Rectangle:Sc,Matrix:et,hasHotfix:Jt},Object.defineProperty(A.internal.pageSize,"width",{get:function(){return qa(be)},set:function($){Ac(be,$)},enumerable:!0,configurable:!0}),Object.defineProperty(A.internal.pageSize,"height",{get:function(){return na(be)},set:function($){ql(be,$)},enumerable:!0,configurable:!0}),_a.call(A,Tt),_r="F1",hs(i,r),ue.publish("initialized"),A}M0.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},M0.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},M0.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},M0.prototype.processOwnerPassword=function(e,t){return v4(_4(t).substr(0,5),e)},M0.prototype.encryptor=function(e,t){var r=_4(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return v4(r,n)}},g5.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||$i(e)!==$i(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},bn.API={events:[]},bn.version="2.5.1";var ls=bn.API,MR=1,gm=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},h0=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},On=function(e){return e.toFixed(2)},$d=function(e){return e.toFixed(5)};ls.__acroform__={};var mc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},DN=function(e){return e*MR},Kh=function(e){var t=new KU,r=Vr.internal.getHeight(e)||0,n=Vr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(On(n)),Number(On(r))],t},aae=ls.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},lae=ls.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},cae=ls.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},_s=ls.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return cae(e,t-1)},vs=ls.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return aae(e,t-1)},bs=ls.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return lae(e,t-1)},uae=ls.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,i=e[0],o=e[1],l=e[2],s=e[3],f={};return f.lowerLeft_X=r(i)||0,f.lowerLeft_Y=n(o+s)||0,f.upperRight_X=r(i+l)||0,f.upperRight_Y=n(o)||0,[Number(On(f.lowerLeft_X)),Number(On(f.lowerLeft_Y)),Number(On(f.upperRight_X)),Number(On(f.upperRight_Y))]},hae=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=b4(e,r),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+On(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=Kh(e);return o.scope=e.scope,o.stream=t.join(`
`),o}},b4=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(G){return G.split(`
`)}):i.map(function(G){return[G]});var o=r,l=Vr.internal.getHeight(e)||0;l=l<0?-l:l;var s=Vr.internal.getWidth(e)||0;s=s<0?-s:s;var f=function(G,se,ve){if(G+1<i.length){var ge=se+" "+i[G+1][0];return xx(ge,e,ve).width<=s-4}return!1};o++;e:for(;o>0;){t="",o--;var p,v,x=xx("3",e,o).height,S=e.multiline?l-o:(l-x)/2,A=S+=2,k=0,R=0,z=0;if(o<=0){t=`(...) Tj
`,t+="% Width of Text: "+xx(t,e,o=12).width+", FieldWidth:"+s+`
`;break}for(var N="",B=0,U=0;U<i.length;U++)if(i.hasOwnProperty(U)){var K=!1;if(i[U].length!==1&&z!==i[U].length-1){if((x+2)*(B+2)+2>l)continue e;N+=i[U][z],K=!0,R=U,U--}else{N=(N+=i[U][z]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var ne=parseInt(U),ee=f(ne,N,o),Q=U>=i.length-1;if(ee&&!Q){N+=" ",z=0;continue}if(ee||Q){if(Q)R=ne;else if(e.multiline&&(x+2)*(B+2)+2>l)continue e}else{if(!e.multiline||(x+2)*(B+2)+2>l)continue e;R=ne}}for(var re="",Se=k;Se<=R;Se++){var J=i[Se];if(e.multiline){if(Se===R){re+=J[z]+" ",z=(z+1)%J.length;continue}if(Se===k){re+=J[J.length-1]+" ";continue}}re+=J[0]+" "}switch(re=re.substr(re.length-1)==" "?re.substr(0,re.length-1):re,v=xx(re,e,o).width,e.textAlign){case"right":p=s-v-2;break;case"center":p=(s-v)/2;break;case"left":default:p=2}t+=On(p)+" "+On(A)+` Td
`,t+="("+gm(re)+`) Tj
`,t+=-On(p)+` 0 Td
`,A=-(o+2),v=0,k=K?R:R+1,B++,N=""}break}return n.text=t,n.fontSize=o,n},xx=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},fae={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},dae=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},pae=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,i=e[r];t.internal.newObjectDeferredBegin(i.objId,!0),$i(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[n]}},gae=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(gh.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(fae)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");MR=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new GU,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];o.objId=void 0,o.hasAnnotation&&dae(o,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,i){var o=!n;for(var l in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(l)){var s=n[l],f=[],p=s.Rect;if(s.Rect&&(s.Rect=uae(s.Rect,i)),i.internal.newObjectDeferredBegin(s.objId,!0),s.DA=Vr.createDefaultAppearanceStream(s),$i(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(f=s.getKeyValueListForStream()),s.Rect=p,s.hasAppearanceStream&&!s.appearanceStreamContent){var v=hae(s);f.push({key:"AP",value:"<</N "+v+">>"}),i.internal.acroformPlugin.xForms.push(v)}if(s.appearanceStreamContent){var x="";for(var S in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(S)){var A=s.appearanceStreamContent[S];if(x+="/"+S+" ",x+="<<",Object.keys(A).length>=1||Array.isArray(A)){for(var l in A)if(A.hasOwnProperty(l)){var k=A[l];typeof k=="function"&&(k=k.call(i,s)),x+="/"+l+" "+k+" ",i.internal.acroformPlugin.xForms.indexOf(k)>=0||i.internal.acroformPlugin.xForms.push(k)}}else typeof(k=A)=="function"&&(k=k.call(i,s)),x+="/"+l+" "+k,i.internal.acroformPlugin.xForms.indexOf(k)>=0||i.internal.acroformPlugin.xForms.push(k);x+=">>"}f.push({key:"AP",value:`<<
`+x+">>"})}i.internal.putStream({additionalKeyValues:f,objectId:s.objId}),i.internal.out("endobj")}o&&pae(i.internal.acroformPlugin.xForms,i)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},XU=ls.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(l){return l};if(Array.isArray(e)){for(var i="[",o=0;o<e.length;o++)switch(o!==0&&(i+=" "),$i(e[o])){case"boolean":case"number":case"object":i+=e[o].toString();break;case"string":e[o].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),i+="("+gm(n(e[o].toString()))+")"):i+=e[o].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},nT=function(e,t,r){var n=function(i){return i};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+gm(n(e))+")"},lf=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};lf.prototype.toString=function(){return this.objId+" 0 R"},lf.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},lf.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],i=this[n];i&&(Array.isArray(i)?e.push({key:n,value:XU(i,this.objId,this.scope)}):i instanceof lf?(i.scope=this.scope,e.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:n,value:i}))}return e};var KU=function(){lf.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};mc(KU,lf);var GU=function(){lf.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+gm(r(e))+")"}},set:function(r){e=r}})};mc(GU,lf);var gh=function e(){lf.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');t=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!_s(t,3)},set:function(N){N?this.F=vs(t,3):this.F=bs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');r=N}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(N){n=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(N){n[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(N){n[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(N){n[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(N){n[3]=N}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof m5)return;o="FieldObject"+e.FieldNum++}var N=function(B){return B};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+gm(N(o))+")"},set:function(N){o=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(N){o=N}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(N){l=N}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(N){s=N}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(N){f=N}});var p=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return p===void 0?50/MR:p},set:function(N){p=N}});var v="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return v},set:function(N){v=N}});var x="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!x||this instanceof m5||this instanceof zg))return nT(x,this.objId,this.scope)},set:function(N){N=N.toString(),x=N}});var S=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(S)return this instanceof fa?S:nT(S,this.objId,this.scope)},set:function(N){N=N.toString(),S=this instanceof fa?N:N.substr(0,1)==="("?h0(N.substr(1,N.length-2)):h0(N)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof fa?h0(S.substr(1,S.length-1)):S},set:function(N){N=N.toString(),S=this instanceof fa?"/"+N:N}});var A=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(A)return A},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof fa?A:nT(A,this.objId,this.scope)},set:function(N){N=N.toString(),A=this instanceof fa?N:N.substr(0,1)==="("?h0(N.substr(1,N.length-2)):h0(N)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof fa?h0(A.substr(1,A.length-1)):A},set:function(N){N=N.toString(),A=this instanceof fa?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var k,R=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return R},set:function(N){N=!!N,R=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(k)return k},set:function(N){k=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,1)},set:function(N){N?this.Ff=vs(this.Ff,1):this.Ff=bs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,2)},set:function(N){N?this.Ff=vs(this.Ff,2):this.Ff=bs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,3)},set:function(N){N?this.Ff=vs(this.Ff,3):this.Ff=bs(this.Ff,3)}});var z=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(z!==null)return z},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');z=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(z){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:z=2;break;case"center":case 1:z=1;break;case"left":case 0:default:z=0}}})};mc(gh,lf);var My=function(){gh.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return XU(t,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=function(o,l,s){s||(s=1);for(var f,p=[];f=l.exec(o);)p.push(f[s]);return p}(n,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,18)},set:function(r){r?this.Ff=vs(this.Ff,18):this.Ff=bs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=vs(this.Ff,19):this.Ff=bs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,20)},set:function(r){r?(this.Ff=vs(this.Ff,20),t.sort()):this.Ff=bs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,22)},set:function(r){r?this.Ff=vs(this.Ff,22):this.Ff=bs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,23)},set:function(r){r?this.Ff=vs(this.Ff,23):this.Ff=bs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,27)},set:function(r){r?this.Ff=vs(this.Ff,27):this.Ff=bs(this.Ff,27)}}),this.hasAppearanceStream=!1};mc(My,gh);var Oy=function(){My.call(this),this.fontName="helvetica",this.combo=!1};mc(Oy,My);var Ny=function(){Oy.call(this),this.combo=!0};mc(Ny,Oy);var xw=function(){Ny.call(this),this.edit=!0};mc(xw,Ny);var fa=function(){gh.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,15)},set:function(r){r?this.Ff=vs(this.Ff,15):this.Ff=bs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,16)},set:function(r){r?this.Ff=vs(this.Ff,16):this.Ff=bs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,17)},set:function(r){r?this.Ff=vs(this.Ff,17):this.Ff=bs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,26)},set:function(r){r?this.Ff=vs(this.Ff,26):this.Ff=bs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,i=[];for(n in i.push("<<"),t)i.push("/"+n+" ("+gm(r(t[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){$i(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};mc(fa,gh);var ww=function(){fa.call(this),this.pushButton=!0};mc(ww,fa);var Dy=function(){fa.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};mc(Dy,fa);var m5=function(){var e,t;gh.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(s){return s};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,l=[];for(o in l.push("<<"),n)l.push("/"+o+" ("+gm(i(n[o]))+")");return l.push(">>"),l.join(`
`)},set:function(i){$i(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Vr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};mc(m5,gh),Dy.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Dy.prototype.createOption=function(e){var t=new m5;return t.Parent=this,t.optionName=e,this.Kids.push(t),mae.call(this.scope,t),t};var Sw=function(){fa.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Vr.CheckBox.createAppearanceStream()};mc(Sw,fa);var zg=function(){gh.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,13)},set:function(t){t?this.Ff=vs(this.Ff,13):this.Ff=bs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,21)},set:function(t){t?this.Ff=vs(this.Ff,21):this.Ff=bs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,23)},set:function(t){t?this.Ff=vs(this.Ff,23):this.Ff=bs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,24)},set:function(t){t?this.Ff=vs(this.Ff,24):this.Ff=bs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,25)},set:function(t){t?this.Ff=vs(this.Ff,25):this.Ff=bs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,26)},set:function(t){t?this.Ff=vs(this.Ff,26):this.Ff=bs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};mc(zg,gh);var Aw=function(){zg.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,14)},set:function(e){e?this.Ff=vs(this.Ff,14):this.Ff=bs(this.Ff,14)}}),this.password=!0};mc(Aw,zg);var Vr={CheckBox:{createAppearanceStream:function(){return{N:{On:Vr.CheckBox.YesNormal},D:{On:Vr.CheckBox.YesPushDown,Off:Vr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Kh(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),o=b4(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+On(Vr.internal.getWidth(e))+" "+On(Vr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+On(o.fontSize)+" Tf "+i),r.push("BT"),r.push(o.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Kh(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),i=[],o=Vr.internal.getHeight(e),l=Vr.internal.getWidth(e),s=b4(e,e.caption);return i.push("1 g"),i.push("0 0 "+On(l)+" "+On(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+On(l-1)+" "+On(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+On(s.fontSize)+" Tf "+n),i.push(s.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=Kh(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+On(Vr.internal.getWidth(e))+" "+On(Vr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Vr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Vr.RadioButton.Circle.YesNormal,t.D[e]=Vr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Kh(e);t.scope=e.scope;var r=[],n=Vr.internal.getWidth(e)<=Vr.internal.getHeight(e)?Vr.internal.getWidth(e)/4:Vr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Vr.internal.Bezier_C,o=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+$d(Vr.internal.getWidth(e)/2)+" "+$d(Vr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Kh(e);t.scope=e.scope;var r=[],n=Vr.internal.getWidth(e)<=Vr.internal.getHeight(e)?Vr.internal.getWidth(e)/4:Vr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*Vr.internal.Bezier_C).toFixed(5)),l=Number((n*Vr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+$d(Vr.internal.getWidth(e)/2)+" "+$d(Vr.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),r.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),r.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),r.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+$d(Vr.internal.getWidth(e)/2)+" "+$d(Vr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+l+" "+l+" "+n+" 0 "+n+" c"),r.push("-"+l+" "+n+" -"+n+" "+l+" -"+n+" 0 c"),r.push("-"+n+" -"+l+" -"+l+" -"+n+" 0 -"+n+" c"),r.push(l+" -"+n+" "+n+" -"+l+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Kh(e);t.scope=e.scope;var r=[],n=Vr.internal.getWidth(e)<=Vr.internal.getHeight(e)?Vr.internal.getWidth(e)/4:Vr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*Vr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+$d(Vr.internal.getWidth(e)/2)+" "+$d(Vr.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),r.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),r.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),r.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Vr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Vr.RadioButton.Cross.YesNormal,t.D[e]=Vr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Kh(e);t.scope=e.scope;var r=[],n=Vr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+On(Vr.internal.getWidth(e)-2)+" "+On(Vr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(On(n.x1.x)+" "+On(n.x1.y)+" m"),r.push(On(n.x2.x)+" "+On(n.x2.y)+" l"),r.push(On(n.x4.x)+" "+On(n.x4.y)+" m"),r.push(On(n.x3.x)+" "+On(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Kh(e);t.scope=e.scope;var r=Vr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+On(Vr.internal.getWidth(e))+" "+On(Vr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+On(Vr.internal.getWidth(e)-2)+" "+On(Vr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(On(r.x1.x)+" "+On(r.x1.y)+" m"),n.push(On(r.x2.x)+" "+On(r.x2.y)+" l"),n.push(On(r.x4.x)+" "+On(r.x4.y)+" m"),n.push(On(r.x3.x)+" "+On(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Kh(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+On(Vr.internal.getWidth(e))+" "+On(Vr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Vr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Vr.internal.getWidth(e),r=Vr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Vr.internal.getWidth=function(e){var t=0;return $i(e)==="object"&&(t=DN(e.Rect[2])),t},Vr.internal.getHeight=function(e){var t=0;return $i(e)==="object"&&(t=DN(e.Rect[3])),t};var mae=ls.addField=function(e){if(gae(this,e),!(e instanceof gh))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};ls.AcroFormChoiceField=My,ls.AcroFormListBox=Oy,ls.AcroFormComboBox=Ny,ls.AcroFormEditBox=xw,ls.AcroFormButton=fa,ls.AcroFormPushButton=ww,ls.AcroFormRadioButton=Dy,ls.AcroFormCheckBox=Sw,ls.AcroFormTextField=zg,ls.AcroFormPasswordField=Aw,ls.AcroFormAppearance=Vr,ls.AcroForm={ChoiceField:My,ListBox:Oy,ComboBox:Ny,EditBox:xw,Button:fa,PushButton:ww,RadioButton:Dy,CheckBox:Sw,TextField:zg,PasswordField:Aw,Appearance:Vr},bn.AcroForm={ChoiceField:My,ListBox:Oy,ComboBox:Ny,EditBox:xw,Button:fa,PushButton:ww,RadioButton:Dy,CheckBox:Sw,TextField:zg,PasswordField:Aw,Appearance:Vr};function YU(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(G,se){var ve,ge,je,$e,Ze,Me=t;if((se=se||t)==="RGBA"||G.data!==void 0&&G.data instanceof Uint8ClampedArray&&"height"in G&&"width"in G)return"RGBA";if(ee(G))for(Ze in r)for(je=r[Ze],ve=0;ve<je.length;ve+=1){for($e=!0,ge=0;ge<je[ve].length;ge+=1)if(je[ve][ge]!==void 0&&je[ve][ge]!==G[ge]){$e=!1;break}if($e===!0){Me=Ze;break}}else for(Ze in r)for(je=r[Ze],ve=0;ve<je.length;ve+=1){for($e=!0,ge=0;ge<je[ve].length;ge+=1)if(je[ve][ge]!==void 0&&je[ve][ge]!==G.charCodeAt(ge)){$e=!1;break}if($e===!0){Me=Ze;break}}return Me===t&&se!==t&&(Me=se),Me},i=function G(se){for(var ve=this.internal.write,ge=this.internal.putStream,je=(0,this.internal.getFilters)();je.indexOf("FlateEncode")!==-1;)je.splice(je.indexOf("FlateEncode"),1);se.objectId=this.internal.newObject();var $e=[];if($e.push({key:"Type",value:"/XObject"}),$e.push({key:"Subtype",value:"/Image"}),$e.push({key:"Width",value:se.width}),$e.push({key:"Height",value:se.height}),se.colorSpace===z.INDEXED?$e.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(se.palette.length/3-1)+" "+("sMask"in se&&se.sMask!==void 0?se.objectId+2:se.objectId+1)+" 0 R]"}):($e.push({key:"ColorSpace",value:"/"+se.colorSpace}),se.colorSpace===z.DEVICE_CMYK&&$e.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),$e.push({key:"BitsPerComponent",value:se.bitsPerComponent}),"decodeParameters"in se&&se.decodeParameters!==void 0&&$e.push({key:"DecodeParms",value:"<<"+se.decodeParameters+">>"}),"transparency"in se&&Array.isArray(se.transparency)){for(var Ze="",Me=0,Ue=se.transparency.length;Me<Ue;Me++)Ze+=se.transparency[Me]+" "+se.transparency[Me]+" ";$e.push({key:"Mask",value:"["+Ze+"]"})}se.sMask!==void 0&&$e.push({key:"SMask",value:se.objectId+1+" 0 R"});var Qe=se.filter!==void 0?["/"+se.filter]:void 0;if(ge({data:se.data,additionalKeyValues:$e,alreadyAppliedFilters:Qe,objectId:se.objectId}),ve("endobj"),"sMask"in se&&se.sMask!==void 0){var ct="/Predictor "+se.predictor+" /Colors 1 /BitsPerComponent "+se.bitsPerComponent+" /Columns "+se.width,ce={width:se.width,height:se.height,colorSpace:"DeviceGray",bitsPerComponent:se.bitsPerComponent,decodeParameters:ct,data:se.sMask};"filter"in se&&(ce.filter=se.filter),G.call(this,ce)}if(se.colorSpace===z.INDEXED){var be=this.internal.newObject();ge({data:re(new Uint8Array(se.palette)),objectId:be}),ve("endobj")}},o=function(){var G=this.internal.collections.addImage_images;for(var se in G)i.call(this,G[se])},l=function(){var G,se=this.internal.collections.addImage_images,ve=this.internal.write;for(var ge in se)ve("/I"+(G=se[ge]).index,G.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},f=function(){var G=this.internal.collections.addImage_images;return s.call(this),G},p=function(){return Object.keys(this.internal.collections.addImage_images).length},v=function(G){return typeof e["process"+G.toUpperCase()]=="function"},x=function(G){return $i(G)==="object"&&G.nodeType===1},S=function(G,se){if(G.nodeName==="IMG"&&G.hasAttribute("src")){var ve=""+G.getAttribute("src");if(ve.indexOf("data:image/")===0)return kv(unescape(ve).split("base64,").pop());var ge=e.loadFile(ve,!0);if(ge!==void 0)return ge}if(G.nodeName==="CANVAS"){if(G.width===0||G.height===0)throw new Error("Given canvas must have data. Canvas width: "+G.width+", height: "+G.height);var je;switch(se){case"PNG":je="image/png";break;case"WEBP":je="image/webp";break;case"JPEG":case"JPG":default:je="image/jpeg"}return kv(G.toDataURL(je,1).split("base64,").pop())}},A=function(G){var se=this.internal.collections.addImage_images;if(se){for(var ve in se)if(G===se[ve].alias)return se[ve]}},k=function(G,se,ve){return G||se||(G=-96,se=-96),G<0&&(G=-1*ve.width*72/G/this.internal.scaleFactor),se<0&&(se=-1*ve.height*72/se/this.internal.scaleFactor),G===0&&(G=se*ve.width/ve.height),se===0&&(se=G*ve.height/ve.width),[G,se]},R=function(G,se,ve,ge,je,$e){var Ze=k.call(this,ve,ge,je),Me=this.internal.getCoordinateString,Ue=this.internal.getVerticalCoordinateString,Qe=f.call(this);if(ve=Ze[0],ge=Ze[1],Qe[je.index]=je,$e){$e*=Math.PI/180;var ct=Math.cos($e),ce=Math.sin($e),be=function(Be){return Be.toFixed(4)},Oe=[be(ct),be(ce),be(-1*ce),be(ct),0,0,"cm"]}this.internal.write("q"),$e?(this.internal.write([1,"0","0",1,Me(G),Ue(se+ge),"cm"].join(" ")),this.internal.write(Oe.join(" ")),this.internal.write([Me(ve),"0","0",Me(ge),"0","0","cm"].join(" "))):this.internal.write([Me(ve),"0","0",Me(ge),Me(G),Ue(se+ge),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+je.index+" Do"),this.internal.write("Q")},z=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var N=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},B=e.__addimage__.sHashCode=function(G){var se,ve,ge=0;if(typeof G=="string")for(ve=G.length,se=0;se<ve;se++)ge=(ge<<5)-ge+G.charCodeAt(se),ge|=0;else if(ee(G))for(ve=G.byteLength/2,se=0;se<ve;se++)ge=(ge<<5)-ge+G[se],ge|=0;return ge},U=e.__addimage__.validateStringAsBase64=function(G){(G=G||"").toString().trim();var se=!0;return G.length===0&&(se=!1),G.length%4!=0&&(se=!1),/^[A-Za-z0-9+/]+$/.test(G.substr(0,G.length-2))===!1&&(se=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(G.substr(-2))===!1&&(se=!1),se},K=e.__addimage__.extractImageFromDataUrl=function(G){var se=(G=G||"").split("base64,"),ve=null;if(se.length===2){var ge=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(se[0]);Array.isArray(ge)&&(ve={mimeType:ge[1],charset:ge[2],data:se[1]})}return ve},ne=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(G){return ne()&&G instanceof ArrayBuffer};var ee=e.__addimage__.isArrayBufferView=function(G){return ne()&&typeof Uint32Array<"u"&&(G instanceof Int8Array||G instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&G instanceof Uint8ClampedArray||G instanceof Int16Array||G instanceof Uint16Array||G instanceof Int32Array||G instanceof Uint32Array||G instanceof Float32Array||G instanceof Float64Array)},Q=e.__addimage__.binaryStringToUint8Array=function(G){for(var se=G.length,ve=new Uint8Array(se),ge=0;ge<se;ge++)ve[ge]=G.charCodeAt(ge);return ve},re=e.__addimage__.arrayBufferToBinaryString=function(G){for(var se="",ve=ee(G)?G:new Uint8Array(G),ge=0;ge<ve.length;ge+=8192)se+=String.fromCharCode.apply(null,ve.subarray(ge,ge+8192));return se};e.addImage=function(){var G,se,ve,ge,je,$e,Ze,Me,Ue;if(typeof arguments[1]=="number"?(se=t,ve=arguments[1],ge=arguments[2],je=arguments[3],$e=arguments[4],Ze=arguments[5],Me=arguments[6],Ue=arguments[7]):(se=arguments[1],ve=arguments[2],ge=arguments[3],je=arguments[4],$e=arguments[5],Ze=arguments[6],Me=arguments[7],Ue=arguments[8]),$i(G=arguments[0])==="object"&&!x(G)&&"imageData"in G){var Qe=G;G=Qe.imageData,se=Qe.format||se||t,ve=Qe.x||ve||0,ge=Qe.y||ge||0,je=Qe.w||Qe.width||je,$e=Qe.h||Qe.height||$e,Ze=Qe.alias||Ze,Me=Qe.compression||Me,Ue=Qe.rotation||Qe.angle||Ue}var ct=this.internal.getFilters();if(Me===void 0&&ct.indexOf("FlateEncode")!==-1&&(Me="SLOW"),isNaN(ve)||isNaN(ge))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var ce=Se.call(this,G,se,Ze,Me);return R.call(this,ve,ge,je,$e,ce,Ue),this};var Se=function(G,se,ve,ge){var je,$e,Ze;if(typeof G=="string"&&n(G)===t){G=unescape(G);var Me=J(G,!1);(Me!==""||(Me=e.loadFile(G,!0))!==void 0)&&(G=Me)}if(x(G)&&(G=S(G,se)),se=n(G,se),!v(se))throw new Error("addImage does not support files of type '"+se+"', please ensure that a plugin for '"+se+"' support is added.");if(((Ze=ve)==null||Ze.length===0)&&(ve=function(Ue){return typeof Ue=="string"||ee(Ue)?B(Ue):ee(Ue.data)?B(Ue.data):null}(G)),(je=A.call(this,ve))||(ne()&&(G instanceof Uint8Array||se==="RGBA"||($e=G,G=Q(G))),je=this["process"+se.toUpperCase()](G,p.call(this),ve,function(Ue){return Ue&&typeof Ue=="string"&&(Ue=Ue.toUpperCase()),Ue in e.image_compression?Ue:N.NONE}(ge),$e)),!je)throw new Error("An unknown error occurred whilst processing the image.");return je},J=e.__addimage__.convertBase64ToBinaryString=function(G,se){var ve;se=typeof se!="boolean"||se;var ge,je="";if(typeof G=="string"){ge=(ve=K(G))!==null?ve.data:G;try{je=kv(ge)}catch($e){if(se)throw U(ge)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+$e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return je};e.getImageProperties=function(G){var se,ve,ge="";if(x(G)&&(G=S(G)),typeof G=="string"&&n(G)===t&&((ge=J(G,!1))===""&&(ge=e.loadFile(G)||""),G=ge),ve=n(G),!v(ve))throw new Error("addImage does not support files of type '"+ve+"', please ensure that a plugin for '"+ve+"' support is added.");if(!ne()||G instanceof Uint8Array||(G=Q(G)),!(se=this["process"+ve.toUpperCase()](G)))throw new Error("An unknown error occurred whilst processing the image");return se.fileType=ve,se}})(bn.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};bn.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,i,o,l=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(r.objId),p=r.pageContext.annotations,v=!1,x=0;x<p.length&&!v;x++)switch((n=p[x]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(v=!0);break;case"reference":case"text":case"freetext":v=!0}if(v!=0){this.internal.write("/Annots [");for(var S=0;S<p.length;S++){n=p[S];var A=this.internal.pdfEscape,k=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var R=this.internal.newAdditionalObject(),z=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(R.objId),B=n.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+l(n.bounds.x)+" "+s(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y)+"] ")+"/Contents ("+A(N(n.contents))+")",o+=" /Popup "+z.objId+" 0 R",o+=" /P "+f.objId+" 0 R",o+=" /T ("+A(N(B))+") >>",R.content=o;var U=R.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+l(n.bounds.x+30)+" "+s(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w+30)+" "+s(n.bounds.y)+"] ")+" /Parent "+U,n.open&&(o+=" /Open true"),o+=" >>",z.content=o,this.internal.write(R.objId,"0 R",z.objId,"0 R");break;case"freetext":i="/Rect ["+l(n.bounds.x)+" "+s(n.bounds.y)+" "+l(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y+n.bounds.h)+"] ";var K=n.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+A(k(n.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+K+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(n.options.name){var ne=this.annotations._nameMap[n.options.name];n.options.pageNumber=ne.page,n.options.top=ne.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",o="",n.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+A(k(n.options.url))+") >>";else if(n.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,o+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var ee=s(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),o+=" /XYZ "+n.options.left+" "+ee+" "+n.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,i,o,l){var s=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:f(r),y:p(n),w:f(r+i),h:p(n+o)},options:l,type:"link"})},e.textWithLink=function(r,n,i,o){var l,s,f=this.getTextWidth(r),p=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){s=o.maxWidth;var v=this.splitTextToSize(r,s).length;l=Math.ceil(p*v)}else s=f,l=p;return this.text(r,n,i,o),i+=.2*p,o.align==="center"&&(n-=f/2),o.align==="right"&&(n-=f),this.link(n,i-p,s,l,o),f},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(bn.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(R){return t[R.charCodeAt(0)]!==void 0},l=e.__arabicParser__.isArabicLetter=function(R){return typeof R=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(R)},s=e.__arabicParser__.isArabicEndLetter=function(R){return l(R)&&o(R)&&t[R.charCodeAt(0)].length<=2},f=e.__arabicParser__.isArabicAlfLetter=function(R){return l(R)&&i.indexOf(R.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(R){return l(R)&&o(R)&&t[R.charCodeAt(0)].length>=1};var p=e.__arabicParser__.arabicLetterHasFinalForm=function(R){return l(R)&&o(R)&&t[R.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(R){return l(R)&&o(R)&&t[R.charCodeAt(0)].length>=3};var v=e.__arabicParser__.arabicLetterHasMedialForm=function(R){return l(R)&&o(R)&&t[R.charCodeAt(0)].length==4},x=e.__arabicParser__.resolveLigatures=function(R){var z=0,N=r,B="",U=0;for(z=0;z<R.length;z+=1)N[R.charCodeAt(z)]!==void 0?(U++,typeof(N=N[R.charCodeAt(z)])=="number"&&(B+=String.fromCharCode(N),N=r,U=0),z===R.length-1&&(N=r,B+=R.charAt(z-(U-1)),z-=U-1,U=0)):(N=r,B+=R.charAt(z-U),z-=U,U=0);return B};e.__arabicParser__.isArabicDiacritic=function(R){return R!==void 0&&n[R.charCodeAt(0)]!==void 0};var S=e.__arabicParser__.getCorrectForm=function(R,z,N){return l(R)?o(R)===!1?-1:!p(R)||!l(z)&&!l(N)||!l(N)&&s(z)||s(R)&&!l(z)||s(R)&&f(z)||s(R)&&s(z)?0:v(R)&&l(z)&&!s(z)&&l(N)&&p(N)?3:s(R)||!l(N)?1:2:-1},A=function(R){var z=0,N=0,B=0,U="",K="",ne="",ee=(R=R||"").split("\\s+"),Q=[];for(z=0;z<ee.length;z+=1){for(Q.push(""),N=0;N<ee[z].length;N+=1)U=ee[z][N],K=ee[z][N-1],ne=ee[z][N+1],l(U)?(B=S(U,K,ne),Q[z]+=B!==-1?String.fromCharCode(t[U.charCodeAt(0)][B]):U):Q[z]+=U;Q[z]=x(Q[z])}return Q.join(" ")},k=e.__arabicParser__.processArabic=e.processArabic=function(){var R,z=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(z)){var B=0;for(N=[],B=0;B<z.length;B+=1)Array.isArray(z[B])?N.push([A(z[B][0]),z[B][1],z[B][2]]):N.push([A(z[B])]);R=N}else R=A(z);return typeof arguments[0]=="string"?R:(arguments[0].text=R,arguments[0])};e.events.push(["preProcessText",k])}(bn.API),bn.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(s){r=s}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(s){n=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(s){o=s}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(s){l=s}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(bn.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(R){f=R}});var p=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return p},set:function(R){p=R}});var v=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return v},set:function(R){v=R}});var x=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return x},set:function(R){x=R}});var S=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return S},set:function(R){S=R}});var A=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return A},set:function(R){A=R}});var k=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return k},set:function(R){k=R}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(f){return n.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},e.getTextDimensions=function(f,p){n.call(this);var v=(p=p||{}).fontSize||this.getFontSize(),x=p.font||this.getFont(),S=p.scaleFactor||this.internal.scaleFactor,A=0,k=0,R=0,z=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var N=p.maxWidth;N>0?typeof f=="string"?f=this.splitTextToSize(f,N):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(U,K){return U.concat(z.splitTextToSize(K,N))},[])):f=Array.isArray(f)?f:[f];for(var B=0;B<f.length;B++)A<(R=this.getStringUnitWidth(f[B],{font:x})*v)&&(A=R);return A!==0&&(k=f.length),{w:A/=S,h:Math.max((k*v*this.getLineHeightFactor()-v*(this.getLineHeightFactor()-1))/S,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var f=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=e.cell=function(){var f;f=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var p=this.internal.__cell__.lastCell,v=this.internal.__cell__.padding,x=this.internal.__cell__.margins||t,S=this.internal.__cell__.tableHeaderRow,A=this.internal.__cell__.printHeaders;return p.lineNumber!==void 0&&(p.lineNumber===f.lineNumber?(f.x=(p.x||0)+(p.width||0),f.y=p.y||0):p.y+p.height+f.height+x.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=x.top,A&&S&&(this.printHeaderRow(f.lineNumber,!0),f.y+=S[0].height)):f.y=p.y+p.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,r===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-v,f.y+v,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+v,{align:"center",baseline:"top",maxWidth:f.width-v-v}):this.text(f.text,f.x+v,f.y+v,{align:"left",baseline:"top",maxWidth:f.width-v-v})),this.internal.__cell__.lastCell=f,this};e.table=function(f,p,v,x,S){if(n.call(this),!v)throw new Error("No data for PDF table.");var A,k,R,z,N=[],B=[],U=[],K={},ne={},ee=[],Q=[],re=(S=S||{}).autoSize||!1,Se=S.printHeaders!==!1,J=S.css&&S.css["font-size"]!==void 0?16*S.css["font-size"]:S.fontSize||12,G=S.margins||Object.assign({width:this.getPageWidth()},t),se=typeof S.padding=="number"?S.padding:3,ve=S.headerBackgroundColor||"#c8c8c8",ge=S.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=Se,this.internal.__cell__.margins=G,this.internal.__cell__.table_font_size=J,this.internal.__cell__.padding=se,this.internal.__cell__.headerBackgroundColor=ve,this.internal.__cell__.headerTextColor=ge,this.setFontSize(J),x==null)B=N=Object.keys(v[0]),U=N.map(function(){return"left"});else if(Array.isArray(x)&&$i(x[0])==="object")for(N=x.map(function(Qe){return Qe.name}),B=x.map(function(Qe){return Qe.prompt||Qe.name||""}),U=x.map(function(Qe){return Qe.align||"left"}),A=0;A<x.length;A+=1)ne[x[A].name]=x[A].width*(19.049976/25.4);else Array.isArray(x)&&typeof x[0]=="string"&&(B=N=x,U=N.map(function(){return"left"}));if(re||Array.isArray(x)&&typeof x[0]=="string")for(A=0;A<N.length;A+=1){for(K[z=N[A]]=v.map(function(Qe){return Qe[z]}),this.setFont(void 0,"bold"),ee.push(this.getTextDimensions(B[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),k=K[z],this.setFont(void 0,"normal"),R=0;R<k.length;R+=1)ee.push(this.getTextDimensions(k[R],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ne[z]=Math.max.apply(null,ee)+se+se,ee=[]}if(Se){var je={};for(A=0;A<N.length;A+=1)je[N[A]]={},je[N[A]].text=B[A],je[N[A]].align=U[A];var $e=s.call(this,je,ne);Q=N.map(function(Qe){return new o(f,p,ne[Qe],$e,je[Qe].text,void 0,je[Qe].align)}),this.setTableHeaderRow(Q),this.printHeaderRow(1,!1)}var Ze=x.reduce(function(Qe,ct){return Qe[ct.name]=ct.align,Qe},{});for(A=0;A<v.length;A+=1){"rowStart"in S&&S.rowStart instanceof Function&&S.rowStart({row:A,data:v[A]},this);var Me=s.call(this,v[A],ne);for(R=0;R<N.length;R+=1){var Ue=v[A][N[R]];"cellStart"in S&&S.cellStart instanceof Function&&S.cellStart({row:A,col:R,data:Ue},this),l.call(this,new o(f,p,ne[N[R]],Me,Ue,A+2,Ze[N[R]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=p,this};var s=function(f,p){var v=this.internal.__cell__.padding,x=this.internal.__cell__.table_font_size,S=this.internal.scaleFactor;return Object.keys(f).map(function(A){var k=f[A];return this.splitTextToSize(k.hasOwnProperty("text")?k.text:k,p[A]-v-v)},this).map(function(A){return this.getLineHeightFactor()*A.length*x/S+v+v},this).reduce(function(A,k){return Math.max(A,k)},0)};e.setTableHeaderRow=function(f){n.call(this),this.internal.__cell__.tableHeaderRow=f},e.printHeaderRow=function(f,p){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var v;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var x=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(x[0],x[1],x[2],x[3],void 0,-1)}this.setFont(void 0,"bold");for(var S=[],A=0;A<this.internal.__cell__.tableHeaderRow.length;A+=1){v=this.internal.__cell__.tableHeaderRow[A].clone(),p&&(v.y=this.internal.__cell__.margins.top||0,S.push(v)),v.lineNumber=f;var k=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,v),this.setTextColor(k)}S.length>0&&this.setTableHeaderRow(S),this.setFont(void 0,"normal"),r=!1}}(bn.API);var ZU={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},JU=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],x4=YU(JU),QU=[100,200,300,400,500,600,700,800,900],yae=YU(QU);function w4(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(o){return ZU[o=o||"normal"]?o:"normal"}(e.style),n=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(o){return typeof x4[o=o||"normal"]=="number"?o:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,r,n].join(" ")}}}function LN(e,t,r,n){var i;for(i=r;i>=0&&i<t.length;i+=n)if(e[t[i]])return e[t[i]];for(i=r;i>=0&&i<t.length;i-=n)if(e[t[i]])return e[t[i]]}var _ae={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},FN={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function BN(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function vae(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",i=Object.assign({},_ae,r.genericFontFamilies||{}),o=null,l=null,s=0;s<t.length;++s)if(i[(o=w4(t[s])).family]&&(o.family=i[o.family]),e.hasOwnProperty(o.family)){l=e[o.family];break}if(!(l=l||e[n]))throw new Error("Could not find a font-family for the rule '"+BN(o)+"' and default family '"+n+"'.");if(l=function(f,p){if(p[f])return p[f];var v=x4[f],x=v<=x4.normal?-1:1,S=LN(p,JU,v,x);if(!S)throw new Error("Could not find a matching font-stretch value for "+f);return S}(o.stretch,l),l=function(f,p){if(p[f])return p[f];for(var v=ZU[f],x=0;x<v.length;++x)if(p[v[x]])return p[v[x]];throw new Error("Could not find a matching font-style for "+f)}(o.style,l),!(l=function(f,p){if(p[f])return p[f];if(f===400&&p[500])return p[500];if(f===500&&p[400])return p[400];var v=yae[f],x=LN(p,QU,v,f<400?-1:1);if(!x)throw new Error("Could not find a matching font-weight for value "+f);return x}(o.weight,l)))throw new Error("Failed to resolve a font for the rule '"+BN(o)+"'.");return l}function zN(e){return e.trimLeft()}function bae(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function xae(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var wx,$N,UN,iT=["times"];(function(e){var t,r,n,i,o,l,s,f,p,v=function(ce){return ce=ce||{},this.isStrokeTransparent=ce.isStrokeTransparent||!1,this.strokeOpacity=ce.strokeOpacity||1,this.strokeStyle=ce.strokeStyle||"#000000",this.fillStyle=ce.fillStyle||"#000000",this.isFillTransparent=ce.isFillTransparent||!1,this.fillOpacity=ce.fillOpacity||1,this.font=ce.font||"10px sans-serif",this.textBaseline=ce.textBaseline||"alphabetic",this.textAlign=ce.textAlign||"left",this.lineWidth=ce.lineWidth||1,this.lineJoin=ce.lineJoin||"miter",this.lineCap=ce.lineCap||"butt",this.path=ce.path||[],this.transform=ce.transform!==void 0?ce.transform.clone():new f,this.globalCompositeOperation=ce.globalCompositeOperation||"normal",this.globalAlpha=ce.globalAlpha||1,this.clip_path=ce.clip_path||[],this.currentPoint=ce.currentPoint||new l,this.miterLimit=ce.miterLimit||10,this.lastPoint=ce.lastPoint||new l,this.lineDashOffset=ce.lineDashOffset||0,this.lineDash=ce.lineDash||[],this.margin=ce.margin||[0,0,0,0],this.prevPageLastElemOffset=ce.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ce.ignoreClearRect!="boolean"||ce.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new x(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,l=this.internal.Point,s=this.internal.Rectangle,f=this.internal.Matrix,p=new v}]);var x=function(ce){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var be=ce;Object.defineProperty(this,"pdf",{get:function(){return be}});var Oe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Oe},set:function(vt){Oe=!!vt}});var Be=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Be},set:function(vt){Be=!!vt}});var qe=0;Object.defineProperty(this,"posX",{get:function(){return qe},set:function(vt){isNaN(vt)||(qe=vt)}});var tt=0;Object.defineProperty(this,"posY",{get:function(){return tt},set:function(vt){isNaN(vt)||(tt=vt)}}),Object.defineProperty(this,"margin",{get:function(){return p.margin},set:function(vt){var pe;typeof vt=="number"?pe=[vt,vt,vt,vt]:((pe=new Array(4))[0]=vt[0],pe[1]=vt.length>=2?vt[1]:pe[0],pe[2]=vt.length>=3?vt[2]:pe[0],pe[3]=vt.length>=4?vt[3]:pe[1]),p.margin=pe}});var We=!1;Object.defineProperty(this,"autoPaging",{get:function(){return We},set:function(vt){We=vt}});var Xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return Xe},set:function(vt){Xe=vt}});var lt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return lt},set:function(vt){lt=vt}}),Object.defineProperty(this,"ctx",{get:function(){return p},set:function(vt){vt instanceof v&&(p=vt)}}),Object.defineProperty(this,"path",{get:function(){return p.path},set:function(vt){p.path=vt}});var wt=[];Object.defineProperty(this,"ctxStack",{get:function(){return wt},set:function(vt){wt=vt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(vt){var pe;pe=S(vt),this.ctx.fillStyle=pe.style,this.ctx.isFillTransparent=pe.a===0,this.ctx.fillOpacity=pe.a,this.pdf.setFillColor(pe.r,pe.g,pe.b,{a:pe.a}),this.pdf.setTextColor(pe.r,pe.g,pe.b,{a:pe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(vt){var pe=S(vt);this.ctx.strokeStyle=pe.style,this.ctx.isStrokeTransparent=pe.a===0,this.ctx.strokeOpacity=pe.a,pe.a===0?this.pdf.setDrawColor(255,255,255):(pe.a,this.pdf.setDrawColor(pe.r,pe.g,pe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(vt){["butt","round","square"].indexOf(vt)!==-1&&(this.ctx.lineCap=vt,this.pdf.setLineCap(vt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(vt){isNaN(vt)||(this.ctx.lineWidth=vt,this.pdf.setLineWidth(vt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(vt){["bevel","round","miter"].indexOf(vt)!==-1&&(this.ctx.lineJoin=vt,this.pdf.setLineJoin(vt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(vt){isNaN(vt)||(this.ctx.miterLimit=vt,this.pdf.setMiterLimit(vt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(vt){this.ctx.textBaseline=vt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(vt){["right","end","center","left","start"].indexOf(vt)!==-1&&(this.ctx.textAlign=vt)}});var Lt=null;function At(vt,pe){if(Lt===null){var ur=function(sr){var Tt=[];return Object.keys(sr).forEach(function(Nt){sr[Nt].forEach(function(Zt){var rr=null;switch(Zt){case"bold":rr={family:Nt,weight:"bold"};break;case"italic":rr={family:Nt,style:"italic"};break;case"bolditalic":rr={family:Nt,weight:"bold",style:"italic"};break;case"":case"normal":rr={family:Nt}}rr!==null&&(rr.ref={name:Nt,style:Zt},Tt.push(rr))})}),Tt}(vt.getFontList());Lt=function(sr){for(var Tt={},Nt=0;Nt<sr.length;++Nt){var Zt=w4(sr[Nt]),rr=Zt.family,at=Zt.stretch,It=Zt.style,Vt=Zt.weight;Tt[rr]=Tt[rr]||{},Tt[rr][at]=Tt[rr][at]||{},Tt[rr][at][It]=Tt[rr][at][It]||{},Tt[rr][at][It][Vt]=Zt}return Tt}(ur.concat(pe))}return Lt}var zt=null;Object.defineProperty(this,"fontFaces",{get:function(){return zt},set:function(vt){Lt=null,zt=vt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(vt){var pe;if(this.ctx.font=vt,(pe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(vt))!==null){var ur=pe[1],sr=(pe[2],pe[3]),Tt=pe[4],Nt=(pe[5],pe[6]),Zt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Tt)[2];Tt=Math.floor(Zt==="px"?parseFloat(Tt)*this.pdf.internal.scaleFactor:Zt==="em"?parseFloat(Tt)*this.pdf.getFontSize():parseFloat(Tt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Tt);var rr=function(Ut){var _r,Kt,fn=[],Dt=Ut.trim();if(Dt==="")return iT;if(Dt in FN)return[FN[Dt]];for(;Dt!=="";){switch(Kt=null,_r=(Dt=zN(Dt)).charAt(0)){case'"':case"'":Kt=bae(Dt.substring(1),_r);break;default:Kt=xae(Dt)}if(Kt===null||(fn.push(Kt[0]),(Dt=zN(Kt[1]))!==""&&Dt.charAt(0)!==","))return iT;Dt=Dt.replace(/^,/,"")}return fn}(Nt);if(this.fontFaces){var at=vae(At(this.pdf,this.fontFaces),rr.map(function(Ut){return{family:Ut,stretch:"normal",weight:sr,style:ur}}));this.pdf.setFont(at.ref.name,at.ref.style)}else{var It="";(sr==="bold"||parseInt(sr,10)>=700||ur==="bold")&&(It="bold"),ur==="italic"&&(It+="italic"),It.length===0&&(It="normal");for(var Vt="",lr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Pr=0;Pr<rr.length;Pr++){if(this.pdf.internal.getFont(rr[Pr],It,{noFallback:!0,disableWarning:!0})!==void 0){Vt=rr[Pr];break}if(It==="bolditalic"&&this.pdf.internal.getFont(rr[Pr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Vt=rr[Pr],It="bold";else if(this.pdf.internal.getFont(rr[Pr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Vt=rr[Pr],It="normal";break}}if(Vt===""){for(var _t=0;_t<rr.length;_t++)if(lr[rr[_t]]){Vt=lr[rr[_t]];break}}Vt=Vt===""?"Times":Vt,this.pdf.setFont(Vt,It)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(vt){this.ctx.globalCompositeOperation=vt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(vt){this.ctx.globalAlpha=vt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(vt){this.ctx.lineDashOffset=vt,ct.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(vt){this.ctx.lineDash=vt,ct.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(vt){this.ctx.ignoreClearRect=!!vt}})};x.prototype.setLineDash=function(ce){this.lineDash=ce},x.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},x.prototype.fill=function(){K.call(this,"fill",!1)},x.prototype.stroke=function(){K.call(this,"stroke",!1)},x.prototype.beginPath=function(){this.path=[{type:"begin"}]},x.prototype.moveTo=function(ce,be){if(isNaN(ce)||isNaN(be))throw io.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Oe=this.ctx.transform.applyToPoint(new l(ce,be));this.path.push({type:"mt",x:Oe.x,y:Oe.y}),this.ctx.lastPoint=new l(ce,be)},x.prototype.closePath=function(){var ce=new l(0,0),be=0;for(be=this.path.length-1;be!==-1;be--)if(this.path[be].type==="begin"&&$i(this.path[be+1])==="object"&&typeof this.path[be+1].x=="number"){ce=new l(this.path[be+1].x,this.path[be+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(ce.x,ce.y)},x.prototype.lineTo=function(ce,be){if(isNaN(ce)||isNaN(be))throw io.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Oe=this.ctx.transform.applyToPoint(new l(ce,be));this.path.push({type:"lt",x:Oe.x,y:Oe.y}),this.ctx.lastPoint=new l(Oe.x,Oe.y)},x.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),K.call(this,null,!0)},x.prototype.quadraticCurveTo=function(ce,be,Oe,Be){if(isNaN(Oe)||isNaN(Be)||isNaN(ce)||isNaN(be))throw io.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var qe=this.ctx.transform.applyToPoint(new l(Oe,Be)),tt=this.ctx.transform.applyToPoint(new l(ce,be));this.path.push({type:"qct",x1:tt.x,y1:tt.y,x:qe.x,y:qe.y}),this.ctx.lastPoint=new l(qe.x,qe.y)},x.prototype.bezierCurveTo=function(ce,be,Oe,Be,qe,tt){if(isNaN(qe)||isNaN(tt)||isNaN(ce)||isNaN(be)||isNaN(Oe)||isNaN(Be))throw io.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var We=this.ctx.transform.applyToPoint(new l(qe,tt)),Xe=this.ctx.transform.applyToPoint(new l(ce,be)),lt=this.ctx.transform.applyToPoint(new l(Oe,Be));this.path.push({type:"bct",x1:Xe.x,y1:Xe.y,x2:lt.x,y2:lt.y,x:We.x,y:We.y}),this.ctx.lastPoint=new l(We.x,We.y)},x.prototype.arc=function(ce,be,Oe,Be,qe,tt){if(isNaN(ce)||isNaN(be)||isNaN(Oe)||isNaN(Be)||isNaN(qe))throw io.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(tt=!!tt,!this.ctx.transform.isIdentity){var We=this.ctx.transform.applyToPoint(new l(ce,be));ce=We.x,be=We.y;var Xe=this.ctx.transform.applyToPoint(new l(0,Oe)),lt=this.ctx.transform.applyToPoint(new l(0,0));Oe=Math.sqrt(Math.pow(Xe.x-lt.x,2)+Math.pow(Xe.y-lt.y,2))}Math.abs(qe-Be)>=2*Math.PI&&(Be=0,qe=2*Math.PI),this.path.push({type:"arc",x:ce,y:be,radius:Oe,startAngle:Be,endAngle:qe,counterclockwise:tt})},x.prototype.arcTo=function(ce,be,Oe,Be,qe){throw new Error("arcTo not implemented.")},x.prototype.rect=function(ce,be,Oe,Be){if(isNaN(ce)||isNaN(be)||isNaN(Oe)||isNaN(Be))throw io.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ce,be),this.lineTo(ce+Oe,be),this.lineTo(ce+Oe,be+Be),this.lineTo(ce,be+Be),this.lineTo(ce,be),this.lineTo(ce+Oe,be),this.lineTo(ce,be)},x.prototype.fillRect=function(ce,be,Oe,Be){if(isNaN(ce)||isNaN(be)||isNaN(Oe)||isNaN(Be))throw io.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!A.call(this)){var qe={};this.lineCap!=="butt"&&(qe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(qe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ce,be,Oe,Be),this.fill(),qe.hasOwnProperty("lineCap")&&(this.lineCap=qe.lineCap),qe.hasOwnProperty("lineJoin")&&(this.lineJoin=qe.lineJoin)}},x.prototype.strokeRect=function(ce,be,Oe,Be){if(isNaN(ce)||isNaN(be)||isNaN(Oe)||isNaN(Be))throw io.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");k.call(this)||(this.beginPath(),this.rect(ce,be,Oe,Be),this.stroke())},x.prototype.clearRect=function(ce,be,Oe,Be){if(isNaN(ce)||isNaN(be)||isNaN(Oe)||isNaN(Be))throw io.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ce,be,Oe,Be))},x.prototype.save=function(ce){ce=typeof ce!="boolean"||ce;for(var be=this.pdf.internal.getCurrentPageInfo().pageNumber,Oe=0;Oe<this.pdf.internal.getNumberOfPages();Oe++)this.pdf.setPage(Oe+1),this.pdf.internal.out("q");if(this.pdf.setPage(be),ce){this.ctx.fontSize=this.pdf.internal.getFontSize();var Be=new v(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Be}},x.prototype.restore=function(ce){ce=typeof ce!="boolean"||ce;for(var be=this.pdf.internal.getCurrentPageInfo().pageNumber,Oe=0;Oe<this.pdf.internal.getNumberOfPages();Oe++)this.pdf.setPage(Oe+1),this.pdf.internal.out("Q");this.pdf.setPage(be),ce&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},x.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var S=function(ce){var be,Oe,Be,qe;if(ce.isCanvasGradient===!0&&(ce=ce.getColor()),!ce)return{r:0,g:0,b:0,a:0,style:ce};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ce))be=0,Oe=0,Be=0,qe=0;else{var tt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ce);if(tt!==null)be=parseInt(tt[1]),Oe=parseInt(tt[2]),Be=parseInt(tt[3]),qe=1;else if((tt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ce))!==null)be=parseInt(tt[1]),Oe=parseInt(tt[2]),Be=parseInt(tt[3]),qe=parseFloat(tt[4]);else{if(qe=1,typeof ce=="string"&&ce.charAt(0)!=="#"){var We=new HU(ce);ce=We.ok?We.toHex():"#000000"}ce.length===4?(be=ce.substring(1,2),be+=be,Oe=ce.substring(2,3),Oe+=Oe,Be=ce.substring(3,4),Be+=Be):(be=ce.substring(1,3),Oe=ce.substring(3,5),Be=ce.substring(5,7)),be=parseInt(be,16),Oe=parseInt(Oe,16),Be=parseInt(Be,16)}}return{r:be,g:Oe,b:Be,a:qe,style:ce}},A=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},k=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};x.prototype.fillText=function(ce,be,Oe,Be){if(isNaN(be)||isNaN(Oe)||typeof ce!="string")throw io.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Be=isNaN(Be)?void 0:Be,!A.call(this)){var qe=Me(this.ctx.transform.rotation),tt=this.ctx.transform.scaleX;se.call(this,{text:ce,x:be,y:Oe,scale:tt,angle:qe,align:this.textAlign,maxWidth:Be})}},x.prototype.strokeText=function(ce,be,Oe,Be){if(isNaN(be)||isNaN(Oe)||typeof ce!="string")throw io.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!k.call(this)){Be=isNaN(Be)?void 0:Be;var qe=Me(this.ctx.transform.rotation),tt=this.ctx.transform.scaleX;se.call(this,{text:ce,x:be,y:Oe,scale:tt,renderingMode:"stroke",angle:qe,align:this.textAlign,maxWidth:Be})}},x.prototype.measureText=function(ce){if(typeof ce!="string")throw io.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var be=this.pdf,Oe=this.pdf.internal.scaleFactor,Be=be.internal.getFontSize(),qe=be.getStringUnitWidth(ce)*Be/be.internal.scaleFactor,tt=function(We){var Xe=(We=We||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Xe}}),this};return new tt({width:qe*=Math.round(96*Oe/72*1e4)/1e4})},x.prototype.scale=function(ce,be){if(isNaN(ce)||isNaN(be))throw io.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Oe=new f(ce,0,0,be,0,0);this.ctx.transform=this.ctx.transform.multiply(Oe)},x.prototype.rotate=function(ce){if(isNaN(ce))throw io.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var be=new f(Math.cos(ce),Math.sin(ce),-Math.sin(ce),Math.cos(ce),0,0);this.ctx.transform=this.ctx.transform.multiply(be)},x.prototype.translate=function(ce,be){if(isNaN(ce)||isNaN(be))throw io.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Oe=new f(1,0,0,1,ce,be);this.ctx.transform=this.ctx.transform.multiply(Oe)},x.prototype.transform=function(ce,be,Oe,Be,qe,tt){if(isNaN(ce)||isNaN(be)||isNaN(Oe)||isNaN(Be)||isNaN(qe)||isNaN(tt))throw io.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var We=new f(ce,be,Oe,Be,qe,tt);this.ctx.transform=this.ctx.transform.multiply(We)},x.prototype.setTransform=function(ce,be,Oe,Be,qe,tt){ce=isNaN(ce)?1:ce,be=isNaN(be)?0:be,Oe=isNaN(Oe)?0:Oe,Be=isNaN(Be)?1:Be,qe=isNaN(qe)?0:qe,tt=isNaN(tt)?0:tt,this.ctx.transform=new f(ce,be,Oe,Be,qe,tt)};var R=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};x.prototype.drawImage=function(ce,be,Oe,Be,qe,tt,We,Xe,lt){var wt=this.pdf.getImageProperties(ce),Lt=1,At=1,zt=1,vt=1;Be!==void 0&&Xe!==void 0&&(zt=Xe/Be,vt=lt/qe,Lt=wt.width/Be*Xe/Be,At=wt.height/qe*lt/qe),tt===void 0&&(tt=be,We=Oe,be=0,Oe=0),Be!==void 0&&Xe===void 0&&(Xe=Be,lt=qe),Be===void 0&&Xe===void 0&&(Xe=wt.width,lt=wt.height);for(var pe,ur=this.ctx.transform.decompose(),sr=Me(ur.rotate.shx),Tt=new f,Nt=(Tt=(Tt=(Tt=Tt.multiply(ur.translate)).multiply(ur.skew)).multiply(ur.scale)).applyToRectangle(new s(tt-be*zt,We-Oe*vt,Be*Lt,qe*At)),Zt=z.call(this,Nt),rr=[],at=0;at<Zt.length;at+=1)rr.indexOf(Zt[at])===-1&&rr.push(Zt[at]);if(U(rr),this.autoPaging)for(var It=rr[0],Vt=rr[rr.length-1],lr=It;lr<Vt+1;lr++){this.pdf.setPage(lr);var Pr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_t=lr===1?this.posY+this.margin[0]:this.margin[0],Ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_r=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Kt=lr===1?0:Ut+(lr-2)*_r;if(this.ctx.clip_path.length!==0){var fn=this.path;pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(pe,this.posX+this.margin[3],-Kt+_t+this.ctx.prevPageLastElemOffset),ne.call(this,"fill",!0),this.path=fn}var Dt=JSON.parse(JSON.stringify(Nt));Dt=B([Dt],this.posX+this.margin[3],-Kt+_t+this.ctx.prevPageLastElemOffset)[0];var Br=(lr>It||lr<Vt)&&R.call(this);Br&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pr,_r,null).clip().discardPath()),this.pdf.addImage(ce,"JPEG",Dt.x,Dt.y,Dt.w,Dt.h,null,null,sr),Br&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ce,"JPEG",Nt.x,Nt.y,Nt.w,Nt.h,null,null,sr)};var z=function(ce,be,Oe){var Be=[];be=be||this.pdf.internal.pageSize.width,Oe=Oe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var qe=this.posY+this.ctx.prevPageLastElemOffset;switch(ce.type){default:case"mt":case"lt":Be.push(Math.floor((ce.y+qe)/Oe)+1);break;case"arc":Be.push(Math.floor((ce.y+qe-ce.radius)/Oe)+1),Be.push(Math.floor((ce.y+qe+ce.radius)/Oe)+1);break;case"qct":var tt=Ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ce.x1,ce.y1,ce.x,ce.y);Be.push(Math.floor((tt.y+qe)/Oe)+1),Be.push(Math.floor((tt.y+tt.h+qe)/Oe)+1);break;case"bct":var We=Qe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ce.x1,ce.y1,ce.x2,ce.y2,ce.x,ce.y);Be.push(Math.floor((We.y+qe)/Oe)+1),Be.push(Math.floor((We.y+We.h+qe)/Oe)+1);break;case"rect":Be.push(Math.floor((ce.y+qe)/Oe)+1),Be.push(Math.floor((ce.y+ce.h+qe)/Oe)+1)}for(var Xe=0;Xe<Be.length;Xe+=1)for(;this.pdf.internal.getNumberOfPages()<Be[Xe];)N.call(this);return Be},N=function(){var ce=this.fillStyle,be=this.strokeStyle,Oe=this.font,Be=this.lineCap,qe=this.lineWidth,tt=this.lineJoin;this.pdf.addPage(),this.fillStyle=ce,this.strokeStyle=be,this.font=Oe,this.lineCap=Be,this.lineWidth=qe,this.lineJoin=tt},B=function(ce,be,Oe){for(var Be=0;Be<ce.length;Be++)switch(ce[Be].type){case"bct":ce[Be].x2+=be,ce[Be].y2+=Oe;case"qct":ce[Be].x1+=be,ce[Be].y1+=Oe;case"mt":case"lt":case"arc":default:ce[Be].x+=be,ce[Be].y+=Oe}return ce},U=function(ce){return ce.sort(function(be,Oe){return be-Oe})},K=function(ce,be){for(var Oe,Be,qe=this.fillStyle,tt=this.strokeStyle,We=this.lineCap,Xe=this.lineWidth,lt=Math.abs(Xe*this.ctx.transform.scaleX),wt=this.lineJoin,Lt=JSON.parse(JSON.stringify(this.path)),At=JSON.parse(JSON.stringify(this.path)),zt=[],vt=0;vt<At.length;vt++)if(At[vt].x!==void 0)for(var pe=z.call(this,At[vt]),ur=0;ur<pe.length;ur+=1)zt.indexOf(pe[ur])===-1&&zt.push(pe[ur]);for(var sr=0;sr<zt.length;sr++)for(;this.pdf.internal.getNumberOfPages()<zt[sr];)N.call(this);if(U(zt),this.autoPaging)for(var Tt=zt[0],Nt=zt[zt.length-1],Zt=Tt;Zt<Nt+1;Zt++){this.pdf.setPage(Zt),this.fillStyle=qe,this.strokeStyle=tt,this.lineCap=We,this.lineWidth=lt,this.lineJoin=wt;var rr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],at=Zt===1?this.posY+this.margin[0]:this.margin[0],It=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Vt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],lr=Zt===1?0:It+(Zt-2)*Vt;if(this.ctx.clip_path.length!==0){var Pr=this.path;Oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(Oe,this.posX+this.margin[3],-lr+at+this.ctx.prevPageLastElemOffset),ne.call(this,ce,!0),this.path=Pr}if(Be=JSON.parse(JSON.stringify(Lt)),this.path=B(Be,this.posX+this.margin[3],-lr+at+this.ctx.prevPageLastElemOffset),be===!1||Zt===0){var _t=(Zt>Tt||Zt<Nt)&&R.call(this);_t&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],rr,Vt,null).clip().discardPath()),ne.call(this,ce,be),_t&&this.pdf.restoreGraphicsState()}this.lineWidth=Xe}else this.lineWidth=lt,ne.call(this,ce,be),this.lineWidth=Xe;this.path=Lt},ne=function(ce,be){if((ce!=="stroke"||be||!k.call(this))&&(ce==="stroke"||be||!A.call(this))){for(var Oe,Be,qe=[],tt=this.path,We=0;We<tt.length;We++){var Xe=tt[We];switch(Xe.type){case"begin":qe.push({begin:!0});break;case"close":qe.push({close:!0});break;case"mt":qe.push({start:Xe,deltas:[],abs:[]});break;case"lt":var lt=qe.length;if(tt[We-1]&&!isNaN(tt[We-1].x)&&(Oe=[Xe.x-tt[We-1].x,Xe.y-tt[We-1].y],lt>0)){for(;lt>=0;lt--)if(qe[lt-1].close!==!0&&qe[lt-1].begin!==!0){qe[lt-1].deltas.push(Oe),qe[lt-1].abs.push(Xe);break}}break;case"bct":Oe=[Xe.x1-tt[We-1].x,Xe.y1-tt[We-1].y,Xe.x2-tt[We-1].x,Xe.y2-tt[We-1].y,Xe.x-tt[We-1].x,Xe.y-tt[We-1].y],qe[qe.length-1].deltas.push(Oe);break;case"qct":var wt=tt[We-1].x+2/3*(Xe.x1-tt[We-1].x),Lt=tt[We-1].y+2/3*(Xe.y1-tt[We-1].y),At=Xe.x+2/3*(Xe.x1-Xe.x),zt=Xe.y+2/3*(Xe.y1-Xe.y),vt=Xe.x,pe=Xe.y;Oe=[wt-tt[We-1].x,Lt-tt[We-1].y,At-tt[We-1].x,zt-tt[We-1].y,vt-tt[We-1].x,pe-tt[We-1].y],qe[qe.length-1].deltas.push(Oe);break;case"arc":qe.push({deltas:[],abs:[],arc:!0}),Array.isArray(qe[qe.length-1].abs)&&qe[qe.length-1].abs.push(Xe)}}Be=be?null:ce==="stroke"?"stroke":"fill";for(var ur=!1,sr=0;sr<qe.length;sr++)if(qe[sr].arc)for(var Tt=qe[sr].abs,Nt=0;Nt<Tt.length;Nt++){var Zt=Tt[Nt];Zt.type==="arc"?re.call(this,Zt.x,Zt.y,Zt.radius,Zt.startAngle,Zt.endAngle,Zt.counterclockwise,void 0,be,!ur):ve.call(this,Zt.x,Zt.y),ur=!0}else if(qe[sr].close===!0)this.pdf.internal.out("h"),ur=!1;else if(qe[sr].begin!==!0){var rr=qe[sr].start.x,at=qe[sr].start.y;ge.call(this,qe[sr].deltas,rr,at),ur=!0}Be&&Se.call(this,Be),be&&J.call(this)}},ee=function(ce){var be=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Oe=be*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ce-Oe;case"top":return ce+be-Oe;case"hanging":return ce+be-2*Oe;case"middle":return ce+be/2-Oe;case"ideographic":return ce;case"alphabetic":default:return ce}},Q=function(ce){return ce+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};x.prototype.createLinearGradient=function(){var ce=function(){};return ce.colorStops=[],ce.addColorStop=function(be,Oe){this.colorStops.push([be,Oe])},ce.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ce.isCanvasGradient=!0,ce},x.prototype.createPattern=function(){return this.createLinearGradient()},x.prototype.createRadialGradient=function(){return this.createLinearGradient()};var re=function(ce,be,Oe,Be,qe,tt,We,Xe,lt){for(var wt=$e.call(this,Oe,Be,qe,tt),Lt=0;Lt<wt.length;Lt++){var At=wt[Lt];Lt===0&&(lt?G.call(this,At.x1+ce,At.y1+be):ve.call(this,At.x1+ce,At.y1+be)),je.call(this,ce,be,At.x2,At.y2,At.x3,At.y3,At.x4,At.y4)}Xe?J.call(this):Se.call(this,We)},Se=function(ce){switch(ce){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},J=function(){this.pdf.clip(),this.pdf.discardPath()},G=function(ce,be){this.pdf.internal.out(r(ce)+" "+n(be)+" m")},se=function(ce){var be;switch(ce.align){case"right":case"end":be="right";break;case"center":be="center";break;case"left":case"start":default:be="left"}var Oe=this.pdf.getTextDimensions(ce.text),Be=ee.call(this,ce.y),qe=Q.call(this,Be)-Oe.h,tt=this.ctx.transform.applyToPoint(new l(ce.x,Be)),We=this.ctx.transform.decompose(),Xe=new f;Xe=(Xe=(Xe=Xe.multiply(We.translate)).multiply(We.skew)).multiply(We.scale);for(var lt,wt,Lt,At=this.ctx.transform.applyToRectangle(new s(ce.x,Be,Oe.w,Oe.h)),zt=Xe.applyToRectangle(new s(ce.x,qe,Oe.w,Oe.h)),vt=z.call(this,zt),pe=[],ur=0;ur<vt.length;ur+=1)pe.indexOf(vt[ur])===-1&&pe.push(vt[ur]);if(U(pe),this.autoPaging)for(var sr=pe[0],Tt=pe[pe.length-1],Nt=sr;Nt<Tt+1;Nt++){this.pdf.setPage(Nt);var Zt=Nt===1?this.posY+this.margin[0]:this.margin[0],rr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],at=this.pdf.internal.pageSize.height-this.margin[2],It=at-this.margin[0],Vt=this.pdf.internal.pageSize.width-this.margin[1],lr=Vt-this.margin[3],Pr=Nt===1?0:rr+(Nt-2)*It;if(this.ctx.clip_path.length!==0){var _t=this.path;lt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(lt,this.posX+this.margin[3],-1*Pr+Zt),ne.call(this,"fill",!0),this.path=_t}var Ut=B([JSON.parse(JSON.stringify(zt))],this.posX+this.margin[3],-Pr+Zt+this.ctx.prevPageLastElemOffset)[0];ce.scale>=.01&&(wt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(wt*ce.scale),Lt=this.lineWidth,this.lineWidth=Lt*ce.scale);var _r=this.autoPaging!=="text";if(_r||Ut.y+Ut.h<=at){if(_r||Ut.y>=Zt&&Ut.x<=Vt){var Kt=_r?ce.text:this.pdf.splitTextToSize(ce.text,ce.maxWidth||Vt-Ut.x)[0],fn=B([JSON.parse(JSON.stringify(At))],this.posX+this.margin[3],-Pr+Zt+this.ctx.prevPageLastElemOffset)[0],Dt=_r&&(Nt>sr||Nt<Tt)&&R.call(this);Dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lr,It,null).clip().discardPath()),this.pdf.text(Kt,fn.x,fn.y,{angle:ce.angle,align:be,renderingMode:ce.renderingMode}),Dt&&this.pdf.restoreGraphicsState()}}else Ut.y<at&&(this.ctx.prevPageLastElemOffset+=at-Ut.y);ce.scale>=.01&&(this.pdf.setFontSize(wt),this.lineWidth=Lt)}else ce.scale>=.01&&(wt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(wt*ce.scale),Lt=this.lineWidth,this.lineWidth=Lt*ce.scale),this.pdf.text(ce.text,tt.x+this.posX,tt.y+this.posY,{angle:ce.angle,align:be,renderingMode:ce.renderingMode,maxWidth:ce.maxWidth}),ce.scale>=.01&&(this.pdf.setFontSize(wt),this.lineWidth=Lt)},ve=function(ce,be,Oe,Be){Oe=Oe||0,Be=Be||0,this.pdf.internal.out(r(ce+Oe)+" "+n(be+Be)+" l")},ge=function(ce,be,Oe){return this.pdf.lines(ce,be,Oe,null,null)},je=function(ce,be,Oe,Be,qe,tt,We,Xe){this.pdf.internal.out([t(i(Oe+ce)),t(o(Be+be)),t(i(qe+ce)),t(o(tt+be)),t(i(We+ce)),t(o(Xe+be)),"c"].join(" "))},$e=function(ce,be,Oe,Be){for(var qe=2*Math.PI,tt=Math.PI/2;be>Oe;)be-=qe;var We=Math.abs(Oe-be);We<qe&&Be&&(We=qe-We);for(var Xe=[],lt=Be?-1:1,wt=be;We>1e-5;){var Lt=wt+lt*Math.min(We,tt);Xe.push(Ze.call(this,ce,wt,Lt)),We-=Math.abs(Lt-wt),wt=Lt}return Xe},Ze=function(ce,be,Oe){var Be=(Oe-be)/2,qe=ce*Math.cos(Be),tt=ce*Math.sin(Be),We=qe,Xe=-tt,lt=We*We+Xe*Xe,wt=lt+We*qe+Xe*tt,Lt=4/3*(Math.sqrt(2*lt*wt)-wt)/(We*tt-Xe*qe),At=We-Lt*Xe,zt=Xe+Lt*We,vt=At,pe=-zt,ur=Be+be,sr=Math.cos(ur),Tt=Math.sin(ur);return{x1:ce*Math.cos(be),y1:ce*Math.sin(be),x2:At*sr-zt*Tt,y2:At*Tt+zt*sr,x3:vt*sr-pe*Tt,y3:vt*Tt+pe*sr,x4:ce*Math.cos(Oe),y4:ce*Math.sin(Oe)}},Me=function(ce){return 180*ce/Math.PI},Ue=function(ce,be,Oe,Be,qe,tt){var We=ce+.5*(Oe-ce),Xe=be+.5*(Be-be),lt=qe+.5*(Oe-qe),wt=tt+.5*(Be-tt),Lt=Math.min(ce,qe,We,lt),At=Math.max(ce,qe,We,lt),zt=Math.min(be,tt,Xe,wt),vt=Math.max(be,tt,Xe,wt);return new s(Lt,zt,At-Lt,vt-zt)},Qe=function(ce,be,Oe,Be,qe,tt,We,Xe){var lt,wt,Lt,At,zt,vt,pe,ur,sr,Tt,Nt,Zt,rr,at,It=Oe-ce,Vt=Be-be,lr=qe-Oe,Pr=tt-Be,_t=We-qe,Ut=Xe-tt;for(wt=0;wt<41;wt++)sr=(pe=(Lt=ce+(lt=wt/40)*It)+lt*((zt=Oe+lt*lr)-Lt))+lt*(zt+lt*(qe+lt*_t-zt)-pe),Tt=(ur=(At=be+lt*Vt)+lt*((vt=Be+lt*Pr)-At))+lt*(vt+lt*(tt+lt*Ut-vt)-ur),wt==0?(Nt=sr,Zt=Tt,rr=sr,at=Tt):(Nt=Math.min(Nt,sr),Zt=Math.min(Zt,Tt),rr=Math.max(rr,sr),at=Math.max(at,Tt));return new s(Math.round(Nt),Math.round(Zt),Math.round(rr-Nt),Math.round(at-Zt))},ct=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ce,be,Oe=(ce=this.ctx.lineDash,be=this.ctx.lineDashOffset,JSON.stringify({lineDash:ce,lineDashOffset:be}));this.prevLineDash!==Oe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Oe)}}})(bn.API),function(e){var t=function(o){var l,s,f,p,v,x,S,A,k,R;for(s=[],f=0,p=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;p>f;f+=4)(v=(o.charCodeAt(f)<<24)+(o.charCodeAt(f+1)<<16)+(o.charCodeAt(f+2)<<8)+o.charCodeAt(f+3))!==0?(x=(v=((v=((v=((v=(v-(R=v%85))/85)-(k=v%85))/85)-(A=v%85))/85)-(S=v%85))/85)%85,s.push(x+33,S+33,A+33,k+33,R+33)):s.push(122);return function(z,N){for(var B=N;B>0;B--)z.pop()}(s,l.length),String.fromCharCode.apply(String,s)+"~>"},r=function(o){var l,s,f,p,v,x=String,S="length",A=255,k="charCodeAt",R="slice",z="replace";for(o[R](-2),o=o[R](0,-2)[z](/\s/g,"")[z]("z","!!!!!"),f=[],p=0,v=(o+=l="uuuuu"[R](o[S]%5||5))[S];v>p;p+=5)s=52200625*(o[k](p)-33)+614125*(o[k](p+1)-33)+7225*(o[k](p+2)-33)+85*(o[k](p+3)-33)+(o[k](p+4)-33),f.push(A&s>>24,A&s>>16,A&s>>8,A&s);return function(N,B){for(var U=B;U>0;U--)N.pop()}(f,l[S]),x.fromCharCode.apply(x,f)},n=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var s="",f=0;f<o.length;f+=2)s+=String.fromCharCode("0x"+(o[f]+o[f+1]));return s},i=function(o){for(var l=new Uint8Array(o.length),s=o.length;s--;)l[s]=o.charCodeAt(s);return o=(l=m4(l)).reduce(function(f,p){return f+String.fromCharCode(p)},"")};e.processDataByFilters=function(o,l){var s=0,f=o||"",p=[];for(typeof(l=l||[])=="string"&&(l=[l]),s=0;s<l.length;s+=1)switch(l[s]){case"ASCII85Decode":case"/ASCII85Decode":f=r(f),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=t(f),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=n(f),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=f.split("").map(function(v){return("0"+v.charCodeAt().toString(16)).slice(-2)}).join("")+">",p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=i(f),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[s]+'" is not implemented')}return{data:f,reverseChain:p.reverse().join(" ")}}}(bn.API),function(e){e.loadFile=function(t,r,n){return function(i,o,l){o=o!==!1,l=typeof l=="function"?l:function(){};var s=void 0;try{s=function(f,p,v){var x=new XMLHttpRequest,S=0,A=function(k){var R=k.length,z=[],N=String.fromCharCode;for(S=0;S<R;S+=1)z.push(N(255&k.charCodeAt(S)));return z.join("")};if(x.open("GET",f,!p),x.overrideMimeType("text/plain; charset=x-user-defined"),p===!1&&(x.onload=function(){x.status===200?v(A(this.responseText)):v(void 0)}),x.send(null),p&&x.status===200)return A(x.responseText)}(i,o,l)}catch{}return s}(t,r,n)},e.loadImageFile=e.loadFile}(bn.API),function(e){function t(){return(_n.html2canvas?Promise.resolve(_n.html2canvas):u4(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(_n.DOMPurify?Promise.resolve(_n.DOMPurify):u4(()=>import("./purify.es-DZPxG8F7.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var s=$i(l);return s==="undefined"?"undefined":s==="string"||l instanceof String?"string":s==="number"||l instanceof Number?"number":s==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":s==="object"?"object":"unknown"},i=function(l,s){var f=document.createElement(l);for(var p in s.className&&(f.className=s.className),s.innerHTML&&s.dompurify&&(f.innerHTML=s.dompurify.sanitize(s.innerHTML)),s.style)f.style[p]=s.style[p];return f},o=function l(s){var f=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),p=l.convert(Promise.resolve(),f);return p=(p=p.setProgress(1,l,1,[l])).set(s)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,s){return l.__proto__=s||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,s){return this.then(function(){switch(s=s||function(f){switch(n(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l)){case"string":return this.then(r).then(function(f){return this.set({src:i("div",{innerHTML:l,dompurify:f})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},s=function f(p,v){for(var x=p.nodeType===3?document.createTextNode(p.nodeValue):p.cloneNode(!1),S=p.firstChild;S;S=S.nextSibling)v!==!0&&S.nodeType===1&&S.nodeName==="SCRIPT"||x.appendChild(f(S,v));return p.nodeType===1&&(p.nodeName==="CANVAS"?(x.width=p.width,x.height=p.height,x.getContext("2d").drawImage(p,0,0)):p.nodeName!=="TEXTAREA"&&p.nodeName!=="SELECT"||(x.value=p.value),x.addEventListener("load",function(){x.scrollTop=p.scrollTop,x.scrollLeft=p.scrollLeft},!0)),x}(this.prop.src,this.opt.html2canvas.javascriptEnabled);s.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(s),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(s){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,s(this.prop.container,f)}).then(function(s){(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(s){var f=this.opt.jsPDF,p=this.opt.fontFaces,v=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,x=Object.assign({async:!0,allowTaint:!0,scale:v,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete x.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=p,p)for(var S=0;S<p.length;++S){var A=p[S],k=A.src.find(function(R){return R.format==="truetype"});k&&f.addFont(k.url,A.ref.name,A.ref.style)}return x.windowHeight=x.windowHeight||0,x.windowHeight=x.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):x.windowHeight,f.context2d.save(!0),s(this.prop.container,x)}).then(function(s){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,s,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(l,s):this.outputPdf(l,s)},o.prototype.outputPdf=function(l,s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,s)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var s=Object.keys(l||{}).map(function(f){if(f in o.template.prop)return function(){this.prop[f]=l[f]};switch(f){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[f]=l[f]}}},this);return this.then(function(){return this.thenList(s)})},o.prototype.get=function(l,s){return this.then(function(){var f=l in o.template.prop?this.prop[l]:this.opt[l];return s?s(f):f})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function s(f,p){return Math.floor(f*p/72*96)}return this.then(function(){(l=l||bn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:s(l.inner.width,l.k),height:s(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,s,f,p){return l!=null&&(this.progress.val=l),s!=null&&(this.progress.state=s),f!=null&&(this.progress.n=f),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,s,f,p){return this.setProgress(l?this.progress.val+l:null,s||null,f?this.progress.n+f:null,p?this.progress.stack.concat(p):null)},o.prototype.then=function(l,s){var f=this;return this.thenCore(l,s,function(p,v){return f.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(x){return f.updateProgress(null,p),x}).then(p,v).then(function(x){return f.updateProgress(1),x})})},o.prototype.thenCore=function(l,s,f){f=f||Promise.prototype.then,l&&(l=l.bind(this)),s&&(s=s.bind(this));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),v=f.call(p,l,s);return o.convert(v,this.__proto__)},o.prototype.thenExternal=function(l,s){return Promise.prototype.then.call(this,l,s)},o.prototype.thenList=function(l){var s=this;return l.forEach(function(f){s=s.thenCore(f)}),s},o.prototype.catch=function(l){l&&(l=l.bind(this));var s=Promise.prototype.catch.call(this,l);return o.convert(s,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,bn.getPageSize=function(l,s,f){if($i(l)==="object"){var p=l;l=p.orientation,s=p.unit||s,f=p.format||f}s=s||"mm",f=f||"a4",l=(""+(l||"P")).toLowerCase();var v,x=(""+f).toLowerCase(),S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(s){case"pt":v=1;break;case"mm":v=72/25.4;break;case"cm":v=72/2.54;break;case"in":v=72;break;case"px":v=.75;break;case"pc":case"em":v=12;break;case"ex":v=6;break;default:throw"Invalid unit: "+s}var A,k=0,R=0;if(S.hasOwnProperty(x))k=S[x][1]/v,R=S[x][0]/v;else try{k=f[1],R=f[0]}catch{throw new Error("Invalid format: "+f)}if(l==="p"||l==="portrait")l="p",R>k&&(A=R,R=k,k=A);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",k>R&&(A=R,R=k,k=A)}return{width:R,height:k,unit:s,k:v,orientation:l}},e.html=function(l,s){(s=s||{}).callback=s.callback||function(){},s.html2canvas=s.html2canvas||{},s.html2canvas.canvas=s.html2canvas.canvas||this.canvas,s.jsPDF=s.jsPDF||this,s.fontFaces=s.fontFaces?s.fontFaces.map(w4):null;var f=new o(s);return s.worker?f:f.from(l).doCallback()}}(bn.API),bn.API.addJS=function(e){return UN=e,this.internal.events.subscribe("postPutResources",function(){wx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(wx+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),$N=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+UN+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){wx!==void 0&&$N!==void 0&&this.internal.out("/Names <</JavaScript "+wx+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),o=0;o<i.length;o++){var l=i[o],s=n.exec(l);if(s!=null){var f=s[1];r.internal.newObjectDeferredBegin(f,!1)}r.internal.write(l)}if(this.outline.createNamedDestinations){var p=this.internal.pages.length,v=[];for(o=0;o<p;o++){var x=r.internal.newObject();v.push(x);var S=r.internal.getPageInfo(o+1);r.internal.write("<< /D["+S.objId+" 0 R /XYZ null null null]>> endobj")}var A=r.internal.newObject();for(r.internal.write("<< /Names [ "),o=0;o<v.length;o++)r.internal.write("(page_"+(o+1)+")"+v[o]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+A+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,o){var l={title:i,options:o,children:[]};return n==null&&(n=this.root),n.children.push(l),l},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<n.children.length;o++){var l=n.children[o];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(n)),o>0&&this.line("/Prev "+this.makeRef(n.children[o-1])),o<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[o+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var s=this.count=this.count_r({count:0},l);if(s>0&&this.line("/Count "+s),l.options&&l.options.pageNumber){var f=r.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var p=0;p<n.children.length;p++)this.renderItems(n.children[p])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var o=0;o<i.children.length;o++)n.count++,this.count_r(n,i.children[o]);return n.count}}])}(bn.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,i,o,l,s){var f,p=this.decode.DCT_DECODE,v=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=l||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(f=function(x){for(var S,A=256*x.charCodeAt(4)+x.charCodeAt(5),k=x.length,R={width:0,height:0,numcomponents:1},z=4;z<k;z+=2){if(z+=A,t.indexOf(x.charCodeAt(z+1))!==-1){S=256*x.charCodeAt(z+5)+x.charCodeAt(z+6),R={width:256*x.charCodeAt(z+7)+x.charCodeAt(z+8),height:S,numcomponents:x.charCodeAt(z+9)};break}A=256*x.charCodeAt(z+2)+x.charCodeAt(z+3)}return R}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}v={data:r,width:f.width,height:f.height,colorSpace:s,bitsPerComponent:8,filter:p,index:n,alias:i}}return v}}(bn.API);var f0,Sx,jN,VN,HN,wae=function(){var e,t,r;function n(o){var l,s,f,p,v,x,S,A,k,R,z,N,B,U;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},x=null;;){switch(l=this.readUInt32(),k=(function(){var K,ne;for(ne=[],K=0;K<4;++K)ne.push(String.fromCharCode(this.data[this.pos++]));return ne}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(l);break;case"fcTL":x&&this.animation.frames.push(x),this.pos+=4,x={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},v=this.readUInt16(),p=this.readUInt16()||100,x.delay=1e3*v/p,x.disposeOp=this.data[this.pos++],x.blendOp=this.data[this.pos++],x.data=[];break;case"IDAT":case"fdAT":for(k==="fdAT"&&(this.pos+=4,l-=4),o=(x!=null?x.data:void 0)||this.imgData,N=0;0<=l?N<l:N>l;0<=l?++N:--N)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(f=this.palette.length/3,this.transparency.indexed=this.read(l),this.transparency.indexed.length>f)throw new Error("More transparent colors than palette size");if((R=f-this.transparency.indexed.length)>0)for(B=0;0<=R?B<R:B>R;0<=R?++B:--B)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(l)[0];break;case 2:this.transparency.rgb=this.read(l)}break;case"tEXt":S=(z=this.read(l)).indexOf(0),A=String.fromCharCode.apply(String,z.slice(0,S)),this.text[A]=String.fromCharCode.apply(String,z.slice(S+1));break;case"IEND":return x&&this.animation.frames.push(x),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(U=this.colorType)===4||U===6,s=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*s,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=l}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(o){var l,s;for(s=[],l=0;0<=o?l<o:l>o;0<=o?++l:--l)s.push(this.data[this.pos++]);return s},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(o){var l=this.pixelBitlength/8,s=new Uint8Array(this.width*this.height*l),f=0,p=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function v(x,S,A,k){var R,z,N,B,U,K,ne,ee,Q,re,Se,J,G,se,ve,ge,je,$e,Ze,Me,Ue,Qe=Math.ceil((p.width-x)/A),ct=Math.ceil((p.height-S)/k),ce=p.width==Qe&&p.height==ct;for(se=l*Qe,J=ce?s:new Uint8Array(se*ct),K=o.length,G=0,z=0;G<ct&&f<K;){switch(o[f++]){case 0:for(B=je=0;je<se;B=je+=1)J[z++]=o[f++];break;case 1:for(B=$e=0;$e<se;B=$e+=1)R=o[f++],U=B<l?0:J[z-l],J[z++]=(R+U)%256;break;case 2:for(B=Ze=0;Ze<se;B=Ze+=1)R=o[f++],N=(B-B%l)/l,ve=G&&J[(G-1)*se+N*l+B%l],J[z++]=(ve+R)%256;break;case 3:for(B=Me=0;Me<se;B=Me+=1)R=o[f++],N=(B-B%l)/l,U=B<l?0:J[z-l],ve=G&&J[(G-1)*se+N*l+B%l],J[z++]=(R+Math.floor((U+ve)/2))%256;break;case 4:for(B=Ue=0;Ue<se;B=Ue+=1)R=o[f++],N=(B-B%l)/l,U=B<l?0:J[z-l],G===0?ve=ge=0:(ve=J[(G-1)*se+N*l+B%l],ge=N&&J[(G-1)*se+(N-1)*l+B%l]),ne=U+ve-ge,ee=Math.abs(ne-U),re=Math.abs(ne-ve),Se=Math.abs(ne-ge),Q=ee<=re&&ee<=Se?U:re<=Se?ve:ge,J[z++]=(R+Q)%256;break;default:throw new Error("Invalid filter algorithm: "+o[f-1])}if(!ce){var be=((S+G*k)*p.width+x)*l,Oe=G*se;for(B=0;B<Qe;B+=1){for(var Be=0;Be<l;Be+=1)s[be++]=J[Oe++];be+=(A-1)*l}}G++}}return o=rae(o),p.interlaceMethod==1?(v(0,0,8,8),v(4,0,8,8),v(0,4,4,8),v(2,0,4,4),v(0,2,2,4),v(1,0,2,2),v(0,1,1,2)):v(0,0,1,1),s},n.prototype.decodePalette=function(){var o,l,s,f,p,v,x,S,A;for(s=this.palette,v=this.transparency.indexed||[],p=new Uint8Array((v.length||0)+s.length),f=0,o=0,l=x=0,S=s.length;x<S;l=x+=3)p[f++]=s[l],p[f++]=s[l+1],p[f++]=s[l+2],p[f++]=(A=v[o++])!=null?A:255;return p},n.prototype.copyToImageData=function(o,l){var s,f,p,v,x,S,A,k,R,z,N;if(f=this.colors,R=null,s=this.hasAlphaChannel,this.palette.length&&(R=(N=this._decodedPalette)!=null?N:this._decodedPalette=this.decodePalette(),f=4,s=!0),k=(p=o.data||o).length,x=R||l,v=S=0,f===1)for(;v<k;)A=R?4*l[v/4]:S,z=x[A++],p[v++]=z,p[v++]=z,p[v++]=z,p[v++]=s?x[A++]:255,S=A;else for(;v<k;)A=R?4*l[v/4]:S,p[v++]=x[A++],p[v++]=x[A++],p[v++]=x[A++],p[v++]=s?x[A++]:255,S=A},n.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var i=function(){if(Object.prototype.toString.call(_n)==="[object Window]"){try{t=_n.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(o){var l;if(i()===!0)return r.width=o.width,r.height=o.height,r.clearRect(0,0,o.width,o.height),r.putImageData(o,0,0),(l=new Image).src=t.toDataURL(),l;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(o){var l,s,f,p,v,x,S,A;if(this.animation){for(A=[],s=v=0,x=(S=this.animation.frames).length;v<x;s=++v)l=S[s],f=o.createImageData(l.width,l.height),p=this.decodePixels(new Uint8Array(l.data)),this.copyToImageData(f,p),l.imageData=f,A.push(l.image=e(f));return A}},n.prototype.renderFrame=function(o,l){var s,f,p;return s=(f=this.animation.frames)[l],p=f[l-1],l===0&&o.clearRect(0,0,this.width,this.height),(p!=null?p.disposeOp:void 0)===1?o.clearRect(p.xOffset,p.yOffset,p.width,p.height):(p!=null?p.disposeOp:void 0)===2&&o.putImageData(p.imageData,p.xOffset,p.yOffset),s.blendOp===0&&o.clearRect(s.xOffset,s.yOffset,s.width,s.height),o.drawImage(s.image,s.xOffset,s.yOffset)},n.prototype.animate=function(o){var l,s,f,p,v,x,S=this;return s=0,x=this.animation,p=x.numFrames,f=x.frames,v=x.numPlays,(l=function(){var A,k;if(A=s++%p,k=f[A],S.renderFrame(o,A),p>1&&s/p<v)return S.animation._timeout=setTimeout(l,k.delay)})()},n.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},n.prototype.render=function(o){var l,s;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,l=o.getContext("2d"),this.animation?(this.decodeFrames(l),this.animate(l)):(s=l.createImageData(this.width,this.height),this.copyToImageData(s,this.decodePixels()),l.putImageData(s,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Sae(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,i=e[t++],o=i>>7,l=1<<(7&i)+1;e[t++],e[t++];var s=null,f=null;o&&(s=t,f=l,t+=3*l);var p=!0,v=[],x=0,S=null,A=0,k=null;for(this.width=r,this.height=n;p&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,k=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((G=e[t++])>=0))throw Error("Invalid block size");if(G===0)break;t+=G}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var R=e[t++];x=e[t++]|e[t++]<<8,S=e[t++],!(1&R)&&(S=null),A=R>>2&7,t++;break;case 254:for(;;){if(!((G=e[t++])>=0))throw Error("Invalid block size");if(G===0)break;t+=G}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var z=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,B=e[t++]|e[t++]<<8,U=e[t++]|e[t++]<<8,K=e[t++],ne=K>>6&1,ee=1<<(7&K)+1,Q=s,re=f,Se=!1;K>>7&&(Se=!0,Q=t,re=ee,t+=3*ee);var J=t;for(t++;;){var G;if(!((G=e[t++])>=0))throw Error("Invalid block size");if(G===0)break;t+=G}v.push({x:z,y:N,width:B,height:U,has_local_palette:Se,palette_offset:Q,palette_size:re,data_offset:J,data_length:t-J,transparent_index:S,interlaced:!!ne,delay:x,disposal:A});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return v.length},this.loopCount=function(){return k},this.frameInfo=function(se){if(se<0||se>=v.length)throw new Error("Frame index out of range.");return v[se]},this.decodeAndBlitFrameBGRA=function(se,ve){var ge=this.frameInfo(se),je=ge.width*ge.height,$e=new Uint8Array(je);qN(e,ge.data_offset,$e,je);var Ze=ge.palette_offset,Me=ge.transparent_index;Me===null&&(Me=256);var Ue=ge.width,Qe=r-Ue,ct=Ue,ce=4*(ge.y*r+ge.x),be=4*((ge.y+ge.height)*r+ge.x),Oe=ce,Be=4*Qe;ge.interlaced===!0&&(Be+=4*r*7);for(var qe=8,tt=0,We=$e.length;tt<We;++tt){var Xe=$e[tt];if(ct===0&&(ct=Ue,(Oe+=Be)>=be&&(Be=4*Qe+4*r*(qe-1),Oe=ce+(Ue+Qe)*(qe<<1),qe>>=1)),Xe===Me)Oe+=4;else{var lt=e[Ze+3*Xe],wt=e[Ze+3*Xe+1],Lt=e[Ze+3*Xe+2];ve[Oe++]=Lt,ve[Oe++]=wt,ve[Oe++]=lt,ve[Oe++]=255}--ct}},this.decodeAndBlitFrameRGBA=function(se,ve){var ge=this.frameInfo(se),je=ge.width*ge.height,$e=new Uint8Array(je);qN(e,ge.data_offset,$e,je);var Ze=ge.palette_offset,Me=ge.transparent_index;Me===null&&(Me=256);var Ue=ge.width,Qe=r-Ue,ct=Ue,ce=4*(ge.y*r+ge.x),be=4*((ge.y+ge.height)*r+ge.x),Oe=ce,Be=4*Qe;ge.interlaced===!0&&(Be+=4*r*7);for(var qe=8,tt=0,We=$e.length;tt<We;++tt){var Xe=$e[tt];if(ct===0&&(ct=Ue,(Oe+=Be)>=be&&(Be=4*Qe+4*r*(qe-1),Oe=ce+(Ue+Qe)*(qe<<1),qe>>=1)),Xe===Me)Oe+=4;else{var lt=e[Ze+3*Xe],wt=e[Ze+3*Xe+1],Lt=e[Ze+3*Xe+2];ve[Oe++]=lt,ve[Oe++]=wt,ve[Oe++]=Lt,ve[Oe++]=255}--ct}}}function qN(e,t,r,n){for(var i=e[t++],o=1<<i,l=o+1,s=l+1,f=i+1,p=(1<<f)-1,v=0,x=0,S=0,A=e[t++],k=new Int32Array(4096),R=null;;){for(;v<16&&A!==0;)x|=e[t++]<<v,v+=8,A===1?A=e[t++]:--A;if(v<f)break;var z=x&p;if(x>>=f,v-=f,z!==o){if(z===l)break;for(var N=z<s?z:R,B=0,U=N;U>o;)U=k[U]>>8,++B;var K=U;if(S+B+(N!==z?1:0)>n)return void io.log("Warning, gif stream longer than expected.");r[S++]=K;var ne=S+=B;for(N!==z&&(r[S++]=K),U=N;B--;)U=k[U],r[--ne]=255&U,U>>=8;R!==null&&s<4096&&(k[s++]=R<<8|K,s>=p+1&&f<12&&(++f,p=p<<1|1)),R=z}else s=l+1,p=(1<<(f=i+1))-1,R=null}return S!==n&&io.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function oT(e){var t,r,n,i,o,l=Math.floor,s=new Array(64),f=new Array(64),p=new Array(64),v=new Array(64),x=new Array(65535),S=new Array(65535),A=new Array(64),k=new Array(64),R=[],z=0,N=7,B=new Array(64),U=new Array(64),K=new Array(64),ne=new Array(256),ee=new Array(2048),Q=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],re=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Se=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],G=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],se=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ve=[0,1,2,3,4,5,6,7,8,9,10,11],ge=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],je=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function $e(ce,be){for(var Oe=0,Be=0,qe=new Array,tt=1;tt<=16;tt++){for(var We=1;We<=ce[tt];We++)qe[be[Be]]=[],qe[be[Be]][0]=Oe,qe[be[Be]][1]=tt,Be++,Oe++;Oe*=2}return qe}function Ze(ce){for(var be=ce[0],Oe=ce[1]-1;Oe>=0;)be&1<<Oe&&(z|=1<<N),Oe--,--N<0&&(z==255?(Me(255),Me(0)):Me(z),N=7,z=0)}function Me(ce){R.push(ce)}function Ue(ce){Me(ce>>8&255),Me(255&ce)}function Qe(ce,be,Oe,Be,qe){for(var tt,We=qe[0],Xe=qe[240],lt=function(Tt,Nt){var Zt,rr,at,It,Vt,lr,Pr,_t,Ut,_r,Kt=0;for(Ut=0;Ut<8;++Ut){Zt=Tt[Kt],rr=Tt[Kt+1],at=Tt[Kt+2],It=Tt[Kt+3],Vt=Tt[Kt+4],lr=Tt[Kt+5],Pr=Tt[Kt+6];var fn=Zt+(_t=Tt[Kt+7]),Dt=Zt-_t,Br=rr+Pr,dr=rr-Pr,nn=at+lr,Kn=at-lr,hr=It+Vt,Gn=It-Vt,Nn=fn+hr,gi=fn-hr,Yr=Br+nn,Ne=Br-nn;Tt[Kt]=Nn+Yr,Tt[Kt+4]=Nn-Yr;var ae=.707106781*(Ne+gi);Tt[Kt+2]=gi+ae,Tt[Kt+6]=gi-ae;var ue=.382683433*((Nn=Gn+Kn)-(Ne=dr+Dt)),Ee=.5411961*Nn+ue,Fe=1.306562965*Ne+ue,rt=.707106781*(Yr=Kn+dr),it=Dt+rt,et=Dt-rt;Tt[Kt+5]=et+Ee,Tt[Kt+3]=et-Ee,Tt[Kt+1]=it+Fe,Tt[Kt+7]=it-Fe,Kt+=8}for(Kt=0,Ut=0;Ut<8;++Ut){Zt=Tt[Kt],rr=Tt[Kt+8],at=Tt[Kt+16],It=Tt[Kt+24],Vt=Tt[Kt+32],lr=Tt[Kt+40],Pr=Tt[Kt+48];var Ke=Zt+(_t=Tt[Kt+56]),Et=Zt-_t,Rt=rr+Pr,gt=rr-Pr,Wt=at+lr,mr=at-lr,Ar=It+Vt,pn=It-Vt,Or=Ke+Ar,en=Ke-Ar,Zr=Rt+Wt,jn=Rt-Wt;Tt[Kt]=Or+Zr,Tt[Kt+32]=Or-Zr;var Jr=.707106781*(jn+en);Tt[Kt+16]=en+Jr,Tt[Kt+48]=en-Jr;var Ur=.382683433*((Or=pn+mr)-(jn=gt+Et)),vn=.5411961*Or+Ur,Fn=1.306562965*jn+Ur,ei=.707106781*(Zr=mr+gt),mi=Et+ei,Ii=Et-ei;Tt[Kt+40]=Ii+vn,Tt[Kt+24]=Ii-vn,Tt[Kt+8]=mi+Fn,Tt[Kt+56]=mi-Fn,Kt++}for(Ut=0;Ut<64;++Ut)_r=Tt[Ut]*Nt[Ut],A[Ut]=_r>0?_r+.5|0:_r-.5|0;return A}(ce,be),wt=0;wt<64;++wt)k[Q[wt]]=lt[wt];var Lt=k[0]-Oe;Oe=k[0],Lt==0?Ze(Be[0]):(Ze(Be[S[tt=32767+Lt]]),Ze(x[tt]));for(var At=63;At>0&&k[At]==0;)At--;if(At==0)return Ze(We),Oe;for(var zt,vt=1;vt<=At;){for(var pe=vt;k[vt]==0&&vt<=At;)++vt;var ur=vt-pe;if(ur>=16){zt=ur>>4;for(var sr=1;sr<=zt;++sr)Ze(Xe);ur&=15}tt=32767+k[vt],Ze(qe[(ur<<4)+S[tt]]),Ze(x[tt]),vt++}return At!=63&&Ze(We),Oe}function ct(ce){ce=Math.min(Math.max(ce,1),100),o!=ce&&(function(be){for(var Oe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Be=0;Be<64;Be++){var qe=l((Oe[Be]*be+50)/100);qe=Math.min(Math.max(qe,1),255),s[Q[Be]]=qe}for(var tt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],We=0;We<64;We++){var Xe=l((tt[We]*be+50)/100);Xe=Math.min(Math.max(Xe,1),255),f[Q[We]]=Xe}for(var lt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],wt=0,Lt=0;Lt<8;Lt++)for(var At=0;At<8;At++)p[wt]=1/(s[Q[wt]]*lt[Lt]*lt[At]*8),v[wt]=1/(f[Q[wt]]*lt[Lt]*lt[At]*8),wt++}(ce<50?Math.floor(5e3/ce):Math.floor(200-2*ce)),o=ce)}this.encode=function(ce,be){be&&ct(be),R=new Array,z=0,N=7,Ue(65496),Ue(65504),Ue(16),Me(74),Me(70),Me(73),Me(70),Me(0),Me(1),Me(1),Me(0),Ue(1),Ue(1),Me(0),Me(0),function(){Ue(65499),Ue(132),Me(0);for(var rr=0;rr<64;rr++)Me(s[rr]);Me(1);for(var at=0;at<64;at++)Me(f[at])}(),function(rr,at){Ue(65472),Ue(17),Me(8),Ue(at),Ue(rr),Me(3),Me(1),Me(17),Me(0),Me(2),Me(17),Me(1),Me(3),Me(17),Me(1)}(ce.width,ce.height),function(){Ue(65476),Ue(418),Me(0);for(var rr=0;rr<16;rr++)Me(re[rr+1]);for(var at=0;at<=11;at++)Me(Se[at]);Me(16);for(var It=0;It<16;It++)Me(J[It+1]);for(var Vt=0;Vt<=161;Vt++)Me(G[Vt]);Me(1);for(var lr=0;lr<16;lr++)Me(se[lr+1]);for(var Pr=0;Pr<=11;Pr++)Me(ve[Pr]);Me(17);for(var _t=0;_t<16;_t++)Me(ge[_t+1]);for(var Ut=0;Ut<=161;Ut++)Me(je[Ut])}(),Ue(65498),Ue(12),Me(3),Me(1),Me(0),Me(2),Me(17),Me(3),Me(17),Me(0),Me(63),Me(0);var Oe=0,Be=0,qe=0;z=0,N=7,this.encode.displayName="_encode_";for(var tt,We,Xe,lt,wt,Lt,At,zt,vt,pe=ce.data,ur=ce.width,sr=ce.height,Tt=4*ur,Nt=0;Nt<sr;){for(tt=0;tt<Tt;){for(wt=Tt*Nt+tt,At=-1,zt=0,vt=0;vt<64;vt++)Lt=wt+(zt=vt>>3)*Tt+(At=4*(7&vt)),Nt+zt>=sr&&(Lt-=Tt*(Nt+1+zt-sr)),tt+At>=Tt&&(Lt-=tt+At-Tt+4),We=pe[Lt++],Xe=pe[Lt++],lt=pe[Lt++],B[vt]=(ee[We]+ee[Xe+256>>0]+ee[lt+512>>0]>>16)-128,U[vt]=(ee[We+768>>0]+ee[Xe+1024>>0]+ee[lt+1280>>0]>>16)-128,K[vt]=(ee[We+1280>>0]+ee[Xe+1536>>0]+ee[lt+1792>>0]>>16)-128;Oe=Qe(B,p,Oe,t,n),Be=Qe(U,v,Be,r,i),qe=Qe(K,v,qe,r,i),tt+=32}Nt+=8}if(N>=0){var Zt=[];Zt[1]=N+1,Zt[0]=(1<<N+1)-1,Ze(Zt)}return Ue(65497),new Uint8Array(R)},e=e||50,function(){for(var ce=String.fromCharCode,be=0;be<256;be++)ne[be]=ce(be)}(),t=$e(re,Se),r=$e(se,ve),n=$e(J,G),i=$e(ge,je),function(){for(var ce=1,be=2,Oe=1;Oe<=15;Oe++){for(var Be=ce;Be<be;Be++)S[32767+Be]=Oe,x[32767+Be]=[],x[32767+Be][1]=Oe,x[32767+Be][0]=Be;for(var qe=-(be-1);qe<=-ce;qe++)S[32767+qe]=Oe,x[32767+qe]=[],x[32767+qe][1]=Oe,x[32767+qe][0]=be-1+qe;ce<<=1,be<<=1}}(),function(){for(var ce=0;ce<256;ce++)ee[ce]=19595*ce,ee[ce+256>>0]=38470*ce,ee[ce+512>>0]=7471*ce+32768,ee[ce+768>>0]=-11059*ce,ee[ce+1024>>0]=-21709*ce,ee[ce+1280>>0]=32768*ce+8421375,ee[ce+1536>>0]=-27439*ce,ee[ce+1792>>0]=-5329*ce}(),ct(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Yu(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function WN(e){function t(re){if(!re)throw Error("assert :P")}function r(re,Se,J){for(var G=0;4>G;G++)if(re[Se+G]!=J.charCodeAt(G))return!0;return!1}function n(re,Se,J,G,se){for(var ve=0;ve<se;ve++)re[Se+ve]=J[G+ve]}function i(re,Se,J,G){for(var se=0;se<G;se++)re[Se+se]=J}function o(re){return new Int32Array(re)}function l(re,Se){for(var J=[],G=0;G<re;G++)J.push(new Se);return J}function s(re,Se){var J=[];return function G(se,ve,ge){for(var je=ge[ve],$e=0;$e<je&&(se.push(ge.length>ve+1?[]:new Se),!(ge.length<ve+1));$e++)G(se[$e],ve+1,ge)}(J,0,re),J}var f=function(){var re=this;function Se(T,M){for(var y=1<<M-1>>>0;T&y;)y>>>=1;return y?(T&y-1)+y:T}function J(T,M,y,a,h){t(!(a%y));do T[M+(a-=y)]=h;while(0<a)}function G(T,M,y,a,h){if(t(2328>=h),512>=h)var g=o(512);else if((g=o(h))==null)return 0;return function(_,b,P,I,L,V){var W,q,oe=b,le=1<<P,ie=o(16),fe=o(16);for(t(L!=0),t(I!=null),t(_!=null),t(0<P),q=0;q<L;++q){if(15<I[q])return 0;++ie[I[q]]}if(ie[0]==L)return 0;for(fe[1]=0,W=1;15>W;++W){if(ie[W]>1<<W)return 0;fe[W+1]=fe[W]+ie[W]}for(q=0;q<L;++q)W=I[q],0<I[q]&&(V[fe[W]++]=q);if(fe[15]==1)return(I=new se).g=0,I.value=V[0],J(_,oe,1,le,I),le;var Ae,Te=-1,ke=le-1,Ie=0,ze=1,Je=1,Ge=1<<P;for(q=0,W=1,L=2;W<=P;++W,L<<=1){if(ze+=Je<<=1,0>(Je-=ie[W]))return 0;for(;0<ie[W];--ie[W])(I=new se).g=W,I.value=V[q++],J(_,oe+Ie,L,Ge,I),Ie=Se(Ie,W)}for(W=P+1,L=2;15>=W;++W,L<<=1){if(ze+=Je<<=1,0>(Je-=ie[W]))return 0;for(;0<ie[W];--ie[W]){if(I=new se,(Ie&ke)!=Te){for(oe+=Ge,Ae=1<<(Te=W)-P;15>Te&&!(0>=(Ae-=ie[Te]));)++Te,Ae<<=1;le+=Ge=1<<(Ae=Te-P),_[b+(Te=Ie&ke)].g=Ae+P,_[b+Te].value=oe-b-Te}I.g=W-P,I.value=V[q++],J(_,oe+(Ie>>P),L,Ge,I),Ie=Se(Ie,W)}}return ze!=2*fe[15]-1?0:le}(T,M,y,a,h,g)}function se(){this.value=this.g=0}function ve(){this.value=this.g=0}function ge(){this.G=l(5,se),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Mi,ve)}function je(T,M,y,a){t(T!=null),t(M!=null),t(2147483648>a),T.Ca=254,T.I=0,T.b=-8,T.Ka=0,T.oa=M,T.pa=y,T.Jd=M,T.Yc=y+a,T.Zc=4<=a?y+a-4+1:y,tt(T)}function $e(T,M){for(var y=0;0<M--;)y|=Xe(T,128)<<M;return y}function Ze(T,M){var y=$e(T,M);return We(T)?-y:y}function Me(T,M,y,a){var h,g=0;for(t(T!=null),t(M!=null),t(4294967288>a),T.Sb=a,T.Ra=0,T.u=0,T.h=0,4<a&&(a=4),h=0;h<a;++h)g+=M[y+h]<<8*h;T.Ra=g,T.bb=a,T.oa=M,T.pa=y}function Ue(T){for(;8<=T.u&&T.bb<T.Sb;)T.Ra>>>=8,T.Ra+=T.oa[T.pa+T.bb]<<qs-8>>>0,++T.bb,T.u-=8;Oe(T)&&(T.h=1,T.u=0)}function Qe(T,M){if(t(0<=M),!T.h&&M<=ks){var y=be(T)&Wl[M];return T.u+=M,Ue(T),y}return T.h=1,T.u=0}function ct(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ce(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function be(T){return T.Ra>>>(T.u&qs-1)>>>0}function Oe(T){return t(T.bb<=T.Sb),T.h||T.bb==T.Sb&&T.u>qs}function Be(T,M){T.u=M,T.h=Oe(T)}function qe(T){T.u>=xl&&(t(T.u>=xl),Ue(T))}function tt(T){t(T!=null&&T.oa!=null),T.pa<T.Zc?(T.I=(T.oa[T.pa++]|T.I<<8)>>>0,T.b+=8):(t(T!=null&&T.oa!=null),T.pa<T.Yc?(T.b+=8,T.I=T.oa[T.pa++]|T.I<<8):T.Ka?T.b=0:(T.I<<=8,T.b+=8,T.Ka=1))}function We(T){return $e(T,1)}function Xe(T,M){var y=T.Ca;0>T.b&&tt(T);var a=T.b,h=y*M>>>8,g=(T.I>>>a>h)+0;for(g?(y-=h,T.I-=h+1<<a>>>0):y=h+1,a=y,h=0;256<=a;)h+=8,a>>=8;return a=7^h+Qi[a],T.b-=a,T.Ca=(y<<a)-1,g}function lt(T,M,y){T[M+0]=y>>24&255,T[M+1]=y>>16&255,T[M+2]=y>>8&255,T[M+3]=y>>0&255}function wt(T,M){return T[M+0]<<0|T[M+1]<<8}function Lt(T,M){return wt(T,M)|T[M+2]<<16}function At(T,M){return wt(T,M)|wt(T,M+2)<<16}function zt(T,M){var y=1<<M;return t(T!=null),t(0<M),T.X=o(y),T.X==null?0:(T.Mb=32-M,T.Xa=M,1)}function vt(T,M){t(T!=null),t(M!=null),t(T.Xa==M.Xa),n(M.X,0,T.X,0,1<<M.Xa)}function pe(){this.X=[],this.Xa=this.Mb=0}function ur(T,M,y,a){t(y!=null),t(a!=null);var h=y[0],g=a[0];return h==0&&(h=(T*g+M/2)/M),g==0&&(g=(M*h+T/2)/T),0>=h||0>=g?0:(y[0]=h,a[0]=g,1)}function sr(T,M){return T+(1<<M)-1>>>M}function Tt(T,M){return((4278255360&T)+(4278255360&M)>>>0&4278255360)+((16711935&T)+(16711935&M)>>>0&16711935)>>>0}function Nt(T,M){re[M]=function(y,a,h,g,_,b,P){var I;for(I=0;I<_;++I){var L=re[T](b[P+I-1],h,g+I);b[P+I]=Tt(y[a+I],L)}}}function Zt(){this.ud=this.hd=this.jd=0}function rr(T,M){return((4278124286&(T^M))>>>1)+(T&M)>>>0}function at(T){return 0<=T&&256>T?T:0>T?0:255<T?255:void 0}function It(T,M){return at(T+(T-M+.5>>1))}function Vt(T,M,y){return Math.abs(M-y)-Math.abs(T-y)}function lr(T,M,y,a,h,g,_){for(a=g[_-1],y=0;y<h;++y)g[_+y]=a=Tt(T[M+y],a)}function Pr(T,M,y,a,h){var g;for(g=0;g<y;++g){var _=T[M+g],b=_>>8&255,P=16711935&(P=(P=16711935&_)+((b<<16)+b));a[h+g]=(4278255360&_)+P>>>0}}function _t(T,M){M.jd=T>>0&255,M.hd=T>>8&255,M.ud=T>>16&255}function Ut(T,M,y,a,h,g){var _;for(_=0;_<a;++_){var b=M[y+_],P=b>>>8,I=b,L=255&(L=(L=b>>>16)+((T.jd<<24>>24)*(P<<24>>24)>>>5));I=255&(I=(I=I+((T.hd<<24>>24)*(P<<24>>24)>>>5))+((T.ud<<24>>24)*(L<<24>>24)>>>5)),h[g+_]=(4278255360&b)+(L<<16)+I}}function _r(T,M,y,a,h){re[M]=function(g,_,b,P,I,L,V,W,q){for(P=V;P<W;++P)for(V=0;V<q;++V)I[L++]=h(b[a(g[_++])])},re[T]=function(g,_,b,P,I,L,V){var W=8>>g.b,q=g.Ea,oe=g.K[0],le=g.w;if(8>W)for(g=(1<<g.b)-1,le=(1<<W)-1;_<b;++_){var ie,fe=0;for(ie=0;ie<q;++ie)ie&g||(fe=a(P[I++])),L[V++]=h(oe[fe&le]),fe>>=W}else re["VP8LMapColor"+y](P,I,oe,le,L,V,_,b,q)}}function Kt(T,M,y,a,h){for(y=M+y;M<y;){var g=T[M++];a[h++]=g>>16&255,a[h++]=g>>8&255,a[h++]=g>>0&255}}function fn(T,M,y,a,h){for(y=M+y;M<y;){var g=T[M++];a[h++]=g>>16&255,a[h++]=g>>8&255,a[h++]=g>>0&255,a[h++]=g>>24&255}}function Dt(T,M,y,a,h){for(y=M+y;M<y;){var g=(_=T[M++])>>16&240|_>>12&15,_=_>>0&240|_>>28&15;a[h++]=g,a[h++]=_}}function Br(T,M,y,a,h){for(y=M+y;M<y;){var g=(_=T[M++])>>16&248|_>>13&7,_=_>>5&224|_>>3&31;a[h++]=g,a[h++]=_}}function dr(T,M,y,a,h){for(y=M+y;M<y;){var g=T[M++];a[h++]=g>>0&255,a[h++]=g>>8&255,a[h++]=g>>16&255}}function nn(T,M,y,a,h,g){if(g==0)for(y=M+y;M<y;)lt(a,((g=T[M++])[0]>>24|g[1]>>8&65280|g[2]<<8&16711680|g[3]<<24)>>>0),h+=32;else n(a,h,T,M,y)}function Kn(T,M){re[M][0]=re[T+"0"],re[M][1]=re[T+"1"],re[M][2]=re[T+"2"],re[M][3]=re[T+"3"],re[M][4]=re[T+"4"],re[M][5]=re[T+"5"],re[M][6]=re[T+"6"],re[M][7]=re[T+"7"],re[M][8]=re[T+"8"],re[M][9]=re[T+"9"],re[M][10]=re[T+"10"],re[M][11]=re[T+"11"],re[M][12]=re[T+"12"],re[M][13]=re[T+"13"],re[M][14]=re[T+"0"],re[M][15]=re[T+"0"]}function hr(T){return T==Ah||T==Uu||T==Eh||T==Pf}function Gn(){this.eb=[],this.size=this.A=this.fb=0}function Nn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function gi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Gn,this.f.kb=new Nn,this.sd=null}function Yr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ne(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ae(T){return alert("todo:WebPSamplerProcessPlane"),T.T}function ue(T,M){var y=T.T,a=M.ba.f.RGBA,h=a.eb,g=a.fb+T.ka*a.A,_=dn[M.ba.S],b=T.y,P=T.O,I=T.f,L=T.N,V=T.ea,W=T.W,q=M.cc,oe=M.dc,le=M.Mc,ie=M.Nc,fe=T.ka,Ae=T.ka+T.T,Te=T.U,ke=Te+1>>1;for(fe==0?_(b,P,null,null,I,L,V,W,I,L,V,W,h,g,null,null,Te):(_(M.ec,M.fc,b,P,q,oe,le,ie,I,L,V,W,h,g-a.A,h,g,Te),++y);fe+2<Ae;fe+=2)q=I,oe=L,le=V,ie=W,L+=T.Rc,W+=T.Rc,g+=2*a.A,_(b,(P+=2*T.fa)-T.fa,b,P,q,oe,le,ie,I,L,V,W,h,g-a.A,h,g,Te);return P+=T.fa,T.j+Ae<T.o?(n(M.ec,M.fc,b,P,Te),n(M.cc,M.dc,I,L,ke),n(M.Mc,M.Nc,V,W,ke),y--):1&Ae||_(b,P,null,null,I,L,V,W,I,L,V,W,h,g+a.A,null,null,Te),y}function Ee(T,M,y){var a=T.F,h=[T.J];if(a!=null){var g=T.U,_=M.ba.S,b=_==Sh||_==Eh;M=M.ba.f.RGBA;var P=[0],I=T.ka;P[0]=T.T,T.Kb&&(I==0?--P[0]:(--I,h[0]-=T.width),T.j+T.ka+T.T==T.o&&(P[0]=T.o-T.j-I));var L=M.eb;I=M.fb+I*M.A,T=eo(a,h[0],T.width,g,P,L,I+(b?0:3),M.A),t(y==P),T&&hr(_)&&_o(L,I,b,g,P,M.A)}return 0}function Fe(T){var M=T.ma,y=M.ba.S,a=11>y,h=y==Kl||y==Ja||y==Sh||y==Cf||y==12||hr(y);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!Rs(M.Oa,T,h?11:12))return 0;if(h&&hr(y)&&nr(),T.da)alert("todo:use_scaling");else{if(a){if(M.Ib=ae,T.Kb){if(y=T.U+1>>1,M.memory=o(T.U+2*y),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+T.U,M.Mc=M.cc,M.Nc=M.dc+y,M.Ib=ue,nr()}}else alert("todo:EmitYUV");h&&(M.Jb=Ee,a&&mt())}if(a&&!Ai){for(T=0;256>T;++T)Ih[T]=89858*(T-128)+Cd>>kf,Dm[T]=-22014*(T-128)+Cd,Id[T]=-45773*(T-128),Pd[T]=113618*(T-128)+Cd>>kf;for(T=Hu;T<Jp;++T)M=76283*(T-16)+Cd>>kf,Mf[T-Hu]=Tn(M,255),Of[T-Hu]=Tn(M+8>>4,15);Ai=1}return 1}function rt(T){var M=T.ma,y=T.U,a=T.T;return t(!(1&T.ka)),0>=y||0>=a?0:(y=M.Ib(T,M),M.Jb!=null&&M.Jb(T,M,y),M.Dc+=y,1)}function it(T){T.ma.memory=null}function et(T,M,y,a){return Qe(T,8)!=47?0:(M[0]=Qe(T,14)+1,y[0]=Qe(T,14)+1,a[0]=Qe(T,1),Qe(T,3)!=0?0:!T.h)}function Ke(T,M){if(4>T)return T+1;var y=T-2>>1;return(2+(1&T)<<y)+Qe(M,y)+1}function Et(T,M){return 120<M?M-120:1<=(y=((y=Qa[M-1])>>4)*T+(8-(15&y)))?y:1;var y}function Rt(T,M,y){var a=be(y),h=T[M+=255&a].g-8;return 0<h&&(Be(y,y.u+8),a=be(y),M+=T[M].value,M+=a&(1<<h)-1),Be(y,y.u+T[M].g),T[M].value}function gt(T,M,y){return y.g+=T.g,y.value+=T.value<<M>>>0,t(8>=y.g),T.g}function Wt(T,M,y){var a=T.xc;return t((M=a==0?0:T.vc[T.md*(y>>a)+(M>>a)])<T.Wb),T.Ya[M]}function mr(T,M,y,a){var h=T.ab,g=T.c*M,_=T.C;M=_+M;var b=y,P=a;for(a=T.Ta,y=T.Ua;0<h--;){var I=T.gc[h],L=_,V=M,W=b,q=P,oe=(P=a,b=y,I.Ea);switch(t(L<V),t(V<=I.nc),I.hc){case 2:Xl(W,q,(V-L)*oe,P,b);break;case 0:var le=L,ie=V,fe=P,Ae=b,Te=(Ge=I).Ea;le==0&&(Ka(W,q,null,null,1,fe,Ae),lr(W,q+1,0,0,Te-1,fe,Ae+1),q+=Te,Ae+=Te,++le);for(var ke=1<<Ge.b,Ie=ke-1,ze=sr(Te,Ge.b),Je=Ge.K,Ge=Ge.w+(le>>Ge.b)*ze;le<ie;){var Pt=Je,Ft=Ge,Ht=1;for(Ga(W,q,fe,Ae-Te,1,fe,Ae);Ht<Te;){var Gt=(Ht&~Ie)+ke;Gt>Te&&(Gt=Te),(0,nt[Pt[Ft++]>>8&15])(W,q+ +Ht,fe,Ae+Ht-Te,Gt-Ht,fe,Ae+Ht),Ht=Gt}q+=Te,Ae+=Te,++le&Ie||(Ge+=ze)}V!=I.nc&&n(P,b-oe,P,b+(V-L-1)*oe,oe);break;case 1:for(oe=W,ie=q,Te=(W=I.Ea)-(Ae=W&~(fe=(q=1<<I.b)-1)),le=sr(W,I.b),ke=I.K,I=I.w+(L>>I.b)*le;L<V;){for(Ie=ke,ze=I,Je=new Zt,Ge=ie+Ae,Pt=ie+W;ie<Ge;)_t(Ie[ze++],Je),Ct(Je,oe,ie,q,P,b),ie+=q,b+=q;ie<Pt&&(_t(Ie[ze++],Je),Ct(Je,oe,ie,Te,P,b),ie+=Te,b+=Te),++L&fe||(I+=le)}break;case 3:if(W==P&&q==b&&0<I.b){for(ie=P,W=oe=b+(V-L)*oe-(Ae=(V-L)*sr(I.Ea,I.b)),q=P,fe=b,le=[],Ae=(Te=Ae)-1;0<=Ae;--Ae)le[Ae]=q[fe+Ae];for(Ae=Te-1;0<=Ae;--Ae)ie[W+Ae]=le[Ae];Bo(I,L,V,P,oe,P,b)}else Bo(I,L,V,W,q,P,b)}b=a,P=y}P!=y&&n(a,y,b,P,g)}function Ar(T,M){var y=T.V,a=T.Ba+T.c*T.C,h=M-T.C;if(t(M<=T.l.o),t(16>=h),0<h){var g=T.l,_=T.Ta,b=T.Ua,P=g.width;if(mr(T,h,y,a),h=b=[b],t((y=T.C)<(a=M)),t(g.v<g.va),a>g.o&&(a=g.o),y<g.j){var I=g.j-y;y=g.j,h[0]+=I*P}if(y>=a?y=0:(h[0]+=4*g.v,g.ka=y-g.j,g.U=g.va-g.v,g.T=a-y,y=1),y){if(b=b[0],11>(y=T.ca).S){var L=y.f.RGBA,V=(a=y.S,h=g.U,g=g.T,I=L.eb,L.A),W=g;for(L=L.fb+T.Ma*L.A;0<W--;){var q=_,oe=b,le=h,ie=I,fe=L;switch(a){case wl:cr(q,oe,le,ie,fe);break;case Kl:kr(q,oe,le,ie,fe);break;case Ah:kr(q,oe,le,ie,fe),_o(ie,fe,0,le,1,0);break;case Ec:Yn(q,oe,le,ie,fe);break;case Ja:nn(q,oe,le,ie,fe,1);break;case Uu:nn(q,oe,le,ie,fe,1),_o(ie,fe,0,le,1,0);break;case Sh:nn(q,oe,le,ie,fe,0);break;case Eh:nn(q,oe,le,ie,fe,0),_o(ie,fe,1,le,1,0);break;case Cf:Rn(q,oe,le,ie,fe);break;case Pf:Rn(q,oe,le,ie,fe),Oi(ie,fe,le,1,0);break;case iu:gn(q,oe,le,ie,fe);break;default:t(0)}b+=P,L+=V}T.Ma+=g}else alert("todo:EmitRescaledRowsYUVA");t(T.Ma<=y.height)}}T.C=M,t(T.C<=T.i)}function pn(T){var M;if(0<T.ua)return 0;for(M=0;M<T.Wb;++M){var y=T.Ya[M].G,a=T.Ya[M].H;if(0<y[1][a[1]+0].g||0<y[2][a[2]+0].g||0<y[3][a[3]+0].g)return 0}return 1}function Or(T,M,y,a,h,g){if(T.Z!=0){var _=T.qd,b=T.rd;for(t(Zl[T.Z]!=null);M<y;++M)Zl[T.Z](_,b,a,h,a,h,g),_=a,b=h,h+=g;T.qd=_,T.rd=b}}function en(T,M){var y=T.l.ma,a=y.Z==0||y.Z==1?T.l.j:T.C;if(a=T.C<a?a:T.C,t(M<=T.l.o),M>a){var h=T.l.width,g=y.ca,_=y.tb+h*a,b=T.V,P=T.Ba+T.c*a,I=T.gc;t(T.ab==1),t(I[0].hc==3),zu(I[0],a,M,b,P,g,_),Or(y,a,M,g,_,h)}T.C=T.Ma=M}function Zr(T,M,y,a,h,g,_){var b=T.$/a,P=T.$%a,I=T.m,L=T.s,V=y+T.$,W=V;h=y+a*h;var q=y+a*g,oe=280+L.ua,le=T.Pb?b:16777216,ie=0<L.ua?L.Wa:null,fe=L.wc,Ae=V<q?Wt(L,P,b):null;t(T.C<g),t(q<=h);var Te=!1;e:for(;;){for(;Te||V<q;){var ke=0;if(b>=le){var Ie=V-y;t((le=T).Pb),le.wd=le.m,le.xd=Ie,0<le.s.ua&&vt(le.s.Wa,le.s.vb),le=b+Wp}if(P&fe||(Ae=Wt(L,P,b)),t(Ae!=null),Ae.Qb&&(M[V]=Ae.qb,Te=!0),!Te)if(qe(I),Ae.jc){ke=I,Ie=M;var ze=V,Je=Ae.pd[be(ke)&Mi-1];t(Ae.jc),256>Je.g?(Be(ke,ke.u+Je.g),Ie[ze]=Je.value,ke=0):(Be(ke,ke.u+Je.g-256),t(256<=Je.value),ke=Je.value),ke==0&&(Te=!0)}else ke=Rt(Ae.G[0],Ae.H[0],I);if(I.h)break;if(Te||256>ke){if(!Te)if(Ae.nd)M[V]=(Ae.qb|ke<<8)>>>0;else{if(qe(I),Te=Rt(Ae.G[1],Ae.H[1],I),qe(I),Ie=Rt(Ae.G[2],Ae.H[2],I),ze=Rt(Ae.G[3],Ae.H[3],I),I.h)break;M[V]=(ze<<24|Te<<16|ke<<8|Ie)>>>0}if(Te=!1,++V,++P>=a&&(P=0,++b,_!=null&&b<=g&&!(b%16)&&_(T,b),ie!=null))for(;W<V;)ke=M[W++],ie.X[(506832829*ke&4294967295)>>>ie.Mb]=ke}else if(280>ke){if(ke=Ke(ke-256,I),Ie=Rt(Ae.G[4],Ae.H[4],I),qe(I),Ie=Et(a,Ie=Ke(Ie,I)),I.h)break;if(V-y<Ie||h-V<ke)break e;for(ze=0;ze<ke;++ze)M[V+ze]=M[V+ze-Ie];for(V+=ke,P+=ke;P>=a;)P-=a,++b,_!=null&&b<=g&&!(b%16)&&_(T,b);if(t(V<=h),P&fe&&(Ae=Wt(L,P,b)),ie!=null)for(;W<V;)ke=M[W++],ie.X[(506832829*ke&4294967295)>>>ie.Mb]=ke}else{if(!(ke<oe))break e;for(Te=ke-280,t(ie!=null);W<V;)ke=M[W++],ie.X[(506832829*ke&4294967295)>>>ie.Mb]=ke;ke=V,t(!(Te>>>(Ie=ie).Xa)),M[ke]=Ie.X[Te],Te=!0}Te||t(I.h==Oe(I))}if(T.Pb&&I.h&&V<h)t(T.m.h),T.a=5,T.m=T.wd,T.$=T.xd,0<T.s.ua&&vt(T.s.vb,T.s.Wa);else{if(I.h)break e;_!=null&&_(T,b>g?g:b),T.a=0,T.$=V-y}return 1}return T.a=3,0}function jn(T){t(T!=null),T.vc=null,T.yc=null,T.Ya=null;var M=T.Wa;M!=null&&(M.X=null),T.vb=null,t(T!=null)}function Jr(){var T=new Hl;return T==null?null:(T.a=0,T.xb=ju,Kn("Predictor","VP8LPredictors"),Kn("Predictor","VP8LPredictors_C"),Kn("PredictorAdd","VP8LPredictorsAdd"),Kn("PredictorAdd","VP8LPredictorsAdd_C"),Xl=Pr,Ct=Ut,cr=Kt,kr=fn,Rn=Dt,gn=Br,Yn=dr,re.VP8LMapColor32b=Ms,re.VP8LMapColor8b=$u,T)}function Ur(T,M,y,a,h){var g=1,_=[T],b=[M],P=a.m,I=a.s,L=null,V=0;e:for(;;){if(y)for(;g&&Qe(P,1);){var W=_,q=b,oe=a,le=1,ie=oe.m,fe=oe.gc[oe.ab],Ae=Qe(ie,2);if(oe.Oc&1<<Ae)g=0;else{switch(oe.Oc|=1<<Ae,fe.hc=Ae,fe.Ea=W[0],fe.nc=q[0],fe.K=[null],++oe.ab,t(4>=oe.ab),Ae){case 0:case 1:fe.b=Qe(ie,3)+2,le=Ur(sr(fe.Ea,fe.b),sr(fe.nc,fe.b),0,oe,fe.K),fe.K=fe.K[0];break;case 3:var Te,ke=Qe(ie,8)+1,Ie=16<ke?0:4<ke?1:2<ke?2:3;if(W[0]=sr(fe.Ea,Ie),fe.b=Ie,Te=le=Ur(ke,1,0,oe,fe.K)){var ze,Je=ke,Ge=fe,Pt=1<<(8>>Ge.b),Ft=o(Pt);if(Ft==null)Te=0;else{var Ht=Ge.K[0],Gt=Ge.w;for(Ft[0]=Ge.K[0][0],ze=1;ze<1*Je;++ze)Ft[ze]=Tt(Ht[Gt+ze],Ft[ze-1]);for(;ze<4*Pt;++ze)Ft[ze]=0;Ge.K[0]=null,Ge.K[0]=Ft,Te=1}}le=Te;break;case 2:break;default:t(0)}g=le}}if(_=_[0],b=b[0],g&&Qe(P,1)&&!(g=1<=(V=Qe(P,4))&&11>=V)){a.a=3;break e}var Xt;if(Xt=g)t:{var qt,Yt,Ir,ir=a,or=_,Nr=b,Qr=V,Wr=y,sn=ir.m,An=ir.s,Zn=[null],Di=1,$n=0,to=Gl[Qr];r:for(;;){if(Wr&&Qe(sn,1)){var Jn=Qe(sn,3)+2,Wi=sr(or,Jn),bo=sr(Nr,Jn),Xs=Wi*bo;if(!Ur(Wi,bo,0,ir,Zn))break r;for(Zn=Zn[0],An.xc=Jn,qt=0;qt<Xs;++qt){var Ta=Zn[qt]>>8&65535;Zn[qt]=Ta,Ta>=Di&&(Di=Ta+1)}}if(sn.h)break r;for(Yt=0;5>Yt;++Yt){var Li=If[Yt];!Yt&&0<Qr&&(Li+=1<<Qr),$n<Li&&($n=Li)}var su=l(Di*to,se),Ca=Di,Df=l(Ca,ge);if(Df==null)var Rh=null;else t(65536>=Ca),Rh=Df;var Os=o($n);if(Rh==null||Os==null||su==null){ir.a=1;break r}var Ks=su;for(qt=Ir=0;qt<Di;++qt){var Qo=Rh[qt],Ns=Qo.G,co=Qo.H,gs=0,Ds=1,Dn=0;for(Yt=0;5>Yt;++Yt){Li=If[Yt],Ns[Yt]=Ks,co[Yt]=Ir,!Yt&&0<Qr&&(Li+=1<<Qr);i:{var Jl,au=Li,Cc=ir,kh=Os,G_=Ks,Lm=Ir,Ql=0,Pc=Cc.m,Rd=Qe(Pc,1);if(i(kh,0,0,au),Rd){var Lf=Qe(Pc,1)+1,kd=Qe(Pc,1),Ff=Qe(Pc,kd==0?1:8);kh[Ff]=1,Lf==2&&(kh[Ff=Qe(Pc,8)]=1);var Ic=1}else{var Mh=o(19),Qp=Qe(Pc,4)+4;if(19<Qp){Cc.a=3;var eg=0;break i}for(Jl=0;Jl<Qp;++Jl)Mh[km[Jl]]=Qe(Pc,3);var Fm=void 0,tg=void 0,Bm=Cc,rg=Mh,qu=au,lu=kh,El=0,Pa=Bm.m,Y_=8,Oh=l(128,se);n:for(;G(Oh,0,7,rg,19);){if(Qe(Pa,1)){var CA=2+2*Qe(Pa,3);if((Fm=2+Qe(Pa,CA))>qu)break n}else Fm=qu;for(tg=0;tg<qu&&Fm--;){qe(Pa);var Z_=Oh[0+(127&be(Pa))];Be(Pa,Pa.u+Z_.g);var Fi=Z_.value;if(16>Fi)lu[tg++]=Fi,Fi!=0&&(Y_=Fi);else{var J_=Fi==16,Q_=Fi-16,Bf=qp[Q_],Nh=Qe(Pa,Hp[Q_])+Bf;if(tg+Nh>qu)break n;for(var zm=J_?Y_:0;0<Nh--;)lu[tg++]=zm}}El=1;break n}El||(Bm.a=3),Ic=El}(Ic=Ic&&!Pc.h)&&(Ql=G(G_,Lm,8,kh,au)),Ic&&Ql!=0?eg=Ql:(Cc.a=3,eg=0)}if(eg==0)break r;if(Ds&&Th[Yt]==1&&(Ds=Ks[Ir].g==0),gs+=Ks[Ir].g,Ir+=eg,3>=Yt){var zf,$m=Os[0];for(zf=1;zf<Li;++zf)Os[zf]>$m&&($m=Os[zf]);Dn+=$m}}if(Qo.nd=Ds,Qo.Qb=0,Ds&&(Qo.qb=(Ns[3][co[3]+0].value<<24|Ns[1][co[1]+0].value<<16|Ns[2][co[2]+0].value)>>>0,gs==0&&256>Ns[0][co[0]+0].value&&(Qo.Qb=1,Qo.qb+=Ns[0][co[0]+0].value<<8)),Qo.jc=!Qo.Qb&&6>Dn,Qo.jc){var Um,cu=Qo;for(Um=0;Um<Mi;++Um){var Dh=Um,uu=cu.pd[Dh],jm=cu.G[0][cu.H[0]+Dh];256<=jm.value?(uu.g=jm.g+256,uu.value=jm.value):(uu.g=0,uu.value=0,Dh>>=gt(jm,8,uu),Dh>>=gt(cu.G[1][cu.H[1]+Dh],16,uu),Dh>>=gt(cu.G[2][cu.H[2]+Dh],0,uu),gt(cu.G[3][cu.H[3]+Dh],24,uu))}}}An.vc=Zn,An.Wb=Di,An.Ya=Rh,An.yc=su,Xt=1;break t}Xt=0}if(!(g=Xt)){a.a=3;break e}if(0<V){if(I.ua=1<<V,!zt(I.Wa,V)){a.a=1,g=0;break e}}else I.ua=0;var ng=a,e1=_,Pb=b,Lh=ng.s,t1=Lh.xc;if(ng.c=e1,ng.i=Pb,Lh.md=sr(e1,t1),Lh.wc=t1==0?-1:(1<<t1)-1,y){a.xb=Ph;break e}if((L=o(_*b))==null){a.a=1,g=0;break e}g=(g=Zr(a,L,0,_,b,b,null))&&!P.h;break e}return g?(h!=null?h[0]=L:(t(L==null),t(y)),a.$=0,y||jn(I)):jn(I),g}function vn(T,M){var y=T.c*T.i,a=y+M+16*M;return t(T.c<=M),T.V=o(a),T.V==null?(T.Ta=null,T.Ua=0,T.a=1,0):(T.Ta=T.V,T.Ua=T.Ba+y+M,1)}function Fn(T,M){var y=T.C,a=M-y,h=T.V,g=T.Ba+T.c*y;for(t(M<=T.l.o);0<a;){var _=16<a?16:a,b=T.l.ma,P=T.l.width,I=P*_,L=b.ca,V=b.tb+P*y,W=T.Ta,q=T.Ua;mr(T,_,h,g),wa(W,q,L,V,I),Or(b,y,y+_,L,V,P),a-=_,h+=_*T.c,y+=_}t(y==M),T.C=T.Ma=M}function ei(){this.ub=this.yd=this.td=this.Rb=0}function mi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ii(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function ma(){this.Yb=function(){var T=[];return function M(y,a,h){for(var g=h[a],_=0;_<g&&(y.push(h.length>a+1?[]:0),!(h.length<a+1));_++)M(y[_],a+1,h)}(T,0,[3,11]),T}()}function En(){this.jb=o(3),this.Wc=s([4,8],ma),this.Xc=s([4,17],ma)}function so(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Lo(){this.ld=this.La=this.dd=this.tc=0}function yn(){this.Na=this.la=0}function yi(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Qs(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Vn(){this.uc=this.M=this.Nb=0,this.wa=Array(new Lo),this.Y=0,this.ya=Array(new Qs),this.aa=0,this.l=new Ji}function zn(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Ts(){this.cb=this.a=0,this.sc="",this.m=new ct,this.Od=new ei,this.Kc=new mi,this.ed=new so,this.Qa=new Ii,this.Ic=this.$c=this.Aa=0,this.D=new Vn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,ct),this.ia=0,this.pb=l(4,yi),this.Pa=new En,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new zn),this.Hd=0,this.rb=Array(new yn),this.sb=0,this.wa=Array(new Lo),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Qs),this.L=this.aa=0,this.gd=s([4,2],Lo),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ji(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Un(){var T=new Ts;return T!=null&&(T.a=0,T.sc="OK",T.cb=0,T.Xb=0,Rf||(Rf=ya)),T}function kn(T,M,y){return T.a==0&&(T.a=M,T.sc=y,T.cb=0),0}function go(T,M,y){return 3<=y&&T[M+0]==157&&T[M+1]==1&&T[M+2]==42}function si(T,M){if(T==null)return 0;if(T.a=0,T.sc="OK",M==null)return kn(T,2,"null VP8Io passed to VP8GetHeaders()");var y=M.data,a=M.w,h=M.ha;if(4>h)return kn(T,7,"Truncated header.");var g=y[a+0]|y[a+1]<<8|y[a+2]<<16,_=T.Od;if(_.Rb=!(1&g),_.td=g>>1&7,_.yd=g>>4&1,_.ub=g>>5,3<_.td)return kn(T,3,"Incorrect keyframe parameters.");if(!_.yd)return kn(T,4,"Frame not displayable.");a+=3,h-=3;var b=T.Kc;if(_.Rb){if(7>h)return kn(T,7,"cannot parse picture header");if(!go(y,a,h))return kn(T,3,"Bad code word");b.c=16383&(y[a+4]<<8|y[a+3]),b.Td=y[a+4]>>6,b.i=16383&(y[a+6]<<8|y[a+5]),b.Ud=y[a+6]>>6,a+=7,h-=7,T.za=b.c+15>>4,T.Ub=b.i+15>>4,M.width=b.c,M.height=b.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,i((g=T.Pa).jb,0,255,g.jb.length),t((g=T.Qa)!=null),g.Cb=0,g.Bb=0,g.Fb=1,i(g.Zb,0,0,g.Zb.length),i(g.Lb,0,0,g.Lb)}if(_.ub>h)return kn(T,7,"bad partition length");je(g=T.m,y,a,_.ub),a+=_.ub,h-=_.ub,_.Rb&&(b.Ld=We(g),b.Kd=We(g)),b=T.Qa;var P,I=T.Pa;if(t(g!=null),t(b!=null),b.Cb=We(g),b.Cb){if(b.Bb=We(g),We(g)){for(b.Fb=We(g),P=0;4>P;++P)b.Zb[P]=We(g)?Ze(g,7):0;for(P=0;4>P;++P)b.Lb[P]=We(g)?Ze(g,6):0}if(b.Bb)for(P=0;3>P;++P)I.jb[P]=We(g)?$e(g,8):255}else b.Bb=0;if(g.Ka)return kn(T,3,"cannot parse segment header");if((b=T.ed).zd=We(g),b.Tb=$e(g,6),b.wb=$e(g,3),b.Pc=We(g),b.Pc&&We(g)){for(I=0;4>I;++I)We(g)&&(b.vd[I]=Ze(g,6));for(I=0;4>I;++I)We(g)&&(b.od[I]=Ze(g,6))}if(T.L=b.Tb==0?0:b.zd?1:2,g.Ka)return kn(T,3,"cannot parse filter header");var L=h;if(h=P=a,a=P+L,b=L,T.Xb=(1<<$e(T.m,2))-1,L<3*(I=T.Xb))y=7;else{for(P+=3*I,b-=3*I,L=0;L<I;++L){var V=y[h+0]|y[h+1]<<8|y[h+2]<<16;V>b&&(V=b),je(T.Jc[+L],y,P,V),P+=V,b-=V,h+=3}je(T.Jc[+I],y,P,b),y=P<a?0:5}if(y!=0)return kn(T,y,"cannot parse partitions");for(y=$e(P=T.m,7),h=We(P)?Ze(P,4):0,a=We(P)?Ze(P,4):0,b=We(P)?Ze(P,4):0,I=We(P)?Ze(P,4):0,P=We(P)?Ze(P,4):0,L=T.Qa,V=0;4>V;++V){if(L.Cb){var W=L.Zb[V];L.Fb||(W+=y)}else{if(0<V){T.pb[V]=T.pb[0];continue}W=y}var q=T.pb[V];q.Sc[0]=Sa[Tn(W+h,127)],q.Sc[1]=Tc[Tn(W+0,127)],q.Eb[0]=2*Sa[Tn(W+a,127)],q.Eb[1]=101581*Tc[Tn(W+b,127)]>>16,8>q.Eb[1]&&(q.Eb[1]=8),q.Qc[0]=Sa[Tn(W+I,117)],q.Qc[1]=Tc[Tn(W+P,127)],q.lc=W+P}if(!_.Rb)return kn(T,4,"Not a key frame.");for(We(g),_=T.Pa,y=0;4>y;++y){for(h=0;8>h;++h)for(a=0;3>a;++a)for(b=0;11>b;++b)I=Xe(g,el[y][h][a][b])?$e(g,8):Kp[y][h][a][b],_.Wc[y][h].Yb[a][b]=I;for(h=0;17>h;++h)_.Xc[y][h]=_.Wc[y][Sr[h]]}return T.kc=We(g),T.kc&&(T.Bd=$e(g,8)),T.cb=1}function ya(T,M,y,a,h,g,_){var b=M[h].Yb[y];for(y=0;16>h;++h){if(!Xe(T,b[y+0]))return h;for(;!Xe(T,b[y+1]);)if(b=M[++h].Yb[0],y=0,h==16)return 16;var P=M[h+1].Yb;if(Xe(T,b[y+2])){var I=T,L=0;if(Xe(I,(W=b)[(V=y)+3]))if(Xe(I,W[V+6])){for(b=0,V=2*(L=Xe(I,W[V+8]))+(W=Xe(I,W[V+9+L])),L=0,W=X_[V];W[b];++b)L+=L+Xe(I,W[b]);L+=3+(8<<V)}else Xe(I,W[V+7])?(L=7+2*Xe(I,165),L+=Xe(I,145)):L=5+Xe(I,159);else L=Xe(I,W[V+4])?3+Xe(I,W[V+5]):2;b=P[2]}else L=1,b=P[1];P=_+Mm[h],0>(I=T).b&&tt(I);var V,W=I.b,q=(V=I.Ca>>1)-(I.I>>W)>>31;--I.b,I.Ca+=q,I.Ca|=1,I.I-=(V+1&q)<<W,g[P]=((L^q)-q)*a[(0<h)+0]}return 16}function ao(T){var M=T.rb[T.sb-1];M.la=0,M.Na=0,i(T.zc,0,0,T.zc.length),T.ja=0}function _a(T,M){if(T==null)return 0;if(M==null)return kn(T,2,"NULL VP8Io parameter in VP8Decode().");if(!T.cb&&!si(T,M))return 0;if(t(T.cb),M.ac==null||M.ac(M)){M.ob&&(T.L=0);var y=ou[T.L];if(T.L==2?(T.yb=0,T.zb=0):(T.yb=M.v-y>>4,T.zb=M.j-y>>4,0>T.yb&&(T.yb=0),0>T.zb&&(T.zb=0)),T.Va=M.o+15+y>>4,T.Hb=M.va+15+y>>4,T.Hb>T.za&&(T.Hb=T.za),T.Va>T.Ub&&(T.Va=T.Ub),0<T.L){var a=T.ed;for(y=0;4>y;++y){var h;if(T.Qa.Cb){var g=T.Qa.Lb[y];T.Qa.Fb||(g+=a.Tb)}else g=a.Tb;for(h=0;1>=h;++h){var _=T.gd[y][h],b=g;if(a.Pc&&(b+=a.vd[0],h&&(b+=a.od[0])),0<(b=0>b?0:63<b?63:b)){var P=b;0<a.wb&&(P=4<a.wb?P>>2:P>>1)>9-a.wb&&(P=9-a.wb),1>P&&(P=1),_.dd=P,_.tc=2*b+P,_.ld=40<=b?2:15<=b?1:0}else _.tc=0;_.La=h}}}y=0}else kn(T,6,"Frame setup failed"),y=T.a;if(y=y==0){if(y){T.$c=0,0<T.Aa||(T.Ic=qr);e:{y=T.Ic,a=4*(P=T.za);var I=32*P,L=P+1,V=0<T.L?P*(0<T.Aa?2:1):0,W=(T.Aa==2?2:1)*P;if((_=a+832+(h=3*(16*y+ou[T.L])/2*I)+(g=T.Fa!=null&&0<T.Fa.length?T.Kc.c*T.Kc.i:0))!=_)y=0;else{if(_>T.Vb){if(T.Vb=0,T.Ec=o(_),T.Fc=0,T.Ec==null){y=kn(T,1,"no memory during frame initialization.");break e}T.Vb=_}_=T.Ec,b=T.Fc,T.Ac=_,T.Bc=b,b+=a,T.Gd=l(I,zn),T.Hd=0,T.rb=l(L+1,yn),T.sb=1,T.wa=V?l(V,Lo):null,T.Y=0,T.D.Nb=0,T.D.wa=T.wa,T.D.Y=T.Y,0<T.Aa&&(T.D.Y+=P),t(!0),T.oc=_,T.pc=b,b+=832,T.ya=l(W,Qs),T.aa=0,T.D.ya=T.ya,T.D.aa=T.aa,T.Aa==2&&(T.D.aa+=P),T.R=16*P,T.B=8*P,P=(I=ou[T.L])*T.R,I=I/2*T.B,T.sa=_,T.ta=b+P,T.qa=T.sa,T.ra=T.ta+16*y*T.R+I,T.Ha=T.qa,T.Ia=T.ra+8*y*T.B+I,T.$c=0,b+=h,T.mb=g?_:null,T.nb=g?b:null,t(b+g<=T.Fc+T.Vb),ao(T),i(T.Ac,T.Bc,0,a),y=1}}if(y){if(M.ka=0,M.y=T.sa,M.O=T.ta,M.f=T.qa,M.N=T.ra,M.ea=T.Ha,M.Vd=T.Ia,M.fa=T.R,M.Rc=T.B,M.F=null,M.J=0,!oa){for(y=-255;255>=y;++y)Ya[255+y]=0>y?-y:y;for(y=-1020;1020>=y;++y)hi[1020+y]=-128>y?-128:127<y?127:y;for(y=-112;112>=y;++y)ps[112+y]=-16>y?-16:15<y?15:y;for(y=-255;510>=y;++y)vo[255+y]=0>y?0:255<y?255:y;oa=1}qn=Z,zo=xn,ri=D,Si=X,qi=j,_i=hs,vi=Ul,Zo=jl,$o=Fu,ds=tu,Ws=Vs,yo=_l,ia=wc,bi=Vl,ui=ta,rn=Sn,on=ra,Jo=Tf,Aa[0]=wn,Aa[1]=we,Aa[2]=$t,Aa[3]=Tr,Aa[4]=Hi,Aa[5]=zl,Aa[6]=ai,Aa[7]=Qc,Aa[8]=xh,Aa[9]=li,Sl[0]=Jt,Sl[1]=ft,Sl[2]=Mt,Sl[3]=Qt,Sl[4]=yr,Sl[5]=ti,Sl[6]=zr,Yl[0]=va,Yl[1]=Le,Yl[2]=Ef,Yl[3]=Ps,Yl[4]=ba,Yl[5]=xc,Yl[6]=$l,y=1}else y=0}y&&(y=function(q,oe){for(q.M=0;q.M<q.Va;++q.M){var le,ie=q.Jc[q.M&q.Xb],fe=q.m,Ae=q;for(le=0;le<Ae.za;++le){var Te=fe,ke=Ae,Ie=ke.Ac,ze=ke.Bc+4*le,Je=ke.zc,Ge=ke.ya[ke.aa+le];if(ke.Qa.Bb?Ge.$b=Xe(Te,ke.Pa.jb[0])?2+Xe(Te,ke.Pa.jb[2]):Xe(Te,ke.Pa.jb[1]):Ge.$b=0,ke.kc&&(Ge.Ad=Xe(Te,ke.Bd)),Ge.Za=!Xe(Te,145)+0,Ge.Za){var Pt=Ge.Ob,Ft=0;for(ke=0;4>ke;++ke){var Ht,Gt=Je[0+ke];for(Ht=0;4>Ht;++Ht){Gt=Ch[Ie[ze+Ht]][Gt];for(var Xt=Xp[Xe(Te,Gt[0])];0<Xt;)Xt=Xp[2*Xt+Xe(Te,Gt[Xt])];Gt=-Xt,Ie[ze+Ht]=Gt}n(Pt,Ft,Ie,ze,4),Ft+=4,Je[0+ke]=Gt}}else Gt=Xe(Te,156)?Xe(Te,128)?1:3:Xe(Te,163)?2:0,Ge.Ob[0]=Gt,i(Ie,ze,Gt,4),i(Je,0,Gt,4);Ge.Dd=Xe(Te,142)?Xe(Te,114)?Xe(Te,183)?1:3:2:0}if(Ae.m.Ka)return kn(q,7,"Premature end-of-partition0 encountered.");for(;q.ja<q.za;++q.ja){if(Ae=ie,Te=(fe=q).rb[fe.sb-1],Ie=fe.rb[fe.sb+fe.ja],le=fe.ya[fe.aa+fe.ja],ze=fe.kc?le.Ad:0)Te.la=Ie.la=0,le.Za||(Te.Na=Ie.Na=0),le.Hc=0,le.Gc=0,le.ia=0;else{var qt,Yt;if(Te=Ie,Ie=Ae,ze=fe.Pa.Xc,Je=fe.ya[fe.aa+fe.ja],Ge=fe.pb[Je.$b],ke=Je.ad,Pt=0,Ft=fe.rb[fe.sb-1],Gt=Ht=0,i(ke,Pt,0,384),Je.Za)var Ir=0,ir=ze[3];else{Xt=o(16);var or=Te.Na+Ft.Na;if(or=Rf(Ie,ze[1],or,Ge.Eb,0,Xt,0),Te.Na=Ft.Na=(0<or)+0,1<or)qn(Xt,0,ke,Pt);else{var Nr=Xt[0]+3>>3;for(Xt=0;256>Xt;Xt+=16)ke[Pt+Xt]=Nr}Ir=1,ir=ze[0]}var Qr=15&Te.la,Wr=15&Ft.la;for(Xt=0;4>Xt;++Xt){var sn=1&Wr;for(Nr=Yt=0;4>Nr;++Nr)Qr=Qr>>1|(sn=(or=Rf(Ie,ir,or=sn+(1&Qr),Ge.Sc,Ir,ke,Pt))>Ir)<<7,Yt=Yt<<2|(3<or?3:1<or?2:ke[Pt+0]!=0),Pt+=16;Qr>>=4,Wr=Wr>>1|sn<<7,Ht=(Ht<<8|Yt)>>>0}for(ir=Qr,Ir=Wr>>4,qt=0;4>qt;qt+=2){for(Yt=0,Qr=Te.la>>4+qt,Wr=Ft.la>>4+qt,Xt=0;2>Xt;++Xt){for(sn=1&Wr,Nr=0;2>Nr;++Nr)or=sn+(1&Qr),Qr=Qr>>1|(sn=0<(or=Rf(Ie,ze[2],or,Ge.Qc,0,ke,Pt)))<<3,Yt=Yt<<2|(3<or?3:1<or?2:ke[Pt+0]!=0),Pt+=16;Qr>>=2,Wr=Wr>>1|sn<<5}Gt|=Yt<<4*qt,ir|=Qr<<4<<qt,Ir|=(240&Wr)<<qt}Te.la=ir,Ft.la=Ir,Je.Hc=Ht,Je.Gc=Gt,Je.ia=43690&Gt?0:Ge.ia,ze=!(Ht|Gt)}if(0<fe.L&&(fe.wa[fe.Y+fe.ja]=fe.gd[le.$b][le.Za],fe.wa[fe.Y+fe.ja].La|=!ze),Ae.Ka)return kn(q,7,"Premature end-of-file encountered.")}if(ao(q),fe=oe,Ae=1,le=(ie=q).D,Te=0<ie.L&&ie.M>=ie.zb&&ie.M<=ie.Va,ie.Aa==0)e:{if(le.M=ie.M,le.uc=Te,Xa(ie,le),Ae=1,le=(Yt=ie.D).Nb,Te=(Gt=ou[ie.L])*ie.R,Ie=Gt/2*ie.B,Xt=16*le*ie.R,Nr=8*le*ie.B,ze=ie.sa,Je=ie.ta-Te+Xt,Ge=ie.qa,ke=ie.ra-Ie+Nr,Pt=ie.Ha,Ft=ie.Ia-Ie+Nr,Wr=(Qr=Yt.M)==0,Ht=Qr>=ie.Va-1,ie.Aa==2&&Xa(ie,Yt),Yt.uc)for(sn=(or=ie).D.M,t(or.D.uc),Yt=or.yb;Yt<or.Hb;++Yt){Ir=Yt,ir=sn;var An=(Zn=(Li=or).D).Nb;qt=Li.R;var Zn=Zn.wa[Zn.Y+Ir],Di=Li.sa,$n=Li.ta+16*An*qt+16*Ir,to=Zn.dd,Jn=Zn.tc;if(Jn!=0)if(t(3<=Jn),Li.L==1)0<Ir&&rn(Di,$n,qt,Jn+4),Zn.La&&Jo(Di,$n,qt,Jn),0<ir&&ui(Di,$n,qt,Jn+4),Zn.La&&on(Di,$n,qt,Jn);else{var Wi=Li.B,bo=Li.qa,Xs=Li.ra+8*An*Wi+8*Ir,Ta=Li.Ha,Li=Li.Ia+8*An*Wi+8*Ir;An=Zn.ld,0<Ir&&(Zo(Di,$n,qt,Jn+4,to,An),ds(bo,Xs,Ta,Li,Wi,Jn+4,to,An)),Zn.La&&(yo(Di,$n,qt,Jn,to,An),bi(bo,Xs,Ta,Li,Wi,Jn,to,An)),0<ir&&(vi(Di,$n,qt,Jn+4,to,An),$o(bo,Xs,Ta,Li,Wi,Jn+4,to,An)),Zn.La&&(Ws(Di,$n,qt,Jn,to,An),ia(bo,Xs,Ta,Li,Wi,Jn,to,An))}}if(ie.ia&&alert("todo:DitherRow"),fe.put!=null){if(Yt=16*Qr,Qr=16*(Qr+1),Wr?(fe.y=ie.sa,fe.O=ie.ta+Xt,fe.f=ie.qa,fe.N=ie.ra+Nr,fe.ea=ie.Ha,fe.W=ie.Ia+Nr):(Yt-=Gt,fe.y=ze,fe.O=Je,fe.f=Ge,fe.N=ke,fe.ea=Pt,fe.W=Ft),Ht||(Qr-=Gt),Qr>fe.o&&(Qr=fe.o),fe.F=null,fe.J=null,ie.Fa!=null&&0<ie.Fa.length&&Yt<Qr&&(fe.J=ql(ie,fe,Yt,Qr-Yt),fe.F=ie.mb,fe.F==null&&fe.F.length==0)){Ae=kn(ie,3,"Could not decode alpha data.");break e}Yt<fe.j&&(Gt=fe.j-Yt,Yt=fe.j,t(!(1&Gt)),fe.O+=ie.R*Gt,fe.N+=ie.B*(Gt>>1),fe.W+=ie.B*(Gt>>1),fe.F!=null&&(fe.J+=fe.width*Gt)),Yt<Qr&&(fe.O+=fe.v,fe.N+=fe.v>>1,fe.W+=fe.v>>1,fe.F!=null&&(fe.J+=fe.v),fe.ka=Yt-fe.j,fe.U=fe.va-fe.v,fe.T=Qr-Yt,Ae=fe.put(fe))}le+1!=ie.Ic||Ht||(n(ie.sa,ie.ta-Te,ze,Je+16*ie.R,Te),n(ie.qa,ie.ra-Ie,Ge,ke+8*ie.B,Ie),n(ie.Ha,ie.Ia-Ie,Pt,Ft+8*ie.B,Ie))}if(!Ae)return kn(q,6,"Output aborted.")}return 1}(T,M)),M.bc!=null&&M.bc(M),y&=1}return y?(T.cb=0,y):0}function ci(T,M,y,a,h){h=T[M+y+32*a]+(h>>3),T[M+y+32*a]=-256&h?0>h?0:255:h}function Ko(T,M,y,a,h,g){ci(T,M,0,y,a+h),ci(T,M,1,y,a+g),ci(T,M,2,y,a-g),ci(T,M,3,y,a-h)}function mo(T){return(20091*T>>16)+T}function Cs(T,M,y,a){var h,g=0,_=o(16);for(h=0;4>h;++h){var b=T[M+0]+T[M+8],P=T[M+0]-T[M+8],I=(35468*T[M+4]>>16)-mo(T[M+12]),L=mo(T[M+4])+(35468*T[M+12]>>16);_[g+0]=b+L,_[g+1]=P+I,_[g+2]=P-I,_[g+3]=b-L,g+=4,M++}for(h=g=0;4>h;++h)b=(T=_[g+0]+4)+_[g+8],P=T-_[g+8],I=(35468*_[g+4]>>16)-mo(_[g+12]),ci(y,a,0,0,b+(L=mo(_[g+4])+(35468*_[g+12]>>16))),ci(y,a,1,0,P+I),ci(y,a,2,0,P-I),ci(y,a,3,0,b-L),g++,a+=32}function hs(T,M,y,a){var h=T[M+0]+4,g=35468*T[M+4]>>16,_=mo(T[M+4]),b=35468*T[M+1]>>16;Ko(y,a,0,h+_,T=mo(T[M+1]),b),Ko(y,a,1,h+g,T,b),Ko(y,a,2,h-g,T,b),Ko(y,a,3,h-_,T,b)}function xn(T,M,y,a,h){Cs(T,M,y,a),h&&Cs(T,M+16,y,a+4)}function D(T,M,y,a){zo(T,M+0,y,a,1),zo(T,M+32,y,a+128,1)}function X(T,M,y,a){var h;for(T=T[M+0]+4,h=0;4>h;++h)for(M=0;4>M;++M)ci(y,a,M,h,T)}function j(T,M,y,a){T[M+0]&&Si(T,M+0,y,a),T[M+16]&&Si(T,M+16,y,a+4),T[M+32]&&Si(T,M+32,y,a+128),T[M+48]&&Si(T,M+48,y,a+128+4)}function Z(T,M,y,a){var h,g=o(16);for(h=0;4>h;++h){var _=T[M+0+h]+T[M+12+h],b=T[M+4+h]+T[M+8+h],P=T[M+4+h]-T[M+8+h],I=T[M+0+h]-T[M+12+h];g[0+h]=_+b,g[8+h]=_-b,g[4+h]=I+P,g[12+h]=I-P}for(h=0;4>h;++h)_=(T=g[0+4*h]+3)+g[3+4*h],b=g[1+4*h]+g[2+4*h],P=g[1+4*h]-g[2+4*h],I=T-g[3+4*h],y[a+0]=_+b>>3,y[a+16]=I+P>>3,y[a+32]=_-b>>3,y[a+48]=I-P>>3,a+=64}function de(T,M,y){var a,h=M-32,g=lo,_=255-T[h-1];for(a=0;a<y;++a){var b,P=g,I=_+T[M-1];for(b=0;b<y;++b)T[M+b]=P[I+T[h+b]];M+=32}}function we(T,M){de(T,M,4)}function Le(T,M){de(T,M,8)}function ft(T,M){de(T,M,16)}function Mt(T,M){var y;for(y=0;16>y;++y)n(T,M+32*y,T,M-32,16)}function Qt(T,M){var y;for(y=16;0<y;--y)i(T,M,T[M-1],16),M+=32}function er(T,M,y){var a;for(a=0;16>a;++a)i(M,y+32*a,T,16)}function Jt(T,M){var y,a=16;for(y=0;16>y;++y)a+=T[M-1+32*y]+T[M+y-32];er(a>>5,T,M)}function yr(T,M){var y,a=8;for(y=0;16>y;++y)a+=T[M-1+32*y];er(a>>4,T,M)}function ti(T,M){var y,a=8;for(y=0;16>y;++y)a+=T[M+y-32];er(a>>4,T,M)}function zr(T,M){er(128,T,M)}function br(T,M,y){return T+2*M+y+2>>2}function $t(T,M){var y,a=M-32;for(a=new Uint8Array([br(T[a-1],T[a+0],T[a+1]),br(T[a+0],T[a+1],T[a+2]),br(T[a+1],T[a+2],T[a+3]),br(T[a+2],T[a+3],T[a+4])]),y=0;4>y;++y)n(T,M+32*y,a,0,a.length)}function Tr(T,M){var y=T[M-1],a=T[M-1+32],h=T[M-1+64],g=T[M-1+96];lt(T,M+0,16843009*br(T[M-1-32],y,a)),lt(T,M+32,16843009*br(y,a,h)),lt(T,M+64,16843009*br(a,h,g)),lt(T,M+96,16843009*br(h,g,g))}function wn(T,M){var y,a=4;for(y=0;4>y;++y)a+=T[M+y-32]+T[M-1+32*y];for(a>>=3,y=0;4>y;++y)i(T,M+32*y,a,4)}function Hi(T,M){var y=T[M-1+0],a=T[M-1+32],h=T[M-1+64],g=T[M-1-32],_=T[M+0-32],b=T[M+1-32],P=T[M+2-32],I=T[M+3-32];T[M+0+96]=br(a,h,T[M-1+96]),T[M+1+96]=T[M+0+64]=br(y,a,h),T[M+2+96]=T[M+1+64]=T[M+0+32]=br(g,y,a),T[M+3+96]=T[M+2+64]=T[M+1+32]=T[M+0+0]=br(_,g,y),T[M+3+64]=T[M+2+32]=T[M+1+0]=br(b,_,g),T[M+3+32]=T[M+2+0]=br(P,b,_),T[M+3+0]=br(I,P,b)}function ai(T,M){var y=T[M+1-32],a=T[M+2-32],h=T[M+3-32],g=T[M+4-32],_=T[M+5-32],b=T[M+6-32],P=T[M+7-32];T[M+0+0]=br(T[M+0-32],y,a),T[M+1+0]=T[M+0+32]=br(y,a,h),T[M+2+0]=T[M+1+32]=T[M+0+64]=br(a,h,g),T[M+3+0]=T[M+2+32]=T[M+1+64]=T[M+0+96]=br(h,g,_),T[M+3+32]=T[M+2+64]=T[M+1+96]=br(g,_,b),T[M+3+64]=T[M+2+96]=br(_,b,P),T[M+3+96]=br(b,P,P)}function zl(T,M){var y=T[M-1+0],a=T[M-1+32],h=T[M-1+64],g=T[M-1-32],_=T[M+0-32],b=T[M+1-32],P=T[M+2-32],I=T[M+3-32];T[M+0+0]=T[M+1+64]=g+_+1>>1,T[M+1+0]=T[M+2+64]=_+b+1>>1,T[M+2+0]=T[M+3+64]=b+P+1>>1,T[M+3+0]=P+I+1>>1,T[M+0+96]=br(h,a,y),T[M+0+64]=br(a,y,g),T[M+0+32]=T[M+1+96]=br(y,g,_),T[M+1+32]=T[M+2+96]=br(g,_,b),T[M+2+32]=T[M+3+96]=br(_,b,P),T[M+3+32]=br(b,P,I)}function Qc(T,M){var y=T[M+0-32],a=T[M+1-32],h=T[M+2-32],g=T[M+3-32],_=T[M+4-32],b=T[M+5-32],P=T[M+6-32],I=T[M+7-32];T[M+0+0]=y+a+1>>1,T[M+1+0]=T[M+0+64]=a+h+1>>1,T[M+2+0]=T[M+1+64]=h+g+1>>1,T[M+3+0]=T[M+2+64]=g+_+1>>1,T[M+0+32]=br(y,a,h),T[M+1+32]=T[M+0+96]=br(a,h,g),T[M+2+32]=T[M+1+96]=br(h,g,_),T[M+3+32]=T[M+2+96]=br(g,_,b),T[M+3+64]=br(_,b,P),T[M+3+96]=br(b,P,I)}function li(T,M){var y=T[M-1+0],a=T[M-1+32],h=T[M-1+64],g=T[M-1+96];T[M+0+0]=y+a+1>>1,T[M+2+0]=T[M+0+32]=a+h+1>>1,T[M+2+32]=T[M+0+64]=h+g+1>>1,T[M+1+0]=br(y,a,h),T[M+3+0]=T[M+1+32]=br(a,h,g),T[M+3+32]=T[M+1+64]=br(h,g,g),T[M+3+64]=T[M+2+64]=T[M+0+96]=T[M+1+96]=T[M+2+96]=T[M+3+96]=g}function xh(T,M){var y=T[M-1+0],a=T[M-1+32],h=T[M-1+64],g=T[M-1+96],_=T[M-1-32],b=T[M+0-32],P=T[M+1-32],I=T[M+2-32];T[M+0+0]=T[M+2+32]=y+_+1>>1,T[M+0+32]=T[M+2+64]=a+y+1>>1,T[M+0+64]=T[M+2+96]=h+a+1>>1,T[M+0+96]=g+h+1>>1,T[M+3+0]=br(b,P,I),T[M+2+0]=br(_,b,P),T[M+1+0]=T[M+3+32]=br(y,_,b),T[M+1+32]=T[M+3+64]=br(a,y,_),T[M+1+64]=T[M+3+96]=br(h,a,y),T[M+1+96]=br(g,h,a)}function Ef(T,M){var y;for(y=0;8>y;++y)n(T,M+32*y,T,M-32,8)}function Ps(T,M){var y;for(y=0;8>y;++y)i(T,M,T[M-1],8),M+=32}function ea(T,M,y){var a;for(a=0;8>a;++a)i(M,y+32*a,T,8)}function va(T,M){var y,a=8;for(y=0;8>y;++y)a+=T[M+y-32]+T[M-1+32*y];ea(a>>4,T,M)}function xc(T,M){var y,a=4;for(y=0;8>y;++y)a+=T[M+y-32];ea(a>>3,T,M)}function ba(T,M){var y,a=4;for(y=0;8>y;++y)a+=T[M-1+32*y];ea(a>>3,T,M)}function $l(T,M){ea(128,T,M)}function Go(T,M,y){var a=T[M-y],h=T[M+0],g=3*(h-a)+nu[1020+T[M-2*y]-T[M+y]],_=Za[112+(g+4>>3)];T[M-y]=lo[255+a+Za[112+(g+3>>3)]],T[M+0]=lo[255+h-_]}function wh(T,M,y,a){var h=T[M+0],g=T[M+y];return Ni[255+T[M-2*y]-T[M-y]]>a||Ni[255+g-h]>a}function eu(T,M,y,a){return 4*Ni[255+T[M-y]-T[M+0]]+Ni[255+T[M-2*y]-T[M+y]]<=a}function Ha(T,M,y,a,h){var g=T[M-3*y],_=T[M-2*y],b=T[M-y],P=T[M+0],I=T[M+y],L=T[M+2*y],V=T[M+3*y];return 4*Ni[255+b-P]+Ni[255+_-I]>a?0:Ni[255+T[M-4*y]-g]<=h&&Ni[255+g-_]<=h&&Ni[255+_-b]<=h&&Ni[255+V-L]<=h&&Ni[255+L-I]<=h&&Ni[255+I-P]<=h}function ta(T,M,y,a){var h=2*a+1;for(a=0;16>a;++a)eu(T,M+a,y,h)&&Go(T,M+a,y)}function Sn(T,M,y,a){var h=2*a+1;for(a=0;16>a;++a)eu(T,M+a*y,1,h)&&Go(T,M+a*y,1)}function ra(T,M,y,a){var h;for(h=3;0<h;--h)ta(T,M+=4*y,y,a)}function Tf(T,M,y,a){var h;for(h=3;0<h;--h)Sn(T,M+=4,y,a)}function js(T,M,y,a,h,g,_,b){for(g=2*g+1;0<h--;){if(Ha(T,M,y,g,_))if(wh(T,M,y,b))Go(T,M,y);else{var P=T,I=M,L=y,V=P[I-2*L],W=P[I-L],q=P[I+0],oe=P[I+L],le=P[I+2*L],ie=27*(Ae=nu[1020+3*(q-W)+nu[1020+V-oe]])+63>>7,fe=18*Ae+63>>7,Ae=9*Ae+63>>7;P[I-3*L]=lo[255+P[I-3*L]+Ae],P[I-2*L]=lo[255+V+fe],P[I-L]=lo[255+W+ie],P[I+0]=lo[255+q-ie],P[I+L]=lo[255+oe-fe],P[I+2*L]=lo[255+le-Ae]}M+=a}}function Is(T,M,y,a,h,g,_,b){for(g=2*g+1;0<h--;){if(Ha(T,M,y,g,_))if(wh(T,M,y,b))Go(T,M,y);else{var P=T,I=M,L=y,V=P[I-L],W=P[I+0],q=P[I+L],oe=Za[112+((le=3*(W-V))+4>>3)],le=Za[112+(le+3>>3)],ie=oe+1>>1;P[I-2*L]=lo[255+P[I-2*L]+ie],P[I-L]=lo[255+V+le],P[I+0]=lo[255+W-oe],P[I+L]=lo[255+q-ie]}M+=a}}function Ul(T,M,y,a,h,g){js(T,M,y,1,16,a,h,g)}function jl(T,M,y,a,h,g){js(T,M,1,y,16,a,h,g)}function Vs(T,M,y,a,h,g){var _;for(_=3;0<_;--_)Is(T,M+=4*y,y,1,16,a,h,g)}function _l(T,M,y,a,h,g){var _;for(_=3;0<_;--_)Is(T,M+=4,1,y,16,a,h,g)}function Fu(T,M,y,a,h,g,_,b){js(T,M,h,1,8,g,_,b),js(y,a,h,1,8,g,_,b)}function tu(T,M,y,a,h,g,_,b){js(T,M,1,h,8,g,_,b),js(y,a,1,h,8,g,_,b)}function wc(T,M,y,a,h,g,_,b){Is(T,M+4*h,h,1,8,g,_,b),Is(y,a+4*h,h,1,8,g,_,b)}function Vl(T,M,y,a,h,g,_,b){Is(T,M+4,1,h,8,g,_,b),Is(y,a+4,1,h,8,g,_,b)}function Hs(){this.ba=new gi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ne,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Sc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Bu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function xa(){this.ua=0,this.Wa=new pe,this.vb=new pe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ge,this.yc=new se}function Hl(){this.xb=this.a=0,this.l=new Ji,this.ca=new gi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ce,this.Pb=0,this.wd=new ce,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new xa,this.ab=0,this.gc=l(4,Bu),this.Oc=0}function ru(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ji,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function qa(T,M,y,a,h,g,_){for(T=T==null?0:T[M+0],M=0;M<_;++M)h[g+M]=T+y[a+M]&255,T=h[g+M]}function Ac(T,M,y,a,h,g,_){var b;if(T==null)qa(null,null,y,a,h,g,_);else for(b=0;b<_;++b)h[g+b]=T[M+b]+y[a+b]&255}function na(T,M,y,a,h,g,_){if(T==null)qa(null,null,y,a,h,g,_);else{var b,P=T[M+0],I=P,L=P;for(b=0;b<_;++b)I=L+(P=T[M+b])-I,L=y[a+b]+(-256&I?0>I?0:255:I)&255,I=P,h[g+b]=L}}function ql(T,M,y,a){var h=M.width,g=M.o;if(t(T!=null&&M!=null),0>y||0>=a||y+a>g)return null;if(!T.Cc){if(T.ga==null){var _;if(T.ga=new ru,(_=T.ga==null)||(_=M.width*M.o,t(T.Gb.length==0),T.Gb=o(_),T.Uc=0,T.Gb==null?_=0:(T.mb=T.Gb,T.nb=T.Uc,T.rc=null,_=1),_=!_),!_){_=T.ga;var b=T.Fa,P=T.P,I=T.qc,L=T.mb,V=T.nb,W=P+1,q=I-1,oe=_.l;if(t(b!=null&&L!=null&&M!=null),Zl[0]=null,Zl[1]=qa,Zl[2]=Ac,Zl[3]=na,_.ca=L,_.tb=V,_.c=M.width,_.i=M.height,t(0<_.c&&0<_.i),1>=I)M=0;else if(_.$a=b[P+0]>>0&3,_.Z=b[P+0]>>2&3,_.Lc=b[P+0]>>4&3,P=b[P+0]>>6&3,0>_.$a||1<_.$a||4<=_.Z||1<_.Lc||P)M=0;else if(oe.put=rt,oe.ac=Fe,oe.bc=it,oe.ma=_,oe.width=M.width,oe.height=M.height,oe.Da=M.Da,oe.v=M.v,oe.va=M.va,oe.j=M.j,oe.o=M.o,_.$a)e:{t(_.$a==1),M=Jr();t:for(;;){if(M==null){M=0;break e}if(t(_!=null),_.mc=M,M.c=_.c,M.i=_.i,M.l=_.l,M.l.ma=_,M.l.width=_.c,M.l.height=_.i,M.a=0,Me(M.m,b,W,q),!Ur(_.c,_.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&pn(M.s)?(_.ic=1,b=M.c*M.i,M.Ta=null,M.Ua=0,M.V=o(b),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(_.ic=0,M=vn(M,_.c)),!M))break t;M=1;break e}_.mc=null,M=0}else M=q>=_.c*_.i;_=!M}if(_)return null;T.ga.Lc!=1?T.Ga=0:a=g-y}t(T.ga!=null),t(y+a<=g);e:{if(M=(b=T.ga).c,g=b.l.o,b.$a==0){if(W=T.rc,q=T.Vc,oe=T.Fa,P=T.P+1+y*M,I=T.mb,L=T.nb+y*M,t(P<=T.P+T.qc),b.Z!=0)for(t(Zl[b.Z]!=null),_=0;_<a;++_)Zl[b.Z](W,q,oe,P,I,L,M),W=I,q=L,L+=M,P+=M;else for(_=0;_<a;++_)n(I,L,oe,P,M),W=I,q=L,L+=M,P+=M;T.rc=W,T.Vc=q}else{if(t(b.mc!=null),M=y+a,t((_=b.mc)!=null),t(M<=_.i),_.C>=M)M=1;else if(b.ic||mt(),b.ic){b=_.V,W=_.Ba,q=_.c;var le=_.i,ie=(oe=1,P=_.$/q,I=_.$%q,L=_.m,V=_.s,_.$),fe=q*le,Ae=q*M,Te=V.wc,ke=ie<Ae?Wt(V,I,P):null;t(ie<=fe),t(M<=le),t(pn(V));t:for(;;){for(;!L.h&&ie<Ae;){if(I&Te||(ke=Wt(V,I,P)),t(ke!=null),qe(L),256>(le=Rt(ke.G[0],ke.H[0],L)))b[W+ie]=le,++ie,++I>=q&&(I=0,++P<=M&&!(P%16)&&en(_,P));else{if(!(280>le)){oe=0;break t}le=Ke(le-256,L);var Ie,ze=Rt(ke.G[4],ke.H[4],L);if(qe(L),!(ie>=(ze=Et(q,ze=Ke(ze,L)))&&fe-ie>=le)){oe=0;break t}for(Ie=0;Ie<le;++Ie)b[W+ie+Ie]=b[W+ie+Ie-ze];for(ie+=le,I+=le;I>=q;)I-=q,++P<=M&&!(P%16)&&en(_,P);ie<Ae&&I&Te&&(ke=Wt(V,I,P))}t(L.h==Oe(L))}en(_,P>M?M:P);break t}!oe||L.h&&ie<fe?(oe=0,_.a=L.h?5:3):_.$=ie,M=oe}else M=Zr(_,_.V,_.Ba,_.c,_.i,M,Fn);if(!M){a=0;break e}}y+a>=g&&(T.Cc=1),a=1}if(!a)return null;if(T.Cc&&((a=T.ga)!=null&&(a.mc=null),T.ga=null,0<T.Ga))return alert("todo:WebPDequantizeLevels"),null}return T.nb+y*h}function $(T,M,y,a,h,g){for(;0<h--;){var _,b=T,P=M+(y?1:0),I=T,L=M+(y?0:3);for(_=0;_<a;++_){var V=I[L+4*_];V!=255&&(V*=32897,b[P+4*_+0]=b[P+4*_+0]*V>>23,b[P+4*_+1]=b[P+4*_+1]*V>>23,b[P+4*_+2]=b[P+4*_+2]*V>>23)}M+=g}}function ye(T,M,y,a,h){for(;0<a--;){var g;for(g=0;g<y;++g){var _=T[M+2*g+0],b=15&(I=T[M+2*g+1]),P=4369*b,I=(240&I|I>>4)*P>>16;T[M+2*g+0]=(240&_|_>>4)*P>>16&240|(15&_|_<<4)*P>>16>>4&15,T[M+2*g+1]=240&I|b}M+=h}}function Ve(T,M,y,a,h,g,_,b){var P,I,L=255;for(I=0;I<h;++I){for(P=0;P<a;++P){var V=T[M+P];g[_+4*P]=V,L&=V}M+=y,_+=b}return L!=255}function ot(T,M,y,a,h){var g;for(g=0;g<h;++g)y[a+g]=T[M+g]>>8}function mt(){_o=$,Oi=ye,eo=Ve,wa=ot}function Ot(T,M,y){re[T]=function(a,h,g,_,b,P,I,L,V,W,q,oe,le,ie,fe,Ae,Te){var ke,Ie=Te-1>>1,ze=b[P+0]|I[L+0]<<16,Je=V[W+0]|q[oe+0]<<16;t(a!=null);var Ge=3*ze+Je+131074>>2;for(M(a[h+0],255&Ge,Ge>>16,le,ie),g!=null&&(Ge=3*Je+ze+131074>>2,M(g[_+0],255&Ge,Ge>>16,fe,Ae)),ke=1;ke<=Ie;++ke){var Pt=b[P+ke]|I[L+ke]<<16,Ft=V[W+ke]|q[oe+ke]<<16,Ht=ze+Pt+Je+Ft+524296,Gt=Ht+2*(Pt+Je)>>3;Ge=Gt+ze>>1,ze=(Ht=Ht+2*(ze+Ft)>>3)+Pt>>1,M(a[h+2*ke-1],255&Ge,Ge>>16,le,ie+(2*ke-1)*y),M(a[h+2*ke-0],255&ze,ze>>16,le,ie+(2*ke-0)*y),g!=null&&(Ge=Ht+Je>>1,ze=Gt+Ft>>1,M(g[_+2*ke-1],255&Ge,Ge>>16,fe,Ae+(2*ke-1)*y),M(g[_+2*ke+0],255&ze,ze>>16,fe,Ae+(2*ke+0)*y)),ze=Pt,Je=Ft}1&Te||(Ge=3*ze+Je+131074>>2,M(a[h+Te-1],255&Ge,Ge>>16,le,ie+(Te-1)*y),g!=null&&(Ge=3*Je+ze+131074>>2,M(g[_+Te-1],255&Ge,Ge>>16,fe,Ae+(Te-1)*y)))}}function nr(){dn[wl]=Gp,dn[Kl]=Td,dn[Ec]=K_,dn[Ja]=Om,dn[Sh]=Vu,dn[Cf]=Yp,dn[iu]=Zp,dn[Ah]=Td,dn[Uu]=Om,dn[Eh]=Vu,dn[Pf]=Yp}function wr(T){return T&~Ea?0>T?0:255:T>>Nm}function Hr(T,M){return wr((19077*T>>8)+(26149*M>>8)-14234)}function an(T,M,y){return wr((19077*T>>8)-(6419*M>>8)-(13320*y>>8)+8708)}function ln(T,M){return wr((19077*T>>8)+(33050*M>>8)-17685)}function cn(T,M,y,a,h){a[h+0]=Hr(T,y),a[h+1]=an(T,M,y),a[h+2]=ln(T,M)}function Hn(T,M,y,a,h){a[h+0]=ln(T,M),a[h+1]=an(T,M,y),a[h+2]=Hr(T,y)}function wi(T,M,y,a,h){var g=an(T,M,y);M=g<<3&224|ln(T,M)>>3,a[h+0]=248&Hr(T,y)|g>>5,a[h+1]=M}function un(T,M,y,a,h){var g=240&ln(T,M)|15;a[h+0]=240&Hr(T,y)|an(T,M,y)>>4,a[h+1]=g}function Yo(T,M,y,a,h){a[h+0]=255,cn(T,M,y,a,h+1)}function Lr(T,M,y,a,h){Hn(T,M,y,a,h),a[h+3]=255}function Co(T,M,y,a,h){cn(T,M,y,a,h),a[h+3]=255}function Tn(T,M){return 0>T?0:T>M?M:T}function Mn(T,M,y){re[T]=function(a,h,g,_,b,P,I,L,V){for(var W=L+(-2&V)*y;L!=W;)M(a[h+0],g[_+0],b[P+0],I,L),M(a[h+1],g[_+0],b[P+0],I,L+y),h+=2,++_,++P,L+=2*y;1&V&&M(a[h+0],g[_+0],b[P+0],I,L)}}function Wa(T,M,y){return y==0?T==0?M==0?6:5:M==0?4:0:y}function vl(T,M,y,a,h){switch(T>>>30){case 3:zo(M,y,a,h,0);break;case 2:_i(M,y,a,h);break;case 1:Si(M,y,a,h)}}function Xa(T,M){var y,a,h=M.M,g=M.Nb,_=T.oc,b=T.pc+40,P=T.oc,I=T.pc+584,L=T.oc,V=T.pc+600;for(y=0;16>y;++y)_[b+32*y-1]=129;for(y=0;8>y;++y)P[I+32*y-1]=129,L[V+32*y-1]=129;for(0<h?_[b-1-32]=P[I-1-32]=L[V-1-32]=129:(i(_,b-32-1,127,21),i(P,I-32-1,127,9),i(L,V-32-1,127,9)),a=0;a<T.za;++a){var W=M.ya[M.aa+a];if(0<a){for(y=-1;16>y;++y)n(_,b+32*y-4,_,b+32*y+12,4);for(y=-1;8>y;++y)n(P,I+32*y-4,P,I+32*y+4,4),n(L,V+32*y-4,L,V+32*y+4,4)}var q=T.Gd,oe=T.Hd+a,le=W.ad,ie=W.Hc;if(0<h&&(n(_,b-32,q[oe].y,0,16),n(P,I-32,q[oe].f,0,8),n(L,V-32,q[oe].ea,0,8)),W.Za){var fe=_,Ae=b-32+16;for(0<h&&(a>=T.za-1?i(fe,Ae,q[oe].y[15],4):n(fe,Ae,q[oe+1].y,0,4)),y=0;4>y;y++)fe[Ae+128+y]=fe[Ae+256+y]=fe[Ae+384+y]=fe[Ae+0+y];for(y=0;16>y;++y,ie<<=2)fe=_,Ae=b+Al[y],Aa[W.Ob[y]](fe,Ae),vl(ie,le,16*+y,fe,Ae)}else if(fe=Wa(a,h,W.Ob[0]),Sl[fe](_,b),ie!=0)for(y=0;16>y;++y,ie<<=2)vl(ie,le,16*+y,_,b+Al[y]);for(y=W.Gc,fe=Wa(a,h,W.Dd),Yl[fe](P,I),Yl[fe](L,V),ie=le,fe=P,Ae=I,255&(W=y>>0)&&(170&W?ri(ie,256,fe,Ae):qi(ie,256,fe,Ae)),W=L,ie=V,255&(y>>=8)&&(170&y?ri(le,320,W,ie):qi(le,320,W,ie)),h<T.Ub-1&&(n(q[oe].y,0,_,b+480,16),n(q[oe].f,0,P,I+224,8),n(q[oe].ea,0,L,V+224,8)),y=8*g*T.B,q=T.sa,oe=T.ta+16*a+16*g*T.R,le=T.qa,W=T.ra+8*a+y,ie=T.Ha,fe=T.Ia+8*a+y,y=0;16>y;++y)n(q,oe+y*T.R,_,b+32*y,16);for(y=0;8>y;++y)n(le,W+y*T.B,P,I+32*y,8),n(ie,fe+y*T.B,L,V+32*y,8)}}function bl(T,M,y,a,h,g,_,b,P){var I=[0],L=[0],V=0,W=P!=null?P.kd:0,q=P??new Sc;if(T==null||12>y)return 7;q.data=T,q.w=M,q.ha=y,M=[M],y=[y],q.gb=[q.gb];e:{var oe=M,le=y,ie=q.gb;if(t(T!=null),t(le!=null),t(ie!=null),ie[0]=0,12<=le[0]&&!r(T,oe[0],"RIFF")){if(r(T,oe[0]+8,"WEBP")){ie=3;break e}var fe=At(T,oe[0]+4);if(12>fe||4294967286<fe){ie=3;break e}if(W&&fe>le[0]-8){ie=7;break e}ie[0]=fe,oe[0]+=12,le[0]-=12}ie=0}if(ie!=0)return ie;for(fe=0<q.gb[0],y=y[0];;){e:{var Ae=T;le=M,ie=y;var Te=I,ke=L,Ie=oe=[0];if((Ge=V=[V])[0]=0,8>ie[0])ie=7;else{if(!r(Ae,le[0],"VP8X")){if(At(Ae,le[0]+4)!=10){ie=3;break e}if(18>ie[0]){ie=7;break e}var ze=At(Ae,le[0]+8),Je=1+Lt(Ae,le[0]+12);if(2147483648<=Je*(Ae=1+Lt(Ae,le[0]+15))){ie=3;break e}Ie!=null&&(Ie[0]=ze),Te!=null&&(Te[0]=Je),ke!=null&&(ke[0]=Ae),le[0]+=18,ie[0]-=18,Ge[0]=1}ie=0}}if(V=V[0],oe=oe[0],ie!=0)return ie;if(le=!!(2&oe),!fe&&V)return 3;if(g!=null&&(g[0]=!!(16&oe)),_!=null&&(_[0]=le),b!=null&&(b[0]=0),_=I[0],oe=L[0],V&&le&&P==null){ie=0;break}if(4>y){ie=7;break}if(fe&&V||!fe&&!V&&!r(T,M[0],"ALPH")){y=[y],q.na=[q.na],q.P=[q.P],q.Sa=[q.Sa];e:{ze=T,ie=M,fe=y;var Ge=q.gb;Te=q.na,ke=q.P,Ie=q.Sa,Je=22,t(ze!=null),t(fe!=null),Ae=ie[0];var Pt=fe[0];for(t(Te!=null),t(Ie!=null),Te[0]=null,ke[0]=null,Ie[0]=0;;){if(ie[0]=Ae,fe[0]=Pt,8>Pt){ie=7;break e}var Ft=At(ze,Ae+4);if(4294967286<Ft){ie=3;break e}var Ht=8+Ft+1&-2;if(Je+=Ht,0<Ge&&Je>Ge){ie=3;break e}if(!r(ze,Ae,"VP8 ")||!r(ze,Ae,"VP8L")){ie=0;break e}if(Pt[0]<Ht){ie=7;break e}r(ze,Ae,"ALPH")||(Te[0]=ze,ke[0]=Ae+8,Ie[0]=Ft),Ae+=Ht,Pt-=Ht}}if(y=y[0],q.na=q.na[0],q.P=q.P[0],q.Sa=q.Sa[0],ie!=0)break}y=[y],q.Ja=[q.Ja],q.xa=[q.xa];e:if(Ge=T,ie=M,fe=y,Te=q.gb[0],ke=q.Ja,Ie=q.xa,ze=ie[0],Ae=!r(Ge,ze,"VP8 "),Je=!r(Ge,ze,"VP8L"),t(Ge!=null),t(fe!=null),t(ke!=null),t(Ie!=null),8>fe[0])ie=7;else{if(Ae||Je){if(Ge=At(Ge,ze+4),12<=Te&&Ge>Te-12){ie=3;break e}if(W&&Ge>fe[0]-8){ie=7;break e}ke[0]=Ge,ie[0]+=8,fe[0]-=8,Ie[0]=Je}else Ie[0]=5<=fe[0]&&Ge[ze+0]==47&&!(Ge[ze+4]>>5),ke[0]=fe[0];ie=0}if(y=y[0],q.Ja=q.Ja[0],q.xa=q.xa[0],M=M[0],ie!=0)break;if(4294967286<q.Ja)return 3;if(b==null||le||(b[0]=q.xa?2:1),_=[_],oe=[oe],q.xa){if(5>y){ie=7;break}b=_,W=oe,le=g,T==null||5>y?T=0:5<=y&&T[M+0]==47&&!(T[M+4]>>5)?(fe=[0],Ge=[0],Te=[0],Me(ke=new ce,T,M,y),et(ke,fe,Ge,Te)?(b!=null&&(b[0]=fe[0]),W!=null&&(W[0]=Ge[0]),le!=null&&(le[0]=Te[0]),T=1):T=0):T=0}else{if(10>y){ie=7;break}b=oe,T==null||10>y||!go(T,M+3,y-3)?T=0:(W=T[M+0]|T[M+1]<<8|T[M+2]<<16,le=16383&(T[M+7]<<8|T[M+6]),T=16383&(T[M+9]<<8|T[M+8]),1&W||3<(W>>1&7)||!(W>>4&1)||W>>5>=q.Ja||!le||!T?T=0:(_&&(_[0]=le),b&&(b[0]=T),T=1))}if(!T||(_=_[0],oe=oe[0],V&&(I[0]!=_||L[0]!=oe)))return 3;P!=null&&(P[0]=q,P.offset=M-P.w,t(4294967286>M-P.w),t(P.offset==P.ha-y));break}return ie==0||ie==7&&V&&P==null?(g!=null&&(g[0]|=q.na!=null&&0<q.na.length),a!=null&&(a[0]=_),h!=null&&(h[0]=oe),0):ie}function Rs(T,M,y){var a=M.width,h=M.height,g=0,_=0,b=a,P=h;if(M.Da=T!=null&&0<T.Da,M.Da&&(b=T.cd,P=T.bd,g=T.v,_=T.j,11>y||(g&=-2,_&=-2),0>g||0>_||0>=b||0>=P||g+b>a||_+P>h))return 0;if(M.v=g,M.j=_,M.va=g+b,M.o=_+P,M.U=b,M.T=P,M.da=T!=null&&0<T.da,M.da){if(!ur(b,P,y=[T.ib],g=[T.hb]))return 0;M.ib=y[0],M.hb=g[0]}return M.ob=T!=null&&T.ob,M.Kb=T==null||!T.Sd,M.da&&(M.ob=M.ib<3*a/4&&M.hb<3*h/4,M.Kb=0),1}function fs(T){if(T==null)return 2;if(11>T.S){var M=T.f.RGBA;M.fb+=(T.height-1)*M.A,M.A=-M.A}else M=T.f.kb,T=T.height,M.O+=(T-1)*M.fa,M.fa=-M.fa,M.N+=(T-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(T-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(T-1)*M.lb,M.lb=-M.lb);return 0}function Fo(T,M,y,a){if(a==null||0>=T||0>=M)return 2;if(y!=null){if(y.Da){var h=y.cd,g=y.bd,_=-2&y.v,b=-2&y.j;if(0>_||0>b||0>=h||0>=g||_+h>T||b+g>M)return 2;T=h,M=g}if(y.da){if(!ur(T,M,h=[y.ib],g=[y.hb]))return 2;T=h[0],M=g[0]}}a.width=T,a.height=M;e:{var P=a.width,I=a.height;if(T=a.S,0>=P||0>=I||!(T>=wl&&13>T))T=2;else{if(0>=a.Rd&&a.sd==null){_=g=h=M=0;var L=(b=P*Nf[T])*I;if(11>T||(g=(I+1)/2*(M=(P+1)/2),T==12&&(_=(h=P)*I)),(I=o(L+2*g+_))==null){T=1;break e}a.sd=I,11>T?((P=a.f.RGBA).eb=I,P.fb=0,P.A=b,P.size=L):((P=a.f.kb).y=I,P.O=0,P.fa=b,P.Fd=L,P.f=I,P.N=0+L,P.Ab=M,P.Cd=g,P.ea=I,P.W=0+L+g,P.Db=M,P.Ed=g,T==12&&(P.F=I,P.J=0+L+2*g),P.Tc=_,P.lb=h)}if(M=1,h=a.S,g=a.width,_=a.height,h>=wl&&13>h)if(11>h)T=a.f.RGBA,M&=(b=Math.abs(T.A))*(_-1)+g<=T.size,M&=b>=g*Nf[h],M&=T.eb!=null;else{T=a.f.kb,b=(g+1)/2,L=(_+1)/2,P=Math.abs(T.fa),I=Math.abs(T.Ab);var V=Math.abs(T.Db),W=Math.abs(T.lb),q=W*(_-1)+g;M&=P*(_-1)+g<=T.Fd,M&=I*(L-1)+b<=T.Cd,M=(M&=V*(L-1)+b<=T.Ed)&P>=g&I>=b&V>=b,M&=T.y!=null,M&=T.f!=null,M&=T.ea!=null,h==12&&(M&=W>=g,M&=q<=T.Tc,M&=T.F!=null)}else M=0;T=M?0:2}}return T!=0||y!=null&&y.fd&&(T=fs(a)),T}var Mi=64,Wl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ks=24,qs=32,xl=8,Qi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Nt("Predictor0","PredictorAdd0"),re.Predictor0=function(){return 4278190080},re.Predictor1=function(T){return T},re.Predictor2=function(T,M,y){return M[y+0]},re.Predictor3=function(T,M,y){return M[y+1]},re.Predictor4=function(T,M,y){return M[y-1]},re.Predictor5=function(T,M,y){return rr(rr(T,M[y+1]),M[y+0])},re.Predictor6=function(T,M,y){return rr(T,M[y-1])},re.Predictor7=function(T,M,y){return rr(T,M[y+0])},re.Predictor8=function(T,M,y){return rr(M[y-1],M[y+0])},re.Predictor9=function(T,M,y){return rr(M[y+0],M[y+1])},re.Predictor10=function(T,M,y){return rr(rr(T,M[y-1]),rr(M[y+0],M[y+1]))},re.Predictor11=function(T,M,y){var a=M[y+0];return 0>=Vt(a>>24&255,T>>24&255,(M=M[y-1])>>24&255)+Vt(a>>16&255,T>>16&255,M>>16&255)+Vt(a>>8&255,T>>8&255,M>>8&255)+Vt(255&a,255&T,255&M)?a:T},re.Predictor12=function(T,M,y){var a=M[y+0];return(at((T>>24&255)+(a>>24&255)-((M=M[y-1])>>24&255))<<24|at((T>>16&255)+(a>>16&255)-(M>>16&255))<<16|at((T>>8&255)+(a>>8&255)-(M>>8&255))<<8|at((255&T)+(255&a)-(255&M)))>>>0},re.Predictor13=function(T,M,y){var a=M[y-1];return(It((T=rr(T,M[y+0]))>>24&255,a>>24&255)<<24|It(T>>16&255,a>>16&255)<<16|It(T>>8&255,a>>8&255)<<8|It(T>>0&255,a>>0&255))>>>0};var Ka=re.PredictorAdd0;re.PredictorAdd1=lr,Nt("Predictor2","PredictorAdd2"),Nt("Predictor3","PredictorAdd3"),Nt("Predictor4","PredictorAdd4"),Nt("Predictor5","PredictorAdd5"),Nt("Predictor6","PredictorAdd6"),Nt("Predictor7","PredictorAdd7"),Nt("Predictor8","PredictorAdd8"),Nt("Predictor9","PredictorAdd9"),Nt("Predictor10","PredictorAdd10"),Nt("Predictor11","PredictorAdd11"),Nt("Predictor12","PredictorAdd12"),Nt("Predictor13","PredictorAdd13");var Ga=re.PredictorAdd2;_r("ColorIndexInverseTransform","MapARGB","32b",function(T){return T>>8&255},function(T){return T}),_r("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(T){return T},function(T){return T>>8&255});var Xl,Bo=re.ColorIndexInverseTransform,Ms=re.MapARGB,zu=re.VP8LColorIndexInverseTransformAlpha,$u=re.MapAlpha,nt=re.VP8LPredictorsAdd=[];nt.length=16,(re.VP8LPredictors=[]).length=16,(re.VP8LPredictorsAdd_C=[]).length=16,(re.VP8LPredictors_C=[]).length=16;var Ct,cr,kr,Rn,gn,Yn,qn,zo,_i,ri,Si,qi,vi,Zo,$o,ds,Ws,yo,ia,bi,ui,rn,on,Jo,_o,Oi,eo,wa,Ya=o(511),hi=o(2041),ps=o(225),vo=o(767),oa=0,nu=hi,Za=ps,lo=vo,Ni=Ya,wl=0,Kl=1,Ec=2,Ja=3,Sh=4,Cf=5,iu=6,Ah=7,Uu=8,Eh=9,Pf=10,Hp=[2,3,7],qp=[3,3,11],If=[280,256,256,256,40],Th=[0,1,1,1,0],km=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Qa=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Gl=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Wp=8,Sa=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Tc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Rf=null,X_=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Mm=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Xp=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Kp=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ch=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],el=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Sr=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Sl=[],Aa=[],Yl=[],Ph=1,ju=2,Zl=[],dn=[];Ot("UpsampleRgbLinePair",cn,3),Ot("UpsampleBgrLinePair",Hn,3),Ot("UpsampleRgbaLinePair",Co,4),Ot("UpsampleBgraLinePair",Lr,4),Ot("UpsampleArgbLinePair",Yo,4),Ot("UpsampleRgba4444LinePair",un,2),Ot("UpsampleRgb565LinePair",wi,2);var Gp=re.UpsampleRgbLinePair,K_=re.UpsampleBgrLinePair,Td=re.UpsampleRgbaLinePair,Om=re.UpsampleBgraLinePair,Vu=re.UpsampleArgbLinePair,Yp=re.UpsampleRgba4444LinePair,Zp=re.UpsampleRgb565LinePair,kf=16,Cd=1<<kf-1,Hu=-227,Jp=482,Nm=6,Ea=(256<<Nm)-1,Ai=0,Ih=o(256),Pd=o(256),Id=o(256),Dm=o(256),Mf=o(Jp-Hu),Of=o(Jp-Hu);Mn("YuvToRgbRow",cn,3),Mn("YuvToBgrRow",Hn,3),Mn("YuvToRgbaRow",Co,4),Mn("YuvToBgraRow",Lr,4),Mn("YuvToArgbRow",Yo,4),Mn("YuvToRgba4444Row",un,2),Mn("YuvToRgb565Row",wi,2);var Al=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ou=[0,2,8],Rr=[8,7,6,4,4,2,2,2,1,1,1,1],qr=1;this.WebPDecodeRGBA=function(T,M,y,a,h){var g=Kl,_=new Hs,b=new gi;_.ba=b,b.S=g,b.width=[b.width],b.height=[b.height];var P=b.width,I=b.height,L=new Yr;if(L==null||T==null)var V=2;else t(L!=null),V=bl(T,M,y,L.width,L.height,L.Pd,L.Qd,L.format,null);if(V!=0?P=0:(P!=null&&(P[0]=L.width[0]),I!=null&&(I[0]=L.height[0]),P=1),P){b.width=b.width[0],b.height=b.height[0],a!=null&&(a[0]=b.width),h!=null&&(h[0]=b.height);e:{if(a=new Ji,(h=new Sc).data=T,h.w=M,h.ha=y,h.kd=1,M=[0],t(h!=null),((T=bl(h.data,h.w,h.ha,null,null,null,M,null,h))==0||T==7)&&M[0]&&(T=4),(M=T)==0){if(t(_!=null),a.data=h.data,a.w=h.w+h.offset,a.ha=h.ha-h.offset,a.put=rt,a.ac=Fe,a.bc=it,a.ma=_,h.xa){if((T=Jr())==null){_=1;break e}if(function(W,q){var oe=[0],le=[0],ie=[0];t:for(;;){if(W==null)return 0;if(q==null)return W.a=2,0;if(W.l=q,W.a=0,Me(W.m,q.data,q.w,q.ha),!et(W.m,oe,le,ie)){W.a=3;break t}if(W.xb=ju,q.width=oe[0],q.height=le[0],!Ur(oe[0],le[0],1,W,null))break t;return 1}return t(W.a!=0),0}(T,a)){if(a=(M=Fo(a.width,a.height,_.Oa,_.ba))==0){t:{a=T;r:for(;;){if(a==null){a=0;break t}if(t(a.s.yc!=null),t(a.s.Ya!=null),t(0<a.s.Wb),t((y=a.l)!=null),t((h=y.ma)!=null),a.xb!=0){if(a.ca=h.ba,a.tb=h.tb,t(a.ca!=null),!Rs(h.Oa,y,Ja)){a.a=2;break r}if(!vn(a,y.width)||y.da)break r;if((y.da||hr(a.ca.S))&&mt(),11>a.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),a.ca.f.kb.F!=null&&mt()),a.Pb&&0<a.s.ua&&a.s.vb.X==null&&!zt(a.s.vb,a.s.Wa.Xa)){a.a=1;break r}a.xb=0}if(!Zr(a,a.V,a.Ba,a.c,a.i,y.o,Ar))break r;h.Dc=a.Ma,a=1;break t}t(a.a!=0),a=0}a=!a}a&&(M=T.a)}else M=T.a}else{if((T=new Un)==null){_=1;break e}if(T.Fa=h.na,T.P=h.P,T.qc=h.Sa,si(T,a)){if((M=Fo(a.width,a.height,_.Oa,_.ba))==0){if(T.Aa=0,y=_.Oa,t((h=T)!=null),y!=null){if(0<(P=0>(P=y.Md)?0:100<P?255:255*P/100)){for(I=L=0;4>I;++I)12>(V=h.pb[I]).lc&&(V.ia=P*Rr[0>V.lc?0:V.lc]>>3),L|=V.ia;L&&(alert("todo:VP8InitRandom"),h.ia=1)}h.Ga=y.Id,100<h.Ga?h.Ga=100:0>h.Ga&&(h.Ga=0)}_a(T,a)||(M=T.a)}}else M=T.a}M==0&&_.Oa!=null&&_.Oa.fd&&(M=fs(_.ba))}_=M}g=_!=0?null:11>g?b.f.RGBA.eb:b.f.kb.y}else g=null;return g};var Nf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function p(re,Se){for(var J="",G=0;G<4;G++)J+=String.fromCharCode(re[Se++]);return J}function v(re,Se){return(re[Se+0]<<0|re[Se+1]<<8|re[Se+2]<<16)>>>0}function x(re,Se){return(re[Se+0]<<0|re[Se+1]<<8|re[Se+2]<<16|re[Se+3]<<24)>>>0}new f;var S=[0],A=[0],k=[],R=new f,z=e,N=function(re,Se){var J={},G=0,se=!1,ve=0,ge=0;if(J.frames=[],!function(be,Oe,Be,qe){for(var tt=0;tt<qe;tt++)if(be[Oe+tt]!=Be.charCodeAt(tt))return!0;return!1}(re,Se,"RIFF",4)){var je,$e;for(x(re,Se+=4),Se+=8;Se<re.length;){var Ze=p(re,Se),Me=x(re,Se+=4);Se+=4;var Ue=Me+(1&Me);switch(Ze){case"VP8 ":case"VP8L":J.frames[G]===void 0&&(J.frames[G]={}),(ce=J.frames[G]).src_off=se?ge:Se-8,ce.src_size=ve+Me+8,G++,se&&(se=!1,ve=0,ge=0);break;case"VP8X":(ce=J.header={}).feature_flags=re[Se];var Qe=Se+4;ce.canvas_width=1+v(re,Qe),Qe+=3,ce.canvas_height=1+v(re,Qe),Qe+=3;break;case"ALPH":se=!0,ve=Ue+8,ge=Se-8;break;case"ANIM":(ce=J.header).bgcolor=x(re,Se),Qe=Se+4,ce.loop_count=(je=re)[($e=Qe)+0]<<0|je[$e+1]<<8,Qe+=2;break;case"ANMF":var ct,ce;(ce=J.frames[G]={}).offset_x=2*v(re,Se),Se+=3,ce.offset_y=2*v(re,Se),Se+=3,ce.width=1+v(re,Se),Se+=3,ce.height=1+v(re,Se),Se+=3,ce.duration=v(re,Se),Se+=3,ct=re[Se++],ce.dispose=1&ct,ce.blend=ct>>1&1}Ze!="ANMF"&&(Se+=Ue)}return J}}(z,0);N.response=z,N.rgbaoutput=!0,N.dataurl=!1;var B=N.header?N.header:null,U=N.frames?N.frames:null;if(B){B.loop_counter=B.loop_count,S=[B.canvas_height],A=[B.canvas_width];for(var K=0;K<U.length&&U[K].blend!=0;K++);}var ne=U[0],ee=R.WebPDecodeRGBA(z,ne.src_off,ne.src_size,A,S);ne.rgba=ee,ne.imgwidth=A[0],ne.imgheight=S[0];for(var Q=0;Q<A[0]*S[0]*4;Q++)k[Q]=ee[Q];return this.width=A,this.height=S,this.data=k,this}(function(e){var t=function(){return typeof m4=="function"},r=function(S,A,k,R){var z=4,N=l;switch(R){case e.image_compression.FAST:z=1,N=o;break;case e.image_compression.MEDIUM:z=6,N=s;break;case e.image_compression.SLOW:z=9,N=f}S=n(S,A,k,N);var B=m4(S,{level:z});return e.__addimage__.arrayBufferToBinaryString(B)},n=function(S,A,k,R){for(var z,N,B,U=S.length/A,K=new Uint8Array(S.length+U),ne=v(),ee=0;ee<U;ee+=1){if(B=ee*A,z=S.subarray(B,B+A),R)K.set(R(z,k,N),B+ee);else{for(var Q,re=ne.length,Se=[];Q<re;Q+=1)Se[Q]=ne[Q](z,k,N);var J=x(Se.concat());K.set(Se[J],B+ee)}N=z}return K},i=function(S){var A=Array.apply([],S);return A.unshift(0),A},o=function(S,A){var k,R=[],z=S.length;R[0]=1;for(var N=0;N<z;N+=1)k=S[N-A]||0,R[N+1]=S[N]-k+256&255;return R},l=function(S,A,k){var R,z=[],N=S.length;z[0]=2;for(var B=0;B<N;B+=1)R=k&&k[B]||0,z[B+1]=S[B]-R+256&255;return z},s=function(S,A,k){var R,z,N=[],B=S.length;N[0]=3;for(var U=0;U<B;U+=1)R=S[U-A]||0,z=k&&k[U]||0,N[U+1]=S[U]+256-(R+z>>>1)&255;return N},f=function(S,A,k){var R,z,N,B,U=[],K=S.length;U[0]=4;for(var ne=0;ne<K;ne+=1)R=S[ne-A]||0,z=k&&k[ne]||0,N=k&&k[ne-A]||0,B=p(R,z,N),U[ne+1]=S[ne]-B+256&255;return U},p=function(S,A,k){if(S===A&&A===k)return S;var R=Math.abs(A-k),z=Math.abs(S-k),N=Math.abs(S+A-k-k);return R<=z&&R<=N?S:z<=N?A:k},v=function(){return[i,o,l,s,f]},x=function(S){var A=S.map(function(k){return k.reduce(function(R,z){return R+Math.abs(z)},0)});return A.indexOf(Math.min.apply(null,A))};e.processPNG=function(S,A,k,R){var z,N,B,U,K,ne,ee,Q,re,Se,J,G,se,ve,ge,je=this.decode.FLATE_DECODE,$e="";if(this.__addimage__.isArrayBuffer(S)&&(S=new Uint8Array(S)),this.__addimage__.isArrayBufferView(S)){if(S=(B=new wae(S)).imgData,N=B.bits,z=B.colorSpace,K=B.colors,[4,6].indexOf(B.colorType)!==-1){if(B.bits===8){re=(Q=B.pixelBitlength==32?new Uint32Array(B.decodePixels().buffer):B.pixelBitlength==16?new Uint16Array(B.decodePixels().buffer):new Uint8Array(B.decodePixels().buffer)).length,J=new Uint8Array(re*B.colors),Se=new Uint8Array(re);var Ze,Me=B.pixelBitlength-B.bits;for(ve=0,ge=0;ve<re;ve++){for(se=Q[ve],Ze=0;Ze<Me;)J[ge++]=se>>>Ze&255,Ze+=B.bits;Se[ve]=se>>>Ze&255}}if(B.bits===16){re=(Q=new Uint32Array(B.decodePixels().buffer)).length,J=new Uint8Array(re*(32/B.pixelBitlength)*B.colors),Se=new Uint8Array(re*(32/B.pixelBitlength)),G=B.colors>1,ve=0,ge=0;for(var Ue=0;ve<re;)se=Q[ve++],J[ge++]=se>>>0&255,G&&(J[ge++]=se>>>16&255,se=Q[ve++],J[ge++]=se>>>0&255),Se[Ue++]=se>>>16&255;N=8}R!==e.image_compression.NONE&&t()?(S=r(J,B.width*B.colors,B.colors,R),ee=r(Se,B.width,1,R)):(S=J,ee=Se,je=void 0)}if(B.colorType===3&&(z=this.color_spaces.INDEXED,ne=B.palette,B.transparency.indexed)){var Qe=B.transparency.indexed,ct=0;for(ve=0,re=Qe.length;ve<re;++ve)ct+=Qe[ve];if((ct/=255)===re-1&&Qe.indexOf(0)!==-1)U=[Qe.indexOf(0)];else if(ct!==re){for(Q=B.decodePixels(),Se=new Uint8Array(Q.length),ve=0,re=Q.length;ve<re;ve++)Se[ve]=Qe[Q[ve]];ee=r(Se,B.width,1)}}var ce=function(be){var Oe;switch(be){case e.image_compression.FAST:Oe=11;break;case e.image_compression.MEDIUM:Oe=13;break;case e.image_compression.SLOW:Oe=14;break;default:Oe=12}return Oe}(R);return je===this.decode.FLATE_DECODE&&($e="/Predictor "+ce+" "),$e+="/Colors "+K+" /BitsPerComponent "+N+" /Columns "+B.width,(this.__addimage__.isArrayBuffer(S)||this.__addimage__.isArrayBufferView(S))&&(S=this.__addimage__.arrayBufferToBinaryString(S)),(ee&&this.__addimage__.isArrayBuffer(ee)||this.__addimage__.isArrayBufferView(ee))&&(ee=this.__addimage__.arrayBufferToBinaryString(ee)),{alias:k,data:S,index:A,filter:je,decodeParameters:$e,transparency:U,palette:ne,sMask:ee,predictor:ce,width:B.width,height:B.height,bitsPerComponent:N,colorSpace:z}}}})(bn.API),function(e){e.processGIF89A=function(t,r,n,i){var o=new Sae(t),l=o.width,s=o.height,f=[];o.decodeAndBlitFrameRGBA(0,f);var p={data:f,width:l,height:s},v=new oT(100).encode(p,100);return e.processJPEG.call(this,v,r,n,i)},e.processGIF87A=e.processGIF89A}(bn.API),Yu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:n,blue:r,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Yu.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){io.log("bit decode error:"+r)}},Yu.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var f=this.palette[o>>7-s&1];this.data[l+4*s]=f.blue,this.data[l+4*s+1]=f.green,this.data[l+4*s+2]=f.red,this.data[l+4*s+3]=255}r!==0&&(this.pos+=4-r)}},Yu.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++){var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+2*i*4,s=o>>4,f=15&o,p=this.palette[s];if(this.data[l]=p.blue,this.data[l+1]=p.green,this.data[l+2]=p.red,this.data[l+3]=255,2*i+1>=this.width)break;p=this.palette[f],this.data[l+4]=p.blue,this.data[l+4+1]=p.green,this.data[l+4+2]=p.red,this.data[l+4+3]=255}t!==0&&(this.pos+=4-t)}},Yu.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*n;if(i<this.palette.length){var l=this.palette[i];this.data[o]=l.red,this.data[o+1]=l.green,this.data[o+2]=l.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}e!==0&&(this.pos+=4-e)}},Yu.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,s=(o>>5&t)/t*255|0,f=(o>>10&t)/t*255|0,p=o>>15?255:0,v=n*this.width*4+4*i;this.data[v]=f,this.data[v+1]=s,this.data[v+2]=l,this.data[v+3]=p}this.pos+=e}},Yu.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(l&t)/t*255|0,f=(l>>5&r)/r*255|0,p=(l>>11)/t*255|0,v=i*this.width*4+4*o;this.data[v]=p,this.data[v+1]=f,this.data[v+2]=s,this.data[v+3]=255}this.pos+=e}},Yu.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=o,this.data[l+1]=i,this.data[l+2]=n,this.data[l+3]=255}this.pos+=this.width%4}},Yu.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=n,this.data[s+3]=l}},Yu.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,i){var o=new Yu(t,!1),l=o.width,s=o.height,f={data:o.getData(),width:l,height:s},p=new oT(100).encode(f,100);return e.processJPEG.call(this,p,r,n,i)}}(bn.API),WN.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,i){var o=new WN(t),l=o.width,s=o.height,f={data:o.getData(),width:l,height:s},p=new oT(100).encode(f,100);return e.processJPEG.call(this,p,r,n,i)}}(bn.API),bn.API.processRGBA=function(e,t,r){for(var n=e.data,i=n.length,o=new Uint8Array(i/4*3),l=new Uint8Array(i/4),s=0,f=0,p=0;p<i;p+=4){var v=n[p],x=n[p+1],S=n[p+2],A=n[p+3];o[s++]=v,o[s++]=x,o[s++]=S,l[f++]=A}var k=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:k,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},bn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},f0=bn.API,Sx=f0.getCharWidthsArray=function(e,t){var r,n,i=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),l=t.charSpace||this.internal.getCharSpace(),s=t.widths?t.widths:i.metadata.Unicode.widths,f=s.fof?s.fof:1,p=t.kerning?t.kerning:i.metadata.Unicode.kerning,v=p.fof?p.fof:1,x=t.doKerning!==!1,S=0,A=e.length,k=0,R=s[0]||f,z=[];for(r=0;r<A;r++)n=e.charCodeAt(r),typeof i.metadata.widthOfString=="function"?z.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+l*(1e3/o)||0)/1e3):(S=x&&$i(p[n])==="object"&&!isNaN(parseInt(p[n][k],10))?p[n][k]/v:0,z.push((s[n]||R)/f+S)),k=n;return z},jN=f0.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return f0.processArabic&&(e=f0.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,i)/r:Sx.apply(this,arguments).reduce(function(o,l){return o+l},0)},VN=function(e,t,r,n){for(var i=[],o=0,l=e.length,s=0;o!==l&&s+t[o]<r;)s+=t[o],o++;i.push(e.slice(0,o));var f=o;for(s=0;o!==l;)s+t[o]>n&&(i.push(e.slice(f,o)),s=0,f=o),s+=t[o],o++;return f!==o&&i.push(e.slice(f,o)),i},HN=function(e,t,r){r||(r={});var n,i,o,l,s,f,p,v=[],x=[v],S=r.textIndent||0,A=0,k=0,R=e.split(" "),z=Sx.apply(this,[" ",r])[0];if(f=r.lineIndent===-1?R[0].length+2:r.lineIndent||0){var N=Array(f).join(" "),B=[];R.map(function(K){(K=K.split(/\s*\n/)).length>1?B=B.concat(K.map(function(ne,ee){return(ee&&ne.length?`
`:"")+ne})):B.push(K[0])}),R=B,f=jN.apply(this,[N,r])}for(o=0,l=R.length;o<l;o++){var U=0;if(n=R[o],f&&n[0]==`
`&&(n=n.substr(1),U=1),S+A+(k=(i=Sx.apply(this,[n,r])).reduce(function(K,ne){return K+ne},0))>t||U){if(k>t){for(s=VN.apply(this,[n,i,t-(S+A),t]),v.push(s.shift()),v=[s.pop()];s.length;)x.push([s.shift()]);k=i.slice(n.length-(v[0]?v[0].length:0)).reduce(function(K,ne){return K+ne},0)}else v=[n];x.push(v),S=k+f,A=z}else v.push(n),S+=A+k,A=z}return p=f?function(K,ne){return(ne?N:"")+K.join(" ")}:function(K){return K.join(" ")},x.map(p)},f0.splitTextToSize=function(e,t,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),o=(function(v){if(v.widths&&v.kerning)return{widths:v.widths,kerning:v.kerning};var x=this.internal.getFont(v.fontName,v.fontStyle);return x.metadata.Unicode?{widths:x.metadata.Unicode.widths||{0:1},kerning:x.metadata.Unicode.kerning||{}}:{font:x.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var l=1*this.internal.scaleFactor*t/i;o.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=r.lineIndent;var s,f,p=[];for(s=0,f=n.length;s<f;s++)p=p.concat(HN.apply(this,[n[s],l,o]));return p},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},i=0;i<t.length;i++)r[t[i]]="0123456789abcdef"[i],n["0123456789abcdef"[i]]=t[i];var o=function(x){return"0x"+parseInt(x,10).toString(16)},l=e.__fontmetrics__.compress=function(x){var S,A,k,R,z=["{"];for(var N in x){if(S=x[N],isNaN(parseInt(N,10))?A="'"+N+"'":(N=parseInt(N,10),A=(A=o(N).slice(2)).slice(0,-1)+n[A.slice(-1)]),typeof S=="number")S<0?(k=o(S).slice(3),R="-"):(k=o(S).slice(2),R=""),k=R+k.slice(0,-1)+n[k.slice(-1)];else{if($i(S)!=="object")throw new Error("Don't know what to do with value type "+$i(S)+".");k=l(S)}z.push(A+k)}return z.push("}"),z.join("")},s=e.__fontmetrics__.uncompress=function(x){if(typeof x!="string")throw new Error("Invalid argument passed to uncompress.");for(var S,A,k,R,z={},N=1,B=z,U=[],K="",ne="",ee=x.length-1,Q=1;Q<ee;Q+=1)(R=x[Q])=="'"?S?(k=S.join(""),S=void 0):S=[]:S?S.push(R):R=="{"?(U.push([B,k]),B={},k=void 0):R=="}"?((A=U.pop())[0][A[1]]=B,k=void 0,B=A[0]):R=="-"?N=-1:k===void 0?r.hasOwnProperty(R)?(K+=r[R],k=parseInt(K,16)*N,N=1,K=""):K+=R:r.hasOwnProperty(R)?(ne+=r[R],B[k]=parseInt(ne,16)*N,N=1,k=void 0,ne=""):ne+=R;return z},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},v={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(x){var S=x.font,A=v.Unicode[S.postScriptName];A&&(S.metadata.Unicode={},S.metadata.Unicode.widths=A.widths,S.metadata.Unicode.kerning=A.kerning);var k=p.Unicode[S.postScriptName];k&&(S.metadata.Unicode.encoding=k,S.encoding=k.codePages[0])}])}(bn.API),function(e){var t=function(r){for(var n=r.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=r.charCodeAt(o);return i};e.API.events.push(["addFont",function(r){var n=void 0,i=r.font,o=r.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(l,s){s=/^\x00\x01\x00\x00/.test(s)?t(s):t(kv(s)),l.metadata=e.API.TTFFont.open(s),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(i,n)}}])}(bn),function(e){function t(){return(_n.canvg?Promise.resolve(_n.canvg):u4(()=>import("./index.es-DfK5z7fk.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}bn.API.addSvgAsImage=function(r,n,i,o,l,s,f,p){if(isNaN(n)||isNaN(i))throw io.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(l))throw io.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var v=document.createElement("canvas");v.width=o,v.height=l;var x=v.getContext("2d");x.fillStyle="#fff",x.fillRect(0,0,v.width,v.height);var S={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},A=this;return t().then(function(k){return k.fromString(x,r,S)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(k){return k.render(S)}).then(function(){A.addImage(v.toDataURL("image/jpeg",1),n,i,o,l,f,p)})}}(),bn.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(t,r);return this},bn.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,i,o,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(l),f=[],p=0,v=0,x=0;function S(k,R){var z,N=!1;for(z=0;z<k.length;z+=1)k[z]===R&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var A=s.length;for(x=0;x<A;x+=1)r[s[x]].value=r[s[x]].defaultValue,r[s[x]].explicitSet=!1}if($i(e)==="object"){for(i in e)if(o=e[i],S(s,i)&&o!==void 0){if(r[i].type==="boolean"&&typeof o=="boolean")r[i].value=o;else if(r[i].type==="name"&&S(r[i].valueSet,o))r[i].value=o;else if(r[i].type==="integer"&&Number.isInteger(o))r[i].value=o;else if(r[i].type==="array"){for(p=0;p<o.length;p+=1)if(n=!0,o[p].length===1&&typeof o[p][0]=="number")f.push(String(o[p]-1));else if(o[p].length>1){for(v=0;v<o[p].length;v+=1)typeof o[p][v]!="number"&&(n=!1);n===!0&&f.push([o[p][0]-1,o[p][1]-1].join(" "))}r[i].value="["+f.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var k,R=[];for(k in r)r[k].explicitSet===!0&&(r[k].type==="name"?R.push("/"+k+" /"+r[k].value):R.push("/"+k+" "+r[k].value));R.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+R.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(n)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),p=o.length+l.length+s.length+i.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+p+" >>"),this.internal.write("stream"),this.internal.write(i+o+l+s+f),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(bn.API),function(e){var t=e.API,r=t.pdfEscape16=function(o,l){for(var s,f=l.metadata.Unicode.widths,p=["","0","00","000","0000"],v=[""],x=0,S=o.length;x<S;++x){if(s=l.metadata.characterToGlyph(o.charCodeAt(x)),l.metadata.glyIdsUsed.push(s),l.metadata.toUnicode[s]=o.charCodeAt(x),f.indexOf(s)==-1&&(f.push(s),f.push([parseInt(l.metadata.widthOfGlyph(s),10)])),s=="0")return v.join("");s=s.toString(16),v.push(p[4-s.length],s)}return v.join("")},n=function(o){var l,s,f,p,v,x,S;for(v=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],x=0,S=(s=Object.keys(o).sort(function(A,k){return A-k})).length;x<S;x++)l=s[x],f.length>=100&&(v+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),o[l]!==void 0&&o[l]!==null&&typeof o[l].toString=="function"&&(p=("0000"+o[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),f.push("<"+l+"><"+p+">"));return f.length&&(v+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),v+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(o){(function(l){var s=l.font,f=l.out,p=l.newObject,v=l.putStream;if(s.metadata instanceof e.API.TTFFont&&s.encoding==="Identity-H"){for(var x=s.metadata.Unicode.widths,S=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),A="",k=0;k<S.length;k++)A+=String.fromCharCode(S[k]);var R=p();v({data:A,addLength1:!0,objectId:R}),f("endobj");var z=p();v({data:n(s.metadata.toUnicode),addLength1:!0,objectId:z}),f("endobj");var N=p();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+O0(s.fontName)),f("/FontFile2 "+R+" 0 R"),f("/FontBBox "+e.API.PDFObject.convert(s.metadata.bbox)),f("/Flags "+s.metadata.flags),f("/StemV "+s.metadata.stemV),f("/ItalicAngle "+s.metadata.italicAngle),f("/Ascent "+s.metadata.ascender),f("/Descent "+s.metadata.decender),f("/CapHeight "+s.metadata.capHeight),f(">>"),f("endobj");var B=p();f("<<"),f("/Type /Font"),f("/BaseFont /"+O0(s.fontName)),f("/FontDescriptor "+N+" 0 R"),f("/W "+e.API.PDFObject.convert(x)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+s.encoding+")"),f(">>"),f(">>"),f("endobj"),s.objectNumber=p(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+z+" 0 R"),f("/BaseFont /"+O0(s.fontName)),f("/Encoding /"+s.encoding),f("/DescendantFonts ["+B+" 0 R]"),f(">>"),f("endobj"),s.isAlreadyPutted=!0}})(o)}]),t.events.push(["putFont",function(o){(function(l){var s=l.font,f=l.out,p=l.newObject,v=l.putStream;if(s.metadata instanceof e.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var x=s.metadata.rawData,S="",A=0;A<x.length;A++)S+=String.fromCharCode(x[A]);var k=p();v({data:S,addLength1:!0,objectId:k}),f("endobj");var R=p();v({data:n(s.metadata.toUnicode),addLength1:!0,objectId:R}),f("endobj");var z=p();f("<<"),f("/Descent "+s.metadata.decender),f("/CapHeight "+s.metadata.capHeight),f("/StemV "+s.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+k+" 0 R"),f("/Flags 96"),f("/FontBBox "+e.API.PDFObject.convert(s.metadata.bbox)),f("/FontName /"+O0(s.fontName)),f("/ItalicAngle "+s.metadata.italicAngle),f("/Ascent "+s.metadata.ascender),f(">>"),f("endobj"),s.objectNumber=p();for(var N=0;N<s.metadata.hmtx.widths.length;N++)s.metadata.hmtx.widths[N]=parseInt(s.metadata.hmtx.widths[N]*(1e3/s.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+R+" 0 R/BaseFont/"+O0(s.fontName)+"/FontDescriptor "+z+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),f("endobj"),s.isAlreadyPutted=!0}})(o)}]);var i=function(o){var l,s=o.text||"",f=o.x,p=o.y,v=o.options||{},x=o.mutex||{},S=x.pdfEscape,A=x.activeFontKey,k=x.fonts,R=A,z="",N=0,B="",U=k[R].encoding;if(k[R].encoding!=="Identity-H")return{text:s,x:f,y:p,options:v,mutex:x};for(B=s,R=A,Array.isArray(s)&&(B=s[0]),N=0;N<B.length;N+=1)k[R].metadata.hasOwnProperty("cmap")&&(l=k[R].metadata.cmap.unicode.codeMap[B[N].charCodeAt(0)]),l||B[N].charCodeAt(0)<256&&k[R].metadata.hasOwnProperty("Unicode")?z+=B[N]:z+="";var K="";return parseInt(R.slice(1))<14||U==="WinAnsiEncoding"?K=S(z,R).split("").map(function(ne){return ne.charCodeAt(0).toString(16)}).join(""):U==="Identity-H"&&(K=r(z,k[R])),x.isHex=!0,{text:K,x:f,y:p,options:v,mutex:x}};t.events.push(["postProcessText",function(o){var l=o.text||"",s=[],f={text:l,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(l)){var p=0;for(p=0;p<l.length;p+=1)Array.isArray(l[p])&&l[p].length===3?s.push([i(Object.assign({},f,{text:l[p][0]})).text,l[p][1],l[p][2]]):s.push(i(Object.assign({},f,{text:l[p]})).text);o.text=s}else o.text=i(Object.assign({},f,{text:l})).text}])}(bn),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(bn.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var i,o,l,s,f,p,v,x=t,S=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],A=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],k={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},R={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},z=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),B=!1,U=0;this.__bidiEngine__={};var K=function(G){var se=G.charCodeAt(),ve=se>>8,ge=R[ve];return ge!==void 0?x[256*ge+(255&se)]:ve===252||ve===253?"AL":N.test(ve)?"L":ve===8?"R":"N"},ne=function(G){for(var se,ve=0;ve<G.length;ve++){if((se=K(G.charAt(ve)))==="L")return!1;if(se==="R")return!0}return!1},ee=function(G,se,ve,ge){var je,$e,Ze,Me,Ue=se[ge];switch(Ue){case"L":case"R":B=!1;break;case"N":case"AN":break;case"EN":B&&(Ue="AN");break;case"AL":B=!0,Ue="R";break;case"WS":Ue="N";break;case"CS":ge<1||ge+1>=se.length||(je=ve[ge-1])!=="EN"&&je!=="AN"||($e=se[ge+1])!=="EN"&&$e!=="AN"?Ue="N":B&&($e="AN"),Ue=$e===je?$e:"N";break;case"ES":Ue=(je=ge>0?ve[ge-1]:"B")==="EN"&&ge+1<se.length&&se[ge+1]==="EN"?"EN":"N";break;case"ET":if(ge>0&&ve[ge-1]==="EN"){Ue="EN";break}if(B){Ue="N";break}for(Ze=ge+1,Me=se.length;Ze<Me&&se[Ze]==="ET";)Ze++;Ue=Ze<Me&&se[Ze]==="EN"?"EN":"N";break;case"NSM":if(l&&!s){for(Me=se.length,Ze=ge+1;Ze<Me&&se[Ze]==="NSM";)Ze++;if(Ze<Me){var Qe=G[ge],ct=Qe>=1425&&Qe<=2303||Qe===64286;if(je=se[Ze],ct&&(je==="R"||je==="AL")){Ue="R";break}}}Ue=ge<1||(je=se[ge-1])==="B"?"N":ve[ge-1];break;case"B":B=!1,i=!0,Ue=U;break;case"S":o=!0,Ue="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":B=!1;break;case"BN":Ue="N"}return Ue},Q=function(G,se,ve){var ge=G.split("");return ve&&re(ge,ve,{hiLevel:U}),ge.reverse(),se&&se.reverse(),ge.join("")},re=function(G,se,ve){var ge,je,$e,Ze,Me,Ue=-1,Qe=G.length,ct=0,ce=[],be=U?A:S,Oe=[];for(B=!1,i=!1,o=!1,je=0;je<Qe;je++)Oe[je]=K(G[je]);for($e=0;$e<Qe;$e++){if(Me=ct,ce[$e]=ee(G,Oe,ce,$e),ge=240&(ct=be[Me][k[ce[$e]]]),ct&=15,se[$e]=Ze=be[ct][5],ge>0)if(ge===16){for(je=Ue;je<$e;je++)se[je]=1;Ue=-1}else Ue=-1;if(be[ct][6])Ue===-1&&(Ue=$e);else if(Ue>-1){for(je=Ue;je<$e;je++)se[je]=Ze;Ue=-1}Oe[$e]==="B"&&(se[$e]=0),ve.hiLevel|=Ze}o&&function(Be,qe,tt){for(var We=0;We<tt;We++)if(Be[We]==="S"){qe[We]=U;for(var Xe=We-1;Xe>=0&&Be[Xe]==="WS";Xe--)qe[Xe]=U}}(Oe,se,Qe)},Se=function(G,se,ve,ge,je){if(!(je.hiLevel<G)){if(G===1&&U===1&&!i)return se.reverse(),void(ve&&ve.reverse());for(var $e,Ze,Me,Ue,Qe=se.length,ct=0;ct<Qe;){if(ge[ct]>=G){for(Me=ct+1;Me<Qe&&ge[Me]>=G;)Me++;for(Ue=ct,Ze=Me-1;Ue<Ze;Ue++,Ze--)$e=se[Ue],se[Ue]=se[Ze],se[Ze]=$e,ve&&($e=ve[Ue],ve[Ue]=ve[Ze],ve[Ze]=$e);ct=Me}ct++}}},J=function(G,se,ve){var ge=G.split(""),je={hiLevel:U};return ve||(ve=[]),re(ge,ve,je),function($e,Ze,Me){if(Me.hiLevel!==0&&v)for(var Ue,Qe=0;Qe<$e.length;Qe++)Ze[Qe]===1&&(Ue=z.indexOf($e[Qe]))>=0&&($e[Qe]=z[Ue+1])}(ge,ve,je),Se(2,ge,se,ve,je),Se(1,ge,se,ve,je),ge.join("")};return this.__bidiEngine__.doBidiReorder=function(G,se,ve){if(function(je,$e){if($e)for(var Ze=0;Ze<je.length;Ze++)$e[Ze]=Ze;s===void 0&&(s=ne(je)),p===void 0&&(p=ne(je))}(G,se),l||!f||p)if(l&&f&&s^p)U=s?1:0,G=Q(G,se,ve);else if(!l&&f&&p)U=s?1:0,G=J(G,se,ve),G=Q(G,se);else if(!l||s||f||p){if(l&&!f&&s^p)G=Q(G,se),s?(U=0,G=J(G,se,ve)):(U=1,G=J(G,se,ve),G=Q(G,se));else if(l&&s&&!f&&p)U=1,G=J(G,se,ve),G=Q(G,se);else if(!l&&!f&&s^p){var ge=v;s?(U=1,G=J(G,se,ve),U=0,v=!1,G=J(G,se,ve),v=ge):(U=0,G=J(G,se,ve),G=Q(G,se),U=1,v=!1,G=J(G,se,ve),v=ge,G=Q(G,se))}}else U=0,G=J(G,se,ve);else U=s?1:0,G=J(G,se,ve);return G},this.__bidiEngine__.setOptions=function(G){G&&(l=G.isInputVisual,f=G.isOutputVisual,s=G.isInputRtl,p=G.isOutputRtl,v=G.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var i=n.text,o=(n.x,n.y,n.options||{}),l=(n.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,r.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var s=0;for(l=[],s=0;s<i.length;s+=1)Object.prototype.toString.call(i[s])==="[object Array]"?l.push([r.doBidiReorder(i[s][0]),i[s][1],i[s][2]]):l.push([r.doBidiReorder(i[s])]);n.text=l}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(bn),bn.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new kp(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Bae(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Aae(this.contents),this.head=new Tae(this),this.name=new kae(this),this.cmap=new ej(this),this.toUnicode={},this.hhea=new Cae(this),this.maxp=new Mae(this),this.hmtx=new Oae(this),this.post=new Iae(this),this.os2=new Pae(this),this.loca=new Fae(this),this.glyf=new Nae(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,s,f,p;for(p=[],l=0,s=(f=this.bbox).length;l<s;l++)t=f[l],p.push(Math.round(t*this.scaleFactor));return p}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var i,o,l,s;for(l=0,o=0,s=(t=""+t).length;0<=s?o<s:o>s;o=0<=s?++o:--o)i=t.charCodeAt(o),l+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return l*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var mh,kp=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,i;for(i=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(t.charCodeAt(r)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,i,o,l,s,f;return t=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),s=this.readByte(),f=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^o)+65536*(255^l)+256*(255^s)+(255^f)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*i+16777216*o+65536*l+256*s+f},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,i,o;for(o=[],n=0,i=t.length;n<i;n++)r=t[n],o.push(this.writeByte(r));return o},e}(),Aae=function(){var e;function t(r){var n,i,o;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,i,o,l,s,f,p,v,x,S,A,k,R;for(R in A=Object.keys(r).length,f=Math.log(2),x=16*Math.floor(Math.log(A)/f),l=Math.floor(x/f),v=16*A-x,(i=new kp).writeInt(this.scalarType),i.writeShort(A),i.writeShort(x),i.writeShort(l),i.writeShort(v),o=16*A,p=i.pos+o,s=null,k=[],r)for(S=r[R],i.writeString(R),i.writeInt(e(S)),i.writeInt(p),i.writeInt(S.length),k=k.concat(S),R==="head"&&(s=p),p+=S.length;p%4;)k.push(0),p++;return i.write(k),n=2981146554-e(i.data),i.pos=s+8,i.writeUInt32(n),i.data},e=function(r){var n,i,o,l;for(r=tj.call(r);r.length%4;)r.push(0);for(o=new kp(r),i=0,n=0,l=r.length;n<l;n=n+=4)i+=o.readUInt32();return 4294967295&i},t}(),Eae={}.hasOwnProperty,wf=function(e,t){for(var r in t)Eae.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};mh=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Tae=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wf(t,mh),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new kp).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),XN=function(){function e(t,r){var n,i,o,l,s,f,p,v,x,S,A,k,R,z,N,B,U;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),x=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=t.readByte();break;case 4:for(A=t.readUInt16(),S=A/2,t.pos+=6,o=function(){var K,ne;for(ne=[],f=K=0;0<=S?K<S:K>S;f=0<=S?++K:--K)ne.push(t.readUInt16());return ne}(),t.pos+=2,R=function(){var K,ne;for(ne=[],f=K=0;0<=S?K<S:K>S;f=0<=S?++K:--K)ne.push(t.readUInt16());return ne}(),p=function(){var K,ne;for(ne=[],f=K=0;0<=S?K<S:K>S;f=0<=S?++K:--K)ne.push(t.readUInt16());return ne}(),v=function(){var K,ne;for(ne=[],f=K=0;0<=S?K<S:K>S;f=0<=S?++K:--K)ne.push(t.readUInt16());return ne}(),i=(this.length-t.pos+this.offset)/2,s=function(){var K,ne;for(ne=[],f=K=0;0<=i?K<i:K>i;f=0<=i?++K:--K)ne.push(t.readUInt16());return ne}(),f=N=0,U=o.length;N<U;f=++N)for(z=o[f],n=B=k=R[f];k<=z?B<=z:B>=z;n=k<=z?++B:--B)v[f]===0?l=n+p[f]:(l=s[v[f]/2+(n-k)-(S-f)]||0)!==0&&(l+=p[f]),this.codeMap[n]=65535&l}t.pos=x}return e.encode=function(t,r){var n,i,o,l,s,f,p,v,x,S,A,k,R,z,N,B,U,K,ne,ee,Q,re,Se,J,G,se,ve,ge,je,$e,Ze,Me,Ue,Qe,ct,ce,be,Oe,Be,qe,tt,We,Xe,lt,wt,Lt;switch(ge=new kp,l=Object.keys(t).sort(function(At,zt){return At-zt}),r){case"macroman":for(R=0,z=function(){var At=[];for(k=0;k<256;++k)At.push(0);return At}(),B={0:0},o={},je=0,Ue=l.length;je<Ue;je++)B[Xe=t[i=l[je]]]==null&&(B[Xe]=++R),o[i]={old:t[i],new:B[t[i]]},z[i]=B[t[i]];return ge.writeUInt16(1),ge.writeUInt16(0),ge.writeUInt32(12),ge.writeUInt16(0),ge.writeUInt16(262),ge.writeUInt16(0),ge.write(z),{charMap:o,subtable:ge.data,maxGlyphID:R+1};case"unicode":for(se=[],x=[],U=0,B={},n={},N=p=null,$e=0,Qe=l.length;$e<Qe;$e++)B[ne=t[i=l[$e]]]==null&&(B[ne]=++U),n[i]={old:ne,new:B[ne]},s=B[ne]-i,N!=null&&s===p||(N&&x.push(N),se.push(i),p=s),N=i;for(N&&x.push(N),x.push(65535),se.push(65535),J=2*(Se=se.length),re=2*Math.pow(Math.log(Se)/Math.LN2,2),S=Math.log(re/2)/Math.LN2,Q=2*Se-re,f=[],ee=[],A=[],k=Ze=0,ct=se.length;Ze<ct;k=++Ze){if(G=se[k],v=x[k],G===65535){f.push(0),ee.push(0);break}if(G-(ve=n[G].new)>=32768)for(f.push(0),ee.push(2*(A.length+Se-k)),i=Me=G;G<=v?Me<=v:Me>=v;i=G<=v?++Me:--Me)A.push(n[i].new);else f.push(ve-G),ee.push(0)}for(ge.writeUInt16(3),ge.writeUInt16(1),ge.writeUInt32(12),ge.writeUInt16(4),ge.writeUInt16(16+8*Se+2*A.length),ge.writeUInt16(0),ge.writeUInt16(J),ge.writeUInt16(re),ge.writeUInt16(S),ge.writeUInt16(Q),tt=0,ce=x.length;tt<ce;tt++)i=x[tt],ge.writeUInt16(i);for(ge.writeUInt16(0),We=0,be=se.length;We<be;We++)i=se[We],ge.writeUInt16(i);for(lt=0,Oe=f.length;lt<Oe;lt++)s=f[lt],ge.writeUInt16(s);for(wt=0,Be=ee.length;wt<Be;wt++)K=ee[wt],ge.writeUInt16(K);for(Lt=0,qe=A.length;Lt<qe;Lt++)R=A[Lt],ge.writeUInt16(R);return{charMap:n,subtable:ge.data,maxGlyphID:U+1}}},e}(),ej=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wf(t,mh),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,i,o;for(r.pos=this.offset,this.version=r.readUInt16(),o=r.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)n=new XN(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var i,o;return n==null&&(n="macroman"),i=XN.encode(r,n),(o=new kp).writeUInt16(0),o.writeUInt16(1),i.table=o.data.concat(i.subtable),i},t}(),Cae=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wf(t,mh),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),Pae=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wf(t,mh),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,i;for(i=[],n=0;n<10;++n)i.push(r.readByte());return i}(),this.charRange=function(){var n,i;for(i=[],n=0;n<4;++n)i.push(r.readInt());return i}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,i;for(i=[],n=0;n<2;n=++n)i.push(r.readInt());return i}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),Iae=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wf(t,mh),t.prototype.tag="post",t.prototype.parse=function(r){var n,i,o;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var l;for(i=r.readUInt16(),this.glyphNameIndex=[],l=0;0<=i?l<i:l>i;l=0<=i?++l:--l)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],o=[];r.pos<this.offset+this.length;)n=r.readByte(),o.push(this.names.push(r.readString(n)));return o;case 151552:return i=r.readUInt16(),this.offsets=r.read(i);case 196608:break;case 262144:return this.map=(function(){var s,f,p;for(p=[],l=s=0,f=this.file.maxp.numGlyphs;0<=f?s<f:s>f;l=0<=f?++s:--s)p.push(r.readUInt32());return p}).call(this)}},t}(),Rae=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},kae=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wf(t,mh),t.prototype.tag="name",t.prototype.parse=function(r){var n,i,o,l,s,f,p,v,x,S,A;for(r.pos=this.offset,r.readShort(),n=r.readShort(),f=r.readShort(),i=[],l=0;0<=n?l<n:l>n;l=0<=n?++l:--l)i.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+f+r.readShort()});for(p={},l=x=0,S=i.length;x<S;l=++x)o=i[l],r.pos=o.offset,v=r.readString(o.length),s=new Rae(v,o),p[A=o.nameID]==null&&(p[A]=[]),p[o.nameID].push(s);this.strings=p,this.copyright=p[0],this.fontFamily=p[1],this.fontSubfamily=p[2],this.uniqueSubfamily=p[3],this.fontName=p[4],this.version=p[5];try{this.postscriptName=p[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=p[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=p[7],this.manufacturer=p[8],this.designer=p[9],this.description=p[10],this.vendorUrl=p[11],this.designerUrl=p[12],this.license=p[13],this.licenseUrl=p[14],this.preferredFamily=p[15],this.preferredSubfamily=p[17],this.compatibleFull=p[18],this.sampleText=p[19]},t}(),Mae=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wf(t,mh),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),Oae=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wf(t,mh),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,i,o,l,s,f,p;for(r.pos=this.offset,this.metrics=[],n=0,f=this.file.hhea.numberOfMetrics;0<=f?n<f:n>f;n=0<=f?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var v,x;for(x=[],n=v=0;0<=o?v<o:v>o;n=0<=o?++v:--v)x.push(r.readInt16());return x}(),this.widths=(function(){var v,x,S,A;for(A=[],v=0,x=(S=this.metrics).length;v<x;v++)l=S[v],A.push(l.advance);return A}).call(this),i=this.widths[this.widths.length-1],p=[],n=s=0;0<=o?s<o:s>o;n=0<=o?++s:--s)p.push(this.widths.push(i));return p},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),tj=[].slice,Nae=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wf(t,mh),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,i,o,l,s,f,p,v,x,S;return r in this.cache?this.cache[r]:(l=this.file.loca,n=this.file.contents,i=l.indexOf(r),(o=l.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+i,s=(f=new kp(n.read(o))).readShort(),v=f.readShort(),S=f.readShort(),p=f.readShort(),x=f.readShort(),this.cache[r]=s===-1?new Lae(f,v,S,p,x):new Dae(f,s,v,S,p,x),this.cache[r]))},t.prototype.encode=function(r,n,i){var o,l,s,f,p;for(s=[],l=[],f=0,p=n.length;f<p;f++)o=r[n[f]],l.push(s.length),o&&(s=s.concat(o.encode(i)));return l.push(s.length),{table:s,offsets:l}},t}(),Dae=function(){function e(t,r,n,i,o,l){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=o,this.yMax=l,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Lae=function(){function e(t,r,n,i,o){var l,s;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;s=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&s;)l.pos+=1&s?4:2,128&s?l.pos+=8:64&s?l.pos+=4:8&s&&(l.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new kp(tj.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),Fae=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wf(t,mh),t.prototype.tag="loca",t.prototype.parse=function(r){var n,i;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var o,l;for(l=[],i=0,o=this.length;i<o;i+=2)l.push(2*r.readUInt16());return l}).call(this):(function(){var o,l;for(l=[],i=0,o=this.length;i<o;i+=4)l.push(r.readUInt32());return l}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var i=new Uint32Array(this.offsets.length),o=0,l=0,s=0;s<i.length;++s)if(i[s]=o,l<n.length&&n[l]==s){++l,i[s]=o;var f=this.offsets[s],p=this.offsets[s+1]-f;p>0&&(o+=p)}for(var v=new Array(4*i.length),x=0;x<i.length;++x)v[4*x+3]=255&i[x],v[4*x+2]=(65280&i[x])>>8,v[4*x+1]=(16711680&i[x])>>16,v[4*x]=(4278190080&i[x])>>24;return v},t}(),Bae=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,i,o;for(r in i=this.font.cmap.tables[0].codeMap,t={},o=this.subset)n=o[r],t[r]=i[n];return t},e.prototype.glyphsFor=function(t){var r,n,i,o,l,s,f;for(i={},l=0,s=t.length;l<s;l++)i[o=t[l]]=this.font.glyf.glyphFor(o);for(o in r=[],i)(n=i[o])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(o in f=this.glyphsFor(r))n=f[o],i[o]=n;return i},e.prototype.encode=function(t,r){var n,i,o,l,s,f,p,v,x,S,A,k,R,z,N;for(i in n=ej.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(t),A={0:0},N=n.charMap)A[(f=N[i]).old]=f.new;for(k in S=n.maxGlyphID,l)k in A||(A[k]=S++);return v=function(B){var U,K;for(U in K={},B)K[B[U]]=U;return K}(A),x=Object.keys(v).sort(function(B,U){return B-U}),R=function(){var B,U,K;for(K=[],B=0,U=x.length;B<U;B++)s=x[B],K.push(v[s]);return K}(),o=this.font.glyf.encode(l,R,A),p=this.font.loca.encode(o.offsets,R),z={cmap:this.font.cmap.raw(),glyf:o.table,loca:p,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(z["OS/2"]=this.font.os2.raw()),this.font.directory.encode(z)},e}();bn.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,i,o,l;if(Array.isArray(r))return"["+function(){var s,f,p;for(p=[],s=0,f=r.length;s<f;s++)n=r[s],p.push(t.convert(n));return p}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in o=["<<"],r)l=r[i],o.push("/"+i+" "+t.convert(l));return o.push(">>"),o.join(`
`)}return""+r},t}();var tc=63710088e-1,zae={centimeters:tc*100,centimetres:tc*100,degrees:tc/111325,feet:tc*3.28084,inches:tc*39.37,kilometers:tc/1e3,kilometres:tc/1e3,meters:tc,metres:tc,miles:tc/1609.344,millimeters:tc*1e3,millimetres:tc*1e3,nauticalmiles:tc/1852,radians:1,yards:tc*1.0936};function OR(e,t,r){r===void 0&&(r={});var n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function rj(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!YN(e[0])||!YN(e[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:e};return OR(n,t,r)}function nj(e,t,r){r===void 0&&(r={});for(var n=0,i=e;n<i.length;n++){var o=i[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<o[o.length-1].length;l++)if(o[o.length-1][l]!==o[0][l])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return OR(s,t,r)}function KN(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:e};return OR(n,t,r)}function $ae(e,t){t===void 0&&(t="kilometers");var r=zae[t];if(!r)throw new Error(t+" units is invalid");return e/r}function GN(e){var t=e%(2*Math.PI);return t*180/Math.PI}function sT(e){var t=e%360;return t*Math.PI/180}function YN(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function ij(e,t,r){if(e!==null)for(var n,i,o,l,s,f,p,v=0,x=0,S,A=e.type,k=A==="FeatureCollection",R=A==="Feature",z=k?e.features.length:1,N=0;N<z;N++){p=k?e.features[N].geometry:R?e.geometry:e,S=p?p.type==="GeometryCollection":!1,s=S?p.geometries.length:1;for(var B=0;B<s;B++){var U=0,K=0;if(l=S?p.geometries[B]:p,l!==null){f=l.coordinates;var ne=l.type;switch(v=0,ne){case null:break;case"Point":if(t(f,x,N,U,K)===!1)return!1;x++,U++;break;case"LineString":case"MultiPoint":for(n=0;n<f.length;n++){if(t(f[n],x,N,U,K)===!1)return!1;x++,ne==="MultiPoint"&&U++}ne==="LineString"&&U++;break;case"Polygon":case"MultiLineString":for(n=0;n<f.length;n++){for(i=0;i<f[n].length-v;i++){if(t(f[n][i],x,N,U,K)===!1)return!1;x++}ne==="MultiLineString"&&U++,ne==="Polygon"&&K++}ne==="Polygon"&&U++;break;case"MultiPolygon":for(n=0;n<f.length;n++){for(K=0,i=0;i<f[n].length;i++){for(o=0;o<f[n][i].length-v;o++){if(t(f[n][i][o],x,N,U,K)===!1)return!1;x++}K++}U++}break;case"GeometryCollection":for(n=0;n<l.geometries.length;n++)if(ij(l.geometries[n],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function tm(e){var t=[1/0,1/0,-1/0,-1/0];return ij(e,function(r){t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}tm.default=tm;function NR(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Uae(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function y5(e){return e.type==="Feature"?e.geometry:e}function z3(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var n=NR(e),i=y5(t),o=i.type,l=t.bbox,s=i.coordinates;if(l&&jae(n,l)===!1)return!1;o==="Polygon"&&(s=[s]);for(var f=!1,p=0;p<s.length&&!f;p++)if(ZN(n,s[p][0],r.ignoreBoundary)){for(var v=!1,x=1;x<s[p].length&&!v;)ZN(n,s[p][x],!r.ignoreBoundary)&&(v=!0),x++;v||(f=!0)}return f}function ZN(e,t,r){var n=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var i=0,o=t.length-1;i<t.length;o=i++){var l=t[i][0],s=t[i][1],f=t[o][0],p=t[o][1],v=e[1]*(l-f)+s*(f-e[0])+p*(e[0]-l)===0&&(l-e[0])*(f-e[0])<=0&&(s-e[1])*(p-e[1])<=0;if(v)return!r;var x=s>e[1]!=p>e[1]&&e[0]<(f-l)*(e[1]-s)/(p-s)+l;x&&(n=!n)}return n}function jae(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function JN(e,t){t===void 0&&(t={});var r=Number(e[0]),n=Number(e[1]),i=Number(e[2]),o=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var l=[r,n],s=[r,o],f=[i,o],p=[i,n];return nj([[l,p,f,s,l]],t.properties,{bbox:e,id:t.id})}function S4(e,t,r,n){n===void 0&&(n={});var i=NR(e),o=sT(i[0]),l=sT(i[1]),s=sT(r),f=$ae(t,n.units),p=Math.asin(Math.sin(l)*Math.cos(f)+Math.cos(l)*Math.sin(f)*Math.cos(s)),v=o+Math.atan2(Math.sin(s)*Math.sin(f)*Math.cos(l),Math.cos(f)-Math.sin(l)*Math.sin(p)),x=GN(v),S=GN(p);return rj([x,S],n.properties)}function oj(e,t,r){r===void 0&&(r={});for(var n=r.steps||64,i=r.properties?r.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},o=[],l=0;l<n;l++)o.push(S4(e,t,l*-360/n,r).geometry.coordinates);return o.push(o[0]),nj([o],i)}function m2(e,t,r){r===void 0&&(r={});for(var n=NR(e),i=Uae(t),o=0;o<i.length-1;o++){var l=!1;if(r.ignoreEndVertices&&(o===0&&(l="start"),o===i.length-2&&(l="end"),o===0&&o+1===i.length-1&&(l="both")),Vae(i[o],i[o+1],n,l,typeof r.epsilon>"u"?null:r.epsilon))return!0}return!1}function Vae(e,t,r,n,i){var o=r[0],l=r[1],s=e[0],f=e[1],p=t[0],v=t[1],x=r[0]-s,S=r[1]-f,A=p-s,k=v-f,R=x*k-S*A;if(i!==null){if(Math.abs(R)>i)return!1}else if(R!==0)return!1;if(n){if(n==="start")return Math.abs(A)>=Math.abs(k)?A>0?s<o&&o<=p:p<=o&&o<s:k>0?f<l&&l<=v:v<=l&&l<f;if(n==="end")return Math.abs(A)>=Math.abs(k)?A>0?s<=o&&o<p:p<o&&o<=s:k>0?f<=l&&l<v:v<l&&l<=f;if(n==="both")return Math.abs(A)>=Math.abs(k)?A>0?s<o&&o<p:p<o&&o<s:k>0?f<l&&l<v:v<l&&l<f}else return Math.abs(A)>=Math.abs(k)?A>0?s<=o&&o<=p:p<=o&&o<=s:k>0?f<=l&&l<=v:v<=l&&l<=f;return!1}function Hae(e,t,r,n,i){i===void 0&&(i={});var o=i.steps||64,l=QN(r),s=QN(n),f=!Array.isArray(e)&&e.type==="Feature"?e.properties:{};if(l===s)return KN(oj(e,t,i).geometry.coordinates[0],f);for(var p=l,v=l<s?s:s+360,x=p,S=[],A=0;x<v;)S.push(S4(e,t,x,i).geometry.coordinates),A++,x=p+A*360/o;return x>v&&S.push(S4(e,t,v,i).geometry.coordinates),KN(S,f)}function QN(e){var t=e%360;return t<0&&(t+=360),t}function qae(e,t){var r=y5(e),n=y5(t),i=r.type,o=n.type,l=r.coordinates,s=n.coordinates;switch(i){case"Point":switch(o){case"Point":return DR(l,s);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"Point":return Wae(r,n);case"MultiPoint":return Xae(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return m2(n,r,{ignoreEndVertices:!0});case"LineString":return Yae(r,n);case"MultiPoint":return Kae(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return z3(n,r,{ignoreBoundary:!0});case"LineString":return Zae(r,n);case"Polygon":return Jae(r,n);case"MultiPoint":return Gae(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Wae(e,t){var r,n=!1;for(r=0;r<e.coordinates.length;r++)if(DR(e.coordinates[r],t.coordinates)){n=!0;break}return n}function Xae(e,t){for(var r=0,n=t.coordinates;r<n.length;r++){for(var i=n[r],o=!1,l=0,s=e.coordinates;l<s.length;l++){var f=s[l];if(DR(i,f)){o=!0;break}}if(!o)return!1}return!0}function Kae(e,t){for(var r=!1,n=0,i=t.coordinates;n<i.length;n++){var o=i[n];if(m2(o,e,{ignoreEndVertices:!0})&&(r=!0),!m2(o,e))return!1}return!!r}function Gae(e,t){for(var r=0,n=t.coordinates;r<n.length;r++){var i=n[r];if(!z3(i,e,{ignoreBoundary:!0}))return!1}return!0}function Yae(e,t){for(var r=!1,n=0,i=t.coordinates;n<i.length;n++){var o=i[n];if(m2({type:"Point",coordinates:o},e,{ignoreEndVertices:!0})&&(r=!0),!m2({type:"Point",coordinates:o},e,{ignoreEndVertices:!1}))return!1}return r}function Zae(e,t){var r=!1,n=0,i=tm(e),o=tm(t);if(!sj(i,o))return!1;for(n;n<t.coordinates.length-1;n++){var l=Qae(t.coordinates[n],t.coordinates[n+1]);if(z3({type:"Point",coordinates:l},e,{ignoreBoundary:!0})){r=!0;break}}return r}function Jae(e,t){if(e.type==="Feature"&&e.geometry===null||t.type==="Feature"&&t.geometry===null)return!1;var r=tm(e),n=tm(t);if(!sj(r,n))return!1;for(var i=y5(t).coordinates,o=0,l=i;o<l.length;o++)for(var s=l[o],f=0,p=s;f<p.length;f++){var v=p[f];if(!z3(v,e))return!1}return!0}function sj(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}function DR(e,t){return e[0]===t[0]&&e[1]===t[1]}function Qae(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}var ele={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(rf,function(){var r=function(D,X){var j={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},Z={on:function(we,Le,ft){if(j[we]===void 0)throw new Error("Invalid event type: "+we);j[we].push({selector:Le,fn:ft})},render:function(we){X.store.featureChanged(we)}},de=function(we,Le){for(var ft=j[we],Mt=ft.length;Mt--;){var Qt=ft[Mt];if(Qt.selector(Le)){Qt.fn.call(Z,Le)||X.store.render(),X.ui.updateMapClasses();break}}};return D.start.call(Z),{render:D.render,stop:function(){D.stop&&D.stop()},trash:function(){D.trash&&(D.trash(),X.store.render())},combineFeatures:function(){D.combineFeatures&&D.combineFeatures()},uncombineFeatures:function(){D.uncombineFeatures&&D.uncombineFeatures()},drag:function(we){de("drag",we)},click:function(we){de("click",we)},mousemove:function(we){de("mousemove",we)},mousedown:function(we){de("mousedown",we)},mouseup:function(we){de("mouseup",we)},mouseout:function(we){de("mouseout",we)},keydown:function(we){de("keydown",we)},keyup:function(we){de("keyup",we)},touchstart:function(we){de("touchstart",we)},touchmove:function(we){de("touchmove",we)},touchend:function(we){de("touchend",we)},tap:function(we){de("tap",we)}}};function n(D){return D&&D.__esModule&&Object.prototype.hasOwnProperty.call(D,"default")?D.default:D}function i(D){if(D.__esModule)return D;var X=D.default;if(typeof X=="function"){var j=function Z(){if(this instanceof Z){var de=[null];de.push.apply(de,arguments);var we=Function.bind.apply(X,de);return new we}return X.apply(this,arguments)};j.prototype=X.prototype}else j={};return Object.defineProperty(j,"__esModule",{value:!0}),Object.keys(D).forEach(function(Z){var de=Object.getOwnPropertyDescriptor(D,Z);Object.defineProperty(j,Z,de.get?de:{enumerable:!0,get:function(){return D[Z]}})}),j}var o={},l={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:63567523142e-4},s=l;function f(D){var X=0;if(D&&D.length>0){X+=Math.abs(p(D[0]));for(var j=1;j<D.length;j++)X-=Math.abs(p(D[j]))}return X}function p(D){var X,j,Z,de,we,Le,ft=0,Mt=D.length;if(Mt>2){for(Le=0;Le<Mt;Le++)Le===Mt-2?(Z=Mt-2,de=Mt-1,we=0):Le===Mt-1?(Z=Mt-1,de=0,we=1):(Z=Le,de=Le+1,we=Le+2),X=D[Z],j=D[de],ft+=(v(D[we][0])-v(X[0]))*Math.sin(v(j[1]));ft=ft*s.RADIUS*s.RADIUS/2}return ft}function v(D){return D*Math.PI/180}o.geometry=function D(X){var j,Z=0;switch(X.type){case"Polygon":return f(X.coordinates);case"MultiPolygon":for(j=0;j<X.coordinates.length;j++)Z+=f(X.coordinates[j]);return Z;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(j=0;j<X.geometries.length;j++)Z+=D(X.geometries[j]);return Z}},o.ring=p;var x={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},S={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},A={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},k={POLYGON:"polygon",LINE:"line_string",POINT:"point"},R={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},z={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},N={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},B={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},U={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},K={ACTIVE:"true",INACTIVE:"false"},ne=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],ee=-85,Q=Object.freeze({__proto__:null,classes:x,sources:S,cursors:A,types:k,geojsonTypes:R,modes:z,events:N,updateActions:B,meta:U,activeStates:K,interactions:ne,LAT_MIN:-90,LAT_RENDERED_MIN:ee,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),re={Point:0,LineString:1,MultiLineString:1,Polygon:2};function Se(D,X){var j=re[D.geometry.type]-re[X.geometry.type];return j===0&&D.geometry.type===R.POLYGON?D.area-X.area:j}function J(D){return D.map(function(X){return X.geometry.type===R.POLYGON&&(X.area=o.geometry({type:R.FEATURE,property:{},geometry:X.geometry})),X}).sort(Se).map(function(X){return delete X.area,X})}function G(D,X){return X===void 0&&(X=0),[[D.point.x-X,D.point.y-X],[D.point.x+X,D.point.y+X]]}function se(D){if(this._items={},this._nums={},this._length=D?D.length:0,D)for(var X=0,j=D.length;X<j;X++)this.add(D[X]),D[X]!==void 0&&(typeof D[X]=="string"?this._items[D[X]]=X:this._nums[D[X]]=X)}se.prototype.add=function(D){return this.has(D)||(this._length++,typeof D=="string"?this._items[D]=this._length:this._nums[D]=this._length),this},se.prototype.delete=function(D){return this.has(D)===!1||(this._length--,delete this._items[D],delete this._nums[D]),this},se.prototype.has=function(D){return(typeof D=="string"||typeof D=="number")&&(this._items[D]!==void 0||this._nums[D]!==void 0)},se.prototype.values=function(){var D=this,X=[];return Object.keys(this._items).forEach(function(j){X.push({k:j,v:D._items[j]})}),Object.keys(this._nums).forEach(function(j){X.push({k:JSON.parse(j),v:D._nums[j]})}),X.sort(function(j,Z){return j.v-Z.v}).map(function(j){return j.k})},se.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var ve=[U.FEATURE,U.MIDPOINT,U.VERTEX],ge={click:function(D,X,j){return je(D,X,j,j.options.clickBuffer)},touch:function(D,X,j){return je(D,X,j,j.options.touchBuffer)}};function je(D,X,j,Z){if(j.map===null)return[];var de=D?G(D,Z):X,we={};j.options.styles&&(we.layers=j.options.styles.map(function(Qt){return Qt.id}).filter(function(Qt){return j.map.getLayer(Qt)!=null}));var Le=j.map.queryRenderedFeatures(de,we).filter(function(Qt){return ve.indexOf(Qt.properties.meta)!==-1}),ft=new se,Mt=[];return Le.forEach(function(Qt){var er=Qt.properties.id;ft.has(er)||(ft.add(er),Mt.push(Qt))}),J(Mt)}function $e(D,X){var j=ge.click(D,null,X),Z={mouse:A.NONE};return j[0]&&(Z.mouse=j[0].properties.active===K.ACTIVE?A.MOVE:A.POINTER,Z.feature=j[0].properties.meta),X.events.currentModeName().indexOf("draw")!==-1&&(Z.mouse=A.ADD),X.ui.queueMapClasses(Z),X.ui.updateMapClasses(),j[0]}function Ze(D,X){var j=D.x-X.x,Z=D.y-X.y;return Math.sqrt(j*j+Z*Z)}function Me(D,X,j){j===void 0&&(j={});var Z=j.fineTolerance!=null?j.fineTolerance:4,de=j.grossTolerance!=null?j.grossTolerance:12,we=j.interval!=null?j.interval:500;D.point=D.point||X.point,D.time=D.time||X.time;var Le=Ze(D.point,X.point);return Le<Z||Le<de&&X.time-D.time<we}function Ue(D,X,j){j===void 0&&(j={});var Z=j.tolerance!=null?j.tolerance:25,de=j.interval!=null?j.interval:250;return D.point=D.point||X.point,D.time=D.time||X.time,Ze(D.point,X.point)<Z&&X.time-D.time<de}var Qe={exports:{}},ct=Qe.exports=function(D,X){if(X||(X=16),D===void 0&&(D=128),D<=0)return"0";for(var j=Math.log(Math.pow(2,D))/Math.log(X),Z=2;j===1/0;Z*=2)j=Math.log(Math.pow(2,D/Z))/Math.log(X)*Z;var de=j-Math.floor(j),we="";for(Z=0;Z<Math.floor(j);Z++)we=Math.floor(Math.random()*X).toString(X)+we;if(de){var Le=Math.pow(X,de);we=Math.floor(Math.random()*Le).toString(X)+we}var ft=parseInt(we,X);return ft!==1/0&&ft>=Math.pow(2,D)?ct(D,X):we};ct.rack=function(D,X,j){var Z=function(we){var Le=0;do{if(Le++>10){if(!j)throw new Error("too many ID collisions, use more bits");D+=j}var ft=ct(D,X)}while(Object.hasOwnProperty.call(de,ft));return de[ft]=we,ft},de=Z.hats={};return Z.get=function(we){return Z.hats[we]},Z.set=function(we,Le){return Z.hats[we]=Le,Z},Z.bits=D||128,Z.base=X||16,Z};var ce=n(Qe.exports),be=function(D,X){this.ctx=D,this.properties=X.properties||{},this.coordinates=X.geometry.coordinates,this.id=X.id||ce(),this.type=X.geometry.type};be.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},be.prototype.incomingCoords=function(D){this.setCoordinates(D)},be.prototype.setCoordinates=function(D){this.coordinates=D,this.changed()},be.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},be.prototype.setProperty=function(D,X){this.properties[D]=X},be.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:R.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},be.prototype.internal=function(D){var X={id:this.id,meta:U.FEATURE,"meta:type":this.type,active:K.INACTIVE,mode:D};if(this.ctx.options.userProperties)for(var j in this.properties)X["user_"+j]=this.properties[j];return{type:R.FEATURE,properties:X,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Oe=function(D,X){be.call(this,D,X)};(Oe.prototype=Object.create(be.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Oe.prototype.updateCoordinate=function(D,X,j){this.coordinates=arguments.length===3?[X,j]:[D,X],this.changed()},Oe.prototype.getCoordinate=function(){return this.getCoordinates()};var Be=function(D,X){be.call(this,D,X)};(Be.prototype=Object.create(be.prototype)).isValid=function(){return this.coordinates.length>1},Be.prototype.addCoordinate=function(D,X,j){this.changed();var Z=parseInt(D,10);this.coordinates.splice(Z,0,[X,j])},Be.prototype.getCoordinate=function(D){var X=parseInt(D,10);return JSON.parse(JSON.stringify(this.coordinates[X]))},Be.prototype.removeCoordinate=function(D){this.changed(),this.coordinates.splice(parseInt(D,10),1)},Be.prototype.updateCoordinate=function(D,X,j){var Z=parseInt(D,10);this.coordinates[Z]=[X,j],this.changed()};var qe=function(D,X){be.call(this,D,X),this.coordinates=this.coordinates.map(function(j){return j.slice(0,-1)})};(qe.prototype=Object.create(be.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(D){return D.length>2})},qe.prototype.incomingCoords=function(D){this.coordinates=D.map(function(X){return X.slice(0,-1)}),this.changed()},qe.prototype.setCoordinates=function(D){this.coordinates=D,this.changed()},qe.prototype.addCoordinate=function(D,X,j){this.changed();var Z=D.split(".").map(function(de){return parseInt(de,10)});this.coordinates[Z[0]].splice(Z[1],0,[X,j])},qe.prototype.removeCoordinate=function(D){this.changed();var X=D.split(".").map(function(Z){return parseInt(Z,10)}),j=this.coordinates[X[0]];j&&(j.splice(X[1],1),j.length<3&&this.coordinates.splice(X[0],1))},qe.prototype.getCoordinate=function(D){var X=D.split(".").map(function(Z){return parseInt(Z,10)}),j=this.coordinates[X[0]];return JSON.parse(JSON.stringify(j[X[1]]))},qe.prototype.getCoordinates=function(){return this.coordinates.map(function(D){return D.concat([D[0]])})},qe.prototype.updateCoordinate=function(D,X,j){this.changed();var Z=D.split("."),de=parseInt(Z[0],10),we=parseInt(Z[1],10);this.coordinates[de]===void 0&&(this.coordinates[de]=[]),this.coordinates[de][we]=[X,j]};var tt={MultiPoint:Oe,MultiLineString:Be,MultiPolygon:qe},We=function(D,X,j,Z,de){var we=j.split("."),Le=parseInt(we[0],10),ft=we[1]?we.slice(1).join("."):null;return D[Le][X](ft,Z,de)},Xe=function(D,X){if(be.call(this,D,X),delete this.coordinates,this.model=tt[X.geometry.type],this.model===void 0)throw new TypeError(X.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(X.geometry.coordinates)};function lt(D){this.map=D.map,this.drawConfig=JSON.parse(JSON.stringify(D.options||{})),this._ctx=D}(Xe.prototype=Object.create(be.prototype))._coordinatesToFeatures=function(D){var X=this,j=this.model.bind(this);return D.map(function(Z){return new j(X.ctx,{id:ce(),type:R.FEATURE,properties:{},geometry:{coordinates:Z,type:X.type.replace("Multi","")}})})},Xe.prototype.isValid=function(){return this.features.every(function(D){return D.isValid()})},Xe.prototype.setCoordinates=function(D){this.features=this._coordinatesToFeatures(D),this.changed()},Xe.prototype.getCoordinate=function(D){return We(this.features,"getCoordinate",D)},Xe.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(D){return D.type===R.POLYGON?D.getCoordinates():D.coordinates})))},Xe.prototype.updateCoordinate=function(D,X,j){We(this.features,"updateCoordinate",D,X,j),this.changed()},Xe.prototype.addCoordinate=function(D,X,j){We(this.features,"addCoordinate",D,X,j),this.changed()},Xe.prototype.removeCoordinate=function(D){We(this.features,"removeCoordinate",D),this.changed()},Xe.prototype.getFeatures=function(){return this.features},lt.prototype.setSelected=function(D){return this._ctx.store.setSelected(D)},lt.prototype.setSelectedCoordinates=function(D){var X=this;this._ctx.store.setSelectedCoordinates(D),D.reduce(function(j,Z){return j[Z.feature_id]===void 0&&(j[Z.feature_id]=!0,X._ctx.store.get(Z.feature_id).changed()),j},{})},lt.prototype.getSelected=function(){return this._ctx.store.getSelected()},lt.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},lt.prototype.isSelected=function(D){return this._ctx.store.isSelected(D)},lt.prototype.getFeature=function(D){return this._ctx.store.get(D)},lt.prototype.select=function(D){return this._ctx.store.select(D)},lt.prototype.deselect=function(D){return this._ctx.store.deselect(D)},lt.prototype.deleteFeature=function(D,X){return X===void 0&&(X={}),this._ctx.store.delete(D,X)},lt.prototype.addFeature=function(D){return this._ctx.store.add(D)},lt.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},lt.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},lt.prototype.setActionableState=function(D){D===void 0&&(D={});var X={trash:D.trash||!1,combineFeatures:D.combineFeatures||!1,uncombineFeatures:D.uncombineFeatures||!1};return this._ctx.events.actionable(X)},lt.prototype.changeMode=function(D,X,j){return X===void 0&&(X={}),j===void 0&&(j={}),this._ctx.events.changeMode(D,X,j)},lt.prototype.updateUIClasses=function(D){return this._ctx.ui.queueMapClasses(D)},lt.prototype.activateUIButton=function(D){return this._ctx.ui.setActiveButton(D)},lt.prototype.featuresAt=function(D,X,j){if(j===void 0&&(j="click"),j!=="click"&&j!=="touch")throw new Error("invalid buffer type");return ge[j](D,X,this._ctx)},lt.prototype.newFeature=function(D){var X=D.geometry.type;return X===R.POINT?new Oe(this._ctx,D):X===R.LINE_STRING?new Be(this._ctx,D):X===R.POLYGON?new qe(this._ctx,D):new Xe(this._ctx,D)},lt.prototype.isInstanceOf=function(D,X){if(D===R.POINT)return X instanceof Oe;if(D===R.LINE_STRING)return X instanceof Be;if(D===R.POLYGON)return X instanceof qe;if(D==="MultiFeature")return X instanceof Xe;throw new Error("Unknown feature class: "+D)},lt.prototype.doRender=function(D){return this._ctx.store.featureChanged(D)},lt.prototype.onSetup=function(){},lt.prototype.onDrag=function(){},lt.prototype.onClick=function(){},lt.prototype.onMouseMove=function(){},lt.prototype.onMouseDown=function(){},lt.prototype.onMouseUp=function(){},lt.prototype.onMouseOut=function(){},lt.prototype.onKeyUp=function(){},lt.prototype.onKeyDown=function(){},lt.prototype.onTouchStart=function(){},lt.prototype.onTouchMove=function(){},lt.prototype.onTouchEnd=function(){},lt.prototype.onTap=function(){},lt.prototype.onStop=function(){},lt.prototype.onTrash=function(){},lt.prototype.onCombineFeature=function(){},lt.prototype.onUncombineFeature=function(){},lt.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var wt={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Lt=Object.keys(wt);function At(D){var X=Object.keys(D);return function(j,Z){Z===void 0&&(Z={});var de={},we=X.reduce(function(Le,ft){return Le[ft]=D[ft],Le},new lt(j));return{start:function(){var Le=this;de=we.onSetup(Z),Lt.forEach(function(ft){var Mt,Qt=wt[ft],er=function(){return!1};D[Qt]&&(er=function(){return!0}),Le.on(ft,er,(Mt=Qt,function(Jt){return we[Mt](de,Jt)}))})},stop:function(){we.onStop(de)},trash:function(){we.onTrash(de)},combineFeatures:function(){we.onCombineFeatures(de)},uncombineFeatures:function(){we.onUncombineFeatures(de)},render:function(Le,ft){we.toDisplayFeatures(de,Le,ft)}}}}function zt(D){return[].concat(D).filter(function(X){return X!==void 0})}function vt(){var D=this;if(!(D.ctx.map&&D.ctx.map.getSource(S.HOT)!==void 0))return Mt();var X=D.ctx.events.currentModeName();D.ctx.ui.queueMapClasses({mode:X});var j=[],Z=[];D.isDirty?Z=D.getAllIds():(j=D.getChangedIds().filter(function(Qt){return D.get(Qt)!==void 0}),Z=D.sources.hot.filter(function(Qt){return Qt.properties.id&&j.indexOf(Qt.properties.id)===-1&&D.get(Qt.properties.id)!==void 0}).map(function(Qt){return Qt.properties.id})),D.sources.hot=[];var de=D.sources.cold.length;D.sources.cold=D.isDirty?[]:D.sources.cold.filter(function(Qt){var er=Qt.properties.id||Qt.properties.parent;return j.indexOf(er)===-1});var we=de!==D.sources.cold.length||Z.length>0;function Le(Qt,er){var Jt=D.get(Qt).internal(X);D.ctx.events.currentModeRender(Jt,function(yr){D.sources[er].push(yr)})}if(j.forEach(function(Qt){return Le(Qt,"hot")}),Z.forEach(function(Qt){return Le(Qt,"cold")}),we&&D.ctx.map.getSource(S.COLD).setData({type:R.FEATURE_COLLECTION,features:D.sources.cold}),D.ctx.map.getSource(S.HOT).setData({type:R.FEATURE_COLLECTION,features:D.sources.hot}),D._emitSelectionChange&&(D.ctx.map.fire(N.SELECTION_CHANGE,{features:D.getSelected().map(function(Qt){return Qt.toGeoJSON()}),points:D.getSelectedCoordinates().map(function(Qt){return{type:R.FEATURE,properties:{},geometry:{type:R.POINT,coordinates:Qt.coordinates}}})}),D._emitSelectionChange=!1),D._deletedFeaturesToEmit.length){var ft=D._deletedFeaturesToEmit.map(function(Qt){return Qt.toGeoJSON()});D._deletedFeaturesToEmit=[],D.ctx.map.fire(N.DELETE,{features:ft})}function Mt(){D.isDirty=!1,D.clearChangedIds()}Mt(),D.ctx.map.fire(N.RENDER,{})}function pe(D){var X,j=this;this._features={},this._featureIds=new se,this._selectedFeatureIds=new se,this._selectedCoordinates=[],this._changedFeatureIds=new se,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=D,this.sources={hot:[],cold:[]},this.render=function(){X||(X=requestAnimationFrame(function(){X=null,vt.call(j)}))},this.isDirty=!1}function ur(D,X){var j=D._selectedCoordinates.filter(function(Z){return D._selectedFeatureIds.has(Z.feature_id)});D._selectedCoordinates.length===j.length||X.silent||(D._emitSelectionChange=!0),D._selectedCoordinates=j}pe.prototype.createRenderBatch=function(){var D=this,X=this.render,j=0;return this.render=function(){j++},function(){D.render=X,j>0&&D.render()}},pe.prototype.setDirty=function(){return this.isDirty=!0,this},pe.prototype.featureChanged=function(D){return this._changedFeatureIds.add(D),this},pe.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},pe.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},pe.prototype.getAllIds=function(){return this._featureIds.values()},pe.prototype.add=function(D){return this.featureChanged(D.id),this._features[D.id]=D,this._featureIds.add(D.id),this},pe.prototype.delete=function(D,X){var j=this;return X===void 0&&(X={}),zt(D).forEach(function(Z){j._featureIds.has(Z)&&(j._featureIds.delete(Z),j._selectedFeatureIds.delete(Z),X.silent||j._deletedFeaturesToEmit.indexOf(j._features[Z])===-1&&j._deletedFeaturesToEmit.push(j._features[Z]),delete j._features[Z],j.isDirty=!0)}),ur(this,X),this},pe.prototype.get=function(D){return this._features[D]},pe.prototype.getAll=function(){var D=this;return Object.keys(this._features).map(function(X){return D._features[X]})},pe.prototype.select=function(D,X){var j=this;return X===void 0&&(X={}),zt(D).forEach(function(Z){j._selectedFeatureIds.has(Z)||(j._selectedFeatureIds.add(Z),j._changedFeatureIds.add(Z),X.silent||(j._emitSelectionChange=!0))}),this},pe.prototype.deselect=function(D,X){var j=this;return X===void 0&&(X={}),zt(D).forEach(function(Z){j._selectedFeatureIds.has(Z)&&(j._selectedFeatureIds.delete(Z),j._changedFeatureIds.add(Z),X.silent||(j._emitSelectionChange=!0))}),ur(this,X),this},pe.prototype.clearSelected=function(D){return D===void 0&&(D={}),this.deselect(this._selectedFeatureIds.values(),{silent:D.silent}),this},pe.prototype.setSelected=function(D,X){var j=this;return X===void 0&&(X={}),D=zt(D),this.deselect(this._selectedFeatureIds.values().filter(function(Z){return D.indexOf(Z)===-1}),{silent:X.silent}),this.select(D.filter(function(Z){return!j._selectedFeatureIds.has(Z)}),{silent:X.silent}),this},pe.prototype.setSelectedCoordinates=function(D){return this._selectedCoordinates=D,this._emitSelectionChange=!0,this},pe.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},pe.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},pe.prototype.getSelected=function(){var D=this;return this._selectedFeatureIds.values().map(function(X){return D.get(X)})},pe.prototype.getSelectedCoordinates=function(){var D=this;return this._selectedCoordinates.map(function(X){return{coordinates:D.get(X.feature_id).getCoordinate(X.coord_path)}})},pe.prototype.isSelected=function(D){return this._selectedFeatureIds.has(D)},pe.prototype.setFeatureProperty=function(D,X,j){this.get(D).setProperty(X,j),this.featureChanged(D)},pe.prototype.storeMapConfig=function(){var D=this;ne.forEach(function(X){D.ctx.map[X]&&(D._mapInitialConfig[X]=D.ctx.map[X].isEnabled())})},pe.prototype.restoreMapConfig=function(){var D=this;Object.keys(this._mapInitialConfig).forEach(function(X){D._mapInitialConfig[X]?D.ctx.map[X].enable():D.ctx.map[X].disable()})},pe.prototype.getInitialConfigValue=function(D){return this._mapInitialConfig[D]===void 0||this._mapInitialConfig[D]};var sr=function(){for(var D=arguments,X={},j=0;j<arguments.length;j++){var Z=D[j];for(var de in Z)Tt.call(Z,de)&&(X[de]=Z[de])}return X},Tt=Object.prototype.hasOwnProperty,Nt=n(sr),Zt=["mode","feature","mouse"];function rr(D){var X=null,j=null,Z={onRemove:function(){return D.map.off("load",Z.connect),clearInterval(j),Z.removeLayers(),D.store.restoreMapConfig(),D.ui.removeButtons(),D.events.removeEventListeners(),D.ui.clearMapClasses(),D.boxZoomInitial&&D.map.boxZoom.enable(),D.map=null,D.container=null,D.store=null,X&&X.parentNode&&X.parentNode.removeChild(X),X=null,this},connect:function(){D.map.off("load",Z.connect),clearInterval(j),Z.addLayers(),D.store.storeMapConfig(),D.events.addEventListeners()},onAdd:function(de){var we=de.fire;return de.fire=function(Le,ft){var Mt=arguments;return we.length===1&&arguments.length!==1&&(Mt=[Nt({},{type:Le},ft)]),we.apply(de,Mt)},D.map=de,D.events=function(Le){var ft=Object.keys(Le.options.modes).reduce(function($t,Tr){return $t[Tr]=At(Le.options.modes[Tr]),$t},{}),Mt={},Qt={},er={},Jt=null,yr=null;er.drag=function($t,Tr){Tr({point:$t.point,time:new Date().getTime()})?(Le.ui.queueMapClasses({mouse:A.DRAG}),yr.drag($t)):$t.originalEvent.stopPropagation()},er.mousedrag=function($t){er.drag($t,function(Tr){return!Me(Mt,Tr)})},er.touchdrag=function($t){er.drag($t,function(Tr){return!Ue(Qt,Tr)})},er.mousemove=function($t){if(($t.originalEvent.buttons!==void 0?$t.originalEvent.buttons:$t.originalEvent.which)===1)return er.mousedrag($t);var Tr=$e($t,Le);$t.featureTarget=Tr,yr.mousemove($t)},er.mousedown=function($t){Mt={time:new Date().getTime(),point:$t.point};var Tr=$e($t,Le);$t.featureTarget=Tr,yr.mousedown($t)},er.mouseup=function($t){var Tr=$e($t,Le);$t.featureTarget=Tr,Me(Mt,{point:$t.point,time:new Date().getTime()})?yr.click($t):yr.mouseup($t)},er.mouseout=function($t){yr.mouseout($t)},er.touchstart=function($t){if(Le.options.touchEnabled){Qt={time:new Date().getTime(),point:$t.point};var Tr=ge.touch($t,null,Le)[0];$t.featureTarget=Tr,yr.touchstart($t)}},er.touchmove=function($t){if(Le.options.touchEnabled)return yr.touchmove($t),er.touchdrag($t)},er.touchend=function($t){if($t.originalEvent.preventDefault(),Le.options.touchEnabled){var Tr=ge.touch($t,null,Le)[0];$t.featureTarget=Tr,Ue(Qt,{time:new Date().getTime(),point:$t.point})?yr.tap($t):yr.touchend($t)}};var ti=function($t){return!($t===8||$t===46||$t>=48&&$t<=57)};function zr($t,Tr,wn){wn===void 0&&(wn={}),yr.stop();var Hi=ft[$t];if(Hi===void 0)throw new Error($t+" is not valid");Jt=$t;var ai=Hi(Le,Tr);yr=r(ai,Le),wn.silent||Le.map.fire(N.MODE_CHANGE,{mode:$t}),Le.store.setDirty(),Le.store.render()}er.keydown=function($t){($t.srcElement||$t.target).classList.contains("mapboxgl-canvas")&&($t.keyCode!==8&&$t.keyCode!==46||!Le.options.controls.trash?ti($t.keyCode)?yr.keydown($t):$t.keyCode===49&&Le.options.controls.point?zr(z.DRAW_POINT):$t.keyCode===50&&Le.options.controls.line_string?zr(z.DRAW_LINE_STRING):$t.keyCode===51&&Le.options.controls.polygon&&zr(z.DRAW_POLYGON):($t.preventDefault(),yr.trash()))},er.keyup=function($t){ti($t.keyCode)&&yr.keyup($t)},er.zoomend=function(){Le.store.changeZoom()},er.data=function($t){if($t.dataType==="style"){var Tr=Le.setup,wn=Le.map,Hi=Le.options,ai=Le.store;Hi.styles.some(function(zl){return wn.getLayer(zl.id)})||(Tr.addLayers(),ai.setDirty(),ai.render())}};var br={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){Jt=Le.options.defaultMode,yr=r(ft[Jt](Le),Le)},changeMode:zr,actionable:function($t){var Tr=!1;Object.keys($t).forEach(function(wn){if(br[wn]===void 0)throw new Error("Invalid action type");br[wn]!==$t[wn]&&(Tr=!0),br[wn]=$t[wn]}),Tr&&Le.map.fire(N.ACTIONABLE,{actions:br})},currentModeName:function(){return Jt},currentModeRender:function($t,Tr){return yr.render($t,Tr)},fire:function($t,Tr){er[$t]&&er[$t](Tr)},addEventListeners:function(){Le.map.on("mousemove",er.mousemove),Le.map.on("mousedown",er.mousedown),Le.map.on("mouseup",er.mouseup),Le.map.on("data",er.data),Le.map.on("touchmove",er.touchmove),Le.map.on("touchstart",er.touchstart),Le.map.on("touchend",er.touchend),Le.container.addEventListener("mouseout",er.mouseout),Le.options.keybindings&&(Le.container.addEventListener("keydown",er.keydown),Le.container.addEventListener("keyup",er.keyup))},removeEventListeners:function(){Le.map.off("mousemove",er.mousemove),Le.map.off("mousedown",er.mousedown),Le.map.off("mouseup",er.mouseup),Le.map.off("data",er.data),Le.map.off("touchmove",er.touchmove),Le.map.off("touchstart",er.touchstart),Le.map.off("touchend",er.touchend),Le.container.removeEventListener("mouseout",er.mouseout),Le.options.keybindings&&(Le.container.removeEventListener("keydown",er.keydown),Le.container.removeEventListener("keyup",er.keyup))},trash:function($t){yr.trash($t)},combineFeatures:function(){yr.combineFeatures()},uncombineFeatures:function(){yr.uncombineFeatures()},getMode:function(){return Jt}}}(D),D.ui=function(Le){var ft={},Mt=null,Qt={mode:null,feature:null,mouse:null},er={mode:null,feature:null,mouse:null};function Jt($t){er=Nt(er,$t)}function yr(){var $t,Tr;if(Le.container){var wn=[],Hi=[];Zt.forEach(function(ai){er[ai]!==Qt[ai]&&(wn.push(ai+"-"+Qt[ai]),er[ai]!==null&&Hi.push(ai+"-"+er[ai]))}),wn.length>0&&($t=Le.container.classList).remove.apply($t,wn),Hi.length>0&&(Tr=Le.container.classList).add.apply(Tr,Hi),Qt=Nt(Qt,er)}}function ti($t,Tr){Tr===void 0&&(Tr={});var wn=document.createElement("button");return wn.className=x.CONTROL_BUTTON+" "+Tr.className,wn.setAttribute("title",Tr.title),Tr.container.appendChild(wn),wn.addEventListener("click",function(Hi){if(Hi.preventDefault(),Hi.stopPropagation(),Hi.target===Mt)return zr(),void Tr.onDeactivate();br($t),Tr.onActivate()},!0),wn}function zr(){Mt&&(Mt.classList.remove(x.ACTIVE_BUTTON),Mt=null)}function br($t){zr();var Tr=ft[$t];Tr&&Tr&&$t!=="trash"&&(Tr.classList.add(x.ACTIVE_BUTTON),Mt=Tr)}return{setActiveButton:br,queueMapClasses:Jt,updateMapClasses:yr,clearMapClasses:function(){Jt({mode:null,feature:null,mouse:null}),yr()},addButtons:function(){var $t=Le.options.controls,Tr=document.createElement("div");return Tr.className=x.CONTROL_GROUP+" "+x.CONTROL_BASE,$t&&($t[k.LINE]&&(ft[k.LINE]=ti(k.LINE,{container:Tr,className:x.CONTROL_BUTTON_LINE,title:"LineString tool "+(Le.options.keybindings?"(l)":""),onActivate:function(){return Le.events.changeMode(z.DRAW_LINE_STRING)},onDeactivate:function(){return Le.events.trash()}})),$t[k.POLYGON]&&(ft[k.POLYGON]=ti(k.POLYGON,{container:Tr,className:x.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(Le.options.keybindings?"(p)":""),onActivate:function(){return Le.events.changeMode(z.DRAW_POLYGON)},onDeactivate:function(){return Le.events.trash()}})),$t[k.POINT]&&(ft[k.POINT]=ti(k.POINT,{container:Tr,className:x.CONTROL_BUTTON_POINT,title:"Marker tool "+(Le.options.keybindings?"(m)":""),onActivate:function(){return Le.events.changeMode(z.DRAW_POINT)},onDeactivate:function(){return Le.events.trash()}})),$t.trash&&(ft.trash=ti("trash",{container:Tr,className:x.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){Le.events.trash()}})),$t.combine_features&&(ft.combine_features=ti("combineFeatures",{container:Tr,className:x.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){Le.events.combineFeatures()}})),$t.uncombine_features&&(ft.uncombine_features=ti("uncombineFeatures",{container:Tr,className:x.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){Le.events.uncombineFeatures()}}))),Tr},removeButtons:function(){Object.keys(ft).forEach(function($t){var Tr=ft[$t];Tr.parentNode&&Tr.parentNode.removeChild(Tr),delete ft[$t]})}}}(D),D.container=de.getContainer(),D.store=new pe(D),X=D.ui.addButtons(),D.options.boxSelect&&(D.boxZoomInitial=de.boxZoom.isEnabled(),de.boxZoom.disable(),de.dragPan.disable(),de.dragPan.enable()),de.loaded()?Z.connect():(de.on("load",Z.connect),j=setInterval(function(){de.loaded()&&Z.connect()},16)),D.events.start(),X},addLayers:function(){D.map.addSource(S.COLD,{data:{type:R.FEATURE_COLLECTION,features:[]},type:"geojson"}),D.map.addSource(S.HOT,{data:{type:R.FEATURE_COLLECTION,features:[]},type:"geojson"}),D.options.styles.forEach(function(de){D.map.addLayer(de)}),D.store.setDirty(!0),D.store.render()},removeLayers:function(){D.options.styles.forEach(function(de){D.map.getLayer(de.id)&&D.map.removeLayer(de.id)}),D.map.getSource(S.COLD)&&D.map.removeSource(S.COLD),D.map.getSource(S.HOT)&&D.map.removeSource(S.HOT)}};return D.setup=Z,Z}var at=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function It(D){return function(X){var j=X.featureTarget;return!!j&&!!j.properties&&j.properties.meta===D}}function Vt(D){return!!D.originalEvent&&!!D.originalEvent.shiftKey&&D.originalEvent.button===0}function lr(D){return!!D.featureTarget&&!!D.featureTarget.properties&&D.featureTarget.properties.active===K.ACTIVE&&D.featureTarget.properties.meta===U.FEATURE}function Pr(D){return!!D.featureTarget&&!!D.featureTarget.properties&&D.featureTarget.properties.active===K.INACTIVE&&D.featureTarget.properties.meta===U.FEATURE}function _t(D){return D.featureTarget===void 0}function Ut(D){return!!D.featureTarget&&!!D.featureTarget.properties&&D.featureTarget.properties.meta===U.FEATURE}function _r(D){var X=D.featureTarget;return!!X&&!!X.properties&&X.properties.meta===U.VERTEX}function Kt(D){return!!D.originalEvent&&D.originalEvent.shiftKey===!0}function fn(D){return D.keyCode===27}function Dt(D){return D.keyCode===13}var Br=Object.freeze({__proto__:null,isOfMetaType:It,isShiftMousedown:Vt,isActiveFeature:lr,isInactiveFeature:Pr,noTarget:_t,isFeature:Ut,isVertex:_r,isShiftDown:Kt,isEscapeKey:fn,isEnterKey:Dt,isTrue:function(){return!0}}),dr=nn;function nn(D,X){this.x=D,this.y=X}nn.prototype={clone:function(){return new nn(this.x,this.y)},add:function(D){return this.clone()._add(D)},sub:function(D){return this.clone()._sub(D)},multByPoint:function(D){return this.clone()._multByPoint(D)},divByPoint:function(D){return this.clone()._divByPoint(D)},mult:function(D){return this.clone()._mult(D)},div:function(D){return this.clone()._div(D)},rotate:function(D){return this.clone()._rotate(D)},rotateAround:function(D,X){return this.clone()._rotateAround(D,X)},matMult:function(D){return this.clone()._matMult(D)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(D){return this.x===D.x&&this.y===D.y},dist:function(D){return Math.sqrt(this.distSqr(D))},distSqr:function(D){var X=D.x-this.x,j=D.y-this.y;return X*X+j*j},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(D){return Math.atan2(this.y-D.y,this.x-D.x)},angleWith:function(D){return this.angleWithSep(D.x,D.y)},angleWithSep:function(D,X){return Math.atan2(this.x*X-this.y*D,this.x*D+this.y*X)},_matMult:function(D){var X=D[0]*this.x+D[1]*this.y,j=D[2]*this.x+D[3]*this.y;return this.x=X,this.y=j,this},_add:function(D){return this.x+=D.x,this.y+=D.y,this},_sub:function(D){return this.x-=D.x,this.y-=D.y,this},_mult:function(D){return this.x*=D,this.y*=D,this},_div:function(D){return this.x/=D,this.y/=D,this},_multByPoint:function(D){return this.x*=D.x,this.y*=D.y,this},_divByPoint:function(D){return this.x/=D.x,this.y/=D.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var D=this.y;return this.y=this.x,this.x=-D,this},_rotate:function(D){var X=Math.cos(D),j=Math.sin(D),Z=X*this.x-j*this.y,de=j*this.x+X*this.y;return this.x=Z,this.y=de,this},_rotateAround:function(D,X){var j=Math.cos(D),Z=Math.sin(D),de=X.x+j*(this.x-X.x)-Z*(this.y-X.y),we=X.y+Z*(this.x-X.x)+j*(this.y-X.y);return this.x=de,this.y=we,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},nn.convert=function(D){return D instanceof nn?D:Array.isArray(D)?new nn(D[0],D[1]):D};var Kn=n(dr);function hr(D,X){var j=X.getBoundingClientRect();return new Kn(D.clientX-j.left-(X.clientLeft||0),D.clientY-j.top-(X.clientTop||0))}function Gn(D,X,j,Z){return{type:R.FEATURE,properties:{meta:U.VERTEX,parent:D,coord_path:j,active:Z?K.ACTIVE:K.INACTIVE},geometry:{type:R.POINT,coordinates:X}}}function Nn(D,X,j){var Z=X.geometry.coordinates,de=j.geometry.coordinates;if(Z[1]>85||Z[1]<ee||de[1]>85||de[1]<ee)return null;var we={lng:(Z[0]+de[0])/2,lat:(Z[1]+de[1])/2};return{type:R.FEATURE,properties:{meta:U.MIDPOINT,parent:D,lng:we.lng,lat:we.lat,coord_path:j.properties.coord_path},geometry:{type:R.POINT,coordinates:[we.lng,we.lat]}}}function gi(D,X,j){X===void 0&&(X={}),j===void 0&&(j=null);var Z,de=D.geometry,we=de.type,Le=de.coordinates,ft=D.properties&&D.properties.id,Mt=[];function Qt(Jt,yr){var ti="",zr=null;Jt.forEach(function(br,$t){var Tr=yr!=null?yr+"."+$t:String($t),wn=Gn(ft,br,Tr,er(Tr));if(X.midpoints&&zr){var Hi=Nn(ft,zr,wn);Hi&&Mt.push(Hi)}zr=wn;var ai=JSON.stringify(br);ti!==ai&&Mt.push(wn),$t===0&&(ti=ai)})}function er(Jt){return!!X.selectedPaths&&X.selectedPaths.indexOf(Jt)!==-1}return we===R.POINT?Mt.push(Gn(ft,Le,j,er(j))):we===R.POLYGON?Le.forEach(function(Jt,yr){Qt(Jt,j!==null?j+"."+yr:String(yr))}):we===R.LINE_STRING?Qt(Le,j):we.indexOf(R.MULTI_PREFIX)===0&&(Z=we.replace(R.MULTI_PREFIX,""),Le.forEach(function(Jt,yr){var ti={type:R.FEATURE,properties:D.properties,geometry:{type:Z,coordinates:Jt}};Mt=Mt.concat(gi(ti,X,yr))})),Mt}var Yr={enable:function(D){setTimeout(function(){D.map&&D.map.doubleClickZoom&&D._ctx&&D._ctx.store&&D._ctx.store.getInitialConfigValue&&D._ctx.store.getInitialConfigValue("doubleClickZoom")&&D.map.doubleClickZoom.enable()},0)},disable:function(D){setTimeout(function(){D.map&&D.map.doubleClickZoom&&D.map.doubleClickZoom.disable()},0)}},Ne={exports:{}},ae=function(D){if(!D||!D.type)return null;var X=ue[D.type];if(!X)return null;if(X==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:D}]};if(X==="feature")return{type:"FeatureCollection",features:[D]};if(X==="featurecollection")return D},ue={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},Ee=n(ae),Fe=Object.freeze({__proto__:null,default:function D(X){switch(X&&X.type||null){case"FeatureCollection":return X.features=X.features.reduce(function(j,Z){return j.concat(D(Z))},[]),X;case"Feature":return X.geometry?D(X.geometry).map(function(j){var Z={type:"Feature",properties:JSON.parse(JSON.stringify(X.properties)),geometry:j};return X.id!==void 0&&(Z.id=X.id),Z}):[X];case"MultiPoint":return X.coordinates.map(function(j){return{type:"Point",coordinates:j}});case"MultiPolygon":return X.coordinates.map(function(j){return{type:"Polygon",coordinates:j}});case"MultiLineString":return X.coordinates.map(function(j){return{type:"LineString",coordinates:j}});case"GeometryCollection":return X.geometries.map(D).reduce(function(j,Z){return j.concat(Z)},[]);case"Point":case"Polygon":case"LineString":return[X]}}}),rt=ae,it=i(Fe),et=function(D){return function X(j){return Array.isArray(j)&&j.length&&typeof j[0]=="number"?[j]:j.reduce(function(Z,de){return Array.isArray(de)&&Array.isArray(de[0])?Z.concat(X(de)):(Z.push(de),Z)},[])}(D)};it instanceof Function||(it=it.default);var Ke={exports:{}},Et=Ke.exports=function(D){return new Rt(D)};function Rt(D){this.value=D}function gt(D,X,j){var Z=[],de=[],we=!0;return function Le(ft){var Mt=j?Wt(ft):ft,Qt={},er=!0,Jt={node:Mt,node_:ft,path:[].concat(Z),parent:de[de.length-1],parents:de,key:Z.slice(-1)[0],isRoot:Z.length===0,level:Z.length,circular:null,update:function(zr,br){Jt.isRoot||(Jt.parent.node[Jt.key]=zr),Jt.node=zr,br&&(er=!1)},delete:function(zr){delete Jt.parent.node[Jt.key],zr&&(er=!1)},remove:function(zr){pn(Jt.parent.node)?Jt.parent.node.splice(Jt.key,1):delete Jt.parent.node[Jt.key],zr&&(er=!1)},keys:null,before:function(zr){Qt.before=zr},after:function(zr){Qt.after=zr},pre:function(zr){Qt.pre=zr},post:function(zr){Qt.post=zr},stop:function(){we=!1},block:function(){er=!1}};if(!we)return Jt;function yr(){if(typeof Jt.node=="object"&&Jt.node!==null){Jt.keys&&Jt.node_===Jt.node||(Jt.keys=mr(Jt.node)),Jt.isLeaf=Jt.keys.length==0;for(var zr=0;zr<de.length;zr++)if(de[zr].node_===ft){Jt.circular=de[zr];break}}else Jt.isLeaf=!0,Jt.keys=null;Jt.notLeaf=!Jt.isLeaf,Jt.notRoot=!Jt.isRoot}yr();var ti=X.call(Jt,Jt.node);return ti!==void 0&&Jt.update&&Jt.update(ti),Qt.before&&Qt.before.call(Jt,Jt.node),er&&(typeof Jt.node!="object"||Jt.node===null||Jt.circular||(de.push(Jt),yr(),Or(Jt.keys,function(zr,br){Z.push(zr),Qt.pre&&Qt.pre.call(Jt,Jt.node[zr],zr);var $t=Le(Jt.node[zr]);j&&en.call(Jt.node,zr)&&(Jt.node[zr]=$t.node),$t.isLast=br==Jt.keys.length-1,$t.isFirst=br==0,Qt.post&&Qt.post.call(Jt,$t),Z.pop()}),de.pop()),Qt.after&&Qt.after.call(Jt,Jt.node)),Jt}(D).node}function Wt(D){if(typeof D=="object"&&D!==null){var X;if(pn(D))X=[];else if(Ar(D)==="[object Date]")X=new Date(D.getTime?D.getTime():D);else if(function(de){return Ar(de)==="[object RegExp]"}(D))X=new RegExp(D);else if(function(de){return Ar(de)==="[object Error]"}(D))X={message:D.message};else if(function(de){return Ar(de)==="[object Boolean]"}(D))X=new Boolean(D);else if(function(de){return Ar(de)==="[object Number]"}(D))X=new Number(D);else if(function(de){return Ar(de)==="[object String]"}(D))X=new String(D);else if(Object.create&&Object.getPrototypeOf)X=Object.create(Object.getPrototypeOf(D));else if(D.constructor===Object)X={};else{var j=D.constructor&&D.constructor.prototype||D.__proto__||{},Z=function(){};Z.prototype=j,X=new Z}return Or(mr(D),function(de){X[de]=D[de]}),X}return D}Rt.prototype.get=function(D){for(var X=this.value,j=0;j<D.length;j++){var Z=D[j];if(!X||!en.call(X,Z)){X=void 0;break}X=X[Z]}return X},Rt.prototype.has=function(D){for(var X=this.value,j=0;j<D.length;j++){var Z=D[j];if(!X||!en.call(X,Z))return!1;X=X[Z]}return!0},Rt.prototype.set=function(D,X){for(var j=this.value,Z=0;Z<D.length-1;Z++){var de=D[Z];en.call(j,de)||(j[de]={}),j=j[de]}return j[D[Z]]=X,X},Rt.prototype.map=function(D){return gt(this.value,D,!0)},Rt.prototype.forEach=function(D){return this.value=gt(this.value,D,!1),this.value},Rt.prototype.reduce=function(D,X){var j=arguments.length===1,Z=j?this.value:X;return this.forEach(function(de){this.isRoot&&j||(Z=D.call(this,Z,de))}),Z},Rt.prototype.paths=function(){var D=[];return this.forEach(function(X){D.push(this.path)}),D},Rt.prototype.nodes=function(){var D=[];return this.forEach(function(X){D.push(this.node)}),D},Rt.prototype.clone=function(){var D=[],X=[];return function j(Z){for(var de=0;de<D.length;de++)if(D[de]===Z)return X[de];if(typeof Z=="object"&&Z!==null){var we=Wt(Z);return D.push(Z),X.push(we),Or(mr(Z),function(Le){we[Le]=j(Z[Le])}),D.pop(),X.pop(),we}return Z}(this.value)};var mr=Object.keys||function(D){var X=[];for(var j in D)X.push(j);return X};function Ar(D){return Object.prototype.toString.call(D)}var pn=Array.isArray||function(D){return Object.prototype.toString.call(D)==="[object Array]"},Or=function(D,X){if(D.forEach)return D.forEach(X);for(var j=0;j<D.length;j++)X(D[j],j,D)};Or(mr(Rt.prototype),function(D){Et[D]=function(X){var j=[].slice.call(arguments,1),Z=new Rt(X);return Z[D].apply(Z,j)}});var en=Object.hasOwnProperty||function(D,X){return X in D},Zr=Ke.exports,jn=Jr;function Jr(D){if(!(this instanceof Jr))return new Jr(D);this._bbox=D||[1/0,1/0,-1/0,-1/0],this._valid=!!D}Jr.prototype.include=function(D){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],D[0]),this._bbox[1]=Math.min(this._bbox[1],D[1]),this._bbox[2]=Math.max(this._bbox[2],D[0]),this._bbox[3]=Math.max(this._bbox[3],D[1]),this},Jr.prototype.equals=function(D){var X;return X=D instanceof Jr?D.bbox():D,this._bbox[0]==X[0]&&this._bbox[1]==X[1]&&this._bbox[2]==X[2]&&this._bbox[3]==X[3]},Jr.prototype.center=function(D){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Jr.prototype.union=function(D){var X;return this._valid=!0,X=D instanceof Jr?D.bbox():D,this._bbox[0]=Math.min(this._bbox[0],X[0]),this._bbox[1]=Math.min(this._bbox[1],X[1]),this._bbox[2]=Math.max(this._bbox[2],X[2]),this._bbox[3]=Math.max(this._bbox[3],X[3]),this},Jr.prototype.bbox=function(){return this._valid?this._bbox:null},Jr.prototype.contains=function(D){if(!D)return this._fastContains();if(!this._valid)return null;var X=D[0],j=D[1];return this._bbox[0]<=X&&this._bbox[1]<=j&&this._bbox[2]>=X&&this._bbox[3]>=j},Jr.prototype.intersect=function(D){return this._valid?(X=D instanceof Jr?D.bbox():D,!(this._bbox[0]>X[2]||this._bbox[2]<X[0]||this._bbox[3]<X[1]||this._bbox[1]>X[3])):null;var X},Jr.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var D="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",D)},Jr.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Ur=function(D){if(!D)return[];var X=it(rt(D)),j=[];return X.features.forEach(function(Z){Z.geometry&&(j=j.concat(et(Z.geometry.coordinates)))}),j},vn=Zr,Fn=jn,ei={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},mi=Object.keys(ei);function Ii(D){for(var X=Fn(),j=Ur(D),Z=0;Z<j.length;Z++)X.include(j[Z]);return X}Ne.exports=function(D){return Ii(D).bbox()},Ne.exports.polygon=function(D){return Ii(D).polygon()},Ne.exports.bboxify=function(D){return vn(D).map(function(X){X&&mi.some(function(j){return!!X[j]&&ei[j].indexOf(X.type)!==-1})&&(X.bbox=Ii(X).bbox(),this.update(X))})};var ma=n(Ne.exports),En=-90;function so(D,X){var j=En,Z=90,de=En,we=90,Le=270,ft=-270;D.forEach(function(Qt){var er=ma(Qt),Jt=er[1],yr=er[3],ti=er[0],zr=er[2];Jt>j&&(j=Jt),yr<Z&&(Z=yr),yr>de&&(de=yr),Jt<we&&(we=Jt),ti<Le&&(Le=ti),zr>ft&&(ft=zr)});var Mt=X;return j+Mt.lat>85&&(Mt.lat=85-j),de+Mt.lat>90&&(Mt.lat=90-de),Z+Mt.lat<-85&&(Mt.lat=-85-Z),we+Mt.lat<En&&(Mt.lat=En-we),Le+Mt.lng<=-270&&(Mt.lng+=360*Math.ceil(Math.abs(Mt.lng)/360)),ft+Mt.lng>=270&&(Mt.lng-=360*Math.ceil(Math.abs(Mt.lng)/360)),Mt}function Lo(D,X){var j=so(D.map(function(Z){return Z.toGeoJSON()}),X);D.forEach(function(Z){var de,we=Z.getCoordinates(),Le=function(Mt){var Qt={lng:Mt[0]+j.lng,lat:Mt[1]+j.lat};return[Qt.lng,Qt.lat]},ft=function(Mt){return Mt.map(function(Qt){return Le(Qt)})};Z.type===R.POINT?de=Le(we):Z.type===R.LINE_STRING||Z.type===R.MULTI_POINT?de=we.map(Le):Z.type===R.POLYGON||Z.type===R.MULTI_LINE_STRING?de=we.map(ft):Z.type===R.MULTI_POLYGON&&(de=we.map(function(Mt){return Mt.map(function(Qt){return ft(Qt)})})),Z.incomingCoords(de)})}var yn={onSetup:function(D){var X=this,j={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:D.featureIds||[]};return this.setSelected(j.initiallySelectedFeatureIds.filter(function(Z){return X.getFeature(Z)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),j},fireUpdate:function(){this.map.fire(N.UPDATE,{action:B.MOVE,features:this.getSelected().map(function(D){return D.toGeoJSON()})})},fireActionable:function(){var D=this,X=this.getSelected(),j=X.filter(function(ft){return D.isInstanceOf("MultiFeature",ft)}),Z=!1;if(X.length>1){Z=!0;var de=X[0].type.replace("Multi","");X.forEach(function(ft){ft.type.replace("Multi","")!==de&&(Z=!1)})}var we=j.length>0,Le=X.length>0;this.setActionableState({combineFeatures:Z,uncombineFeatures:we,trash:Le})},getUniqueIds:function(D){return D.length?D.map(function(X){return X.properties.id}).filter(function(X){return X!==void 0}).reduce(function(X,j){return X.add(j),X},new se).values():[]},stopExtendedInteractions:function(D){D.boxSelectElement&&(D.boxSelectElement.parentNode&&D.boxSelectElement.parentNode.removeChild(D.boxSelectElement),D.boxSelectElement=null),this.map.dragPan.enable(),D.boxSelecting=!1,D.canBoxSelect=!1,D.dragMoving=!1,D.canDragMove=!1},onStop:function(){Yr.enable(this)},onMouseMove:function(D,X){return Ut(X)&&D.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(D),!0},onMouseOut:function(D){return!D.dragMoving||this.fireUpdate()}};yn.onTap=yn.onClick=function(D,X){return _t(X)?this.clickAnywhere(D,X):It(U.VERTEX)(X)?this.clickOnVertex(D,X):Ut(X)?this.clickOnFeature(D,X):void 0},yn.clickAnywhere=function(D){var X=this,j=this.getSelectedIds();j.length&&(this.clearSelectedFeatures(),j.forEach(function(Z){return X.doRender(Z)})),Yr.enable(this),this.stopExtendedInteractions(D)},yn.clickOnVertex=function(D,X){this.changeMode(z.DIRECT_SELECT,{featureId:X.featureTarget.properties.parent,coordPath:X.featureTarget.properties.coord_path,startPos:X.lngLat}),this.updateUIClasses({mouse:A.MOVE})},yn.startOnActiveFeature=function(D,X){this.stopExtendedInteractions(D),this.map.dragPan.disable(),this.doRender(X.featureTarget.properties.id),D.canDragMove=!0,D.dragMoveLocation=X.lngLat},yn.clickOnFeature=function(D,X){var j=this;Yr.disable(this),this.stopExtendedInteractions(D);var Z=Kt(X),de=this.getSelectedIds(),we=X.featureTarget.properties.id,Le=this.isSelected(we);if(!Z&&Le&&this.getFeature(we).type!==R.POINT)return this.changeMode(z.DIRECT_SELECT,{featureId:we});Le&&Z?(this.deselect(we),this.updateUIClasses({mouse:A.POINTER}),de.length===1&&Yr.enable(this)):!Le&&Z?(this.select(we),this.updateUIClasses({mouse:A.MOVE})):Le||Z||(de.forEach(function(ft){return j.doRender(ft)}),this.setSelected(we),this.updateUIClasses({mouse:A.MOVE})),this.doRender(we)},yn.onMouseDown=function(D,X){return lr(X)?this.startOnActiveFeature(D,X):this.drawConfig.boxSelect&&Vt(X)?this.startBoxSelect(D,X):void 0},yn.startBoxSelect=function(D,X){this.stopExtendedInteractions(D),this.map.dragPan.disable(),D.boxSelectStartLocation=hr(X.originalEvent,this.map.getContainer()),D.canBoxSelect=!0},yn.onTouchStart=function(D,X){if(lr(X))return this.startOnActiveFeature(D,X)},yn.onDrag=function(D,X){return D.canDragMove?this.dragMove(D,X):this.drawConfig.boxSelect&&D.canBoxSelect?this.whileBoxSelect(D,X):void 0},yn.whileBoxSelect=function(D,X){D.boxSelecting=!0,this.updateUIClasses({mouse:A.ADD}),D.boxSelectElement||(D.boxSelectElement=document.createElement("div"),D.boxSelectElement.classList.add(x.BOX_SELECT),this.map.getContainer().appendChild(D.boxSelectElement));var j=hr(X.originalEvent,this.map.getContainer()),Z=Math.min(D.boxSelectStartLocation.x,j.x),de=Math.max(D.boxSelectStartLocation.x,j.x),we=Math.min(D.boxSelectStartLocation.y,j.y),Le=Math.max(D.boxSelectStartLocation.y,j.y),ft="translate("+Z+"px, "+we+"px)";D.boxSelectElement.style.transform=ft,D.boxSelectElement.style.WebkitTransform=ft,D.boxSelectElement.style.width=de-Z+"px",D.boxSelectElement.style.height=Le-we+"px"},yn.dragMove=function(D,X){D.dragMoving=!0,X.originalEvent.stopPropagation();var j={lng:X.lngLat.lng-D.dragMoveLocation.lng,lat:X.lngLat.lat-D.dragMoveLocation.lat};Lo(this.getSelected(),j),D.dragMoveLocation=X.lngLat},yn.onTouchEnd=yn.onMouseUp=function(D,X){var j=this;if(D.dragMoving)this.fireUpdate();else if(D.boxSelecting){var Z=[D.boxSelectStartLocation,hr(X.originalEvent,this.map.getContainer())],de=this.featuresAt(null,Z,"click"),we=this.getUniqueIds(de).filter(function(Le){return!j.isSelected(Le)});we.length&&(this.select(we),we.forEach(function(Le){return j.doRender(Le)}),this.updateUIClasses({mouse:A.MOVE}))}this.stopExtendedInteractions(D)},yn.toDisplayFeatures=function(D,X,j){X.properties.active=this.isSelected(X.properties.id)?K.ACTIVE:K.INACTIVE,j(X),this.fireActionable(),X.properties.active===K.ACTIVE&&X.geometry.type!==R.POINT&&gi(X).forEach(j)},yn.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},yn.onCombineFeatures=function(){var D=this.getSelected();if(!(D.length===0||D.length<2)){for(var X=[],j=[],Z=D[0].type.replace("Multi",""),de=0;de<D.length;de++){var we=D[de];if(we.type.replace("Multi","")!==Z)return;we.type.includes("Multi")?we.getCoordinates().forEach(function(ft){X.push(ft)}):X.push(we.getCoordinates()),j.push(we.toGeoJSON())}if(j.length>1){var Le=this.newFeature({type:R.FEATURE,properties:j[0].properties,geometry:{type:"Multi"+Z,coordinates:X}});this.addFeature(Le),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([Le.id]),this.map.fire(N.COMBINE_FEATURES,{createdFeatures:[Le.toGeoJSON()],deletedFeatures:j})}this.fireActionable()}},yn.onUncombineFeatures=function(){var D=this,X=this.getSelected();if(X.length!==0){for(var j=[],Z=[],de=function(Le){var ft=X[Le];D.isInstanceOf("MultiFeature",ft)&&(ft.getFeatures().forEach(function(Mt){D.addFeature(Mt),Mt.properties=ft.properties,j.push(Mt.toGeoJSON()),D.select([Mt.id])}),D.deleteFeature(ft.id,{silent:!0}),Z.push(ft.toGeoJSON()))},we=0;we<X.length;we++)de(we);j.length>1&&this.map.fire(N.UNCOMBINE_FEATURES,{createdFeatures:j,deletedFeatures:Z}),this.fireActionable()}};var yi=It(U.VERTEX),Qs=It(U.MIDPOINT),Vn={fireUpdate:function(){this.map.fire(N.UPDATE,{action:B.CHANGE_COORDINATES,features:this.getSelected().map(function(D){return D.toGeoJSON()})})},fireActionable:function(D){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:D.selectedCoordPaths.length>0})},startDragging:function(D,X){this.map.dragPan.disable(),D.canDragMove=!0,D.dragMoveLocation=X.lngLat},stopDragging:function(D){this.map.dragPan.enable(),D.dragMoving=!1,D.canDragMove=!1,D.dragMoveLocation=null},onVertex:function(D,X){this.startDragging(D,X);var j=X.featureTarget.properties,Z=D.selectedCoordPaths.indexOf(j.coord_path);Kt(X)||Z!==-1?Kt(X)&&Z===-1&&D.selectedCoordPaths.push(j.coord_path):D.selectedCoordPaths=[j.coord_path];var de=this.pathsToCoordinates(D.featureId,D.selectedCoordPaths);this.setSelectedCoordinates(de)},onMidpoint:function(D,X){this.startDragging(D,X);var j=X.featureTarget.properties;D.feature.addCoordinate(j.coord_path,j.lng,j.lat),this.fireUpdate(),D.selectedCoordPaths=[j.coord_path]},pathsToCoordinates:function(D,X){return X.map(function(j){return{feature_id:D,coord_path:j}})},onFeature:function(D,X){D.selectedCoordPaths.length===0?this.startDragging(D,X):this.stopDragging(D)},dragFeature:function(D,X,j){Lo(this.getSelected(),j),D.dragMoveLocation=X.lngLat},dragVertex:function(D,X,j){for(var Z=D.selectedCoordPaths.map(function(ft){return D.feature.getCoordinate(ft)}),de=so(Z.map(function(ft){return{type:R.FEATURE,properties:{},geometry:{type:R.POINT,coordinates:ft}}}),j),we=0;we<Z.length;we++){var Le=Z[we];D.feature.updateCoordinate(D.selectedCoordPaths[we],Le[0]+de.lng,Le[1]+de.lat)}},clickNoTarget:function(){this.changeMode(z.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(z.SIMPLE_SELECT)},clickActiveFeature:function(D){D.selectedCoordPaths=[],this.clearSelectedCoordinates(),D.feature.changed()},onSetup:function(D){var X=D.featureId,j=this.getFeature(X);if(!j)throw new Error("You must provide a featureId to enter direct_select mode");if(j.type===R.POINT)throw new TypeError("direct_select mode doesn't handle point features");var Z={featureId:X,feature:j,dragMoveLocation:D.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:D.coordPath?[D.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(X,Z.selectedCoordPaths)),this.setSelected(X),Yr.disable(this),this.setActionableState({trash:!0}),Z},onStop:function(){Yr.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(D,X,j){D.featureId===X.properties.id?(X.properties.active=K.ACTIVE,j(X),gi(X,{map:this.map,midpoints:!0,selectedPaths:D.selectedCoordPaths}).forEach(j)):(X.properties.active=K.INACTIVE,j(X)),this.fireActionable(D)},onTrash:function(D){D.selectedCoordPaths.sort(function(X,j){return j.localeCompare(X,"en",{numeric:!0})}).forEach(function(X){return D.feature.removeCoordinate(X)}),this.fireUpdate(),D.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(D),D.feature.isValid()===!1&&(this.deleteFeature([D.featureId]),this.changeMode(z.SIMPLE_SELECT,{}))},onMouseMove:function(D,X){var j=lr(X),Z=yi(X),de=Qs(X),we=D.selectedCoordPaths.length===0;return j&&we||Z&&!we?this.updateUIClasses({mouse:A.MOVE}):this.updateUIClasses({mouse:A.NONE}),(Z||j||de)&&D.dragMoving&&this.fireUpdate(),this.stopDragging(D),!0},onMouseOut:function(D){return D.dragMoving&&this.fireUpdate(),!0}};Vn.onTouchStart=Vn.onMouseDown=function(D,X){return yi(X)?this.onVertex(D,X):lr(X)?this.onFeature(D,X):Qs(X)?this.onMidpoint(D,X):void 0},Vn.onDrag=function(D,X){if(D.canDragMove===!0){D.dragMoving=!0,X.originalEvent.stopPropagation();var j={lng:X.lngLat.lng-D.dragMoveLocation.lng,lat:X.lngLat.lat-D.dragMoveLocation.lat};D.selectedCoordPaths.length>0?this.dragVertex(D,X,j):this.dragFeature(D,X,j),D.dragMoveLocation=X.lngLat}},Vn.onClick=function(D,X){return _t(X)?this.clickNoTarget(D,X):lr(X)?this.clickActiveFeature(D,X):Pr(X)?this.clickInactive(D,X):void this.stopDragging(D)},Vn.onTap=function(D,X){return _t(X)?this.clickNoTarget(D,X):lr(X)?this.clickActiveFeature(D,X):Pr(X)?this.clickInactive(D,X):void 0},Vn.onTouchEnd=Vn.onMouseUp=function(D){D.dragMoving&&this.fireUpdate(),this.stopDragging(D)};var zn={};function Ts(D,X){return!!D.lngLat&&D.lngLat.lng===X[0]&&D.lngLat.lat===X[1]}zn.onSetup=function(){var D=this.newFeature({type:R.FEATURE,properties:{},geometry:{type:R.POINT,coordinates:[]}});return this.addFeature(D),this.clearSelectedFeatures(),this.updateUIClasses({mouse:A.ADD}),this.activateUIButton(k.POINT),this.setActionableState({trash:!0}),{point:D}},zn.stopDrawingAndRemove=function(D){this.deleteFeature([D.point.id],{silent:!0}),this.changeMode(z.SIMPLE_SELECT)},zn.onTap=zn.onClick=function(D,X){this.updateUIClasses({mouse:A.MOVE}),D.point.updateCoordinate("",X.lngLat.lng,X.lngLat.lat),this.map.fire(N.CREATE,{features:[D.point.toGeoJSON()]}),this.changeMode(z.SIMPLE_SELECT,{featureIds:[D.point.id]})},zn.onStop=function(D){this.activateUIButton(),D.point.getCoordinate().length||this.deleteFeature([D.point.id],{silent:!0})},zn.toDisplayFeatures=function(D,X,j){var Z=X.properties.id===D.point.id;if(X.properties.active=Z?K.ACTIVE:K.INACTIVE,!Z)return j(X)},zn.onTrash=zn.stopDrawingAndRemove,zn.onKeyUp=function(D,X){if(fn(X)||Dt(X))return this.stopDrawingAndRemove(D,X)};var Ji={onSetup:function(){var D=this.newFeature({type:R.FEATURE,properties:{},geometry:{type:R.POLYGON,coordinates:[[]]}});return this.addFeature(D),this.clearSelectedFeatures(),Yr.disable(this),this.updateUIClasses({mouse:A.ADD}),this.activateUIButton(k.POLYGON),this.setActionableState({trash:!0}),{polygon:D,currentVertexPosition:0}},clickAnywhere:function(D,X){if(D.currentVertexPosition>0&&Ts(X,D.polygon.coordinates[0][D.currentVertexPosition-1]))return this.changeMode(z.SIMPLE_SELECT,{featureIds:[D.polygon.id]});this.updateUIClasses({mouse:A.ADD}),D.polygon.updateCoordinate("0."+D.currentVertexPosition,X.lngLat.lng,X.lngLat.lat),D.currentVertexPosition++,D.polygon.updateCoordinate("0."+D.currentVertexPosition,X.lngLat.lng,X.lngLat.lat)},clickOnVertex:function(D){return this.changeMode(z.SIMPLE_SELECT,{featureIds:[D.polygon.id]})},onMouseMove:function(D,X){D.polygon.updateCoordinate("0."+D.currentVertexPosition,X.lngLat.lng,X.lngLat.lat),_r(X)&&this.updateUIClasses({mouse:A.POINTER})}};Ji.onTap=Ji.onClick=function(D,X){return _r(X)?this.clickOnVertex(D,X):this.clickAnywhere(D,X)},Ji.onKeyUp=function(D,X){fn(X)?(this.deleteFeature([D.polygon.id],{silent:!0}),this.changeMode(z.SIMPLE_SELECT)):Dt(X)&&this.changeMode(z.SIMPLE_SELECT,{featureIds:[D.polygon.id]})},Ji.onStop=function(D){this.updateUIClasses({mouse:A.NONE}),Yr.enable(this),this.activateUIButton(),this.getFeature(D.polygon.id)!==void 0&&(D.polygon.removeCoordinate("0."+D.currentVertexPosition),D.polygon.isValid()?this.map.fire(N.CREATE,{features:[D.polygon.toGeoJSON()]}):(this.deleteFeature([D.polygon.id],{silent:!0}),this.changeMode(z.SIMPLE_SELECT,{},{silent:!0})))},Ji.toDisplayFeatures=function(D,X,j){var Z=X.properties.id===D.polygon.id;if(X.properties.active=Z?K.ACTIVE:K.INACTIVE,!Z)return j(X);if(X.geometry.coordinates.length!==0){var de=X.geometry.coordinates[0].length;if(!(de<3)){if(X.properties.meta=U.FEATURE,j(Gn(D.polygon.id,X.geometry.coordinates[0][0],"0.0",!1)),de>3){var we=X.geometry.coordinates[0].length-3;j(Gn(D.polygon.id,X.geometry.coordinates[0][we],"0."+we,!1))}if(de<=4){var Le=[[X.geometry.coordinates[0][0][0],X.geometry.coordinates[0][0][1]],[X.geometry.coordinates[0][1][0],X.geometry.coordinates[0][1][1]]];if(j({type:R.FEATURE,properties:X.properties,geometry:{coordinates:Le,type:R.LINE_STRING}}),de===3)return}return j(X)}}},Ji.onTrash=function(D){this.deleteFeature([D.polygon.id],{silent:!0}),this.changeMode(z.SIMPLE_SELECT)};var Un={onSetup:function(D){var X,j,Z=(D=D||{}).featureId,de="forward";if(Z){if(!(X=this.getFeature(Z)))throw new Error("Could not find a feature with the provided featureId");var we=D.from;if(we&&we.type==="Feature"&&we.geometry&&we.geometry.type==="Point"&&(we=we.geometry),we&&we.type==="Point"&&we.coordinates&&we.coordinates.length===2&&(we=we.coordinates),!we||!Array.isArray(we))throw new Error("Please use the `from` property to indicate which point to continue the line from");var Le=X.coordinates.length-1;if(X.coordinates[Le][0]===we[0]&&X.coordinates[Le][1]===we[1])j=Le+1,X.addCoordinate.apply(X,[j].concat(X.coordinates[Le]));else{if(X.coordinates[0][0]!==we[0]||X.coordinates[0][1]!==we[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");de="backwards",j=0,X.addCoordinate.apply(X,[j].concat(X.coordinates[0]))}}else X=this.newFeature({type:R.FEATURE,properties:{},geometry:{type:R.LINE_STRING,coordinates:[]}}),j=0,this.addFeature(X);return this.clearSelectedFeatures(),Yr.disable(this),this.updateUIClasses({mouse:A.ADD}),this.activateUIButton(k.LINE),this.setActionableState({trash:!0}),{line:X,currentVertexPosition:j,direction:de}},clickAnywhere:function(D,X){if(D.currentVertexPosition>0&&Ts(X,D.line.coordinates[D.currentVertexPosition-1])||D.direction==="backwards"&&Ts(X,D.line.coordinates[D.currentVertexPosition+1]))return this.changeMode(z.SIMPLE_SELECT,{featureIds:[D.line.id]});this.updateUIClasses({mouse:A.ADD}),D.line.updateCoordinate(D.currentVertexPosition,X.lngLat.lng,X.lngLat.lat),D.direction==="forward"?(D.currentVertexPosition++,D.line.updateCoordinate(D.currentVertexPosition,X.lngLat.lng,X.lngLat.lat)):D.line.addCoordinate(0,X.lngLat.lng,X.lngLat.lat)},clickOnVertex:function(D){return this.changeMode(z.SIMPLE_SELECT,{featureIds:[D.line.id]})},onMouseMove:function(D,X){D.line.updateCoordinate(D.currentVertexPosition,X.lngLat.lng,X.lngLat.lat),_r(X)&&this.updateUIClasses({mouse:A.POINTER})}};Un.onTap=Un.onClick=function(D,X){if(_r(X))return this.clickOnVertex(D,X);this.clickAnywhere(D,X)},Un.onKeyUp=function(D,X){Dt(X)?this.changeMode(z.SIMPLE_SELECT,{featureIds:[D.line.id]}):fn(X)&&(this.deleteFeature([D.line.id],{silent:!0}),this.changeMode(z.SIMPLE_SELECT))},Un.onStop=function(D){Yr.enable(this),this.activateUIButton(),this.getFeature(D.line.id)!==void 0&&(D.line.removeCoordinate(""+D.currentVertexPosition),D.line.isValid()?this.map.fire(N.CREATE,{features:[D.line.toGeoJSON()]}):(this.deleteFeature([D.line.id],{silent:!0}),this.changeMode(z.SIMPLE_SELECT,{},{silent:!0})))},Un.onTrash=function(D){this.deleteFeature([D.line.id],{silent:!0}),this.changeMode(z.SIMPLE_SELECT)},Un.toDisplayFeatures=function(D,X,j){var Z=X.properties.id===D.line.id;if(X.properties.active=Z?K.ACTIVE:K.INACTIVE,!Z)return j(X);X.geometry.coordinates.length<2||(X.properties.meta=U.FEATURE,j(Gn(D.line.id,X.geometry.coordinates[D.direction==="forward"?X.geometry.coordinates.length-2:1],""+(D.direction==="forward"?X.geometry.coordinates.length-2:1),!1)),j(X))};var kn={simple_select:yn,direct_select:Vn,draw_point:zn,draw_polygon:Ji,draw_line_string:Un},go={defaultMode:z.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:at,modes:kn,controls:{},userProperties:!1},si={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},ya={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function ao(D,X){return D.map(function(j){return j.source?j:Nt(j,{id:j.id+"."+X,source:X==="hot"?S.HOT:S.COLD})})}var _a={exports:{}};(function(D,X){var j="__lodash_hash_undefined__",Z=9007199254740991,de="[object Arguments]",we="[object Array]",Le="[object Boolean]",ft="[object Date]",Mt="[object Error]",Qt="[object Function]",er="[object Map]",Jt="[object Number]",yr="[object Object]",ti="[object Promise]",zr="[object RegExp]",br="[object Set]",$t="[object String]",Tr="[object Symbol]",wn="[object WeakMap]",Hi="[object ArrayBuffer]",ai="[object DataView]",zl=/^\[object .+?Constructor\]$/,Qc=/^(?:0|[1-9]\d*)$/,li={};li["[object Float32Array]"]=li["[object Float64Array]"]=li["[object Int8Array]"]=li["[object Int16Array]"]=li["[object Int32Array]"]=li["[object Uint8Array]"]=li["[object Uint8ClampedArray]"]=li["[object Uint16Array]"]=li["[object Uint32Array]"]=!0,li[de]=li[we]=li[Hi]=li[Le]=li[ai]=li[ft]=li[Mt]=li[Qt]=li[er]=li[Jt]=li[yr]=li[zr]=li[br]=li[$t]=li[wn]=!1;var xh=typeof rf=="object"&&rf&&rf.Object===Object&&rf,Ef=typeof self=="object"&&self&&self.Object===Object&&self,Ps=xh||Ef||Function("return this")(),ea=X&&!X.nodeType&&X,va=ea&&D&&!D.nodeType&&D,xc=va&&va.exports===ea,ba=xc&&xh.process,$l=function(){try{return ba&&ba.binding&&ba.binding("util")}catch{}}(),Go=$l&&$l.isTypedArray;function wh(nt,Ct){for(var cr=-1,kr=nt==null?0:nt.length;++cr<kr;)if(Ct(nt[cr],cr,nt))return!0;return!1}function eu(nt){var Ct=-1,cr=Array(nt.size);return nt.forEach(function(kr,Rn){cr[++Ct]=[Rn,kr]}),cr}function Ha(nt){var Ct=-1,cr=Array(nt.size);return nt.forEach(function(kr){cr[++Ct]=kr}),cr}var ta,Sn,ra,Tf=Array.prototype,js=Function.prototype,Is=Object.prototype,Ul=Ps["__core-js_shared__"],jl=js.toString,Vs=Is.hasOwnProperty,_l=(ta=/[^.]+$/.exec(Ul&&Ul.keys&&Ul.keys.IE_PROTO||""))?"Symbol(src)_1."+ta:"",Fu=Is.toString,tu=RegExp("^"+jl.call(Vs).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wc=xc?Ps.Buffer:void 0,Vl=Ps.Symbol,Hs=Ps.Uint8Array,Sc=Is.propertyIsEnumerable,Bu=Tf.splice,xa=Vl?Vl.toStringTag:void 0,Hl=Object.getOwnPropertySymbols,ru=wc?wc.isBuffer:void 0,qa=(Sn=Object.keys,ra=Object,function(nt){return Sn(ra(nt))}),Ac=fs(Ps,"DataView"),na=fs(Ps,"Map"),ql=fs(Ps,"Promise"),$=fs(Ps,"Set"),ye=fs(Ps,"WeakMap"),Ve=fs(Object,"create"),ot=ks(Ac),mt=ks(na),Ot=ks(ql),nr=ks($),wr=ks(ye),Hr=Vl?Vl.prototype:void 0,an=Hr?Hr.valueOf:void 0;function ln(nt){var Ct=-1,cr=nt==null?0:nt.length;for(this.clear();++Ct<cr;){var kr=nt[Ct];this.set(kr[0],kr[1])}}function cn(nt){var Ct=-1,cr=nt==null?0:nt.length;for(this.clear();++Ct<cr;){var kr=nt[Ct];this.set(kr[0],kr[1])}}function Hn(nt){var Ct=-1,cr=nt==null?0:nt.length;for(this.clear();++Ct<cr;){var kr=nt[Ct];this.set(kr[0],kr[1])}}function wi(nt){var Ct=-1,cr=nt==null?0:nt.length;for(this.__data__=new Hn;++Ct<cr;)this.add(nt[Ct])}function un(nt){var Ct=this.__data__=new cn(nt);this.size=Ct.size}function Yo(nt,Ct){var cr=Qi(nt),kr=!cr&&xl(nt),Rn=!cr&&!kr&&Ka(nt),gn=!cr&&!kr&&!Rn&&zu(nt),Yn=cr||kr||Rn||gn,qn=Yn?function(ri,Si){for(var qi=-1,vi=Array(ri);++qi<ri;)vi[qi]=Si(qi);return vi}(nt.length,String):[],zo=qn.length;for(var _i in nt)!Vs.call(nt,_i)||Yn&&(_i=="length"||Rn&&(_i=="offset"||_i=="parent")||gn&&(_i=="buffer"||_i=="byteLength"||_i=="byteOffset")||Wl(_i,zo))||qn.push(_i);return qn}function Lr(nt,Ct){for(var cr=nt.length;cr--;)if(qs(nt[cr][0],Ct))return cr;return-1}function Co(nt){return nt==null?nt===void 0?"[object Undefined]":"[object Null]":xa&&xa in Object(nt)?function(Ct){var cr=Vs.call(Ct,xa),kr=Ct[xa];try{Ct[xa]=void 0;var Rn=!0}catch{}var gn=Fu.call(Ct);return Rn&&(cr?Ct[xa]=kr:delete Ct[xa]),gn}(nt):function(Ct){return Fu.call(Ct)}(nt)}function Tn(nt){return Ms(nt)&&Co(nt)==de}function Mn(nt,Ct,cr,kr,Rn){return nt===Ct||(nt==null||Ct==null||!Ms(nt)&&!Ms(Ct)?nt!=nt&&Ct!=Ct:function(gn,Yn,qn,zo,_i,ri){var Si=Qi(gn),qi=Qi(Yn),vi=Si?we:Mi(gn),Zo=qi?we:Mi(Yn),$o=(vi=vi==de?yr:vi)==yr,ds=(Zo=Zo==de?yr:Zo)==yr,Ws=vi==Zo;if(Ws&&Ka(gn)){if(!Ka(Yn))return!1;Si=!0,$o=!1}if(Ws&&!$o)return ri||(ri=new un),Si||zu(gn)?Xa(gn,Yn,qn,zo,_i,ri):function(rn,on,Jo,_o,Oi,eo,wa){switch(Jo){case ai:if(rn.byteLength!=on.byteLength||rn.byteOffset!=on.byteOffset)return!1;rn=rn.buffer,on=on.buffer;case Hi:return!(rn.byteLength!=on.byteLength||!eo(new Hs(rn),new Hs(on)));case Le:case ft:case Jt:return qs(+rn,+on);case Mt:return rn.name==on.name&&rn.message==on.message;case zr:case $t:return rn==on+"";case er:var Ya=eu;case br:var hi=1&_o;if(Ya||(Ya=Ha),rn.size!=on.size&&!hi)return!1;var ps=wa.get(rn);if(ps)return ps==on;_o|=2,wa.set(rn,on);var vo=Xa(Ya(rn),Ya(on),_o,Oi,eo,wa);return wa.delete(rn),vo;case Tr:if(an)return an.call(rn)==an.call(on)}return!1}(gn,Yn,vi,qn,zo,_i,ri);if(!(1&qn)){var yo=$o&&Vs.call(gn,"__wrapped__"),ia=ds&&Vs.call(Yn,"__wrapped__");if(yo||ia){var bi=yo?gn.value():gn,ui=ia?Yn.value():Yn;return ri||(ri=new un),_i(bi,ui,qn,zo,ri)}}return Ws?(ri||(ri=new un),function(rn,on,Jo,_o,Oi,eo){var wa=1&Jo,Ya=bl(rn),hi=Ya.length,ps=bl(on).length;if(hi!=ps&&!wa)return!1;for(var vo=hi;vo--;){var oa=Ya[vo];if(!(wa?oa in on:Vs.call(on,oa)))return!1}var nu=eo.get(rn);if(nu&&eo.get(on))return nu==on;var Za=!0;eo.set(rn,on),eo.set(on,rn);for(var lo=wa;++vo<hi;){var Ni=rn[oa=Ya[vo]],wl=on[oa];if(_o)var Kl=wa?_o(wl,Ni,oa,on,rn,eo):_o(Ni,wl,oa,rn,on,eo);if(!(Kl===void 0?Ni===wl||Oi(Ni,wl,Jo,_o,eo):Kl)){Za=!1;break}lo||(lo=oa=="constructor")}if(Za&&!lo){var Ec=rn.constructor,Ja=on.constructor;Ec==Ja||!("constructor"in rn)||!("constructor"in on)||typeof Ec=="function"&&Ec instanceof Ec&&typeof Ja=="function"&&Ja instanceof Ja||(Za=!1)}return eo.delete(rn),eo.delete(on),Za}(gn,Yn,qn,zo,_i,ri)):!1}(nt,Ct,cr,kr,Mn,Rn))}function Wa(nt){return!(!Bo(nt)||function(Ct){return!!_l&&_l in Ct}(nt))&&(Ga(nt)?tu:zl).test(ks(nt))}function vl(nt){if(cr=(Ct=nt)&&Ct.constructor,kr=typeof cr=="function"&&cr.prototype||Is,Ct!==kr)return qa(nt);var Ct,cr,kr,Rn=[];for(var gn in Object(nt))Vs.call(nt,gn)&&gn!="constructor"&&Rn.push(gn);return Rn}function Xa(nt,Ct,cr,kr,Rn,gn){var Yn=1&cr,qn=nt.length,zo=Ct.length;if(qn!=zo&&!(Yn&&zo>qn))return!1;var _i=gn.get(nt);if(_i&&gn.get(Ct))return _i==Ct;var ri=-1,Si=!0,qi=2&cr?new wi:void 0;for(gn.set(nt,Ct),gn.set(Ct,nt);++ri<qn;){var vi=nt[ri],Zo=Ct[ri];if(kr)var $o=Yn?kr(Zo,vi,ri,Ct,nt,gn):kr(vi,Zo,ri,nt,Ct,gn);if($o!==void 0){if($o)continue;Si=!1;break}if(qi){if(!wh(Ct,function(ds,Ws){if(yo=Ws,!qi.has(yo)&&(vi===ds||Rn(vi,ds,cr,kr,gn)))return qi.push(Ws);var yo})){Si=!1;break}}else if(vi!==Zo&&!Rn(vi,Zo,cr,kr,gn)){Si=!1;break}}return gn.delete(nt),gn.delete(Ct),Si}function bl(nt){return function(Ct,cr,kr){var Rn=cr(Ct);return Qi(Ct)?Rn:function(gn,Yn){for(var qn=-1,zo=Yn.length,_i=gn.length;++qn<zo;)gn[_i+qn]=Yn[qn];return gn}(Rn,kr(Ct))}(nt,$u,Fo)}function Rs(nt,Ct){var cr,kr,Rn=nt.__data__;return((kr=typeof(cr=Ct))=="string"||kr=="number"||kr=="symbol"||kr=="boolean"?cr!=="__proto__":cr===null)?Rn[typeof Ct=="string"?"string":"hash"]:Rn.map}function fs(nt,Ct){var cr=function(kr,Rn){return kr==null?void 0:kr[Rn]}(nt,Ct);return Wa(cr)?cr:void 0}ln.prototype.clear=function(){this.__data__=Ve?Ve(null):{},this.size=0},ln.prototype.delete=function(nt){var Ct=this.has(nt)&&delete this.__data__[nt];return this.size-=Ct?1:0,Ct},ln.prototype.get=function(nt){var Ct=this.__data__;if(Ve){var cr=Ct[nt];return cr===j?void 0:cr}return Vs.call(Ct,nt)?Ct[nt]:void 0},ln.prototype.has=function(nt){var Ct=this.__data__;return Ve?Ct[nt]!==void 0:Vs.call(Ct,nt)},ln.prototype.set=function(nt,Ct){var cr=this.__data__;return this.size+=this.has(nt)?0:1,cr[nt]=Ve&&Ct===void 0?j:Ct,this},cn.prototype.clear=function(){this.__data__=[],this.size=0},cn.prototype.delete=function(nt){var Ct=this.__data__,cr=Lr(Ct,nt);return!(cr<0)&&(cr==Ct.length-1?Ct.pop():Bu.call(Ct,cr,1),--this.size,!0)},cn.prototype.get=function(nt){var Ct=this.__data__,cr=Lr(Ct,nt);return cr<0?void 0:Ct[cr][1]},cn.prototype.has=function(nt){return Lr(this.__data__,nt)>-1},cn.prototype.set=function(nt,Ct){var cr=this.__data__,kr=Lr(cr,nt);return kr<0?(++this.size,cr.push([nt,Ct])):cr[kr][1]=Ct,this},Hn.prototype.clear=function(){this.size=0,this.__data__={hash:new ln,map:new(na||cn),string:new ln}},Hn.prototype.delete=function(nt){var Ct=Rs(this,nt).delete(nt);return this.size-=Ct?1:0,Ct},Hn.prototype.get=function(nt){return Rs(this,nt).get(nt)},Hn.prototype.has=function(nt){return Rs(this,nt).has(nt)},Hn.prototype.set=function(nt,Ct){var cr=Rs(this,nt),kr=cr.size;return cr.set(nt,Ct),this.size+=cr.size==kr?0:1,this},wi.prototype.add=wi.prototype.push=function(nt){return this.__data__.set(nt,j),this},wi.prototype.has=function(nt){return this.__data__.has(nt)},un.prototype.clear=function(){this.__data__=new cn,this.size=0},un.prototype.delete=function(nt){var Ct=this.__data__,cr=Ct.delete(nt);return this.size=Ct.size,cr},un.prototype.get=function(nt){return this.__data__.get(nt)},un.prototype.has=function(nt){return this.__data__.has(nt)},un.prototype.set=function(nt,Ct){var cr=this.__data__;if(cr instanceof cn){var kr=cr.__data__;if(!na||kr.length<199)return kr.push([nt,Ct]),this.size=++cr.size,this;cr=this.__data__=new Hn(kr)}return cr.set(nt,Ct),this.size=cr.size,this};var Fo=Hl?function(nt){return nt==null?[]:(nt=Object(nt),function(Ct,cr){for(var kr=-1,Rn=Ct==null?0:Ct.length,gn=0,Yn=[];++kr<Rn;){var qn=Ct[kr];cr(qn,kr,Ct)&&(Yn[gn++]=qn)}return Yn}(Hl(nt),function(Ct){return Sc.call(nt,Ct)}))}:function(){return[]},Mi=Co;function Wl(nt,Ct){return!!(Ct=Ct??Z)&&(typeof nt=="number"||Qc.test(nt))&&nt>-1&&nt%1==0&&nt<Ct}function ks(nt){if(nt!=null){try{return jl.call(nt)}catch{}try{return nt+""}catch{}}return""}function qs(nt,Ct){return nt===Ct||nt!=nt&&Ct!=Ct}(Ac&&Mi(new Ac(new ArrayBuffer(1)))!=ai||na&&Mi(new na)!=er||ql&&Mi(ql.resolve())!=ti||$&&Mi(new $)!=br||ye&&Mi(new ye)!=wn)&&(Mi=function(nt){var Ct=Co(nt),cr=Ct==yr?nt.constructor:void 0,kr=cr?ks(cr):"";if(kr)switch(kr){case ot:return ai;case mt:return er;case Ot:return ti;case nr:return br;case wr:return wn}return Ct});var xl=Tn(function(){return arguments}())?Tn:function(nt){return Ms(nt)&&Vs.call(nt,"callee")&&!Sc.call(nt,"callee")},Qi=Array.isArray,Ka=ru||function(){return!1};function Ga(nt){if(!Bo(nt))return!1;var Ct=Co(nt);return Ct==Qt||Ct=="[object GeneratorFunction]"||Ct=="[object AsyncFunction]"||Ct=="[object Proxy]"}function Xl(nt){return typeof nt=="number"&&nt>-1&&nt%1==0&&nt<=Z}function Bo(nt){var Ct=typeof nt;return nt!=null&&(Ct=="object"||Ct=="function")}function Ms(nt){return nt!=null&&typeof nt=="object"}var zu=Go?function(nt){return function(Ct){return nt(Ct)}}(Go):function(nt){return Ms(nt)&&Xl(nt.length)&&!!li[Co(nt)]};function $u(nt){return(Ct=nt)!=null&&Xl(Ct.length)&&!Ga(Ct)?Yo(nt):vl(nt);var Ct}D.exports=function(nt,Ct){return Mn(nt,Ct)}})(_a,_a.exports);var ci=n(_a.exports);function Ko(D,X){return D.length===X.length&&JSON.stringify(D.map(function(j){return j}).sort())===JSON.stringify(X.map(function(j){return j}).sort())}var mo={Polygon:qe,LineString:Be,Point:Oe,MultiPolygon:Xe,MultiLineString:Xe,MultiPoint:Xe},Cs=Object.freeze({__proto__:null,CommonSelectors:Br,constrainFeatureMovement:so,createMidPoint:Nn,createSupplementaryPoints:gi,createVertex:Gn,doubleClickZoom:Yr,euclideanDistance:Ze,featuresAt:ge,getFeatureAtAndSetCursors:$e,isClick:Me,isEventAtCoordinates:Ts,isTap:Ue,mapEventToBoundingBox:G,ModeHandler:r,moveFeatures:Lo,sortFeatures:J,stringSetsAreEqual:Ko,StringSet:se,theme:at,toDenseArray:zt}),hs=function(D,X){var j={options:D=function(de){de===void 0&&(de={});var we=Nt(de);return de.controls||(we.controls={}),de.displayControlsDefault===!1?we.controls=Nt(ya,de.controls):we.controls=Nt(si,de.controls),(we=Nt(go,we)).styles=ao(we.styles,"cold").concat(ao(we.styles,"hot")),we}(D)};X=function(de,we){return we.modes=z,we.getFeatureIdsAt=function(Le){return ge.click({point:Le},null,de).map(function(ft){return ft.properties.id})},we.getSelectedIds=function(){return de.store.getSelectedIds()},we.getSelected=function(){return{type:R.FEATURE_COLLECTION,features:de.store.getSelectedIds().map(function(Le){return de.store.get(Le)}).map(function(Le){return Le.toGeoJSON()})}},we.getSelectedPoints=function(){return{type:R.FEATURE_COLLECTION,features:de.store.getSelectedCoordinates().map(function(Le){return{type:R.FEATURE,properties:{},geometry:{type:R.POINT,coordinates:Le.coordinates}}})}},we.set=function(Le){if(Le.type===void 0||Le.type!==R.FEATURE_COLLECTION||!Array.isArray(Le.features))throw new Error("Invalid FeatureCollection");var ft=de.store.createRenderBatch(),Mt=de.store.getAllIds().slice(),Qt=we.add(Le),er=new se(Qt);return(Mt=Mt.filter(function(Jt){return!er.has(Jt)})).length&&we.delete(Mt),ft(),Qt},we.add=function(Le){var ft=JSON.parse(JSON.stringify(Ee(Le))).features.map(function(Mt){if(Mt.id=Mt.id||ce(),Mt.geometry===null)throw new Error("Invalid geometry: null");if(de.store.get(Mt.id)===void 0||de.store.get(Mt.id).type!==Mt.geometry.type){var Qt=mo[Mt.geometry.type];if(Qt===void 0)throw new Error("Invalid geometry type: "+Mt.geometry.type+".");var er=new Qt(de,Mt);de.store.add(er)}else{var Jt=de.store.get(Mt.id);Jt.properties=Mt.properties,ci(Jt.properties,Mt.properties)||de.store.featureChanged(Jt.id),ci(Jt.getCoordinates(),Mt.geometry.coordinates)||Jt.incomingCoords(Mt.geometry.coordinates)}return Mt.id});return de.store.render(),ft},we.get=function(Le){var ft=de.store.get(Le);if(ft)return ft.toGeoJSON()},we.getAll=function(){return{type:R.FEATURE_COLLECTION,features:de.store.getAll().map(function(Le){return Le.toGeoJSON()})}},we.delete=function(Le){return de.store.delete(Le,{silent:!0}),we.getMode()!==z.DIRECT_SELECT||de.store.getSelectedIds().length?de.store.render():de.events.changeMode(z.SIMPLE_SELECT,void 0,{silent:!0}),we},we.deleteAll=function(){return de.store.delete(de.store.getAllIds(),{silent:!0}),we.getMode()===z.DIRECT_SELECT?de.events.changeMode(z.SIMPLE_SELECT,void 0,{silent:!0}):de.store.render(),we},we.changeMode=function(Le,ft){return ft===void 0&&(ft={}),Le===z.SIMPLE_SELECT&&we.getMode()===z.SIMPLE_SELECT?(Ko(ft.featureIds||[],de.store.getSelectedIds())||(de.store.setSelected(ft.featureIds,{silent:!0}),de.store.render()),we):(Le===z.DIRECT_SELECT&&we.getMode()===z.DIRECT_SELECT&&ft.featureId===de.store.getSelectedIds()[0]||de.events.changeMode(Le,ft,{silent:!0}),we)},we.getMode=function(){return de.events.getMode()},we.trash=function(){return de.events.trash({silent:!0}),we},we.combineFeatures=function(){return de.events.combineFeatures({silent:!0}),we},we.uncombineFeatures=function(){return de.events.uncombineFeatures({silent:!0}),we},we.setFeatureProperty=function(Le,ft,Mt){return de.store.setFeatureProperty(Le,ft,Mt),we},we}(j,X),j.api=X;var Z=rr(j);return X.onAdd=Z.onAdd,X.onRemove=Z.onRemove,X.types=k,X.options=D,X};function xn(D){hs(D,this)}return xn.modes=kn,xn.constants=Q,xn.lib=Cs,xn})})(ele);var LR={},tle=Zc;Object.defineProperty(LR,"__esModule",{value:!0});var aj=LR.default=void 0,rle=tle(Jc()),nle=xt;aj=LR.default=(0,rle.default)((0,nle.jsx)("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7"}),"GpsFixed");var FR={},ile=Zc;Object.defineProperty(FR,"__esModule",{value:!0});var lj=FR.default=void 0,ole=ile(Jc()),sle=xt;lj=FR.default=(0,ole.default)((0,sle.jsx)("path",{d:"M15 16v1.26l-6-3v-3.17L11.7 8H16V2h-6v4.9L7.3 10H3v6h5l7 3.5V22h6v-6z"}),"Polyline");var BR={},ale=Zc;Object.defineProperty(BR,"__esModule",{value:!0});var cj=BR.default=void 0,lle=ale(Jc()),cle=xt;cj=BR.default=(0,lle.default)((0,cle.jsx)("path",{d:"m2 9 4 12h12l4-12-10-7z"}),"Pentagon");var wu={},nb={},ule=typeof rf=="object"&&rf&&rf.Object===Object&&rf,uj=ule,hle=uj,fle=typeof self=="object"&&self&&self.Object===Object&&self,dle=hle||fle||Function("return this")(),Sf=dle,ple=Sf,gle=ple.Symbol,ib=gle,eD=ib,hj=Object.prototype,mle=hj.hasOwnProperty,yle=hj.toString,N1=eD?eD.toStringTag:void 0;function _le(e){var t=mle.call(e,N1),r=e[N1];try{e[N1]=void 0;var n=!0}catch{}var i=yle.call(e);return n&&(t?e[N1]=r:delete e[N1]),i}var vle=_le,ble=Object.prototype,xle=ble.toString;function wle(e){return xle.call(e)}var Sle=wle,tD=ib,Ale=vle,Ele=Sle,Tle="[object Null]",Cle="[object Undefined]",rD=tD?tD.toStringTag:void 0;function Ple(e){return e==null?e===void 0?Cle:Tle:rD&&rD in Object(e)?Ale(e):Ele(e)}var mm=Ple,Ile=Array.isArray,yh=Ile;function Rle(e){return e!=null&&typeof e=="object"}var vd=Rle,kle=mm,Mle=yh,Ole=vd,Nle="[object String]";function Dle(e){return typeof e=="string"||!Mle(e)&&Ole(e)&&kle(e)==Nle}var Lle=Dle;function Fle(e){return function(t,r,n){for(var i=-1,o=Object(t),l=n(t),s=l.length;s--;){var f=l[e?s:++i];if(r(o[f],f,o)===!1)break}return t}}var Ble=Fle,zle=Ble,$le=zle(),Ule=$le;function jle(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Vle=jle,Hle=mm,qle=vd,Wle="[object Arguments]";function Xle(e){return qle(e)&&Hle(e)==Wle}var Kle=Xle,nD=Kle,Gle=vd,fj=Object.prototype,Yle=fj.hasOwnProperty,Zle=fj.propertyIsEnumerable,Jle=nD(function(){return arguments}())?nD:function(e){return Gle(e)&&Yle.call(e,"callee")&&!Zle.call(e,"callee")},dj=Jle,_5={exports:{}};function Qle(){return!1}var ece=Qle;_5.exports;(function(e,t){var r=Sf,n=ece,i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,l=o&&o.exports===i,s=l?r.Buffer:void 0,f=s?s.isBuffer:void 0,p=f||n;e.exports=p})(_5,_5.exports);var zR=_5.exports,tce=9007199254740991,rce=/^(?:0|[1-9]\d*)$/;function nce(e,t){var r=typeof e;return t=t??tce,!!t&&(r=="number"||r!="symbol"&&rce.test(e))&&e>-1&&e%1==0&&e<t}var pj=nce,ice=9007199254740991;function oce(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ice}var $R=oce,sce=mm,ace=$R,lce=vd,cce="[object Arguments]",uce="[object Array]",hce="[object Boolean]",fce="[object Date]",dce="[object Error]",pce="[object Function]",gce="[object Map]",mce="[object Number]",yce="[object Object]",_ce="[object RegExp]",vce="[object Set]",bce="[object String]",xce="[object WeakMap]",wce="[object ArrayBuffer]",Sce="[object DataView]",Ace="[object Float32Array]",Ece="[object Float64Array]",Tce="[object Int8Array]",Cce="[object Int16Array]",Pce="[object Int32Array]",Ice="[object Uint8Array]",Rce="[object Uint8ClampedArray]",kce="[object Uint16Array]",Mce="[object Uint32Array]",So={};So[Ace]=So[Ece]=So[Tce]=So[Cce]=So[Pce]=So[Ice]=So[Rce]=So[kce]=So[Mce]=!0;So[cce]=So[uce]=So[wce]=So[hce]=So[Sce]=So[fce]=So[dce]=So[pce]=So[gce]=So[mce]=So[yce]=So[_ce]=So[vce]=So[bce]=So[xce]=!1;function Oce(e){return lce(e)&&ace(e.length)&&!!So[sce(e)]}var Nce=Oce;function Dce(e){return function(t){return e(t)}}var UR=Dce,v5={exports:{}};v5.exports;(function(e,t){var r=uj,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,l=o&&r.process,s=function(){try{var f=i&&i.require&&i.require("util").types;return f||l&&l.binding&&l.binding("util")}catch{}}();e.exports=s})(v5,v5.exports);var jR=v5.exports,Lce=Nce,Fce=UR,iD=jR,oD=iD&&iD.isTypedArray,Bce=oD?Fce(oD):Lce,gj=Bce,zce=Vle,$ce=dj,Uce=yh,jce=zR,Vce=pj,Hce=gj,qce=Object.prototype,Wce=qce.hasOwnProperty;function Xce(e,t){var r=Uce(e),n=!r&&$ce(e),i=!r&&!n&&jce(e),o=!r&&!n&&!i&&Hce(e),l=r||n||i||o,s=l?zce(e.length,String):[],f=s.length;for(var p in e)(t||Wce.call(e,p))&&!(l&&(p=="length"||i&&(p=="offset"||p=="parent")||o&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||Vce(p,f)))&&s.push(p);return s}var mj=Xce,Kce=Object.prototype;function Gce(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Kce;return e===r}var VR=Gce;function Yce(e,t){return function(r){return e(t(r))}}var yj=Yce,Zce=yj,Jce=Zce(Object.keys,Object),Qce=Jce,eue=VR,tue=Qce,rue=Object.prototype,nue=rue.hasOwnProperty;function iue(e){if(!eue(e))return tue(e);var t=[];for(var r in Object(e))nue.call(e,r)&&r!="constructor"&&t.push(r);return t}var oue=iue;function sue(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var D_=sue,aue=mm,lue=D_,cue="[object AsyncFunction]",uue="[object Function]",hue="[object GeneratorFunction]",fue="[object Proxy]";function due(e){if(!lue(e))return!1;var t=aue(e);return t==uue||t==hue||t==cue||t==fue}var _j=due,pue=_j,gue=$R;function mue(e){return e!=null&&gue(e.length)&&!pue(e)}var $3=mue,yue=mj,_ue=oue,vue=$3;function bue(e){return vue(e)?yue(e):_ue(e)}var ob=bue,xue=Ule,wue=ob;function Sue(e,t){return e&&xue(e,t,wue)}var vj=Sue;function Aue(e){return e}var bj=Aue,Eue=bj;function Tue(e){return typeof e=="function"?e:Eue}var Cue=Tue,Pue=vj,Iue=Cue;function Rue(e,t){return e&&Pue(e,Iue(t))}var HR=Rue,kue=yj,Mue=kue(Object.getPrototypeOf,Object),qR=Mue,Oue=mm,Nue=qR,Due=vd,Lue="[object Object]",Fue=Function.prototype,Bue=Object.prototype,xj=Fue.toString,zue=Bue.hasOwnProperty,$ue=xj.call(Object);function Uue(e){if(!Due(e)||Oue(e)!=Lue)return!1;var t=Nue(e);if(t===null)return!0;var r=zue.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&xj.call(r)==$ue}var jue=Uue;function Vue(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var wj=Vue;function Hue(){this.__data__=[],this.size=0}var que=Hue;function Wue(e,t){return e===t||e!==e&&t!==t}var WR=Wue,Xue=WR;function Kue(e,t){for(var r=e.length;r--;)if(Xue(e[r][0],t))return r;return-1}var U3=Kue,Gue=U3,Yue=Array.prototype,Zue=Yue.splice;function Jue(e){var t=this.__data__,r=Gue(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Zue.call(t,r,1),--this.size,!0}var Que=Jue,ehe=U3;function the(e){var t=this.__data__,r=ehe(t,e);return r<0?void 0:t[r][1]}var rhe=the,nhe=U3;function ihe(e){return nhe(this.__data__,e)>-1}var ohe=ihe,she=U3;function ahe(e,t){var r=this.__data__,n=she(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var lhe=ahe,che=que,uhe=Que,hhe=rhe,fhe=ohe,dhe=lhe;function L_(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}L_.prototype.clear=che;L_.prototype.delete=uhe;L_.prototype.get=hhe;L_.prototype.has=fhe;L_.prototype.set=dhe;var j3=L_,phe=j3;function ghe(){this.__data__=new phe,this.size=0}var mhe=ghe;function yhe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var _he=yhe;function vhe(e){return this.__data__.get(e)}var bhe=vhe;function xhe(e){return this.__data__.has(e)}var whe=xhe,She=Sf,Ahe=She["__core-js_shared__"],Ehe=Ahe,aT=Ehe,sD=function(){var e=/[^.]+$/.exec(aT&&aT.keys&&aT.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function The(e){return!!sD&&sD in e}var Che=The,Phe=Function.prototype,Ihe=Phe.toString;function Rhe(e){if(e!=null){try{return Ihe.call(e)}catch{}try{return e+""}catch{}}return""}var Sj=Rhe,khe=_j,Mhe=Che,Ohe=D_,Nhe=Sj,Dhe=/[\\^$.*+?()[\]{}|]/g,Lhe=/^\[object .+?Constructor\]$/,Fhe=Function.prototype,Bhe=Object.prototype,zhe=Fhe.toString,$he=Bhe.hasOwnProperty,Uhe=RegExp("^"+zhe.call($he).replace(Dhe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function jhe(e){if(!Ohe(e)||Mhe(e))return!1;var t=khe(e)?Uhe:Lhe;return t.test(Nhe(e))}var Vhe=jhe;function Hhe(e,t){return e==null?void 0:e[t]}var qhe=Hhe,Whe=Vhe,Xhe=qhe;function Khe(e,t){var r=Xhe(e,t);return Whe(r)?r:void 0}var ym=Khe,Ghe=ym,Yhe=Sf,Zhe=Ghe(Yhe,"Map"),XR=Zhe,Jhe=ym,Qhe=Jhe(Object,"create"),V3=Qhe,aD=V3;function efe(){this.__data__=aD?aD(null):{},this.size=0}var tfe=efe;function rfe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var nfe=rfe,ife=V3,ofe="__lodash_hash_undefined__",sfe=Object.prototype,afe=sfe.hasOwnProperty;function lfe(e){var t=this.__data__;if(ife){var r=t[e];return r===ofe?void 0:r}return afe.call(t,e)?t[e]:void 0}var cfe=lfe,ufe=V3,hfe=Object.prototype,ffe=hfe.hasOwnProperty;function dfe(e){var t=this.__data__;return ufe?t[e]!==void 0:ffe.call(t,e)}var pfe=dfe,gfe=V3,mfe="__lodash_hash_undefined__";function yfe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=gfe&&t===void 0?mfe:t,this}var _fe=yfe,vfe=tfe,bfe=nfe,xfe=cfe,wfe=pfe,Sfe=_fe;function F_(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}F_.prototype.clear=vfe;F_.prototype.delete=bfe;F_.prototype.get=xfe;F_.prototype.has=wfe;F_.prototype.set=Sfe;var Afe=F_,lD=Afe,Efe=j3,Tfe=XR;function Cfe(){this.size=0,this.__data__={hash:new lD,map:new(Tfe||Efe),string:new lD}}var Pfe=Cfe;function Ife(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Rfe=Ife,kfe=Rfe;function Mfe(e,t){var r=e.__data__;return kfe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var H3=Mfe,Ofe=H3;function Nfe(e){var t=Ofe(this,e).delete(e);return this.size-=t?1:0,t}var Dfe=Nfe,Lfe=H3;function Ffe(e){return Lfe(this,e).get(e)}var Bfe=Ffe,zfe=H3;function $fe(e){return zfe(this,e).has(e)}var Ufe=$fe,jfe=H3;function Vfe(e,t){var r=jfe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Hfe=Vfe,qfe=Pfe,Wfe=Dfe,Xfe=Bfe,Kfe=Ufe,Gfe=Hfe;function B_(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}B_.prototype.clear=qfe;B_.prototype.delete=Wfe;B_.prototype.get=Xfe;B_.prototype.has=Kfe;B_.prototype.set=Gfe;var KR=B_,Yfe=j3,Zfe=XR,Jfe=KR,Qfe=200;function ede(e,t){var r=this.__data__;if(r instanceof Yfe){var n=r.__data__;if(!Zfe||n.length<Qfe-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Jfe(n)}return r.set(e,t),this.size=r.size,this}var tde=ede,rde=j3,nde=mhe,ide=_he,ode=bhe,sde=whe,ade=tde;function z_(e){var t=this.__data__=new rde(e);this.size=t.size}z_.prototype.clear=nde;z_.prototype.delete=ide;z_.prototype.get=ode;z_.prototype.has=sde;z_.prototype.set=ade;var GR=z_,lde="__lodash_hash_undefined__";function cde(e){return this.__data__.set(e,lde),this}var ude=cde;function hde(e){return this.__data__.has(e)}var fde=hde,dde=KR,pde=ude,gde=fde;function b5(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new dde;++t<r;)this.add(e[t])}b5.prototype.add=b5.prototype.push=pde;b5.prototype.has=gde;var mde=b5;function yde(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var _de=yde;function vde(e,t){return e.has(t)}var bde=vde,xde=mde,wde=_de,Sde=bde,Ade=1,Ede=2;function Tde(e,t,r,n,i,o){var l=r&Ade,s=e.length,f=t.length;if(s!=f&&!(l&&f>s))return!1;var p=o.get(e),v=o.get(t);if(p&&v)return p==t&&v==e;var x=-1,S=!0,A=r&Ede?new xde:void 0;for(o.set(e,t),o.set(t,e);++x<s;){var k=e[x],R=t[x];if(n)var z=l?n(R,k,x,t,e,o):n(k,R,x,e,t,o);if(z!==void 0){if(z)continue;S=!1;break}if(A){if(!wde(t,function(N,B){if(!Sde(A,B)&&(k===N||i(k,N,r,n,o)))return A.push(B)})){S=!1;break}}else if(!(k===R||i(k,R,r,n,o))){S=!1;break}}return o.delete(e),o.delete(t),S}var Aj=Tde,Cde=Sf,Pde=Cde.Uint8Array,Ej=Pde;function Ide(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var Rde=Ide;function kde(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Mde=kde,cD=ib,uD=Ej,Ode=WR,Nde=Aj,Dde=Rde,Lde=Mde,Fde=1,Bde=2,zde="[object Boolean]",$de="[object Date]",Ude="[object Error]",jde="[object Map]",Vde="[object Number]",Hde="[object RegExp]",qde="[object Set]",Wde="[object String]",Xde="[object Symbol]",Kde="[object ArrayBuffer]",Gde="[object DataView]",hD=cD?cD.prototype:void 0,lT=hD?hD.valueOf:void 0;function Yde(e,t,r,n,i,o,l){switch(r){case Gde:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Kde:return!(e.byteLength!=t.byteLength||!o(new uD(e),new uD(t)));case zde:case $de:case Vde:return Ode(+e,+t);case Ude:return e.name==t.name&&e.message==t.message;case Hde:case Wde:return e==t+"";case jde:var s=Dde;case qde:var f=n&Fde;if(s||(s=Lde),e.size!=t.size&&!f)return!1;var p=l.get(e);if(p)return p==t;n|=Bde,l.set(e,t);var v=Nde(s(e),s(t),n,i,o,l);return l.delete(e),v;case Xde:if(lT)return lT.call(e)==lT.call(t)}return!1}var Zde=Yde;function Jde(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var Tj=Jde,Qde=Tj,epe=yh;function tpe(e,t,r){var n=t(e);return epe(e)?n:Qde(n,r(e))}var Cj=tpe;function rpe(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var l=e[r];t(l,r,e)&&(o[i++]=l)}return o}var npe=rpe;function ipe(){return[]}var Pj=ipe,ope=npe,spe=Pj,ape=Object.prototype,lpe=ape.propertyIsEnumerable,fD=Object.getOwnPropertySymbols,cpe=fD?function(e){return e==null?[]:(e=Object(e),ope(fD(e),function(t){return lpe.call(e,t)}))}:spe,YR=cpe,upe=Cj,hpe=YR,fpe=ob;function dpe(e){return upe(e,fpe,hpe)}var Ij=dpe,dD=Ij,ppe=1,gpe=Object.prototype,mpe=gpe.hasOwnProperty;function ype(e,t,r,n,i,o){var l=r&ppe,s=dD(e),f=s.length,p=dD(t),v=p.length;if(f!=v&&!l)return!1;for(var x=f;x--;){var S=s[x];if(!(l?S in t:mpe.call(t,S)))return!1}var A=o.get(e),k=o.get(t);if(A&&k)return A==t&&k==e;var R=!0;o.set(e,t),o.set(t,e);for(var z=l;++x<f;){S=s[x];var N=e[S],B=t[S];if(n)var U=l?n(B,N,S,t,e,o):n(N,B,S,e,t,o);if(!(U===void 0?N===B||i(N,B,r,n,o):U)){R=!1;break}z||(z=S=="constructor")}if(R&&!z){var K=e.constructor,ne=t.constructor;K!=ne&&"constructor"in e&&"constructor"in t&&!(typeof K=="function"&&K instanceof K&&typeof ne=="function"&&ne instanceof ne)&&(R=!1)}return o.delete(e),o.delete(t),R}var _pe=ype,vpe=ym,bpe=Sf,xpe=vpe(bpe,"DataView"),wpe=xpe,Spe=ym,Ape=Sf,Epe=Spe(Ape,"Promise"),Tpe=Epe,Cpe=ym,Ppe=Sf,Ipe=Cpe(Ppe,"Set"),Rpe=Ipe,kpe=ym,Mpe=Sf,Ope=kpe(Mpe,"WeakMap"),Npe=Ope,A4=wpe,E4=XR,T4=Tpe,C4=Rpe,P4=Npe,Rj=mm,$_=Sj,pD="[object Map]",Dpe="[object Object]",gD="[object Promise]",mD="[object Set]",yD="[object WeakMap]",_D="[object DataView]",Lpe=$_(A4),Fpe=$_(E4),Bpe=$_(T4),zpe=$_(C4),$pe=$_(P4),dg=Rj;(A4&&dg(new A4(new ArrayBuffer(1)))!=_D||E4&&dg(new E4)!=pD||T4&&dg(T4.resolve())!=gD||C4&&dg(new C4)!=mD||P4&&dg(new P4)!=yD)&&(dg=function(e){var t=Rj(e),r=t==Dpe?e.constructor:void 0,n=r?$_(r):"";if(n)switch(n){case Lpe:return _D;case Fpe:return pD;case Bpe:return gD;case zpe:return mD;case $pe:return yD}return t});var q3=dg,cT=GR,Upe=Aj,jpe=Zde,Vpe=_pe,vD=q3,bD=yh,xD=zR,Hpe=gj,qpe=1,wD="[object Arguments]",SD="[object Array]",Ax="[object Object]",Wpe=Object.prototype,AD=Wpe.hasOwnProperty;function Xpe(e,t,r,n,i,o){var l=bD(e),s=bD(t),f=l?SD:vD(e),p=s?SD:vD(t);f=f==wD?Ax:f,p=p==wD?Ax:p;var v=f==Ax,x=p==Ax,S=f==p;if(S&&xD(e)){if(!xD(t))return!1;l=!0,v=!1}if(S&&!v)return o||(o=new cT),l||Hpe(e)?Upe(e,t,r,n,i,o):jpe(e,t,f,r,n,i,o);if(!(r&qpe)){var A=v&&AD.call(e,"__wrapped__"),k=x&&AD.call(t,"__wrapped__");if(A||k){var R=A?e.value():e,z=k?t.value():t;return o||(o=new cT),i(R,z,r,n,o)}}return S?(o||(o=new cT),Vpe(e,t,r,n,i,o)):!1}var Kpe=Xpe,Gpe=Kpe,ED=vd;function kj(e,t,r,n,i){return e===t?!0:e==null||t==null||!ED(e)&&!ED(t)?e!==e&&t!==t:Gpe(e,t,r,n,kj,i)}var Mj=kj,Ype=GR,Zpe=Mj,Jpe=1,Qpe=2;function ege(e,t,r,n){var i=r.length,o=i,l=!n;if(e==null)return!o;for(e=Object(e);i--;){var s=r[i];if(l&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){s=r[i];var f=s[0],p=e[f],v=s[1];if(l&&s[2]){if(p===void 0&&!(f in e))return!1}else{var x=new Ype;if(n)var S=n(p,v,f,e,t,x);if(!(S===void 0?Zpe(v,p,Jpe|Qpe,n,x):S))return!1}}return!0}var tge=ege,rge=D_;function nge(e){return e===e&&!rge(e)}var Oj=nge,ige=Oj,oge=ob;function sge(e){for(var t=oge(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,ige(i)]}return t}var age=sge;function lge(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var Nj=lge,cge=tge,uge=age,hge=Nj;function fge(e){var t=uge(e);return t.length==1&&t[0][2]?hge(t[0][0],t[0][1]):function(r){return r===e||cge(r,e,t)}}var dge=fge,pge=mm,gge=vd,mge="[object Symbol]";function yge(e){return typeof e=="symbol"||gge(e)&&pge(e)==mge}var ZR=yge,_ge=yh,vge=ZR,bge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xge=/^\w*$/;function wge(e,t){if(_ge(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||vge(e)?!0:xge.test(e)||!bge.test(e)||t!=null&&e in Object(t)}var JR=wge,Dj=KR,Sge="Expected a function";function QR(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Sge);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var l=e.apply(this,n);return r.cache=o.set(i,l)||o,l};return r.cache=new(QR.Cache||Dj),r}QR.Cache=Dj;var Age=QR,Ege=Age,Tge=500;function Cge(e){var t=Ege(e,function(n){return r.size===Tge&&r.clear(),n}),r=t.cache;return t}var Pge=Cge,Ige=Pge,Rge=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kge=/\\(\\)?/g,Mge=Ige(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Rge,function(r,n,i,o){t.push(i?o.replace(kge,"$1"):n||r)}),t}),Oge=Mge,TD=ib,Nge=wj,Dge=yh,Lge=ZR,Fge=1/0,CD=TD?TD.prototype:void 0,PD=CD?CD.toString:void 0;function Lj(e){if(typeof e=="string")return e;if(Dge(e))return Nge(e,Lj)+"";if(Lge(e))return PD?PD.call(e):"";var t=e+"";return t=="0"&&1/e==-Fge?"-0":t}var Bge=Lj,zge=Bge;function $ge(e){return e==null?"":zge(e)}var Uge=$ge,jge=yh,Vge=JR,Hge=Oge,qge=Uge;function Wge(e,t){return jge(e)?e:Vge(e,t)?[e]:Hge(qge(e))}var Fj=Wge,Xge=ZR,Kge=1/0;function Gge(e){if(typeof e=="string"||Xge(e))return e;var t=e+"";return t=="0"&&1/e==-Kge?"-0":t}var W3=Gge,Yge=Fj,Zge=W3;function Jge(e,t){t=Yge(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Zge(t[r++])];return r&&r==n?e:void 0}var Bj=Jge,Qge=Bj;function eme(e,t,r){var n=e==null?void 0:Qge(e,t);return n===void 0?r:n}var tme=eme;function rme(e,t){return e!=null&&t in Object(e)}var nme=rme,ime=Fj,ome=dj,sme=yh,ame=pj,lme=$R,cme=W3;function ume(e,t,r){t=ime(t,e);for(var n=-1,i=t.length,o=!1;++n<i;){var l=cme(t[n]);if(!(o=e!=null&&r(e,l)))break;e=e[l]}return o||++n!=i?o:(i=e==null?0:e.length,!!i&&lme(i)&&ame(l,i)&&(sme(e)||ome(e)))}var hme=ume,fme=nme,dme=hme;function pme(e,t){return e!=null&&dme(e,t,fme)}var gme=pme,mme=Mj,yme=tme,_me=gme,vme=JR,bme=Oj,xme=Nj,wme=W3,Sme=1,Ame=2;function Eme(e,t){return vme(e)&&bme(t)?xme(wme(e),t):function(r){var n=yme(r,e);return n===void 0&&n===t?_me(r,e):mme(t,n,Sme|Ame)}}var Tme=Eme;function Cme(e){return function(t){return t==null?void 0:t[e]}}var Pme=Cme,Ime=Bj;function Rme(e){return function(t){return Ime(t,e)}}var kme=Rme,Mme=Pme,Ome=kme,Nme=JR,Dme=W3;function Lme(e){return Nme(e)?Mme(Dme(e)):Ome(e)}var Fme=Lme,Bme=dge,zme=Tme,$me=bj,Ume=yh,jme=Fme;function Vme(e){return typeof e=="function"?e:e==null?$me:typeof e=="object"?Ume(e)?zme(e[0],e[1]):Bme(e):jme(e)}var Hme=Vme,qme=$3;function Wme(e,t){return function(r,n){if(r==null)return r;if(!qme(r))return e(r,n);for(var i=r.length,o=t?i:-1,l=Object(r);(t?o--:++o<i)&&n(l[o],o,l)!==!1;);return r}}var Xme=Wme,Kme=vj,Gme=Xme,Yme=Gme(Kme),Zme=Yme,Jme=Zme,Qme=$3;function e0e(e,t){var r=-1,n=Qme(e)?Array(e.length):[];return Jme(e,function(i,o,l){n[++r]=t(i,o,l)}),n}var t0e=e0e,r0e=wj,n0e=Hme,i0e=t0e,o0e=yh;function s0e(e,t){var r=o0e(e)?r0e:i0e;return r(e,n0e(t))}var a0e=s0e;Object.defineProperty(nb,"__esModule",{value:!0});nb.flattenNames=void 0;var l0e=Lle,c0e=X3(l0e),u0e=HR,h0e=X3(u0e),f0e=jue,d0e=X3(f0e),p0e=a0e,g0e=X3(p0e);function X3(e){return e&&e.__esModule?e:{default:e}}var m0e=nb.flattenNames=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[];return(0,g0e.default)(t,function(n){Array.isArray(n)?e(n).map(function(i){return r.push(i)}):(0,d0e.default)(n)?(0,h0e.default)(n,function(i,o){i===!0&&r.push(o),r.push(o+"-"+i)}):(0,c0e.default)(n)&&r.push(n)}),r};nb.default=m0e;var sb={};function y0e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var _0e=y0e,v0e=ym,b0e=function(){try{var e=v0e(Object,"defineProperty");return e({},"",{}),e}catch{}}(),x0e=b0e,ID=x0e;function w0e(e,t,r){t=="__proto__"&&ID?ID(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var zj=w0e,S0e=zj,A0e=WR,E0e=Object.prototype,T0e=E0e.hasOwnProperty;function C0e(e,t,r){var n=e[t];(!(T0e.call(e,t)&&A0e(n,r))||r===void 0&&!(t in e))&&S0e(e,t,r)}var $j=C0e,P0e=$j,I0e=zj;function R0e(e,t,r,n){var i=!r;r||(r={});for(var o=-1,l=t.length;++o<l;){var s=t[o],f=n?n(r[s],e[s],s,r,e):void 0;f===void 0&&(f=e[s]),i?I0e(r,s,f):P0e(r,s,f)}return r}var K3=R0e,k0e=K3,M0e=ob;function O0e(e,t){return e&&k0e(t,M0e(t),e)}var N0e=O0e;function D0e(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var L0e=D0e,F0e=D_,B0e=VR,z0e=L0e,$0e=Object.prototype,U0e=$0e.hasOwnProperty;function j0e(e){if(!F0e(e))return z0e(e);var t=B0e(e),r=[];for(var n in e)n=="constructor"&&(t||!U0e.call(e,n))||r.push(n);return r}var V0e=j0e,H0e=mj,q0e=V0e,W0e=$3;function X0e(e){return W0e(e)?H0e(e,!0):q0e(e)}var ek=X0e,K0e=K3,G0e=ek;function Y0e(e,t){return e&&K0e(t,G0e(t),e)}var Z0e=Y0e,x5={exports:{}};x5.exports;(function(e,t){var r=Sf,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,l=o?r.Buffer:void 0,s=l?l.allocUnsafe:void 0;function f(p,v){if(v)return p.slice();var x=p.length,S=s?s(x):new p.constructor(x);return p.copy(S),S}e.exports=f})(x5,x5.exports);var J0e=x5.exports;function Q0e(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var eye=Q0e,tye=K3,rye=YR;function nye(e,t){return tye(e,rye(e),t)}var iye=nye,oye=Tj,sye=qR,aye=YR,lye=Pj,cye=Object.getOwnPropertySymbols,uye=cye?function(e){for(var t=[];e;)oye(t,aye(e)),e=sye(e);return t}:lye,Uj=uye,hye=K3,fye=Uj;function dye(e,t){return hye(e,fye(e),t)}var pye=dye,gye=Cj,mye=Uj,yye=ek;function _ye(e){return gye(e,yye,mye)}var vye=_ye,bye=Object.prototype,xye=bye.hasOwnProperty;function wye(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&xye.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Sye=wye,RD=Ej;function Aye(e){var t=new e.constructor(e.byteLength);return new RD(t).set(new RD(e)),t}var tk=Aye,Eye=tk;function Tye(e,t){var r=t?Eye(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var Cye=Tye,Pye=/\w*$/;function Iye(e){var t=new e.constructor(e.source,Pye.exec(e));return t.lastIndex=e.lastIndex,t}var Rye=Iye,kD=ib,MD=kD?kD.prototype:void 0,OD=MD?MD.valueOf:void 0;function kye(e){return OD?Object(OD.call(e)):{}}var Mye=kye,Oye=tk;function Nye(e,t){var r=t?Oye(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Dye=Nye,Lye=tk,Fye=Cye,Bye=Rye,zye=Mye,$ye=Dye,Uye="[object Boolean]",jye="[object Date]",Vye="[object Map]",Hye="[object Number]",qye="[object RegExp]",Wye="[object Set]",Xye="[object String]",Kye="[object Symbol]",Gye="[object ArrayBuffer]",Yye="[object DataView]",Zye="[object Float32Array]",Jye="[object Float64Array]",Qye="[object Int8Array]",e_e="[object Int16Array]",t_e="[object Int32Array]",r_e="[object Uint8Array]",n_e="[object Uint8ClampedArray]",i_e="[object Uint16Array]",o_e="[object Uint32Array]";function s_e(e,t,r){var n=e.constructor;switch(t){case Gye:return Lye(e);case Uye:case jye:return new n(+e);case Yye:return Fye(e,r);case Zye:case Jye:case Qye:case e_e:case t_e:case r_e:case n_e:case i_e:case o_e:return $ye(e,r);case Vye:return new n;case Hye:case Xye:return new n(e);case qye:return Bye(e);case Wye:return new n;case Kye:return zye(e)}}var a_e=s_e,l_e=D_,ND=Object.create,c_e=function(){function e(){}return function(t){if(!l_e(t))return{};if(ND)return ND(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),u_e=c_e,h_e=u_e,f_e=qR,d_e=VR;function p_e(e){return typeof e.constructor=="function"&&!d_e(e)?h_e(f_e(e)):{}}var g_e=p_e,m_e=q3,y_e=vd,__e="[object Map]";function v_e(e){return y_e(e)&&m_e(e)==__e}var b_e=v_e,x_e=b_e,w_e=UR,DD=jR,LD=DD&&DD.isMap,S_e=LD?w_e(LD):x_e,A_e=S_e,E_e=q3,T_e=vd,C_e="[object Set]";function P_e(e){return T_e(e)&&E_e(e)==C_e}var I_e=P_e,R_e=I_e,k_e=UR,FD=jR,BD=FD&&FD.isSet,M_e=BD?k_e(BD):R_e,O_e=M_e,N_e=GR,D_e=_0e,L_e=$j,F_e=N0e,B_e=Z0e,z_e=J0e,$_e=eye,U_e=iye,j_e=pye,V_e=Ij,H_e=vye,q_e=q3,W_e=Sye,X_e=a_e,K_e=g_e,G_e=yh,Y_e=zR,Z_e=A_e,J_e=D_,Q_e=O_e,e1e=ob,t1e=ek,r1e=1,n1e=2,i1e=4,jj="[object Arguments]",o1e="[object Array]",s1e="[object Boolean]",a1e="[object Date]",l1e="[object Error]",Vj="[object Function]",c1e="[object GeneratorFunction]",u1e="[object Map]",h1e="[object Number]",Hj="[object Object]",f1e="[object RegExp]",d1e="[object Set]",p1e="[object String]",g1e="[object Symbol]",m1e="[object WeakMap]",y1e="[object ArrayBuffer]",_1e="[object DataView]",v1e="[object Float32Array]",b1e="[object Float64Array]",x1e="[object Int8Array]",w1e="[object Int16Array]",S1e="[object Int32Array]",A1e="[object Uint8Array]",E1e="[object Uint8ClampedArray]",T1e="[object Uint16Array]",C1e="[object Uint32Array]",uo={};uo[jj]=uo[o1e]=uo[y1e]=uo[_1e]=uo[s1e]=uo[a1e]=uo[v1e]=uo[b1e]=uo[x1e]=uo[w1e]=uo[S1e]=uo[u1e]=uo[h1e]=uo[Hj]=uo[f1e]=uo[d1e]=uo[p1e]=uo[g1e]=uo[A1e]=uo[E1e]=uo[T1e]=uo[C1e]=!0;uo[l1e]=uo[Vj]=uo[m1e]=!1;function Ew(e,t,r,n,i,o){var l,s=t&r1e,f=t&n1e,p=t&i1e;if(r&&(l=i?r(e,n,i,o):r(e)),l!==void 0)return l;if(!J_e(e))return e;var v=G_e(e);if(v){if(l=W_e(e),!s)return $_e(e,l)}else{var x=q_e(e),S=x==Vj||x==c1e;if(Y_e(e))return z_e(e,s);if(x==Hj||x==jj||S&&!i){if(l=f||S?{}:K_e(e),!s)return f?j_e(e,B_e(l,e)):U_e(e,F_e(l,e))}else{if(!uo[x])return i?e:{};l=X_e(e,x,s)}}o||(o=new N_e);var A=o.get(e);if(A)return A;o.set(e,l),Q_e(e)?e.forEach(function(z){l.add(Ew(z,t,r,z,e,o))}):Z_e(e)&&e.forEach(function(z,N){l.set(N,Ew(z,t,r,N,e,o))});var k=p?f?H_e:V_e:f?t1e:e1e,R=v?void 0:k(e);return D_e(R||e,function(z,N){R&&(N=z,z=e[N]),L_e(l,N,Ew(z,t,r,N,e,o))}),l}var P1e=Ew,I1e=P1e,R1e=1,k1e=4;function M1e(e){return I1e(e,R1e|k1e)}var O1e=M1e;Object.defineProperty(sb,"__esModule",{value:!0});sb.mergeClasses=void 0;var N1e=HR,D1e=qj(N1e),L1e=O1e,F1e=qj(L1e),B1e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function qj(e){return e&&e.__esModule?e:{default:e}}var z1e=sb.mergeClasses=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=t.default&&(0,F1e.default)(t.default)||{};return r.map(function(i){var o=t[i];return o&&(0,D1e.default)(o,function(l,s){n[s]||(n[s]={}),n[s]=B1e({},n[s],o[s])}),i}),n};sb.default=z1e;var ab={};Object.defineProperty(ab,"__esModule",{value:!0});ab.autoprefix=void 0;var $1e=HR,zD=j1e($1e),U1e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function j1e(e){return e&&e.__esModule?e:{default:e}}var V1e={borderRadius:function(t){return{msBorderRadius:t,MozBorderRadius:t,OBorderRadius:t,WebkitBorderRadius:t,borderRadius:t}},boxShadow:function(t){return{msBoxShadow:t,MozBoxShadow:t,OBoxShadow:t,WebkitBoxShadow:t,boxShadow:t}},userSelect:function(t){return{WebkitTouchCallout:t,KhtmlUserSelect:t,MozUserSelect:t,msUserSelect:t,WebkitUserSelect:t,userSelect:t}},flex:function(t){return{WebkitBoxFlex:t,MozBoxFlex:t,WebkitFlex:t,msFlex:t,flex:t}},flexBasis:function(t){return{WebkitFlexBasis:t,flexBasis:t}},justifyContent:function(t){return{WebkitJustifyContent:t,justifyContent:t}},transition:function(t){return{msTransition:t,MozTransition:t,OTransition:t,WebkitTransition:t,transition:t}},transform:function(t){return{msTransform:t,MozTransform:t,OTransform:t,WebkitTransform:t,transform:t}},absolute:function(t){var r=t&&t.split(" ");return{position:"absolute",top:r&&r[0],right:r&&r[1],bottom:r&&r[2],left:r&&r[3]}},extend:function(t,r){var n=r[t];return n||{extend:t}}},H1e=ab.autoprefix=function(t){var r={};return(0,zD.default)(t,function(n,i){var o={};(0,zD.default)(n,function(l,s){var f=V1e[s];f?o=U1e({},o,f(l)):o[s]=l}),r[i]=o}),r};ab.default=H1e;var lb={};Object.defineProperty(lb,"__esModule",{value:!0});lb.hover=void 0;var q1e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W1e=me,uT=X1e(W1e);function X1e(e){return e&&e.__esModule?e:{default:e}}function K1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $D(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function G1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Y1e=lb.hover=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){G1e(i,n);function i(){var o,l,s,f;K1e(this,i);for(var p=arguments.length,v=Array(p),x=0;x<p;x++)v[x]=arguments[x];return f=(l=(s=$D(this,(o=i.__proto__||Object.getPrototypeOf(i)).call.apply(o,[this].concat(v))),s),s.state={hover:!1},s.handleMouseOver=function(){return s.setState({hover:!0})},s.handleMouseOut=function(){return s.setState({hover:!1})},s.render=function(){return uT.default.createElement(r,{onMouseOver:s.handleMouseOver,onMouseOut:s.handleMouseOut},uT.default.createElement(t,q1e({},s.props,s.state)))},l),$D(s,f)}return i}(uT.default.Component)};lb.default=Y1e;var cb={};Object.defineProperty(cb,"__esModule",{value:!0});cb.active=void 0;var Z1e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J1e=me,hT=Q1e(J1e);function Q1e(e){return e&&e.__esModule?e:{default:e}}function eve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UD(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function tve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var rve=cb.active=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){tve(i,n);function i(){var o,l,s,f;eve(this,i);for(var p=arguments.length,v=Array(p),x=0;x<p;x++)v[x]=arguments[x];return f=(l=(s=UD(this,(o=i.__proto__||Object.getPrototypeOf(i)).call.apply(o,[this].concat(v))),s),s.state={active:!1},s.handleMouseDown=function(){return s.setState({active:!0})},s.handleMouseUp=function(){return s.setState({active:!1})},s.render=function(){return hT.default.createElement(r,{onMouseDown:s.handleMouseDown,onMouseUp:s.handleMouseUp},hT.default.createElement(t,Z1e({},s.props,s.state)))},l),UD(s,f)}return i}(hT.default.Component)};cb.default=rve;var rk={};Object.defineProperty(rk,"__esModule",{value:!0});var nve=function(t,r){var n={},i=function(l){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n[l]=s};return t===0&&i("first-child"),t===r-1&&i("last-child"),(t===0||t%2===0)&&i("even"),Math.abs(t%2)===1&&i("odd"),i("nth-child",t),n};rk.default=nve;Object.defineProperty(wu,"__esModule",{value:!0});wu.ReactCSS=wu.loop=wu.handleActive=nk=wu.handleHover=wu.hover=void 0;var ive=nb,ove=U_(ive),sve=sb,ave=U_(sve),lve=ab,cve=U_(lve),uve=lb,Wj=U_(uve),hve=cb,fve=U_(hve),dve=rk,pve=U_(dve);function U_(e){return e&&e.__esModule?e:{default:e}}wu.hover=Wj.default;var nk=wu.handleHover=Wj.default;wu.handleActive=fve.default;wu.loop=pve.default;var gve=wu.ReactCSS=function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var o=(0,ove.default)(n),l=(0,ave.default)(t,o);return(0,cve.default)(l)},In=wu.default=gve,mve=function(t,r,n,i,o){var l=o.clientWidth,s=o.clientHeight,f=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,p=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,v=f-(o.getBoundingClientRect().left+window.pageXOffset),x=p-(o.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var S=void 0;if(x<0?S=0:x>s?S=1:S=Math.round(x*100/s)/100,r.a!==S)return{h:r.h,s:r.s,l:r.l,a:S,source:"rgb"}}else{var A=void 0;if(v<0?A=0:v>l?A=1:A=Math.round(v*100/l)/100,i!==A)return{h:r.h,s:r.s,l:r.l,a:A,source:"rgb"}}return null},fT={},yve=function(t,r,n,i){if(typeof document>"u"&&!i)return null;var o=i?new i:document.createElement("canvas");o.width=n*2,o.height=n*2;var l=o.getContext("2d");return l?(l.fillStyle=t,l.fillRect(0,0,o.width,o.height),l.fillStyle=r,l.fillRect(0,0,n,n),l.translate(n,n),l.fillRect(0,0,n,n),o.toDataURL()):null},_ve=function(t,r,n,i){var o=t+"-"+r+"-"+n+(i?"-server":"");if(fT[o])return fT[o];var l=yve(t,r,n,i);return fT[o]=l,l},jD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j_=function(t){var r=t.white,n=t.grey,i=t.size,o=t.renderers,l=t.borderRadius,s=t.boxShadow,f=t.children,p=In({default:{grid:{borderRadius:l,boxShadow:s,absolute:"0px 0px 0px 0px",background:"url("+_ve(r,n,i,o.canvas)+") center left"}}});return me.isValidElement(f)?Pe.cloneElement(f,jD({},f.props,{style:jD({},f.props.style,p.grid)})):Pe.createElement("div",{style:p.grid})};j_.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var vve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bve=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function xve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VD(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function wve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ik=function(e){wve(t,e);function t(){var r,n,i,o;xve(this,t);for(var l=arguments.length,s=Array(l),f=0;f<l;f++)s[f]=arguments[f];return o=(n=(i=VD(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(s))),i),i.handleChange=function(p){var v=mve(p,i.props.hsl,i.props.direction,i.props.a,i.container);v&&typeof i.props.onChange=="function"&&i.props.onChange(v,p)},i.handleMouseDown=function(p){i.handleChange(p),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},n),VD(i,o)}return bve(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var n=this,i=this.props.rgb,o=In({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:vve({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return Pe.createElement("div",{style:o.alpha},Pe.createElement("div",{style:o.checkboard},Pe.createElement(j_,{renderers:this.props.renderers})),Pe.createElement("div",{style:o.gradient}),Pe.createElement("div",{style:o.container,ref:function(s){return n.container=s},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Pe.createElement("div",{style:o.pointer},this.props.pointer?Pe.createElement(this.props.pointer,this.props):Pe.createElement("div",{style:o.slider}))))}}]),t}(me.PureComponent||me.Component),Sve=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function Ave(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Eve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tve(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Cve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Pve=1,Xj=38,Ive=40,Rve=[Xj,Ive],kve=function(t){return Rve.indexOf(t)>-1},Mve=function(t){return Number(String(t).replace(/%/g,""))},Ove=1,oi=function(e){Cve(t,e);function t(r){Eve(this,t);var n=Tve(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(i){n.setUpdatedValue(i.target.value,i)},n.handleKeyDown=function(i){var o=Mve(i.target.value);if(!isNaN(o)&&kve(i.keyCode)){var l=n.getArrowOffset(),s=i.keyCode===Xj?o+l:o-l;n.setUpdatedValue(s,i)}},n.handleDrag=function(i){if(n.props.dragLabel){var o=Math.round(n.props.value+i.movementX);o>=0&&o<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(o),i)}},n.handleMouseDown=function(i){n.props.dragLabel&&(i.preventDefault(),n.handleDrag(i),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(r.value).toUpperCase(),blurValue:String(r.value).toUpperCase()},n.inputId="rc-editable-input-"+Ove++,n}return Sve(t,[{key:"componentDidUpdate",value:function(n,i){this.props.value!==this.state.value&&(n.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(n){return Ave({},this.props.label,n)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||Pve}},{key:"setUpdatedValue",value:function(n,i){var o=this.props.label?this.getValueObjectWithLabel(n):n;this.props.onChange&&this.props.onChange(o,i),this.setState({value:n})}},{key:"render",value:function(){var n=this,i=In({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return Pe.createElement("div",{style:i.wrap},Pe.createElement("input",{id:this.inputId,style:i.input,ref:function(l){return n.input=l},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?Pe.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(me.PureComponent||me.Component),Nve=function(t,r,n,i){var o=i.clientWidth,l=i.clientHeight,s=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,f=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,p=s-(i.getBoundingClientRect().left+window.pageXOffset),v=f-(i.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var x=void 0;if(v<0)x=359;else if(v>l)x=0;else{var S=-(v*100/l)+100;x=360*S/100}if(n.h!==x)return{h:x,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var A=void 0;if(p<0)A=0;else if(p>o)A=359;else{var k=p*100/o;A=360*k/100}if(n.h!==A)return{h:A,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null},Dve=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function Lve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HD(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Fve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var V_=function(e){Fve(t,e);function t(){var r,n,i,o;Lve(this,t);for(var l=arguments.length,s=Array(l),f=0;f<l;f++)s[f]=arguments[f];return o=(n=(i=HD(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(s))),i),i.handleChange=function(p){var v=Nve(p,i.props.direction,i.props.hsl,i.container);v&&typeof i.props.onChange=="function"&&i.props.onChange(v,p)},i.handleMouseDown=function(p){i.handleChange(p),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},n),HD(i,o)}return Dve(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.direction,o=i===void 0?"horizontal":i,l=In({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:o==="vertical"});return Pe.createElement("div",{style:l.hue},Pe.createElement("div",{className:"hue-"+o,style:l.container,ref:function(f){return n.container=f},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Pe.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),Pe.createElement("div",{style:l.pointer},this.props.pointer?Pe.createElement(this.props.pointer,this.props):Pe.createElement("div",{style:l.slider}))))}}]),t}(me.PureComponent||me.Component);function Bve(){this.__data__=[],this.size=0}function ub(e,t){return e===t||e!==e&&t!==t}function G3(e,t){for(var r=e.length;r--;)if(ub(e[r][0],t))return r;return-1}var zve=Array.prototype,$ve=zve.splice;function Uve(e){var t=this.__data__,r=G3(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():$ve.call(t,r,1),--this.size,!0}function jve(e){var t=this.__data__,r=G3(t,e);return r<0?void 0:t[r][1]}function Vve(e){return G3(this.__data__,e)>-1}function Hve(e,t){var r=this.__data__,n=G3(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function bd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}bd.prototype.clear=Bve;bd.prototype.delete=Uve;bd.prototype.get=jve;bd.prototype.has=Vve;bd.prototype.set=Hve;function qve(){this.__data__=new bd,this.size=0}function Wve(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Xve(e){return this.__data__.get(e)}function Kve(e){return this.__data__.has(e)}var Kj=typeof global=="object"&&global&&global.Object===Object&&global,Gve=typeof self=="object"&&self&&self.Object===Object&&self,_h=Kj||Gve||Function("return this")(),Mp=_h.Symbol,Gj=Object.prototype,Yve=Gj.hasOwnProperty,Zve=Gj.toString,D1=Mp?Mp.toStringTag:void 0;function Jve(e){var t=Yve.call(e,D1),r=e[D1];try{e[D1]=void 0;var n=!0}catch{}var i=Zve.call(e);return n&&(t?e[D1]=r:delete e[D1]),i}var Qve=Object.prototype,e2e=Qve.toString;function t2e(e){return e2e.call(e)}var r2e="[object Null]",n2e="[object Undefined]",qD=Mp?Mp.toStringTag:void 0;function _m(e){return e==null?e===void 0?n2e:r2e:qD&&qD in Object(e)?Jve(e):t2e(e)}function Mu(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var i2e="[object AsyncFunction]",o2e="[object Function]",s2e="[object GeneratorFunction]",a2e="[object Proxy]";function ok(e){if(!Mu(e))return!1;var t=_m(e);return t==o2e||t==s2e||t==i2e||t==a2e}var dT=_h["__core-js_shared__"],WD=function(){var e=/[^.]+$/.exec(dT&&dT.keys&&dT.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function l2e(e){return!!WD&&WD in e}var c2e=Function.prototype,u2e=c2e.toString;function vm(e){if(e!=null){try{return u2e.call(e)}catch{}try{return e+""}catch{}}return""}var h2e=/[\\^$.*+?()[\]{}|]/g,f2e=/^\[object .+?Constructor\]$/,d2e=Function.prototype,p2e=Object.prototype,g2e=d2e.toString,m2e=p2e.hasOwnProperty,y2e=RegExp("^"+g2e.call(m2e).replace(h2e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _2e(e){if(!Mu(e)||l2e(e))return!1;var t=ok(e)?y2e:f2e;return t.test(vm(e))}function v2e(e,t){return e==null?void 0:e[t]}function bm(e,t){var r=v2e(e,t);return _2e(r)?r:void 0}var y2=bm(_h,"Map"),_2=bm(Object,"create");function b2e(){this.__data__=_2?_2(null):{},this.size=0}function x2e(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var w2e="__lodash_hash_undefined__",S2e=Object.prototype,A2e=S2e.hasOwnProperty;function E2e(e){var t=this.__data__;if(_2){var r=t[e];return r===w2e?void 0:r}return A2e.call(t,e)?t[e]:void 0}var T2e=Object.prototype,C2e=T2e.hasOwnProperty;function P2e(e){var t=this.__data__;return _2?t[e]!==void 0:C2e.call(t,e)}var I2e="__lodash_hash_undefined__";function R2e(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=_2&&t===void 0?I2e:t,this}function rm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}rm.prototype.clear=b2e;rm.prototype.delete=x2e;rm.prototype.get=E2e;rm.prototype.has=P2e;rm.prototype.set=R2e;function k2e(){this.size=0,this.__data__={hash:new rm,map:new(y2||bd),string:new rm}}function M2e(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Y3(e,t){var r=e.__data__;return M2e(t)?r[typeof t=="string"?"string":"hash"]:r.map}function O2e(e){var t=Y3(this,e).delete(e);return this.size-=t?1:0,t}function N2e(e){return Y3(this,e).get(e)}function D2e(e){return Y3(this,e).has(e)}function L2e(e,t){var r=Y3(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function xd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}xd.prototype.clear=k2e;xd.prototype.delete=O2e;xd.prototype.get=N2e;xd.prototype.has=D2e;xd.prototype.set=L2e;var F2e=200;function B2e(e,t){var r=this.__data__;if(r instanceof bd){var n=r.__data__;if(!y2||n.length<F2e-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new xd(n)}return r.set(e,t),this.size=r.size,this}function gf(e){var t=this.__data__=new bd(e);this.size=t.size}gf.prototype.clear=qve;gf.prototype.delete=Wve;gf.prototype.get=Xve;gf.prototype.has=Kve;gf.prototype.set=B2e;var w5=function(){try{var e=bm(Object,"defineProperty");return e({},"",{}),e}catch{}}();function sk(e,t,r){t=="__proto__"&&w5?w5(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function I4(e,t,r){(r!==void 0&&!ub(e[t],r)||r===void 0&&!(t in e))&&sk(e,t,r)}function z2e(e){return function(t,r,n){for(var i=-1,o=Object(t),l=n(t),s=l.length;s--;){var f=l[++i];if(r(o[f],f,o)===!1)break}return t}}var Yj=z2e(),Zj=typeof exports=="object"&&exports&&!exports.nodeType&&exports,XD=Zj&&typeof module=="object"&&module&&!module.nodeType&&module,$2e=XD&&XD.exports===Zj,KD=$2e?_h.Buffer:void 0;KD&&KD.allocUnsafe;function U2e(e,t){return e.slice()}var S5=_h.Uint8Array;function j2e(e){var t=new e.constructor(e.byteLength);return new S5(t).set(new S5(e)),t}function V2e(e,t){var r=j2e(e.buffer);return new e.constructor(r,e.byteOffset,e.length)}function H2e(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var GD=Object.create,q2e=function(){function e(){}return function(t){if(!Mu(t))return{};if(GD)return GD(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Jj(e,t){return function(r){return e(t(r))}}var Qj=Jj(Object.getPrototypeOf,Object),W2e=Object.prototype;function ak(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||W2e;return e===r}function X2e(e){return typeof e.constructor=="function"&&!ak(e)?q2e(Qj(e)):{}}function Op(e){return e!=null&&typeof e=="object"}var K2e="[object Arguments]";function YD(e){return Op(e)&&_m(e)==K2e}var eV=Object.prototype,G2e=eV.hasOwnProperty,Y2e=eV.propertyIsEnumerable,A5=YD(function(){return arguments}())?YD:function(e){return Op(e)&&G2e.call(e,"callee")&&!Y2e.call(e,"callee")},Xc=Array.isArray,Z2e=9007199254740991;function lk(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Z2e}function H_(e){return e!=null&&lk(e.length)&&!ok(e)}function J2e(e){return Op(e)&&H_(e)}function Q2e(){return!1}var tV=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ZD=tV&&typeof module=="object"&&module&&!module.nodeType&&module,ebe=ZD&&ZD.exports===tV,JD=ebe?_h.Buffer:void 0,tbe=JD?JD.isBuffer:void 0,E5=tbe||Q2e,rbe="[object Object]",nbe=Function.prototype,ibe=Object.prototype,rV=nbe.toString,obe=ibe.hasOwnProperty,sbe=rV.call(Object);function abe(e){if(!Op(e)||_m(e)!=rbe)return!1;var t=Qj(e);if(t===null)return!0;var r=obe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&rV.call(r)==sbe}var lbe="[object Arguments]",cbe="[object Array]",ube="[object Boolean]",hbe="[object Date]",fbe="[object Error]",dbe="[object Function]",pbe="[object Map]",gbe="[object Number]",mbe="[object Object]",ybe="[object RegExp]",_be="[object Set]",vbe="[object String]",bbe="[object WeakMap]",xbe="[object ArrayBuffer]",wbe="[object DataView]",Sbe="[object Float32Array]",Abe="[object Float64Array]",Ebe="[object Int8Array]",Tbe="[object Int16Array]",Cbe="[object Int32Array]",Pbe="[object Uint8Array]",Ibe="[object Uint8ClampedArray]",Rbe="[object Uint16Array]",kbe="[object Uint32Array]",Ao={};Ao[Sbe]=Ao[Abe]=Ao[Ebe]=Ao[Tbe]=Ao[Cbe]=Ao[Pbe]=Ao[Ibe]=Ao[Rbe]=Ao[kbe]=!0;Ao[lbe]=Ao[cbe]=Ao[xbe]=Ao[ube]=Ao[wbe]=Ao[hbe]=Ao[fbe]=Ao[dbe]=Ao[pbe]=Ao[gbe]=Ao[mbe]=Ao[ybe]=Ao[_be]=Ao[vbe]=Ao[bbe]=!1;function Mbe(e){return Op(e)&&lk(e.length)&&!!Ao[_m(e)]}function Obe(e){return function(t){return e(t)}}var nV=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Mv=nV&&typeof module=="object"&&module&&!module.nodeType&&module,Nbe=Mv&&Mv.exports===nV,pT=Nbe&&Kj.process,QD=function(){try{var e=Mv&&Mv.require&&Mv.require("util").types;return e||pT&&pT.binding&&pT.binding("util")}catch{}}(),eL=QD&&QD.isTypedArray,ck=eL?Obe(eL):Mbe;function R4(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Dbe=Object.prototype,Lbe=Dbe.hasOwnProperty;function Fbe(e,t,r){var n=e[t];(!(Lbe.call(e,t)&&ub(n,r))||r===void 0&&!(t in e))&&sk(e,t,r)}function Bbe(e,t,r,n){var i=!r;r||(r={});for(var o=-1,l=t.length;++o<l;){var s=t[o],f=void 0;f===void 0&&(f=e[s]),i?sk(r,s,f):Fbe(r,s,f)}return r}function zbe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var $be=9007199254740991,Ube=/^(?:0|[1-9]\d*)$/;function uk(e,t){var r=typeof e;return t=t??$be,!!t&&(r=="number"||r!="symbol"&&Ube.test(e))&&e>-1&&e%1==0&&e<t}var jbe=Object.prototype,Vbe=jbe.hasOwnProperty;function iV(e,t){var r=Xc(e),n=!r&&A5(e),i=!r&&!n&&E5(e),o=!r&&!n&&!i&&ck(e),l=r||n||i||o,s=l?zbe(e.length,String):[],f=s.length;for(var p in e)(t||Vbe.call(e,p))&&!(l&&(p=="length"||i&&(p=="offset"||p=="parent")||o&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||uk(p,f)))&&s.push(p);return s}function Hbe(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var qbe=Object.prototype,Wbe=qbe.hasOwnProperty;function Xbe(e){if(!Mu(e))return Hbe(e);var t=ak(e),r=[];for(var n in e)n=="constructor"&&(t||!Wbe.call(e,n))||r.push(n);return r}function oV(e){return H_(e)?iV(e,!0):Xbe(e)}function Kbe(e){return Bbe(e,oV(e))}function Gbe(e,t,r,n,i,o,l){var s=R4(e,r),f=R4(t,r),p=l.get(f);if(p){I4(e,r,p);return}var v=o?o(s,f,r+"",e,t,l):void 0,x=v===void 0;if(x){var S=Xc(f),A=!S&&E5(f),k=!S&&!A&&ck(f);v=f,S||A||k?Xc(s)?v=s:J2e(s)?v=H2e(s):A?(x=!1,v=U2e(f)):k?(x=!1,v=V2e(f)):v=[]:abe(f)||A5(f)?(v=s,A5(s)?v=Kbe(s):(!Mu(s)||ok(s))&&(v=X2e(f))):x=!1}x&&(l.set(f,v),i(v,f,n,o,l),l.delete(f)),I4(e,r,v)}function sV(e,t,r,n,i){e!==t&&Yj(t,function(o,l){if(i||(i=new gf),Mu(o))Gbe(e,t,l,r,sV,n,i);else{var s=n?n(R4(e,l),o,l+"",e,t,i):void 0;s===void 0&&(s=o),I4(e,l,s)}},oV)}function Z3(e){return e}function Ybe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var tL=Math.max;function Zbe(e,t,r){return t=tL(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=tL(n.length-t,0),l=Array(o);++i<o;)l[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(l),Ybe(e,this,s)}}function Jbe(e){return function(){return e}}var Qbe=w5?function(e,t){return w5(e,"toString",{configurable:!0,enumerable:!1,value:Jbe(t),writable:!0})}:Z3,exe=800,txe=16,rxe=Date.now;function nxe(e){var t=0,r=0;return function(){var n=rxe(),i=txe-(n-r);if(r=n,i>0){if(++t>=exe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var ixe=nxe(Qbe);function oxe(e,t){return ixe(Zbe(e,t,Z3),e+"")}function sxe(e,t,r){if(!Mu(r))return!1;var n=typeof t;return(n=="number"?H_(r)&&uk(t,r.length):n=="string"&&t in r)?ub(r[t],e):!1}function axe(e){return oxe(function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,l=i>2?r[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,l&&sxe(r[0],r[1],l)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,o)}return t})}var yc=axe(function(e,t,r){sV(e,t,r)}),hb=function(t){var r=t.zDepth,n=t.radius,i=t.background,o=t.children,l=t.styles,s=l===void 0?{}:l,f=In(yc({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+r+"px "+r*4+"px rgba(0,0,0,.24)",borderRadius:n,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},s),{"zDepth-1":r===1});return Pe.createElement("div",{style:f.wrap},Pe.createElement("div",{style:f.bg}),Pe.createElement("div",{style:f.content},o))};hb.propTypes={background:ar.string,zDepth:ar.oneOf([0,1,2,3,4,5]),radius:ar.number,styles:ar.object};hb.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var gT=function(){return _h.Date.now()},lxe=/\s/;function cxe(e){for(var t=e.length;t--&&lxe.test(e.charAt(t)););return t}var uxe=/^\s+/;function hxe(e){return e&&e.slice(0,cxe(e)+1).replace(uxe,"")}var fxe="[object Symbol]";function J3(e){return typeof e=="symbol"||Op(e)&&_m(e)==fxe}var rL=NaN,dxe=/^[-+]0x[0-9a-f]+$/i,pxe=/^0b[01]+$/i,gxe=/^0o[0-7]+$/i,mxe=parseInt;function nL(e){if(typeof e=="number")return e;if(J3(e))return rL;if(Mu(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Mu(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=hxe(e);var r=pxe.test(e);return r||gxe.test(e)?mxe(e.slice(2),r?2:8):dxe.test(e)?rL:+e}var yxe="Expected a function",_xe=Math.max,vxe=Math.min;function aV(e,t,r){var n,i,o,l,s,f,p=0,v=!1,x=!1,S=!0;if(typeof e!="function")throw new TypeError(yxe);t=nL(t)||0,Mu(r)&&(v=!!r.leading,x="maxWait"in r,o=x?_xe(nL(r.maxWait)||0,t):o,S="trailing"in r?!!r.trailing:S);function A(ee){var Q=n,re=i;return n=i=void 0,p=ee,l=e.apply(re,Q),l}function k(ee){return p=ee,s=setTimeout(N,t),v?A(ee):l}function R(ee){var Q=ee-f,re=ee-p,Se=t-Q;return x?vxe(Se,o-re):Se}function z(ee){var Q=ee-f,re=ee-p;return f===void 0||Q>=t||Q<0||x&&re>=o}function N(){var ee=gT();if(z(ee))return B(ee);s=setTimeout(N,R(ee))}function B(ee){return s=void 0,S&&n?A(ee):(n=i=void 0,l)}function U(){s!==void 0&&clearTimeout(s),p=0,n=f=i=s=void 0}function K(){return s===void 0?l:B(gT())}function ne(){var ee=gT(),Q=z(ee);if(n=arguments,i=this,f=ee,Q){if(s===void 0)return k(f);if(x)return clearTimeout(s),s=setTimeout(N,t),A(f)}return s===void 0&&(s=setTimeout(N,t)),l}return ne.cancel=U,ne.flush=K,ne}var bxe="Expected a function";function xxe(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(bxe);return Mu(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),aV(e,t,{leading:n,maxWait:t,trailing:i})}var wxe=function(t,r,n){var i=n.getBoundingClientRect(),o=i.width,l=i.height,s=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,f=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,p=s-(n.getBoundingClientRect().left+window.pageXOffset),v=f-(n.getBoundingClientRect().top+window.pageYOffset);p<0?p=0:p>o&&(p=o),v<0?v=0:v>l&&(v=l);var x=p/o,S=1-v/l;return{h:r.h,s:x,v:S,a:r.a,source:"hsv"}},Sxe=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function Axe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Exe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Txe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Q3=function(e){Txe(t,e);function t(r){Axe(this,t);var n=Exe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));return n.handleChange=function(i){typeof n.props.onChange=="function"&&n.throttle(n.props.onChange,wxe(i,n.props.hsl,n.container),i)},n.handleMouseDown=function(i){n.handleChange(i);var o=n.getContainerRenderWindow();o.addEventListener("mousemove",n.handleChange),o.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=xxe(function(i,o,l){i(o,l)},50),n}return Sxe(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var n=this.container,i=window;!i.document.contains(n)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var n=this.getContainerRenderWindow();n.removeEventListener("mousemove",this.handleChange),n.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.style||{},o=i.color,l=i.white,s=i.black,f=i.pointer,p=i.circle,v=In({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:o,white:l,black:s,pointer:f,circle:p}},{custom:!!this.props.style});return Pe.createElement("div",{style:v.color,ref:function(S){return n.container=S},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Pe.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),Pe.createElement("div",{style:v.white,className:"saturation-white"},Pe.createElement("div",{style:v.black,className:"saturation-black"}),Pe.createElement("div",{style:v.pointer},this.props.pointer?Pe.createElement(this.props.pointer,this.props):Pe.createElement("div",{style:v.circle}))))}}]),t}(me.PureComponent||me.Component);function Cxe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var Pxe=Jj(Object.keys,Object),Ixe=Object.prototype,Rxe=Ixe.hasOwnProperty;function kxe(e){if(!ak(e))return Pxe(e);var t=[];for(var r in Object(e))Rxe.call(e,r)&&r!="constructor"&&t.push(r);return t}function hk(e){return H_(e)?iV(e):kxe(e)}function Mxe(e,t){return e&&Yj(e,t,hk)}function Oxe(e,t){return function(r,n){if(r==null)return r;if(!H_(r))return e(r,n);for(var i=r.length,o=-1,l=Object(r);++o<i&&n(l[o],o,l)!==!1;);return r}}var lV=Oxe(Mxe);function Nxe(e){return typeof e=="function"?e:Z3}function Dxe(e,t){var r=Xc(e)?Cxe:lV;return r(e,Nxe(t))}function T5(e){"@babel/helpers - typeof";return T5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T5(e)}var Lxe=/^\s+/,Fxe=/\s+$/;function Gr(e,t){if(e=e||"",t=t||{},e instanceof Gr)return e;if(!(this instanceof Gr))return new Gr(e,t);var r=Bxe(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}Gr.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),r,n,i,o,l,s;return r=t.r/255,n=t.g/255,i=t.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),n<=.03928?l=n/12.92:l=Math.pow((n+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),.2126*o+.7152*l+.0722*s},setAlpha:function(t){return this._a=cV(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=oL(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=oL(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.v*100);return this._a==1?"hsv("+r+", "+n+"%, "+i+"%)":"hsva("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=iL(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=iL(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.l*100);return this._a==1?"hsl("+r+", "+n+"%, "+i+"%)":"hsla("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return sL(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return jxe(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Mo(this._r,255)*100)+"%",g:Math.round(Mo(this._g,255)*100)+"%",b:Math.round(Mo(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Mo(this._r,255)*100)+"%, "+Math.round(Mo(this._g,255)*100)+"%, "+Math.round(Mo(this._b,255)*100)+"%)":"rgba("+Math.round(Mo(this._r,255)*100)+"%, "+Math.round(Mo(this._g,255)*100)+"%, "+Math.round(Mo(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:ewe[sL(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var r="#"+aL(this._r,this._g,this._b,this._a),n=r,i=this._gradientType?"GradientType = 1, ":"";if(t){var o=Gr(t);n="#"+aL(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+r+",endColorstr="+n+")"},toString:function(t){var r=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0,o=!r&&i&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return o?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(n=this.toRgbString()),t==="prgb"&&(n=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(n=this.toHexString()),t==="hex3"&&(n=this.toHexString(!0)),t==="hex4"&&(n=this.toHex8String(!0)),t==="hex8"&&(n=this.toHex8String()),t==="name"&&(n=this.toName()),t==="hsl"&&(n=this.toHslString()),t==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return Gr(this.toString())},_applyModification:function(t,r){var n=t.apply(null,[this].concat([].slice.call(r)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(Wxe,arguments)},brighten:function(){return this._applyModification(Xxe,arguments)},darken:function(){return this._applyModification(Kxe,arguments)},desaturate:function(){return this._applyModification(Vxe,arguments)},saturate:function(){return this._applyModification(Hxe,arguments)},greyscale:function(){return this._applyModification(qxe,arguments)},spin:function(){return this._applyModification(Gxe,arguments)},_applyCombination:function(t,r){return t.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(Jxe,arguments)},complement:function(){return this._applyCombination(Yxe,arguments)},monochromatic:function(){return this._applyCombination(Qxe,arguments)},splitcomplement:function(){return this._applyCombination(Zxe,arguments)},triad:function(){return this._applyCombination(lL,[3])},tetrad:function(){return this._applyCombination(lL,[4])}};Gr.fromRatio=function(e,t){if(T5(e)=="object"){var r={};for(var n in e)e.hasOwnProperty(n)&&(n==="a"?r[n]=e[n]:r[n]=ov(e[n]));e=r}return Gr(e,t)};function Bxe(e){var t={r:0,g:0,b:0},r=1,n=null,i=null,o=null,l=!1,s=!1;return typeof e=="string"&&(e=iwe(e)),T5(e)=="object"&&(qf(e.r)&&qf(e.g)&&qf(e.b)?(t=zxe(e.r,e.g,e.b),l=!0,s=String(e.r).substr(-1)==="%"?"prgb":"rgb"):qf(e.h)&&qf(e.s)&&qf(e.v)?(n=ov(e.s),i=ov(e.v),t=Uxe(e.h,n,i),l=!0,s="hsv"):qf(e.h)&&qf(e.s)&&qf(e.l)&&(n=ov(e.s),o=ov(e.l),t=$xe(e.h,n,o),l=!0,s="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=cV(r),{ok:l,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}function zxe(e,t,r){return{r:Mo(e,255)*255,g:Mo(t,255)*255,b:Mo(r,255)*255}}function iL(e,t,r){e=Mo(e,255),t=Mo(t,255),r=Mo(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),o,l,s=(n+i)/2;if(n==i)o=l=0;else{var f=n-i;switch(l=s>.5?f/(2-n-i):f/(n+i),n){case e:o=(t-r)/f+(t<r?6:0);break;case t:o=(r-e)/f+2;break;case r:o=(e-t)/f+4;break}o/=6}return{h:o,s:l,l:s}}function $xe(e,t,r){var n,i,o;e=Mo(e,360),t=Mo(t,100),r=Mo(r,100);function l(p,v,x){return x<0&&(x+=1),x>1&&(x-=1),x<1/6?p+(v-p)*6*x:x<1/2?v:x<2/3?p+(v-p)*(2/3-x)*6:p}if(t===0)n=i=o=r;else{var s=r<.5?r*(1+t):r+t-r*t,f=2*r-s;n=l(f,s,e+1/3),i=l(f,s,e),o=l(f,s,e-1/3)}return{r:n*255,g:i*255,b:o*255}}function oL(e,t,r){e=Mo(e,255),t=Mo(t,255),r=Mo(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),o,l,s=n,f=n-i;if(l=n===0?0:f/n,n==i)o=0;else{switch(n){case e:o=(t-r)/f+(t<r?6:0);break;case t:o=(r-e)/f+2;break;case r:o=(e-t)/f+4;break}o/=6}return{h:o,s:l,v:s}}function Uxe(e,t,r){e=Mo(e,360)*6,t=Mo(t,100),r=Mo(r,100);var n=Math.floor(e),i=e-n,o=r*(1-t),l=r*(1-i*t),s=r*(1-(1-i)*t),f=n%6,p=[r,l,o,o,s,r][f],v=[s,r,r,l,o,o][f],x=[o,o,s,r,r,l][f];return{r:p*255,g:v*255,b:x*255}}function sL(e,t,r,n){var i=[oh(Math.round(e).toString(16)),oh(Math.round(t).toString(16)),oh(Math.round(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function jxe(e,t,r,n,i){var o=[oh(Math.round(e).toString(16)),oh(Math.round(t).toString(16)),oh(Math.round(r).toString(16)),oh(uV(n))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function aL(e,t,r,n){var i=[oh(uV(n)),oh(Math.round(e).toString(16)),oh(Math.round(t).toString(16)),oh(Math.round(r).toString(16))];return i.join("")}Gr.equals=function(e,t){return!e||!t?!1:Gr(e).toRgbString()==Gr(t).toRgbString()};Gr.random=function(){return Gr.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Vxe(e,t){t=t===0?0:t||10;var r=Gr(e).toHsl();return r.s-=t/100,r.s=eA(r.s),Gr(r)}function Hxe(e,t){t=t===0?0:t||10;var r=Gr(e).toHsl();return r.s+=t/100,r.s=eA(r.s),Gr(r)}function qxe(e){return Gr(e).desaturate(100)}function Wxe(e,t){t=t===0?0:t||10;var r=Gr(e).toHsl();return r.l+=t/100,r.l=eA(r.l),Gr(r)}function Xxe(e,t){t=t===0?0:t||10;var r=Gr(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),Gr(r)}function Kxe(e,t){t=t===0?0:t||10;var r=Gr(e).toHsl();return r.l-=t/100,r.l=eA(r.l),Gr(r)}function Gxe(e,t){var r=Gr(e).toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,Gr(r)}function Yxe(e){var t=Gr(e).toHsl();return t.h=(t.h+180)%360,Gr(t)}function lL(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var r=Gr(e).toHsl(),n=[Gr(e)],i=360/t,o=1;o<t;o++)n.push(Gr({h:(r.h+o*i)%360,s:r.s,l:r.l}));return n}function Zxe(e){var t=Gr(e).toHsl(),r=t.h;return[Gr(e),Gr({h:(r+72)%360,s:t.s,l:t.l}),Gr({h:(r+216)%360,s:t.s,l:t.l})]}function Jxe(e,t,r){t=t||6,r=r||30;var n=Gr(e).toHsl(),i=360/r,o=[Gr(e)];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,o.push(Gr(n));return o}function Qxe(e,t){t=t||6;for(var r=Gr(e).toHsv(),n=r.h,i=r.s,o=r.v,l=[],s=1/t;t--;)l.push(Gr({h:n,s:i,v:o})),o=(o+s)%1;return l}Gr.mix=function(e,t,r){r=r===0?0:r||50;var n=Gr(e).toRgb(),i=Gr(t).toRgb(),o=r/100,l={r:(i.r-n.r)*o+n.r,g:(i.g-n.g)*o+n.g,b:(i.b-n.b)*o+n.b,a:(i.a-n.a)*o+n.a};return Gr(l)};Gr.readability=function(e,t){var r=Gr(e),n=Gr(t);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)};Gr.isReadable=function(e,t,r){var n=Gr.readability(e,t),i,o;switch(o=!1,i=owe(r),i.level+i.size){case"AAsmall":case"AAAlarge":o=n>=4.5;break;case"AAlarge":o=n>=3;break;case"AAAsmall":o=n>=7;break}return o};Gr.mostReadable=function(e,t,r){var n=null,i=0,o,l,s,f;r=r||{},l=r.includeFallbackColors,s=r.level,f=r.size;for(var p=0;p<t.length;p++)o=Gr.readability(e,t[p]),o>i&&(i=o,n=Gr(t[p]));return Gr.isReadable(e,n,{level:s,size:f})||!l?n:(r.includeFallbackColors=!1,Gr.mostReadable(e,["#fff","#000"],r))};var k4=Gr.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ewe=Gr.hexNames=twe(k4);function twe(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function cV(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Mo(e,t){rwe(e)&&(e="100%");var r=nwe(e);return e=Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function eA(e){return Math.min(1,Math.max(0,e))}function Lc(e){return parseInt(e,16)}function rwe(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function nwe(e){return typeof e=="string"&&e.indexOf("%")!=-1}function oh(e){return e.length==1?"0"+e:""+e}function ov(e){return e<=1&&(e=e*100+"%"),e}function uV(e){return Math.round(parseFloat(e)*255).toString(16)}function cL(e){return Lc(e)/255}var Zu=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",r="(?:"+t+")|(?:"+e+")",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function qf(e){return!!Zu.CSS_UNIT.exec(e)}function iwe(e){e=e.replace(Lxe,"").replace(Fxe,"").toLowerCase();var t=!1;if(k4[e])e=k4[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=Zu.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=Zu.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Zu.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=Zu.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Zu.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=Zu.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Zu.hex8.exec(e))?{r:Lc(r[1]),g:Lc(r[2]),b:Lc(r[3]),a:cL(r[4]),format:t?"name":"hex8"}:(r=Zu.hex6.exec(e))?{r:Lc(r[1]),g:Lc(r[2]),b:Lc(r[3]),format:t?"name":"hex"}:(r=Zu.hex4.exec(e))?{r:Lc(r[1]+""+r[1]),g:Lc(r[2]+""+r[2]),b:Lc(r[3]+""+r[3]),a:cL(r[4]+""+r[4]),format:t?"name":"hex8"}:(r=Zu.hex3.exec(e))?{r:Lc(r[1]+""+r[1]),g:Lc(r[2]+""+r[2]),b:Lc(r[3]+""+r[3]),format:t?"name":"hex"}:!1}function owe(e){var t,r;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:t,size:r}}var uL=function(t){var r=["r","g","b","a","h","s","l","v"],n=0,i=0;return Dxe(r,function(o){if(t[o]&&(n+=1,isNaN(t[o])||(i+=1),o==="s"||o==="l")){var l=/^\d+%$/;l.test(t[o])&&(i+=1)}}),n===i?t:!1},sv=function(t,r){var n=t.hex?Gr(t.hex):Gr(t),i=n.toHsl(),o=n.toHsv(),l=n.toRgb(),s=n.toHex();i.s===0&&(i.h=r||0,o.h=r||0);var f=s==="000000"&&l.a===0;return{hsl:i,hex:f?"transparent":"#"+s,rgb:l,hsv:o,oldHue:t.h||r||i.h,source:t.source}},Up=function(t){if(t==="transparent")return!0;var r=String(t).charAt(0)==="#"?1:0;return t.length!==4+r&&t.length<7+r&&Gr(t).isValid()},fk=function(t){if(!t)return"#fff";var r=sv(t);if(r.hex==="transparent")return"rgba(0,0,0,0.4)";var n=(r.rgb.r*299+r.rgb.g*587+r.rgb.b*114)/1e3;return n>=128?"#000":"#fff"},mT=function(t,r){var n=t.replace("","");return Gr(r+" ("+n+")")._ok},L1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},swe=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function awe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lwe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function cwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _c=function(t){var r=function(n){cwe(i,n);function i(o){awe(this,i);var l=lwe(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return l.handleChange=function(s,f){var p=uL(s);if(p){var v=sv(s,s.h||l.state.oldHue);l.setState(v),l.props.onChangeComplete&&l.debounce(l.props.onChangeComplete,v,f),l.props.onChange&&l.props.onChange(v,f)}},l.handleSwatchHover=function(s,f){var p=uL(s);if(p){var v=sv(s,s.h||l.state.oldHue);l.props.onSwatchHover&&l.props.onSwatchHover(v,f)}},l.state=L1({},sv(o.color,0)),l.debounce=aV(function(s,f,p){s(f,p)},100),l}return swe(i,[{key:"render",value:function(){var l={};return this.props.onSwatchHover&&(l.onSwatchHover=this.handleSwatchHover),Pe.createElement(t,L1({},this.props,this.state,{onChange:this.handleChange},l))}}],[{key:"getDerivedStateFromProps",value:function(l,s){return L1({},sv(l.color,s.oldHue))}}]),i}(me.PureComponent||me.Component);return r.propTypes=L1({},t.propTypes),r.defaultProps=L1({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),r},uwe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hwe=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function fwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hL(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function dwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var pwe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){dwe(i,n);function i(){var o,l,s,f;fwe(this,i);for(var p=arguments.length,v=Array(p),x=0;x<p;x++)v[x]=arguments[x];return f=(l=(s=hL(this,(o=i.__proto__||Object.getPrototypeOf(i)).call.apply(o,[this].concat(v))),s),s.state={focus:!1},s.handleFocus=function(){return s.setState({focus:!0})},s.handleBlur=function(){return s.setState({focus:!1})},l),hL(s,f)}return hwe(i,[{key:"render",value:function(){return Pe.createElement(r,{onFocus:this.handleFocus,onBlur:this.handleBlur},Pe.createElement(t,uwe({},this.props,this.state)))}}]),i}(Pe.Component)},fL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gwe=13,mwe=function(t){var r=t.color,n=t.style,i=t.onClick,o=i===void 0?function(){}:i,l=t.onHover,s=t.title,f=s===void 0?r:s,p=t.children,v=t.focus,x=t.focusStyle,S=x===void 0?{}:x,A=r==="transparent",k=In({default:{swatch:fL({background:r,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,v?S:{})}}),R=function(K){return o(r,K)},z=function(K){return K.keyCode===gwe&&o(r,K)},N=function(K){return l(r,K)},B={};return l&&(B.onMouseOver=N),Pe.createElement("div",fL({style:k.swatch,onClick:R,title:f,tabIndex:0,onKeyDown:z},B),p,A&&Pe.createElement(j_,{borderRadius:k.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const xm=pwe(mwe);var ywe=function(t){var r=t.direction,n=In({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return Pe.createElement("div",{style:n.picker})},_we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hV=function(t){var r=t.rgb,n=t.hsl,i=t.width,o=t.height,l=t.onChange,s=t.direction,f=t.style,p=t.renderers,v=t.pointer,x=t.className,S=x===void 0?"":x,A=In({default:{picker:{position:"relative",width:i,height:o},alpha:{radius:"2px",style:f}}});return Pe.createElement("div",{style:A.picker,className:"alpha-picker "+S},Pe.createElement(ik,_we({},A.alpha,{rgb:r,hsl:n,pointer:v,renderers:p,onChange:l,direction:s})))};hV.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:ywe};_c(hV);function fV(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var vwe="__lodash_hash_undefined__";function bwe(e){return this.__data__.set(e,vwe),this}function xwe(e){return this.__data__.has(e)}function C5(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new xd;++t<r;)this.add(e[t])}C5.prototype.add=C5.prototype.push=bwe;C5.prototype.has=xwe;function wwe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function Swe(e,t){return e.has(t)}var Awe=1,Ewe=2;function dV(e,t,r,n,i,o){var l=r&Awe,s=e.length,f=t.length;if(s!=f&&!(l&&f>s))return!1;var p=o.get(e),v=o.get(t);if(p&&v)return p==t&&v==e;var x=-1,S=!0,A=r&Ewe?new C5:void 0;for(o.set(e,t),o.set(t,e);++x<s;){var k=e[x],R=t[x];if(n)var z=l?n(R,k,x,t,e,o):n(k,R,x,e,t,o);if(z!==void 0){if(z)continue;S=!1;break}if(A){if(!wwe(t,function(N,B){if(!Swe(A,B)&&(k===N||i(k,N,r,n,o)))return A.push(B)})){S=!1;break}}else if(!(k===R||i(k,R,r,n,o))){S=!1;break}}return o.delete(e),o.delete(t),S}function Twe(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}function Cwe(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Pwe=1,Iwe=2,Rwe="[object Boolean]",kwe="[object Date]",Mwe="[object Error]",Owe="[object Map]",Nwe="[object Number]",Dwe="[object RegExp]",Lwe="[object Set]",Fwe="[object String]",Bwe="[object Symbol]",zwe="[object ArrayBuffer]",$we="[object DataView]",dL=Mp?Mp.prototype:void 0,yT=dL?dL.valueOf:void 0;function Uwe(e,t,r,n,i,o,l){switch(r){case $we:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case zwe:return!(e.byteLength!=t.byteLength||!o(new S5(e),new S5(t)));case Rwe:case kwe:case Nwe:return ub(+e,+t);case Mwe:return e.name==t.name&&e.message==t.message;case Dwe:case Fwe:return e==t+"";case Owe:var s=Twe;case Lwe:var f=n&Pwe;if(s||(s=Cwe),e.size!=t.size&&!f)return!1;var p=l.get(e);if(p)return p==t;n|=Iwe,l.set(e,t);var v=dV(s(e),s(t),n,i,o,l);return l.delete(e),v;case Bwe:if(yT)return yT.call(e)==yT.call(t)}return!1}function jwe(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function Vwe(e,t,r){var n=t(e);return Xc(e)?n:jwe(n,r(e))}function Hwe(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var l=e[r];t(l,r,e)&&(o[i++]=l)}return o}function qwe(){return[]}var Wwe=Object.prototype,Xwe=Wwe.propertyIsEnumerable,pL=Object.getOwnPropertySymbols,Kwe=pL?function(e){return e==null?[]:(e=Object(e),Hwe(pL(e),function(t){return Xwe.call(e,t)}))}:qwe;function gL(e){return Vwe(e,hk,Kwe)}var Gwe=1,Ywe=Object.prototype,Zwe=Ywe.hasOwnProperty;function Jwe(e,t,r,n,i,o){var l=r&Gwe,s=gL(e),f=s.length,p=gL(t),v=p.length;if(f!=v&&!l)return!1;for(var x=f;x--;){var S=s[x];if(!(l?S in t:Zwe.call(t,S)))return!1}var A=o.get(e),k=o.get(t);if(A&&k)return A==t&&k==e;var R=!0;o.set(e,t),o.set(t,e);for(var z=l;++x<f;){S=s[x];var N=e[S],B=t[S];if(n)var U=l?n(B,N,S,t,e,o):n(N,B,S,e,t,o);if(!(U===void 0?N===B||i(N,B,r,n,o):U)){R=!1;break}z||(z=S=="constructor")}if(R&&!z){var K=e.constructor,ne=t.constructor;K!=ne&&"constructor"in e&&"constructor"in t&&!(typeof K=="function"&&K instanceof K&&typeof ne=="function"&&ne instanceof ne)&&(R=!1)}return o.delete(e),o.delete(t),R}var M4=bm(_h,"DataView"),O4=bm(_h,"Promise"),N4=bm(_h,"Set"),D4=bm(_h,"WeakMap"),mL="[object Map]",Qwe="[object Object]",yL="[object Promise]",_L="[object Set]",vL="[object WeakMap]",bL="[object DataView]",e5e=vm(M4),t5e=vm(y2),r5e=vm(O4),n5e=vm(N4),i5e=vm(D4),Jd=_m;(M4&&Jd(new M4(new ArrayBuffer(1)))!=bL||y2&&Jd(new y2)!=mL||O4&&Jd(O4.resolve())!=yL||N4&&Jd(new N4)!=_L||D4&&Jd(new D4)!=vL)&&(Jd=function(e){var t=_m(e),r=t==Qwe?e.constructor:void 0,n=r?vm(r):"";if(n)switch(n){case e5e:return bL;case t5e:return mL;case r5e:return yL;case n5e:return _L;case i5e:return vL}return t});var o5e=1,xL="[object Arguments]",wL="[object Array]",Ex="[object Object]",s5e=Object.prototype,SL=s5e.hasOwnProperty;function a5e(e,t,r,n,i,o){var l=Xc(e),s=Xc(t),f=l?wL:Jd(e),p=s?wL:Jd(t);f=f==xL?Ex:f,p=p==xL?Ex:p;var v=f==Ex,x=p==Ex,S=f==p;if(S&&E5(e)){if(!E5(t))return!1;l=!0,v=!1}if(S&&!v)return o||(o=new gf),l||ck(e)?dV(e,t,r,n,i,o):Uwe(e,t,f,r,n,i,o);if(!(r&o5e)){var A=v&&SL.call(e,"__wrapped__"),k=x&&SL.call(t,"__wrapped__");if(A||k){var R=A?e.value():e,z=k?t.value():t;return o||(o=new gf),i(R,z,r,n,o)}}return S?(o||(o=new gf),Jwe(e,t,r,n,i,o)):!1}function dk(e,t,r,n,i){return e===t?!0:e==null||t==null||!Op(e)&&!Op(t)?e!==e&&t!==t:a5e(e,t,r,n,dk,i)}var l5e=1,c5e=2;function u5e(e,t,r,n){var i=r.length,o=i;if(e==null)return!o;for(e=Object(e);i--;){var l=r[i];if(l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<o;){l=r[i];var s=l[0],f=e[s],p=l[1];if(l[2]){if(f===void 0&&!(s in e))return!1}else{var v=new gf,x;if(!(x===void 0?dk(p,f,l5e|c5e,n,v):x))return!1}}return!0}function pV(e){return e===e&&!Mu(e)}function h5e(e){for(var t=hk(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,pV(i)]}return t}function gV(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function f5e(e){var t=h5e(e);return t.length==1&&t[0][2]?gV(t[0][0],t[0][1]):function(r){return r===e||u5e(r,e,t)}}var d5e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,p5e=/^\w*$/;function pk(e,t){if(Xc(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||J3(e)?!0:p5e.test(e)||!d5e.test(e)||t!=null&&e in Object(t)}var g5e="Expected a function";function gk(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(g5e);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var l=e.apply(this,n);return r.cache=o.set(i,l)||o,l};return r.cache=new(gk.Cache||xd),r}gk.Cache=xd;var m5e=500;function y5e(e){var t=gk(e,function(n){return r.size===m5e&&r.clear(),n}),r=t.cache;return t}var _5e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,v5e=/\\(\\)?/g,b5e=y5e(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(_5e,function(r,n,i,o){t.push(i?o.replace(v5e,"$1"):n||r)}),t}),x5e=1/0,AL=Mp?Mp.prototype:void 0,EL=AL?AL.toString:void 0;function mV(e){if(typeof e=="string")return e;if(Xc(e))return fV(e,mV)+"";if(J3(e))return EL?EL.call(e):"";var t=e+"";return t=="0"&&1/e==-x5e?"-0":t}function w5e(e){return e==null?"":mV(e)}function yV(e,t){return Xc(e)?e:pk(e,t)?[e]:b5e(w5e(e))}var S5e=1/0;function tA(e){if(typeof e=="string"||J3(e))return e;var t=e+"";return t=="0"&&1/e==-S5e?"-0":t}function _V(e,t){t=yV(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[tA(t[r++])];return r&&r==n?e:void 0}function A5e(e,t,r){var n=e==null?void 0:_V(e,t);return n===void 0?r:n}function E5e(e,t){return e!=null&&t in Object(e)}function T5e(e,t,r){t=yV(t,e);for(var n=-1,i=t.length,o=!1;++n<i;){var l=tA(t[n]);if(!(o=e!=null&&r(e,l)))break;e=e[l]}return o||++n!=i?o:(i=e==null?0:e.length,!!i&&lk(i)&&uk(l,i)&&(Xc(e)||A5(e)))}function C5e(e,t){return e!=null&&T5e(e,t,E5e)}var P5e=1,I5e=2;function R5e(e,t){return pk(e)&&pV(t)?gV(tA(e),t):function(r){var n=A5e(r,e);return n===void 0&&n===t?C5e(r,e):dk(t,n,P5e|I5e)}}function k5e(e){return function(t){return t==null?void 0:t[e]}}function M5e(e){return function(t){return _V(t,e)}}function O5e(e){return pk(e)?k5e(tA(e)):M5e(e)}function N5e(e){return typeof e=="function"?e:e==null?Z3:typeof e=="object"?Xc(e)?R5e(e[0],e[1]):f5e(e):O5e(e)}function D5e(e,t){var r=-1,n=H_(e)?Array(e.length):[];return lV(e,function(i,o,l){n[++r]=t(i,o,l)}),n}function wm(e,t){var r=Xc(e)?fV:D5e;return r(e,N5e(t))}var L5e=function(t){var r=t.colors,n=t.onClick,i=t.onSwatchHover,o=In({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return Pe.createElement("div",{style:o.swatches},wm(r,function(l){return Pe.createElement(xm,{key:l,color:l,style:o.swatch,onClick:n,onHover:i,focusStyle:{boxShadow:"0 0 4px "+l}})}),Pe.createElement("div",{style:o.clear}))},mk=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.hex,o=t.colors,l=t.width,s=t.triangle,f=t.styles,p=f===void 0?{}:f,v=t.className,x=v===void 0?"":v,S=i==="transparent",A=function(z,N){Up(z)&&r({hex:z,source:"hex"},N)},k=In(yc({default:{card:{width:l,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:fk(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},p),{"hide-triangle":s==="hide"});return Pe.createElement("div",{style:k.card,className:"block-picker "+x},Pe.createElement("div",{style:k.triangle}),Pe.createElement("div",{style:k.head},S&&Pe.createElement(j_,{borderRadius:"6px 6px 0 0"}),Pe.createElement("div",{style:k.label},i)),Pe.createElement("div",{style:k.body},Pe.createElement(L5e,{colors:o,onClick:A,onSwatchHover:n}),Pe.createElement(oi,{style:{input:k.input},value:i,onChange:A})))};mk.propTypes={width:ar.oneOfType([ar.string,ar.number]),colors:ar.arrayOf(ar.string),triangle:ar.oneOf(["top","hide"]),styles:ar.object};mk.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};_c(mk);var N0={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},D0={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},L0={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},F0={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},B0={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},z0={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},$0={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},U0={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},j0={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},av={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},V0={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},H0={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},q0={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},W0={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},X0={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},K0={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},G0={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},Y0={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},vV=function(t){var r=t.color,n=t.onClick,i=t.onSwatchHover,o=t.hover,l=t.active,s=t.circleSize,f=t.circleSpacing,p=In({default:{swatch:{width:s,height:s,marginRight:f,marginBottom:f,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(s/2+1)+"px "+r,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+r}}},{hover:o,active:l});return Pe.createElement("div",{style:p.swatch},Pe.createElement(xm,{style:p.Swatch,color:r,onClick:n,onHover:i,focusStyle:{boxShadow:p.Swatch.boxShadow+", 0 0 5px "+r}}))};vV.defaultProps={circleSize:28,circleSpacing:14};const F5e=nk(vV);var yk=function(t){var r=t.width,n=t.onChange,i=t.onSwatchHover,o=t.colors,l=t.hex,s=t.circleSize,f=t.styles,p=f===void 0?{}:f,v=t.circleSpacing,x=t.className,S=x===void 0?"":x,A=In(yc({default:{card:{width:r,display:"flex",flexWrap:"wrap",marginRight:-v,marginBottom:-v}}},p)),k=function(z,N){return n({hex:z,source:"hex"},N)};return Pe.createElement("div",{style:A.card,className:"circle-picker "+S},wm(o,function(R){return Pe.createElement(F5e,{key:R,color:R,onClick:k,onSwatchHover:i,active:l===R.toLowerCase(),circleSize:s,circleSpacing:v})}))};yk.propTypes={width:ar.oneOfType([ar.string,ar.number]),circleSize:ar.number,circleSpacing:ar.number,styles:ar.object};yk.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[N0[500],D0[500],L0[500],F0[500],B0[500],z0[500],$0[500],U0[500],j0[500],av[500],V0[500],H0[500],q0[500],W0[500],X0[500],K0[500],G0[500],Y0[500]],styles:{}};_c(yk);function TL(e){return e===void 0}var bV={};Object.defineProperty(bV,"__esModule",{value:!0});var CL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B5e=me,PL=z5e(B5e);function z5e(e){return e&&e.__esModule?e:{default:e}}function $5e(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var Tx=24,U5e=bV.default=function(e){var t=e.fill,r=t===void 0?"currentColor":t,n=e.width,i=n===void 0?Tx:n,o=e.height,l=o===void 0?Tx:o,s=e.style,f=s===void 0?{}:s,p=$5e(e,["fill","width","height","style"]);return PL.default.createElement("svg",CL({viewBox:"0 0 "+Tx+" "+Tx,style:CL({fill:r,width:i,height:l},f)},p),PL.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},j5e=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function V5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H5e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function q5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var xV=function(e){q5e(t,e);function t(r){V5e(this,t);var n=H5e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){n.state.view==="hex"?n.setState({view:"rgb"}):n.state.view==="rgb"?n.setState({view:"hsl"}):n.state.view==="hsl"&&(n.props.hsl.a===1?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(i,o){i.hex?Up(i.hex)&&n.props.onChange({hex:i.hex,source:"hex"},o):i.r||i.g||i.b?n.props.onChange({r:i.r||n.props.rgb.r,g:i.g||n.props.rgb.g,b:i.b||n.props.rgb.b,source:"rgb"},o):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},o)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),n.props.onChange({h:i.h||n.props.hsl.h,s:Number(TL(i.s)?n.props.hsl.s:i.s),l:Number(TL(i.l)?n.props.hsl.l:i.l),source:"hsl"},o))},n.showHighlight=function(i){i.currentTarget.style.background="#eee"},n.hideHighlight=function(i){i.currentTarget.style.background="transparent"},r.hsl.a!==1&&r.view==="hex"?n.state={view:"rgb"}:n.state={view:r.view},n}return j5e(t,[{key:"render",value:function(){var n=this,i=In({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),o=void 0;return this.state.view==="hex"?o=Pe.createElement("div",{style:i.fields,className:"flexbox-fix"},Pe.createElement("div",{style:i.field},Pe.createElement(oi,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?o=Pe.createElement("div",{style:i.fields,className:"flexbox-fix"},Pe.createElement("div",{style:i.field},Pe.createElement(oi,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),Pe.createElement("div",{style:i.field},Pe.createElement(oi,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),Pe.createElement("div",{style:i.field},Pe.createElement(oi,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),Pe.createElement("div",{style:i.alpha},Pe.createElement(oi,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(o=Pe.createElement("div",{style:i.fields,className:"flexbox-fix"},Pe.createElement("div",{style:i.field},Pe.createElement(oi,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),Pe.createElement("div",{style:i.field},Pe.createElement(oi,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),Pe.createElement("div",{style:i.field},Pe.createElement(oi,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),Pe.createElement("div",{style:i.alpha},Pe.createElement(oi,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),Pe.createElement("div",{style:i.wrap,className:"flexbox-fix"},o,Pe.createElement("div",{style:i.toggle},Pe.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(s){return n.icon=s}},Pe.createElement(U5e,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),t}(Pe.Component);xV.defaultProps={view:"hex"};var IL=function(){var t=In({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return Pe.createElement("div",{style:t.picker})},W5e=function(){var t=In({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return Pe.createElement("div",{style:t.picker})},_k=function(t){var r=t.width,n=t.onChange,i=t.disableAlpha,o=t.rgb,l=t.hsl,s=t.hsv,f=t.hex,p=t.renderers,v=t.styles,x=v===void 0?{}:v,S=t.className,A=S===void 0?"":S,k=t.defaultView,R=In(yc({default:{picker:{width:r,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},x),{disableAlpha:i});return Pe.createElement("div",{style:R.picker,className:"chrome-picker "+A},Pe.createElement("div",{style:R.saturation},Pe.createElement(Q3,{style:R.Saturation,hsl:l,hsv:s,pointer:W5e,onChange:n})),Pe.createElement("div",{style:R.body},Pe.createElement("div",{style:R.controls,className:"flexbox-fix"},Pe.createElement("div",{style:R.color},Pe.createElement("div",{style:R.swatch},Pe.createElement("div",{style:R.active}),Pe.createElement(j_,{renderers:p}))),Pe.createElement("div",{style:R.toggles},Pe.createElement("div",{style:R.hue},Pe.createElement(V_,{style:R.Hue,hsl:l,pointer:IL,onChange:n})),Pe.createElement("div",{style:R.alpha},Pe.createElement(ik,{style:R.Alpha,rgb:o,hsl:l,pointer:IL,renderers:p,onChange:n})))),Pe.createElement(xV,{rgb:o,hsl:l,hex:f,view:k,onChange:n,disableAlpha:i})))};_k.propTypes={width:ar.oneOfType([ar.string,ar.number]),disableAlpha:ar.bool,styles:ar.object,defaultView:ar.oneOf(["hex","rgb","hsl"])};_k.defaultProps={width:225,disableAlpha:!1,styles:{}};_c(_k);var X5e=function(t){var r=t.color,n=t.onClick,i=n===void 0?function(){}:n,o=t.onSwatchHover,l=t.active,s=In({default:{color:{background:r,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:fk(r),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:l,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return Pe.createElement(xm,{style:s.color,color:r,onClick:i,onHover:o,focusStyle:{boxShadow:"0 0 4px "+r}},Pe.createElement("div",{style:s.dot}))},K5e=function(t){var r=t.hex,n=t.rgb,i=t.onChange,o=In({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:r},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),l=function(f,p){f.r||f.g||f.b?i({r:f.r||n.r,g:f.g||n.g,b:f.b||n.b,source:"rgb"},p):i({hex:f.hex,source:"hex"},p)};return Pe.createElement("div",{style:o.fields,className:"flexbox-fix"},Pe.createElement("div",{style:o.active}),Pe.createElement(oi,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"hex",value:r,onChange:l}),Pe.createElement(oi,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:n.r,onChange:l}),Pe.createElement(oi,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:n.g,onChange:l}),Pe.createElement(oi,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:n.b,onChange:l}))},vk=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.colors,o=t.hex,l=t.rgb,s=t.styles,f=s===void 0?{}:s,p=t.className,v=p===void 0?"":p,x=In(yc({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},f)),S=function(k,R){k.hex?Up(k.hex)&&r({hex:k.hex,source:"hex"},R):r(k,R)};return Pe.createElement(hb,{style:x.Compact,styles:f},Pe.createElement("div",{style:x.compact,className:"compact-picker "+v},Pe.createElement("div",null,wm(i,function(A){return Pe.createElement(X5e,{key:A,color:A,active:A.toLowerCase()===o,onClick:S,onSwatchHover:n})}),Pe.createElement("div",{style:x.clear})),Pe.createElement(K5e,{hex:o,rgb:l,onChange:S})))};vk.propTypes={colors:ar.arrayOf(ar.string),styles:ar.object};vk.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};_c(vk);var G5e=function(t){var r=t.hover,n=t.color,i=t.onClick,o=t.onSwatchHover,l={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},s=In({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:l}},{hover:r});return Pe.createElement("div",{style:s.swatch},Pe.createElement(xm,{color:n,onClick:i,onHover:o,focusStyle:l}))};const Y5e=nk(G5e);var bk=function(t){var r=t.width,n=t.colors,i=t.onChange,o=t.onSwatchHover,l=t.triangle,s=t.styles,f=s===void 0?{}:s,p=t.className,v=p===void 0?"":p,x=In(yc({default:{card:{width:r,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},f),{"hide-triangle":l==="hide","top-left-triangle":l==="top-left","top-right-triangle":l==="top-right","bottom-left-triangle":l==="bottom-left","bottom-right-triangle":l==="bottom-right"}),S=function(k,R){return i({hex:k,source:"hex"},R)};return Pe.createElement("div",{style:x.card,className:"github-picker "+v},Pe.createElement("div",{style:x.triangleShadow}),Pe.createElement("div",{style:x.triangle}),wm(n,function(A){return Pe.createElement(Y5e,{color:A,key:A,onClick:S,onSwatchHover:o})}))};bk.propTypes={width:ar.oneOfType([ar.string,ar.number]),colors:ar.arrayOf(ar.string),triangle:ar.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:ar.object};bk.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};_c(bk);var Z5e=function(t){var r=t.direction,n=In({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return Pe.createElement("div",{style:n.picker})},J5e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xk=function(t){var r=t.width,n=t.height,i=t.onChange,o=t.hsl,l=t.direction,s=t.pointer,f=t.styles,p=f===void 0?{}:f,v=t.className,x=v===void 0?"":v,S=In(yc({default:{picker:{position:"relative",width:r,height:n},hue:{radius:"2px"}}},p)),A=function(R){return i({a:1,h:R.h,l:.5,s:1})};return Pe.createElement("div",{style:S.picker,className:"hue-picker "+x},Pe.createElement(V_,J5e({},S.hue,{hsl:o,pointer:s,onChange:A,direction:l})))};xk.propTypes={styles:ar.object};xk.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:Z5e,styles:{}};_c(xk);var Q5e=function(t){var r=t.onChange,n=t.hex,i=t.rgb,o=t.styles,l=o===void 0?{}:o,s=t.className,f=s===void 0?"":s,p=In(yc({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},l)),v=function(S,A){S.hex?Up(S.hex)&&r({hex:S.hex,source:"hex"},A):(S.r||S.g||S.b)&&r({r:S.r||i.r,g:S.g||i.g,b:S.b||i.b,source:"rgb"},A)};return Pe.createElement(hb,{styles:l},Pe.createElement("div",{style:p.material,className:"material-picker "+f},Pe.createElement(oi,{style:{wrap:p.HEXwrap,input:p.HEXinput,label:p.HEXlabel},label:"hex",value:n,onChange:v}),Pe.createElement("div",{style:p.split,className:"flexbox-fix"},Pe.createElement("div",{style:p.third},Pe.createElement(oi,{style:{wrap:p.RGBwrap,input:p.RGBinput,label:p.RGBlabel},label:"r",value:i.r,onChange:v})),Pe.createElement("div",{style:p.third},Pe.createElement(oi,{style:{wrap:p.RGBwrap,input:p.RGBinput,label:p.RGBlabel},label:"g",value:i.g,onChange:v})),Pe.createElement("div",{style:p.third},Pe.createElement(oi,{style:{wrap:p.RGBwrap,input:p.RGBinput,label:p.RGBlabel},label:"b",value:i.b,onChange:v})))))};_c(Q5e);var eSe=function(t){var r=t.onChange,n=t.rgb,i=t.hsv,o=t.hex,l=In({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),s=function(p,v){p["#"]?Up(p["#"])&&r({hex:p["#"],source:"hex"},v):p.r||p.g||p.b?r({r:p.r||n.r,g:p.g||n.g,b:p.b||n.b,source:"rgb"},v):(p.h||p.s||p.v)&&r({h:p.h||i.h,s:p.s||i.s,v:p.v||i.v,source:"hsv"},v)};return Pe.createElement("div",{style:l.fields},Pe.createElement(oi,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"h",value:Math.round(i.h),onChange:s}),Pe.createElement(oi,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:s}),Pe.createElement(oi,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:s}),Pe.createElement("div",{style:l.divider}),Pe.createElement(oi,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"r",value:n.r,onChange:s}),Pe.createElement(oi,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"g",value:n.g,onChange:s}),Pe.createElement(oi,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"b",value:n.b,onChange:s}),Pe.createElement("div",{style:l.divider}),Pe.createElement(oi,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:"#",value:o.replace("#",""),onChange:s}),Pe.createElement("div",{style:l.fieldSymbols},Pe.createElement("div",{style:l.symbol},""),Pe.createElement("div",{style:l.symbol},"%"),Pe.createElement("div",{style:l.symbol},"%")))},tSe=function(t){var r=t.hsl,n=In({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":r.l>.5});return Pe.createElement("div",{style:n.picker})},rSe=function(){var t=In({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return Pe.createElement("div",{style:t.pointer},Pe.createElement("div",{style:t.left},Pe.createElement("div",{style:t.leftInside})),Pe.createElement("div",{style:t.right},Pe.createElement("div",{style:t.rightInside})))},RL=function(t){var r=t.onClick,n=t.label,i=t.children,o=t.active,l=In({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:o});return Pe.createElement("div",{style:l.button,onClick:r},n||i)},nSe=function(t){var r=t.rgb,n=t.currentColor,i=In({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+r.r+","+r.g+", "+r.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return Pe.createElement("div",null,Pe.createElement("div",{style:i.label},"new"),Pe.createElement("div",{style:i.swatches},Pe.createElement("div",{style:i.new}),Pe.createElement("div",{style:i.current})),Pe.createElement("div",{style:i.label},"current"))},iSe=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function oSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sSe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function aSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var wk=function(e){aSe(t,e);function t(r){oSe(this,t);var n=sSe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:r.hex},n}return iSe(t,[{key:"render",value:function(){var n=this.props,i=n.styles,o=i===void 0?{}:i,l=n.className,s=l===void 0?"":l,f=In(yc({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},o));return Pe.createElement("div",{style:f.picker,className:"photoshop-picker "+s},Pe.createElement("div",{style:f.head},this.props.header),Pe.createElement("div",{style:f.body,className:"flexbox-fix"},Pe.createElement("div",{style:f.saturation},Pe.createElement(Q3,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:tSe,onChange:this.props.onChange})),Pe.createElement("div",{style:f.hue},Pe.createElement(V_,{direction:"vertical",hsl:this.props.hsl,pointer:rSe,onChange:this.props.onChange})),Pe.createElement("div",{style:f.controls},Pe.createElement("div",{style:f.top,className:"flexbox-fix"},Pe.createElement("div",{style:f.previews},Pe.createElement(nSe,{rgb:this.props.rgb,currentColor:this.state.currentColor})),Pe.createElement("div",{style:f.actions},Pe.createElement(RL,{label:"OK",onClick:this.props.onAccept,active:!0}),Pe.createElement(RL,{label:"Cancel",onClick:this.props.onCancel}),Pe.createElement(eSe,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(Pe.Component);wk.propTypes={header:ar.string,styles:ar.object};wk.defaultProps={header:"Color Picker",styles:{}};_c(wk);var lSe=function(t){var r=t.onChange,n=t.rgb,i=t.hsl,o=t.hex,l=t.disableAlpha,s=In({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:l}),f=function(v,x){v.hex?Up(v.hex)&&r({hex:v.hex,source:"hex"},x):v.r||v.g||v.b?r({r:v.r||n.r,g:v.g||n.g,b:v.b||n.b,a:n.a,source:"rgb"},x):v.a&&(v.a<0?v.a=0:v.a>100&&(v.a=100),v.a/=100,r({h:i.h,s:i.s,l:i.l,a:v.a,source:"rgb"},x))};return Pe.createElement("div",{style:s.fields,className:"flexbox-fix"},Pe.createElement("div",{style:s.double},Pe.createElement(oi,{style:{input:s.input,label:s.label},label:"hex",value:o.replace("#",""),onChange:f})),Pe.createElement("div",{style:s.single},Pe.createElement(oi,{style:{input:s.input,label:s.label},label:"r",value:n.r,onChange:f,dragLabel:"true",dragMax:"255"})),Pe.createElement("div",{style:s.single},Pe.createElement(oi,{style:{input:s.input,label:s.label},label:"g",value:n.g,onChange:f,dragLabel:"true",dragMax:"255"})),Pe.createElement("div",{style:s.single},Pe.createElement(oi,{style:{input:s.input,label:s.label},label:"b",value:n.b,onChange:f,dragLabel:"true",dragMax:"255"})),Pe.createElement("div",{style:s.alpha},Pe.createElement(oi,{style:{input:s.input,label:s.label},label:"a",value:Math.round(n.a*100),onChange:f,dragLabel:"true",dragMax:"100"})))},cSe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wV=function(t){var r=t.colors,n=t.onClick,i=n===void 0?function(){}:n,o=t.onSwatchHover,l=In({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!r||!r.length}),s=function(p,v){i({hex:p,source:"hex"},v)};return Pe.createElement("div",{style:l.colors,className:"flexbox-fix"},r.map(function(f){var p=typeof f=="string"?{color:f}:f,v=""+p.color+(p.title||"");return Pe.createElement("div",{key:v,style:l.swatchWrap},Pe.createElement(xm,cSe({},p,{style:l.swatch,onClick:s,onHover:o,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+p.color}})))}))};wV.propTypes={colors:ar.arrayOf(ar.oneOfType([ar.string,ar.shape({color:ar.string,title:ar.string})])).isRequired};var uSe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sk=function(t){var r=t.width,n=t.rgb,i=t.hex,o=t.hsv,l=t.hsl,s=t.onChange,f=t.onSwatchHover,p=t.disableAlpha,v=t.presetColors,x=t.renderers,S=t.styles,A=S===void 0?{}:S,k=t.className,R=k===void 0?"":k,z=In(yc({default:uSe({picker:{width:r,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},A),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},A),{disableAlpha:p});return Pe.createElement("div",{style:z.picker,className:"sketch-picker "+R},Pe.createElement("div",{style:z.saturation},Pe.createElement(Q3,{style:z.Saturation,hsl:l,hsv:o,onChange:s})),Pe.createElement("div",{style:z.controls,className:"flexbox-fix"},Pe.createElement("div",{style:z.sliders},Pe.createElement("div",{style:z.hue},Pe.createElement(V_,{style:z.Hue,hsl:l,onChange:s})),Pe.createElement("div",{style:z.alpha},Pe.createElement(ik,{style:z.Alpha,rgb:n,hsl:l,renderers:x,onChange:s}))),Pe.createElement("div",{style:z.color},Pe.createElement(j_,null),Pe.createElement("div",{style:z.activeColor}))),Pe.createElement(lSe,{rgb:n,hsl:l,hex:i,onChange:s,disableAlpha:p}),Pe.createElement(wV,{colors:v,onClick:s,onSwatchHover:f}))};Sk.propTypes={disableAlpha:ar.bool,width:ar.oneOfType([ar.string,ar.number]),styles:ar.object};Sk.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};_c(Sk);var F1=function(t){var r=t.hsl,n=t.offset,i=t.onClick,o=i===void 0?function(){}:i,l=t.active,s=t.first,f=t.last,p=In({default:{swatch:{height:"12px",background:"hsl("+r.h+", 50%, "+n*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:l,first:s,last:f}),v=function(S){return o({h:r.h,s:.5,l:n,source:"hsl"},S)};return Pe.createElement("div",{style:p.swatch,onClick:v})},hSe=function(t){var r=t.onClick,n=t.hsl,i=In({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),o=.1;return Pe.createElement("div",{style:i.swatches},Pe.createElement("div",{style:i.swatch},Pe.createElement(F1,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<o&&Math.abs(n.s-.5)<o,onClick:r,first:!0})),Pe.createElement("div",{style:i.swatch},Pe.createElement(F1,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<o&&Math.abs(n.s-.5)<o,onClick:r})),Pe.createElement("div",{style:i.swatch},Pe.createElement(F1,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<o&&Math.abs(n.s-.5)<o,onClick:r})),Pe.createElement("div",{style:i.swatch},Pe.createElement(F1,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<o&&Math.abs(n.s-.5)<o,onClick:r})),Pe.createElement("div",{style:i.swatch},Pe.createElement(F1,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<o&&Math.abs(n.s-.5)<o,onClick:r,last:!0})),Pe.createElement("div",{style:i.clear}))},fSe=function(){var t=In({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return Pe.createElement("div",{style:t.picker})},Ak=function(t){var r=t.hsl,n=t.onChange,i=t.pointer,o=t.styles,l=o===void 0?{}:o,s=t.className,f=s===void 0?"":s,p=In(yc({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},l));return Pe.createElement("div",{style:p.wrap||{},className:"slider-picker "+f},Pe.createElement("div",{style:p.hue},Pe.createElement(V_,{style:p.Hue,hsl:r,pointer:i,onChange:n})),Pe.createElement("div",{style:p.swatches},Pe.createElement(hSe,{hsl:r,onClick:n})))};Ak.propTypes={styles:ar.object};Ak.defaultProps={pointer:fSe,styles:{}};_c(Ak);var SV={};Object.defineProperty(SV,"__esModule",{value:!0});var kL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dSe=me,ML=pSe(dSe);function pSe(e){return e&&e.__esModule?e:{default:e}}function gSe(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var Cx=24,mSe=SV.default=function(e){var t=e.fill,r=t===void 0?"currentColor":t,n=e.width,i=n===void 0?Cx:n,o=e.height,l=o===void 0?Cx:o,s=e.style,f=s===void 0?{}:s,p=gSe(e,["fill","width","height","style"]);return ML.default.createElement("svg",kL({viewBox:"0 0 "+Cx+" "+Cx,style:kL({fill:r,width:i,height:l},f)},p),ML.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},ySe=function(t){var r=t.color,n=t.onClick,i=n===void 0?function(){}:n,o=t.onSwatchHover,l=t.first,s=t.last,f=t.active,p=In({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:r,marginBottom:"1px"},check:{color:fk(r),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:l,last:s,active:f,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return Pe.createElement(xm,{color:r,style:p.color,onClick:i,onHover:o,focusStyle:{boxShadow:"0 0 4px "+r}},Pe.createElement("div",{style:p.check},Pe.createElement(mSe,null)))},_Se=function(t){var r=t.onClick,n=t.onSwatchHover,i=t.group,o=t.active,l=In({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return Pe.createElement("div",{style:l.group},wm(i,function(s,f){return Pe.createElement(ySe,{key:s,color:s,active:s.toLowerCase()===o,first:f===0,last:f===i.length-1,onClick:r,onSwatchHover:n})}))},Ek=function(t){var r=t.width,n=t.height,i=t.onChange,o=t.onSwatchHover,l=t.colors,s=t.hex,f=t.styles,p=f===void 0?{}:f,v=t.className,x=v===void 0?"":v,S=In(yc({default:{picker:{width:r,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},p)),A=function(R,z){return i({hex:R,source:"hex"},z)};return Pe.createElement("div",{style:S.picker,className:"swatches-picker "+x},Pe.createElement(hb,null,Pe.createElement("div",{style:S.overflow},Pe.createElement("div",{style:S.body},wm(l,function(k){return Pe.createElement(_Se,{key:k.toString(),group:k,active:s,onClick:A,onSwatchHover:o})}),Pe.createElement("div",{style:S.clear})))))};Ek.propTypes={width:ar.oneOfType([ar.string,ar.number]),height:ar.oneOfType([ar.string,ar.number]),colors:ar.arrayOf(ar.arrayOf(ar.string)),styles:ar.object};Ek.defaultProps={width:320,height:240,colors:[[N0[900],N0[700],N0[500],N0[300],N0[100]],[D0[900],D0[700],D0[500],D0[300],D0[100]],[L0[900],L0[700],L0[500],L0[300],L0[100]],[F0[900],F0[700],F0[500],F0[300],F0[100]],[B0[900],B0[700],B0[500],B0[300],B0[100]],[z0[900],z0[700],z0[500],z0[300],z0[100]],[$0[900],$0[700],$0[500],$0[300],$0[100]],[U0[900],U0[700],U0[500],U0[300],U0[100]],[j0[900],j0[700],j0[500],j0[300],j0[100]],["#194D33",av[700],av[500],av[300],av[100]],[V0[900],V0[700],V0[500],V0[300],V0[100]],[H0[900],H0[700],H0[500],H0[300],H0[100]],[q0[900],q0[700],q0[500],q0[300],q0[100]],[W0[900],W0[700],W0[500],W0[300],W0[100]],[X0[900],X0[700],X0[500],X0[300],X0[100]],[K0[900],K0[700],K0[500],K0[300],K0[100]],[G0[900],G0[700],G0[500],G0[300],G0[100]],[Y0[900],Y0[700],Y0[500],Y0[300],Y0[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};_c(Ek);var Tk=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.hex,o=t.colors,l=t.width,s=t.triangle,f=t.styles,p=f===void 0?{}:f,v=t.className,x=v===void 0?"":v,S=In(yc({default:{card:{width:l,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},p),{"hide-triangle":s==="hide","top-left-triangle":s==="top-left","top-right-triangle":s==="top-right"}),A=function(R,z){Up(R)&&r({hex:R,source:"hex"},z)};return Pe.createElement("div",{style:S.card,className:"twitter-picker "+x},Pe.createElement("div",{style:S.triangleShadow}),Pe.createElement("div",{style:S.triangle}),Pe.createElement("div",{style:S.body},wm(o,function(k,R){return Pe.createElement(xm,{key:R,color:k,hex:k,style:S.swatch,onClick:A,onHover:n,focusStyle:{boxShadow:"0 0 4px "+k}})}),Pe.createElement("div",{style:S.hash},"#"),Pe.createElement(oi,{label:null,style:{input:S.input},value:i.replace("#",""),onChange:A}),Pe.createElement("div",{style:S.clear})))};Tk.propTypes={width:ar.oneOfType([ar.string,ar.number]),triangle:ar.oneOf(["hide","top-left","top-right"]),colors:ar.arrayOf(ar.string),styles:ar.object};Tk.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};_c(Tk);var Ck=function(t){var r=In({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(t.hsl.h)+", "+Math.round(t.hsl.s*100)+"%, "+Math.round(t.hsl.l*100)+"%)"}}});return Pe.createElement("div",{style:r.picker})};Ck.propTypes={hsl:ar.shape({h:ar.number,s:ar.number,l:ar.number,a:ar.number})};Ck.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Pk=function(t){var r=In({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(t.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return Pe.createElement("div",{style:r.picker})};Pk.propTypes={hsl:ar.shape({h:ar.number,s:ar.number,l:ar.number,a:ar.number})};Pk.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var vSe=function(t){var r=t.onChange,n=t.rgb,i=t.hsl,o=t.hex,l=t.hsv,s=function(A,k){if(A.hex)Up(A.hex)&&r({hex:A.hex,source:"hex"},k);else if(A.rgb){var R=A.rgb.split(",");mT(A.rgb,"rgb")&&r({r:R[0],g:R[1],b:R[2],a:1,source:"rgb"},k)}else if(A.hsv){var z=A.hsv.split(",");mT(A.hsv,"hsv")&&(z[2]=z[2].replace("%",""),z[1]=z[1].replace("%",""),z[0]=z[0].replace("",""),z[1]==1?z[1]=.01:z[2]==1&&(z[2]=.01),r({h:Number(z[0]),s:Number(z[1]),v:Number(z[2]),source:"hsv"},k))}else if(A.hsl){var N=A.hsl.split(",");mT(A.hsl,"hsl")&&(N[2]=N[2].replace("%",""),N[1]=N[1].replace("%",""),N[0]=N[0].replace("",""),x[1]==1?x[1]=.01:x[2]==1&&(x[2]=.01),r({h:Number(N[0]),s:Number(N[1]),v:Number(N[2]),source:"hsl"},k))}},f=In({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),p=n.r+", "+n.g+", "+n.b,v=Math.round(i.h)+", "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",x=Math.round(l.h)+", "+Math.round(l.s*100)+"%, "+Math.round(l.v*100)+"%";return Pe.createElement("div",{style:f.wrap,className:"flexbox-fix"},Pe.createElement("div",{style:f.fields},Pe.createElement("div",{style:f.double},Pe.createElement(oi,{style:{input:f.input,label:f.label},label:"hex",value:o,onChange:s})),Pe.createElement("div",{style:f.column},Pe.createElement("div",{style:f.single},Pe.createElement(oi,{style:{input:f.input2,label:f.label2},label:"rgb",value:p,onChange:s})),Pe.createElement("div",{style:f.single},Pe.createElement(oi,{style:{input:f.input2,label:f.label2},label:"hsv",value:x,onChange:s})),Pe.createElement("div",{style:f.single},Pe.createElement(oi,{style:{input:f.input2,label:f.label2},label:"hsl",value:v,onChange:s})))))},Ik=function(t){var r=t.width,n=t.onChange,i=t.rgb,o=t.hsl,l=t.hsv,s=t.hex,f=t.header,p=t.styles,v=p===void 0?{}:p,x=t.className,S=x===void 0?"":x,A=In(yc({default:{picker:{width:r,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},v));return Pe.createElement("div",{style:A.picker,className:"google-picker "+S},Pe.createElement("div",{style:A.head},f),Pe.createElement("div",{style:A.swatch}),Pe.createElement("div",{style:A.saturation},Pe.createElement(Q3,{hsl:o,hsv:l,pointer:Ck,onChange:n})),Pe.createElement("div",{style:A.body},Pe.createElement("div",{style:A.controls,className:"flexbox-fix"},Pe.createElement("div",{style:A.hue},Pe.createElement(V_,{style:A.Hue,hsl:o,radius:"4px",pointer:Pk,onChange:n}))),Pe.createElement(vSe,{rgb:i,hsl:o,hex:s,hsv:l,onChange:n})))};Ik.propTypes={width:ar.oneOfType([ar.string,ar.number]),styles:ar.object,header:ar.string};Ik.defaultProps={width:652,styles:{},header:"Color picker"};_c(Ik);function bSe(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function xSe(e){return"nodeType"in e}function wSe(e){var t,r;return e?bSe(e)?e:xSe(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}var OL;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(OL||(OL={}));const SSe=Object.freeze({x:0,y:0});function ASe(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function ESe(e,t,r){const n=ASe(t);if(!n)return e;const{scaleX:i,scaleY:o,x:l,y:s}=n,f=e.left-l-(1-i)*parseFloat(r),p=e.top-s-(1-o)*parseFloat(r.slice(r.indexOf(" ")+1)),v=i?e.width/i:e.width,x=o?e.height/o:e.height;return{width:v,height:x,top:p,right:f+v,bottom:p+x,left:f}}const TSe={ignoreTransform:!1};function AV(e,t){t===void 0&&(t=TSe);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:p,transformOrigin:v}=wSe(e).getComputedStyle(e);p&&(r=ESe(r,p,v))}const{top:n,left:i,width:o,height:l,bottom:s,right:f}=r;return{top:n,left:i,width:o,height:l,bottom:s,right:f}}function NL(e){return AV(e,{ignoreTransform:!0})}var hy;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(hy||(hy={}));var DL;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(DL||(DL={}));var nh;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter"})(nh||(nh={}));nh.Space,nh.Enter,nh.Esc,nh.Space,nh.Enter;var LL;(function(e){e[e.RightClick=2]="RightClick"})(LL||(LL={}));var FL;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(FL||(FL={}));var BL;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(BL||(BL={}));hy.Backward+"",hy.Forward+"",hy.Backward+"",hy.Forward+"";var L4;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(L4||(L4={}));var F4;(function(e){e.Optimized="optimized"})(F4||(F4={}));L4.WhileDragging,F4.Optimized;({...SSe});var zL;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(zL||(zL={}));nh.Down,nh.Right,nh.Up,nh.Left;var Rk={},CSe=Zc;Object.defineProperty(Rk,"__esModule",{value:!0});var EV=Rk.default=void 0,PSe=CSe(Jc()),ISe=xt;EV=Rk.default=(0,PSe.default)((0,ISe.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var kk={},RSe=Zc;Object.defineProperty(kk,"__esModule",{value:!0});var TV=kk.default=void 0,kSe=RSe(Jc()),MSe=xt;TV=kk.default=(0,kSe.default)((0,MSe.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"ControlPoint");var Mk={},OSe=Zc;Object.defineProperty(Mk,"__esModule",{value:!0});var CV=Mk.default=void 0,NSe=OSe(Jc()),DSe=xt;CV=Mk.default=(0,NSe.default)((0,DSe.jsx)("path",{d:"M7 11v2h10v-2zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"RemoveCircleOutline");var wd={},Sd={};function LSe(e,t,r){if(r===void 0&&(r=Array.prototype),e&&typeof r.find=="function")return r.find.call(e,t);for(var n=0;n<e.length;n++)if(Object.prototype.hasOwnProperty.call(e,n)){var i=e[n];if(t.call(void 0,i,n,e))return i}}function Ok(e,t){return t===void 0&&(t=Object),t&&typeof t.freeze=="function"?t.freeze(e):e}function FSe(e,t){if(e===null||typeof e!="object")throw new TypeError("target is not an object");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}var PV=Ok({HTML:"text/html",isHTML:function(e){return e===PV.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),IV=Ok({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===IV.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Sd.assign=FSe;Sd.find=LSe;Sd.freeze=Ok;Sd.MIME_TYPE=PV;Sd.NAMESPACE=IV;var RV=Sd,mf=RV.find,v2=RV.NAMESPACE;function BSe(e){return e!==""}function zSe(e){return e?e.split(/[\t\n\f\r ]+/).filter(BSe):[]}function $Se(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function $L(e){if(!e)return[];var t=zSe(e);return Object.keys(t.reduce($Se,{}))}function USe(e){return function(t){return e&&e.indexOf(t)!==-1}}function fb(e,t){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}function vc(e,t){var r=e.prototype;if(!(r instanceof t)){let n=function(){};n.prototype=t.prototype,n=new n,fb(r,n),e.prototype=r=n}r.constructor!=e&&(typeof e!="function"&&console.error("unknown Class:"+e),r.constructor=e)}var bc={},uh=bc.ELEMENT_NODE=1,g_=bc.ATTRIBUTE_NODE=2,P5=bc.TEXT_NODE=3,kV=bc.CDATA_SECTION_NODE=4,MV=bc.ENTITY_REFERENCE_NODE=5,jSe=bc.ENTITY_NODE=6,OV=bc.PROCESSING_INSTRUCTION_NODE=7,NV=bc.COMMENT_NODE=8,DV=bc.DOCUMENT_NODE=9,LV=bc.DOCUMENT_TYPE_NODE=10,fd=bc.DOCUMENT_FRAGMENT_NODE=11,VSe=bc.NOTATION_NODE=12,yl={},pa={};yl.INDEX_SIZE_ERR=(pa[1]="Index size error",1);yl.DOMSTRING_SIZE_ERR=(pa[2]="DOMString size error",2);var oc=yl.HIERARCHY_REQUEST_ERR=(pa[3]="Hierarchy request error",3);yl.WRONG_DOCUMENT_ERR=(pa[4]="Wrong document",4);yl.INVALID_CHARACTER_ERR=(pa[5]="Invalid character",5);yl.NO_DATA_ALLOWED_ERR=(pa[6]="No data allowed",6);yl.NO_MODIFICATION_ALLOWED_ERR=(pa[7]="No modification allowed",7);var FV=yl.NOT_FOUND_ERR=(pa[8]="Not found",8);yl.NOT_SUPPORTED_ERR=(pa[9]="Not supported",9);var UL=yl.INUSE_ATTRIBUTE_ERR=(pa[10]="Attribute in use",10);yl.INVALID_STATE_ERR=(pa[11]="Invalid state",11);yl.SYNTAX_ERR=(pa[12]="Syntax error",12);yl.INVALID_MODIFICATION_ERR=(pa[13]="Invalid modification",13);yl.NAMESPACE_ERR=(pa[14]="Invalid namespace",14);yl.INVALID_ACCESS_ERR=(pa[15]="Invalid access",15);function xs(e,t){if(t instanceof Error)var r=t;else r=this,Error.call(this,pa[e]),this.message=pa[e],Error.captureStackTrace&&Error.captureStackTrace(this,xs);return r.code=e,t&&(this.message=this.message+": "+t),r}xs.prototype=Error.prototype;fb(yl,xs);function id(){}id.prototype={length:0,item:function(e){return e>=0&&e<this.length?this[e]:null},toString:function(e,t){for(var r=[],n=0;n<this.length;n++)fy(this[n],r,e,t);return r.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}};function m_(e,t){this._node=e,this._refresh=t,Nk(this)}function Nk(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!==t){var r=e._refresh(e._node);if(GV(e,"length",r.length),!e.$$length||r.length<e.$$length)for(var n=r.length;n in e;n++)Object.prototype.hasOwnProperty.call(e,n)&&delete e[n];fb(r,e),e._inc=t}}m_.prototype.item=function(e){return Nk(this),this[e]||null};vc(m_,id);function I5(){}function BV(e,t){for(var r=e.length;r--;)if(e[r]===t)return r}function jL(e,t,r,n){if(n?t[BV(t,n)]=r:t[t.length++]=r,e){r.ownerElement=e;var i=e.ownerDocument;i&&(n&&UV(i,e,n),HSe(i,e,r))}}function VL(e,t,r){var n=BV(t,r);if(n>=0){for(var i=t.length-1;n<i;)t[n]=t[++n];if(t.length=i,e){var o=e.ownerDocument;o&&(UV(o,e,r),r.ownerElement=null)}}else throw new xs(FV,new Error(e.tagName+"@"+r))}I5.prototype={length:0,item:id.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var r=this[t];if(r.nodeName==e)return r}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new xs(UL);var r=this.getNamedItem(e.nodeName);return jL(this._ownerElement,this,e,r),r},setNamedItemNS:function(e){var t=e.ownerElement,r;if(t&&t!=this._ownerElement)throw new xs(UL);return r=this.getNamedItemNS(e.namespaceURI,e.localName),jL(this._ownerElement,this,e,r),r},removeNamedItem:function(e){var t=this.getNamedItem(e);return VL(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var r=this.getNamedItemNS(e,t);return VL(this._ownerElement,this,r),r},getNamedItemNS:function(e,t){for(var r=this.length;r--;){var n=this[r];if(n.localName==t&&n.namespaceURI==e)return n}return null}};function zV(){}zV.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,r){var n=new db;if(n.implementation=this,n.childNodes=new id,n.doctype=r||null,r&&n.appendChild(r),t){var i=n.createElementNS(e,t);n.appendChild(i)}return n},createDocumentType:function(e,t,r){var n=new rA;return n.name=e,n.nodeName=e,n.publicId=t||"",n.systemId=r||"",n}};function ji(){}ji.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return R5(this,e,t)},replaceChild:function(e,t){R5(this,e,t,VV),t&&this.removeChild(t)},removeChild:function(e){return jV(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(e){return B4(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==P5&&e.nodeType==P5?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var r=t._nsMap;if(r){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&r[n]===e)return n}t=t.nodeType==g_?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var r=t._nsMap;if(r&&Object.prototype.hasOwnProperty.call(r,e))return r[e];t=t.nodeType==g_?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return t==null}};function $V(e){return e=="<"&&"&lt;"||e==">"&&"&gt;"||e=="&"&&"&amp;"||e=='"'&&"&quot;"||"&#"+e.charCodeAt()+";"}fb(bc,ji);fb(bc,ji.prototype);function b2(e,t){if(t(e))return!0;if(e=e.firstChild)do if(b2(e,t))return!0;while(e=e.nextSibling)}function db(){this.ownerDocument=this}function HSe(e,t,r){e&&e._inc++;var n=r.namespaceURI;n===v2.XMLNS&&(t._nsMap[r.prefix?r.localName:""]=r.value)}function UV(e,t,r,n){e&&e._inc++;var i=r.namespaceURI;i===v2.XMLNS&&delete t._nsMap[r.prefix?r.localName:""]}function Dk(e,t,r){if(e&&e._inc){e._inc++;var n=t.childNodes;if(r)n[n.length++]=r;else{for(var i=t.firstChild,o=0;i;)n[o++]=i,i=i.nextSibling;n.length=o,delete n[n.length]}}}function jV(e,t){var r=t.previousSibling,n=t.nextSibling;return r?r.nextSibling=n:e.firstChild=n,n?n.previousSibling=r:e.lastChild=r,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,Dk(e.ownerDocument,e),t}function qSe(e){return e&&(e.nodeType===ji.DOCUMENT_NODE||e.nodeType===ji.DOCUMENT_FRAGMENT_NODE||e.nodeType===ji.ELEMENT_NODE)}function WSe(e){return e&&(yf(e)||Lk(e)||dd(e)||e.nodeType===ji.DOCUMENT_FRAGMENT_NODE||e.nodeType===ji.COMMENT_NODE||e.nodeType===ji.PROCESSING_INSTRUCTION_NODE)}function dd(e){return e&&e.nodeType===ji.DOCUMENT_TYPE_NODE}function yf(e){return e&&e.nodeType===ji.ELEMENT_NODE}function Lk(e){return e&&e.nodeType===ji.TEXT_NODE}function HL(e,t){var r=e.childNodes||[];if(mf(r,yf)||dd(t))return!1;var n=mf(r,dd);return!(t&&n&&r.indexOf(n)>r.indexOf(t))}function qL(e,t){var r=e.childNodes||[];function n(o){return yf(o)&&o!==t}if(mf(r,n))return!1;var i=mf(r,dd);return!(t&&i&&r.indexOf(i)>r.indexOf(t))}function XSe(e,t,r){if(!qSe(e))throw new xs(oc,"Unexpected parent node type "+e.nodeType);if(r&&r.parentNode!==e)throw new xs(FV,"child not in parent");if(!WSe(t)||dd(t)&&e.nodeType!==ji.DOCUMENT_NODE)throw new xs(oc,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)}function KSe(e,t,r){var n=e.childNodes||[],i=t.childNodes||[];if(t.nodeType===ji.DOCUMENT_FRAGMENT_NODE){var o=i.filter(yf);if(o.length>1||mf(i,Lk))throw new xs(oc,"More than one element or text in fragment");if(o.length===1&&!HL(e,r))throw new xs(oc,"Element in fragment can not be inserted before doctype")}if(yf(t)&&!HL(e,r))throw new xs(oc,"Only one element can be added and only after doctype");if(dd(t)){if(mf(n,dd))throw new xs(oc,"Only one doctype is allowed");var l=mf(n,yf);if(r&&n.indexOf(l)<n.indexOf(r))throw new xs(oc,"Doctype can only be inserted before an element");if(!r&&l)throw new xs(oc,"Doctype can not be appended since element is present")}}function VV(e,t,r){var n=e.childNodes||[],i=t.childNodes||[];if(t.nodeType===ji.DOCUMENT_FRAGMENT_NODE){var o=i.filter(yf);if(o.length>1||mf(i,Lk))throw new xs(oc,"More than one element or text in fragment");if(o.length===1&&!qL(e,r))throw new xs(oc,"Element in fragment can not be inserted before doctype")}if(yf(t)&&!qL(e,r))throw new xs(oc,"Only one element can be added and only after doctype");if(dd(t)){if(mf(n,function(f){return dd(f)&&f!==r}))throw new xs(oc,"Only one doctype is allowed");var l=mf(n,yf);if(r&&n.indexOf(l)<n.indexOf(r))throw new xs(oc,"Doctype can only be inserted before an element")}}function R5(e,t,r,n){XSe(e,t,r),e.nodeType===ji.DOCUMENT_NODE&&(n||KSe)(e,t,r);var i=t.parentNode;if(i&&i.removeChild(t),t.nodeType===fd){var o=t.firstChild;if(o==null)return t;var l=t.lastChild}else o=l=t;var s=r?r.previousSibling:e.lastChild;o.previousSibling=s,l.nextSibling=r,s?s.nextSibling=o:e.firstChild=o,r==null?e.lastChild=l:r.previousSibling=l;do o.parentNode=e;while(o!==l&&(o=o.nextSibling));return Dk(e.ownerDocument||e,e),t.nodeType==fd&&(t.firstChild=t.lastChild=null),t}function GSe(e,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=e,t.previousSibling=e.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,e.lastChild=t,Dk(e.ownerDocument,e,t),t}db.prototype={nodeName:"#document",nodeType:DV,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==fd){for(var r=e.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,t),r=n}return e}return R5(this,e,t),e.ownerDocument=this,this.documentElement===null&&e.nodeType===uh&&(this.documentElement=e),e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),jV(this,e)},replaceChild:function(e,t){R5(this,e,t,VV),e.ownerDocument=this,t&&this.removeChild(t),yf(e)&&(this.documentElement=e)},importNode:function(e,t){return KV(this,e,t)},getElementById:function(e){var t=null;return b2(this.documentElement,function(r){if(r.nodeType==uh&&r.getAttribute("id")==e)return t=r,!0}),t},getElementsByClassName:function(e){var t=$L(e);return new m_(this,function(r){var n=[];return t.length>0&&b2(r.documentElement,function(i){if(i!==r&&i.nodeType===uh){var o=i.getAttribute("class");if(o){var l=e===o;if(!l){var s=$L(o);l=t.every(USe(s))}l&&n.push(i)}}}),n})},createElement:function(e){var t=new nm;t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new id;var r=t.attributes=new I5;return r._ownerElement=t,t},createDocumentFragment:function(){var e=new nA;return e.ownerDocument=this,e.childNodes=new id,e},createTextNode:function(e){var t=new Fk;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new Bk;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new zk;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var r=new Uk;return r.ownerDocument=this,r.tagName=r.nodeName=r.target=e,r.nodeValue=r.data=t,r},createAttribute:function(e){var t=new k5;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new $k;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var r=new nm,n=t.split(":"),i=r.attributes=new I5;return r.childNodes=new id,r.ownerDocument=this,r.nodeName=t,r.tagName=t,r.namespaceURI=e,n.length==2?(r.prefix=n[0],r.localName=n[1]):r.localName=t,i._ownerElement=r,r},createAttributeNS:function(e,t){var r=new k5,n=t.split(":");return r.ownerDocument=this,r.nodeName=t,r.name=t,r.namespaceURI=e,r.specified=!0,n.length==2?(r.prefix=n[0],r.localName=n[1]):r.localName=t,r}};vc(db,ji);function nm(){this._nsMap={}}nm.prototype={nodeType:uh,hasAttribute:function(e){return this.getAttributeNode(e)!=null},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var r=this.ownerDocument.createAttribute(e);r.value=r.nodeValue=""+t,this.setAttributeNode(r)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===fd?this.insertBefore(e,null):GSe(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);r&&this.removeAttributeNode(r)},hasAttributeNS:function(e,t){return this.getAttributeNodeNS(e,t)!=null},getAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);return r&&r.value||""},setAttributeNS:function(e,t,r){var n=this.ownerDocument.createAttributeNS(e,t);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new m_(this,function(t){var r=[];return b2(t,function(n){n!==t&&n.nodeType==uh&&(e==="*"||n.tagName==e)&&r.push(n)}),r})},getElementsByTagNameNS:function(e,t){return new m_(this,function(r){var n=[];return b2(r,function(i){i!==r&&i.nodeType===uh&&(e==="*"||i.namespaceURI===e)&&(t==="*"||i.localName==t)&&n.push(i)}),n})}};db.prototype.getElementsByTagName=nm.prototype.getElementsByTagName;db.prototype.getElementsByTagNameNS=nm.prototype.getElementsByTagNameNS;vc(nm,ji);function k5(){}k5.prototype.nodeType=g_;vc(k5,ji);function pb(){}pb.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(pa[oc])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,r){var n=this.data.substring(0,e),i=this.data.substring(e+t);r=n+r+i,this.nodeValue=this.data=r,this.length=r.length}};vc(pb,ji);function Fk(){}Fk.prototype={nodeName:"#text",nodeType:P5,splitText:function(e){var t=this.data,r=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};vc(Fk,pb);function Bk(){}Bk.prototype={nodeName:"#comment",nodeType:NV};vc(Bk,pb);function zk(){}zk.prototype={nodeName:"#cdata-section",nodeType:kV};vc(zk,pb);function rA(){}rA.prototype.nodeType=LV;vc(rA,ji);function HV(){}HV.prototype.nodeType=VSe;vc(HV,ji);function qV(){}qV.prototype.nodeType=jSe;vc(qV,ji);function $k(){}$k.prototype.nodeType=MV;vc($k,ji);function nA(){}nA.prototype.nodeName="#document-fragment";nA.prototype.nodeType=fd;vc(nA,ji);function Uk(){}Uk.prototype.nodeType=OV;vc(Uk,ji);function WV(){}WV.prototype.serializeToString=function(e,t,r){return XV.call(e,t,r)};ji.prototype.toString=XV;function XV(e,t){var r=[],n=this.nodeType==9&&this.documentElement||this,i=n.prefix,o=n.namespaceURI;if(o&&i==null){var i=n.lookupPrefix(o);if(i==null)var l=[{namespace:o,prefix:null}]}return fy(this,r,e,t,l),r.join("")}function WL(e,t,r){var n=e.prefix||"",i=e.namespaceURI;if(!i||n==="xml"&&i===v2.XML||i===v2.XMLNS)return!1;for(var o=r.length;o--;){var l=r[o];if(l.prefix===n)return l.namespace!==i}return!0}function _T(e,t,r){e.push(" ",t,'="',r.replace(/[<>&"\t\n\r]/g,$V),'"')}function fy(e,t,r,n,i){if(i||(i=[]),n)if(e=n(e),e){if(typeof e=="string"){t.push(e);return}}else return;switch(e.nodeType){case uh:var o=e.attributes,l=o.length,N=e.firstChild,s=e.tagName;r=v2.isHTML(e.namespaceURI)||r;var f=s;if(!r&&!e.prefix&&e.namespaceURI){for(var p,v=0;v<o.length;v++)if(o.item(v).name==="xmlns"){p=o.item(v).value;break}if(!p)for(var x=i.length-1;x>=0;x--){var S=i[x];if(S.prefix===""&&S.namespace===e.namespaceURI){p=S.namespace;break}}if(p!==e.namespaceURI)for(var x=i.length-1;x>=0;x--){var S=i[x];if(S.namespace===e.namespaceURI){S.prefix&&(f=S.prefix+":"+s);break}}}t.push("<",f);for(var A=0;A<l;A++){var k=o.item(A);k.prefix=="xmlns"?i.push({prefix:k.localName,namespace:k.value}):k.nodeName=="xmlns"&&i.push({prefix:"",namespace:k.value})}for(var A=0;A<l;A++){var k=o.item(A);if(WL(k,r,i)){var R=k.prefix||"",z=k.namespaceURI;_T(t,R?"xmlns:"+R:"xmlns",z),i.push({prefix:R,namespace:z})}fy(k,t,r,n,i)}if(s===f&&WL(e,r,i)){var R=e.prefix||"",z=e.namespaceURI;_T(t,R?"xmlns:"+R:"xmlns",z),i.push({prefix:R,namespace:z})}if(N||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(s)){if(t.push(">"),r&&/^script$/i.test(s))for(;N;)N.data?t.push(N.data):fy(N,t,r,n,i.slice()),N=N.nextSibling;else for(;N;)fy(N,t,r,n,i.slice()),N=N.nextSibling;t.push("</",f,">")}else t.push("/>");return;case DV:case fd:for(var N=e.firstChild;N;)fy(N,t,r,n,i.slice()),N=N.nextSibling;return;case g_:return _T(t,e.name,e.value);case P5:return t.push(e.data.replace(/[<&>]/g,$V));case kV:return t.push("<![CDATA[",e.data,"]]>");case NV:return t.push("<!--",e.data,"-->");case LV:var B=e.publicId,U=e.systemId;if(t.push("<!DOCTYPE ",e.name),B)t.push(" PUBLIC ",B),U&&U!="."&&t.push(" ",U),t.push(">");else if(U&&U!=".")t.push(" SYSTEM ",U,">");else{var K=e.internalSubset;K&&t.push(" [",K,"]"),t.push(">")}return;case OV:return t.push("<?",e.target," ",e.data,"?>");case MV:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function KV(e,t,r){var n;switch(t.nodeType){case uh:n=t.cloneNode(!1),n.ownerDocument=e;case fd:break;case g_:r=!0;break}if(n||(n=t.cloneNode(!1)),n.ownerDocument=e,n.parentNode=null,r)for(var i=t.firstChild;i;)n.appendChild(KV(e,i,r)),i=i.nextSibling;return n}function B4(e,t,r){var n=new t.constructor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=t[i];typeof o!="object"&&o!=n[i]&&(n[i]=o)}switch(t.childNodes&&(n.childNodes=new id),n.ownerDocument=e,n.nodeType){case uh:var l=t.attributes,s=n.attributes=new I5,f=l.length;s._ownerElement=n;for(var p=0;p<f;p++)n.setAttributeNode(B4(e,l.item(p),!0));break;case g_:r=!0}if(r)for(var v=t.firstChild;v;)n.appendChild(B4(e,v,r)),v=v.nextSibling;return n}function GV(e,t,r){e[t]=r}try{if(Object.defineProperty){let e=function(t){switch(t.nodeType){case uh:case fd:var r=[];for(t=t.firstChild;t;)t.nodeType!==7&&t.nodeType!==8&&r.push(e(t)),t=t.nextSibling;return r.join("");default:return t.nodeValue}};Object.defineProperty(m_.prototype,"length",{get:function(){return Nk(this),this.$$length}}),Object.defineProperty(ji.prototype,"textContent",{get:function(){return e(this)},set:function(t){switch(this.nodeType){case uh:case fd:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),GV=function(t,r,n){t["$$"+r]=n}}}catch{}wd.DocumentType=rA;wd.DOMException=xs;wd.DOMImplementation=zV;wd.Element=nm;wd.Node=ji;wd.NodeList=id;wd.XMLSerializer=WV;var YV={};(function(e){var t=Sd.freeze;e.XML_ENTITIES=t({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),e.HTML_ENTITIES=t({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),e.entityMap=e.HTML_ENTITIES})(YV);var jk={},x2=Sd.NAMESPACE,z4=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,XL=new RegExp("[\\-\\.0-9"+z4.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),KL=new RegExp("^"+z4.source+XL.source+"*(?::"+z4.source+XL.source+"*)?$"),B1=0,Ud=1,d0=2,z1=3,p0=4,g0=5,$1=6,Px=7;function y_(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,y_)}y_.prototype=new Error;y_.prototype.name=y_.name;function ZV(){}ZV.prototype={parse:function(e,t,r){var n=this.domBuilder;n.startDocument(),JV(t,t={}),YSe(e,t,r,n,this.errorHandler),n.endDocument()}};function YSe(e,t,r,n,i){function o($e){if($e>65535){$e-=65536;var Ze=55296+($e>>10),Me=56320+($e&1023);return String.fromCharCode(Ze,Me)}else return String.fromCharCode($e)}function l($e){var Ze=$e.slice(1,-1);return Object.hasOwnProperty.call(r,Ze)?r[Ze]:Ze.charAt(0)==="#"?o(parseInt(Ze.substr(1).replace("x","0x"))):(i.error("entity not found:"+$e),$e)}function s($e){if($e>R){var Ze=e.substring(R,$e).replace(/&#?\w+;/g,l);S&&f(R),n.characters(Ze,0,$e-R),R=$e}}function f($e,Ze){for(;$e>=v&&(Ze=x.exec(e));)p=Ze.index,v=p+Ze[0].length,S.lineNumber++;S.columnNumber=$e-p+1}for(var p=0,v=0,x=/.*(?:\r\n?|\n)|.*$/g,S=n.locator,A=[{currentNSMap:t}],k={},R=0;;){try{var z=e.indexOf("<",R);if(z<0){if(!e.substr(R).match(/^\s*$/)){var N=n.doc,B=N.createTextNode(e.substr(R));N.appendChild(B),n.currentElement=B}return}switch(z>R&&s(z),e.charAt(z+1)){case"/":var G=e.indexOf(">",z+3),U=e.substring(z+2,G).replace(/[ \t\n\r]+$/g,""),K=A.pop();G<0?(U=e.substring(z+2).replace(/[\s<].*/,""),i.error("end tag name: "+U+" is not complete:"+K.tagName),G=z+1+U.length):U.match(/\s</)&&(U=U.replace(/[\s<].*/,""),i.error("end tag name: "+U+" maybe not complete"),G=z+1+U.length);var ne=K.localNSMap,ee=K.tagName==U,Q=ee||K.tagName&&K.tagName.toLowerCase()==U.toLowerCase();if(Q){if(n.endElement(K.uri,K.localName,U),ne)for(var re in ne)Object.prototype.hasOwnProperty.call(ne,re)&&n.endPrefixMapping(re);ee||i.fatalError("end tag name: "+U+" is not match the current start tagName:"+K.tagName)}else A.push(K);G++;break;case"?":S&&f(z),G=t3e(e,z,n);break;case"!":S&&f(z),G=e3e(e,z,n,i);break;default:S&&f(z);var Se=new QV,J=A[A.length-1].currentNSMap,G=ZSe(e,z,Se,J,l,i),se=Se.length;if(!Se.closed&&QSe(e,G,Se.tagName,k)&&(Se.closed=!0,r.nbsp||i.warning("unclosed xml attribute")),S&&se){for(var ve=GL(S,{}),ge=0;ge<se;ge++){var je=Se[ge];f(je.offset),je.locator=GL(S,{})}n.locator=ve,YL(Se,n,J)&&A.push(Se),n.locator=S}else YL(Se,n,J)&&A.push(Se);x2.isHTML(Se.uri)&&!Se.closed?G=JSe(e,G,Se.tagName,l,n):G++}}catch($e){if($e instanceof y_)throw $e;i.error("element parse error: "+$e),G=-1}G>R?R=G:s(Math.max(z,R)+1)}}function GL(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function ZSe(e,t,r,n,i,o){function l(S,A,k){r.attributeNames.hasOwnProperty(S)&&o.fatalError("Attribute "+S+" redefined"),r.addValue(S,A.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,i),k)}for(var s,f,p=++t,v=B1;;){var x=e.charAt(p);switch(x){case"=":if(v===Ud)s=e.slice(t,p),v=z1;else if(v===d0)v=z1;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(v===z1||v===Ud)if(v===Ud&&(o.warning('attribute value must after "="'),s=e.slice(t,p)),t=p+1,p=e.indexOf(x,t),p>0)f=e.slice(t,p),l(s,f,t-1),v=g0;else throw new Error("attribute value no end '"+x+"' match");else if(v==p0)f=e.slice(t,p),l(s,f,t),o.warning('attribute "'+s+'" missed start quot('+x+")!!"),t=p+1,v=g0;else throw new Error('attribute value must after "="');break;case"/":switch(v){case B1:r.setTagName(e.slice(t,p));case g0:case $1:case Px:v=Px,r.closed=!0;case p0:case Ud:break;case d0:r.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),v==B1&&r.setTagName(e.slice(t,p)),p;case">":switch(v){case B1:r.setTagName(e.slice(t,p));case g0:case $1:case Px:break;case p0:case Ud:f=e.slice(t,p),f.slice(-1)==="/"&&(r.closed=!0,f=f.slice(0,-1));case d0:v===d0&&(f=s),v==p0?(o.warning('attribute "'+f+'" missed quot(")!'),l(s,f,t)):((!x2.isHTML(n[""])||!f.match(/^(?:disabled|checked|selected)$/i))&&o.warning('attribute "'+f+'" missed value!! "'+f+'" instead!!'),l(f,f,t));break;case z1:throw new Error("attribute value missed!!")}return p;case"":x=" ";default:if(x<=" ")switch(v){case B1:r.setTagName(e.slice(t,p)),v=$1;break;case Ud:s=e.slice(t,p),v=d0;break;case p0:var f=e.slice(t,p);o.warning('attribute "'+f+'" missed quot(")!!'),l(s,f,t);case g0:v=$1;break}else switch(v){case d0:r.tagName,(!x2.isHTML(n[""])||!s.match(/^(?:disabled|checked|selected)$/i))&&o.warning('attribute "'+s+'" missed value!! "'+s+'" instead2!!'),l(s,s,t),t=p,v=Ud;break;case g0:o.warning('attribute space is required"'+s+'"!!');case $1:v=Ud,t=p;break;case z1:v=p0,t=p;break;case Px:throw new Error("elements closed character '/' and '>' must be connected to")}}p++}}function YL(e,t,r){for(var n=e.tagName,i=null,x=e.length;x--;){var o=e[x],l=o.qName,s=o.value,S=l.indexOf(":");if(S>0)var f=o.prefix=l.slice(0,S),p=l.slice(S+1),v=f==="xmlns"&&p;else p=l,f=null,v=l==="xmlns"&&"";o.localName=p,v!==!1&&(i==null&&(i={},JV(r,r={})),r[v]=i[v]=s,o.uri=x2.XMLNS,t.startPrefixMapping(v,s))}for(var x=e.length;x--;){o=e[x];var f=o.prefix;f&&(f==="xml"&&(o.uri=x2.XML),f!=="xmlns"&&(o.uri=r[f||""]))}var S=n.indexOf(":");S>0?(f=e.prefix=n.slice(0,S),p=e.localName=n.slice(S+1)):(f=null,p=e.localName=n);var A=e.uri=r[f||""];if(t.startElement(A,p,n,e),e.closed){if(t.endElement(A,p,n),i)for(f in i)Object.prototype.hasOwnProperty.call(i,f)&&t.endPrefixMapping(f)}else return e.currentNSMap=r,e.localNSMap=i,!0}function JSe(e,t,r,n,i){if(/^(?:script|textarea)$/i.test(r)){var o=e.indexOf("</"+r+">",t),l=e.substring(t+1,o);if(/[&<]/.test(l))return/^script$/i.test(r)?(i.characters(l,0,l.length),o):(l=l.replace(/&#?\w+;/g,n),i.characters(l,0,l.length),o)}return t+1}function QSe(e,t,r,n){var i=n[r];return i==null&&(i=e.lastIndexOf("</"+r+">"),i<t&&(i=e.lastIndexOf("</"+r)),n[r]=i),i<t}function JV(e,t){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}function e3e(e,t,r,n){var i=e.charAt(t+2);switch(i){case"-":if(e.charAt(t+3)==="-"){var o=e.indexOf("-->",t+4);return o>t?(r.comment(e,t+4,o-t-4),o+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(e.substr(t+3,6)=="CDATA["){var o=e.indexOf("]]>",t+9);return r.startCDATA(),r.characters(e,t+9,o-t-9),r.endCDATA(),o+3}var l=r3e(e,t),s=l.length;if(s>1&&/!doctype/i.test(l[0][0])){var f=l[1][0],p=!1,v=!1;s>3&&(/^public$/i.test(l[2][0])?(p=l[3][0],v=s>4&&l[4][0]):/^system$/i.test(l[2][0])&&(v=l[3][0]));var x=l[s-1];return r.startDTD(f,p,v),r.endDTD(),x.index+x[0].length}}return-1}function t3e(e,t,r){var n=e.indexOf("?>",t);if(n){var i=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,r.processingInstruction(i[1],i[2]),n+2):-1}return-1}function QV(){this.attributeNames={}}QV.prototype={setTagName:function(e){if(!KL.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,r){if(!KL.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}};function r3e(e,t){var r,n=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=t,i.exec(e);r=i.exec(e);)if(n.push(r),r[1])return n}jk.XMLReader=ZV;jk.ParseError=y_;var n3e=Sd,i3e=wd,ZL=YV,eH=jk,o3e=i3e.DOMImplementation,JL=n3e.NAMESPACE,s3e=eH.ParseError,a3e=eH.XMLReader;function l3e(e){return e.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function c3e(e){this.options=e||{locator:{}}}c3e.prototype.parseFromString=function(e,t){var r=this.options,n=new a3e,i=r.domBuilder||new iA,o=r.errorHandler,l=r.locator,s=r.xmlns||{},f=/\/x?html?$/.test(t),p=f?ZL.HTML_ENTITIES:ZL.XML_ENTITIES;l&&i.setDocumentLocator(l),n.errorHandler=u3e(o,i,l),n.domBuilder=r.domBuilder||i,f&&(s[""]=JL.HTML),s.xml=s.xml||JL.XML;var v=r.normalizeLineEndings||l3e;return e&&typeof e=="string"?n.parse(v(e),s,p):n.errorHandler.error("invalid doc source"),i.doc};function u3e(e,t,r){if(!e){if(t instanceof iA)return t;e=t}var n={},i=e instanceof Function;r=r||{};function o(l){var s=e[l];!s&&i&&(s=e.length==2?function(f){e(l,f)}:e),n[l]=s&&function(f){s("[xmldom "+l+"]	"+f+$4(r))}||function(){}}return o("warning"),o("error"),o("fatalError"),n}function iA(){this.cdata=!1}function m0(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}iA.prototype={startDocument:function(){this.doc=new o3e().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,r,n){var i=this.doc,o=i.createElementNS(e,r||t),l=n.length;Ix(this,o),this.currentElement=o,this.locator&&m0(this.locator,o);for(var s=0;s<l;s++){var e=n.getURI(s),f=n.getValue(s),r=n.getQName(s),p=i.createAttributeNS(e,r);this.locator&&m0(n.getLocator(s),p),p.value=p.nodeValue=f,o.setAttributeNode(p)}},endElement:function(e,t,r){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var r=this.doc.createProcessingInstruction(e,t);this.locator&&m0(this.locator,r),Ix(this,r)},ignorableWhitespace:function(e,t,r){},characters:function(e,t,r){if(e=QL.apply(this,arguments),e){if(this.cdata)var n=this.doc.createCDATASection(e);else var n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&m0(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,r){e=QL.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&m0(this.locator,n),Ix(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(e,t,r);this.locator&&m0(this.locator,i),Ix(this,i),this.doc.doctype=i}},warning:function(e){console.warn("[xmldom warning]	"+e,$4(this.locator))},error:function(e){console.error("[xmldom error]	"+e,$4(this.locator))},fatalError:function(e){throw new s3e(e,this.locator)}};function $4(e){if(e)return`
@`+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function QL(e,t,r){return typeof e=="string"?e.substr(t,r):e.length>=t+r||t?new java.lang.String(e,t,r)+"":e}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){iA.prototype[e]=function(){return null}});function Ix(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}var h3e=wd,f3e=h3e.XMLSerializer;/**
 * wms-capabilities @0.6.0
 * @description WMS service Capabilities > JSON, based on openlayers 
 * @license BSD-2-Clause
 * @preserve
 */var Wn=e=>e!==void 0,tH=(e,t,r)=>t in e?e[t]:e[t]=r;const M5={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};function Vk(e,t){return rH(e,t,[]).join("")}function rH(e,t,r){if(e.nodeType===M5.CDATA_SECTION||e.nodeType===M5.TEXT)r.push(e.nodeValue);else{var n;for(n=e.firstChild;n;n=n.nextSibling)rH(n,t,r)}return r}function d3e(e,t,r,n){for(var i=p3e(t);i;i=g3e(i)){var o=i.namespaceURI||null,l=e[o];if(Wn(l)){var s=l[i.localName];Wn(s)&&s.call(n,i,r)}}}function p3e(e){let t=e.firstElementChild||e.firstChild;for(;t&&t.nodeType!==M5.ELEMENT;)t=t.nextSibling;return t}function g3e(e){let t=e.nextElementSibling||e.nextSibling;for(;t&&t.nodeType!==M5.ELEMENT;)t=t.nextSibling;return t}function Ua(e,t,r){return m3e(e,t,r)}function m3e(e,t,r){var n=Wn(r)?r:{},i,o;for(i=0,o=e.length;i<o;++i)n[e[i]]=t;return n}function nH(e,t){return function(r,n){var i=e.call(Wn(t)?t:this,r,n);if(Wn(i)){var o=n[n.length-1];o.push(i)}}}function ja(e,t,r,n,i){return n.push(e),d3e(t,r,n,i),n.pop()}function Kr(e,t,r){return function(n,i){let o=e.call(Wn(r)?r:this,n,i);if(Wn(o)){var l=i[i.length-1],s=Wn(t)?t:n.localName;l[s]=o}}}function rc(e,t,r){return function(n,i){var o=e.call(Wn(r)?r:this,n,i);if(Wn(o)){var l=i[i.length-1],s=Wn(t)?t:n.localName,f=tH(l,s,[]);f.push(o)}}}const y3e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function _3e(e){return e.replace(y3e,"")}function $g(e){const t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t)return Wn(t[1])||!1}function dy(e){return td(Vk(e,!1))}function td(e){const t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t)return parseFloat(t[1])}function vT(e){return O5(Vk(e,!1))}function O5(e){const t=/^\s*(\d+)\s*$/.exec(e);if(t)return parseInt(t[1],10)}function xi(e){return _3e(Vk(e,!1))}const v3e="http://www.w3.org/1999/xlink";function Hk(e){return e.getAttributeNS(v3e,"href")}function b3e(e,t){return ja({},W3e,e,t)}function iH(e){return[td(e.getAttribute("minx")),td(e.getAttribute("miny")),td(e.getAttribute("maxx")),td(e.getAttribute("maxy"))]}function x3e(e,t){const r=iH(e),n=[td(e.getAttribute("resx")),td(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS")||e.getAttribute("SRS"),extent:r,res:n}}function w3e(e,t){const r=iH(e);if(!(!Wn(r[0])||!Wn(r[1])||!Wn(r[2])||!Wn(r[3])))return r}function S3e(e,t){const r=parseFloat(e.getAttribute("min")),n=parseFloat(e.getAttribute("max"));return{min:r,max:n}}function A3e(e,t){const r=ja({},X3e,e,t);if(!Wn(r))return;const n=r.westBoundLongitude,i=r.southBoundLatitude,o=r.eastBoundLongitude,l=r.northBoundLatitude;if(!(!Wn(n)||!Wn(i)||!Wn(o)||!Wn(l)))return[n,i,o,l]}function E3e(e,t){return ja({},$3e,e,t)}function T3e(e,t){return ja({},U3e,e,t)}function C3e(e,t){return ja({},j3e,e,t)}function P3e(e,t){return ja({},V3e,e,t)}function I3e(e,t){return ja({},H3e,e,t)}function R3e(e,t){return ja([],q3e,e,t)}function k3e(e,t){const r=$g(e.getAttribute("queryable"));return ja({queryable:Wn(r)?r:!1},aH,e,t)}function M3e(e,t){var r=t[t.length-1];const n=ja({},aH,e,t);if(!Wn(n))return;let i=$g(e.getAttribute("queryable"));Wn(i)||(i=r.queryable),n.queryable=Wn(i)?i:!1;let o=O5(e.getAttribute("cascaded"));Wn(o)||(o=r.cascaded),n.cascaded=o;let l=$g(e.getAttribute("opaque"));Wn(l)||(l=r.opaque),n.opaque=Wn(l)?l:!1;let s=$g(e.getAttribute("noSubsets"));Wn(s)||(s=r.noSubsets),n.noSubsets=Wn(s)?s:!1;let f=td(e.getAttribute("fixedWidth"));Wn(f)||(f=r.fixedWidth),n.fixedWidth=f;let p=td(e.getAttribute("fixedHeight"));Wn(p)||(p=r.fixedHeight),n.fixedHeight=p;const v=["Style","CRS","AuthorityURL"];for(let S=0,A=v.length;S<A;S++){const k=v[S],R=r[k];if(Wn(R)){let z=tH(n,k,[]);z=z.concat(R),n[k]=z}}const x=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let S=0,A=x.length;S<A;S++){const k=x[S],R=n[k];if(!Wn(R)){const z=r[k];n[k]=z}}return n}function O3e(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:$g(e.getAttribute("multipleValues")),nearestValue:$g(e.getAttribute("nearestValue")),current:$g(e.getAttribute("current")),values:xi(e)}}function pd(e,t){return ja({},Q3e,e,t)}function N3e(e,t){return ja({},K3e,e,t)}function D3e(e,t){return ja({},Y3e,e,t)}function L3e(e,t){return ja({},Z3e,e,t)}function bT(e,t){return ja({},G3e,e,t)}function oH(e,t){var r=pd(e,t);if(Wn(r)){const n=[O5(e.getAttribute("width")),O5(e.getAttribute("height"))];return r.size=n,r}}function F3e(e,t){var r=pd(e,t);if(Wn(r))return r.name=e.getAttribute("name"),r}function B3e(e,t){var r=pd(e,t);if(Wn(r))return r.type=e.getAttribute("type"),r}function z3e(e,t){return ja({},J3e,e,t)}function sH(e,t){return ja([],eAe,e,t)}const Va=[null,"http://www.opengis.net/wms"];Ua(Va,{Service:Kr(T3e),Capability:Kr(E3e)});const $3e=Ua(Va,{Request:Kr(N3e),Exception:Kr(R3e),Layer:Kr(k3e)}),U3e=Ua(Va,{Name:Kr(xi),Title:Kr(xi),Abstract:Kr(xi),KeywordList:Kr(sH),OnlineResource:Kr(Hk),ContactInformation:Kr(C3e),Fees:Kr(xi),AccessConstraints:Kr(xi),LayerLimit:Kr(vT),MaxWidth:Kr(vT),MaxHeight:Kr(vT)}),j3e=Ua(Va,{ContactPersonPrimary:Kr(P3e),ContactPosition:Kr(xi),ContactAddress:Kr(I3e),ContactVoiceTelephone:Kr(xi),ContactFacsimileTelephone:Kr(xi),ContactElectronicMailAddress:Kr(xi)}),V3e=Ua(Va,{ContactPerson:Kr(xi),ContactOrganization:Kr(xi)}),H3e=Ua(Va,{AddressType:Kr(xi),Address:Kr(xi),City:Kr(xi),StateOrProvince:Kr(xi),PostCode:Kr(xi),Country:Kr(xi)}),q3e=Ua(Va,{Format:nH(xi)}),aH=Ua(Va,{Name:Kr(xi),Title:Kr(xi),Abstract:Kr(xi),KeywordList:Kr(sH),CRS:rc(xi),SRS:rc(xi),EX_GeographicBoundingBox:Kr(A3e),LatLonBoundingBox:Kr(w3e),BoundingBox:rc(x3e),Dimension:rc(O3e),Attribution:Kr(b3e),AuthorityURL:rc(F3e),Identifier:rc(xi),MetadataURL:rc(B3e),DataURL:rc(pd),FeatureListURL:rc(pd),Style:rc(z3e),MinScaleDenominator:Kr(dy),MaxScaleDenominator:Kr(dy),ScaleHint:Kr(S3e),Layer:rc(M3e)}),W3e=Ua(Va,{Title:Kr(xi),OnlineResource:Kr(Hk),LogoURL:Kr(oH)}),X3e=Ua(Va,{westBoundLongitude:Kr(dy),eastBoundLongitude:Kr(dy),southBoundLatitude:Kr(dy),northBoundLatitude:Kr(dy)}),K3e=Ua(Va,{GetCapabilities:Kr(bT),GetMap:Kr(bT),GetFeatureInfo:Kr(bT)}),G3e=Ua(Va,{Format:rc(xi),DCPType:rc(D3e)}),Y3e=Ua(Va,{HTTP:Kr(L3e)}),Z3e=Ua(Va,{Get:Kr(pd),Post:Kr(pd)}),J3e=Ua(Va,{Name:Kr(xi),Title:Kr(xi),Abstract:Kr(xi),LegendURL:rc(oH),StyleSheetURL:Kr(pd),StyleURL:Kr(pd)}),Q3e=Ua(Va,{Format:Kr(xi),OnlineResource:Kr(Hk)}),eAe=Ua(Va,{Keyword:nH(xi)});var qk={},tAe=Zc;Object.defineProperty(qk,"__esModule",{value:!0});var lH=qk.default=void 0,rAe=tAe(Jc()),xT=xt;lH=qk.default=(0,rAe.default)([(0,xT.jsx)("circle",{cx:"7",cy:"14",r:"3"},"0"),(0,xT.jsx)("circle",{cx:"11",cy:"6",r:"3"},"1"),(0,xT.jsx)("circle",{cx:"16.6",cy:"17.6",r:"3"},"2")],"ScatterPlot");function cH(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+"]"}).join(",")+"}")}function nAe(e,t){var r=cH(e);return function(n,i){return t(r(n),i,e)}}function iAe(e){var t=Object.create(null),r=[];return e.forEach(function(n){for(var i in n)i in t||r.push(t[i]=i)}),r}function Wk(e){var t=new RegExp('["'+e+`
]`),r=e.charCodeAt(0);function n(p,v){var x,S,A=i(p,function(k,R){if(x)return x(k,R-1);S=k,x=v?nAe(k,v):cH(k)});return A.columns=S,A}function i(p,v){var x={},S={},A=[],k=p.length,R=0,z=0,N,B;function U(){if(R>=k)return S;if(B)return B=!1,x;var ne=R,ee;if(p.charCodeAt(ne)===34){for(var Q=ne;Q++<k;)if(p.charCodeAt(Q)===34){if(p.charCodeAt(Q+1)!==34)break;++Q}return R=Q+2,ee=p.charCodeAt(Q+1),ee===13?(B=!0,p.charCodeAt(Q+2)===10&&++R):ee===10&&(B=!0),p.slice(ne+1,Q).replace(/""/g,'"')}for(;R<k;){var re=1;if(ee=p.charCodeAt(R++),ee===10)B=!0;else if(ee===13)B=!0,p.charCodeAt(R)===10&&(++R,++re);else if(ee!==r)continue;return p.slice(ne,R-re)}return p.slice(ne)}for(;(N=U())!==S;){for(var K=[];N!==x&&N!==S;)K.push(N),N=U();v&&(K=v(K,z++))==null||A.push(K)}return A}function o(p,v){return v==null&&(v=iAe(p)),[v.map(f).join(e)].concat(p.map(function(x){return v.map(function(S){return f(x[S])}).join(e)})).join(`
`)}function l(p){return p.map(s).join(`
`)}function s(p){return p.map(f).join(e)}function f(p){return p==null?"":t.test(p+="")?'"'+p.replace(/\"/g,'""')+'"':p}return{parse:n,parseRows:i,format:o,formatRows:l}}var oA=Wk(","),oAe=oA.parse,sAe=oA.parseRows,aAe=oA.format,lAe=oA.formatRows,sA=Wk("	"),cAe=sA.parse,uAe=sA.parseRows,hAe=sA.format,fAe=sA.formatRows;const dAe=Object.freeze(Object.defineProperty({__proto__:null,csvFormat:aAe,csvFormatRows:lAe,csvParse:oAe,csvParseRows:sAe,dsvFormat:Wk,tsvFormat:hAe,tsvFormatRows:fAe,tsvParse:cAe,tsvParseRows:uAe},Symbol.toStringTag,{value:"Module"})),pAe=c9(dAe);var q_={exports:{}};q_.exports=gAe;q_.exports.pair=yAe;q_.exports.format=U4;q_.exports.formatPair=mAe;q_.exports.coordToDMS=uH;function gAe(e,t){var r=j4(e,t);return r===null?null:r.val}function mAe(e){return U4(e.lat,"lat")+" "+U4(e.lon,"lon")}function U4(e,t){var r=uH(e,t);return r.whole+" "+(r.minutes?r.minutes+"' ":"")+(r.seconds?r.seconds+'" ':"")+r.dir}function uH(e,t){var r={lat:["N","S"],lon:["E","W"]}[t]||"",n=r[e>=0?0:1],i=Math.abs(e),o=Math.floor(i),l=i-o,s=l*60,f=Math.floor(s),p=Math.floor((s-f)*60);return{whole:o,minutes:f,seconds:p,dir:n}}function j4(e,t){if(t||(t="NSEW"),typeof e!="string")return null;e=e.toUpperCase();var r=/^[\s\,]*([NSEW])?\s*([\-|\|\]?[0-9.]+)[]?\s*(?:([0-9.]+)[']\s*)?(?:([0-9.]+)(?:''|"||)\s*)?([NSEW])?/,n=e.match(r);if(!n)return null;var i=n[0],o;if(n[1]&&n[5]?(o=n[1],i=i.slice(0,-1)):o=n[1]||n[5],o&&t.indexOf(o)===-1)return null;var l=n[2]?parseFloat(n[2]):0,s=n[3]?parseFloat(n[3])/60:0,f=n[4]?parseFloat(n[4])/3600:0,p=l<0?-1:1;return(o==="S"||o==="W")&&(p*=-1),{val:(Math.abs(l)+s+f)*p,dim:o,matched:i,remain:e.slice(i.length)}}function yAe(e,t){e=e.trim();var r=j4(e,t);if(!r)return null;e=r.remain.trim();var n=j4(e,t);return!n||n.remain?null:r.dim?_Ae(r.val,n.val,r.dim):[r.val,n.val]}function _Ae(e,t,r){if(r==="N"||r==="S")return[e,t];if(r==="W"||r==="E")return[t,e]}var vAe=q_.exports,Ly=pAe,eF=vAe,hH=/(Lat)(itude)?/gi,fH=/(L)(on|ng)(gitude)?/i;function dH(e,t){var r,n,i;for(var o in e)n=o.match(t),n&&(!r||n[0].length/o.length>i)&&(i=n[0].length/o.length,r=o);return r}function pH(e){return dH(e,hH)}function gH(e){return dH(e,fH)}function bAe(e){return!!e.match(hH)}function xAe(e){return!!e.match(fH)}function tF(e){return typeof e=="object"?Object.keys(e).length:0}function mH(e){var t=[",",";","	","|"],r=[];return t.forEach(function(n){var i=Ly.dsvFormat(n).parse(e);if(i.length>=1){for(var o=tF(i[0]),l=0;l<i.length;l++)if(tF(i[l])!==o)return;r.push({delimiter:n,arity:Object.keys(i[0]).length})}}),r.length?r.sort(function(n,i){return i.arity-n.arity})[0].delimiter:null}function wAe(e){return delete e.columns,e}function SAe(e){var t=mH(e);return t?wAe(Ly.dsvFormat(t).parse(e)):null}function AAe(e,t,r){r||(r=t,t={}),t.delimiter=t.delimiter||",";var n=t.latfield||"",i=t.lonfield||"",o=t.crs||"",l=[],s={type:"FeatureCollection",features:l};if(o!==""&&(s.crs={type:"name",properties:{name:o}}),t.delimiter==="auto"&&typeof e=="string"&&(t.delimiter=mH(e),!t.delimiter)){r({type:"Error",message:"Could not autodetect delimiter"});return}var f=t.numericFields?t.numericFields.split(","):null,p=typeof e=="string"?Ly.dsvFormat(t.delimiter).parse(e,function(B){if(f)for(var U in B)f.includes(U)&&(B[U]=+B[U]);return B}):e;if(!p.length){r(null,s);return}var v=[],x;n||(n=pH(p[0])),i||(i=gH(p[0]));var S=!n||!i;if(S){for(x=0;x<p.length;x++)l.push({type:"Feature",properties:p[x],geometry:null});r(v.length?v:null,s);return}for(x=0;x<p.length;x++)if(p[x][i]!==void 0&&p[x][n]!==void 0){var A=p[x][i],k=p[x][n],R,z,N;N=eF(A,"EW"),N&&(A=N),N=eF(k,"NS"),N&&(k=N),R=parseFloat(A),z=parseFloat(k),isNaN(R)||isNaN(z)?v.push({message:"A row contained an invalid value for latitude or longitude",row:p[x],index:x}):(t.includeLatLon||(delete p[x][i],delete p[x][n]),l.push({type:"Feature",properties:p[x],geometry:{type:"Point",coordinates:[parseFloat(R),parseFloat(z)]}}))}r(v.length?v:null,s)}function EAe(e){for(var t=e.features,r={type:"Feature",geometry:{type:"LineString",coordinates:[]}},n=0;n<t.length;n++)r.geometry.coordinates.push(t[n].geometry.coordinates);return r.properties=t.reduce(function(i,o){for(var l in o.properties)i[l]||(i[l]=[]),i[l].push(o.properties[l]);return i},{}),{type:"FeatureCollection",features:[r]}}function TAe(e){for(var t=e.features,r={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},n=0;n<t.length;n++)r.geometry.coordinates[0].push(t[n].geometry.coordinates);return r.properties=t.reduce(function(i,o){for(var l in o.properties)i[l]||(i[l]=[]),i[l].push(o.properties[l]);return i},{}),{type:"FeatureCollection",features:[r]}}Ly.csvParse,Ly.tsvParse;var CAe={value:()=>{}};function yH(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Tw(r)}function Tw(e){this._=e}function PAe(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Tw.prototype=yH.prototype={constructor:Tw,on:function(e,t){var r=this._,n=PAe(e+"",r),i,o=-1,l=n.length;if(arguments.length<2){for(;++o<l;)if((i=(e=n[o]).type)&&(i=IAe(r[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<l;)if(i=(e=n[o]).type)r[i]=rF(r[i],e.name,t);else if(t==null)for(i in r)r[i]=rF(r[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Tw(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,o;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],n=0,i=o.length;n<i;++n)o[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,o=n.length;i<o;++i)n[i].value.apply(t,r)}};function IAe(e,t){for(var r=0,n=e.length,i;r<n;++r)if((i=e[r]).name===t)return i.value}function rF(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=CAe,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var V4="http://www.w3.org/1999/xhtml";const nF={svg:"http://www.w3.org/2000/svg",xhtml:V4,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function aA(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),nF.hasOwnProperty(t)?{space:nF[t],local:e}:e}function RAe(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===V4&&t.documentElement.namespaceURI===V4?t.createElement(e):t.createElementNS(r,e)}}function kAe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function _H(e){var t=aA(e);return(t.local?kAe:RAe)(t)}function MAe(){}function Xk(e){return e==null?MAe:function(){return this.querySelector(e)}}function OAe(e){typeof e!="function"&&(e=Xk(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],l=o.length,s=n[i]=new Array(l),f,p,v=0;v<l;++v)(f=o[v])&&(p=e.call(f,f.__data__,v,o))&&("__data__"in f&&(p.__data__=f.__data__),s[v]=p);return new dh(n,this._parents)}function NAe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function DAe(){return[]}function vH(e){return e==null?DAe:function(){return this.querySelectorAll(e)}}function LAe(e){return function(){return NAe(e.apply(this,arguments))}}function FAe(e){typeof e=="function"?e=LAe(e):e=vH(e);for(var t=this._groups,r=t.length,n=[],i=[],o=0;o<r;++o)for(var l=t[o],s=l.length,f,p=0;p<s;++p)(f=l[p])&&(n.push(e.call(f,f.__data__,p,l)),i.push(f));return new dh(n,i)}function bH(e){return function(){return this.matches(e)}}function xH(e){return function(t){return t.matches(e)}}var BAe=Array.prototype.find;function zAe(e){return function(){return BAe.call(this.children,e)}}function $Ae(){return this.firstElementChild}function UAe(e){return this.select(e==null?$Ae:zAe(typeof e=="function"?e:xH(e)))}var jAe=Array.prototype.filter;function VAe(){return Array.from(this.children)}function HAe(e){return function(){return jAe.call(this.children,e)}}function qAe(e){return this.selectAll(e==null?VAe:HAe(typeof e=="function"?e:xH(e)))}function WAe(e){typeof e!="function"&&(e=bH(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],l=o.length,s=n[i]=[],f,p=0;p<l;++p)(f=o[p])&&e.call(f,f.__data__,p,o)&&s.push(f);return new dh(n,this._parents)}function wH(e){return new Array(e.length)}function XAe(){return new dh(this._enter||this._groups.map(wH),this._parents)}function N5(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}N5.prototype={constructor:N5,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function KAe(e){return function(){return e}}function GAe(e,t,r,n,i,o){for(var l=0,s,f=t.length,p=o.length;l<p;++l)(s=t[l])?(s.__data__=o[l],n[l]=s):r[l]=new N5(e,o[l]);for(;l<f;++l)(s=t[l])&&(i[l]=s)}function YAe(e,t,r,n,i,o,l){var s,f,p=new Map,v=t.length,x=o.length,S=new Array(v),A;for(s=0;s<v;++s)(f=t[s])&&(S[s]=A=l.call(f,f.__data__,s,t)+"",p.has(A)?i[s]=f:p.set(A,f));for(s=0;s<x;++s)A=l.call(e,o[s],s,o)+"",(f=p.get(A))?(n[s]=f,f.__data__=o[s],p.delete(A)):r[s]=new N5(e,o[s]);for(s=0;s<v;++s)(f=t[s])&&p.get(S[s])===f&&(i[s]=f)}function ZAe(e){return e.__data__}function JAe(e,t){if(!arguments.length)return Array.from(this,ZAe);var r=t?YAe:GAe,n=this._parents,i=this._groups;typeof e!="function"&&(e=KAe(e));for(var o=i.length,l=new Array(o),s=new Array(o),f=new Array(o),p=0;p<o;++p){var v=n[p],x=i[p],S=x.length,A=QAe(e.call(v,v&&v.__data__,p,n)),k=A.length,R=s[p]=new Array(k),z=l[p]=new Array(k),N=f[p]=new Array(S);r(v,x,R,z,N,A,t);for(var B=0,U=0,K,ne;B<k;++B)if(K=R[B]){for(B>=U&&(U=B+1);!(ne=z[U])&&++U<k;);K._next=ne||null}}return l=new dh(l,n),l._enter=s,l._exit=f,l}function QAe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function eEe(){return new dh(this._exit||this._groups.map(wH),this._parents)}function tEe(e,t,r){var n=this.enter(),i=this,o=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),r==null?o.remove():r(o),n&&i?n.merge(i).order():i}function rEe(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,o=n.length,l=Math.min(i,o),s=new Array(i),f=0;f<l;++f)for(var p=r[f],v=n[f],x=p.length,S=s[f]=new Array(x),A,k=0;k<x;++k)(A=p[k]||v[k])&&(S[k]=A);for(;f<i;++f)s[f]=r[f];return new dh(s,this._parents)}function nEe(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],i=n.length-1,o=n[i],l;--i>=0;)(l=n[i])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function iEe(e){e||(e=oEe);function t(x,S){return x&&S?e(x.__data__,S.__data__):!x-!S}for(var r=this._groups,n=r.length,i=new Array(n),o=0;o<n;++o){for(var l=r[o],s=l.length,f=i[o]=new Array(s),p,v=0;v<s;++v)(p=l[v])&&(f[v]=p);f.sort(t)}return new dh(i,this._parents).order()}function oEe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function sEe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function aEe(){return Array.from(this)}function lEe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,o=n.length;i<o;++i){var l=n[i];if(l)return l}return null}function cEe(){let e=0;for(const t of this)++e;return e}function uEe(){return!this.node()}function hEe(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],o=0,l=i.length,s;o<l;++o)(s=i[o])&&e.call(s,s.__data__,o,i);return this}function fEe(e){return function(){this.removeAttribute(e)}}function dEe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function pEe(e,t){return function(){this.setAttribute(e,t)}}function gEe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function mEe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function yEe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function _Ee(e,t){var r=aA(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?dEe:fEe:typeof t=="function"?r.local?yEe:mEe:r.local?gEe:pEe)(r,t))}function SH(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function vEe(e){return function(){this.style.removeProperty(e)}}function bEe(e,t,r){return function(){this.style.setProperty(e,t,r)}}function xEe(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function wEe(e,t,r){return arguments.length>1?this.each((t==null?vEe:typeof t=="function"?xEe:bEe)(e,t,r??"")):__(this.node(),e)}function __(e,t){return e.style.getPropertyValue(t)||SH(e).getComputedStyle(e,null).getPropertyValue(t)}function SEe(e){return function(){delete this[e]}}function AEe(e,t){return function(){this[e]=t}}function EEe(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function TEe(e,t){return arguments.length>1?this.each((t==null?SEe:typeof t=="function"?EEe:AEe)(e,t)):this.node()[e]}function AH(e){return e.trim().split(/^|\s+/)}function Kk(e){return e.classList||new EH(e)}function EH(e){this._node=e,this._names=AH(e.getAttribute("class")||"")}EH.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function TH(e,t){for(var r=Kk(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function CH(e,t){for(var r=Kk(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function CEe(e){return function(){TH(this,e)}}function PEe(e){return function(){CH(this,e)}}function IEe(e,t){return function(){(t.apply(this,arguments)?TH:CH)(this,e)}}function REe(e,t){var r=AH(e+"");if(arguments.length<2){for(var n=Kk(this.node()),i=-1,o=r.length;++i<o;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof t=="function"?IEe:t?CEe:PEe)(r,t))}function kEe(){this.textContent=""}function MEe(e){return function(){this.textContent=e}}function OEe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function NEe(e){return arguments.length?this.each(e==null?kEe:(typeof e=="function"?OEe:MEe)(e)):this.node().textContent}function DEe(){this.innerHTML=""}function LEe(e){return function(){this.innerHTML=e}}function FEe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function BEe(e){return arguments.length?this.each(e==null?DEe:(typeof e=="function"?FEe:LEe)(e)):this.node().innerHTML}function zEe(){this.nextSibling&&this.parentNode.appendChild(this)}function $Ee(){return this.each(zEe)}function UEe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jEe(){return this.each(UEe)}function VEe(e){var t=typeof e=="function"?e:_H(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function HEe(){return null}function qEe(e,t){var r=typeof e=="function"?e:_H(e),n=t==null?HEe:typeof t=="function"?t:Xk(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function WEe(){var e=this.parentNode;e&&e.removeChild(this)}function XEe(){return this.each(WEe)}function KEe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function GEe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function YEe(e){return this.select(e?GEe:KEe)}function ZEe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function JEe(e){return function(t){e.call(this,t,this.__data__)}}function QEe(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function eTe(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,i=t.length,o;r<i;++r)o=t[r],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++n]=o;++n?t.length=n:delete this.__on}}}function tTe(e,t,r){return function(){var n=this.__on,i,o=JEe(t);if(n){for(var l=0,s=n.length;l<s;++l)if((i=n[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=r),i.value=t;return}}this.addEventListener(e.type,o,r),i={type:e.type,name:e.name,value:t,listener:o,options:r},n?n.push(i):this.__on=[i]}}function rTe(e,t,r){var n=QEe(e+""),i,o=n.length,l;if(arguments.length<2){var s=this.node().__on;if(s){for(var f=0,p=s.length,v;f<p;++f)for(i=0,v=s[f];i<o;++i)if((l=n[i]).type===v.type&&l.name===v.name)return v.value}return}for(s=t?tTe:eTe,i=0;i<o;++i)this.each(s(n[i],t,r));return this}function PH(e,t,r){var n=SH(e),i=n.CustomEvent;typeof i=="function"?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function nTe(e,t){return function(){return PH(this,e,t)}}function iTe(e,t){return function(){return PH(this,e,t.apply(this,arguments))}}function oTe(e,t){return this.each((typeof t=="function"?iTe:nTe)(e,t))}function*sTe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,o=n.length,l;i<o;++i)(l=n[i])&&(yield l)}var aTe=[null];function dh(e,t){this._groups=e,this._parents=t}function gb(){return new dh([[document.documentElement]],aTe)}function lTe(){return this}dh.prototype=gb.prototype={constructor:dh,select:OAe,selectAll:FAe,selectChild:UAe,selectChildren:qAe,filter:WAe,data:JAe,enter:XAe,exit:eEe,join:tEe,merge:rEe,selection:lTe,order:nEe,sort:iEe,call:sEe,nodes:aEe,node:lEe,size:cEe,empty:uEe,each:hEe,attr:_Ee,style:wEe,property:TEe,classed:REe,text:NEe,html:BEe,raise:$Ee,lower:jEe,append:VEe,insert:qEe,remove:XEe,clone:YEe,datum:ZEe,on:rTe,dispatch:oTe,[Symbol.iterator]:sTe};function Gk(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function IH(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function mb(){}var w2=.7,D5=1/w2,Fy="\\s*([+-]?\\d+)\\s*",S2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_f="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cTe=/^#([0-9a-f]{3,8})$/,uTe=new RegExp(`^rgb\\(${Fy},${Fy},${Fy}\\)$`),hTe=new RegExp(`^rgb\\(${_f},${_f},${_f}\\)$`),fTe=new RegExp(`^rgba\\(${Fy},${Fy},${Fy},${S2}\\)$`),dTe=new RegExp(`^rgba\\(${_f},${_f},${_f},${S2}\\)$`),pTe=new RegExp(`^hsl\\(${S2},${_f},${_f}\\)$`),gTe=new RegExp(`^hsla\\(${S2},${_f},${_f},${S2}\\)$`),iF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gk(mb,A2,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:oF,formatHex:oF,formatHex8:mTe,formatHsl:yTe,formatRgb:sF,toString:sF});function oF(){return this.rgb().formatHex()}function mTe(){return this.rgb().formatHex8()}function yTe(){return RH(this).formatHsl()}function sF(){return this.rgb().formatRgb()}function A2(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=cTe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?aF(t):r===3?new cc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Rx(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Rx(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=uTe.exec(e))?new cc(t[1],t[2],t[3],1):(t=hTe.exec(e))?new cc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fTe.exec(e))?Rx(t[1],t[2],t[3],t[4]):(t=dTe.exec(e))?Rx(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=pTe.exec(e))?uF(t[1],t[2]/100,t[3]/100,1):(t=gTe.exec(e))?uF(t[1],t[2]/100,t[3]/100,t[4]):iF.hasOwnProperty(e)?aF(iF[e]):e==="transparent"?new cc(NaN,NaN,NaN,0):null}function aF(e){return new cc(e>>16&255,e>>8&255,e&255,1)}function Rx(e,t,r,n){return n<=0&&(e=t=r=NaN),new cc(e,t,r,n)}function _Te(e){return e instanceof mb||(e=A2(e)),e?(e=e.rgb(),new cc(e.r,e.g,e.b,e.opacity)):new cc}function H4(e,t,r,n){return arguments.length===1?_Te(e):new cc(e,t,r,n??1)}function cc(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Gk(cc,H4,IH(mb,{brighter(e){return e=e==null?D5:Math.pow(D5,e),new cc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?w2:Math.pow(w2,e),new cc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new cc(Ug(this.r),Ug(this.g),Ug(this.b),L5(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lF,formatHex:lF,formatHex8:vTe,formatRgb:cF,toString:cF}));function lF(){return`#${Ag(this.r)}${Ag(this.g)}${Ag(this.b)}`}function vTe(){return`#${Ag(this.r)}${Ag(this.g)}${Ag(this.b)}${Ag((isNaN(this.opacity)?1:this.opacity)*255)}`}function cF(){const e=L5(this.opacity);return`${e===1?"rgb(":"rgba("}${Ug(this.r)}, ${Ug(this.g)}, ${Ug(this.b)}${e===1?")":`, ${e})`}`}function L5(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ug(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ag(e){return e=Ug(e),(e<16?"0":"")+e.toString(16)}function uF(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ih(e,t,r,n)}function RH(e){if(e instanceof ih)return new ih(e.h,e.s,e.l,e.opacity);if(e instanceof mb||(e=A2(e)),!e)return new ih;if(e instanceof ih)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),o=Math.max(t,r,n),l=NaN,s=o-i,f=(o+i)/2;return s?(t===o?l=(r-n)/s+(r<n)*6:r===o?l=(n-t)/s+2:l=(t-r)/s+4,s/=f<.5?o+i:2-o-i,l*=60):s=f>0&&f<1?0:l,new ih(l,s,f,e.opacity)}function bTe(e,t,r,n){return arguments.length===1?RH(e):new ih(e,t,r,n??1)}function ih(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Gk(ih,bTe,IH(mb,{brighter(e){return e=e==null?D5:Math.pow(D5,e),new ih(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?w2:Math.pow(w2,e),new ih(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new cc(wT(e>=240?e-240:e+120,i,n),wT(e,i,n),wT(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new ih(hF(this.h),kx(this.s),kx(this.l),L5(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=L5(this.opacity);return`${e===1?"hsl(":"hsla("}${hF(this.h)}, ${kx(this.s)*100}%, ${kx(this.l)*100}%${e===1?")":`, ${e})`}`}}));function hF(e){return e=(e||0)%360,e<0?e+360:e}function kx(e){return Math.max(0,Math.min(1,e||0))}function wT(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const kH=e=>()=>e;function xTe(e,t){return function(r){return e+r*t}}function wTe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function STe(e){return(e=+e)==1?MH:function(t,r){return r-t?wTe(t,r,e):kH(isNaN(t)?r:t)}}function MH(e,t){var r=t-e;return r?xTe(e,r):kH(isNaN(e)?t:e)}const fF=function e(t){var r=STe(t);function n(i,o){var l=r((i=H4(i)).r,(o=H4(o)).r),s=r(i.g,o.g),f=r(i.b,o.b),p=MH(i.opacity,o.opacity);return function(v){return i.r=l(v),i.g=s(v),i.b=f(v),i.opacity=p(v),i+""}}return n.gamma=e,n}(1);function Qd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var q4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ST=new RegExp(q4.source,"g");function ATe(e){return function(){return e}}function ETe(e){return function(t){return e(t)+""}}function TTe(e,t){var r=q4.lastIndex=ST.lastIndex=0,n,i,o,l=-1,s=[],f=[];for(e=e+"",t=t+"";(n=q4.exec(e))&&(i=ST.exec(t));)(o=i.index)>r&&(o=t.slice(r,o),s[l]?s[l]+=o:s[++l]=o),(n=n[0])===(i=i[0])?s[l]?s[l]+=i:s[++l]=i:(s[++l]=null,f.push({i:l,x:Qd(n,i)})),r=ST.lastIndex;return r<t.length&&(o=t.slice(r),s[l]?s[l]+=o:s[++l]=o),s.length<2?f[0]?ETe(f[0].x):ATe(t):(t=f.length,function(p){for(var v=0,x;v<t;++v)s[(x=f[v]).i]=x.x(p);return s.join("")})}var dF=180/Math.PI,W4={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function OH(e,t,r,n,i,o){var l,s,f;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(f=e*r+t*n)&&(r-=e*f,n-=t*f),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,f/=s),e*n<t*r&&(e=-e,t=-t,f=-f,l=-l),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*dF,skewX:Math.atan(f)*dF,scaleX:l,scaleY:s}}var Mx;function CTe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?W4:OH(t.a,t.b,t.c,t.d,t.e,t.f)}function PTe(e){return e==null||(Mx||(Mx=document.createElementNS("http://www.w3.org/2000/svg","g")),Mx.setAttribute("transform",e),!(e=Mx.transform.baseVal.consolidate()))?W4:(e=e.matrix,OH(e.a,e.b,e.c,e.d,e.e,e.f))}function NH(e,t,r,n){function i(p){return p.length?p.pop()+" ":""}function o(p,v,x,S,A,k){if(p!==x||v!==S){var R=A.push("translate(",null,t,null,r);k.push({i:R-4,x:Qd(p,x)},{i:R-2,x:Qd(v,S)})}else(x||S)&&A.push("translate("+x+t+S+r)}function l(p,v,x,S){p!==v?(p-v>180?v+=360:v-p>180&&(p+=360),S.push({i:x.push(i(x)+"rotate(",null,n)-2,x:Qd(p,v)})):v&&x.push(i(x)+"rotate("+v+n)}function s(p,v,x,S){p!==v?S.push({i:x.push(i(x)+"skewX(",null,n)-2,x:Qd(p,v)}):v&&x.push(i(x)+"skewX("+v+n)}function f(p,v,x,S,A,k){if(p!==x||v!==S){var R=A.push(i(A)+"scale(",null,",",null,")");k.push({i:R-4,x:Qd(p,x)},{i:R-2,x:Qd(v,S)})}else(x!==1||S!==1)&&A.push(i(A)+"scale("+x+","+S+")")}return function(p,v){var x=[],S=[];return p=e(p),v=e(v),o(p.translateX,p.translateY,v.translateX,v.translateY,x,S),l(p.rotate,v.rotate,x,S),s(p.skewX,v.skewX,x,S),f(p.scaleX,p.scaleY,v.scaleX,v.scaleY,x,S),p=v=null,function(A){for(var k=-1,R=S.length,z;++k<R;)x[(z=S[k]).i]=z.x(A);return x.join("")}}}var ITe=NH(CTe,"px, ","px)","deg)"),RTe=NH(PTe,", ",")",")"),v_=0,lv=0,U1=0,DH=1e3,F5,cv,B5=0,im=0,lA=0,E2=typeof performance=="object"&&performance.now?performance:Date,LH=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Yk(){return im||(LH(kTe),im=E2.now()+lA)}function kTe(){im=0}function z5(){this._call=this._time=this._next=null}z5.prototype=FH.prototype={constructor:z5,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Yk():+r)+(t==null?0:+t),!this._next&&cv!==this&&(cv?cv._next=this:F5=this,cv=this),this._call=e,this._time=r,X4()},stop:function(){this._call&&(this._call=null,this._time=1/0,X4())}};function FH(e,t,r){var n=new z5;return n.restart(e,t,r),n}function MTe(){Yk(),++v_;for(var e=F5,t;e;)(t=im-e._time)>=0&&e._call.call(void 0,t),e=e._next;--v_}function pF(){im=(B5=E2.now())+lA,v_=lv=0;try{MTe()}finally{v_=0,NTe(),im=0}}function OTe(){var e=E2.now(),t=e-B5;t>DH&&(lA-=t,B5=e)}function NTe(){for(var e,t=F5,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:F5=r);cv=e,X4(n)}function X4(e){if(!v_){lv&&(lv=clearTimeout(lv));var t=e-im;t>24?(e<1/0&&(lv=setTimeout(pF,e-E2.now()-lA)),U1&&(U1=clearInterval(U1))):(U1||(B5=E2.now(),U1=setInterval(OTe,DH)),v_=1,LH(pF))}}function gF(e,t,r){var n=new z5;return t=t==null?0:+t,n.restart(i=>{n.stop(),e(i+t)},t,r),n}var DTe=yH("start","end","cancel","interrupt"),LTe=[],BH=0,mF=1,K4=2,Cw=3,yF=4,G4=5,Pw=6;function cA(e,t,r,n,i,o){var l=e.__transition;if(!l)e.__transition={};else if(r in l)return;FTe(e,r,{name:t,index:n,group:i,on:DTe,tween:LTe,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:BH})}function Zk(e,t){var r=vh(e,t);if(r.state>BH)throw new Error("too late; already scheduled");return r}function Af(e,t){var r=vh(e,t);if(r.state>Cw)throw new Error("too late; already running");return r}function vh(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function FTe(e,t,r){var n=e.__transition,i;n[t]=r,r.timer=FH(o,0,r.time);function o(p){r.state=mF,r.timer.restart(l,r.delay,r.time),r.delay<=p&&l(p-r.delay)}function l(p){var v,x,S,A;if(r.state!==mF)return f();for(v in n)if(A=n[v],A.name===r.name){if(A.state===Cw)return gF(l);A.state===yF?(A.state=Pw,A.timer.stop(),A.on.call("interrupt",e,e.__data__,A.index,A.group),delete n[v]):+v<t&&(A.state=Pw,A.timer.stop(),A.on.call("cancel",e,e.__data__,A.index,A.group),delete n[v])}if(gF(function(){r.state===Cw&&(r.state=yF,r.timer.restart(s,r.delay,r.time),s(p))}),r.state=K4,r.on.call("start",e,e.__data__,r.index,r.group),r.state===K4){for(r.state=Cw,i=new Array(S=r.tween.length),v=0,x=-1;v<S;++v)(A=r.tween[v].value.call(e,e.__data__,r.index,r.group))&&(i[++x]=A);i.length=x+1}}function s(p){for(var v=p<r.duration?r.ease.call(null,p/r.duration):(r.timer.restart(f),r.state=G4,1),x=-1,S=i.length;++x<S;)i[x].call(e,v);r.state===G4&&(r.on.call("end",e,e.__data__,r.index,r.group),f())}function f(){r.state=Pw,r.timer.stop(),delete n[t];for(var p in n)return;delete e.__transition}}function BTe(e,t){var r=e.__transition,n,i,o=!0,l;if(r){t=t==null?null:t+"";for(l in r){if((n=r[l]).name!==t){o=!1;continue}i=n.state>K4&&n.state<G4,n.state=Pw,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[l]}o&&delete e.__transition}}function zTe(e){return this.each(function(){BTe(this,e)})}function $Te(e,t){var r,n;return function(){var i=Af(this,e),o=i.tween;if(o!==r){n=r=o;for(var l=0,s=n.length;l<s;++l)if(n[l].name===t){n=n.slice(),n.splice(l,1);break}}i.tween=n}}function UTe(e,t,r){var n,i;if(typeof r!="function")throw new Error;return function(){var o=Af(this,e),l=o.tween;if(l!==n){i=(n=l).slice();for(var s={name:t,value:r},f=0,p=i.length;f<p;++f)if(i[f].name===t){i[f]=s;break}f===p&&i.push(s)}o.tween=i}}function jTe(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=vh(this.node(),r).tween,i=0,o=n.length,l;i<o;++i)if((l=n[i]).name===e)return l.value;return null}return this.each((t==null?$Te:UTe)(r,e,t))}function Jk(e,t,r){var n=e._id;return e.each(function(){var i=Af(this,n);(i.value||(i.value={}))[t]=r.apply(this,arguments)}),function(i){return vh(i,n).value[t]}}function zH(e,t){var r;return(typeof t=="number"?Qd:t instanceof A2?fF:(r=A2(t))?(t=r,fF):TTe)(e,t)}function VTe(e){return function(){this.removeAttribute(e)}}function HTe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qTe(e,t,r){var n,i=r+"",o;return function(){var l=this.getAttribute(e);return l===i?null:l===n?o:o=t(n=l,r)}}function WTe(e,t,r){var n,i=r+"",o;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===n?o:o=t(n=l,r)}}function XTe(e,t,r){var n,i,o;return function(){var l,s=r(this),f;return s==null?void this.removeAttribute(e):(l=this.getAttribute(e),f=s+"",l===f?null:l===n&&f===i?o:(i=f,o=t(n=l,s)))}}function KTe(e,t,r){var n,i,o;return function(){var l,s=r(this),f;return s==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),f=s+"",l===f?null:l===n&&f===i?o:(i=f,o=t(n=l,s)))}}function GTe(e,t){var r=aA(e),n=r==="transform"?RTe:zH;return this.attrTween(e,typeof t=="function"?(r.local?KTe:XTe)(r,n,Jk(this,"attr."+e,t)):t==null?(r.local?HTe:VTe)(r):(r.local?WTe:qTe)(r,n,t))}function YTe(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function ZTe(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function JTe(e,t){var r,n;function i(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&ZTe(e,o)),r}return i._value=t,i}function QTe(e,t){var r,n;function i(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&YTe(e,o)),r}return i._value=t,i}function eCe(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=aA(e);return this.tween(r,(n.local?JTe:QTe)(n,t))}function tCe(e,t){return function(){Zk(this,e).delay=+t.apply(this,arguments)}}function rCe(e,t){return t=+t,function(){Zk(this,e).delay=t}}function nCe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?tCe:rCe)(t,e)):vh(this.node(),t).delay}function iCe(e,t){return function(){Af(this,e).duration=+t.apply(this,arguments)}}function oCe(e,t){return t=+t,function(){Af(this,e).duration=t}}function sCe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?iCe:oCe)(t,e)):vh(this.node(),t).duration}function aCe(e,t){if(typeof t!="function")throw new Error;return function(){Af(this,e).ease=t}}function lCe(e){var t=this._id;return arguments.length?this.each(aCe(t,e)):vh(this.node(),t).ease}function cCe(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Af(this,e).ease=r}}function uCe(e){if(typeof e!="function")throw new Error;return this.each(cCe(this._id,e))}function hCe(e){typeof e!="function"&&(e=bH(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],l=o.length,s=n[i]=[],f,p=0;p<l;++p)(f=o[p])&&e.call(f,f.__data__,p,o)&&s.push(f);return new gd(n,this._parents,this._name,this._id)}function fCe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,o=Math.min(n,i),l=new Array(n),s=0;s<o;++s)for(var f=t[s],p=r[s],v=f.length,x=l[s]=new Array(v),S,A=0;A<v;++A)(S=f[A]||p[A])&&(x[A]=S);for(;s<n;++s)l[s]=t[s];return new gd(l,this._parents,this._name,this._id)}function dCe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function pCe(e,t,r){var n,i,o=dCe(t)?Zk:Af;return function(){var l=o(this,e),s=l.on;s!==n&&(i=(n=s).copy()).on(t,r),l.on=i}}function gCe(e,t){var r=this._id;return arguments.length<2?vh(this.node(),r).on.on(e):this.each(pCe(r,e,t))}function mCe(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function yCe(){return this.on("end.remove",mCe(this._id))}function _Ce(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Xk(e));for(var n=this._groups,i=n.length,o=new Array(i),l=0;l<i;++l)for(var s=n[l],f=s.length,p=o[l]=new Array(f),v,x,S=0;S<f;++S)(v=s[S])&&(x=e.call(v,v.__data__,S,s))&&("__data__"in v&&(x.__data__=v.__data__),p[S]=x,cA(p[S],t,r,S,p,vh(v,r)));return new gd(o,this._parents,t,r)}function vCe(e){var t=this._name,r=this._id;typeof e!="function"&&(e=vH(e));for(var n=this._groups,i=n.length,o=[],l=[],s=0;s<i;++s)for(var f=n[s],p=f.length,v,x=0;x<p;++x)if(v=f[x]){for(var S=e.call(v,v.__data__,x,f),A,k=vh(v,r),R=0,z=S.length;R<z;++R)(A=S[R])&&cA(A,t,r,R,S,k);o.push(S),l.push(v)}return new gd(o,l,t,r)}var bCe=gb.prototype.constructor;function xCe(){return new bCe(this._groups,this._parents)}function wCe(e,t){var r,n,i;return function(){var o=__(this,e),l=(this.style.removeProperty(e),__(this,e));return o===l?null:o===r&&l===n?i:i=t(r=o,n=l)}}function $H(e){return function(){this.style.removeProperty(e)}}function SCe(e,t,r){var n,i=r+"",o;return function(){var l=__(this,e);return l===i?null:l===n?o:o=t(n=l,r)}}function ACe(e,t,r){var n,i,o;return function(){var l=__(this,e),s=r(this),f=s+"";return s==null&&(f=s=(this.style.removeProperty(e),__(this,e))),l===f?null:l===n&&f===i?o:(i=f,o=t(n=l,s))}}function ECe(e,t){var r,n,i,o="style."+t,l="end."+o,s;return function(){var f=Af(this,e),p=f.on,v=f.value[o]==null?s||(s=$H(t)):void 0;(p!==r||i!==v)&&(n=(r=p).copy()).on(l,i=v),f.on=n}}function TCe(e,t,r){var n=(e+="")=="transform"?ITe:zH;return t==null?this.styleTween(e,wCe(e,n)).on("end.style."+e,$H(e)):typeof t=="function"?this.styleTween(e,ACe(e,n,Jk(this,"style."+e,t))).each(ECe(this._id,e)):this.styleTween(e,SCe(e,n,t),r).on("end.style."+e,null)}function CCe(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function PCe(e,t,r){var n,i;function o(){var l=t.apply(this,arguments);return l!==i&&(n=(i=l)&&CCe(e,l,r)),n}return o._value=t,o}function ICe(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,PCe(e,t,r??""))}function RCe(e){return function(){this.textContent=e}}function kCe(e){return function(){var t=e(this);this.textContent=t??""}}function MCe(e){return this.tween("text",typeof e=="function"?kCe(Jk(this,"text",e)):RCe(e==null?"":e+""))}function OCe(e){return function(t){this.textContent=e.call(this,t)}}function NCe(e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&OCe(i)),t}return n._value=e,n}function DCe(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,NCe(e))}function LCe(){for(var e=this._name,t=this._id,r=UH(),n=this._groups,i=n.length,o=0;o<i;++o)for(var l=n[o],s=l.length,f,p=0;p<s;++p)if(f=l[p]){var v=vh(f,t);cA(f,e,r,p,l,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new gd(n,this._parents,e,r)}function FCe(){var e,t,r=this,n=r._id,i=r.size();return new Promise(function(o,l){var s={value:l},f={value:function(){--i===0&&o()}};r.each(function(){var p=Af(this,n),v=p.on;v!==e&&(t=(e=v).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(f)),p.on=t}),i===0&&o()})}var BCe=0;function gd(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function UH(){return++BCe}var Wf=gb.prototype;gd.prototype={constructor:gd,select:_Ce,selectAll:vCe,selectChild:Wf.selectChild,selectChildren:Wf.selectChildren,filter:hCe,merge:fCe,selection:xCe,transition:LCe,call:Wf.call,nodes:Wf.nodes,node:Wf.node,size:Wf.size,empty:Wf.empty,each:Wf.each,on:gCe,attr:GTe,attrTween:eCe,style:TCe,styleTween:ICe,text:MCe,textTween:DCe,remove:yCe,tween:jTe,delay:nCe,duration:sCe,ease:lCe,easeVarying:uCe,end:FCe,[Symbol.iterator]:Wf[Symbol.iterator]};function zCe(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var $Ce={time:null,delay:0,duration:250,ease:zCe};function UCe(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function jCe(e){var t,r;e instanceof gd?(t=e._id,e=e._name):(t=UH(),(r=$Ce).time=Yk(),e=e==null?null:e+"");for(var n=this._groups,i=n.length,o=0;o<i;++o)for(var l=n[o],s=l.length,f,p=0;p<s;++p)(f=l[p])&&cA(f,e,t,p,l,r||UCe(f,t));return new gd(n,this._parents,e,t)}gb.prototype.interrupt=zTe;gb.prototype.transition=jCe;function uv(e,t,r){this.k=e,this.x=t,this.y=r}uv.prototype={constructor:uv,scale:function(e){return e===1?this:new uv(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new uv(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};uv.prototype;var Qk={},VCe=Zc;Object.defineProperty(Qk,"__esModule",{value:!0});var jH=Qk.default=void 0,HCe=VCe(Jc()),qCe=xt;jH=Qk.default=(0,HCe.default)((0,qCe.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu");var e6={},WCe=Zc;Object.defineProperty(e6,"__esModule",{value:!0});var VH=e6.default=void 0,XCe=WCe(Jc()),KCe=xt;VH=e6.default=(0,XCe.default)((0,KCe.jsx)("path",{d:"M4 4h7V2H4c-1.1 0-2 .9-2 2v7h2zm6 9-4 5h12l-3-4-2.03 2.71zm7-4.5c0-.83-.67-1.5-1.5-1.5S14 7.67 14 8.5s.67 1.5 1.5 1.5S17 9.33 17 8.5M20 2h-7v2h7v7h2V4c0-1.1-.9-2-2-2m0 18h-7v2h7c1.1 0 2-.9 2-2v-7h-2zM4 13H2v7c0 1.1.9 2 2 2h7v-2H4z"}),"Wallpaper");var t6={},GCe=Zc;Object.defineProperty(t6,"__esModule",{value:!0});var HH=t6.default=void 0,YCe=GCe(Jc()),ZCe=xt;HH=t6.default=(0,YCe.default)((0,ZCe.jsx)("path",{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27z"}),"Layers");var r6={},JCe=Zc;Object.defineProperty(r6,"__esModule",{value:!0});var qH=r6.default=void 0,QCe=JCe(Jc()),e4e=xt;qH=r6.default=(0,QCe.default)((0,e4e.jsx)("path",{d:"m16.24 11.51 1.57-1.57-3.75-3.75-1.57 1.57-4.14-4.13c-.78-.78-2.05-.78-2.83 0l-1.9 1.9c-.78.78-.78 2.05 0 2.83l4.13 4.13L3 17.25V21h3.75l4.76-4.76 4.13 4.13c.95.95 2.23.6 2.83 0l1.9-1.9c.78-.78.78-2.05 0-2.83zm-7.06-.44L5.04 6.94l1.89-1.9L8.2 6.31 7.02 7.5l1.41 1.41 1.19-1.19 1.45 1.45zm7.88 7.89-4.13-4.13 1.9-1.9 1.45 1.45-1.19 1.19 1.41 1.41 1.19-1.19 1.27 1.27zm3.65-11.92c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.47-.47-1.12-.29-1.41 0l-1.83 1.83 3.75 3.75z"}),"DesignServices");var n6={},t4e=Zc;Object.defineProperty(n6,"__esModule",{value:!0});var WH=n6.default=void 0,r4e=t4e(Jc()),n4e=xt;WH=n6.default=(0,r4e.default)((0,n4e.jsx)("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5zm4-3H19v1h1.5V11H19v2h-1.5V7h3zM9 9.5h1v-1H9zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm10 5.5h1v-3h-1z"}),"PictureAsPdf");var Bn=function(){return Bn=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Bn.apply(this,arguments)};function i4e(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function o4e(e,t,r,n){function i(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function s(v){try{p(n.next(v))}catch(x){l(x)}}function f(v){try{p(n.throw(v))}catch(x){l(x)}}function p(v){v.done?o(v.value):i(v.value).then(s,f)}p((n=n.apply(e,[])).next())})}function s4e(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,l;return l={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function s(p){return function(v){return f([p,v])}}function f(p){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(r=0)),r;)try{if(n=1,i&&(o=p[0]&2?i.return:p[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,p[1])).done)return o;switch(i=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,i=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(v){p=[6,v],i=0}finally{n=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function Eg(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var a4e=function(){function e(t){var r=this,n=this;this.registeredElements={},this.baseLayers=[],this.firstSymbolLayer=void 0,this.eventHandlers={layerchange:[],viewportchange:[],addsource:[],addlayer:[]},this.wrapper={on:function(f,p,v,x){if(n.eventHandlers[f]){typeof v=="string"&&(x=v,v={}),n.eventHandlers[f].push({handler:p,options:v});var S=[f,p];x&&typeof x=="string"&&(n.initRegisteredElements(x),n.registeredElements[x].wrapperEvents.push(S))}},off:function(f,p){n.eventHandlers[f]&&(n.eventHandlers[f]=n.eventHandlers[f].filter(function(v){return Object.is(v.handler,p)?!1:v}))},fire:function(f,p){if(n.eventHandlers[f]){var v=p||window,x=new Event(f);n.eventHandlers[f].forEach(function(S){S.handler.call(v,x,n,p)})}},layerState:[],layerStateString:"",oldLayerStateStrings:{},buildLayerObject:function(f){if(f)return{id:f.id,type:f.type,visible:f.visibility!=="none",baseLayer:n.baseLayers.indexOf(f.id)!==-1}},buildLayerObjects:function(){return n.map.style._order.map(function(f){return n.wrapper.buildLayerObject(n.map.style._layers[f])}).filter(function(f){return typeof f<"u"})},refreshLayerState:function(){n.wrapper.layerState=n.wrapper.buildLayerObjects(),JSON.stringify(n.wrapper.layerState)!==n.wrapper.layerStateString&&(n.wrapper.fire("layerchange"),n.wrapper.layerStateString=JSON.stringify(n.wrapper.layerState))},viewportState:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0},viewportStateString:"{}",oldViewportStateString:"{}",getViewport:function(){return typeof n.map.getCenter=="function"?{center:function(f){var p=f.lng,v=f.lat;return{lng:p,lat:v}}(n.map.getCenter()),zoom:n.map.getZoom(),bearing:n.map.getBearing(),pitch:n.map.getPitch()}:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0}},refreshViewport:function(){n.wrapper.viewportState=n.wrapper.getViewport()}},this.cancelled=!1,this.initRegisteredElements=function(f,p){(typeof n.registeredElements[f]>"u"||typeof p<"u"&&p)&&(n.registeredElements[f]={layers:[],sources:[],images:[],events:[],controls:[],wrapperEvents:[]})},this.addLayer=function(f,p,v){return n.map.style&&(v&&typeof v=="string"&&typeof f.id<"u"&&(n.initRegisteredElements(v),n.registeredElements[v].layers.push(f.id),f!=null&&f.source&&typeof(f==null?void 0:f.source)!="string"&&n.registeredElements[v].sources.push(f.id)),n.map.addLayer(f,p),n.wrapper.fire("addlayer",{layer_id:f.id})),r},this.addSource=function(f,p,v){return n.map.style&&(v&&typeof v=="string"&&typeof f<"u"&&(n.initRegisteredElements(v),n.registeredElements[v].sources.push(f)),n.map.addSource(f,p),n.wrapper.fire("addsource",{source_id:f})),r},this.addImage=function(f,p,v,x){return n.map.style?typeof v=="string"&&typeof x>"u"?n.addImage(f,p,void 0,v):(x&&typeof x=="string"&&typeof f<"u"&&(n.initRegisteredElements(x),n.registeredElements[x].images.push(f)),n.map.addImage(f,p,v),r):r},this.on=function(f,p,v,x){var S;if(typeof v=="string"&&typeof p=="function")return n.on.call(n,f,void 0,p,v);var A=[f,p,v];return p||(A=[f,v]),x&&typeof x=="string"&&(n.initRegisteredElements(x),n.registeredElements[x].events.push(A)),(S=n.map).on.apply(S,A),r},this.addControl=function(f,p,v){return v&&typeof v=="string"&&(n.initRegisteredElements(v),n.registeredElements[v].controls.push(f)),n.map.addControl(f,p),r},this.cleanup=function(f){n.map.style&&typeof n.registeredElements[f]<"u"&&(n.registeredElements[f].layers.forEach(function(p){n.map.style.getLayer(p)&&n.map.style.removeLayer(p)}),n.registeredElements[f].sources.forEach(function(p){n.map.style.getSource(p)&&n.map.style.removeSource(p)}),n.registeredElements[f].images.forEach(function(p){n.map.hasImage(p)&&n.map.style.removeImage(p)}),n.registeredElements[f].events.forEach(function(p){var v;(v=n.map).off.apply(v,p)}),n.registeredElements[f].controls.forEach(function(p){n.map.removeControl(p)}),n.registeredElements[f].wrapperEvents.forEach(function(p){var v;(v=n.wrapper).off.apply(v,p)}),n.initRegisteredElements(f,!0))};var i=["moveLayer","removeLayer","removeSource","setPaintProperty","setLayoutProperty"];i.forEach(function(f){r[f]=function(){for(var p,v=[],x=0;x<arguments.length;x++)v[x]=arguments[x];return n.map&&n.map.style&&typeof n.map.style[f]=="function"&&(p=n.map.style)[f].apply(p,v),n.map._update?n.map._update(!0):void 0}});var o=["getLayer","getSource","listImages","getPaintProperty","getLayoutProperty","removeImage"];o.forEach(function(f){r[f]=function(){for(var p,v=[],x=0;x<arguments.length;x++)v[x]=arguments[x];return n.map&&n.map.style?(p=n.map.style)[f].apply(p,v):!1}}),this.addNativeMaplibreFunctionsAndProps=function(){Object.getOwnPropertyNames(Object.getPrototypeOf(r.map)).forEach(function(f){typeof r[f]>"u"&&(r[f]=function(){for(var p,v=[],x=0;x<arguments.length;x++)v[x]=arguments[x];return(p=n.map)[f].apply(p,v)})}),Object.keys(r.map).forEach(function(f){typeof r[f]>"u"&&(r[f]=n.map[f])})};var l=["getZoom","setZoom","getCenter","setCenter","getBearing","setBearing","getPitch","setPitch","jumpTo","flyTo","panTo","panBy","panBy","zoomTo","zoomIn","zoomOut","getPadding","setPadding","rotateTo","resetNorth","resetNorthPitch","snapToNorth","cameraForBounds","fitBounds","fitScreenCoordinates","getFreeCameraOptions","setFreeCameraOptions","easeTo","stop"];l.forEach(function(f){r[f]=function(){for(var p,v=[],x=0;x<arguments.length;x++)v[x]=arguments[x];if(typeof n.map[f]=="function")return(p=n.map[f]).call.apply(p,Eg([n.map],v,!1))}});var s=function(){return o4e(r,void 0,void 0,function(){return s4e(this,function(f){switch(f.label){case 0:return typeof t.mapOptions.style=="string"&&t.mapOptions.style.indexOf("mapbox://")===-1?[4,fetch(t.mapOptions.style).then(function(p){if(p.ok)return p.json();throw new Error("error loading map style.json")}).then(function(p){p.layers.forEach(function(v){n.baseLayers.push(v.id),!n.firstSymbolLayer&&v.type==="symbol"&&(n.firstSymbolLayer=v.id)}),n.styleJson=p,t.mapOptions.style=p}).catch(function(p){console.log(p)})]:[3,2];case 1:f.sent(),f.label=2;case 2:return n.map=new HZ.Map(t.mapOptions),n.addNativeMaplibreFunctionsAndProps(),n.wrapper.refreshViewport(),n.wrapper.fire("viewportchange"),n.map.on("load",function(){n.addNativeMaplibreFunctionsAndProps()}),n.map.on("move",function(){n.wrapper.viewportState=n.wrapper.getViewport(),n.wrapper.fire("viewportchange")}),n.map.on("idle",function(){n.wrapper.refreshLayerState()}),n.map.on("data",function(){n.wrapper.refreshLayerState()}),typeof t.onReady=="function"&&t.onReady(n.map,n),[2]}})})};s()}return e}(),l4e=eb({palette:{mode:"light"}}),c4e=eb({palette:{mode:"dark"}}),u4e=function(e){return Bn(Bn({},e==="light"?l4e:c4e),{palette:Bn({mode:e},e==="dark"?{primary:{main:"#009EE0"},secondary:{main:"#747577"},background:{paper:"#313131"},text:{primary:"#FFF",contrast:"#000"},topToolbar:{barColor:"#000"},navigation:{navColor:"#313131",navHover:"#747577"},GPS:{GPSActiveColor:"#fff",GPSInactiveColor:"#fff",GPSActiveBackgroundColor:"#747577"},compass:{compColor:"#313131",compHover:"#747577",compStroke:"#d3dce1",compNorth:"#cf003f",compSouth:"#d3dcf0"}}:{primary:{main:"#009EE0"},secondary:{main:"#747577"},text:{primary:"#000",contrast:"#fff"},topToolbar:{barColor:"#fff"},navigation:{navColor:"#fff",navHover:"#f5f5f5"},GPS:{GPSActiveColor:"#009EE0",GPSInactiveColor:"#000",GPSActiveBackgroundColor:"#fff"},compass:{compColor:"#fff",compHover:"#f5f5f5",compStroke:"#009ee0",compNorth:"#cf003f",compSouth:"#d3dcf0"}})})},h4e=function(e){var t,r=u4e(["light","dark"].includes(e)?e:"light");return eb(r,{components:{MuiTypography:{styleOverrides:{root:{}}},MuiAppBar:{styleOverrides:{root:{backgroundColor:r.palette.topToolbar.barColor}}},MuiButton:{variants:[{props:{variant:"navtools"},style:(t={minWidth:"20px",minHeight:"20px",fontWeight:600},t[r.breakpoints.down("md")]={width:"50px",height:"50px",fontSize:"1.4em"},t[r.breakpoints.up("md")]={width:"30px",height:"30px",fontSize:"1.2em"},t.color=r.palette.text.primary,t.backgroundColor=r.palette.navigation.navColor,t.borderRadius="23%",t.margin="0.15px",t.marginTop="4px",t[":hover"]={backgroundColor:r.palette.navigation.navHover},t)}]},MuiListItemText:{styleOverrides:{primary:function(n){var i=n.ownerState;return(i==null?void 0:i.variant)==="layerlist"?{fontSize:"0.9rem"}:{}},secondary:function(n){var i=n.ownerState;return(i==null?void 0:i.variant)==="layerlist"?{fontSize:"0.7rem"}:{}}}}}})},f4e={source_openmaptiles_url:"https://wms.wheregroup.com/tileserver/tile/world-0-14.json",sprite:"https://wms.wheregroup.com/tileserver/sprites/osm-bright",glyphs:"https://wms.wheregroup.com/tileserver/fonts/{fontstack}/{range}.pbf",sourceOptions_tiles:["https://wms.wheregroup.com/tileserver/tile/world-0-14/{z}/{x}/{y}.pbf"]},d4e=Pe.createContext({});function p4e(e){var t=Pe.useState([]),r=t[0],n=t[1],i=Pe.useState([]),o=i[0],l=i[1],s=Pe.useState([]),f=s[0],p=s[1],v=Pe.useState(f4e.sourceOptions_tiles[0]),x=v[0],S=v[1],A=me.useMemo(function(){return{layerId:"openmaptiles",sourceOptions:{type:"vector",tiles:[x]}}},[x]),k=function(U){if(U){var K=[],ne=[];U.layers.forEach(function(ee,Q){ee.type==="symbol"?ne.push(ee):(Q===0&&(ee.id=U.name||"background"),K.push(ee))}),l(K),p(ne)}};me.useEffect(function(){if(r.filter(function(K){return!(K!=null&&K.id)}).length){var U=Eg([],r,!0);U.forEach(function(K){K!=null&&K.id||(K.id=f2())}),n(U)}},[r]);var R=me.useCallback(function(U,K){var ne,ee=(ne=r==null?void 0:r.filter)===null||ne===void 0?void 0:ne.call(r,function(G){return G.id===U});if(ee.length>0){var Q=Eg([],r,!0),re=ee[0],Se=r.indexOf(re),J=K(Se);J>=0&&J<=r.length-1&&(Q.splice(Se,1),Q.splice(J,0,re),n(Q))}},[r]),z=me.useCallback(function(U){R(U,function(K){return K+1})},[R]),N=me.useCallback(function(U){R(U,function(K){return K-1})},[R]),B={layers:r,setLayers:n,backgroundLayers:o,setBackgroundLayers:l,symbolLayers:f,setSymbolLayers:p,updateStyle:k,vtLayerConfig:A,tileUrl:x,setTileUrl:S,moveUp:N,moveDown:z,moveLayer:R};return Pe.createElement(d4e.Provider,{value:B},e.children)}var uA=Pe.createContext({}),g4e=function(e){var t=e.children,r=me.useState(void 0),n=r[0],i=r[1],o=me.useState([]),l=o[0],s=o[1],f=me.useRef([]),p=me.useRef({}),v=function(A){if(A){typeof p.current[A]<"u"&&delete p.current[A];var k=f.current.indexOf(A);k>-1&&f.current.splice(k,1),s(Eg([],f.current,!0)),f.current.length===0&&n&&i(void 0)}else v("anonymous_map")},x=function(A){if(i(A),l.length===0){var k="anonymous_map";s(Eg(Eg([],l,!0),[k],!1)),p.current[k]=A}},S={map:n,setMap:x,maps:p.current,mapIds:l,registerMap:function(A,k){A&&k&&(p.current[A]=k,f.current.push(A),s(Eg([],f.current,!0)),(!n||(n==null?void 0:n.cancelled)===!0)&&i(k))},removeMap:v,mapExists:function(A){return A&&Object.keys(p.current).indexOf(A)===-1?!1:!(!A&&!n)},getMap:function(A){return A&&l.indexOf(A)!==-1?p.current[A]:!A&&n?n:null}};return Pe.createElement(uA.Provider,{value:S},Pe.createElement(p4e,null,Pe.createElement(cte,{theme:h4e("light")},t)))},Iw={mapId:void 0,options:{center:{lng:8.607,lat:53.1409349},zoom:11,container:"",style:{version:8,name:"blank",center:[0,0],zoom:0,sources:{},sprite:"https://wms.wheregroup.com/tileserver/sprites/osm-bright",glyphs:"https://wms.wheregroup.com/tileserver/fonts/{fontstack}/{range}.pbf",layers:[{id:"_background",type:"background",paint:{"background-color":"rgba(0,0,0,0)"}}]}}},XH=function(e){var t,r,n=me.useRef(),i=me.useRef(),o=me.useContext(uA),l=me.useRef(e.mapId),s=me.useRef(!1),f=me.useRef((t=e.options)===null||t===void 0?void 0:t.style);return me.useEffect(function(){var p=l.current;return function(){var v,x;s.current=!1,o.removeMap(p),n.current&&((x=(v=n.current.map)===null||v===void 0?void 0:v.remove)===null||x===void 0||x.call(v),n.current.cancelled=!0,n.current=void 0)}},[]),me.useEffect(function(){var p,v;s.current||i.current&&(s.current=!0,n.current=new a4e({mapOptions:Bn(Bn(Bn({style:""},e.options),!((p=e==null?void 0:e.options)===null||p===void 0)&&p.style?{}:{style:(v=Iw==null?void 0:Iw.options)===null||v===void 0?void 0:v.style}),{container:i.current}),onReady:function(x,S){x.once("load",function(){S!=null&&S.cancelled?x.remove():(window._map=x,e.mapId?o.registerMap(e.mapId,S):o.setMap(S))})}}))},[e.options,e.mapId]),me.useEffect(function(){var p,v;!((p=n.current)===null||p===void 0)&&p.map&&(!((v=e==null?void 0:e.options)===null||v===void 0)&&v.style)&&f.current!==e.options.style&&(f.current=e.options.style,n.current.map.setStyle(e.options.style))},[(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.style]),Pe.createElement("div",{ref:i,className:"mapContainer",style:e.style})};XH.defaultProps=Iw;function KH(e){var t=me.useContext(uA),r=me.useRef(!1),n=me.useRef(),i=me.useState(),o=i[0],l=i[1],s=me.useRef(void 0),f=me.useState([]),p=f[0],v=f[1],x=me.useRef(),S=me.useRef(f2()),A=me.useCallback(function(R){var z,N;return!(!((z=e==null?void 0:e.filter)===null||z===void 0)&&z.includeBaseLayers)&&(R!=null&&R.baseLayer)?!1:typeof((N=e.filter)===null||N===void 0?void 0:N.matchLayerIds)<"u"?e.filter.matchLayerIds instanceof RegExp?e.filter.matchLayerIds.test(R.id):R.id.includes(e.filter.matchLayerIds):!0},[e.filter]),k=me.useCallback(function(){if(n.current){var R=n.current.wrapper.layerState.filter(A),z=JSON.stringify(R);x.current!==z&&(x.current=z,v(R))}},[A]);return me.useEffect(function(){var R=S.current;return function(){n.current&&(n.current.cleanup(R),n.current=void 0),r.current=!1}},[]),me.useEffect(function(){var R,z,N,B;if(!(!t.mapExists(e.mapId)||r.current)){if(r.current=!0,n.current=t.getMap(e.mapId),!n.current){r.current=!1;return}!((R=e==null?void 0:e.watch)===null||R===void 0)&&R.viewport&&(l(n.current.wrapper.viewportState),n.current.wrapper.on("viewportchange",function(){var U,K;s.current!==((U=n.current)===null||U===void 0?void 0:U.wrapper.viewportStateString)&&l((K=n.current)===null||K===void 0?void 0:K.wrapper.viewportState)},S.current)),!((z=e==null?void 0:e.watch)===null||z===void 0)&&z.layers&&(k(),n.current.wrapper.on("layerchange",k,{includeBaseLayers:(N=e==null?void 0:e.filter)===null||N===void 0?void 0:N.includeBaseLayers,matchLayerIds:(B=e==null?void 0:e.filter)===null||B===void 0?void 0:B.matchLayerIds},S.current))}},[t.mapIds,t,e.mapId,k,e]),{layers:p,viewport:o}}KH.defaultProps={mapId:void 0,watch:{layers:!0,sources:!1,viewport:!1},filter:{includeBaseLayers:!1}};function Sm(e){var t=me.useContext(uA),r=me.useState({map:void 0,ready:!1}),n=r[0],i=r[1],o=KH({mapId:e==null?void 0:e.mapId,watch:{viewport:!1,layers:!!(e!=null&&e.waitForLayer),sources:!1},filter:{includeBaseLayers:!0}}),l=me.useRef(),s=me.useRef(f2()),f=function(){l.current&&l.current.cleanup(s.current)};return me.useEffect(function(){return function(){f(),l.current=void 0}},[]),me.useEffect(function(){var p;if(l.current&&l.current.cancelled===!0&&(l.current=void 0,i({map:void 0,ready:!1})),!(l.current||!t.mapExists(e==null?void 0:e.mapId))){if(e!=null&&e.waitForLayer){var v=!1;if((p=o==null?void 0:o.layers)===null||p===void 0||p.forEach(function(x){x.id===(e==null?void 0:e.waitForLayer)&&(v=!0)}),!v)return}l.current=t.getMap(e==null?void 0:e.mapId),i({map:l.current,ready:!0})}},[t.mapIds,o.layers,t,e]),{map:n.map,mapIsReady:n.ready,componentId:s.current,layers:o.layers,cleanup:f}}var GH=function(e){var t=Sm({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=me.useState(!1),n=r[0],i=r[1],o=function(){navigator.geolocation.getCurrentPosition(l,s)},l=me.useCallback(function(f){var p,v,x;(x=(p=t.map)===null||p===void 0?void 0:(v=p.map).setCenter)===null||x===void 0||x.call(v,[f.coords.longitude,f.coords.latitude])},[t.map]),s=function(){console.log("Access of user location denied"),i(!0)};return Pe.createElement(Pe.Fragment,null,Pe.createElement(Iv,{variant:"navtools",sx:{zIndex:1002,color:n?e.offColor:e.onColor},onClick:o,disabled:n},Pe.createElement(BU,{sx:{fontSize:{xs:"1.4em",md:"1em"}}})))};GH.defaultProps={mapId:void 0};Pe.createContext({});var _F=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","hillshade","background"];function m4e(e){var t,r,n,i,o,l,s,f,p;return typeof e.options.source=="string"?{source:e.options.source}:e.geojson&&(!(!((t=e.options)===null||t===void 0)&&t.source)||typeof((r=e==null?void 0:e.options)===null||r===void 0?void 0:r.source)!="string"&&(!((i=(n=e.options)===null||n===void 0?void 0:n.source)===null||i===void 0)&&i.attribution)&&!(!((l=(o=e.options)===null||o===void 0?void 0:o.source)===null||l===void 0)&&l.type))?{source:{type:"geojson",data:e.geojson||"",attribution:typeof((s=e==null?void 0:e.options)===null||s===void 0?void 0:s.source)!="string"&&(!((f=e.options.source)===null||f===void 0)&&f.attribution)?(p=e.options.source)===null||p===void 0?void 0:p.attribution:""}}:{}}function y4e(e,t){var r;if(e!=null&&e.insertBeforeLayer)return e.insertBeforeLayer;if(e!=null&&e.insertBeforeFirstSymbolLayer)return(r=t==null?void 0:t.map)===null||r===void 0?void 0:r.firstSymbolLayer}function Y4(e){var t,r=Sm({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),n=me.useRef(""),i=me.useRef(""),o=me.useRef(""),l=me.useState(),s=l[0],f=l[1],p=me.useRef(e.layerId||(e.idPrefix?e.idPrefix:"Layer-")+r.componentId),v=me.useCallback(function(){var x,S,A,k,R,z,N;if(!(!r.map||r!=null&&r.map.cancelled)&&(r.map.map.getLayer(p.current)&&r.cleanup(),typeof((x=e==null?void 0:e.options)===null||x===void 0?void 0:x.source)!="string"&&r.map.map.getSource(p.current)&&r.map.map.removeSource(p.current),!(typeof e.options.source=="string"&&(e.options.source===""||!r.map.map.getSource(e.options.source)))&&!(typeof((S=e==null?void 0:e.options)===null||S===void 0?void 0:S.source)!="string"&&!e.geojson&&!(!((k=(A=e==null?void 0:e.options)===null||A===void 0?void 0:A.source)===null||k===void 0)&&k.data)&&((R=e==null?void 0:e.options)===null||R===void 0?void 0:R.type)!=="background")&&!(typeof e.options.type>"u"))){try{r.map.addLayer(Bn(Bn(Bn({},e.options),m4e(e)),{id:p.current}),y4e(e,r),r.componentId)}catch(K){console.error("Failed to add layer:",K)}f(function(){var K;return(K=r.map)===null||K===void 0?void 0:K.map.getLayer(p.current)});var B=function(){var K;!((K=r.map)===null||K===void 0)&&K.map.getLayer(p.current)||v()};r.map.on("styledata",B,r.componentId);var U=function(K,ne,ee){var Q,re=ee.source_id;r.map&&typeof((Q=e==null?void 0:e.options)===null||Q===void 0?void 0:Q.source)=="string"&&e.options.source===re&&v()};r.map.wrapper.on("addsource",U,r.componentId),i.current=JSON.stringify((z=e.options)===null||z===void 0?void 0:z.paint),o.current=JSON.stringify((N=e.options)===null||N===void 0?void 0:N.layout),n.current=e.options.type}},[e,r]);return me.useEffect(function(){var x,S,A,k,R;r.map&&(!e.geojson&&!e.options.source&&((x=e==null?void 0:e.options)===null||x===void 0?void 0:x.type)!=="background"||((S=r.map)===null||S===void 0?void 0:S.cancelled)===!1&&(!((R=(k=(A=r==null?void 0:r.map)===null||A===void 0?void 0:A.map)===null||k===void 0?void 0:k.getLayer)===null||R===void 0)&&R.call(k,p.current))&&(_F.indexOf(e.options.type)===-1||_F.indexOf(e.options.type)!==-1&&e.options.type===n.current)||v())},[r.map,r.mapIsReady,e,v]),me.useEffect(function(){var x,S,A,k,R,z;((x=r.map)===null||x===void 0?void 0:x.cancelled)===!0||!(!((k=(A=(S=r.map)===null||S===void 0?void 0:S.map)===null||A===void 0?void 0:A.getSource)===null||k===void 0)&&k.call(A,p.current))||(z=(R=r.map.map.getSource(p.current))===null||R===void 0?void 0:R.setData)===null||z===void 0||z.call(R,e.geojson)},[e.geojson,r.map,e.options.type]),me.useEffect(function(){var x,S,A,k,R,z;if(!(((x=r.map)===null||x===void 0?void 0:x.cancelled)===!0||!r.map||!(!((k=(A=(S=r.map)===null||S===void 0?void 0:S.map)===null||A===void 0?void 0:A.getLayer)===null||k===void 0)&&k.call(A,p.current))||e.options.type!==n.current)){var N,B=JSON.stringify(e.options.layout);if(e.options.layout&&B!==o.current){var U=JSON.parse(o.current);for(N in e.options.layout)!((R=e.options.layout)===null||R===void 0)&&R[N]&&e.options.layout[N]!==U[N]&&r.map.map.setLayoutProperty(p.current,N,e.options.layout[N]);o.current=B}var K=JSON.stringify(e.options.paint);if(K!==i.current){var ne=JSON.parse(i.current);for(N in e.options.paint)!((z=e.options.paint)===null||z===void 0)&&z[N]&&e.options.paint[N]!==ne[N]&&r.map.map.setPaintProperty(p.current,N,e.options.paint[N]);i.current=K}}},[e.options,r.map]),me.useEffect(function(){!e.insertBeforeLayer||!r.map||!r.map.getLayer(e.insertBeforeLayer)||!r.map.getLayer(p.current)||r.map.moveLayer(p.current,e.insertBeforeLayer)},[r.map,e.insertBeforeLayer]),me.useEffect(function(){return function(){r.cleanup()}},[]),me.useEffect(function(){var x;if(!(typeof((x=e==null?void 0:e.options)===null||x===void 0?void 0:x.source)!="string"||!r.map)){var S=function(){var k,R,z;typeof((k=e==null?void 0:e.options)===null||k===void 0?void 0:k.source)=="string"&&(!((z=(R=r==null?void 0:r.map)===null||R===void 0?void 0:R.getSource)===null||z===void 0)&&z.call(R,e.options.source))&&!r.map.getLayer(p.current)&&v()};r.map.on("sourcedataloading",S);var A=function(k,R,z){var N,B=z.source_id;r.map&&typeof((N=e==null?void 0:e.options)===null||N===void 0?void 0:N.source)=="string"&&e.options.source===B&&v()};return r.map.wrapper.on("addsource",A),function(){r!=null&&r.map&&(r.map.off("sourcedataloading",S),r.map.wrapper.off("addsource",A))}}},[r.map,(t=e.options)===null||t===void 0?void 0:t.source]),me.useEffect(function(){var x,S,A;if(!(!e.onClick||!(r!=null&&r.map)||!(!((S=(x=r==null?void 0:r.map)===null||x===void 0?void 0:x.getLayer)===null||S===void 0)&&S.call(x,p.current)))){var k=e.onClick;return(A=r.map)===null||A===void 0||A.on("click",p.current,k),function(){var R;k&&(r!=null&&r.map)&&((R=r.map)===null||R===void 0||R.off("click",p.current,k))}}},[r.map,e.onClick]),me.useEffect(function(){var x,S,A;if(!(!e.onHover||!(r!=null&&r.map)||!(!((S=(x=r==null?void 0:r.map)===null||x===void 0?void 0:x.getLayer)===null||S===void 0)&&S.call(x,p.current)))){var k=e.onHover;return(A=r.map)===null||A===void 0||A.on("mousemove",p.current,k),function(){var R;k&&(r!=null&&r.map)&&((R=r.map)===null||R===void 0||R.off("mousemove",p.current,k))}}},[r.map,e.onHover]),me.useEffect(function(){var x,S,A;if(!(!e.onLeave||!(r!=null&&r.map)||!(!((S=(x=r==null?void 0:r.map)===null||x===void 0?void 0:x.getLayer)===null||S===void 0)&&S.call(x,p.current)))){var k=e.onLeave;return(A=r.map)===null||A===void 0||A.on("mouseleave",p.current,k),function(){var R;k&&(r!=null&&r.map)&&((R=r.map)===null||R===void 0||R.off("mouseleave",p.current,k))}}},[r.map,e.onLeave]),{map:r.map,layer:s,layerId:p.current,componentId:r.componentId,mapHook:r}}Y4.defaultProps={};var _4e=function(e,t){switch(e){case"fill":return t!=null&&t.fill?t.fill:{"fill-color":"rgba(10,240,256,0.6)","fill-outline-color":"rgba(20,230,256,0.8)"};case"line":return t!=null&&t.line?t.line:{"line-color":"rgb(203,211,2)","line-width":5,"line-blur":0};case"circle":return t!=null&&t.circle?t.circle:{"circle-color":"rgba(10,240,256,0.8)","circle-stroke-color":"#fff","circle-stroke-width":2,"circle-radius":4};default:return{}}},Ox={Position:"circle",Point:"circle",MultiPoint:"circle",LineString:"line",MultiLineString:"line",Polygon:"fill",MultiPolygon:"fill",GeometryCollection:"circle"},YH=function(e){var t;return(e==null?void 0:e.type)==="Feature"?Ox!=null&&Ox[(t=e==null?void 0:e.geometry)===null||t===void 0?void 0:t.type]?Ox[e.geometry.type]:"circle":(e==null?void 0:e.type)==="FeatureCollection"?e.features.length?YH(e.features[0]):"circle":"fill"};function v4e(e){var t,r=Sm({mapId:e.mapId}),n=me.useState(),i=n[0],o=n[1],l=me.useRef(e.sourceId||(e.idPrefix?e.idPrefix:"Source-")+r.componentId),s=me.useCallback(function(){var p,v;if(r.map&&(!((v=(p=r.map)===null||p===void 0?void 0:p.style)===null||v===void 0)&&v._layers)){for(var x=0,S=Object.entries(r.map.style._layers);x<S.length;x++){var A=S[x],k=A[0],R=A[1];R.source===l.current&&r.map.removeLayer(k)}r.map.getSource(l.current)&&r.map.removeSource(l.current)}},[r.map]),f=me.useCallback(function(){var p;r.map&&(e.source.type==="geojson"&&!e.source.data||(r.map.map.getSource(l.current)&&s(),(p=r.map)===null||p===void 0||p.addSource(l.current,Bn({},e.source)),o(r.map.map.getSource(l.current))))},[e,r,s]);return me.useEffect(function(){var p,v,x,S;!((v=(p=r.map)===null||p===void 0?void 0:p.map)===null||v===void 0)&&v.getSource(l.current)&&((S=(x=r.map.map.getSource(l.current))===null||x===void 0?void 0:x.setData)===null||S===void 0||S.call(x,e.source.data))},[(t=e.source)===null||t===void 0?void 0:t.data]),me.useEffect(function(){var p,v,x;!((x=(v=(p=r==null?void 0:r.map)===null||p===void 0?void 0:p.map)===null||v===void 0?void 0:v.getSource)===null||x===void 0)&&x.call(v,e.sourceId)&&e.sourceId===l.current||(l.current=e.sourceId,f())},[r.map,e,f]),me.useEffect(function(){if(r.map){var p=function(){var v,x;!((x=(v=r==null?void 0:r.map)===null||v===void 0?void 0:v.getSource)===null||x===void 0)&&x.call(v,e.sourceId)||f()};return r.map.on("styledata",p),function(){r!=null&&r.map&&r.map.off("styledata",p)}}},[r.map,f]),me.useEffect(function(){return function(){s()}},[s]),{map:r.map,source:i,componentId:r.componentId,mapHook:r}}var Ov=function(e){var t,r,n,i,o,l,s,f,p,v,x,S,A=e.type||YH(e.geojson),k=me.useRef(e.layerId||"MlGeoJsonLayer-"+f2()),R="label-".concat(k.current);return me.useEffect(function(){e.layerId?k.current=e.layerId:k.current="MlGeoJsonLayer-"+f2()},[e.layerId]),v4e({mapId:e.mapId,sourceId:"source-"+k.current,source:Bn({type:"geojson",data:e.geojson},typeof((t=e==null?void 0:e.options)===null||t===void 0?void 0:t.source)<"u"&&typeof((r=e==null?void 0:e.options)===null||r===void 0?void 0:r.source)!="string"?e.options.source:{})}),Y4({mapId:e.mapId,layerId:k.current,options:Bn(Bn({},typeof((n=e==null?void 0:e.options)===null||n===void 0?void 0:n.source)<"u"&&typeof((i=e==null?void 0:e.options)===null||i===void 0?void 0:i.source)=="string"?{source:e.options.source}:{source:"source-"+k.current}),{paint:Bn(Bn({},e.paint||_4e(A,e.defaultPaintOverrides)),(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.paint),layout:Bn(Bn({},(e==null?void 0:e.layout)||{}),(l=e==null?void 0:e.options)===null||l===void 0?void 0:l.layout),type:A}),insertBeforeLayer:e.insertBeforeLayer,onHover:e.onHover,onClick:e.onClick,onLeave:e.onLeave}),Y4({mapId:e.mapId,options:Bn(Bn(Bn(Bn(Bn({},typeof((s=e==null?void 0:e.options)===null||s===void 0?void 0:s.source)<"u"&&typeof((f=e==null?void 0:e.options)===null||f===void 0?void 0:f.source)=="string"?{source:e.options.source}:{source:"source-"+k.current}),{id:R,type:"symbol",maxzoom:24,minzoom:1}),e!=null&&e.labelOptions?e.labelOptions:{}),!((p=e==null?void 0:e.options)===null||p===void 0)&&p.filter?{filter:e.options.filter}:{}),{layout:Bn(Bn({"text-font":["Open Sans Regular"],"text-field":"{".concat(e.labelProp,"}"),"text-size":12,"text-anchor":"top"},!((v=e==null?void 0:e.labelOptions)===null||v===void 0)&&v.layout?e.labelOptions.layout:{}),!((x=e==null?void 0:e.layout)===null||x===void 0)&&x.visibility?{visibility:e.layout.visibility}:{}),paint:Bn({"text-halo-width":1,"text-halo-color":"#fefefe","text-color":"#121212"},!((S=e==null?void 0:e.labelOptions)===null||S===void 0)&&S.paint?e.labelOptions.paint:{})})}),Pe.createElement(Pe.Fragment,null)},ZH=function(e){var t=Sm({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=me.useState(!1),n=r[0],i=r[1],o=me.useState(),l=o[0],s=o[1],f=me.useState(!1),p=f[0],v=f[1],x=me.useState(),S=x[0],A=x[1],k=me.useState(0),R=k[0],z=k[1],N=me.useRef(!1),B=me.useCallback(function(ee){if(t.map&&((!e.centerUserPosition&&!N.current||e.centerUserPosition)&&(e.useFlyTo?t.map.map.flyTo({center:[ee.coords.longitude,ee.coords.latitude],zoom:18,speed:1,curve:1}):t.map.map.setCenter([ee.coords.longitude,ee.coords.latitude]),N.current=!0),!!e.showUserLocation)){var Q=rj([ee.coords.longitude,ee.coords.latitude]);s(Q),A(oj(Q,ee.coords.accuracy/1e3))}},[t.map,e]),U=function(){console.log("Access of user location denied"),v(!0)},K=me.useMemo(function(){if(l){var ee=.02,Q=R-15,re=R+15,Se={steps:65},J=Hae(l,ee,Q,re,Se),G=J;return G.geometry.coordinates.push(l.geometry.coordinates),G.geometry.coordinates.slice(0,0),G}},[R,l]),ne=function(ee){ee!=null&&ee.alpha&&z(-ee.alpha)};return me.useEffect(function(){if(n){var ee=ne;return window.addEventListener("deviceorientation",ee),function(){window.removeEventListener("deviceorientation",ee)}}else N.current=!1},[n]),me.useEffect(function(){if(t.map&&n){var ee=navigator.geolocation.watchPosition(B,U);return function(){navigator.geolocation.clearWatch(ee)}}},[t.map,n,B]),me.useEffect(function(){var ee,Q;if(S!=null&&S.type){var re=(ee=t.map)===null||ee===void 0?void 0:ee.getBounds(),Se=[re==null?void 0:re._ne.lng,re==null?void 0:re._ne.lat,re==null?void 0:re._sw.lng,re==null?void 0:re._sw.lat],J=tm(S),G=qae(JN(Se),JN(J));G===!1&&((Q=t.map)===null||Q===void 0||Q.fitBounds(J,{padding:{top:25,bottom:25}}))}},[S]),Pe.createElement(Pe.Fragment,null,n&&l&&Pe.createElement(Ov,{geojson:S,type:"fill",paint:Bn({"fill-color":"#cbd300","fill-opacity":.3},e.accuracyPaint),insertBeforeLayer:e.insertBeforeLayer}),n&&K&&Pe.createElement(Ov,{geojson:K,type:"fill",paint:Bn({"fill-color":"#0000ff","fill-antialias":!1,"fill-opacity":.3},e.orientationConePaint),insertBeforeLayer:e.insertBeforeLayer}),n&&l&&Pe.createElement(Ov,{geojson:l,type:"circle",paint:Bn({"circle-color":"#009ee0","circle-radius":5,"circle-stroke-color":"#fafaff","circle-stroke-width":1},e.circlePaint),insertBeforeLayer:e.insertBeforeLayer}),Pe.createElement(Iv,{variant:"navtools",sx:{zIndex:1002,color:n?function(ee){return ee.palette.GPS.GPSActiveColor}:function(ee){return ee.palette.GPS.GPSInactiveColor},backgroundColor:n?function(ee){return ee.palette.GPS.GPSActiveBackgroundColor}:function(ee){return ee.palette.navigation.navColor}},disabled:p,onClick:function(){i(!n)}},Pe.createElement(aj,{sx:{fontSize:{xs:"1.4em",md:"1em"}}})))};ZH.defaultProps={mapId:void 0,offColor:"#666",showAccuracyCircle:!0,showUserLocation:!0,showOrientation:!0,centerUserPosition:!0,useFlyTo:!1};mn(wR)({marginTop:"15px"});N_(PU)({paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"});N_(IU)({minWidth:"30px"});N_(pm)({marginRight:"0px",padding:"0px"});N_(_U)({padding:0,marginRight:"5px"});N_(vee)(function(e){var t=e.open;return{display:t?"block":"none"}});N_(wR)({marginLeft:"50px"});mn(f_)({marginLeft:"-100px",marginRight:"-21px",paddingLeft:"53px",borderRadius:"0px",boxShadow:"none",backgroundColor:"rgb(0, 0, 0, 0)"});mn(Ol)({marginLeft:"61px"});mn(PU)(function(e){return{paddingRight:e?"56px":0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"}});mn(pm)({padding:"4px",marginTop:"-3px"});mn(IU)({minWidth:"30px"});mn(_U)({padding:0});mn(pm)({padding:"4px",marginTop:"-3px"});mn(pm)({marginLeft:"20px"});Pe.createElement(Pe.Fragment,null);var b4e=mn("div")(function(){return{display:"flex",alignItems:"center"}}),x4e=56,w4e=mn(Ol)(function(e){var t=e.theme;return{width:30,height:6,backgroundColor:t.palette.text.primary,borderRadius:3,position:"absolute",top:8,left:"calc(50% - 15px)"}});function S4e(e){var t=e.drawerPaperProps,r=e.drawerHeaderProps,n=e.setOpen,i=i4e(e,["drawerPaperProps","drawerHeaderProps","setOpen"]),o=TU(function(v){return v.breakpoints.down("sm")}),l=me.useState(!1),s=l[0],f=l[1],p=i.drawerBleeding?i.drawerBleeding:x4e;return Pe.createElement(Pe.Fragment,null,o?Pe.createElement(Ol,{sx:{display:{xs:"flex",sm:"none"}}},Pe.createElement(jJ,{styles:{".MuiDrawer-root > .MuiPaper-root":{height:"calc(50% - ".concat(p,"px)"),overflow:"visible"}}}),Pe.createElement(Nie,{anchor:"bottom",open:typeof i.open>"u"?s:i.open,onClose:n?function(){n==null||n(!1)}:function(){f(!1)},onOpen:n?function(){n==null||n(!0)}:function(){f(!0)},swipeAreaWidth:p,disableSwipeToOpen:!1,hideBackdrop:!0,ModalProps:{keepMounted:!0,sx:{top:"calc(90%)"}}},Pe.createElement(f_,{sx:{position:"absolute",top:-p,borderTopLeftRadius:8,borderTopRightRadius:8,visibility:"visible",right:0,left:0}},Pe.createElement(w4e,null),Pe.createElement(cN,{variant:"h6",sx:{p:"13px"}},i.name)),Pe.createElement(f_,{sx:{px:"15px",pb:"15px",height:"100%",overflow:"auto",paddingTop:"20px"}},i.children))):Pe.createElement(Ol,{sx:{display:{xs:"none",sm:"flex"},mr:1}},Pe.createElement(SU,Bn({transitionDuration:0,variant:"persistent",anchor:"left",open:typeof i.open>"u"?s:i.open,PaperProps:Bn(Bn({},t),{sx:Bn({maxWidth:{lg:"30%",md:"40%",sm:"50%",xs:"78%"},padding:{sm:"84px 20px 20px 20px",xs:"74px 10px 10px 10px"},width:{xs:"80%",sm:"60%",md:"350px",lg:"350px"},boxSizing:"border-box"},t==null?void 0:t.sx)}),sx:Bn({flexGrow:1,zIndex:105,position:"absolute",bottom:0,display:"flex",flexDirection:"column",maxWidth:{lg:"30%",md:"40%",sm:"50%",xs:"78%"}},s?{}:{left:o?"-90vw":"-20vw"})},i),Pe.createElement(b4e,Bn({},r),Pe.createElement(cN,{variant:"h6"},i.name),Pe.createElement(pm,{onClick:n?function(){n==null||n(!1)}:function(){f(!1)},sx:{position:"absolute",right:"20px"}},Pe.createElement(EV,null))),Pe.createElement(Ol,null,i.children))),";")}var vF;function Z4(){return Z4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z4.apply(this,arguments)}var A4e=function(t){return me.createElement("svg",Z4({width:10,height:40,viewBox:"0 0 10 40",fill:"none",id:"svg6"},t),vF||(vF=me.createElement("g",{id:"g14",transform:"translate(0.67544,-1.25e-5)"},me.createElement("path",{d:"m 3.34715,4.52028 c 0.22737,-1.05154 1.72745,-1.05154 1.95482,0 L 8.64912,20 H 0 Z",fill:"#cf003d"}),me.createElement("path",{d:"m 3.34715,35.4797 c 0.22737,1.0516 1.72745,1.0516 1.95482,0 L 8.64912,20 H 0 Z",fill:"#d3dcf0"}))))},bF,xF,wF,SF,AF;function J4(){return J4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J4.apply(this,arguments)}var E4e=function(t){return me.createElement("svg",J4({width:52,height:53,viewBox:"0 0 52 53",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),bF||(bF=me.createElement("circle",{cx:26.0001,cy:26.1843,r:24,fill:"white",stroke:"#009EE0",strokeWidth:2})),xF||(xF=me.createElement("path",{d:"M26.4915 7.59161C26.3524 8.07338 25.6698 8.07338 25.5307 7.59161L24.2998 3.3276C24.2075 3.0079 24.4474 2.68893 24.7802 2.68893H27.242C27.5748 2.68893 27.8147 3.0079 27.7224 3.3276L26.4915 7.59161Z",fill:"#009EE0"})),wF||(wF=me.createElement("path",{d:"M25.5085 44.7598C25.6476 44.278 26.3302 44.278 26.4693 44.7598L27.7002 49.0238C27.7925 49.3435 27.5526 49.6625 27.2198 49.6625H24.758C24.4252 49.6625 24.1853 49.3435 24.2776 49.0238L25.5085 44.7598Z",fill:"#009EE0"})),SF||(SF=me.createElement("path",{d:"M44.6641 26.4915C44.1823 26.3524 44.1823 25.6698 44.6641 25.5307L48.9281 24.2998C49.2478 24.2075 49.5668 24.4474 49.5668 24.7802V27.242C49.5668 27.5747 49.2478 27.8147 48.9281 27.7224L44.6641 26.4915Z",fill:"#009EE0"})),AF||(AF=me.createElement("path",{d:"M7.3959 25.6085C7.87766 25.7476 7.87766 26.4302 7.3959 26.5693L3.13189 27.8002C2.81218 27.8925 2.49321 27.6526 2.49321 27.3198L2.49321 24.858C2.49321 24.5253 2.81218 24.2853 3.13189 24.3776L7.3959 25.6085Z",fill:"#009EE0"})))},T4e=mn(Ol)(function(e){var t,r=e.theme;return t={zIndex:1e3,cursor:"pointer",transform:"scale(1)"},t[r.breakpoints.down("md")]={transform:"scale(1.6)"},t}),C4e=mn(Ol)(function(e){var t,r=e.theme;return t={position:"absolute",right:"-10px",top:"-52px",width:"52px",height:"52px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},t[r.breakpoints.down("md")]={right:"0px",top:"-52px"},t.circle={fill:r.palette.compass.compColor,stroke:r.palette.compass.compStroke},t.path={fill:r.palette.compass.compStroke},t["&:hover circle"]={fill:r.palette.compass.compHover},t}),P4e=mn(Ol)(function(e){var t=e.theme;return{display:"flex",flexDirection:"row","path:nth-of-type(2)":{fill:t.palette.compass.compSouth},"path:nth-of-type(1)":{fill:t.palette.compass.compNorth}}}),I4e=function(e){var t=Sm({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=me.useState(0),n=r[0],i=r[1],o=function(){var s,f;!((f=(s=t.map)===null||s===void 0?void 0:s.map)===null||f===void 0)&&f.getBearing&&i(Math.round(t.map.map.getBearing()))};me.useEffect(function(){if(t.map)return t.map.on("rotate",o,t.componentId),o(),function(){var s;(s=t.map)===null||s===void 0||s.map.off("rotate",o)}},[t.map,e.mapId]);var l=function(){var s,f,p,v;n==0?(s=t.map)===null||s===void 0||s.map.setBearing(-90):n==-90?(f=t.map)===null||f===void 0||f.map.setBearing(180):n==180?(p=t.map)===null||p===void 0||p.map.setBearing(90):(v=t.map)===null||v===void 0||v.map.setBearing(0)};return Pe.createElement(Pe.Fragment,null,Pe.createElement(T4e,{sx:Bn({},e.style)},Pe.createElement(C4e,{onClick:l,sx:Bn({},e.backgroundStyle)},Pe.createElement(E4e,{style:{position:"absolute",top:0,left:0}}),Pe.createElement(P4e,{onClick:l,sx:Bn({},e.needleStyle)},Pe.createElement(A4e,{style:{transform:"rotate("+(n>0?"-"+n:-1*n)+"deg)"}})))))},JH=function(e){var t=Sm({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=me.useState(0),n=r[0],i=r[1],o=TU(function(p){return p.breakpoints.down("md")});me.useEffect(function(){t.map&&(t.map.on("pitchend",function(){t.map&&i(t.map.getPitch())},t.componentId),i(t.map.getPitch()))},[t.map,e.mapId]);var l=me.useCallback(function(){t.map&&t.map.transform._zoom+.5<=t.map.transform._maxZoom&&t.map.easeTo({zoom:t.map.transform._zoom+.5})},[t.map]),s=me.useCallback(function(){t.map&&t.map.transform._zoom-.5>=t.map.transform._minZoom&&t.map.easeTo({zoom:t.map.transform._zoom-.5})},[t.map]),f=me.useCallback(function(){if(t.map){i(t.map.getPitch());var p=t.map.getPitch()!==0?0:60;t.map.easeTo({pitch:p})}},[t.map]);return Pe.createElement(Ol,{sx:Bn(Bn({zIndex:501,position:"absolute",display:"flex",flexDirection:"column",right:o?"15px":"25px",bottom:o?"20px":"30px"},o?{margin:"80px 10px 50px 10px"}:{marginTop:"50px"}),e.sx)},Pe.createElement(I4e,null),e.show3DButton&&Pe.createElement(Iv,{variant:"navtools",onClick:f},n<29?"3D":"2D"),e.showFollowGpsButton&&Pe.createElement(ZH,null),e.showCenterLocationButton&&Pe.createElement(GH,null),Pe.createElement(ene,{orientation:"vertical",sx:{border:"none",Button:{minWidth:"20px !important"},"Button:hover":{border:"none"}}},e.showZoomButtons&&Pe.createElement(Pe.Fragment,null,Pe.createElement(Iv,{variant:"navtools",onClick:l},Pe.createElement(TV,{sx:{fontSize:{xs:"1.4em",md:"1em"}}})),Pe.createElement(bU,{sx:{zIndex:500,marginLeft:"7px",marginRight:"7px"}}),Pe.createElement(Iv,{variant:"navtools",onClick:s},Pe.createElement(CV,{sx:{fontSize:{xs:"1.4em",md:"1em"}}})))),e.children&&Pe.cloneElement(e.children,{}))};JH.defaultProps={mapId:void 0,show3DButton:!0,showFollowGpsButton:!0,showCenterLocationButton:!1,showZoomButtons:!0};function Nv(e){"@babel/helpers - typeof";return Nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nv(e)}(function(){var e=/\s*/g,t=/^\s*|\s*$/g,r=/\s+/;function n(ee){if(!ee||!ee.length)return 0;for(var Q=0,re=0;Q<ee.length;Q++)re=(re<<5)-re+ee.charCodeAt(Q)|0;return re}function i(ee,Q){return ee.getElementsByTagName(Q)}function o(ee,Q){return ee.getAttribute(Q)}function l(ee,Q){return parseFloat(o(ee,Q))}function s(ee,Q){var re=i(ee,Q);return re.length?re[0]:null}function f(ee){return ee.normalize&&ee.normalize(),ee}function p(ee){for(var Q=0,re=[];Q<ee.length;Q++)re[Q]=parseFloat(ee[Q]);return re}function v(ee){return ee&&f(ee),ee&&ee.textContent||""}function x(ee,Q){var re={},Se,J;for(J=0;J<Q.length;J++)Se=s(ee,Q[J]),Se&&(re[Q[J]]=v(Se));return re}function S(ee,Q){for(var re in Q)ee[re]=Q[re]}function A(ee){return p(ee.replace(e,"").split(","))}function k(ee){for(var Q=ee.replace(t,"").split(r),re=[],Se=0;Se<Q.length;Se++)re.push(A(Q[Se]));return re}function R(ee){var Q=[l(ee,"lon"),l(ee,"lat")],re=s(ee,"ele"),Se=s(ee,"gpxtpx:hr")||s(ee,"hr"),J=s(ee,"time"),G;return re&&(G=parseFloat(v(re)),isNaN(G)||Q.push(G)),{coordinates:Q,time:J?v(J):null,heartRate:Se?parseFloat(v(Se)):null}}function z(){return{type:"FeatureCollection",features:[]}}var N;if(typeof XMLSerializer<"u")N=new XMLSerializer;else{var B=(typeof process>"u"?"undefined":Nv(process))==="object"&&!process.browser,U=(typeof Titanium>"u"?"undefined":Nv(Titanium))==="object";if((typeof exports>"u"?"undefined":Nv(exports))==="object"&&(B||U))N=f3e;else throw new Error("Unable to initialize serializer")}function K(ee){return ee.xml!==void 0?ee.xml:N.serializeToString(ee)}var ne={kml:function(Q){for(var re=z(),Se={},J={},G={},se=["Polygon","LineString","Point","Track","gx:Track"],ve=i(Q,"Placemark"),ge=i(Q,"Style"),je=i(Q,"StyleMap"),$e=0;$e<ge.length;$e++){var Ze=n(K(ge[$e])).toString(16);Se["#"+o(ge[$e],"id")]=Ze,J[Ze]=ge[$e]}for(var Me=0;Me<je.length;Me++){Se["#"+o(je[Me],"id")]=n(K(je[Me])).toString(16);for(var Ue=i(je[Me],"Pair"),Qe={},ct=0;ct<Ue.length;ct++)Qe[v(s(Ue[ct],"key"))]=v(s(Ue[ct],"styleUrl"));G["#"+o(je[Me],"id")]=Qe}for(var ce=0;ce<ve.length;ce++)re.features=re.features.concat(tt(ve[ce]));function be(We){var Xe,lt;return We=We||"",We.substr(0,1)==="#"&&(We=We.substr(1)),(We.length===6||We.length===3)&&(Xe=We),We.length===8&&(lt=parseInt(We.substr(0,2),16)/255,Xe="#"+We.substr(6,2)+We.substr(4,2)+We.substr(2,2)),[Xe,isNaN(lt)?void 0:lt]}function Oe(We){return p(We.split(" "))}function Be(We){var Xe=i(We,"coord"),lt=[],wt=[];Xe.length===0&&(Xe=i(We,"gx:coord"));for(var Lt=0;Lt<Xe.length;Lt++)lt.push(Oe(v(Xe[Lt])));for(var At=i(We,"when"),zt=0;zt<At.length;zt++)wt.push(v(At[zt]));return{coords:lt,times:wt}}function qe(We){var Xe,lt,wt,Lt,At,zt=[],vt=[];if(s(We,"MultiGeometry"))return qe(s(We,"MultiGeometry"));if(s(We,"MultiTrack"))return qe(s(We,"MultiTrack"));if(s(We,"gx:MultiTrack"))return qe(s(We,"gx:MultiTrack"));for(wt=0;wt<se.length;wt++)if(lt=i(We,se[wt]),lt){for(Lt=0;Lt<lt.length;Lt++)if(Xe=lt[Lt],se[wt]==="Point")zt.push({type:"Point",coordinates:A(v(s(Xe,"coordinates")))});else if(se[wt]==="LineString")zt.push({type:"LineString",coordinates:k(v(s(Xe,"coordinates")))});else if(se[wt]==="Polygon"){var pe=i(Xe,"LinearRing"),ur=[];for(At=0;At<pe.length;At++)ur.push(k(v(s(pe[At],"coordinates"))));zt.push({type:"Polygon",coordinates:ur})}else if(se[wt]==="Track"||se[wt]==="gx:Track"){var sr=Be(Xe);zt.push({type:"LineString",coordinates:sr.coords}),sr.times.length&&vt.push(sr.times)}}return{geoms:zt,coordTimes:vt}}function tt(We){var Xe=qe(We),lt,wt={},Lt=v(s(We,"name")),At=v(s(We,"address")),zt=v(s(We,"styleUrl")),vt=v(s(We,"description")),pe=s(We,"TimeSpan"),ur=s(We,"TimeStamp"),sr=s(We,"ExtendedData"),Tt=s(We,"LineStyle"),Nt=s(We,"PolyStyle"),Zt=s(We,"visibility");if(!Xe.geoms.length)return[];if(Lt&&(wt.name=Lt),At&&(wt.address=At),zt){zt[0]!=="#"&&(zt="#"+zt),wt.styleUrl=zt,Se[zt]&&(wt.styleHash=Se[zt]),G[zt]&&(wt.styleMapHash=G[zt],wt.styleHash=Se[G[zt].normal]);var rr=J[wt.styleHash];if(rr){Tt||(Tt=s(rr,"LineStyle")),Nt||(Nt=s(rr,"PolyStyle"));var at=s(rr,"IconStyle");if(at){var It=s(at,"Icon");if(It){var Vt=v(s(It,"href"));Vt&&(wt.icon=Vt)}}}}if(vt&&(wt.description=vt),pe){var lr=v(s(pe,"begin")),Pr=v(s(pe,"end"));wt.timespan={begin:lr,end:Pr}}if(ur&&(wt.timestamp=v(s(ur,"when"))),Tt){var _t=be(v(s(Tt,"color"))),Ut=_t[0],_r=_t[1],Kt=parseFloat(v(s(Tt,"width")));Ut&&(wt.stroke=Ut),isNaN(_r)||(wt["stroke-opacity"]=_r),isNaN(Kt)||(wt["stroke-width"]=Kt)}if(Nt){var fn=be(v(s(Nt,"color"))),Dt=fn[0],Br=fn[1],dr=v(s(Nt,"fill")),nn=v(s(Nt,"outline"));Dt&&(wt.fill=Dt),isNaN(Br)||(wt["fill-opacity"]=Br),dr&&(wt["fill-opacity"]=dr==="1"?wt["fill-opacity"]||1:0),nn&&(wt["stroke-opacity"]=nn==="1"?wt["stroke-opacity"]||1:0)}if(sr){var Kn=i(sr,"Data"),hr=i(sr,"SimpleData");for(lt=0;lt<Kn.length;lt++)wt[Kn[lt].getAttribute("name")]=v(s(Kn[lt],"value"));for(lt=0;lt<hr.length;lt++)wt[hr[lt].getAttribute("name")]=v(hr[lt])}Zt&&(wt.visibility=v(Zt)),Xe.coordTimes.length&&(wt.coordTimes=Xe.coordTimes.length===1?Xe.coordTimes[0]:Xe.coordTimes);var Gn={type:"Feature",geometry:Xe.geoms.length===1?Xe.geoms[0]:{type:"GeometryCollection",geometries:Xe.geoms},properties:wt};return o(We,"id")&&(Gn.id=o(We,"id")),[Gn]}return re},gpx:function(Q){var re,Se=i(Q,"trk"),J=i(Q,"rte"),G=i(Q,"wpt"),se=z(),ve;for(re=0;re<Se.length;re++)ve=$e(Se[re]),ve&&se.features.push(ve);for(re=0;re<J.length;re++)ve=Ze(J[re]),ve&&se.features.push(ve);for(re=0;re<G.length;re++)se.features.push(Me(G[re]));function ge(ct,ce){for(var be=0;be<ce;be++)ct.push(null);return ct}function je(ct,ce){var be=i(ct,ce),Oe=[],Be=[],qe=[],tt=be.length;if(tt<2)return{};for(var We=0;We<tt;We++){var Xe=R(be[We]);Oe.push(Xe.coordinates),Xe.time&&Be.push(Xe.time),(Xe.heartRate||qe.length)&&(qe.length||ge(qe,We),qe.push(Xe.heartRate||null))}return{line:Oe,times:Be,heartRates:qe}}function $e(ct){for(var ce=i(ct,"trkseg"),be=[],Oe=[],Be=[],qe,tt=0;tt<ce.length;tt++)if(qe=je(ce[tt],"trkpt"),qe&&(qe.line&&be.push(qe.line),qe.times&&qe.times.length&&Oe.push(qe.times),Be.length||qe.heartRates&&qe.heartRates.length)){if(!Be.length)for(var We=0;We<tt;We++)Be.push(ge([],be[We].length));qe.heartRates&&qe.heartRates.length?Be.push(qe.heartRates):Be.push(ge([],qe.line.length||0))}if(be.length!==0){var Xe=Qe(ct);return S(Xe,Ue(s(ct,"extensions"))),Oe.length&&(Xe.coordTimes=be.length===1?Oe[0]:Oe),Be.length&&(Xe.heartRates=be.length===1?Be[0]:Be),{type:"Feature",properties:Xe,geometry:{type:be.length===1?"LineString":"MultiLineString",coordinates:be.length===1?be[0]:be}}}}function Ze(ct){var ce=je(ct,"rtept");if(ce.line){var be=Qe(ct);S(be,Ue(s(ct,"extensions")));var Oe={type:"Feature",properties:be,geometry:{type:"LineString",coordinates:ce.line}};return Oe}}function Me(ct){var ce=Qe(ct);return S(ce,x(ct,["sym"])),{type:"Feature",properties:ce,geometry:{type:"Point",coordinates:R(ct).coordinates}}}function Ue(ct){var ce={};if(ct){var be=s(ct,"line");if(be){var Oe=v(s(be,"color")),Be=parseFloat(v(s(be,"opacity"))),qe=parseFloat(v(s(be,"width")));Oe&&(ce.stroke=Oe),isNaN(Be)||(ce["stroke-opacity"]=Be),isNaN(qe)||(ce["stroke-width"]=qe*96/25.4)}}return ce}function Qe(ct){var ce=x(ct,["name","cmt","desc","type","time","keywords"]),be=i(ct,"link");be.length&&(ce.links=[]);for(var Oe=0,Be;Oe<be.length;Oe++)Be={href:o(be[Oe],"href")},S(Be,x(be[Oe],["text","type"])),ce.links.push(Be);return ce}return se}};return ne})();var R4e=Pe.createContext({});R4e.Provider;var k4e=function(){var e=Object.fromEntries(new URLSearchParams(window.location.search));return e.layers=JSON.parse(e!=null&&e.layers?e.layers:"[]"),e};k4e();ar.string;ar.string;var M4e={visible:!0,urlParameters:{bbox:"{bbox-epsg-3857}",format:"image/png",service:"WMS",version:"1.1.1",request:"GetMap",srs:"EPSG:3857",width:256,height:256,styles:""},attribution:"",sourceOptions:{minZoom:0,maxZoom:20},layerOptions:{minZoom:0,maxZoom:20}};Bn({},M4e);ar.string.isRequired,ar.shape({layers:ar.string.isRequired,bbox:ar.string,format:ar.string,service:ar.string,version:ar.string,request:ar.string,srs:ar.string,width:ar.number,height:ar.number}),ar.string,ar.string,ar.object,ar.object,ar.string,ar.bool;Pe.createElement(lH,null),Pe.createElement(lj,null),Pe.createElement(cj,null);var O4e=Pe.createContext({});O4e.Provider;ar.node.isRequired;mn(pm)({padding:"4px",marginTop:"-3px",background:"none","&:hover":{background:"none"}});var i6="https://mapcomponents.github.io/react-map-components-maplibre/",N4e=i6+"assets/WG-MapComponents-Logo_rgb.svg",D4e=i6+"assets/WG-MapComponents-Logo_rgb-weisse-schrift.svg",L4e=i6+"assets/mapcomponents_logo.png";function F4e(e){var t=fm(),r=me.useState(null),n=r[0],i=r[1],o=function(s){i(s.currentTarget)},l=function(){i(null)};return me.createElement(hre,{sx:{minHeight:"62px",position:"absolute",zIndex:1300,top:0}},me.createElement(zie,{disableGutters:!0},e.logo||me.createElement(me.Fragment,null,me.createElement(Ol,{sx:{marginLeft:"25px",display:{xs:"none",md:"flex"},flexGrow:{md:"30"}}},me.createElement("img",{src:t.palette.mode==="dark"?D4e:N4e,style:{width:"100%",maxWidth:"250px"}})),me.createElement(Ol,{sx:{marginLeft:"25px",display:{xs:"flex",sm:"flex",md:"none"},flexGrow:{xs:"500"},mr:{sm:"0px"}}},me.createElement("img",{src:L4e,width:"50px",height:"50px"}))),me.createElement(Ol,{sx:{flexGrow:1,display:{xs:"flex"}}},e.unmovableButtons),e.buttons?me.createElement(Ol,{sx:{flexGrow:22,display:{xs:"flex",sm:"none"}}},me.createElement(pm,{onClick:o},me.createElement(jH,null)),me.createElement(Eie,{id:"menu-appbar",anchorEl:n,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:!!n,onClose:l,PaperProps:{elevation:24,sx:{overflow:"visible",mt:"15px"}},sx:{display:{xs:"block",sm:"none"}}},me.createElement(Ol,{sx:{paddingLeft:"10px",paddingRight:"10px"},onClick:l},e.buttons))):"",me.createElement(Ol,{sx:{marginRight:"25px",display:{xs:"none",sm:"flex"}}},e.buttons)))}Pe.createElement(WH,null),Pe.createElement(qH,null),Pe.createElement(HH,null),Pe.createElement(VH,null);function $5(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const o6=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),EF=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);EF&&parseFloat(EF[1]);const Nx=globalThis,y0=globalThis.process||{},B4e=globalThis.navigator||{};function QH(e){var n,i;if(typeof window<"u"&&((n=window.process)==null?void 0:n.type)==="renderer"||typeof process<"u"&&((i=process.versions)!=null&&i.electron))return!0;const r=typeof navigator<"u"&&navigator.userAgent;return!!(r&&r.indexOf("Electron")>=0)}function jp(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||QH()}function z4e(e){return jp()?QH()?"Electron":(B4e.userAgent||"").indexOf("Edge")>-1?"Edge":globalThis.chrome?"Chrome":globalThis.safari?"Safari":globalThis.mozInnerScreenX?"Firefox":"Unknown":"Node"}const eq="4.0.7";function $4e(e){try{const t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),t}catch{return null}}class U4e{constructor(t,r,n="sessionStorage"){this.storage=$4e(n),this.id=t,this.config=r,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){const r=JSON.stringify(this.config);this.storage.setItem(this.id,r)}}_loadConfiguration(){let t={};if(this.storage){const r=this.storage.getItem(this.id);t=r?JSON.parse(r):{}}return Object.assign(this.config,t),this}}function j4e(e){let t;return e<10?t=`${e.toFixed(2)}ms`:e<100?t=`${e.toFixed(1)}ms`:e<1e3?t=`${e.toFixed(0)}ms`:t=`${(e/1e3).toFixed(2)}s`,t}function V4e(e,t=8){const r=Math.max(t-e.length,0);return`${" ".repeat(r)}${e}`}var U5;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(U5||(U5={}));const H4e=10;function TF(e){return typeof e!="string"?e:(e=e.toUpperCase(),U5[e]||U5.WHITE)}function q4e(e,t,r){return!jp&&typeof e=="string"&&(t&&(e=`\x1B[${TF(t)}m${e}\x1B[39m`),r&&(e=`\x1B[${TF(r)+H4e}m${e}\x1B[49m`)),e}function W4e(e,t=["constructor"]){const r=Object.getPrototypeOf(e),n=Object.getOwnPropertyNames(r),i=e;for(const o of n){const l=i[o];typeof l=="function"&&(t.find(s=>o===s)||(i[o]=l.bind(e)))}}function s6(e,t){if(!e)throw new Error("Assertion failed")}function _0(){var t,r,n;let e;if(jp()&&Nx.performance)e=(r=(t=Nx==null?void 0:Nx.performance)==null?void 0:t.now)==null?void 0:r.call(t);else if("hrtime"in y0){const i=(n=y0==null?void 0:y0.hrtime)==null?void 0:n.call(y0);e=i[0]*1e3+i[1]/1e6}else e=Date.now();return e}const v0={debug:jp()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},X4e={enabled:!0,level:0};function b0(){}const CF={},PF={once:!0};class yb{constructor({id:t}={id:""}){this.VERSION=eq,this._startTs=_0(),this._deltaTs=_0(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=t,this.userData={},this._storage=new U4e(`__probe-${this.id}__`,X4e),this.timeStamp(`${this.id} started`),W4e(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((_0()-this._startTs).toPrecision(10))}getDelta(){return Number((_0()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(t=!0){return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,r){this._storage.setConfiguration({[t]:r})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,r){if(!t)throw new Error(r||"Assertion failed")}warn(t){return this._getLogFunction(0,t,v0.warn,arguments,PF)}error(t){return this._getLogFunction(0,t,v0.error,arguments)}deprecated(t,r){return this.warn(`\`${t}\` is deprecated and will be removed in a later version. Use \`${r}\` instead`)}removed(t,r){return this.error(`\`${t}\` has been removed. Use \`${r}\` instead`)}probe(t,r){return this._getLogFunction(t,r,v0.log,arguments,{time:!0,once:!0})}log(t,r){return this._getLogFunction(t,r,v0.debug,arguments)}info(t,r){return this._getLogFunction(t,r,console.info,arguments)}once(t,r){return this._getLogFunction(t,r,v0.debug||v0.info,arguments,PF)}table(t,r,n){return r?this._getLogFunction(t,r,console.table||b0,n&&[n],{tag:G4e(r)}):b0}time(t,r){return this._getLogFunction(t,r,console.time?console.time:console.info)}timeEnd(t,r){return this._getLogFunction(t,r,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,r){return this._getLogFunction(t,r,console.timeStamp||b0)}group(t,r,n={collapsed:!1}){const i=IF({logLevel:t,message:r,opts:n}),{collapsed:o}=n;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,r,n={}){return this.group(t,r,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||b0)}withGroup(t,r,n){this.group(t,r)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=tq(t)}_getLogFunction(t,r,n,i,o){if(this._shouldLog(t)){o=IF({logLevel:t,message:r,args:i,opts:o}),n=n||o.method,s6(n),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=_0();const l=o.tag||o.message;if(o.once&&l)if(!CF[l])CF[l]=_0();else return b0;return r=K4e(this.id,o.message,o),n.bind(console,r,...o.args)}return b0}}yb.VERSION=eq;function tq(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return s6(Number.isFinite(t)&&t>=0),t}function IF(e){const{logLevel:t,message:r}=e;e.logLevel=tq(t);const n=e.args?Array.from(e.args):[];for(;n.length&&n.shift()!==r;);switch(typeof t){case"string":case"function":r!==void 0&&n.unshift(r),e.message=t;break;case"object":Object.assign(e,t);break}typeof e.message=="function"&&(e.message=e.message());const i=typeof e.message;return s6(i==="string"||i==="object"),Object.assign(e,{args:n},e.opts)}function K4e(e,t,r){if(typeof t=="string"){const n=r.time?V4e(j4e(r.total)):"";t=r.time?`${e}: ${n}  ${t}`:`${e}: ${t}`,t=q4e(t,r.color,r.background)}return t}function G4e(e){for(const t in e)for(const r in e[t])return r||"untitled";return"empty"}function Y4e(e,t){return rq(e||{},t)}function rq(e,t,r=0){if(r>3)return t;const n={...e};for(const[i,o]of Object.entries(t))o&&typeof o=="object"&&!Array.isArray(o)?n[i]=rq(n[i]||{},t[i],r+1):n[i]=t[i];return n}const Z4e="latest";function J4e(){var e;return(e=globalThis._loadersgl_)!=null&&e.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.2.1"),globalThis._loadersgl_.version}const Q4e=J4e();function Np(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const jg=typeof process!="object"||String(process)!=="[object process]"||process.browser,ePe=typeof window<"u"&&typeof window.orientation<"u",RF=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);RF&&parseFloat(RF[1]);class tPe{constructor(t,r){Ce(this,"name");Ce(this,"workerThread");Ce(this,"isRunning",!0);Ce(this,"result");Ce(this,"_resolve",()=>{});Ce(this,"_reject",()=>{});this.name=t,this.workerThread=r,this.result=new Promise((n,i)=>{this._resolve=n,this._reject=i})}postMessage(t,r){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:r})}done(t){Np(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){Np(this.isRunning),this.isRunning=!1,this._reject(t)}}class AT{terminate(){}}const ET=new Map;function rPe(e){Np(e.source&&!e.url||!e.source&&e.url);let t=ET.get(e.source||e.url);return t||(e.url&&(t=nPe(e.url),ET.set(e.url,t)),e.source&&(t=nq(e.source),ET.set(e.source,t))),Np(t),t}function nPe(e){if(!e.startsWith("http"))return e;const t=iPe(e);return nq(t)}function nq(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function iPe(e){return`try {
  importScripts('${e}');
} catch (error) {
  console.error(error);
  throw error;
}`}function iq(e,t=!0,r){const n=r||new Set;if(e){if(kF(e))n.add(e);else if(kF(e.buffer))n.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(t&&typeof e=="object")for(const i in e)iq(e[i],t,n)}}return r===void 0?Array.from(n):[]}function kF(e){return e?e instanceof ArrayBuffer||typeof MessagePort<"u"&&e instanceof MessagePort||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas:!1}const TT=()=>{};class Q4{constructor(t){Ce(this,"name");Ce(this,"source");Ce(this,"url");Ce(this,"terminated",!1);Ce(this,"worker");Ce(this,"onMessage");Ce(this,"onError");Ce(this,"_loadableURL","");const{name:r,source:n,url:i}=t;Np(n||i),this.name=r,this.source=n,this.url=i,this.onMessage=TT,this.onError=o=>console.log(o),this.worker=jg?this._createBrowserWorker():this._createNodeWorker()}static isSupported(){return typeof Worker<"u"&&jg||typeof AT<"u"&&!jg}destroy(){this.onMessage=TT,this.onError=TT,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(t,r){r=r||iq(t),this.worker.postMessage(t,r)}_getErrorFromErrorEvent(t){let r="Failed to load ";return r+=`worker ${this.name} from ${this.url}. `,t.message&&(r+=`${t.message} in `),t.lineno&&(r+=`:${t.lineno}:${t.colno}`),new Error(r)}_createBrowserWorker(){this._loadableURL=rPe({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=r=>{r.data?this.onMessage(r.data):this.onError(new Error("No data received"))},t.onerror=r=>{this.onError(this._getErrorFromErrorEvent(r)),this.terminated=!0},t.onmessageerror=r=>console.error(r),t}_createNodeWorker(){let t;if(this.url){const n=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;t=new AT(n,{eval:!1})}else if(this.source)t=new AT(this.source,{eval:!0});else throw new Error("no worker");return t.on("message",r=>{this.onMessage(r)}),t.on("error",r=>{this.onError(r)}),t.on("exit",r=>{}),t}}class oPe{constructor(t){Ce(this,"name","unnamed");Ce(this,"source");Ce(this,"url");Ce(this,"maxConcurrency",1);Ce(this,"maxMobileConcurrency",1);Ce(this,"onDebug",()=>{});Ce(this,"reuseWorkers",!0);Ce(this,"props",{});Ce(this,"jobQueue",[]);Ce(this,"idleQueue",[]);Ce(this,"count",0);Ce(this,"isDestroyed",!1);this.source=t.source,this.url=t.url,this.setProps(t)}static isSupported(){return Q4.isSupported()}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}async startJob(t,r=(i,o,l)=>i.done(l),n=(i,o)=>i.error(o)){const i=new Promise(o=>(this.jobQueue.push({name:t,onMessage:r,onError:n,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const r=this.jobQueue.shift();if(r){this.onDebug({message:"Starting job",name:r.name,workerThread:t,backlog:this.jobQueue.length});const n=new tPe(r.name,t);t.onMessage=i=>r.onMessage(n,i.type,i.payload),t.onError=i=>r.onError(n,i),r.onStart(n);try{await n.result}catch(i){console.error(`Worker exception: ${i}`)}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){!jg||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new Q4({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return ePe?this.maxMobileConcurrency:this.maxConcurrency}}const sPe={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},tp=class tp{constructor(t){Ce(this,"props");Ce(this,"workerPools",new Map);this.props={...sPe},this.setProps(t),this.workerPools=new Map}static isSupported(){return Q4.isSupported()}static getWorkerFarm(t={}){return tp._workerFarm=tp._workerFarm||new tp({}),tp._workerFarm.setProps(t),tp._workerFarm}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const r of this.workerPools.values())r.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:r,source:n,url:i}=t;let o=this.workerPools.get(r);return o||(o=new oPe({name:r,source:n,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(r,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};Ce(tp,"_workerFarm");let j5=tp;function aPe(e,t={}){const r=t[e.id]||{},n=jg?`${e.id}-worker.js`:`${e.id}-worker-node.js`;let i=r.workerUrl;if(!i&&e.id==="compression"&&(i=t.workerUrl),t._workerType==="test"&&(jg?i=`modules/${e.module}/dist/${n}`:i=`modules/${e.module}/src/workers/${e.id}-worker-node.ts`),!i){let o=e.version;o==="latest"&&(o=Z4e);const l=o?`@${o}`:"";i=`https://unpkg.com/@loaders.gl/${e.module}${l}/dist/${n}`}return Np(i),i}function lPe(e,t=Q4e){Np(e,"no worker provided");const r=e.version;return!(!t||!r)}function cPe(e,t){return!j5.isSupported()||!jg&&!(t!=null&&t._nodeWorkers)?!1:e.worker&&(t==null?void 0:t.worker)}async function uPe(e,t,r,n,i){const o=e.id,l=aPe(e,r),f=j5.getWorkerFarm(r).getWorkerPool({name:o,url:l});r=JSON.parse(JSON.stringify(r)),n=JSON.parse(JSON.stringify(n||{}));const p=await f.startJob("process-on-worker",hPe.bind(null,i));return p.postMessage("process",{input:t,options:r,context:n}),await(await p.result).result}async function hPe(e,t,r,n){switch(r){case"done":t.done(n);break;case"error":t.error(new Error(n.error));break;case"process":const{id:i,input:o,options:l}=n;try{const s=await e(o,l);t.postMessage("done",{id:i,result:s})}catch(s){const f=s instanceof Error?s.message:"unknown error";t.postMessage("error",{id:i,error:f})}break;default:console.warn(`parse-with-worker unknown message ${r}`)}}function fPe(e,t,r){if(r=r||e.byteLength,e.byteLength<r||t.byteLength<r)return!1;const n=new Uint8Array(e),i=new Uint8Array(t);for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}function dPe(...e){return pPe(e)}function pPe(e){const t=e.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),r=t.reduce((o,l)=>o+l.byteLength,0),n=new Uint8Array(r);let i=0;for(const o of t)n.set(o,i),i+=o.byteLength;return n.buffer}async function gPe(e){const t=[];for await(const r of e)t.push(r);return dPe(...t)}function MF(){let e;if(typeof window<"u"&&window.performance)e=window.performance.now();else if(typeof process<"u"&&process.hrtime){const t=process.hrtime();e=t[0]*1e3+t[1]/1e6}else e=Date.now();return e}class OF{constructor(t,r){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=t,this.type=r,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=MF(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(MF()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class hA{constructor(t){this.stats={},this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t,r="count"){return this._getOrCreate({name:t,type:r})}get size(){return Object.keys(this.stats).length}reset(){for(const t of Object.values(this.stats))t.reset();return this}forEach(t){for(const r of Object.values(this.stats))t(r)}getTable(){const t={};return this.forEach(r=>{t[r.name]={time:r.time||0,count:r.count||0,average:r.getAverageTime()||0,hz:r.getHz()||0}}),t}_initializeStats(t=[]){t.forEach(r=>this._getOrCreate(r))}_getOrCreate(t){const{name:r,type:n}=t;let i=this.stats[r];return i||(t instanceof OF?i=t:i=new OF(r,n),this.stats[r]=i),i}}let mPe="";const NF={};function yPe(e){for(const t in NF)if(e.startsWith(t)){const r=NF[t];e=e.replace(t,r)}return!e.startsWith("http://")&&!e.startsWith("https://")&&(e=`${mPe}${e}`),e}function _Pe(e){return e&&typeof e=="object"&&e.isBuffer}function oq(e){if(_Pe(e))return e;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(typeof e=="string"){const t=e;return new TextEncoder().encode(t).buffer}if(e&&typeof e=="object"&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function sq(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(t+1):""}function vPe(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(0,t):""}const bPe=e=>typeof e=="boolean",Dv=e=>typeof e=="function",_b=e=>e!==null&&typeof e=="object",DF=e=>_b(e)&&e.constructor==={}.constructor,xPe=e=>!!e&&typeof e[Symbol.iterator]=="function",wPe=e=>e&&typeof e[Symbol.asyncIterator]=="function",Am=e=>typeof Response<"u"&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,Em=e=>typeof Blob<"u"&&e instanceof Blob,SPe=e=>e&&typeof e=="object"&&e.isBuffer,APe=e=>typeof ReadableStream<"u"&&e instanceof ReadableStream||_b(e)&&Dv(e.tee)&&Dv(e.cancel)&&Dv(e.getReader),EPe=e=>_b(e)&&Dv(e.read)&&Dv(e.pipe)&&bPe(e.readable),aq=e=>APe(e)||EPe(e);class TPe extends Error{constructor(r,n){super(r);Ce(this,"reason");Ce(this,"url");Ce(this,"response");this.reason=n.reason,this.url=n.url,this.response=n.response}}const CPe=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,PPe=/^([-\w.]+\/[-\w.+]+)/;function LF(e,t){return e.toLowerCase()===t.toLowerCase()}function IPe(e){const t=PPe.exec(e);return t?t[1]:e}function FF(e){const t=CPe.exec(e);return t?t[1]:""}const lq=/\?.*/;function RPe(e){const t=e.match(lq);return t&&t[0]}function a6(e){return e.replace(lq,"")}function kPe(e){if(e.length<50)return e;const t=e.slice(e.length-15);return`${e.substr(0,32)}...${t}`}function fA(e){return Am(e)?e.url:Em(e)?e.name||"":typeof e=="string"?e:""}function l6(e){if(Am(e)){const t=e,r=t.headers.get("content-type")||"",n=a6(t.url);return IPe(r)||FF(n)}return Em(e)?e.type||"":typeof e=="string"?FF(e):""}function MPe(e){return Am(e)?e.headers["content-length"]||-1:Em(e)?e.size:typeof e=="string"?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}async function cq(e){if(Am(e))return e;const t={},r=MPe(e);r>=0&&(t["content-length"]=String(r));const n=fA(e),i=l6(e);i&&(t["content-type"]=i);const o=await DPe(e);o&&(t["x-first-bytes"]=o),typeof e=="string"&&(e=new TextEncoder().encode(e));const l=new Response(e,{headers:t});return Object.defineProperty(l,"url",{value:n}),l}async function OPe(e){if(!e.ok)throw await NPe(e)}async function NPe(e){const t=kPe(e.url);let r=`Failed to fetch resource (${e.status}) ${e.statusText}: ${t}`;r=r.length>100?`${r.slice(0,100)}...`:r;const n={reason:e.statusText,url:e.url,response:e};try{const i=e.headers.get("Content-Type");n.reason=i!=null&&i.includes("application/json")?await e.json():e.text()}catch{}return new TPe(r,n)}async function DPe(e){if(typeof e=="string")return`data:,${e.slice(0,5)}`;if(e instanceof Blob){const r=e.slice(0,5);return await new Promise(n=>{const i=new FileReader;i.onload=o=>{var l;return n((l=o==null?void 0:o.target)==null?void 0:l.result)},i.readAsDataURL(r)})}if(e instanceof ArrayBuffer){const r=e.slice(0,5);return`data:base64,${LPe(r)}`}return null}function LPe(e){let t="";const r=new Uint8Array(e);for(let n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)}function FPe(e){return!BPe(e)&&!zPe(e)}function BPe(e){return e.startsWith("http:")||e.startsWith("https:")}function zPe(e){return e.startsWith("data:")}async function BF(e,t){var r,n;if(typeof e=="string"){const i=yPe(e);return FPe(i)&&(r=globalThis.loaders)!=null&&r.fetchNode?(n=globalThis.loaders)==null?void 0:n.fetchNode(i,t):await fetch(i,t)}return await cq(e)}const zF=new yb({id:"loaders.gl"});class $Pe{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class UPe{constructor(){Ce(this,"console");this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}}const uq={fetch:null,mimeType:void 0,nothrow:!1,log:new UPe,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:o6,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},jPe={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function hq(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state||(e._state={}),e._state}function fq(){const e=hq();return e.globalOptions=e.globalOptions||{...uq},e.globalOptions}function VPe(e,t,r,n){return r=r||[],r=Array.isArray(r)?r:[r],HPe(e,r),WPe(t,e,n)}function HPe(e,t){$F(e,null,uq,jPe,t);for(const r of t){const n=e&&e[r.id]||{},i=r.options&&r.options[r.id]||{},o=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};$F(n,r.id,i,o,t)}}function $F(e,t,r,n,i){const o=t||"Top level",l=t?`${t}.`:"";for(const s in e){const f=!t&&_b(e[s]),p=s==="baseUri"&&!t,v=s==="workerUrl"&&t;if(!(s in r)&&!p&&!v){if(s in n)zF.warn(`${o} loader option '${l}${s}' no longer supported, use '${n[s]}'`)();else if(!f){const x=qPe(s,i);zF.warn(`${o} loader option '${l}${s}' not recognized. ${x}`)()}}}}function qPe(e,t){const r=e.toLowerCase();let n="";for(const i of t)for(const o in i.options){if(e===o)return`Did you mean '${i.id}.${o}'?`;const l=o.toLowerCase();(r.startsWith(l)||l.startsWith(r))&&(n=n||`Did you mean '${i.id}.${o}'?`)}return n}function WPe(e,t,r){const i={...e.options||{}};return XPe(i,r),i.log===null&&(i.log=new $Pe),UF(i,fq()),UF(i,t),i}function UF(e,t){for(const r in t)if(r in t){const n=t[r];DF(n)&&DF(e[r])?e[r]={...e[r],...t[r]}:e[r]=t[r]}}function XPe(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}function c6(e){return e?(Array.isArray(e)&&(e=e[0]),Array.isArray(e==null?void 0:e.extensions)):!1}function u6(e){$5(e,"null loader"),$5(c6(e),"invalid loader");let t;return Array.isArray(e)&&(t=e[1],e=e[0],e={...e,options:{...e.options,...t}}),(e!=null&&e.parseTextSync||e!=null&&e.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const dq=()=>{const e=hq();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function KPe(e){const t=dq();e=Array.isArray(e)?e:[e];for(const r of e){const n=u6(r);t.find(i=>n===i)||t.unshift(n)}}function GPe(){return dq()}const YPe=new yb({id:"loaders.gl"}),ZPe=/\.([^.]+)$/;async function JPe(e,t=[],r,n){if(!pq(e))return null;let i=jF(e,t,{...r,nothrow:!0},n);if(i)return i;if(Em(e)&&(e=await e.slice(0,10).arrayBuffer(),i=jF(e,t,r,n)),!i&&!(r!=null&&r.nothrow))throw new Error(gq(e));return i}function jF(e,t=[],r,n){if(!pq(e))return null;if(t&&!Array.isArray(t))return u6(t);let i=[];t&&(i=i.concat(t)),r!=null&&r.ignoreRegisteredLoaders||i.push(...GPe()),eIe(i);const o=QPe(e,i,r,n);if(!o&&!(r!=null&&r.nothrow))throw new Error(gq(e));return o}function QPe(e,t,r,n){const i=fA(e),o=l6(e),l=a6(i)||(n==null?void 0:n.url);let s=null,f="";return r!=null&&r.mimeType&&(s=CT(t,r==null?void 0:r.mimeType),f=`match forced by supplied MIME type ${r==null?void 0:r.mimeType}`),s=s||tIe(t,l),f=f||(s?`matched url ${l}`:""),s=s||CT(t,o),f=f||(s?`matched MIME type ${o}`:""),s=s||nIe(t,e),f=f||(s?`matched initial data ${mq(e)}`:""),r!=null&&r.fallbackMimeType&&(s=s||CT(t,r==null?void 0:r.fallbackMimeType),f=f||(s?`matched fallback MIME type ${o}`:"")),f&&YPe.log(1,`selectLoader selected ${s==null?void 0:s.name}: ${f}.`),s}function pq(e){return!(e instanceof Response&&e.status===204)}function gq(e){const t=fA(e),r=l6(e);let n="No valid loader found (";n+=t?`${sq(t)}, `:"no url provided, ",n+=`MIME type: ${r?`"${r}"`:"not provided"}, `;const i=e?mq(e):"";return n+=i?` first bytes: "${i}"`:"first bytes: not available",n+=")",n}function eIe(e){for(const t of e)u6(t)}function tIe(e,t){const r=t&&ZPe.exec(t),n=r&&r[1];return n?rIe(e,n):null}function rIe(e,t){t=t.toLowerCase();for(const r of e)for(const n of r.extensions)if(n.toLowerCase()===t)return r;return null}function CT(e,t){var r;for(const n of e)if((r=n.mimeTypes)!=null&&r.some(i=>LF(t,i))||LF(t,`application/x.${n.id}`))return n;return null}function nIe(e,t){if(!t)return null;for(const r of e)if(typeof t=="string"){if(iIe(t,r))return r}else if(ArrayBuffer.isView(t)){if(VF(t.buffer,t.byteOffset,r))return r}else if(t instanceof ArrayBuffer&&VF(t,0,r))return r;return null}function iIe(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some(n=>e.startsWith(n))}function VF(e,t,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some(i=>oIe(e,t,r,i))}function oIe(e,t,r,n){if(n instanceof ArrayBuffer)return fPe(n,e,n.byteLength);switch(typeof n){case"function":return n(e);case"string":const i=eP(e,t,n.length);return n===i;default:return!1}}function mq(e,t=5){return typeof e=="string"?e.slice(0,t):ArrayBuffer.isView(e)?eP(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?eP(e,0,t):""}function eP(e,t,r){if(e.byteLength<t+r)return"";const n=new DataView(e);let i="";for(let o=0;o<r;o++)i+=String.fromCharCode(n.getUint8(t+o));return i}const sIe=256*1024;function*aIe(e,t){const r=(t==null?void 0:t.chunkSize)||sIe;let n=0;const i=new TextEncoder;for(;n<e.length;){const o=Math.min(e.length-n,r),l=e.slice(n,n+o);n+=o,yield i.encode(l)}}const lIe=256*1024;function*cIe(e,t={}){const{chunkSize:r=lIe}=t;let n=0;for(;n<e.byteLength;){const i=Math.min(e.byteLength-n,r),o=new ArrayBuffer(i),l=new Uint8Array(e,n,i);new Uint8Array(o).set(l),n+=i,yield o}}const uIe=1024*1024;async function*hIe(e,t){const r=(t==null?void 0:t.chunkSize)||uIe;let n=0;for(;n<e.size;){const i=n+r,o=await e.slice(n,i).arrayBuffer();n=i,yield o}}function HF(e,t){return o6?fIe(e,t):dIe(e)}async function*fIe(e,t){const r=e.getReader();let n;try{for(;;){const i=n||r.read();t!=null&&t._streamReadAhead&&(n=r.read());const{done:o,value:l}=await i;if(o)return;yield oq(l)}}catch{r.releaseLock()}}async function*dIe(e,t){for await(const r of e)yield oq(r)}function pIe(e,t){if(typeof e=="string")return aIe(e,t);if(e instanceof ArrayBuffer)return cIe(e,t);if(Em(e))return hIe(e,t);if(aq(e))return HF(e,t);if(Am(e))return HF(e.body,t);throw new Error("makeIterator")}const yq="Cannot convert supplied data type";function gIe(e,t,r){if(t.text&&typeof e=="string")return e;if(SPe(e)&&(e=e.buffer),e instanceof ArrayBuffer){const n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let n=e.buffer;const i=e.byteLength||e.length;return(e.byteOffset!==0||i!==n.byteLength)&&(n=n.slice(e.byteOffset,e.byteOffset+i)),n}throw new Error(yq)}async function mIe(e,t,r){const n=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if(typeof e=="string"||n)return gIe(e,t);if(Em(e)&&(e=await cq(e)),Am(e)){const i=e;return await OPe(i),t.binary?await i.arrayBuffer():await i.text()}if(aq(e)&&(e=pIe(e,r)),xPe(e)||wPe(e))return gPe(e);throw new Error(yq)}function _q(e,t){const r=fq(),n=e||r;return typeof n.fetch=="function"?n.fetch:_b(n.fetch)?i=>BF(i,n.fetch):t!=null&&t.fetch?t==null?void 0:t.fetch:BF}function yIe(e,t,r){if(r)return r;const n={fetch:_q(t,e),...e};if(n.url){const i=a6(n.url);n.baseUrl=i,n.queryString=RPe(n.url),n.filename=sq(i),n.baseUrl=vPe(i)}return Array.isArray(n.loaders)||(n.loaders=null),n}function _Ie(e,t){if(e&&!Array.isArray(e))return e;let r;if(e&&(r=Array.isArray(e)?e:[e]),t&&t.loaders){const n=Array.isArray(t.loaders)?t.loaders:[t.loaders];r=r?[...r,...n]:n}return r&&r.length?r:void 0}async function V5(e,t,r,n){t&&!Array.isArray(t)&&!c6(t)&&(n=void 0,r=t,t=void 0),e=await e,r=r||{};const i=fA(e),l=_Ie(t,n),s=await JPe(e,l,r);return s?(r=VPe(r,s,l,i),n=yIe({url:i,_parse:V5,loaders:l},r,n||null),await vIe(s,e,r,n)):null}async function vIe(e,t,r,n){if(lPe(e),r=Y4e(e.options,r),Am(t)){const o=t,{ok:l,redirected:s,status:f,statusText:p,type:v,url:x}=o,S=Object.fromEntries(o.headers.entries());n.response={headers:S,ok:l,redirected:s,status:f,statusText:p,type:v,url:x}}t=await mIe(t,e,r);const i=e;if(i.parseTextSync&&typeof t=="string")return i.parseTextSync(t,r,n);if(cPe(e,r))return await uPe(e,t,r,n,V5);if(i.parseText&&typeof t=="string")return await i.parseText(t,r,n);if(i.parse)return await i.parse(t,r,n);throw Np(!i.parseSync),new Error(`${e.id} loader - no parser found and worker is disabled`)}async function tP(e,t,r,n){let i,o;!Array.isArray(t)&&!c6(t)?(i=[],o=t):(i=t,o=r);const l=_q(o);let s=e;return typeof e=="string"&&(s=await l(e)),Em(e)&&(s=await l(e)),Array.isArray(i)?await V5(s,i,o):await V5(s,i,o)}const bIe="4.2.1";var J7;const xIe=(J7=globalThis.loaders)==null?void 0:J7.parseImageNode,rP=typeof Image<"u",nP=typeof ImageBitmap<"u",wIe=!!xIe,iP=o6?!0:wIe;function SIe(e){switch(e){case"auto":return nP||rP||iP;case"imagebitmap":return nP;case"image":return rP;case"data":return iP;default:throw new Error(`@loaders.gl/images: image ${e} not supported in this environment`)}}function AIe(){if(nP)return"imagebitmap";if(rP)return"image";if(iP)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function EIe(e){const t=CIe(e);if(!t)throw new Error("Not an image");return t}function TIe(e){switch(EIe(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("getImageData");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0),r.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function CIe(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&e instanceof Image?"image":e&&typeof e=="object"&&e.data&&e.width&&e.height?"data":null}const PIe=/^data:image\/svg\+xml/,IIe=/\.svg((\?|#).*)?$/;function h6(e){return e&&(PIe.test(e)||IIe.test(e))}function RIe(e,t){if(h6(t)){let n=new TextDecoder().decode(e);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(n=unescape(encodeURIComponent(n)))}catch(o){throw new Error(o.message)}return`data:image/svg+xml;base64,${btoa(n)}`}return vq(e,t)}function vq(e,t){if(h6(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function bq(e,t,r){const n=RIe(e,r),i=self.URL||self.webkitURL,o=typeof n!="string"&&i.createObjectURL(n);try{return await kIe(o||n,t)}finally{o&&i.revokeObjectURL(o)}}async function kIe(e,t){const r=new Image;return r.src=e,t.image&&t.image.decode&&r.decode?(await r.decode(),r):await new Promise((n,i)=>{try{r.onload=()=>n(r),r.onerror=o=>{const l=o instanceof Error?o.message:"error";i(new Error(l))}}catch(o){i(o)}})}const MIe={};let qF=!0;async function OIe(e,t,r){let n;h6(r)?n=await bq(e,t,r):n=vq(e,r);const i=t&&t.imagebitmap;return await NIe(n,i)}async function NIe(e,t=null){if((DIe(t)||!qF)&&(t=null),t)try{return await createImageBitmap(e,t)}catch(r){console.warn(r),qF=!1}return await createImageBitmap(e)}function DIe(e){for(const t in e||MIe)return!1;return!0}function LIe(e){return!$Ie(e,"ftyp",4)||!(e[8]&96)?null:FIe(e)}function FIe(e){switch(BIe(e,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function BIe(e,t,r){return String.fromCharCode(...e.slice(t,r))}function zIe(e){return[...e].map(t=>t.charCodeAt(0))}function $Ie(e,t,r=0){const n=zIe(t);for(let i=0;i<n.length;++i)if(n[i]!==e[i+r])return!1;return!0}const of=!1,Lv=!0;function xq(e){const t=vb(e);return jIe(t)||qIe(t)||VIe(t)||HIe(t)||UIe(t)}function UIe(e){const t=new Uint8Array(e instanceof DataView?e.buffer:e),r=LIe(t);return r?{mimeType:r.mimeType,width:0,height:0}:null}function jIe(e){const t=vb(e);return t.byteLength>=24&&t.getUint32(0,of)===2303741511?{mimeType:"image/png",width:t.getUint32(16,of),height:t.getUint32(20,of)}:null}function VIe(e){const t=vb(e);return t.byteLength>=10&&t.getUint32(0,of)===1195984440?{mimeType:"image/gif",width:t.getUint16(6,Lv),height:t.getUint16(8,Lv)}:null}function HIe(e){const t=vb(e);return t.byteLength>=14&&t.getUint16(0,of)===16973&&t.getUint32(2,Lv)===t.byteLength?{mimeType:"image/bmp",width:t.getUint32(18,Lv),height:t.getUint32(22,Lv)}:null}function qIe(e){const t=vb(e);if(!(t.byteLength>=3&&t.getUint16(0,of)===65496&&t.getUint8(2)===255))return null;const{tableMarkers:n,sofMarkers:i}=WIe();let o=2;for(;o+9<t.byteLength;){const l=t.getUint16(o,of);if(i.has(l))return{mimeType:"image/jpeg",height:t.getUint16(o+5,of),width:t.getUint16(o+7,of)};if(!n.has(l))return null;o+=2,o+=t.getUint16(o,of)}return null}function WIe(){const e=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)e.add(r);return{tableMarkers:e,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function vb(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}async function XIe(e,t){var i;const{mimeType:r}=xq(e)||{},n=(i=globalThis.loaders)==null?void 0:i.parseImageNode;return $5(n),await n(e,r)}async function KIe(e,t,r){t=t||{};const i=(t.image||{}).type||"auto",{url:o}=r||{},l=GIe(i);let s;switch(l){case"imagebitmap":s=await OIe(e,t,o);break;case"image":s=await bq(e,t,o);break;case"data":s=await XIe(e);break;default:$5(!1)}return i==="data"&&(s=TIe(s)),s}function GIe(e){switch(e){case"auto":case"data":return AIe();default:return SIe(e),e}}const YIe=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],ZIe=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],JIe={image:{type:"auto",decode:!0}},QIe={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:bIe,mimeTypes:ZIe,extensions:YIe,parse:KIe,tests:[e=>!!xq(new DataView(e))],options:JIe},oo=new yb({id:"deck"});let oP={};function eRe(e){oP=e}function Ml(e,t,r,n){oo.level>0&&oP[e]&&oP[e].call(null,t,r,n)}function tRe(e){const t=e[0],r=e[e.length-1];return t==="{"&&r==="}"||t==="["&&r==="]"}const rRe={dataType:null,batchType:null,id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:tRe,parseTextSync:JSON.parse};function nRe(){const e="9.0.33",t=globalThis.deck&&globalThis.deck.VERSION;if(t&&t!==e)throw new Error(`deck.gl - multiple versions detected: ${t} vs ${e}`);return t||(oo.log(1,`deck.gl ${e}`)(),globalThis.deck={...globalThis.deck,VERSION:e,version:e,log:oo,_registerLoggers:eRe},KPe([rRe,[QIe,{imagebitmap:{premultiplyAlpha:"none"}}]])),e}const iRe=nRe();function Tg(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}const PT={number:{type:"number",validate(e,t){return Number.isFinite(e)&&typeof t=="object"&&(t.max===void 0||e<=t.max)&&(t.min===void 0||e>=t.min)}},array:{type:"array",validate(e,t){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function oRe(e){const t={};for(const[r,n]of Object.entries(e))t[r]=aRe(n);return t}function sRe(e,t,r){const n={};for(const[i,o]of Object.entries(t))e&&i in e&&!o.private?(o.validate&&Tg(o.validate(e[i],o),`${r}: invalid ${i}`),n[i]=e[i]):n[i]=o.value;return n}function aRe(e){let t=WF(e);if(t!=="object")return{value:e,...PT[t],type:t};if(typeof e=="object")return e?e.type!==void 0?{...e,...PT[e.type],type:e.type}:e.value===void 0?{type:"object",value:e}:(t=WF(e.value),{...e,...PT[t],type:t}):{type:"object",value:null};throw new Error("props")}function WF(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}const lRe=`#ifdef MODULE_LOGDEPTH
logdepth_adjustPosition(gl_Position);
#endif
`,cRe=`#ifdef MODULE_MATERIAL
gl_FragColor = material_filterColor(gl_FragColor);
#endif
#ifdef MODULE_LIGHTING
gl_FragColor = lighting_filterColor(gl_FragColor);
#endif
#ifdef MODULE_FOG
gl_FragColor = fog_filterColor(gl_FragColor);
#endif
#ifdef MODULE_PICKING
gl_FragColor = picking_filterHighlightColor(gl_FragColor);
gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif
#ifdef MODULE_LOGDEPTH
logdepth_setFragDepth();
#endif
`,uRe={vertex:lRe,fragment:cRe},XF=/void\s+main\s*\([^)]*\)\s*\{\n?/,KF=/}\n?[^{}]*$/,IT=[],Rw="__LUMA_INJECT_DECLARATIONS__";function hRe(e){const t={vertex:{},fragment:{}};for(const r in e){let n=e[r];const i=fRe(r);typeof n=="string"&&(n={order:0,injection:n}),t[i][r]=n}return t}function fRe(e){const t=e.slice(0,2);switch(t){case"vs":return"vertex";case"fs":return"fragment";default:throw new Error(t)}}function H5(e,t,r,n=!1){const i=t==="vertex";for(const o in r){const l=r[o];l.sort((f,p)=>f.order-p.order),IT.length=l.length;for(let f=0,p=l.length;f<p;++f)IT[f]=l[f].injection;const s=`${IT.join(`
`)}
`;switch(o){case"vs:#decl":i&&(e=e.replace(Rw,s));break;case"vs:#main-start":i&&(e=e.replace(XF,f=>f+s));break;case"vs:#main-end":i&&(e=e.replace(KF,f=>s+f));break;case"fs:#decl":i||(e=e.replace(Rw,s));break;case"fs:#main-start":i||(e=e.replace(XF,f=>f+s));break;case"fs:#main-end":i||(e=e.replace(KF,f=>s+f));break;default:e=e.replace(o,f=>f+s)}}return e=e.replace(Rw,""),n&&(e=e.replace(/\}\s*$/,o=>o+uRe[t])),e}let dRe=1;class Cg{constructor(t){Ce(this,"name");Ce(this,"vs");Ce(this,"fs");Ce(this,"getModuleUniforms");Ce(this,"dependencies");Ce(this,"deprecations");Ce(this,"defines");Ce(this,"injections");Ce(this,"uniforms",{});Ce(this,"uniformTypes",{});const{name:r,vs:n,fs:i,dependencies:o=[],uniformTypes:l={},uniformPropTypes:s={},getUniforms:f,deprecations:p=[],defines:v={},inject:x={}}=t;Tg(typeof r=="string"),this.name=r,this.vs=n,this.fs=i,this.getModuleUniforms=f,this.dependencies=Cg.instantiateModules(o),this.deprecations=this._parseDeprecationDefinitions(p),this.defines=v,this.injections=hRe(x),this.uniformTypes=l,s&&(this.uniforms=oRe(s))}static instantiateModules(t){return t.map(r=>{if(r instanceof Cg)return r;Tg(typeof r!="string",`Shader module use by name is deprecated. Import shader module '${JSON.stringify(r)}' and use it directly.`),r.name||(console.warn("shader module has no name"),r.name=`shader-module-${dRe++}`);const n=new Cg(r);return n.dependencies=Cg.instantiateModules(r.dependencies||[]),n})}getModuleSource(t){let r;switch(t){case"vertex":r=this.vs||"";break;case"fragment":r=this.fs||"";break;default:Tg(!1)}const n=this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_");return`// ----- MODULE ${this.name} ---------------

#define MODULE_${n}
${r}

`}getUniforms(t,r){return this.getModuleUniforms?this.getModuleUniforms(t,r):sRe(t,this.uniforms,this.name)}getDefines(){return this.defines}checkDeprecations(t,r){this.deprecations.forEach(n=>{var i;(i=n.regex)!=null&&i.test(t)&&(n.deprecated?r.deprecated(n.old,n.new)():r.removed(n.old,n.new)())})}_parseDeprecationDefinitions(t){return t.forEach(r=>{switch(r.type){case"function":r.regex=new RegExp(`\\b${r.old}\\(`);break;default:r.regex=new RegExp(`${r.type} ${r.old};`)}}),t}_defaultGetUniforms(t={}){const r={},n=this.uniforms;for(const i in n){const o=n[i];i in t&&!o.private?(o.validate&&Tg(o.validate(t[i],o),`${this.name}: invalid ${i}`),r[i]=t[i]):r[i]=o.value}return r}}function GF(e){if(e.source&&e.platformInfo.type==="webgpu")return{...e,vs:void 0,fs:void 0};if(!e.vs)throw new Error("no vertex shader");const t=YF(e.platformInfo,e.vs);let r;return e.fs&&(r=YF(e.platformInfo,e.fs)),{...e,vs:t,fs:r}}function YF(e,t){if(typeof t=="string")return t;switch(e.type){case"webgpu":if(t!=null&&t.wgsl)return t.wgsl;throw new Error("WebGPU does not support GLSL shaders");default:if(t!=null&&t.glsl)return t.glsl;throw new Error("WebGL does not support WGSL shaders")}}function dA(e){const t=Cg.instantiateModules(e);return pRe(t)}function pRe(e){const t={},r={};return wq({modules:e,level:0,moduleMap:t,moduleDepth:r}),Object.keys(r).sort((n,i)=>r[i]-r[n]).map(n=>t[n])}function wq(e){const{modules:t,level:r,moduleMap:n,moduleDepth:i}=e;if(r>=5)throw new Error("Possible loop in shader dependency graph");for(const o of t)n[o.name]=o,(i[o.name]===void 0||i[o.name]<r)&&(i[o.name]=r);for(const o of t)o.dependencies&&wq({modules:o.dependencies,level:r+1,moduleMap:n,moduleDepth:i})}function gRe(e){switch(e==null?void 0:e.gpu.toLowerCase()){case"apple":return`#define APPLE_GPU
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"nvidia":return`#define NVIDIA_GPU
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function mRe(e,t){var n;if(Number(((n=e.match(/^#version[ \t]+(\d+)/m))==null?void 0:n[1])||100)!==300)throw new Error("luma.gl v9 only supports GLSL 3.00 shader sources");switch(t){case"vertex":return e=ZF(e,yRe),e;case"fragment":return e=ZF(e,_Re),e;default:throw new Error(t)}}const Sq=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],yRe=[...Sq,[sP("attribute"),"in $1"],[sP("varying"),"out $1"]],_Re=[...Sq,[sP("varying"),"in $1"]];function ZF(e,t){for(const[r,n]of t)e=e.replace(r,n);return e}function sP(e){return new RegExp(`\\b${e}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}function Aq(e,t){let r="";for(const n in e){const i=e[n];if(r+=`void ${i.signature} {
`,i.header&&(r+=`  ${i.header}`),t[n]){const o=t[n];o.sort((l,s)=>l.order-s.order);for(const l of o)r+=`  ${l.injection}
`}i.footer&&(r+=`  ${i.footer}`),r+=`}
`}return r}function Eq(e){const t={vertex:{},fragment:{}};for(const r of e){let n,i;typeof r!="string"?(n=r,i=n.hook):(n={},i=r),i=i.trim();const[o,l]=i.split(":"),s=i.replace(/\(.+/,""),f=Object.assign(n,{signature:l});switch(o){case"vs":t.vertex[s]=f;break;case"fs":t.fragment[s]=f;break;default:throw new Error(o)}}return t}function vRe(e,t){return{name:bRe(e,t),language:"glsl",version:xRe(e)}}function bRe(e,t="unnamed"){const n=/#define[^\S\r\n]*SHADER_NAME[^\S\r\n]*([A-Za-z0-9_-]+)\s*/.exec(e);return n?n[1]:t}function xRe(e){let t=100;const r=e.match(/[^\s]+/g);if(r&&r.length>=2&&r[0]==="#version"){const n=parseInt(r[1],10);Number.isFinite(n)&&(t=n)}if(t!==100&&t!==300)throw new Error(`Invalid GLSL version ${t}`);return t}const Tq=`

${Rw}
`,wRe=`precision highp float;
`;function SRe(e){const t=dA(e.modules||[]);return{source:aP(e.platformInfo,{...e,source:e.source,stage:"vertex",modules:t}),getUniforms:f6(t)}}function ARe(e){const t=dA(e.modules||[]);return{vs:aP(e.platformInfo,{...e,source:e.vs,stage:"vertex",modules:t}),fs:aP(e.platformInfo,{...e,source:e.fs,stage:"fragment",modules:t}),getUniforms:f6(t)}}function ERe(e){const{vs:t,fs:r}=e,n=dA(e.modules||[]);return{vs:JF(e.platformInfo,{...e,source:t,stage:"vertex",modules:n}),fs:JF(e.platformInfo,{...e,source:r,stage:"fragment",modules:n}),getUniforms:f6(n)}}function aP(e,t){const{source:r,stage:n,modules:i,hookFunctions:o=[],inject:l={},log:s}=t;Tg(typeof r=="string","shader source must be a string");const f=r;let p="";const v=Eq(o),x={},S={},A={};for(const R in l){const z=typeof l[R]=="string"?{injection:l[R],order:0}:l[R],N=/^(v|f)s:(#)?([\w-]+)$/.exec(R);if(N){const B=N[2],U=N[3];B?U==="decl"?S[R]=[z]:A[R]=[z]:x[R]=[z]}else A[R]=[z]}const k=e.type!=="webgpu"?i:[];for(const R of k){s&&R.checkDeprecations(f,s);const z=R.getModuleSource(n,"wgsl");p+=z;const N=R.injections[n];for(const B in N){const U=/^(v|f)s:#([\w-]+)$/.exec(B);if(U){const ne=U[2]==="decl"?S:A;ne[B]=ne[B]||[],ne[B].push(N[B])}else x[B]=x[B]||[],x[B].push(N[B])}}return p+=Tq,p=H5(p,n,S),p+=Aq(v[n],x),p+=f,p=H5(p,n,A),p}function JF(e,t){const{id:r,source:n,stage:i,language:o="glsl",modules:l,defines:s={},hookFunctions:f=[],inject:p={},prologue:v=!0,log:x}=t;Tg(typeof n=="string","shader source must be a string");const S=o==="glsl"?vRe(n).version:-1,A=e.shaderLanguageVersion,k=S===100?"#version 100":"#version 300 es",z=n.split(`
`).slice(1).join(`
`),N={};l.forEach(Q=>{Object.assign(N,Q.getDefines())}),Object.assign(N,s);let B="";switch(o){case"wgsl":break;case"glsl":B=v?`${k}

// ----- PROLOGUE -------------------------
${TRe({id:r,source:n,stage:i})}
${`#define SHADER_TYPE_${i.toUpperCase()}`}
${gRe(e)}
${i==="fragment"?wRe:""}

// ----- APPLICATION DEFINES -------------------------

${CRe(N)}

`:`${k}
`;break}const U=Eq(f),K={},ne={},ee={};for(const Q in p){const re=typeof p[Q]=="string"?{injection:p[Q],order:0}:p[Q],Se=/^(v|f)s:(#)?([\w-]+)$/.exec(Q);if(Se){const J=Se[2],G=Se[3];J?G==="decl"?ne[Q]=[re]:ee[Q]=[re]:K[Q]=[re]}else ee[Q]=[re]}for(const Q of l){x&&Q.checkDeprecations(z,x);const re=Q.getModuleSource(i);B+=re;const Se=Q.injections[i];for(const J in Se){const G=/^(v|f)s:#([\w-]+)$/.exec(J);if(G){const ve=G[2]==="decl"?ne:ee;ve[J]=ve[J]||[],ve[J].push(Se[J])}else K[J]=K[J]||[],K[J].push(Se[J])}}return B+="// ----- MAIN SHADER SOURCE -------------------------",B+=Tq,B=H5(B,i,ne),B+=Aq(U[i],K),B+=z,B=H5(B,i,ee),o==="glsl"&&S!==A&&(B=mRe(B,i)),B.trim()}function f6(e){return function(r){const n={};for(const i of e){const o=i.getUniforms(r,n);Object.assign(n,o)}return n}}function TRe(e){const{id:t,source:r,stage:n}=e;return t&&r.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME ${t}_${n}

`:""}function CRe(e={}){let t="";for(const r in e){const n=e[r];(n||Number.isFinite(n))&&(t+=`#define ${r.toUpperCase()} ${e[r]}
`)}return t}const _g=class _g{constructor(){Ce(this,"_hookFunctions",[]);Ce(this,"_defaultModules",[])}static getDefaultShaderAssembler(){return _g.defaultShaderAssembler=_g.defaultShaderAssembler||new _g,_g.defaultShaderAssembler}addDefaultModule(t){this._defaultModules.find(r=>r.name===(typeof t=="string"?t:t.name))||this._defaultModules.push(t)}removeDefaultModule(t){const r=typeof t=="string"?t:t.name;this._defaultModules=this._defaultModules.filter(n=>n.name!==r)}addShaderHook(t,r){r&&(t=Object.assign(r,{hook:t})),this._hookFunctions.push(t)}assembleShader(t){const r=this._getModuleList(t.modules),n=this._hookFunctions,i=GF(t);return{...SRe({platformInfo:t.platformInfo,...i,modules:r,hookFunctions:n}),modules:r}}assembleShaderPair(t){const r=GF(t),n=this._getModuleList(t.modules),i=this._hookFunctions,{platformInfo:o}=t;return{...t.platformInfo.shaderLanguage==="wgsl"?ARe({platformInfo:o,...r,modules:n,hookFunctions:i}):ERe({platformInfo:o,...r,modules:n,hookFunctions:i}),modules:n}}_getModuleList(t=[]){const r=new Array(this._defaultModules.length+t.length),n={};let i=0;for(let o=0,l=this._defaultModules.length;o<l;++o){const s=this._defaultModules[o],f=s.name;r[i++]=s,n[f]=!0}for(let o=0,l=t.length;o<l;++o){const s=t[o],f=s.name;n[f]||(r[i++]=s,n[f]=!0)}return r.length=i,Cg.instantiateModules(r)}};Ce(_g,"defaultShaderAssembler");let q5=_g;const PRe=`out vec4 transform_output;
void main() {
transform_output = vec4(0);
}`,IRe=`#version 300 es
${PRe}`;function RRe(e){const{input:t,inputChannels:r,output:n}={};if(!t)return IRe;if(!r)throw new Error("inputChannels");const i=kRe(r),o=MRe(t,r);return`#version 300 es
in ${i} ${t};
out vec4 ${n};
void main() {
  ${n} = ${o};
}`}function kRe(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`invalid channels: ${e}`)}}function MRe(e,t){switch(t){case 1:return`vec4(${e}, 0.0, 0.0, 1.0)`;case 2:return`vec4(${e}, 0.0, 1.0)`;case 3:return`vec4(${e}, 1.0)`;case 4:return e;default:throw new Error(`invalid channels: ${t}`)}}const pr=new yb({id:"luma.gl"});class ORe{constructor(){Ce(this,"stats",new Map)}getStats(t){return this.get(t)}get(t){return this.stats.has(t)||this.stats.set(t,new hA({id:t})),this.stats.get(t)}}const d6=new ORe;function NRe(){const e="9.0.27",t="set luma.log.level=1 (or higher) to trace rendering";if(globalThis.luma&&globalThis.luma.VERSION!==e)throw new Error(`luma.gl - multiple VERSIONs detected: ${globalThis.luma.VERSION} vs ${e}`);return globalThis.luma||(jp()&&pr.log(1,`${e} - ${t}`)(),globalThis.luma=globalThis.luma||{VERSION:e,version:e,log:pr,stats:d6}),e}const DRe=NRe();function LRe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)?e:null}function T2(e){return Array.isArray(e)?e.length===0||typeof e[0]=="number"?e:null:LRe(e)}const RT={};function Tm(e="id"){RT[e]=RT[e]||1;const t=RT[e]++;return`${e}-${t}`}function W5(e){let t=!0;for(const r in e){t=!1;break}return t}var oC;let Yi=(oC=class{constructor(t,r,n){Ce(this,"id");Ce(this,"props");Ce(this,"userData",{});Ce(this,"_device");Ce(this,"destroyed",!1);Ce(this,"allocatedBytes",0);Ce(this,"_attachedResources",new Set);if(!t)throw new Error("no device");this._device=t,this.props=FRe(r,n);const i=this.props.id!=="undefined"?this.props.id:Tm(this[Symbol.toStringTag]);this.props.id=i,this.id=i,this.userData=this.props.userData||{},this.addStats()}destroy(){this.destroyResource()}delete(){return this.destroy(),this}toString(){return`${this[Symbol.toStringTag]||this.constructor.name}(${this.id})`}getProps(){return this.props}attachResource(t){this._attachedResources.add(t)}detachResource(t){this._attachedResources.delete(t)}destroyAttachedResource(t){this._attachedResources.delete(t)&&t.destroy()}destroyAttachedResources(){for(const t of Object.values(this._attachedResources))t.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){const t=this._device.statsManager.getStats("Resource Counts"),r=this[Symbol.toStringTag];t.get(`${r}s Active`).decrementCount()}trackAllocatedMemory(t,r=this[Symbol.toStringTag]){const n=this._device.statsManager.getStats("Resource Counts");n.get("GPU Memory").addCount(t),n.get(`${r} Memory`).addCount(t),this.allocatedBytes=t}trackDeallocatedMemory(t=this[Symbol.toStringTag]){const r=this._device.statsManager.getStats("Resource Counts");r.get("GPU Memory").subtractCount(this.allocatedBytes),r.get(`${t} Memory`).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){const t=this._device.statsManager.getStats("Resource Counts"),r=this[Symbol.toStringTag];t.get("Resources Created").incrementCount(),t.get(`${r}s Created`).incrementCount(),t.get(`${r}s Active`).incrementCount()}},Ce(oC,"defaultProps",{id:"undefined",handle:void 0,userData:void 0}),oC);function FRe(e,t){const r={...t};for(const n in e)e[n]!==void 0&&(r[n]=e[n]);return r}const Ma=class Ma extends Yi{constructor(r,n){const i={...n};(n.usage||0)&Ma.INDEX&&!n.indexType&&(n.data instanceof Uint32Array?i.indexType="uint32":n.data instanceof Uint16Array&&(i.indexType="uint16"));super(r,i,Ma.defaultProps);Ce(this,"usage");Ce(this,"indexType");Ce(this,"updateTimestamp");Ce(this,"debugData",new ArrayBuffer(0));this.usage=n.usage||0,this.indexType=i.indexType,this.updateTimestamp=r.incrementTimestamp()}get[Symbol.toStringTag](){return"Buffer"}readSyncWebGL(r,n){throw new Error("not implemented")}_setDebugData(r,n,i){const o=ArrayBuffer.isView(r)?r.buffer:r,l=Math.min(r?r.byteLength:i,Ma.DEBUG_DATA_MAX_LENGTH);r===null?this.debugData=new ArrayBuffer(l):n===0&&i===r.byteLength?this.debugData=o.slice(0,l):this.debugData=o.slice(n,n+l)}};Ce(Ma,"defaultProps",{...Yi.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",mappedAtCreation:!1}),Ce(Ma,"MAP_READ",1),Ce(Ma,"MAP_WRITE",2),Ce(Ma,"COPY_SRC",4),Ce(Ma,"COPY_DST",8),Ce(Ma,"INDEX",16),Ce(Ma,"VERTEX",32),Ce(Ma,"UNIFORM",64),Ce(Ma,"STORAGE",128),Ce(Ma,"INDIRECT",256),Ce(Ma,"QUERY_RESOLVE",512),Ce(Ma,"DEBUG_DATA_MAX_LENGTH",32);let Vo=Ma;function Cq(e){const t=QF[e],r=BRe(t),n=e.includes("norm"),i=!n&&!e.startsWith("float"),o=e.startsWith("s");return{dataType:QF[e],byteLength:r,integer:i,signed:o,normalized:n}}function BRe(e){return zRe[e]}const QF={uint8:"uint8",sint8:"sint8",unorm8:"uint8",snorm8:"sint8",uint16:"uint16",sint16:"sint16",unorm16:"uint16",snorm16:"sint16",float16:"float16",float32:"float32",uint32:"uint32",sint32:"sint32"},zRe={uint8:1,sint8:1,uint16:2,sint16:2,float16:2,float32:4,uint32:4,sint32:4},$Re=["bc1","bc2","bc3","bc4","bc5","bc6","bc7","etc1","etc2","eac","atc","astc","pvrtc"],URe=/^(rg?b?a?)([0-9]*)([a-z]*)(-srgb)?(-webgl|-unsized)?$/;function jRe(e){return $Re.some(t=>e.startsWith(t))}function Pq(e){const t=URe.exec(e);if(t){const[,r,n,i,o,l]=t;if(r){const s=`${i}${n}`,f=Cq(s);return{format:r,components:r.length,srgb:o==="-srgb",unsized:l==="-unsized",webgl:l==="-webgl",...f}}}return HRe(e)}const VRe={"rgba4unorm-webgl":{format:"rgba",bpp:2},"rgb565unorm-webgl":{format:"rgb",bpp:2},"rgb5a1unorm-webgl":{format:"rgba",bbp:2},rgb9e5ufloat:{format:"rgb",bbp:4},rg11b10ufloat:{format:"rgb",bbp:4},rgb10a2unorm:{format:"rgba",bbp:4},"rgb10a2uint-webgl":{format:"rgba",bbp:4},stencil8:{components:1,bpp:1,a:"stencil"},depth16unorm:{components:1,bpp:2,a:"depth"},depth24plus:{components:1,bpp:3,a:"depth"},depth32float:{components:1,bpp:4,a:"depth"},"depth24plus-stencil8":{components:2,bpp:4,a:"depth-stencil"},"depth24unorm-stencil8":{components:2,bpp:4,a:"depth-stencil"},"depth32float-stencil8":{components:2,bpp:4,a:"depth-stencil"}};function HRe(e){var r;const t=VRe[e];if(!t)throw new Error(`Unknown format ${e}`);return{format:t.format||"",components:t.components||((r=t.format)==null?void 0:r.length)||1,byteLength:t.bpp||1,srgb:!1,unsized:!1}}class qRe{}class WRe{constructor(t=[],r){Ce(this,"features");Ce(this,"disabledFeatures");this.features=new Set(t),this.disabledFeatures=r||{}}*[Symbol.iterator](){yield*this.features}has(t){return!this.disabledFeatures[t]&&this.features.has(t)}}const Uv=class Uv{constructor(t){Ce(this,"id");Ce(this,"props");Ce(this,"userData",{});Ce(this,"statsManager",d6);Ce(this,"_lumaData",{});Ce(this,"timestamp",0);this.props={...Uv.defaultProps,...t},this.id=this.props.id||Tm(this[Symbol.toStringTag].toLowerCase())}get[Symbol.toStringTag](){return"Device"}isTextureFormatCompressed(t){return jRe(t)}loseDevice(){return!1}getCanvasContext(){if(!this.canvasContext)throw new Error("Device has no CanvasContext");return this.canvasContext}createTexture(t){return(t instanceof Promise||typeof t=="string")&&(t={data:t}),this._createTexture(t)}createCommandEncoder(t={}){throw new Error("not implemented")}readPixelsToArrayWebGL(t,r){throw new Error("not implemented")}readPixelsToBufferWebGL(t,r){throw new Error("not implemented")}setParametersWebGL(t){throw new Error("not implemented")}getParametersWebGL(t){throw new Error("not implemented")}withParametersWebGL(t,r){throw new Error("not implemented")}clearWebGL(t){throw new Error("not implemented")}resetWebGL(){throw new Error("not implemented")}incrementTimestamp(){return this.timestamp++}onError(t){this.props.onError(t)}_getBufferProps(t){(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const r={...t};return(t.usage||0)&Vo.INDEX&&!t.indexType&&(t.data instanceof Uint32Array?r.indexType="uint32":t.data instanceof Uint16Array?r.indexType="uint16":pr.warn("indices buffer content must be of integer type")()),r}};Ce(Uv,"defaultProps",{id:null,canvas:null,container:null,manageState:!0,width:800,height:600,requestMaxLimits:!0,debug:!!pr.get("debug"),spector:!!(pr.get("spector")||pr.get("spectorjs")),break:[],initalizeFeatures:!0,disabledFeatures:{"compilation-status-async-webgl":!0},gl:null,onError:t=>pr.error(t.message)}),Ce(Uv,"VERSION",DRe);let b_=Uv;function fo(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}const j1=new Map,by=class by{static registerDevices(t){for(const r of t)fo(r.type&&r.isSupported&&r.create),j1.set(r.type,r)}static getAvailableDevices(){return Array.from(j1).map(t=>t.type)}static getSupportedDevices(){return Array.from(j1).filter(t=>t.isSupported()).map(t=>t.type)}static setDefaultDeviceProps(t){Object.assign(b_.defaultProps,t)}static async attachDevice(t){const r=eB(t.devices)||j1;if(t.handle instanceof WebGL2RenderingContext){const n=r.get("webgl");if(n)return await n.attach(t.handle)}if(t.handle===null){const n=r.get("unknown");if(n)return await n.attach(null)}throw new Error("Failed to attach device. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.")}static async createDevice(t={}){var o,l;t={...by.defaultProps,...t},t.gl&&(t.type="webgl");const r=eB(t.devices)||j1;let n,i;switch(t.type){case"webgpu":if(n=r.get("webgpu"),n)return await n.create(t);break;case"webgl":if(i=r.get("webgl"),i)return await i.create(t);break;case"unknown":const s=r.get("unknown");if(s)return await s.create(t);break;case"best-available":if(n=r.get("webgpu"),(o=n==null?void 0:n.isSupported)!=null&&o.call(n))return await n.create(t);if(i=r.get("webgl"),(l=i==null?void 0:i.isSupported)!=null&&l.call(i))return await i.create(t);break}throw new Error("No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.")}static enforceWebGL2(t=!0){const r=HTMLCanvasElement.prototype;if(!t&&r.originalGetContext){r.getContext=r.originalGetContext,r.originalGetContext=void 0;return}r.originalGetContext=r.getContext,r.getContext=function(n,i){return n==="webgl"||n==="experimental-webgl"?this.originalGetContext("webgl2",i):this.originalGetContext(n,i)}}};Ce(by,"defaultProps",{...b_.defaultProps,type:"best-available",devices:void 0}),Ce(by,"stats",d6),Ce(by,"log",pr);let By=by;function eB(e){if(!e||(e==null?void 0:e.length)===0)return null;const t=new Map;for(const r of e)t.set(r.type,r);return t}const XRe=jp()&&typeof document<"u",pA=()=>XRe&&document.readyState==="complete",KRe={canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,colorSpace:"srgb",alphaMode:"opaque"};class p6{constructor(t){Ce(this,"id");Ce(this,"props");Ce(this,"canvas");Ce(this,"htmlCanvas");Ce(this,"offscreenCanvas");Ce(this,"type");Ce(this,"width",1);Ce(this,"height",1);Ce(this,"resizeObserver");Ce(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});if(this.props={...KRe,...t},t=this.props,!jp()){this.id="node-canvas-context",this.type="node",this.width=this.props.width,this.height=this.props.height,this.canvas=null;return}if(t.canvas)typeof t.canvas=="string"?this.canvas=ZRe(t.canvas):this.canvas=t.canvas;else{const r=JRe(t),n=YRe((t==null?void 0:t.container)||null);n.insertBefore(r,n.firstChild),this.canvas=r,t!=null&&t.visible||(this.canvas.style.visibility="hidden")}this.canvas instanceof HTMLCanvasElement?(this.id=this.canvas.id,this.type="html-canvas",this.htmlCanvas=this.canvas):(this.id="offscreen-canvas",this.type="offscreen-canvas",this.offscreenCanvas=this.canvas),this.canvas instanceof HTMLCanvasElement&&t.autoResize&&(this.resizeObserver=new ResizeObserver(r=>{for(const n of r)n.target===this.canvas&&this.update()}),this.resizeObserver.observe(this.canvas))}static get isPageLoaded(){return pA()}getDevicePixelRatio(t){return typeof OffscreenCanvas<"u"&&this.canvas instanceof OffscreenCanvas||(t=t===void 0?this.props.useDevicePixels:t,!t||t<=0)?1:t===!0?typeof window<"u"&&window.devicePixelRatio||1:t}getPixelSize(){switch(this.type){case"node":return[this.width,this.height];case"offscreen-canvas":return[this.canvas.width,this.canvas.height];case"html-canvas":const t=this.getDevicePixelRatio(),r=this.canvas;return r.parentElement?[r.clientWidth*t,r.clientHeight*t]:[this.canvas.width,this.canvas.height];default:throw new Error(this.type)}}getAspect(){const[t,r]=this.getPixelSize();return t/r}cssToDeviceRatio(){try{const[t]=this.getDrawingBufferSize(),{clientWidth:r}=this._canvasSizeInfo;return r?t/r:1}catch{return 1}}cssToDevicePixels(t,r=!0){const n=this.cssToDeviceRatio(),[i,o]=this.getDrawingBufferSize();return QRe(t,n,i,o,r)}setDevicePixelRatio(t,r={}){if(!this.htmlCanvas)return;let n="width"in r?r.width:this.htmlCanvas.clientWidth,i="height"in r?r.height:this.htmlCanvas.clientHeight;(!n||!i)&&(pr.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,n=this.htmlCanvas.width||1,i=this.htmlCanvas.height||1);const o=this._canvasSizeInfo;if(o.clientWidth!==n||o.clientHeight!==i||o.devicePixelRatio!==t){let l=t;const s=Math.floor(n*l),f=Math.floor(i*l);this.htmlCanvas.width=s,this.htmlCanvas.height=f;const[p,v]=this.getDrawingBufferSize();(p!==s||v!==f)&&(l=Math.min(p/n,v/i),this.htmlCanvas.width=Math.floor(n*l),this.htmlCanvas.height=Math.floor(i*l),pr.warn("Device pixel ratio clamped")()),this._canvasSizeInfo.clientWidth=n,this._canvasSizeInfo.clientHeight=i,this._canvasSizeInfo.devicePixelRatio=t}}getDrawingBufferSize(){const t=this.device.gl;if(!t)throw new Error("canvas size");return[t.drawingBufferWidth,t.drawingBufferHeight]}_setAutoCreatedCanvasId(t){var r;((r=this.htmlCanvas)==null?void 0:r.id)==="lumagl-auto-created-canvas"&&(this.htmlCanvas.id=t)}}Ce(p6,"pageLoaded",GRe());function GRe(){return pA()||typeof window>"u"?Promise.resolve():new Promise(e=>{window.addEventListener("load",()=>e())})}function YRe(e){if(typeof e=="string"){const t=document.getElementById(e);if(!t&&!pA())throw new Error(`Accessing '${e}' before page was loaded`);if(!t)throw new Error(`${e} is not an HTML element`);return t}else if(e)return e;return document.body}function ZRe(e){const t=document.getElementById(e);if(!t&&!pA())throw new Error(`Accessing '${e}' before page was loaded`);if(!(t instanceof HTMLCanvasElement))throw new Error("Object is not a canvas element");return t}function JRe(e){const{width:t,height:r}=e,n=document.createElement("canvas");return n.id="lumagl-auto-created-canvas",n.width=t||1,n.height=r||1,n.style.width=Number.isFinite(t)?`${t}px`:"100%",n.style.height=Number.isFinite(r)?`${r}px`:"100%",n}function QRe(e,t,r,n,i){const o=e,l=tB(o[0],t,r);let s=rB(o[1],t,n,i),f=tB(o[0]+1,t,r);const p=f===r-1?f:f-1;f=rB(o[1]+1,t,n,i);let v;return i?(f=f===0?f:f+1,v=s,s=f):v=f===n-1?f:f-1,{x:l,y:s,width:Math.max(p-l+1,1),height:Math.max(v-s+1,1)}}function tB(e,t,r){return Math.min(Math.round(e*t),r-1)}function rB(e,t,r,n){return n?Math.max(0,r-1-Math.round(e*t)):Math.min(Math.round(e*t),r-1)}const Yf=class Yf extends Yi{constructor(r,n,i=Yf.defaultProps){super(r,n,i);Ce(this,"dimension");Ce(this,"format");Ce(this,"width");Ce(this,"height");Ce(this,"depth");Ce(this,"updateTimestamp");this.dimension=this.props.dimension,this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.updateTimestamp=r.incrementTimestamp()}get[Symbol.toStringTag](){return"Texture"}};Ce(Yf,"defaultProps",{...Yi.defaultProps,data:null,dimension:"2d",format:"rgba8unorm",width:void 0,height:void 0,depth:1,mipmaps:!0,compressed:!1,usage:0,mipLevels:void 0,samples:void 0,type:void 0,sampler:{},view:void 0}),Ce(Yf,"COPY_SRC",1),Ce(Yf,"COPY_DST",2),Ce(Yf,"TEXTURE_BINDING",4),Ce(Yf,"STORAGE_BINDING",8),Ce(Yf,"RENDER_ATTACHMENT",16);let Au=Yf;const dS=class dS extends Yi{get[Symbol.toStringTag](){return"TextureView"}constructor(t,r){super(t,r,dS.defaultProps)}};Ce(dS,"defaultProps",{...Yi.defaultProps,format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0});let X5=dS;function eke(e,t,r){let n="";const i=t.split(/\r?\n/),o=e.slice().sort((l,s)=>l.lineNum-s.lineNum);switch((r==null?void 0:r.showSourceCode)||"no"){case"all":let l=0;for(let s=1;s<=i.length;s++)for(n+=Iq(i[s-1],s,r);o.length>l&&o[l].lineNum===s;){const f=o[l++];n+=nB(f,i,f.lineNum,{...r,inlineSource:!1})}return n;case"issues":case"no":for(const s of e)n+=nB(s,i,s.lineNum,{inlineSource:(r==null?void 0:r.showSourceCode)!=="no"});return n}}function nB(e,t,r,n){if(n!=null&&n.inlineSource){const i=tke(t,r),o=e.linePos>0?`${" ".repeat(e.linePos+5)}^^^
`:"";return`
${i}${o}${e.type.toUpperCase()}: ${e.message}

`}return n!=null&&n.html?`<div class='luma-compiler-log-error' style="color:red;"><b> ${e.type.toUpperCase()}: ${e.message}</b></div>`:`${e.type.toUpperCase()}: ${e.message}`}function tke(e,t,r){let n="";for(let i=t-2;i<=t;i++){const o=e[i-1];o!==void 0&&(n+=Iq(o,t,r))}return n}function Iq(e,t,r){const n=r!=null&&r.html?nke(e):e;return`${rke(String(t),4)}: ${n}${r!=null&&r.html?"<br/>":`
`}`}function rke(e,t){let r="";for(let n=e.length;n<t;++n)r+=" ";return r+e}function nke(e){return e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}function Rq(e,t){return{name:ike(e,t),language:"glsl",version:oke(e)}}function ike(e,t="unnamed"){const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(e);return n?n[1]:t}function oke(e){let t=100;const r=e.match(/[^\s]+/g);if(r&&r.length>=2&&r[0]==="#version"){const n=parseInt(r[1],10);Number.isFinite(n)&&(t=n)}return t}const pS=class pS extends Yi{constructor(r,n){super(r,{id:ske(n),...n},pS.defaultProps);Ce(this,"stage");Ce(this,"source");Ce(this,"compilationStatus","pending");this.stage=this.props.stage,this.source=this.props.source}get[Symbol.toStringTag](){return"Shader"}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(r=this.props.debug){switch(r){case"never":return;case"errors":if(this.compilationStatus==="success")return;break}const n=await this.getCompilationInfo();this.props.debug==="warnings"&&(n==null?void 0:n.length)===0||this._displayShaderLog(n)}_displayShaderLog(r){var p;if(typeof document>"u"||!(document!=null&&document.createElement))return;const n=Rq(this.source).name,i=`${this.stage} ${n}`;let o=eke(r,this.source,{showSourceCode:"all",html:!0});const l=this.getTranslatedSource();l&&(o+=`<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>${l}</pre></code>`);const s=document.createElement("Button");s.innerHTML=`
<h1>Shader Compilation Error in ${i}</h1><br /><br />
<code style="user-select:text;"><pre>
${o}
</pre></code>`,s.style.top="10px",s.style.left="10px",s.style.position="absolute",s.style.zIndex="9999",s.style.width="100%",s.style.textAlign="left",document.body.appendChild(s);const f=document.getElementsByClassName("luma-compiler-log-error");(p=f[0])!=null&&p.scrollIntoView&&f[0].scrollIntoView(),s.onclick=()=>{const v=`data:text/plain,${encodeURIComponent(this.source)}`;navigator.clipboard.writeText(v)}}};Ce(pS,"defaultProps",{...Yi.defaultProps,language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debug:"errors"});let K5=pS;function ske(e){return Rq(e.source).name||e.id||Tm(`unnamed ${e.stage}-shader`)}const gS=class gS extends Yi{get[Symbol.toStringTag](){return"Sampler"}constructor(t,r){super(t,r,gS.defaultProps)}};Ce(gS,"defaultProps",{...Yi.defaultProps,type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"nearest",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1});let G5=gS;const mS=class mS extends Yi{constructor(r,n={}){super(r,n,mS.defaultProps);Ce(this,"width");Ce(this,"height");Ce(this,"colorAttachments",[]);Ce(this,"depthStencilAttachment",null);this.width=this.props.width,this.height=this.props.height}get[Symbol.toStringTag](){return"Framebuffer"}resize(r){let n=!r;if(r){const[i,o]=Array.isArray(r)?r:[r.width,r.height];n=n||o!==this.height||i!==this.width,this.width=i,this.height=o}n&&(pr.log(2,`Resizing framebuffer ${this.id} to ${this.width}x${this.height}`)(),this.resizeAttachments(this.width,this.height))}autoCreateAttachmentTextures(){if(this.props.colorAttachments.length===0&&!this.props.depthStencilAttachment)throw new Error("Framebuffer has noattachments");this.colorAttachments=this.props.colorAttachments.map(n=>{if(typeof n=="string"){const i=this.createColorTexture(n);return this.attachResource(i),i.view}return n instanceof Au?n.view:n});const r=this.props.depthStencilAttachment;if(r)if(typeof r=="string"){const n=this.createDepthStencilTexture(r);this.attachResource(n),this.depthStencilAttachment=n.view}else r instanceof Au?this.depthStencilAttachment=r.view:this.depthStencilAttachment=r}createColorTexture(r){return this.device.createTexture({id:"color-attachment",usage:Au.RENDER_ATTACHMENT,format:r,width:this.width,height:this.height})}createDepthStencilTexture(r){return this.device.createTexture({id:"depth-stencil-attachment",usage:Au.RENDER_ATTACHMENT,format:r,width:this.width,height:this.height})}resizeAttachments(r,n){for(let i=0;i<this.colorAttachments.length;++i)if(this.colorAttachments[i]){const o=this.device._createTexture({...this.colorAttachments[i].props,width:r,height:n});this.destroyAttachedResource(this.colorAttachments[i]),this.colorAttachments[i]=o.view,this.attachResource(o.view)}if(this.depthStencilAttachment){const i=this.device._createTexture({...this.depthStencilAttachment.props,width:r,height:n});this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=i.view,this.attachResource(i)}}};Ce(mS,"defaultProps",{...Yi.defaultProps,width:1,height:1,colorAttachments:[],depthStencilAttachment:null});let Y5=mS;const yS=class yS extends Yi{constructor(r,n){super(r,n,yS.defaultProps);Ce(this,"shaderLayout");Ce(this,"bufferLayout");Ce(this,"linkStatus","pending");Ce(this,"hash","");this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}get[Symbol.toStringTag](){return"RenderPipeline"}setUniformsWebGL(r){throw new Error("Use uniform blocks")}};Ce(yS,"defaultProps",{...Yi.defaultProps,vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",parameters:{},bindings:{},uniforms:{}});let x_=yS;const _S=class _S extends Yi{get[Symbol.toStringTag](){return"RenderPass"}constructor(t,r){super(t,r,_S.defaultProps)}};Ce(_S,"defaultProps",{...Yi.defaultProps,framebuffer:null,parameters:void 0,clearColor:[0,0,0,0],clearDepth:1,clearStencil:0,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0});let lP=_S;const vS=class vS extends Yi{constructor(r,n){super(r,n,vS.defaultProps);Ce(this,"hash","")}get[Symbol.toStringTag](){return"ComputePipeline"}};Ce(vS,"defaultProps",{...Yi.defaultProps,shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0});let Z5=vS;const bS=class bS extends Yi{get[Symbol.toStringTag](){return"CommandEncoder"}constructor(t,r){super(t,r,bS.defaultProps)}};Ce(bS,"defaultProps",{...Yi.defaultProps,measureExecutionTime:void 0});let cP=bS;const xS=class xS extends Yi{get[Symbol.toStringTag](){return"CommandBuffer"}constructor(t,r){super(t,r,xS.defaultProps)}};Ce(xS,"defaultProps",{...Yi.defaultProps});let uP=xS;function ake(e){const[t,r]=cke[e],n=t==="i32"||t==="u32",i=t!=="u32",o=uke[t]*r,l=lke(t,r);return{dataType:t,components:r,defaultVertexFormat:l,byteLength:o,integer:n,signed:i}}function lke(e,t){let r;switch(e){case"f32":r="float32";break;case"i32":r="sint32";break;case"u32":r="uint32";break;case"f16":return t<=2?"float16x2":"float16x4"}return t===1?r:`${r}x${t}`}const cke={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},uke={f32:4,f16:2,i32:4,u32:4};function kq(e){let t;e.endsWith("-webgl")&&(e.replace("-webgl",""),t=!0);const[r,n]=e.split("x"),i=r,o=n?parseInt(n):1,l=Cq(i),s={type:i,components:o,byteLength:l.byteLength*o,integer:l.integer,signed:l.signed,normalized:l.normalized};return t&&(s.webglOnly=!0),s}function Mq(e,t){const r={};for(const n of e.attributes)r[n.name]=fke(e,t,n.name);return r}function hke(e,t,r=16){const n=Mq(e,t),i=new Array(r).fill(null);for(const o of Object.values(n))i[o.location]=o;return i}function fke(e,t,r){const n=dke(e,r),i=pke(t,r);if(!n)return null;const o=ake(n.type),l=(i==null?void 0:i.vertexFormat)||o.defaultVertexFormat,s=kq(l);return{attributeName:(i==null?void 0:i.attributeName)||n.name,bufferName:(i==null?void 0:i.bufferName)||n.name,location:n.location,shaderType:n.type,shaderDataType:o.dataType,shaderComponents:o.components,vertexFormat:l,bufferDataType:s.type,bufferComponents:s.components,normalized:s.normalized,integer:o.integer,stepMode:(i==null?void 0:i.stepMode)||n.stepMode,byteOffset:(i==null?void 0:i.byteOffset)||0,byteStride:(i==null?void 0:i.byteStride)||0}}function dke(e,t){const r=e.attributes.find(n=>n.name===t);return r||pr.warn(`shader layout attribute "${t}" not present in shader`),r||null}function pke(e,t){gke(e);let r=mke(e,t);return r||(r=yke(e,t),r)?r:(pr.warn(`layout for attribute "${t}" not present in buffer layout`),null)}function gke(e){for(const t of e)(t.attributes&&t.format||!t.attributes&&!t.format)&&pr.warn(`BufferLayout ${name} must have either 'attributes' or 'format' field`)}function mke(e,t){for(const r of e)if(r.format&&r.name===t)return{attributeName:r.name,bufferName:t,stepMode:r.stepMode,vertexFormat:r.format,byteOffset:0,byteStride:r.byteStride||0};return null}function yke(e,t){var r;for(const n of e){let i=n.byteStride;if(typeof n.byteStride!="number")for(const l of n.attributes||[]){const s=kq(l.format);i+=s.byteLength}const o=(r=n.attributes)==null?void 0:r.find(l=>l.attribute===t);if(o)return{attributeName:o.attribute,bufferName:n.name,stepMode:n.stepMode,vertexFormat:o.format,byteOffset:o.byteOffset,byteStride:i}}return null}function _ke(e,t){const r={...e,attributes:e.attributes.map(n=>({...n}))};for(const n of(t==null?void 0:t.attributes)||[]){const i=r.attributes.find(o=>o.name===n.name);i?(i.type=n.type||i.type,i.stepMode=n.stepMode||i.stepMode):pr.warn(`shader layout attribute ${n.name} not present in shader`)}return r}const wS=class wS extends Yi{constructor(r,n){super(r,n,wS.defaultProps);Ce(this,"maxVertexAttributes");Ce(this,"attributeInfos");Ce(this,"indexBuffer",null);Ce(this,"attributes");this.maxVertexAttributes=r.limits.maxVertexAttributes,this.attributes=new Array(this.maxVertexAttributes).fill(null),this.attributeInfos=hke(n.renderPipeline.shaderLayout,n.renderPipeline.bufferLayout,this.maxVertexAttributes)}get[Symbol.toStringTag](){return"VertexArray"}setConstantWebGL(r,n){throw new Error("constant attributes not supported")}};Ce(wS,"defaultProps",{...Yi.defaultProps,renderPipeline:null});let hP=wS;const SS=class SS extends Yi{get[Symbol.toStringTag](){return"TransformFeedback"}constructor(t,r){super(t,r,SS.defaultProps)}};Ce(SS,"defaultProps",{...Yi.defaultProps,layout:void 0,buffers:{}});let fP=SS;const AS=class AS extends Yi{get[Symbol.toStringTag](){return"QuerySet"}constructor(t,r){super(t,r,AS.defaultProps)}};Ce(AS,"defaultProps",{...Yi.defaultProps,type:void 0,count:void 0});let dP=AS;const vke={f32:{type:"f32",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16}};function bke(e){const t=vke[e];return fo(e),t}function xke(e,t){switch(t){case 1:return e;case 2:return e+e%2;default:return e+(4-e%4)%4}}let Dx;function Oq(e){return(!Dx||Dx.byteLength<e)&&(Dx=new ArrayBuffer(e)),Dx}function wke(e,t){const r=Oq(e.BYTES_PER_ELEMENT*t);return new e(r,0,t)}function Ske(e){const{target:t,source:r,start:n=0,count:i=1}=e,o=r.length,l=i*o;let s=0;for(let f=n;s<o;s++)t[f++]=r[s];for(;s<l;)s<l-s?(t.copyWithin(n+s,n,n+s),s*=2):(t.copyWithin(n+s,n,n+l-s),s=l);return e.target}const iB=1024;class Ake{constructor(t){Ce(this,"layout",{});Ce(this,"byteLength");let r=0;for(const[i,o]of Object.entries(t)){const l=bke(o),{type:s,components:f}=l;r=xke(r,f);const p=r;r+=f,this.layout[i]={type:s,size:f,offset:p}}r+=(4-r%4)%4;const n=r*4;this.byteLength=Math.max(n,iB)}getData(t){const r=Math.max(this.byteLength,iB),n=Oq(r),i={i32:new Int32Array(n),u32:new Uint32Array(n),f32:new Float32Array(n),f16:new Uint16Array(n)};for(const[o,l]of Object.entries(t)){const s=this.layout[o];if(!s){pr.warn(`Supplied uniform value ${o} not present in uniform block layout`)();continue}const{type:f,size:p,offset:v}=s,x=i[f];if(p===1){if(typeof l!="number"&&typeof l!="boolean"){pr.warn(`Supplied value for single component uniform ${o} is not a number: ${l}`)();continue}x[v]=Number(l)}else{const S=T2(l);if(!S){pr.warn(`Supplied value for multi component / array uniform ${o} is not a numeric array: ${l}`)();continue}x.set(S,v)}}return new Uint8Array(n)}has(t){return!!this.layout[t]}get(t){return this.layout[t]}}function Eke(e,t,r=16){if(e!==t)return!1;const n=T2(e);if(!n)return!1;const i=T2(t);if(i&&n.length===i.length){for(let o=0;o<n.length;++o)if(i[o]!==n[o])return!1}return!0}function Tke(e){const t=T2(e);return t?t.slice():e}class Cke{constructor(t){Ce(this,"name");Ce(this,"uniforms",{});Ce(this,"modifiedUniforms",{});Ce(this,"modified",!0);Ce(this,"bindingLayout",{});Ce(this,"needsRedraw","initialized");var r;if(this.name=t==null?void 0:t.name,t!=null&&t.name&&(t!=null&&t.shaderLayout)){const n=(r=t==null?void 0:t.shaderLayout.bindings)==null?void 0:r.find(o=>o.type==="uniform"&&o.name===(t==null?void 0:t.name));if(!n)throw new Error(t==null?void 0:t.name);const i=n;for(const o of i.uniforms||[])this.bindingLayout[o.name]=o}}setUniforms(t){for(const[r,n]of Object.entries(t))this._setUniform(r,n),this.needsRedraw||this.setNeedsRedraw(`${this.name}.${r}=${n}`)}setNeedsRedraw(t){this.needsRedraw=this.needsRedraw||t}getAllUniforms(){return this.modifiedUniforms={},this.needsRedraw=!1,this.uniforms||{}}_setUniform(t,r){Eke(this.uniforms[t],r)||(this.uniforms[t]=Tke(r),this.modifiedUniforms[t]=!0,this.modified=!0)}}class Pke{constructor(t){Ce(this,"uniformBlocks",new Map);Ce(this,"uniformBufferLayouts",new Map);Ce(this,"uniformBuffers",new Map);for(const[r,n]of Object.entries(t)){const i=r,o=new Ake(n.uniformTypes||{});this.uniformBufferLayouts.set(i,o);const l=new Cke({name:r});l.setUniforms(n.defaultUniforms||{}),this.uniformBlocks.set(i,l)}}destroy(){for(const t of this.uniformBuffers.values())t.destroy()}setUniforms(t){for(const[r,n]of Object.entries(t))this.uniformBlocks.get(r).setUniforms(n);this.updateUniformBuffers()}getUniformBufferByteLength(t){return this.uniformBufferLayouts.get(t).byteLength}getUniformBufferData(t){const r=this.uniformBlocks.get(t).getAllUniforms();return this.uniformBufferLayouts.get(t).getData(r)}createUniformBuffer(t,r,n){n&&this.setUniforms(n);const i=this.getUniformBufferByteLength(r),o=t.createBuffer({usage:Vo.UNIFORM|Vo.COPY_DST,byteLength:i}),l=this.getUniformBufferData(r);return o.write(l),o}getManagedUniformBuffer(t,r){if(!this.uniformBuffers.get(r)){const n=this.getUniformBufferByteLength(r),i=t.createBuffer({usage:Vo.UNIFORM|Vo.COPY_DST,byteLength:n});this.uniformBuffers.set(r,i)}return this.uniformBuffers.get(r)}updateUniformBuffers(){let t=!1;for(const r of this.uniformBlocks.keys()){const n=this.updateUniformBuffer(r);t||(t=n)}return t&&pr.log(3,`UniformStore.updateUniformBuffers(): ${t}`)(),t}updateUniformBuffer(t){const r=this.uniformBlocks.get(t),n=this.uniformBuffers.get(t);let i=!1;if(n&&r.needsRedraw){i||(i=r.needsRedraw);const o=this.getUniformBufferData(t);this.uniformBuffers.get(t).write(o);const s=this.uniformBlocks.get(t).getAllUniforms();pr.log(4,`Writing to uniform buffer ${String(t)}`,o,s)()}return i}}function Nq(e){const t=ArrayBuffer.isView(e)?e.constructor:e;switch(t){case Float32Array:return"float32";case Uint16Array:return"uint16";case Uint32Array:return"uint32";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int8Array:return"sint8";case Int16Array:return"sint16";case Int32Array:return"sint32";default:throw new Error(t.constructor.name)}}function Dq(e){switch(e){case"float32":return Float32Array;case"uint32":return Uint32Array;case"sint32":return Int32Array;case"uint16":case"unorm16":return Uint16Array;case"sint16":case"snorm16":return Int16Array;case"uint8":case"unorm8":return Uint8Array;case"sint8":case"snorm8":return Int8Array;default:throw new Error(e)}}function Ike(e,t,r){if(!t||t>4)throw new Error(`size ${t}`);const n=t;let i=Nq(e);if(i==="uint8"&&r&&n===1)return"unorm8-webgl";if(i==="uint8"&&r&&n===3)return"unorm8x3-webgl";if(i==="uint8"||i==="sint8"){if(n===1||n===3)throw new Error(`size: ${t}`);return r&&(i=i.replace("int","norm")),`${i}x${n}`}if(i==="uint16"||i==="sint16"){if(n===1||n===3)throw new Error(`size: ${t}`);return r&&(i=i.replace("int","norm")),`${i}x${n}`}return n===1?i:`${i}x${n}`}function Rke(e){return T2(e)!==null||typeof e=="number"||typeof e=="boolean"}function g6(e){const t={bindings:{},uniforms:{}};return Object.keys(e).forEach(r=>{const n=e[r];Rke(n)?t.uniforms[r]=n:t.bindings[r]=n}),t}function kke(e,t,r){const{removedProps:n={},deprecatedProps:i={},replacedProps:o={}}=r;for(const s in n)if(s in t){const p=n[s]?`${e}.${n[s]}`:"N/A";pr.removed(`${e}.${s}`,p)()}for(const s in i)if(s in t){const f=i[s];pr.deprecated(`${e}.${s}`,`${e}.${f}`)()}let l=null;for(const[s,f]of Object.entries(o))s in t&&(pr.deprecated(`${e}.${s}`,`${e}.${f}`)(),l=l||Object.assign({},t),l[f]=t[s],delete l[s]);return l||t}let Mke="";async function Oke(e,t){return await new Promise((r,n)=>{try{const i=new Image;i.onload=()=>r(i),i.onerror=()=>n(new Error(`Could not load image ${e}.`)),i.crossOrigin=(t==null?void 0:t.crossOrigin)||"anonymous",i.src=e.startsWith("http")?e:Mke+e}catch(i){n(i)}})}async function Lq(e,t){const r=document.getElementsByTagName("head")[0];if(!r)throw new Error("loadScript");const n=document.createElement("script");return n.setAttribute("type","text/javascript"),n.setAttribute("src",e),new Promise((i,o)=>{n.onload=i,n.onerror=l=>o(new Error(`Unable to load script '${e}': ${l}`)),r.appendChild(n)})}function pP(e,t,r){if(e===t)return!0;if(!r||!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!pP(e[n],t[n],r-1))return!1;return!0}if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(const o of n)if(!t.hasOwnProperty(o)||!pP(e[o],t[o],r-1))return!1;return!0}return!1}function Nke(e){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function Dke(e){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}class Lke{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}class Ad{constructor(){}get isAstNode(){return!0}get astNodeType(){return""}evaluate(t){throw new Error("Cannot evaluate node")}evaluateString(t){return this.evaluate(t).toString()}search(t){}searchBlock(t,r){if(t){r(J5.instance);for(const n of t)n instanceof Array?this.searchBlock(n,r):n.search(r);r(Q5.instance)}}}class J5 extends Ad{}J5.instance=new J5;class Q5 extends Ad{}Q5.instance=new Q5;class Do extends Ad{constructor(){super()}}let gP=class extends Do{constructor(t,r,n,i,o,l){super(),this.calls=new Set,this.name=t,this.args=r,this.returnType=n,this.body=i,this.startLine=o,this.endLine=l}get astNodeType(){return"function"}search(t){this.searchBlock(this.body,t)}};class Fke extends Do{constructor(t){super(),this.expression=t}get astNodeType(){return"staticAssert"}search(t){this.expression.search(t)}}class Bke extends Do{constructor(t,r){super(),this.condition=t,this.body=r}get astNodeType(){return"while"}search(t){this.condition.search(t),this.searchBlock(this.body,t)}}class zke extends Do{constructor(t){super(),this.body=t}get astNodeType(){return"continuing"}search(t){this.searchBlock(this.body,t)}}class $ke extends Do{constructor(t,r,n,i){super(),this.init=t,this.condition=r,this.increment=n,this.body=i}get astNodeType(){return"for"}search(t){var r,n,i;(r=this.init)===null||r===void 0||r.search(t),(n=this.condition)===null||n===void 0||n.search(t),(i=this.increment)===null||i===void 0||i.search(t),this.searchBlock(this.body,t)}}class yg extends Do{constructor(t,r,n,i,o){super(),this.name=t,this.type=r,this.storage=n,this.access=i,this.value=o}get astNodeType(){return"var"}search(t){var r;t(this),(r=this.value)===null||r===void 0||r.search(t)}}class Fq extends Do{constructor(t,r,n){super(),this.name=t,this.type=r,this.value=n}get astNodeType(){return"override"}search(t){var r;(r=this.value)===null||r===void 0||r.search(t)}}class mP extends Do{constructor(t,r,n,i,o){super(),this.name=t,this.type=r,this.storage=n,this.access=i,this.value=o}get astNodeType(){return"let"}search(t){var r;t(this),(r=this.value)===null||r===void 0||r.search(t)}}class oB extends Do{constructor(t,r,n,i,o){super(),this.name=t,this.type=r,this.storage=n,this.access=i,this.value=o}get astNodeType(){return"const"}evaluate(t){return this.value.evaluate(t)}search(t){var r;t(this),(r=this.value)===null||r===void 0||r.search(t)}}var w_;(function(e){e.increment="++",e.decrement="--"})(w_||(w_={}));(function(e){function t(r){const n=r;if(n=="parse")throw new Error("Invalid value for IncrementOperator");return e[n]}e.parse=t})(w_||(w_={}));class Uke extends Do{constructor(t,r){super(),this.operator=t,this.variable=r}get astNodeType(){return"increment"}search(t){this.variable.search(t)}}var C2;(function(e){e.assign="=",e.addAssign="+=",e.subtractAssin="-=",e.multiplyAssign="*=",e.divideAssign="/=",e.moduloAssign="%=",e.andAssign="&=",e.orAssign="|=",e.xorAssign="^=",e.shiftLeftAssign="<<=",e.shiftRightAssign=">>="})(C2||(C2={}));(function(e){function t(r){const n=r;if(n=="parse")throw new Error("Invalid value for AssignOperator");return n}e.parse=t})(C2||(C2={}));class jke extends Do{constructor(t,r,n){super(),this.operator=t,this.variable=r,this.value=n}get astNodeType(){return"assign"}search(t){this.variable.search(t),this.value.search(t)}}class Bq extends Do{constructor(t,r){super(),this.name=t,this.args=r}get astNodeType(){return"call"}search(t){for(const r of this.args)r.search(t);t(this)}}class Vke extends Do{constructor(t,r){super(),this.body=t,this.continuing=r}get astNodeType(){return"loop"}}let Hke=class extends Do{constructor(t,r){super(),this.condition=t,this.body=r}get astNodeType(){return"body"}};class qke extends Do{constructor(t,r,n,i){super(),this.condition=t,this.body=r,this.elseif=n,this.else=i}get astNodeType(){return"if"}search(t){this.condition.search(t),this.searchBlock(this.body,t),this.searchBlock(this.elseif,t),this.searchBlock(this.else,t)}}class Wke extends Do{constructor(t){super(),this.value=t}get astNodeType(){return"return"}search(t){var r;(r=this.value)===null||r===void 0||r.search(t)}}class Xke extends Do{constructor(t){super(),this.name=t}get astNodeType(){return"enable"}}class Kke extends Do{constructor(t){super(),this.extensions=t}get astNodeType(){return"requires"}}class Gke extends Do{constructor(t,r){super(),this.severity=t,this.rule=r}get astNodeType(){return"diagnostic"}}class zq extends Do{constructor(t,r){super(),this.name=t,this.type=r}get astNodeType(){return"alias"}}class Yke extends Do{constructor(){super()}get astNodeType(){return"discard"}}class Zke extends Do{constructor(){super()}get astNodeType(){return"break"}}class Jke extends Do{constructor(){super()}get astNodeType(){return"continue"}}class Cm extends Do{constructor(t){super(),this.name=t}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}}class pg extends Cm{constructor(t,r,n,i){super(t),this.members=r,this.startLine=n,this.endLine=i}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(t){for(let r=0;r<this.members.length;r++)if(this.members[r].name==t)return r;return-1}}class $q extends Cm{constructor(t,r,n){super(t),this.format=r,this.access=n}get astNodeType(){return"template"}}class Qke extends Cm{constructor(t,r,n,i){super(t),this.storage=r,this.type=n,this.access=i}get astNodeType(){return"pointer"}}class Uq extends Cm{constructor(t,r,n,i){super(t),this.attributes=r,this.format=n,this.count=i}get astNodeType(){return"array"}get isArray(){return!0}}class hv extends Cm{constructor(t,r,n){super(t),this.format=r,this.access=n}get astNodeType(){return"sampler"}}class bh extends Ad{constructor(){super()}}class sB extends bh{constructor(t){super(),this.value=t}get astNodeType(){return"stringExpr"}toString(){return this.value}evaluateString(){return this.value}}class py extends bh{constructor(t,r){super(),this.type=t,this.args=r}get astNodeType(){return"createExpr"}search(t){t(this);for(const r of this.args)r.search(t)}}class jq extends bh{constructor(t,r){super(),this.name=t,this.args=r}get astNodeType(){return"callExpr"}evaluate(t){switch(this.name){case"abs":return Math.abs(this.args[0].evaluate(t));case"acos":return Math.acos(this.args[0].evaluate(t));case"acosh":return Math.acosh(this.args[0].evaluate(t));case"asin":return Math.asin(this.args[0].evaluate(t));case"asinh":return Math.asinh(this.args[0].evaluate(t));case"atan":return Math.atan(this.args[0].evaluate(t));case"atan2":return Math.atan2(this.args[0].evaluate(t),this.args[1].evaluate(t));case"atanh":return Math.atanh(this.args[0].evaluate(t));case"ceil":return Math.ceil(this.args[0].evaluate(t));case"clamp":return Math.min(Math.max(this.args[0].evaluate(t),this.args[1].evaluate(t)),this.args[2].evaluate(t));case"cos":return Math.cos(this.args[0].evaluate(t));case"degrees":return this.args[0].evaluate(t)*180/Math.PI;case"distance":return Math.sqrt(Math.pow(this.args[0].evaluate(t)-this.args[1].evaluate(t),2));case"dot":case"exp":return Math.exp(this.args[0].evaluate(t));case"exp2":return Math.pow(2,this.args[0].evaluate(t));case"floor":return Math.floor(this.args[0].evaluate(t));case"fma":return this.args[0].evaluate(t)*this.args[1].evaluate(t)+this.args[2].evaluate(t);case"fract":return this.args[0].evaluate(t)-Math.floor(this.args[0].evaluate(t));case"inverseSqrt":return 1/Math.sqrt(this.args[0].evaluate(t));case"log":return Math.log(this.args[0].evaluate(t));case"log2":return Math.log2(this.args[0].evaluate(t));case"max":return Math.max(this.args[0].evaluate(t),this.args[1].evaluate(t));case"min":return Math.min(this.args[0].evaluate(t),this.args[1].evaluate(t));case"mix":return this.args[0].evaluate(t)*(1-this.args[2].evaluate(t))+this.args[1].evaluate(t)*this.args[2].evaluate(t);case"modf":return this.args[0].evaluate(t)-Math.floor(this.args[0].evaluate(t));case"pow":return Math.pow(this.args[0].evaluate(t),this.args[1].evaluate(t));case"radians":return this.args[0].evaluate(t)*Math.PI/180;case"round":return Math.round(this.args[0].evaluate(t));case"sign":return Math.sign(this.args[0].evaluate(t));case"sin":return Math.sin(this.args[0].evaluate(t));case"sinh":return Math.sinh(this.args[0].evaluate(t));case"saturate":return Math.min(Math.max(this.args[0].evaluate(t),0),1);case"smoothstep":return this.args[0].evaluate(t)*this.args[0].evaluate(t)*(3-2*this.args[0].evaluate(t));case"sqrt":return Math.sqrt(this.args[0].evaluate(t));case"step":return this.args[0].evaluate(t)<this.args[1].evaluate(t)?0:1;case"tan":return Math.tan(this.args[0].evaluate(t));case"tanh":return Math.tanh(this.args[0].evaluate(t));case"trunc":return Math.trunc(this.args[0].evaluate(t));default:throw new Error("Non const function: "+this.name)}}search(t){for(const r of this.args)r.search(t);t(this)}}class yP extends bh{constructor(t){super(),this.name=t}get astNodeType(){return"varExpr"}search(t){t(this),this.postfix&&this.postfix.search(t)}evaluate(t){const r=t.constants.get(this.name);if(!r)throw new Error("Cannot evaluate node");return r.evaluate(t)}}class aB extends bh{constructor(t,r){super(),this.name=t,this.initializer=r}get astNodeType(){return"constExpr"}evaluate(t){var r,n;if(this.initializer instanceof py){const i=(r=this.postfix)===null||r===void 0?void 0:r.evaluateString(t),o=(n=this.initializer.type)===null||n===void 0?void 0:n.name,l=t.structs.get(o),s=l==null?void 0:l.getMemberIndex(i);if(s!=-1)return this.initializer.args[s].evaluate(t);console.log(s)}return this.initializer.evaluate(t)}search(t){this.initializer.search(t)}}class lB extends bh{constructor(t){super(),this.value=t}get astNodeType(){return"literalExpr"}evaluate(){return this.value}}class e6e extends bh{constructor(t,r){super(),this.type=t,this.value=r}get astNodeType(){return"bitcastExpr"}search(t){this.value.search(t)}}class t6e extends bh{constructor(t,r){super(),this.type=t,this.args=r}get astNodeType(){return"typecastExpr"}evaluate(t){return this.args[0].evaluate(t)}search(t){this.searchBlock(this.args,t)}}class cB extends bh{constructor(t){super(),this.contents=t}get astNodeType(){return"groupExpr"}evaluate(t){return this.contents[0].evaluate(t)}search(t){this.searchBlock(this.contents,t)}}class r6e extends bh{constructor(t){super(),this.index=t}search(t){this.index.search(t)}}class Vq extends bh{constructor(){super()}}class n6e extends Vq{constructor(t,r){super(),this.operator=t,this.right=r}get astNodeType(){return"unaryOp"}evaluate(t){switch(this.operator){case"+":return this.right.evaluate(t);case"-":return-this.right.evaluate(t);case"!":return this.right.evaluate(t)?0:1;case"~":return~this.right.evaluate(t);default:throw new Error("Unknown unary operator: "+this.operator)}}search(t){this.right.search(t)}}class jh extends Vq{constructor(t,r,n){super(),this.operator=t,this.left=r,this.right=n}get astNodeType(){return"binaryOp"}evaluate(t){switch(this.operator){case"+":return this.left.evaluate(t)+this.right.evaluate(t);case"-":return this.left.evaluate(t)-this.right.evaluate(t);case"*":return this.left.evaluate(t)*this.right.evaluate(t);case"/":return this.left.evaluate(t)/this.right.evaluate(t);case"%":return this.left.evaluate(t)%this.right.evaluate(t);case"==":return this.left.evaluate(t)==this.right.evaluate(t)?1:0;case"!=":return this.left.evaluate(t)!=this.right.evaluate(t)?1:0;case"<":return this.left.evaluate(t)<this.right.evaluate(t)?1:0;case">":return this.left.evaluate(t)>this.right.evaluate(t)?1:0;case"<=":return this.left.evaluate(t)<=this.right.evaluate(t)?1:0;case">=":return this.left.evaluate(t)>=this.right.evaluate(t)?1:0;case"&&":return this.left.evaluate(t)&&this.right.evaluate(t)?1:0;case"||":return this.left.evaluate(t)||this.right.evaluate(t)?1:0;default:throw new Error(`Unknown operator ${this.operator}`)}}search(t){this.left.search(t),this.right.search(t)}}class Hq extends Ad{constructor(){super()}}class i6e extends Hq{constructor(t,r){super(),this.selector=t,this.body=r}get astNodeType(){return"case"}search(t){this.searchBlock(this.body,t)}}class o6e extends Hq{constructor(t){super(),this.body=t}get astNodeType(){return"default"}search(t){this.searchBlock(this.body,t)}}class s6e extends Ad{constructor(t,r,n){super(),this.name=t,this.type=r,this.attributes=n}get astNodeType(){return"argument"}}class a6e extends Ad{constructor(t,r){super(),this.condition=t,this.body=r}get astNodeType(){return"elseif"}search(t){this.condition.search(t),this.searchBlock(this.body,t)}}class l6e extends Ad{constructor(t,r,n){super(),this.name=t,this.type=r,this.attributes=n}get astNodeType(){return"member"}}let c6e=class extends Ad{constructor(t,r){super(),this.name=t,this.value=r}get astNodeType(){return"attribute"}};var St,ht;(function(e){e[e.token=0]="token",e[e.keyword=1]="keyword",e[e.reserved=2]="reserved"})(ht||(ht={}));class pt{constructor(t,r,n){this.name=t,this.type=r,this.rule=n}toString(){return this.name}}class De{}St=De;De.none=new pt("",ht.reserved,"");De.eof=new pt("EOF",ht.token,"");De.reserved={asm:new pt("asm",ht.reserved,"asm"),bf16:new pt("bf16",ht.reserved,"bf16"),do:new pt("do",ht.reserved,"do"),enum:new pt("enum",ht.reserved,"enum"),f16:new pt("f16",ht.reserved,"f16"),f64:new pt("f64",ht.reserved,"f64"),handle:new pt("handle",ht.reserved,"handle"),i8:new pt("i8",ht.reserved,"i8"),i16:new pt("i16",ht.reserved,"i16"),i64:new pt("i64",ht.reserved,"i64"),mat:new pt("mat",ht.reserved,"mat"),premerge:new pt("premerge",ht.reserved,"premerge"),regardless:new pt("regardless",ht.reserved,"regardless"),typedef:new pt("typedef",ht.reserved,"typedef"),u8:new pt("u8",ht.reserved,"u8"),u16:new pt("u16",ht.reserved,"u16"),u64:new pt("u64",ht.reserved,"u64"),unless:new pt("unless",ht.reserved,"unless"),using:new pt("using",ht.reserved,"using"),vec:new pt("vec",ht.reserved,"vec"),void:new pt("void",ht.reserved,"void")};De.keywords={array:new pt("array",ht.keyword,"array"),atomic:new pt("atomic",ht.keyword,"atomic"),bool:new pt("bool",ht.keyword,"bool"),f32:new pt("f32",ht.keyword,"f32"),i32:new pt("i32",ht.keyword,"i32"),mat2x2:new pt("mat2x2",ht.keyword,"mat2x2"),mat2x3:new pt("mat2x3",ht.keyword,"mat2x3"),mat2x4:new pt("mat2x4",ht.keyword,"mat2x4"),mat3x2:new pt("mat3x2",ht.keyword,"mat3x2"),mat3x3:new pt("mat3x3",ht.keyword,"mat3x3"),mat3x4:new pt("mat3x4",ht.keyword,"mat3x4"),mat4x2:new pt("mat4x2",ht.keyword,"mat4x2"),mat4x3:new pt("mat4x3",ht.keyword,"mat4x3"),mat4x4:new pt("mat4x4",ht.keyword,"mat4x4"),ptr:new pt("ptr",ht.keyword,"ptr"),sampler:new pt("sampler",ht.keyword,"sampler"),sampler_comparison:new pt("sampler_comparison",ht.keyword,"sampler_comparison"),struct:new pt("struct",ht.keyword,"struct"),texture_1d:new pt("texture_1d",ht.keyword,"texture_1d"),texture_2d:new pt("texture_2d",ht.keyword,"texture_2d"),texture_2d_array:new pt("texture_2d_array",ht.keyword,"texture_2d_array"),texture_3d:new pt("texture_3d",ht.keyword,"texture_3d"),texture_cube:new pt("texture_cube",ht.keyword,"texture_cube"),texture_cube_array:new pt("texture_cube_array",ht.keyword,"texture_cube_array"),texture_multisampled_2d:new pt("texture_multisampled_2d",ht.keyword,"texture_multisampled_2d"),texture_storage_1d:new pt("texture_storage_1d",ht.keyword,"texture_storage_1d"),texture_storage_2d:new pt("texture_storage_2d",ht.keyword,"texture_storage_2d"),texture_storage_2d_array:new pt("texture_storage_2d_array",ht.keyword,"texture_storage_2d_array"),texture_storage_3d:new pt("texture_storage_3d",ht.keyword,"texture_storage_3d"),texture_depth_2d:new pt("texture_depth_2d",ht.keyword,"texture_depth_2d"),texture_depth_2d_array:new pt("texture_depth_2d_array",ht.keyword,"texture_depth_2d_array"),texture_depth_cube:new pt("texture_depth_cube",ht.keyword,"texture_depth_cube"),texture_depth_cube_array:new pt("texture_depth_cube_array",ht.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new pt("texture_depth_multisampled_2d",ht.keyword,"texture_depth_multisampled_2d"),texture_external:new pt("texture_external",ht.keyword,"texture_external"),u32:new pt("u32",ht.keyword,"u32"),vec2:new pt("vec2",ht.keyword,"vec2"),vec3:new pt("vec3",ht.keyword,"vec3"),vec4:new pt("vec4",ht.keyword,"vec4"),bitcast:new pt("bitcast",ht.keyword,"bitcast"),block:new pt("block",ht.keyword,"block"),break:new pt("break",ht.keyword,"break"),case:new pt("case",ht.keyword,"case"),continue:new pt("continue",ht.keyword,"continue"),continuing:new pt("continuing",ht.keyword,"continuing"),default:new pt("default",ht.keyword,"default"),diagnostic:new pt("diagnostic",ht.keyword,"diagnostic"),discard:new pt("discard",ht.keyword,"discard"),else:new pt("else",ht.keyword,"else"),enable:new pt("enable",ht.keyword,"enable"),fallthrough:new pt("fallthrough",ht.keyword,"fallthrough"),false:new pt("false",ht.keyword,"false"),fn:new pt("fn",ht.keyword,"fn"),for:new pt("for",ht.keyword,"for"),function:new pt("function",ht.keyword,"function"),if:new pt("if",ht.keyword,"if"),let:new pt("let",ht.keyword,"let"),const:new pt("const",ht.keyword,"const"),loop:new pt("loop",ht.keyword,"loop"),while:new pt("while",ht.keyword,"while"),private:new pt("private",ht.keyword,"private"),read:new pt("read",ht.keyword,"read"),read_write:new pt("read_write",ht.keyword,"read_write"),return:new pt("return",ht.keyword,"return"),requires:new pt("requires",ht.keyword,"requires"),storage:new pt("storage",ht.keyword,"storage"),switch:new pt("switch",ht.keyword,"switch"),true:new pt("true",ht.keyword,"true"),alias:new pt("alias",ht.keyword,"alias"),type:new pt("type",ht.keyword,"type"),uniform:new pt("uniform",ht.keyword,"uniform"),var:new pt("var",ht.keyword,"var"),override:new pt("override",ht.keyword,"override"),workgroup:new pt("workgroup",ht.keyword,"workgroup"),write:new pt("write",ht.keyword,"write"),r8unorm:new pt("r8unorm",ht.keyword,"r8unorm"),r8snorm:new pt("r8snorm",ht.keyword,"r8snorm"),r8uint:new pt("r8uint",ht.keyword,"r8uint"),r8sint:new pt("r8sint",ht.keyword,"r8sint"),r16uint:new pt("r16uint",ht.keyword,"r16uint"),r16sint:new pt("r16sint",ht.keyword,"r16sint"),r16float:new pt("r16float",ht.keyword,"r16float"),rg8unorm:new pt("rg8unorm",ht.keyword,"rg8unorm"),rg8snorm:new pt("rg8snorm",ht.keyword,"rg8snorm"),rg8uint:new pt("rg8uint",ht.keyword,"rg8uint"),rg8sint:new pt("rg8sint",ht.keyword,"rg8sint"),r32uint:new pt("r32uint",ht.keyword,"r32uint"),r32sint:new pt("r32sint",ht.keyword,"r32sint"),r32float:new pt("r32float",ht.keyword,"r32float"),rg16uint:new pt("rg16uint",ht.keyword,"rg16uint"),rg16sint:new pt("rg16sint",ht.keyword,"rg16sint"),rg16float:new pt("rg16float",ht.keyword,"rg16float"),rgba8unorm:new pt("rgba8unorm",ht.keyword,"rgba8unorm"),rgba8unorm_srgb:new pt("rgba8unorm_srgb",ht.keyword,"rgba8unorm_srgb"),rgba8snorm:new pt("rgba8snorm",ht.keyword,"rgba8snorm"),rgba8uint:new pt("rgba8uint",ht.keyword,"rgba8uint"),rgba8sint:new pt("rgba8sint",ht.keyword,"rgba8sint"),bgra8unorm:new pt("bgra8unorm",ht.keyword,"bgra8unorm"),bgra8unorm_srgb:new pt("bgra8unorm_srgb",ht.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new pt("rgb10a2unorm",ht.keyword,"rgb10a2unorm"),rg11b10float:new pt("rg11b10float",ht.keyword,"rg11b10float"),rg32uint:new pt("rg32uint",ht.keyword,"rg32uint"),rg32sint:new pt("rg32sint",ht.keyword,"rg32sint"),rg32float:new pt("rg32float",ht.keyword,"rg32float"),rgba16uint:new pt("rgba16uint",ht.keyword,"rgba16uint"),rgba16sint:new pt("rgba16sint",ht.keyword,"rgba16sint"),rgba16float:new pt("rgba16float",ht.keyword,"rgba16float"),rgba32uint:new pt("rgba32uint",ht.keyword,"rgba32uint"),rgba32sint:new pt("rgba32sint",ht.keyword,"rgba32sint"),rgba32float:new pt("rgba32float",ht.keyword,"rgba32float"),static_assert:new pt("static_assert",ht.keyword,"static_assert")};De.tokens={decimal_float_literal:new pt("decimal_float_literal",ht.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?f?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+f?)|([0-9]+f)/),hex_float_literal:new pt("hex_float_literal",ht.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+f?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+f?))/),int_literal:new pt("int_literal",ht.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new pt("uint_literal",ht.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),ident:new pt("ident",ht.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new pt("and",ht.token,"&"),and_and:new pt("and_and",ht.token,"&&"),arrow:new pt("arrow ",ht.token,"->"),attr:new pt("attr",ht.token,"@"),forward_slash:new pt("forward_slash",ht.token,"/"),bang:new pt("bang",ht.token,"!"),bracket_left:new pt("bracket_left",ht.token,"["),bracket_right:new pt("bracket_right",ht.token,"]"),brace_left:new pt("brace_left",ht.token,"{"),brace_right:new pt("brace_right",ht.token,"}"),colon:new pt("colon",ht.token,":"),comma:new pt("comma",ht.token,","),equal:new pt("equal",ht.token,"="),equal_equal:new pt("equal_equal",ht.token,"=="),not_equal:new pt("not_equal",ht.token,"!="),greater_than:new pt("greater_than",ht.token,">"),greater_than_equal:new pt("greater_than_equal",ht.token,">="),shift_right:new pt("shift_right",ht.token,">>"),less_than:new pt("less_than",ht.token,"<"),less_than_equal:new pt("less_than_equal",ht.token,"<="),shift_left:new pt("shift_left",ht.token,"<<"),modulo:new pt("modulo",ht.token,"%"),minus:new pt("minus",ht.token,"-"),minus_minus:new pt("minus_minus",ht.token,"--"),period:new pt("period",ht.token,"."),plus:new pt("plus",ht.token,"+"),plus_plus:new pt("plus_plus",ht.token,"++"),or:new pt("or",ht.token,"|"),or_or:new pt("or_or",ht.token,"||"),paren_left:new pt("paren_left",ht.token,"("),paren_right:new pt("paren_right",ht.token,")"),semicolon:new pt("semicolon",ht.token,";"),star:new pt("star",ht.token,"*"),tilde:new pt("tilde",ht.token,"~"),underscore:new pt("underscore",ht.token,"_"),xor:new pt("xor",ht.token,"^"),plus_equal:new pt("plus_equal",ht.token,"+="),minus_equal:new pt("minus_equal",ht.token,"-="),times_equal:new pt("times_equal",ht.token,"*="),division_equal:new pt("division_equal",ht.token,"/="),modulo_equal:new pt("modulo_equal",ht.token,"%="),and_equal:new pt("and_equal",ht.token,"&="),or_equal:new pt("or_equal",ht.token,"|="),xor_equal:new pt("xor_equal",ht.token,"^="),shift_right_equal:new pt("shift_right_equal",ht.token,">>="),shift_left_equal:new pt("shift_left_equal",ht.token,"<<=")};De.simpleTokens={"@":St.tokens.attr,"{":St.tokens.brace_left,"}":St.tokens.brace_right,":":St.tokens.colon,",":St.tokens.comma,"(":St.tokens.paren_left,")":St.tokens.paren_right,";":St.tokens.semicolon};De.literalTokens={"&":St.tokens.and,"&&":St.tokens.and_and,"->":St.tokens.arrow,"/":St.tokens.forward_slash,"!":St.tokens.bang,"[":St.tokens.bracket_left,"]":St.tokens.bracket_right,"=":St.tokens.equal,"==":St.tokens.equal_equal,"!=":St.tokens.not_equal,">":St.tokens.greater_than,">=":St.tokens.greater_than_equal,">>":St.tokens.shift_right,"<":St.tokens.less_than,"<=":St.tokens.less_than_equal,"<<":St.tokens.shift_left,"%":St.tokens.modulo,"-":St.tokens.minus,"--":St.tokens.minus_minus,".":St.tokens.period,"+":St.tokens.plus,"++":St.tokens.plus_plus,"|":St.tokens.or,"||":St.tokens.or_or,"*":St.tokens.star,"~":St.tokens.tilde,_:St.tokens.underscore,"^":St.tokens.xor,"+=":St.tokens.plus_equal,"-=":St.tokens.minus_equal,"*=":St.tokens.times_equal,"/=":St.tokens.division_equal,"%=":St.tokens.modulo_equal,"&=":St.tokens.and_equal,"|=":St.tokens.or_equal,"^=":St.tokens.xor_equal,">>=":St.tokens.shift_right_equal,"<<=":St.tokens.shift_left_equal};De.regexTokens={decimal_float_literal:St.tokens.decimal_float_literal,hex_float_literal:St.tokens.hex_float_literal,int_literal:St.tokens.int_literal,uint_literal:St.tokens.uint_literal,ident:St.tokens.ident};De.storage_class=[St.keywords.function,St.keywords.private,St.keywords.workgroup,St.keywords.uniform,St.keywords.storage];De.access_mode=[St.keywords.read,St.keywords.write,St.keywords.read_write];De.sampler_type=[St.keywords.sampler,St.keywords.sampler_comparison];De.sampled_texture_type=[St.keywords.texture_1d,St.keywords.texture_2d,St.keywords.texture_2d_array,St.keywords.texture_3d,St.keywords.texture_cube,St.keywords.texture_cube_array];De.multisampled_texture_type=[St.keywords.texture_multisampled_2d];De.storage_texture_type=[St.keywords.texture_storage_1d,St.keywords.texture_storage_2d,St.keywords.texture_storage_2d_array,St.keywords.texture_storage_3d];De.depth_texture_type=[St.keywords.texture_depth_2d,St.keywords.texture_depth_2d_array,St.keywords.texture_depth_cube,St.keywords.texture_depth_cube_array,St.keywords.texture_depth_multisampled_2d];De.texture_external_type=[St.keywords.texture_external];De.any_texture_type=[...St.sampled_texture_type,...St.multisampled_texture_type,...St.storage_texture_type,...St.depth_texture_type,...St.texture_external_type];De.texel_format=[St.keywords.r8unorm,St.keywords.r8snorm,St.keywords.r8uint,St.keywords.r8sint,St.keywords.r16uint,St.keywords.r16sint,St.keywords.r16float,St.keywords.rg8unorm,St.keywords.rg8snorm,St.keywords.rg8uint,St.keywords.rg8sint,St.keywords.r32uint,St.keywords.r32sint,St.keywords.r32float,St.keywords.rg16uint,St.keywords.rg16sint,St.keywords.rg16float,St.keywords.rgba8unorm,St.keywords.rgba8unorm_srgb,St.keywords.rgba8snorm,St.keywords.rgba8uint,St.keywords.rgba8sint,St.keywords.bgra8unorm,St.keywords.bgra8unorm_srgb,St.keywords.rgb10a2unorm,St.keywords.rg11b10float,St.keywords.rg32uint,St.keywords.rg32sint,St.keywords.rg32float,St.keywords.rgba16uint,St.keywords.rgba16sint,St.keywords.rgba16float,St.keywords.rgba32uint,St.keywords.rgba32sint,St.keywords.rgba32float];De.const_literal=[St.tokens.int_literal,St.tokens.uint_literal,St.tokens.decimal_float_literal,St.tokens.hex_float_literal,St.keywords.true,St.keywords.false];De.literal_or_ident=[St.tokens.ident,St.tokens.int_literal,St.tokens.uint_literal,St.tokens.decimal_float_literal,St.tokens.hex_float_literal];De.element_count_expression=[St.tokens.int_literal,St.tokens.uint_literal,St.tokens.ident];De.template_types=[St.keywords.vec2,St.keywords.vec3,St.keywords.vec4,St.keywords.mat2x2,St.keywords.mat2x3,St.keywords.mat2x4,St.keywords.mat3x2,St.keywords.mat3x3,St.keywords.mat3x4,St.keywords.mat4x2,St.keywords.mat4x3,St.keywords.mat4x4,St.keywords.atomic,St.keywords.bitcast,...St.any_texture_type];De.attribute_name=[St.tokens.ident,St.keywords.block,St.keywords.diagnostic];De.assignment_operators=[St.tokens.equal,St.tokens.plus_equal,St.tokens.minus_equal,St.tokens.times_equal,St.tokens.division_equal,St.tokens.modulo_equal,St.tokens.and_equal,St.tokens.or_equal,St.tokens.xor_equal,St.tokens.shift_right_equal,St.tokens.shift_left_equal];De.increment_operators=[St.tokens.plus_plus,St.tokens.minus_minus];class uB{constructor(t,r,n){this.type=t,this.lexeme=r,this.line=n}toString(){return this.lexeme}isTemplateType(){return De.template_types.indexOf(this.type)!=-1}isArrayType(){return this.type==De.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class u6e{constructor(t){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=t??""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new uB(De.eof,"",this._line)),this._tokens}scanToken(){let t=this._advance();if(t==`
`)return this._line++,!0;if(this._isWhitespace(t))return!0;if(t=="/"){if(this._peekAhead()=="/"){for(;t!=`
`;){if(this._isAtEnd())return!0;t=this._advance()}return this._line++,!0}else if(this._peekAhead()=="*"){this._advance();let l=1;for(;l>0;){if(this._isAtEnd())return!0;if(t=this._advance(),t==`
`)this._line++;else if(t=="*"){if(this._peekAhead()=="/"&&(this._advance(),l--,l==0))return!0}else t=="/"&&this._peekAhead()=="*"&&(this._advance(),l++)}return!0}}const r=De.simpleTokens[t];if(r)return this._addToken(r),!0;let n=De.none;const i=this._isAlpha(t),o=t==="_";if(this._isAlphaNumeric(t)){let l=this._peekAhead();for(;this._isAlphaNumeric(l);)t+=this._advance(),l=this._peekAhead()}if(i){const l=De.keywords[t];if(l)return this._addToken(l),!0}if(i||o)return this._addToken(De.tokens.ident),!0;for(;;){let l=this._findType(t);const s=this._peekAhead();if(t=="-"&&this._tokens.length>0){if(s=="=")return this._current++,t+=s,this._addToken(De.tokens.minus_equal),!0;if(s=="-")return this._current++,t+=s,this._addToken(De.tokens.minus_minus),!0;const f=this._tokens.length-1;if((De.literal_or_ident.indexOf(this._tokens[f].type)!=-1||this._tokens[f].type==De.tokens.paren_right)&&s!=">")return this._addToken(l),!0}if(t==">"&&(s==">"||s=="=")){let f=!1,p=this._tokens.length-1;for(let v=0;v<5&&p>=0&&De.assignment_operators.indexOf(this._tokens[p].type)===-1;++v,--p)if(this._tokens[p].type===De.tokens.less_than){p>0&&this._tokens[p-1].isArrayOrTemplateType()&&(f=!0);break}if(f)return this._addToken(l),!0}if(l===De.none){let f=t,p=0;const v=2;for(let x=0;x<v;++x)if(f+=this._peekAhead(x),l=this._findType(f),l!==De.none){p=x;break}if(l===De.none)return n===De.none?!1:(this._current--,this._addToken(n),!0);t=f,this._current+=p+1}if(n=l,this._isAtEnd())break;t+=this._advance()}return n===De.none?!1:(this._addToken(n),!0)}_findType(t){for(const n in De.regexTokens){const i=De.regexTokens[n];if(this._match(t,i.rule))return i}const r=De.literalTokens[t];return r||De.none}_match(t,r){const n=r.exec(t);return n&&n.index==0&&n[0]==t}_isAtEnd(){return this._current>=this._source.length}_isAlpha(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}_isAlphaNumeric(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t=="_"||t>="0"&&t<="9"}_isWhitespace(t){return t==" "||t=="	"||t=="\r"}_advance(t=0){let r=this._source[this._current];return t=t||0,t++,this._current+=t,r}_peekAhead(t=0){return t=t||0,this._current+t>=this._source.length?"\0":this._source[this._current+t]}_addToken(t){const r=this._source.substring(this._start,this._current);this._tokens.push(new uB(t,r,this._line))}}class h6e{constructor(){this._tokens=[],this._current=0,this._currentLine=0,this._context=new Lke,this._deferArrayCountEval=[]}parse(t){this._initialize(t),this._deferArrayCountEval.length=0;const r=[];for(;!this._isAtEnd();){const n=this._global_decl_or_directive();if(!n)break;r.push(n)}if(this._deferArrayCountEval.length>0){for(const n of this._deferArrayCountEval){const i=n.arrayType,o=n.countNode;if(o instanceof yP){const s=o.name,f=this._context.constants.get(s);if(f)try{const p=f.evaluate(this._context);i.count=p}catch{}}}this._deferArrayCountEval.length=0}return r}_initialize(t){if(t)if(typeof t=="string"){const r=new u6e(t);this._tokens=r.scanTokens()}else this._tokens=t;else this._tokens=[];this._current=0}_error(t,r){return{token:t,message:r,toString:function(){return`${r}`}}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==De.eof}_match(t){if(t instanceof pt)return this._check(t)?(this._advance(),!0):!1;for(let r=0,n=t.length;r<n;++r){const i=t[r];if(this._check(i))return this._advance(),!0}return!1}_consume(t,r){if(this._check(t))return this._advance();throw this._error(this._peek(),r)}_check(t){if(this._isAtEnd())return!1;const r=this._peek();if(t instanceof Array){const n=r.type;return t.indexOf(n)!=-1}return r.type==t}_advance(){var t,r;return this._currentLine=(r=(t=this._peek())===null||t===void 0?void 0:t.line)!==null&&r!==void 0?r:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(De.tokens.semicolon)&&!this._isAtEnd(););if(this._match(De.keywords.alias)){const r=this._type_alias();return this._consume(De.tokens.semicolon,"Expected ';'"),r}if(this._match(De.keywords.diagnostic)){const r=this._diagnostic();return this._consume(De.tokens.semicolon,"Expected ';'"),r}if(this._match(De.keywords.requires)){const r=this._requires_directive();return this._consume(De.tokens.semicolon,"Expected ';'"),r}if(this._match(De.keywords.enable)){const r=this._enable_directive();return this._consume(De.tokens.semicolon,"Expected ';'"),r}const t=this._attribute();if(this._check(De.keywords.var)){const r=this._global_variable_decl();return r!=null&&(r.attributes=t),this._consume(De.tokens.semicolon,"Expected ';'."),r}if(this._check(De.keywords.override)){const r=this._override_variable_decl();return r!=null&&(r.attributes=t),this._consume(De.tokens.semicolon,"Expected ';'."),r}if(this._check(De.keywords.let)){const r=this._global_let_decl();return r!=null&&(r.attributes=t),this._consume(De.tokens.semicolon,"Expected ';'."),r}if(this._check(De.keywords.const)){const r=this._global_const_decl();return r!=null&&(r.attributes=t),this._consume(De.tokens.semicolon,"Expected ';'."),r}if(this._check(De.keywords.struct)){const r=this._struct_decl();return r!=null&&(r.attributes=t),r}if(this._check(De.keywords.fn)){const r=this._function_decl();return r!=null&&(r.attributes=t),r}return null}_function_decl(){if(!this._match(De.keywords.fn))return null;const t=this._currentLine,r=this._consume(De.tokens.ident,"Expected function name.").toString();this._consume(De.tokens.paren_left,"Expected '(' for function arguments.");const n=[];if(!this._check(De.tokens.paren_right))do{if(this._check(De.tokens.paren_right))break;const s=this._attribute(),f=this._consume(De.tokens.ident,"Expected argument name.").toString();this._consume(De.tokens.colon,"Expected ':' for argument type.");const p=this._attribute(),v=this._type_decl();v!=null&&(v.attributes=p,n.push(new s6e(f,v,s)))}while(this._match(De.tokens.comma));this._consume(De.tokens.paren_right,"Expected ')' after function arguments.");let i=null;if(this._match(De.tokens.arrow)){const s=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=s)}const o=this._compound_statement(),l=this._currentLine;return new gP(r,n,i,o,t,l)}_compound_statement(){const t=[];for(this._consume(De.tokens.brace_left,"Expected '{' for block.");!this._check(De.tokens.brace_right);){const r=this._statement();r!==null&&t.push(r)}return this._consume(De.tokens.brace_right,"Expected '}' for block."),t}_statement(){for(;this._match(De.tokens.semicolon)&&!this._isAtEnd(););if(this._check(De.tokens.attr)&&this._attribute(),this._check(De.keywords.if))return this._if_statement();if(this._check(De.keywords.switch))return this._switch_statement();if(this._check(De.keywords.loop))return this._loop_statement();if(this._check(De.keywords.for))return this._for_statement();if(this._check(De.keywords.while))return this._while_statement();if(this._check(De.keywords.continuing))return this._continuing_statement();if(this._check(De.keywords.static_assert))return this._static_assert_statement();if(this._check(De.tokens.brace_left))return this._compound_statement();let t=null;return this._check(De.keywords.return)?t=this._return_statement():this._check([De.keywords.var,De.keywords.let,De.keywords.const])?t=this._variable_statement():this._match(De.keywords.discard)?t=new Yke:this._match(De.keywords.break)?t=new Zke:this._match(De.keywords.continue)?t=new Jke:t=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement(),t!=null&&this._consume(De.tokens.semicolon,"Expected ';' after statement."),t}_static_assert_statement(){if(!this._match(De.keywords.static_assert))return null;const t=this._optional_paren_expression();return new Fke(t)}_while_statement(){if(!this._match(De.keywords.while))return null;const t=this._optional_paren_expression();this._check(De.tokens.attr)&&this._attribute();const r=this._compound_statement();return new Bke(t,r)}_continuing_statement(){if(!this._match(De.keywords.continuing))return null;const t=this._compound_statement();return new zke(t)}_for_statement(){if(!this._match(De.keywords.for))return null;this._consume(De.tokens.paren_left,"Expected '('.");const t=this._check(De.tokens.semicolon)?null:this._for_init();this._consume(De.tokens.semicolon,"Expected ';'.");const r=this._check(De.tokens.semicolon)?null:this._short_circuit_or_expression();this._consume(De.tokens.semicolon,"Expected ';'.");const n=this._check(De.tokens.paren_right)?null:this._for_increment();this._consume(De.tokens.paren_right,"Expected ')'."),this._check(De.tokens.attr)&&this._attribute();const i=this._compound_statement();return new $ke(t,r,n,i)}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(De.keywords.var)){const t=this._variable_decl();if(t===null)throw this._error(this._peek(),"Variable declaration expected.");let r=null;return this._match(De.tokens.equal)&&(r=this._short_circuit_or_expression()),new yg(t.name,t.type,t.storage,t.access,r)}if(this._match(De.keywords.let)){const t=this._consume(De.tokens.ident,"Expected name for let.").toString();let r=null;if(this._match(De.tokens.colon)){const i=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=i)}this._consume(De.tokens.equal,"Expected '=' for let.");const n=this._short_circuit_or_expression();return new mP(t,r,null,null,n)}if(this._match(De.keywords.const)){const t=this._consume(De.tokens.ident,"Expected name for const.").toString();let r=null;if(this._match(De.tokens.colon)){const i=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=i)}this._consume(De.tokens.equal,"Expected '=' for const.");const n=this._short_circuit_or_expression();return new oB(t,r,null,null,n)}return null}_increment_decrement_statement(){const t=this._current,r=this._unary_expression();if(r==null)return null;if(!this._check(De.increment_operators))return this._current=t,null;const n=this._consume(De.increment_operators,"Expected increment operator");return new Uke(n.type===De.tokens.plus_plus?w_.increment:w_.decrement,r)}_assignment_statement(){let t=null;if(this._check(De.tokens.brace_right))return null;let r=this._match(De.tokens.underscore);if(r||(t=this._unary_expression()),!r&&t==null)return null;const n=this._consume(De.assignment_operators,"Expected assignment operator."),i=this._short_circuit_or_expression();return new jke(C2.parse(n.lexeme),t,i)}_func_call_statement(){if(!this._check(De.tokens.ident))return null;const t=this._current,r=this._consume(De.tokens.ident,"Expected function name."),n=this._argument_expression_list();return n===null?(this._current=t,null):new Bq(r.lexeme,n)}_loop_statement(){if(!this._match(De.keywords.loop))return null;this._check(De.tokens.attr)&&this._attribute(),this._consume(De.tokens.brace_left,"Expected '{' for loop.");const t=[];let r=this._statement();for(;r!==null;){if(Array.isArray(r))for(let i of r)t.push(i);else t.push(r);r=this._statement()}let n=null;return this._match(De.keywords.continuing)&&(n=this._compound_statement()),this._consume(De.tokens.brace_right,"Expected '}' for loop."),new Vke(t,n)}_switch_statement(){if(!this._match(De.keywords.switch))return null;const t=this._optional_paren_expression();this._check(De.tokens.attr)&&this._attribute(),this._consume(De.tokens.brace_left,"Expected '{' for switch.");const r=this._switch_body();if(r==null||r.length==0)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(De.tokens.brace_right,"Expected '}' for switch."),new Hke(t,r)}_switch_body(){const t=[];if(this._match(De.keywords.case)){const r=this._case_selectors();this._match(De.tokens.colon),this._check(De.tokens.attr)&&this._attribute(),this._consume(De.tokens.brace_left,"Exected '{' for switch case.");const n=this._case_body();this._consume(De.tokens.brace_right,"Exected '}' for switch case."),t.push(new i6e(r,n))}if(this._match(De.keywords.default)){this._match(De.tokens.colon),this._check(De.tokens.attr)&&this._attribute(),this._consume(De.tokens.brace_left,"Exected '{' for switch default.");const r=this._case_body();this._consume(De.tokens.brace_right,"Exected '}' for switch default."),t.push(new o6e(r))}if(this._check([De.keywords.default,De.keywords.case])){const r=this._switch_body();t.push(r[0])}return t}_case_selectors(){const t=[this._shift_expression()];for(;this._match(De.tokens.comma);)t.push(this._shift_expression());return t}_case_body(){if(this._match(De.keywords.fallthrough))return this._consume(De.tokens.semicolon,"Expected ';'"),[];let t=this._statement();if(t==null)return[];t instanceof Array||(t=[t]);const r=this._case_body();return r.length==0?t:[...t,r[0]]}_if_statement(){if(!this._match(De.keywords.if))return null;const t=this._optional_paren_expression();this._check(De.tokens.attr)&&this._attribute();const r=this._compound_statement();let n=[];this._match_elseif()&&(this._check(De.tokens.attr)&&this._attribute(),n=this._elseif_statement(n));let i=null;return this._match(De.keywords.else)&&(this._check(De.tokens.attr)&&this._attribute(),i=this._compound_statement()),new qke(t,r,n,i)}_match_elseif(){return this._tokens[this._current].type===De.keywords.else&&this._tokens[this._current+1].type===De.keywords.if?(this._advance(),this._advance(),!0):!1}_elseif_statement(t=[]){const r=this._optional_paren_expression(),n=this._compound_statement();return t.push(new a6e(r,n)),this._match_elseif()&&(this._check(De.tokens.attr)&&this._attribute(),this._elseif_statement(t)),t}_return_statement(){if(!this._match(De.keywords.return))return null;const t=this._short_circuit_or_expression();return new Wke(t)}_short_circuit_or_expression(){let t=this._short_circuit_and_expr();for(;this._match(De.tokens.or_or);)t=new jh(this._previous().toString(),t,this._short_circuit_and_expr());return t}_short_circuit_and_expr(){let t=this._inclusive_or_expression();for(;this._match(De.tokens.and_and);)t=new jh(this._previous().toString(),t,this._inclusive_or_expression());return t}_inclusive_or_expression(){let t=this._exclusive_or_expression();for(;this._match(De.tokens.or);)t=new jh(this._previous().toString(),t,this._exclusive_or_expression());return t}_exclusive_or_expression(){let t=this._and_expression();for(;this._match(De.tokens.xor);)t=new jh(this._previous().toString(),t,this._and_expression());return t}_and_expression(){let t=this._equality_expression();for(;this._match(De.tokens.and);)t=new jh(this._previous().toString(),t,this._equality_expression());return t}_equality_expression(){const t=this._relational_expression();return this._match([De.tokens.equal_equal,De.tokens.not_equal])?new jh(this._previous().toString(),t,this._relational_expression()):t}_relational_expression(){let t=this._shift_expression();for(;this._match([De.tokens.less_than,De.tokens.greater_than,De.tokens.less_than_equal,De.tokens.greater_than_equal]);)t=new jh(this._previous().toString(),t,this._shift_expression());return t}_shift_expression(){let t=this._additive_expression();for(;this._match([De.tokens.shift_left,De.tokens.shift_right]);)t=new jh(this._previous().toString(),t,this._additive_expression());return t}_additive_expression(){let t=this._multiplicative_expression();for(;this._match([De.tokens.plus,De.tokens.minus]);)t=new jh(this._previous().toString(),t,this._multiplicative_expression());return t}_multiplicative_expression(){let t=this._unary_expression();for(;this._match([De.tokens.star,De.tokens.forward_slash,De.tokens.modulo]);)t=new jh(this._previous().toString(),t,this._unary_expression());return t}_unary_expression(){return this._match([De.tokens.minus,De.tokens.bang,De.tokens.tilde,De.tokens.star,De.tokens.and])?new n6e(this._previous().toString(),this._unary_expression()):this._singular_expression()}_singular_expression(){const t=this._primary_expression(),r=this._postfix_expression();return r&&(t.postfix=r),t}_postfix_expression(){if(this._match(De.tokens.bracket_left)){const t=this._short_circuit_or_expression();this._consume(De.tokens.bracket_right,"Expected ']'.");const r=new r6e(t),n=this._postfix_expression();return n&&(r.postfix=n),r}if(this._match(De.tokens.period)){const t=this._consume(De.tokens.ident,"Expected member name."),r=this._postfix_expression(),n=new sB(t.lexeme);return r&&(n.postfix=r),n}return null}_getStruct(t){return this._context.aliases.has(t)?this._context.aliases.get(t).type:this._context.structs.has(t)?this._context.structs.get(t):null}_primary_expression(){if(this._match(De.tokens.ident)){const n=this._previous().toString();if(this._check(De.tokens.paren_left)){const i=this._argument_expression_list(),o=this._getStruct(n);return o!=null?new py(o,i):new jq(n,i)}if(this._context.constants.has(n)){const i=this._context.constants.get(n);return new aB(n,i.value)}return new yP(n)}if(this._match(De.const_literal))return new lB(parseFloat(this._previous().toString()));if(this._check(De.tokens.paren_left))return this._paren_expression();if(this._match(De.keywords.bitcast)){this._consume(De.tokens.less_than,"Expected '<'.");const n=this._type_decl();this._consume(De.tokens.greater_than,"Expected '>'.");const i=this._paren_expression();return new e6e(n,i)}const t=this._type_decl(),r=this._argument_expression_list();return new t6e(t,r)}_argument_expression_list(){if(!this._match(De.tokens.paren_left))return null;const t=[];do{if(this._check(De.tokens.paren_right))break;const r=this._short_circuit_or_expression();t.push(r)}while(this._match(De.tokens.comma));return this._consume(De.tokens.paren_right,"Expected ')' for agument list"),t}_optional_paren_expression(){this._match(De.tokens.paren_left);const t=this._short_circuit_or_expression();return this._match(De.tokens.paren_right),new cB([t])}_paren_expression(){this._consume(De.tokens.paren_left,"Expected '('.");const t=this._short_circuit_or_expression();return this._consume(De.tokens.paren_right,"Expected ')'."),new cB([t])}_struct_decl(){if(!this._match(De.keywords.struct))return null;const t=this._currentLine,r=this._consume(De.tokens.ident,"Expected name for struct.").toString();this._consume(De.tokens.brace_left,"Expected '{' for struct body.");const n=[];for(;!this._check(De.tokens.brace_right);){const l=this._attribute(),s=this._consume(De.tokens.ident,"Expected variable name.").toString();this._consume(De.tokens.colon,"Expected ':' for struct member type.");const f=this._attribute(),p=this._type_decl();p!=null&&(p.attributes=f),this._check(De.tokens.brace_right)?this._match(De.tokens.comma):this._consume(De.tokens.comma,"Expected ',' for struct member."),n.push(new l6e(s,p,l))}this._consume(De.tokens.brace_right,"Expected '}' after struct body.");const i=this._currentLine,o=new pg(r,n,t,i);return this._context.structs.set(r,o),o}_global_variable_decl(){const t=this._variable_decl();return t&&this._match(De.tokens.equal)&&(t.value=this._const_expression()),t}_override_variable_decl(){const t=this._override_decl();return t&&this._match(De.tokens.equal)&&(t.value=this._const_expression()),t}_global_const_decl(){if(!this._match(De.keywords.const))return null;const t=this._consume(De.tokens.ident,"Expected variable name");let r=null;if(this._match(De.tokens.colon)){const o=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=o)}let n=null;if(this._match(De.tokens.equal)){const o=this._short_circuit_or_expression();if(o instanceof py)n=o;else if(o instanceof aB&&o.initializer instanceof py)n=o.initializer;else try{const l=o.evaluate(this._context);n=new lB(l)}catch{n=o}}const i=new oB(t.toString(),r,"","",n);return this._context.constants.set(i.name,i),i}_global_let_decl(){if(!this._match(De.keywords.let))return null;const t=this._consume(De.tokens.ident,"Expected variable name");let r=null;if(this._match(De.tokens.colon)){const i=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=i)}let n=null;return this._match(De.tokens.equal)&&(n=this._const_expression()),new mP(t.toString(),r,"","",n)}_const_expression(){if(this._match(De.const_literal))return new sB(this._previous().toString());const t=this._type_decl();this._consume(De.tokens.paren_left,"Expected '('.");let r=[];for(;!this._check(De.tokens.paren_right)&&(r.push(this._const_expression()),!!this._check(De.tokens.comma));)this._advance();return this._consume(De.tokens.paren_right,"Expected ')'."),new py(t,r)}_variable_decl(){if(!this._match(De.keywords.var))return null;let t="",r="";this._match(De.tokens.less_than)&&(t=this._consume(De.storage_class,"Expected storage_class.").toString(),this._match(De.tokens.comma)&&(r=this._consume(De.access_mode,"Expected access_mode.").toString()),this._consume(De.tokens.greater_than,"Expected '>'."));const n=this._consume(De.tokens.ident,"Expected variable name");let i=null;if(this._match(De.tokens.colon)){const o=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=o)}return new yg(n.toString(),i,t,r,null)}_override_decl(){if(!this._match(De.keywords.override))return null;const t=this._consume(De.tokens.ident,"Expected variable name");let r=null;if(this._match(De.tokens.colon)){const n=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=n)}return new Fq(t.toString(),r,null)}_diagnostic(){this._consume(De.tokens.paren_left,"Expected '('");const t=this._consume(De.tokens.ident,"Expected severity control name.");this._consume(De.tokens.comma,"Expected ','");const r=this._consume(De.tokens.ident,"Expected diagnostic rule name.");return this._consume(De.tokens.paren_right,"Expected ')'"),new Gke(t.toString(),r.toString())}_enable_directive(){const t=this._consume(De.tokens.ident,"identity expected.");return new Xke(t.toString())}_requires_directive(){const t=[this._consume(De.tokens.ident,"identity expected.").toString()];for(;this._match(De.tokens.comma);){const r=this._consume(De.tokens.ident,"identity expected.");t.push(r.toString())}return new Kke(t)}_type_alias(){const t=this._consume(De.tokens.ident,"identity expected.");this._consume(De.tokens.equal,"Expected '=' for type alias.");let r=this._type_decl();if(r===null)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(r.name)&&(r=this._context.aliases.get(r.name).type);const n=new zq(t.toString(),r);return this._context.aliases.set(n.name,n),n}_type_decl(){if(this._check([De.tokens.ident,...De.texel_format,De.keywords.bool,De.keywords.f32,De.keywords.i32,De.keywords.u32])){const n=this._advance(),i=n.toString();return this._context.structs.has(i)?this._context.structs.get(i):this._context.aliases.has(i)?this._context.aliases.get(i).type:new Cm(n.toString())}let t=this._texture_sampler_types();if(t)return t;if(this._check(De.template_types)){let n=this._advance().toString(),i=null,o=null;return this._match(De.tokens.less_than)&&(i=this._type_decl(),o=null,this._match(De.tokens.comma)&&(o=this._consume(De.access_mode,"Expected access_mode for pointer").toString()),this._consume(De.tokens.greater_than,"Expected '>' for type.")),new $q(n,i,o)}if(this._match(De.keywords.ptr)){let n=this._previous().toString();this._consume(De.tokens.less_than,"Expected '<' for pointer.");const i=this._consume(De.storage_class,"Expected storage_class for pointer");this._consume(De.tokens.comma,"Expected ',' for pointer.");const o=this._type_decl();let l=null;return this._match(De.tokens.comma)&&(l=this._consume(De.access_mode,"Expected access_mode for pointer").toString()),this._consume(De.tokens.greater_than,"Expected '>' for pointer."),new Qke(n,i.toString(),o,l)}const r=this._attribute();if(this._match(De.keywords.array)){let n=null,i=-1;const o=this._previous();let l=null;if(this._match(De.tokens.less_than)){n=this._type_decl(),this._context.aliases.has(n.name)&&(n=this._context.aliases.get(n.name).type);let f="";if(this._match(De.tokens.comma)){l=this._shift_expression();try{f=l.evaluate(this._context).toString(),l=null}catch{f="1"}}this._consume(De.tokens.greater_than,"Expected '>' for array."),i=f?parseInt(f):0}const s=new Uq(o.toString(),r,n,i);return l&&this._deferArrayCountEval.push({arrayType:s,countNode:l}),s}return null}_texture_sampler_types(){if(this._match(De.sampler_type))return new hv(this._previous().toString(),null,null);if(this._match(De.depth_texture_type))return new hv(this._previous().toString(),null,null);if(this._match(De.sampled_texture_type)||this._match(De.multisampled_texture_type)){const t=this._previous();this._consume(De.tokens.less_than,"Expected '<' for sampler type.");const r=this._type_decl();return this._consume(De.tokens.greater_than,"Expected '>' for sampler type."),new hv(t.toString(),r,null)}if(this._match(De.storage_texture_type)){const t=this._previous();this._consume(De.tokens.less_than,"Expected '<' for sampler type.");const r=this._consume(De.texel_format,"Invalid texel format.").toString();this._consume(De.tokens.comma,"Expected ',' after texel format.");const n=this._consume(De.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(De.tokens.greater_than,"Expected '>' for sampler type."),new hv(t.toString(),r,n)}return null}_attribute(){let t=[];for(;this._match(De.tokens.attr);){const r=this._consume(De.attribute_name,"Expected attribute name"),n=new c6e(r.toString(),null);if(this._match(De.tokens.paren_left)){if(n.value=this._consume(De.literal_or_ident,"Expected attribute value").toString(),this._check(De.tokens.comma)){this._advance();do{const i=this._consume(De.literal_or_ident,"Expected attribute value").toString();n.value instanceof Array||(n.value=[n.value]),n.value.push(i)}while(this._match(De.tokens.comma))}this._consume(De.tokens.paren_right,"Expected ')'")}t.push(n)}return t.length==0?null:t}}class zy{constructor(t,r){this.name=t,this.attributes=r,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}}class hB{constructor(t,r,n){this.name=t,this.type=r,this.attributes=n,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray?this.type.format:this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class Lx extends zy{constructor(t,r){super(t,r),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class kT extends zy{constructor(t,r){super(t,r),this.count=0,this.stride=0}get isArray(){return!0}}class fB extends zy{constructor(t,r,n,i){super(t,n),this.format=r,this.access=i}get isTemplate(){return!0}}var ep;(function(e){e[e.Uniform=0]="Uniform",e[e.Storage=1]="Storage",e[e.Texture=2]="Texture",e[e.Sampler=3]="Sampler",e[e.StorageTexture=4]="StorageTexture"})(ep||(ep={}));class Fx{constructor(t,r,n,i,o,l,s){this.name=t,this.type=r,this.group=n,this.binding=i,this.attributes=o,this.resourceType=l,this.access=s}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray?this.type.format:this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class f6e{constructor(t,r){this.name=t,this.type=r}}class Bx{constructor(t,r){this.align=t,this.size=r}}class d6e{constructor(t,r,n,i){this.name=t,this.type=r,this.locationType=n,this.location=i,this.interpolation=null}}class dB{constructor(t,r,n,i){this.name=t,this.type=r,this.locationType=n,this.location=i}}class p6e{constructor(t,r=null){this.stage=null,this.inputs=[],this.outputs=[],this.resources=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=t,this.stage=r}}class g6e{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}class m6e{constructor(t,r,n,i){this.name=t,this.type=r,this.attributes=n,this.id=i}}class y6e{constructor(t){this.resources=null,this.inUse=!1,this.info=null,this.node=t}}class rd{constructor(t){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new g6e,this.functions=[],this._types=new Map,this._functions=new Map,t&&this.update(t)}_isStorageTexture(t){return t.name=="texture_storage_1d"||t.name=="texture_storage_2d"||t.name=="texture_storage_2d_array"||t.name=="texture_storage_3d"}update(t){const n=new h6e().parse(t);for(const i of n)i instanceof gP&&this._functions.set(i.name,new y6e(i));for(const i of n)if(i instanceof pg){const o=this._getTypeInfo(i,null);o instanceof Lx&&this.structs.push(o)}for(const i of n){if(i instanceof zq){this.aliases.push(this._getAliasInfo(i));continue}if(i instanceof Fq){const o=i,l=this._getAttributeNum(o.attributes,"id",0),s=o.type!=null?this._getTypeInfo(o.type,o.attributes):null;this.overrides.push(new m6e(o.name,s,o.attributes,l));continue}if(this._isUniformVar(i)){const o=i,l=this._getAttributeNum(o.attributes,"group",0),s=this._getAttributeNum(o.attributes,"binding",0),f=this._getTypeInfo(o.type,o.attributes),p=new Fx(o.name,f,l,s,o.attributes,ep.Uniform,o.access);this.uniforms.push(p);continue}if(this._isStorageVar(i)){const o=i,l=this._getAttributeNum(o.attributes,"group",0),s=this._getAttributeNum(o.attributes,"binding",0),f=this._getTypeInfo(o.type,o.attributes),p=this._isStorageTexture(f),v=new Fx(o.name,f,l,s,o.attributes,p?ep.StorageTexture:ep.Storage,o.access);this.storage.push(v);continue}if(this._isTextureVar(i)){const o=i,l=this._getAttributeNum(o.attributes,"group",0),s=this._getAttributeNum(o.attributes,"binding",0),f=this._getTypeInfo(o.type,o.attributes),p=this._isStorageTexture(f),v=new Fx(o.name,f,l,s,o.attributes,p?ep.StorageTexture:ep.Texture,o.access);p?this.storage.push(v):this.textures.push(v);continue}if(this._isSamplerVar(i)){const o=i,l=this._getAttributeNum(o.attributes,"group",0),s=this._getAttributeNum(o.attributes,"binding",0),f=this._getTypeInfo(o.type,o.attributes),p=new Fx(o.name,f,l,s,o.attributes,ep.Sampler,o.access);this.samplers.push(p);continue}if(i instanceof gP){const o=this._getAttribute(i,"vertex"),l=this._getAttribute(i,"fragment"),s=this._getAttribute(i,"compute"),f=o||l||s,p=new p6e(i.name,f==null?void 0:f.name);p.startLine=i.startLine,p.endLine=i.endLine,this.functions.push(p),this._functions.get(i.name).info=p,f&&(this._functions.get(i.name).inUse=!0,p.inUse=!0,p.resources=this._findResources(i,!!f),p.inputs=this._getInputs(i.args),p.outputs=this._getOutputs(i.returnType),this.entry[f.name].push(p));continue}}for(const i of this._functions.values())i.info&&(i.info.inUse=i.inUse,this._addCalls(i.node,i.info.calls));for(const i of this.uniforms)this._markStructsInUse(i.type);for(const i of this.storage)this._markStructsInUse(i.type)}_markStructsInUse(t){if(t.isStruct){t.inUse=!0;for(const r of t.members)this._markStructsInUse(r.type)}else if(t.isArray)this._markStructsInUse(t.format);else if(t.isTemplate)this._markStructsInUse(t.format);else{const r=this._getAlias(t.name);r&&this._markStructsInUse(r)}}_addCalls(t,r){var n;for(const i of t.calls){const o=(n=this._functions.get(i.name))===null||n===void 0?void 0:n.info;o&&r.add(o)}}findResource(t,r){for(const n of this.uniforms)if(n.group==t&&n.binding==r)return n;for(const n of this.storage)if(n.group==t&&n.binding==r)return n;for(const n of this.textures)if(n.group==t&&n.binding==r)return n;for(const n of this.samplers)if(n.group==t&&n.binding==r)return n;return null}_findResource(t){for(const r of this.uniforms)if(r.name==t)return r;for(const r of this.storage)if(r.name==t)return r;for(const r of this.textures)if(r.name==t)return r;for(const r of this.samplers)if(r.name==t)return r;return null}_markStructsFromAST(t){const r=this._getTypeInfo(t,null);this._markStructsInUse(r)}_findResources(t,r){const n=[],i=this,o=[];return t.search(l=>{if(l instanceof J5)o.push({});else if(l instanceof Q5)o.pop();else if(l instanceof yg){const s=l;r&&s.type!==null&&this._markStructsFromAST(s.type),o.length>0&&(o[o.length-1][s.name]=s)}else if(l instanceof py){const s=l;r&&s.type!==null&&this._markStructsFromAST(s.type)}else if(l instanceof mP){const s=l;r&&s.type!==null&&this._markStructsFromAST(s.type),o.length>0&&(o[o.length-1][s.name]=s)}else if(l instanceof yP){const s=l;if(o.length>0&&o[o.length-1][s.name])return;const f=i._findResource(s.name);f&&n.push(f)}else if(l instanceof jq){const s=l,f=i._functions.get(s.name);f&&(r&&(f.inUse=!0),t.calls.add(f.node),f.resources===null&&(f.resources=i._findResources(f.node,r)),n.push(...f.resources))}else if(l instanceof Bq){const s=l,f=i._functions.get(s.name);f&&(r&&(f.inUse=!0),t.calls.add(f.node),f.resources===null&&(f.resources=i._findResources(f.node,r)),n.push(...f.resources))}}),[...new Map(n.map(l=>[l.name,l])).values()]}getBindGroups(){const t=[];function r(n,i){n>=t.length&&(t.length=n+1),t[n]===void 0&&(t[n]=[]),i>=t[n].length&&(t[n].length=i+1)}for(const n of this.uniforms){r(n.group,n.binding);const i=t[n.group];i[n.binding]=n}for(const n of this.storage){r(n.group,n.binding);const i=t[n.group];i[n.binding]=n}for(const n of this.textures){r(n.group,n.binding);const i=t[n.group];i[n.binding]=n}for(const n of this.samplers){r(n.group,n.binding);const i=t[n.group];i[n.binding]=n}return t}_getOutputs(t,r=void 0){if(r===void 0&&(r=[]),t instanceof pg)this._getStructOutputs(t,r);else{const n=this._getOutputInfo(t);n!==null&&r.push(n)}return r}_getStructOutputs(t,r){for(const n of t.members)if(n.type instanceof pg)this._getStructOutputs(n.type,r);else{const i=this._getAttribute(n,"location")||this._getAttribute(n,"builtin");if(i!==null){const o=this._getTypeInfo(n.type,n.type.attributes),l=this._parseInt(i.value),s=new dB(n.name,o,i.name,l);r.push(s)}}}_getOutputInfo(t){const r=this._getAttribute(t,"location")||this._getAttribute(t,"builtin");if(r!==null){const n=this._getTypeInfo(t,t.attributes),i=this._parseInt(r.value);return new dB("",n,r.name,i)}return null}_getInputs(t,r=void 0){r===void 0&&(r=[]);for(const n of t)if(n.type instanceof pg)this._getStructInputs(n.type,r);else{const i=this._getInputInfo(n);i!==null&&r.push(i)}return r}_getStructInputs(t,r){for(const n of t.members)if(n.type instanceof pg)this._getStructInputs(n.type,r);else{const i=this._getInputInfo(n);i!==null&&r.push(i)}}_getInputInfo(t){const r=this._getAttribute(t,"location")||this._getAttribute(t,"builtin");if(r!==null){const n=this._getAttribute(t,"interpolation"),i=this._getTypeInfo(t.type,t.attributes),o=this._parseInt(r.value),l=new d6e(t.name,i,r.name,o);return n!==null&&(l.interpolation=this._parseString(n.value)),l}return null}_parseString(t){return t instanceof Array&&(t=t[0]),t}_parseInt(t){t instanceof Array&&(t=t[0]);const r=parseInt(t);return isNaN(r)?t:r}_getAlias(t){for(const r of this.aliases)if(r.name==t)return r.type;return null}_getAliasInfo(t){return new f6e(t.name,this._getTypeInfo(t.type,null))}_getTypeInfo(t,r){if(this._types.has(t))return this._types.get(t);if(t instanceof Uq){const i=t,o=this._getTypeInfo(i.format,i.attributes),l=new kT(i.name,r);return l.format=o,l.count=i.count,this._types.set(t,l),this._updateTypeInfo(l),l}if(t instanceof pg){const i=t,o=new Lx(i.name,r);o.startLine=i.startLine,o.endLine=i.endLine;for(const l of i.members){const s=this._getTypeInfo(l.type,l.attributes);o.members.push(new hB(l.name,s,l.attributes))}return this._types.set(t,o),this._updateTypeInfo(o),o}if(t instanceof hv){const i=t,o=i.format instanceof Cm,l=i.format?o?this._getTypeInfo(i.format,null):new zy(i.format,null):null,s=new fB(i.name,l,r,i.access);return this._types.set(t,s),this._updateTypeInfo(s),s}if(t instanceof $q){const i=t,o=i.format?this._getTypeInfo(i.format,null):null,l=new fB(i.name,o,r,i.access);return this._types.set(t,l),this._updateTypeInfo(l),l}const n=new zy(t.name,r);return this._types.set(t,n),this._updateTypeInfo(n),n}_updateTypeInfo(t){var r,n;const i=this._getTypeSize(t);if(t.size=(r=i==null?void 0:i.size)!==null&&r!==void 0?r:0,t instanceof kT){const o=this._getTypeSize(t.format);t.stride=(n=o==null?void 0:o.size)!==null&&n!==void 0?n:0,this._updateTypeInfo(t.format)}t instanceof Lx&&this._updateStructInfo(t)}_updateStructInfo(t){var r;let n=0,i=0,o=0,l=0;for(let s=0,f=t.members.length;s<f;++s){const p=t.members[s],v=this._getTypeSize(p);if(!v)continue;(r=this._getAlias(p.type.name))!==null&&r!==void 0||p.type;const x=v.align,S=v.size;n=this._roundUp(x,n+i),i=S,o=n,l=Math.max(l,x),p.offset=n,p.size=S,this._updateTypeInfo(p.type)}t.size=this._roundUp(l,o+i),t.align=l}_getTypeSize(t){var r;if(t==null)return null;const n=this._getAttributeNum(t.attributes,"size",0),i=this._getAttributeNum(t.attributes,"align",0);if(t instanceof hB&&(t=t.type),t instanceof zy){const o=this._getAlias(t.name);o!==null&&(t=o)}{const o=rd._typeInfo[t.name];if(o!==void 0){const l=t.format==="f16"?2:1;return new Bx(Math.max(i,o.align/l),Math.max(n,o.size/l))}}{const o=rd._typeInfo[t.name.substring(0,t.name.length-1)];if(o){const l=t.name[t.name.length-1]==="h"?2:1;return new Bx(Math.max(i,o.align/l),Math.max(n,o.size/l))}}if(t instanceof kT){let o=t,l=8,s=8;const f=this._getTypeSize(o.format);f!==null&&(s=f.size,l=f.align);const p=o.count,v=this._getAttributeNum((r=t==null?void 0:t.attributes)!==null&&r!==void 0?r:null,"stride",this._roundUp(l,s));return s=p*v,n&&(s=n),new Bx(Math.max(i,l),Math.max(n,s))}if(t instanceof Lx){let o=0,l=0,s=0,f=0,p=0;for(const v of t.members){const x=this._getTypeSize(v.type);x!==null&&(o=Math.max(x.align,o),s=this._roundUp(x.align,s+f),f=x.size,p=s)}return l=this._roundUp(o,p+f),new Bx(Math.max(i,o),Math.max(n,l))}return null}_isUniformVar(t){return t instanceof yg&&t.storage=="uniform"}_isStorageVar(t){return t instanceof yg&&t.storage=="storage"}_isTextureVar(t){return t instanceof yg&&t.type!==null&&rd._textureTypes.indexOf(t.type.name)!=-1}_isSamplerVar(t){return t instanceof yg&&t.type!==null&&rd._samplerTypes.indexOf(t.type.name)!=-1}_getAttribute(t,r){const n=t;if(!n||!n.attributes)return null;const i=n.attributes;for(let o of i)if(o.name==r)return o;return null}_getAttributeNum(t,r,n){if(t===null)return n;for(let i of t)if(i.name==r){let o=i!==null&&i.value!==null?i.value:n;return o instanceof Array&&(o=o[0]),typeof o=="number"?o:typeof o=="string"?parseInt(o):n}return n}_roundUp(t,r){return Math.ceil(r/t)*t}}rd._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}};rd._textureTypes=De.any_texture_type.map(e=>e.name);rd._samplerTypes=De.sampler_type.map(e=>e.name);function _6e(e){var o;const t={attributes:[],bindings:[]};let r;try{r=v6e(e)}catch(l){return pr.error(l.message)(),t}for(const l of r.uniforms){const s=[];for(const f of((o=l.type)==null?void 0:o.members)||[])s.push({name:f.name,type:pB(f.type)});t.bindings.push({type:"uniform",name:l.name,location:l.binding,group:l.group,members:s})}const n=r.entry.vertex[0],i=(n==null?void 0:n.inputs.length)||0;for(let l=0;l<i;l++){const s=n.inputs[l];if(s.locationType==="location"){const f=pB(s.type);t.attributes.push({name:s.name,location:Number(s.location),type:f})}}return t}function pB(e){return e.format?`${e.name}<${e.format.name}>`:e.name}function v6e(e){try{return new rd(e)}catch(t){if(t instanceof Error)throw t;let r="WGSL parse error";throw typeof t=="object"&&(t!=null&&t.message)&&(r+=`: ${t.message} `),typeof t=="object"&&(t!=null&&t.token)&&(r+=t.token.line||""),new Error(r,{cause:t})}}const b6e=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;
const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;
const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;
const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;
float sin_taylor_fp32(float a) {
float r, s, t, x;
if (a == 0.0) {
return 0.0;
}
x = -a * a;
s = a;
r = a;
r = r * x;
t = r * INVERSE_FACTORIAL_3;
s = s + t;
r = r * x;
t = r * INVERSE_FACTORIAL_5;
s = s + t;
r = r * x;
t = r * INVERSE_FACTORIAL_7;
s = s + t;
r = r * x;
t = r * INVERSE_FACTORIAL_9;
s = s + t;
return s;
}
void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
if (a == 0.0) {
sin_t = 0.0;
cos_t = 1.0;
}
sin_t = sin_taylor_fp32(a);
cos_t = sqrt(1.0 - sin_t * sin_t);
}
float tan_taylor_fp32(float a) {
float sin_a;
float cos_a;
if (a == 0.0) {
return 0.0;
}
float z = floor(a / TWO_PI);
float r = a - TWO_PI * z;
float t;
float q = floor(r / PI_2 + 0.5);
int j = int(q);
if (j < -2 || j > 2) {
return 1.0 / 0.0;
}
t = r - PI_2 * q;
q = floor(t / PI_16 + 0.5);
int k = int(q);
int abs_k = int(abs(float(k)));
if (abs_k > 4) {
return 1.0 / 0.0;
} else {
t = t - PI_16 * q;
}
float u = 0.0;
float v = 0.0;
float sin_t, cos_t;
float s, c;
sincos_taylor_fp32(t, sin_t, cos_t);
if (k == 0) {
s = sin_t;
c = cos_t;
} else {
if (abs(float(abs_k) - 1.0) < 0.5) {
u = COS_TABLE_0;
v = SIN_TABLE_0;
} else if (abs(float(abs_k) - 2.0) < 0.5) {
u = COS_TABLE_1;
v = SIN_TABLE_1;
} else if (abs(float(abs_k) - 3.0) < 0.5) {
u = COS_TABLE_2;
v = SIN_TABLE_2;
} else if (abs(float(abs_k) - 4.0) < 0.5) {
u = COS_TABLE_3;
v = SIN_TABLE_3;
}
if (k > 0) {
s = u * sin_t + v * cos_t;
c = u * cos_t - v * sin_t;
} else {
s = u * sin_t - v * cos_t;
c = u * cos_t + v * sin_t;
}
}
if (j == 0) {
sin_a = s;
cos_a = c;
} else if (j == 1) {
sin_a = c;
cos_a = -s;
} else if (j == -1) {
sin_a = -c;
cos_a = s;
} else {
sin_a = -s;
cos_a = -c;
}
return sin_a / cos_a;
}
#endif
float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
return tan_taylor_fp32(a);
#else
return tan(a);
#endif
}
`,x6e={name:"fp32",vs:b6e},w6e=[0,1,1,1],S6e=`uniform pickingUniforms {
float isActive;
float isAttribute;
float isHighlightActive;
float useFloatColors;
vec3 highlightedObjectColor;
vec4 highlightColor;
} picking;
out vec4 picking_vRGBcolor_Avalid;
vec3 picking_normalizeColor(vec3 color) {
return picking.useFloatColors > 0.5 ? color : color / 255.0;
}
vec4 picking_normalizeColor(vec4 color) {
return picking.useFloatColors > 0.5 ? color : color / 255.0;
}
bool picking_isColorZero(vec3 color) {
return dot(color, vec3(1.0)) < 0.00001;
}
bool picking_isColorValid(vec3 color) {
return dot(color, vec3(1.0)) > 0.00001;
}
bool isVertexHighlighted(vec3 vertexColor) {
vec3 highlightedObjectColor = picking_normalizeColor(picking.highlightedObjectColor);
return
bool(picking.isHighlightActive) && picking_isColorZero(abs(vertexColor - highlightedObjectColor));
}
void picking_setPickingColor(vec3 pickingColor) {
pickingColor = picking_normalizeColor(pickingColor);
if (bool(picking.isActive)) {
picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));
if (!bool(picking.isAttribute)) {
picking_vRGBcolor_Avalid.rgb = pickingColor;
}
} else {
picking_vRGBcolor_Avalid.a = float(isVertexHighlighted(pickingColor));
}
}
void picking_setPickingAttribute(float value) {
if (bool(picking.isAttribute)) {
picking_vRGBcolor_Avalid.r = value;
}
}
void picking_setPickingAttribute(vec2 value) {
if (bool(picking.isAttribute)) {
picking_vRGBcolor_Avalid.rg = value;
}
}
void picking_setPickingAttribute(vec3 value) {
if (bool(picking.isAttribute)) {
picking_vRGBcolor_Avalid.rgb = value;
}
}
`,A6e=`uniform pickingUniforms {
float isActive;
float isAttribute;
float isHighlightActive;
float useFloatColors;
vec3 highlightedObjectColor;
vec4 highlightColor;
} picking;
in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
if (picking.isActive > 0.5) {
return color;
}
bool selected = bool(picking_vRGBcolor_Avalid.a);
if (selected) {
float highLightAlpha = picking.highlightColor.a;
float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
float highLightRatio = highLightAlpha / blendedAlpha;
vec3 blendedRGB = mix(color.rgb, picking.highlightColor.rgb, highLightRatio);
return vec4(blendedRGB, blendedAlpha);
} else {
return color;
}
}
vec4 picking_filterPickingColor(vec4 color) {
if (bool(picking.isActive)) {
if (picking_vRGBcolor_Avalid.a == 0.0) {
discard;
}
return picking_vRGBcolor_Avalid;
}
return color;
}
vec4 picking_filterColor(vec4 color) {
vec4 highlightColor = picking_filterHighlightColor(color);
return picking_filterPickingColor(highlightColor);
}
`,gB={name:"picking",vs:S6e,fs:A6e,uniformTypes:{isActive:"f32",isAttribute:"f32",isHighlightActive:"f32",useFloatColors:"f32",highlightedObjectColor:"vec3<f32>",highlightColor:"vec4<f32>"},defaultUniforms:{isActive:!1,isAttribute:!1,isHighlightActive:!1,useFloatColors:!0,highlightedObjectColor:[0,0,0],highlightColor:w6e},getUniforms:E6e};function E6e(e={},t){const r={};if(e.highlightedObjectColor!==void 0)if(e.highlightedObjectColor===null)r.isHighlightActive=!1;else{r.isHighlightActive=!0;const n=e.highlightedObjectColor.slice(0,3);r.highlightedObjectColor=n}if(e.highlightColor){const n=Array.from(e.highlightColor,i=>i/255);Number.isFinite(n[3])||(n[3]=1),r.highlightColor=n}return e.isActive!==void 0&&(r.isActive=!!e.isActive,r.isAttribute=!!e.isAttribute),e.useFloatColors!==void 0&&(r.useFloatColors=!!e.useFloatColors),r}function qq(e,t=[],r=0){const n=Math.fround(e),i=e-n;return t[r]=n,t[r+1]=i,t}function T6e(e){return e-Math.fround(e)}function C6e(e){const t=new Float32Array(32);for(let r=0;r<4;++r)for(let n=0;n<4;++n){const i=r*4+n;qq(e[n*4+r],t,i*2)}return t}const P6e=`uniform float ONE;
vec2 split(float a) {
const float SPLIT = 4097.0;
float t = a * SPLIT;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float a_hi = t * ONE - (t - a);
float a_lo = a * ONE - a_hi;
#else
float a_hi = t - (t - a);
float a_lo = a - a_hi;
#endif
return vec2(a_hi, a_lo);
}
vec2 split2(vec2 a) {
vec2 b = split(a.x);
b.y += a.y;
return b;
}
vec2 quickTwoSum(float a, float b) {
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float sum = (a + b) * ONE;
float err = b - (sum - a) * ONE;
#else
float sum = a + b;
float err = b - (sum - a);
#endif
return vec2(sum, err);
}
vec2 twoSum(float a, float b) {
float s = (a + b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float v = (s * ONE - a) * ONE;
float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);
#else
float v = s - a;
float err = (a - (s - v)) + (b - v);
#endif
return vec2(s, err);
}
vec2 twoSub(float a, float b) {
float s = (a - b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float v = (s * ONE - a) * ONE;
float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);
#else
float v = s - a;
float err = (a - (s - v)) - (b + v);
#endif
return vec2(s, err);
}
vec2 twoSqr(float a) {
float prod = a * a;
vec2 a_fp64 = split(a);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *
a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;
#else
float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;
#endif
return vec2(prod, err);
}
vec2 twoProd(float a, float b) {
float prod = a * b;
vec2 a_fp64 = split(a);
vec2 b_fp64 = split(b);
float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +
a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;
return vec2(prod, err);
}
vec2 sum_fp64(vec2 a, vec2 b) {
vec2 s, t;
s = twoSum(a.x, b.x);
t = twoSum(a.y, b.y);
s.y += t.x;
s = quickTwoSum(s.x, s.y);
s.y += t.y;
s = quickTwoSum(s.x, s.y);
return s;
}
vec2 sub_fp64(vec2 a, vec2 b) {
vec2 s, t;
s = twoSub(a.x, b.x);
t = twoSub(a.y, b.y);
s.y += t.x;
s = quickTwoSum(s.x, s.y);
s.y += t.y;
s = quickTwoSum(s.x, s.y);
return s;
}
vec2 mul_fp64(vec2 a, vec2 b) {
vec2 prod = twoProd(a.x, b.x);
prod.y += a.x * b.y;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
prod = split2(prod);
#endif
prod = quickTwoSum(prod.x, prod.y);
prod.y += a.y * b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
prod = split2(prod);
#endif
prod = quickTwoSum(prod.x, prod.y);
return prod;
}
vec2 div_fp64(vec2 a, vec2 b) {
float xn = 1.0 / b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
vec2 yn = mul_fp64(a, vec2(xn, 0));
#else
vec2 yn = a * xn;
#endif
float diff = (sub_fp64(a, mul_fp64(b, yn))).x;
vec2 prod = twoProd(xn, diff);
return sum_fp64(yn, prod);
}
vec2 sqrt_fp64(vec2 a) {
if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);
if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);
float x = 1.0 / sqrt(a.x);
float yn = a.x * x;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
vec2 yn_sqr = twoSqr(yn) * ONE;
#else
vec2 yn_sqr = twoSqr(yn);
#endif
float diff = sub_fp64(a, yn_sqr).x;
vec2 prod = twoProd(x * 0.5, diff);
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
return sum_fp64(split(yn), prod);
#else
return sum_fp64(vec2(yn, 0.0), prod);
#endif
}
`,I6e={ONE:1};function R6e(){return I6e}const k6e={name:"fp64-arithmetic",vs:P6e,getUniforms:R6e,fp64ify:qq,fp64LowPart:T6e,fp64ifyMatrix4:C6e},M6e={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1};globalThis.mathgl=globalThis.mathgl||{config:{...M6e}};const Pu=globalThis.mathgl.config;function O6e(e,{precision:t=Pu.precision}={}){return e=N6e(e),`${parseFloat(e.toPrecision(t))}`}function S_(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function mp(e,t,r){return L6e(e,n=>Math.max(t,Math.min(r,n)))}function eS(e,t,r){return S_(e)?e.map((n,i)=>eS(n,t[i],r)):r*t+(1-r)*e}function P2(e,t,r){const n=Pu.EPSILON;try{if(e===t)return!0;if(S_(e)&&S_(t)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(!P2(e[i],t[i]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):typeof e=="number"&&typeof t=="number"?Math.abs(e-t)<=Pu.EPSILON*Math.max(1,Math.abs(e),Math.abs(t)):!1}finally{Pu.EPSILON=n}}function N6e(e){return Math.round(e/Pu.EPSILON)*Pu.EPSILON}function D6e(e){return e.clone?e.clone():new Array(e.length)}function L6e(e,t,r){if(S_(e)){const n=e;r=r||D6e(n);for(let i=0;i<r.length&&i<n.length;++i){const o=typeof e=="number"?e:e[i];r[i]=t(o,i,r)}return r}return t(e)}class Wq extends Array{clone(){return new this.constructor().copy(this)}fromArray(t,r=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+r];return this.check()}toArray(t=[],r=0){for(let n=0;n<this.ELEMENTS;++n)t[r+n]=this[n];return t}toObject(t){return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:S_(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Pu)}formatString(t){let r="";for(let n=0;n<this.ELEMENTS;++n)r+=(n>0?", ":"")+O6e(this[n],t);return`${t.printTypes?this.constructor.name:""}[${r}]`}equals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(!P2(this[r],t[r]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(this[r]!==t[r])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,r,n){if(n===void 0)return this.lerp(this,t,r);for(let i=0;i<this.ELEMENTS;++i){const o=t[i],l=typeof r=="number"?r:r[i];this[i]=o+n*(l-o)}return this.check()}min(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(t[r],this[r]);return this.check()}max(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.max(t[r],this[r]);return this.check()}clamp(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),r[n]);return this.check()}add(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]+=r[n];return this.check()}subtract(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]-=r[n];return this.check()}scale(t){if(typeof t=="number")for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;else for(let r=0;r<this.ELEMENTS&&r<t.length;++r)this[r]*=t[r];return this.check()}multiplyByScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}check(){if(Pu.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let t=this.length===this.ELEMENTS;for(let r=0;r<this.ELEMENTS;++r)t=t&&Number.isFinite(this[r]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=t;return this.check()}addScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),r);return this.check()}get elements(){return this}}function F6e(e,t){if(e.length!==t)return!1;for(let r=0;r<e.length;++r)if(!Number.isFinite(e[r]))return!1;return!0}function zc(e){if(!Number.isFinite(e))throw new Error(`Invalid number ${JSON.stringify(e)}`);return e}function MT(e,t,r=""){if(Pu.debug&&!F6e(e,t))throw new Error(`math.gl: ${r} some fields set to invalid numbers'`);return e}function mB(e,t){if(!e)throw new Error(`math.gl assertion ${t}`)}class B6e extends Wq{get x(){return this[0]}set x(t){this[0]=zc(t)}get y(){return this[1]}set y(t){this[1]=zc(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let r=0;r<this.ELEMENTS;++r)t+=this[r]*this[r];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let r=0;for(let n=0;n<this.ELEMENTS;++n){const i=this[n]-t[n];r+=i*i}return zc(r)}dot(t){let r=0;for(let n=0;n<this.ELEMENTS;++n)r+=this[n]*t[n];return zc(r)}normalize(){const t=this.magnitude();if(t!==0)for(let r=0;r<this.ELEMENTS;++r)this[r]/=t;return this.check()}multiply(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]*=r[n];return this.check()}divide(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]/=r[n];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return mB(t>=0&&t<this.ELEMENTS,"index is out of range"),zc(this[t])}setComponent(t,r){return mB(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=r,this.check()}addVectors(t,r){return this.copy(t).add(r)}subVectors(t,r){return this.copy(t).subtract(r)}multiplyVectors(t,r){return this.copy(t).multiply(r)}addScaledVector(t,r){return this.add(new this.constructor(t).multiplyScalar(r))}}const kw=1e-6;let A_=typeof Float32Array<"u"?Float32Array:Array;function z6e(){const e=new A_(2);return A_!=Float32Array&&(e[0]=0,e[1]=0),e}function yB(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function $6e(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Xq(e,t,r,n){const i=t[0],o=t[1];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e}function U6e(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}(function(){const e=z6e();return function(t,r,n,i,o,l){let s,f;for(r||(r=2),n||(n=0),i?f=Math.min(i*r+n,t.length):f=t.length,s=n;s<f;s+=r)e[0]=t[s],e[1]=t[s+1],o(e,e,l),t[s]=e[0],t[s+1]=e[1];return t}})();function j6e(e,t,r){const n=t[0],i=t[1],o=r[3]*n+r[7]*i||1;return e[0]=(r[0]*n+r[4]*i)/o,e[1]=(r[1]*n+r[5]*i)/o,e}function Kq(e,t,r){const n=t[0],i=t[1],o=t[2],l=r[3]*n+r[7]*i+r[11]*o||1;return e[0]=(r[0]*n+r[4]*i+r[8]*o)/l,e[1]=(r[1]*n+r[5]*i+r[9]*o)/l,e[2]=(r[2]*n+r[6]*i+r[10]*o)/l,e}function V6e(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e}function H6e(){const e=new A_(3);return A_!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function q6e(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function W6e(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function X6e(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function K6e(e,t,r){const n=t[0],i=t[1],o=t[2],l=r[0],s=r[1],f=r[2];return e[0]=i*f-o*s,e[1]=o*l-n*f,e[2]=n*s-i*l,e}function Gq(e,t,r){const n=t[0],i=t[1],o=t[2];let l=r[3]*n+r[7]*i+r[11]*o+r[15];return l=l||1,e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/l,e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/l,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/l,e}function G6e(e,t,r){const n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e}function Y6e(e,t,r){const n=r[0],i=r[1],o=r[2],l=r[3],s=t[0],f=t[1],p=t[2];let v=i*p-o*f,x=o*s-n*p,S=n*f-i*s,A=i*S-o*x,k=o*v-n*S,R=n*x-i*v;const z=l*2;return v*=z,x*=z,S*=z,A*=2,k*=2,R*=2,e[0]=s+v+A,e[1]=f+x+k,e[2]=p+S+R,e}function Z6e(e,t,r,n){const i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function J6e(e,t,r,n){const i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function Q6e(e,t,r,n){const i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function eMe(e,t){const r=e[0],n=e[1],i=e[2],o=t[0],l=t[1],s=t[2],f=Math.sqrt((r*r+n*n+i*i)*(o*o+l*l+s*s)),p=f&&X6e(e,t)/f;return Math.acos(Math.min(Math.max(p,-1),1))}const tMe=q6e;(function(){const e=H6e();return function(t,r,n,i,o,l){let s,f;for(r||(r=3),n||(n=0),i?f=Math.min(i*r+n,t.length):f=t.length,s=n;s<f;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,l),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}})();const OT=[0,0,0];let zx;class bf extends B6e{static get ZERO(){return zx||(zx=new bf(0,0,0),Object.freeze(zx)),zx}constructor(t=0,r=0,n=0){super(-0,-0,-0),arguments.length===1&&S_(t)?this.copy(t):(Pu.debug&&(zc(t),zc(r),zc(n)),this[0]=t,this[1]=r,this[2]=n)}set(t,r,n){return this[0]=t,this[1]=r,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return Pu.debug&&(zc(t.x),zc(t.y),zc(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=zc(t)}angle(t){return eMe(this,t)}cross(t){return K6e(this,this,t),this.check()}rotateX({radians:t,origin:r=OT}){return Z6e(this,this,r,t),this.check()}rotateY({radians:t,origin:r=OT}){return J6e(this,this,r,t),this.check()}rotateZ({radians:t,origin:r=OT}){return Q6e(this,this,r,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return Gq(this,this,t),this.check()}transformAsVector(t){return Kq(this,this,t),this.check()}transformByMatrix3(t){return G6e(this,this,t),this.check()}transformByMatrix2(t){return V6e(this,this,t),this.check()}transformByQuaternion(t){return Y6e(this,this,t),this.check()}}class rMe extends Wq{toString(){let t="[";if(Pu.printRowMajor){t+="row-major:";for(let r=0;r<this.RANK;++r)for(let n=0;n<this.RANK;++n)t+=` ${this[n*this.RANK+r]}`}else{t+="column-major:";for(let r=0;r<this.ELEMENTS;++r)t+=` ${this[r]}`}return t+="]",t}getElementIndex(t,r){return r*this.RANK+t}getElement(t,r){return this[r*this.RANK+t]}setElement(t,r,n){return this[r*this.RANK+t]=zc(n),this}getColumn(t,r=new Array(this.RANK).fill(-0)){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)r[i]=this[n+i];return r}setColumn(t,r){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)this[n+i]=r[i];return this}}function nMe(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function iMe(e,t){if(e===t){const r=t[1],n=t[2],i=t[3],o=t[6],l=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=l,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function _P(e,t){const r=t[0],n=t[1],i=t[2],o=t[3],l=t[4],s=t[5],f=t[6],p=t[7],v=t[8],x=t[9],S=t[10],A=t[11],k=t[12],R=t[13],z=t[14],N=t[15],B=r*s-n*l,U=r*f-i*l,K=r*p-o*l,ne=n*f-i*s,ee=n*p-o*s,Q=i*p-o*f,re=v*R-x*k,Se=v*z-S*k,J=v*N-A*k,G=x*z-S*R,se=x*N-A*R,ve=S*N-A*z;let ge=B*ve-U*se+K*G+ne*J-ee*Se+Q*re;return ge?(ge=1/ge,e[0]=(s*ve-f*se+p*G)*ge,e[1]=(i*se-n*ve-o*G)*ge,e[2]=(R*Q-z*ee+N*ne)*ge,e[3]=(S*ee-x*Q-A*ne)*ge,e[4]=(f*J-l*ve-p*Se)*ge,e[5]=(r*ve-i*J+o*Se)*ge,e[6]=(z*K-k*Q-N*U)*ge,e[7]=(v*Q-S*K+A*U)*ge,e[8]=(l*se-s*J+p*re)*ge,e[9]=(n*J-r*se-o*re)*ge,e[10]=(k*ee-R*K+N*B)*ge,e[11]=(x*K-v*ee-A*B)*ge,e[12]=(s*Se-l*G-f*re)*ge,e[13]=(r*G-n*Se+i*re)*ge,e[14]=(R*U-k*ne-z*B)*ge,e[15]=(v*ne-x*U+S*B)*ge,e):null}function oMe(e){const t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],l=e[5],s=e[6],f=e[7],p=e[8],v=e[9],x=e[10],S=e[11],A=e[12],k=e[13],R=e[14],z=e[15],N=t*l-r*o,B=t*s-n*o,U=r*s-n*l,K=p*k-v*A,ne=p*R-x*A,ee=v*R-x*k,Q=t*ee-r*ne+n*K,re=o*ee-l*ne+s*K,Se=p*U-v*B+x*N,J=A*U-k*B+R*N;return f*Q-i*re+z*Se-S*J}function Vg(e,t,r){const n=t[0],i=t[1],o=t[2],l=t[3],s=t[4],f=t[5],p=t[6],v=t[7],x=t[8],S=t[9],A=t[10],k=t[11],R=t[12],z=t[13],N=t[14],B=t[15];let U=r[0],K=r[1],ne=r[2],ee=r[3];return e[0]=U*n+K*s+ne*x+ee*R,e[1]=U*i+K*f+ne*S+ee*z,e[2]=U*o+K*p+ne*A+ee*N,e[3]=U*l+K*v+ne*k+ee*B,U=r[4],K=r[5],ne=r[6],ee=r[7],e[4]=U*n+K*s+ne*x+ee*R,e[5]=U*i+K*f+ne*S+ee*z,e[6]=U*o+K*p+ne*A+ee*N,e[7]=U*l+K*v+ne*k+ee*B,U=r[8],K=r[9],ne=r[10],ee=r[11],e[8]=U*n+K*s+ne*x+ee*R,e[9]=U*i+K*f+ne*S+ee*z,e[10]=U*o+K*p+ne*A+ee*N,e[11]=U*l+K*v+ne*k+ee*B,U=r[12],K=r[13],ne=r[14],ee=r[15],e[12]=U*n+K*s+ne*x+ee*R,e[13]=U*i+K*f+ne*S+ee*z,e[14]=U*o+K*p+ne*A+ee*N,e[15]=U*l+K*v+ne*k+ee*B,e}function tS(e,t,r){const n=r[0],i=r[1],o=r[2];let l,s,f,p,v,x,S,A,k,R,z,N;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*o+t[12],e[13]=t[1]*n+t[5]*i+t[9]*o+t[13],e[14]=t[2]*n+t[6]*i+t[10]*o+t[14],e[15]=t[3]*n+t[7]*i+t[11]*o+t[15]):(l=t[0],s=t[1],f=t[2],p=t[3],v=t[4],x=t[5],S=t[6],A=t[7],k=t[8],R=t[9],z=t[10],N=t[11],e[0]=l,e[1]=s,e[2]=f,e[3]=p,e[4]=v,e[5]=x,e[6]=S,e[7]=A,e[8]=k,e[9]=R,e[10]=z,e[11]=N,e[12]=l*n+v*i+k*o+t[12],e[13]=s*n+x*i+R*o+t[13],e[14]=f*n+S*i+z*o+t[14],e[15]=p*n+A*i+N*o+t[15]),e}function m6(e,t,r){const n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function sMe(e,t,r,n){let i=n[0],o=n[1],l=n[2],s=Math.sqrt(i*i+o*o+l*l),f,p,v,x,S,A,k,R,z,N,B,U,K,ne,ee,Q,re,Se,J,G,se,ve,ge,je;return s<kw?null:(s=1/s,i*=s,o*=s,l*=s,p=Math.sin(r),f=Math.cos(r),v=1-f,x=t[0],S=t[1],A=t[2],k=t[3],R=t[4],z=t[5],N=t[6],B=t[7],U=t[8],K=t[9],ne=t[10],ee=t[11],Q=i*i*v+f,re=o*i*v+l*p,Se=l*i*v-o*p,J=i*o*v-l*p,G=o*o*v+f,se=l*o*v+i*p,ve=i*l*v+o*p,ge=o*l*v-i*p,je=l*l*v+f,e[0]=x*Q+R*re+U*Se,e[1]=S*Q+z*re+K*Se,e[2]=A*Q+N*re+ne*Se,e[3]=k*Q+B*re+ee*Se,e[4]=x*J+R*G+U*se,e[5]=S*J+z*G+K*se,e[6]=A*J+N*G+ne*se,e[7]=k*J+B*G+ee*se,e[8]=x*ve+R*ge+U*je,e[9]=S*ve+z*ge+K*je,e[10]=A*ve+N*ge+ne*je,e[11]=k*ve+B*ge+ee*je,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Yq(e,t,r){const n=Math.sin(r),i=Math.cos(r),o=t[4],l=t[5],s=t[6],f=t[7],p=t[8],v=t[9],x=t[10],S=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+p*n,e[5]=l*i+v*n,e[6]=s*i+x*n,e[7]=f*i+S*n,e[8]=p*i-o*n,e[9]=v*i-l*n,e[10]=x*i-s*n,e[11]=S*i-f*n,e}function aMe(e,t,r){const n=Math.sin(r),i=Math.cos(r),o=t[0],l=t[1],s=t[2],f=t[3],p=t[8],v=t[9],x=t[10],S=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-p*n,e[1]=l*i-v*n,e[2]=s*i-x*n,e[3]=f*i-S*n,e[8]=o*n+p*i,e[9]=l*n+v*i,e[10]=s*n+x*i,e[11]=f*n+S*i,e}function Zq(e,t,r){const n=Math.sin(r),i=Math.cos(r),o=t[0],l=t[1],s=t[2],f=t[3],p=t[4],v=t[5],x=t[6],S=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+p*n,e[1]=l*i+v*n,e[2]=s*i+x*n,e[3]=f*i+S*n,e[4]=p*i-o*n,e[5]=v*i-l*n,e[6]=x*i-s*n,e[7]=S*i-f*n,e}function lMe(e,t){const r=t[0],n=t[1],i=t[2],o=t[3],l=r+r,s=n+n,f=i+i,p=r*l,v=n*l,x=n*s,S=i*l,A=i*s,k=i*f,R=o*l,z=o*s,N=o*f;return e[0]=1-x-k,e[1]=v+N,e[2]=S-z,e[3]=0,e[4]=v-N,e[5]=1-p-k,e[6]=A+R,e[7]=0,e[8]=S+z,e[9]=A-R,e[10]=1-p-x,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function cMe(e,t,r,n,i,o,l){const s=1/(r-t),f=1/(i-n),p=1/(o-l);return e[0]=o*2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o*2*f,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*f,e[10]=(l+o)*p,e[11]=-1,e[12]=0,e[13]=0,e[14]=l*o*2*p,e[15]=0,e}function uMe(e,t,r,n,i){const o=1/Math.tan(t/2);if(e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0){const l=1/(n-i);e[10]=(i+n)*l,e[14]=2*i*n*l}else e[10]=-1,e[14]=-2*n;return e}const hMe=uMe;function fMe(e,t,r,n,i,o,l){const s=1/(t-r),f=1/(n-i),p=1/(o-l);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*f,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*p,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*f,e[14]=(l+o)*p,e[15]=1,e}const dMe=fMe;function pMe(e,t,r,n){let i,o,l,s,f,p,v,x,S,A;const k=t[0],R=t[1],z=t[2],N=n[0],B=n[1],U=n[2],K=r[0],ne=r[1],ee=r[2];return Math.abs(k-K)<kw&&Math.abs(R-ne)<kw&&Math.abs(z-ee)<kw?nMe(e):(x=k-K,S=R-ne,A=z-ee,i=1/Math.sqrt(x*x+S*S+A*A),x*=i,S*=i,A*=i,o=B*A-U*S,l=U*x-N*A,s=N*S-B*x,i=Math.sqrt(o*o+l*l+s*s),i?(i=1/i,o*=i,l*=i,s*=i):(o=0,l=0,s=0),f=S*s-A*l,p=A*o-x*s,v=x*l-S*o,i=Math.sqrt(f*f+p*p+v*v),i?(i=1/i,f*=i,p*=i,v*=i):(f=0,p=0,v=0),e[0]=o,e[1]=f,e[2]=x,e[3]=0,e[4]=l,e[5]=p,e[6]=S,e[7]=0,e[8]=s,e[9]=v,e[10]=A,e[11]=0,e[12]=-(o*k+l*R+s*z),e[13]=-(f*k+p*R+v*z),e[14]=-(x*k+S*R+A*z),e[15]=1,e)}function gMe(){const e=new A_(4);return A_!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function mMe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function bb(e,t,r){const n=t[0],i=t[1],o=t[2],l=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*l,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*l,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*l,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*l,e}(function(){const e=gMe();return function(t,r,n,i,o,l){let s,f;for(r||(r=4),n||(n=0),i?f=Math.min(i*r+n,t.length):f=t.length,s=n;s<f;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,l),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}})();var vP;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"})(vP||(vP={}));const yMe=45*Math.PI/180,_Me=1,NT=.1,DT=500,vMe=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class xf extends rMe{static get IDENTITY(){return xMe()}static get ZERO(){return bMe()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return vP}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,r,n,i,o,l,s,f,p,v,x,S,A,k,R,z){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=l,this[6]=s,this[7]=f,this[8]=p,this[9]=v,this[10]=x,this[11]=S,this[12]=A,this[13]=k,this[14]=R,this[15]=z,this.check()}setRowMajor(t,r,n,i,o,l,s,f,p,v,x,S,A,k,R,z){return this[0]=t,this[1]=o,this[2]=p,this[3]=A,this[4]=r,this[5]=l,this[6]=v,this[7]=k,this[8]=n,this[9]=s,this[10]=x,this[11]=R,this[12]=i,this[13]=f,this[14]=S,this[15]=z,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(vMe)}fromObject(t){return this.check()}fromQuaternion(t){return lMe(this,t),this.check()}frustum(t){const{left:r,right:n,bottom:i,top:o,near:l=NT,far:s=DT}=t;return s===1/0?wMe(this,r,n,i,o,l):cMe(this,r,n,i,o,l,s),this.check()}lookAt(t){const{eye:r,center:n=[0,0,0],up:i=[0,1,0]}=t;return pMe(this,r,n,i),this.check()}ortho(t){const{left:r,right:n,bottom:i,top:o,near:l=NT,far:s=DT}=t;return dMe(this,r,n,i,o,l,s),this.check()}orthographic(t){const{fovy:r=yMe,aspect:n=_Me,focalDistance:i=1,near:o=NT,far:l=DT}=t;_B(r);const s=r/2,f=i*Math.tan(s),p=f*n;return this.ortho({left:-p,right:p,bottom:-f,top:f,near:o,far:l})}perspective(t){const{fovy:r=45*Math.PI/180,aspect:n=1,near:i=.1,far:o=500}=t;return _B(r),hMe(this,r,n,i,o),this.check()}determinant(){return oMe(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],l=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*l,t[3]=0,t[4]=this[4]*i,t[5]=this[5]*o,t[6]=this[6]*l,t[7]=0,t[8]=this[8]*i,t[9]=this[9]*o,t[10]=this[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],l=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*l,t[3]=this[4]*i,t[4]=this[5]*o,t[5]=this[6]*l,t[6]=this[8]*i,t[7]=this[9]*o,t[8]=this[10]*l,t}transpose(){return iMe(this,this),this.check()}invert(){return _P(this,this),this.check()}multiplyLeft(t){return Vg(this,t,this),this.check()}multiplyRight(t){return Vg(this,this,t),this.check()}rotateX(t){return Yq(this,this,t),this.check()}rotateY(t){return aMe(this,this,t),this.check()}rotateZ(t){return Zq(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,r){return sMe(this,this,t,r),this.check()}scale(t){return m6(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return tS(this,this,t),this.check()}transform(t,r){return t.length===4?(r=bb(r||[-0,-0,-0,-0],t,this),MT(r,4),r):this.transformAsPoint(t,r)}transformAsPoint(t,r){const{length:n}=t;let i;switch(n){case 2:i=U6e(r||[-0,-0],t,this);break;case 3:i=Gq(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return MT(i,t.length),i}transformAsVector(t,r){let n;switch(t.length){case 2:n=j6e(r||[-0,-0],t,this);break;case 3:n=Kq(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return MT(n,t.length),n}transformPoint(t,r){return this.transformAsPoint(t,r)}transformVector(t,r){return this.transformAsPoint(t,r)}transformDirection(t,r){return this.transformAsVector(t,r)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,r,n){return this.identity().translate([t,r,n])}}let $x,Ux;function bMe(){return $x||($x=new xf([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze($x)),$x}function xMe(){return Ux||(Ux=new xf,Object.freeze(Ux)),Ux}function _B(e){if(e>Math.PI*2)throw Error("expected radians")}function wMe(e,t,r,n,i,o){const l=2*o/(r-t),s=2*o/(i-n),f=(r+t)/(r-t),p=(i+n)/(i-n),v=-1,x=-1,S=-2*o;return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=f,e[9]=p,e[10]=v,e[11]=x,e[12]=0,e[13]=0,e[14]=S,e[15]=0,e}const vB=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))
struct AmbientLight {
vec3 color;
};
struct PointLight {
vec3 color;
vec3 position;
vec3 attenuation;
};
struct DirectionalLight {
vec3 color;
vec3 direction;
};
uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;
uniform bool lighting_uEnabled;
float getPointLightAttenuation(PointLight pointLight, float distance) {
return pointLight.attenuation.x
+ pointLight.attenuation.y * distance
+ pointLight.attenuation.z * distance * distance;
}
#endif
`,SMe={lightSources:{}};function LT(e={}){const{color:t=[0,0,0],intensity:r=1}=e;return t.map(n=>n*r/255)}function AMe({ambientLight:e,pointLights:t=[],directionalLights:r=[]}){const n={};return e?n["lighting_uAmbientLight.color"]=LT(e):n["lighting_uAmbientLight.color"]=[0,0,0],t.forEach((i,o)=>{n[`lighting_uPointLight[${o}].color`]=LT(i),n[`lighting_uPointLight[${o}].position`]=i.position,n[`lighting_uPointLight[${o}].attenuation`]=i.attenuation||[1,0,0]}),n.lighting_uPointLightCount=t.length,r.forEach((i,o)=>{n[`lighting_uDirectionalLight[${o}].color`]=LT(i),n[`lighting_uDirectionalLight[${o}].direction`]=i.direction}),n.lighting_uDirectionalLightCount=r.length,n}function Jq(e=SMe){var t,r;if("lightSources"in e){const{ambientLight:n,pointLights:i,directionalLights:o}=e.lightSources||{};return n||i&&i.length>0||o&&o.length>0?Object.assign({},AMe({ambientLight:n,pointLights:i,directionalLights:o}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const n={pointLights:[],directionalLights:[]};for(const i of e.lights||[])switch(i.type){case"ambient":n.ambientLight=i;break;case"directional":(t=n.directionalLights)==null||t.push(i);break;case"point":(r=n.pointLights)==null||r.push(i);break}return Jq({lightSources:n})}return{}}const EMe={name:"lights",vs:vB,fs:vB,getUniforms:Jq,defines:{MAX_LIGHTS:3}},TMe=`uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;
vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
vec3 halfway_direction = normalize(light_direction + view_direction);
float lambertian = dot(light_direction, normal_worldspace);
float specular = 0.0;
if (lambertian > 0.0) {
float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
specular = pow(specular_angle, lighting_uShininess);
}
lambertian = max(lambertian, 0.0);
return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}
vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
vec3 lightColor = surfaceColor;
if (lighting_uEnabled) {
vec3 view_direction = normalize(cameraPosition - position_worldspace);
lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;
for (int i = 0; i < MAX_LIGHTS; i++) {
if (i >= lighting_uPointLightCount) {
break;
}
PointLight pointLight = lighting_uPointLight[i];
vec3 light_position_worldspace = pointLight.position;
vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
}
for (int i = 0; i < MAX_LIGHTS; i++) {
if (i >= lighting_uDirectionalLightCount) {
break;
}
DirectionalLight directionalLight = lighting_uDirectionalLight[i];
lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
}
}
return lightColor;
}
vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
vec3 lightColor = vec3(0, 0, 0);
vec3 surfaceColor = vec3(0, 0, 0);
if (lighting_uEnabled) {
vec3 view_direction = normalize(cameraPosition - position_worldspace);
for (int i = 0; i < MAX_LIGHTS; i++) {
if (i >= lighting_uPointLightCount) {
break;
}
PointLight pointLight = lighting_uPointLight[i];
vec3 light_position_worldspace = pointLight.position;
vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
}
for (int i = 0; i < MAX_LIGHTS; i++) {
if (i >= lighting_uDirectionalLightCount) {
break;
}
DirectionalLight directionalLight = lighting_uDirectionalLight[i];
lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
}
}
return lightColor;
}
`,CMe={};function PMe(e){const{ambient:t=.35,diffuse:r=.6,shininess:n=32,specularColor:i=[30,30,30]}=e;return{lighting_uAmbient:t,lighting_uDiffuse:r,lighting_uShininess:n,lighting_uSpecularColor:i.map(o=>o/255)}}function IMe(e=CMe){if(!("material"in e))return{};const{material:t}=e;return t?PMe(t):{lighting_uEnabled:!1}}const RMe={name:"gouraud-lighting",dependencies:[EMe],vs:TMe,defines:{LIGHTING_VERTEX:1},getUniforms:IMe},Qq="#define SMOOTH_EDGE_RADIUS 0.5",kMe=`
${Qq}

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`,MMe=`
${Qq}

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,OMe={name:"geometry",vs:kMe,fs:MMe},zi={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(zi,"IDENTITY",{get:()=>(oo.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const cf={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},bP={common:0,meters:1,pixels:2},xP={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},NMe=Object.keys(zi).map(e=>`const int COORDINATE_SYSTEM_${e} = ${zi[e]};`).join(""),DMe=Object.keys(cf).map(e=>`const int PROJECTION_MODE_${e} = ${cf[e]};`).join(""),LMe=Object.keys(bP).map(e=>`const int UNIT_${e.toUpperCase()} = ${bP[e]};`).join(""),FMe=`${NMe}
${DMe}
${LMe}
uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
float y = clamp(lat, -89.9, 89.9);
return 1.0 / cos(radians(y));
}
float project_size() {
if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
project_uPseudoMeters == false) {
if (geometry.position.w == 0.0) {
return project_size_at_latitude(geometry.worldPosition.y);
}
float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
float y2 = y * y;
float y4 = y2 * y2;
float y6 = y4 * y2;
return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
}
return 1.0;
}
float project_size_at_latitude(float meters, float lat) {
return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
return meters * project_uCommonUnitsPerMeter.z * project_size();
}
vec2 project_size(vec2 meters) {
return meters * project_uCommonUnitsPerMeter.xy * project_size();
}
vec3 project_size(vec3 meters) {
return meters * project_uCommonUnitsPerMeter * project_size();
}
vec4 project_size(vec4 meters) {
return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
vec3 uz = normalize(up);
vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
vec3 uy = cross(uz, ux);
return mat3(ux, uy, uz);
}
bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
transform = project_get_orientation_matrix(commonPosition);
return true;
}
return false;
}
vec3 project_normal(vec3 vector) {
vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
mat3 rotation;
if (project_needs_rotation(geometry.position.xyz, rotation)) {
n = rotation * n;
}
return n;
}
vec4 project_offset_(vec4 offset) {
float dy = offset.y;
vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
float x = lnglat.x;
if (project_uWrapLongitude) {
x = mod(x + 180., 360.0) - 180.;
}
float y = clamp(lnglat.y, -89.9, 89.9);
return vec2(
radians(x) + PI,
PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
) * WORLD_SCALE;
}
vec3 project_globe_(vec3 lnglatz) {
float lambda = radians(lnglatz.x);
float phi = radians(lnglatz.y);
float cosPhi = cos(phi);
float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;
return vec3(
sin(lambda) * cosPhi,
-cos(lambda) * cosPhi,
sin(phi)
) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
vec4 position_world = project_uModelMatrix * position;
if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_mercator_(position_world.xy),
project_size_at_latitude(position_world.z, position_world.y),
position_world.w
);
}
if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
position_world.xyz += project_uCoordinateOrigin;
}
}
if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_globe_(position_world.xyz),
position_world.w
);
}
}
if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
return vec4(
project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
project_size(position_world.z),
position_world.w
);
}
}
}
if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
(project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
(project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
position_world.xyz -= project_uCoordinateOrigin;
}
return project_offset_(position_world) + project_offset_(project_uModelMatrix * vec4(position64Low, 0.0));
}
vec4 project_position(vec4 position) {
return project_position(position, ZERO_64_LOW);
}
vec3 project_position(vec3 position, vec3 position64Low) {
vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
return projected_position.xyz;
}
vec3 project_position(vec3 position) {
vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
return projected_position.xyz;
}
vec2 project_position(vec2 position) {
vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
return projected_position.xy;
}
vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
return offset * project_uFocalDistance;
}
float project_size_to_pixel(float meters) {
return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
if (unit == UNIT_METERS) return project_size_to_pixel(size);
if (unit == UNIT_COMMON) return size * project_uScale;
return size;
}
float project_pixel_size(float pixels) {
return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
return pixels / project_uScale;
}
`;function BMe(e,t){if(e===t)return!0;if(Array.isArray(e)){const r=e.length;if(!t||t.length!==r)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}return!1}function xb(e){let t={},r;return n=>{for(const i in n)if(!BMe(n[i],t[i])){r=e(n),t=n;break}return r}}const bB=[0,0,0,0],zMe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],eW=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],$Me=[0,0,0],tW=[0,0,0],UMe=xb(HMe);function rW(e,t,r=tW){r.length<3&&(r=[r[0],r[1],0]);let n=r,i,o=!0;switch(t===zi.LNGLAT_OFFSETS||t===zi.METER_OFFSETS?i=r:i=e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case cf.WEB_MERCATOR:(t===zi.LNGLAT||t===zi.CARTESIAN)&&(i=[0,0,0],o=!1);break;case cf.WEB_MERCATOR_AUTO_OFFSET:t===zi.LNGLAT?n=i:t===zi.CARTESIAN&&(n=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],i=e.unprojectPosition(n),n[0]-=r[0],n[1]-=r[1],n[2]-=r[2]);break;case cf.IDENTITY:n=e.position.map(Math.fround),n[2]=n[2]||0;break;case cf.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:n,offsetMode:o}}function jMe(e,t,r){const{viewMatrixUncentered:n,projectionMatrix:i}=e;let{viewMatrix:o,viewProjectionMatrix:l}=e,s=bB,f=bB,p=e.cameraPosition;const{geospatialOrigin:v,shaderCoordinateOrigin:x,offsetMode:S}=rW(e,t,r);return S&&(f=e.projectPosition(v||x),p=[p[0]-f[0],p[1]-f[1],p[2]-f[2]],f[3]=1,s=bb([],f,l),o=n||o,l=Vg([],i,o),l=Vg([],l,zMe)),{viewMatrix:o,viewProjectionMatrix:l,projectionCenter:s,originCommon:f,cameraPosCommon:p,shaderCoordinateOrigin:x,geospatialOrigin:v}}function VMe({viewport:e,devicePixelRatio:t=1,modelMatrix:r=null,coordinateSystem:n=zi.DEFAULT,coordinateOrigin:i=tW,autoWrapLongitude:o=!1}){n===zi.DEFAULT&&(n=e.isGeospatial?zi.LNGLAT:zi.CARTESIAN);const l=UMe({viewport:e,devicePixelRatio:t,coordinateSystem:n,coordinateOrigin:i});return l.project_uWrapLongitude=o,l.project_uModelMatrix=r||eW,l}function HMe({viewport:e,devicePixelRatio:t,coordinateSystem:r,coordinateOrigin:n}){const{projectionCenter:i,viewProjectionMatrix:o,originCommon:l,cameraPosCommon:s,shaderCoordinateOrigin:f,geospatialOrigin:p}=jMe(e,r,n),v=e.getDistanceScales(),x=[e.width*t,e.height*t],S=bb([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,A={project_uCoordinateSystem:r,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:f,project_uCommonOrigin:l.slice(0,3),project_uCenter:i,project_uPseudoMeters:!!e._pseudoMeters,project_uViewportSize:x,project_uDevicePixelRatio:t,project_uFocalDistance:S,project_uCommonUnitsPerMeter:v.unitsPerMeter,project_uCommonUnitsPerWorldUnit:v.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:$Me,project_uScale:e.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:eW,project_uCameraPosition:s};if(p){const k=e.getDistanceScales(p);switch(r){case zi.METER_OFFSETS:A.project_uCommonUnitsPerWorldUnit=k.unitsPerMeter,A.project_uCommonUnitsPerWorldUnit2=k.unitsPerMeter2;break;case zi.LNGLAT:case zi.LNGLAT_OFFSETS:e._pseudoMeters||(A.project_uCommonUnitsPerMeter=k.unitsPerMeter),A.project_uCommonUnitsPerWorldUnit=k.unitsPerDegree,A.project_uCommonUnitsPerWorldUnit2=k.unitsPerDegree2;break;case zi.CARTESIAN:A.project_uCommonUnitsPerWorldUnit=[1,1,k.unitsPerMeter[2]],A.project_uCommonUnitsPerWorldUnit2=[0,0,k.unitsPerMeter2[2]];break}}return A}const qMe={};function WMe(e=qMe){return"viewport"in e?VMe(e):{}}const y6={name:"project",dependencies:[x6e,OMe],vs:FMe,getUniforms:WMe},XMe=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,KMe={name:"project32",dependencies:[y6],vs:XMe};function GMe(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function $y(e,t){const r=bb([],t,e);return mMe(r,r,1/r[3]),r}function xB(e,t){const r=e%t;return r<0?t+r:r}function wP(e,t,r){return e<t?t:e>r?r:e}function YMe(e){return Math.log(e)*Math.LOG2E}const _6=Math.log2||YMe;function md(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const sh=Math.PI,nW=sh/4,Iu=sh/180,SP=180/sh,E_=512,rS=4003e4,jx=85.051129,ZMe=1.5;function JMe(e){return _6(e)}function I2(e){const[t,r]=e;md(Number.isFinite(t)),md(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");const n=t*Iu,i=r*Iu,o=E_*(n+sh)/(2*sh),l=E_*(sh+Math.log(Math.tan(nW+i*.5)))/(2*sh);return[o,l]}function T_(e){const[t,r]=e,n=t/E_*(2*sh)-sh,i=2*(Math.atan(Math.exp(r/E_*(2*sh)-sh))-nW);return[n*SP,i*SP]}function QMe(e){const{latitude:t}=e;md(Number.isFinite(t));const r=Math.cos(t*Iu);return JMe(rS*r)-9}function Mw(e){const t=Math.cos(e*Iu);return E_/rS/t}function AP(e){const{latitude:t,longitude:r,highPrecision:n=!1}=e;md(Number.isFinite(t)&&Number.isFinite(r));const i=E_,o=Math.cos(t*Iu),l=i/360,s=l/o,f=i/rS/o,p={unitsPerMeter:[f,f,f],metersPerUnit:[1/f,1/f,1/f],unitsPerDegree:[l,s,f],degreesPerUnit:[1/l,1/s,1/f]};if(n){const v=Iu*Math.tan(t*Iu)/o,x=l*v/2,S=i/rS*v,A=S/s*f;p.unitsPerDegree2=[0,x,S],p.unitsPerMeter2=[A,0,A]}return p}function iW(e,t){const[r,n,i]=e,[o,l,s]=t,{unitsPerMeter:f,unitsPerMeter2:p}=AP({longitude:r,latitude:n,highPrecision:!0}),v=I2(e);v[0]+=o*(f[0]+p[0]*l),v[1]+=l*(f[1]+p[1]*l);const x=T_(v),S=(i||0)+(s||0);return Number.isFinite(i)||Number.isFinite(s)?[x[0],x[1],S]:x}function e8e(e){const{height:t,pitch:r,bearing:n,altitude:i,scale:o,center:l}=e,s=GMe();tS(s,s,[0,0,-i]),Yq(s,s,-r*Iu),Zq(s,s,n*Iu);const f=o/t;return m6(s,s,[f,f,f]),l&&tS(s,s,W6e([],l)),s}function t8e(e){const{width:t,height:r,altitude:n,pitch:i=0,offset:o,center:l,scale:s,nearZMultiplier:f=1,farZMultiplier:p=1}=e;let{fovy:v=nS(ZMe)}=e;n!==void 0&&(v=nS(n));const x=v*Iu,S=i*Iu,A=oW(v);let k=A;l&&(k+=l[2]*s/Math.cos(S)/r);const R=x*(.5+(o?o[1]:0)/r),z=Math.sin(R)*k/Math.sin(wP(Math.PI/2-S-R,.01,Math.PI-.01)),N=Math.sin(S)*z+k,B=k*10,U=Math.min(N*p,B);return{fov:x,aspect:t/r,focalDistance:A,near:f,far:U}}function nS(e){return 2*Math.atan(.5/e)*SP}function oW(e){return .5/Math.tan(.5*e*Iu)}function sW(e,t){const[r,n,i=0]=e;return md(Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(i)),$y(t,[r,n,i,1])}function v6(e,t,r=0){const[n,i,o]=e;if(md(Number.isFinite(n)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o))return $y(t,[n,i,o,1]);const l=$y(t,[n,i,0,1]),s=$y(t,[n,i,1,1]),f=l[2],p=s[2],v=f===p?0:((r||0)-f)/(p-f);return Xq([],l,s,v)}function r8e(e){const{width:t,height:r,bounds:n,minExtent:i=0,maxZoom:o=24,offset:l=[0,0]}=e,[[s,f],[p,v]]=n,x=n8e(e.padding),S=I2([s,wP(v,-jx,jx)]),A=I2([p,wP(f,-jx,jx)]),k=[Math.max(Math.abs(A[0]-S[0]),i),Math.max(Math.abs(A[1]-S[1]),i)],R=[t-x.left-x.right-Math.abs(l[0])*2,r-x.top-x.bottom-Math.abs(l[1])*2];md(R[0]>0&&R[1]>0);const z=R[0]/k[0],N=R[1]/k[1],B=(x.right-x.left)/2/z,U=(x.top-x.bottom)/2/N,K=[(A[0]+S[0])/2+B,(A[1]+S[1])/2+U],ne=T_(K),ee=Math.min(o,_6(Math.abs(Math.min(z,N))));return md(Number.isFinite(ee)),{longitude:ne[0],latitude:ne[1],zoom:ee}}function n8e(e=0){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:(md(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e)}const wB=Math.PI/180;function i8e(e,t=0){const{width:r,height:n,unproject:i}=e,o={targetZ:t},l=i([0,n],o),s=i([r,n],o);let f,p;const v=e.fovy?.5*e.fovy*wB:Math.atan(.5/e.altitude),x=(90-e.pitch)*wB;return v>x-.01?(f=SB(e,0,t),p=SB(e,r,t)):(f=i([0,0],o),p=i([r,0],o)),[l,s,p,f]}function SB(e,t,r){const{pixelUnprojectionMatrix:n}=e,i=$y(n,[t,0,1,1]),o=$y(n,[t,e.height,1,1]),s=(r*e.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2]),f=Xq([],i,o,s),p=T_(f);return p.push(r),p}const AB=512;function o8e(e){const{width:t,height:r,pitch:n=0}=e;let{longitude:i,latitude:o,zoom:l,bearing:s=0}=e;(i<-180||i>180)&&(i=xB(i+180,360)-180),(s<-180||s>180)&&(s=xB(s+180,360)-180);const f=_6(r/AB);if(l<=f)l=f,o=0;else{const p=r/2/Math.pow(2,l),v=T_([0,p])[1];if(o<v)o=v;else{const x=T_([0,AB-p])[1];o>x&&(o=x)}}return{width:t,height:r,longitude:i,latitude:o,zoom:l,pitch:n,bearing:s}}const s8e=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

out vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,a8e=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

in vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,l8e=xb(d8e),c8e=xb(p8e),u8e=[0,0,0,1],h8e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function f8e(e,t){const[r,n,i]=e,o=v6([r,n,i],t);return Number.isFinite(i)?o:[o[0],o[1],0]}function d8e({viewport:e,center:t}){return new xf(e.viewProjectionMatrix).invert().transform(t)}function p8e({viewport:e,shadowMatrices:t}){const r=[],n=e.pixelUnprojectionMatrix,i=e.isGeospatial?void 0:1,o=[[0,0,i],[e.width,0,i],[0,e.height,i],[e.width,e.height,i],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map(l=>f8e(l,n));for(const l of t){const s=l.clone().translate(new bf(e.center).negate()),f=o.map(v=>s.transform(v)),p=new xf().ortho({left:Math.min(...f.map(v=>v[0])),right:Math.max(...f.map(v=>v[0])),bottom:Math.min(...f.map(v=>v[1])),top:Math.max(...f.map(v=>v[1])),near:Math.min(...f.map(v=>-v[2])),far:Math.max(...f.map(v=>-v[2]))});r.push(p.multiplyRight(l))}return r}function g8e(e,t){const{shadowEnabled:r=!0}=e;if(!r||!e.shadowMatrices||!e.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1,shadow_uShadowMap0:e.dummyShadowMap,shadow_uShadowMap1:e.dummyShadowMap};const n={shadow_uDrawShadowMap:!!e.drawToShadowMap,shadow_uUseShadowMap:e.shadowMaps?e.shadowMaps.length>0:!1,shadow_uColor:e.shadowColor||u8e,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},i=l8e({viewport:e.viewport,center:t.project_uCenter}),o=[],l=c8e({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice();for(let s=0;s<e.shadowMatrices.length;s++){const f=l[s],p=f.clone().translate(new bf(e.viewport.center).negate());t.project_uCoordinateSystem===zi.LNGLAT&&t.project_uProjectionMode===cf.WEB_MERCATOR?(l[s]=p,o[s]=i):(l[s]=f.clone().multiplyRight(h8e),o[s]=p.transform(i))}for(let s=0;s<l.length;s++)n[`shadow_uViewProjectionMatrices[${s}]`]=l[s],n[`shadow_uProjectCenters[${s}]`]=o[s];for(let s=0;s<2;s++)n[`shadow_uShadowMap${s}`]=e.shadowMaps&&e.shadowMaps[s]||e.dummyShadowMap;return n}const EB={name:"shadow",dependencies:[y6],vs:s8e,fs:a8e,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(e={},t={})=>"viewport"in e&&(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0)?g8e(e,t):{}},m8e={...gB,defaultUniforms:{...gB.defaultUniforms,useFloatColors:!1},inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}}},y8e=[y6],_8e=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function v8e(){const e=q5.getDefaultShaderAssembler();for(const t of y8e)e.addDefaultModule(t);for(const t of _8e)e.addShaderHook(t);return e}const b8e=[255,255,255],x8e=1;let w8e=0;class S8e{constructor(t={}){this.type="ambient";const{color:r=b8e}=t,{intensity:n=x8e}=t;this.id=t.id||`ambient-${w8e++}`,this.color=r,this.intensity=n}}const A8e=[255,255,255],E8e=1,T8e=[0,0,-1];let C8e=0;class EP{constructor(t={}){this.type="directional";const{color:r=A8e}=t,{intensity:n=E8e}=t,{direction:i=T8e}=t,{_shadow:o=!1}=t;this.id=t.id||`directional-${C8e++}`,this.color=r,this.intensity=n,this.type="directional",this.direction=new bf(i).normalize().toArray(),this.shadow=o}getProjectedLight(t){return this}}class P8e{constructor(t,r={id:"pass"}){const{id:n}=r;this.id=n,this.device=t,this.props={...r}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}class b6 extends P8e{constructor(){super(...arguments),this._lastRenderIndex=-1}render(t){const[r,n]=this.device.canvasContext.getDrawingBufferSize(),i=t.clearCanvas??!0,o=t.clearColor??(i?[0,0,0,0]:!1),l=i?1:!1,s=i?0:!1,f=t.colorMask??15,p={viewport:[0,0,r,n]};t.colorMask&&(p.colorMask=f),t.scissorRect&&(p.scissorRect=t.scissorRect);const v=this.device.beginRenderPass({framebuffer:t.target,parameters:p,clearColor:o,clearDepth:l,clearStencil:s});try{return this._drawLayers(v,t)}finally{v.end()}}_drawLayers(t,r){const{target:n,moduleParameters:i,viewports:o,views:l,onViewportActive:s,clearStack:f=!0}=r;r.pass=r.pass||"unknown",f&&(this._lastRenderIndex=-1);const p=[];for(const v of o){const x=l&&l[v.id];s==null||s(v);const S=this._getDrawLayerParams(v,r),A=v.subViewports||[v];for(const k of A){const R=this._drawLayersInViewport(t,{target:n,moduleParameters:i,viewport:k,view:x,pass:r.pass,layers:r.layers},S);p.push(R)}}return p}_getDrawLayerParams(t,{layers:r,pass:n,isPicking:i=!1,layerFilter:o,cullRect:l,effects:s,moduleParameters:f},p=!1){var k;const v=[],x=aW(this._lastRenderIndex+1),S={layer:r[0],viewport:t,isPicking:i,renderPass:n,cullRect:l},A={};for(let R=0;R<r.length;R++){const z=r[R],N=this._shouldDrawLayer(z,S,o,A),B={shouldDrawLayer:N};N&&!p&&(B.layerRenderIndex=x(z,N),B.moduleParameters=this._getModuleParameters(z,s,n,f),B.layerParameters={...(k=z.context.deck)==null?void 0:k.props.parameters,...this.getLayerParameters(z,R,t)}),v[R]=B}return v}_drawLayersInViewport(t,{layers:r,moduleParameters:n,pass:i,target:o,viewport:l,view:s},f){const p=I8e(this.device,{moduleParameters:n,target:o,viewport:l});if(s&&s.props.clear){const x=s.props.clear===!0?{color:!0,depth:!0}:s.props.clear;this.device.withParametersWebGL({scissorTest:!0,scissor:p},()=>this.device.clearWebGL(x))}const v={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};t.setParameters({viewport:p});for(let x=0;x<r.length;x++){const S=r[x],{shouldDrawLayer:A,layerRenderIndex:k,moduleParameters:R,layerParameters:z}=f[x];if(A&&S.props.pickable&&v.pickableCount++,S.isComposite)v.compositeCount++;else if(A){v.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,k),R.viewport=l,S.context.renderPass=t;try{S._drawLayer({renderPass:t,moduleParameters:R,uniforms:{layerIndex:k},parameters:z})}catch(N){S.raiseError(N,`drawing ${S} to ${i}`)}}}return v}shouldDrawLayer(t){return!0}getModuleParameters(t,r){return null}getLayerParameters(t,r,n){return t.props.parameters}_shouldDrawLayer(t,r,n,i){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;r.layer=t;let l=t.parent;for(;l;){if(!l.props.visible||!l.filterSubLayer(r))return!1;r.layer=l,l=l.parent}if(n){const s=r.layer.id;if(s in i||(i[s]=n(r)),!i[s])return!1}return t.activateViewport(r.viewport),!0}_getModuleParameters(t,r,n,i){var s,f;const o=this.device.canvasContext.cssToDeviceRatio(),l=Object.assign(Object.create(((s=t.internalState)==null?void 0:s.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,picking:{isActive:0},devicePixelRatio:o});if(r)for(const p of r)Object.assign(l,(f=p.getModuleParameters)==null?void 0:f.call(p,t));return Object.assign(l,this.getModuleParameters(t,r),i)}}function aW(e=0,t={}){const r={},n=(i,o)=>{const l=i.props._offset,s=i.id,f=i.parent&&i.parent.id;let p;if(f&&!(f in t)&&n(i.parent,!1),f in r){const v=r[f]=r[f]||aW(t[f],t);p=v(i,o),r[s]=v}else Number.isFinite(l)?(p=l+(t[f]||0),r[s]=null):p=e;return o&&p>=e&&(e=p+1),t[s]=p,p};return n}function I8e(e,{moduleParameters:t,target:r,viewport:n}){const i=t&&t.devicePixelRatio||e.canvasContext.cssToDeviceRatio(),[,o]=e.canvasContext.getDrawingBufferSize(),l=r?r.height:o,s=n;return[s.x*i,l-(s.y+s.height)*i,s.width*i,s.height*i]}class R8e extends b6{constructor(t,r){super(t,r),this.shadowMap=t.createTexture({width:1,height:1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}}),this.depthBuffer=t.createTexture({format:"depth16unorm",width:1,height:1,mipmaps:!1,dataFormat:6402,type:5125}),this.fbo=t.createFramebuffer({id:"shadowmap",width:1,height:1,colorAttachments:[this.shadowMap],depthStencilAttachment:this.depthBuffer})}render(t){const r=this.fbo,n=this.device.canvasContext.cssToDeviceRatio(),i=t.viewports[0],o=i.width*n,l=i.height*n,s=[1,1,1,1];(o!==r.width||l!==r.height)&&r.resize({width:o,height:l}),super.render({...t,clearColor:s,target:r,pass:"shadow"})}getLayerParameters(t,r,n){return{...t.props.parameters,blend:!1,depthRange:[0,1],depthTest:!0}}shouldDrawLayer(t){return t.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.destroy(),this.fbo=null),this.shadowMap&&(this.shadowMap.destroy(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.destroy(),this.depthBuffer=null)}}const k8e={color:[255,255,255],intensity:1},TB=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],M8e=[0,0,0,200/255];class x6{constructor(t={}){this.id="lighting-effect",this.shadowColor=M8e,this.shadow=!1,this.ambientLight=null,this.directionalLights=[],this.pointLights=[],this.shadowPasses=[],this.shadowMaps=[],this.dummyShadowMap=null,this.setProps(t)}setup(t){this.context=t;const{device:r,deck:n}=t;this.shadow&&!this.dummyShadowMap&&(this._createShadowPasses(r),n._addDefaultShaderModule(EB),this.dummyShadowMap=r.createTexture({width:1,height:1}))}setProps(t){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const r in t){const n=t[r];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(r=>r.shadow),this.context&&this.setup(this.context),this.props=t}preRender({layers:t,layerFilter:r,viewports:n,onViewportActive:i,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices();for(let l=0;l<this.shadowPasses.length;l++)this.shadowPasses[l].render({layers:t,layerFilter:r,viewports:n,onViewportActive:i,views:o,moduleParameters:{shadowLightId:l,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(t){const r=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return r.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(n=>n.getProjectedLight({layer:t})),pointLights:this.pointLights.map(n=>n.getProjectedLight({layer:t}))},r}cleanup(t){for(const r of this.shadowPasses)r.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.destroy(),this.dummyShadowMap=null,t.deck._removeDefaultShaderModule(EB))}_calculateMatrices(){const t=[];for(const r of this.directionalLights){const n=new xf().lookAt({eye:new bf(r.direction).negate()});t.push(n)}return t}_createShadowPasses(t){for(let r=0;r<this.directionalLights.length;r++){const n=new R8e(t);this.shadowPasses[r]=n,this.shadowMaps[r]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:r,directionalLights:n}=this;!t&&r.length===0&&n.length===0&&(this.ambientLight=new S8e(k8e),this.directionalLights.push(new EP(TB[0]),new EP(TB[1])))}}class O8e{constructor(t={}){this._pool=[],this.opts={overAlloc:2,poolSize:100},this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,r,{size:n=1,type:i,padding:o=0,copy:l=!1,initialize:s=!1,maxCount:f}){const p=i||t&&t.constructor||Float32Array,v=r*n+o;if(ArrayBuffer.isView(t)){if(v<=t.length)return t;if(v*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new p(t.buffer,0,v)}let x=1/0;f&&(x=f*n+o);const S=this._allocate(p,v,s,x);return t&&l?S.set(t):s||S.fill(0,0,4),this._release(t),S}release(t){this._release(t)}_allocate(t,r,n,i){let o=Math.max(Math.ceil(r*this.opts.overAlloc),1);o>i&&(o=i);const l=this._pool,s=t.BYTES_PER_ELEMENT*o,f=l.findIndex(p=>p.byteLength>=s);if(f>=0){const p=new t(l.splice(f,1)[0],0,o);return n&&p.fill(0),p}return new t(o)}_release(t){if(!ArrayBuffer.isView(t))return;const r=this._pool,{buffer:n}=t,{byteLength:i}=n,o=r.findIndex(l=>l.byteLength>=i);o<0?r.push(n):(o>0||r.length<this.opts.poolSize)&&r.splice(o,0,n),r.length>this.opts.poolSize&&r.shift()}}const R2=new O8e;function fv(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function N8e(e){return[e[12],e[13],e[14]]}function D8e(e){return{left:x0(e[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),right:x0(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),bottom:x0(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),top:x0(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),near:x0(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),far:x0(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14])}}const CB=new bf;function x0(e,t,r,n){CB.set(e,t,r);const i=CB.len();return{distance:n/i,normal:new bf(-e/i,-t/i,-r/i)}}function L8e(e){return e-Math.fround(e)}let V1;function FT(e,t){const{size:r=1,startIndex:n=0}=t,i=t.endIndex!==void 0?t.endIndex:e.length,o=(i-n)/r;V1=R2.allocate(V1,o,{type:Float32Array,size:r*2});let l=n,s=0;for(;l<i;){for(let f=0;f<r;f++){const p=e[l++];V1[s+f]=p,V1[s+f+r]=L8e(p)}s+=r*2}return V1.subarray(0,o*r*2)}function F8e(e){let t=null,r=!1;for(const n of e)n&&(t?(r||(t=[[t[0][0],t[0][1]],[t[1][0],t[1][1]]],r=!0),t[0][0]=Math.min(t[0][0],n[0][0]),t[0][1]=Math.min(t[0][1],n[0][1]),t[1][0]=Math.max(t[1][0],n[1][0]),t[1][1]=Math.max(t[1][1],n[1][1])):t=n);return t}const B8e=Math.PI/180,z8e=fv(),PB=[0,0,0],$8e={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function U8e({width:e,height:t,orthographic:r,fovyRadians:n,focalDistance:i,padding:o,near:l,far:s}){const f=e/t,p=r?new xf().orthographic({fovy:n,aspect:f,focalDistance:i,near:l,far:s}):new xf().perspective({fovy:n,aspect:f,near:l,far:s});if(o){const{left:v=0,right:x=0,top:S=0,bottom:A=0}=o,k=mp((v+e-x)/2,0,e)-e/2,R=mp((S+t-A)/2,0,t)-t/2;p[8]-=k*2/e,p[9]+=R*2/t}return p}class wb{constructor(t={}){this._frustumPlanes={},this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.padding=t.padding,this.distanceScales=t.distanceScales||$8e,this.focalDistance=t.focalDistance||1,this.position=t.position||PB,this.modelMatrix=t.modelMatrix||null;const{longitude:r,latitude:n}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(r),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?cf.WEB_MERCATOR:cf.WEB_MERCATOR_AUTO_OFFSET:cf.IDENTITY}equals(t){return t instanceof wb?this===t?!0:t.width===this.width&&t.height===this.height&&t.scale===this.scale&&P2(t.projectionMatrix,this.projectionMatrix)&&P2(t.viewMatrix,this.viewMatrix):!1}project(t,{topLeft:r=!0}={}){const n=this.projectPosition(t),i=sW(n,this.pixelProjectionMatrix),[o,l]=i,s=r?l:this.height-l;return t.length===2?[o,s]:[o,s,i[2]]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,l]=t,s=r?o:this.height-o,f=n&&n*this.distanceScales.unitsPerMeter[2],p=v6([i,s,l],this.pixelUnprojectionMatrix,f),[v,x,S]=this.unprojectPosition(p);return Number.isFinite(l)?[v,x,S]:Number.isFinite(n)?[v,x,n]:[v,x]}projectPosition(t){const[r,n]=this.projectFlat(t),i=(t[2]||0)*this.distanceScales.unitsPerMeter[2];return[r,n,i]}unprojectPosition(t){const[r,n]=this.unprojectFlat(t),i=(t[2]||0)*this.distanceScales.metersPerUnit[2];return[r,n,i]}projectFlat(t){if(this.isGeospatial){const r=I2(t);return r[1]=mp(r[1],-318,830),r}return t}unprojectFlat(t){return this.isGeospatial?T_(t):t}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,0],r),i=this.unproject([this.width,0],r),o=this.unproject([0,this.height],r),l=this.unproject([this.width,this.height],r);return[Math.min(n[0],i[0],o[0],l[0]),Math.min(n[1],i[1],o[1],l[1]),Math.max(n[0],i[0],o[0],l[0]),Math.max(n[1],i[1],o[1],l[1])]}getDistanceScales(t){return t?AP({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:r,width:n=1,height:i=1}){return t<this.x+this.width&&this.x<t+n&&r<this.y+this.height&&this.y<r+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,D8e(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(t,r){return null}_initProps(t){const r=t.longitude,n=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=QMe({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||AP({latitude:n,longitude:r}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:o,modelMatrix:l}=t;let s=PB;if(o&&(s=l?new xf(l).transformAsVector(o,[]):o),this.isGeospatial){const f=this.projectPosition([r,n,0]);this.center=new bf(s).scale(this.distanceScales.unitsPerMeter).add(f)}else this.center=this.projectPosition(s)}_initMatrices(t){const{viewMatrix:r=z8e,projectionMatrix:n=null,orthographic:i=!1,fovyRadians:o,fovy:l=75,near:s=.1,far:f=1e3,padding:p=null,focalDistance:v=1}=t;this.viewMatrixUncentered=r,this.viewMatrix=new xf().multiplyRight(r).translate(new bf(this.center).negate()),this.projectionMatrix=n||U8e({width:this.width,height:this.height,orthographic:i,fovyRadians:o||l*B8e,focalDistance:v,padding:p,near:s,far:f});const x=fv();Vg(x,x,this.projectionMatrix),Vg(x,x,this.viewMatrix),this.viewProjectionMatrix=x,this.viewMatrixInverse=_P([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=N8e(this.viewMatrixInverse);const S=fv(),A=fv();m6(S,S,[this.width/2,-this.height/2,1]),tS(S,S,[1,-1,0]),Vg(A,S,this.viewProjectionMatrix),this.pixelProjectionMatrix=A,this.pixelUnprojectionMatrix=_P(fv(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||oo.warn("Pixel project matrix not invertible")()}}wb.displayName="Viewport";class om extends wb{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,pitch:o=0,bearing:l=0,nearZMultiplier:s=.1,farZMultiplier:f=1.01,nearZ:p,farZ:v,orthographic:x=!1,projectionMatrix:S,repeat:A=!1,worldOffset:k=0,position:R,padding:z,legacyMeterSizes:N=!1}=t;let{width:B,height:U,altitude:K=1.5}=t;const ne=Math.pow(2,i);B=B||1,U=U||1;let ee,Q=null;if(S)K=S[5]/2,ee=nS(K);else{t.fovy?(ee=t.fovy,K=oW(ee)):ee=nS(K);let Se;if(z){const{top:J=0,bottom:G=0}=z;Se=[0,mp((J+U-G)/2,0,U)-U/2]}Q=t8e({width:B,height:U,scale:ne,center:R&&[0,0,R[2]*Mw(r)],offset:Se,pitch:o,fovy:ee,nearZMultiplier:s,farZMultiplier:f}),Number.isFinite(p)&&(Q.near=p),Number.isFinite(v)&&(Q.far=v)}let re=e8e({height:U,pitch:o,bearing:l,scale:ne,altitude:K});k&&(re=new xf().translate([512*k,0,0]).multiplyLeft(re)),super({...t,width:B,height:U,viewMatrix:re,longitude:n,latitude:r,zoom:i,...Q,fovy:ee,focalDistance:K}),this.latitude=r,this.longitude=n,this.zoom=i,this.pitch=o,this.bearing=l,this.altitude=K,this.fovy=ee,this.orthographic=x,this._subViewports=A?[]:null,this._pseudoMeters=N,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),r=Math.floor((t[0]+180)/360),n=Math.ceil((t[2]-180)/360);for(let i=r;i<=n;i++){const o=i?new om({...this,worldOffset:i}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[r,n]=this.projectFlat(t),i=(t[2]||0)*Mw(t[1]);return[r,n,i]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[r,n]=this.unprojectFlat(t),i=(t[2]||0)/Mw(n);return[r,n,i]}addMetersToLngLat(t,r){return iW(t,r)}panByPosition(t,r){const n=v6(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=yB([],i,$6e([],n)),l=yB([],this.center,o),[s,f]=this.unprojectFlat(l);return{longitude:s,latitude:f}}getBounds(t={}){const r=i8e(this,t.z||0);return[Math.min(r[0][0],r[1][0],r[2][0],r[3][0]),Math.min(r[0][1],r[1][1],r[2][1],r[3][1]),Math.max(r[0][0],r[1][0],r[2][0],r[3][0]),Math.max(r[0][1],r[1][1],r[2][1],r[3][1])]}fitBounds(t,r={}){const{width:n,height:i}=this,{longitude:o,latitude:l,zoom:s}=r8e({width:n,height:i,bounds:t,...r});return new om({width:n,height:i,longitude:o,latitude:l,zoom:s})}}om.displayName="WebMercatorViewport";const IB=[0,0,0];function BT(e,t,r=!1){const n=t.projectPosition(e);if(r&&t instanceof om){const[i,o,l=0]=e,s=t.getDistanceScales([i,o]);n[2]=l*s.unitsPerMeter[2]}return n}function j8e(e){const{viewport:t,modelMatrix:r,coordinateOrigin:n}=e;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:l}=e;return i===zi.DEFAULT&&(i=t.isGeospatial?zi.LNGLAT:zi.CARTESIAN),o===void 0&&(o=i),l===void 0&&(l=n),{viewport:t,coordinateSystem:i,coordinateOrigin:n,modelMatrix:r,fromCoordinateSystem:o,fromCoordinateOrigin:l}}function lW(e,{viewport:t,modelMatrix:r,coordinateSystem:n,coordinateOrigin:i,offsetMode:o}){let[l,s,f=0]=e;switch(r&&([l,s,f]=bb([],[l,s,f,1],r)),n){case zi.LNGLAT:return BT([l,s,f],t,o);case zi.LNGLAT_OFFSETS:return BT([l+i[0],s+i[1],f+(i[2]||0)],t,o);case zi.METER_OFFSETS:return BT(iW(i,[l,s,f]),t,o);case zi.CARTESIAN:default:return t.isGeospatial?[l+i[0],s+i[1],f+i[2]]:t.projectPosition([l,s,f])}}function V8e(e,t){const{viewport:r,coordinateSystem:n,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:l,fromCoordinateOrigin:s}=j8e(t),{autoOffset:f=!0}=t,{geospatialOrigin:p=IB,shaderCoordinateOrigin:v=IB,offsetMode:x=!1}=f?rW(r,n,i):{},S=lW(e,{viewport:r,modelMatrix:o,coordinateSystem:l,coordinateOrigin:s,offsetMode:x});if(x){const A=r.projectPosition(p||v);tMe(S,S,A)}return S}let H8e=1,q8e=1;class cW{constructor(){Ce(this,"time",0);Ce(this,"channels",new Map);Ce(this,"animations",new Map);Ce(this,"playing",!1);Ce(this,"lastEngineTime",-1)}addChannel(t){const{delay:r=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:o=1}=t,l=H8e++,s={time:0,delay:r,duration:n,rate:i,repeat:o};return this._setChannelTime(s,this.time),this.channels.set(l,s),l}removeChannel(t){this.channels.delete(t);for(const[r,n]of this.animations)n.channel===t&&this.detachAnimation(r)}isFinished(t){const r=this.channels.get(t);return r===void 0?!1:this.time>=r.delay+r.duration*r.repeat}getTime(t){if(t===void 0)return this.time;const r=this.channels.get(t);return r===void 0?-1:r.time}setTime(t){this.time=Math.max(0,t);const r=this.channels.values();for(const i of r)this._setChannelTime(i,this.time);const n=this.animations.values();for(const i of n){const{animation:o,channel:l}=i;o.setTime(this.getTime(l))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,r){const n=q8e++;return this.animations.set(n,{animation:t,channel:r}),t.setTime(this.getTime(r)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,r){const n=r-t.delay,i=t.duration*t.repeat;n>=i?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}let W8e=0;const X8e={device:null,onAddHTML:()=>"",onInitialize:async()=>null,onRender:()=>{},onFinalize:()=>{},onError:e=>console.error(e),stats:By.stats.get(`animation-loop-${W8e++}`),useDevicePixels:!0,autoResizeViewport:!1,autoResizeDrawingBuffer:!1};class K8e{constructor(t){Ce(this,"device",null);Ce(this,"canvas",null);Ce(this,"props");Ce(this,"animationProps",null);Ce(this,"timeline",null);Ce(this,"stats");Ce(this,"cpuTime");Ce(this,"gpuTime");Ce(this,"frameRate");Ce(this,"display");Ce(this,"needsRedraw","initialized");Ce(this,"_initialized",!1);Ce(this,"_running",!1);Ce(this,"_animationFrameId",null);Ce(this,"_nextFramePromise",null);Ce(this,"_resolveNextFrame",null);Ce(this,"_cpuStartTime",0);if(this.props={...X8e,...t},t=this.props,!t.device)throw new Error("No device provided");const{useDevicePixels:r=!0}=this.props;this.stats=t.stats||new hA({id:"animation-loop-stats"}),this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this.setProps({autoResizeViewport:t.autoResizeViewport,autoResizeDrawingBuffer:t.autoResizeDrawingBuffer,useDevicePixels:r}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}destroy(){this.stop(),this._setDisplay(null)}delete(){this.destroy()}setNeedsRedraw(t){return this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.props.autoResizeViewport=t.autoResizeViewport||!1),"autoResizeDrawingBuffer"in t&&(this.props.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer||!1),"useDevicePixels"in t&&(this.props.useDevicePixels=t.useDevicePixels||!1),this}async start(){if(this._running)return this;this._running=!0;try{let t;return this._initialized||(this._initialized=!0,await this._initDevice(),this._initialize(),await this.props.onInitialize(this._getAnimationProps())),this._running?(t!==!1&&(this._cancelAnimationFrame(),this._requestAnimationFrame()),this):null}catch(t){const r=t instanceof Error?t:new Error("Unknown error");throw this.props.onError(r),r}}stop(){return this._running&&(this.animationProps&&this.props.onFinalize(this.animationProps),this._cancelAnimationFrame(),this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1),this}redraw(){var t;return(t=this.device)!=null&&t.isLost?this:(this._beginFrameTimers(),this._setupFrame(),this._updateAnimationProps(),this._renderFrame(this._getAnimationProps()),this._clearNeedsRedraw(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endFrameTimers(),this)}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(t=>{this._resolveNextFrame=t})),this._nextFramePromise}async toDataURL(){if(this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.canvas instanceof HTMLCanvasElement)return this.canvas.toDataURL();throw new Error("OffscreenCanvas")}_initialize(){this._startEventHandling(),this._initializeAnimationProps(),this._updateAnimationProps(),this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_setDisplay(t){this.display&&(this.display.destroy(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_requestAnimationFrame(){this._running&&(this._animationFrameId=Nke(this._animationFrame.bind(this)))}_cancelAnimationFrame(){this._animationFrameId!==null&&(Dke(this._animationFrameId),this._animationFrameId=null)}_animationFrame(){this._running&&(this.redraw(),this._requestAnimationFrame())}_renderFrame(t){if(this.display){this.display._renderFrame(t);return}this.props.onRender(this._getAnimationProps()),this.device.submit()}_clearNeedsRedraw(){this.needsRedraw=!1}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_initializeAnimationProps(){var t,r;if(!this.device)throw new Error("loop");this.animationProps={animationLoop:this,device:this.device,canvas:(r=(t=this.device)==null?void 0:t.canvasContext)==null?void 0:r.canvas,timeline:this.timeline,useDevicePixels:this.props.useDevicePixels,needsRedraw:!1,width:1,height:1,aspect:1,time:0,startTime:Date.now(),engineTime:0,tick:0,tock:0,_mousePosition:null}}_getAnimationProps(){if(!this.animationProps)throw new Error("animationProps");return this.animationProps}_updateAnimationProps(){if(!this.animationProps)return;const{width:t,height:r,aspect:n}=this._getSizeAndAspect();(t!==this.animationProps.width||r!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=r,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime}async _initDevice(){var t;if(this.device=await this.props.device,!this.device)throw new Error("No device provided");this.canvas=((t=this.device.canvasContext)==null?void 0:t.canvas)||null}_createInfoDiv(){if(this.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const r=document.createElement("div");r.style.position="absolute",r.style.left="10px",r.style.bottom="10px",r.style.width="300px",r.style.background="white",this.canvas instanceof HTMLCanvasElement&&t.appendChild(this.canvas),t.appendChild(r);const n=this.props.onAddHTML(r);n&&(r.innerHTML=n)}}_getSizeAndAspect(){var o,l,s,f;if(!this.device)return{width:1,height:1,aspect:1};const[t,r]=((l=(o=this.device)==null?void 0:o.canvasContext)==null?void 0:l.getPixelSize())||[1,1];let n=1;const i=(f=(s=this.device)==null?void 0:s.canvasContext)==null?void 0:f.canvas;return i&&i.clientHeight?n=i.clientWidth/i.clientHeight:t>0&&r>0&&(n=t/r),{width:t,height:r,aspect:n}}_resizeViewport(){this.props.autoResizeViewport&&this.device.gl&&this.device.gl.viewport(0,0,this.device.gl.drawingBufferWidth,this.device.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){var t,r;this.props.autoResizeDrawingBuffer&&((r=(t=this.device)==null?void 0:t.canvasContext)==null||r.resize({useDevicePixels:this.props.useDevicePixels}))}_beginFrameTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this.cpuTime.timeStart()}_endFrameTimers(){this.cpuTime.timeEnd()}_startEventHandling(){this.canvas&&(this.canvas.addEventListener("mousemove",this._onMousemove.bind(this)),this.canvas.addEventListener("mouseleave",this._onMouseleave.bind(this)))}_onMousemove(t){t instanceof MouseEvent&&(this._getAnimationProps()._mousePosition=[t.offsetX,t.offsetY])}_onMouseleave(t){this._getAnimationProps()._mousePosition=null}}class RB{constructor(t){Ce(this,"id");Ce(this,"userData",{});Ce(this,"topology");Ce(this,"bufferLayout",[]);Ce(this,"vertexCount");Ce(this,"indices");Ce(this,"attributes");this.id=t.id||Tm("geometry"),this.topology=t.topology,this.indices=t.indices||null,this.attributes=t.attributes,this.vertexCount=t.vertexCount,this.bufferLayout=t.bufferLayout||[],this.indices&&fo(this.indices.usage===Vo.INDEX)}destroy(){var t;(t=this.indices)==null||t.destroy();for(const r of Object.values(this.attributes))r.destroy()}getVertexCount(){return this.vertexCount}getAttributes(){return this.attributes}getIndexes(){return this.indices}_calculateVertexCount(t){return t.byteLength/12}}function G8e(e,t){if(t instanceof RB)return t;const r=Y8e(e,t),{attributes:n,bufferLayout:i}=Z8e(e,t);return new RB({topology:t.topology||"triangle-list",bufferLayout:i,vertexCount:t.vertexCount,indices:r,attributes:n})}function Y8e(e,t){if(!t.indices)return;const r=t.indices.value;return e.createBuffer({usage:Vo.INDEX,data:r})}function Z8e(e,t){const r=[],n={};for(const[o,l]of Object.entries(t.attributes)){let s=o;switch(o){case"POSITION":s="positions";break;case"NORMAL":s="normals";break;case"TEXCOORD_0":s="texCoords";break;case"COLOR_0":s="colors";break}n[s]=e.createBuffer({data:l.value,id:`${o}-buffer`});const{value:f,size:p,normalized:v}=l;r.push({name:s,format:Ike(f,p,v)})}const i=t._calculateVertexCount(t.attributes,t.indices);return{attributes:n,bufferLayout:r,vertexCount:i}}class J8e{constructor(t){Ce(this,"modules");Ce(this,"moduleUniforms");Ce(this,"moduleBindings");Ce(this,"moduleUniformsChanged");const r=dA(Object.values(t).filter(n=>n.dependencies));for(const n of r)t[n.name]=n;pr.log(1,"Creating ShaderInputs with modules",Object.keys(t))(),this.modules=t,this.moduleUniforms={},this.moduleBindings={};for(const[n,i]of Object.entries(t)){const o=n;this.moduleUniforms[o]=i.defaultUniforms||{},this.moduleBindings[o]={}}}destroy(){}setProps(t){var r;for(const n of Object.keys(t)){const i=n,o=t[i],l=this.modules[i];if(!l){pr.warn(`Module ${n} not found`)();continue}const s=this.moduleUniforms[i],f=this.moduleBindings[i],p=((r=l.getUniforms)==null?void 0:r.call(l,o,s))||o,{uniforms:v,bindings:x}=g6(p);this.moduleUniforms[i]={...s,...v},this.moduleBindings[i]={...f,...x}}}getModules(){return Object.values(this.modules)}getUniformValues(){return this.moduleUniforms}getBindings(){const t={};for(const r of Object.values(this.moduleBindings))Object.assign(t,r);return t}getDebugTable(){var r;const t={};for(const[n,i]of Object.entries(this.moduleUniforms))for(const[o,l]of Object.entries(i))t[`${n}.${o}`]={type:(r=this.modules[n].uniformTypes)==null?void 0:r[o],value:String(l)};return t}}const ES=class ES{constructor(t){Ce(this,"device");Ce(this,"_hashCounter",0);Ce(this,"_hashes",{});Ce(this,"_renderPipelineCache",{});Ce(this,"_computePipelineCache",{});this.device=t}static getDefaultPipelineFactory(t){return t._lumaData.defaultPipelineFactory=t._lumaData.defaultPipelineFactory||new ES(t),t._lumaData.defaultPipelineFactory}createRenderPipeline(t){const r={...x_.defaultProps,...t},n=this._hashRenderPipeline(r);if(!this._renderPipelineCache[n]){const i=this.device.createRenderPipeline({...r,id:r.id?`${r.id}-cached`:void 0});i.hash=n,this._renderPipelineCache[n]={pipeline:i,useCount:0}}return this._renderPipelineCache[n].useCount++,this._renderPipelineCache[n].pipeline}createComputePipeline(t){const r={...Z5.defaultProps,...t},n=this._hashComputePipeline(r);if(!this._computePipelineCache[n]){const i=this.device.createComputePipeline({...r,id:r.id?`${r.id}-cached`:void 0});i.hash=n,this._computePipelineCache[n]={pipeline:i,useCount:0}}return this._computePipelineCache[n].useCount++,this._computePipelineCache[n].pipeline}release(t){const r=t.hash,n=t instanceof Z5?this._computePipelineCache:this._renderPipelineCache;n[r].useCount--,n[r].useCount===0&&(n[r].pipeline.destroy(),delete n[r])}_hashComputePipeline(t){return`${this._getHash(t.shader.source)}`}_hashRenderPipeline(t){const r=this._getHash(t.vs.source),n=t.fs?this._getHash(t.fs.source):0,i="-",o=this._getHash(JSON.stringify(t.bufferLayout));switch(this.device.type){case"webgl":return`${r}/${n}V${i}BL${o}`;default:const l=this._getHash(JSON.stringify(t.parameters));return`${r}/${n}V${i}T${t.topology}P${l}BL${o}`}}_getHash(t){return this._hashes[t]===void 0&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}};Ce(ES,"defaultProps",{...x_.defaultProps});let TP=ES;const TS=class TS{constructor(t){Ce(this,"device");Ce(this,"_cache",{});this.device=t}static getDefaultShaderFactory(t){var r;return(r=t._lumaData).defaultShaderFactory||(r.defaultShaderFactory=new TS(t)),t._lumaData.defaultShaderFactory}createShader(t){const r=this._hashShader(t);let n=this._cache[r];if(!n){const i=this.device.createShader({...t,id:t.id?`${t.id}-cached`:void 0});this._cache[r]=n={shader:i,useCount:0}}return n.useCount++,n.shader}release(t){const r=this._hashShader(t),n=this._cache[r];n&&(n.useCount--,n.useCount===0&&(delete this._cache[r],n.shader.destroy()))}_hashShader(t){return`${t.stage}:${t.source}`}};Ce(TS,"defaultProps",{...K5.defaultProps});let CP=TS;function Q8e(e,t){var i;const r={},n="Values";if(e.attributes.length===0&&!((i=e.varyings)!=null&&i.length))return{"No attributes or varyings":{[n]:"N/A"}};for(const o of e.attributes)if(o){const l=`${o.location} ${o.name}: ${o.type}`;r[`in ${l}`]={[n]:o.stepMode||"vertex"}}for(const o of e.varyings||[]){const l=`${o.location} ${o.name}`;r[`out ${l}`]={[n]:JSON.stringify(o.accessor)}}return r}let ua=null,zT=null;function eOe(e,{id:t,minimap:r,opaque:n,top:i="0",left:o="0",rgbaScale:l=1}){ua||(ua=document.createElement("canvas"),ua.id=t,ua.title=t,ua.style.zIndex="100",ua.style.position="absolute",ua.style.top=i,ua.style.left=o,ua.style.border="blue 1px solid",ua.style.transform="scaleY(-1)",document.body.appendChild(ua),zT=ua.getContext("2d")),(ua.width!==e.width||ua.height!==e.height)&&(ua.width=e.width/2,ua.height=e.height/2,ua.style.width="400px",ua.style.height="400px");const s=e.device.readPixelsToArrayWebGL(e),f=zT.createImageData(e.width,e.height),p=0;for(let v=0;v<s.length;v+=4)f.data[p+v+0]=s[v+0]*l,f.data[p+v+1]=s[v+1]*l,f.data[p+v+2]=s[v+2]*l,f.data[p+v+3]=n?255:s[v+3]*l;zT.putImageData(f,0,0)}const w0=2,tOe=1e4,CS=class CS{constructor(t,r){Ce(this,"device");Ce(this,"id");Ce(this,"source");Ce(this,"vs");Ce(this,"fs");Ce(this,"pipelineFactory");Ce(this,"shaderFactory");Ce(this,"userData",{});Ce(this,"parameters");Ce(this,"topology");Ce(this,"bufferLayout");Ce(this,"isInstanced");Ce(this,"instanceCount",0);Ce(this,"vertexCount");Ce(this,"indexBuffer",null);Ce(this,"bufferAttributes",{});Ce(this,"constantAttributes",{});Ce(this,"bindings",{});Ce(this,"uniforms",{});Ce(this,"vertexArray");Ce(this,"transformFeedback",null);Ce(this,"pipeline");Ce(this,"shaderInputs");Ce(this,"_uniformStore");Ce(this,"_attributeInfos",{});Ce(this,"_gpuGeometry",null);Ce(this,"_getModuleUniforms");Ce(this,"props");Ce(this,"_pipelineNeedsUpdate","newly created");Ce(this,"_needsRedraw","initializing");Ce(this,"_destroyed",!1);Ce(this,"_lastDrawTimestamp",-1);Ce(this,"_lastLogTime",0);Ce(this,"_logOpen",!1);Ce(this,"_drawCount",0);var s,f,p,v;this.props={...CS.defaultProps,...r},r=this.props,this.id=r.id||Tm("model"),this.device=t,Object.assign(this.userData,r.userData);const n=Object.fromEntries(((s=this.props.modules)==null?void 0:s.map(x=>[x.name,x]))||[]);this.setShaderInputs(r.shaderInputs||new J8e(n));const i=rOe(t),o=(((f=this.props.modules)==null?void 0:f.length)>0?this.props.modules:(p=this.shaderInputs)==null?void 0:p.getModules())||[];if(this.device.type==="webgpu"&&this.props.source){(v=this.props).shaderLayout||(v.shaderLayout=_6e(this.props.source));const{source:x,getUniforms:S}=this.props.shaderAssembler.assembleShader({platformInfo:i,...this.props,modules:o});this.source=x,this._getModuleUniforms=S}else{const{vs:x,fs:S,getUniforms:A}=this.props.shaderAssembler.assembleShaderPair({platformInfo:i,...this.props,modules:o});this.vs=x,this.fs=S,this._getModuleUniforms=A}this.vertexCount=this.props.vertexCount,this.instanceCount=this.props.instanceCount,this.topology=this.props.topology,this.bufferLayout=this.props.bufferLayout,this.parameters=this.props.parameters,r.geometry&&this.setGeometry(r.geometry),this.pipelineFactory=r.pipelineFactory||TP.getDefaultPipelineFactory(this.device),this.shaderFactory=r.shaderFactory||CP.getDefaultShaderFactory(this.device),this.pipeline=this._updatePipeline(),this.vertexArray=t.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry),"isInstanced"in r&&(this.isInstanced=r.isInstanced),r.instanceCount&&this.setInstanceCount(r.instanceCount),r.vertexCount&&this.setVertexCount(r.vertexCount),r.indexBuffer&&this.setIndexBuffer(r.indexBuffer),r.attributes&&this.setAttributes(r.attributes),r.constantAttributes&&this.setConstantAttributes(r.constantAttributes),r.bindings&&this.setBindings(r.bindings),r.uniforms&&this.setUniforms(r.uniforms),r.moduleSettings&&this.updateModuleSettings(r.moduleSettings),r.transformFeedback&&(this.transformFeedback=r.transformFeedback),Object.seal(this)}destroy(){var t;this._destroyed||(this.pipelineFactory.release(this.pipeline),this.shaderFactory.release(this.pipeline.vs),this.pipeline.fs&&this.shaderFactory.release(this.pipeline.fs),this._uniformStore.destroy(),(t=this._gpuGeometry)==null||t.destroy(),this._destroyed=!0)}needsRedraw(){this._getBindingsUpdateTimestamp()>this._lastDrawTimestamp&&this.setNeedsRedraw("contents of bound textures or buffers updated");const t=this._needsRedraw;return this._needsRedraw=!1,t}setNeedsRedraw(t){this._needsRedraw||(this._needsRedraw=t)}predraw(){this.updateShaderInputs(),this.pipeline=this._updatePipeline()}draw(t){this.predraw();let r;try{this._logDrawCallStart(),this.pipeline=this._updatePipeline(),this.pipeline.setBindings(this.bindings,{disableWarnings:this.props.disableWarnings}),W5(this.uniforms)||this.pipeline.setUniformsWebGL(this.uniforms);const{indexBuffer:n}=this.vertexArray,i=n?n.byteLength/(n.indexType==="uint32"?4:2):void 0;r=this.pipeline.draw({renderPass:t,vertexArray:this.vertexArray,isInstanced:this.isInstanced,vertexCount:this.vertexCount,instanceCount:this.instanceCount,indexCount:i,transformFeedback:this.transformFeedback||void 0,parameters:this.parameters,topology:this.topology})}finally{this._logDrawCallEnd()}return this._logFramebuffer(t),r?(this._lastDrawTimestamp=this.device.timestamp,this._needsRedraw=!1):this._needsRedraw="waiting for resource initialization",r}setGeometry(t){var n;(n=this._gpuGeometry)==null||n.destroy();const r=t&&G8e(this.device,t);r&&(this.setTopology(r.topology||"triangle-list"),this.bufferLayout=kB(r.bufferLayout,this.bufferLayout),this.vertexArray&&this._setGeometryAttributes(r)),this._gpuGeometry=r}setTopology(t){t!==this.topology&&(this.topology=t,this._setPipelineNeedsUpdate("topology"))}setBufferLayout(t){this.bufferLayout=this._gpuGeometry?kB(t,this._gpuGeometry.bufferLayout):t,this._setPipelineNeedsUpdate("bufferLayout"),this.pipeline=this._updatePipeline(),this.vertexArray=this.device.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry)}setParameters(t){pP(t,this.parameters,2)||(this.parameters=t,this._setPipelineNeedsUpdate("parameters"))}setInstanceCount(t){this.instanceCount=t,this.isInstanced===void 0&&t>0&&(this.isInstanced=!0),this.setNeedsRedraw("instanceCount")}setVertexCount(t){this.vertexCount=t,this.setNeedsRedraw("vertexCount")}setShaderInputs(t){this.shaderInputs=t,this._uniformStore=new Pke(this.shaderInputs.modules);for(const r of Object.keys(this.shaderInputs.modules)){const n=this._uniformStore.getManagedUniformBuffer(this.device,r);this.bindings[`${r}Uniforms`]=n}this.setNeedsRedraw("shaderInputs")}updateShaderInputs(){this._uniformStore.setUniforms(this.shaderInputs.getUniformValues()),this.setBindings(this.shaderInputs.getBindings()),this.setNeedsRedraw("shaderInputs")}setBindings(t){Object.assign(this.bindings,t),this.setNeedsRedraw("bindings")}setTransformFeedback(t){this.transformFeedback=t,this.setNeedsRedraw("transformFeedback")}setIndexBuffer(t){this.vertexArray.setIndexBuffer(t),this.setNeedsRedraw("indexBuffer")}setAttributes(t,r){t.indices&&pr.warn(`Model:${this.id} setAttributes() - indexBuffer should be set using setIndexBuffer()`)();for(const[n,i]of Object.entries(t)){const o=this.bufferLayout.find(f=>MB(f).includes(n));if(!o){pr.warn(`Model(${this.id}): Missing layout for buffer "${n}".`)();continue}const l=MB(o);let s=!1;for(const f of l){const p=this._attributeInfos[f];p&&(this.vertexArray.setBuffer(p.location,i),s=!0)}!s&&!((r==null?void 0:r.disableWarnings)??this.props.disableWarnings)&&pr.warn(`Model(${this.id}): Ignoring buffer "${i.id}" for unknown attribute "${n}"`)()}this.setNeedsRedraw("attributes")}setConstantAttributes(t,r){for(const[n,i]of Object.entries(t)){const o=this._attributeInfos[n];o?this.vertexArray.setConstantWebGL(o.location,i):((r==null?void 0:r.disableWarnings)??this.props.disableWarnings)||pr.warn(`Model "${this.id}: Ignoring constant supplied for unknown attribute "${n}"`)()}this.setNeedsRedraw("constants")}setUniforms(t){W5(t)||(this.pipeline.setUniformsWebGL(t),Object.assign(this.uniforms,t)),this.setNeedsRedraw("uniforms")}updateModuleSettings(t){const{bindings:r,uniforms:n}=g6(this._getModuleUniforms(t));Object.assign(this.bindings,r),Object.assign(this.uniforms,n),this.setNeedsRedraw("moduleSettings")}_getBindingsUpdateTimestamp(){let t=0;for(const r of Object.values(this.bindings))r instanceof X5?t=Math.max(t,r.texture.updateTimestamp):r instanceof Vo||r instanceof Au?t=Math.max(t,r.updateTimestamp):r instanceof G5||(t=Math.max(t,r.buffer.updateTimestamp));return t}_setGeometryAttributes(t){const r={...t.attributes};for(const[n]of Object.entries(r))!this.pipeline.shaderLayout.attributes.find(i=>i.name===n)&&n!=="positions"&&delete r[n];this.vertexCount=t.vertexCount,this.setIndexBuffer(t.indices||null),this.setAttributes(t.attributes,{disableWarnings:!0}),this.setAttributes(r,{disableWarnings:this.props.disableWarnings}),this.setNeedsRedraw("geometry attributes")}_setPipelineNeedsUpdate(t){this._pipelineNeedsUpdate||(this._pipelineNeedsUpdate=t),this.setNeedsRedraw(t)}_updatePipeline(){if(this._pipelineNeedsUpdate){let t=null,r=null;this.pipeline&&(pr.log(1,`Model ${this.id}: Recreating pipeline because "${this._pipelineNeedsUpdate}".`)(),t=this.pipeline.vs,r=this.pipeline.fs),this._pipelineNeedsUpdate=!1;const n=this.shaderFactory.createShader({id:`${this.id}-vertex`,stage:"vertex",source:this.source||this.vs,debug:this.props.debugShaders});let i=null;this.source?i=n:this.fs&&(i=this.shaderFactory.createShader({id:`${this.id}-fragment`,stage:"fragment",source:this.source||this.fs,debug:this.props.debugShaders})),this.pipeline=this.pipelineFactory.createRenderPipeline({...this.props,bufferLayout:this.bufferLayout,topology:this.topology,parameters:this.parameters,vs:n,fs:i}),this._attributeInfos=Mq(this.pipeline.shaderLayout,this.bufferLayout),t&&this.shaderFactory.release(t),r&&this.shaderFactory.release(r)}return this.pipeline}_logDrawCallStart(){const t=pr.level>3?0:tOe;pr.level<2||Date.now()-this._lastLogTime<t||(this._lastLogTime=Date.now(),this._logOpen=!0,pr.group(w0,`>>> DRAWING MODEL ${this.id}`,{collapsed:pr.level<=2})())}_logDrawCallEnd(){if(this._logOpen){const t=Q8e(this.pipeline.shaderLayout,this.id);pr.table(w0,t)();const r=this.shaderInputs.getDebugTable();for(const[i,o]of Object.entries(this.uniforms))r[i]={value:o};pr.table(w0,r)();const n=this._getAttributeDebugTable();pr.table(w0,this._attributeInfos)(),pr.table(w0,n)(),pr.groupEnd(w0)(),this._logOpen=!1}}_logFramebuffer(t){const r=pr.get("framebuffer");if(this._drawCount++,!r||this._drawCount++>3&&this._drawCount%60)return;const n=t.props.framebuffer;n&&eOe(n,{id:n.id,minimap:!0})}_getAttributeDebugTable(){const t={};for(const[r,n]of Object.entries(this._attributeInfos))t[n.location]={name:r,type:n.shaderType,values:this._getBufferOrConstantValues(this.vertexArray.attributes[n.location],n.bufferDataType)};if(this.vertexArray.indexBuffer){const{indexBuffer:r}=this.vertexArray,n=r.indexType==="uint32"?new Uint32Array(r.debugData):new Uint16Array(r.debugData);t.indices={name:"indices",type:r.indexType,values:n.toString()}}return t}_getBufferOrConstantValues(t,r){const n=Dq(r);return(t instanceof Vo?new n(t.debugData):t).toString()}};Ce(CS,"defaultProps",{...x_.defaultProps,source:null,vs:null,fs:null,id:"unnamed",handle:void 0,userData:{},defines:{},modules:[],moduleSettings:void 0,geometry:null,indexBuffer:null,attributes:{},constantAttributes:{},varyings:[],isInstanced:void 0,instanceCount:0,vertexCount:0,shaderInputs:void 0,pipelineFactory:void 0,shaderFactory:void 0,transformFeedback:void 0,shaderAssembler:q5.getDefaultShaderAssembler(),debugShaders:void 0,disableWarnings:void 0});let k2=CS;function kB(e,t){const r=[...e];for(const n of t){const i=r.findIndex(o=>o.name===n.name);i<0?r.push(n):r[i]=n}return r}function rOe(e){return{type:e.type,shaderLanguage:e.info.shadingLanguage,shaderLanguageVersion:e.info.shadingLanguageVersion,gpu:e.info.gpu,features:e.features}}function MB(e){var t;return e.attributes?(t=e.attributes)==null?void 0:t.map(r=>r.attribute):[e.name]}class M2{constructor(t,r=k2.defaultProps){Ce(this,"device");Ce(this,"model");Ce(this,"transformFeedback");fo(M2.isSupported(t),"BufferTransform not yet implemented on WebGPU"),this.device=t,this.model=new k2(this.device,{id:r.id||"buffer-transform-model",fs:r.fs||RRe(),topology:r.topology||"point-list",...r}),this.transformFeedback=this.device.createTransformFeedback({layout:this.model.pipeline.shaderLayout,buffers:r.feedbackBuffers}),this.model.setTransformFeedback(this.transformFeedback),Object.seal(this)}static isSupported(t){var r;return((r=t==null?void 0:t.info)==null?void 0:r.type)==="webgl"}destroy(){this.model&&this.model.destroy()}delete(){this.destroy()}run(t){const r=this.device.beginRenderPass(t);this.model.draw(r),r.end()}update(...t){console.warn("TextureTransform#update() not implemented")}getBuffer(t){return this.transformFeedback.getBuffer(t)}readAsync(t){const r=this.getBuffer(t);if(r instanceof Vo)return r.readAsync();const{buffer:n,byteOffset:i=0,byteLength:o=n.byteLength}=r;return n.readAsync(i,o)}}class nOe{constructor(t){Ce(this,"id");Ce(this,"topology");Ce(this,"vertexCount");Ce(this,"indices");Ce(this,"attributes");Ce(this,"userData",{});const{attributes:r={},indices:n=null,vertexCount:i=null}=t;this.id=t.id||Tm("geometry"),this.topology=t.topology,n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n),this.attributes={};for(const[o,l]of Object.entries(r)){const s=ArrayBuffer.isView(l)?{value:l}:l;fo(ArrayBuffer.isView(s.value),`${this._print(o)}: must be typed array or object with value as typed array`),(o==="POSITION"||o==="positions")&&!s.size&&(s.size=3),o==="indices"?(fo(!this.indices),this.indices=s):this.attributes[o]=s}this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=i||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return`Geometry ${this.id} attribute ${t}`}_setAttributes(t,r){return this}_calculateVertexCount(t,r){if(r)return r.value.length;let n=1/0;for(const i of Object.values(t)){const{value:o,size:l,constant:s}=i;!s&&o&&l>=1&&(n=Math.min(n,o.length/l))}return fo(Number.isFinite(n)),n}}const iOe={blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"zero",blendAlphaOperation:"add",blendAlphaSrcFactor:"constant-alpha",blendAlphaDstFactor:"zero"};class uW extends b6{constructor(){super(...arguments),this._colorEncoderState=null}render(t){return"pickingFBO"in t?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer({layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,pickingFBO:l,deviceRect:{x:s,y:f,width:p,height:v},cullRect:x,effects:S,pass:A="picking",pickZ:k,moduleParameters:R}){this.pickZ=k;const z=this._resetColorEncoder(k),N=[s,f,p,v],B=super.render({target:l,layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,cullRect:x,effects:S==null?void 0:S.filter(K=>K.useInPicking),pass:A,isPicking:!0,moduleParameters:R,clearColor:[0,0,0,0],colorMask:15,scissorRect:N});return this._colorEncoderState=null,{decodePickingColor:z&&sOe.bind(null,z),stats:B}}shouldDrawLayer(t){const{pickable:r,operation:n}=t.props;return r&&n.includes("draw")||n.includes("terrain")||n.includes("mask")}getModuleParameters(){return{picking:{isActive:1,isAttribute:this.pickZ},lightSources:{}}}getLayerParameters(t,r,n){const i={depthMask:!0,depthTest:!0,depthRange:[0,1],...t.props.parameters},{pickable:o,operation:l}=t.props;return!this._colorEncoderState||l.includes("terrain")?i.blend=!1:o&&l.includes("draw")&&(Object.assign(i,iOe),i.blend=!0,i.blendColor=oOe(this._colorEncoderState,t,n)),i}_resetColorEncoder(t){return this._colorEncoderState=t?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function oOe(e,t,r){const{byLayer:n,byAlpha:i}=e;let o,l=n.get(t);return l?(l.viewports.push(r),o=l.a):(o=n.size+1,o<=255?(l={a:o,layer:t,viewports:[r]},n.set(t,l),i[o]=l):(oo.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}function sOe(e,t){const r=e.byAlpha[t[3]];return r&&{pickedLayer:r.layer,pickedViewports:r.viewports,pickedObjectIndex:r.layer.decodePickingColor(t)}}const Z0={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},iS=Symbol.for("component"),Hg=Symbol.for("propTypes"),$T=Symbol.for("deprecatedProps"),Uy=Symbol.for("asyncPropDefaults"),sm=Symbol.for("asyncPropOriginal"),yp=Symbol.for("asyncPropResolved");function O2(e,t=()=>!0){return Array.isArray(e)?hW(e,t,[]):t(e)?[e]:[]}function hW(e,t,r){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?hW(i,t,r):t(i)&&r.push(i)}return r}function aOe({target:e,source:t,start:r=0,count:n=1}){const i=t.length,o=n*i;let l=0;for(let s=r;l<i;l++)e[s++]=t[l];for(;l<o;)l<o-l?(e.copyWithin(r+l,r,r+l),l*=2):(e.copyWithin(r+l,r,r+o-l),l=o);return e}class lOe{constructor(t,r,n){this._loadCount=0,this._subscribers=new Set,this.id=t,this.context=n,this.setData(r)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(t,r){if(t===this._data&&!r)return;this._data=t;const n=++this._loadCount;let i=t;typeof t=="string"&&(i=tP(t)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const o of this._subscribers)o.onChange(this.getData())}}class cOe{constructor(t){var r;this.protocol=t.protocol||"resource://",this._context={device:t.device,gl:(r=t.device)==null?void 0:r.gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return t.startsWith(this.protocol)?!0:t in this._resources}add({resourceId:t,data:r,forceUpdate:n=!1,persistent:i=!0}){let o=this._resources[t];o?o.setData(r,n):(o=new lOe(t,r,this._context),this._resources[t]=o),o.persistent=i}remove(t){const r=this._resources[t];r&&(r.delete(),delete this._resources[t])}unsubscribe({consumerId:t}){const r=this._consumers[t];if(r){for(const n in r){const i=r[n],o=this._resources[i.resourceId];o&&o.unsubscribe(i)}delete this._consumers[t],this.prune()}}subscribe({resourceId:t,onChange:r,consumerId:n,requestId:i="default"}){const{_resources:o,protocol:l}=this;t.startsWith(l)&&(t=t.replace(l,""),o[t]||this.add({resourceId:t,data:null,persistent:!1}));const s=o[t];if(this._track(n,i,s,r),s)return s.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,r,n,i){const o=this._consumers,l=o[t]=o[t]||{};let s=l[r];const f=s&&s.resourceId&&this._resources[s.resourceId];f&&(f.unsubscribe(s),this.prune()),n&&(s?(s.onChange=i,s.resourceId=n.id):s={onChange:i,resourceId:n.id},l[r]=s,n.subscribe(s))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const r=this._resources[t];!r.persistent&&!r.inUse()&&(r.delete(),delete this._resources[t])}}}const uOe="layerManager.setLayers",hOe="layerManager.activateViewport";class fOe{constructor(t,r){this._lastRenderedLayers=[],this._needsRedraw=!1,this._needsUpdate=!1,this._nextLayers=null,this._debug=!1,this._defaultShaderModulesChanged=!1,this.activateViewport=s=>{Ml(hOe,this,s),s&&(this.context.viewport=s)};const{deck:n,stats:i,viewport:o,timeline:l}=r||{};this.layers=[],this.resourceManager=new cOe({device:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,device:t,gl:t==null?void 0:t.gl,deck:n,shaderAssembler:v8e(),defaultShaderModules:[],renderPass:void 0,stats:i||new hA({id:"deck.gl"}),viewport:o||new wb({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:l||new cW,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(t={clearRedrawFlags:!1}){let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const i=n.getNeedsRedraw(t);r=r||i}return r}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._defaultShaderModulesChanged?"shader modules changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers({layerIds:t}={}){return t?this.layers.filter(r=>t.find(n=>r.id.indexOf(n)===0)):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,r){Ml(uOe,this,r,t),this._lastRenderedLayers=t;const n=O2(t,Boolean);for(const i of n)i.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw(`updating layers: ${t}`),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}addDefaultShaderModule(t){const{defaultShaderModules:r}=this.context;r.find(n=>n.name===t.name)||(r.push(t),this._defaultShaderModulesChanged=!0)}removeDefaultShaderModule(t){const{defaultShaderModules:r}=this.context,n=r.findIndex(i=>i.name===t.name);n>=0&&(r.splice(n,1),this._defaultShaderModulesChanged=!0)}_handleError(t,r,n){n.raiseError(r,`${t} of ${n}`)}_updateLayers(t,r){const n={};for(const l of t)n[l.id]?oo.warn(`Multiple old layers with same id ${l.id}`)():n[l.id]=l;if(this._defaultShaderModulesChanged){for(const l of t)l.setNeedsUpdate(),l.setChangeFlags({extensionsChanged:!0});this._defaultShaderModulesChanged=!1}const i=[];this._updateSublayersRecursively(r,n,i),this._finalizeOldLayers(n);let o=!1;for(const l of i)if(l.hasUniformTransition()){o=`Uniform transition in ${l}`;break}this._needsUpdate=o,this.layers=i}_updateSublayersRecursively(t,r,n){for(const i of t){i.context=this.context;const o=r[i.id];o===null&&oo.warn(`Multiple new layers with same id ${i.id}`)(),r[i.id]=null;let l=null;try{this._debug&&o!==i&&i.validateProps(),o?(this._transferLayerState(o,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),l=i.isComposite?i.getSubLayers():null}catch(s){this._handleError("matching",s,i)}l&&this._updateSublayersRecursively(l,r,n)}}_finalizeOldLayers(t){for(const r in t){const n=t[r];n&&this._finalizeLayer(n)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=Z0.INITIALIZED}catch(r){this._handleError("initialization",r,t)}}_transferLayerState(t,r){r._transferState(t),r.lifecycle=Z0.MATCHED,r!==t&&(t.lifecycle=Z0.AWAITING_GC)}_updateLayer(t){try{t._update()}catch(r){this._handleError("update",r,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||`finalized ${t}`,t.lifecycle=Z0.AWAITING_FINALIZATION;try{t._finalize(),t.lifecycle=Z0.FINALIZED}catch(r){this._handleError("finalization",r,t)}}}function ah(e,t,r){if(e===t)return!0;if(!r||!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!ah(e[n],t[n],r-1))return!1;return!0}if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(const o of n)if(!t.hasOwnProperty(o)||!ah(e[o],t[o],r-1))return!1;return!0}return!1}class dOe{constructor(t){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const r=this.controllers[t];r&&r.finalize()}this.controllers={}}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const r=this.controllers[t];r&&r.updateTransition()}}getViewports(t){return t?this._viewports.filter(r=>r.containsPixel(t)):this._viewports}getViews(){const t={};return this.views.forEach(r=>{t[r.id]=r}),t}getView(t){return this.views.find(r=>r.id===t)}getViewState(t){const r=typeof t=="string"?this.getView(t):t,n=r&&this.viewState[r.getViewStateId()]||this.viewState;return r?r.filterViewState(n):n}getViewport(t){return this._viewportMap[t]}unproject(t,r){const n=this.getViewports(),i={x:t[0],y:t[1]};for(let o=n.length-1;o>=0;--o){const l=n[o];if(l.containsPixel(i)){const s=t.slice();return s[0]-=l.x,s[1]-=l.y,l.unproject(s,r)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,r){(t!==this.width||r!==this.height)&&(this.width=t,this.height=r,this.setNeedsUpdate("Size changed"))}_setViews(t){t=O2(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){t?(!ah(t,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):oo.warn("missing `viewState` or `initialViewState`")()}_createController(t,r){const n=r.type;return new n({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._eventCallbacks.onViewStateChange,onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>{var l;return(l=this.getView(t.id))==null?void 0:l.makeViewport({viewState:o,width:this.width,height:this.height})}})}_updateController(t,r,n,i){const o=t.controller;if(o&&n){const l={...r,...o,id:t.id,x:n.x,y:n.y,width:n.width,height:n.height};return(!i||i.constructor!==o.type)&&(i=this._createController(t,l)),i&&i.setProps(l),i}return null}_rebuildViewports(){const{views:t}=this,r=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let i=t.length;i--;){const o=t[i],l=this.getViewState(o),s=o.makeViewport({viewState:l,width:this.width,height:this.height});let f=r[o.id];const p=!!o.controller;p&&!f&&(n=!0),(n||!p)&&f&&(f.finalize(),f=null),this.controllers[o.id]=this._updateController(o,l,s,f),s&&this._viewports.unshift(s)}for(const i in r){const o=r[i];o&&!this.controllers[i]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)})}_diffViews(t,r){return t.length!==r.length?!0:t.some((n,i)=>!t[i].equals(r[i]))}}const pOe=/([0-9]+\.?[0-9]*)(%|px)/;function jd(e){switch(typeof e){case"number":return{position:e,relative:!1};case"string":const t=pOe.exec(e);if(t&&t.length>=3){const r=t[2]==="%",n=parseFloat(t[1]);return{position:r?n/100:n,relative:r}}default:throw new Error(`Could not parse position string ${e}`)}}function Vd(e,t){return e.relative?Math.round(e.position*t):e.position}class gOe{constructor(t){const{id:r,x:n=0,y:i=0,width:o="100%",height:l="100%",padding:s=null}=t;this.id=r||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=jd(n),this._y=jd(i),this._width=jd(o),this._height=jd(l),this._padding=s&&{left:jd(s.left||0),right:jd(s.right||0),top:jd(s.top||0),bottom:jd(s.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t?!0:this.ViewportType===t.ViewportType&&ah(this.props,t.props,2)}makeViewport({width:t,height:r,viewState:n}){n=this.filterViewState(n);const i=this.getDimensions({width:t,height:r});return!i.height||!i.width?null:new this.ViewportType({...n,...this.props,...i})}getViewStateId(){const{viewState:t}=this.props;return typeof t=="string"?t:(t==null?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const r={...t};for(const n in this.props.viewState)n!=="id"&&(r[n]=this.props.viewState[n]);return r}return t}getDimensions({width:t,height:r}){const n={x:Vd(this._x,t),y:Vd(this._y,r),width:Vd(this._width,t),height:Vd(this._height,r)};return this._padding&&(n.padding={left:Vd(this._padding.left,t),top:Vd(this._padding.top,r),right:Vd(this._padding.right,t),bottom:Vd(this._padding.bottom,r)}),n}get controller(){const t=this.props.controller;return t?t===!0?{type:this.ControllerType}:typeof t=="function"?{type:t}:{type:this.ControllerType,...t}:null}}class gA{constructor(t){this._inProgress=!1,this._handle=null,this.time=0,this.settings={duration:0},this._timeline=t}get inProgress(){return this._inProgress}start(t){var r,n;this.cancel(),this.settings=t,this._inProgress=!0,(n=(r=this.settings).onStart)==null||n.call(r,this)}end(){var t,r;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(r=(t=this.settings).onEnd)==null||r.call(t,this))}cancel(){var t,r;this._inProgress&&((r=(t=this.settings).onInterrupt)==null||r.call(t,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var t,r;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:n,settings:i}=this;this._handle=n.addChannel({delay:n.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(r=(t=this.settings).onUpdate)==null||r.call(t,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const OB=()=>{},PP={BREAK:1,SNAP_TO_END:2,IGNORE:3},mOe=e=>e,yOe=PP.BREAK;class _Oe{constructor(t){this._onTransitionUpdate=r=>{const{time:n,settings:{interpolator:i,startProps:o,endProps:l,duration:s,easing:f}}=r,p=f(n/s),v=i.interpolateProps(o,l,p);this.propsInTransition=this.getControllerState({...this.props,...v}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})},this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new gA(t.timeline),this.onViewStateChange=t.onViewStateChange||OB,this.onStateChange=t.onStateChange||OB}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let r=!1;const n=this.props;if(this.props=t,!n||this._shouldIgnoreViewportChange(n,t))return!1;if(this._isTransitionEnabled(t)){let i=n;if(this.transition.inProgress){const{interruption:o,endProps:l}=this.transition.settings;i={...n,...o===PP.SNAP_TO_END?l:this.propsInTransition||n}}this._triggerTransition(i,t),r=!0}else this.transition.cancel();return r}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:r,transitionInterpolator:n}=t;return(r>0||r==="auto")&&!!n}_isUpdateDueToCurrentTransition(t){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition):!1}_shouldIgnoreViewportChange(t,r){return this.transition.inProgress?this.transition.settings.interruption===PP.IGNORE||this._isUpdateDueToCurrentTransition(r):this._isTransitionEnabled(r)?r.transitionInterpolator.arePropsEqual(t,r):!0}_triggerTransition(t,r){const n=this.getControllerState(t),i=this.getControllerState(r).shortestPathFrom(n),o=r.transitionInterpolator,l=o.getDuration?o.getDuration(t,r):r.transitionDuration;if(l===0)return;const s=o.initializeProps(t,i);this.propsInTransition={};const f={duration:l,easing:r.transitionEasing||mOe,interpolator:o,interruption:r.transitionInterruption||yOe,startProps:s.start,endProps:s.end,onStart:r.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(r.onTransitionInterrupt),onEnd:this._onTransitionEnd(r.onTransitionEnd)};this.transition.start(f),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return r=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),t==null||t(r)}}}function Zs(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}class vOe{constructor(t){const{compare:r,extract:n,required:i}=t;this._propsToCompare=r,this._propsToExtract=n||r,this._requiredProps=i}arePropsEqual(t,r){for(const n of this._propsToCompare)if(!(n in t)||!(n in r)||!P2(t[n],r[n]))return!1;return!0}initializeProps(t,r){const n={},i={};for(const o of this._propsToExtract)(o in t||o in r)&&(n[o]=t[o],i[o]=r[o]);return this._checkRequiredProps(n),this._checkRequiredProps(i),{start:n,end:i}}getDuration(t,r){return r.transitionDuration}_checkRequiredProps(t){this._requiredProps&&this._requiredProps.forEach(r=>{const n=t[r];Zs(Number.isFinite(n)||Array.isArray(n),`${r} is required for transition`)})}}const bOe=["longitude","latitude","zoom","bearing","pitch"],xOe=["longitude","latitude","zoom"];class fW extends vOe{constructor(t={}){const r=Array.isArray(t)?t:t.transitionProps,n=Array.isArray(t)?{}:t;n.transitionProps=Array.isArray(r)?{compare:r,required:r}:r||{compare:bOe,required:xOe},super(n.transitionProps),this.opts=n}initializeProps(t,r){const n=super.initializeProps(t,r),{makeViewport:i,around:o}=this.opts;if(i&&o){const l=i(t),s=i(r),f=l.unproject(o);n.start.around=o,Object.assign(n.end,{around:s.project(f),aroundPosition:f,width:r.width,height:r.height})}return n}interpolateProps(t,r,n){const i={};for(const o of this._propsToExtract)i[o]=eS(t[o]||0,r[o]||0,n);if(r.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...r,...i});Object.assign(i,o.panByPosition(r.aroundPosition,eS(t.around,r.around,n)))}return i}}const Hd={transitionDuration:0},wOe=300,Vx=e=>1-(1-e)*(1-e),S0={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},ag={};class SOe{constructor(t){this.state={},this._events={},this._interactionState={isDragging:!1},this._customEvents=[],this._eventStartBlocked=null,this._panMove=!1,this.invertPan=!1,this.dragMode="rotate",this.inertia=0,this.scrollZoom=!0,this.dragPan=!0,this.dragRotate=!0,this.doubleClickZoom=!0,this.touchZoom=!0,this.touchRotate=!1,this.keyboard=!0,this.transitionManager=new _Oe({...t,getControllerState:r=>new this.ControllerState(r),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){var t;for(const r in this._events)this._events[r]&&((t=this.eventManager)==null||t.off(r,this.handleEvent));this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const r=this._eventStartBlocked;switch(t.type){case"panstart":return r?!1:this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return r?!1:this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return r?!1:this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:r,y:n}=this.props,{offsetCenter:i}=t;return[i.x-r,i.y-n]}isPointInBounds(t,r){const{width:n,height:i}=this.props;if(r&&r.handled)return!1;const o=t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=i;return o&&r&&r.stopPropagation(),o}isFunctionKeyPressed(t){const{srcEvent:r}=t;return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const r=setTimeout(()=>{this._eventStartBlocked===r&&(this._eventStartBlocked=null)},t);this._eventStartBlocked=r}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:r}=t;this.inertia=Number.isFinite(r)?r:r===!0?wOe:0;const{scrollZoom:n=!0,dragPan:i=!0,dragRotate:o=!0,doubleClickZoom:l=!0,touchZoom:s=!0,touchRotate:f=!1,keyboard:p=!0}=t,v=!!this.onViewStateChange;this.toggleEvents(S0.WHEEL,v&&n),this.toggleEvents(S0.PAN,v),this.toggleEvents(S0.PINCH,v&&(s||f)),this.toggleEvents(S0.TRIPLE_PAN,v&&f),this.toggleEvents(S0.DOUBLE_TAP,v&&l),this.toggleEvents(S0.KEYBOARD,v&&p),this.scrollZoom=n,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=l,this.touchZoom=s,this.touchRotate=f,this.keyboard=p}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,r){this.eventManager&&t.forEach(n=>{this._events[n]!==r&&(this._events[n]=r,r?this.eventManager.on(n,this.handleEvent):this.eventManager.off(n,this.handleEvent))})}updateViewport(t,r=null,n={}){const i={...t.getViewportProps(),...r},o=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(n),o){const l=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:l,viewId:this.props.id})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState,viewId:this.props.id})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;let n=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(n=!n);const i=this.controllerState[n?"panStart":"rotateStart"]({pos:r});return this._panMove=n,this.updateViewport(i,Hd,{isDragging:!0}),!0}_onPan(t){return this.isDragging()?this._panMove?this._onPanMove(t):this._onPanRotate(t):!1}_onPanEnd(t){return this.isDragging()?this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t):!1}_onPanMove(t){if(!this.dragPan)return!1;const r=this.getCenter(t),n=this.controllerState.pan({pos:r});return this.updateViewport(n,Hd,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:r}=this;if(this.dragPan&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Vx},{isDragging:!1,isPanning:!0})}else{const n=this.controllerState.panEnd();this.updateViewport(n,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const r=this.getCenter(t),n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Hd,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:r}=this;if(this.dragRotate&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Vx},{isDragging:!1,isRotating:!0})}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;t.srcEvent.preventDefault();const{speed:n=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:o}=t;let l=2/(1+Math.exp(-Math.abs(o*n)));o<0&&l!==0&&(l=1/l);const s=this.controllerState.zoom({pos:r,scale:l});return this.updateViewport(s,{...this._getTransitionProps({around:r}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.rotateStart({pos:r});return this.updateViewport(n,Hd,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate||!this.isDragging())return!1;const r=this.getCenter(t);r[0]-=t.deltaX;const n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Hd,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this;if(this.touchRotate&&r&&t.velocityY){const n=this.getCenter(t),i=[n[0],n[1]+=t.velocityY*r/2],o=this.controllerState.rotate({pos:i});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Vx},{isDragging:!1,isRotating:!0}),this.blockEvents(r)}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.zoomStart({pos:r}).rotateStart({pos:r});return ag._startPinchRotation=t.rotation,ag._lastPinchEvent=t,this.updateViewport(n,Hd,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let r=this.controllerState;if(this.touchZoom){const{scale:n}=t,i=this.getCenter(t);r=r.zoom({pos:i,scale:n})}if(this.touchRotate){const{rotation:n}=t;r=r.rotate({deltaAngleX:ag._startPinchRotation-n})}return this.updateViewport(r,Hd,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),ag._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this,{_lastPinchEvent:n}=ag;if(this.touchZoom&&r&&n&&t.scale!==n.scale){const i=this.getCenter(t);let o=this.controllerState.rotateEnd();const l=Math.log2(t.scale),s=(l-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),f=Math.pow(2,l+s*r/2);o=o.zoom({pos:i,scale:f}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:i}),transitionDuration:r,transitionEasing:Vx},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(r)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return ag._startPinchRotation=null,ag._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.isFunctionKeyPressed(t),i=this.controllerState.zoom({pos:r,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps({around:r}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const r=this.isFunctionKeyPressed(t),{zoomSpeed:n,moveSpeed:i,rotateSpeedX:o,rotateSpeedY:l}=this.keyboard===!0?{}:this.keyboard,{controllerState:s}=this;let f;const p={};switch(t.srcEvent.code){case"Minus":f=r?s.zoomOut(n).zoomOut(n):s.zoomOut(n),p.isZooming=!0;break;case"Equal":f=r?s.zoomIn(n).zoomIn(n):s.zoomIn(n),p.isZooming=!0;break;case"ArrowLeft":r?(f=s.rotateLeft(o),p.isRotating=!0):(f=s.moveLeft(i),p.isPanning=!0);break;case"ArrowRight":r?(f=s.rotateRight(o),p.isRotating=!0):(f=s.moveRight(i),p.isPanning=!0);break;case"ArrowUp":r?(f=s.rotateUp(l),p.isRotating=!0):(f=s.moveUp(i),p.isPanning=!0);break;case"ArrowDown":r?(f=s.rotateDown(l),p.isRotating=!0):(f=s.moveDown(i),p.isPanning=!0);break;default:return!1}return this.updateViewport(f,this._getTransitionProps(),p),!0}_getTransitionProps(t){const{transition:r}=this;return!r||!r.transitionInterpolator?Hd:t?{...r,transitionInterpolator:new fW({...t,...r.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:r}}class AOe{constructor(t,r){this._viewportProps=this.applyConstraints(t),this._state=r}getViewportProps(){return this._viewportProps}getState(){return this._state}}const NB=5,EOe=1.2;class TOe extends AOe{constructor(t){const{width:r,height:n,latitude:i,longitude:o,zoom:l,bearing:s=0,pitch:f=0,altitude:p=1.5,position:v=[0,0,0],maxZoom:x=20,minZoom:S=0,maxPitch:A=60,minPitch:k=0,startPanLngLat:R,startZoomLngLat:z,startRotatePos:N,startBearing:B,startPitch:U,startZoom:K,normalize:ne=!0}=t;Zs(Number.isFinite(o)),Zs(Number.isFinite(i)),Zs(Number.isFinite(l)),super({width:r,height:n,latitude:i,longitude:o,zoom:l,bearing:s,pitch:f,altitude:p,maxZoom:x,minZoom:S,maxPitch:A,minPitch:k,normalize:ne,position:v},{startPanLngLat:R,startZoomLngLat:z,startRotatePos:N,startBearing:B,startPitch:U,startZoom:K}),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan({pos:t,startPos:r}){const n=this.getState().startPanLngLat||this._unproject(r);if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startBearing:o,startPitch:l}=this.getState();if(!i||o===void 0||l===void 0)return this;let s;return t?s=this._getNewRotation(t,i,l,o):s={bearing:o+r,pitch:l+n},this._getUpdatedState(s)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:t}){return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const{maxZoom:l,minZoom:s}=this.getViewportProps();let f=i+Math.log2(n);f=mp(f,s,l);const p=this.makeViewport({...this.getViewportProps(),zoom:f});return this._getUpdatedState({zoom:f,...p.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(t=2){return this._zoomFromCenter(t)}zoomOut(t=2){return this._zoomFromCenter(1/t)}moveLeft(t=100){return this._panFromCenter([t,0])}moveRight(t=100){return this._panFromCenter([-t,0])}moveUp(t=100){return this._panFromCenter([0,t])}moveDown(t=100){return this._panFromCenter([0,-t])}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{bearing:i,longitude:o}=n;return Math.abs(i-r.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(o-r.longitude)>180&&(n.longitude=o<0?o+360:o-360),n}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i}=t;t.zoom=mp(i,n,r);const{maxPitch:o,minPitch:l,pitch:s}=t;t.pitch=mp(s,l,o);const{normalize:f=!0}=t;return f&&Object.assign(t,o8e(t)),t}_zoomFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.zoom({pos:[r/2,n/2],scale:t})}_panFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.pan({startPos:[r/2,n/2],pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_getNewRotation(t,r,n,i){const o=t[0]-r[0],l=t[1]-r[1],s=t[1],f=r[1],{width:p,height:v}=this.getViewportProps(),x=o/p;let S=0;l>0?Math.abs(v-f)>NB&&(S=l/(f-v)*EOe):l<0&&f>NB&&(S=1-s/f),S=mp(S,-1,1);const{minPitch:A,maxPitch:k}=this.getViewportProps(),R=i+180*x;let z=n;return S>0?z=n+S*(k-n):S<0&&(z=n-S*(A-n)),{pitch:z,bearing:R}}}class COe extends SOe{constructor(){super(...arguments),this.ControllerState=TOe,this.transition={transitionDuration:300,transitionInterpolator:new fW({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})},this.dragMode="pan"}setProps(t){t.position=t.position||[0,0,0];const r=this.props;super.setProps(t),(!r||r.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class w6 extends gOe{constructor(t={}){super(t)}get ViewportType(){return om}get ControllerType(){return COe}}w6.displayName="MapView";const POe=new x6;function IOe(e,t){const r=e.order??1/0,n=t.order??1/0;return r-n}class ROe{constructor(t){this._resolvedEffects=[],this._defaultEffects=[],this.effects=[],this._context=t,this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(t){const r=this._defaultEffects;if(!r.find(n=>n.id===t.id)){const n=r.findIndex(i=>IOe(i,t)>0);n<0?r.push(t):r.splice(n,0,t),t.setup(this._context),this._setEffects(this.effects)}}setProps(t){"effects"in t&&(ah(t.effects,this.effects,1)||this._setEffects(t.effects))}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}getEffects(){return this._resolvedEffects}_setEffects(t){const r={};for(const i of this.effects)r[i.id]=i;const n=[];for(const i of t){const o=r[i.id];let l=i;o&&o!==i?o.setProps?(o.setProps(i.props),l=o):o.cleanup(this._context):o||i.setup(this._context),n.push(l),delete r[i.id]}for(const i in r)r[i].cleanup(this._context);this.effects=n,this._resolvedEffects=n.concat(this._defaultEffects),t.some(i=>i instanceof x6)||this._resolvedEffects.push(POe),this._needsRedraw="effects changed"}finalize(){for(const t of this._resolvedEffects)t.cleanup(this._context);this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class kOe extends b6{shouldDrawLayer(t){const{operation:r}=t.props;return r.includes("draw")||r.includes("terrain")}}const MOe="deckRenderer.renderLayers";class OOe{constructor(t){this.device=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new kOe(t),this.pickLayersPass=new uW(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){if(!t.viewports.length)return;const r=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,n={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...t};n.effects&&this._preRender(n.effects,n);const i=this.lastPostProcessEffect?this.renderBuffers[0]:n.target;this.lastPostProcessEffect&&(n.clearColor=[0,0,0,0],n.clearCanvas=!0);const o=r.render({...n,target:i});n.effects&&this._postRender(n.effects,n),this.renderCount++,Ml(MOe,this,o,t)}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}finalize(){const{renderBuffers:t}=this;for(const r of t)r.delete();t.length=0}_preRender(t,r){this.lastPostProcessEffect=null,r.preRenderStats=r.preRenderStats||{};for(const n of t)r.preRenderStats[n.id]=n.preRender(r),n.postRender&&(this.lastPostProcessEffect=n.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:t}=this,r=this.device.canvasContext.getDrawingBufferSize();t.length===0&&[0,1].map(n=>{const i=this.device.createTexture({sampler:{minFilter:"linear",magFilter:"linear"}});t.push(this.device.createFramebuffer({id:`deck-renderbuffer-${n}`,colorAttachments:[i]}))});for(const n of t)n.resize(r)}_postRender(t,r){const{renderBuffers:n}=this,i={...r,inputBuffer:n[0],swapBuffer:n[1]};for(const o of t)if(o.postRender){i.target=o.id===this.lastPostProcessEffect?r.target:void 0;const l=o.postRender(i);i.inputBuffer=l,i.swapBuffer=l===n[0]?n[1]:n[0]}}}const NOe={pickedColor:null,pickedObjectIndex:-1};function DOe({pickedColors:e,decodePickingColor:t,deviceX:r,deviceY:n,deviceRadius:i,deviceRect:o}){const{x:l,y:s,width:f,height:p}=o;let v=i*i,x=-1,S=0;for(let A=0;A<p;A++){const k=A+s-n,R=k*k;if(R>v)S+=4*f;else for(let z=0;z<f;z++){if(e[S+3]-1>=0){const B=z+l-r,U=B*B+R;U<=v&&(v=U,x=S)}S+=4}}if(x>=0){const A=e.slice(x,x+4),k=t(A);if(k){const R=Math.floor(x/4/f),z=x/4-R*f;return{...k,pickedColor:A,pickedX:l+z,pickedY:s+R}}oo.error("Picked non-existent layer. Is picking buffer corrupt?")()}return NOe}function LOe({pickedColors:e,decodePickingColor:t}){const r=new Map;if(e){for(let n=0;n<e.length;n+=4)if(e[n+3]-1>=0){const o=e.slice(n,n+4),l=o.join(",");if(!r.has(l)){const s=t(o);s?r.set(l,{...s,color:o}):oo.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}function dW({pickInfo:e,viewports:t,pixelRatio:r,x:n,y:i,z:o}){let l=t[0];t.length>1&&(l=BOe((e==null?void 0:e.pickedViewports)||t,{x:n,y:i}));let s;if(l){const f=[n-l.x,i-l.y];o!==void 0&&(f[2]=o),s=l.unproject(f)}return{color:null,layer:null,viewport:l,index:-1,picked:!1,x:n,y:i,pixel:[n,i],coordinate:s,devicePixel:e&&"pickedX"in e?[e.pickedX,e.pickedY]:void 0,pixelRatio:r}}function FOe(e){const{pickInfo:t,lastPickedInfo:r,mode:n,layers:i}=e,{pickedColor:o,pickedLayer:l,pickedObjectIndex:s}=t,f=l?[l]:[];if(n==="hover"){const x=r.index,S=r.layerId,A=l?l.props.id:null;if(A!==S||s!==x){if(A!==S){const k=i.find(R=>R.props.id===S);k&&f.unshift(k)}r.layerId=A,r.index=s,r.info=null}}const p=dW(e),v=new Map;return v.set(null,p),f.forEach(x=>{let S={...p};x===l&&(S.color=o,S.index=s,S.picked=!0),S=pW({layer:x,info:S,mode:n});const A=S.layer;x===l&&n==="hover"&&(r.info=S),v.set(A.id,S),n==="hover"&&A.updateAutoHighlight(S)}),v}function pW({layer:e,info:t,mode:r}){for(;e&&t;){const n=t.layer||null;t.sourceLayer=n,t.layer=e,t=e.getPickingInfo({info:t,mode:r,sourceLayer:n}),e=e.parent}return t}function BOe(e,t){for(let r=e.length-1;r>=0;r--){const n=e[r];if(n.containsPixel(t))return n}return e[0]}class zOe{constructor(t){this._pickable=!0,this.device=t,this.pickLayersPass=new uW(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.destroy(),this.depthFBO&&this.depthFBO.destroy()}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject({x:t,y:r,layers:n,viewports:i},o=this.lastPickedInfo.info){const l=o&&o.layer&&o.layer.id,s=o&&o.viewport&&o.viewport.id,f=l?n.find(S=>S.id===l):null,p=s&&i.find(S=>S.id===s)||i[0],v=p&&p.unproject([t-p.x,r-p.y]);return{...o,...{x:t,y:r,viewport:p,coordinate:v,layer:f}}}_resizeBuffer(){var r,n;if(!this.pickingFBO&&(this.pickingFBO=this.device.createFramebuffer({colorAttachments:["rgba8unorm"],depthStencilAttachment:"depth16unorm"}),this.device.isTextureFormatRenderable("rgba32float"))){const i=this.device.createFramebuffer({colorAttachments:["rgba32float"],depthStencilAttachment:"depth16unorm"});this.depthFBO=i}const{canvas:t}=this.device.getCanvasContext();(r=this.pickingFBO)==null||r.resize({width:t.width,height:t.height}),(n=this.depthFBO)==null||n.resize({width:t.width,height:t.height})}_getPickable(t){if(this._pickable===!1)return null;const r=t.filter(n=>this.pickLayersPass.shouldDrawLayer(n)&&!n.isComposite);return r.length?r:null}_pickClosestObject({layers:t,views:r,viewports:n,x:i,y:o,radius:l=0,depth:s=1,mode:f="query",unproject3D:p,onViewportActive:v,effects:x}){const S=this.device.canvasContext.cssToDeviceRatio(),A=this._getPickable(t);if(!A||n.length===0)return{result:[],emptyInfo:dW({viewports:n,x:i,y:o,pixelRatio:S})};this._resizeBuffer();const k=this.device.canvasContext.cssToDevicePixels([i,o],!0),R=[k.x+Math.floor(k.width/2),k.y+Math.floor(k.height/2)],z=Math.round(l*S),{width:N,height:B}=this.pickingFBO,U=this._getPickingRect({deviceX:R[0],deviceY:R[1],deviceRadius:z,deviceWidth:N,deviceHeight:B}),K={x:i-l,y:o-l,width:l*2+1,height:l*2+1};let ne;const ee=[],Q=new Set;for(let re=0;re<s;re++){let Se;if(U){const G=this._drawAndSample({layers:A,views:r,viewports:n,onViewportActive:v,deviceRect:U,cullRect:K,effects:x,pass:`picking:${f}`});Se=DOe({...G,deviceX:R[0],deviceY:R[1],deviceRadius:z,deviceRect:U})}else Se={pickedColor:null,pickedObjectIndex:-1};let J;if(Se.pickedLayer&&p&&this.depthFBO){const{pickedColors:G}=this._drawAndSample({layers:[Se.pickedLayer],views:r,viewports:n,onViewportActive:v,deviceRect:{x:Se.pickedX,y:Se.pickedY,width:1,height:1},cullRect:K,effects:x,pass:`picking:${f}:z`},!0);G[3]&&(J=G[0])}Se.pickedLayer&&re+1<s&&(Q.add(Se.pickedLayer),Se.pickedLayer.disablePickingIndex(Se.pickedObjectIndex)),ne=FOe({pickInfo:Se,lastPickedInfo:this.lastPickedInfo,mode:f,layers:A,viewports:n,x:i,y:o,z:J,pixelRatio:S});for(const G of ne.values())G.layer&&ee.push(G);if(!Se.pickedColor)break}for(const re of Q)re.restorePickingColors();return{result:ee,emptyInfo:ne.get(null)}}_pickVisibleObjects({layers:t,views:r,viewports:n,x:i,y:o,width:l=1,height:s=1,mode:f="query",maxObjects:p=null,onViewportActive:v,effects:x}){const S=this._getPickable(t);if(!S||n.length===0)return[];this._resizeBuffer();const A=this.device.canvasContext.cssToDeviceRatio(),k=this.device.canvasContext.cssToDevicePixels([i,o],!0),R=k.x,z=k.y+k.height,N=this.device.canvasContext.cssToDevicePixels([i+l,o+s],!0),B=N.x+N.width,U=N.y,K={x:R,y:U,width:B-R,height:z-U},ne=this._drawAndSample({layers:S,views:r,viewports:n,onViewportActive:v,deviceRect:K,cullRect:{x:i,y:o,width:l,height:s},effects:x,pass:`picking:${f}`}),ee=LOe(ne),Q=new Map,re=[],Se=Number.isFinite(p);for(let J=0;J<ee.length&&!(Se&&re.length>=p);J++){const G=ee[J];let se={color:G.pickedColor,layer:null,index:G.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:A};se=pW({layer:G.pickedLayer,info:se,mode:f});const ve=se.layer.id;Q.has(ve)||Q.set(ve,new Set);const ge=Q.get(ve),je=se.object??se.index;ge.has(je)||(ge.add(je),re.push(se))}return re}_drawAndSample({layers:t,views:r,viewports:n,onViewportActive:i,deviceRect:o,cullRect:l,effects:s,pass:f},p=!1){const v=p?this.depthFBO:this.pickingFBO,x={layers:t,layerFilter:this.layerFilter,views:r,viewports:n,onViewportActive:i,pickingFBO:v,deviceRect:o,cullRect:l,effects:s,pass:f,pickZ:p,preRenderStats:{}};for(const B of s)B.useInPicking&&(x.preRenderStats[B.id]=B.preRender(x));const{decodePickingColor:S}=this.pickLayersPass.render(x),{x:A,y:k,width:R,height:z}=o,N=new(p?Float32Array:Uint8Array)(R*z*4);return this.device.readPixelsToArrayWebGL(v,{sourceX:A,sourceY:k,sourceWidth:R,sourceHeight:z,target:N}),{pickedColors:N,decodePickingColor:S}}_getPickingRect({deviceX:t,deviceY:r,deviceRadius:n,deviceWidth:i,deviceHeight:o}){const l=Math.max(0,t-n),s=Math.max(0,r-n),f=Math.min(i,t+n+1)-l,p=Math.min(o,r+n+1)-s;return f<=0||p<=0?null:{x:l,y:s,width:f,height:p}}}const $Oe={"top-left":{top:0,left:0},"top-right":{top:0,right:0},"bottom-left":{bottom:0,left:0},"bottom-right":{bottom:0,right:0},fill:{top:0,left:0,bottom:0,right:0}},UOe="top-left",DB="__root";class jOe{constructor({deck:t,parentElement:r}){this.defaultWidgets=[],this.widgets=[],this.resolvedWidgets=[],this.containers={},this.lastViewports={},this.deck=t,this.parentElement=r}getWidgets(){return this.resolvedWidgets}setProps(t){t.widgets&&!ah(t.widgets,this.widgets,1)&&this._setWidgets(t.widgets)}finalize(){for(const t of this.getWidgets())this._remove(t);this.defaultWidgets.length=0,this.resolvedWidgets.length=0;for(const t in this.containers)this.containers[t].remove()}addDefault(t){this.defaultWidgets.find(r=>r.id===t.id)||(this._add(t),this.defaultWidgets.push(t),this._setWidgets(this.widgets))}_setWidgets(t){const r={};for(const n of this.resolvedWidgets)r[n.id]=n;this.resolvedWidgets.length=0;for(const n of this.defaultWidgets)r[n.id]=null,this.resolvedWidgets.push(n);for(let n of t){const i=r[n.id];i?i.viewId!==n.viewId||i.placement!==n.placement?(this._remove(i),this._add(n)):n!==i&&(i.setProps(n.props),n=i):this._add(n),r[n.id]=null,this.resolvedWidgets.push(n)}for(const n in r){const i=r[n];i&&this._remove(i)}this.widgets=t}_add(t){const{viewId:r=null,placement:n=UOe}=t,i=t.onAdd({deck:this.deck,viewId:r});i&&this._getContainer(r,n).append(i),t._element=i}_remove(t){t.onRemove(),t._element&&t._element.remove(),t._element=void 0}_getContainer(t,r){var l;const n=t||DB;let i=this.containers[n];i||(i=document.createElement("div"),i.style.pointerEvents="none",i.style.position="absolute",i.style.overflow="hidden",(l=this.parentElement)==null||l.append(i),this.containers[n]=i);let o=i.querySelector(`.${r}`);return o||(o=document.createElement("div"),o.className=r,o.style.position="absolute",o.style.zIndex="2",Object.assign(o.style,$Oe[r]),i.append(o)),o}_updateContainers(){const t=this.deck.width,r=this.deck.height;for(const n in this.containers){const i=this.lastViewports[n]||null,o=n===DB||i,l=this.containers[n];o?(l.style.display="block",l.style.left=`${i?i.x:0}px`,l.style.top=`${i?i.y:0}px`,l.style.width=`${i?i.width:t}px`,l.style.height=`${i?i.height:r}px`):l.style.display="none"}}onRedraw({viewports:t,layers:r}){var o,l;const n=t.reduce((s,f)=>(s[f.id]=f,s),{}),{lastViewports:i}=this;for(const s of this.getWidgets()){const{viewId:f}=s;if(f){const p=n[f];p&&(s.onViewportChange&&!p.equals(i[f])&&s.onViewportChange(p),(o=s.onRedraw)==null||o.call(s,{viewports:[p],layers:r}))}else{if(s.onViewportChange)for(const p of t)p.equals(i[p.id])||s.onViewportChange(p);(l=s.onRedraw)==null||l.call(s,{viewports:t,layers:r})}}this.lastViewports=n,this._updateContainers()}onHover(t,r){var n,i;for(const o of this.getWidgets()){const{viewId:l}=o;(!l||l===((n=t.viewport)==null?void 0:n.id))&&((i=o.onHover)==null||i.call(o,t,r))}}onEvent(t,r){var i,o;const n=xP[r.type];if(n)for(const l of this.getWidgets()){const{viewId:s}=l;(!s||s===((i=t.viewport)==null?void 0:i.id))&&((o=l[n.handler])==null||o.call(l,t,r))}}}const VOe={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class HOe{constructor(){this.id="default-tooltip",this.placement="fill",this.props={},this.isVisible=!1}onAdd({deck:t}){const r=document.createElement("div");return r.className="deck-tooltip",Object.assign(r.style,VOe),this.deck=t,this.element=r,r}onRemove(){this.deck=void 0,this.element=void 0}setProps(){}onViewportChange(t){var r;this.isVisible&&t.id===((r=this.lastViewport)==null?void 0:r.id)&&t!==this.lastViewport&&this.setTooltip(null)}onHover(t){const{deck:r}=this,n=r&&r.props.getTooltip;if(!n)return;const i=n(t);this.lastViewport=t.viewport,this.setTooltip(i,t.x,t.y)}setTooltip(t,r,n){const i=this.element;if(i){if(typeof t=="string")i.innerText=t;else if(t)t.text&&(i.innerText=t.text),t.html&&(i.innerHTML=t.html),t.className&&(i.className=t.className);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform=`translate(${r}px, ${n}px)`,t&&typeof t=="object"&&"style"in t&&Object.assign(i.style,t.style)}}}var gy;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",e[e.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.CULL_FACE=2884]="CULL_FACE",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.BLEND=3042]="BLEND",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.DITHER=3024]="DITHER",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DOUBLE=5130]="DOUBLE",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",e[e.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.READ_BUFFER=3074]="READ_BUFFER",e[e.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",e[e.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",e[e.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",e[e.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",e[e.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",e[e.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",e[e.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",e[e.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",e[e.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",e[e.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",e[e.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",e[e.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",e[e.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",e[e.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",e[e.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",e[e.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",e[e.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",e[e.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",e[e.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",e[e.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",e[e.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",e[e.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",e[e.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",e[e.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",e[e.RED=6403]="RED",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB10_A2=32857]="RGB10_A2",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",e[e.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",e[e.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",e[e.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",e[e.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",e[e.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",e[e.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",e[e.SRGB=35904]="SRGB",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",e[e.RGBA32F=34836]="RGBA32F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.RGB16F=34843]="RGB16F",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R16F=33325]="R16F",e[e.R32F=33326]="R32F",e[e.RG16F=33327]="RG16F",e[e.RG32F=33328]="RG32F",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2UI=36975]="RGB10_A2UI",e[e.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",e[e.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.RG=33319]="RG",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",e[e.CURRENT_QUERY=34917]="CURRENT_QUERY",e[e.QUERY_RESULT=34918]="QUERY_RESULT",e[e.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",e[e.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",e[e.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",e[e.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",e[e.DRAW_BUFFER0=34853]="DRAW_BUFFER0",e[e.DRAW_BUFFER1=34854]="DRAW_BUFFER1",e[e.DRAW_BUFFER2=34855]="DRAW_BUFFER2",e[e.DRAW_BUFFER3=34856]="DRAW_BUFFER3",e[e.DRAW_BUFFER4=34857]="DRAW_BUFFER4",e[e.DRAW_BUFFER5=34858]="DRAW_BUFFER5",e[e.DRAW_BUFFER6=34859]="DRAW_BUFFER6",e[e.DRAW_BUFFER7=34860]="DRAW_BUFFER7",e[e.DRAW_BUFFER8=34861]="DRAW_BUFFER8",e[e.DRAW_BUFFER9=34862]="DRAW_BUFFER9",e[e.DRAW_BUFFER10=34863]="DRAW_BUFFER10",e[e.DRAW_BUFFER11=34864]="DRAW_BUFFER11",e[e.DRAW_BUFFER12=34865]="DRAW_BUFFER12",e[e.DRAW_BUFFER13=34866]="DRAW_BUFFER13",e[e.DRAW_BUFFER14=34867]="DRAW_BUFFER14",e[e.DRAW_BUFFER15=34868]="DRAW_BUFFER15",e[e.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",e[e.MAX_SAMPLES=36183]="MAX_SAMPLES",e[e.SAMPLER_BINDING=35097]="SAMPLER_BINDING",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",e[e.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",e[e.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",e[e.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",e[e.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",e[e.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",e[e.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",e[e.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",e[e.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",e[e.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",e[e.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",e[e.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",e[e.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",e[e.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",e[e.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",e[e.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",e[e.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",e[e.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",e[e.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",e[e.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",e[e.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",e[e.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",e[e.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",e[e.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",e[e.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",e[e.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",e[e.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",e[e.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",e[e.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",e[e.UNIFORM_TYPE=35383]="UNIFORM_TYPE",e[e.UNIFORM_SIZE=35384]="UNIFORM_SIZE",e[e.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",e[e.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",e[e.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",e[e.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",e[e.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",e[e.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",e[e.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",e[e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",e[e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS",e[e.SYNC_FENCE=37142]="SYNC_FENCE",e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED",e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED",e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",e[e.COLOR=6144]="COLOR",e[e.DEPTH=6145]="DEPTH",e[e.STENCIL=6146]="STENCIL",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STREAM_COPY=35042]="STREAM_COPY",e[e.STATIC_READ=35045]="STATIC_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",e[e.INVALID_INDEX=4294967295]="INVALID_INDEX",e[e.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",e[e.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",e[e.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",e[e.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",e[e.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",e[e.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",e[e.R16_EXT=33322]="R16_EXT",e[e.RG16_EXT=33324]="RG16_EXT",e[e.RGB16_EXT=32852]="RGB16_EXT",e[e.RGBA16_EXT=32859]="RGBA16_EXT",e[e.R16_SNORM_EXT=36760]="R16_SNORM_EXT",e[e.RG16_SNORM_EXT=36761]="RG16_SNORM_EXT",e[e.RGB16_SNORM_EXT=36762]="RGB16_SNORM_EXT",e[e.RGBA16_SNORM_EXT=36763]="RGBA16_SNORM_EXT",e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",e[e.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",e[e.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",e[e.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",e[e.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",e[e.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",e[e.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",e[e.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e[e.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",e[e.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",e[e.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",e[e.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",e[e.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",e[e.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",e[e.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",e[e.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",e[e.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",e[e.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",e[e.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",e[e.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",e[e.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",e[e.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",e[e.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",e[e.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",e[e.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",e[e.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",e[e.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",e[e.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",e[e.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR",e[e.DEPTH_CLAMP_EXT=34383]="DEPTH_CLAMP_EXT",e[e.FIRST_VERTEX_CONVENTION_WEBGL=36429]="FIRST_VERTEX_CONVENTION_WEBGL",e[e.LAST_VERTEX_CONVENTION_WEBGL=36430]="LAST_VERTEX_CONVENTION_WEBGL",e[e.PROVOKING_VERTEX_WEBL=36431]="PROVOKING_VERTEX_WEBL",e[e.POLYGON_MODE_WEBGL=2880]="POLYGON_MODE_WEBGL",e[e.POLYGON_OFFSET_LINE_WEBGL=10754]="POLYGON_OFFSET_LINE_WEBGL",e[e.LINE_WEBGL=6913]="LINE_WEBGL",e[e.FILL_WEBGL=6914]="FILL_WEBGL",e[e.MAX_CLIP_DISTANCES_WEBGL=3378]="MAX_CLIP_DISTANCES_WEBGL",e[e.MAX_CULL_DISTANCES_WEBGL=33529]="MAX_CULL_DISTANCES_WEBGL",e[e.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]="MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL",e[e.CLIP_DISTANCE0_WEBGL=12288]="CLIP_DISTANCE0_WEBGL",e[e.CLIP_DISTANCE1_WEBGL=12289]="CLIP_DISTANCE1_WEBGL",e[e.CLIP_DISTANCE2_WEBGL=12290]="CLIP_DISTANCE2_WEBGL",e[e.CLIP_DISTANCE3_WEBGL=12291]="CLIP_DISTANCE3_WEBGL",e[e.CLIP_DISTANCE4_WEBGL=12292]="CLIP_DISTANCE4_WEBGL",e[e.CLIP_DISTANCE5_WEBGL=12293]="CLIP_DISTANCE5_WEBGL",e[e.CLIP_DISTANCE6_WEBGL=12294]="CLIP_DISTANCE6_WEBGL",e[e.CLIP_DISTANCE7_WEBGL=12295]="CLIP_DISTANCE7_WEBGL",e[e.POLYGON_OFFSET_CLAMP_EXT=36379]="POLYGON_OFFSET_CLAMP_EXT",e[e.LOWER_LEFT_EXT=36001]="LOWER_LEFT_EXT",e[e.UPPER_LEFT_EXT=36002]="UPPER_LEFT_EXT",e[e.NEGATIVE_ONE_TO_ONE_EXT=37726]="NEGATIVE_ONE_TO_ONE_EXT",e[e.ZERO_TO_ONE_EXT=37727]="ZERO_TO_ONE_EXT",e[e.CLIP_ORIGIN_EXT=37724]="CLIP_ORIGIN_EXT",e[e.CLIP_DEPTH_MODE_EXT=37725]="CLIP_DEPTH_MODE_EXT",e[e.SRC1_COLOR_WEBGL=35065]="SRC1_COLOR_WEBGL",e[e.SRC1_ALPHA_WEBGL=34185]="SRC1_ALPHA_WEBGL",e[e.ONE_MINUS_SRC1_COLOR_WEBGL=35066]="ONE_MINUS_SRC1_COLOR_WEBGL",e[e.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]="ONE_MINUS_SRC1_ALPHA_WEBGL",e[e.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]="MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL",e[e.MIRROR_CLAMP_TO_EDGE_EXT=34627]="MIRROR_CLAMP_TO_EDGE_EXT"})(gy||(gy={}));const S6={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,35725:null,36006:null,36007:null,34229:null,34964:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32926:!1,32928:!1,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],36389:null,36662:null,36663:null,35053:null,35055:null,35723:4352,36010:null,35977:!1,3333:4,3317:4,37440:!1,37441:!1,37443:37444,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},zs=(e,t,r)=>t?e.enable(r):e.disable(r),LB=(e,t,r)=>e.hint(r,t),Dc=(e,t,r)=>e.pixelStorei(r,t),FB=(e,t,r)=>{const n=r===36006?36009:36008;return e.bindFramebuffer(n,t)},H1=(e,t,r)=>{const i={34964:34962,36662:36662,36663:36663,35053:35051,35055:35052}[r];e.bindBuffer(i,t)};function UT(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}const qOe={3042:zs,32773:(e,t)=>e.blendColor(...t),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(e,t)=>e.clearColor(...t),3107:(e,t)=>e.colorMask(...t),2884:zs,2885:(e,t)=>e.cullFace(t),2929:zs,2931:(e,t)=>e.clearDepth(t),2932:(e,t)=>e.depthFunc(t),2928:(e,t)=>e.depthRange(...t),2930:(e,t)=>e.depthMask(t),3024:zs,35723:LB,35725:(e,t)=>e.useProgram(t),36007:(e,t)=>e.bindRenderbuffer(36161,t),36389:(e,t)=>{var r;return(r=e.bindTransformFeedback)==null?void 0:r.call(e,36386,t)},34229:(e,t)=>e.bindVertexArray(t),36006:FB,36010:FB,34964:H1,36662:H1,36663:H1,35053:H1,35055:H1,2886:(e,t)=>e.frontFace(t),33170:LB,2849:(e,t)=>e.lineWidth(t),32823:zs,32824:"polygonOffset",10752:"polygonOffset",35977:zs,32926:zs,32928:zs,32938:"sampleCoverage",32939:"sampleCoverage",3089:zs,3088:(e,t)=>e.scissor(...t),2960:zs,2961:(e,t)=>e.clearStencil(t),2968:(e,t)=>e.stencilMaskSeparate(1028,t),36005:(e,t)=>e.stencilMaskSeparate(1029,t),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(e,t)=>e.viewport(...t),34383:zs,10754:zs,12288:zs,12289:zs,12290:zs,12291:zs,12292:zs,12293:zs,12294:zs,12295:zs,3333:Dc,3317:Dc,37440:Dc,37441:Dc,37443:Dc,3330:Dc,3332:Dc,3331:Dc,3314:Dc,32878:Dc,3316:Dc,3315:Dc,32877:Dc,framebuffer:(e,t)=>{const r=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,r)},blend:(e,t)=>t?e.enable(3042):e.disable(3042),blendColor:(e,t)=>e.blendColor(...t),blendEquation:(e,t)=>{const r=typeof t=="number"?[t,t]:t;e.blendEquationSeparate(...r)},blendFunc:(e,t)=>{const r=(t==null?void 0:t.length)===2?[...t,...t]:t;e.blendFuncSeparate(...r)},clearColor:(e,t)=>e.clearColor(...t),clearDepth:(e,t)=>e.clearDepth(t),clearStencil:(e,t)=>e.clearStencil(t),colorMask:(e,t)=>e.colorMask(...t),cull:(e,t)=>t?e.enable(2884):e.disable(2884),cullFace:(e,t)=>e.cullFace(t),depthTest:(e,t)=>t?e.enable(2929):e.disable(2929),depthFunc:(e,t)=>e.depthFunc(t),depthMask:(e,t)=>e.depthMask(t),depthRange:(e,t)=>e.depthRange(...t),dither:(e,t)=>t?e.enable(3024):e.disable(3024),derivativeHint:(e,t)=>{e.hint(35723,t)},frontFace:(e,t)=>e.frontFace(t),mipmapHint:(e,t)=>e.hint(33170,t),lineWidth:(e,t)=>e.lineWidth(t),polygonOffsetFill:(e,t)=>t?e.enable(32823):e.disable(32823),polygonOffset:(e,t)=>e.polygonOffset(...t),sampleCoverage:(e,t)=>e.sampleCoverage(...t),scissorTest:(e,t)=>t?e.enable(3089):e.disable(3089),scissor:(e,t)=>e.scissor(...t),stencilTest:(e,t)=>t?e.enable(2960):e.disable(2960),stencilMask:(e,t)=>{t=UT(t)?t:[t,t];const[r,n]=t;e.stencilMaskSeparate(1028,r),e.stencilMaskSeparate(1029,n)},stencilFunc:(e,t)=>{t=UT(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,l,s]=t;e.stencilFuncSeparate(1028,r,n,i),e.stencilFuncSeparate(1029,o,l,s)},stencilOp:(e,t)=>{t=UT(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,l,s]=t;e.stencilOpSeparate(1028,r,n,i),e.stencilOpSeparate(1029,o,l,s)},viewport:(e,t)=>e.viewport(...t)};function es(e,t,r){return t[e]!==void 0?t[e]:r[e]}const WOe={blendEquation:(e,t,r)=>e.blendEquationSeparate(es(32777,t,r),es(34877,t,r)),blendFunc:(e,t,r)=>e.blendFuncSeparate(es(32969,t,r),es(32968,t,r),es(32971,t,r),es(32970,t,r)),polygonOffset:(e,t,r)=>e.polygonOffset(es(32824,t,r),es(10752,t,r)),sampleCoverage:(e,t,r)=>e.sampleCoverage(es(32938,t,r),es(32939,t,r)),stencilFuncFront:(e,t,r)=>e.stencilFuncSeparate(1028,es(2962,t,r),es(2967,t,r),es(2963,t,r)),stencilFuncBack:(e,t,r)=>e.stencilFuncSeparate(1029,es(34816,t,r),es(36003,t,r),es(36004,t,r)),stencilOpFront:(e,t,r)=>e.stencilOpSeparate(1028,es(2964,t,r),es(2965,t,r),es(2966,t,r)),stencilOpBack:(e,t,r)=>e.stencilOpSeparate(1029,es(34817,t,r),es(34818,t,r),es(34819,t,r))},BB={enable:(e,t)=>e({[t]:!0}),disable:(e,t)=>e({[t]:!1}),pixelStorei:(e,t,r)=>e({[t]:r}),hint:(e,t,r)=>e({[t]:r}),useProgram:(e,t)=>e({35725:t}),bindRenderbuffer:(e,t,r)=>e({36007:r}),bindTransformFeedback:(e,t,r)=>e({36389:r}),bindVertexArray:(e,t)=>e({34229:t}),bindFramebuffer:(e,t,r)=>{switch(t){case 36160:return e({36006:r,36010:r});case 36009:return e({36006:r});case 36008:return e({36010:r});default:return null}},bindBuffer:(e,t,r)=>{const n={34962:[34964],36662:[36662],36663:[36663],35051:[35053],35052:[35055]}[t];return n?e({[n]:r}):{valueChanged:!0}},blendColor:(e,t,r,n,i)=>e({32773:new Float32Array([t,r,n,i])}),blendEquation:(e,t)=>e({32777:t,34877:t}),blendEquationSeparate:(e,t,r)=>e({32777:t,34877:r}),blendFunc:(e,t,r)=>e({32969:t,32968:r,32971:t,32970:r}),blendFuncSeparate:(e,t,r,n,i)=>e({32969:t,32968:r,32971:n,32970:i}),clearColor:(e,t,r,n,i)=>e({3106:new Float32Array([t,r,n,i])}),clearDepth:(e,t)=>e({2931:t}),clearStencil:(e,t)=>e({2961:t}),colorMask:(e,t,r,n,i)=>e({3107:[t,r,n,i]}),cullFace:(e,t)=>e({2885:t}),depthFunc:(e,t)=>e({2932:t}),depthRange:(e,t,r)=>e({2928:new Float32Array([t,r])}),depthMask:(e,t)=>e({2930:t}),frontFace:(e,t)=>e({2886:t}),lineWidth:(e,t)=>e({2849:t}),polygonOffset:(e,t,r)=>e({32824:t,10752:r}),sampleCoverage:(e,t,r)=>e({32938:t,32939:r}),scissor:(e,t,r,n,i)=>e({3088:new Int32Array([t,r,n,i])}),stencilMask:(e,t)=>e({2968:t,36005:t}),stencilMaskSeparate:(e,t,r)=>e({[t===1028?2968:36005]:r}),stencilFunc:(e,t,r,n)=>e({2962:t,2967:r,2963:n,34816:t,36003:r,36004:n}),stencilFuncSeparate:(e,t,r,n,i)=>e({[t===1028?2962:34816]:r,[t===1028?2967:36003]:n,[t===1028?2963:36004]:i}),stencilOp:(e,t,r,n)=>e({2964:t,2965:r,2966:n,34817:t,34818:r,34819:n}),stencilOpSeparate:(e,t,r,n,i)=>e({[t===1028?2964:34817]:r,[t===1028?2965:34818]:n,[t===1028?2966:34819]:i}),viewport:(e,t,r,n,i)=>e({2978:[t,r,n,i]})},Vh=(e,t)=>e.isEnabled(t),zB={3042:Vh,2884:Vh,2929:Vh,3024:Vh,32823:Vh,32926:Vh,32928:Vh,3089:Vh,2960:Vh,35977:Vh},XOe=new Set([34016,36388,36387,35983,35368,34965,35739,35738,3074,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34866,34867,34868,35097,32873,35869,32874,34068]);function W_(e,t){if(GOe(t))return;const r={};for(const i in t){const o=Number(i),l=qOe[i];l&&(typeof l=="string"?r[l]=!0:l(e,t[i],o))}const n=e.state&&e.state.cache;if(n)for(const i in r){const o=WOe[i];o(e,t,n)}}function gW(e,t=S6){if(typeof t=="number"){const i=t,o=zB[i];return o?o(e,i):e.getParameter(i)}const r=Array.isArray(t)?t:Object.keys(t),n={};for(const i of r){const o=zB[i];n[i]=o?o(e,Number(i)):e.getParameter(Number(i))}return n}function KOe(e){W_(e,S6)}function GOe(e){for(const t in e)return!1;return!0}function YOe(e,t){if(e===t)return!0;const r=Array.isArray(e)||ArrayBuffer.isView(e),n=Array.isArray(t)||ArrayBuffer.isView(t);if(r&&n&&e.length===t.length){for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return!1}class ZOe{constructor(t,{copyState:r=!1,log:n=()=>{}}={}){Ce(this,"gl");Ce(this,"program",null);Ce(this,"stateStack",[]);Ce(this,"enable",!0);Ce(this,"cache");Ce(this,"log");this.gl=t,this.cache=r?gW(t):Object.assign({},S6),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(t={}){this.stateStack.push({})}pop(){fo(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];W_(this.gl,t),this.stateStack.pop()}_updateCache(t){let r=!1,n;const i=this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null;for(const o in t){fo(o!==void 0);const l=t[o],s=this.cache[o];YOe(l,s)||(r=!0,n=s,i&&!(o in i)&&(i[o]=s),this.cache[o]=l)}return{valueChanged:r,oldValue:n}}}function am(e){return e.state}function mW(e,t){const{enable:r=!0,copyState:n}=t;if(fo(n!==void 0),!e.state){e.state=new ZOe(e,{copyState:n}),QOe(e);for(const o in BB){const l=BB[o];JOe(e,o,l)}$B(e,"getParameter"),$B(e,"isEnabled")}const i=am(e);return i.enable=r,e}function mA(e){let t=am(e);t||(mW(e,{copyState:!1}),t=am(e)),t.push()}function N2(e){const t=am(e);fo(t),t.pop()}function $B(e,t){const r=e[t].bind(e);e[t]=function(i){if(i===void 0||XOe.has(i))return r(i);const o=am(e);return i in o.cache||(o.cache[i]=r(i)),o.enable?o.cache[i]:r(i)},Object.defineProperty(e[t],"name",{value:`${t}-from-cache`,configurable:!1})}function JOe(e,t,r){if(!e[t])return;const n=e[t].bind(e);e[t]=function(...o){const l=am(e),{valueChanged:s,oldValue:f}=r(l._updateCache,...o);return s&&n(...o),f},Object.defineProperty(e[t],"name",{value:`${t}-to-cache`,configurable:!1})}function QOe(e){const t=e.useProgram.bind(e);e.useProgram=function(n){const i=am(e);i.program!==n&&(t(n),i.program=n)}}const eNe={powerPreference:"high-performance",onContextLost:()=>console.error("WebGL context lost"),onContextRestored:()=>console.info("WebGL context restored")};function tNe(e,t){t={...eNe,...t};let r=null;const n=o=>r=o.statusMessage||r;e.addEventListener("webglcontextcreationerror",n,!1);let i=null;if(i||(i=e.getContext("webgl2",t)),e.removeEventListener("webglcontextcreationerror",n,!1),!i)throw new Error(`Failed to create WebGL context: ${r||"Unknown error"}`);if(t.onContextLost){const{onContextLost:o}=t;e.addEventListener("webglcontextlost",l=>o(l),!1)}if(t.onContextRestored){const{onContextRestored:o}=t;e.addEventListener("webglcontextrestored",l=>o(l),!1)}return i}function Dp(e,t,r){return r[t]===void 0&&(r[t]=e.getExtension(t)||null),r[t]}function rNe(e,t){const r=e.getParameter(7936),n=e.getParameter(7937);Dp(e,"WEBGL_debug_renderer_info",t);const i=t.WEBGL_debug_renderer_info,o=e.getParameter(i?i.UNMASKED_VENDOR_WEBGL:7936),l=e.getParameter(i?i.UNMASKED_RENDERER_WEBGL:7937),s=o||r,f=l||n,p=e.getParameter(7938),v=yW(s,f),x=nNe(s,f),S=iNe(s,f);return{type:"webgl",gpu:v,gpuType:S,gpuBackend:x,vendor:s,renderer:f,version:p,shadingLanguage:"glsl",shadingLanguageVersion:300}}function yW(e,t){return/NVIDIA/i.exec(e)||/NVIDIA/i.exec(t)?"nvidia":/INTEL/i.exec(e)||/INTEL/i.exec(t)?"intel":/Apple/i.exec(e)||/Apple/i.exec(t)?"apple":/AMD/i.exec(e)||/AMD/i.exec(t)||/ATI/i.exec(e)||/ATI/i.exec(t)?"amd":/SwiftShader/i.exec(e)||/SwiftShader/i.exec(t)?"software":"unknown"}function nNe(e,t){return/Metal/i.exec(e)||/Metal/i.exec(t)?"metal":/ANGLE/i.exec(e)||/ANGLE/i.exec(t)?"opengl":"unknown"}function iNe(e,t){if(/SwiftShader/i.exec(e)||/SwiftShader/i.exec(t))return"cpu";switch(yW(e,t)){case"intel":return"integrated";case"software":return"cpu";case"unknown":return"unknown";default:return"discrete"}}function _W(e){switch(e){case"uint8":return 5121;case"sint8":return 5120;case"unorm8":return 5121;case"snorm8":return 5120;case"uint16":return 5123;case"sint16":return 5122;case"unorm16":return 5123;case"snorm16":return 5122;case"uint32":return 5125;case"sint32":return 5124;case"float16":return 5131;case"float32":return 5126}throw new Error(String(e))}const fl="texture-compression-bc",Ki="texture-compression-astc",Hh="texture-compression-etc2",oNe="texture-compression-etc1-webgl",Hx="texture-compression-pvrtc-webgl",jT="texture-compression-atc-webgl",q1="float32-renderable-webgl",VT="float16-renderable-webgl",sNe="rgb9e5ufloat_renderable-webgl",HT="snorm8-renderable-webgl",W1="norm16-renderable-webgl",qT="snorm16-renderable-webgl",qx="float32-filterable",UB="float16-filterable-webgl",dv="WEBGL_compressed_texture_s3tc",pv="WEBGL_compressed_texture_s3tc_srgb",my="EXT_texture_compression_rgtc",yy="EXT_texture_compression_bptc",aNe="WEBGL_compressed_texture_etc",lNe="WEBGL_compressed_texture_astc",cNe="WEBGL_compressed_texture_etc1",uNe="WEBGL_compressed_texture_pvrtc",hNe="WEBGL_compressed_texture_atc",jB="EXT_texture_norm16",VB="EXT_render_snorm",fNe="EXT_color_buffer_float",A6={"float32-renderable-webgl":["EXT_color_buffer_float"],"float16-renderable-webgl":["EXT_color_buffer_half_float"],"rgb9e5ufloat_renderable-webgl":["WEBGL_render_shared_exponent"],"snorm8-renderable-webgl":[VB],"norm16-renderable-webgl":[jB],"snorm16-renderable-webgl":[jB,VB],"float32-filterable":["OES_texture_float_linear"],"float16-filterable-webgl":["OES_texture_half_float_linear"],"texture-filterable-anisotropic-webgl":["EXT_texture_filter_anisotropic"],"texture-blend-float-webgl":["EXT_float_blend"],"texture-compression-bc":[dv,pv,my,yy],"texture-compression-bc5-webgl":[my],"texture-compression-bc7-webgl":[yy],"texture-compression-etc2":[aNe],"texture-compression-astc":[lNe],"texture-compression-etc1-webgl":[cNe],"texture-compression-pvrtc-webgl":[uNe],"texture-compression-atc-webgl":[hNe]};function dNe(e){return e in A6}function pNe(e,t,r){return(A6[t]||[]).every(i=>Dp(e,i,r))}const yA={"rgb8unorm-unsized":{gl:6407,b:4,c:2,bpp:4,dataFormat:6407,types:[5121,33635]},"rgba8unorm-unsized":{gl:6408,b:4,c:2,bpp:4,dataFormat:6408,types:[5121,32819,32820]},r8unorm:{gl:33321,b:1,c:1,rb:!0},r8snorm:{gl:36756,b:1,c:1,render:HT},r8uint:{gl:33330,b:1,c:1,rb:!0},r8sint:{gl:33329,b:1,c:1,rb:!0},rg8unorm:{gl:33323,b:2,c:2,rb:!0},rg8snorm:{gl:36757,b:2,c:2,render:HT},rg8uint:{gl:33336,b:2,c:2,rb:!0},rg8sint:{gl:33335,b:2,c:2,rb:!0},r16uint:{gl:33332,b:2,c:1,rb:!0},r16sint:{gl:33331,b:2,c:1,rb:!0},r16float:{gl:33325,b:2,c:1,render:VT,filter:"float16-filterable-webgl",rb:!0},"r16unorm-webgl":{gl:33322,b:2,c:1,f:W1,rb:!0},"r16snorm-webgl":{gl:36760,b:2,c:1,f:qT},"rgba4unorm-webgl":{gl:32854,b:2,c:4,wgpu:!1,rb:!0},"rgb565unorm-webgl":{gl:36194,b:2,c:4,wgpu:!1,rb:!0},"rgb5a1unorm-webgl":{gl:32855,b:2,c:4,wgpu:!1,rb:!0},"rgb8unorm-webgl":{gl:32849,b:3,c:3,wgpu:!1},"rgb8snorm-webgl":{gl:36758,b:3,c:3,wgpu:!1},rgba8unorm:{gl:32856,b:4,c:2,bpp:4},"rgba8unorm-srgb":{gl:35907,b:4,c:4,bpp:4},rgba8snorm:{gl:36759,b:4,c:4,render:HT},rgba8uint:{gl:36220,b:4,c:4,bpp:4},rgba8sint:{gl:36238,b:4,c:4,bpp:4},bgra8unorm:{b:4,c:4},"bgra8unorm-srgb":{b:4,c:4},rg16uint:{gl:33338,b:4,c:1,bpp:4},rg16sint:{gl:33337,b:4,c:2,bpp:4},rg16float:{gl:33327,bpp:4,b:4,c:2,render:VT,filter:UB,rb:!0},"rg16unorm-webgl":{gl:33324,b:2,c:2,render:W1},"rg16snorm-webgl":{gl:36761,b:2,c:2,render:qT},r32uint:{gl:33334,b:4,c:1,bpp:4,rb:!0},r32sint:{gl:33333,b:4,c:1,bpp:4,rb:!0},r32float:{gl:33326,bpp:4,b:4,c:1,render:q1,filter:qx},rgb9e5ufloat:{gl:35901,b:4,c:3,p:1,render:sNe},rg11b10ufloat:{gl:35898,b:4,c:3,p:1,render:q1,rb:!0},rgb10a2unorm:{gl:32857,b:4,c:4,p:1,rb:!0},"rgb10a2uint-webgl":{b:4,c:4,gl:36975,p:1,wgpu:!1,bpp:4,rb:!0},"rgb16unorm-webgl":{gl:32852,b:2,c:3,f:W1},"rgb16snorm-webgl":{gl:36762,b:2,c:3,f:W1},rg32uint:{gl:33340,b:8,c:2,rb:!0},rg32sint:{gl:33339,b:8,c:2,rb:!0},rg32float:{gl:33328,b:8,c:2,render:q1,filter:qx,rb:!0},rgba16uint:{gl:36214,b:8,c:4,rb:!0},rgba16sint:{gl:36232,b:8,c:4,rb:!0},rgba16float:{gl:34842,b:8,c:4,render:VT,filter:UB},"rgba16unorm-webgl":{gl:32859,b:2,c:4,render:W1,rb:!0},"rgba16snorm-webgl":{gl:36763,b:2,c:4,render:qT},"rgb32float-webgl":{gl:34837,render:q1,filter:qx,gl2ext:fNe,dataFormat:6407,types:[5126]},rgba32uint:{gl:36208,b:16,c:4,rb:!0},rgba32sint:{gl:36226,b:16,c:4,rb:!0},rgba32float:{gl:34836,b:16,c:4,render:q1,filter:qx,rb:!0},stencil8:{gl:36168,b:1,c:1,attachment:36128,rb:!0},depth16unorm:{gl:33189,b:2,c:1,attachment:36096,dataFormat:6402,types:[5123],rb:!0},depth24plus:{gl:33190,b:3,c:1,attachment:36096,dataFormat:6402,types:[5125]},depth32float:{gl:36012,b:4,c:1,attachment:36096,dataFormat:6402,types:[5126],rb:!0},"depth24plus-stencil8":{gl:35056,b:4,c:2,p:1,attachment:33306,rb:!0,depthTexture:!0,dataFormat:34041,types:[34042]},"depth24unorm-stencil8":{gl:35056,b:4,c:2,p:1,attachment:33306,dataFormat:34041,types:[34042],rb:!0},"depth32float-stencil8":{gl:36013,b:5,c:2,p:1,attachment:33306,dataFormat:34041,types:[36269],rb:!0},"bc1-rgb-unorm-webgl":{gl:33776,x:dv,f:fl},"bc1-rgb-unorm-srgb-webgl":{gl:35916,x:pv,f:fl},"bc1-rgba-unorm":{gl:33777,x:dv,f:fl},"bc1-rgba-unorm-srgb":{gl:35916,x:pv,f:fl},"bc2-rgba-unorm":{gl:33778,x:dv,f:fl},"bc2-rgba-unorm-srgb":{gl:35918,x:pv,f:fl},"bc3-rgba-unorm":{gl:33779,x:dv,f:fl},"bc3-rgba-unorm-srgb":{gl:35919,x:pv,f:fl},"bc4-r-unorm":{gl:36283,x:my,f:fl},"bc4-r-snorm":{gl:36284,x:my,f:fl},"bc5-rg-unorm":{gl:36285,x:my,f:fl},"bc5-rg-snorm":{gl:36286,x:my,f:fl},"bc6h-rgb-ufloat":{gl:36495,x:yy,f:fl},"bc6h-rgb-float":{gl:36494,x:yy,f:fl},"bc7-rgba-unorm":{gl:36492,x:yy,f:fl},"bc7-rgba-unorm-srgb":{gl:36493,x:yy,f:fl},"etc2-rgb8unorm":{gl:37492,f:Hh},"etc2-rgb8unorm-srgb":{gl:37494,f:Hh},"etc2-rgb8a1unorm":{gl:37496,f:Hh},"etc2-rgb8a1unorm-srgb":{gl:37497,f:Hh},"etc2-rgba8unorm":{gl:37493,f:Hh},"etc2-rgba8unorm-srgb":{gl:37495,f:Hh},"eac-r11unorm":{gl:37488,f:Hh},"eac-r11snorm":{gl:37489,f:Hh},"eac-rg11unorm":{gl:37490,f:Hh},"eac-rg11snorm":{gl:37491,f:Hh},"astc-4x4-unorm":{gl:37808,f:Ki},"astc-4x4-unorm-srgb":{gl:37840,f:Ki},"astc-5x4-unorm":{gl:37809,f:Ki},"astc-5x4-unorm-srgb":{gl:37841,f:Ki},"astc-5x5-unorm":{gl:37810,f:Ki},"astc-5x5-unorm-srgb":{gl:37842,f:Ki},"astc-6x5-unorm":{gl:37811,f:Ki},"astc-6x5-unorm-srgb":{gl:37843,f:Ki},"astc-6x6-unorm":{gl:37812,f:Ki},"astc-6x6-unorm-srgb":{gl:37844,f:Ki},"astc-8x5-unorm":{gl:37813,f:Ki},"astc-8x5-unorm-srgb":{gl:37845,f:Ki},"astc-8x6-unorm":{gl:37814,f:Ki},"astc-8x6-unorm-srgb":{gl:37846,f:Ki},"astc-8x8-unorm":{gl:37815,f:Ki},"astc-8x8-unorm-srgb":{gl:37847,f:Ki},"astc-10x5-unorm":{gl:37819,f:Ki},"astc-10x5-unorm-srgb":{gl:37851,f:Ki},"astc-10x6-unorm":{gl:37817,f:Ki},"astc-10x6-unorm-srgb":{gl:37849,f:Ki},"astc-10x8-unorm":{gl:37818,f:Ki},"astc-10x8-unorm-srgb":{gl:37850,f:Ki},"astc-10x10-unorm":{gl:37819,f:Ki},"astc-10x10-unorm-srgb":{gl:37851,f:Ki},"astc-12x10-unorm":{gl:37820,f:Ki},"astc-12x10-unorm-srgb":{gl:37852,f:Ki},"astc-12x12-unorm":{gl:37821,f:Ki},"astc-12x12-unorm-srgb":{gl:37853,f:Ki},"pvrtc-rgb4unorm-webgl":{gl:35840,f:Hx},"pvrtc-rgba4unorm-webgl":{gl:35842,f:Hx},"pvrtc-rbg2unorm-webgl":{gl:35841,f:Hx},"pvrtc-rgba2unorm-webgl":{gl:35843,f:Hx},"etc1-rbg-unorm-webgl":{gl:36196,f:oNe},"atc-rgb-unorm-webgl":{gl:35986,f:jT},"atc-rgba-unorm-webgl":{gl:35986,f:jT},"atc-rgbai-unorm-webgl":{gl:34798,f:jT}},gNe={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},mNe={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function E6(e,t,r){const n=yA[t];if(!n||n.gl===void 0)return!1;const i=n.x||n.gl2ext;return i?!!Dp(e,i,r):!0}function vW(e){const t=yA[e],r=t==null?void 0:t.gl;if(r===void 0)throw new Error(`Unsupported texture format ${e}`);return r}function yNe(e,t,r){if(!E6(e,t,r)||t.startsWith("depth")||t.startsWith("stencil"))return!1;try{if(Pq(t).signed)return!1}catch{return!1}return t.endsWith("32float")?!!Dp(e,"OES_texture_float_linear, extensions",r):t.endsWith("16float")?!!Dp(e,"OES_texture_half_float_linear, extensions",r):!0}function _Ne(e,t,r){return!(!E6(e,t,r)||typeof t=="number")}function oS(e){var i;const t=yA[e],r=vW(e),n=Pq(e);return{format:r,dataFormat:(t==null?void 0:t.dataFormat)||bNe(n.format,n.integer,n.normalized,r),type:n.dataType?_W(n.dataType):((i=t==null?void 0:t.types)==null?void 0:i[0])||5121,compressed:n.compressed}}function vNe(e){const t=yA[e];if(!(t!=null&&t.attachment))throw new Error(`${e} is not a depth stencil format`);return t.attachment}function HB(e){const t=oS(e),r=gNe[t.dataFormat]||4,n=mNe[t.type]||1;return r*n}function bNe(e,t,r,n){if(n===6408||n===6407)return n;switch(e){case"r":return t&&!r?36244:6403;case"rg":return t&&!r?33320:33319;case"rgb":return t&&!r?36248:6407;case"rgba":return t&&!r?36249:6408;default:return 6408}}const qB={"depth-clip-control":"EXT_depth_clamp","timer-query-webgl":"EXT_disjoint_timer_query_webgl2","compilation-status-async-webgl":"KHR_parallel_shader_compile","polygon-mode-webgl":"WEBGL_polygon_mode","provoking-vertex-webgl":"WEBGL_provoking_vertex","shader-clip-cull-distance-webgl":"WEBGL_clip_cull_distance","shader-noperspective-interpolation-webgl":"NV_shader_noperspective_interpolation","shader-conservative-depth-webgl":"EXT_conservative_depth"};class xNe extends WRe{constructor(r,n,i){super([],i);Ce(this,"gl");Ce(this,"extensions");Ce(this,"testedFeatures",new Set);this.gl=r,this.extensions=n,Dp(r,"EXT_color_buffer_float",n)}*[Symbol.iterator](){const r=this.getFeatures();for(const n of r)this.has(n)&&(yield n);return[]}has(r){return this.disabledFeatures[r]?!1:(this.testedFeatures.has(r)||(this.testedFeatures.add(r),dNe(r)&&pNe(this.gl,r,this.extensions)&&this.features.add(r),this.getWebGLFeature(r)&&this.features.add(r)),this.features.has(r))}initializeFeatures(){const r=this.getFeatures().filter(n=>n!=="polygon-mode-webgl");for(const n of r)this.has(n)}getFeatures(){return[...Object.keys(qB),...Object.keys(A6)]}getWebGLFeature(r){const n=qB[r];return typeof n=="string"?!!Dp(this.gl,n,this.extensions):!!n}}class wNe extends qRe{constructor(r){super();Ce(this,"gl");Ce(this,"limits",{});this.gl=r}get maxTextureDimension1D(){return 0}get maxTextureDimension2D(){return this.getParameter(3379)}get maxTextureDimension3D(){return this.getParameter(32883)}get maxTextureArrayLayers(){return this.getParameter(35071)}get maxBindGroups(){return 0}get maxDynamicUniformBuffersPerPipelineLayout(){return 0}get maxDynamicStorageBuffersPerPipelineLayout(){return 0}get maxSampledTexturesPerShaderStage(){return this.getParameter(35660)}get maxSamplersPerShaderStage(){return this.getParameter(35661)}get maxStorageBuffersPerShaderStage(){return 0}get maxStorageTexturesPerShaderStage(){return 0}get maxUniformBuffersPerShaderStage(){return this.getParameter(35375)}get maxUniformBufferBindingSize(){return this.getParameter(35376)}get maxStorageBufferBindingSize(){return 0}get minUniformBufferOffsetAlignment(){return this.getParameter(35380)}get minStorageBufferOffsetAlignment(){return 0}get maxVertexBuffers(){return 16}get maxVertexAttributes(){return this.getParameter(34921)}get maxVertexBufferArrayStride(){return 2048}get maxInterStageShaderComponents(){return this.getParameter(35659)}get maxComputeWorkgroupStorageSize(){return 0}get maxComputeInvocationsPerWorkgroup(){return 0}get maxComputeWorkgroupSizeX(){return 0}get maxComputeWorkgroupSizeY(){return 0}get maxComputeWorkgroupSizeZ(){return 0}get maxComputeWorkgroupsPerDimension(){return 0}getParameter(r){return this.limits[r]===void 0&&(this.limits[r]=this.gl.getParameter(r)),this.limits[r]}}function _p(e,t,r){if(SNe(t))return r(e);const{nocatch:n=!0}=t;mA(e),W_(e,t);let i;if(n)i=r(e),N2(e);else try{i=r(e)}finally{N2(e)}return i}function SNe(e){for(const t in e)return!1;return!0}function ANe(e,t,r,n){if(W5(t))return n(e);const i=e;mA(i.gl);try{return ENe(e,t),W_(i.gl,r),n(e)}finally{N2(i.gl)}}function ENe(e,t){const r=e,{gl:n}=r;if(t.cullMode)switch(t.cullMode){case"none":n.disable(2884);break;case"front":n.enable(2884),n.cullFace(1028);break;case"back":n.enable(2884),n.cullFace(1029);break}if(t.frontFace&&n.frontFace(qg("frontFace",t.frontFace,{ccw:2305,cw:2304})),t.unclippedDepth&&e.features.has("depth-clip-control")&&n.enable(34383),t.depthBias!==void 0&&(n.enable(32823),n.polygonOffset(t.depthBias,t.depthBiasSlopeScale||0)),t.provokingVertex&&e.features.has("provoking-vertex-webgl")){const o=r.getExtension("WEBGL_provoking_vertex").WEBGL_provoking_vertex,l=qg("provokingVertex",t.provokingVertex,{first:36429,last:36430});o==null||o.provokingVertexWEBGL(l)}if((t.polygonMode||t.polygonOffsetLine)&&e.features.has("polygon-mode-webgl")){if(t.polygonMode){const o=r.getExtension("WEBGL_polygon_mode").WEBGL_polygon_mode,l=qg("polygonMode",t.polygonMode,{fill:6914,line:6913});o==null||o.polygonModeWEBGL(1028,l),o==null||o.polygonModeWEBGL(1029,l)}t.polygonOffsetLine&&n.enable(10754)}if(e.features.has("shader-clip-cull-distance-webgl")&&(t.clipDistance0&&n.enable(12288),t.clipDistance1&&n.enable(12289),t.clipDistance2&&n.enable(12290),t.clipDistance3&&n.enable(12291),t.clipDistance4&&n.enable(12292),t.clipDistance5&&n.enable(12293),t.clipDistance6&&n.enable(12294),t.clipDistance7&&n.enable(12295)),t.depthWriteEnabled!==void 0&&n.depthMask(CNe("depthWriteEnabled",t.depthWriteEnabled)),t.depthCompare&&(t.depthCompare!=="always"?n.enable(2929):n.disable(2929),n.depthFunc(IP("depthCompare",t.depthCompare))),t.stencilWriteMask){const i=t.stencilWriteMask;n.stencilMaskSeparate(1028,i),n.stencilMaskSeparate(1029,i)}if(t.stencilReadMask&&pr.warn("stencilReadMask not supported under WebGL"),t.stencilCompare){const i=t.stencilReadMask||4294967295,o=IP("depthCompare",t.stencilCompare);t.stencilCompare!=="always"?n.enable(2960):n.disable(2960),n.stencilFuncSeparate(1028,o,0,i),n.stencilFuncSeparate(1029,o,0,i)}if(t.stencilPassOperation&&t.stencilFailOperation&&t.stencilDepthFailOperation){const i=WT("stencilPassOperation",t.stencilPassOperation),o=WT("stencilFailOperation",t.stencilFailOperation),l=WT("stencilDepthFailOperation",t.stencilDepthFailOperation);n.stencilOpSeparate(1028,o,l,i),n.stencilOpSeparate(1029,o,l,i)}if(t.blendColorOperation||t.blendAlphaOperation){n.enable(3042);const i=WB("blendColorOperation",t.blendColorOperation||"add"),o=WB("blendAlphaOperation",t.blendAlphaOperation||"add");n.blendEquationSeparate(i,o);const l=Wx("blendColorSrcFactor",t.blendColorSrcFactor||"one"),s=Wx("blendColorDstFactor",t.blendColorDstFactor||"zero"),f=Wx("blendAlphaSrcFactor",t.blendAlphaSrcFactor||"one"),p=Wx("blendAlphaDstFactor",t.blendAlphaDstFactor||"zero");n.blendFuncSeparate(l,s,f,p)}}function IP(e,t){return qg(e,t,{never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519})}function WT(e,t){return qg(e,t,{keep:7680,zero:0,replace:7681,invert:5386,"increment-clamp":7682,"decrement-clamp":7683,"increment-wrap":34055,"decrement-wrap":34056})}function WB(e,t){return qg(e,t,{add:32774,subtract:32778,"reverse-subtract":32779,min:32775,max:32776})}function Wx(e,t){return qg(e,t,{one:1,zero:0,"src-color":768,"one-minus-src-color":769,"dst-color":774,"one-minus-dst-color":775,"src-alpha":770,"one-minus-src-alpha":771,"dst-alpha":772,"one-minus-dst-alpha":773,"src-alpha-saturated":776,"constant-color":32769,"one-minus-constant-color":32770,"constant-alpha":32771,"one-minus-constant-alpha":32772})}function TNe(e,t){return`Illegal parameter ${t} for ${e}`}function qg(e,t,r){if(!(t in r))throw new Error(TNe(e,t));return r[t]}function CNe(e,t){return t}function bW(e){const t={};return e.addressModeU&&(t[10242]=XT(e.addressModeU)),e.addressModeV&&(t[10243]=XT(e.addressModeV)),e.addressModeW&&(t[32882]=XT(e.addressModeW)),e.magFilter&&(t[10240]=xW(e.magFilter)),(e.minFilter||e.mipmapFilter)&&(t[10241]=PNe(e.minFilter||"linear",e.mipmapFilter)),e.lodMinClamp!==void 0&&(t[33082]=e.lodMinClamp),e.lodMaxClamp!==void 0&&(t[33083]=e.lodMaxClamp),e.type==="comparison-sampler"&&(t[34892]=34894),e.compare&&(t[34893]=IP("compare",e.compare)),e.maxAnisotropy&&(t[34046]=e.maxAnisotropy),t}function XT(e){switch(e){case"clamp-to-edge":return 33071;case"repeat":return 10497;case"mirror-repeat":return 33648}}function xW(e){switch(e){case"nearest":return 9728;case"linear":return 9729}}function PNe(e,t){if(!t)return xW(e);switch(e){case"nearest":return t==="nearest"?9984:9986;case"linear":return t==="nearest"?9985:9987}}class Cp extends Vo{constructor(r,n={}){super(r,n);Ce(this,"device");Ce(this,"gl");Ce(this,"handle");Ce(this,"glTarget");Ce(this,"glUsage");Ce(this,"glIndexType",5123);Ce(this,"byteLength");Ce(this,"bytesUsed");this.device=r,this.gl=this.device.gl;const i=typeof n=="object"?n.handle:void 0;this.handle=i||this.gl.createBuffer(),r.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glTarget=INe(this.props.usage),this.glUsage=RNe(this.props.usage),this.glIndexType=this.props.indexType==="uint32"?5125:5123,n.data?this._initWithData(n.data,n.byteOffset,n.byteLength):this._initWithByteLength(n.byteLength||0)}_initWithData(r,n=0,i=r.byteLength+n){const o=this.glTarget;this.gl.bindBuffer(o,this.handle),this.gl.bufferData(o,i,this.glUsage),this.gl.bufferSubData(o,n,r),this.gl.bindBuffer(o,null),this.bytesUsed=i,this.byteLength=i,this._setDebugData(r,n,i),this.trackAllocatedMemory(i)}_initWithByteLength(r){fo(r>=0);let n=r;r===0&&(n=new Float32Array(0));const i=this.glTarget;return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.glUsage),this.gl.bindBuffer(i,null),this.bytesUsed=r,this.byteLength=r,this._setDebugData(null,0,r),this.trackAllocatedMemory(r),this}destroy(){!this.destroyed&&this.handle&&(this.removeStats(),this.trackDeallocatedMemory(),this.gl.deleteBuffer(this.handle),this.destroyed=!0,this.handle=null)}write(r,n=0){this.gl.bindBuffer(36663,this.handle),this.gl.bufferSubData(36663,n,r),this.gl.bindBuffer(36663,null),this._setDebugData(r,n,r.byteLength)}async readAsync(r=0,n){return this.readSyncWebGL(r,n)}readSyncWebGL(r=0,n){n=n??this.byteLength-r;const i=new Uint8Array(n),o=0;return this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,r,i,o,n),this.gl.bindBuffer(36662,null),this._setDebugData(i,r,n),i}}function INe(e){return e&Vo.INDEX?34963:e&Vo.VERTEX?34962:e&Vo.UNIFORM?35345:34962}function RNe(e){return e&Vo.INDEX||e&Vo.VERTEX?35044:e&Vo.UNIFORM?35048:35044}class RP extends G5{constructor(r,n){super(r,n);Ce(this,"device");Ce(this,"handle");Ce(this,"parameters");this.device=r,this.parameters=bW(n),this.handle=this.handle||this.device.gl.createSampler(),this._setSamplerParameters(this.parameters)}destroy(){this.handle&&(this.device.gl.deleteSampler(this.handle),this.handle=void 0)}toString(){return`Sampler(${this.id},${JSON.stringify(this.props)})`}_setSamplerParameters(r){for(const[n,i]of Object.entries(r)){const o=Number(n);switch(o){case 33082:case 33083:this.device.gl.samplerParameterf(this.handle,o,i);break;default:this.device.gl.samplerParameteri(this.handle,o,i);break}}}}class _y extends X5{constructor(r,n){super(r,{...Au.defaultProps,...n});Ce(this,"device");Ce(this,"gl");Ce(this,"handle");Ce(this,"texture");this.device=r,this.gl=this.device.gl,this.handle=null,this.texture=n.texture}}const kNe={parameters:{},pixelStore:{},pixels:null,border:0,dataFormat:void 0,textureUnit:void 0,target:void 0},jv=class jv extends Au{constructor(r,n){var i;super(r,{...kNe,format:"rgba8unorm",...n});Ce(this,"MAX_ATTRIBUTES");Ce(this,"device");Ce(this,"gl");Ce(this,"handle");Ce(this,"sampler");Ce(this,"view");Ce(this,"glFormat");Ce(this,"type");Ce(this,"dataFormat");Ce(this,"mipmaps");Ce(this,"target");Ce(this,"textureUnit");Ce(this,"loaded",!1);Ce(this,"_video");this.device=r,this.gl=this.device.gl,this.handle=this.props.handle||this.gl.createTexture(),this.device.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glFormat=6408,this.target=MNe(this.props),this.loaded=!1,typeof((i=this.props)==null?void 0:i.data)=="string"&&Object.assign(this.props,{data:Oke(this.props.data)}),this.initialize(this.props),Object.seal(this)}destroy(){this.handle&&(this.gl.deleteTexture(this.handle),this.removeStats(),this.trackDeallocatedMemory("Texture"),this.destroyed=!0)}toString(){return`Texture(${this.id},${this.width}x${this.height})`}createView(r){return new _y(this.device,{...r,texture:this})}initialize(r={}){if(this.props.dimension==="cube")return this.initializeCube(r);let n=r.data;if(n instanceof Promise)return n.then(N=>this.initialize(Object.assign({},r,{pixels:N,data:N}))),this;const i=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(i&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(r)),this;const{parameters:o={}}=r,{pixels:l=null,pixelStore:s={},textureUnit:f=void 0,mipmaps:p=!0}=r;n||(n=l);let{width:v,height:x,dataFormat:S,type:A,compressed:k=!1}=r;const{depth:R=0}=r,z=vW(r.format);return{width:v,height:x,compressed:k,dataFormat:S,type:A}=this._deduceParameters({format:r.format,type:A,dataFormat:S,compressed:k,data:n,width:v,height:x}),this.width=v,this.height=x,this.glFormat=z,this.type=A,this.dataFormat=S,this.textureUnit=f,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),this.mipmaps=p,this.setImageData({data:n,width:v,height:x,depth:R,format:r.format,type:A,dataFormat:S,parameters:s,compressed:k}),this.setSampler(r.sampler),this._setSamplerParameters(o),this.view=this.createView({...this.props,mipLevelCount:1,arrayLayerCount:1}),p&&this.device.isTextureFormatFilterable(r.format)&&this.generateMipmap(),i&&(this._video={video:n,parameters:o,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}initializeCube(r){const{mipmaps:n=!0,parameters:i={}}=r;return this.setCubeMapImageData(r).then(()=>{this.loaded=!0,n&&this.generateMipmap(r),this.setSampler(r.sampler),this._setSamplerParameters(i)}),this}setSampler(r={}){let n;r instanceof RP?(this.sampler=r,n=r.props):(this.sampler=new RP(this.device,r),n=r);const i=bW(n);return this._setSamplerParameters(i),this}resize(r){const{height:n,width:i,mipmaps:o=!1}=r;return i!==this.width||n!==this.height?this.initialize({width:i,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,mipmaps:o}):this}update(){if(this._video){const{video:r,parameters:n,lastTime:i}=this._video;if(i===r.currentTime||r.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:r,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=r.currentTime}}generateMipmap(r={}){return this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),_p(this.gl,r,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this}setImageData(r){if(this.props.dimension==="3d"||this.props.dimension==="2d-array")return this.setImageData3D(r);this.trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:i=null,level:o=0,glFormat:l=this.glFormat,offset:s=0,parameters:f={}}=r;let{data:p=null,type:v=this.type,width:x=this.width,height:S=this.height,dataFormat:A=this.dataFormat,compressed:k=!1}=r;p||(p=i),{type:v,dataFormat:A,compressed:k,width:x,height:S}=this._deduceParameters({format:this.props.format,type:v,dataFormat:A,compressed:k,data:p,width:x,height:S});const{gl:R}=this;R.bindTexture(this.target,this.handle);let z=null;if({data:p,dataType:z}=this._getDataType({data:p,compressed:k}),_p(this.gl,f,()=>{switch(z){case"null":R.texImage2D(n,o,l,x,S,0,A,v,p);break;case"typed-array":R.texImage2D(n,o,l,x,S,0,A,v,p,s);break;case"buffer":this.device.gl.bindBuffer(35052,p.handle||p),this.device.gl.texImage2D(n,o,l,x,S,0,A,v,s),this.device.gl.bindBuffer(35052,null);break;case"browser-object":R.texImage2D(n,o,l,x,S,0,A,v,p);break;case"compressed":for(const[N,B]of p.entries())R.compressedTexImage2D(n,N,B.format,B.width,B.height,0,B.data);break;default:fo(!1,"Unknown image data type")}}),p&&p.byteLength)this.trackAllocatedMemory(p.byteLength,"Texture");else{const N=HB(this.props.format);this.trackAllocatedMemory(this.width*this.height*N,"Texture")}return this.loaded=!0,this}setSubImageData({target:r=this.target,pixels:n=null,data:i=null,x:o=0,y:l=0,width:s=this.width,height:f=this.height,level:p=0,glFormat:v=this.glFormat,type:x=this.type,dataFormat:S=this.dataFormat,compressed:A=!1,offset:k=0,parameters:R={}}){if({type:x,dataFormat:S,compressed:A,width:s,height:f}=this._deduceParameters({format:this.props.format,type:x,dataFormat:S,compressed:A,data:i,width:s,height:f}),fo(this.depth===1,"texSubImage not supported for 3D textures"),i||(i=n),i&&i.data){const z=i;i=z.data,s=z.shape[0],f=z.shape[1]}i instanceof Cp&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),_p(this.gl,R,()=>{A?this.gl.compressedTexSubImage2D(r,p,o,l,s,f,v,i):i===null?this.gl.texSubImage2D(r,p,o,l,s,f,S,x,null):ArrayBuffer.isView(i)?this.gl.texSubImage2D(r,p,o,l,s,f,S,x,i,k):typeof WebGLBuffer<"u"&&i instanceof WebGLBuffer?(this.device.gl.bindBuffer(35052,i),this.device.gl.texSubImage2D(r,p,o,l,s,f,S,x,k),this.device.gl.bindBuffer(35052,null)):this.device.gl.texSubImage2D(r,p,o,l,s,f,S,x,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(r={}){return pr.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(r=this.textureUnit){const{gl:n}=this;return r!==void 0&&(this.textureUnit=r,n.activeTexture(33984+r)),n.bindTexture(this.target,this.handle),r}unbind(r=this.textureUnit){const{gl:n}=this;return r!==void 0&&(this.textureUnit=r,n.activeTexture(33984+r)),n.bindTexture(this.target,null),r}_getDataType({data:r,compressed:n=!1}){return n?{data:r,dataType:"compressed"}:r===null?{data:r,dataType:"null"}:ArrayBuffer.isView(r)?{data:r,dataType:"typed-array"}:r instanceof Cp?{data:r.handle,dataType:"buffer"}:typeof WebGLBuffer<"u"&&r instanceof WebGLBuffer?{data:r,dataType:"buffer"}:{data:r,dataType:"browser-object"}}_deduceParameters(r){const{format:n,data:i}=r;let{width:o,height:l,dataFormat:s,type:f,compressed:p}=r;const v=oS(n);return s=s||v.dataFormat,f=f||v.type,p=p||v.compressed,{width:o,height:l}=this._deduceImageSize(i,o,l),{dataFormat:s,type:f,compressed:p,width:o,height:l,format:n,data:i}}_deduceImageSize(r,n,i){let o;return typeof ImageData<"u"&&r instanceof ImageData?o={width:r.width,height:r.height}:typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement?o={width:r.naturalWidth,height:r.naturalHeight}:typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement?o={width:r.width,height:r.height}:typeof ImageBitmap<"u"&&r instanceof ImageBitmap?o={width:r.width,height:r.height}:typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement?o={width:r.videoWidth,height:r.videoHeight}:r?o={width:n,height:i}:o={width:n>=0?n:1,height:i>=0?i:1},fo(o,"Could not deduced texture size"),fo(n===void 0||o.width===n,"Deduced texture width does not match supplied width"),fo(i===void 0||o.height===i,"Deduced texture height does not match supplied height"),o}async setCubeMapImageData(r){const{gl:n}=this,{width:i,height:o,pixels:l,data:s,format:f=6408,type:p=5121}=r,v=l||s,x=await Promise.all(jv.FACES.map(S=>{const A=v[S];return Promise.all(Array.isArray(A)?A:[A])}));this.bind(),jv.FACES.forEach((S,A)=>{x[A].length>1&&this.props.mipmaps!==!1&&pr.warn(`${this.id} has mipmap and multiple LODs.`)(),x[A].forEach((k,R)=>{i&&o?n.texImage2D(S,R,f,i,o,0,f,p,k):n.texImage2D(S,R,f,f,p,k)})}),this.unbind()}setImageDataForFace(r){const{face:n,width:i,height:o,pixels:l,data:s,format:f=6408,type:p=5121}=r,{gl:v}=this,x=l||s;return this.bind(),x instanceof Promise?x.then(S=>this.setImageDataForFace(Object.assign({},r,{face:n,data:S,pixels:S}))):this.width||this.height?v.texImage2D(n,0,f,i,o,0,f,p,x):v.texImage2D(n,0,f,f,p,x),this}setImageData3D(r){const{level:n=0,dataFormat:i,format:o,type:l,width:s,height:f,depth:p=1,offset:v=0,data:x,parameters:S={}}=r;this.trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle);const A=oS(o);if(_p(this.gl,S,()=>{ArrayBuffer.isView(x)&&this.gl.texImage3D(this.target,n,A.format,s,f,p,0,A.dataFormat,A.type,x),x instanceof Cp&&(this.gl.bindBuffer(35052,x.handle),this.gl.texImage3D(this.target,n,i,s,f,p,0,o,l,v))}),x&&x.byteLength)this.trackAllocatedMemory(x.byteLength,"Texture");else{const k=HB(this.props.format);this.trackAllocatedMemory(this.width*this.height*this.depth*k,"Texture")}return this.loaded=!0,this}_setSamplerParameters(r){if(!W5(r)){ONe(r),this.gl.bindTexture(this.target,this.handle);for(const[n,i]of Object.entries(r)){const o=Number(n),l=i;switch(o){case 33082:case 33083:this.gl.texParameterf(this.target,o,l);break;default:this.gl.texParameteri(this.target,o,l);break}}this.gl.bindTexture(this.target,null)}}};Ce(jv,"FACES",[34069,34070,34071,34072,34073,34074]);let uf=jv;function MNe(e){switch(e.dimension){case"2d":return 3553;case"cube":return 34067;case"2d-array":return 35866;case"3d":return 32879;case"1d":case"cube-array":default:throw new Error(e.dimension)}}function ONe(e){pr.log(1,"texture sampler parameters",e)()}class Fv extends Y5{constructor(r,n){super(r,n);Ce(this,"device");Ce(this,"gl");Ce(this,"handle");const i=n.handle===null;if(this.device=r,this.gl=r.gl,this.handle=this.props.handle||i?this.props.handle:this.gl.createFramebuffer(),!i){r.setSpectorMetadata(this.handle,{id:this.props.id,props:this.props}),this.autoCreateAttachmentTextures();const o=this.gl.bindFramebuffer(36160,this.handle);for(let l=0;l<this.colorAttachments.length;++l){const s=this.colorAttachments[l],f=36064+l;s&&this._attachOne(f,s)}if(this.depthStencilAttachment&&this._attachOne(vNe(this.depthStencilAttachment.props.format),this.depthStencilAttachment),n.check!==!1){const l=this.gl.checkFramebufferStatus(36160);if(l!==36053)throw new Error(`Framebuffer ${DNe(l)}`)}this.gl.bindFramebuffer(36160,o)}}get texture(){return this.colorAttachments[0]}destroy(){super.destroy(),!this.destroyed&&this.handle!==null&&this.gl.deleteFramebuffer(this.handle)}createDepthStencilTexture(r){return new uf(this.device,{id:`${this.id}-depth-stencil`,format:r,width:this.width,height:this.height,mipmaps:!1})}resizeAttachments(r,n){if(this.handle===null)return this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;r===void 0&&(r=this.gl.drawingBufferWidth),n===void 0&&(n=this.gl.drawingBufferHeight);for(const i of this.colorAttachments)i.texture.resize({width:r,height:n});return this.depthStencilAttachment&&this.depthStencilAttachment.texture.resize({width:r,height:n}),this}_attachOne(r,n){if(Array.isArray(n)){const[i,o=0,l=0]=n;return this._attachTexture(r,i,o,l),i}if(n instanceof uf)return this._attachTexture(r,n,0,0),n;if(n instanceof _y){const i=n;return this._attachTexture(r,i.texture,i.props.baseMipLevel,i.props.baseArrayLayer),n.texture}throw new Error("attach")}_attachTexture(r,n,i,o){const{gl:l}=this.device;switch(l.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:l.framebufferTextureLayer(36160,r,n.target,o,i);break;case 34067:const s=NNe(i);l.framebufferTexture2D(36160,r,s,n.handle,o);break;case 3553:l.framebufferTexture2D(36160,r,3553,n.handle,o);break;default:fo(!1,"Illegal texture type")}l.bindTexture(n.target,null)}}function NNe(e){return e<34069?e+34069:e}function DNe(e){switch(e){case 36053:return"success";case 36054:return"Mismatched attachments";case 36055:return"No attachments";case 36057:return"Height/width mismatch";case 36061:return"Unsupported or split attachments";case 36182:return"Samples mismatch";default:return`${e}`}}class LNe extends p6{constructor(r,n){super(n);Ce(this,"device");Ce(this,"presentationSize");Ce(this,"_framebuffer",null);this.device=r,this.presentationSize=[-1,-1],this._setAutoCreatedCanvasId(`${this.device.id}-canvas`),this.update()}getCurrentFramebuffer(){return this.update(),this._framebuffer=this._framebuffer||new Fv(this.device,{handle:null}),this._framebuffer}update(){const r=this.getPixelSize();(r[0]!==this.presentationSize[0]||r[1]!==this.presentationSize[1])&&(this.presentationSize=r,this.resize())}resize(r){if(this.device.gl&&this.canvas){const n=this.getDevicePixelRatio(r==null?void 0:r.useDevicePixels);this.setDevicePixelRatio(n,r);return}}commit(){}}const FNe={spector:pr.get("spector")||pr.get("spectorjs")},BNe="https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js",zNe=1;let Gi=null,XB=!1;async function $Ne(e){if(!globalThis.SPECTOR)try{await Lq(BNe)}catch(t){pr.warn(String(t))}}function UNe(e){if(e={...FNe,...e},!(e!=null&&e.spector)||(!Gi&&globalThis.SPECTOR&&(pr.probe(zNe,"SPECTOR found and initialized")(),Gi=new globalThis.SPECTOR.Spector,globalThis.luma&&(globalThis.luma.spector=Gi)),!Gi))return null;if(XB||(XB=!0,Gi.spyCanvases(),Gi==null||Gi.onCaptureStarted.add(t=>pr.info("Spector capture started:",t)()),Gi==null||Gi.onCapture.add(t=>{pr.info("Spector capture complete:",t)(),Gi==null||Gi.getResultUI(),Gi==null||Gi.resultView.display(),Gi==null||Gi.resultView.addCapture(t)})),e!=null&&e.canvas){if(typeof e.spector=="string"&&e.spector!==e.canvas.id)return Gi;Gi==null||Gi.startCapture(e==null?void 0:e.canvas,500),new Promise(t=>setTimeout(t,2e3)).then(t=>{pr.info("Spector capture stopped after 2 seconds")(),Gi==null||Gi.stopCapture()})}return Gi}const jNe="https://unpkg.com/webgl-debug@2.0.1/index.js";function wW(e){return e.luma=e.luma||{},e.luma}async function VNe(){jp()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await Lq(jNe))}function HNe(e,t={}){return e?t.debug?WNe(e,t):qNe(e):null}function qNe(e){const t=wW(e);return t.realContext?t.realContext:e}function WNe(e,t){if(!globalThis.WebGLDebugUtils)return pr.warn("webgl-debug not loaded")(),e;const r=wW(e);if(r.debugContext)return r.debugContext;globalThis.WebGLDebugUtils.init({...gy,...e});const n=globalThis.WebGLDebugUtils.makeDebugContext(e,XNe.bind(null,t),KNe.bind(null,t));for(const l in gy)!(l in n)&&typeof gy[l]=="number"&&(n[l]=gy[l]);class i{}Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.setPrototypeOf(i,n);const o=Object.create(i);return r.realContext=e,r.debugContext=o,o.debug=!0,o}function KT(e,t){t=Array.from(t).map(n=>n===void 0?"undefined":n);let r=globalThis.WebGLDebugUtils.glFunctionArgsToString(e,t);return r=`${r.slice(0,100)}${r.length>100?"...":""}`,`gl.${e}(${r})`}function XNe(e,t,r,n){n=Array.from(n).map(s=>s===void 0?"undefined":s);const i=globalThis.WebGLDebugUtils.glEnumToString(t),o=globalThis.WebGLDebugUtils.glFunctionArgsToString(r,n),l=`${i} in gl.${r}(${o})`;pr.error(l)();debugger;if(e.throwOnError)throw new Error(l)}function KNe(e,t,r){let n="";if(pr.level>=1&&(n=KT(t,r),pr.log(1,n)()),e.break&&e.break.length>0&&(n=n||KT(t,r),e.break.every(o=>n.indexOf(o)!==-1)))debugger;for(const i of r)if(i===void 0){if(n=n||KT(t,r),e.throwOnError)throw new Error(`Undefined argument: ${n}`);pr.error(`Undefined argument: ${n}`)();debugger}}function GNe(e){const t=e.split(/\r?\n/),r=[];for(const n of t){if(n.length<=1)continue;const i=n.split(":");if(i.length===2){const[x,S]=i;r.push({message:S.trim(),type:KB(x),lineNum:0,linePos:0});continue}const[o,l,s,...f]=i;let p=parseInt(s,10);isNaN(p)&&(p=0);let v=parseInt(l,10);isNaN(v)&&(v=0),r.push({message:f.join(":").trim(),type:KB(o),lineNum:p,linePos:v})}return r}function KB(e){const t=["warning","error","info"],r=e.toLowerCase();return t.includes(r)?r:"info"}class YNe extends K5{constructor(r,n){super(r,n);Ce(this,"device");Ce(this,"handle");switch(this.device=r,this.props.stage){case"vertex":this.handle=this.props.handle||this.device.gl.createShader(35633);break;case"fragment":this.handle=this.props.handle||this.device.gl.createShader(35632);break;default:throw new Error(this.props.stage)}this._compile(this.source)}destroy(){this.handle&&(this.removeStats(),this.device.gl.deleteShader(this.handle),this.destroyed=!0)}async getCompilationInfo(){return await this._waitForCompilationComplete(),this.getCompilationInfoSync()}getCompilationInfoSync(){const r=this.device.gl.getShaderInfoLog(this.handle);return GNe(r)}getTranslatedSource(){const n=this.device.getExtension("WEBGL_debug_shaders").WEBGL_debug_shaders;return n==null?void 0:n.getTranslatedShaderSource(this.handle)}async _compile(r){r=(o=>o.startsWith("#version ")?o:`#version 100
${o}`)(r);const{gl:i}=this.device;if(i.shaderSource(this.handle,r),i.compileShader(this.handle),pr.level===0){this.compilationStatus="pending";return}if(!this.device.features.has("compilation-status-async-webgl")){if(this._getCompilationStatus(),this.debugShader(),this.compilationStatus==="error")throw new Error(`GLSL compilation errors in ${this.props.stage} shader ${this.props.id}`);return}pr.once(1,"Shader compilation is asynchronous")(),await this._waitForCompilationComplete(),pr.info(2,`Shader ${this.id} - async compilation complete: ${this.compilationStatus}`)(),this._getCompilationStatus(),this.debugShader()}async _waitForCompilationComplete(){const r=async o=>await new Promise(l=>setTimeout(l,o));if(!this.device.features.has("compilation-status-async-webgl")){await r(10);return}const{gl:i}=this.device;for(;;){if(i.getShaderParameter(this.handle,37297))return;await r(10)}}_getCompilationStatus(){this.compilationStatus=this.device.gl.getShaderParameter(this.handle,35713)?"success":"error"}}const ZNe=256,JNe=1024,QNe=16384,GT=6144,eDe=[1,2,4,8];class tDe extends lP{constructor(r,n){super(r,n);Ce(this,"device");Ce(this,"glParameters");this.device=r,mA(this.device.gl),this.setParameters(this.props.parameters),this.clear()}end(){N2(this.device.gl)}pushDebugGroup(r){}popDebugGroup(){}insertDebugMarker(r){}setParameters(r={}){const n={...this.glParameters};this.props.framebuffer&&(n.framebuffer=this.props.framebuffer),this.props.depthReadOnly&&(n.depthMask=!this.props.depthReadOnly),n.stencilMask=this.props.stencilReadOnly?0:1,n[35977]=this.props.discard,r.viewport&&(r.viewport.length>=6?(n.viewport=r.viewport.slice(0,4),n.depthRange=[r.viewport[4],r.viewport[5]]):n.viewport=r.viewport),r.scissorRect&&(n.scissorTest=!0,n.scissor=r.scissorRect),r.blendConstant&&(n.blendColor=r.blendConstant),r.stencilReference&&(console.warn("RenderPassParameters.stencilReference not yet implemented in WebGL"),r[2967]=r.stencilReference),r.colorMask&&(n.colorMask=eDe.map(i=>!!(i&r.colorMask))),this.glParameters=n,W_(this.device.gl,n)}beginOcclusionQuery(r){const n=this.props.occlusionQuerySet;n==null||n.beginOcclusionQuery()}endOcclusionQuery(){const r=this.props.occlusionQuerySet;r==null||r.endOcclusionQuery()}clear(){const r={...this.glParameters};let n=0;this.props.clearColor!==!1&&(n|=QNe,r.clearColor=this.props.clearColor),this.props.clearDepth!==!1&&(n|=ZNe,r.clearDepth=this.props.clearDepth),this.props.clearStencil!==!1&&(n|=JNe,r.clearStencil=this.props.clearStencil),n!==0&&_p(this.device.gl,r,()=>{this.device.gl.clear(n)})}clearColorBuffer(r=0,n=[0,0,0,0]){_p(this.device.gl,{framebuffer:this.props.framebuffer},()=>{switch(n.constructor){case Int32Array:this.device.gl.clearBufferiv(GT,r,n);break;case Uint32Array:this.device.gl.clearBufferuiv(GT,r,n);break;case Float32Array:default:this.device.gl.clearBufferfv(GT,r,n);break}})}}const rDe="Failed to deduce GL constant from typed array";function nDe(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(rDe)}}function kP(e,t){const{clamped:r=!0}=t||{};switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return r?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}const iDe={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},oDe={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Bv{constructor(...t){Ce(this,"offset");Ce(this,"stride");Ce(this,"type");Ce(this,"size");Ce(this,"divisor");Ce(this,"normalized");Ce(this,"integer");Ce(this,"buffer");Ce(this,"index");t.forEach(r=>this._assign(r)),Object.freeze(this)}static getBytesPerElement(t){return kP(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){return fo(t.size),kP(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(...t){return new Bv(iDe,...t)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Bv.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Bv.getBytesPerVertex(this)}_assign(t={}){return t=kke("Accessor",t,oDe),t.type!==void 0&&(this.type=t.type,(t.type===5124||t.type===5125)&&(this.integer=!0)),t.size!==void 0&&(this.size=t.size),t.offset!==void 0&&(this.offset=t.offset),t.stride!==void 0&&(this.stride=t.stride),t.normalize!==void 0&&(this.normalized=t.normalize),t.normalized!==void 0&&(this.normalized=t.normalized),t.integer!==void 0&&(this.integer=t.integer),t.divisor!==void 0&&(this.divisor=t.divisor),t.buffer!==void 0&&(this.buffer=t.buffer),t.index!==void 0&&(typeof t.index=="boolean"?this.index=t.index?1:0:this.index=t.index),t.instanced!==void 0&&(this.divisor=t.instanced?1:0),t.isInstanced!==void 0&&(this.divisor=t.isInstanced?1:0),this.offset===void 0&&delete this.offset,this.stride===void 0&&delete this.stride,this.type===void 0&&delete this.type,this.size===void 0&&delete this.size,this.divisor===void 0&&delete this.divisor,this.normalized===void 0&&delete this.normalized,this.integer===void 0&&delete this.integer,this.buffer===void 0&&delete this.buffer,this.index===void 0&&delete this.index,this}}function sDe(e){return aDe.includes(e)}const aDe=[35678,35680,35679,35682,36289,36292,36293,36298,36299,36300,36303,36306,36307,36308,36311],SW={5126:[5126,1,"float","f32","float32"],35664:[5126,2,"vec2","vec2<f32>","float32x2"],35665:[5126,3,"vec3","vec3<f32>","float32x3"],35666:[5126,4,"vec4","vec4<f32>","float32x4"],5124:[5124,1,"int","i32","sint32"],35667:[5124,2,"ivec2","vec2<i32>","sint32x2"],35668:[5124,3,"ivec3","vec3<i32>","sint32x3"],35669:[5124,4,"ivec4","vec4<i32>","sint32x4"],5125:[5125,1,"uint","u32","uint32"],36294:[5125,2,"uvec2","vec2<u32>","uint32x2"],36295:[5125,3,"uvec3","vec3<u32>","uint32x3"],36296:[5125,4,"uvec4","vec4<u32>","uint32x4"],35670:[5126,1,"bool","f32","float32"],35671:[5126,2,"bvec2","vec2<f32>","float32x2"],35672:[5126,3,"bvec3","vec3<f32>","float32x3"],35673:[5126,4,"bvec4","vec4<f32>","float32x4"],35674:[5126,8,"mat2","mat2x2<f32>"],35685:[5126,8,"mat2x3","mat2x3<f32>"],35686:[5126,8,"mat2x4","mat2x4<f32>"],35687:[5126,12,"mat3x2","mat3x2<f32>"],35675:[5126,12,"mat3","mat3x3<f32>"],35688:[5126,12,"mat3x4","mat3x4<f32>"],35689:[5126,16,"mat4x2","mat4x2<f32>"],35690:[5126,16,"mat4x3","mat4x3<f32>"],35676:[5126,16,"mat4","mat4x4<f32>"]};function AW(e){const t=SW[e];if(!t)throw new Error("uniform");const[r,n,,i]=t;return{format:i,components:n,glType:r}}function lDe(e){const t=SW[e];if(!t)throw new Error("attribute");const[,r,,n,i]=t;return{attributeType:n,vertexFormat:i,components:r}}function cDe(e,t){const r={attributes:[],bindings:[]};r.attributes=uDe(e,t);const n=dDe(e,t);for(const s of n){const f=s.uniforms.map(p=>({name:p.name,format:p.format,byteOffset:p.byteOffset,byteStride:p.byteStride,arrayLength:p.arrayLength}));r.bindings.push({type:"uniform",name:s.name,location:s.location,visibility:(s.vertex?1:0)&(s.fragment?2:0),minBindingSize:s.byteLength,uniforms:f})}const i=fDe(e,t);let o=0;for(const s of i)if(sDe(s.type)){const{viewDimension:f,sampleType:p}=gDe(s.type);r.bindings.push({type:"texture",name:s.name,location:o,viewDimension:f,sampleType:p}),s.textureUnit=o,o+=1}i.length&&(r.uniforms=i);const l=hDe(e,t);return l!=null&&l.length&&(r.varyings=l),r}function uDe(e,t){const r=[],n=e.getProgramParameter(t,35721);for(let i=0;i<n;i++){const o=e.getActiveAttrib(t,i);if(!o)throw new Error("activeInfo");const{name:l,type:s}=o,f=e.getAttribLocation(t,l);if(f>=0){const{attributeType:p}=lDe(s),v=/instance/i.test(l)?"instance":"vertex";r.push({name:l,location:f,stepMode:v,type:p})}}return r.sort((i,o)=>i.location-o.location),r}function hDe(e,t){const r=[],n=e.getProgramParameter(t,35971);for(let i=0;i<n;i++){const o=e.getTransformFeedbackVarying(t,i);if(!o)throw new Error("activeInfo");const{name:l,type:s,size:f}=o,{glType:p,components:v}=AW(s),x=new Bv({type:p,size:f*v}),S={location:i,name:l,accessor:x};r.push(S)}return r.sort((i,o)=>i.location-o.location),r}function fDe(e,t){const r=[],n=e.getProgramParameter(t,35718);for(let i=0;i<n;i++){const o=e.getActiveUniform(t,i);if(!o)throw new Error("activeInfo");const{name:l,size:s,type:f}=o,{name:p,isArray:v}=mDe(l);let x=e.getUniformLocation(t,p);const S={location:x,name:p,size:s,type:f,isArray:v};if(r.push(S),S.size>1)for(let A=0;A<S.size;A++){const k=`${p}[${A}]`;x=e.getUniformLocation(t,k);const R={...S,name:k,location:x};r.push(R)}}return r}function dDe(e,t){const r=(o,l)=>e.getActiveUniformBlockParameter(t,o,l),n=[],i=e.getProgramParameter(t,35382);for(let o=0;o<i;o++){const l={name:e.getActiveUniformBlockName(t,o)||"",location:r(o,35391),byteLength:r(o,35392),vertex:r(o,35396),fragment:r(o,35398),uniformCount:r(o,35394),uniforms:[]},s=r(o,35395)||[],f=e.getActiveUniforms(t,s,35383),p=e.getActiveUniforms(t,s,35384),v=e.getActiveUniforms(t,s,35387),x=e.getActiveUniforms(t,s,35388);for(let S=0;S<l.uniformCount;++S){const A=e.getActiveUniform(t,s[S]);if(!A)throw new Error("activeInfo");l.uniforms.push({name:A.name,format:AW(f[S]).format,type:f[S],arrayLength:p[S],byteOffset:v[S],byteStride:x[S]})}n.push(l)}return n.sort((o,l)=>o.location-l.location),n}const pDe={35678:["2d","float"],35680:["cube","float"],35679:["3d","float"],35682:["3d","depth"],36289:["2d-array","float"],36292:["2d-array","depth"],36293:["cube","float"],36298:["2d","sint"],36299:["3d","sint"],36300:["cube","sint"],36303:["2d-array","uint"],36306:["2d","uint"],36307:["3d","uint"],36308:["cube","uint"],36311:["2d-array","uint"]};function gDe(e){const t=pDe[e];if(!t)throw new Error("sampler");const[r,n]=t;return{viewDimension:r,sampleType:n}}function mDe(e){if(e[e.length-1]!=="]")return{name:e,length:1,isArray:!1};const r=/([^[]*)(\[[0-9]+\])?/.exec(e);if(!r||r.length<2)throw new Error(`Failed to parse GLSL uniform name ${e}`);return{name:r[1],length:r[2]?1:0,isArray:!!r[2]}}function yDe(e,t,r,n){const i=e;let o=n;o===!0&&(o=1),o===!1&&(o=0);const l=typeof o=="number"?[o]:o;switch(r){case 35678:case 35680:case 35679:case 35682:case 36289:case 36292:case 36293:case 36298:case 36299:case 36300:case 36303:case 36306:case 36307:case 36308:case 36311:if(typeof n!="number")throw new Error("samplers must be set to integers");return e.uniform1i(t,n);case 5126:return e.uniform1fv(t,l);case 35664:return e.uniform2fv(t,l);case 35665:return e.uniform3fv(t,l);case 35666:return e.uniform4fv(t,l);case 5124:return e.uniform1iv(t,l);case 35667:return e.uniform2iv(t,l);case 35668:return e.uniform3iv(t,l);case 35669:return e.uniform4iv(t,l);case 35670:return e.uniform1iv(t,l);case 35671:return e.uniform2iv(t,l);case 35672:return e.uniform3iv(t,l);case 35673:return e.uniform4iv(t,l);case 5125:return i.uniform1uiv(t,l,1);case 36294:return i.uniform2uiv(t,l,2);case 36295:return i.uniform3uiv(t,l,3);case 36296:return i.uniform4uiv(t,l,4);case 35674:return e.uniformMatrix2fv(t,!1,l);case 35675:return e.uniformMatrix3fv(t,!1,l);case 35676:return e.uniformMatrix4fv(t,!1,l);case 35685:return i.uniformMatrix2x3fv(t,!1,l);case 35686:return i.uniformMatrix2x4fv(t,!1,l);case 35687:return i.uniformMatrix3x2fv(t,!1,l);case 35688:return i.uniformMatrix3x4fv(t,!1,l);case 35689:return i.uniformMatrix4x2fv(t,!1,l);case 35690:return i.uniformMatrix4x3fv(t,!1,l)}throw new Error("Illegal uniform")}function _De(e){switch(e){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 3;case"line-loop-webgl":return 2;case"triangle-list":return 4;case"triangle-strip":return 5;case"triangle-fan-webgl":return 6;default:throw new Error(e)}}function vDe(e){switch(e){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 1;case"line-loop-webgl":return 1;case"triangle-list":return 4;case"triangle-strip":return 4;case"triangle-fan-webgl":return 4;default:throw new Error(e)}}const GB=4;class bDe extends x_{constructor(r,n){super(r,n);Ce(this,"device");Ce(this,"handle");Ce(this,"vs");Ce(this,"fs");Ce(this,"introspectedLayout");Ce(this,"uniforms",{});Ce(this,"bindings",{});Ce(this,"varyings",null);Ce(this,"_uniformCount",0);Ce(this,"_uniformSetters",{});this.device=r,this.handle=this.props.handle||this.device.gl.createProgram(),this.device.setSpectorMetadata(this.handle,{id:this.props.id}),this.vs=n.vs,this.fs=n.fs;const{varyings:i,bufferMode:o=35981}=n;switch(i&&i.length>0&&(this.varyings=i,this.device.gl.transformFeedbackVaryings(this.handle,i,o)),this._linkShaders(),pr.time(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.introspectedLayout=cDe(this.device.gl,this.handle),pr.timeEnd(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.shaderLayout=_ke(this.introspectedLayout,n.shaderLayout),this.props.topology){case"triangle-fan-webgl":case"line-loop-webgl":pr.warn(`Primitive topology ${this.props.topology} is deprecated and will be removed in v9.1`);break}}destroy(){this.handle&&(this.device.gl.deleteProgram(this.handle),this.destroyed=!0)}setBindings(r,n){for(const[i,o]of Object.entries(r)){const l=this.shaderLayout.bindings.find(s=>s.name===i)||this.shaderLayout.bindings.find(s=>s.name===`${i}Uniforms`);if(!l){const s=this.shaderLayout.bindings.map(f=>`"${f.name}"`).join(", ");n!=null&&n.disableWarnings||pr.warn(`Unknown binding "${i}" in render pipeline "${this.id}", expected one of ${s}`)();continue}switch(o||pr.warn(`Unsetting binding "${i}" in render pipeline "${this.id}"`)(),l.type){case"uniform":if(!(o instanceof Cp)&&!(o.buffer instanceof Cp))throw new Error("buffer value");break;case"texture":if(!(o instanceof _y||o instanceof uf||o instanceof Fv))throw new Error("texture value");break;case"sampler":pr.warn(`Ignoring sampler ${i}`)();break;default:throw new Error(l.type)}this.bindings[i]=o}}draw(r){var z;const{renderPass:n,parameters:i=this.props.parameters,topology:o=this.props.topology,vertexArray:l,vertexCount:s,instanceCount:f,isInstanced:p=!1,firstVertex:v=0,transformFeedback:x}=r,S=_De(o),A=!!l.indexBuffer,k=(z=l.indexBuffer)==null?void 0:z.glIndexType;if(this.linkStatus!=="success")return pr.info(2,`RenderPipeline:${this.id}.draw() aborted - waiting for shader linking`)(),!1;if(!this._areTexturesRenderable()||s===0)return pr.info(2,`RenderPipeline:${this.id}.draw() aborted - textures not yet loaded`)(),!1;if(s===0)return pr.info(2,`RenderPipeline:${this.id}.draw() aborted - no vertices to draw`)(),!0;this.device.gl.useProgram(this.handle),l.bindBeforeRender(n),x&&x.begin(this.props.topology),this._applyBindings(),this._applyUniforms();const R=n;return ANe(this.device,i,R.glParameters,()=>{A&&p?this.device.gl.drawElementsInstanced(S,s||0,k,v,f||0):A?this.device.gl.drawElements(S,s||0,k,v):p?this.device.gl.drawArraysInstanced(S,v,s||0,f||0):this.device.gl.drawArrays(S,v,s||0),x&&x.end()}),l.unbindAfterRender(n),!0}setUniformsWebGL(r){const{bindings:n}=g6(r);Object.keys(n).forEach(i=>{pr.warn(`Unsupported value "${JSON.stringify(n[i])}" used in setUniforms() for key ${i}. Use setBindings() instead?`)()}),Object.assign(this.uniforms,r)}async _linkShaders(){const{gl:r}=this.device;if(r.attachShader(this.handle,this.vs.handle),r.attachShader(this.handle,this.fs.handle),pr.time(GB,`linkProgram for ${this.id}`)(),r.linkProgram(this.handle),pr.timeEnd(GB,`linkProgram for ${this.id}`)(),pr.level,!this.device.features.has("compilation-status-async-webgl")){const i=this._getLinkStatus();this._reportLinkStatus(i);return}pr.once(1,"RenderPipeline linking is asynchronous")(),await this._waitForLinkComplete(),pr.info(2,`RenderPipeline ${this.id} - async linking complete: ${this.linkStatus}`)();const n=this._getLinkStatus();this._reportLinkStatus(n)}_reportLinkStatus(r){var n;switch(r){case"success":return;default:throw this.vs.compilationStatus==="error"?(this.vs.debugShader(),new Error(`Error during compilation of shader ${this.vs.id}`)):((n=this.fs)==null?void 0:n.compilationStatus)==="error"?(this.fs.debugShader(),new Error(`Error during compilation of shader ${this.fs.id}`)):new Error(`Error during ${r}: ${this.device.gl.getProgramInfoLog(this.handle)}`)}}_getLinkStatus(){const{gl:r}=this.device;return r.getProgramParameter(this.handle,35714)?(r.validateProgram(this.handle),r.getProgramParameter(this.handle,35715)?(this.linkStatus="success","success"):(this.linkStatus="error","validation")):(this.linkStatus="error","linking")}async _waitForLinkComplete(){const r=async o=>await new Promise(l=>setTimeout(l,o));if(!this.device.features.has("compilation-status-async-webgl")){await r(10);return}const{gl:i}=this.device;for(;;){if(i.getProgramParameter(this.handle,37297))return;await r(10)}}_areTexturesRenderable(){let r=!0;for(const[,n]of Object.entries(this.bindings))n instanceof uf&&(n.update(),r=r&&n.loaded);return r}_applyBindings(){if(this.linkStatus!=="success")return;const{gl:r}=this.device;r.useProgram(this.handle);let n=0,i=0;for(const o of this.shaderLayout.bindings){const l=this.bindings[o.name]||this.bindings[o.name.replace(/Uniforms$/,"")];if(!l)throw new Error(`No value for binding ${o.name} in ${this.id}`);switch(o.type){case"uniform":const{name:s}=o,f=r.getUniformBlockIndex(this.handle,s);if(f===4294967295)throw new Error(`Invalid uniform block name ${s}`);r.uniformBlockBinding(this.handle,i,f),l instanceof Cp?r.bindBufferBase(35345,i,l.handle):r.bindBufferRange(35345,i,l.buffer.handle,l.offset||0,l.size||l.buffer.byteLength-l.offset),i+=1;break;case"texture":if(!(l instanceof _y||l instanceof uf||l instanceof Fv))throw new Error("texture");let p;if(l instanceof _y)p=l.texture;else if(l instanceof uf)p=l;else if(l instanceof Fv&&l.colorAttachments[0]instanceof _y)pr.warn("Passing framebuffer in texture binding may be deprecated. Use fbo.colorAttachments[0] instead")(),p=l.colorAttachments[0].texture;else throw new Error("No texture");r.activeTexture(33984+n),r.bindTexture(p.target,p.handle),n+=1;break;case"sampler":break;case"storage":case"read-only-storage":throw new Error(`binding type '${o.type}' not supported in WebGL`)}}}_applyUniforms(){for(const r of this.shaderLayout.uniforms||[]){const{name:n,location:i,type:o,textureUnit:l}=r,s=this.uniforms[n]??l;s!==void 0&&yDe(this.device.gl,i,o,s)}}}class xDe extends uP{constructor(r){super(r,{});Ce(this,"device");Ce(this,"commands",[]);this.device=r}submitCommands(r=this.commands){for(const n of r)switch(n.name){case"copy-buffer-to-buffer":wDe(this.device,n.options);break;case"copy-buffer-to-texture":SDe(this.device,n.options);break;case"copy-texture-to-buffer":ADe(this.device,n.options);break;case"copy-texture-to-texture":EDe(this.device,n.options);break}}}function wDe(e,t){const r=t.source,n=t.destination;e.gl.bindBuffer(36662,r.handle),e.gl.bindBuffer(36663,n.handle),e.gl.copyBufferSubData(36662,36663,t.sourceOffset??0,t.destinationOffset??0,t.size),e.gl.bindBuffer(36662,null),e.gl.bindBuffer(36663,null)}function SDe(e,t){throw new Error("Not implemented")}function ADe(e,t){const{source:r,mipLevel:n=0,aspect:i="all",width:o=t.source.width,height:l=t.source.height,depthOrArrayLayers:s=0,origin:f=[0,0],destination:p,byteOffset:v=0,bytesPerRow:x,rowsPerImage:S}=t;if(i!=="all")throw new Error("not supported");if(n!==0||s!==0||x||S)throw new Error("not implemented");const{framebuffer:A,destroyFramebuffer:k}=EW(r);let R;try{const z=p,N=o||A.width,B=l||A.height,U=oS(A.texture.props.format),K=U.dataFormat,ne=U.type;e.gl.bindBuffer(35051,z.handle),R=e.gl.bindFramebuffer(36160,A.handle),e.gl.readPixels(f[0],f[1],N,B,K,ne,v)}finally{e.gl.bindBuffer(35051,null),R!==void 0&&e.gl.bindFramebuffer(36160,R),k&&A.destroy()}}function EDe(e,t){const{source:r,destinationMipLevel:n=0,origin:i=[0,0],destinationOrigin:o=[0,0],destination:l}=t;let{width:s=t.destination.width,height:f=t.destination.height}=t;const{framebuffer:p,destroyFramebuffer:v}=EW(r),[x,S]=i,[A,k,R]=o,z=e.gl.bindFramebuffer(36160,p.handle);let N=null,B;if(l instanceof uf)N=l,s=Number.isFinite(s)?s:N.width,f=Number.isFinite(f)?f:N.height,N.bind(0),B=N.target;else throw new Error("invalid destination");switch(B){case 3553:case 34067:e.gl.copyTexSubImage2D(B,n,A,k,x,S,s,f);break;case 35866:case 32879:e.gl.copyTexSubImage3D(B,n,A,k,R,x,S,s,f);break}N&&N.unbind(),e.gl.bindFramebuffer(36160,z),v&&p.destroy()}function EW(e){if(e instanceof Au){const{width:t,height:r,id:n}=e;return{framebuffer:e.device.createFramebuffer({id:`framebuffer-for-${n}`,width:t,height:r,colorAttachments:[e]}),destroyFramebuffer:!0}}return{framebuffer:e,destroyFramebuffer:!1}}class TDe extends cP{constructor(r,n){super(r,n);Ce(this,"device");Ce(this,"commandBuffer");this.device=r,this.commandBuffer=new xDe(r)}destroy(){}finish(){this.commandBuffer.submitCommands()}copyBufferToBuffer(r){this.commandBuffer.commands.push({name:"copy-buffer-to-buffer",options:r})}copyBufferToTexture(r){this.commandBuffer.commands.push({name:"copy-buffer-to-texture",options:r})}copyTextureToBuffer(r){this.commandBuffer.commands.push({name:"copy-texture-to-buffer",options:r})}copyTextureToTexture(r){this.commandBuffer.commands.push({name:"copy-texture-to-texture",options:r})}pushDebugGroup(r){}popDebugGroup(){}insertDebugMarker(r){}resolveQuerySet(r,n,i){}}class T6 extends hP{constructor(r,n){super(r,n);Ce(this,"device");Ce(this,"handle");Ce(this,"buffer",null);Ce(this,"bufferValue",null);this.device=r,this.handle=this.device.gl.createVertexArray()}get[Symbol.toStringTag](){return"VertexArray"}static isConstantAttributeZeroSupported(r){return z4e()==="Chrome"}destroy(){var r;super.destroy(),this.buffer&&((r=this.buffer)==null||r.destroy()),this.handle&&(this.device.gl.deleteVertexArray(this.handle),this.handle=void 0)}setIndexBuffer(r){const n=r;if(n&&n.glTarget!==34963)throw new Error("Use .setBuffer()");this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34963,n?n.handle:null),this.indexBuffer=n,this.device.gl.bindVertexArray(null)}setBuffer(r,n){const i=n;if(i.glTarget===34963)throw new Error("Use .setIndexBuffer()");const{size:o,type:l,stride:s,offset:f,normalized:p,integer:v,divisor:x}=this._getAccessor(r);this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34962,i.handle),v?this.device.gl.vertexAttribIPointer(r,o,l,s,f):this.device.gl.vertexAttribPointer(r,o,l,p,s,f),this.device.gl.bindBuffer(34962,null),this.device.gl.enableVertexAttribArray(r),this.device.gl.vertexAttribDivisor(r,x||0),this.attributes[r]=i,this.device.gl.bindVertexArray(null)}setConstantWebGL(r,n){this._enable(r,!1),this.attributes[r]=n}bindBeforeRender(){this.device.gl.bindVertexArray(this.handle),this._applyConstantAttributes()}unbindAfterRender(){this.device.gl.bindVertexArray(null)}_applyConstantAttributes(){for(let r=0;r<this.maxVertexAttributes;++r){const n=this.attributes[r];ArrayBuffer.isView(n)&&this.device.setConstantAttributeWebGL(r,n)}}_getAccessor(r){const n=this.attributeInfos[r];if(!n)throw new Error(`Unknown attribute location ${r}`);const i=_W(n.bufferDataType);return{size:n.bufferComponents,type:i,stride:n.byteStride,offset:n.byteOffset,normalized:n.normalized,integer:n.integer,divisor:n.stepMode==="instance"?1:0}}_enable(r,n=!0){const o=T6.isConstantAttributeZeroSupported(this.device)||r!==0;(n||o)&&(r=Number(r),this.device.gl.bindVertexArray(this.handle),n?this.device.gl.enableVertexAttribArray(r):this.device.gl.disableVertexAttribArray(r),this.device.gl.bindVertexArray(null))}getConstantBuffer(r,n){const i=CDe(n),o=i.byteLength*r,l=i.length*r;if(this.buffer&&o!==this.buffer.byteLength)throw new Error(`Buffer size is immutable, byte length ${o} !== ${this.buffer.byteLength}.`);let s=!this.buffer;if(this.buffer=this.buffer||this.device.createBuffer({byteLength:o}),s=s||!PDe(i,this.bufferValue),s){const f=wke(n.constructor,l);Ske({target:f,source:i,start:0,count:l}),this.buffer.write(f),this.bufferValue=n}return this.buffer}}function CDe(e){return Array.isArray(e)?new Float32Array(e):e}function PDe(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}class IDe extends fP{constructor(r,n){super(r,n);Ce(this,"device");Ce(this,"gl");Ce(this,"handle");Ce(this,"layout");Ce(this,"buffers",{});Ce(this,"unusedBuffers",{});Ce(this,"bindOnUse",!0);Ce(this,"_bound",!1);this.device=r,this.gl=r.gl,this.handle=this.props.handle||this.gl.createTransformFeedback(),this.layout=this.props.layout,n.buffers&&this.setBuffers(n.buffers),Object.seal(this)}destroy(){this.gl.deleteTransformFeedback(this.handle),super.destroy()}begin(r="point-list"){this.gl.bindTransformFeedback(36386,this.handle),this.bindOnUse&&this._bindBuffers(),this.gl.beginTransformFeedback(vDe(r))}end(){this.gl.endTransformFeedback(),this.bindOnUse&&this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null)}setBuffers(r){this.buffers={},this.unusedBuffers={},this.bind(()=>{for(const n in r)this.setBuffer(n,r[n])})}setBuffer(r,n){const i=this._getVaryingIndex(r),{buffer:o,byteLength:l,byteOffset:s}=this._getBufferRange(n);if(i<0){this.unusedBuffers[r]=o,pr.warn(`${this.id} unusedBuffers varying buffer ${r}`)();return}this.buffers[i]={buffer:o,byteLength:l,byteOffset:s},this.bindOnUse||this._bindBuffer(i,o,s,l)}getBuffer(r){if(YB(r))return this.buffers[r]||null;const n=this._getVaryingIndex(r);return n>=0?this.buffers[n]:null}bind(r=this.handle){if(typeof r!="function")return this.gl.bindTransformFeedback(36386,r),this;let n;return this._bound?n=r():(this.gl.bindTransformFeedback(36386,this.handle),this._bound=!0,n=r(),this._bound=!1,this.gl.bindTransformFeedback(36386,null)),n}unbind(){this.bind(null)}_getBufferRange(r){if(r instanceof Cp)return{buffer:r,byteOffset:0,byteLength:r.byteLength};const{buffer:n,byteOffset:i=0,byteLength:o=r.buffer.byteLength}=r;return{buffer:n,byteOffset:i,byteLength:o}}_getVaryingIndex(r){if(YB(r))return Number(r);for(const n of this.layout.varyings)if(r===n.name)return n.location;return-1}_bindBuffers(){for(const r in this.buffers){const{buffer:n,byteLength:i,byteOffset:o}=this._getBufferRange(this.buffers[r]);this._bindBuffer(Number(r),n,o,i)}}_unbindBuffers(){for(const r in this.buffers)this.gl.bindBufferBase(35982,Number(r),null)}_bindBuffer(r,n,i=0,o){const l=n&&n.handle;!l||o===void 0?this.gl.bindBufferBase(35982,r,l):this.gl.bindBufferRange(35982,r,l,i,o)}}function YB(e){return typeof e=="number"?Number.isInteger(e):/^\d+$/.test(e)}class RDe extends dP{constructor(r,n){super(r,n);Ce(this,"device");Ce(this,"handle");Ce(this,"target",null);Ce(this,"_queryPending",!1);Ce(this,"_pollingPromise",null);if(this.device=r,n.count>1)throw new Error("WebGL QuerySet can only have one value");this.handle=this.device.gl.createQuery(),Object.seal(this)}get[Symbol.toStringTag](){return"Query"}destroy(){this.device.gl.deleteQuery(this.handle)}beginTimestampQuery(){return this._begin(35007)}endTimestampQuery(){this._end()}beginOcclusionQuery(r){return this._begin(r!=null&&r.conservative?36202:35887)}endOcclusionQuery(){this._end()}beginTransformFeedbackQuery(){return this._begin(35976)}endTransformFeedbackQuery(){this._end()}async resolveQuery(){return[await this.pollQuery()]}_begin(r){this._queryPending||(this.target=r,this.device.gl.beginQuery(this.target,this.handle))}_end(){this._queryPending||this.target&&(this.device.gl.endQuery(this.target),this.target=null,this._queryPending=!0)}isResultAvailable(){if(!this._queryPending)return!1;const r=this.device.gl.getQueryParameter(this.handle,34919);return r&&(this._queryPending=!1),r}isTimerDisjoint(){return this.device.gl.getParameter(36795)}getResult(){return this.device.gl.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}pollQuery(r=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((i,o)=>{const l=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):n++>r?(o("Timed out"),this._pollingPromise=null):requestAnimationFrame(l)};requestAnimationFrame(l)}),this._pollingPromise}}function TW(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return fo(!1),0}}function kDe(e){switch(e){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return fo(!1),0}}function MDe(e,t){var z,N;const{sourceX:r=0,sourceY:n=0,sourceFormat:i=6408,sourceAttachment:o=36064}=t||{};let{target:l=null,sourceWidth:s,sourceHeight:f,sourceType:p}=t||{};const{framebuffer:v,deleteFramebuffer:x}=CW(e);fo(v);const{gl:S,handle:A}=v;s=s||v.width,f=f||v.height;const k=o-36064;p=p||((N=(z=v.colorAttachments[k])==null?void 0:z.texture)==null?void 0:N.type)||5121,l=DDe(l,p,i,s,f),p=p||nDe(l);const R=S.bindFramebuffer(36160,A);return S.readPixels(r,n,s,f,i,p,l),S.bindFramebuffer(36160,R||null),x&&v.destroy(),l}function ODe(e,t){const{target:r,sourceX:n=0,sourceY:i=0,sourceFormat:o=6408,targetByteOffset:l=0}=t||{};let{sourceWidth:s,sourceHeight:f,sourceType:p}=t||{};const{framebuffer:v,deleteFramebuffer:x}=CW(e);fo(v),s=s||v.width,f=f||v.height;const S=v;p=p||5121;let A=r;if(!A){const R=TW(o),z=kDe(p),N=l+s*f*R*z;A=S.device.createBuffer({byteLength:N})}const k=e.device.createCommandEncoder();return k.copyTextureToBuffer({source:e,width:s,height:f,origin:[n,i],destination:A,byteOffset:l}),k.destroy(),x&&v.destroy(),A}function CW(e){return e instanceof Y5?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:NDe(e),deleteFramebuffer:!0}}function NDe(e,t){const{device:r,width:n,height:i,id:o}=e;return r.createFramebuffer({...t,id:`framebuffer-for-${o}`,width:n,height:i,colorAttachments:[e]})}function DDe(e,t,r,n,i){if(e)return e;t=t||5121;const o=kP(t,{clamped:!1}),l=TW(r);return new o(n*i*l)}const LDe=256,FDe=1024,BDe=16384,zDe="clear: bad arguments";function $De(e,t){const{framebuffer:r=null,color:n=null,depth:i=null,stencil:o=null}=t||{},l={};r&&(l.framebuffer=r);let s=0;n&&(s|=BDe,n!==!0&&(l.clearColor=n)),i&&(s|=LDe,i!==!0&&(l.clearDepth=i)),o&&(s|=FDe,i!==!0&&(l.clearStencil=i)),fo(s!==0,zDe);const f=e.gl;_p(f,l,()=>{f.clear(s)})}const X1=1,vg=class vg extends b_{constructor(r){var f,p;super({...r,id:r.id||Tm("webgl-device")});Ce(this,"type","webgl");Ce(this,"handle");Ce(this,"features");Ce(this,"limits");Ce(this,"info");Ce(this,"canvasContext");Ce(this,"lost");Ce(this,"_resolveContextLost");Ce(this,"renderPass",null);Ce(this,"gl");Ce(this,"debug",!1);Ce(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});Ce(this,"_extensions",{});Ce(this,"_polyfilled",!1);Ce(this,"spectorJS");Ce(this,"_constants");const n=(f=r.gl)==null?void 0:f.device;if(n)throw new Error(`WebGL context already attached to device ${n.id}`);const i=((p=r.gl)==null?void 0:p.canvas)||r.canvas;this.canvasContext=new LNe(this,{...r,canvas:i}),this.lost=new Promise(v=>{this._resolveContextLost=v});let o=r.gl||null;if(o||(o=tNe(this.canvasContext.canvas,{...r,onContextLost:v=>{var x;return(x=this._resolveContextLost)==null?void 0:x.call(this,{reason:"destroyed",message:"Entered sleep mode, or too many apps or browser tabs are using the GPU."})}})),!o)throw new Error("WebGL context creation failed");this.handle=o,this.gl=o,this.gl.device=this,this.gl._version=2,r.spector&&(this.spectorJS=UNe({...this.props,canvas:this.handle.canvas})),this.info=rNe(this.gl,this._extensions),this.limits=new wNe(this.gl),this.features=new xNe(this.gl,this._extensions,this.props.disabledFeatures),this.props.initalizeFeatures&&this.features.initializeFeatures(),this.canvasContext.resize();const{enable:l=!0,copyState:s=!1}=r;mW(this.gl,{enable:l,copyState:s,log:(...v)=>pr.log(1,...v)()}),r.debug&&(this.gl=HNe(this.gl,{...r,throwOnError:!0}),this.debug=!0,pr.level=Math.max(pr.level,1),pr.warn("WebGL debug mode activated. Performance reduced.")())}static isSupported(){return typeof WebGL2RenderingContext<"u"}static attach(r){if(r instanceof vg)return r;if((r==null?void 0:r.device)instanceof b_)return r.device;if(!UDe(r))throw new Error("Invalid WebGL2RenderingContext");return new vg({gl:r})}static async create(r={}){var s;pr.groupCollapsed(X1,"WebGLDevice created")();const n=[];r.debug&&n.push(VNe()),r.spector&&n.push($Ne()),typeof r.canvas=="string"&&n.push(p6.pageLoaded);const i=await Promise.allSettled(n);for(const f of i)f.status==="rejected"&&pr.error(`Failed to initialize debug libraries ${f.reason}`)();if(pr.probe(X1+1,"DOM is loaded")(),(s=r.gl)!=null&&s.device)return pr.warn("reattaching existing device")(),vg.attach(r.gl);const o=new vg(r),l=`Created ${o.type}${o.debug?" debug":""} context: ${o.info.vendor}, ${o.info.renderer} for canvas: ${o.canvasContext.id}`;return pr.probe(X1,l)(),pr.table(X1,o.info)(),pr.groupEnd(X1)(),o}destroy(){}get isLost(){return this.gl.isContextLost()}getSize(){return[this.gl.drawingBufferWidth,this.gl.drawingBufferHeight]}isTextureFormatSupported(r){return E6(this.gl,r,this._extensions)}isTextureFormatFilterable(r){return yNe(this.gl,r,this._extensions)}isTextureFormatRenderable(r){return _Ne(this.gl,r,this._extensions)}createCanvasContext(r){throw new Error("WebGL only supports a single canvas")}createBuffer(r){const n=this._getBufferProps(r);return new Cp(this,n)}_createTexture(r){return new uf(this,r)}createExternalTexture(r){throw new Error("createExternalTexture() not implemented")}createSampler(r){return new RP(this,r)}createShader(r){return new YNe(this,r)}createFramebuffer(r){return new Fv(this,r)}createVertexArray(r){return new T6(this,r)}createTransformFeedback(r){return new IDe(this,r)}createQuerySet(r){return new RDe(this,r)}createRenderPipeline(r){return new bDe(this,r)}beginRenderPass(r){return new tDe(this,r)}createComputePipeline(r){throw new Error("ComputePipeline not supported in WebGL")}beginComputePass(r){throw new Error("ComputePass not supported in WebGL")}createCommandEncoder(r){return new TDe(this,r)}submit(){var r;(r=this.renderPass)==null||r.end(),this.renderPass=null}readPixelsToArrayWebGL(r,n){return MDe(r,n)}readPixelsToBufferWebGL(r,n){return ODe(r,n)}setParametersWebGL(r){W_(this.gl,r)}getParametersWebGL(r){return gW(this.gl,r)}withParametersWebGL(r,n){return _p(this.gl,r,n)}clearWebGL(r){$De(this,r)}resetWebGL(){pr.warn("WebGLDevice.resetWebGL is deprecated, use only for debugging")(),KOe(this.gl)}loseDevice(){var o;let r=!1;const i=this.getExtension("WEBGL_lose_context").WEBGL_lose_context;return i&&(r=!0,i.loseContext()),(o=this._resolveContextLost)==null||o.call(this,{reason:"destroyed",message:"Application triggered context loss"}),r}pushState(){mA(this.gl)}popState(){N2(this.gl)}setSpectorMetadata(r,n){r.__SPECTOR_Metadata=n}getGLKey(r,n){n=n||this.gl2||this.gl;const i=Number(r);for(const o in n)if(n[o]===i)return`GL.${o}`;return String(r)}setConstantAttributeWebGL(r,n){const i=this.limits.maxVertexAttributes;this._constants=this._constants||new Array(i).fill(null);const o=this._constants[r];switch(o&&qDe(o,n)&&pr.info(1,`setConstantAttributeWebGL(${r}) could have been skipped, value unchanged`)(),this._constants[r]=n,n.constructor){case Float32Array:jDe(this,r,n);break;case Int32Array:VDe(this,r,n);break;case Uint32Array:HDe(this,r,n);break;default:fo(!1)}}getExtension(r){return Dp(this.gl,r,this._extensions),this._extensions}};Ce(vg,"type","webgl");let zv=vg;function UDe(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:!!(e&&Number.isFinite(e._version))}function jDe(e,t,r){switch(r.length){case 1:e.gl.vertexAttrib1fv(t,r);break;case 2:e.gl.vertexAttrib2fv(t,r);break;case 3:e.gl.vertexAttrib3fv(t,r);break;case 4:e.gl.vertexAttrib4fv(t,r);break;default:fo(!1)}}function VDe(e,t,r){e.gl.vertexAttribI4iv(t,r)}function HDe(e,t,r){e.gl.vertexAttribI4uiv(t,r)}function qDe(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}var PW={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(e){(function(t,r,n,i){var o=["","webkit","Moz","MS","ms","o"],l=r.createElement("div"),s="function",f=Math.round,p=Math.abs,v=Date.now;function x(j,Z,de){return setTimeout(U(j,de),Z)}function S(j,Z,de){return Array.isArray(j)?(A(j,de[Z],de),!0):!1}function A(j,Z,de){var we;if(j)if(j.forEach)j.forEach(Z,de);else if(j.length!==i)for(we=0;we<j.length;)Z.call(de,j[we],we,j),we++;else for(we in j)j.hasOwnProperty(we)&&Z.call(de,j[we],we,j)}function k(j,Z,de){var we="DEPRECATED METHOD: "+Z+`
`+de+` AT 
`;return function(){var Le=new Error("get-stack-trace"),ft=Le&&Le.stack?Le.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Mt=t.console&&(t.console.warn||t.console.log);return Mt&&Mt.call(t.console,we,ft),j.apply(this,arguments)}}var R;typeof Object.assign!="function"?R=function(Z){if(Z===i||Z===null)throw new TypeError("Cannot convert undefined or null to object");for(var de=Object(Z),we=1;we<arguments.length;we++){var Le=arguments[we];if(Le!==i&&Le!==null)for(var ft in Le)Le.hasOwnProperty(ft)&&(de[ft]=Le[ft])}return de}:R=Object.assign;var z=k(function(Z,de,we){for(var Le=Object.keys(de),ft=0;ft<Le.length;)(!we||we&&Z[Le[ft]]===i)&&(Z[Le[ft]]=de[Le[ft]]),ft++;return Z},"extend","Use `assign`."),N=k(function(Z,de){return z(Z,de,!0)},"merge","Use `assign`.");function B(j,Z,de){var we=Z.prototype,Le;Le=j.prototype=Object.create(we),Le.constructor=j,Le._super=we,de&&R(Le,de)}function U(j,Z){return function(){return j.apply(Z,arguments)}}function K(j,Z){return typeof j==s?j.apply(Z&&Z[0]||i,Z):j}function ne(j,Z){return j===i?Z:j}function ee(j,Z,de){A(J(Z),function(we){j.addEventListener(we,de,!1)})}function Q(j,Z,de){A(J(Z),function(we){j.removeEventListener(we,de,!1)})}function re(j,Z){for(;j;){if(j==Z)return!0;j=j.parentNode}return!1}function Se(j,Z){return j.indexOf(Z)>-1}function J(j){return j.trim().split(/\s+/g)}function G(j,Z,de){if(j.indexOf&&!de)return j.indexOf(Z);for(var we=0;we<j.length;){if(de&&j[we][de]==Z||!de&&j[we]===Z)return we;we++}return-1}function se(j){return Array.prototype.slice.call(j,0)}function ve(j,Z,de){for(var we=[],Le=[],ft=0;ft<j.length;){var Mt=j[ft][Z];G(Le,Mt)<0&&we.push(j[ft]),Le[ft]=Mt,ft++}return we=we.sort(function(er,Jt){return er[Z]>Jt[Z]}),we}function ge(j,Z){for(var de,we,Le=Z[0].toUpperCase()+Z.slice(1),ft=0;ft<o.length;){if(de=o[ft],we=de?de+Le:Z,we in j)return we;ft++}return i}var je=1;function $e(){return je++}function Ze(j){var Z=j.ownerDocument||j;return Z.defaultView||Z.parentWindow||t}var Me=/mobile|tablet|ip(ad|hone|od)|android/i,Ue="ontouchstart"in t,Qe=ge(t,"PointerEvent")!==i,ct=Ue&&Me.test(navigator.userAgent),ce="touch",be="pen",Oe="mouse",Be="kinect",qe=25,tt=1,We=2,Xe=4,lt=8,wt=1,Lt=2,At=4,zt=8,vt=16,pe=Lt|At,ur=zt|vt,sr=pe|ur,Tt=["x","y"],Nt=["clientX","clientY"];function Zt(j,Z){var de=this;this.manager=j,this.callback=Z,this.element=j.element,this.target=j.options.inputTarget,this.domHandler=function(we){K(j.options.enable,[j])&&de.handler(we)},this.init()}Zt.prototype={handler:function(){},init:function(){this.evEl&&ee(this.element,this.evEl,this.domHandler),this.evTarget&&ee(this.target,this.evTarget,this.domHandler),this.evWin&&ee(Ze(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Q(this.element,this.evEl,this.domHandler),this.evTarget&&Q(this.target,this.evTarget,this.domHandler),this.evWin&&Q(Ze(this.element),this.evWin,this.domHandler)}};function rr(j){var Z,de=j.options.inputClass;return de?Z=de:Qe?Z=Ne:ct?Z=Ke:Ue?Z=Wt:Z=hr,new Z(j,at)}function at(j,Z,de){var we=de.pointers.length,Le=de.changedPointers.length,ft=Z&tt&&we-Le===0,Mt=Z&(Xe|lt)&&we-Le===0;de.isFirst=!!ft,de.isFinal=!!Mt,ft&&(j.session={}),de.eventType=Z,It(j,de),j.emit("hammer.input",de),j.recognize(de),j.session.prevInput=de}function It(j,Z){var de=j.session,we=Z.pointers,Le=we.length;de.firstInput||(de.firstInput=Pr(Z)),Le>1&&!de.firstMultiple?de.firstMultiple=Pr(Z):Le===1&&(de.firstMultiple=!1);var ft=de.firstInput,Mt=de.firstMultiple,Qt=Mt?Mt.center:ft.center,er=Z.center=_t(we);Z.timeStamp=v(),Z.deltaTime=Z.timeStamp-ft.timeStamp,Z.angle=fn(Qt,er),Z.distance=Kt(Qt,er),Vt(de,Z),Z.offsetDirection=_r(Z.deltaX,Z.deltaY);var Jt=Ut(Z.deltaTime,Z.deltaX,Z.deltaY);Z.overallVelocityX=Jt.x,Z.overallVelocityY=Jt.y,Z.overallVelocity=p(Jt.x)>p(Jt.y)?Jt.x:Jt.y,Z.scale=Mt?Br(Mt.pointers,we):1,Z.rotation=Mt?Dt(Mt.pointers,we):0,Z.maxPointers=de.prevInput?Z.pointers.length>de.prevInput.maxPointers?Z.pointers.length:de.prevInput.maxPointers:Z.pointers.length,lr(de,Z);var yr=j.element;re(Z.srcEvent.target,yr)&&(yr=Z.srcEvent.target),Z.target=yr}function Vt(j,Z){var de=Z.center,we=j.offsetDelta||{},Le=j.prevDelta||{},ft=j.prevInput||{};(Z.eventType===tt||ft.eventType===Xe)&&(Le=j.prevDelta={x:ft.deltaX||0,y:ft.deltaY||0},we=j.offsetDelta={x:de.x,y:de.y}),Z.deltaX=Le.x+(de.x-we.x),Z.deltaY=Le.y+(de.y-we.y)}function lr(j,Z){var de=j.lastInterval||Z,we=Z.timeStamp-de.timeStamp,Le,ft,Mt,Qt;if(Z.eventType!=lt&&(we>qe||de.velocity===i)){var er=Z.deltaX-de.deltaX,Jt=Z.deltaY-de.deltaY,yr=Ut(we,er,Jt);ft=yr.x,Mt=yr.y,Le=p(yr.x)>p(yr.y)?yr.x:yr.y,Qt=_r(er,Jt),j.lastInterval=Z}else Le=de.velocity,ft=de.velocityX,Mt=de.velocityY,Qt=de.direction;Z.velocity=Le,Z.velocityX=ft,Z.velocityY=Mt,Z.direction=Qt}function Pr(j){for(var Z=[],de=0;de<j.pointers.length;)Z[de]={clientX:f(j.pointers[de].clientX),clientY:f(j.pointers[de].clientY)},de++;return{timeStamp:v(),pointers:Z,center:_t(Z),deltaX:j.deltaX,deltaY:j.deltaY}}function _t(j){var Z=j.length;if(Z===1)return{x:f(j[0].clientX),y:f(j[0].clientY)};for(var de=0,we=0,Le=0;Le<Z;)de+=j[Le].clientX,we+=j[Le].clientY,Le++;return{x:f(de/Z),y:f(we/Z)}}function Ut(j,Z,de){return{x:Z/j||0,y:de/j||0}}function _r(j,Z){return j===Z?wt:p(j)>=p(Z)?j<0?Lt:At:Z<0?zt:vt}function Kt(j,Z,de){de||(de=Tt);var we=Z[de[0]]-j[de[0]],Le=Z[de[1]]-j[de[1]];return Math.sqrt(we*we+Le*Le)}function fn(j,Z,de){de||(de=Tt);var we=Z[de[0]]-j[de[0]],Le=Z[de[1]]-j[de[1]];return Math.atan2(Le,we)*180/Math.PI}function Dt(j,Z){return fn(Z[1],Z[0],Nt)+fn(j[1],j[0],Nt)}function Br(j,Z){return Kt(Z[0],Z[1],Nt)/Kt(j[0],j[1],Nt)}var dr={mousedown:tt,mousemove:We,mouseup:Xe},nn="mousedown",Kn="mousemove mouseup";function hr(){this.evEl=nn,this.evWin=Kn,this.pressed=!1,Zt.apply(this,arguments)}B(hr,Zt,{handler:function(Z){var de=dr[Z.type];de&tt&&Z.button===0&&(this.pressed=!0),de&We&&Z.which!==1&&(de=Xe),this.pressed&&(de&Xe&&(this.pressed=!1),this.callback(this.manager,de,{pointers:[Z],changedPointers:[Z],pointerType:Oe,srcEvent:Z}))}});var Gn={pointerdown:tt,pointermove:We,pointerup:Xe,pointercancel:lt,pointerout:lt},Nn={2:ce,3:be,4:Oe,5:Be},gi="pointerdown",Yr="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(gi="MSPointerDown",Yr="MSPointerMove MSPointerUp MSPointerCancel");function Ne(){this.evEl=gi,this.evWin=Yr,Zt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}B(Ne,Zt,{handler:function(Z){var de=this.store,we=!1,Le=Z.type.toLowerCase().replace("ms",""),ft=Gn[Le],Mt=Nn[Z.pointerType]||Z.pointerType,Qt=Mt==ce,er=G(de,Z.pointerId,"pointerId");ft&tt&&(Z.button===0||Qt)?er<0&&(de.push(Z),er=de.length-1):ft&(Xe|lt)&&(we=!0),!(er<0)&&(de[er]=Z,this.callback(this.manager,ft,{pointers:de,changedPointers:[Z],pointerType:Mt,srcEvent:Z}),we&&de.splice(er,1))}});var ae={touchstart:tt,touchmove:We,touchend:Xe,touchcancel:lt},ue="touchstart",Ee="touchstart touchmove touchend touchcancel";function Fe(){this.evTarget=ue,this.evWin=Ee,this.started=!1,Zt.apply(this,arguments)}B(Fe,Zt,{handler:function(Z){var de=ae[Z.type];if(de===tt&&(this.started=!0),!!this.started){var we=rt.call(this,Z,de);de&(Xe|lt)&&we[0].length-we[1].length===0&&(this.started=!1),this.callback(this.manager,de,{pointers:we[0],changedPointers:we[1],pointerType:ce,srcEvent:Z})}}});function rt(j,Z){var de=se(j.touches),we=se(j.changedTouches);return Z&(Xe|lt)&&(de=ve(de.concat(we),"identifier")),[de,we]}var it={touchstart:tt,touchmove:We,touchend:Xe,touchcancel:lt},et="touchstart touchmove touchend touchcancel";function Ke(){this.evTarget=et,this.targetIds={},Zt.apply(this,arguments)}B(Ke,Zt,{handler:function(Z){var de=it[Z.type],we=Et.call(this,Z,de);we&&this.callback(this.manager,de,{pointers:we[0],changedPointers:we[1],pointerType:ce,srcEvent:Z})}});function Et(j,Z){var de=se(j.touches),we=this.targetIds;if(Z&(tt|We)&&de.length===1)return we[de[0].identifier]=!0,[de,de];var Le,ft,Mt=se(j.changedTouches),Qt=[],er=this.target;if(ft=de.filter(function(Jt){return re(Jt.target,er)}),Z===tt)for(Le=0;Le<ft.length;)we[ft[Le].identifier]=!0,Le++;for(Le=0;Le<Mt.length;)we[Mt[Le].identifier]&&Qt.push(Mt[Le]),Z&(Xe|lt)&&delete we[Mt[Le].identifier],Le++;if(Qt.length)return[ve(ft.concat(Qt),"identifier"),Qt]}var Rt=2500,gt=25;function Wt(){Zt.apply(this,arguments);var j=U(this.handler,this);this.touch=new Ke(this.manager,j),this.mouse=new hr(this.manager,j),this.primaryTouch=null,this.lastTouches=[]}B(Wt,Zt,{handler:function(Z,de,we){var Le=we.pointerType==ce,ft=we.pointerType==Oe;if(!(ft&&we.sourceCapabilities&&we.sourceCapabilities.firesTouchEvents)){if(Le)mr.call(this,de,we);else if(ft&&pn.call(this,we))return;this.callback(Z,de,we)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function mr(j,Z){j&tt?(this.primaryTouch=Z.changedPointers[0].identifier,Ar.call(this,Z)):j&(Xe|lt)&&Ar.call(this,Z)}function Ar(j){var Z=j.changedPointers[0];if(Z.identifier===this.primaryTouch){var de={x:Z.clientX,y:Z.clientY};this.lastTouches.push(de);var we=this.lastTouches,Le=function(){var ft=we.indexOf(de);ft>-1&&we.splice(ft,1)};setTimeout(Le,Rt)}}function pn(j){for(var Z=j.srcEvent.clientX,de=j.srcEvent.clientY,we=0;we<this.lastTouches.length;we++){var Le=this.lastTouches[we],ft=Math.abs(Z-Le.x),Mt=Math.abs(de-Le.y);if(ft<=gt&&Mt<=gt)return!0}return!1}var Or=ge(l.style,"touchAction"),en=Or!==i,Zr="compute",jn="auto",Jr="manipulation",Ur="none",vn="pan-x",Fn="pan-y",ei=ma();function mi(j,Z){this.manager=j,this.set(Z)}mi.prototype={set:function(j){j==Zr&&(j=this.compute()),en&&this.manager.element.style&&ei[j]&&(this.manager.element.style[Or]=j),this.actions=j.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var j=[];return A(this.manager.recognizers,function(Z){K(Z.options.enable,[Z])&&(j=j.concat(Z.getTouchAction()))}),Ii(j.join(" "))},preventDefaults:function(j){var Z=j.srcEvent,de=j.offsetDirection;if(this.manager.session.prevented){Z.preventDefault();return}var we=this.actions,Le=Se(we,Ur)&&!ei[Ur],ft=Se(we,Fn)&&!ei[Fn],Mt=Se(we,vn)&&!ei[vn];if(Le){var Qt=j.pointers.length===1,er=j.distance<2,Jt=j.deltaTime<250;if(Qt&&er&&Jt)return}if(!(Mt&&ft)&&(Le||ft&&de&pe||Mt&&de&ur))return this.preventSrc(Z)},preventSrc:function(j){this.manager.session.prevented=!0,j.preventDefault()}};function Ii(j){if(Se(j,Ur))return Ur;var Z=Se(j,vn),de=Se(j,Fn);return Z&&de?Ur:Z||de?Z?vn:Fn:Se(j,Jr)?Jr:jn}function ma(){if(!en)return!1;var j={},Z=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(de){j[de]=Z?t.CSS.supports("touch-action",de):!0}),j}var En=1,so=2,Lo=4,yn=8,yi=yn,Qs=16,Vn=32;function zn(j){this.options=R({},this.defaults,j||{}),this.id=$e(),this.manager=null,this.options.enable=ne(this.options.enable,!0),this.state=En,this.simultaneous={},this.requireFail=[]}zn.prototype={defaults:{},set:function(j){return R(this.options,j),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(j){if(S(j,"recognizeWith",this))return this;var Z=this.simultaneous;return j=Un(j,this),Z[j.id]||(Z[j.id]=j,j.recognizeWith(this)),this},dropRecognizeWith:function(j){return S(j,"dropRecognizeWith",this)?this:(j=Un(j,this),delete this.simultaneous[j.id],this)},requireFailure:function(j){if(S(j,"requireFailure",this))return this;var Z=this.requireFail;return j=Un(j,this),G(Z,j)===-1&&(Z.push(j),j.requireFailure(this)),this},dropRequireFailure:function(j){if(S(j,"dropRequireFailure",this))return this;j=Un(j,this);var Z=G(this.requireFail,j);return Z>-1&&this.requireFail.splice(Z,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(j){return!!this.simultaneous[j.id]},emit:function(j){var Z=this,de=this.state;function we(Le){Z.manager.emit(Le,j)}de<yn&&we(Z.options.event+Ts(de)),we(Z.options.event),j.additionalEvent&&we(j.additionalEvent),de>=yn&&we(Z.options.event+Ts(de))},tryEmit:function(j){if(this.canEmit())return this.emit(j);this.state=Vn},canEmit:function(){for(var j=0;j<this.requireFail.length;){if(!(this.requireFail[j].state&(Vn|En)))return!1;j++}return!0},recognize:function(j){var Z=R({},j);if(!K(this.options.enable,[this,Z])){this.reset(),this.state=Vn;return}this.state&(yi|Qs|Vn)&&(this.state=En),this.state=this.process(Z),this.state&(so|Lo|yn|Qs)&&this.tryEmit(Z)},process:function(j){},getTouchAction:function(){},reset:function(){}};function Ts(j){return j&Qs?"cancel":j&yn?"end":j&Lo?"move":j&so?"start":""}function Ji(j){return j==vt?"down":j==zt?"up":j==Lt?"left":j==At?"right":""}function Un(j,Z){var de=Z.manager;return de?de.get(j):j}function kn(){zn.apply(this,arguments)}B(kn,zn,{defaults:{pointers:1},attrTest:function(j){var Z=this.options.pointers;return Z===0||j.pointers.length===Z},process:function(j){var Z=this.state,de=j.eventType,we=Z&(so|Lo),Le=this.attrTest(j);return we&&(de&lt||!Le)?Z|Qs:we||Le?de&Xe?Z|yn:Z&so?Z|Lo:so:Vn}});function go(){kn.apply(this,arguments),this.pX=null,this.pY=null}B(go,kn,{defaults:{event:"pan",threshold:10,pointers:1,direction:sr},getTouchAction:function(){var j=this.options.direction,Z=[];return j&pe&&Z.push(Fn),j&ur&&Z.push(vn),Z},directionTest:function(j){var Z=this.options,de=!0,we=j.distance,Le=j.direction,ft=j.deltaX,Mt=j.deltaY;return Le&Z.direction||(Z.direction&pe?(Le=ft===0?wt:ft<0?Lt:At,de=ft!=this.pX,we=Math.abs(j.deltaX)):(Le=Mt===0?wt:Mt<0?zt:vt,de=Mt!=this.pY,we=Math.abs(j.deltaY))),j.direction=Le,de&&we>Z.threshold&&Le&Z.direction},attrTest:function(j){return kn.prototype.attrTest.call(this,j)&&(this.state&so||!(this.state&so)&&this.directionTest(j))},emit:function(j){this.pX=j.deltaX,this.pY=j.deltaY;var Z=Ji(j.direction);Z&&(j.additionalEvent=this.options.event+Z),this._super.emit.call(this,j)}});function si(){kn.apply(this,arguments)}B(si,kn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ur]},attrTest:function(j){return this._super.attrTest.call(this,j)&&(Math.abs(j.scale-1)>this.options.threshold||this.state&so)},emit:function(j){if(j.scale!==1){var Z=j.scale<1?"in":"out";j.additionalEvent=this.options.event+Z}this._super.emit.call(this,j)}});function ya(){zn.apply(this,arguments),this._timer=null,this._input=null}B(ya,zn,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[jn]},process:function(j){var Z=this.options,de=j.pointers.length===Z.pointers,we=j.distance<Z.threshold,Le=j.deltaTime>Z.time;if(this._input=j,!we||!de||j.eventType&(Xe|lt)&&!Le)this.reset();else if(j.eventType&tt)this.reset(),this._timer=x(function(){this.state=yi,this.tryEmit()},Z.time,this);else if(j.eventType&Xe)return yi;return Vn},reset:function(){clearTimeout(this._timer)},emit:function(j){this.state===yi&&(j&&j.eventType&Xe?this.manager.emit(this.options.event+"up",j):(this._input.timeStamp=v(),this.manager.emit(this.options.event,this._input)))}});function ao(){kn.apply(this,arguments)}B(ao,kn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ur]},attrTest:function(j){return this._super.attrTest.call(this,j)&&(Math.abs(j.rotation)>this.options.threshold||this.state&so)}});function _a(){kn.apply(this,arguments)}B(_a,kn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:pe|ur,pointers:1},getTouchAction:function(){return go.prototype.getTouchAction.call(this)},attrTest:function(j){var Z=this.options.direction,de;return Z&(pe|ur)?de=j.overallVelocity:Z&pe?de=j.overallVelocityX:Z&ur&&(de=j.overallVelocityY),this._super.attrTest.call(this,j)&&Z&j.offsetDirection&&j.distance>this.options.threshold&&j.maxPointers==this.options.pointers&&p(de)>this.options.velocity&&j.eventType&Xe},emit:function(j){var Z=Ji(j.offsetDirection);Z&&this.manager.emit(this.options.event+Z,j),this.manager.emit(this.options.event,j)}});function ci(){zn.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}B(ci,zn,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Jr]},process:function(j){var Z=this.options,de=j.pointers.length===Z.pointers,we=j.distance<Z.threshold,Le=j.deltaTime<Z.time;if(this.reset(),j.eventType&tt&&this.count===0)return this.failTimeout();if(we&&Le&&de){if(j.eventType!=Xe)return this.failTimeout();var ft=this.pTime?j.timeStamp-this.pTime<Z.interval:!0,Mt=!this.pCenter||Kt(this.pCenter,j.center)<Z.posThreshold;this.pTime=j.timeStamp,this.pCenter=j.center,!Mt||!ft?this.count=1:this.count+=1,this._input=j;var Qt=this.count%Z.taps;if(Qt===0)return this.hasRequireFailures()?(this._timer=x(function(){this.state=yi,this.tryEmit()},Z.interval,this),so):yi}return Vn},failTimeout:function(){return this._timer=x(function(){this.state=Vn},this.options.interval,this),Vn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==yi&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Ko(j,Z){return Z=Z||{},Z.recognizers=ne(Z.recognizers,Ko.defaults.preset),new hs(j,Z)}Ko.VERSION="2.0.7",Ko.defaults={domEvents:!1,touchAction:Zr,enable:!0,inputTarget:null,inputClass:null,preset:[[ao,{enable:!1}],[si,{enable:!1},["rotate"]],[_a,{direction:pe}],[go,{direction:pe},["swipe"]],[ci],[ci,{event:"doubletap",taps:2},["tap"]],[ya]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var mo=1,Cs=2;function hs(j,Z){this.options=R({},Ko.defaults,Z||{}),this.options.inputTarget=this.options.inputTarget||j,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=j,this.input=rr(this),this.touchAction=new mi(this,this.options.touchAction),xn(this,!0),A(this.options.recognizers,function(de){var we=this.add(new de[0](de[1]));de[2]&&we.recognizeWith(de[2]),de[3]&&we.requireFailure(de[3])},this)}hs.prototype={set:function(j){return R(this.options,j),j.touchAction&&this.touchAction.update(),j.inputTarget&&(this.input.destroy(),this.input.target=j.inputTarget,this.input.init()),this},stop:function(j){this.session.stopped=j?Cs:mo},recognize:function(j){var Z=this.session;if(!Z.stopped){this.touchAction.preventDefaults(j);var de,we=this.recognizers,Le=Z.curRecognizer;(!Le||Le&&Le.state&yi)&&(Le=Z.curRecognizer=null);for(var ft=0;ft<we.length;)de=we[ft],Z.stopped!==Cs&&(!Le||de==Le||de.canRecognizeWith(Le))?de.recognize(j):de.reset(),!Le&&de.state&(so|Lo|yn)&&(Le=Z.curRecognizer=de),ft++}},get:function(j){if(j instanceof zn)return j;for(var Z=this.recognizers,de=0;de<Z.length;de++)if(Z[de].options.event==j)return Z[de];return null},add:function(j){if(S(j,"add",this))return this;var Z=this.get(j.options.event);return Z&&this.remove(Z),this.recognizers.push(j),j.manager=this,this.touchAction.update(),j},remove:function(j){if(S(j,"remove",this))return this;if(j=this.get(j),j){var Z=this.recognizers,de=G(Z,j);de!==-1&&(Z.splice(de,1),this.touchAction.update())}return this},on:function(j,Z){if(j!==i&&Z!==i){var de=this.handlers;return A(J(j),function(we){de[we]=de[we]||[],de[we].push(Z)}),this}},off:function(j,Z){if(j!==i){var de=this.handlers;return A(J(j),function(we){Z?de[we]&&de[we].splice(G(de[we],Z),1):delete de[we]}),this}},emit:function(j,Z){this.options.domEvents&&D(j,Z);var de=this.handlers[j]&&this.handlers[j].slice();if(!(!de||!de.length)){Z.type=j,Z.preventDefault=function(){Z.srcEvent.preventDefault()};for(var we=0;we<de.length;)de[we](Z),we++}},destroy:function(){this.element&&xn(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function xn(j,Z){var de=j.element;if(de.style){var we;A(j.options.cssProps,function(Le,ft){we=ge(de.style,ft),Z?(j.oldCssProps[we]=de.style[we],de.style[we]=Le):de.style[we]=j.oldCssProps[we]||""}),Z||(j.oldCssProps={})}}function D(j,Z){var de=r.createEvent("Event");de.initEvent(j,!0,!0),de.gesture=Z,Z.target.dispatchEvent(de)}R(Ko,{INPUT_START:tt,INPUT_MOVE:We,INPUT_END:Xe,INPUT_CANCEL:lt,STATE_POSSIBLE:En,STATE_BEGAN:so,STATE_CHANGED:Lo,STATE_ENDED:yn,STATE_RECOGNIZED:yi,STATE_CANCELLED:Qs,STATE_FAILED:Vn,DIRECTION_NONE:wt,DIRECTION_LEFT:Lt,DIRECTION_RIGHT:At,DIRECTION_UP:zt,DIRECTION_DOWN:vt,DIRECTION_HORIZONTAL:pe,DIRECTION_VERTICAL:ur,DIRECTION_ALL:sr,Manager:hs,Input:Zt,TouchAction:mi,TouchInput:Ke,MouseInput:hr,PointerEventInput:Ne,TouchMouseInput:Wt,SingleTouchInput:Fe,Recognizer:zn,AttrRecognizer:kn,Tap:ci,Pan:go,Swipe:_a,Pinch:si,Rotate:ao,Press:ya,on:ee,off:Q,each:A,merge:N,extend:z,assign:R,inherit:B,bindFn:U,prefixed:ge});var X=typeof t<"u"?t:typeof self<"u"?self:{};X.Hammer=Ko,e.exports?e.exports=Ko:t[n]=Ko})(window,document,"Hammer")})(PW);var Sb=PW.exports;const WDe=PS(Sb),qh=l9({__proto__:null,default:WDe},[Sb]),IW=1,RW=2,MP=4,XDe={mousedown:IW,mousemove:RW,mouseup:MP};function KDe(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return!0;return!1}function GDe(e){const t=e.prototype.handler;e.prototype.handler=function(n){const i=this.store;n.button>0&&n.type==="pointerdown"&&(KDe(i,o=>o.pointerId===n.pointerId)||i.push(n)),t.call(this,n)}}function YDe(e){e.prototype.handler=function(r){let n=XDe[r.type];n&IW&&r.button>=0&&(this.pressed=!0),n&RW&&r.buttons===0&&(n=MP),this.pressed&&(n&MP&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[r],changedPointers:[r],pointerType:"mouse",srcEvent:r}))}}GDe(Sb.PointerEventInput);YDe(Sb.MouseInput);const ZDe=Sb.Manager;class _A{constructor(t,r,n){this.element=t,this.callback=r,this.options={enable:!0,...n}}}const JDe=qh?[[qh.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[qh.Rotate,{enable:!1}],[qh.Pinch,{enable:!1}],[qh.Swipe,{enable:!1}],[qh.Pan,{threshold:0,enable:!1}],[qh.Press,{enable:!1}],[qh.Tap,{event:"doubletap",taps:2,enable:!1}],[qh.Tap,{event:"anytap",enable:!1}],[qh.Tap,{enable:!1}]]:null,ZB={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},QDe={doubletap:["tap"]},eLe={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},C6={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},tLe={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},JB={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},rLe=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",vy=typeof window<"u"?window:global;let OP=!1;try{const e={get passive(){return OP=!0,!0}};vy.addEventListener("test",null,e),vy.removeEventListener("test",null)}catch{OP=!1}const nLe=rLe.indexOf("firefox")!==-1,{WHEEL_EVENTS:iLe}=C6,QB="wheel",e7=4.000244140625,oLe=40,sLe=.25;class aLe extends _A{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{if(!this.options.enable)return;let o=i.deltaY;vy.WheelEvent&&(nLe&&i.deltaMode===vy.WheelEvent.DOM_DELTA_PIXEL&&(o/=vy.devicePixelRatio),i.deltaMode===vy.WheelEvent.DOM_DELTA_LINE&&(o*=oLe)),o!==0&&o%e7===0&&(o=Math.floor(o/e7)),i.shiftKey&&o&&(o=o*sLe),this.callback({type:QB,center:{x:i.clientX,y:i.clientY},delta:-o,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(iLe),this.events.forEach(i=>t.addEventListener(i,this.handleEvent,OP?{passive:!1}:!1))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===QB&&(this.options.enable=r)}}const{MOUSE_EVENTS:lLe}=C6,t7="pointermove",r7="pointerover",n7="pointerout",i7="pointerenter",o7="pointerleave";class cLe extends _A{constructor(t,r,n){super(t,r,n),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(lLe),this.events.forEach(o=>t.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===t7&&(this.enableMoveEvent=r),t===r7&&(this.enableOverEvent=r),t===n7&&(this.enableOutEvent=r),t===i7&&(this.enableEnterEvent=r),t===o7&&(this.enableLeaveEvent=r)}handleOverEvent(t){this.enableOverEvent&&t.type==="mouseover"&&this._emit(r7,t)}handleOutEvent(t){this.enableOutEvent&&t.type==="mouseout"&&this._emit(n7,t)}handleEnterEvent(t){this.enableEnterEvent&&t.type==="mouseenter"&&this._emit(i7,t)}handleLeaveEvent(t){this.enableLeaveEvent&&t.type==="mouseleave"&&this._emit(o7,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":t.buttons===0&&(this.pressed=!1),this.pressed||this._emit(t7,t);break;case"mouseup":this.pressed=!1;break}}_emit(t,r){this.callback({type:t,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})}}const{KEY_EVENTS:uLe}=C6,s7="keydown",a7="keyup";class hLe extends _A{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{const o=i.target||i.srcElement;o.tagName==="INPUT"&&o.type==="text"||o.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:s7,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:a7,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(uLe),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach(i=>t.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===s7&&(this.enableDownEvent=r),t===a7&&(this.enableUpEvent=r)}}const l7="contextmenu";class fLe extends _A{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{this.options.enable&&this.callback({type:l7,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,r){t===l7&&(this.options.enable=r)}}const c7=1,NP=2,u7=4,dLe={pointerdown:c7,pointermove:NP,pointerup:u7,mousedown:c7,mousemove:NP,mouseup:u7},pLe=0,gLe=1,mLe=2,yLe=1,_Le=2,vLe=4;function bLe(e){const t=dLe[e.srcEvent.type];if(!t)return null;const{buttons:r,button:n}=e.srcEvent;let i=!1,o=!1,l=!1;return t===NP?(i=!!(r&yLe),o=!!(r&vLe),l=!!(r&_Le)):(i=n===pLe,o=n===gLe,l=n===mLe),{leftButton:i,middleButton:o,rightButton:l}}function xLe(e,t){const r=e.center;if(!r)return null;const n=t.getBoundingClientRect(),i=n.width/t.offsetWidth||1,o=n.height/t.offsetHeight||1,l={x:(r.x-n.left-t.clientLeft)/i,y:(r.y-n.top-t.clientTop)/o};return{center:r,offsetCenter:l}}const YT={srcElement:"root",priority:0};class wLe{constructor(t){this.handleEvent=r=>{if(this.isEmpty())return;const n=this._normalizeEvent(r);let i=r.srcEvent.target;for(;i&&i!==n.rootElement;){if(this._emit(n,i),n.handled)return;i=i.parentNode}this._emit(n,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,r,n,i=!1,o=!1){const{handlers:l,handlersByElement:s}=this;let f=YT;typeof n=="string"||n&&n.addEventListener?f={...YT,srcElement:n}:n&&(f={...YT,...n});let p=s.get(f.srcElement);p||(p=[],s.set(f.srcElement,p));const v={type:t,handler:r,srcElement:f.srcElement,priority:f.priority};i&&(v.once=!0),o&&(v.passive=!0),l.push(v),this._active=this._active||!v.passive;let x=p.length-1;for(;x>=0&&!(p[x].priority>=v.priority);)x--;p.splice(x+1,0,v)}remove(t,r){const{handlers:n,handlersByElement:i}=this;for(let o=n.length-1;o>=0;o--){const l=n[o];if(l.type===t&&l.handler===r){n.splice(o,1);const s=i.get(l.srcElement);s.splice(s.indexOf(l),1),s.length===0&&i.delete(l.srcElement)}}this._active=n.some(o=>!o.passive)}_emit(t,r){const n=this.handlersByElement.get(r);if(n){let i=!1;const o=()=>{t.handled=!0},l=()=>{t.handled=!0,i=!0},s=[];for(let f=0;f<n.length;f++){const{type:p,handler:v,once:x}=n[f];if(v({...t,type:p,stopPropagation:o,stopImmediatePropagation:l}),x&&s.push(n[f]),i)break}for(let f=0;f<s.length;f++){const{type:p,handler:v}=s[f];this.remove(p,v)}}}_normalizeEvent(t){const r=this.eventManager.getElement();return{...t,...bLe(t),...xLe(t,r),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:r}}}const SLe={events:null,recognizers:null,recognizerOptions:{},Manager:ZDe,touchAction:"none",tabIndex:0};class ALe{constructor(t=null,r){this._onBasicInput=i=>{const{srcEvent:o}=i,l=eLe[o.type];l&&this.manager.emit(l,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...SLe,...r},this.events=new Map,this.setElement(t);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:r}=this,n=r.Manager;this.manager=new n(t,{touchAction:r.touchAction,recognizers:r.recognizers||JDe}).on("hammer.input",this._onBasicInput),r.recognizers||Object.keys(ZB).forEach(i=>{const o=this.manager.get(i);o&&ZB[i].forEach(l=>{o.recognizeWith(l)})});for(const i in r.recognizerOptions){const o=this.manager.get(i);if(o){const l=r.recognizerOptions[i];delete l.enable,o.set(l)}}this.wheelInput=new aLe(t,this._onOtherEvent,{enable:!1}),this.moveInput=new cLe(t,this._onOtherEvent,{enable:!1}),this.keyInput=new hLe(t,this._onOtherEvent,{enable:!1,tabIndex:r.tabIndex}),this.contextmenuInput=new fLe(t,this._onOtherEvent,{enable:!1});for(const[i,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(i,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,r,n){this._addEventHandler(t,r,n,!1)}once(t,r,n){this._addEventHandler(t,r,n,!0)}watch(t,r,n){this._addEventHandler(t,r,n,!1,!0)}off(t,r){this._removeEventHandler(t,r)}_toggleRecognizer(t,r){const{manager:n}=this;if(!n)return;const i=n.get(t);if(i&&i.options.enable!==r){i.set({enable:r});const o=QDe[t];o&&!this.options.recognizers&&o.forEach(l=>{const s=n.get(l);r?(s.requireFailure(t),i.dropRequireFailure(l)):s.dropRequireFailure(t)})}this.wheelInput.enableEventType(t,r),this.moveInput.enableEventType(t,r),this.keyInput.enableEventType(t,r),this.contextmenuInput.enableEventType(t,r)}_addEventHandler(t,r,n,i,o){if(typeof t!="string"){n=r;for(const v in t)this._addEventHandler(v,t[v],n,i,o);return}const{manager:l,events:s}=this,f=JB[t]||t;let p=s.get(f);p||(p=new wLe(this),s.set(f,p),p.recognizerName=tLe[f]||f,l&&l.on(f,p.handleEvent)),p.add(t,r,n,i,o),p.isEmpty()||this._toggleRecognizer(p.recognizerName,!0)}_removeEventHandler(t,r){if(typeof t!="string"){for(const l in t)this._removeEventHandler(l,t[l]);return}const{events:n}=this,i=JB[t]||t,o=n.get(i);if(o&&(o.remove(t,r),o.isEmpty())){const{recognizerName:l}=o;let s=!1;for(const f of n.values())if(f.recognizerName===l&&!f.isEmpty()){s=!0;break}s||this._toggleRecognizer(l,!1)}}}function qd(){}const ELe=({isDragging:e})=>e?"grabbing":"grab",kW={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,parameters:{},parent:null,device:null,deviceProps:{type:"webgl"},gl:null,glOptions:{},canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,widgets:[],onDeviceInitialized:qd,onWebGLInitialized:qd,onResize:qd,onViewStateChange:qd,onInteractionStateChange:qd,onBeforeRender:qd,onAfterRender:qd,onLoad:qd,onError:e=>oo.error(e.message,e.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:ELe,getTooltip:null,debug:!1,drawPickingColors:!1};class D2{constructor(t){this.width=0,this.height=0,this.userData={},this.device=null,this.canvas=null,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this.eventManager=null,this.widgetManager=null,this.tooltip=null,this.animationLoop=null,this.cursorState={isHovering:!1,isDragging:!1},this.stats=new hA({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this._lastPointerDownInfo=null,this._onPointerMove=n=>{const{_pickRequest:i}=this;if(n.type==="pointerleave")i.x=-1,i.y=-1,i.radius=0;else{if(n.leftButton||n.rightButton)return;{const o=n.offsetCenter;if(!o)return;i.x=o.x,i.y=o.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=n},this._onEvent=n=>{const i=xP[n.type],o=n.offsetCenter;if(!i||!o||!this.layerManager)return;const l=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:o.x,y:o.y,layers:l,viewports:this.getViewports(o)},this._lastPointerDownInfo),{layer:f}=s,p=f&&(f[i.handler]||f.props[i.handler]),v=this.props[i.handler];let x=!1;p&&(x=p.call(f,s,n)),x||(v==null||v(s,n),this.widgetManager.onEvent(s,n))},this._onPointerDown=n=>{const i=n.offsetCenter,o=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=o.result[0]||o.emptyInfo},this.props={...kW,...t},t=this.props,t.viewState&&t.initialViewState&&oo.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),this.viewState=this.props.initialViewState,t.device?this.device=t.device:t.gl&&(t.gl instanceof WebGLRenderingContext&&oo.error("WebGL1 context not supported.")(),this.device=zv.attach(t.gl));let r=this.device;r||(By.registerDevices([zv]),r=By.createDevice({...t.deviceProps,canvas:this._createCanvas(t)})),this.animationLoop=this._createAnimationLoop(r,t),this.setProps(t),t._typedArrayManagerProps&&R2.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,r,n,i,o,l,s,f,p,v;(t=this.animationLoop)==null||t.stop(),(r=this.animationLoop)==null||r.destroy(),this.animationLoop=null,this._lastPointerDownInfo=null,(n=this.layerManager)==null||n.finalize(),this.layerManager=null,(i=this.viewManager)==null||i.finalize(),this.viewManager=null,(o=this.effectManager)==null||o.finalize(),this.effectManager=null,(l=this.deckRenderer)==null||l.finalize(),this.deckRenderer=null,(s=this.deckPicker)==null||s.finalize(),this.deckPicker=null,(f=this.eventManager)==null||f.destroy(),this.eventManager=null,(p=this.widgetManager)==null||p.finalize(),this.widgetManager=null,!this.props.canvas&&!this.props.device&&!this.props.gl&&this.canvas&&((v=this.canvas.parentElement)==null||v.removeChild(this.canvas),this.canvas=null)}setProps(t){var n;this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&oo.removed("onLayerHover","onHover")(),"onLayerClick"in t&&oo.removed("onLayerClick","onClick")(),t.initialViewState&&!ah(this.props.initialViewState,t.initialViewState,3)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const r=Object.create(this.props);Object.assign(r,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),(n=this.animationLoop)==null||n.setProps(r),this.layerManager&&(this.viewManager.setProps(r),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(r),this.effectManager.setProps(r),this.deckRenderer.setProps(r),this.deckPicker.setProps(r),this.widgetManager.setProps(r)),this.stats.get("setProps Time").timeEnd()}needsRedraw(t={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(t),i=this.layerManager.needsRedraw(t),o=this.effectManager.needsRedraw(t),l=this.deckRenderer.needsRedraw(t);return r=r||n||i||o||l,r}redraw(t){if(!this.layerManager)return;let r=this.needsRedraw({clearRedrawFlags:!0});r=t||r,r&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(r):this._drawLayers(r))}get isInitialized(){return this.viewManager!==null}getViews(){return Zs(this.viewManager),this.viewManager.views}getViewports(t){return Zs(this.viewManager),this.viewManager.getViewports(t)}getCanvas(){return this.canvas}pickObject(t){const r=this._pick("pickObject","pickObject Time",t).result;return r.length?r[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t,r=!1){for(const n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:r})}_removeResources(t){for(const r of t)this.layerManager.resourceManager.remove(r)}_addDefaultEffect(t){this.effectManager.addDefaultEffect(t)}_addDefaultShaderModule(t){this.layerManager.addDefaultShaderModule(t)}_removeDefaultShaderModule(t){var r;(r=this.layerManager)==null||r.removeDefaultShaderModule(t)}_pick(t,r,n){Zs(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(r).timeStart();const o=this.deckPicker[t]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return i.get(r).timeEnd(),o}_createCanvas(t){let r=t.canvas;return typeof r=="string"&&(r=document.getElementById(r),Zs(r)),r||(r=document.createElement("canvas"),r.id=t.id||"deckgl-overlay",(t.parent||document.body).appendChild(r)),Object.assign(r.style,t.style),r}_setCanvasSize(t){var i;if(!this.canvas)return;const{width:r,height:n}=t;if(r||r===0){const o=Number.isFinite(r)?`${r}px`:r;this.canvas.style.width=o}if(n||n===0){const o=Number.isFinite(n)?`${n}px`:n;this.canvas.style.position=((i=t.style)==null?void 0:i.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){var i,o;const{canvas:t}=this;if(!t)return;const r=t.clientWidth??t.width,n=t.clientHeight??t.height;(r!==this.width||n!==this.height)&&(this.width=r,this.height=n,(i=this.viewManager)==null||i.setProps({width:r,height:n}),(o=this.layerManager)==null||o.activateViewport(this.getViewports()[0]),this.props.onResize({width:r,height:n}))}_createAnimationLoop(t,r){const{gl:n,onError:i,useDevicePixels:o}=r;return new K8e({device:t,useDevicePixels:o,autoResizeDrawingBuffer:!n,autoResizeViewport:!1,onInitialize:l=>this._setDevice(l.device),onRender:this._onRenderFrame.bind(this),onError:i})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){const{views:t}=this.props,r=Array.isArray(t)?t:t?[t]:[new w6({id:"default-view"})];return r.length&&this.props.controller&&(r[0].props.controller=this.props.controller),r}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){var r,n,i;const{_pickRequest:t}=this;if(t.event){const{result:o,emptyInfo:l}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=o.length>0;let s=l,f=!1;for(const p of o)s=p,f=((r=p.layer)==null?void 0:r.onHover(p,t.event))||f;f||((i=(n=this.props).onHover)==null||i.call(n,s,t.event),this.widgetManager.onHover(s,t.event)),t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setDevice(t){var i,o;if(this.device=t,!this.animationLoop)return;this.canvas||(this.canvas=(i=this.device.canvasContext)==null?void 0:i.canvas),this.device.setParametersWebGL({blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onDeviceInitialized(this.device),this.device instanceof zv&&this.props.onWebGLInitialized(this.device.gl);const r=new cW;r.play(),this.animationLoop.attachTimeline(r),this.eventManager=new ALe(this.props.parent||this.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const l in xP)this.eventManager.on(l,this._onEvent);this.viewManager=new dOe({timeline:r,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new fOe(this.device,{deck:this,stats:this.stats,viewport:n,timeline:r}),this.effectManager=new ROe({deck:this,device:this.device}),this.deckRenderer=new OOe(this.device),this.deckPicker=new zOe(this.device),this.widgetManager=new jOe({deck:this,parentElement:(o=this.canvas)==null?void 0:o.parentElement}),this.widgetManager.addDefault(new HOe),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,r){var l;const{device:n,gl:i}=this.layerManager.context;this.props.onBeforeRender({device:n,gl:i});const o={target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...r};(l=this.deckRenderer)==null||l.renderLayers(o),o.pass==="screen"&&this.widgetManager.onRedraw({viewports:o.viewports,layers:o.layers}),this.props.onAfterRender({device:n,gl:i})}_onRenderFrame(){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),oo.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const r=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:r},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const r=this.animationLoop.stats;t.get("GPU Time").addTime(r.get("GPU Time").lastTiming),t.get("CPU Time").addTime(r.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:r}=this;t.fps=r.get("frameRate").getHz(),t.setPropsTime=r.get("setProps Time").time,t.updateAttributesTime=r.get("Update Attributes").time,t.framesRedrawn=r.get("Redraw Count").count,t.pickTime=r.get("pickObject Time").time+r.get("pickMultipleObjects Time").time+r.get("pickObjects Time").time,t.pickCount=r.get("Pick Count").count,t.gpuTime=r.get("GPU Time").time,t.cpuTime=r.get("CPU Time").time,t.gpuTimePerFrame=r.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=r.get("CPU Time").getAverageTime();const n=By.stats.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}D2.defaultProps=kW;D2.VERSION=iRe;function TLe(e){switch(e){case"float64":return Float64Array;case"uint8":case"unorm8":return Uint8ClampedArray;default:return Dq(e)}}const CLe=Nq;function Xx(e,t){return{attribute:e,format:t.size>1?`${t.type}x${t.size}`:t.type,byteOffset:t.offset||0}}function Pg(e){return e.stride||e.size*e.bytesPerElement}function PLe(e,t){return e.type===t.type&&e.size===t.size&&Pg(e)===Pg(t)&&(e.offset||0)===(t.offset||0)}function DP(e,t){t.offset&&oo.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const r=Pg(e),n=t.vertexOffset!==void 0?t.vertexOffset:e.vertexOffset||0,i=t.elementOffset||0,o=n*r+i*e.bytesPerElement+(e.offset||0);return{...t,offset:o,stride:r}}function ILe(e,t){const r=DP(e,t);return{high:r,low:{...r,offset:r.offset+e.size*4}}}class RLe{constructor(t,r,n){this._buffer=null,this.device=t,this.id=r.id||"",this.size=r.size||1;const i=r.logicalType||r.type,o=i==="float64";let{defaultValue:l}=r;l=Number.isFinite(l)?[l]:l||new Array(this.size).fill(0);let s;o?s="float32":!i&&r.isIndexed?s="uint32":s=i||"float32";let f=TLe(i||s);this.doublePrecision=o,o&&r.fp64===!1&&(f=Float32Array),this.value=null,this.settings={...r,defaultType:f,defaultValue:l,logicalType:i,type:s,normalized:s.includes("norm"),size:this.size,bytesPerElement:f.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}}get isConstant(){return this.state.constant}get buffer(){return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*Pg(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),R2.release(this.state.allocatedValue)}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(t=this.id,r=null){const n={};if(this.state.constant){const i=this.value;if(r){const o=DP(this.getAccessor(),r),l=o.offset/i.BYTES_PER_ELEMENT,s=o.size||this.size;n[t]=i.subarray(l,l+s)}else n[t]=i}else n[t]=this.getBuffer();return this.doublePrecision&&(this.value instanceof Float64Array?n[`${t}64Low`]=n[t]:n[`${t}64Low`]=new Float32Array(this.size)),n}_getBufferLayout(t=this.id,r=null){const n=this.getAccessor(),i=[],o={name:this.id,byteStride:Pg(n),attributes:i};if(this.doublePrecision){const l=ILe(n,r||{});i.push(Xx(t,{...n,...l.high}),Xx(`${t}64Low`,{...n,...l.low}))}else if(r){const l=DP(n,r);i.push(Xx(t,{...n,...l}))}else i.push(Xx(t,n));return o}setAccessor(t){this.state.bufferAccessor=t}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const r=Array.from(this.value);t=[r,r]}else{const{value:r,numInstances:n,size:i}=this,o=n*i;if(r&&o&&r.length>=o){const l=new Array(i).fill(1/0),s=new Array(i).fill(-1/0);for(let f=0;f<o;)for(let p=0;p<i;p++){const v=r[f++];v<l[p]&&(l[p]=v),v>s[p]&&(s[p]=v)}t=[l,s]}}return this.state.bounds=t,t}setData(t){const{state:r}=this;let n;ArrayBuffer.isView(t)?n={value:t}:t instanceof Vo?n={buffer:t}:n=t;const i={...this.settings,...n};if(ArrayBuffer.isView(n.value)){if(!n.type)if(this.doublePrecision&&n.value instanceof Float64Array)i.type="float32";else{const l=CLe(n.value);i.type=i.normalized?l.replace("int","norm"):l}i.bytesPerElement=n.value.BYTES_PER_ELEMENT,i.stride=Pg(i)}if(r.bounds=null,n.constant){let o=n.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),!(!r.constant||!this._areValuesEqual(o,this.value)))return!1;r.externalBuffer=null,r.constant=!0,this.value=ArrayBuffer.isView(o)?o:new Float32Array(o)}else if(n.buffer){const o=n.buffer;r.externalBuffer=o,r.constant=!1,this.value=n.value||null}else if(n.value){this._checkExternalBuffer(n);let o=n.value;r.externalBuffer=null,r.constant=!1,this.value=o;let{buffer:l}=this;const s=Pg(i),f=(i.vertexOffset||0)*s;if(this.doublePrecision&&o instanceof Float64Array&&(o=FT(o,i)),this.settings.isIndexed){const v=this.settings.defaultType;o.constructor!==v&&(o=new v(o))}const p=o.byteLength+f+s*2;(!l||l.byteLength<p)&&(l=this._createBuffer(p)),l.write(o,f)}return this.setAccessor(i),!0}updateSubBuffer(t={}){this.state.bounds=null;const r=this.value,{startOffset:n=0,endOffset:i}=t;this.buffer.write(this.doublePrecision&&r instanceof Float64Array?FT(r,{size:this.size,startIndex:n,endIndex:i}):r.subarray(n,i),n*r.BYTES_PER_ELEMENT+this.byteOffset)}allocate(t,r=!1){const{state:n}=this,i=n.allocatedValue,o=R2.allocate(i,t+1,{size:this.size,type:this.settings.defaultType,copy:r});this.value=o;const{byteOffset:l}=this;let{buffer:s}=this;return(!s||s.byteLength<o.byteLength+l)&&(s=this._createBuffer(o.byteLength+l),r&&i&&s.write(i instanceof Float64Array?FT(i,this):i,l)),n.allocatedValue=o,n.constant=!1,n.externalBuffer=null,this.setAccessor(this.settings),!0}_checkExternalBuffer(t){const{value:r}=t;if(!ArrayBuffer.isView(r))throw new Error(`Attribute ${this.id} value is not TypedArray`);const n=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=r.BYTES_PER_ELEMENT<4),i)throw new Error(`Attribute ${this.id} does not support ${r.constructor.name}`);!(r instanceof n)&&this.settings.normalized&&!("normalized"in t)&&oo.warn(`Attribute ${this.id} is normalized`)()}normalizeConstant(t){switch(this.settings.type){case"snorm8":return new Float32Array(t).map(r=>(r+128)/255*2-1);case"snorm16":return new Float32Array(t).map(r=>(r+32768)/65535*2-1);case"unorm8":return new Float32Array(t).map(r=>r/255);case"unorm16":return new Float32Array(t).map(r=>r/65535);default:return t}}_normalizeValue(t,r,n){const{defaultValue:i,size:o}=this.settings;if(Number.isFinite(t))return r[n]=t,r;if(!t){let l=o;for(;--l>=0;)r[n+l]=i[l];return r}switch(o){case 4:r[n+3]=Number.isFinite(t[3])?t[3]:i[3];case 3:r[n+2]=Number.isFinite(t[2])?t[2]:i[2];case 2:r[n+1]=Number.isFinite(t[1])?t[1]:i[1];case 1:r[n+0]=Number.isFinite(t[0])?t[0]:i[0];break;default:let l=o;for(;--l>=0;)r[n+l]=Number.isFinite(t[l])?t[l]:i[l]}return r}_areValuesEqual(t,r){if(!t||!r)return!1;const{size:n}=this;for(let i=0;i<n;i++)if(t[i]!==r[i])return!1;return!0}_createBuffer(t){var i;this._buffer&&this._buffer.destroy();const{isIndexed:r,type:n}=this.settings;return this._buffer=this.device.createBuffer({...(i=this._buffer)==null?void 0:i.props,id:this.id,usage:r?Vo.INDEX:Vo.VERTEX,indexType:r?n:void 0,byteLength:t}),this._buffer}}const h7=[],f7=[];function kLe(e,t=0,r=1/0){let n=h7;const i={index:-1,data:e,target:[]};return e?typeof e[Symbol.iterator]=="function"?n=e:e.length>0&&(f7.length=e.length,n=f7):n=h7,(t>0||Number.isFinite(r))&&(n=(Array.isArray(n)?n:Array.from(n)).slice(t,r),i.index=t-1),{iterable:n,objectInfo:i}}function MW(e){return e&&e[Symbol.asyncIterator]}function MLe(e,t){const{size:r,stride:n,offset:i,startIndices:o,nested:l}=t,s=e.BYTES_PER_ELEMENT,f=n?n/s:r,p=i?i/s:0,v=Math.floor((e.length-p)/f);return(x,{index:S,target:A})=>{if(!o){const N=S*f+p;for(let B=0;B<r;B++)A[B]=e[N+B];return A}const k=o[S],R=o[S+1]||v;let z;if(l){z=new Array(R-k);for(let N=k;N<R;N++){const B=N*f+p;A=new Array(r);for(let U=0;U<r;U++)A[U]=e[B+U];z[N-k]=A}}else if(f===r)z=e.subarray(k*r+p,R*r+p);else{z=new e.constructor((R-k)*r);let N=0;for(let B=k;B<R;B++){const U=B*f+p;for(let K=0;K<r;K++)z[N++]=e[U+K]}}return z}}const OLe=[],Ow=[[0,1/0]];function NLe(e,t){if(e===Ow||(t[0]<0&&(t[0]=0),t[0]>=t[1]))return e;const r=[],n=e.length;let i=0;for(let o=0;o<n;o++){const l=e[o];l[1]<t[0]?(r.push(l),i=o+1):l[0]>t[1]?r.push(l):t=[Math.min(l[0],t[0]),Math.max(l[1],t[1])]}return r.splice(i,0,t),r}const DLe={interpolation:{duration:0,easing:e=>e},spring:{stiffness:.05,damping:.5}};function OW(e,t){if(!e)return null;Number.isFinite(e)&&(e={type:"interpolation",duration:e});const r=e.type||"interpolation";return{...DLe[r],...t,...e,type:r}}class NW extends RLe{constructor(t,r){super(t,r,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,layoutChanged:!1,updateRanges:Ow}),this.constant=!1,this.settings.update=r.update||(r.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:t=!1}={}){const r=this.state.needsRedraw;return this.state.needsRedraw=r&&!t,r}layoutChanged(){return this.state.layoutChanged}setAccessor(t){var r;(r=this.state).layoutChanged||(r.layoutChanged=!PLe(t,this.getAccessor())),super.setAccessor(t)}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat(typeof t!="function"&&t||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:r}=this.settings,n=this.settings.transition,i=Array.isArray(r)?t[r.find(o=>t[o])]:t[r];return OW(i,n)}setNeedsUpdate(t=this.id,r){if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),r){const{startRow:n=0,endRow:i=1/0}=r;this.state.updateRanges=NLe(this.state.updateRanges,[n,i])}else this.state.updateRanges=Ow}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=OLe}setNeedsRedraw(t=this.id){this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:r,settings:n}=this;return n.noAlloc?!1:n.update?(super.allocate(t,r.updateRanges!==Ow),!0):!1}updateBuffer({numInstances:t,data:r,props:n,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:l,noAlloc:s}}=this;let f=!0;if(l){for(const[p,v]of o)l.call(i,this,{data:r,startRow:p,endRow:v,props:n,numInstances:t});if(this.value)if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[p,v]of o){const x=Number.isFinite(p)?this.getVertexOffset(p):0,S=Number.isFinite(v)?this.getVertexOffset(v):s||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:x,endOffset:S})}this._checkAttributeArray()}else f=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),f}setConstantValue(t){return t===void 0||typeof t=="function"?!1:(this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(t){const{state:r}=this;return t?(this.clearNeedsUpdate(),r.lastExternalBuffer===t||(r.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(r.lastExternalBuffer=null,!1)}setBinaryValue(t,r=null){const{state:n,settings:i}=this;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;if(n.binaryValue=t,this.setNeedsRedraw(),i.transform||r!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const l=t;Zs(ArrayBuffer.isView(l.value),`invalid ${i.accessor}`);const s=!!l.size&&l.size!==this.size;return n.binaryAccessor=MLe(l.value,{size:l.size||this.size,stride:l.stride,offset:l.offset,startIndices:r,nested:s}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:r}=this;return(r?t<r.length?r[t]:this.numInstances:t)*this.size}getValue(){const t=this.settings.shaderAttributes,r=super.getValue();if(!t)return r;for(const n in t)Object.assign(r,super.getValue(n,t[n]));return r}getBufferLayout(t){this.state.layoutChanged=!1;const r=this.settings.shaderAttributes,n=super._getBufferLayout(),{stepMode:i}=this.settings;if(i==="dynamic"?n.stepMode=t?t.isInstanced?"instance":"vertex":"instance":n.stepMode=i??"vertex",!r)return n;for(const o in r){const l=super._getBufferLayout(o,r[o]);n.attributes.push(...l.attributes)}return n}_autoUpdater(t,{data:r,startRow:n,endRow:i,props:o,numInstances:l}){if(t.constant)return;const{settings:s,state:f,value:p,size:v,startIndices:x}=t,{accessor:S,transform:A}=s,k=f.binaryAccessor||(typeof S=="function"?S:o[S]);Zs(typeof k=="function",`accessor "${S}" is not a function`);let R=t.getVertexOffset(n);const{iterable:z,objectInfo:N}=kLe(r,n,i);for(const B of z){N.index++;let U=k(B,N);if(A&&(U=A.call(this,U)),x){const K=(N.index<x.length-1?x[N.index+1]:l)-x[N.index];if(U&&Array.isArray(U[0])){let ne=R;for(const ee of U)t._normalizeValue(ee,p,ne),ne+=v}else U&&U.length>v?p.set(U,R):(t._normalizeValue(U,N.target,0),aOe({target:p,source:N.target,start:R,count:K}));R+=K*v}else t._normalizeValue(U,p,R),R+=v}}_validateAttributeUpdaters(){const{settings:t}=this;if(!(t.noAlloc||typeof t.update=="function"))throw new Error(`Attribute ${this.id} missing update or accessor`)}_checkAttributeArray(){const{value:t}=this,r=Math.min(4,this.size);if(t&&t.length>=r){let n=!0;switch(r){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error(`Illegal attribute generated for ${this.id}`)}}}function ZT(e){const{source:t,target:r,start:n=0,size:i,getData:o}=e,l=e.end||r.length,s=t.length,f=l-n;if(s>f){r.set(t.subarray(0,f),n);return}if(r.set(t,n),!o)return;let p=s;for(;p<f;){const v=o(p,t);for(let x=0;x<i;x++)r[n+p]=v[x]||0,p++}}function LLe({source:e,target:t,size:r,getData:n,sourceStartIndices:i,targetStartIndices:o}){if(!i||!o)return ZT({source:e,target:t,size:r,getData:n}),t;let l=0,s=0;const f=n&&((v,x)=>n(v+s,x)),p=Math.min(i.length,o.length);for(let v=1;v<p;v++){const x=i[v]*r,S=o[v]*r;ZT({source:e.subarray(l,x),target:t,start:s,end:S,size:r,getData:f}),l=x,s=S}return s<t.length&&ZT({source:[],target:t,start:s,size:r,getData:f}),t}function FLe(e){const{device:t,settings:r,value:n}=e,i=new NW(t,r);return i.setData({value:n instanceof Float64Array?new Float64Array(0):new Float32Array(0),normalized:r.normalized}),i}function DW(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`No defined attribute type for size "${e}"`)}}function LW(e){switch(e){case 1:return"float32";case 2:return"float32x2";case 3:return"float32x3";case 4:return"float32x4";default:throw new Error("invalid type size")}}function FW(e){e.push(e.shift())}function BLe(e,t){const{doublePrecision:r,settings:n,value:i,size:o}=e,l=r&&i instanceof Float64Array?2:1;let s=0;const{shaderAttributes:f}=e.settings;if(f)for(const p of Object.values(f))s=Math.max(s,p.vertexOffset??0);return(n.noAlloc?i.length:(t+s)*o)*l}function BW({device:e,source:t,target:r}){return(!r||r.byteLength<t.byteLength)&&(r==null||r.destroy(),r=e.createBuffer({byteLength:t.byteLength,usage:t.usage})),r}function zW({device:e,buffer:t,attribute:r,fromLength:n,toLength:i,fromStartIndices:o,getData:l=s=>s}){const s=r.doublePrecision&&r.value instanceof Float64Array?2:1,f=r.size*s,p=r.byteOffset,v=r.settings.bytesPerElement<4?p/r.settings.bytesPerElement*4:p,x=r.startIndices,S=o&&x,A=r.isConstant;if(!S&&t&&n>=i)return t;const k=r.value instanceof Float64Array?Float32Array:r.value.constructor,R=A?r.value:new k(r.getBuffer().readSyncWebGL(p,i*k.BYTES_PER_ELEMENT).buffer);if(r.settings.normalized&&!A){const U=l;l=(K,ne)=>r.normalizeConstant(U(K,ne))}const z=A?(U,K)=>l(R,K):(U,K)=>l(R.subarray(U+p,U+p+f),K),N=t?new Float32Array(t.readSyncWebGL(v,n*4).buffer):new Float32Array(0),B=new Float32Array(i);return LLe({source:N,target:B,sourceStartIndices:o,targetStartIndices:x,size:f,getData:z}),(!t||t.byteLength<B.byteLength+v)&&(t==null||t.destroy(),t=e.createBuffer({byteLength:B.byteLength+v,usage:35050})),t.write(B,v),t}class $W{constructor({device:t,attribute:r,timeline:n}){this.buffers=[],this.currentLength=0,this.device=t,this.transition=new gA(n),this.attribute=r,this.attributeInTransition=FLe(r),this.currentStartIndices=r.startIndices}get inProgress(){return this.transition.inProgress}start(t,r,n=1/0){this.settings=t,this.currentStartIndices=this.attribute.startIndices,this.currentLength=BLe(this.attribute,r),this.transition.start({...t,duration:n})}update(){const t=this.transition.update();return t&&this.onUpdate(),t}setBuffer(t){this.attributeInTransition.setData({buffer:t,normalized:this.attribute.settings.normalized,value:this.attributeInTransition.value})}cancel(){this.transition.cancel()}delete(){this.cancel();for(const t of this.buffers)t.destroy();this.buffers.length=0}}class zLe extends $W{constructor({device:t,attribute:r,timeline:n}){super({device:t,attribute:r,timeline:n}),this.type="interpolation",this.transform=jLe(t,r)}start(t,r){const n=this.currentLength,i=this.currentStartIndices;if(super.start(t,r,t.duration),t.duration<=0){this.transition.cancel();return}const{buffers:o,attribute:l}=this;FW(o),o[0]=zW({device:this.device,buffer:o[0],attribute:l,fromLength:n,toLength:this.currentLength,fromStartIndices:i,getData:t.enter}),o[1]=BW({device:this.device,source:o[0],target:o[1]}),this.setBuffer(o[1]);const{transform:s}=this,f=s.model;let p=Math.floor(this.currentLength/l.size);UW(l)&&(p/=2),f.setVertexCount(p),l.isConstant?(f.setAttributes({aFrom:o[0]}),f.setConstantAttributes({aTo:l.value})):f.setAttributes({aFrom:o[0],aTo:l.getBuffer()}),s.transformFeedback.setBuffers({vCurrent:o[1]})}onUpdate(){const{duration:t,easing:r}=this.settings,{time:n}=this.transition;let i=n/t;r&&(i=r(i));const{model:o}=this.transform;o.setUniforms({time:i}),this.transform.run({discard:!0})}delete(){super.delete(),this.transform.destroy()}}const $Le=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`,ULe=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aFrom64Low;
in ATTRIBUTE_TYPE aTo;
in ATTRIBUTE_TYPE aTo64Low;
out ATTRIBUTE_TYPE vCurrent;
out ATTRIBUTE_TYPE vCurrent64Low;

vec2 mix_fp64(vec2 a, vec2 b, float x) {
  vec2 range = sub_fp64(b, a);
  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));
}

void main(void) {
  for (int i=0; i<ATTRIBUTE_SIZE; i++) {
    vec2 value = mix_fp64(vec2(aFrom[i], aFrom64Low[i]), vec2(aTo[i], aTo64Low[i]), time);
    vCurrent[i] = value.x;
    vCurrent64Low[i] = value.y;
  }
  gl_Position = vec4(0.0);
}
`;function UW(e){return e.doublePrecision&&e.value instanceof Float64Array}function jLe(e,t){const r=t.size,n=DW(r),i=LW(r),o=t.getBufferLayout();return UW(t)?new M2(e,{vs:ULe,bufferLayout:[{name:"aFrom",byteStride:8*r,attributes:[{attribute:"aFrom",format:i,byteOffset:0},{attribute:"aFrom64Low",format:i,byteOffset:4*r}]},{name:"aTo",byteStride:8*r,attributes:[{attribute:"aTo",format:i,byteOffset:0},{attribute:"aTo64Low",format:i,byteOffset:4*r}]}],modules:[k6e],defines:{ATTRIBUTE_TYPE:n,ATTRIBUTE_SIZE:r},moduleSettings:{},varyings:["vCurrent","vCurrent64Low"],bufferMode:35980,disableWarnings:!0}):new M2(e,{vs:$Le,bufferLayout:[{name:"aFrom",format:i},{name:"aTo",format:o.attributes[0].format}],defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"],disableWarnings:!0})}class VLe extends $W{constructor({device:t,attribute:r,timeline:n}){super({device:t,attribute:r,timeline:n}),this.type="spring",this.texture=XLe(t),this.framebuffer=KLe(t,this.texture),this.transform=WLe(t,r)}start(t,r){const n=this.currentLength,i=this.currentStartIndices;super.start(t,r);const{buffers:o,attribute:l}=this;for(let f=0;f<2;f++)o[f]=zW({device:this.device,buffer:o[f],attribute:l,fromLength:n,toLength:this.currentLength,fromStartIndices:i,getData:t.enter});o[2]=BW({device:this.device,source:o[0],target:o[2]}),this.setBuffer(o[1]);const{model:s}=this.transform;s.setVertexCount(Math.floor(this.currentLength/l.size)),l.isConstant?s.setConstantAttributes({aTo:l.value}):s.setAttributes({aTo:l.getBuffer()})}onUpdate(){const{buffers:t,transform:r,framebuffer:n,transition:i}=this,o=this.settings;r.model.setAttributes({aPrev:t[0],aCur:t[1]}),r.transformFeedback.setBuffers({vNext:t[2]}),r.model.setUniforms({stiffness:o.stiffness,damping:o.damping}),r.run({framebuffer:n,discard:!1,parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]}),FW(t),this.setBuffer(t[1]),this.device.readPixelsToArrayWebGL(n)[0]>0||i.end()}delete(){super.delete(),this.transform.destroy(),this.texture.destroy(),this.framebuffer.destroy()}}const HLe=`#version 300 es
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
in ATTRIBUTE_TYPE aPrev;
in ATTRIBUTE_TYPE aCur;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vNext;
out float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,qLe=`#version 300 es
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

in float vIsTransitioningFlag;

out vec4 fragColor;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  fragColor = vec4(1.0);
}`;function WLe(e,t){const r=DW(t.size),n=LW(t.size);return new M2(e,{vs:HLe,fs:qLe,bufferLayout:[{name:"aPrev",format:n},{name:"aCur",format:n},{name:"aTo",format:t.getBufferLayout().attributes[0].format}],varyings:["vNext"],defines:{ATTRIBUTE_TYPE:r},parameters:{depthCompare:"always",blendColorOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"max",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}})}function XLe(e){return e.createTexture({data:new Uint8Array(4),format:"rgba8unorm",mipmaps:!1,width:1,height:1})}function KLe(e,t){return e.createFramebuffer({id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,colorAttachments:[t]})}const GLe={interpolation:zLe,spring:VLe};class YLe{constructor(t,{id:r,timeline:n}){if(!t)throw new Error("AttributeTransitionManager is constructed without device");this.id=r,this.device=t,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1}finalize(){for(const t in this.transitions)this._removeTransition(t)}update({attributes:t,transitions:r,numInstances:n}){this.numInstances=n||1;for(const i in t){const o=t[i],l=o.getTransitionSetting(r);l&&this._updateAttribute(i,o,l)}for(const i in this.transitions){const o=t[i];(!o||!o.getTransitionSetting(r))&&this._removeTransition(i)}}hasAttribute(t){const r=this.transitions[t];return r&&r.inProgress}getAttributes(){const t={};for(const r in this.transitions){const n=this.transitions[r];n.inProgress&&(t[r]=n.attributeInTransition)}return t}run(){if(this.numInstances===0)return!1;for(const r in this.transitions)this.transitions[r].update()&&(this.needsRedraw=!0);const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].delete(),delete this.transitions[t]}_updateAttribute(t,r,n){const i=this.transitions[t];let o=!i||i.type!==n.type;if(o){i&&this._removeTransition(t);const l=GLe[n.type];l?this.transitions[t]=new l({attribute:r,timeline:this.timeline,device:this.device}):(oo.error(`unsupported transition type '${n.type}'`)(),o=!1)}(o||r.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}const d7="attributeManager.invalidate",ZLe="attributeManager.updateStart",JLe="attributeManager.updateEnd",QLe="attribute.updateStart",eFe="attribute.allocate",tFe="attribute.updateEnd";class rFe{constructor(t,{id:r="attribute-manager",stats:n,timeline:i}={}){this.mergeBoundsMemoized=xb(F8e),this.id=r,this.device=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new YLe(t,{id:`${r}-transitions`,timeline:i}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(t={clearRedrawFlags:!1}){const r=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,r&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{stepMode:"instance"})}remove(t){for(const r of t)this.attributes[r]!==void 0&&(this.attributes[r].delete(),delete this.attributes[r])}invalidate(t,r){const n=this._invalidateTrigger(t,r);Ml(d7,this,t,n)}invalidateAll(t){for(const r in this.attributes)this.attributes[r].setNeedsUpdate(r,t);Ml(d7,this,"all")}update({data:t,numInstances:r,startIndices:n=null,transitions:i,props:o={},buffers:l={},context:s={}}){let f=!1;Ml(ZLe,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const p in this.attributes){const v=this.attributes[p],x=v.settings.accessor;v.startIndices=n,v.numInstances=r,o[p]&&oo.removed(`props.${p}`,`data.attributes.${p}`)(),v.setExternalBuffer(l[p])||v.setBinaryValue(typeof x=="string"?l[x]:void 0,t.startIndices)||typeof x=="string"&&!l[x]&&v.setConstantValue(o[x])||v.needsUpdate()&&(f=!0,this._updateAttribute({attribute:v,numInstances:r,data:t,props:o,context:s})),this.needsRedraw=this.needsRedraw||v.needsRedraw()}f&&Ml(JLe,this,r),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:r,transitions:i})}updateTransition(){const{attributeTransitionManager:t}=this,r=t.run();return this.needsRedraw=this.needsRedraw||r,r}getAttributes(){return{...this.attributes,...this.attributeTransitionManager.getAttributes()}}getBounds(t){const r=t.map(n=>{var i;return(i=this.attributes[n])==null?void 0:i.getBounds()});return this.mergeBoundsMemoized(r)}getChangedAttributes(t={clearChangedFlags:!1}){const{attributes:r,attributeTransitionManager:n}=this,i={...n.getAttributes()};for(const o in r){const l=r[o];l.needsRedraw(t)&&!n.hasAttribute(o)&&(i[o]=l)}return i}getBufferLayouts(t){return Object.values(this.getAttributes()).map(r=>r.getBufferLayout(t))}_add(t,r){for(const n in t){const i=t[n],o={...i,id:n,size:i.isIndexed&&1||i.size||1,...r};this.attributes[n]=new NW(this.device,o)}this._mapUpdateTriggersToAttributes()}_mapUpdateTriggersToAttributes(){const t={};for(const r in this.attributes)this.attributes[r].getUpdateTriggers().forEach(i=>{t[i]||(t[i]=[]),t[i].push(r)});this.updateTriggers=t}_invalidateTrigger(t,r){const{attributes:n,updateTriggers:i}=this,o=i[t];return o&&o.forEach(l=>{const s=n[l];s&&s.setNeedsUpdate(s.id,r)}),o}_updateAttribute(t){const{attribute:r,numInstances:n}=t;if(Ml(QLe,r),r.constant){r.setConstantValue(r.value);return}r.allocate(n)&&Ml(eFe,r,n),r.updateBuffer(t)&&(this.needsRedraw=!0,Ml(tFe,r,n))}}class nFe extends gA{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:r,toValue:n,duration:i,easing:o}}=this,l=o(t/i);this._value=eS(r,n,l)}}const p7=1e-5;function g7(e,t,r,n,i){const o=t-e,s=(r-t)*i,f=-o*n;return s+f+o+t}function iFe(e,t,r,n,i){if(Array.isArray(r)){const o=[];for(let l=0;l<r.length;l++)o[l]=g7(e[l],t[l],r[l],n,i);return o}return g7(e,t,r,n,i)}function m7(e,t){if(Array.isArray(e)){let r=0;for(let n=0;n<e.length;n++){const i=e[n]-t[n];r+=i*i}return Math.sqrt(r)}return Math.abs(e-t)}class oFe extends gA{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:r,damping:n,stiffness:i}=this.settings,{_prevValue:o=t,_currValue:l=t}=this;let s=iFe(o,l,r,n,i);const f=m7(s,r),p=m7(s,l);f<p7&&p<p7&&(s=r,this.end()),this._prevValue=l,this._currValue=s}}const sFe={interpolation:nFe,spring:oFe};class aFe{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,r,n,i){const{transitions:o}=this;if(o.has(t)){const f=o.get(t),{value:p=f.settings.fromValue}=f;r=p,this.remove(t)}if(i=OW(i),!i)return;const l=sFe[i.type];if(!l){oo.error(`unsupported transition type '${i.type}'`)();return}const s=new l(this.timeline);s.start({...i,fromValue:r,toValue:n}),o.set(t,s)}remove(t){const{transitions:r}=this;r.has(t)&&(r.get(t).cancel(),r.delete(t))}update(){const t={};for(const[r,n]of this.transitions)n.update(),t[r]=n.value,n.inProgress||this.remove(r);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}function lFe(e){const t=e[Hg];for(const r in t){const n=t[r],{validate:i}=n;if(i&&!i(e[r],n))throw new Error(`Invalid prop ${r}: ${e[r]}`)}}function cFe(e,t){const r=jW({newProps:e,oldProps:t,propTypes:e[Hg],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),n=hFe(e,t);let i=!1;return n||(i=fFe(e,t)),{dataChanged:n,propsChanged:r,updateTriggersChanged:i,extensionsChanged:dFe(e,t),transitionsChanged:uFe(e,t)}}function uFe(e,t){if(!e.transitions)return!1;const r={},n=e[Hg];let i=!1;for(const o in e.transitions){const l=n[o],s=l&&l.type;(s==="number"||s==="color"||s==="array")&&LP(e[o],t[o],l)&&(r[o]=!0,i=!0)}return i?r:!1}function jW({newProps:e,oldProps:t,ignoreProps:r={},propTypes:n={},triggerName:i="props"}){if(t===e)return!1;if(typeof e!="object"||e===null)return`${i} changed shallowly`;if(typeof t!="object"||t===null)return`${i} changed shallowly`;for(const o of Object.keys(e))if(!(o in r)){if(!(o in t))return`${i}.${o} added`;const l=LP(e[o],t[o],n[o]);if(l)return`${i}.${o} ${l}`}for(const o of Object.keys(t))if(!(o in r)){if(!(o in e))return`${i}.${o} dropped`;if(!Object.hasOwnProperty.call(e,o)){const l=LP(e[o],t[o],n[o]);if(l)return`${i}.${o} ${l}`}}return!1}function LP(e,t,r){let n=r&&r.equal;return n&&!n(e,t,r)||!n&&(n=e&&t&&e.equals,n&&!n.call(e,t))?"changed deeply":!n&&t!==e?"changed shallowly":null}function hFe(e,t){if(t===null)return"oldProps is null, initial diff";let r=!1;const{dataComparator:n,_dataDiff:i}=e;return n?n(e.data,t.data)||(r="Data comparator detected a change"):e.data!==t.data&&(r="A new data container was supplied"),r&&i&&(r=i(e.data,t.data)||r),r}function fFe(e,t){if(t===null)return{all:!0};if("all"in e.updateTriggers&&y7(e,t,"all"))return{all:!0};const r={};let n=!1;for(const i in e.updateTriggers)i!=="all"&&y7(e,t,i)&&(r[i]=!0,n=!0);return n?r:!1}function dFe(e,t){if(t===null)return!0;const r=t.extensions,{extensions:n}=e;if(n===r)return!1;if(!r||!n||n.length!==r.length)return!0;for(let i=0;i<n.length;i++)if(!n[i].equals(r[i]))return!0;return!1}function y7(e,t,r){let n=e.updateTriggers[r];n=n??{};let i=t.updateTriggers[r];return i=i??{},jW({oldProps:i,newProps:n,triggerName:r})}const pFe="count(): argument not an object",gFe="count(): argument not a container";function mFe(e){if(!_Fe(e))throw new Error(pFe);if(typeof e.count=="function")return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(yFe(e))return Object.keys(e).length;throw new Error(gFe)}function yFe(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function _Fe(e){return e!==null&&typeof e=="object"}function _7(e,t){if(!t)return e;const r={...e,...t};if("defines"in t&&(r.defines={...e.defines,...t.defines}),"modules"in t&&(r.modules=(e.modules||[]).concat(t.modules),t.modules.some(n=>n.name==="project64"))){const n=r.modules.findIndex(i=>i.name==="project32");n>=0&&r.modules.splice(n,1)}if("inject"in t)if(!e.inject)r.inject=t.inject;else{const n={...e.inject};for(const i in t.inject)n[i]=(n[i]||"")+t.inject[i];r.inject=n}return r}const vFe={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},FP={};function bFe(e,t,r,n){if(r instanceof Au)return r;r.constructor&&r.constructor.name!=="Object"&&(r={data:r});let i=null;r.compressed&&(i={minFilter:"linear",mipmapFilter:r.data.length>1?"nearest":"linear"});const o=t.createTexture({...r,sampler:{...vFe,...i,...n}});return FP[o.id]=e,o}function xFe(e,t){!t||!(t instanceof Au)||FP[t.id]===e&&(t.delete(),delete FP[t.id])}const wFe={boolean:{validate(e,t){return!0},equal(e,t,r){return!!e==!!t}},number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate(e,t){return t.optional&&!e||BP(e)&&(e.length===3||e.length===4)},equal(e,t,r){return ah(e,t,1)}},accessor:{validate(e,t){const r=sS(e);return r==="function"||r===sS(t.value)},equal(e,t,r){return typeof t=="function"?!0:ah(e,t,1)}},array:{validate(e,t){return t.optional&&!e||BP(e)},equal(e,t,r){const{compare:n}=r,i=Number.isInteger(n)?n:n?1:0;return n?ah(e,t,i):e===t}},object:{equal(e,t,r){if(r.ignore)return!0;const{compare:n}=r,i=Number.isInteger(n)?n:n?1:0;return n?ah(e,t,i):e===t}},function:{validate(e,t){return t.optional&&!e||typeof e=="function"},equal(e,t,r){return!r.compare&&r.ignore!==!1||e===t}},data:{transform:(e,t,r)=>{if(!e)return e;const{dataTransform:n}=r.props;return n?n(e):typeof e.shape=="string"&&e.shape.endsWith("-table")&&Array.isArray(e.data)?e.data:e}},image:{transform:(e,t,r)=>{const n=r.context;return!n||!n.device?null:bFe(r.id,n.device,e,{...t.parameters,...r.props.textureParameters})},release:(e,t,r)=>{xFe(r.id,e)}}};function SFe(e){const t={},r={},n={};for(const[i,o]of Object.entries(e)){const l=o==null?void 0:o.deprecatedFor;if(l)n[i]=Array.isArray(l)?l:[l];else{const s=AFe(i,o);t[i]=s,r[i]=s.value}}return{propTypes:t,defaultProps:r,deprecatedProps:n}}function AFe(e,t){switch(sS(t)){case"object":return K1(e,t);case"array":return K1(e,{type:"array",value:t,compare:!1});case"boolean":return K1(e,{type:"boolean",value:t});case"number":return K1(e,{type:"number",value:t});case"function":return K1(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function K1(e,t){return"type"in t?{name:e,...wFe[t.type],...t}:"value"in t?{name:e,type:sS(t.value),...t}:{name:e,type:"object",value:t}}function BP(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function sS(e){return BP(e)?"array":e===null?"null":typeof e}function EFe(e,t){let r;for(let o=t.length-1;o>=0;o--){const l=t[o];"extensions"in l&&(r=l.extensions)}const n=zP(e.constructor,r),i=Object.create(n);i[iS]=e,i[sm]={},i[yp]={};for(let o=0;o<t.length;++o){const l=t[o];for(const s in l)i[s]=l[s]}return Object.freeze(i),i}const TFe="_mergedDefaultProps";function zP(e,t){let r=TFe;if(t)for(const i of t){const o=i.constructor;o&&(r+=`:${o.extensionName||o.name}`)}const n=VW(e,r);return n||(e[r]=CFe(e,t||[]))}function CFe(e,t){if(!e.prototype)return null;const n=Object.getPrototypeOf(e),i=zP(n),o=VW(e,"defaultProps")||{},l=SFe(o),s=Object.assign(Object.create(null),i,l.defaultProps),f=Object.assign(Object.create(null),i==null?void 0:i[Hg],l.propTypes),p=Object.assign(Object.create(null),i==null?void 0:i[$T],l.deprecatedProps);for(const v of t){const x=zP(v.constructor);x&&(Object.assign(s,x),Object.assign(f,x[Hg]),Object.assign(p,x[$T]))}return PFe(s,e),RFe(s,f),IFe(s,p),s[Hg]=f,s[$T]=p,t.length===0&&!P6(e,"_propTypes")&&(e._propTypes=f),s}function PFe(e,t){const r=MFe(t);Object.defineProperties(e,{id:{writable:!0,value:r}})}function IFe(e,t){for(const r in t)Object.defineProperty(e,r,{enumerable:!1,set(n){const i=`${this.id}: ${r}`;for(const o of t[r])P6(this,o)||(this[o]=n);oo.deprecated(i,t[r].join("/"))()}})}function RFe(e,t){const r={},n={};for(const i in t){const o=t[i],{name:l,value:s}=o;o.async&&(r[l]=s,n[l]=kFe(l))}e[Uy]=r,e[sm]={},Object.defineProperties(e,n)}function kFe(e){return{enumerable:!0,set(t){typeof t=="string"||t instanceof Promise||MW(t)?this[sm][e]=t:this[yp][e]=t},get(){if(this[yp]){if(e in this[yp])return this[yp][e]||this[Uy][e];if(e in this[sm]){const t=this[iS]&&this[iS].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[Uy][e]}}return this[Uy][e]}}}function P6(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function VW(e,t){return P6(e,t)&&e[t]}function MFe(e){const t=e.componentName;return t||oo.warn(`${e.name}.componentName not specified`)(),t||e.name}let OFe=0;class I6{constructor(...t){this.props=EFe(this,t),this.id=this.props.id,this.count=OFe++}clone(t){const{props:r}=this,n={};for(const i in r[Uy])i in r[yp]?n[i]=r[yp][i]:i in r[sm]&&(n[i]=r[sm][i]);return new this.constructor({...r,...n,...t})}}I6.componentName="Component";I6.defaultProps={};const NFe=Object.freeze({});class DFe{constructor(t){this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const r=this.asyncProps[t];r&&r.type&&r.type.release&&r.type.release(r.resolvedValue,r.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||NFe}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const r=this.asyncProps[t];return r&&r.resolvedValue}isAsyncPropLoading(t){if(t){const r=this.asyncProps[t];return!!(r&&r.pendingLoadCount>0&&r.pendingLoadCount!==r.resolvedLoadCount)}for(const r in this.asyncProps)if(this.isAsyncPropLoading(r))return!0;return!1}reloadAsyncProp(t,r){this._watchPromise(t,Promise.resolve(r))}setAsyncProps(t){this.component=t[iS]||this.component;const r=t[yp]||{},n=t[sm]||t,i=t[Uy]||{};for(const o in r){const l=r[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,l),r[o]=this.getAsyncProp(o)}for(const o in n){const l=n[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,l)}}_fetch(t,r){return null}_onResolve(t,r){}_onError(t,r){}_updateAsyncProp(t,r){if(this._didAsyncInputValueChange(t,r)){if(typeof r=="string"&&(r=this._fetch(t,r)),r instanceof Promise){this._watchPromise(t,r);return}if(MW(r)){this._resolveAsyncIterable(t,r);return}this._setPropValue(t,r)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,r){const n=this.asyncProps[t];return r===n.resolvedValue||r===n.lastValue?!1:(n.lastValue=r,!0)}_setPropValue(t,r){this._freezeAsyncOldProps();const n=this.asyncProps[t];n&&(r=this._postProcessValue(n,r),n.resolvedValue=r,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(t,r,n){const i=this.asyncProps[t];i&&n>=i.resolvedLoadCount&&r!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=r,i.resolvedLoadCount=n,this.onAsyncPropUpdated(t,r))}_watchPromise(t,r){const n=this.asyncProps[t];if(n){n.pendingLoadCount++;const i=n.pendingLoadCount;r.then(o=>{this.component&&(o=this._postProcessValue(n,o),this._setAsyncPropValue(t,o,i),this._onResolve(t,o))}).catch(o=>{this._onError(t,o)})}}async _resolveAsyncIterable(t,r){if(t!=="data"){this._setPropValue(t,r);return}const n=this.asyncProps[t];if(!n)return;n.pendingLoadCount++;const i=n.pendingLoadCount;let o=[],l=0;for await(const s of r){if(!this.component)return;const{dataTransform:f}=this.component.props;f?o=f(s,o):o=o.concat(s),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:l,endRow:o.length}]}),l=o.length,this._setAsyncPropValue(t,o,i)}this._onResolve(t,o)}_postProcessValue(t,r){const n=t.type;return n&&this.component&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(r,n,this.component):r}_createAsyncPropData(t,r){if(!this.asyncProps[t]){const i=this.component&&this.component.props[Hg];this.asyncProps[t]={type:i&&i[t],lastValue:null,resolvedValue:r,pendingLoadCount:0,resolvedLoadCount:0}}}}class LFe extends DFe{constructor({attributeManager:t,layer:r}){super(r),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(t,r){const n=this.layer,i=n==null?void 0:n.props.fetch;return i?i(r,{propName:t,layer:n}):super._fetch(t,r)}_onResolve(t,r){const n=this.layer;if(n){const i=n.props.onDataLoad;t==="data"&&i&&i(r,{propName:t,layer:n})}}_onError(t,r){const n=this.layer;n&&n.raiseError(r,`loading ${t} of ${this.layer}`)}}const FFe="layer.changeFlag",BFe="layer.initialize",zFe="layer.update",$Fe="layer.finalize",UFe="layer.matched",v7=2**24-1,jFe=Object.freeze([]),VFe=xb(({oldViewport:e,viewport:t})=>e.equals(t));let Wh=new Uint8ClampedArray(0);const HFe={data:{type:"data",value:jFe,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:e=>e&&e.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(e,{propName:t,layer:r,loaders:n,loadOptions:i,signal:o})=>{const{resourceManager:l}=r.context;i=i||r.getLoadOptions(),n=n||r.props.loaders,o&&(i={...i,fetch:{...i==null?void 0:i.fetch,signal:o}});let s=l.contains(e);return!s&&!i&&(l.add({resourceId:e,data:tP(e,n),persistent:!1}),s=!0),s?l.subscribe({resourceId:e,onChange:f=>{var p;return(p=r.internalState)==null?void 0:p.reloadAsyncProp(t,f)},consumerId:r.id,requestId:t}):tP(e,n,i)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:zi.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:e})=>[0,-e*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class R6 extends I6{constructor(){super(...arguments),this.internalState=null,this.lifecycle=Z0.NO_STATE,this.parent=null}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){return`${this.constructor.layerName||this.constructor.name}({id: '${this.props.id}'})`}project(t){Zs(this.internalState);const r=this.internalState.viewport||this.context.viewport,n=lW(t,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,o,l]=sW(n,r.pixelProjectionMatrix);return t.length===2?[i,o]:[i,o,l]}unproject(t){return Zs(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,r){Zs(this.internalState);const n=this.internalState.viewport||this.context.viewport;return V8e(t,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...r})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){const t=this.state;return t&&(t.models||t.model&&[t.model])||[]}setModuleParameters(t){for(const r of this.getModels())r.updateModuleSettings(t)}setShaderModuleProps(...t){for(const r of this.getModels())r.shaderInputs.setProps(...t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===zi.DEFAULT||t===zi.LNGLAT||t===zi.CARTESIAN}onHover(t,r){return this.props.onHover&&this.props.onHover(t,r)||!1}onClick(t,r){return this.props.onClick&&this.props.onClick(t,r)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t,r=[]){return r[0]=t+1&255,r[1]=t+1>>8&255,r[2]=t+1>>8>>8&255,r}decodePickingColor(t){Zs(t instanceof Uint8Array);const[r,n,i]=t;return r+n*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:mFe(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;return(t=this.getAttributeManager())==null?void 0:t.getBounds(["positions","instancePositions"])}getShaders(t){t=_7(t,{disableWarnings:!0,modules:this.context.defaultShaderModules});for(const r of this.props.extensions)t=_7(t,r.getShaders.call(this,r));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const r=this.getAttributeManager(),{dataChanged:n}=t.changeFlags;if(n&&r)if(Array.isArray(n))for(const i of n)r.invalidateAll(i);else r.invalidateAll();if(r){const{props:i}=t,o=this.internalState.hasPickingBuffer,l=Number.isInteger(i.highlightedObjectIndex)||i.pickable||i.extensions.some(s=>s.getNeedsPickingBuffer.call(this,s));if(o!==l){this.internalState.hasPickingBuffer=l;const{pickingColors:s,instancePickingColors:f}=r.attributes,p=s||f;p&&(l&&p.constant&&(p.constant=!1,r.invalidate(p.id)),!p.value&&!l&&(p.constant=!0,p.value=[0,0,0]))}}}finalizeState(t){for(const n of this.getModels())n.destroy();const r=this.getAttributeManager();r&&r.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const r of this.getModels())r.draw(t)}getPickingInfo({info:t,mode:r,sourceLayer:n}){const{index:i}=t;return i>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[i]),t}raiseError(t,r){var n,i,o,l;r&&(t=new Error(`${r}: ${t.message}`,{cause:t})),(i=(n=this.props).onError)!=null&&i.call(n,t)||(l=(o=this.context)==null?void 0:o.onError)==null||l.call(o,t,this)}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var t;return((t=this.internalState)==null?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;const r=this.internalState.viewport;this.internalState.viewport=t,(!r||!VFe({oldViewport:r,viewport:t}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all"){const r=this.getAttributeManager();r&&(t==="all"?r.invalidateAll():r.invalidate(t))}updateAttributes(t){let r=!1;for(const n in t)t[n].layoutChanged()&&(r=!0);for(const n of this.getModels())this._setModelAttributes(n,t,r)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const r=this.props,n=this.getNumInstances(),i=this.getStartIndices();t.update({data:r.data,numInstances:n,startIndices:i,props:r,transitions:r.transitions,buffers:r.data.attributes,context:this});const o=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const r=t.update(),n=Object.create(this.props);for(const i in r)Object.defineProperty(n,i,{value:r[i]});return n}return this.props}calculateInstancePickingColors(t,{numInstances:r}){if(t.constant)return;const n=Math.floor(Wh.length/4);if(this.internalState.usesPickingColorCache=!0,n<r){r>v7&&oo.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Wh=R2.allocate(Wh,r,{size:4,copy:!0,maxCount:Math.max(r,v7)});const i=Math.floor(Wh.length/4),o=[];for(let l=n;l<i;l++)this.encodePickingColor(l,o),Wh[l*4+0]=o[0],Wh[l*4+1]=o[1],Wh[l*4+2]=o[2]}t.value=Wh.subarray(0,r*4)}_setModelAttributes(t,r,n=!1){var s;if(!Object.keys(r).length)return;if(n){const f=this.getAttributeManager();t.setBufferLayout(f.getBufferLayouts(t)),r=f.getAttributes()}const i=((s=t.userData)==null?void 0:s.excludeAttributes)||{},o={},l={};for(const f in r){if(i[f])continue;const p=r[f].getValue();for(const v in p){const x=p[v];x instanceof Vo?r[f].settings.isIndexed?t.setIndexBuffer(x):o[v]=x:x&&(l[v]=x)}}t.setAttributes(o),t.setConstantAttributes(l)}disablePickingIndex(t){const r=this.props.data;if(!("attributes"in r)){this._disablePickingIndex(t);return}const{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,o=n||i,l=o&&r.attributes&&r.attributes[o.id];if(l&&l.value){const s=l.value,f=this.encodePickingColor(t);for(let p=0;p<r.length;p++){const v=o.getVertexOffset(p);s[v]===f[0]&&s[v+1]===f[1]&&s[v+2]===f[2]&&this._disablePickingIndex(p)}}else this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:r,instancePickingColors:n}=this.getAttributeManager().attributes,i=r||n;if(!i)return;const o=i.getVertexOffset(t),l=i.getVertexOffset(t+1);i.buffer.write(new Uint8Array(l-o),o)}restorePickingColors(){const{pickingColors:t,instancePickingColors:r}=this.getAttributeManager().attributes,n=t||r;n&&(this.internalState.usesPickingColorCache&&n.value.buffer!==Wh.buffer&&(n.value=Wh.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){Zs(!this.internalState),Zs(Number.isFinite(this.props.coordinateSystem)),Ml(BFe,this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:"uint8",size:4,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new LFe({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(oo.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.uniformTransitions=new aFe(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const r of this.props.extensions)r.initializeState.call(this,this.context,r);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){Ml(UFe,this,this===t);const{state:r,internalState:n}=t;this!==t&&(this.internalState=n,this.state=r,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if(Ml(zFe,this,t),!t)return;const r=this.props,n=this.context,i=this.internalState,o=n.viewport,l=this._updateUniformTransition();i.propsInTransition=l,n.viewport=i.viewport||o,this.props=l;try{const s=this._getUpdateParams(),f=this.getModels();if(n.device)this.updateState(s);else try{this.updateState(s)}catch{}for(const v of this.props.extensions)v.updateState.call(this,s,v);const p=this.getModels()[0]!==f[0];this._postUpdate(s,p)}finally{n.viewport=o,this.props=r,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){Ml($Fe,this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,this.context,t)}_drawLayer({renderPass:t,moduleParameters:r=null,uniforms:n={},parameters:i={}}){this._updateAttributeTransition();const o=this.props,l=this.context;this.props=this.internalState.propsInTransition||o;const s=this.props.opacity;n.opacity=Math.pow(s,1/2.2);try{if(r){const{isActive:v,isAttribute:x}=r.picking;this.setModuleParameters(r),this.setShaderModuleProps({picking:{isActive:v,isAttribute:x}})}const{getPolygonOffset:f}=this.props,p=f&&f(n)||[0,0];l.device.setParametersWebGL({polygonOffset:p});for(const v of this.getModels())v.setParameters(i);l.device.withParametersWebGL(i,()=>{const v={renderPass:t,moduleParameters:r,uniforms:n,parameters:i,context:l};for(const x of this.props.extensions)x.draw.call(this,v,x);this.draw(v)})}finally{this.props=o}}getChangeFlags(){var t;return(t=this.internalState)==null?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:r}=this.internalState;for(const i in t)if(t[i]){let o=!1;switch(i){case"dataChanged":const l=t[i],s=r[i];l&&Array.isArray(s)&&(r.dataChanged=Array.isArray(l)?s.concat(l):l,o=!0);default:r[i]||(r[i]=t[i],o=!0)}o&&Ml(FFe,this,i,t)}const n=!!(r.dataChanged||r.updateTriggersChanged||r.propsChanged||r.extensionsChanged);r.propsOrDataChanged=n,r.somethingChanged=n||r.viewportChanged||r.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,r){var i;const n=cFe(t,r);if(n.updateTriggersChanged)for(const o in n.updateTriggersChanged)n.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(n.transitionsChanged)for(const o in n.transitionsChanged)this.internalState.uniformTransitions.add(o,r[o],t[o],(i=t.transitions)==null?void 0:i[o]);return this.setChangeFlags(n)}validateProps(){lFe(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const r={highlightedObjectColor:t.picked?t.color:null},{highlightColor:n}=this.props;t.picked&&typeof n=="function"&&(r.highlightColor=n(t)),this.setShaderModuleProps({picking:r}),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new rFe(t.device,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,r){const{props:n,oldProps:i}=t;this.setNeedsRedraw(),this._updateAttributes();const o=this.state.model;o!=null&&o.isInstanced&&o.setInstanceCount(this.getNumInstances());const{autoHighlight:l,highlightedObjectIndex:s,highlightColor:f}=n;if(r||i.autoHighlight!==l||i.highlightedObjectIndex!==s||i.highlightColor!==f){const p={};Array.isArray(f)&&(p.highlightColor=f),(r||i.autoHighlight!==l||s!==i.highlightedObjectIndex)&&(p.highlightedObjectColor=Number.isFinite(s)&&s>=0?this.encodePickingColor(s):null),this.setShaderModuleProps({picking:p})}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let r=!1;r=r||this.internalState.needsRedraw&&this.id;const n=this.getAttributeManager(),i=n?n.getNeedsRedraw(t):!1;if(r=r||i,r)for(const o of this.props.extensions)o.onNeedsRedraw.call(this,o);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags,r}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}R6.defaultProps=HFe;R6.layerName="Layer";const JT=512,qFe=Math.PI/180;function HW({map:e,gl:t,deck:r}){if(e.__deck)return e.__deck;const n=r==null?void 0:r.props._customRender,i=r==null?void 0:r.props.onLoad,o=WW({...r==null?void 0:r.props,_customRender:()=>{e.triggerRepaint(),n==null||n("")}});let l;return(!r||r.props.gl===t)&&(Object.assign(o,{gl:t,width:null,height:null,touchAction:"unset",viewState:L2(e)}),r!=null&&r.isInitialized?b7(r,e):o.onLoad=()=>{i==null||i(),b7(l,e)}),r?(l=r,r.setProps(o),r.userData.isExternal=!0):(l=new D2(o),e.on("remove",()=>{qW(e)})),l.userData.mapboxLayers=new Set,e.__deck=l,e.on("render",()=>{l.isInitialized&&ZFe(l,e)}),l}function b7(e,t){const r=()=>{e.isInitialized?JFe(e,t):t.off("move",r)};t.on("move",r)}function qW(e){var t;(t=e.__deck)==null||t.finalize(),e.__deck=null}function WW(e){return{...e,parameters:{depthMask:!0,depthTest:!0,blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthFunc:515,blendEquation:32774,...e.parameters},views:e.views||[new w6({id:"mapbox"})]}}function WFe(e,t){e.userData.mapboxLayers.add(t),k6(e)}function XFe(e,t){e.userData.mapboxLayers.delete(t),k6(e)}function KFe(e,t){k6(e)}function GFe(e,t,r){let{currentViewport:n}=e.userData,i=!1;n||(n=XW(e,t,!0),e.userData.currentViewport=n,i=!0),e.isInitialized&&e._drawLayers("mapbox-repaint",{viewports:[n],layerFilter:({layer:o})=>r.id===o.id||o.props.operation.includes("terrain"),clearStack:i,clearCanvas:!1})}function L2(e){var i;const{lng:t,lat:r}=e.getCenter(),n={longitude:(t+540)%360-180,latitude:r,zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch(),padding:e.getPadding(),repeat:e.getRenderWorldCopies()};return(i=e.getTerrain)!=null&&i.call(e)&&YFe(e,n),n}function YFe(e,t){if(e.getFreeCameraOptions){const{position:r}=e.getFreeCameraOptions();if(!r||r.z===void 0)return;const n=e.transform.height,{longitude:i,latitude:o,pitch:l}=t,s=r.x*JT,f=(1-r.y)*JT,p=r.z*JT,v=I2([i,o]),x=s-v[0],S=f-v[1],A=Math.sqrt(x*x+S*S),k=l*qFe,R=1.5*n,z=k<.001?R*Math.cos(k)/p:R*Math.sin(k)/A;t.zoom=Math.log2(z);const N=R*Math.cos(k)/z,B=p-N;t.position=[0,0,B/Mw(o)]}else typeof e.transform.elevation=="number"&&(t.position=[0,0,e.transform.elevation])}function XW(e,t,r=!0){return new om({id:"mapbox",x:0,y:0,width:e.width,height:e.height,...L2(t),nearZMultiplier:r?.02:.1,nearZ:t.transform._nearZ/t.transform.height,farZ:t.transform._farZ/t.transform.height})}function ZFe(e,t){const{mapboxLayers:r,isExternal:n}=e.userData;if(n){const i=Array.from(r,v=>v.id),l=O2(e.props.layers,Boolean).some(v=>v&&!i.includes(v.id));let s=e.getViewports();const f=s.findIndex(v=>v.id==="mapbox"),p=s.length>1||f<0;(l||p)&&(f>=0&&(s=s.slice(),s[f]=XW(e,t,!1)),e._drawLayers("mapbox-repaint",{viewports:s,layerFilter:v=>(!e.props.layerFilter||e.props.layerFilter(v))&&(v.viewport.id!=="mapbox"||!i.includes(v.layer.id)),clearCanvas:!1}))}e.userData.currentViewport=null}function JFe(e,t){e.setProps({viewState:L2(t)}),e.needsRedraw({clearRedrawFlags:!0})}function k6(e){if(e.userData.isExternal)return;const t=[];e.userData.mapboxLayers.forEach(r=>{const n=r.props.type,i=new n(r.props);t.push(i)}),e.setProps({layers:t})}class QFe{constructor(t){if(!t.id)throw new Error("Layer must have an unique id");this.id=t.id,this.type="custom",this.renderingMode=t.renderingMode||"3d",this.map=null,this.deck=null,this.props=t}onAdd(t,r){this.map=t,this.deck=HW({map:t,gl:r,deck:this.props.deck}),WFe(this.deck,this)}onRemove(){this.deck&&XFe(this.deck,this)}setProps(t){Object.assign(this.props,t,{id:this.id}),this.deck&&KFe(this.deck)}render(){GFe(this.deck,this.map,this)}}const QT="__UNDEFINED__";function Kx(e,t,r,n){if(!e||!t||!e.style||!e.style._loaded)return;const i=O2(n,Boolean);if(r!==n){const s=O2(r,Boolean),f=new Set(s.map(p=>p.id));for(const p of i)f.delete(p.id);for(const p of f)e.getLayer(p)&&e.removeLayer(p)}for(const s of i){const f=e.getLayer(s.id);f?(f.implementation||f).setProps(s.props):e.addLayer(new QFe({id:s.id,deck:t}),s.props.beforeId)}const o=e.style._order,l={};for(const s of i){let{beforeId:f}=s.props;(!f||!o.includes(f))&&(f=QT),l[f]=l[f]||[],l[f].push(s.id)}for(const s in l){const f=l[s];let p=s===QT?o.length:o.indexOf(s),v=s===QT?void 0:s;for(let x=f.length-1;x>=0;x--){const S=f[x],A=o.indexOf(S);A!==p-1&&(e.moveLayer(S,v),A>p&&p++),p--,v=S}}}class eBe{constructor(t){this._handleStyleChange=()=>{Kx(this._map,this._deck,this._props.layers,this._props.layers)},this._updateContainerSize=()=>{if(this._map&&this._container){const{clientWidth:i,clientHeight:o}=this._map.getContainer();Object.assign(this._container.style,{width:`${i}px`,height:`${o}px`})}},this._updateViewState=()=>{const i=this._deck;i&&(i.setProps({viewState:L2(this._map)}),i.isInitialized&&i.redraw())},this._handleMouseEvent=i=>{const o=this._deck;if(!o||!o.isInitialized)return;const l={type:i.type,offsetCenter:i.point,srcEvent:i},s=this._lastMouseDownPoint;switch(!i.point&&s&&(l.deltaX=i.originalEvent.clientX-s.clientX,l.deltaY=i.originalEvent.clientY-s.clientY,l.offsetCenter={x:s.x+l.deltaX,y:s.y+l.deltaY}),l.type){case"mousedown":o._onPointerDown(l),this._lastMouseDownPoint={...i.point,clientX:i.originalEvent.clientX,clientY:i.originalEvent.clientY};break;case"dragstart":l.type="panstart",o._onEvent(l);break;case"drag":l.type="panmove",o._onEvent(l);break;case"dragend":l.type="panend",o._onEvent(l);break;case"click":l.tapCount=1,o._onEvent(l);break;case"dblclick":l.type="click",l.tapCount=2,o._onEvent(l);break;case"mousemove":l.type="pointermove",o._onPointerMove(l);break;case"mouseout":l.type="pointerleave",o._onPointerMove(l);break;default:return}};const{interleaved:r=!1,...n}=t;this._interleaved=r,this._props=n}setProps(t){this._interleaved&&t.layers&&Kx(this._map,this._deck,this._props.layers,t.layers),Object.assign(this._props,t),this._deck&&this._deck.setProps(this._interleaved?WW(this._props):this._props)}onAdd(t){return this._map=t,this._interleaved?this._onAddInterleaved(t):this._onAddOverlaid(t)}_onAddOverlaid(t){const r=document.createElement("div");return Object.assign(r.style,{position:"absolute",left:0,top:0,textAlign:"initial",pointerEvents:"none"}),this._container=r,this._deck=new D2({...this._props,parent:r,viewState:L2(t)}),t.on("resize",this._updateContainerSize),t.on("render",this._updateViewState),t.on("mousedown",this._handleMouseEvent),t.on("dragstart",this._handleMouseEvent),t.on("drag",this._handleMouseEvent),t.on("dragend",this._handleMouseEvent),t.on("mousemove",this._handleMouseEvent),t.on("mouseout",this._handleMouseEvent),t.on("click",this._handleMouseEvent),t.on("dblclick",this._handleMouseEvent),this._updateContainerSize(),r}_onAddInterleaved(t){const r=t.painter.context.gl;return r instanceof WebGLRenderingContext&&oo.warn("Incompatible basemap library. See: https://deck.gl/docs/api-reference/mapbox/overview#compatibility")(),this._deck=HW({map:t,gl:r,deck:new D2({...this._props,gl:r})}),t.on("styledata",this._handleStyleChange),Kx(t,this._deck,[],this._props.layers),document.createElement("div")}onRemove(){const t=this._map;t&&(this._interleaved?this._onRemoveInterleaved(t):this._onRemoveOverlaid(t)),this._deck=void 0,this._map=void 0,this._container=void 0}_onRemoveOverlaid(t){var r;t.off("resize",this._updateContainerSize),t.off("render",this._updateViewState),t.off("mousedown",this._handleMouseEvent),t.off("dragstart",this._handleMouseEvent),t.off("drag",this._handleMouseEvent),t.off("dragend",this._handleMouseEvent),t.off("mousemove",this._handleMouseEvent),t.off("mouseout",this._handleMouseEvent),t.off("click",this._handleMouseEvent),t.off("dblclick",this._handleMouseEvent),(r=this._deck)==null||r.finalize()}_onRemoveInterleaved(t){t.off("styledata",this._handleStyleChange),Kx(t,this._deck,this._props.layers,[]),qW(t)}getDefaultPosition(){return"top-left"}pickObject(t){return Zs(this._deck),this._deck.pickObject(t)}pickMultipleObjects(t){return Zs(this._deck),this._deck.pickMultipleObjects(t)}pickObjects(t){return Zs(this._deck),this._deck.pickObjects(t)}finalize(){this._map&&this._map.removeControl(this)}getCanvas(){return this._map?this._interleaved?this._map.getCanvas():this._deck.getCanvas():null}}const tBe=`#version 300 es
#define SHADER_NAME point-cloud-layer-vertex-shader
in vec3 positions;
in vec3 instanceNormals;
in vec4 instanceColors;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec3 instancePickingColors;
uniform float opacity;
uniform float radiusPixels;
uniform int sizeUnits;
out vec4 vColor;
out vec2 unitPosition;
void main(void) {
geometry.worldPosition = instancePositions;
geometry.normal = project_normal(instanceNormals);
unitPosition = positions.xy;
geometry.uv = unitPosition;
geometry.pickingColor = instancePickingColors;
vec3 offset = vec3(positions.xy * project_size_to_pixel(radiusPixels, sizeUnits), 0.0);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);
vColor = vec4(lightColor, instanceColors.a * opacity);
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,rBe=`#version 300 es
#define SHADER_NAME point-cloud-layer-fragment-shader
precision highp float;
in vec4 vColor;
in vec2 unitPosition;
out vec4 fragColor;
void main(void) {
geometry.uv = unitPosition;
float distToCenter = length(unitPosition);
if (distToCenter > 1.0) {
discard;
}
fragColor = vColor;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,KW=[0,0,0,255],GW=[0,0,1],nBe={sizeUnits:"pixels",pointSize:{type:"number",min:0,value:10},getPosition:{type:"accessor",value:e=>e.position},getNormal:{type:"accessor",value:GW},getColor:{type:"accessor",value:KW},material:!0,radiusPixels:{deprecatedFor:"pointSize"}};function iBe(e){const{header:t,attributes:r}=e;if(!(!t||!r)&&(e.length=t.vertexCount,r.POSITION&&(r.instancePositions=r.POSITION),r.NORMAL&&(r.instanceNormals=r.NORMAL),r.COLOR_0)){const{size:n,value:i}=r.COLOR_0;r.instanceColors={size:n,type:"unorm8",value:i}}}class M6 extends R6{getShaders(){return super.getShaders({vs:tBe,fs:rBe,modules:[KMe,RMe,m8e]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:GW},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getColor",defaultValue:KW}})}updateState(t){var i;const{changeFlags:r,props:n}=t;super.updateState(t),r.extensionsChanged&&((i=this.state.model)==null||i.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll()),r.dataChanged&&iBe(n.data)}draw({uniforms:t}){const{pointSize:r,sizeUnits:n}=this.props,i=this.state.model;i.setUniforms(t),i.setUniforms({sizeUnits:bP[n],radiusPixels:r}),i.draw(this.context.renderPass)}_getModel(){const t=[];for(let r=0;r<3;r++){const n=r/3*Math.PI*2;t.push(Math.cos(n)*2,Math.sin(n)*2,0)}return new k2(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new nOe({topology:"triangle-list",attributes:{positions:new Float32Array(t)}}),isInstanced:!0})}}M6.layerName="PointCloudLayer";M6.defaultProps=nBe;const F2={black:"#000",white:"#fff"},A0={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},E0={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},T0={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},C0={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},P0={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},G1={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},oBe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function B2(e,...t){const r=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(n=>r.searchParams.append("args[]",n)),`Minified MUI error #${e}; visit ${r} for the full message.`}const YW="$$material";function $P(e,...t){const r=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(n=>r.searchParams.append("args[]",n)),`Minified MUI error #${e}; visit ${r} for the full message.`}/**
 * @mui/styled-engine v6.1.3
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function ZW(e,t){return u2(e,t)}function sBe(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const x7=[];function w7(e){return x7[0]=e,i3(x7)}function ip(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function JW(e){if(!ip(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=JW(e[r])}),t}function Wg(e,t,r={clone:!0}){const n=r.clone?{...e}:e;return ip(e)&&ip(t)&&Object.keys(t).forEach(i=>{ip(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&ip(e[i])?n[i]=Wg(e[i],t[i],r):r.clone?n[i]=ip(t[i])?JW(t[i]):t[i]:n[i]=t[i]}),n}const aBe=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,n)=>r.val-n.val),t.reduce((r,n)=>({...r,[n.key]:n.val}),{})};function lBe(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:n=5,...i}=e,o=aBe(t),l=Object.keys(o);function s(S){return`@media (min-width:${typeof t[S]=="number"?t[S]:S}${r})`}function f(S){return`@media (max-width:${(typeof t[S]=="number"?t[S]:S)-n/100}${r})`}function p(S,A){const k=l.indexOf(A);return`@media (min-width:${typeof t[S]=="number"?t[S]:S}${r}) and (max-width:${(k!==-1&&typeof t[l[k]]=="number"?t[l[k]]:A)-n/100}${r})`}function v(S){return l.indexOf(S)+1<l.length?p(S,l[l.indexOf(S)+1]):s(S)}function x(S){const A=l.indexOf(S);return A===0?s(l[1]):A===l.length-1?f(l[A]):p(S,l[l.indexOf(S)+1]).replace("@media","@media not all and")}return{keys:l,values:o,up:s,down:f,between:p,only:v,not:x,unit:r,...i}}function cBe(e,t){if(!e.containerQueries)return t;const r=Object.keys(t).filter(n=>n.startsWith("@container")).sort((n,i)=>{var l,s;const o=/min-width:\s*([0-9.]+)/;return+(((l=n.match(o))==null?void 0:l[1])||0)-+(((s=i.match(o))==null?void 0:s[1])||0)});return r.length?r.reduce((n,i)=>{const o=t[i];return delete n[i],n[i]=o,n},{...t}):t}function uBe(e,t){return t==="@"||t.startsWith("@")&&(e.some(r=>t.startsWith(`@${r}`))||!!t.match(/^@\d/))}function hBe(e,t){const r=t.match(/^@([^/]+)?\/?(.+)?$/);if(!r)return null;const[,n,i]=r,o=Number.isNaN(+n)?n||0:+n;return e.containerQueries(i).up(o)}function fBe(e){const t=(o,l)=>o.replace("@media",l?`@container ${l}`:"@container");function r(o,l){o.up=(...s)=>t(e.breakpoints.up(...s),l),o.down=(...s)=>t(e.breakpoints.down(...s),l),o.between=(...s)=>t(e.breakpoints.between(...s),l),o.only=(...s)=>t(e.breakpoints.only(...s),l),o.not=(...s)=>{const f=t(e.breakpoints.not(...s),l);return f.includes("not all and")?f.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):f}}const n={},i=o=>(r(n,o),n);return r(i),{...e,containerQueries:i}}const dBe={borderRadius:4};function $v(e,t){return t?Wg(e,t,{clone:!1}):e}const vA={xs:0,sm:600,md:900,lg:1200,xl:1536},S7={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${vA[e]}px)`},pBe={containerQueries:e=>({up:t=>{let r=typeof t=="number"?t:vA[t]||t;return typeof r=="number"&&(r=`${r}px`),e?`@container ${e} (min-width:${r})`:`@container (min-width:${r})`}})};function yd(e,t,r){const n=e.theme||{};if(Array.isArray(t)){const o=n.breakpoints||S7;return t.reduce((l,s,f)=>(l[o.up(o.keys[f])]=r(t[f]),l),{})}if(typeof t=="object"){const o=n.breakpoints||S7;return Object.keys(t).reduce((l,s)=>{if(uBe(o.keys,s)){const f=hBe(n.containerQueries?n:pBe,s);f&&(l[f]=r(t[s],s))}else if(Object.keys(o.values||vA).includes(s)){const f=o.up(s);l[f]=r(t[s],s)}else{const f=s;l[f]=t[f]}return l},{})}return r(t)}function gBe(e={}){var r;return((r=e.keys)==null?void 0:r.reduce((n,i)=>{const o=e.up(i);return n[o]={},n},{}))||{}}function mBe(e,t){return e.reduce((r,n)=>{const i=r[n];return(!i||Object.keys(i).length===0)&&delete r[n],r},t)}function QW(e){if(typeof e!="string")throw new Error($P(7));return e.charAt(0).toUpperCase()+e.slice(1)}function bA(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const n=`vars.${t}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,e);if(n!=null)return n}return t.split(".").reduce((n,i)=>n&&n[i]!=null?n[i]:null,e)}function aS(e,t,r,n=r){let i;return typeof e=="function"?i=e(r):Array.isArray(e)?i=e[r]||n:i=bA(e,r)||n,t&&(i=t(i,n,e)),i}function Es(e){const{prop:t,cssProperty:r=e.prop,themeKey:n,transform:i}=e,o=l=>{if(l[t]==null)return null;const s=l[t],f=l.theme,p=bA(f,n)||{};return yd(l,s,x=>{let S=aS(p,i,x);return x===S&&typeof x=="string"&&(S=aS(p,i,`${t}${x==="default"?"":QW(x)}`,x)),r===!1?S:{[r]:S}})};return o.propTypes={},o.filterProps=[t],o}function yBe(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const _Be={m:"margin",p:"padding"},vBe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},A7={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},bBe=yBe(e=>{if(e.length>2)if(A7[e])e=A7[e];else return[e];const[t,r]=e.split(""),n=_Be[t],i=vBe[r]||"";return Array.isArray(i)?i.map(o=>n+o):[n+i]}),O6=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],N6=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...O6,...N6];function Ab(e,t,r,n){const i=bA(e,t,!0)??r;return typeof i=="number"||typeof i=="string"?o=>typeof o=="string"?o:typeof i=="string"?`calc(${o} * ${i})`:i*o:Array.isArray(i)?o=>{if(typeof o=="string")return o;const l=Math.abs(o),s=i[l];return o>=0?s:typeof s=="number"?-s:`-${s}`}:typeof i=="function"?i:()=>{}}function D6(e){return Ab(e,"spacing",8)}function Eb(e,t){return typeof t=="string"||t==null?t:e(t)}function xBe(e,t){return r=>e.reduce((n,i)=>(n[i]=Eb(t,r),n),{})}function wBe(e,t,r,n){if(!t.includes(r))return null;const i=bBe(r),o=xBe(i,n),l=e[r];return yd(e,l,o)}function eX(e,t){const r=D6(e.theme);return Object.keys(e).map(n=>wBe(e,t,n,r)).reduce($v,{})}function os(e){return eX(e,O6)}os.propTypes={};os.filterProps=O6;function ss(e){return eX(e,N6)}ss.propTypes={};ss.filterProps=N6;function tX(e=8,t=D6({spacing:e})){if(e.mui)return e;const r=(...n)=>(n.length===0?[1]:n).map(o=>{const l=t(o);return typeof l=="number"?`${l}px`:l}).join(" ");return r.mui=!0,r}function xA(...e){const t=e.reduce((n,i)=>(i.filterProps.forEach(o=>{n[o]=i}),n),{}),r=n=>Object.keys(n).reduce((i,o)=>t[o]?$v(i,t[o](n)):i,{});return r.propTypes={},r.filterProps=e.reduce((n,i)=>n.concat(i.filterProps),[]),r}function xu(e){return typeof e!="number"?e:`${e}px solid`}function Lu(e,t){return Es({prop:e,themeKey:"borders",transform:t})}const SBe=Lu("border",xu),ABe=Lu("borderTop",xu),EBe=Lu("borderRight",xu),TBe=Lu("borderBottom",xu),CBe=Lu("borderLeft",xu),PBe=Lu("borderColor"),IBe=Lu("borderTopColor"),RBe=Lu("borderRightColor"),kBe=Lu("borderBottomColor"),MBe=Lu("borderLeftColor"),OBe=Lu("outline",xu),NBe=Lu("outlineColor"),wA=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Ab(e.theme,"shape.borderRadius",4),r=n=>({borderRadius:Eb(t,n)});return yd(e,e.borderRadius,r)}return null};wA.propTypes={};wA.filterProps=["borderRadius"];xA(SBe,ABe,EBe,TBe,CBe,PBe,IBe,RBe,kBe,MBe,wA,OBe,NBe);const SA=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Ab(e.theme,"spacing",8),r=n=>({gap:Eb(t,n)});return yd(e,e.gap,r)}return null};SA.propTypes={};SA.filterProps=["gap"];const AA=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Ab(e.theme,"spacing",8),r=n=>({columnGap:Eb(t,n)});return yd(e,e.columnGap,r)}return null};AA.propTypes={};AA.filterProps=["columnGap"];const EA=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Ab(e.theme,"spacing",8),r=n=>({rowGap:Eb(t,n)});return yd(e,e.rowGap,r)}return null};EA.propTypes={};EA.filterProps=["rowGap"];const DBe=Es({prop:"gridColumn"}),LBe=Es({prop:"gridRow"}),FBe=Es({prop:"gridAutoFlow"}),BBe=Es({prop:"gridAutoColumns"}),zBe=Es({prop:"gridAutoRows"}),$Be=Es({prop:"gridTemplateColumns"}),UBe=Es({prop:"gridTemplateRows"}),jBe=Es({prop:"gridTemplateAreas"}),VBe=Es({prop:"gridArea"});xA(SA,AA,EA,DBe,LBe,FBe,BBe,zBe,$Be,UBe,jBe,VBe);function jy(e,t){return t==="grey"?t:e}const HBe=Es({prop:"color",themeKey:"palette",transform:jy}),qBe=Es({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:jy}),WBe=Es({prop:"backgroundColor",themeKey:"palette",transform:jy});xA(HBe,qBe,WBe);function jc(e){return e<=1&&e!==0?`${e*100}%`:e}const XBe=Es({prop:"width",transform:jc}),L6=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var i,o,l,s,f;const n=((l=(o=(i=e.theme)==null?void 0:i.breakpoints)==null?void 0:o.values)==null?void 0:l[r])||vA[r];return n?((f=(s=e.theme)==null?void 0:s.breakpoints)==null?void 0:f.unit)!=="px"?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:jc(r)}};return yd(e,e.maxWidth,t)}return null};L6.filterProps=["maxWidth"];const KBe=Es({prop:"minWidth",transform:jc}),GBe=Es({prop:"height",transform:jc}),YBe=Es({prop:"maxHeight",transform:jc}),ZBe=Es({prop:"minHeight",transform:jc});Es({prop:"size",cssProperty:"width",transform:jc});Es({prop:"size",cssProperty:"height",transform:jc});const JBe=Es({prop:"boxSizing"});xA(XBe,L6,KBe,GBe,YBe,ZBe,JBe);const Tb={border:{themeKey:"borders",transform:xu},borderTop:{themeKey:"borders",transform:xu},borderRight:{themeKey:"borders",transform:xu},borderBottom:{themeKey:"borders",transform:xu},borderLeft:{themeKey:"borders",transform:xu},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:xu},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:wA},color:{themeKey:"palette",transform:jy},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:jy},backgroundColor:{themeKey:"palette",transform:jy},p:{style:ss},pt:{style:ss},pr:{style:ss},pb:{style:ss},pl:{style:ss},px:{style:ss},py:{style:ss},padding:{style:ss},paddingTop:{style:ss},paddingRight:{style:ss},paddingBottom:{style:ss},paddingLeft:{style:ss},paddingX:{style:ss},paddingY:{style:ss},paddingInline:{style:ss},paddingInlineStart:{style:ss},paddingInlineEnd:{style:ss},paddingBlock:{style:ss},paddingBlockStart:{style:ss},paddingBlockEnd:{style:ss},m:{style:os},mt:{style:os},mr:{style:os},mb:{style:os},ml:{style:os},mx:{style:os},my:{style:os},margin:{style:os},marginTop:{style:os},marginRight:{style:os},marginBottom:{style:os},marginLeft:{style:os},marginX:{style:os},marginY:{style:os},marginInline:{style:os},marginInlineStart:{style:os},marginInlineEnd:{style:os},marginBlock:{style:os},marginBlockStart:{style:os},marginBlockEnd:{style:os},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:SA},rowGap:{style:EA},columnGap:{style:AA},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:jc},maxWidth:{style:L6},minWidth:{transform:jc},height:{transform:jc},maxHeight:{transform:jc},minHeight:{transform:jc},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function QBe(...e){const t=e.reduce((n,i)=>n.concat(Object.keys(i)),[]),r=new Set(t);return e.every(n=>r.size===Object.keys(n).length)}function e7e(e,t){return typeof e=="function"?e(t):e}function t7e(){function e(r,n,i,o){const l={[r]:n,theme:i},s=o[r];if(!s)return{[r]:n};const{cssProperty:f=r,themeKey:p,transform:v,style:x}=s;if(n==null)return null;if(p==="typography"&&n==="inherit")return{[r]:n};const S=bA(i,p)||{};return x?x(l):yd(l,n,k=>{let R=aS(S,v,k);return k===R&&typeof k=="string"&&(R=aS(S,v,`${r}${k==="default"?"":QW(k)}`,k)),f===!1?R:{[f]:R}})}function t(r){const{sx:n,theme:i={}}=r||{};if(!n)return null;const o=i.unstable_sxConfig??Tb;function l(s){let f=s;if(typeof s=="function")f=s(i);else if(typeof s!="object")return s;if(!f)return null;const p=gBe(i.breakpoints),v=Object.keys(p);let x=p;return Object.keys(f).forEach(S=>{const A=e7e(f[S],i);if(A!=null)if(typeof A=="object")if(o[S])x=$v(x,e(S,A,i,o));else{const k=yd({theme:i},A,R=>({[S]:R}));QBe(k,A)?x[S]=t({sx:A,theme:i}):x=$v(x,k)}else x=$v(x,e(S,A,i,o))}),cBe(i,mBe(v,x))}return Array.isArray(n)?n.map(l):l(n)}return t}const lm=t7e();lm.filterProps=["sx"];function r7e(e,t){var n;const r=this;if(r.vars){if(!((n=r.colorSchemes)!=null&&n[e])||typeof r.getColorSchemeSelector!="function")return{};let i=r.getColorSchemeSelector(e);return i==="&"?t:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:t})}return r.palette.mode===e?t:{}}function F6(e={},...t){const{breakpoints:r={},palette:n={},spacing:i,shape:o={},...l}=e,s=lBe(r),f=tX(i);let p=Wg({breakpoints:s,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:f,shape:{...dBe,...o}},l);return p=fBe(p),p.applyStyles=r7e,p=t.reduce((v,x)=>Wg(v,x),p),p.unstable_sxConfig={...Tb,...l==null?void 0:l.unstable_sxConfig},p.unstable_sx=function(x){return lm({sx:x,theme:this})},p}function n7e(e){return Object.keys(e).length===0}function i7e(e=null){const t=me.useContext(O_);return!t||n7e(t)?e:t}const o7e=F6();function s7e(e=o7e){return i7e(e)}const a7e=e=>{var n;const t={systemProps:{},otherProps:{}},r=((n=e==null?void 0:e.theme)==null?void 0:n.unstable_sxConfig)??Tb;return Object.keys(e).forEach(i=>{r[i]?t.systemProps[i]=e[i]:t.otherProps[i]=e[i]}),t};function rX(e){const{sx:t,...r}=e,{systemProps:n,otherProps:i}=a7e(r);let o;return Array.isArray(t)?o=[n,...t]:typeof t=="function"?o=(...l)=>{const s=t(...l);return ip(s)?{...n,...s}:n}:o={...n,...t},{...i,sx:o}}function nX(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=nX(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function l7e(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=nX(e))&&(n&&(n+=" "),n+=t);return n}function c7e(e={}){const{themeId:t,defaultTheme:r,defaultClassName:n="MuiBox-root",generateClassName:i}=e,o=ZW("div",{shouldForwardProp:s=>s!=="theme"&&s!=="sx"&&s!=="as"})(lm);return me.forwardRef(function(f,p){const v=s7e(r),{className:x,component:S="div",...A}=rX(f);return xt.jsx(o,{as:S,ref:p,className:l7e(x,i?i(n):n),theme:t&&v[t]||v,...A})})}function iX(e){const{variants:t,...r}=e,n={variants:t,style:w7(r),isProcessed:!0};return n.style===r||t&&t.forEach(i=>{typeof i.style!="function"&&(i.style=w7(i.style))}),n}const u7e=F6();function eC(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function h7e(e){return e?(t,r)=>r[e]:null}function f7e(e,t,r){e.theme=g7e(e.theme)?r:e.theme[t]||e.theme}function Nw(e,t){const r=typeof t=="function"?t(e):t;if(Array.isArray(r))return r.flatMap(n=>Nw(e,n));if(Array.isArray(r==null?void 0:r.variants)){let n;if(r.isProcessed)n=r.style;else{const{variants:i,...o}=r;n=o}return oX(e,r.variants,[n])}return r!=null&&r.isProcessed?r.style:r}function oX(e,t,r=[]){var i;let n;e:for(let o=0;o<t.length;o+=1){const l=t[o];if(typeof l.props=="function"){if(n??(n={...e,...e.ownerState,ownerState:e.ownerState}),!l.props(n))continue}else for(const s in l.props)if(e[s]!==l.props[s]&&((i=e.ownerState)==null?void 0:i[s])!==l.props[s])continue e;typeof l.style=="function"?(n??(n={...e,...e.ownerState,ownerState:e.ownerState}),r.push(l.style(n))):r.push(l.style)}return r}function d7e(e={}){const{themeId:t,defaultTheme:r=u7e,rootShouldForwardProp:n=eC,slotShouldForwardProp:i=eC}=e;function o(s){f7e(s,t,r)}return(s,f={})=>{sBe(s,ne=>ne.filter(ee=>ee!==lm));const{name:p,slot:v,skipVariantsResolver:x,skipSx:S,overridesResolver:A=h7e(y7e(v)),...k}=f,R=x!==void 0?x:v&&v!=="Root"&&v!=="root"||!1,z=S||!1;let N=eC;v==="Root"||v==="root"?N=n:v?N=i:m7e(s)&&(N=void 0);const B=ZW(s,{shouldForwardProp:N,label:p7e(),...k}),U=ne=>{if(typeof ne=="function"&&ne.__emotion_real!==ne)return function(Q){return Nw(Q,ne)};if(ip(ne)){const ee=iX(ne);return ee.variants?function(re){return Nw(re,ee)}:ee.style}return ne},K=(...ne)=>{const ee=[],Q=ne.map(U),re=[];if(ee.push(o),p&&A&&re.push(function(se){var $e,Ze;const ge=(Ze=($e=se.theme.components)==null?void 0:$e[p])==null?void 0:Ze.styleOverrides;if(!ge)return null;const je={};for(const Me in ge)je[Me]=Nw(se,ge[Me]);return A(se,je)}),p&&!R&&re.push(function(se){var je,$e;const ve=se.theme,ge=($e=(je=ve==null?void 0:ve.components)==null?void 0:je[p])==null?void 0:$e.variants;return ge?oX(se,ge):null}),z||re.push(lm),Array.isArray(Q[0])){const G=Q.shift(),se=new Array(ee.length).fill(""),ve=new Array(re.length).fill("");let ge;ge=[...se,...G,...ve],ge.raw=[...se,...G.raw,...ve],ee.unshift(ge)}const Se=[...ee,...Q,...re],J=B(...Se);return s.muiName&&(J.muiName=s.muiName),J};return B.withConfig&&(K.withConfig=B.withConfig),K}}function p7e(e,t){return void 0}function g7e(e){for(const t in e)return!1;return!0}function m7e(e){return typeof e=="string"&&e.charCodeAt(0)>96}function y7e(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function UP(e,t){const r={...t};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=n;if(i==="components"||i==="slots")r[i]={...e[i],...r[i]};else if(i==="componentsProps"||i==="slotProps"){const o=e[i],l=t[i];if(!l)r[i]=o||{};else if(!o)r[i]=l;else{r[i]={...l};for(const s in o)if(Object.prototype.hasOwnProperty.call(o,s)){const f=s;r[i][f]=UP(o[f],l[f])}}}else r[i]===void 0&&(r[i]=e[i])}return r}function _7e(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}function B6(e,t=0,r=1){return _7e(e,t,r)}function v7e(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(n=>n+n)),r?`rgb${r.length===4?"a":""}(${r.map((n,i)=>i<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function Lp(e){if(e.type)return e;if(e.charAt(0)==="#")return Lp(v7e(e));const t=e.indexOf("("),r=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(r))throw new Error($P(9,e));let n=e.substring(t+1,e.length-1),i;if(r==="color"){if(n=n.split(" "),i=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error($P(10,i))}else n=n.split(",");return n=n.map(o=>parseFloat(o)),{type:r,values:n,colorSpace:i}}const b7e=e=>{const t=Lp(e);return t.values.slice(0,3).map((r,n)=>t.type.includes("hsl")&&n!==0?`${r}%`:r).join(" ")},gv=(e,t)=>{try{return b7e(e)}catch{return e}};function TA(e){const{type:t,colorSpace:r}=e;let{values:n}=e;return t.includes("rgb")?n=n.map((i,o)=>o<3?parseInt(i,10):i):t.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.includes("color")?n=`${r} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function sX(e){e=Lp(e);const{values:t}=e,r=t[0],n=t[1]/100,i=t[2]/100,o=n*Math.min(i,1-i),l=(p,v=(p+r/30)%12)=>i-o*Math.max(Math.min(v-3,9-v,1),-1);let s="rgb";const f=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return e.type==="hsla"&&(s+="a",f.push(t[3])),TA({type:s,values:f})}function jP(e){e=Lp(e);let t=e.type==="hsl"||e.type==="hsla"?Lp(sX(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function x7e(e,t){const r=jP(e),n=jP(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function sf(e,t){return e=Lp(e),t=B6(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,TA(e)}function Gx(e,t,r){try{return sf(e,t)}catch{return e}}function C_(e,t){if(e=Lp(e),t=B6(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]*=1-t;return TA(e)}function ro(e,t,r){try{return C_(e,t)}catch{return e}}function P_(e,t){if(e=Lp(e),t=B6(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return TA(e)}function no(e,t,r){try{return P_(e,t)}catch{return e}}function w7e(e,t=.15){return jP(e)>.5?C_(e,t):P_(e,t)}function Yx(e,t,r){try{return w7e(e,t)}catch{return e}}const S7e=me.createContext(),A7e=()=>me.useContext(S7e)??!1,E7e=me.createContext(void 0);function T7e(e){const{theme:t,name:r,props:n}=e;if(!t||!t.components||!t.components[r])return n;const i=t.components[r];return i.defaultProps?UP(i.defaultProps,n):!i.styleOverrides&&!i.variants?UP(i,n):n}function C7e({props:e,name:t}){const r=me.useContext(E7e);return T7e({props:e,name:t,theme:{components:r}})}const E7={theme:void 0};function P7e(e){let t,r;return function(i){let o=t;return(o===void 0||i.theme!==r)&&(E7.theme=i.theme,o=iX(e(E7)),t=o,r=i.theme),o}}function I7e(e=""){function t(...n){if(!n.length)return"";const i=n[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${i}${t(...n.slice(1))})`:`, ${i}`}return(n,...i)=>`var(--${e?`${e}-`:""}${n}${t(...i)})`}const T7=(e,t,r,n=[])=>{let i=e;t.forEach((o,l)=>{l===t.length-1?Array.isArray(i)?i[Number(o)]=r:i&&typeof i=="object"&&(i[o]=r):i&&typeof i=="object"&&(i[o]||(i[o]=n.includes(o)?[]:{}),i=i[o])})},R7e=(e,t,r)=>{function n(i,o=[],l=[]){Object.entries(i).forEach(([s,f])=>{(!r||r&&!r([...o,s]))&&f!=null&&(typeof f=="object"&&Object.keys(f).length>0?n(f,[...o,s],Array.isArray(f)?[...l,s]:l):t([...o,s],f,l))})}n(e)},k7e=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>e.includes(n))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function tC(e,t){const{prefix:r,shouldSkipGeneratingVar:n}=t||{},i={},o={},l={};return R7e(e,(s,f,p)=>{if((typeof f=="string"||typeof f=="number")&&(!n||!n(s,f))){const v=`--${r?`${r}-`:""}${s.join("-")}`,x=k7e(s,f);Object.assign(i,{[v]:x}),T7(o,s,`var(${v})`,p),T7(l,s,`var(${v}, ${x})`,p)}},s=>s[0]==="vars"),{css:i,vars:o,varsWithDefaults:l}}function M7e(e,t={}){const{getSelector:r=z,disableCssColorScheme:n,colorSchemeSelector:i}=t,{colorSchemes:o={},components:l,defaultColorScheme:s="light",...f}=e,{vars:p,css:v,varsWithDefaults:x}=tC(f,t);let S=x;const A={},{[s]:k,...R}=o;if(Object.entries(R||{}).forEach(([U,K])=>{const{vars:ne,css:ee,varsWithDefaults:Q}=tC(K,t);S=Wg(S,Q),A[U]={css:ee,vars:ne}}),k){const{css:U,vars:K,varsWithDefaults:ne}=tC(k,t);S=Wg(S,ne),A[s]={css:U,vars:K}}function z(U,K){var ee,Q;let ne=i;if(i==="class"&&(ne=".%s"),i==="data"&&(ne="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(ne=`[${i}="%s"]`),U){if(ne==="media")return e.defaultColorScheme===U?":root":{[`@media (prefers-color-scheme: ${((Q=(ee=o[U])==null?void 0:ee.palette)==null?void 0:Q.mode)||U})`]:{":root":K}};if(ne)return e.defaultColorScheme===U?`:root, ${ne.replace("%s",String(U))}`:ne.replace("%s",String(U))}return":root"}return{vars:S,generateThemeVars:()=>{let U={...p};return Object.entries(A).forEach(([,{vars:K}])=>{U=Wg(U,K)}),U},generateStyleSheets:()=>{var re,Se;const U=[],K=e.defaultColorScheme||"light";function ne(J,G){Object.keys(G).length&&U.push(typeof J=="string"?{[J]:{...G}}:J)}ne(r(void 0,{...v}),v);const{[K]:ee,...Q}=A;if(ee){const{css:J}=ee,G=(Se=(re=o[K])==null?void 0:re.palette)==null?void 0:Se.mode,se=!n&&G?{colorScheme:G,...J}:{...J};ne(r(K,{...se}),se)}return Object.entries(Q).forEach(([J,{css:G}])=>{var ge,je;const se=(je=(ge=o[J])==null?void 0:ge.palette)==null?void 0:je.mode,ve=!n&&se?{colorScheme:se,...G}:{...G};ne(r(J,{...ve}),ve)}),U}}}function O7e(e){return function(r){return e==="media"?`@media (prefers-color-scheme: ${r})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${r}"] &`:e==="class"?`.${r} &`:e==="data"?`[data-${r}] &`:`${e.replace("%s",r)} &`:"&"}}function op(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function aX(e){if(!op(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=aX(e[r])}),t}function Xg(e,t,r={clone:!0}){const n=r.clone?{...e}:e;return op(e)&&op(t)&&Object.keys(t).forEach(i=>{op(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&op(e[i])?n[i]=Xg(e[i],t[i],r):r.clone?n[i]=op(t[i])?aX(t[i]):t[i]:n[i]=t[i]}),n}const C7={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:F2.white,default:F2.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},rC={text:{primary:F2.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:F2.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function P7(e,t,r,n){const i=n.light||n,o=n.dark||n*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=P_(e.main,i):t==="dark"&&(e.dark=C_(e.main,o)))}function N7e(e="light"){return e==="dark"?{main:T0[200],light:T0[50],dark:T0[400]}:{main:T0[700],light:T0[400],dark:T0[800]}}function D7e(e="light"){return e==="dark"?{main:E0[200],light:E0[50],dark:E0[400]}:{main:E0[500],light:E0[300],dark:E0[700]}}function L7e(e="light"){return e==="dark"?{main:A0[500],light:A0[300],dark:A0[700]}:{main:A0[700],light:A0[400],dark:A0[800]}}function F7e(e="light"){return e==="dark"?{main:C0[400],light:C0[300],dark:C0[700]}:{main:C0[700],light:C0[500],dark:C0[900]}}function B7e(e="light"){return e==="dark"?{main:P0[400],light:P0[300],dark:P0[700]}:{main:P0[800],light:P0[500],dark:P0[900]}}function z7e(e="light"){return e==="dark"?{main:G1[400],light:G1[300],dark:G1[700]}:{main:"#ed6c02",light:G1[500],dark:G1[900]}}function z6(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:n=.2,...i}=e,o=e.primary||N7e(t),l=e.secondary||D7e(t),s=e.error||L7e(t),f=e.info||F7e(t),p=e.success||B7e(t),v=e.warning||z7e(t);function x(R){return x7e(R,rC.text.primary)>=r?rC.text.primary:C7.text.primary}const S=({color:R,name:z,mainShade:N=500,lightShade:B=300,darkShade:U=700})=>{if(R={...R},!R.main&&R[N]&&(R.main=R[N]),!R.hasOwnProperty("main"))throw new Error(B2(11,z?` (${z})`:"",N));if(typeof R.main!="string")throw new Error(B2(12,z?` (${z})`:"",JSON.stringify(R.main)));return P7(R,"light",B,n),P7(R,"dark",U,n),R.contrastText||(R.contrastText=x(R.main)),R},A={dark:rC,light:C7};return Xg({common:{...F2},mode:t,primary:S({color:o,name:"primary"}),secondary:S({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:S({color:s,name:"error"}),warning:S({color:v,name:"warning"}),info:S({color:f,name:"info"}),success:S({color:p,name:"success"}),grey:oBe,contrastThreshold:r,getContrastText:x,augmentColor:S,tonalOffset:n,...A[t]},i)}function $7e(e){const t={};return Object.entries(e).forEach(n=>{const[i,o]=n;typeof o=="object"&&(t[i]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),t}const I7=e=>e,U7e=()=>{let e=I7;return{configure(t){e=t},generate(t){return e(t)},reset(){e=I7}}},lX=U7e(),j7e={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Vp(e,t,r="Mui"){const n=j7e[t];return n?`${r}-${n}`:`${lX.generate(e)}-${t}`}function V7e(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function H7e(e){return Math.round(e*1e5)/1e5}const R7={textTransform:"uppercase"},k7='"Roboto", "Helvetica", "Arial", sans-serif';function q7e(e,t){const{fontFamily:r=k7,fontSize:n=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:l=500,fontWeightBold:s=700,htmlFontSize:f=16,allVariants:p,pxToRem:v,...x}=typeof t=="function"?t(e):t,S=n/14,A=v||(z=>`${z/f*S}rem`),k=(z,N,B,U,K)=>({fontFamily:r,fontWeight:z,fontSize:A(N),lineHeight:B,...r===k7?{letterSpacing:`${H7e(U/N)}em`}:{},...K,...p}),R={h1:k(i,96,1.167,-1.5),h2:k(i,60,1.2,-.5),h3:k(o,48,1.167,0),h4:k(o,34,1.235,.25),h5:k(o,24,1.334,0),h6:k(l,20,1.6,.15),subtitle1:k(o,16,1.75,.15),subtitle2:k(l,14,1.57,.1),body1:k(o,16,1.5,.15),body2:k(o,14,1.43,.15),button:k(l,14,1.75,.4,R7),caption:k(o,12,1.66,.4),overline:k(o,12,2.66,1,R7),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Xg({htmlFontSize:f,pxToRem:A,fontFamily:r,fontSize:n,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:l,fontWeightBold:s,...R},x,{clone:!1})}const W7e=.2,X7e=.14,K7e=.12;function ko(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${W7e})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${X7e})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${K7e})`].join(",")}const G7e=["none",ko(0,2,1,-1,0,1,1,0,0,1,3,0),ko(0,3,1,-2,0,2,2,0,0,1,5,0),ko(0,3,3,-2,0,3,4,0,0,1,8,0),ko(0,2,4,-1,0,4,5,0,0,1,10,0),ko(0,3,5,-1,0,5,8,0,0,1,14,0),ko(0,3,5,-1,0,6,10,0,0,1,18,0),ko(0,4,5,-2,0,7,10,1,0,2,16,1),ko(0,5,5,-3,0,8,10,1,0,3,14,2),ko(0,5,6,-3,0,9,12,1,0,3,16,2),ko(0,6,6,-3,0,10,14,1,0,4,18,3),ko(0,6,7,-4,0,11,15,1,0,4,20,3),ko(0,7,8,-4,0,12,17,2,0,5,22,4),ko(0,7,8,-4,0,13,19,2,0,5,24,4),ko(0,7,9,-4,0,14,21,2,0,5,26,4),ko(0,8,9,-5,0,15,22,2,0,6,28,5),ko(0,8,10,-5,0,16,24,2,0,6,30,5),ko(0,8,11,-5,0,17,26,2,0,6,32,5),ko(0,9,11,-5,0,18,28,2,0,7,34,6),ko(0,9,12,-6,0,19,29,2,0,7,36,6),ko(0,10,13,-6,0,20,31,3,0,8,38,7),ko(0,10,13,-6,0,21,33,3,0,8,40,7),ko(0,10,14,-6,0,22,35,3,0,8,42,7),ko(0,11,14,-7,0,23,36,3,0,9,44,8),ko(0,11,15,-7,0,24,38,3,0,9,46,8)],Y7e={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Z7e={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function M7(e){return`${Math.round(e)}ms`}function J7e(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function Q7e(e){const t={...Y7e,...e.easing},r={...Z7e,...e.duration};return{getAutoHeightDuration:J7e,create:(i=["all"],o={})=>{const{duration:l=r.standard,easing:s=t.easeInOut,delay:f=0,...p}=o;return(Array.isArray(i)?i:[i]).map(v=>`${v} ${typeof l=="string"?l:M7(l)} ${s} ${typeof f=="string"?f:M7(f)}`).join(",")},...e,easing:t,duration:r}}const e9e={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function VP(e={},...t){const{breakpoints:r,mixins:n={},spacing:i,palette:o={},transitions:l={},typography:s={},shape:f,...p}=e;if(e.vars)throw new Error(B2(20));const v=z6(o),x=F6(e);let S=Xg(x,{mixins:V7e(x.breakpoints,n),palette:v,shadows:G7e.slice(),typography:q7e(v,s),transitions:Q7e(l),zIndex:{...e9e}});return S=Xg(S,p),S=t.reduce((A,k)=>Xg(A,k),S),S.unstable_sxConfig={...Tb,...p==null?void 0:p.unstable_sxConfig},S.unstable_sx=function(k){return lm({sx:k,theme:this})},S}function t9e(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const r9e=[...Array(25)].map((e,t)=>{if(t===0)return"none";const r=t9e(t);return`linear-gradient(rgba(255 255 255 / ${r}), rgba(255 255 255 / ${r}))`});function cX(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function uX(e){return e==="dark"?r9e:[]}function n9e(e){const{palette:t={mode:"light"},opacity:r,overlays:n,...i}=e,o=z6(t);return{palette:o,opacity:{...cX(o.mode),...r},overlays:n||uX(o.mode),...i}}function i9e(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const o9e=e=>[...[...Array(25)].map((t,r)=>`--${e?`${e}-`:""}overlays-${r}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],s9e=e=>(t,r)=>{const n=e.rootSelector||":root",i=e.colorSchemeSelector;let o=i;if(i==="class"&&(o=".%s"),i==="data"&&(o="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(o=`[${i}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const l={};return o9e(e.cssVarPrefix).forEach(s=>{l[s]=r[s],delete r[s]}),o==="media"?{[n]:r,"@media (prefers-color-scheme: dark)":{[n]:l}}:o?{[o.replace("%s",t)]:l,[`${n}, ${o.replace("%s",t)}`]:r}:{[n]:{...r,...l}}}if(o&&o!=="media")return`${n}, ${o.replace("%s",String(t))}`}else if(t){if(o==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[n]:r}};if(o)return o.replace("%s",String(t))}return n};function a9e(e){return op(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function l9e(e={}){const t={...e};function r(n){const i=Object.entries(n);for(let o=0;o<i.length;o++){const[l,s]=i[o];!a9e(s)||l.startsWith("unstable_")?delete n[l]:op(s)&&(n[l]={...s},r(n[l]))}}return r(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function c9e(e,t){t.forEach(r=>{e[r]||(e[r]={})})}function jt(e,t,r){!e[t]&&r&&(e[t]=r)}function mv(e){return!e||!e.startsWith("hsl")?e:sX(e)}function Xf(e,t){`${t}Channel`in e||(e[`${t}Channel`]=gv(mv(e[t]),`MUI: Can't create \`palette.${t}Channel\` because \`palette.${t}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${t}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}function u9e(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Xh=e=>{try{return e()}catch{}},h9e=(e="mui")=>I7e(e);function nC(e,t,r,n){if(!t)return;t=t===!0?{}:t;const i=n==="dark"?"dark":"light";if(!r){e[n]=n9e({...t,palette:{mode:i,...t==null?void 0:t.palette}});return}const{palette:o,...l}=VP({...r,palette:{mode:i,...t==null?void 0:t.palette}});return e[n]={...t,palette:o,opacity:{...cX(i),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||uX(i)},l}function f9e(e={},...t){const{colorSchemes:r={light:!0},defaultColorScheme:n,disableCssColorScheme:i=!1,cssVarPrefix:o="mui",shouldSkipGeneratingVar:l=i9e,colorSchemeSelector:s=r.light&&r.dark?"media":void 0,rootSelector:f=":root",...p}=e,v=Object.keys(r)[0],x=n||(r.light&&v!=="light"?"light":v),S=h9e(o),{[x]:A,light:k,dark:R,...z}=r,N={...z};let B=A;if((x==="dark"&&!("dark"in r)||x==="light"&&!("light"in r))&&(B=!0),!B)throw new Error(B2(21,x));const U=nC(N,B,p,x);k&&!N.light&&nC(N,k,void 0,"light"),R&&!N.dark&&nC(N,R,void 0,"dark");let K={defaultColorScheme:x,...U,cssVarPrefix:o,colorSchemeSelector:s,rootSelector:f,getCssVar:S,colorSchemes:N,font:{...$7e(U.typography),...U.font},spacing:u9e(p.spacing)};Object.keys(K.colorSchemes).forEach(Se=>{const J=K.colorSchemes[Se].palette,G=se=>{const ve=se.split("-"),ge=ve[1],je=ve[2];return S(se,J[ge][je])};if(J.mode==="light"&&(jt(J.common,"background","#fff"),jt(J.common,"onBackground","#000")),J.mode==="dark"&&(jt(J.common,"background","#000"),jt(J.common,"onBackground","#fff")),c9e(J,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),J.mode==="light"){jt(J.Alert,"errorColor",ro(J.error.light,.6)),jt(J.Alert,"infoColor",ro(J.info.light,.6)),jt(J.Alert,"successColor",ro(J.success.light,.6)),jt(J.Alert,"warningColor",ro(J.warning.light,.6)),jt(J.Alert,"errorFilledBg",G("palette-error-main")),jt(J.Alert,"infoFilledBg",G("palette-info-main")),jt(J.Alert,"successFilledBg",G("palette-success-main")),jt(J.Alert,"warningFilledBg",G("palette-warning-main")),jt(J.Alert,"errorFilledColor",Xh(()=>J.getContrastText(J.error.main))),jt(J.Alert,"infoFilledColor",Xh(()=>J.getContrastText(J.info.main))),jt(J.Alert,"successFilledColor",Xh(()=>J.getContrastText(J.success.main))),jt(J.Alert,"warningFilledColor",Xh(()=>J.getContrastText(J.warning.main))),jt(J.Alert,"errorStandardBg",no(J.error.light,.9)),jt(J.Alert,"infoStandardBg",no(J.info.light,.9)),jt(J.Alert,"successStandardBg",no(J.success.light,.9)),jt(J.Alert,"warningStandardBg",no(J.warning.light,.9)),jt(J.Alert,"errorIconColor",G("palette-error-main")),jt(J.Alert,"infoIconColor",G("palette-info-main")),jt(J.Alert,"successIconColor",G("palette-success-main")),jt(J.Alert,"warningIconColor",G("palette-warning-main")),jt(J.AppBar,"defaultBg",G("palette-grey-100")),jt(J.Avatar,"defaultBg",G("palette-grey-400")),jt(J.Button,"inheritContainedBg",G("palette-grey-300")),jt(J.Button,"inheritContainedHoverBg",G("palette-grey-A100")),jt(J.Chip,"defaultBorder",G("palette-grey-400")),jt(J.Chip,"defaultAvatarColor",G("palette-grey-700")),jt(J.Chip,"defaultIconColor",G("palette-grey-700")),jt(J.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),jt(J.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),jt(J.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),jt(J.LinearProgress,"primaryBg",no(J.primary.main,.62)),jt(J.LinearProgress,"secondaryBg",no(J.secondary.main,.62)),jt(J.LinearProgress,"errorBg",no(J.error.main,.62)),jt(J.LinearProgress,"infoBg",no(J.info.main,.62)),jt(J.LinearProgress,"successBg",no(J.success.main,.62)),jt(J.LinearProgress,"warningBg",no(J.warning.main,.62)),jt(J.Skeleton,"bg",`rgba(${G("palette-text-primaryChannel")} / 0.11)`),jt(J.Slider,"primaryTrack",no(J.primary.main,.62)),jt(J.Slider,"secondaryTrack",no(J.secondary.main,.62)),jt(J.Slider,"errorTrack",no(J.error.main,.62)),jt(J.Slider,"infoTrack",no(J.info.main,.62)),jt(J.Slider,"successTrack",no(J.success.main,.62)),jt(J.Slider,"warningTrack",no(J.warning.main,.62));const se=Yx(J.background.default,.8);jt(J.SnackbarContent,"bg",se),jt(J.SnackbarContent,"color",Xh(()=>J.getContrastText(se))),jt(J.SpeedDialAction,"fabHoverBg",Yx(J.background.paper,.15)),jt(J.StepConnector,"border",G("palette-grey-400")),jt(J.StepContent,"border",G("palette-grey-400")),jt(J.Switch,"defaultColor",G("palette-common-white")),jt(J.Switch,"defaultDisabledColor",G("palette-grey-100")),jt(J.Switch,"primaryDisabledColor",no(J.primary.main,.62)),jt(J.Switch,"secondaryDisabledColor",no(J.secondary.main,.62)),jt(J.Switch,"errorDisabledColor",no(J.error.main,.62)),jt(J.Switch,"infoDisabledColor",no(J.info.main,.62)),jt(J.Switch,"successDisabledColor",no(J.success.main,.62)),jt(J.Switch,"warningDisabledColor",no(J.warning.main,.62)),jt(J.TableCell,"border",no(Gx(J.divider,1),.88)),jt(J.Tooltip,"bg",Gx(J.grey[700],.92))}if(J.mode==="dark"){jt(J.Alert,"errorColor",no(J.error.light,.6)),jt(J.Alert,"infoColor",no(J.info.light,.6)),jt(J.Alert,"successColor",no(J.success.light,.6)),jt(J.Alert,"warningColor",no(J.warning.light,.6)),jt(J.Alert,"errorFilledBg",G("palette-error-dark")),jt(J.Alert,"infoFilledBg",G("palette-info-dark")),jt(J.Alert,"successFilledBg",G("palette-success-dark")),jt(J.Alert,"warningFilledBg",G("palette-warning-dark")),jt(J.Alert,"errorFilledColor",Xh(()=>J.getContrastText(J.error.dark))),jt(J.Alert,"infoFilledColor",Xh(()=>J.getContrastText(J.info.dark))),jt(J.Alert,"successFilledColor",Xh(()=>J.getContrastText(J.success.dark))),jt(J.Alert,"warningFilledColor",Xh(()=>J.getContrastText(J.warning.dark))),jt(J.Alert,"errorStandardBg",ro(J.error.light,.9)),jt(J.Alert,"infoStandardBg",ro(J.info.light,.9)),jt(J.Alert,"successStandardBg",ro(J.success.light,.9)),jt(J.Alert,"warningStandardBg",ro(J.warning.light,.9)),jt(J.Alert,"errorIconColor",G("palette-error-main")),jt(J.Alert,"infoIconColor",G("palette-info-main")),jt(J.Alert,"successIconColor",G("palette-success-main")),jt(J.Alert,"warningIconColor",G("palette-warning-main")),jt(J.AppBar,"defaultBg",G("palette-grey-900")),jt(J.AppBar,"darkBg",G("palette-background-paper")),jt(J.AppBar,"darkColor",G("palette-text-primary")),jt(J.Avatar,"defaultBg",G("palette-grey-600")),jt(J.Button,"inheritContainedBg",G("palette-grey-800")),jt(J.Button,"inheritContainedHoverBg",G("palette-grey-700")),jt(J.Chip,"defaultBorder",G("palette-grey-700")),jt(J.Chip,"defaultAvatarColor",G("palette-grey-300")),jt(J.Chip,"defaultIconColor",G("palette-grey-300")),jt(J.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),jt(J.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),jt(J.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),jt(J.LinearProgress,"primaryBg",ro(J.primary.main,.5)),jt(J.LinearProgress,"secondaryBg",ro(J.secondary.main,.5)),jt(J.LinearProgress,"errorBg",ro(J.error.main,.5)),jt(J.LinearProgress,"infoBg",ro(J.info.main,.5)),jt(J.LinearProgress,"successBg",ro(J.success.main,.5)),jt(J.LinearProgress,"warningBg",ro(J.warning.main,.5)),jt(J.Skeleton,"bg",`rgba(${G("palette-text-primaryChannel")} / 0.13)`),jt(J.Slider,"primaryTrack",ro(J.primary.main,.5)),jt(J.Slider,"secondaryTrack",ro(J.secondary.main,.5)),jt(J.Slider,"errorTrack",ro(J.error.main,.5)),jt(J.Slider,"infoTrack",ro(J.info.main,.5)),jt(J.Slider,"successTrack",ro(J.success.main,.5)),jt(J.Slider,"warningTrack",ro(J.warning.main,.5));const se=Yx(J.background.default,.98);jt(J.SnackbarContent,"bg",se),jt(J.SnackbarContent,"color",Xh(()=>J.getContrastText(se))),jt(J.SpeedDialAction,"fabHoverBg",Yx(J.background.paper,.15)),jt(J.StepConnector,"border",G("palette-grey-600")),jt(J.StepContent,"border",G("palette-grey-600")),jt(J.Switch,"defaultColor",G("palette-grey-300")),jt(J.Switch,"defaultDisabledColor",G("palette-grey-600")),jt(J.Switch,"primaryDisabledColor",ro(J.primary.main,.55)),jt(J.Switch,"secondaryDisabledColor",ro(J.secondary.main,.55)),jt(J.Switch,"errorDisabledColor",ro(J.error.main,.55)),jt(J.Switch,"infoDisabledColor",ro(J.info.main,.55)),jt(J.Switch,"successDisabledColor",ro(J.success.main,.55)),jt(J.Switch,"warningDisabledColor",ro(J.warning.main,.55)),jt(J.TableCell,"border",ro(Gx(J.divider,1),.68)),jt(J.Tooltip,"bg",Gx(J.grey[700],.92))}Xf(J.background,"default"),Xf(J.background,"paper"),Xf(J.common,"background"),Xf(J.common,"onBackground"),Xf(J,"divider"),Object.keys(J).forEach(se=>{const ve=J[se];ve&&typeof ve=="object"&&(ve.main&&jt(J[se],"mainChannel",gv(mv(ve.main))),ve.light&&jt(J[se],"lightChannel",gv(mv(ve.light))),ve.dark&&jt(J[se],"darkChannel",gv(mv(ve.dark))),ve.contrastText&&jt(J[se],"contrastTextChannel",gv(mv(ve.contrastText))),se==="text"&&(Xf(J[se],"primary"),Xf(J[se],"secondary")),se==="action"&&(ve.active&&Xf(J[se],"active"),ve.selected&&Xf(J[se],"selected")))})}),K=t.reduce((Se,J)=>Xg(Se,J),K);const ne={prefix:o,disableCssColorScheme:i,shouldSkipGeneratingVar:l,getSelector:s9e(K)},{vars:ee,generateThemeVars:Q,generateStyleSheets:re}=M7e(K,ne);return K.vars=ee,Object.entries(K.colorSchemes[K.defaultColorScheme]).forEach(([Se,J])=>{K[Se]=J}),K.generateThemeVars=Q,K.generateStyleSheets=re,K.generateSpacing=function(){return tX(p.spacing,D6(this))},K.getColorSchemeSelector=O7e(s),K.spacing=K.generateSpacing(),K.shouldSkipGeneratingVar=l,K.unstable_sxConfig={...Tb,...p==null?void 0:p.unstable_sxConfig},K.unstable_sx=function(J){return lm({sx:J,theme:this})},K.toRuntimeSource=l9e,K}function O7(e,t,r){e.colorSchemes&&r&&(e.colorSchemes[t]={...r!==!0&&r,palette:z6({...r===!0?{}:r.palette,mode:t})})}function hX(e={},...t){const{palette:r,cssVariables:n=!1,colorSchemes:i=r?void 0:{light:!0},defaultColorScheme:o=r==null?void 0:r.mode,...l}=e,s=o||"light",f=i==null?void 0:i[s],p={...i,...r?{[s]:{...typeof f!="boolean"&&f,palette:r}}:void 0};if(n===!1){if(!("colorSchemes"in e))return VP(e,...t);let v=r;"palette"in e||p[s]&&(p[s]!==!0?v=p[s].palette:s==="dark"&&(v={mode:"dark"}));const x=VP({...e,palette:v},...t);return x.defaultColorScheme=s,x.colorSchemes=p,x.palette.mode==="light"&&(x.colorSchemes.light={...p.light!==!0&&p.light,palette:x.palette},O7(x,"dark",p.dark)),x.palette.mode==="dark"&&(x.colorSchemes.dark={...p.dark!==!0&&p.dark,palette:x.palette},O7(x,"light",p.light)),x}return!r&&!("light"in p)&&s==="light"&&(p.light=!0),f9e({...l,colorSchemes:p,defaultColorScheme:s,...typeof n!="boolean"&&n},...t)}const d9e=hX();function $6(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const U6=e=>$6(e)&&e!=="classes",Xo=d7e({themeId:YW,defaultTheme:d9e,rootShouldForwardProp:U6});function di(e){if(typeof e!="string")throw new Error(B2(7));return e.charAt(0).toUpperCase()+e.slice(1)}function Dw(e){return e&&e.ownerDocument||document}function p9e(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const fX=typeof window<"u"?me.useLayoutEffect:me.useEffect;function dX({controlled:e,default:t,name:r,state:n="value"}){const{current:i}=me.useRef(e!==void 0),[o,l]=me.useState(t),s=i?e:o,f=me.useCallback(p=>{i||l(p)},[]);return[s,f]}function Ig(e){const t=me.useRef(e);return fX(()=>{t.current=e}),me.useRef((...r)=>(0,t.current)(...r)).current}function lS(...e){return me.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{p9e(r,t)})},e)}const N7={};function pX(e,t){const r=me.useRef(N7);return r.current===N7&&(r.current=e(t)),r}const g9e=[];function m9e(e){me.useEffect(e,g9e)}class j6{constructor(){Ce(this,"currentId",null);Ce(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});Ce(this,"disposeEffect",()=>this.clear)}static create(){return new j6}start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}}function y9e(){const e=pX(j6.create).current;return m9e(e.disposeEffect),e}function cS(e){try{return e.matches(":focus-visible")}catch{}return!1}const _9e={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function gX(e,t){const r={...t};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=n;if(i==="components"||i==="slots")r[i]={...e[i],...r[i]};else if(i==="componentsProps"||i==="slotProps"){const o=e[i],l=t[i];if(!l)r[i]=o||{};else if(!o)r[i]=l;else{r[i]={...l};for(const s in o)if(Object.prototype.hasOwnProperty.call(o,s)){const f=s;r[i][f]=gX(o[f],l[f])}}}else r[i]===void 0&&(r[i]=e[i])}return r}function Pm(e,t,r=void 0){const n={};for(const i in e){const o=e[i];let l="",s=!0;for(let f=0;f<o.length;f+=1){const p=o[f];p&&(l+=(s===!0?"":" ")+t(p),s=!1,r&&r[p]&&(l+=" "+r[p]))}n[i]=l}return n}function Ed(e,t,r="Mui"){const n={};return t.forEach(i=>{n[i]=Vp(e,i,r)}),n}function Y1(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}function v9e(e){return typeof e=="string"}function b9e(e,t,r){return e===void 0||v9e(e)?t:{...t,ownerState:{...t.ownerState,...r}}}function mX(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=mX(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Oo(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=mX(e))&&(n&&(n+=" "),n+=t);return n}function Lw(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&typeof e[n]=="function"&&!t.includes(n)).forEach(n=>{r[n]=e[n]}),r}function D7(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function x9e(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:n,externalForwardedProps:i,className:o}=e;if(!t){const A=Oo(r==null?void 0:r.className,o,i==null?void 0:i.className,n==null?void 0:n.className),k={...r==null?void 0:r.style,...i==null?void 0:i.style,...n==null?void 0:n.style},R={...r,...i,...n};return A.length>0&&(R.className=A),Object.keys(k).length>0&&(R.style=k),{props:R,internalRef:void 0}}const l=Lw({...i,...n}),s=D7(n),f=D7(i),p=t(l),v=Oo(p==null?void 0:p.className,r==null?void 0:r.className,o,i==null?void 0:i.className,n==null?void 0:n.className),x={...p==null?void 0:p.style,...r==null?void 0:r.style,...i==null?void 0:i.style,...n==null?void 0:n.style},S={...p,...r,...f,...s};return v.length>0&&(S.className=v),Object.keys(x).length>0&&(S.style=x),{props:S,internalRef:p.ref}}function w9e(e,t,r){return typeof e=="function"?e(t,r):e}function Wd(e){var x;const{elementType:t,externalSlotProps:r,ownerState:n,skipResolvingSlotProps:i=!1,...o}=e,l=i?{}:w9e(r,n),{props:s,internalRef:f}=x9e({...o,externalSlotProps:l}),p=lS(f,l==null?void 0:l.ref,(x=e.additionalProps)==null?void 0:x.ref);return b9e(t,{...s,ref:p},n)}function S9e(){return rX}const gc=P7e;function Im(e){return C7e(e)}class uS{constructor(){Ce(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new uS}static use(){const t=pX(uS.create).current,[r,n]=me.useState(!1);return t.shouldMount=r,t.setShouldMount=n,me.useEffect(t.mountEffect,[r]),t}mount(){return this.mounted||(this.mounted=E9e(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.start(...t)})}stop(...t){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.stop(...t)})}pulsate(...t){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.pulsate(...t)})}}function A9e(){return uS.use()}function E9e(){let e,t;const r=new Promise((n,i)=>{e=n,t=i});return r.resolve=e,r.reject=t,r}function T9e(e){const{className:t,classes:r,pulsate:n=!1,rippleX:i,rippleY:o,rippleSize:l,in:s,onExited:f,timeout:p}=e,[v,x]=me.useState(!1),S=Oo(t,r.ripple,r.rippleVisible,n&&r.ripplePulsate),A={width:l,height:l,top:-(l/2)+o,left:-(l/2)+i},k=Oo(r.child,v&&r.childLeaving,n&&r.childPulsate);return!s&&!v&&x(!0),me.useEffect(()=>{if(!s&&f!=null){const R=setTimeout(f,p);return()=>{clearTimeout(R)}}},[f,s,p]),xt.jsx("span",{className:S,style:A,children:xt.jsx("span",{className:k})})}const mu=Ed("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),HP=550,C9e=80,P9e=$p`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,I9e=$p`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,R9e=$p`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,k9e=Xo("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),M9e=Xo(T9e,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${mu.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${P9e};
    animation-duration: ${HP}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${mu.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${mu.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${mu.childLeaving} {
    opacity: 0;
    animation-name: ${I9e};
    animation-duration: ${HP}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${mu.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${R9e};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,O9e=me.forwardRef(function(t,r){const n=Im({props:t,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:l,...s}=n,[f,p]=me.useState([]),v=me.useRef(0),x=me.useRef(null);me.useEffect(()=>{x.current&&(x.current(),x.current=null)},[f]);const S=me.useRef(!1),A=y9e(),k=me.useRef(null),R=me.useRef(null),z=me.useCallback(K=>{const{pulsate:ne,rippleX:ee,rippleY:Q,rippleSize:re,cb:Se}=K;p(J=>[...J,xt.jsx(M9e,{classes:{ripple:Oo(o.ripple,mu.ripple),rippleVisible:Oo(o.rippleVisible,mu.rippleVisible),ripplePulsate:Oo(o.ripplePulsate,mu.ripplePulsate),child:Oo(o.child,mu.child),childLeaving:Oo(o.childLeaving,mu.childLeaving),childPulsate:Oo(o.childPulsate,mu.childPulsate)},timeout:HP,pulsate:ne,rippleX:ee,rippleY:Q,rippleSize:re},v.current)]),v.current+=1,x.current=Se},[o]),N=me.useCallback((K={},ne={},ee=()=>{})=>{const{pulsate:Q=!1,center:re=i||ne.pulsate,fakeElement:Se=!1}=ne;if((K==null?void 0:K.type)==="mousedown"&&S.current){S.current=!1;return}(K==null?void 0:K.type)==="touchstart"&&(S.current=!0);const J=Se?null:R.current,G=J?J.getBoundingClientRect():{width:0,height:0,left:0,top:0};let se,ve,ge;if(re||K===void 0||K.clientX===0&&K.clientY===0||!K.clientX&&!K.touches)se=Math.round(G.width/2),ve=Math.round(G.height/2);else{const{clientX:je,clientY:$e}=K.touches&&K.touches.length>0?K.touches[0]:K;se=Math.round(je-G.left),ve=Math.round($e-G.top)}if(re)ge=Math.sqrt((2*G.width**2+G.height**2)/3),ge%2===0&&(ge+=1);else{const je=Math.max(Math.abs((J?J.clientWidth:0)-se),se)*2+2,$e=Math.max(Math.abs((J?J.clientHeight:0)-ve),ve)*2+2;ge=Math.sqrt(je**2+$e**2)}K!=null&&K.touches?k.current===null&&(k.current=()=>{z({pulsate:Q,rippleX:se,rippleY:ve,rippleSize:ge,cb:ee})},A.start(C9e,()=>{k.current&&(k.current(),k.current=null)})):z({pulsate:Q,rippleX:se,rippleY:ve,rippleSize:ge,cb:ee})},[i,z,A]),B=me.useCallback(()=>{N({},{pulsate:!0})},[N]),U=me.useCallback((K,ne)=>{if(A.clear(),(K==null?void 0:K.type)==="touchend"&&k.current){k.current(),k.current=null,A.start(0,()=>{U(K,ne)});return}k.current=null,p(ee=>ee.length>0?ee.slice(1):ee),x.current=ne},[A]);return me.useImperativeHandle(r,()=>({pulsate:B,start:N,stop:U}),[B,N,U]),xt.jsx(k9e,{className:Oo(mu.root,o.root,l),ref:R,...s,children:xt.jsx(T3,{component:null,exit:!0,children:f})})});function N9e(e){return Vp("MuiButtonBase",e)}const D9e=Ed("MuiButtonBase",["root","disabled","focusVisible"]),L9e=e=>{const{disabled:t,focusVisible:r,focusVisibleClassName:n,classes:i}=e,l=Pm({root:["root",t&&"disabled",r&&"focusVisible"]},N9e,i);return r&&n&&(l.root+=` ${n}`),l},F9e=Xo("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${D9e.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),yX=me.forwardRef(function(t,r){const n=Im({props:t,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:l,className:s,component:f="button",disabled:p=!1,disableRipple:v=!1,disableTouchRipple:x=!1,focusRipple:S=!1,focusVisibleClassName:A,LinkComponent:k="a",onBlur:R,onClick:z,onContextMenu:N,onDragLeave:B,onFocus:U,onFocusVisible:K,onKeyDown:ne,onKeyUp:ee,onMouseDown:Q,onMouseLeave:re,onMouseUp:Se,onTouchEnd:J,onTouchMove:G,onTouchStart:se,tabIndex:ve=0,TouchRippleProps:ge,touchRippleRef:je,type:$e,...Ze}=n,Me=me.useRef(null),Ue=A9e(),Qe=lS(Ue.ref,je),[ct,ce]=me.useState(!1);p&&ct&&ce(!1),me.useImperativeHandle(i,()=>({focusVisible:()=>{ce(!0),Me.current.focus()}}),[]);const be=Ue.shouldMount&&!v&&!p;me.useEffect(()=>{ct&&S&&!v&&Ue.pulsate()},[v,S,ct,Ue]);function Oe(at,It,Vt=x){return Ig(lr=>(It&&It(lr),Vt||Ue[at](lr),!0))}const Be=Oe("start",Q),qe=Oe("stop",N),tt=Oe("stop",B),We=Oe("stop",Se),Xe=Oe("stop",at=>{ct&&at.preventDefault(),re&&re(at)}),lt=Oe("start",se),wt=Oe("stop",J),Lt=Oe("stop",G),At=Oe("stop",at=>{cS(at.target)||ce(!1),R&&R(at)},!1),zt=Ig(at=>{Me.current||(Me.current=at.currentTarget),cS(at.target)&&(ce(!0),K&&K(at)),U&&U(at)}),vt=()=>{const at=Me.current;return f&&f!=="button"&&!(at.tagName==="A"&&at.href)},pe=Ig(at=>{S&&!at.repeat&&ct&&at.key===" "&&Ue.stop(at,()=>{Ue.start(at)}),at.target===at.currentTarget&&vt()&&at.key===" "&&at.preventDefault(),ne&&ne(at),at.target===at.currentTarget&&vt()&&at.key==="Enter"&&!p&&(at.preventDefault(),z&&z(at))}),ur=Ig(at=>{S&&at.key===" "&&ct&&!at.defaultPrevented&&Ue.stop(at,()=>{Ue.pulsate(at)}),ee&&ee(at),z&&at.target===at.currentTarget&&vt()&&at.key===" "&&!at.defaultPrevented&&z(at)});let sr=f;sr==="button"&&(Ze.href||Ze.to)&&(sr=k);const Tt={};sr==="button"?(Tt.type=$e===void 0?"button":$e,Tt.disabled=p):(!Ze.href&&!Ze.to&&(Tt.role="button"),p&&(Tt["aria-disabled"]=p));const Nt=lS(r,Me),Zt={...n,centerRipple:o,component:f,disabled:p,disableRipple:v,disableTouchRipple:x,focusRipple:S,tabIndex:ve,focusVisible:ct},rr=L9e(Zt);return xt.jsxs(F9e,{as:sr,className:Oo(rr.root,s),ownerState:Zt,onBlur:At,onClick:z,onContextMenu:qe,onFocus:zt,onKeyDown:pe,onKeyUp:ur,onMouseDown:Be,onMouseLeave:Xe,onMouseUp:We,onDragLeave:tt,onTouchEnd:wt,onTouchMove:Lt,onTouchStart:lt,ref:Nt,tabIndex:p?-1:ve,type:$e,...Tt,...Ze,children:[l,be?xt.jsx(O9e,{ref:Qe,center:o,...ge}):null]})});function B9e(e){return typeof e.main=="string"}function z9e(e,t=[]){if(!B9e(e))return!1;for(const r of t)if(!e.hasOwnProperty(r)||typeof e[r]!="string")return!1;return!0}function Rm(e=[]){return([,t])=>t&&z9e(t,e)}function $9e(e){return Vp("MuiTypography",e)}Ed("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const U9e={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},j9e=S9e(),V9e=e=>{const{align:t,gutterBottom:r,noWrap:n,paragraph:i,variant:o,classes:l}=e,s={root:["root",o,e.align!=="inherit"&&`align${di(t)}`,r&&"gutterBottom",n&&"noWrap",i&&"paragraph"]};return Pm(s,$9e,l)},H9e=Xo("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],r.align!=="inherit"&&t[`align${di(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})(gc(({theme:e})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([r,n])=>r!=="inherit"&&n&&typeof n=="object").map(([r,n])=>({props:{variant:r},style:n})),...Object.entries(e.palette).filter(Rm()).map(([r])=>({props:{color:r},style:{color:(e.vars||e).palette[r].main}})),...Object.entries(((t=e.palette)==null?void 0:t.text)||{}).filter(([,r])=>typeof r=="string").map(([r])=>({props:{color:`text${di(r)}`},style:{color:(e.vars||e).palette.text[r]}})),{props:({ownerState:r})=>r.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:r})=>r.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:r})=>r.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:r})=>r.paragraph,style:{marginBottom:16}}]}})),L7={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Xd=me.forwardRef(function(t,r){const{color:n,...i}=Im({props:t,name:"MuiTypography"}),o=!U9e[n],l=j9e({...i,...o&&{color:n}}),{align:s="inherit",className:f,component:p,gutterBottom:v=!1,noWrap:x=!1,paragraph:S=!1,variant:A="body1",variantMapping:k=L7,...R}=l,z={...l,align:s,color:n,className:f,component:p,gutterBottom:v,noWrap:x,paragraph:S,variant:A,variantMapping:k},N=p||(S?"p":k[A]||L7[A])||"span",B=V9e(z);return xt.jsx(H9e,{as:N,ref:r,className:Oo(B.root,f),...R,ownerState:z,style:{...s!=="inherit"&&{"--Typography-textAlign":s},...R.style}})});function Fw(e){return typeof e=="string"}const q9e=me.createContext(void 0);function W9e(){return me.useContext(q9e)}const X9e=Ed("MuiBox",["root"]),K9e=hX(),Z1=c7e({themeId:YW,defaultTheme:K9e,defaultClassName:X9e.root,generateClassName:lX.generate});function G9e(e){return Vp("MuiButton",e)}const I0=Ed("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),Y9e=me.createContext({}),Z9e=me.createContext(void 0),J9e=e=>{const{color:t,disableElevation:r,fullWidth:n,size:i,variant:o,classes:l}=e,s={root:["root",o,`${o}${di(t)}`,`size${di(i)}`,`${o}Size${di(i)}`,`color${di(t)}`,r&&"disableElevation",n&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${di(i)}`],endIcon:["icon","endIcon",`iconSize${di(i)}`]},f=Pm(s,G9e,l);return{...l,...f}},_X=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Q9e=Xo(yX,{shouldForwardProp:e=>U6(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${di(r.color)}`],t[`size${di(r.size)}`],t[`${r.variant}Size${di(r.size)}`],r.color==="inherit"&&t.colorInherit,r.disableElevation&&t.disableElevation,r.fullWidth&&t.fullWidth]}})(gc(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],r=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${I0.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${I0.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${I0.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${I0.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(Rm()).map(([n])=>({props:{color:n},style:{"--variant-textColor":(e.vars||e).palette[n].main,"--variant-outlinedColor":(e.vars||e).palette[n].main,"--variant-outlinedBorder":e.vars?`rgba(${e.vars.palette[n].mainChannel} / 0.5)`:sf(e.palette[n].main,.5),"--variant-containedColor":(e.vars||e).palette[n].contrastText,"--variant-containedBg":(e.vars||e).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[n].dark,"--variant-textBg":e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:sf(e.palette[n].main,e.palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[n].main,"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:sf(e.palette[n].main,e.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:sf(e.palette.text.primary,e.palette.action.hoverOpacity),"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:sf(e.palette.text.primary,e.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${I0.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${I0.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}}]}})),eze=Xo("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.startIcon,t[`iconSize${di(r.size)}`]]}})({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},..._X]}),tze=Xo("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.endIcon,t[`iconSize${di(r.size)}`]]}})({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},..._X]}),F7=me.forwardRef(function(t,r){const n=me.useContext(Y9e),i=me.useContext(Z9e),o=gX(n,t),l=Im({props:o,name:"MuiButton"}),{children:s,color:f="primary",component:p="button",className:v,disabled:x=!1,disableElevation:S=!1,disableFocusRipple:A=!1,endIcon:k,focusVisibleClassName:R,fullWidth:z=!1,size:N="medium",startIcon:B,type:U,variant:K="text",...ne}=l,ee={...l,color:f,component:p,disabled:x,disableElevation:S,disableFocusRipple:A,fullWidth:z,size:N,type:U,variant:K},Q=J9e(ee),re=B&&xt.jsx(eze,{className:Q.startIcon,ownerState:ee,children:B}),Se=k&&xt.jsx(tze,{className:Q.endIcon,ownerState:ee,children:k}),J=i||"";return xt.jsxs(Q9e,{ownerState:ee,className:Oo(n.className,Q.root,v,J),component:p,disabled:x,focusRipple:!A,focusVisibleClassName:Oo(Q.focusVisible,R),ref:r,type:U,...ne,classes:Q,children:[re,s,Se]})});function rze(e){return Vp("PrivateSwitchBase",e)}Ed("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const nze=e=>{const{classes:t,checked:r,disabled:n,edge:i}=e,o={root:["root",r&&"checked",n&&"disabled",i&&`edge${di(i)}`],input:["input"]};return Pm(o,rze,t)},ize=Xo(yX)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),oze=Xo("input",{shouldForwardProp:U6})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),sze=me.forwardRef(function(t,r){const{autoFocus:n,checked:i,checkedIcon:o,className:l,defaultChecked:s,disabled:f,disableFocusRipple:p=!1,edge:v=!1,icon:x,id:S,inputProps:A,inputRef:k,name:R,onBlur:z,onChange:N,onFocus:B,readOnly:U,required:K=!1,tabIndex:ne,type:ee,value:Q,...re}=t,[Se,J]=dX({controlled:i,default:!!s,name:"SwitchBase",state:"checked"}),G=W9e(),se=Ue=>{B&&B(Ue),G&&G.onFocus&&G.onFocus(Ue)},ve=Ue=>{z&&z(Ue),G&&G.onBlur&&G.onBlur(Ue)},ge=Ue=>{if(Ue.nativeEvent.defaultPrevented)return;const Qe=Ue.target.checked;J(Qe),N&&N(Ue,Qe)};let je=f;G&&typeof je>"u"&&(je=G.disabled);const $e=ee==="checkbox"||ee==="radio",Ze={...t,checked:Se,disabled:je,disableFocusRipple:p,edge:v},Me=nze(Ze);return xt.jsxs(ize,{component:"span",className:Oo(Me.root,l),centerRipple:!0,focusRipple:!p,disabled:je,tabIndex:null,role:void 0,onFocus:se,onBlur:ve,ownerState:Ze,ref:r,...re,children:[xt.jsx(oze,{autoFocus:n,checked:i,defaultChecked:s,className:Me.input,disabled:je,id:$e?S:void 0,name:R,onChange:ge,readOnly:U,ref:k,required:K,ownerState:Ze,tabIndex:ne,type:ee,...ee==="checkbox"&&Q===void 0?{}:{value:Q},...A}),Se?o:x]})});function aze(e){return Vp("MuiCircularProgress",e)}Ed("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Kd=44,qP=$p`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,WP=$p`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`,lze=typeof qP!="string"?sR`
        animation: ${qP} 1.4s linear infinite;
      `:null,cze=typeof WP!="string"?sR`
        animation: ${WP} 1.4s ease-in-out infinite;
      `:null,uze=e=>{const{classes:t,variant:r,color:n,disableShrink:i}=e,o={root:["root",r,`color${di(n)}`],svg:["svg"],circle:["circle",`circle${di(r)}`,i&&"circleDisableShrink"]};return Pm(o,aze,t)},hze=Xo("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${di(r.color)}`]]}})(gc(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:lze||{animation:`${qP} 1.4s linear infinite`}},...Object.entries(e.palette).filter(Rm()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),fze=Xo("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),dze=Xo("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${di(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})(gc(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:cze||{animation:`${WP} 1.4s ease-in-out infinite`}}]}))),pze=me.forwardRef(function(t,r){const n=Im({props:t,name:"MuiCircularProgress"}),{className:i,color:o="primary",disableShrink:l=!1,size:s=40,style:f,thickness:p=3.6,value:v=0,variant:x="indeterminate",...S}=n,A={...n,color:o,disableShrink:l,size:s,thickness:p,value:v,variant:x},k=uze(A),R={},z={},N={};if(x==="determinate"){const B=2*Math.PI*((Kd-p)/2);R.strokeDasharray=B.toFixed(3),N["aria-valuenow"]=Math.round(v),R.strokeDashoffset=`${((100-v)/100*B).toFixed(3)}px`,z.transform="rotate(-90deg)"}return xt.jsx(hze,{className:Oo(k.root,i),style:{width:s,height:s,...z,...f},ownerState:A,ref:r,role:"progressbar",...N,...S,children:xt.jsx(fze,{className:k.svg,ownerState:A,viewBox:`${Kd/2} ${Kd/2} ${Kd} ${Kd}`,children:xt.jsx(dze,{className:k.circle,style:R,ownerState:A,cx:Kd,cy:Kd,r:(Kd-p)/2,fill:"none",strokeWidth:p})})})});function gze(e,t,r=(n,i)=>n===i){return e.length===t.length&&e.every((n,i)=>r(n,t[i]))}const mze=2;function vX(e,t){return e-t}function B7(e,t){const{index:r}=e.reduce((n,i,o)=>{const l=Math.abs(t-i);return n===null||l<n.distance||l===n.distance?{distance:l,index:o}:n},null)??{};return r}function Zx(e,t){if(t.current!==void 0&&e.changedTouches){const r=e;for(let n=0;n<r.changedTouches.length;n+=1){const i=r.changedTouches[n];if(i.identifier===t.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function hS(e,t,r){return(e-t)*100/(r-t)}function yze(e,t,r){return(r-t)*e+t}function _ze(e){if(Math.abs(e)<1){const r=e.toExponential().split("e-"),n=r[0].split(".")[1];return(n?n.length:0)+parseInt(r[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function vze(e,t,r){const n=Math.round((e-r)/t)*t+r;return Number(n.toFixed(_ze(t)))}function z7({values:e,newValue:t,index:r}){const n=e.slice();return n[r]=t,n.sort(vX)}function Jx({sliderRef:e,activeIndex:t,setActive:r}){var i,o,l;const n=Dw(e.current);(!((i=e.current)!=null&&i.contains(n.activeElement))||Number((o=n==null?void 0:n.activeElement)==null?void 0:o.getAttribute("data-index"))!==t)&&((l=e.current)==null||l.querySelector(`[type="range"][data-index="${t}"]`).focus()),r&&r(t)}function Qx(e,t){return typeof e=="number"&&typeof t=="number"?e===t:typeof e=="object"&&typeof t=="object"?gze(e,t):!1}const bze={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},xze=e=>e;let ew;function $7(){return ew===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?ew=CSS.supports("touch-action","none"):ew=!0),ew}function wze(e){const{"aria-labelledby":t,defaultValue:r,disabled:n=!1,disableSwap:i=!1,isRtl:o=!1,marks:l=!1,max:s=100,min:f=0,name:p,onChange:v,onChangeCommitted:x,orientation:S="horizontal",rootRef:A,scale:k=xze,step:R=1,shiftStep:z=10,tabIndex:N,value:B}=e,U=me.useRef(void 0),[K,ne]=me.useState(-1),[ee,Q]=me.useState(-1),[re,Se]=me.useState(!1),J=me.useRef(0),[G,se]=dX({controlled:B,default:r??f,name:"Slider"}),ve=v&&((at,It,Vt)=>{const lr=at.nativeEvent||at,Pr=new lr.constructor(lr.type,lr);Object.defineProperty(Pr,"target",{writable:!0,value:{value:It,name:p}}),v(Pr,It,Vt)}),ge=Array.isArray(G);let je=ge?G.slice().sort(vX):[G];je=je.map(at=>at==null?f:Y1(at,f,s));const $e=l===!0&&R!==null?[...Array(Math.floor((s-f)/R)+1)].map((at,It)=>({value:f+R*It})):l||[],Ze=$e.map(at=>at.value),[Me,Ue]=me.useState(-1),Qe=me.useRef(null),ct=lS(A,Qe),ce=at=>It=>{var lr;const Vt=Number(It.currentTarget.getAttribute("data-index"));cS(It.target)&&Ue(Vt),Q(Vt),(lr=at==null?void 0:at.onFocus)==null||lr.call(at,It)},be=at=>It=>{var Vt;cS(It.target)||Ue(-1),Q(-1),(Vt=at==null?void 0:at.onBlur)==null||Vt.call(at,It)},Oe=(at,It)=>{const Vt=Number(at.currentTarget.getAttribute("data-index")),lr=je[Vt],Pr=Ze.indexOf(lr);let _t=It;if($e&&R==null){const Ut=Ze[Ze.length-1];_t>Ut?_t=Ut:_t<Ze[0]?_t=Ze[0]:_t=_t<lr?Ze[Pr-1]:Ze[Pr+1]}if(_t=Y1(_t,f,s),ge){i&&(_t=Y1(_t,je[Vt-1]||-1/0,je[Vt+1]||1/0));const Ut=_t;_t=z7({values:je,newValue:_t,index:Vt});let _r=Vt;i||(_r=_t.indexOf(Ut)),Jx({sliderRef:Qe,activeIndex:_r})}se(_t),Ue(Vt),ve&&!Qx(_t,G)&&ve(at,_t,Vt),x&&x(at,_t)},Be=at=>It=>{var Vt;if(R!==null){const lr=Number(It.currentTarget.getAttribute("data-index")),Pr=je[lr];let _t=null;(It.key==="ArrowLeft"||It.key==="ArrowDown")&&It.shiftKey||It.key==="PageDown"?_t=Math.max(Pr-z,f):((It.key==="ArrowRight"||It.key==="ArrowUp")&&It.shiftKey||It.key==="PageUp")&&(_t=Math.min(Pr+z,s)),_t!==null&&(Oe(It,_t),It.preventDefault())}(Vt=at==null?void 0:at.onKeyDown)==null||Vt.call(at,It)};fX(()=>{var at;n&&Qe.current.contains(document.activeElement)&&((at=document.activeElement)==null||at.blur())},[n]),n&&K!==-1&&ne(-1),n&&Me!==-1&&Ue(-1);const qe=at=>It=>{var Vt;(Vt=at.onChange)==null||Vt.call(at,It),Oe(It,It.target.valueAsNumber)},tt=me.useRef(void 0);let We=S;o&&S==="horizontal"&&(We+="-reverse");const Xe=({finger:at,move:It=!1})=>{const{current:Vt}=Qe,{width:lr,height:Pr,bottom:_t,left:Ut}=Vt.getBoundingClientRect();let _r;We.startsWith("vertical")?_r=(_t-at.y)/Pr:_r=(at.x-Ut)/lr,We.includes("-reverse")&&(_r=1-_r);let Kt;if(Kt=yze(_r,f,s),R)Kt=vze(Kt,R,f);else{const Dt=B7(Ze,Kt);Kt=Ze[Dt]}Kt=Y1(Kt,f,s);let fn=0;if(ge){It?fn=tt.current:fn=B7(je,Kt),i&&(Kt=Y1(Kt,je[fn-1]||-1/0,je[fn+1]||1/0));const Dt=Kt;Kt=z7({values:je,newValue:Kt,index:fn}),i&&It||(fn=Kt.indexOf(Dt),tt.current=fn)}return{newValue:Kt,activeIndex:fn}},lt=Ig(at=>{const It=Zx(at,U);if(!It)return;if(J.current+=1,at.type==="mousemove"&&at.buttons===0){wt(at);return}const{newValue:Vt,activeIndex:lr}=Xe({finger:It,move:!0});Jx({sliderRef:Qe,activeIndex:lr,setActive:ne}),se(Vt),!re&&J.current>mze&&Se(!0),ve&&!Qx(Vt,G)&&ve(at,Vt,lr)}),wt=Ig(at=>{const It=Zx(at,U);if(Se(!1),!It)return;const{newValue:Vt}=Xe({finger:It,move:!0});ne(-1),at.type==="touchend"&&Q(-1),x&&x(at,Vt),U.current=void 0,At()}),Lt=Ig(at=>{if(n)return;$7()||at.preventDefault();const It=at.changedTouches[0];It!=null&&(U.current=It.identifier);const Vt=Zx(at,U);if(Vt!==!1){const{newValue:Pr,activeIndex:_t}=Xe({finger:Vt});Jx({sliderRef:Qe,activeIndex:_t,setActive:ne}),se(Pr),ve&&!Qx(Pr,G)&&ve(at,Pr,_t)}J.current=0;const lr=Dw(Qe.current);lr.addEventListener("touchmove",lt,{passive:!0}),lr.addEventListener("touchend",wt,{passive:!0})}),At=me.useCallback(()=>{const at=Dw(Qe.current);at.removeEventListener("mousemove",lt),at.removeEventListener("mouseup",wt),at.removeEventListener("touchmove",lt),at.removeEventListener("touchend",wt)},[wt,lt]);me.useEffect(()=>{const{current:at}=Qe;return at.addEventListener("touchstart",Lt,{passive:$7()}),()=>{at.removeEventListener("touchstart",Lt),At()}},[At,Lt]),me.useEffect(()=>{n&&At()},[n,At]);const zt=at=>It=>{var Pr;if((Pr=at.onMouseDown)==null||Pr.call(at,It),n||It.defaultPrevented||It.button!==0)return;It.preventDefault();const Vt=Zx(It,U);if(Vt!==!1){const{newValue:_t,activeIndex:Ut}=Xe({finger:Vt});Jx({sliderRef:Qe,activeIndex:Ut,setActive:ne}),se(_t),ve&&!Qx(_t,G)&&ve(It,_t,Ut)}J.current=0;const lr=Dw(Qe.current);lr.addEventListener("mousemove",lt,{passive:!0}),lr.addEventListener("mouseup",wt)},vt=hS(ge?je[0]:f,f,s),pe=hS(je[je.length-1],f,s)-vt,ur=(at={})=>{const It=Lw(at),Vt={onMouseDown:zt(It||{})},lr={...It,...Vt};return{...at,ref:ct,...lr}},sr=at=>It=>{var lr;(lr=at.onMouseOver)==null||lr.call(at,It);const Vt=Number(It.currentTarget.getAttribute("data-index"));Q(Vt)},Tt=at=>It=>{var Vt;(Vt=at.onMouseLeave)==null||Vt.call(at,It),Q(-1)};return{active:K,axis:We,axisProps:bze,dragging:re,focusedThumbIndex:Me,getHiddenInputProps:(at={})=>{const It=Lw(at),Vt={onChange:qe(It||{}),onFocus:ce(It||{}),onBlur:be(It||{}),onKeyDown:Be(It||{})},lr={...It,...Vt};return{tabIndex:N,"aria-labelledby":t,"aria-orientation":S,"aria-valuemax":k(s),"aria-valuemin":k(f),name:p,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":e.step??void 0,disabled:n,...at,...lr,style:{..._9e,direction:o?"rtl":"ltr",width:"100%",height:"100%"}}},getRootProps:ur,getThumbProps:(at={})=>{const It=Lw(at),Vt={onMouseOver:sr(It||{}),onMouseLeave:Tt(It||{})};return{...at,...It,...Vt}},marks:$e,open:ee,range:ge,rootRef:ct,trackLeap:pe,trackOffset:vt,values:je,getThumbStyle:at=>({pointerEvents:K!==-1&&K!==at?"none":void 0})}}const Sze=e=>!e||!Fw(e);function Aze(e){return Vp("MuiSlider",e)}const Eu=Ed("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Eze=e=>{const{open:t}=e;return{offset:Oo(t&&Eu.valueLabelOpen),circle:Eu.valueLabelCircle,label:Eu.valueLabelLabel}};function Tze(e){const{children:t,className:r,value:n}=e,i=Eze(e);return t?me.cloneElement(t,{className:Oo(t.props.className)},xt.jsxs(me.Fragment,{children:[t.props.children,xt.jsx("span",{className:Oo(i.offset,r),"aria-hidden":!0,children:xt.jsx("span",{className:i.circle,children:xt.jsx("span",{className:i.label,children:n})})})]})):null}function U7(e){return e}const Cze=Xo("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`color${di(r.color)}`],r.size!=="medium"&&t[`size${di(r.size)}`],r.marked&&t.marked,r.orientation==="vertical"&&t.vertical,r.track==="inverted"&&t.trackInverted,r.track===!1&&t.trackFalse]}})(gc(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Eu.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${Eu.dragging}`]:{[`& .${Eu.thumb}, & .${Eu.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter(Rm()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),Pze=Xo("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Ize=Xo("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})(gc(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter(Rm()).map(([t])=>({props:{color:t,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${t}Track`],borderColor:e.vars.palette.Slider[`${t}Track`]}:{backgroundColor:P_(e.palette[t].main,.62),borderColor:P_(e.palette[t].main,.62),...e.applyStyles("dark",{backgroundColor:C_(e.palette[t].main,.5)}),...e.applyStyles("dark",{borderColor:C_(e.palette[t].main,.5)})}}}))]}))),Rze=Xo("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.thumb,t[`thumbColor${di(r.color)}`],r.size!=="medium"&&t[`thumbSize${di(r.size)}`]]}})(gc(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Eu.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter(Rm()).map(([t])=>({props:{color:t},style:{[`&:hover, &.${Eu.focusVisible}`]:{...e.vars?{boxShadow:`0px 0px 0px 8px rgba(${e.vars.palette[t].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${sf(e.palette[t].main,.16)}`},"@media (hover: none)":{boxShadow:"none"}},[`&.${Eu.active}`]:{...e.vars?{boxShadow:`0px 0px 0px 14px rgba(${e.vars.palette[t].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${sf(e.palette[t].main,.16)}`}}}}))]}))),kze=Xo(Tze,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})(gc(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Eu.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Eu.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),Mze=Xo("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>$6(e)&&e!=="markActive",overridesResolver:(e,t)=>{const{markActive:r}=e;return[t.mark,r&&t.markActive]}})(gc(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),Oze=Xo("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>$6(e)&&e!=="markLabelActive",overridesResolver:(e,t)=>t.markLabel})(gc(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),Nze=e=>{const{disabled:t,dragging:r,marked:n,orientation:i,track:o,classes:l,color:s,size:f}=e,p={root:["root",t&&"disabled",r&&"dragging",n&&"marked",i==="vertical"&&"vertical",o==="inverted"&&"trackInverted",o===!1&&"trackFalse",s&&`color${di(s)}`,f&&`size${di(f)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",f&&`thumbSize${di(f)}`,s&&`thumbColor${di(s)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return Pm(p,Aze,l)},Dze=({children:e})=>e,J1=me.forwardRef(function(t,r){const n=Im({props:t,name:"MuiSlider"}),i=A7e(),{"aria-label":o,"aria-valuetext":l,"aria-labelledby":s,component:f="span",components:p={},componentsProps:v={},color:x="primary",classes:S,className:A,disableSwap:k=!1,disabled:R=!1,getAriaLabel:z,getAriaValueText:N,marks:B=!1,max:U=100,min:K=0,name:ne,onChange:ee,onChangeCommitted:Q,orientation:re="horizontal",shiftStep:Se=10,size:J="medium",step:G=1,scale:se=U7,slotProps:ve,slots:ge,tabIndex:je,track:$e="normal",value:Ze,valueLabelDisplay:Me="off",valueLabelFormat:Ue=U7,...Qe}=n,ct={...n,isRtl:i,max:U,min:K,classes:S,disabled:R,disableSwap:k,orientation:re,marks:B,color:x,size:J,step:G,shiftStep:Se,scale:se,track:$e,valueLabelDisplay:Me,valueLabelFormat:Ue},{axisProps:ce,getRootProps:be,getHiddenInputProps:Oe,getThumbProps:Be,open:qe,active:tt,axis:We,focusedThumbIndex:Xe,range:lt,dragging:wt,marks:Lt,values:At,trackOffset:zt,trackLeap:vt,getThumbStyle:pe}=wze({...ct,rootRef:r});ct.marked=Lt.length>0&&Lt.some(Yr=>Yr.label),ct.dragging=wt,ct.focusedThumbIndex=Xe;const ur=Nze(ct),sr=(ge==null?void 0:ge.root)??p.Root??Cze,Tt=(ge==null?void 0:ge.rail)??p.Rail??Pze,Nt=(ge==null?void 0:ge.track)??p.Track??Ize,Zt=(ge==null?void 0:ge.thumb)??p.Thumb??Rze,rr=(ge==null?void 0:ge.valueLabel)??p.ValueLabel??kze,at=(ge==null?void 0:ge.mark)??p.Mark??Mze,It=(ge==null?void 0:ge.markLabel)??p.MarkLabel??Oze,Vt=(ge==null?void 0:ge.input)??p.Input??"input",lr=(ve==null?void 0:ve.root)??v.root,Pr=(ve==null?void 0:ve.rail)??v.rail,_t=(ve==null?void 0:ve.track)??v.track,Ut=(ve==null?void 0:ve.thumb)??v.thumb,_r=(ve==null?void 0:ve.valueLabel)??v.valueLabel,Kt=(ve==null?void 0:ve.mark)??v.mark,fn=(ve==null?void 0:ve.markLabel)??v.markLabel,Dt=(ve==null?void 0:ve.input)??v.input,Br=Wd({elementType:sr,getSlotProps:be,externalSlotProps:lr,externalForwardedProps:Qe,additionalProps:{...Sze(sr)&&{as:f}},ownerState:{...ct,...lr==null?void 0:lr.ownerState},className:[ur.root,A]}),dr=Wd({elementType:Tt,externalSlotProps:Pr,ownerState:ct,className:ur.rail}),nn=Wd({elementType:Nt,externalSlotProps:_t,additionalProps:{style:{...ce[We].offset(zt),...ce[We].leap(vt)}},ownerState:{...ct,..._t==null?void 0:_t.ownerState},className:ur.track}),Kn=Wd({elementType:Zt,getSlotProps:Be,externalSlotProps:Ut,ownerState:{...ct,...Ut==null?void 0:Ut.ownerState},className:ur.thumb}),hr=Wd({elementType:rr,externalSlotProps:_r,ownerState:{...ct,..._r==null?void 0:_r.ownerState},className:ur.valueLabel}),Gn=Wd({elementType:at,externalSlotProps:Kt,ownerState:ct,className:ur.mark}),Nn=Wd({elementType:It,externalSlotProps:fn,ownerState:ct,className:ur.markLabel}),gi=Wd({elementType:Vt,getSlotProps:Oe,externalSlotProps:Dt,ownerState:ct});return xt.jsxs(sr,{...Br,children:[xt.jsx(Tt,{...dr}),xt.jsx(Nt,{...nn}),Lt.filter(Yr=>Yr.value>=K&&Yr.value<=U).map((Yr,Ne)=>{const ae=hS(Yr.value,K,U),ue=ce[We].offset(ae);let Ee;return $e===!1?Ee=At.includes(Yr.value):Ee=$e==="normal"&&(lt?Yr.value>=At[0]&&Yr.value<=At[At.length-1]:Yr.value<=At[0])||$e==="inverted"&&(lt?Yr.value<=At[0]||Yr.value>=At[At.length-1]:Yr.value>=At[0]),xt.jsxs(me.Fragment,{children:[xt.jsx(at,{"data-index":Ne,...Gn,...!Fw(at)&&{markActive:Ee},style:{...ue,...Gn.style},className:Oo(Gn.className,Ee&&ur.markActive)}),Yr.label!=null?xt.jsx(It,{"aria-hidden":!0,"data-index":Ne,...Nn,...!Fw(It)&&{markLabelActive:Ee},style:{...ue,...Nn.style},className:Oo(ur.markLabel,Nn.className,Ee&&ur.markLabelActive),children:Yr.label}):null]},Ne)}),At.map((Yr,Ne)=>{const ae=hS(Yr,K,U),ue=ce[We].offset(ae),Ee=Me==="off"?Dze:rr;return xt.jsx(Ee,{...!Fw(Ee)&&{valueLabelFormat:Ue,valueLabelDisplay:Me,value:typeof Ue=="function"?Ue(se(Yr),Ne):Ue,index:Ne,open:qe===Ne||tt===Ne||Me==="on",disabled:R},...hr,children:xt.jsx(Zt,{"data-index":Ne,...Kn,className:Oo(ur.thumb,Kn.className,tt===Ne&&ur.active,Xe===Ne&&ur.focusVisible),style:{...ue,...pe(Ne),...Kn.style},children:xt.jsx(Vt,{"data-index":Ne,"aria-label":z?z(Ne):o,"aria-valuenow":se(Yr),"aria-labelledby":s,"aria-valuetext":N?N(se(Yr),Ne):l,value:At[Ne],...gi})})},Ne)})]})});function Lze(e){return Vp("MuiSwitch",e)}const Pl=Ed("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Fze=e=>{const{classes:t,edge:r,size:n,color:i,checked:o,disabled:l}=e,s={root:["root",r&&`edge${di(r)}`,`size${di(n)}`],switchBase:["switchBase",`color${di(i)}`,o&&"checked",l&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},f=Pm(s,Lze,t);return{...t,...f}},Bze=Xo("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.edge&&t[`edge${di(r.edge)}`],t[`size${di(r.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${Pl.thumb}`]:{width:16,height:16},[`& .${Pl.switchBase}`]:{padding:4,[`&.${Pl.checked}`]:{transform:"translateX(16px)"}}}}]}),zze=Xo(sze,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.switchBase,{[`& .${Pl.input}`]:t.input},r.color!=="default"&&t[`color${di(r.color)}`]]}})(gc(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${Pl.checked}`]:{transform:"translateX(20px)"},[`&.${Pl.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${Pl.checked} + .${Pl.track}`]:{opacity:.5},[`&.${Pl.disabled} + .${Pl.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${Pl.input}`]:{left:"-100%",width:"300%"}})),gc(({theme:e})=>({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:sf(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter(Rm(["light"])).map(([t])=>({props:{color:t},style:{[`&.${Pl.checked}`]:{color:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:sf(e.palette[t].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Pl.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t}DisabledColor`]:`${e.palette.mode==="light"?P_(e.palette[t].main,.62):C_(e.palette[t].main,.55)}`}},[`&.${Pl.checked} + .${Pl.track}`]:{backgroundColor:(e.vars||e).palette[t].main}}}))]}))),$ze=Xo("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(gc(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`}))),Uze=Xo("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(gc(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),jze=me.forwardRef(function(t,r){const n=Im({props:t,name:"MuiSwitch"}),{className:i,color:o="primary",edge:l=!1,size:s="medium",sx:f,...p}=n,v={...n,color:o,edge:l,size:s},x=Fze(v),S=xt.jsx(Uze,{className:x.thumb,ownerState:v});return xt.jsxs(Bze,{className:Oo(x.root,i),sx:f,ownerState:v,children:[xt.jsx(zze,{type:"checkbox",icon:S,checkedIcon:S,ref:r,ownerState:v,...p,classes:{...x,root:x.switchBase}}),xt.jsx($ze,{className:x.track,ownerState:v})]})});function Vze(e){const[t,r]=me.useState(2),[n,i]=me.useState(!0),[o,l]=me.useState(1.7),[s,f]=me.useState(255),[p,v]=me.useState(255),[x,S]=me.useState(255),[A,k]=me.useState(!1),R=()=>{e.setPointSize(t),e.setLight(n),e.setIntensity(o),e.setRed(s),e.setGreen(p),e.setBlue(x)};return xt.jsxs(xt.Fragment,{children:[xt.jsx(F4e,{buttons:xt.jsx(F7,{variant:A?"outlined":"contained",onClick:()=>k(!0),children:"PointCloud settings"})}),xt.jsx(S4e,{open:A,setOpen:k,children:xt.jsxs(Z1,{sx:{marginTop:"20px"},children:[xt.jsx(Xd,{variant:"h4",children:"PointCloud Settings"}),xt.jsx("hr",{width:"99%"}),xt.jsx(Xd,{variant:"h6",children:"Point Size"}),xt.jsx(J1,{defaultValue:2,onChange:z=>{r(z.target.value)},"aria-label":"small",valueLabelDisplay:"auto",max:10,min:1}),xt.jsx(Xd,{variant:"h6",children:"Light"}),xt.jsx(jze,{defaultChecked:!0,onChange:z=>{i(z.target.checked)}}),xt.jsx(Xd,{variant:"h6",children:"Light intensity"}),xt.jsx(J1,{defaultValue:1.7,onChange:z=>{l(z.target.value)},"aria-label":"small",valueLabelDisplay:"auto",min:0,max:3,step:.1}),xt.jsx(Xd,{variant:"h6",children:"Color"}),xt.jsxs(Z1,{sx:{display:"flex"},children:[xt.jsx(Xd,{variant:"body1",sx:{width:"10px"},children:"r:"}),xt.jsx(J1,{sx:{left:"5%",width:"92%"},onChange:z=>{f(z.target.value)},defaultValue:255,"aria-label":"small",valueLabelDisplay:"auto",min:0,max:255,step:1})]}),xt.jsxs(Z1,{sx:{display:"flex"},children:[xt.jsx(Xd,{variant:"body1",sx:{width:"10px"},children:"g:"}),xt.jsx(J1,{sx:{left:"5%",width:"92%"},defaultValue:255,onChange:z=>{v(z.target.value)},"aria-label":"small",valueLabelDisplay:"auto",min:0,max:255,step:1})]}),xt.jsxs(Z1,{sx:{display:"flex"},children:[xt.jsx(Xd,{variant:"body1",sx:{width:"10px"},children:"b:"}),xt.jsx(J1,{sx:{left:"5%",width:"92%"},onChange:z=>{S(z.target.value)},defaultValue:255,"aria-label":"small",valueLabelDisplay:"auto",min:0,max:255,step:1})]}),xt.jsx(Z1,{sx:{display:"flex",justifyContent:"right",marginTop:"25px"},children:xt.jsx(F7,{variant:"contained",disabled:e.loading,sx:{color:"white"},onClick:()=>R(),children:"Apply"})})]})})]})}var Cb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},cm=typeof window>"u"||"Deno"in globalThis;function pu(){}function Hze(e,t){return typeof e=="function"?e(t):e}function XP(e){return typeof e=="number"&&e>=0&&e!==1/0}function bX(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Vy(e,t){return typeof e=="function"?e(t):e}function rh(e,t){return typeof e=="function"?e(t):e}function j7(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:o,queryKey:l,stale:s}=e;if(l){if(n){if(t.queryHash!==V6(l,t.options))return!1}else if(!$2(t.queryKey,l))return!1}if(r!=="all"){const f=t.isActive();if(r==="active"&&!f||r==="inactive"&&f)return!1}return!(typeof s=="boolean"&&t.isStale()!==s||i&&i!==t.state.fetchStatus||o&&!o(t))}function V7(e,t){const{exact:r,status:n,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(z2(t.options.mutationKey)!==z2(o))return!1}else if(!$2(t.options.mutationKey,o))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function V6(e,t){return((t==null?void 0:t.queryKeyHashFn)||z2)(e)}function z2(e){return JSON.stringify(e,(t,r)=>GP(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function $2(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!$2(e[r],t[r])):!1}function xX(e,t){if(e===t)return e;const r=H7(e)&&H7(t);if(r||GP(e)&&GP(t)){const n=r?e:Object.keys(e),i=n.length,o=r?t:Object.keys(t),l=o.length,s=r?[]:{};let f=0;for(let p=0;p<l;p++){const v=r?p:o[p];(!r&&n.includes(v)||r)&&e[v]===void 0&&t[v]===void 0?(s[v]=void 0,f++):(s[v]=xX(e[v],t[v]),s[v]===e[v]&&e[v]!==void 0&&f++)}return i===l&&f===i?e:s}return t}function KP(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function H7(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function GP(e){if(!q7(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!q7(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function q7(e){return Object.prototype.toString.call(e)==="[object Object]"}function qze(e){return new Promise(t=>{setTimeout(t,e)})}function YP(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?xX(e,t):t}function Wze(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function Xze(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var H6=Symbol();function wX(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===H6?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Rg,sp,Hy,Q7,Kze=(Q7=class extends Cb{constructor(){super();Cn(this,Rg);Cn(this,sp);Cn(this,Hy);jr(this,Hy,t=>{if(!cm&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){dt(this,sp)||this.setEventListener(dt(this,Hy))}onUnsubscribe(){var t;this.hasListeners()||((t=dt(this,sp))==null||t.call(this),jr(this,sp,void 0))}setEventListener(t){var r;jr(this,Hy,t),(r=dt(this,sp))==null||r.call(this),jr(this,sp,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){dt(this,Rg)!==t&&(jr(this,Rg,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof dt(this,Rg)=="boolean"?dt(this,Rg):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Rg=new WeakMap,sp=new WeakMap,Hy=new WeakMap,Q7),q6=new Kze,qy,ap,Wy,e9,Gze=(e9=class extends Cb{constructor(){super();Cn(this,qy,!0);Cn(this,ap);Cn(this,Wy);jr(this,Wy,t=>{if(!cm&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){dt(this,ap)||this.setEventListener(dt(this,Wy))}onUnsubscribe(){var t;this.hasListeners()||((t=dt(this,ap))==null||t.call(this),jr(this,ap,void 0))}setEventListener(t){var r;jr(this,Wy,t),(r=dt(this,ap))==null||r.call(this),jr(this,ap,t(this.setOnline.bind(this)))}setOnline(t){dt(this,qy)!==t&&(jr(this,qy,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return dt(this,qy)}},qy=new WeakMap,ap=new WeakMap,Wy=new WeakMap,e9),fS=new Gze;function ZP(){let e,t;const r=new Promise((i,o)=>{e=i,t=o});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}function Yze(e){return Math.min(1e3*2**e,3e4)}function SX(e){return(e??"online")==="online"?fS.isOnline():!0}var AX=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function iC(e){return e instanceof AX}function EX(e){let t=!1,r=0,n=!1,i;const o=ZP(),l=R=>{var z;n||(S(new AX(R)),(z=e.abort)==null||z.call(e))},s=()=>{t=!0},f=()=>{t=!1},p=()=>q6.isFocused()&&(e.networkMode==="always"||fS.isOnline())&&e.canRun(),v=()=>SX(e.networkMode)&&e.canRun(),x=R=>{var z;n||(n=!0,(z=e.onSuccess)==null||z.call(e,R),i==null||i(),o.resolve(R))},S=R=>{var z;n||(n=!0,(z=e.onError)==null||z.call(e,R),i==null||i(),o.reject(R))},A=()=>new Promise(R=>{var z;i=N=>{(n||p())&&R(N)},(z=e.onPause)==null||z.call(e)}).then(()=>{var R;i=void 0,n||(R=e.onContinue)==null||R.call(e)}),k=()=>{if(n)return;let R;const z=r===0?e.initialPromise:void 0;try{R=z??e.fn()}catch(N){R=Promise.reject(N)}Promise.resolve(R).then(x).catch(N=>{var ee;if(n)return;const B=e.retry??(cm?0:3),U=e.retryDelay??Yze,K=typeof U=="function"?U(r,N):U,ne=B===!0||typeof B=="number"&&r<B||typeof B=="function"&&B(r,N);if(t||!ne){S(N);return}r++,(ee=e.onFail)==null||ee.call(e,r,N),qze(K).then(()=>p()?void 0:A()).then(()=>{t?S(N):k()})})};return{promise:o,cancel:l,continue:()=>(i==null||i(),o),cancelRetry:s,continueRetry:f,canStart:v,start:()=>(v()?k():A().then(k),o)}}function Zze(){let e=[],t=0,r=s=>{s()},n=s=>{s()},i=s=>setTimeout(s,0);const o=s=>{t?e.push(s):i(()=>{r(s)})},l=()=>{const s=e;e=[],s.length&&i(()=>{n(()=>{s.forEach(f=>{r(f)})})})};return{batch:s=>{let f;t++;try{f=s()}finally{t--,t||l()}return f},batchCalls:s=>(...f)=>{o(()=>{s(...f)})},schedule:o,setNotifyFunction:s=>{r=s},setBatchNotifyFunction:s=>{n=s},setScheduler:s=>{i=s}}}var La=Zze(),kg,t9,TX=(t9=class{constructor(){Cn(this,kg)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),XP(this.gcTime)&&jr(this,kg,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(cm?1/0:5*60*1e3))}clearGcTimeout(){dt(this,kg)&&(clearTimeout(dt(this,kg)),jr(this,kg,void 0))}},kg=new WeakMap,t9),Xy,Ky,du,pl,U2,Mg,Qu,Kf,r9,Jze=(r9=class extends TX{constructor(t){super();Cn(this,Qu);Cn(this,Xy);Cn(this,Ky);Cn(this,du);Cn(this,pl);Cn(this,U2);Cn(this,Mg);jr(this,Mg,!1),jr(this,U2,t.defaultOptions),this.setOptions(t.options),this.observers=[],jr(this,du,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,jr(this,Xy,Qze(this.options)),this.state=t.state??dt(this,Xy),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=dt(this,pl))==null?void 0:t.promise}setOptions(t){this.options={...dt(this,U2),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&dt(this,du).remove(this)}setData(t,r){const n=YP(this.state.data,t,this.options);return ni(this,Qu,Kf).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){ni(this,Qu,Kf).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,i;const r=(n=dt(this,pl))==null?void 0:n.promise;return(i=dt(this,pl))==null||i.cancel(t),r?r.then(pu).catch(pu):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(dt(this,Xy))}isActive(){return this.observers.some(t=>rh(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===H6||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!bX(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=dt(this,pl))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=dt(this,pl))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),dt(this,du).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(dt(this,pl)&&(dt(this,Mg)?dt(this,pl).cancel({revert:!0}):dt(this,pl).cancelRetry()),this.scheduleGc()),dt(this,du).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ni(this,Qu,Kf).call(this,{type:"invalidate"})}fetch(t,r){var f,p,v;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(dt(this,pl))return dt(this,pl).continueRetry(),dt(this,pl).promise}if(t&&this.setOptions(t),!this.options.queryFn){const x=this.observers.find(S=>S.options.queryFn);x&&this.setOptions(x.options)}const n=new AbortController,i=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(jr(this,Mg,!0),n.signal)})},o=()=>{const x=wX(this.options,r),S={queryKey:this.queryKey,meta:this.meta};return i(S),jr(this,Mg,!1),this.options.persister?this.options.persister(x,S,this):x(S)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(l),(f=this.options.behavior)==null||f.onFetch(l,this),jr(this,Ky,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=l.fetchOptions)==null?void 0:p.meta))&&ni(this,Qu,Kf).call(this,{type:"fetch",meta:(v=l.fetchOptions)==null?void 0:v.meta});const s=x=>{var S,A,k,R;iC(x)&&x.silent||ni(this,Qu,Kf).call(this,{type:"error",error:x}),iC(x)||((A=(S=dt(this,du).config).onError)==null||A.call(S,x,this),(R=(k=dt(this,du).config).onSettled)==null||R.call(k,this.state.data,x,this)),this.scheduleGc()};return jr(this,pl,EX({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:x=>{var S,A,k,R;if(x===void 0){s(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(x)}catch(z){s(z);return}(A=(S=dt(this,du).config).onSuccess)==null||A.call(S,x,this),(R=(k=dt(this,du).config).onSettled)==null||R.call(k,x,this.state.error,this),this.scheduleGc()},onError:s,onFail:(x,S)=>{ni(this,Qu,Kf).call(this,{type:"failed",failureCount:x,error:S})},onPause:()=>{ni(this,Qu,Kf).call(this,{type:"pause"})},onContinue:()=>{ni(this,Qu,Kf).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),dt(this,pl).start()}},Xy=new WeakMap,Ky=new WeakMap,du=new WeakMap,pl=new WeakMap,U2=new WeakMap,Mg=new WeakMap,Qu=new WeakSet,Kf=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...CX(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return iC(i)&&i.revert&&dt(this,Ky)?{...dt(this,Ky),fetchStatus:"idle"}:{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),La.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),dt(this,du).notify({query:this,type:"updated",action:t})})},r9);function CX(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:SX(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Qze(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Yh,n9,e$e=(n9=class extends Cb{constructor(t={}){super();Cn(this,Yh);this.config=t,jr(this,Yh,new Map)}build(t,r,n){const i=r.queryKey,o=r.queryHash??V6(i,r);let l=this.get(o);return l||(l=new Jze({cache:this,queryKey:i,queryHash:o,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(l)),l}add(t){dt(this,Yh).has(t.queryHash)||(dt(this,Yh).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=dt(this,Yh).get(t.queryHash);r&&(t.destroy(),r===t&&dt(this,Yh).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){La.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return dt(this,Yh).get(t)}getAll(){return[...dt(this,Yh).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>j7(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>j7(t,n)):r}notify(t){La.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){La.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){La.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Yh=new WeakMap,n9),Zh,Il,Og,Jh,Gd,i9,t$e=(i9=class extends TX{constructor(t){super();Cn(this,Jh);Cn(this,Zh);Cn(this,Il);Cn(this,Og);this.mutationId=t.mutationId,jr(this,Il,t.mutationCache),jr(this,Zh,[]),this.state=t.state||r$e(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){dt(this,Zh).includes(t)||(dt(this,Zh).push(t),this.clearGcTimeout(),dt(this,Il).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){jr(this,Zh,dt(this,Zh).filter(r=>r!==t)),this.scheduleGc(),dt(this,Il).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){dt(this,Zh).length||(this.state.status==="pending"?this.scheduleGc():dt(this,Il).remove(this))}continue(){var t;return((t=dt(this,Og))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,l,s,f,p,v,x,S,A,k,R,z,N,B,U,K,ne,ee,Q;jr(this,Og,EX({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(re,Se)=>{ni(this,Jh,Gd).call(this,{type:"failed",failureCount:re,error:Se})},onPause:()=>{ni(this,Jh,Gd).call(this,{type:"pause"})},onContinue:()=>{ni(this,Jh,Gd).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>dt(this,Il).canRun(this)}));const r=this.state.status==="pending",n=!dt(this,Og).canStart();try{if(!r){ni(this,Jh,Gd).call(this,{type:"pending",variables:t,isPaused:n}),await((o=(i=dt(this,Il).config).onMutate)==null?void 0:o.call(i,t,this));const Se=await((s=(l=this.options).onMutate)==null?void 0:s.call(l,t));Se!==this.state.context&&ni(this,Jh,Gd).call(this,{type:"pending",context:Se,variables:t,isPaused:n})}const re=await dt(this,Og).start();return await((p=(f=dt(this,Il).config).onSuccess)==null?void 0:p.call(f,re,t,this.state.context,this)),await((x=(v=this.options).onSuccess)==null?void 0:x.call(v,re,t,this.state.context)),await((A=(S=dt(this,Il).config).onSettled)==null?void 0:A.call(S,re,null,this.state.variables,this.state.context,this)),await((R=(k=this.options).onSettled)==null?void 0:R.call(k,re,null,t,this.state.context)),ni(this,Jh,Gd).call(this,{type:"success",data:re}),re}catch(re){try{throw await((N=(z=dt(this,Il).config).onError)==null?void 0:N.call(z,re,t,this.state.context,this)),await((U=(B=this.options).onError)==null?void 0:U.call(B,re,t,this.state.context)),await((ne=(K=dt(this,Il).config).onSettled)==null?void 0:ne.call(K,void 0,re,this.state.variables,this.state.context,this)),await((Q=(ee=this.options).onSettled)==null?void 0:Q.call(ee,void 0,re,t,this.state.context)),re}finally{ni(this,Jh,Gd).call(this,{type:"error",error:re})}}finally{dt(this,Il).runNext(this)}}},Zh=new WeakMap,Il=new WeakMap,Og=new WeakMap,Jh=new WeakSet,Gd=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),La.batch(()=>{dt(this,Zh).forEach(n=>{n.onMutationUpdate(t)}),dt(this,Il).notify({mutation:this,type:"updated",action:t})})},i9);function r$e(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fc,j2,o9,n$e=(o9=class extends Cb{constructor(t={}){super();Cn(this,Fc);Cn(this,j2);this.config=t,jr(this,Fc,new Map),jr(this,j2,Date.now())}build(t,r,n){const i=new t$e({mutationCache:this,mutationId:++Xb(this,j2)._,options:t.defaultMutationOptions(r),state:n});return this.add(i),i}add(t){const r=tw(t),n=dt(this,Fc).get(r)??[];n.push(t),dt(this,Fc).set(r,n),this.notify({type:"added",mutation:t})}remove(t){var n;const r=tw(t);if(dt(this,Fc).has(r)){const i=(n=dt(this,Fc).get(r))==null?void 0:n.filter(o=>o!==t);i&&(i.length===0?dt(this,Fc).delete(r):dt(this,Fc).set(r,i))}this.notify({type:"removed",mutation:t})}canRun(t){var n;const r=(n=dt(this,Fc).get(tw(t)))==null?void 0:n.find(i=>i.state.status==="pending");return!r||r===t}runNext(t){var n;const r=(n=dt(this,Fc).get(tw(t)))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){La.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...dt(this,Fc).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(n=>V7(r,n))}findAll(t={}){return this.getAll().filter(r=>V7(t,r))}notify(t){La.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return La.batch(()=>Promise.all(t.map(r=>r.continue().catch(pu))))}},Fc=new WeakMap,j2=new WeakMap,o9);function tw(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function W7(e){return{onFetch:(t,r)=>{var v,x,S,A,k;const n=t.options,i=(S=(x=(v=t.fetchOptions)==null?void 0:v.meta)==null?void 0:x.fetchMore)==null?void 0:S.direction,o=((A=t.state.data)==null?void 0:A.pages)||[],l=((k=t.state.data)==null?void 0:k.pageParams)||[];let s={pages:[],pageParams:[]},f=0;const p=async()=>{let R=!1;const z=U=>{Object.defineProperty(U,"signal",{enumerable:!0,get:()=>(t.signal.aborted?R=!0:t.signal.addEventListener("abort",()=>{R=!0}),t.signal)})},N=wX(t.options,t.fetchOptions),B=async(U,K,ne)=>{if(R)return Promise.reject();if(K==null&&U.pages.length)return Promise.resolve(U);const ee={queryKey:t.queryKey,pageParam:K,direction:ne?"backward":"forward",meta:t.options.meta};z(ee);const Q=await N(ee),{maxPages:re}=t.options,Se=ne?Xze:Wze;return{pages:Se(U.pages,Q,re),pageParams:Se(U.pageParams,K,re)}};if(i&&o.length){const U=i==="backward",K=U?i$e:X7,ne={pages:o,pageParams:l},ee=K(n,ne);s=await B(ne,ee,U)}else{const U=e??o.length;do{const K=f===0?l[0]??n.initialPageParam:X7(n,s);if(f>0&&K==null)break;s=await B(s,K),f++}while(f<U)}return s};t.options.persister?t.fetchFn=()=>{var R,z;return(z=(R=t.options).persister)==null?void 0:z.call(R,p,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=p}}}function X7(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function i$e(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var as,lp,cp,Gy,Yy,up,Zy,Jy,s9,o$e=(s9=class{constructor(e={}){Cn(this,as);Cn(this,lp);Cn(this,cp);Cn(this,Gy);Cn(this,Yy);Cn(this,up);Cn(this,Zy);Cn(this,Jy);jr(this,as,e.queryCache||new e$e),jr(this,lp,e.mutationCache||new n$e),jr(this,cp,e.defaultOptions||{}),jr(this,Gy,new Map),jr(this,Yy,new Map),jr(this,up,0)}mount(){Xb(this,up)._++,dt(this,up)===1&&(jr(this,Zy,q6.subscribe(async e=>{e&&(await this.resumePausedMutations(),dt(this,as).onFocus())})),jr(this,Jy,fS.subscribe(async e=>{e&&(await this.resumePausedMutations(),dt(this,as).onOnline())})))}unmount(){var e,t;Xb(this,up)._--,dt(this,up)===0&&((e=dt(this,Zy))==null||e.call(this),jr(this,Zy,void 0),(t=dt(this,Jy))==null||t.call(this),jr(this,Jy,void 0))}isFetching(e){return dt(this,as).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return dt(this,lp).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=dt(this,as).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),n=dt(this,as).build(this,r);return e.revalidateIfStale&&n.isStaleByTime(Vy(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return dt(this,as).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=dt(this,as).get(n.queryHash),o=i==null?void 0:i.state.data,l=Hze(t,o);if(l!==void 0)return dt(this,as).build(this,n).setData(l,{...r,manual:!0})}setQueriesData(e,t,r){return La.batch(()=>dt(this,as).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=dt(this,as).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=dt(this,as);La.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=dt(this,as),n={type:"active",...e};return La.batch(()=>(r.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(n,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},n=La.batch(()=>dt(this,as).findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then(pu).catch(pu)}invalidateQueries(e={},t={}){return La.batch(()=>{if(dt(this,as).findAll(e).forEach(n=>{n.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},n=La.batch(()=>dt(this,as).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let o=i.fetch(void 0,r);return r.throwOnError||(o=o.catch(pu)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(pu)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=dt(this,as).build(this,t);return r.isStaleByTime(Vy(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(pu).catch(pu)}fetchInfiniteQuery(e){return e.behavior=W7(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(pu).catch(pu)}ensureInfiniteQueryData(e){return e.behavior=W7(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return fS.isOnline()?dt(this,lp).resumePausedMutations():Promise.resolve()}getQueryCache(){return dt(this,as)}getMutationCache(){return dt(this,lp)}getDefaultOptions(){return dt(this,cp)}setDefaultOptions(e){jr(this,cp,e)}setQueryDefaults(e,t){dt(this,Gy).set(z2(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...dt(this,Gy).values()];let r={};return t.forEach(n=>{$2(e,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(e,t){dt(this,Yy).set(z2(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...dt(this,Yy).values()];let r={};return t.forEach(n=>{$2(e,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...dt(this,cp).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=V6(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===H6&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...dt(this,cp).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){dt(this,as).clear(),dt(this,lp).clear()}},as=new WeakMap,lp=new WeakMap,cp=new WeakMap,Gy=new WeakMap,Yy=new WeakMap,up=new WeakMap,Zy=new WeakMap,Jy=new WeakMap,s9),nc,ii,V2,Rl,Ng,Qy,hp,Qh,H2,e_,t_,Dg,Lg,fp,r_,ki,yv,JP,QP,eI,tI,rI,nI,iI,PX,a9,s$e=(a9=class extends Cb{constructor(t,r){super();Cn(this,ki);Cn(this,nc);Cn(this,ii);Cn(this,V2);Cn(this,Rl);Cn(this,Ng);Cn(this,Qy);Cn(this,hp);Cn(this,Qh);Cn(this,H2);Cn(this,e_);Cn(this,t_);Cn(this,Dg);Cn(this,Lg);Cn(this,fp);Cn(this,r_,new Set);this.options=r,jr(this,nc,t),jr(this,Qh,null),jr(this,hp,ZP()),this.options.experimental_prefetchInRender||dt(this,hp).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(dt(this,ii).addObserver(this),K7(dt(this,ii),this.options)?ni(this,ki,yv).call(this):this.updateResult(),ni(this,ki,tI).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return oI(dt(this,ii),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return oI(dt(this,ii),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ni(this,ki,rI).call(this),ni(this,ki,nI).call(this),dt(this,ii).removeObserver(this)}setOptions(t,r){const n=this.options,i=dt(this,ii);if(this.options=dt(this,nc).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof rh(this.options.enabled,dt(this,ii))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ni(this,ki,iI).call(this),dt(this,ii).setOptions(this.options),n._defaulted&&!KP(this.options,n)&&dt(this,nc).getQueryCache().notify({type:"observerOptionsUpdated",query:dt(this,ii),observer:this});const o=this.hasListeners();o&&G7(dt(this,ii),i,this.options,n)&&ni(this,ki,yv).call(this),this.updateResult(r),o&&(dt(this,ii)!==i||rh(this.options.enabled,dt(this,ii))!==rh(n.enabled,dt(this,ii))||Vy(this.options.staleTime,dt(this,ii))!==Vy(n.staleTime,dt(this,ii)))&&ni(this,ki,JP).call(this);const l=ni(this,ki,QP).call(this);o&&(dt(this,ii)!==i||rh(this.options.enabled,dt(this,ii))!==rh(n.enabled,dt(this,ii))||l!==dt(this,fp))&&ni(this,ki,eI).call(this,l)}getOptimisticResult(t){const r=dt(this,nc).getQueryCache().build(dt(this,nc),t),n=this.createResult(r,t);return l$e(this,n)&&(jr(this,Rl,n),jr(this,Qy,this.options),jr(this,Ng,dt(this,ii).state)),n}getCurrentResult(){return dt(this,Rl)}trackResult(t,r){const n={};return Object.keys(t).forEach(i=>{Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),r==null||r(i),t[i])})}),n}trackProp(t){dt(this,r_).add(t)}getCurrentQuery(){return dt(this,ii)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=dt(this,nc).defaultQueryOptions(t),n=dt(this,nc).getQueryCache().build(dt(this,nc),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return ni(this,ki,yv).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),dt(this,Rl)))}createResult(t,r){var re;const n=dt(this,ii),i=this.options,o=dt(this,Rl),l=dt(this,Ng),s=dt(this,Qy),p=t!==n?t.state:dt(this,V2),{state:v}=t;let x={...v},S=!1,A;if(r._optimisticResults){const Se=this.hasListeners(),J=!Se&&K7(t,r),G=Se&&G7(t,n,r,i);(J||G)&&(x={...x,...CX(v.data,t.options)}),r._optimisticResults==="isRestoring"&&(x.fetchStatus="idle")}let{error:k,errorUpdatedAt:R,status:z}=x;if(r.select&&x.data!==void 0)if(o&&x.data===(l==null?void 0:l.data)&&r.select===dt(this,H2))A=dt(this,e_);else try{jr(this,H2,r.select),A=r.select(x.data),A=YP(o==null?void 0:o.data,A,r),jr(this,e_,A),jr(this,Qh,null)}catch(Se){jr(this,Qh,Se)}else A=x.data;if(r.placeholderData!==void 0&&A===void 0&&z==="pending"){let Se;if(o!=null&&o.isPlaceholderData&&r.placeholderData===(s==null?void 0:s.placeholderData))Se=o.data;else if(Se=typeof r.placeholderData=="function"?r.placeholderData((re=dt(this,t_))==null?void 0:re.state.data,dt(this,t_)):r.placeholderData,r.select&&Se!==void 0)try{Se=r.select(Se),jr(this,Qh,null)}catch(J){jr(this,Qh,J)}Se!==void 0&&(z="success",A=YP(o==null?void 0:o.data,Se,r),S=!0)}dt(this,Qh)&&(k=dt(this,Qh),A=dt(this,e_),R=Date.now(),z="error");const N=x.fetchStatus==="fetching",B=z==="pending",U=z==="error",K=B&&N,ne=A!==void 0,Q={status:z,fetchStatus:x.fetchStatus,isPending:B,isSuccess:z==="success",isError:U,isInitialLoading:K,isLoading:K,data:A,dataUpdatedAt:x.dataUpdatedAt,error:k,errorUpdatedAt:R,failureCount:x.fetchFailureCount,failureReason:x.fetchFailureReason,errorUpdateCount:x.errorUpdateCount,isFetched:x.dataUpdateCount>0||x.errorUpdateCount>0,isFetchedAfterMount:x.dataUpdateCount>p.dataUpdateCount||x.errorUpdateCount>p.errorUpdateCount,isFetching:N,isRefetching:N&&!B,isLoadingError:U&&!ne,isPaused:x.fetchStatus==="paused",isPlaceholderData:S,isRefetchError:U&&ne,isStale:W6(t,r),refetch:this.refetch,promise:dt(this,hp)};if(this.options.experimental_prefetchInRender){const Se=se=>{Q.status==="error"?se.reject(Q.error):Q.data!==void 0&&se.resolve(Q.data)},J=()=>{const se=jr(this,hp,Q.promise=ZP());Se(se)},G=dt(this,hp);switch(G.status){case"pending":t.queryHash===n.queryHash&&Se(G);break;case"fulfilled":(Q.status==="error"||Q.data!==G.value)&&J();break;case"rejected":(Q.status!=="error"||Q.error!==G.reason)&&J();break}}return Q}updateResult(t){const r=dt(this,Rl),n=this.createResult(dt(this,ii),this.options);if(jr(this,Ng,dt(this,ii).state),jr(this,Qy,this.options),dt(this,Ng).data!==void 0&&jr(this,t_,dt(this,ii)),KP(n,r))return;jr(this,Rl,n);const i={},o=()=>{if(!r)return!0;const{notifyOnChangeProps:l}=this.options,s=typeof l=="function"?l():l;if(s==="all"||!s&&!dt(this,r_).size)return!0;const f=new Set(s??dt(this,r_));return this.options.throwOnError&&f.add("error"),Object.keys(dt(this,Rl)).some(p=>{const v=p;return dt(this,Rl)[v]!==r[v]&&f.has(v)})};(t==null?void 0:t.listeners)!==!1&&o()&&(i.listeners=!0),ni(this,ki,PX).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ni(this,ki,tI).call(this)}},nc=new WeakMap,ii=new WeakMap,V2=new WeakMap,Rl=new WeakMap,Ng=new WeakMap,Qy=new WeakMap,hp=new WeakMap,Qh=new WeakMap,H2=new WeakMap,e_=new WeakMap,t_=new WeakMap,Dg=new WeakMap,Lg=new WeakMap,fp=new WeakMap,r_=new WeakMap,ki=new WeakSet,yv=function(t){ni(this,ki,iI).call(this);let r=dt(this,ii).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(pu)),r},JP=function(){ni(this,ki,rI).call(this);const t=Vy(this.options.staleTime,dt(this,ii));if(cm||dt(this,Rl).isStale||!XP(t))return;const n=bX(dt(this,Rl).dataUpdatedAt,t)+1;jr(this,Dg,setTimeout(()=>{dt(this,Rl).isStale||this.updateResult()},n))},QP=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(dt(this,ii)):this.options.refetchInterval)??!1},eI=function(t){ni(this,ki,nI).call(this),jr(this,fp,t),!(cm||rh(this.options.enabled,dt(this,ii))===!1||!XP(dt(this,fp))||dt(this,fp)===0)&&jr(this,Lg,setInterval(()=>{(this.options.refetchIntervalInBackground||q6.isFocused())&&ni(this,ki,yv).call(this)},dt(this,fp)))},tI=function(){ni(this,ki,JP).call(this),ni(this,ki,eI).call(this,ni(this,ki,QP).call(this))},rI=function(){dt(this,Dg)&&(clearTimeout(dt(this,Dg)),jr(this,Dg,void 0))},nI=function(){dt(this,Lg)&&(clearInterval(dt(this,Lg)),jr(this,Lg,void 0))},iI=function(){const t=dt(this,nc).getQueryCache().build(dt(this,nc),this.options);if(t===dt(this,ii))return;const r=dt(this,ii);jr(this,ii,t),jr(this,V2,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},PX=function(t){La.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(dt(this,Rl))}),dt(this,nc).getQueryCache().notify({query:dt(this,ii),type:"observerResultsUpdated"})})},a9);function a$e(e,t){return rh(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function K7(e,t){return a$e(e,t)||e.state.data!==void 0&&oI(e,t,t.refetchOnMount)}function oI(e,t,r){if(rh(t.enabled,e)!==!1){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&W6(e,t)}return!1}function G7(e,t,r,n){return(e!==t||rh(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&W6(e,r)}function W6(e,t){return rh(t.enabled,e)!==!1&&e.isStaleByTime(Vy(t.staleTime,e))}function l$e(e,t){return!KP(e.getCurrentResult(),t)}var IX=me.createContext(void 0),c$e=e=>{const t=me.useContext(IX);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},u$e=({client:e,children:t})=>(me.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),xt.jsx(IX.Provider,{value:e,children:t})),RX=me.createContext(!1),h$e=()=>me.useContext(RX);RX.Provider;function f$e(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var d$e=me.createContext(f$e()),p$e=()=>me.useContext(d$e);function g$e(e,t){return typeof e=="function"?e(...t):!!e}function Y7(){}var m$e=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},y$e=e=>{me.useEffect(()=>{e.clearReset()},[e])},_$e=({result:e,errorResetBoundary:t,throwOnError:r,query:n})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&g$e(r,[e.error,n]),v$e=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},b$e=(e,t)=>e.isLoading&&e.isFetching&&!t,x$e=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Z7=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function w$e(e,t,r){var v,x,S,A,k;const n=c$e(),i=h$e(),o=p$e(),l=n.defaultQueryOptions(e);(x=(v=n.getDefaultOptions().queries)==null?void 0:v._experimental_beforeQuery)==null||x.call(v,l),l._optimisticResults=i?"isRestoring":"optimistic",v$e(l),m$e(l,o),y$e(o);const s=!n.getQueryCache().get(l.queryHash),[f]=me.useState(()=>new t(n,l)),p=f.getOptimisticResult(l);if(me.useSyncExternalStore(me.useCallback(R=>{const z=i?Y7:f.subscribe(La.batchCalls(R));return f.updateResult(),z},[f,i]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),me.useEffect(()=>{f.setOptions(l,{listeners:!1})},[l,f]),x$e(l,p))throw Z7(l,f,o);if(_$e({result:p,errorResetBoundary:o,throwOnError:l.throwOnError,query:n.getQueryCache().get(l.queryHash)}))throw p.error;if((A=(S=n.getDefaultOptions().queries)==null?void 0:S._experimental_afterQuery)==null||A.call(S,l,p),l.experimental_prefetchInRender&&!cm&&b$e(p,i)){const R=s?Z7(l,f,o):(k=n.getQueryCache().get(l.queryHash))==null?void 0:k.promise;R==null||R.catch(Y7).finally(()=>{f.updateResult()})}return l.notifyOnChangeProps?p:f.trackResult(p)}function S$e(e,t){return w$e(e,s$e)}const A$e=()=>{const[e,t]=me.useState(2),[r,n]=me.useState(!0),[i,o]=me.useState(1.7),[l,s]=me.useState(255),[f,p]=me.useState(255),[v,x]=me.useState(255),[S,A]=me.useState(),[k,R]=me.useState(!0),[z,N]=me.useState(),B=Sm(),U=async()=>await(await fetch("output_pointcloud.json")).json(),{data:K,isLoading:ne}=S$e({queryKey:["point-cloud"],queryFn:U}),ee=()=>{if(!(ne||!(K!=null&&K.positions))){R(!0);try{const Q=K.positions,re=K.normals,Se=K.colors,J=new EP({color:[l,f,v],intensity:i,direction:[0,0,5],shadow:!1}),G=new x6({directionalLight:J}),se=new eBe({interleaved:!0,layers:[new M6({id:"lasLayer",data:Q.map((ve,ge)=>({position:ve,normal:re[ge],color:Se[ge]})),getColor:ve=>ve.color,getNormal:ve=>ve.normal,getPosition:ve=>ve.position,pointSize:e})],effects:r?[G]:[]});A([(Q[0][0]+Q[Q.length-1][0])/2,(Q[0][1]+Q[Q.length-1][1])/2]),z&&B.map.removeControl(z),B.map.addControl(se),N(se)}catch(Q){console.error("Fehler beim Laden der Punktwolke:",Q)}finally{R(!1)}}};return me.useEffect(()=>{B.map&&ee()},[B.map,e,r,i,l,f,v]),me.useEffect(()=>{B.map&&S&&(B.map.flyTo({center:S,zoom:21}),R(!1))},[S,B.map]),xt.jsxs(xt.Fragment,{children:[k&&xt.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},children:xt.jsx(pze,{size:"80px"})}),xt.jsx(Vze,{setPointSize:t,setLight:n,setIntensity:o,setRed:s,setGreen:p,setBlue:x,loading:k})]})};function E$e(){const e={type:"FeatureCollection",features:[{id:"21517c507fb9d62466214ae28bcc420d",type:"Feature",properties:{id:"21517c507fb9d62466214ae28bcc420d"},geometry:{coordinates:[[[7.842913005868155,47.988816221118185],[7.84292397880796,47.9888698795171],[7.842907608846019,47.988870296447715],[7.842912001158595,47.988884149581054],[7.842945231881458,47.98888071683709],[7.84295580705475,47.9889237646282],[7.842925215470984,47.98892698572752],[7.8429450385637836,47.98892769961785],[7.842961493451185,47.989005725213616],[7.842961764502007,47.98900723918888],[7.84297766709318,47.98900634783601],[7.84298864379744,47.9890708632569],[7.842994321681601,47.98907053590517],[7.842982855025554,47.989005419900394],[7.842982019287234,47.9890007518099],[7.842967881046519,47.989001885601624],[7.842954404881823,47.988926613185015],[7.842966635436227,47.98892550439905],[7.842951138126466,47.988876324550915],[7.8429170326175495,47.98888021137674],[7.842916235085909,47.98887362056607],[7.842933758694613,47.988873239097614],[7.842918196963524,47.988810882788556],[7.842913005868155,47.988816221118185]]],type:"Polygon"}},{id:"f68b5b7185ce567e7b77608f379d9227",type:"Feature",properties:{id:"f68b5b7185ce567e7b77608f379d9227"},geometry:{coordinates:[[[7.842988392917448,47.989070817216856],[7.842994364590311,47.9890708589827],[7.842995089154925,47.989076354507546],[7.842894857225332,47.989082830463445],[7.842894609890891,47.98909013943472],[7.842808847102873,47.98909632281757],[7.842804180530294,47.98907170571593],[7.842750699418929,47.989078597798965],[7.842749831152673,47.989075196415826],[7.84281095090995,47.98906751821437],[7.842815894318846,47.989089336302385],[7.8428857354135175,47.98908547103474],[7.842886207759193,47.98907797046718],[7.842988392917448,47.989070817216856]]],type:"Polygon"}},{id:"83dcd215884fa42e184f131b43250568",type:"Feature",properties:{id:"83dcd215884fa42e184f131b43250568"},geometry:{coordinates:[[[7.8427572048898355,47.98907407559423],[7.842749783671138,47.989074960603006],[7.842737916042097,47.98903286545374],[7.842717329748496,47.989021906646144],[7.842710899001673,47.988990825640116],[7.842728903477109,47.98898010569985],[7.842717879087161,47.98894634933072],[7.842718812420401,47.988904387041],[7.842696654901573,47.988893119388734],[7.842690632498176,47.98886794807589],[7.842707920692845,47.98885322724638],[7.842702223916348,47.988823826553244],[7.842708866939603,47.98882706225362],[7.842714546975088,47.98885515983093],[7.8426976346108574,47.98886956064186],[7.842703683541458,47.98889125128278],[7.842724799159015,47.98890274742871],[7.842723429962064,47.9889446943956],[7.842735794413045,47.988981097170466],[7.842719446747083,47.98899139436702],[7.8427251435151675,47.98902079497137],[7.842747113118747,47.98903222260452],[7.8427572048898355,47.98907407559423]]],type:"Polygon"}},{id:"788a20c7c4bb2fdf71b093dd317183c8",type:"Feature",properties:{id:"788a20c7c4bb2fdf71b093dd317183c8"},geometry:{coordinates:[[[7.842702901245218,47.98882393778641],[7.842771655607464,47.98881901407401],[7.842788515766216,47.98881102512661],[7.842835884741049,47.98880604655088],[7.842847056581604,47.98881798192721],[7.842918514008318,47.98881092412725],[7.842912829569514,47.98881609953571],[7.842843431495112,47.98882358213217],[7.842832737211353,47.988813083320906],[7.842789426847958,47.98881611407518],[7.842773305524702,47.98882330634234],[7.842708931145694,47.988826846405914],[7.842702901245218,47.98882393778641]]],type:"Polygon"}}]},t={type:"FeatureCollection",features:[{id:"5c75077878045341706c2108f0274657",type:"Feature",properties:{id:"5c75077878045341706c2108f0274657"},geometry:{coordinates:[[[7.842928452805921,47.98901035267505],[7.842931414388715,47.98900963124672],[7.842917225637734,47.98892738145486],[7.842912679004826,47.9889282477248],[7.842919050993174,47.98895868746487],[7.842928452805921,47.98901035267505]]],type:"Polygon"}},{id:"7d61c4fd1ddb21d404ab582566a600a9",type:"Feature",properties:{id:"7d61c4fd1ddb21d404ab582566a600a9"},geometry:{coordinates:[[[7.842918246465359,47.98892613795593],[7.842724134601269,47.98894319388211],[7.842725298277941,47.98894555325933],[7.842725423109982,47.98894523018913],[7.842914631870769,47.988928181768614],[7.8429174350743125,47.98892770164707],[7.842918246465359,47.98892613795593]]],type:"Polygon"}},{id:"6db7ada0dc3ca5cf3b47157a3ce49a5c",type:"Feature",properties:{id:"6db7ada0dc3ca5cf3b47157a3ce49a5c"},geometry:{coordinates:[[[7.842832287145683,47.98893488089374],[7.842828434715813,47.98893510173943],[7.842837540302696,47.988972214053035],[7.842840480887929,47.98897208394058],[7.842832287145683,47.98893488089374]]],type:"Polygon"}},{id:"edf44500578313fe382c9730d8c807ca",type:"Feature",properties:{id:"edf44500578313fe382c9730d8c807ca"},geometry:{coordinates:[[[7.842928406242834,47.98900800263979],[7.842928928691094,47.989009993209066],[7.842871076284069,47.98901476064489],[7.842871846631709,47.98901326832407],[7.842928406242834,47.98900800263979]]],type:"Polygon"}},{id:"1c875683f05d3c8f9fbe1a17eaac1076",type:"Feature",properties:{id:"1c875683f05d3c8f9fbe1a17eaac1076"},geometry:{coordinates:[[[7.842921325422083,47.98896817823433],[7.842735962658111,47.98898172202021],[7.842734803520216,47.988978140719155],[7.84292137994575,47.988966288809365],[7.842921325422083,47.98896817823433]]],type:"Polygon"}},{id:"dc076d98ef0d593e087f500cb53f9b72",type:"Feature",properties:{id:"dc076d98ef0d593e087f500cb53f9b72"},geometry:{coordinates:[[[7.8428711959886925,47.98901475424958],[7.842865865924722,47.988971075060334],[7.842869339633097,47.9889708373766],[7.842873959305848,47.98901431494147],[7.8428711959886925,47.98901475424958]]],type:"Polygon"}},{id:"4c72ee1140caec872e60260fe2b2f0d3",type:"Feature",properties:{id:"4c72ee1140caec872e60260fe2b2f0d3"},geometry:{coordinates:[[[7.842814940278743,47.988975444181676],[7.842817495812824,47.98902458678859],[7.842814959839302,47.98902416124167],[7.842811670935731,47.988975392076725],[7.842814940278743,47.988975444181676]]],type:"Polygon"}},{id:"d029fa29278f3834bc1e7d04a06a11ab",type:"Feature",properties:{id:"d029fa29278f3834bc1e7d04a06a11ab"},geometry:{coordinates:[[[7.842815349308239,47.98902360236272],[7.84274634754064,47.98903050428842],[7.8427467435190295,47.989032045632484],[7.842817805966689,47.989024511236664],[7.842815349308239,47.98902360236272]]],type:"Polygon"}},{id:"95ee05eb2caffa85dc01eb75c4e852eb",type:"Feature",properties:{id:"95ee05eb2caffa85dc01eb75c4e852eb"},geometry:{coordinates:[[[7.842811489677985,47.98906885802489],[7.842831891084103,47.989066457793456],[7.842830931118812,47.9890633502834],[7.842810926360357,47.98906719294436],[7.842811489677985,47.98906885802489]]],type:"Polygon"}},{id:"26e50467d5893e4e4f0e26c64cbd2070",type:"Feature",properties:{id:"26e50467d5893e4e4f0e26c64cbd2070"},geometry:{coordinates:[[[7.842815637782138,47.98902503181378],[7.842827746372649,47.989064254810955],[7.8428310577870946,47.98906357689128],[7.842817877296028,47.98902408646828],[7.842815637782138,47.98902503181378]]],type:"Polygon"}},{id:"7fdebcf4d9110b2071b2739b7e9bcf90",type:"Feature",properties:{id:"7fdebcf4d9110b2071b2739b7e9bcf90"},geometry:{coordinates:[[[7.842982503457648,47.98903732140673],[7.84292879609697,47.98904136851439],[7.842929109642682,47.98904260448526],[7.842982789624784,47.98903890820844],[7.842982503457648,47.98903732140673]]],type:"Polygon"}},{id:"99d97d2b4e3922e6a5afdf1f153c98bb",type:"Feature",properties:{id:"99d97d2b4e3922e6a5afdf1f153c98bb"},geometry:{coordinates:[[[7.842929052549437,47.98904249915222],[7.842934388408253,47.98907467496815],[7.842937778930576,47.98907477423444],[7.842932854990067,47.98904228814851],[7.842929052549437,47.98904249915222]]],type:"Polygon"}},{id:"db6d1535a9b535a43a745f6d14a888df",type:"Feature",properties:{id:"db6d1535a9b535a43a745f6d14a888df"},geometry:{coordinates:[[[7.842931554492651,47.989053123340796],[7.84288620802144,47.989056025056016],[7.842886153198776,47.98905820007815],[7.842931816619398,47.989054967237365],[7.842931554492651,47.989053123340796]]],type:"Polygon"}},{id:"6f0c0168fe8b4d2eec04cc4537f87761",type:"Feature",properties:{id:"6f0c0168fe8b4d2eec04cc4537f87761"},geometry:{coordinates:[[[7.842886257261824,47.98907847988502],[7.842885443450768,47.98905648107916],[7.842886115009961,47.98905602610171],[7.8428879239788785,47.98905632917345],[7.842888802499971,47.989077976375654],[7.842886257261824,47.98907847988502]]],type:"Polygon"}},{id:"43fdc8741a8dfa0cf0d8decc1ec613dd",type:"Feature",properties:{id:"43fdc8741a8dfa0cf0d8decc1ec613dd"},geometry:{coordinates:[[[7.842910608701715,47.98905487359684],[7.842913039931005,47.98907655070144],[7.842910163935784,47.989076440424725],[7.84290839145126,47.9890546321287],[7.842910608701715,47.98905487359684]]],type:"Polygon"}},{id:"b9a3dd0c6c5e8c55ed71d9da1db9e87e",type:"Feature",properties:{id:"b9a3dd0c6c5e8c55ed71d9da1db9e87e"},geometry:{coordinates:[[[7.842917158805079,47.9889275604138],[7.842944891366557,47.988927394253835],[7.842942916187269,47.98892508800739],[7.842917900055539,47.988926308672006],[7.842917158805079,47.9889275604138]]],type:"Polygon"}}]};return xt.jsxs(xt.Fragment,{children:[xt.jsx(XH,{options:{style:"https://wms.wheregroup.com/tileserver/style/osm-bright.json",zoom:10,maxZoom:24,center:[7.842609,47.997791],pitch:60,bearing:188},style:{position:"absolute",top:0,bottom:0,left:0,right:0}}),xt.jsx(A$e,{}),xt.jsx(Ov,{geojson:e,type:"fill-extrusion",options:{paint:{"fill-extrusion-color":"#ffffff","fill-extrusion-height":2,"fill-extrusion-opacity":.5}}}),xt.jsx(Ov,{geojson:t,type:"fill-extrusion",options:{paint:{"fill-extrusion-color":"#ffffff","fill-extrusion-height":1,"fill-extrusion-opacity":.5}}}),xt.jsx(JH,{showFollowGpsButton:!1})]})}const T$e=new o$e;aC.createRoot(document.getElementById("root")).render(xt.jsx(Pe.StrictMode,{children:xt.jsx(u$e,{client:T$e,children:xt.jsx(g4e,{children:xt.jsx(E$e,{})})})}));export{$i as _,rf as c,PS as g};
