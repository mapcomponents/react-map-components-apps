/*! For license information please see main.de2def81.js.LICENSE.txt */
!function(){var t={7228:function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},2858:function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},3646:function(t,e,n){var r=n(7228);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},1506:function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},4575:function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},9100:function(t,e,n){var r=n(9489),i=n(7067);function o(e,n,a){return i()?(t.exports=o=Reflect.construct,t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=o=function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&r(o,n.prototype),o},t.exports.__esModule=!0,t.exports.default=t.exports),o.apply(null,arguments)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},3913:function(t){function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},3269:function(t,e,n){var r=n(379);t.exports=function(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}},t.exports.__esModule=!0,t.exports.default=t.exports},9842:function(t,e,n){var r=n(9754),i=n(7067),o=n(8585);t.exports=function(t){var e=i();return function(){var n,i=r(t);if(e){var a=r(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return o(this,n)}},t.exports.__esModule=!0,t.exports.default=t.exports},9713:function(t){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},6525:function(t,e,n){var r=n(8331);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(t.exports=i=Reflect.get,t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=i=function(t,e,n){var i=r(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},t.exports.__esModule=!0,t.exports.default=t.exports),i.apply(this,arguments)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},9754:function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},2205:function(t,e,n){var r=n(9489);t.exports=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},5318:function(t){t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports},430:function(t){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")},t.exports.__esModule=!0,t.exports.default=t.exports},7067:function(t){t.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},6860:function(t){t.exports=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},3884:function(t){t.exports=function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}},t.exports.__esModule=!0,t.exports.default=t.exports},521:function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},8206:function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},8585:function(t,e,n){var r=n(8).default,i=n(1506);t.exports=function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},9489:function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},3038:function(t,e,n){var r=n(2858),i=n(3884),o=n(379),a=n(521);t.exports=function(t,e){return r(t)||i(t,e)||o(t,e)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},8331:function(t,e,n){var r=n(9754);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t},t.exports.__esModule=!0,t.exports.default=t.exports},8551:function(t,e,n){var r=n(2858),i=n(6860),o=n(379),a=n(521);t.exports=function(t){return r(t)||i(t)||o(t)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},319:function(t,e,n){var r=n(3646),i=n(6860),o=n(379),a=n(8206);t.exports=function(t){return r(t)||i(t)||o(t)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},8:function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},379:function(t,e,n){var r=n(7228);t.exports=function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},5957:function(t,e,n){var r=n(9754),i=n(9489),o=n(430),a=n(9100);function s(e){var n="function"===typeof Map?new Map:void 0;return t.exports=s=function(t){if(null===t||!o(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return a(t,arguments,r(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports,s(e)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports},7757:function(t,e,n){t.exports=n(9727)},76:function(t,e,n){"use strict";n.d(e,{Z:function(){return it}});var r=function(){function t(t){var e=this;this._insertTag=function(t){var n;n=0===e.tags.length?e.insertionPoint?e.insertionPoint.nextSibling:e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,n),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{n.insertRule(t,n.cssRules.length)}catch(r){0}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}(),i=Math.abs,o=String.fromCharCode,a=Object.assign;function s(t){return t.trim()}function l(t,e,n){return t.replace(e,n)}function u(t,e){return t.indexOf(e)}function c(t,e){return 0|t.charCodeAt(e)}function h(t,e,n){return t.slice(e,n)}function f(t){return t.length}function p(t){return t.length}function d(t,e){return e.push(t),t}var m=1,g=1,v=0,y=0,_=0,x="";function b(t,e,n,r,i,o,a){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:m,column:g,length:a,return:""}}function w(t,e){return a(b("",null,null,"",null,null,0),t,{length:-t.length},e)}function k(){return _=y>0?c(x,--y):0,g--,10===_&&(g=1,m--),_}function S(){return _=y<v?c(x,y++):0,g++,10===_&&(g=1,m++),_}function E(){return c(x,y)}function I(){return y}function C(t,e){return h(x,t,e)}function A(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function P(t){return m=g=1,v=f(x=t),y=0,[]}function T(t){return x="",t}function M(t){return s(C(y-1,N(91===t?t+2:40===t?t+1:t)))}function L(t){for(;(_=E())&&_<33;)S();return A(t)>2||A(_)>3?"":" "}function R(t,e){for(;--e&&S()&&!(_<48||_>102||_>57&&_<65||_>70&&_<97););return C(t,I()+(e<6&&32==E()&&32==S()))}function N(t){for(;S();)switch(_){case t:return y;case 34:case 39:34!==t&&39!==t&&N(_);break;case 40:41===t&&N(t);break;case 92:S()}return y}function O(t,e){for(;S()&&t+_!==57&&(t+_!==84||47!==E()););return"/*"+C(e,y-1)+"*"+o(47===t?t:S())}function z(t){for(;!A(E());)S();return C(t,y)}var D="-ms-",F="-moz-",B="-webkit-",j="comm",Z="rule",U="decl",V="@keyframes";function q(t,e){for(var n="",r=p(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function G(t,e,n,r){switch(t.type){case"@import":case U:return t.return=t.return||t.value;case j:return"";case V:return t.return=t.value+"{"+q(t.children,r)+"}";case Z:t.value=t.props.join(",")}return f(n=q(t.children,r))?t.return=t.value+"{"+n+"}":""}function W(t,e){switch(function(t,e){return(((e<<2^c(t,0))<<2^c(t,1))<<2^c(t,2))<<2^c(t,3)}(t,e)){case 5103:return B+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return B+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return B+t+F+t+D+t+t;case 6828:case 4268:return B+t+D+t+t;case 6165:return B+t+D+"flex-"+t+t;case 5187:return B+t+l(t,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+t;case 5443:return B+t+D+"flex-item-"+l(t,/flex-|-self/,"")+t;case 4675:return B+t+D+"flex-line-pack"+l(t,/align-content|flex-|-self/,"")+t;case 5548:return B+t+D+l(t,"shrink","negative")+t;case 5292:return B+t+D+l(t,"basis","preferred-size")+t;case 6060:return B+"box-"+l(t,"-grow","")+B+t+D+l(t,"grow","positive")+t;case 4554:return B+l(t,/([^-])(transform)/g,"$1-webkit-$2")+t;case 6187:return l(l(l(t,/(zoom-|grab)/,B+"$1"),/(image-set)/,B+"$1"),t,"")+t;case 5495:case 3959:return l(t,/(image-set\([^]*)/,B+"$1$`$1");case 4968:return l(l(t,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+B+t+t;case 4095:case 3583:case 4068:case 2532:return l(t,/(.+)-inline(.+)/,B+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(f(t)-1-e>6)switch(c(t,e+1)){case 109:if(45!==c(t,e+4))break;case 102:return l(t,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+F+(108==c(t,e+3)?"$3":"$2-$3"))+t;case 115:return~u(t,"stretch")?W(l(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==c(t,e+1))break;case 6444:switch(c(t,f(t)-3-(~u(t,"!important")&&10))){case 107:return l(t,":",":"+B)+t;case 101:return l(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+B+(45===c(t,14)?"inline-":"")+"box$3$1"+B+"$2$3$1"+D+"$2box$3")+t}break;case 5936:switch(c(t,e+11)){case 114:return B+t+D+l(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return B+t+D+l(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return B+t+D+l(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return B+t+D+t+t}return t}function H(t){return T(X("",null,null,null,[""],t=P(t),0,[0],t))}function X(t,e,n,r,i,a,s,c,h){for(var p=0,m=0,g=s,v=0,y=0,_=0,x=1,b=1,w=1,C=0,A="",P=i,T=a,N=r,D=A;b;)switch(_=C,C=S()){case 40:if(108!=_&&58==D.charCodeAt(g-1)){-1!=u(D+=l(M(C),"&","&\f"),"&\f")&&(w=-1);break}case 34:case 39:case 91:D+=M(C);break;case 9:case 10:case 13:case 32:D+=L(_);break;case 92:D+=R(I()-1,7);continue;case 47:switch(E()){case 42:case 47:d($(O(S(),I()),e,n),h);break;default:D+="/"}break;case 123*x:c[p++]=f(D)*w;case 125*x:case 59:case 0:switch(C){case 0:case 125:b=0;case 59+m:y>0&&f(D)-g&&d(y>32?K(D+";",r,n,g-1):K(l(D," ","")+";",r,n,g-2),h);break;case 59:D+=";";default:if(d(N=Y(D,e,n,p,m,i,c,A,P=[],T=[],g),a),123===C)if(0===m)X(D,e,N,N,P,a,g,c,T);else switch(v){case 100:case 109:case 115:X(t,N,N,r&&d(Y(t,N,N,0,0,i,c,A,i,P=[],g),T),i,T,g,c,r?P:T);break;default:X(D,N,N,N,[""],T,0,c,T)}}p=m=y=0,x=w=1,A=D="",g=s;break;case 58:g=1+f(D),y=_;default:if(x<1)if(123==C)--x;else if(125==C&&0==x++&&125==k())continue;switch(D+=o(C),C*x){case 38:w=m>0?1:(D+="\f",-1);break;case 44:c[p++]=(f(D)-1)*w,w=1;break;case 64:45===E()&&(D+=M(S())),v=E(),m=g=f(A=D+=z(I())),C++;break;case 45:45===_&&2==f(D)&&(x=0)}}return a}function Y(t,e,n,r,o,a,u,c,f,d,m){for(var g=o-1,v=0===o?a:[""],y=p(v),_=0,x=0,w=0;_<r;++_)for(var k=0,S=h(t,g+1,g=i(x=u[_])),E=t;k<y;++k)(E=s(x>0?v[k]+" "+S:l(S,/&\f/g,v[k])))&&(f[w++]=E);return b(t,e,n,0===o?Z:c,f,d,m)}function $(t,e,n){return b(t,e,n,j,o(_),h(t,2,-2),0)}function K(t,e,n,r){return b(t,e,n,U,h(t,0,r),h(t,r+1,-1),r)}var J=function(t,e,n){for(var r=0,i=0;r=i,i=E(),38===r&&12===i&&(e[n]=1),!A(i);)S();return C(t,y)},Q=function(t,e){return T(function(t,e){var n=-1,r=44;do{switch(A(r)){case 0:38===r&&12===E()&&(e[n]=1),t[n]+=J(y-1,e,n);break;case 2:t[n]+=M(r);break;case 4:if(44===r){t[++n]=58===E()?"&\f":"",e[n]=t[n].length;break}default:t[n]+=o(r)}}while(r=S());return t}(P(t),e))},tt=new WeakMap,et=function(t){if("rule"===t.type&&t.parent&&!(t.length<1)){for(var e=t.value,n=t.parent,r=t.column===n.column&&t.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||tt.get(n))&&!r){tt.set(t,!0);for(var i=[],o=Q(e,i),a=n.props,s=0,l=0;s<o.length;s++)for(var u=0;u<a.length;u++,l++)t.props[l]=i[s]?o[s].replace(/&\f/g,a[u]):a[u]+" "+o[s]}}},nt=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}},rt=[function(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case U:t.return=W(t.value,t.length);break;case V:return q([w(t,{value:l(t.value,"@","@"+B)})],r);case Z:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t,e){return(t=e.exec(t))?t[0]:t}(e,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return q([w(t,{props:[l(e,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return q([w(t,{props:[l(e,/:(plac\w+)/,":-webkit-input-$1")]}),w(t,{props:[l(e,/:(plac\w+)/,":-moz-$1")]}),w(t,{props:[l(e,/:(plac\w+)/,D+"input-$1")]})],r)}return""}))}}],it=function(t){var e=t.key;if("css"===e){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var i=t.stylisPlugins||rt;var o,a,s={},l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),n=1;n<e.length;n++)s[e[n]]=!0;l.push(t)}));var u,c,h=[G,(c=function(t){u.insert(t)},function(t){t.root||(t=t.return)&&c(t)})],f=function(t){var e=p(t);return function(n,r,i,o){for(var a="",s=0;s<e;s++)a+=t[s](n,r,i,o)||"";return a}}([et,nt].concat(i,h));a=function(t,e,n,r){u=n,q(H(t?t+"{"+e.styles+"}":e.styles),f),r&&(d.inserted[e.name]=!0)};var d={key:e,sheet:new r({key:e,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:a};return d.sheet.hydrate(l),d}},8918:function(t,e){"use strict";e.Z=function(t){for(var e,n=0,r=0,i=t.length;i>=4;++r,i-=4)e=1540483477*(65535&(e=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&t.charCodeAt(r+2))<<16;case 2:n^=(255&t.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}},3782:function(t,e){"use strict";e.Z=function(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}},1688:function(t,e,n){"use strict";var r;n.d(e,{T:function(){return l},w:function(){return s}});var i=n(2791),o=n(76),a=(n(125),(0,i.createContext)("undefined"!==typeof HTMLElement?(0,o.Z)({key:"css"}):null));a.Provider;var s=function(t){return(0,i.forwardRef)((function(e,n){var r=(0,i.useContext)(a);return t(e,r,n)}))},l=(0,i.createContext)({});(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect},125:function(t,e,n){"use strict";n.d(e,{O:function(){return m}});var r=n(8918),i=n(3840),o=n(3782),a=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(t){return 45===t.charCodeAt(1)},u=function(t){return null!=t&&"boolean"!==typeof t},c=(0,o.Z)((function(t){return l(t)?t:t.replace(a,"-$&").toLowerCase()})),h=function(t,e){switch(t){case"animation":case"animationName":if("string"===typeof e)return e.replace(s,(function(t,e,n){return p={name:e,styles:n,next:p},e}))}return 1===i.Z[t]||l(t)||"number"!==typeof e||0===e?e:e+"px"};function f(t,e,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return p={name:n.name,styles:n.styles,next:p},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)p={name:r.name,styles:r.styles,next:p},r=r.next;return n.styles+";"}return function(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=f(t,e,n[i])+";";else for(var o in n){var a=n[o];if("object"!==typeof a)null!=e&&void 0!==e[a]?r+=o+"{"+e[a]+"}":u(a)&&(r+=c(o)+":"+h(o,a)+";");else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=e&&void 0!==e[a[0]]){var s=f(t,e,a);switch(o){case"animation":case"animationName":r+=c(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var l=0;l<a.length;l++)u(a[l])&&(r+=c(o)+":"+h(o,a[l])+";")}return r}(t,e,n);case"function":if(void 0!==t){var i=p,o=n(t);return p=i,f(t,e,o)}}if(null==e)return n;var a=e[n];return void 0!==a?a:n}var p,d=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var m=function(t,e,n){if(1===t.length&&"object"===typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var i=!0,o="";p=void 0;var a=t[0];null==a||void 0===a.raw?(i=!1,o+=f(n,e,a)):o+=a[0];for(var s=1;s<t.length;s++)o+=f(n,e,t[s]),i&&(o+=a[s]);d.lastIndex=0;for(var l,u="";null!==(l=d.exec(o));)u+="-"+l[1];return{name:(0,r.Z)(o)+u,styles:o,next:p}}},9958:function(t,e,n){"use strict";n.d(e,{Z:function(){return x}});var r=n(2791),i=n.t(r,2),o=n(7462),a=n(3782),s=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,l=(0,a.Z)((function(t){return s.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91})),u=n(1688),c=n(5438),h=n(125),f=l,p=function(t){return"theme"!==t},d=function(t){return"string"===typeof t&&t.charCodeAt(0)>96?f:p},m=function(t,e,n){var r;if(e){var i=e.shouldForwardProp;r=t.__emotion_forwardProp&&i?function(e){return t.__emotion_forwardProp(e)&&i(e)}:i}return"function"!==typeof r&&n&&(r=t.__emotion_forwardProp),r},g=i.useInsertionEffect?i.useInsertionEffect:function(t){t()};var v=function(t){var e=t.cache,n=t.serialized,r=t.isStringTag;(0,c.hC)(e,n,r);!function(t){g(t)}((function(){return(0,c.My)(e,n,r)}));return null},y=function t(e,n){var i,a,s=e.__emotion_real===e,l=s&&e.__emotion_base||e;void 0!==n&&(i=n.label,a=n.target);var f=m(e,n,s),p=f||d(l),g=!p("as");return function(){var y=arguments,_=s&&void 0!==e.__emotion_styles?e.__emotion_styles.slice(0):[];if(void 0!==i&&_.push("label:"+i+";"),null==y[0]||void 0===y[0].raw)_.push.apply(_,y);else{0,_.push(y[0][0]);for(var x=y.length,b=1;b<x;b++)_.push(y[b],y[0][b])}var w=(0,u.w)((function(t,e,n){var i=g&&t.as||l,o="",s=[],m=t;if(null==t.theme){for(var y in m={},t)m[y]=t[y];m.theme=(0,r.useContext)(u.T)}"string"===typeof t.className?o=(0,c.fp)(e.registered,s,t.className):null!=t.className&&(o=t.className+" ");var x=(0,h.O)(_.concat(s),e.registered,m);o+=e.key+"-"+x.name,void 0!==a&&(o+=" "+a);var b=g&&void 0===f?d(i):p,w={};for(var k in t)g&&"as"===k||b(k)&&(w[k]=t[k]);return w.className=o,w.ref=n,(0,r.createElement)(r.Fragment,null,(0,r.createElement)(v,{cache:e,serialized:x,isStringTag:"string"===typeof i}),(0,r.createElement)(i,w))}));return w.displayName=void 0!==i?i:"Styled("+("string"===typeof l?l:l.displayName||l.name||"Component")+")",w.defaultProps=e.defaultProps,w.__emotion_real=w,w.__emotion_base=l,w.__emotion_styles=_,w.__emotion_forwardProp=f,Object.defineProperty(w,"toString",{value:function(){return"."+a}}),w.withComponent=function(e,r){return t(e,(0,o.Z)({},n,r,{shouldForwardProp:m(w,r,!0)})).apply(void 0,_)},w}},_=y.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(t){_[t]=_(t)}));var x=_},3840:function(t,e){"use strict";e.Z={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},5438:function(t,e,n){"use strict";n.d(e,{My:function(){return o},fp:function(){return r},hC:function(){return i}});function r(t,e,n){var r="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]+";"):r+=n+" "})),r}var i=function(t,e,n){var r=t.key+"-"+e.name;!1===n&&void 0===t.registered[r]&&(t.registered[r]=e.styles)},o=function(t,e,n){i(t,e,n);var r=t.key+"-"+e.name;if(void 0===t.inserted[e.name]){var o=e;do{t.insert(e===o?"."+r:"",o,t.sheet,!0);o=o.next}while(void 0!==o)}}},4434:function(t,e,n){t.exports=function(){"use strict";var t=function(t,e){var n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},r={on:function(t,e,r){if(void 0===n[t])throw new Error("Invalid event type: "+t);n[t].push({selector:e,fn:r})},render:function(t){e.store.featureChanged(t)}},i=function(t,i){for(var o=n[t],a=o.length;a--;){var s=o[a];if(s.selector(i)){s.fn.call(r,i)||e.store.render(),e.ui.updateMapClasses();break}}};return t.start.call(r),{render:t.render,stop:function(){t.stop&&t.stop()},trash:function(){t.trash&&(t.trash(),e.store.render())},combineFeatures:function(){t.combineFeatures&&t.combineFeatures()},uncombineFeatures:function(){t.uncombineFeatures&&t.uncombineFeatures()},drag:function(t){i("drag",t)},click:function(t){i("click",t)},mousemove:function(t){i("mousemove",t)},mousedown:function(t){i("mousedown",t)},mouseup:function(t){i("mouseup",t)},mouseout:function(t){i("mouseout",t)},keydown:function(t){i("keydown",t)},keyup:function(t){i("keyup",t)},touchstart:function(t){i("touchstart",t)},touchmove:function(t){i("touchmove",t)},touchend:function(t){i("touchend",t)},tap:function(t){i("tap",t)}}},e=6378137;function r(t){var e=0;if(t&&t.length>0){e+=Math.abs(i(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(i(t[n]))}return e}function i(t){var n,r,i,a,s,l,u=0,c=t.length;if(c>2){for(l=0;l<c;l++)l===c-2?(i=c-2,a=c-1,s=0):l===c-1?(i=c-1,a=0,s=1):(i=l,a=l+1,s=l+2),n=t[i],r=t[a],u+=(o(t[s][0])-o(n[0]))*Math.sin(o(r[1]));u=u*e*e/2}return u}function o(t){return t*Math.PI/180}var a={geometry:function t(e){var n,i=0;switch(e.type){case"Polygon":return r(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)i+=r(e.coordinates[n]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)i+=t(e.geometries[n]);return i}},ring:i},s="mapboxgl-ctrl",l="mapbox-gl-draw_ctrl-draw-btn",u="mapbox-gl-draw_line",c="mapbox-gl-draw_polygon",h="mapbox-gl-draw_point",f="mapbox-gl-draw_trash",p="mapbox-gl-draw_combine",d="mapbox-gl-draw_uncombine",m="mapboxgl-ctrl-group",g="active",v="mapbox-gl-draw_boxselect",y="mapbox-gl-draw-hot",_="mapbox-gl-draw-cold",x="add",b="move",w="drag",k="pointer",S="none",E={POLYGON:"polygon",LINE:"line_string",POINT:"point"},I="Feature",C="Polygon",A="LineString",P="Point",T="FeatureCollection",M="Multi",L="MultiPoint",R="MultiLineString",N="MultiPolygon",O={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},z="draw.create",D="draw.delete",F="draw.update",B="draw.selectionchange",j="draw.modechange",Z="draw.actionable",U="draw.render",V="draw.combine",q="draw.uncombine",G="move",W="change_coordinates",H="feature",X="midpoint",Y="vertex",$="true",K="false",J=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],Q={Point:0,LineString:1,Polygon:2};function tt(t,e){var n=Q[t.geometry.type]-Q[e.geometry.type];return 0===n&&t.geometry.type===C?t.area-e.area:n}function et(t){if(this._items={},this._nums={},this._length=t?t.length:0,t)for(var e=0,n=t.length;e<n;e++)this.add(t[e]),void 0!==t[e]&&("string"==typeof t[e]?this._items[t[e]]=e:this._nums[t[e]]=e)}et.prototype.add=function(t){return this.has(t)||(this._length++,"string"==typeof t?this._items[t]=this._length:this._nums[t]=this._length),this},et.prototype.delete=function(t){return!1===this.has(t)||(this._length--,delete this._items[t],delete this._nums[t]),this},et.prototype.has=function(t){return("string"==typeof t||"number"==typeof t)&&(void 0!==this._items[t]||void 0!==this._nums[t])},et.prototype.values=function(){var t=this,e=[];return Object.keys(this._items).forEach((function(n){e.push({k:n,v:t._items[n]})})),Object.keys(this._nums).forEach((function(n){e.push({k:JSON.parse(n),v:t._nums[n]})})),e.sort((function(t,e){return t.v-e.v})).map((function(t){return t.k}))},et.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var nt=[H,X,Y],rt={click:function(t,e,n){return it(t,e,n,n.options.clickBuffer)},touch:function(t,e,n){return it(t,e,n,n.options.touchBuffer)}};function it(t,e,n,r){if(null===n.map)return[];var i=t?function(t,e){return void 0===e&&(e=0),[[t.point.x-e,t.point.y-e],[t.point.x+e,t.point.y+e]]}(t,r):e,o={};n.options.styles&&(o.layers=n.options.styles.map((function(t){return t.id})));var s=n.map.queryRenderedFeatures(i,o).filter((function(t){return-1!==nt.indexOf(t.properties.meta)})),l=new et,u=[];return s.forEach((function(t){var e=t.properties.id;l.has(e)||(l.add(e),u.push(t))})),function(t){return t.map((function(t){return t.geometry.type===C&&(t.area=a.geometry({type:I,property:{},geometry:t.geometry})),t})).sort(tt).map((function(t){return delete t.area,t}))}(u)}function ot(t,e){var n=rt.click(t,null,e),r={mouse:S};return n[0]&&(r.mouse=n[0].properties.active===$?b:k,r.feature=n[0].properties.meta),-1!==e.events.currentModeName().indexOf("draw")&&(r.mouse=x),e.ui.queueMapClasses(r),e.ui.updateMapClasses(),n[0]}function at(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function st(t,e,n){void 0===n&&(n={});var r=null!=n.fineTolerance?n.fineTolerance:4,i=null!=n.grossTolerance?n.grossTolerance:12,o=null!=n.interval?n.interval:500;t.point=t.point||e.point,t.time=t.time||e.time;var a=at(t.point,e.point);return a<r||a<i&&e.time-t.time<o}function lt(t,e,n){void 0===n&&(n={});var r=null!=n.tolerance?n.tolerance:25,i=null!=n.interval?n.interval:250;return t.point=t.point||e.point,t.time=t.time||e.time,at(t.point,e.point)<r&&e.time-t.time<i}function ut(t,e){return t(e={exports:{}},e.exports),e.exports}var ct=ut((function(t){var e=t.exports=function(t,n){if(n||(n=16),void 0===t&&(t=128),t<=0)return"0";for(var r=Math.log(Math.pow(2,t))/Math.log(n),i=2;r===1/0;i*=2)r=Math.log(Math.pow(2,t/i))/Math.log(n)*i;var o=r-Math.floor(r),a="";for(i=0;i<Math.floor(r);i++)a=Math.floor(Math.random()*n).toString(n)+a;if(o){var s=Math.pow(n,o);a=Math.floor(Math.random()*s).toString(n)+a}var l=parseInt(a,n);return l!==1/0&&l>=Math.pow(2,t)?e(t,n):a};e.rack=function(t,n,r){var i=function(i){var a=0;do{if(a++>10){if(!r)throw new Error("too many ID collisions, use more bits");t+=r}var s=e(t,n)}while(Object.hasOwnProperty.call(o,s));return o[s]=i,s},o=i.hats={};return i.get=function(t){return i.hats[t]},i.set=function(t,e){return i.hats[t]=e,i},i.bits=t||128,i.base=n||16,i}})),ht=function(t,e){this.ctx=t,this.properties=e.properties||{},this.coordinates=e.geometry.coordinates,this.id=e.id||ct(),this.type=e.geometry.type};ht.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},ht.prototype.incomingCoords=function(t){this.setCoordinates(t)},ht.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},ht.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},ht.prototype.setProperty=function(t,e){this.properties[t]=e},ht.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:I,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},ht.prototype.internal=function(t){var e={id:this.id,meta:H,"meta:type":this.type,active:K,mode:t};if(this.ctx.options.userProperties)for(var n in this.properties)e["user_"+n]=this.properties[n];return{type:I,properties:e,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var ft=function(t,e){ht.call(this,t,e)};(ft.prototype=Object.create(ht.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},ft.prototype.updateCoordinate=function(t,e,n){this.coordinates=3===arguments.length?[e,n]:[t,e],this.changed()},ft.prototype.getCoordinate=function(){return this.getCoordinates()};var pt=function(t,e){ht.call(this,t,e)};(pt.prototype=Object.create(ht.prototype)).isValid=function(){return this.coordinates.length>1},pt.prototype.addCoordinate=function(t,e,n){this.changed();var r=parseInt(t,10);this.coordinates.splice(r,0,[e,n])},pt.prototype.getCoordinate=function(t){var e=parseInt(t,10);return JSON.parse(JSON.stringify(this.coordinates[e]))},pt.prototype.removeCoordinate=function(t){this.changed(),this.coordinates.splice(parseInt(t,10),1)},pt.prototype.updateCoordinate=function(t,e,n){var r=parseInt(t,10);this.coordinates[r]=[e,n],this.changed()};var dt=function(t,e){ht.call(this,t,e),this.coordinates=this.coordinates.map((function(t){return t.slice(0,-1)}))};(dt.prototype=Object.create(ht.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every((function(t){return t.length>2}))},dt.prototype.incomingCoords=function(t){this.coordinates=t.map((function(t){return t.slice(0,-1)})),this.changed()},dt.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},dt.prototype.addCoordinate=function(t,e,n){this.changed();var r=t.split(".").map((function(t){return parseInt(t,10)}));this.coordinates[r[0]].splice(r[1],0,[e,n])},dt.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map((function(t){return parseInt(t,10)})),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},dt.prototype.getCoordinate=function(t){var e=t.split(".").map((function(t){return parseInt(t,10)})),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},dt.prototype.getCoordinates=function(){return this.coordinates.map((function(t){return t.concat([t[0]])}))},dt.prototype.updateCoordinate=function(t,e,n){this.changed();var r=t.split("."),i=parseInt(r[0],10),o=parseInt(r[1],10);void 0===this.coordinates[i]&&(this.coordinates[i]=[]),this.coordinates[i][o]=[e,n]};var mt={MultiPoint:ft,MultiLineString:pt,MultiPolygon:dt},gt=function(t,e,n,r,i){var o=n.split("."),a=parseInt(o[0],10),s=o[1]?o.slice(1).join("."):null;return t[a][e](s,r,i)},vt=function(t,e){if(ht.call(this,t,e),delete this.coordinates,this.model=mt[e.geometry.type],void 0===this.model)throw new TypeError(e.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(e.geometry.coordinates)};function yt(t){this.map=t.map,this.drawConfig=JSON.parse(JSON.stringify(t.options||{})),this._ctx=t}(vt.prototype=Object.create(ht.prototype))._coordinatesToFeatures=function(t){var e=this,n=this.model.bind(this);return t.map((function(t){return new n(e.ctx,{id:ct(),type:I,properties:{},geometry:{coordinates:t,type:e.type.replace("Multi","")}})}))},vt.prototype.isValid=function(){return this.features.every((function(t){return t.isValid()}))},vt.prototype.setCoordinates=function(t){this.features=this._coordinatesToFeatures(t),this.changed()},vt.prototype.getCoordinate=function(t){return gt(this.features,"getCoordinate",t)},vt.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((function(t){return t.type===C?t.getCoordinates():t.coordinates}))))},vt.prototype.updateCoordinate=function(t,e,n){gt(this.features,"updateCoordinate",t,e,n),this.changed()},vt.prototype.addCoordinate=function(t,e,n){gt(this.features,"addCoordinate",t,e,n),this.changed()},vt.prototype.removeCoordinate=function(t){gt(this.features,"removeCoordinate",t),this.changed()},vt.prototype.getFeatures=function(){return this.features},yt.prototype.setSelected=function(t){return this._ctx.store.setSelected(t)},yt.prototype.setSelectedCoordinates=function(t){var e=this;this._ctx.store.setSelectedCoordinates(t),t.reduce((function(t,n){return void 0===t[n.feature_id]&&(t[n.feature_id]=!0,e._ctx.store.get(n.feature_id).changed()),t}),{})},yt.prototype.getSelected=function(){return this._ctx.store.getSelected()},yt.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},yt.prototype.isSelected=function(t){return this._ctx.store.isSelected(t)},yt.prototype.getFeature=function(t){return this._ctx.store.get(t)},yt.prototype.select=function(t){return this._ctx.store.select(t)},yt.prototype.deselect=function(t){return this._ctx.store.deselect(t)},yt.prototype.deleteFeature=function(t,e){return void 0===e&&(e={}),this._ctx.store.delete(t,e)},yt.prototype.addFeature=function(t){return this._ctx.store.add(t)},yt.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},yt.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},yt.prototype.setActionableState=function(t){void 0===t&&(t={});var e={trash:t.trash||!1,combineFeatures:t.combineFeatures||!1,uncombineFeatures:t.uncombineFeatures||!1};return this._ctx.events.actionable(e)},yt.prototype.changeMode=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),this._ctx.events.changeMode(t,e,n)},yt.prototype.updateUIClasses=function(t){return this._ctx.ui.queueMapClasses(t)},yt.prototype.activateUIButton=function(t){return this._ctx.ui.setActiveButton(t)},yt.prototype.featuresAt=function(t,e,n){if(void 0===n&&(n="click"),"click"!==n&&"touch"!==n)throw new Error("invalid buffer type");return rt[n](t,e,this._ctx)},yt.prototype.newFeature=function(t){var e=t.geometry.type;return e===P?new ft(this._ctx,t):e===A?new pt(this._ctx,t):e===C?new dt(this._ctx,t):new vt(this._ctx,t)},yt.prototype.isInstanceOf=function(t,e){if(t===P)return e instanceof ft;if(t===A)return e instanceof pt;if(t===C)return e instanceof dt;if("MultiFeature"===t)return e instanceof vt;throw new Error("Unknown feature class: "+t)},yt.prototype.doRender=function(t){return this._ctx.store.featureChanged(t)},yt.prototype.onSetup=function(){},yt.prototype.onDrag=function(){},yt.prototype.onClick=function(){},yt.prototype.onMouseMove=function(){},yt.prototype.onMouseDown=function(){},yt.prototype.onMouseUp=function(){},yt.prototype.onMouseOut=function(){},yt.prototype.onKeyUp=function(){},yt.prototype.onKeyDown=function(){},yt.prototype.onTouchStart=function(){},yt.prototype.onTouchMove=function(){},yt.prototype.onTouchEnd=function(){},yt.prototype.onTap=function(){},yt.prototype.onStop=function(){},yt.prototype.onTrash=function(){},yt.prototype.onCombineFeature=function(){},yt.prototype.onUncombineFeature=function(){},yt.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var _t={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},xt=Object.keys(_t);function bt(t){var e=Object.keys(t);return function(n,r){void 0===r&&(r={});var i={},o=e.reduce((function(e,n){return e[n]=t[n],e}),new yt(n));return{start:function(){var e=this;i=o.onSetup(r),xt.forEach((function(n){var r,a=_t[n],s=function(){return!1};t[a]&&(s=function(){return!0}),e.on(n,s,(r=a,function(t){return o[r](i,t)}))}))},stop:function(){o.onStop(i)},trash:function(){o.onTrash(i)},combineFeatures:function(){o.onCombineFeatures(i)},uncombineFeatures:function(){o.onUncombineFeatures(i)},render:function(t,e){o.toDisplayFeatures(i,t,e)}}}}function wt(t){return[].concat(t).filter((function(t){return void 0!==t}))}function kt(){var t=this;if(!t.ctx.map||void 0===t.ctx.map.getSource(y))return l();var e=t.ctx.events.currentModeName();t.ctx.ui.queueMapClasses({mode:e});var n=[],r=[];t.isDirty?r=t.getAllIds():(n=t.getChangedIds().filter((function(e){return void 0!==t.get(e)})),r=t.sources.hot.filter((function(e){return e.properties.id&&-1===n.indexOf(e.properties.id)&&void 0!==t.get(e.properties.id)})).map((function(t){return t.properties.id}))),t.sources.hot=[];var i=t.sources.cold.length;t.sources.cold=t.isDirty?[]:t.sources.cold.filter((function(t){var e=t.properties.id||t.properties.parent;return-1===n.indexOf(e)}));var o=i!==t.sources.cold.length||r.length>0;function a(n,r){var i=t.get(n).internal(e);t.ctx.events.currentModeRender(i,(function(e){t.sources[r].push(e)}))}if(n.forEach((function(t){return a(t,"hot")})),r.forEach((function(t){return a(t,"cold")})),o&&t.ctx.map.getSource(_).setData({type:T,features:t.sources.cold}),t.ctx.map.getSource(y).setData({type:T,features:t.sources.hot}),t._emitSelectionChange&&(t.ctx.map.fire(B,{features:t.getSelected().map((function(t){return t.toGeoJSON()})),points:t.getSelectedCoordinates().map((function(t){return{type:I,properties:{},geometry:{type:P,coordinates:t.coordinates}}}))}),t._emitSelectionChange=!1),t._deletedFeaturesToEmit.length){var s=t._deletedFeaturesToEmit.map((function(t){return t.toGeoJSON()}));t._deletedFeaturesToEmit=[],t.ctx.map.fire(D,{features:s})}function l(){t.isDirty=!1,t.clearChangedIds()}l(),t.ctx.map.fire(U,{})}function St(t){var e,n=this;this._features={},this._featureIds=new et,this._selectedFeatureIds=new et,this._selectedCoordinates=[],this._changedFeatureIds=new et,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=t,this.sources={hot:[],cold:[]},this.render=function(){e||(e=requestAnimationFrame((function(){e=null,kt.call(n)})))},this.isDirty=!1}function Et(t,e){var n=t._selectedCoordinates.filter((function(e){return t._selectedFeatureIds.has(e.feature_id)}));t._selectedCoordinates.length===n.length||e.silent||(t._emitSelectionChange=!0),t._selectedCoordinates=n}St.prototype.createRenderBatch=function(){var t=this,e=this.render,n=0;return this.render=function(){n++},function(){t.render=e,n>0&&t.render()}},St.prototype.setDirty=function(){return this.isDirty=!0,this},St.prototype.featureChanged=function(t){return this._changedFeatureIds.add(t),this},St.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},St.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},St.prototype.getAllIds=function(){return this._featureIds.values()},St.prototype.add=function(t){return this.featureChanged(t.id),this._features[t.id]=t,this._featureIds.add(t.id),this},St.prototype.delete=function(t,e){var n=this;return void 0===e&&(e={}),wt(t).forEach((function(t){n._featureIds.has(t)&&(n._featureIds.delete(t),n._selectedFeatureIds.delete(t),e.silent||-1===n._deletedFeaturesToEmit.indexOf(n._features[t])&&n._deletedFeaturesToEmit.push(n._features[t]),delete n._features[t],n.isDirty=!0)})),Et(this,e),this},St.prototype.get=function(t){return this._features[t]},St.prototype.getAll=function(){var t=this;return Object.keys(this._features).map((function(e){return t._features[e]}))},St.prototype.select=function(t,e){var n=this;return void 0===e&&(e={}),wt(t).forEach((function(t){n._selectedFeatureIds.has(t)||(n._selectedFeatureIds.add(t),n._changedFeatureIds.add(t),e.silent||(n._emitSelectionChange=!0))})),this},St.prototype.deselect=function(t,e){var n=this;return void 0===e&&(e={}),wt(t).forEach((function(t){n._selectedFeatureIds.has(t)&&(n._selectedFeatureIds.delete(t),n._changedFeatureIds.add(t),e.silent||(n._emitSelectionChange=!0))})),Et(this,e),this},St.prototype.clearSelected=function(t){return void 0===t&&(t={}),this.deselect(this._selectedFeatureIds.values(),{silent:t.silent}),this},St.prototype.setSelected=function(t,e){var n=this;return void 0===e&&(e={}),t=wt(t),this.deselect(this._selectedFeatureIds.values().filter((function(e){return-1===t.indexOf(e)})),{silent:e.silent}),this.select(t.filter((function(t){return!n._selectedFeatureIds.has(t)})),{silent:e.silent}),this},St.prototype.setSelectedCoordinates=function(t){return this._selectedCoordinates=t,this._emitSelectionChange=!0,this},St.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},St.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},St.prototype.getSelected=function(){var t=this;return this._selectedFeatureIds.values().map((function(e){return t.get(e)}))},St.prototype.getSelectedCoordinates=function(){var t=this;return this._selectedCoordinates.map((function(e){return{coordinates:t.get(e.feature_id).getCoordinate(e.coord_path)}}))},St.prototype.isSelected=function(t){return this._selectedFeatureIds.has(t)},St.prototype.setFeatureProperty=function(t,e,n){this.get(t).setProperty(e,n),this.featureChanged(t)},St.prototype.storeMapConfig=function(){var t=this;J.forEach((function(e){t.ctx.map[e]&&(t._mapInitialConfig[e]=t.ctx.map[e].isEnabled())}))},St.prototype.restoreMapConfig=function(){var t=this;Object.keys(this._mapInitialConfig).forEach((function(e){t._mapInitialConfig[e]?t.ctx.map[e].enable():t.ctx.map[e].disable()}))},St.prototype.getInitialConfigValue=function(t){return void 0===this._mapInitialConfig[t]||this._mapInitialConfig[t]};var It=function(){for(var t=arguments,e={},n=0;n<arguments.length;n++){var r=t[n];for(var i in r)Ct.call(r,i)&&(e[i]=r[i])}return e},Ct=Object.prototype.hasOwnProperty,At=["mode","feature","mouse"];function Pt(e){var n=null,r=null,i={onRemove:function(){return e.map.off("load",i.connect),clearInterval(r),i.removeLayers(),e.store.restoreMapConfig(),e.ui.removeButtons(),e.events.removeEventListeners(),e.ui.clearMapClasses(),e.map=null,e.container=null,e.store=null,n&&n.parentNode&&n.parentNode.removeChild(n),n=null,this},connect:function(){e.map.off("load",i.connect),clearInterval(r),i.addLayers(),e.store.storeMapConfig(),e.events.addEventListeners()},onAdd:function(o){var a=o.fire;return o.fire=function(t,e){var n=arguments;return 1===a.length&&1!==arguments.length&&(n=[It({},{type:t},e)]),a.apply(o,n)},e.map=o,e.events=function(e){var n=Object.keys(e.options.modes).reduce((function(t,n){return t[n]=bt(e.options.modes[n]),t}),{}),r={},i={},o={},a=null,s=null;o.drag=function(t,n){n({point:t.point,time:(new Date).getTime()})?(e.ui.queueMapClasses({mouse:w}),s.drag(t)):t.originalEvent.stopPropagation()},o.mousedrag=function(t){o.drag(t,(function(t){return!st(r,t)}))},o.touchdrag=function(t){o.drag(t,(function(t){return!lt(i,t)}))},o.mousemove=function(t){if(1===(void 0!==t.originalEvent.buttons?t.originalEvent.buttons:t.originalEvent.which))return o.mousedrag(t);var n=ot(t,e);t.featureTarget=n,s.mousemove(t)},o.mousedown=function(t){r={time:(new Date).getTime(),point:t.point};var n=ot(t,e);t.featureTarget=n,s.mousedown(t)},o.mouseup=function(t){var n=ot(t,e);t.featureTarget=n,st(r,{point:t.point,time:(new Date).getTime()})?s.click(t):s.mouseup(t)},o.mouseout=function(t){s.mouseout(t)},o.touchstart=function(t){if(t.originalEvent.preventDefault(),e.options.touchEnabled){i={time:(new Date).getTime(),point:t.point};var n=rt.touch(t,null,e)[0];t.featureTarget=n,s.touchstart(t)}},o.touchmove=function(t){if(t.originalEvent.preventDefault(),e.options.touchEnabled)return s.touchmove(t),o.touchdrag(t)},o.touchend=function(t){if(t.originalEvent.preventDefault(),e.options.touchEnabled){var n=rt.touch(t,null,e)[0];t.featureTarget=n,lt(i,{time:(new Date).getTime(),point:t.point})?s.tap(t):s.touchend(t)}};var l=function(t){return!(8===t||46===t||t>=48&&t<=57)};function u(r,i,o){void 0===o&&(o={}),s.stop();var l=n[r];if(void 0===l)throw new Error(r+" is not valid");a=r;var u=l(e,i);s=t(u,e),o.silent||e.map.fire(j,{mode:r}),e.store.setDirty(),e.store.render()}o.keydown=function(t){"mapboxgl-canvas"===(t.srcElement||t.target).classList[0]&&(8!==t.keyCode&&46!==t.keyCode||!e.options.controls.trash?l(t.keyCode)?s.keydown(t):49===t.keyCode&&e.options.controls.point?u(O.DRAW_POINT):50===t.keyCode&&e.options.controls.line_string?u(O.DRAW_LINE_STRING):51===t.keyCode&&e.options.controls.polygon&&u(O.DRAW_POLYGON):(t.preventDefault(),s.trash()))},o.keyup=function(t){l(t.keyCode)&&s.keyup(t)},o.zoomend=function(){e.store.changeZoom()},o.data=function(t){if("style"===t.dataType){var n=e.setup,r=e.map,i=e.options,o=e.store;i.styles.some((function(t){return r.getLayer(t.id)}))||(n.addLayers(),o.setDirty(),o.render())}};var c={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){a=e.options.defaultMode,s=t(n[a](e),e)},changeMode:u,actionable:function(t){var n=!1;Object.keys(t).forEach((function(e){if(void 0===c[e])throw new Error("Invalid action type");c[e]!==t[e]&&(n=!0),c[e]=t[e]})),n&&e.map.fire(Z,{actions:c})},currentModeName:function(){return a},currentModeRender:function(t,e){return s.render(t,e)},fire:function(t,e){o[t]&&o[t](e)},addEventListeners:function(){e.map.on("mousemove",o.mousemove),e.map.on("mousedown",o.mousedown),e.map.on("mouseup",o.mouseup),e.map.on("data",o.data),e.map.on("touchmove",o.touchmove),e.map.on("touchstart",o.touchstart),e.map.on("touchend",o.touchend),e.container.addEventListener("mouseout",o.mouseout),e.options.keybindings&&(e.container.addEventListener("keydown",o.keydown),e.container.addEventListener("keyup",o.keyup))},removeEventListeners:function(){e.map.off("mousemove",o.mousemove),e.map.off("mousedown",o.mousedown),e.map.off("mouseup",o.mouseup),e.map.off("data",o.data),e.map.off("touchmove",o.touchmove),e.map.off("touchstart",o.touchstart),e.map.off("touchend",o.touchend),e.container.removeEventListener("mouseout",o.mouseout),e.options.keybindings&&(e.container.removeEventListener("keydown",o.keydown),e.container.removeEventListener("keyup",o.keyup))},trash:function(t){s.trash(t)},combineFeatures:function(){s.combineFeatures()},uncombineFeatures:function(){s.uncombineFeatures()},getMode:function(){return a}}}(e),e.ui=function(t){var e={},n=null,r={mode:null,feature:null,mouse:null},i={mode:null,feature:null,mouse:null};function o(t){i=It(i,t)}function a(){var e,n;if(t.container){var o=[],a=[];At.forEach((function(t){i[t]!==r[t]&&(o.push(t+"-"+r[t]),null!==i[t]&&a.push(t+"-"+i[t]))})),o.length>0&&(e=t.container.classList).remove.apply(e,o),a.length>0&&(n=t.container.classList).add.apply(n,a),r=It(r,i)}}function v(t,e){void 0===e&&(e={});var r=document.createElement("button");return r.className=l+" "+e.className,r.setAttribute("title",e.title),e.container.appendChild(r),r.addEventListener("click",(function(r){if(r.preventDefault(),r.stopPropagation(),r.target===n)return y(),void e.onDeactivate();_(t),e.onActivate()}),!0),r}function y(){n&&(n.classList.remove(g),n=null)}function _(t){y();var r=e[t];r&&r&&"trash"!==t&&(r.classList.add(g),n=r)}return{setActiveButton:_,queueMapClasses:o,updateMapClasses:a,clearMapClasses:function(){o({mode:null,feature:null,mouse:null}),a()},addButtons:function(){var n=t.options.controls,r=document.createElement("div");return r.className=m+" "+s,n?(n[E.LINE]&&(e[E.LINE]=v(E.LINE,{container:r,className:u,title:"LineString tool "+(t.options.keybindings?"(l)":""),onActivate:function(){return t.events.changeMode(O.DRAW_LINE_STRING)},onDeactivate:function(){return t.events.trash()}})),n[E.POLYGON]&&(e[E.POLYGON]=v(E.POLYGON,{container:r,className:c,title:"Polygon tool "+(t.options.keybindings?"(p)":""),onActivate:function(){return t.events.changeMode(O.DRAW_POLYGON)},onDeactivate:function(){return t.events.trash()}})),n[E.POINT]&&(e[E.POINT]=v(E.POINT,{container:r,className:h,title:"Marker tool "+(t.options.keybindings?"(m)":""),onActivate:function(){return t.events.changeMode(O.DRAW_POINT)},onDeactivate:function(){return t.events.trash()}})),n.trash&&(e.trash=v("trash",{container:r,className:f,title:"Delete",onActivate:function(){t.events.trash()}})),n.combine_features&&(e.combine_features=v("combineFeatures",{container:r,className:p,title:"Combine",onActivate:function(){t.events.combineFeatures()}})),n.uncombine_features&&(e.uncombine_features=v("uncombineFeatures",{container:r,className:d,title:"Uncombine",onActivate:function(){t.events.uncombineFeatures()}})),r):r},removeButtons:function(){Object.keys(e).forEach((function(t){var n=e[t];n.parentNode&&n.parentNode.removeChild(n),delete e[t]}))}}}(e),e.container=o.getContainer(),e.store=new St(e),n=e.ui.addButtons(),e.options.boxSelect&&(o.boxZoom.disable(),o.dragPan.disable(),o.dragPan.enable()),o.loaded()?i.connect():(o.on("load",i.connect),r=setInterval((function(){o.loaded()&&i.connect()}),16)),e.events.start(),n},addLayers:function(){e.map.addSource(_,{data:{type:T,features:[]},type:"geojson"}),e.map.addSource(y,{data:{type:T,features:[]},type:"geojson"}),e.options.styles.forEach((function(t){e.map.addLayer(t)})),e.store.setDirty(!0),e.store.render()},removeLayers:function(){e.options.styles.forEach((function(t){e.map.getLayer(t.id)&&e.map.removeLayer(t.id)})),e.map.getSource(_)&&e.map.removeSource(_),e.map.getSource(y)&&e.map.removeSource(y)}};return e.setup=i,i}function Tt(t){return function(e){var n=e.featureTarget;return!!n&&!!n.properties&&n.properties.meta===t}}function Mt(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.active===$&&t.featureTarget.properties.meta===H}function Lt(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.active===K&&t.featureTarget.properties.meta===H}function Rt(t){return void 0===t.featureTarget}function Nt(t){var e=t.featureTarget;return!!e&&!!e.properties&&e.properties.meta===Y}function Ot(t){return!!t.originalEvent&&!0===t.originalEvent.shiftKey}function zt(t){return 27===t.keyCode}function Dt(t){return 13===t.keyCode}var Ft=Bt;function Bt(t,e){this.x=t,this.y=e}function jt(t,e){var n=e.getBoundingClientRect();return new Ft(t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0))}function Zt(t,e,n,r){return{type:I,properties:{meta:Y,parent:t,coord_path:n,active:r?$:K},geometry:{type:P,coordinates:e}}}function Ut(t,e,n){void 0===e&&(e={}),void 0===n&&(n=null);var r,i=t.geometry,o=i.type,a=i.coordinates,s=t.properties&&t.properties.id,l=[];function u(t,n){var r="",i=null;t.forEach((function(t,o){var a=null!=n?n+"."+o:String(o),u=Zt(s,t,a,c(a));if(e.midpoints&&i){var h=function(t,e,n){var r=e.geometry.coordinates,i=n.geometry.coordinates;if(r[1]>85||r[1]<-85||i[1]>85||i[1]<-85)return null;var o={lng:(r[0]+i[0])/2,lat:(r[1]+i[1])/2};return{type:I,properties:{meta:X,parent:t,lng:o.lng,lat:o.lat,coord_path:n.properties.coord_path},geometry:{type:P,coordinates:[o.lng,o.lat]}}}(s,i,u);h&&l.push(h)}i=u;var f=JSON.stringify(t);r!==f&&l.push(u),0===o&&(r=f)}))}function c(t){return!!e.selectedPaths&&-1!==e.selectedPaths.indexOf(t)}return o===P?l.push(Zt(s,a,n,c(n))):o===C?a.forEach((function(t,e){u(t,null!==n?n+"."+e:String(e))})):o===A?u(a,n):0===o.indexOf(M)&&(r=o.replace(M,""),a.forEach((function(n,i){var o={type:I,properties:t.properties,geometry:{type:r,coordinates:n}};l=l.concat(Ut(o,e,i))}))),l}Bt.prototype={clone:function(){return new Bt(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Bt.convert=function(t){return t instanceof Bt?t:Array.isArray(t)?new Bt(t[0],t[1]):t};var Vt=function(t){setTimeout((function(){t.map&&t.map.doubleClickZoom&&t._ctx&&t._ctx.store&&t._ctx.store.getInitialConfigValue&&t._ctx.store.getInitialConfigValue("doubleClickZoom")&&t.map.doubleClickZoom.enable()}),0)},qt=function(t){setTimeout((function(){t.map&&t.map.doubleClickZoom&&t.map.doubleClickZoom.disable()}),0)},Gt=function(t){if(!t||!t.type)return null;var e=Wt[t.type];return e?"geometry"===e?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===e?{type:"FeatureCollection",features:[t]}:"featurecollection"===e?t:void 0:null},Wt={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function Ht(t){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.reduce((function(t,e){return t.concat(Ht(e))}),[]),t;case"Feature":return t.geometry?Ht(t.geometry).map((function(e){var n={type:"Feature",properties:JSON.parse(JSON.stringify(t.properties)),geometry:e};return void 0!==t.id&&(n.id=t.id),n})):[t];case"MultiPoint":return t.coordinates.map((function(t){return{type:"Point",coordinates:t}}));case"MultiPolygon":return t.coordinates.map((function(t){return{type:"Polygon",coordinates:t}}));case"MultiLineString":return t.coordinates.map((function(t){return{type:"LineString",coordinates:t}}));case"GeometryCollection":return t.geometries.map(Ht).reduce((function(t,e){return t.concat(e)}),[]);case"Point":case"Polygon":case"LineString":return[t]}}var Xt=function(t){if(!t)return[];var e=Ht(Gt(t)),n=[];return e.features.forEach((function(t){t.geometry&&(n=n.concat(function t(e){return Array.isArray(e)&&e.length&&"number"==typeof e[0]?[e]:e.reduce((function(e,n){return Array.isArray(n)&&Array.isArray(n[0])?e.concat(t(n)):(e.push(n),e)}),[])}(t.geometry.coordinates)))})),n},Yt=ut((function(t){var e=t.exports=function(t){return new n(t)};function n(t){this.value=t}function r(t,e,n){var r=[],a=[],c=!0;return function t(h){var f=n?i(h):h,p={},d=!0,m={node:f,node_:h,path:[].concat(r),parent:a[a.length-1],parents:a,key:r.slice(-1)[0],isRoot:0===r.length,level:r.length,circular:null,update:function(t,e){m.isRoot||(m.parent.node[m.key]=t),m.node=t,e&&(d=!1)},delete:function(t){delete m.parent.node[m.key],t&&(d=!1)},remove:function(t){s(m.parent.node)?m.parent.node.splice(m.key,1):delete m.parent.node[m.key],t&&(d=!1)},keys:null,before:function(t){p.before=t},after:function(t){p.after=t},pre:function(t){p.pre=t},post:function(t){p.post=t},stop:function(){c=!1},block:function(){d=!1}};if(!c)return m;function g(){if("object"==typeof m.node&&null!==m.node){m.keys&&m.node_===m.node||(m.keys=o(m.node)),m.isLeaf=0==m.keys.length;for(var t=0;t<a.length;t++)if(a[t].node_===h){m.circular=a[t];break}}else m.isLeaf=!0,m.keys=null;m.notLeaf=!m.isLeaf,m.notRoot=!m.isRoot}g();var v=e.call(m,m.node);return void 0!==v&&m.update&&m.update(v),p.before&&p.before.call(m,m.node),d?("object"!=typeof m.node||null===m.node||m.circular||(a.push(m),g(),l(m.keys,(function(e,i){r.push(e),p.pre&&p.pre.call(m,m.node[e],e);var o=t(m.node[e]);n&&u.call(m.node,e)&&(m.node[e]=o.node),o.isLast=i==m.keys.length-1,o.isFirst=0==i,p.post&&p.post.call(m,o),r.pop()})),a.pop()),p.after&&p.after.call(m,m.node),m):m}(t).node}function i(t){if("object"==typeof t&&null!==t){var e;if(s(t))e=[];else if("[object Date]"===a(t))e=new Date(t.getTime?t.getTime():t);else if(function(t){return"[object RegExp]"===a(t)}(t))e=new RegExp(t);else if(function(t){return"[object Error]"===a(t)}(t))e={message:t.message};else if(function(t){return"[object Boolean]"===a(t)}(t))e=new Boolean(t);else if(function(t){return"[object Number]"===a(t)}(t))e=new Number(t);else if(function(t){return"[object String]"===a(t)}(t))e=new String(t);else if(Object.create&&Object.getPrototypeOf)e=Object.create(Object.getPrototypeOf(t));else if(t.constructor===Object)e={};else{var n=t.constructor&&t.constructor.prototype||t.__proto__||{},r=function(){};r.prototype=n,e=new r}return l(o(t),(function(n){e[n]=t[n]})),e}return t}n.prototype.get=function(t){for(var e=this.value,n=0;n<t.length;n++){var r=t[n];if(!e||!u.call(e,r)){e=void 0;break}e=e[r]}return e},n.prototype.has=function(t){for(var e=this.value,n=0;n<t.length;n++){var r=t[n];if(!e||!u.call(e,r))return!1;e=e[r]}return!0},n.prototype.set=function(t,e){for(var n=this.value,r=0;r<t.length-1;r++){var i=t[r];u.call(n,i)||(n[i]={}),n=n[i]}return n[t[r]]=e,e},n.prototype.map=function(t){return r(this.value,t,!0)},n.prototype.forEach=function(t){return this.value=r(this.value,t,!1),this.value},n.prototype.reduce=function(t,e){var n=1===arguments.length,r=n?this.value:e;return this.forEach((function(e){this.isRoot&&n||(r=t.call(this,r,e))})),r},n.prototype.paths=function(){var t=[];return this.forEach((function(e){t.push(this.path)})),t},n.prototype.nodes=function(){var t=[];return this.forEach((function(e){t.push(this.node)})),t},n.prototype.clone=function(){var t=[],e=[];return function n(r){for(var a=0;a<t.length;a++)if(t[a]===r)return e[a];if("object"==typeof r&&null!==r){var s=i(r);return t.push(r),e.push(s),l(o(r),(function(t){s[t]=n(r[t])})),t.pop(),e.pop(),s}return r}(this.value)};var o=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};function a(t){return Object.prototype.toString.call(t)}var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},l=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)};l(o(n.prototype),(function(t){e[t]=function(e){var r=[].slice.call(arguments,1),i=new n(e);return i[t].apply(i,r)}}));var u=Object.hasOwnProperty||function(t,e){return e in t}})),$t=Kt;function Kt(t){if(!(this instanceof Kt))return new Kt(t);this._bbox=t||[1/0,1/0,-1/0,-1/0],this._valid=!!t}Kt.prototype.include=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[0]),this._bbox[3]=Math.max(this._bbox[3],t[1]),this},Kt.prototype.equals=function(t){var e;return e=t instanceof Kt?t.bbox():t,this._bbox[0]==e[0]&&this._bbox[1]==e[1]&&this._bbox[2]==e[2]&&this._bbox[3]==e[3]},Kt.prototype.center=function(t){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Kt.prototype.union=function(t){var e;return this._valid=!0,e=t instanceof Kt?t.bbox():t,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[2]),this._bbox[3]=Math.max(this._bbox[3],e[3]),this},Kt.prototype.bbox=function(){return this._valid?this._bbox:null},Kt.prototype.contains=function(t){if(!t)return this._fastContains();if(!this._valid)return null;var e=t[0],n=t[1];return this._bbox[0]<=e&&this._bbox[1]<=n&&this._bbox[2]>=e&&this._bbox[3]>=n},Kt.prototype.intersect=function(t){return this._valid?(e=t instanceof Kt?t.bbox():t,!(this._bbox[0]>e[2]||this._bbox[2]<e[0]||this._bbox[3]<e[1]||this._bbox[1]>e[3])):null;var e},Kt.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var t="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",t)},Kt.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Jt={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Qt=Object.keys(Jt),te=function(t){return ee(t).bbox()};function ee(t){for(var e=$t(),n=Xt(t),r=0;r<n.length;r++)e.include(n[r]);return e}function ne(t,e){var n=-90,r=90,i=-90,o=90,a=270,s=-270;t.forEach((function(t){var e=te(t),l=e[1],u=e[3],c=e[0],h=e[2];l>n&&(n=l),u<r&&(r=u),u>i&&(i=u),l<o&&(o=l),c<a&&(a=c),h>s&&(s=h)}));var l=e;return n+l.lat>85&&(l.lat=85-n),i+l.lat>90&&(l.lat=90-i),r+l.lat<-85&&(l.lat=-85-r),o+l.lat<-90&&(l.lat=-90-o),a+l.lng<=-270&&(l.lng+=360*Math.ceil(Math.abs(l.lng)/360)),s+l.lng>=270&&(l.lng-=360*Math.ceil(Math.abs(l.lng)/360)),l}function re(t,e){var n=ne(t.map((function(t){return t.toGeoJSON()})),e);t.forEach((function(t){var e,r=t.getCoordinates(),i=function(t){var e={lng:t[0]+n.lng,lat:t[1]+n.lat};return[e.lng,e.lat]},o=function(t){return t.map((function(t){return i(t)}))};t.type===P?e=i(r):t.type===A||t.type===L?e=r.map(i):t.type===C||t.type===R?e=r.map(o):t.type===N&&(e=r.map((function(t){return t.map((function(t){return o(t)}))}))),t.incomingCoords(e)}))}te.polygon=function(t){return ee(t).polygon()},te.bboxify=function(t){return Yt(t).map((function(t){t&&Qt.some((function(e){return!!t[e]&&-1!==Jt[e].indexOf(t.type)}))&&(t.bbox=ee(t).bbox(),this.update(t))}))};var ie={onSetup:function(t){var e=this,n={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:t.featureIds||[]};return this.setSelected(n.initiallySelectedFeatureIds.filter((function(t){return void 0!==e.getFeature(t)}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),n},fireUpdate:function(){this.map.fire(F,{action:G,features:this.getSelected().map((function(t){return t.toGeoJSON()}))})},fireActionable:function(){var t=this,e=this.getSelected(),n=e.filter((function(e){return t.isInstanceOf("MultiFeature",e)})),r=!1;if(e.length>1){r=!0;var i=e[0].type.replace("Multi","");e.forEach((function(t){t.type.replace("Multi","")!==i&&(r=!1)}))}var o=n.length>0,a=e.length>0;this.setActionableState({combineFeatures:r,uncombineFeatures:o,trash:a})},getUniqueIds:function(t){return t.length?t.map((function(t){return t.properties.id})).filter((function(t){return void 0!==t})).reduce((function(t,e){return t.add(e),t}),new et).values():[]},stopExtendedInteractions:function(t){t.boxSelectElement&&(t.boxSelectElement.parentNode&&t.boxSelectElement.parentNode.removeChild(t.boxSelectElement),t.boxSelectElement=null),this.map.dragPan.enable(),t.boxSelecting=!1,t.canBoxSelect=!1,t.dragMoving=!1,t.canDragMove=!1},onStop:function(){Vt(this)},onMouseMove:function(t){return this.stopExtendedInteractions(t),!0},onMouseOut:function(t){return!t.dragMoving||this.fireUpdate()}};ie.onTap=ie.onClick=function(t,e){return Rt(e)?this.clickAnywhere(t,e):Tt(Y)(e)?this.clickOnVertex(t,e):function(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.meta===H}(e)?this.clickOnFeature(t,e):void 0},ie.clickAnywhere=function(t){var e=this,n=this.getSelectedIds();n.length&&(this.clearSelectedFeatures(),n.forEach((function(t){return e.doRender(t)}))),Vt(this),this.stopExtendedInteractions(t)},ie.clickOnVertex=function(t,e){this.changeMode(O.DIRECT_SELECT,{featureId:e.featureTarget.properties.parent,coordPath:e.featureTarget.properties.coord_path,startPos:e.lngLat}),this.updateUIClasses({mouse:b})},ie.startOnActiveFeature=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),this.doRender(e.featureTarget.properties.id),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},ie.clickOnFeature=function(t,e){var n=this;qt(this),this.stopExtendedInteractions(t);var r=Ot(e),i=this.getSelectedIds(),o=e.featureTarget.properties.id,a=this.isSelected(o);if(!r&&a&&this.getFeature(o).type!==P)return this.changeMode(O.DIRECT_SELECT,{featureId:o});a&&r?(this.deselect(o),this.updateUIClasses({mouse:k}),1===i.length&&Vt(this)):!a&&r?(this.select(o),this.updateUIClasses({mouse:b})):a||r||(i.forEach((function(t){return n.doRender(t)})),this.setSelected(o),this.updateUIClasses({mouse:b})),this.doRender(o)},ie.onMouseDown=function(t,e){return Mt(e)?this.startOnActiveFeature(t,e):this.drawConfig.boxSelect&&function(t){return!!t.originalEvent&&!!t.originalEvent.shiftKey&&0===t.originalEvent.button}(e)?this.startBoxSelect(t,e):void 0},ie.startBoxSelect=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),t.boxSelectStartLocation=jt(e.originalEvent,this.map.getContainer()),t.canBoxSelect=!0},ie.onTouchStart=function(t,e){if(Mt(e))return this.startOnActiveFeature(t,e)},ie.onDrag=function(t,e){return t.canDragMove?this.dragMove(t,e):this.drawConfig.boxSelect&&t.canBoxSelect?this.whileBoxSelect(t,e):void 0},ie.whileBoxSelect=function(t,e){t.boxSelecting=!0,this.updateUIClasses({mouse:x}),t.boxSelectElement||(t.boxSelectElement=document.createElement("div"),t.boxSelectElement.classList.add(v),this.map.getContainer().appendChild(t.boxSelectElement));var n=jt(e.originalEvent,this.map.getContainer()),r=Math.min(t.boxSelectStartLocation.x,n.x),i=Math.max(t.boxSelectStartLocation.x,n.x),o=Math.min(t.boxSelectStartLocation.y,n.y),a=Math.max(t.boxSelectStartLocation.y,n.y),s="translate("+r+"px, "+o+"px)";t.boxSelectElement.style.transform=s,t.boxSelectElement.style.WebkitTransform=s,t.boxSelectElement.style.width=i-r+"px",t.boxSelectElement.style.height=a-o+"px"},ie.dragMove=function(t,e){t.dragMoving=!0,e.originalEvent.stopPropagation();var n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};re(this.getSelected(),n),t.dragMoveLocation=e.lngLat},ie.onMouseUp=function(t,e){var n=this;if(t.dragMoving)this.fireUpdate();else if(t.boxSelecting){var r=[t.boxSelectStartLocation,jt(e.originalEvent,this.map.getContainer())],i=this.featuresAt(null,r,"click"),o=this.getUniqueIds(i).filter((function(t){return!n.isSelected(t)}));o.length&&(this.select(o),o.forEach((function(t){return n.doRender(t)})),this.updateUIClasses({mouse:b}))}this.stopExtendedInteractions(t)},ie.toDisplayFeatures=function(t,e,n){e.properties.active=this.isSelected(e.properties.id)?$:K,n(e),this.fireActionable(),e.properties.active===$&&e.geometry.type!==P&&Ut(e).forEach(n)},ie.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},ie.onCombineFeatures=function(){var t=this.getSelected();if(!(0===t.length||t.length<2)){for(var e=[],n=[],r=t[0].type.replace("Multi",""),i=0;i<t.length;i++){var o=t[i];if(o.type.replace("Multi","")!==r)return;o.type.includes("Multi")?o.getCoordinates().forEach((function(t){e.push(t)})):e.push(o.getCoordinates()),n.push(o.toGeoJSON())}if(n.length>1){var a=this.newFeature({type:I,properties:n[0].properties,geometry:{type:"Multi"+r,coordinates:e}});this.addFeature(a),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([a.id]),this.map.fire(V,{createdFeatures:[a.toGeoJSON()],deletedFeatures:n})}this.fireActionable()}},ie.onUncombineFeatures=function(){var t=this,e=this.getSelected();if(0!==e.length){for(var n=[],r=[],i=function(i){var o=e[i];t.isInstanceOf("MultiFeature",o)&&(o.getFeatures().forEach((function(e){t.addFeature(e),e.properties=o.properties,n.push(e.toGeoJSON()),t.select([e.id])})),t.deleteFeature(o.id,{silent:!0}),r.push(o.toGeoJSON()))},o=0;o<e.length;o++)i(o);n.length>1&&this.map.fire(q,{createdFeatures:n,deletedFeatures:r}),this.fireActionable()}};var oe=Tt(Y),ae=Tt(X),se={fireUpdate:function(){this.map.fire(F,{action:W,features:this.getSelected().map((function(t){return t.toGeoJSON()}))})},fireActionable:function(t){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:t.selectedCoordPaths.length>0})},startDragging:function(t,e){this.map.dragPan.disable(),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},stopDragging:function(t){this.map.dragPan.enable(),t.dragMoving=!1,t.canDragMove=!1,t.dragMoveLocation=null},onVertex:function(t,e){this.startDragging(t,e);var n=e.featureTarget.properties,r=t.selectedCoordPaths.indexOf(n.coord_path);Ot(e)||-1!==r?Ot(e)&&-1===r&&t.selectedCoordPaths.push(n.coord_path):t.selectedCoordPaths=[n.coord_path];var i=this.pathsToCoordinates(t.featureId,t.selectedCoordPaths);this.setSelectedCoordinates(i)},onMidpoint:function(t,e){this.startDragging(t,e);var n=e.featureTarget.properties;t.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(),t.selectedCoordPaths=[n.coord_path]},pathsToCoordinates:function(t,e){return e.map((function(e){return{feature_id:t,coord_path:e}}))},onFeature:function(t,e){0===t.selectedCoordPaths.length?this.startDragging(t,e):this.stopDragging(t)},dragFeature:function(t,e,n){re(this.getSelected(),n),t.dragMoveLocation=e.lngLat},dragVertex:function(t,e,n){for(var r=t.selectedCoordPaths.map((function(e){return t.feature.getCoordinate(e)})),i=ne(r.map((function(t){return{type:I,properties:{},geometry:{type:P,coordinates:t}}})),n),o=0;o<r.length;o++){var a=r[o];t.feature.updateCoordinate(t.selectedCoordPaths[o],a[0]+i.lng,a[1]+i.lat)}},clickNoTarget:function(){this.changeMode(O.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(O.SIMPLE_SELECT)},clickActiveFeature:function(t){t.selectedCoordPaths=[],this.clearSelectedCoordinates(),t.feature.changed()},onSetup:function(t){var e=t.featureId,n=this.getFeature(e);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===P)throw new TypeError("direct_select mode doesn't handle point features");var r={featureId:e,feature:n,dragMoveLocation:t.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:t.coordPath?[t.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(e,r.selectedCoordPaths)),this.setSelected(e),qt(this),this.setActionableState({trash:!0}),r},onStop:function(){Vt(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(t,e,n){t.featureId===e.properties.id?(e.properties.active=$,n(e),Ut(e,{map:this.map,midpoints:!0,selectedPaths:t.selectedCoordPaths}).forEach(n)):(e.properties.active=K,n(e)),this.fireActionable(t)},onTrash:function(t){t.selectedCoordPaths.sort((function(t,e){return e.localeCompare(t,"en",{numeric:!0})})).forEach((function(e){return t.feature.removeCoordinate(e)})),this.fireUpdate(),t.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(t),!1===t.feature.isValid()&&(this.deleteFeature([t.featureId]),this.changeMode(O.SIMPLE_SELECT,{}))},onMouseMove:function(t,e){var n=Mt(e),r=oe(e),i=0===t.selectedCoordPaths.length;return n&&i||r&&!i?this.updateUIClasses({mouse:b}):this.updateUIClasses({mouse:S}),this.stopDragging(t),!0},onMouseOut:function(t){return t.dragMoving&&this.fireUpdate(),!0}};se.onTouchStart=se.onMouseDown=function(t,e){return oe(e)?this.onVertex(t,e):Mt(e)?this.onFeature(t,e):ae(e)?this.onMidpoint(t,e):void 0},se.onDrag=function(t,e){if(!0===t.canDragMove){t.dragMoving=!0,e.originalEvent.stopPropagation();var n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};t.selectedCoordPaths.length>0?this.dragVertex(t,e,n):this.dragFeature(t,e,n),t.dragMoveLocation=e.lngLat}},se.onClick=function(t,e){return Rt(e)?this.clickNoTarget(t,e):Mt(e)?this.clickActiveFeature(t,e):Lt(e)?this.clickInactive(t,e):void this.stopDragging(t)},se.onTap=function(t,e){return Rt(e)?this.clickNoTarget(t,e):Mt(e)?this.clickActiveFeature(t,e):Lt(e)?this.clickInactive(t,e):void 0},se.onTouchEnd=se.onMouseUp=function(t){t.dragMoving&&this.fireUpdate(),this.stopDragging(t)};var le={};function ue(t,e){return!!t.lngLat&&t.lngLat.lng===e[0]&&t.lngLat.lat===e[1]}le.onSetup=function(){var t=this.newFeature({type:I,properties:{},geometry:{type:P,coordinates:[]}});return this.addFeature(t),this.clearSelectedFeatures(),this.updateUIClasses({mouse:x}),this.activateUIButton(E.POINT),this.setActionableState({trash:!0}),{point:t}},le.stopDrawingAndRemove=function(t){this.deleteFeature([t.point.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT)},le.onTap=le.onClick=function(t,e){this.updateUIClasses({mouse:b}),t.point.updateCoordinate("",e.lngLat.lng,e.lngLat.lat),this.map.fire(z,{features:[t.point.toGeoJSON()]}),this.changeMode(O.SIMPLE_SELECT,{featureIds:[t.point.id]})},le.onStop=function(t){this.activateUIButton(),t.point.getCoordinate().length||this.deleteFeature([t.point.id],{silent:!0})},le.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.point.id;if(e.properties.active=r?$:K,!r)return n(e)},le.onTrash=le.stopDrawingAndRemove,le.onKeyUp=function(t,e){if(zt(e)||Dt(e))return this.stopDrawingAndRemove(t,e)};var ce={onSetup:function(){var t=this.newFeature({type:I,properties:{},geometry:{type:C,coordinates:[[]]}});return this.addFeature(t),this.clearSelectedFeatures(),qt(this),this.updateUIClasses({mouse:x}),this.activateUIButton(E.POLYGON),this.setActionableState({trash:!0}),{polygon:t,currentVertexPosition:0}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&ue(e,t.polygon.coordinates[0][t.currentVertexPosition-1]))return this.changeMode(O.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:x}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++,t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(O.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},onMouseMove:function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),Nt(e)&&this.updateUIClasses({mouse:k})}};ce.onTap=ce.onClick=function(t,e){return Nt(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},ce.onKeyUp=function(t,e){zt(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT)):Dt(e)&&this.changeMode(O.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},ce.onStop=function(t){this.updateUIClasses({mouse:S}),Vt(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.removeCoordinate("0."+t.currentVertexPosition),t.polygon.isValid()?this.map.fire(z,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT,{},{silent:!0})))},ce.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?$:K,!r)return n(e);if(0!==e.geometry.coordinates.length){var i=e.geometry.coordinates[0].length;if(!(i<3)){if(e.properties.meta=H,n(Zt(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),i>3){var o=e.geometry.coordinates[0].length-3;n(Zt(t.polygon.id,e.geometry.coordinates[0][o],"0."+o,!1))}if(i<=4){var a=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:I,properties:e.properties,geometry:{coordinates:a,type:A}}),3===i)return}return n(e)}}},ce.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT)};var he={onSetup:function(t){var e,n,r=(t=t||{}).featureId,i="forward";if(r){if(!(e=this.getFeature(r)))throw new Error("Could not find a feature with the provided featureId");var o=t.from;if(o&&"Feature"===o.type&&o.geometry&&"Point"===o.geometry.type&&(o=o.geometry),o&&"Point"===o.type&&o.coordinates&&2===o.coordinates.length&&(o=o.coordinates),!o||!Array.isArray(o))throw new Error("Please use the `from` property to indicate which point to continue the line from");var a=e.coordinates.length-1;if(e.coordinates[a][0]===o[0]&&e.coordinates[a][1]===o[1])n=a+1,e.addCoordinate.apply(e,[n].concat(e.coordinates[a]));else{if(e.coordinates[0][0]!==o[0]||e.coordinates[0][1]!==o[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");i="backwards",n=0,e.addCoordinate.apply(e,[n].concat(e.coordinates[0]))}}else e=this.newFeature({type:I,properties:{},geometry:{type:A,coordinates:[]}}),n=0,this.addFeature(e);return this.clearSelectedFeatures(),qt(this),this.updateUIClasses({mouse:x}),this.activateUIButton(E.LINE),this.setActionableState({trash:!0}),{line:e,currentVertexPosition:n,direction:i}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&ue(e,t.line.coordinates[t.currentVertexPosition-1])||"backwards"===t.direction&&ue(e,t.line.coordinates[t.currentVertexPosition+1]))return this.changeMode(O.SIMPLE_SELECT,{featureIds:[t.line.id]});this.updateUIClasses({mouse:x}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),"forward"===t.direction?(t.currentVertexPosition++,t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)):t.line.addCoordinate(0,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(O.SIMPLE_SELECT,{featureIds:[t.line.id]})},onMouseMove:function(t,e){t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),Nt(e)&&this.updateUIClasses({mouse:k})}};he.onTap=he.onClick=function(t,e){if(Nt(e))return this.clickOnVertex(t,e);this.clickAnywhere(t,e)},he.onKeyUp=function(t,e){Dt(e)?this.changeMode(O.SIMPLE_SELECT,{featureIds:[t.line.id]}):zt(e)&&(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT))},he.onStop=function(t){Vt(this),this.activateUIButton(),void 0!==this.getFeature(t.line.id)&&(t.line.removeCoordinate(""+t.currentVertexPosition),t.line.isValid()?this.map.fire(z,{features:[t.line.toGeoJSON()]}):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT,{},{silent:!0})))},he.onTrash=function(t){this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT)},he.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.line.id;if(e.properties.active=r?$:K,!r)return n(e);e.geometry.coordinates.length<2||(e.properties.meta=H,n(Zt(t.line.id,e.geometry.coordinates["forward"===t.direction?e.geometry.coordinates.length-2:1],""+("forward"===t.direction?e.geometry.coordinates.length-2:1),!1)),n(e))};var fe={simple_select:ie,direct_select:se,draw_point:le,draw_polygon:ce,draw_line_string:he},pe={defaultMode:O.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}],modes:fe,controls:{},userProperties:!1},de={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},me={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function ge(t,e){return t.map((function(t){return t.source?t:It(t,{id:t.id+"."+e,source:"hot"===e?y:_})}))}var ve=ut((function(t,e){var r="[object Arguments]",i="[object Map]",o="[object Object]",a="[object Set]",s=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u[r]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u[i]=u["[object Number]"]=u[o]=u["[object RegExp]"]=u[a]=u["[object String]"]=u["[object WeakMap]"]=!1;var c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,h="object"==typeof self&&self&&self.Object===Object&&self,f=c||h||Function("return this")(),p=e&&!e.nodeType&&e,d=p&&t&&!t.nodeType&&t,m=d&&d.exports===p,g=m&&c.process,v=function(){try{return g&&g.binding&&g.binding("util")}catch(t){}}(),y=v&&v.isTypedArray;function _(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function x(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function b(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var w,k,S,E=Array.prototype,I=Function.prototype,C=Object.prototype,A=f["__core-js_shared__"],P=I.toString,T=C.hasOwnProperty,M=(w=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"",L=C.toString,R=RegExp("^"+P.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N=m?f.Buffer:void 0,O=f.Symbol,z=f.Uint8Array,D=C.propertyIsEnumerable,F=E.splice,B=O?O.toStringTag:void 0,j=Object.getOwnPropertySymbols,Z=N?N.isBuffer:void 0,U=(k=Object.keys,S=Object,function(t){return k(S(t))}),V=vt(f,"DataView"),q=vt(f,"Map"),G=vt(f,"Promise"),W=vt(f,"Set"),H=vt(f,"WeakMap"),X=vt(Object,"create"),Y=bt(V),$=bt(q),K=bt(G),J=bt(W),Q=bt(H),tt=O?O.prototype:void 0,et=tt?tt.valueOf:void 0;function nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function rt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function it(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function ot(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new it;++e<n;)this.add(t[e])}function at(t){var e=this.__data__=new rt(t);this.size=e.size}function st(t,e){var n=St(t),r=!n&&kt(t),i=!n&&!r&&Et(t),o=!n&&!r&&!i&&Tt(t),a=n||r||i||o,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],l=s.length;for(var u in t)!e&&!T.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||xt(u,l))||s.push(u);return s}function lt(t,e){for(var n=t.length;n--;)if(wt(t[n][0],e))return n;return-1}function ut(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":B&&B in Object(t)?function(t){var e=T.call(t,B),n=t[B];try{t[B]=void 0;var r=!0}catch(t){}var i=L.call(t);return r&&(e?t[B]=n:delete t[B]),i}(t):function(t){return L.call(t)}(t)}function ct(t){return Pt(t)&&ut(t)==r}function ht(t,e,n,s,l){return t===e||(null==t||null==e||!Pt(t)&&!Pt(e)?t!=t&&e!=e:function(t,e,n,s,l,u){var c=St(t),h=St(e),f=c?"[object Array]":_t(t),p=h?"[object Array]":_t(e),d=(f=f==r?o:f)==o,m=(p=p==r?o:p)==o,g=f==p;if(g&&Et(t)){if(!Et(e))return!1;c=!0,d=!1}if(g&&!d)return u||(u=new at),c||Tt(t)?dt(t,e,n,s,l,u):function(t,e,n,r,o,s,l){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!s(new z(t),new z(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return wt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case i:var u=x;case a:var c=1&r;if(u||(u=b),t.size!=e.size&&!c)return!1;var h=l.get(t);if(h)return h==e;r|=2,l.set(t,e);var f=dt(u(t),u(e),r,o,s,l);return l.delete(t),f;case"[object Symbol]":if(et)return et.call(t)==et.call(e)}return!1}(t,e,f,n,s,l,u);if(!(1&n)){var v=d&&T.call(t,"__wrapped__"),y=m&&T.call(e,"__wrapped__");if(v||y){var _=v?t.value():t,w=y?e.value():e;return u||(u=new at),l(_,w,n,s,u)}}return!!g&&(u||(u=new at),function(t,e,n,r,i,o){var a=1&n,s=mt(t),l=s.length;if(l!=mt(e).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in e:T.call(e,c)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var p=a;++u<l;){var d=t[c=s[u]],m=e[c];if(r)var g=a?r(m,d,c,e,t,o):r(d,m,c,t,e,o);if(!(void 0===g?d===m||i(d,m,n,r,o):g)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var v=t.constructor,y=e.constructor;v==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,s,l,u))}(t,e,n,s,ht,l))}function ft(t){return!(!At(t)||function(t){return!!M&&M in t}(t))&&(It(t)?R:s).test(bt(t))}function pt(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||C))return U(t);var e,n,r=[];for(var i in Object(t))T.call(t,i)&&"constructor"!=i&&r.push(i);return r}function dt(t,e,n,r,i,o){var a=1&n,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(t);if(u&&o.get(e))return u==e;var c=-1,h=!0,f=2&n?new ot:void 0;for(o.set(t,e),o.set(e,t);++c<s;){var p=t[c],d=e[c];if(r)var m=a?r(d,p,c,e,t,o):r(p,d,c,t,e,o);if(void 0!==m){if(m)continue;h=!1;break}if(f){if(!_(e,(function(t,e){if(a=e,!f.has(a)&&(p===t||i(p,t,n,r,o)))return f.push(e);var a}))){h=!1;break}}else if(p!==d&&!i(p,d,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function mt(t){return function(t,e,n){var r=e(t);return St(t)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(t))}(t,Mt,yt)}function gt(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function vt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return ft(n)?n:void 0}nt.prototype.clear=function(){this.__data__=X?X(null):{},this.size=0},nt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},nt.prototype.get=function(t){var e=this.__data__;if(X){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return T.call(e,t)?e[t]:void 0},nt.prototype.has=function(t){var e=this.__data__;return X?void 0!==e[t]:T.call(e,t)},nt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=X&&void 0===e?"__lodash_hash_undefined__":e,this},rt.prototype.clear=function(){this.__data__=[],this.size=0},rt.prototype.delete=function(t){var e=this.__data__,n=lt(e,t);return!(n<0)&&(n==e.length-1?e.pop():F.call(e,n,1),--this.size,!0)},rt.prototype.get=function(t){var e=this.__data__,n=lt(e,t);return n<0?void 0:e[n][1]},rt.prototype.has=function(t){return lt(this.__data__,t)>-1},rt.prototype.set=function(t,e){var n=this.__data__,r=lt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},it.prototype.clear=function(){this.size=0,this.__data__={hash:new nt,map:new(q||rt),string:new nt}},it.prototype.delete=function(t){var e=gt(this,t).delete(t);return this.size-=e?1:0,e},it.prototype.get=function(t){return gt(this,t).get(t)},it.prototype.has=function(t){return gt(this,t).has(t)},it.prototype.set=function(t,e){var n=gt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},ot.prototype.add=ot.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},ot.prototype.has=function(t){return this.__data__.has(t)},at.prototype.clear=function(){this.__data__=new rt,this.size=0},at.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},at.prototype.get=function(t){return this.__data__.get(t)},at.prototype.has=function(t){return this.__data__.has(t)},at.prototype.set=function(t,e){var n=this.__data__;if(n instanceof rt){var r=n.__data__;if(!q||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new it(r)}return n.set(t,e),this.size=n.size,this};var yt=j?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}(j(t),(function(e){return D.call(t,e)})))}:function(){return[]},_t=ut;function xt(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||l.test(t))&&t>-1&&t%1==0&&t<e}function bt(t){if(null!=t){try{return P.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function wt(t,e){return t===e||t!=t&&e!=e}(V&&"[object DataView]"!=_t(new V(new ArrayBuffer(1)))||q&&_t(new q)!=i||G&&"[object Promise]"!=_t(G.resolve())||W&&_t(new W)!=a||H&&"[object WeakMap]"!=_t(new H))&&(_t=function(t){var e=ut(t),n=e==o?t.constructor:void 0,r=n?bt(n):"";if(r)switch(r){case Y:return"[object DataView]";case $:return i;case K:return"[object Promise]";case J:return a;case Q:return"[object WeakMap]"}return e});var kt=ct(function(){return arguments}())?ct:function(t){return Pt(t)&&T.call(t,"callee")&&!D.call(t,"callee")},St=Array.isArray,Et=Z||function(){return!1};function It(t){if(!At(t))return!1;var e=ut(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ct(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function At(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Pt(t){return null!=t&&"object"==typeof t}var Tt=y?function(t){return function(e){return t(e)}}(y):function(t){return Pt(t)&&Ct(t.length)&&!!u[ut(t)]};function Mt(t){return null!=(e=t)&&Ct(e.length)&&!It(e)?st(t):pt(t);var e}t.exports=function(t,e){return ht(t,e)}})),ye={Polygon:dt,LineString:pt,Point:ft,MultiPolygon:vt,MultiLineString:vt,MultiPoint:vt};function _e(t,e){return e.modes=O,e.getFeatureIdsAt=function(e){return rt.click({point:e},null,t).map((function(t){return t.properties.id}))},e.getSelectedIds=function(){return t.store.getSelectedIds()},e.getSelected=function(){return{type:T,features:t.store.getSelectedIds().map((function(e){return t.store.get(e)})).map((function(t){return t.toGeoJSON()}))}},e.getSelectedPoints=function(){return{type:T,features:t.store.getSelectedCoordinates().map((function(t){return{type:I,properties:{},geometry:{type:P,coordinates:t.coordinates}}}))}},e.set=function(n){if(void 0===n.type||n.type!==T||!Array.isArray(n.features))throw new Error("Invalid FeatureCollection");var r=t.store.createRenderBatch(),i=t.store.getAllIds().slice(),o=e.add(n),a=new et(o);return(i=i.filter((function(t){return!a.has(t)}))).length&&e.delete(i),r(),o},e.add=function(e){var n=JSON.parse(JSON.stringify(Gt(e))).features.map((function(e){if(e.id=e.id||ct(),null===e.geometry)throw new Error("Invalid geometry: null");if(void 0===t.store.get(e.id)||t.store.get(e.id).type!==e.geometry.type){var n=ye[e.geometry.type];if(void 0===n)throw new Error("Invalid geometry type: "+e.geometry.type+".");var r=new n(t,e);t.store.add(r)}else{var i=t.store.get(e.id);i.properties=e.properties,ve(i.getCoordinates(),e.geometry.coordinates)||i.incomingCoords(e.geometry.coordinates)}return e.id}));return t.store.render(),n},e.get=function(e){var n=t.store.get(e);if(n)return n.toGeoJSON()},e.getAll=function(){return{type:T,features:t.store.getAll().map((function(t){return t.toGeoJSON()}))}},e.delete=function(n){return t.store.delete(n,{silent:!0}),e.getMode()!==O.DIRECT_SELECT||t.store.getSelectedIds().length?t.store.render():t.events.changeMode(O.SIMPLE_SELECT,void 0,{silent:!0}),e},e.deleteAll=function(){return t.store.delete(t.store.getAllIds(),{silent:!0}),e.getMode()===O.DIRECT_SELECT?t.events.changeMode(O.SIMPLE_SELECT,void 0,{silent:!0}):t.store.render(),e},e.changeMode=function(n,r){return void 0===r&&(r={}),n===O.SIMPLE_SELECT&&e.getMode()===O.SIMPLE_SELECT?(i=r.featureIds||[],o=t.store.getSelectedIds(),i.length===o.length&&JSON.stringify(i.map((function(t){return t})).sort())===JSON.stringify(o.map((function(t){return t})).sort())||(t.store.setSelected(r.featureIds,{silent:!0}),t.store.render()),e):(n===O.DIRECT_SELECT&&e.getMode()===O.DIRECT_SELECT&&r.featureId===t.store.getSelectedIds()[0]||t.events.changeMode(n,r,{silent:!0}),e);var i,o},e.getMode=function(){return t.events.getMode()},e.trash=function(){return t.events.trash({silent:!0}),e},e.combineFeatures=function(){return t.events.combineFeatures({silent:!0}),e},e.uncombineFeatures=function(){return t.events.uncombineFeatures({silent:!0}),e},e.setFeatureProperty=function(n,r,i){return t.store.setFeatureProperty(n,r,i),e},e}var xe=function(t,e){var n={options:t=function(t){void 0===t&&(t={});var e=It(t);return t.controls||(e.controls={}),!1===t.displayControlsDefault?e.controls=It(me,t.controls):e.controls=It(de,t.controls),(e=It(pe,e)).styles=ge(e.styles,"cold").concat(ge(e.styles,"hot")),e}(t)};e=_e(n,e),n.api=e;var r=Pt(n);return e.onAdd=r.onAdd,e.onRemove=r.onRemove,e.types=E,e.options=t,e};function be(t){xe(t,this)}return be.modes=fe,be}()},1380:function(t){function e(t,e){var n=t.getCenter(),r=t.getZoom(),i=t.getBearing(),o=t.getPitch();e.forEach((function(t){t.jumpTo({center:n,zoom:r,bearing:i,pitch:o})}))}t.exports=function(){var t,n=arguments.length;if(1===n)t=arguments[0];else{t=[];for(var r=0;r<n;r++)t.push(arguments[r])}var i=[];function o(){t.forEach((function(t,e){t.on("move",i[e])}))}function a(){t.forEach((function(t,e){t.off("move",i[e])}))}function s(t,n){a(),e(t,n),o()}return t.forEach((function(e,n){i[n]=s.bind(null,e,t.filter((function(t,e){return e!==n})))})),o(),function(){a(),i=[]}}},7829:function(t,e){"use strict";var n=function(t){return t},r=function(){var t=n;return{configure:function(e){t=e},generate:function(e){return t(e)},reset:function(){t=n}}}();e.Z=r},767:function(t,e,n){"use strict";function r(t,e,n){var r={};return Object.keys(t).forEach((function(i){r[i]=t[i].reduce((function(t,r){return r&&(n&&n[r]&&t.push(n[r]),t.push(e(r))),t}),[]).join(" ")})),r}n.d(e,{Z:function(){return r}})},5159:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(7829),i={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function o(t,e){return i[e]||"".concat(r.Z.generate(t),"-").concat(e)}},208:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(5159);function i(t,e){var n={};return e.forEach((function(e){n[e]=(0,r.Z)(t,e)})),n}},1163:function(t,e,n){"use strict";var r=n(5318);e.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M18 20H4V6h9V4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-9h-2v9zm-7.79-3.17-1.96-2.36L5.5 18h11l-3.54-4.71zM20 4V1h-2v3h-3c.01.01 0 2 0 2h3v2.99c.01.01 2 0 2 0V6h3V4h-3z"}),"AddPhotoAlternateOutlined");e.Z=a},1598:function(t,e,n){"use strict";var r=n(5318);e.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}),"CloseOutlined");e.Z=a},3578:function(t,e,n){"use strict";var r=n(5318);e.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)([(0,o.jsx)("path",{d:"M8 8H6v7c0 1.1.9 2 2 2h9v-2H8V8z"},"0"),(0,o.jsx)("path",{d:"M20 3h-8c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 8h-8V7h8v4zM4 12H2v7c0 1.1.9 2 2 2h9v-2H4v-7z"},"1")],"DynamicFeedOutlined");e.Z=a},2885:function(t,e,n){"use strict";var r=n(5318);e.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");e.Z=a},1131:function(t,e,n){"use strict";var r=n(5318);e.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");e.Z=a},6443:function(t,e,n){"use strict";var r=n(5318);e.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58C.48 14.9 0 15.62 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29zM20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm4 3.43c0-.81-.48-1.53-1.22-1.85-.85-.37-1.79-.58-2.78-.58-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24v-1.57zm-7.76-2.78c-1.17-.52-2.61-.9-4.24-.9-1.63 0-3.07.39-4.24.9C6.68 14.13 6 15.21 6 16.39V18h12v-1.61c0-1.18-.68-2.26-1.76-2.74zM8.07 16c.09-.23.13-.39.91-.69.97-.38 1.99-.56 3.02-.56s2.05.18 3.02.56c.77.3.81.46.91.69H8.07zM12 8c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m0-2c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"GroupsOutlined");e.Z=a},5860:function(t,e,n){"use strict";var r=n(5318);e.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined");e.Z=a},5035:function(t,e,n){"use strict";var r=n(5318);e.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2s.07-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2s-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"}),"LanguageOutlined");e.Z=a},98:function(t,e,n){"use strict";var r=n(5318);e.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)([(0,o.jsx)("path",{d:"M19 8h-1V3H6v5H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zM8 5h8v3H8V5zm8 14H8v-4h8v4zm2-4v-2H6v2H4v-4c0-.55.45-1 1-1h14c.55 0 1 .45 1 1v4h-2z"},"0"),(0,o.jsx)("circle",{cx:"18",cy:"11.5",r:"1"},"1")],"LocalPrintshopOutlined");e.Z=a},4390:function(t,e,n){"use strict";var r=n(5318);e.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"MenuOutlined");e.Z=a},5539:function(t,e,n){"use strict";var r=n(5318);e.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)([(0,o.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zM7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.88-2.88 7.19-5 9.88C9.92 16.21 7 11.85 7 9z"},"0"),(0,o.jsx)("circle",{cx:"12",cy:"9",r:"2.5"},"1")],"RoomOutlined");e.Z=a},4949:function(t,e,n){"use strict";var r=n(5318);e.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92zM18 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM6 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm12 7.02c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"}),"ShareOutlined");e.Z=a},8363:function(t,e,n){"use strict";var r=n(5318);e.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"m17.66 17.66-1.06 1.06-.71-.71 1.06-1.06-1.94-1.94-1.06 1.06-.71-.71 1.06-1.06-1.94-1.94-1.06 1.06-.71-.71 1.06-1.06L9.7 9.7l-1.06 1.06-.71-.71 1.06-1.06-1.94-1.94-1.06 1.06-.71-.71 1.06-1.06L4 4v14c0 1.1.9 2 2 2h14l-2.34-2.34zM7 17v-5.76L12.76 17H7z"}),"SquareFootOutlined");e.Z=a},9826:function(t,e,n){"use strict";var r=n(5318);e.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 10H3V8h2v4h2V8h2v4h2V8h2v4h2V8h2v4h2V8h2v8z"}),"StraightenOutlined");e.Z=a},3746:function(t,e,n){"use strict";var r=n(5318);e.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");e.Z=a},165:function(t,e,n){"use strict";var r=n(5318);e.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");e.Z=a},5649:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(4454)},1979:function(t,e,n){"use strict";n.d(e,{Z:function(){return N}});var r=n(7462),i=n(3366),o=n(2466),a=n(5080),s=n(4942);function l(t,e,n){var i;return(0,r.Z)({toolbar:(i={minHeight:56},(0,s.Z)(i,"".concat(t.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,s.Z)(i,t.up("sm"),{minHeight:64}),i)},n)}var u=n(6189),c=n(2065),h={black:"#000",white:"#fff"},f={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},p={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},d={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},g={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},v={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},y={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},_=["mode","contrastThreshold","tonalOffset"],x={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:h.white,default:h.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},b={text:{primary:h.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:h.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function w(t,e,n,r){var i=r.light||r,o=r.dark||1.5*r;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:"light"===e?t.light=(0,c.$n)(t.main,i):"dark"===e&&(t.dark=(0,c._j)(t.main,o)))}function k(t){var e=t.mode,n=void 0===e?"light":e,a=t.contrastThreshold,s=void 0===a?3:a,l=t.tonalOffset,k=void 0===l?.2:l,S=(0,i.Z)(t,_),E=t.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[200],light:g[50],dark:g[400]}:{main:g[700],light:g[400],dark:g[800]}}(n),I=t.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[200],light:p[50],dark:p[400]}:{main:p[500],light:p[300],dark:p[700]}}(n),C=t.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:d[500],light:d[300],dark:d[700]}:{main:d[700],light:d[400],dark:d[800]}}(n),A=t.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[400],light:v[300],dark:v[700]}:{main:v[700],light:v[500],dark:v[900]}}(n),P=t.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:y[800],light:y[500],dark:y[900]}}(n),T=t.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[400],light:m[300],dark:m[700]}:{main:"#ed6c02",light:m[500],dark:m[900]}}(n);function M(t){return(0,c.mi)(t,b.text.primary)>=s?b.text.primary:x.text.primary}var L=function(t){var e=t.color,n=t.name,i=t.mainShade,o=void 0===i?500:i,a=t.lightShade,s=void 0===a?300:a,l=t.darkShade,c=void 0===l?700:l;if(!(e=(0,r.Z)({},e)).main&&e[o]&&(e.main=e[o]),!e.hasOwnProperty("main"))throw new Error((0,u.Z)(11,n?" (".concat(n,")"):"",o));if("string"!==typeof e.main)throw new Error((0,u.Z)(12,n?" (".concat(n,")"):"",JSON.stringify(e.main)));return w(e,"light",s,k),w(e,"dark",c,k),e.contrastText||(e.contrastText=M(e.main)),e},R={dark:b,light:x};return(0,o.Z)((0,r.Z)({common:h,mode:n,primary:L({color:E,name:"primary"}),secondary:L({color:I,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:L({color:C,name:"error"}),warning:L({color:T,name:"warning"}),info:L({color:A,name:"info"}),success:L({color:P,name:"success"}),grey:f,contrastThreshold:s,getContrastText:M,augmentColor:L,tonalOffset:k},R[n]),S)}var S=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var E={textTransform:"uppercase"},I='"Roboto", "Helvetica", "Arial", sans-serif';function C(t,e){var n="function"===typeof e?e(t):e,a=n.fontFamily,s=void 0===a?I:a,l=n.fontSize,u=void 0===l?14:l,c=n.fontWeightLight,h=void 0===c?300:c,f=n.fontWeightRegular,p=void 0===f?400:f,d=n.fontWeightMedium,m=void 0===d?500:d,g=n.fontWeightBold,v=void 0===g?700:g,y=n.htmlFontSize,_=void 0===y?16:y,x=n.allVariants,b=n.pxToRem,w=(0,i.Z)(n,S);var k=u/14,C=b||function(t){return"".concat(t/_*k,"rem")},A=function(t,e,n,i,o){return(0,r.Z)({fontFamily:s,fontWeight:t,fontSize:C(e),lineHeight:n},s===I?{letterSpacing:"".concat((a=i/e,Math.round(1e5*a)/1e5),"em")}:{},o,x);var a},P={h1:A(h,96,1.167,-1.5),h2:A(h,60,1.2,-.5),h3:A(p,48,1.167,0),h4:A(p,34,1.235,.25),h5:A(p,24,1.334,0),h6:A(m,20,1.6,.15),subtitle1:A(p,16,1.75,.15),subtitle2:A(m,14,1.57,.1),body1:A(p,16,1.5,.15),body2:A(p,14,1.43,.15),button:A(m,14,1.75,.4,E),caption:A(p,12,1.66,.4),overline:A(p,12,2.66,1,E)};return(0,o.Z)((0,r.Z)({htmlFontSize:_,pxToRem:C,fontFamily:s,fontSize:u,fontWeightLight:h,fontWeightRegular:p,fontWeightMedium:m,fontWeightBold:v},P),w,{clone:!1})}function A(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var P=["none",A(0,2,1,-1,0,1,1,0,0,1,3,0),A(0,3,1,-2,0,2,2,0,0,1,5,0),A(0,3,3,-2,0,3,4,0,0,1,8,0),A(0,2,4,-1,0,4,5,0,0,1,10,0),A(0,3,5,-1,0,5,8,0,0,1,14,0),A(0,3,5,-1,0,6,10,0,0,1,18,0),A(0,4,5,-2,0,7,10,1,0,2,16,1),A(0,5,5,-3,0,8,10,1,0,3,14,2),A(0,5,6,-3,0,9,12,1,0,3,16,2),A(0,6,6,-3,0,10,14,1,0,4,18,3),A(0,6,7,-4,0,11,15,1,0,4,20,3),A(0,7,8,-4,0,12,17,2,0,5,22,4),A(0,7,8,-4,0,13,19,2,0,5,24,4),A(0,7,9,-4,0,14,21,2,0,5,26,4),A(0,8,9,-5,0,15,22,2,0,6,28,5),A(0,8,10,-5,0,16,24,2,0,6,30,5),A(0,8,11,-5,0,17,26,2,0,6,32,5),A(0,9,11,-5,0,18,28,2,0,7,34,6),A(0,9,12,-6,0,19,29,2,0,7,36,6),A(0,10,13,-6,0,20,31,3,0,8,38,7),A(0,10,13,-6,0,21,33,3,0,8,40,7),A(0,10,14,-6,0,22,35,3,0,8,42,7),A(0,11,14,-7,0,23,36,3,0,9,44,8),A(0,11,15,-7,0,24,38,3,0,9,46,8)],T=n(1314),M={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},L=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mixins,n=void 0===e?{}:e,s=t.palette,u=void 0===s?{}:s,c=t.transitions,h=void 0===c?{}:c,f=t.typography,p=void 0===f?{}:f,d=(0,i.Z)(t,L),m=k(u),g=(0,a.Z)(t),v=(0,o.Z)(g,{mixins:l(g.breakpoints,g.spacing,n),palette:m,shadows:P.slice(),typography:C(m,p),transitions:(0,T.ZP)(h),zIndex:(0,r.Z)({},M)});v=(0,o.Z)(v,d);for(var y=arguments.length,_=new Array(y>1?y-1:0),x=1;x<y;x++)_[x-1]=arguments[x];return v=_.reduce((function(t,e){return(0,o.Z)(t,e)}),v)}var N=R},1314:function(t,e,n){"use strict";n.d(e,{ZP:function(){return c},x9:function(){return s}});var r=n(3366),i=n(7462),o=["duration","easing","delay"],a={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},s={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function l(t){return"".concat(Math.round(t),"ms")}function u(t){if(!t)return 0;var e=t/36;return Math.round(10*(4+15*Math.pow(e,.25)+e/5))}function c(t){var e=(0,i.Z)({},a,t.easing),n=(0,i.Z)({},s,t.duration);return(0,i.Z)({getAutoHeightDuration:u,create:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.duration,s=void 0===a?n.standard:a,u=i.easing,c=void 0===u?e.easeInOut:u,h=i.delay,f=void 0===h?0:h;(0,r.Z)(i,o);return(Array.isArray(t)?t:[t]).map((function(t){return"".concat(t," ").concat("string"===typeof s?s:l(s)," ").concat(c," ").concat("string"===typeof f?f:l(f))})).join(",")}},t,{easing:e,duration:n})}},6482:function(t,e,n){"use strict";var r=(0,n(1979).Z)();e.Z=r},7630:function(t,e,n){"use strict";n.d(e,{ZP:function(){return C},FO:function(){return S},Dz:function(){return E}});var r=n(2982),i=n(885),o=n(7462),a=n(3366),s=n(5917),l=n(5080),u=n(7312),c=["variant"];function h(t){return 0===t.length}function f(t){var e=t.variant,n=(0,a.Z)(t,c),r=e||"";return Object.keys(n).sort().forEach((function(e){r+="color"===e?h(r)?t[e]:(0,u.Z)(t[e]):"".concat(h(r)?e:(0,u.Z)(e)).concat((0,u.Z)(t[e].toString()))})),r}var p=n(104),d=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],m=["theme"],g=["theme"];function v(t){return 0===Object.keys(t).length}var y=function(t,e){return e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null},_=function(t,e){var n=[];e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants);var r={};return n.forEach((function(t){var e=f(t.props);r[e]=t.style})),r},x=function(t,e,n,r){var i,o,a=t.ownerState,s=void 0===a?{}:a,l=[],u=null==n||null==(i=n.components)||null==(o=i[r])?void 0:o.variants;return u&&u.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(e){s[e]!==n.props[e]&&t[e]!==n.props[e]&&(r=!1)})),r&&l.push(e[f(n.props)])})),l};function b(t){return"ownerState"!==t&&"theme"!==t&&"sx"!==t&&"as"!==t}var w=(0,l.Z)();var k=n(6482),S=function(t){return b(t)&&"classes"!==t},E=b,I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.defaultTheme,n=void 0===e?w:e,l=t.rootShouldForwardProp,u=void 0===l?b:l,c=t.slotShouldForwardProp,h=void 0===c?b:c,f=t.styleFunctionSx,k=void 0===f?p.Z:f;return function(t){var e,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=l.name,f=l.slot,p=l.skipVariantsResolver,w=l.skipSx,S=l.overridesResolver,E=(0,a.Z)(l,d),I=void 0!==p?p:f&&"Root"!==f||!1,C=w||!1;var A=b;"Root"===f?A=u:f&&(A=h);var P=(0,s.ZP)(t,(0,o.Z)({shouldForwardProp:A,label:e},E)),T=function(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),l=1;l<e;l++)s[l-1]=arguments[l];var u=s?s.map((function(t){return"function"===typeof t&&t.__emotion_real!==t?function(e){var r=e.theme,i=(0,a.Z)(e,m);return t((0,o.Z)({theme:v(r)?n:r},i))}:t})):[],h=t;c&&S&&u.push((function(t){var e=v(t.theme)?n:t.theme,r=y(c,e);if(r){var o={};return Object.entries(r).forEach((function(e){var n=(0,i.Z)(e,2),r=n[0],a=n[1];o[r]="function"===typeof a?a(t):a})),S(t,o)}return null})),c&&!I&&u.push((function(t){var e=v(t.theme)?n:t.theme;return x(t,_(c,e),e,c)})),C||u.push((function(t){var e=v(t.theme)?n:t.theme;return k((0,o.Z)({},t,{theme:e}))}));var f=u.length-s.length;if(Array.isArray(t)&&f>0){var p=new Array(f).fill("");(h=[].concat((0,r.Z)(t),(0,r.Z)(p))).raw=[].concat((0,r.Z)(t.raw),(0,r.Z)(p))}else"function"===typeof t&&t.__emotion_real!==t&&(h=function(e){var r=e.theme,i=(0,a.Z)(e,g);return t((0,o.Z)({theme:v(r)?n:r},i))});var d=P.apply(void 0,[h].concat((0,r.Z)(u)));return d};return P.withConfig&&(T.withConfig=P.withConfig),T}}({defaultTheme:k.Z,rootShouldForwardProp:S}),C=I},3736:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(3073),i=n(418);var o=n(6482);function a(t){return function(t){var e=t.props,n=t.name,o=t.defaultTheme,a=(0,i.Z)(o);return(0,r.Z)({theme:a,name:n,props:e})}({props:t.props,name:t.name,defaultTheme:o.Z})}},4036:function(t,e,n){"use strict";var r=n(7312);e.Z=r.Z},9201:function(t,e,n){"use strict";n.d(e,{Z:function(){return y}});var r=n(7462),i=n(2791),o=n(3366),a=n(8182),s=n(767),l=n(4036),u=n(3736),c=n(7630),h=n(5159);function f(t){return(0,h.Z)("MuiSvgIcon",t)}(0,n(208).Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var p=n(184),d=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],m=(0,c.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,"inherit"!==n.color&&e["color".concat((0,l.Z)(n.color))],e["fontSize".concat((0,l.Z)(n.fontSize))]]}})((function(t){var e,n,r,i,o,a,s,l,u,c,h,f,p,d,m,g,v,y=t.theme,_=t.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(e=y.transitions)||null==(n=e.create)?void 0:n.call(e,"fill",{duration:null==(r=y.transitions)||null==(i=r.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(o=y.typography)||null==(a=o.pxToRem)?void 0:a.call(o,20))||"1.25rem",medium:(null==(s=y.typography)||null==(l=s.pxToRem)?void 0:l.call(s,24))||"1.5rem",large:(null==(u=y.typography)||null==(c=u.pxToRem)?void 0:c.call(u,35))||"2.1875"}[_.fontSize],color:null!=(h=null==(f=y.palette)||null==(p=f[_.color])?void 0:p.main)?h:{action:null==(d=y.palette)||null==(m=d.action)?void 0:m.active,disabled:null==(g=y.palette)||null==(v=g.action)?void 0:v.disabled,inherit:void 0}[_.color]}})),g=i.forwardRef((function(t,e){var n=(0,u.Z)({props:t,name:"MuiSvgIcon"}),i=n.children,c=n.className,h=n.color,g=void 0===h?"inherit":h,v=n.component,y=void 0===v?"svg":v,_=n.fontSize,x=void 0===_?"medium":_,b=n.htmlColor,w=n.inheritViewBox,k=void 0!==w&&w,S=n.titleAccess,E=n.viewBox,I=void 0===E?"0 0 24 24":E,C=(0,o.Z)(n,d),A=(0,r.Z)({},n,{color:g,component:y,fontSize:x,instanceFontSize:t.fontSize,inheritViewBox:k,viewBox:I}),P={};k||(P.viewBox=I);var T=function(t){var e=t.color,n=t.fontSize,r=t.classes,i={root:["root","inherit"!==e&&"color".concat((0,l.Z)(e)),"fontSize".concat((0,l.Z)(n))]};return(0,s.Z)(i,f,r)}(A);return(0,p.jsxs)(m,(0,r.Z)({as:y,className:(0,a.Z)(T.root,c),ownerState:A,focusable:"false",color:b,"aria-hidden":!S||void 0,role:S?"img":void 0,ref:e},P,C,{children:[i,S?(0,p.jsx)("title",{children:S}):null]}))}));g.muiName="SvgIcon";var v=g;function y(t,e){var n=function(n,i){return(0,p.jsx)(v,(0,r.Z)({"data-testid":"".concat(e,"Icon"),ref:i},n,{children:t}))};return n.muiName=v.muiName,i.memo(i.forwardRef(n))}},3199:function(t,e,n){"use strict";var r=n(3981);e.Z=r.Z},4454:function(t,e,n){"use strict";n.r(e),n.d(e,{capitalize:function(){return i.Z},createChainedFunction:function(){return o},createSvgIcon:function(){return a.Z},debounce:function(){return s.Z},deprecatedPropType:function(){return l},isMuiElement:function(){return u.Z},ownerDocument:function(){return c.Z},ownerWindow:function(){return h.Z},requirePropFactory:function(){return f},setRef:function(){return p},unstable_ClassNameGenerator:function(){return b},unstable_useEnhancedEffect:function(){return d.Z},unstable_useId:function(){return m},unsupportedProp:function(){return g},useControlled:function(){return v.Z},useEventCallback:function(){return y.Z},useForkRef:function(){return _.Z},useIsFocusVisible:function(){return x.Z}});var r=n(7829),i=n(4036),o=n(8949).Z,a=n(9201),s=n(3199);var l=function(t,e){return function(){return null}},u=n(9103),c=n(8301),h=n(7602);n(7462);var f=function(t,e){return function(){return null}},p=n(2971).Z,d=n(162),m=n(6248).Z;var g=function(t,e,n,r,i){return null},v=n(8744),y=n(9683),_=n(2071),x=n(8221),b={configure:function(t){console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),r.Z.configure(t)}}},9103:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(2791);var i=function(t,e){return r.isValidElement(t)&&-1!==e.indexOf(t.type.muiName)}},8301:function(t,e,n){"use strict";var r=n(9723);e.Z=r.Z},7602:function(t,e,n){"use strict";var r=n(7979);e.Z=r.Z},8744:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(885),i=n(2791);var o=function(t){var e=t.controlled,n=t.default,o=(t.name,t.state,i.useRef(void 0!==e).current),a=i.useState(n),s=(0,r.Z)(a,2),l=s[0],u=s[1];return[o?e:l,i.useCallback((function(t){o||u(t)}),[])]}},162:function(t,e,n){"use strict";var r=n(5721);e.Z=r.Z},9683:function(t,e,n){"use strict";var r=n(8956);e.Z=r.Z},2071:function(t,e,n){"use strict";var r=n(7563);e.Z=r.Z},8221:function(t,e,n){"use strict";var r=n(5372);e.Z=r.Z},8023:function(t,e,n){"use strict";var r=n(2791).createContext(null);e.Z=r},9598:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(2791),i=n(8023);function o(){return r.useContext(i.Z)}},5917:function(t,e,n){"use strict";n.d(e,{ZP:function(){return i}});var r=n(9958);function i(t,e){return(0,r.Z)(t,e)}},1184:function(t,e,n){"use strict";n.d(e,{L7:function(){return s},P$:function(){return l},VO:function(){return r},W8:function(){return a},k9:function(){return o}});var r={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:function(t){return"@media (min-width:".concat(r[t],"px)")}};function o(t,e,n){var o=t.theme||{};if(Array.isArray(e)){var a=o.breakpoints||i;return e.reduce((function(t,r,i){return t[a.up(a.keys[i])]=n(e[i]),t}),{})}if("object"===typeof e){var s=o.breakpoints||i;return Object.keys(e).reduce((function(t,i){if(-1!==Object.keys(s.values||r).indexOf(i)){t[s.up(i)]=n(e[i],i)}else{var o=i;t[o]=e[o]}return t}),{})}return n(e)}function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==e||null==(t=e.keys)?void 0:t.reduce((function(t,n){return t[e.up(n)]={},t}),{});return n||{}}function s(t,e){return t.reduce((function(t,e){var n=t[e];return(!n||0===Object.keys(n).length)&&delete t[e],t}),e)}function l(t){var e,n=t.values,r=t.breakpoints,i=t.base||function(t,e){if("object"!==typeof t)return{};var n={},r=Object.keys(e);return Array.isArray(t)?r.forEach((function(e,r){r<t.length&&(n[e]=!0)})):r.forEach((function(e){null!=t[e]&&(n[e]=!0)})),n}(n,r),o=Object.keys(i);return 0===o.length?n:o.reduce((function(t,r,i){return Array.isArray(n)?(t[r]=null!=n[i]?n[i]:n[e],e=i):(t[r]=null!=n[r]?n[r]:n[e]||n,e=r),t}),{})}},2065:function(t,e,n){"use strict";n.d(e,{$n:function(){return h},Fq:function(){return u},_4:function(){return f},_j:function(){return c},mi:function(){return l}});var r=n(6189);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)}function o(t){if(t.type)return t;if("#"===t.charAt(0))return o(function(t){t=t.slice(1);var e=new RegExp(".{1,".concat(t.length>=6?2:1,"}"),"g"),n=t.match(e);return n&&1===n[0].length&&(n=n.map((function(t){return t+t}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(t,e){return e<3?parseInt(t,16):Math.round(parseInt(t,16)/255*1e3)/1e3})).join(", "),")"):""}(t));var e=t.indexOf("("),n=t.substring(0,e);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.Z)(9,t));var i,a=t.substring(e+1,t.length-1);if("color"===n){if(i=(a=a.split(" ")).shift(),4===a.length&&"/"===a[3].charAt(0)&&(a[3]=a[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error((0,r.Z)(10,i))}else a=a.split(",");return{type:n,values:a=a.map((function(t){return parseFloat(t)})),colorSpace:i}}function a(t){var e=t.type,n=t.colorSpace,r=t.values;return-1!==e.indexOf("rgb")?r=r.map((function(t,e){return e<3?parseInt(t,10):t})):-1!==e.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==e.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(e,"(").concat(r,")")}function s(t){var e="hsl"===(t=o(t)).type?o(function(t){var e=(t=o(t)).values,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+n/30)%12;return i-s*Math.max(Math.min(e-3,9-e,1),-1)},u="rgb",c=[Math.round(255*l(0)),Math.round(255*l(8)),Math.round(255*l(4))];return"hsla"===t.type&&(u+="a",c.push(e[3])),a({type:u,values:c})}(t)).values:t.values;return e=e.map((function(e){return"color"!==t.type&&(e/=255),e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function l(t,e){var n=s(t),r=s(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function u(t,e){return t=o(t),e=i(e),"rgb"!==t.type&&"hsl"!==t.type||(t.type+="a"),"color"===t.type?t.values[3]="/".concat(e):t.values[3]=e,a(t)}function c(t,e){if(t=o(t),e=i(e),-1!==t.type.indexOf("hsl"))t.values[2]*=1-e;else if(-1!==t.type.indexOf("rgb")||-1!==t.type.indexOf("color"))for(var n=0;n<3;n+=1)t.values[n]*=1-e;return a(t)}function h(t,e){if(t=o(t),e=i(e),-1!==t.type.indexOf("hsl"))t.values[2]+=(100-t.values[2])*e;else if(-1!==t.type.indexOf("rgb"))for(var n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(-1!==t.type.indexOf("color"))for(var r=0;r<3;r+=1)t.values[r]+=(1-t.values[r])*e;return a(t)}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return s(t)>.5?c(t,e):h(t,e)}},5080:function(t,e,n){"use strict";n.d(e,{Z:function(){return p}});var r=n(7462),i=n(3366),o=n(2466),a=n(4942),s=["values","unit","step"];function l(t){var e=t.values,n=void 0===e?{xs:0,sm:600,md:900,lg:1200,xl:1536}:e,o=t.unit,l=void 0===o?"px":o,u=t.step,c=void 0===u?5:u,h=(0,i.Z)(t,s),f=function(t){var e=Object.keys(t).map((function(e){return{key:e,val:t[e]}}))||[];return e.sort((function(t,e){return t.val-e.val})),e.reduce((function(t,e){return(0,r.Z)({},t,(0,a.Z)({},e.key,e.val))}),{})}(n),p=Object.keys(f);function d(t){var e="number"===typeof n[t]?n[t]:t;return"@media (min-width:".concat(e).concat(l,")")}function m(t){var e="number"===typeof n[t]?n[t]:t;return"@media (max-width:".concat(e-c/100).concat(l,")")}function g(t,e){var r=p.indexOf(e);return"@media (min-width:".concat("number"===typeof n[t]?n[t]:t).concat(l,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[p[r]]?n[p[r]]:e)-c/100).concat(l,")")}return(0,r.Z)({keys:p,values:f,up:d,down:m,between:g,only:function(t){return p.indexOf(t)+1<p.length?g(t,p[p.indexOf(t)+1]):d(t)},not:function(t){var e=p.indexOf(t);return 0===e?d(p[1]):e===p.length-1?m(p[e]):g(t,p[p.indexOf(t)+1]).replace("@media","@media not all and")},unit:l},h)}var u={borderRadius:4},c=n(5682);function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(t.mui)return t;var e=(0,c.hB)({spacing:t}),n=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=0===n.length?[1]:n;return i.map((function(t){var n=e(t);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var f=["breakpoints","palette","spacing","shape"];var p=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.breakpoints,n=void 0===e?{}:e,a=t.palette,s=void 0===a?{}:a,c=t.spacing,p=t.shape,d=void 0===p?{}:p,m=(0,i.Z)(t,f),g=l(n),v=h(c),y=(0,o.Z)({breakpoints:g,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},s),spacing:v,shape:(0,r.Z)({},u,d)},m),_=arguments.length,x=new Array(_>1?_-1:0),b=1;b<_;b++)x[b-1]=arguments[b];return y=x.reduce((function(t,e){return(0,o.Z)(t,e)}),y)}},6001:function(t,e,n){"use strict";n.d(e,{Gc:function(){return Y},G$:function(){return X}});var r=n(8529),i=n(8247);var o=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.reduce((function(t,e){return e.filterProps.forEach((function(n){t[n]=e})),t}),{}),o=function(t){return Object.keys(t).reduce((function(e,n){return r[n]?(0,i.Z)(e,r[n](t)):e}),{})};return o.propTypes={},o.filterProps=e.reduce((function(t,e){return t.concat(e.filterProps)}),[]),o},a=n(5682),s=n(1184);function l(t){return"number"!==typeof t?t:"".concat(t,"px solid")}var u=(0,r.Z)({prop:"border",themeKey:"borders",transform:l}),c=(0,r.Z)({prop:"borderTop",themeKey:"borders",transform:l}),h=(0,r.Z)({prop:"borderRight",themeKey:"borders",transform:l}),f=(0,r.Z)({prop:"borderBottom",themeKey:"borders",transform:l}),p=(0,r.Z)({prop:"borderLeft",themeKey:"borders",transform:l}),d=(0,r.Z)({prop:"borderColor",themeKey:"palette"}),m=(0,r.Z)({prop:"borderTopColor",themeKey:"palette"}),g=(0,r.Z)({prop:"borderRightColor",themeKey:"palette"}),v=(0,r.Z)({prop:"borderBottomColor",themeKey:"palette"}),y=(0,r.Z)({prop:"borderLeftColor",themeKey:"palette"}),_=function(t){if(void 0!==t.borderRadius&&null!==t.borderRadius){var e=(0,a.eI)(t.theme,"shape.borderRadius",4,"borderRadius");return(0,s.k9)(t,t.borderRadius,(function(t){return{borderRadius:(0,a.NA)(e,t)}}))}return null};_.propTypes={},_.filterProps=["borderRadius"];var x=o(u,c,h,f,p,d,m,g,v,y,_),b=o((0,r.Z)({prop:"displayPrint",cssProperty:!1,transform:function(t){return{"@media print":{display:t}}}}),(0,r.Z)({prop:"display"}),(0,r.Z)({prop:"overflow"}),(0,r.Z)({prop:"textOverflow"}),(0,r.Z)({prop:"visibility"}),(0,r.Z)({prop:"whiteSpace"})),w=o((0,r.Z)({prop:"flexBasis"}),(0,r.Z)({prop:"flexDirection"}),(0,r.Z)({prop:"flexWrap"}),(0,r.Z)({prop:"justifyContent"}),(0,r.Z)({prop:"alignItems"}),(0,r.Z)({prop:"alignContent"}),(0,r.Z)({prop:"order"}),(0,r.Z)({prop:"flex"}),(0,r.Z)({prop:"flexGrow"}),(0,r.Z)({prop:"flexShrink"}),(0,r.Z)({prop:"alignSelf"}),(0,r.Z)({prop:"justifyItems"}),(0,r.Z)({prop:"justifySelf"})),k=function(t){if(void 0!==t.gap&&null!==t.gap){var e=(0,a.eI)(t.theme,"spacing",8,"gap");return(0,s.k9)(t,t.gap,(function(t){return{gap:(0,a.NA)(e,t)}}))}return null};k.propTypes={},k.filterProps=["gap"];var S=function(t){if(void 0!==t.columnGap&&null!==t.columnGap){var e=(0,a.eI)(t.theme,"spacing",8,"columnGap");return(0,s.k9)(t,t.columnGap,(function(t){return{columnGap:(0,a.NA)(e,t)}}))}return null};S.propTypes={},S.filterProps=["columnGap"];var E=function(t){if(void 0!==t.rowGap&&null!==t.rowGap){var e=(0,a.eI)(t.theme,"spacing",8,"rowGap");return(0,s.k9)(t,t.rowGap,(function(t){return{rowGap:(0,a.NA)(e,t)}}))}return null};E.propTypes={},E.filterProps=["rowGap"];var I=o(k,S,E,(0,r.Z)({prop:"gridColumn"}),(0,r.Z)({prop:"gridRow"}),(0,r.Z)({prop:"gridAutoFlow"}),(0,r.Z)({prop:"gridAutoColumns"}),(0,r.Z)({prop:"gridAutoRows"}),(0,r.Z)({prop:"gridTemplateColumns"}),(0,r.Z)({prop:"gridTemplateRows"}),(0,r.Z)({prop:"gridTemplateAreas"}),(0,r.Z)({prop:"gridArea"})),C=o((0,r.Z)({prop:"position"}),(0,r.Z)({prop:"zIndex",themeKey:"zIndex"}),(0,r.Z)({prop:"top"}),(0,r.Z)({prop:"right"}),(0,r.Z)({prop:"bottom"}),(0,r.Z)({prop:"left"})),A=o((0,r.Z)({prop:"color",themeKey:"palette"}),(0,r.Z)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),(0,r.Z)({prop:"backgroundColor",themeKey:"palette"})),P=(0,r.Z)({prop:"boxShadow",themeKey:"shadows"});function T(t){return t<=1&&0!==t?"".concat(100*t,"%"):t}var M=(0,r.Z)({prop:"width",transform:T}),L=function(t){if(void 0!==t.maxWidth&&null!==t.maxWidth){return(0,s.k9)(t,t.maxWidth,(function(e){var n,r,i;return{maxWidth:(null==(n=t.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[e])||s.VO[e]||T(e)}}))}return null};L.filterProps=["maxWidth"];var R=(0,r.Z)({prop:"minWidth",transform:T}),N=(0,r.Z)({prop:"height",transform:T}),O=(0,r.Z)({prop:"maxHeight",transform:T}),z=(0,r.Z)({prop:"minHeight",transform:T}),D=((0,r.Z)({prop:"size",cssProperty:"width",transform:T}),(0,r.Z)({prop:"size",cssProperty:"height",transform:T}),o(M,L,R,N,O,z,(0,r.Z)({prop:"boxSizing"}))),F=(0,r.Z)({prop:"fontFamily",themeKey:"typography"}),B=(0,r.Z)({prop:"fontSize",themeKey:"typography"}),j=(0,r.Z)({prop:"fontStyle",themeKey:"typography"}),Z=(0,r.Z)({prop:"fontWeight",themeKey:"typography"}),U=(0,r.Z)({prop:"letterSpacing"}),V=(0,r.Z)({prop:"textTransform"}),q=(0,r.Z)({prop:"lineHeight"}),G=(0,r.Z)({prop:"textAlign"}),W=o((0,r.Z)({prop:"typography",cssProperty:!1,themeKey:"typography"}),F,B,j,Z,U,q,G,V),H={borders:x.filterProps,display:b.filterProps,flexbox:w.filterProps,grid:I.filterProps,positions:C.filterProps,palette:A.filterProps,shadows:P.filterProps,sizing:D.filterProps,spacing:a.ZP.filterProps,typography:W.filterProps},X={borders:x,display:b,flexbox:w,grid:I,positions:C,palette:A,shadows:P,sizing:D,spacing:a.ZP,typography:W},Y=Object.keys(H).reduce((function(t,e){return H[e].forEach((function(n){t[n]=X[e]})),t}),{})},8247:function(t,e,n){"use strict";var r=n(2466);e.Z=function(t,e){return e?(0,r.Z)(t,e,{clone:!1}):t}},5682:function(t,e,n){"use strict";n.d(e,{hB:function(){return m},eI:function(){return d},ZP:function(){return w},NA:function(){return g}});var r=n(885),i=n(1184),o=n(8529),a=n(8247);var s={m:"margin",p:"padding"},l={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},u={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}((function(t){if(t.length>2){if(!u[t])return[t];t=u[t]}var e=t.split(""),n=(0,r.Z)(e,2),i=n[0],o=n[1],a=s[i],c=l[o]||"";return Array.isArray(c)?c.map((function(t){return a+t})):[a+c]})),h=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],f=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],p=[].concat(h,f);function d(t,e,n,r){var i,a=null!=(i=(0,o.D)(t,e))?i:n;return"number"===typeof a?function(t){return"string"===typeof t?t:a*t}:Array.isArray(a)?function(t){return"string"===typeof t?t:a[t]}:"function"===typeof a?a:function(){}}function m(t){return d(t,"spacing",8)}function g(t,e){if("string"===typeof e||null==e)return e;var n=t(Math.abs(e));return e>=0?n:"number"===typeof n?-n:"-".concat(n)}function v(t,e,n,r){if(-1===e.indexOf(n))return null;var o=function(t,e){return function(n){return t.reduce((function(t,r){return t[r]=g(e,n),t}),{})}}(c(n),r),a=t[n];return(0,i.k9)(t,a,o)}function y(t,e){var n=m(t.theme);return Object.keys(t).map((function(r){return v(t,e,r,n)})).reduce(a.Z,{})}function _(t){return y(t,h)}function x(t){return y(t,f)}function b(t){return y(t,p)}_.propTypes={},_.filterProps=h,x.propTypes={},x.filterProps=f,b.propTypes={},b.filterProps=p;var w=b},8529:function(t,e,n){"use strict";n.d(e,{D:function(){return a}});var r=n(4942),i=n(7312),o=n(1184);function a(t,e){if(!e||"string"!==typeof e)return null;if(t&&t.vars){var n="vars.".concat(e).split(".").reduce((function(t,e){return t&&t[e]?t[e]:null}),t);if(null!=n)return n}return e.split(".").reduce((function(t,e){return t&&null!=t[e]?t[e]:null}),t)}function s(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof t?t(n):Array.isArray(t)?t[n]||i:a(t,n)||i,e&&(r=e(r)),r}e.Z=function(t){var e=t.prop,n=t.cssProperty,l=void 0===n?t.prop:n,u=t.themeKey,c=t.transform,h=function(t){if(null==t[e])return null;var n=t[e],h=a(t.theme,u)||{};return(0,o.k9)(t,n,(function(t){var n=s(h,c,t);return t===n&&"string"===typeof t&&(n=s(h,c,"".concat(e).concat("default"===t?"":(0,i.Z)(t)),t)),!1===l?n:(0,r.Z)({},l,n)}))};return h.propTypes={},h.filterProps=[e],h}},104:function(t,e,n){"use strict";var r=n(4942),i=n(8247),o=n(6001),a=n(1184);function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.reduce((function(t,e){return t.concat(Object.keys(e))}),[]),i=new Set(r);return e.every((function(t){return i.size===Object.keys(t).length}))}function l(t,e){return"function"===typeof t?t(e):t}var u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.G$,e=Object.keys(t).reduce((function(e,n){return t[n].filterProps.forEach((function(r){e[r]=t[n]})),e}),{});function n(t,n,i){var o,a=(o={},(0,r.Z)(o,t,n),(0,r.Z)(o,"theme",i),o),s=e[t];return s?s(a):(0,r.Z)({},t,n)}function u(t){var o=t||{},c=o.sx,h=o.theme,f=void 0===h?{}:h;if(!c)return null;function p(t){var o=t;if("function"===typeof t)o=t(f);else if("object"!==typeof t)return t;if(!o)return null;var c=(0,a.W8)(f.breakpoints),h=Object.keys(c),p=c;return Object.keys(o).forEach((function(t){var c=l(o[t],f);if(null!==c&&void 0!==c)if("object"===typeof c)if(e[t])p=(0,i.Z)(p,n(t,c,f));else{var h=(0,a.k9)({theme:f},c,(function(e){return(0,r.Z)({},t,e)}));s(h,c)?p[t]=u({sx:c,theme:f}):p=(0,i.Z)(p,h)}else p=(0,i.Z)(p,n(t,c,f))})),(0,a.L7)(h,p)}return Array.isArray(c)?c.map(p):p(c)}return u}();u.filterProps=["sx"],e.Z=u},418:function(t,e,n){"use strict";var r=n(5080),i=n(9120),o=(0,r.Z)();e.Z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return(0,i.Z)(t)}},3073:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(5735);function i(t){var e=t.theme,n=t.name,i=t.props;return e&&e.components&&e.components[n]&&e.components[n].defaultProps?(0,r.Z)(e.components[n].defaultProps,i):i}},9120:function(t,e,n){"use strict";var r=n(9598);function i(t){return 0===Object.keys(t).length}e.Z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=(0,r.Z)();return!e||i(e)?t:e}},7312:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(6189);function i(t){if("string"!==typeof t)throw new Error((0,r.Z)(7));return t.charAt(0).toUpperCase()+t.slice(1)}},8949:function(t,e,n){"use strict";function r(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){return null==e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r),e.apply(this,r)}}),(function(){}))}n.d(e,{Z:function(){return r}})},3981:function(t,e,n){"use strict";function r(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=function(){t.apply(r,o)};clearTimeout(e),e=setTimeout(s,n)}return r.clear=function(){clearTimeout(e)},r}n.d(e,{Z:function(){return r}})},2466:function(t,e,n){"use strict";n.d(e,{P:function(){return i},Z:function(){return o}});var r=n(7462);function i(t){return null!==t&&"object"===typeof t&&t.constructor===Object}function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},a=n.clone?(0,r.Z)({},t):t;return i(t)&&i(e)&&Object.keys(e).forEach((function(r){"__proto__"!==r&&(i(e[r])&&r in t&&i(t[r])?a[r]=o(t[r],e[r],n):a[r]=e[r])})),a}},6189:function(t,e,n){"use strict";function r(t){for(var e="https://mui.com/production-error/?code="+t,n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}n.d(e,{Z:function(){return r}})},9723:function(t,e,n){"use strict";function r(t){return t&&t.ownerDocument||document}n.d(e,{Z:function(){return r}})},7979:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(9723);function i(t){return(0,r.Z)(t).defaultView||window}},5735:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(7462);function i(t,e){var n=(0,r.Z)({},e);return Object.keys(t).forEach((function(e){void 0===n[e]&&(n[e]=t[e])})),n}},2971:function(t,e,n){"use strict";function r(t,e){"function"===typeof t?t(e):t&&(t.current=e)}n.d(e,{Z:function(){return r}})},5721:function(t,e,n){"use strict";var r=n(2791),i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;e.Z=i},8956:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(2791),i=n(5721);function o(t){var e=r.useRef(t);return(0,i.Z)((function(){e.current=t})),r.useCallback((function(){return e.current.apply(void 0,arguments)}),[])}},7563:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(2791),i=n(2971);function o(t,e){return r.useMemo((function(){return null==t&&null==e?null:function(n){(0,i.Z)(t,n),(0,i.Z)(e,n)}}),[t,e])}},6248:function(t,e,n){"use strict";var r;n.d(e,{Z:function(){return l}});var i=n(885),o=n(2791),a=0;var s=(r||(r=n.t(o,2))).useId;function l(t){if(void 0!==s){var e=s();return null!=t?t:e}return function(t){var e=o.useState(t),n=(0,i.Z)(e,2),r=n[0],s=n[1],l=t||r;return o.useEffect((function(){null==r&&s("mui-".concat(a+=1))}),[r]),l}(t)}},5372:function(t,e,n){"use strict";n.d(e,{Z:function(){return f}});var r,i=n(2791),o=!0,a=!1,s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function l(t){t.metaKey||t.altKey||t.ctrlKey||(o=!0)}function u(){o=!1}function c(){"hidden"===this.visibilityState&&a&&(o=!0)}function h(t){var e=t.target;try{return e.matches(":focus-visible")}catch(n){}return o||function(t){var e=t.type,n=t.tagName;return!("INPUT"!==n||!s[e]||t.readOnly)||"TEXTAREA"===n&&!t.readOnly||!!t.isContentEditable}(e)}function f(){var t=i.useCallback((function(t){var e;null!=t&&((e=t.ownerDocument).addEventListener("keydown",l,!0),e.addEventListener("mousedown",u,!0),e.addEventListener("pointerdown",u,!0),e.addEventListener("touchstart",u,!0),e.addEventListener("visibilitychange",c,!0))}),[]),e=i.useRef(!1);return{isFocusVisibleRef:e,onFocus:function(t){return!!h(t)&&(e.current=!0,!0)},onBlur:function(){return!!e.current&&(a=!0,window.clearTimeout(r),r=window.setTimeout((function(){a=!1}),100),e.current=!1,!0)},ref:t}}},2127:function(t,e,n){"use strict";var r=n(2538);function i(t){var e=[1/0,1/0,-1/0,-1/0];return r.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}i.default=i,e.Z=i},7872:function(t,e){"use strict";function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(t[0])||!p(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function a(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function s(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function c(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function f(t){return 180*(t%(2*Math.PI))/Math.PI}function p(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return r(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return s(e).geometry;case"MultiPolygon":return u(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return r(t,e)})),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return i(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return o(t,e)})),n)},e.featureCollection=a,e.multiLineString=s,e.multiPoint=l,e.multiPolygon=u,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=c,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return f(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=f,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return c(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=p,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!p(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},2538:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7872);function i(t,e,n){if(null!==t)for(var r,o,a,s,l,u,c,h,f=0,p=0,d=t.type,m="FeatureCollection"===d,g="Feature"===d,v=m?t.features.length:1,y=0;y<v;y++){l=(h=!!(c=m?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var _=0;_<l;_++){var x=0,b=0;if(null!==(s=h?c.geometries[_]:c)){u=s.coordinates;var w=s.type;switch(f=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(u,p,y,x,b))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],p,y,x,b))return!1;p++,"MultiPoint"===w&&x++}"LineString"===w&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(o=0;o<u[r].length-f;o++){if(!1===e(u[r][o],p,y,x,b))return!1;p++}"MultiLineString"===w&&x++,"Polygon"===w&&b++}"Polygon"===w&&x++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(b=0,o=0;o<u[r].length;o++){for(a=0;a<u[r][o].length-f;a++){if(!1===e(u[r][o][a],p,y,x,b))return!1;p++}b++}x++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===i(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function s(t,e){var n,r,i,o,a,s,l,u,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,m=p?t.features.length:1;for(n=0;n<m;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,u=p?t.features[n].properties:d?t.properties:{},c=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=l?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,u,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,u,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,u,c,h))return!1;f++}}function l(t,e){s(t,(function(t,n,i,o,a){var s,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==e(r.feature(t,i,{bbox:o,id:a}),n,0)&&void 0}switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var c={type:s,coordinates:t.coordinates[u]};if(!1===e(r.feature(c,i),n,u))return!1}}))}function u(t,e){l(t,(function(t,n,o){var a=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var l,u=0,c=0,h=0;return!1!==i(t,(function(i,s,f,p,d){if(void 0===l||n>u||p>c||d>h)return l=i,u=n,c=p,h=d,void(a=0);var m=r.lineString([l,i],t.properties);if(!1===e(m,n,o,d,a))return!1;a++,l=i}))&&void 0}}}))}function c(t,e){if(!t)throw new Error("geojson is required");l(t,(function(t,n,i){if(null!==t.geometry){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===e(r.lineString(a[s],t.properties),n,i,s))return!1}}}))}e.coordAll=function(t){var e=[];return i(t,(function(t){e.push(t)})),e},e.coordEach=i,e.coordReduce=function(t,e,n,r){var o=n;return i(t,(function(t,r,i,a,s){o=0===r&&void 0===n?t:e(o,t,r,i,a,s)}),r),o},e.featureEach=a,e.featureReduce=function(t,e,n){var r=n;return a(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.findPoint=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.coordIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),l=l||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return r.point(u,l,e);case"MultiPoint":return o<0&&(o=u.length+o),r.point(u[o],l,e);case"LineString":return s<0&&(s=u.length+s),r.point(u[s],l,e);case"Polygon":return a<0&&(a=u.length+a),s<0&&(s=u[a].length+s),r.point(u[a][s],l,e);case"MultiLineString":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),r.point(u[o][s],l,e);case"MultiPolygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),s<0&&(s=u[o][a].length-s),r.point(u[o][a][s],l,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.segmentIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),l=l||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),r.lineString([u[s],u[s+1]],l,e);case"Polygon":return a<0&&(a=u.length+a),s<0&&(s=u[a].length+s-1),r.lineString([u[a][s],u[a][s+1]],l,e);case"MultiLineString":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),r.lineString([u[o][s],u[o][s+1]],l,e);case"MultiPolygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),s<0&&(s=u[o][a].length-s-1),r.lineString([u[o][a][s],u[o][a][s+1]],l,e)}throw new Error("geojson is invalid")},e.flattenEach=l,e.flattenReduce=function(t,e,n){var r=n;return l(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},e.geomEach=s,e.geomReduce=function(t,e,n){var r=n;return s(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r},e.lineEach=c,e.lineReduce=function(t,e,n){var r=n;return c(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r},e.propEach=o,e.propReduce=function(t,e,n){var r=n;return o(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.segmentEach=u,e.segmentReduce=function(t,e,n){var r=n,i=!1;return u(t,(function(t,o,a,s,l){r=!1===i&&void 0===n?t:e(r,t,o,a,s,l),i=!0})),r}},4037:function(t,e,n){"use strict";var r=n(2506),i=n(9722),o=i(r("String.prototype.indexOf"));t.exports=function(t,e){var n=r(t,!!e);return"function"===typeof n&&o(t,".prototype.")>-1?i(n):n}},9722:function(t,e,n){"use strict";var r=n(3350),i=n(2506),o=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(a,o),l=i("%Object.getOwnPropertyDescriptor%",!0),u=i("%Object.defineProperty%",!0),c=i("%Math.max%");if(u)try{u({},"a",{value:1})}catch(f){u=null}t.exports=function(t){var e=s(r,a,arguments);if(l&&u){var n=l(e,"length");n.configurable&&u(e,"length",{value:1+c(0,t.length-(arguments.length-1))})}return e};var h=function(){return s(r,o,arguments)};u?u(t.exports,"apply",{value:h}):t.exports.apply=h},8182:function(t,e,n){"use strict";function r(t){var e,n,i="";if("string"===typeof t||"number"===typeof t)i+=t;else if("object"===typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=r(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}function i(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=r(t))&&(i&&(i+=" "),i+=e);return i}n.d(e,{Z:function(){return i}})},4161:function(t,e,n){"use strict";var r=n(2110),i=n(4613),o=n(5021),a=n(4460).orient2d;function s(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;var i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],a=0;a<t.length;a++){var s=t[a];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>i[1]&&(i=s)}var l=[e,n,r,i],u=l.slice();for(a=0;a<t.length;a++)o(t[a],l)||u.push(t[a]);return function(t){t.sort(_);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&p(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var r=[],i=t.length-1;i>=0;i--){for(;r.length>=2&&p(r[r.length-2],r[r.length-1],t[i])<=0;)r.pop();r.push(t[i])}return r.pop(),e.pop(),e.concat(r)}(u)}(t),a=new r(16);a.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},a.compareMinX=function(t,e){return t[0]-e[0]},a.compareMinY=function(t,e){return t[1]-e[1]},a.load(t);for(var s,u=[],c=0;c<i.length;c++){var h=i[c];a.remove(h),s=m(h,s),u.push(s)}var f=new r(16);for(c=0;c<u.length;c++)f.insert(d(u[c]));for(var v=e*e,y=n*n;u.length;){var x=u.shift(),b=x.p,w=x.next.p,k=g(b,w);if(!(k<y)){var S=k/v;(h=l(a,x.prev.p,b,w,x.next.next.p,S,f))&&Math.min(g(h,b),g(h,w))<=S&&(u.push(x),u.push(m(h,x)),a.remove(h),f.remove(x),f.insert(d(x)),f.insert(d(x.next)))}}x=s;var E=[];do{E.push(x.p),x=x.next}while(x!==s);return E.push(x.p),E}function l(t,e,n,r,o,a,s){for(var l=new i([],u),h=t.data;h;){for(var p=0;p<h.children.length;p++){var d=h.children[p],m=h.leaf?v(d,n,r):c(n,r,d);m>a||l.push({node:d,dist:m})}for(;l.length&&!l.peek().node.children;){var g=l.pop(),y=g.node,_=v(y,e,n),x=v(y,r,o);if(g.dist<_&&g.dist<x&&f(n,y,s)&&f(r,y,s))return y}(h=l.pop())&&(h=h.node)}return null}function u(t,e){return t.dist-e.dist}function c(t,e,n){if(h(t,n)||h(e,n))return 0;var r=y(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=y(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=y(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=y(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(r,i,o,a)}function h(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function f(t,e,n){for(var r,i,o,a,s=Math.min(t[0],e[0]),l=Math.min(t[1],e[1]),u=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),h=n.search({minX:s,minY:l,maxX:u,maxY:c}),f=0;f<h.length;f++)if(r=h[f].p,i=h[f].next.p,o=t,r!==(a=e)&&i!==o&&p(r,i,o)>0!==p(r,i,a)>0&&p(o,a,r)>0!==p(o,a,i)>0)return!1;return!0}function p(t,e,n){return a(t[0],t[1],e[0],e[1],n[0],n[1])}function d(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function m(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function g(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function v(t,e,n){var r=e[0],i=e[1],o=n[0]-r,a=n[1]-i;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-i)*a)/(o*o+a*a);s>1?(r=n[0],i=n[1]):s>0&&(r+=o*s,i+=a*s)}return(o=t[0]-r)*o+(a=t[1]-i)*a}function y(t,e,n,r,i,o,a,s){var l,u,c,h,f=n-t,p=r-e,d=a-i,m=s-o,g=t-i,v=e-o,y=f*f+p*p,_=f*d+p*m,x=d*d+m*m,b=f*g+p*v,w=d*g+m*v,k=y*x-_*_,S=k,E=k;0===k?(u=0,S=1,h=w,E=x):(h=y*w-_*b,(u=_*w-x*b)<0?(u=0,h=w,E=x):u>S&&(u=S,h=w+_,E=x)),h<0?(h=0,-b<0?u=0:-b>y?u=S:(u=-b,S=y)):h>E&&(h=E,-b+_<0?u=0:-b+_>y?u=S:(u=-b+_,S=y));var I=(1-(c=0===h?0:h/E))*i+c*a-((1-(l=0===u?0:u/S))*t+l*n),C=(1-c)*o+c*s-((1-l)*e+l*r);return I*I+C*C}function _(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}i.default&&(i=i.default),t.exports=s,t.exports.default=s},2110:function(t){t.exports=function(){"use strict";function t(t,r,i,o,a){!function t(n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=r-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-l*c/s+h)),Math.min(o,Math.floor(r+(s-l)*c/s+h)),a)}var f=n[r],p=i,d=o;for(e(n,i,r),a(n[o],f)>0&&e(n,i,o);p<d;){for(e(n,p,d),p++,d--;a(n[p],f)<0;)p++;for(;a(n[d],f)>0;)d--}0===a(n[i],f)?e(n,i,d):e(n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,r,i||0,o||t.length-1,a||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,r,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var a=t.children[o];s(i,t.leaf?r(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,n,r,i,o){for(var a=[n,r];a.length;)if(!((r=a.pop())-(n=a.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;t(e,s,n,r,o),a.push(n,s,s,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!p(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?r(a):a;p(t,s)&&(e.leaf?n.push(a):f(t,s)?this._all(a,n):i.push(a))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(p(t,o)){if(e.leaf||f(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,a=this.data,s=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),a.leaf){var c=i(t,a.children,e);if(-1!==c)return a.children.splice(c,1),l.push(a),this._condense(l),this}o||a.leaf||!f(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),u.push(n),n=0,r=a,a=a.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,a=n-e+1,s=this._maxEntries;if(a<=s)return o(i=d(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(i=d([])).leaf=!1,i.height=r;var l=Math.ceil(a/s),u=l*Math.ceil(Math.sqrt(s));m(t,e,n,u,this.compareMinX);for(var c=e;c<=n;c+=u){var h=Math.min(c+u-1,n);m(t,c,h,l,this.compareMinY);for(var f=c;f<=h;f+=l){var p=Math.min(f+l-1,h);i.children.push(this._build(t,f,p,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var l=e.children[s],u=c(l),h=(f=t,p=l,(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u);h<o?(o=h,i=u<i?u:i,a=l):h===o&&u<i&&(i=u,a=l)}e=a||e.children[0]}var f,p;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),s(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r),s=d(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},r.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,s,l,u,h,f=1/0,p=1/0,d=e;d<=n-e;d++){var m=a(t,0,d,this.toBBox),g=a(t,d,n,this.toBBox),v=(i=m,o=g,s=void 0,l=void 0,u=void 0,h=void 0,s=Math.max(i.minX,o.minX),l=Math.max(i.minY,o.minY),u=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,u-s)*Math.max(0,h-l)),y=c(m)+c(g);v<f?(f=v,r=d,p=y<p?y:p):v===f&&y<p&&(p=y,r=d)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=a(t,0,e,i),l=a(t,n-e,n,i),u=h(o)+h(l),c=e;c<n-e;c++){var f=t.children[c];s(o,t.leaf?i(f):f),u+=h(o)}for(var p=n-e-1;p>=e;p--){var d=t.children[p];s(l,t.leaf?i(d):d),u+=h(l)}return u},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)s(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}()},4058:function(t,e,n){var r=n(4892),i=n(5450),o=n(3454),a=n(1146),s=n(3535),l=n(2833),u=Date.prototype.getTime;function c(t,e,n){var p=n||{};return!!(p.strict?o(t,e):t===e)||(!t||!e||"object"!==typeof t&&"object"!==typeof e?p.strict?o(t,e):t==e:function(t,e,n){var o,p;if(typeof t!==typeof e)return!1;if(h(t)||h(e))return!1;if(t.prototype!==e.prototype)return!1;if(i(t)!==i(e))return!1;var d=a(t),m=a(e);if(d!==m)return!1;if(d||m)return t.source===e.source&&s(t)===s(e);if(l(t)&&l(e))return u.call(t)===u.call(e);var g=f(t),v=f(e);if(g!==v)return!1;if(g||v){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}if(typeof t!==typeof e)return!1;try{var y=r(t),_=r(e)}catch(x){return!1}if(y.length!==_.length)return!1;for(y.sort(),_.sort(),o=y.length-1;o>=0;o--)if(y[o]!=_[o])return!1;for(o=y.length-1;o>=0;o--)if(!c(t[p=y[o]],e[p],n))return!1;return!0}(t,e,p))}function h(t){return null===t||void 0===t}function f(t){return!(!t||"object"!==typeof t||"number"!==typeof t.length)&&("function"===typeof t.copy&&"function"===typeof t.slice&&!(t.length>0&&"number"!==typeof t[0]))}t.exports=c},9396:function(t,e,n){"use strict";var r=n(4892),i="function"===typeof Symbol&&"symbol"===typeof Symbol("foo"),o=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,l=s&&function(){var t={};try{for(var e in s(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(n){return!1}}(),u=function(t,e,n,r){var i;(!(e in t)||"function"===typeof(i=r)&&"[object Function]"===o.call(i)&&r())&&(l?s(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},c=function(t,e){var n=arguments.length>2?arguments[2]:{},o=r(e);i&&(o=a.call(o,Object.getOwnPropertySymbols(e)));for(var s=0;s<o.length;s+=1)u(t,o[s],e[o[s]],n[o[s]])};c.supportsDescriptors=!!l,t.exports=c},7861:function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(i,a),this._expandCluster(a,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++){this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n)}return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)},2601:function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],"undefined"!==typeof t&&(this.dataset=t),"undefined"!==typeof e&&(this.k=e),"undefined"!==typeof n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(c),s=0,l=0;l<c;l++)a[l]=0;for(var u=0;u<n;u++){var c=this.dataset[u].length;if(o===this.assignments[u]){for(l=0;l<c;l++)a[l]+=this.dataset[u][l];s++}}if(s>0){for(l=0;l<c;l++)a[l]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)"undefined"===typeof e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(r=n(t,e[s]))<i&&(i=r,o=s);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)},3163:function(t,e,n){if(t.exports)var r=n(5047);function i(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}i.prototype.run=function(t,e,n,i){this._init(t,e,n,i);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var l=new r(null,null,"asc"),u=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,u,l),this._expandCluster(s,l))}return this.clusters},i.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},i.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},i.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},i.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},i.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++){if(this._regionQuery(t,n).length>=this.minPts)return n}},i.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},i.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=i)},5047:function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;){if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)},5107:function(t,e,n){t.exports&&(t.exports={DBSCAN:n(7861),KMEANS:n(2601),OPTICS:n(3163),PriorityQueue:n(5047)})},7089:function(t){"use strict";function e(t,e,o){o=o||2;var a,s,l,h,f,d,m,g=e&&e.length,v=g?e[0]*o:t.length,y=n(t,0,v,o,!0),_=[];if(!y||y.next===y.prev)return _;if(g&&(y=function(t,e,i,o){var a,s,l,h=[];for(a=0,s=e.length;a<s;a++)(l=n(t,e[a]*o,a<s-1?e[a+1]*o:t.length,o,!1))===l.next&&(l.steiner=!0),h.push(p(l));for(h.sort(u),a=0;a<h.length;a++)i=r(i=c(h[a],i),i.next);return i}(t,e,y,o)),t.length>80*o){a=l=t[0],s=h=t[1];for(var x=o;x<v;x+=o)(f=t[x])<a&&(a=f),(d=t[x+1])<s&&(s=d),f>l&&(l=f),d>h&&(h=d);m=0!==(m=Math.max(l-a,h-s))?1/m:0}return i(y,_,o,a,s,m),_}function n(t,e,n,r,i){var o,a;if(i===I(t,e,n,r)>0)for(o=e;o<n;o+=r)a=k(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=k(o,t[o],t[o+1],a);return a&&v(a,a.next)&&(S(a),a=a.next),a}function r(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!v(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(S(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function i(t,e,n,u,c,h,p){if(t){!p&&h&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=f(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,l,u=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<u&&(s++,r=r.nextZ);e++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(t,u,c,h);for(var d,m,g=t;t.prev!==t.next;)if(d=t.prev,m=t.next,h?a(t,u,c,h):o(t))e.push(d.i/n),e.push(t.i/n),e.push(m.i/n),S(t),t=m.next,g=m.next;else if((t=m)===g){p?1===p?i(t=s(r(t),e,n),e,n,u,c,h,2):2===p&&l(t,e,n,u,c,h):i(r(t),e,n,u,c,h,1);break}}}function o(t){var e=t.prev,n=t,r=t.next;if(g(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(d(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&g(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function a(t,e,n,r){var i=t.prev,o=t,a=t.next;if(g(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=f(s,l,e,n,r),p=f(u,c,e,n,r),m=t.prevZ,v=t.nextZ;m&&m.z>=h&&v&&v.z<=p;){if(m!==t.prev&&m!==t.next&&d(i.x,i.y,o.x,o.y,a.x,a.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;if(m=m.prevZ,v!==t.prev&&v!==t.next&&d(i.x,i.y,o.x,o.y,a.x,a.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;m&&m.z>=h;){if(m!==t.prev&&m!==t.next&&d(i.x,i.y,o.x,o.y,a.x,a.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;v&&v.z<=p;){if(v!==t.prev&&v!==t.next&&d(i.x,i.y,o.x,o.y,a.x,a.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function s(t,e,n){var i=t;do{var o=i.prev,a=i.next.next;!v(o,a)&&y(o,i,i.next,a)&&b(o,a)&&b(a,o)&&(e.push(o.i/n),e.push(i.i/n),e.push(a.i/n),S(i),S(i.next),i=t=a),i=i.next}while(i!==t);return r(i)}function l(t,e,n,o,a,s){var l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&m(l,u)){var c=w(l,u);return l=r(l,l.next),c=r(c,c.next),i(l,e,n,o,a,s),void i(c,e,n,o,a,s)}u=u.next}l=l.next}while(l!==t)}function u(t,e){return t.x-e.x}function c(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n;var l,u=n,c=n.x,f=n.y,p=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&d(o<f?i:a,o,c,f,o<f?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),b(r,t)&&(l<p||l===p&&(r.x>n.x||r.x===n.x&&h(n,r)))&&(n=r,p=l)),r=r.next}while(r!==u);return n}(t,e);if(!n)return e;var i=w(n,t),o=r(n,n.next);return r(i,i.next),e===n?o:e}function h(t,e){return g(t.prev,t,e.prev)<0&&g(e.next,t,t.next)<0}function f(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function d(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&y(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(b(t,e)&&b(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(g(t.prev,t,e.prev)||g(t,e.prev,e))||v(t,e)&&g(t.prev,t,t.next)>0&&g(e.prev,e,e.next)>0)}function g(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function v(t,e){return t.x===e.x&&t.y===e.y}function y(t,e,n,r){var i=x(g(t,e,n)),o=x(g(t,e,r)),a=x(g(n,r,t)),s=x(g(n,r,e));return i!==o&&a!==s||(!(0!==i||!_(t,n,e))||(!(0!==o||!_(t,r,e))||(!(0!==a||!_(n,t,r))||!(0!==s||!_(n,e,r)))))}function _(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function x(t){return t>0?1:t<0?-1:0}function b(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function w(t,e){var n=new E(t.i,t.x,t.y),r=new E(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function k(t,e,n,r){var i=new E(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function E(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(I(t,0,o,n));if(i)for(var s=0,l=e.length;s<l;s++){var u=e[s]*n,c=s<l-1?e[s+1]*n:t.length;a-=Math.abs(I(t,u,c,n))}var h=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,p=r[s+1]*n,d=r[s+2]*n;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},222:function(t){"use strict";var e="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,r=Object.prototype.toString,i="[object Function]";t.exports=function(t){var o=this;if("function"!==typeof o||r.call(o)!==i)throw new TypeError(e+o);for(var a,s=n.call(arguments,1),l=function(){if(this instanceof a){var e=o.apply(this,s.concat(n.call(arguments)));return Object(e)===e?e:this}return o.apply(t,s.concat(n.call(arguments)))},u=Math.max(0,o.length-s.length),c=[],h=0;h<u;h++)c.push("$"+h);if(a=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(l),o.prototype){var f=function(){};f.prototype=o.prototype,a.prototype=new f,f.prototype=null}return a}},3350:function(t,e,n){"use strict";var r=n(222);t.exports=Function.prototype.bind||r},4042:function(t,e,n){var r=n(4058),i=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:s};function o(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function a(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function s(t,e){return r(t,e,{strict:!0})}i.prototype.compare=function(t,e){if(t.type!==e.type||!a(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=o(t),i=o(e);return r.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),i)}}return!1},i.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},i.prototype.compareLine=function(t,e,n,r){if(!a(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[n],o[n]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},i.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},i.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},i.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every((function(t){return this.some((function(e){return i.compareLine(t,e,1,!0)}))}),r)}return!1},i.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},i.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},i.prototype.removePseudo=function(t){return t},t.exports=i},9234:function(t,e,n){var r=n(2968),i=n(7872),o=n(2538),a=n(2127).Z,s=o.featureEach,l=(o.coordEach,i.polygon,i.featureCollection);function u(t){var e=new r(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),r.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})):s(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})),r.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),r.prototype.remove.call(this,t,e)},e.clear=function(){return r.prototype.clear.call(this)},e.search=function(t){var e=r.prototype.search.call(this,this.toBBox(t));return l(e)},e.collides=function(t){return r.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=r.prototype.all.call(this);return l(t)},e.toJSON=function(){return r.prototype.toJSON.call(this)},e.fromJSON=function(t){return r.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=a(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=a(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=u,t.exports.default=u},2968:function(t){t.exports=function(){"use strict";function t(t,r,i,o,a){!function t(n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=r-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-l*c/s+h)),Math.min(o,Math.floor(r+(s-l)*c/s+h)),a)}var f=n[r],p=i,d=o;for(e(n,i,r),a(n[o],f)>0&&e(n,i,o);p<d;){for(e(n,p,d),p++,d--;a(n[p],f)<0;)p++;for(;a(n[d],f)>0;)d--}0===a(n[i],f)?e(n,i,d):e(n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,r,i||0,o||t.length-1,a||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,r,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var a=t.children[o];s(i,t.leaf?r(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,n,r,i,o){for(var a=[n,r];a.length;)if(!((r=a.pop())-(n=a.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;t(e,s,n,r,o),a.push(n,s,s,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!p(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?r(a):a;p(t,s)&&(e.leaf?n.push(a):f(t,s)?this._all(a,n):i.push(a))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(p(t,o)){if(e.leaf||f(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,a=this.data,s=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),a.leaf){var c=i(t,a.children,e);if(-1!==c)return a.children.splice(c,1),l.push(a),this._condense(l),this}o||a.leaf||!f(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),u.push(n),n=0,r=a,a=a.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,a=n-e+1,s=this._maxEntries;if(a<=s)return o(i=d(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(i=d([])).leaf=!1,i.height=r;var l=Math.ceil(a/s),u=l*Math.ceil(Math.sqrt(s));m(t,e,n,u,this.compareMinX);for(var c=e;c<=n;c+=u){var h=Math.min(c+u-1,n);m(t,c,h,l,this.compareMinY);for(var f=c;f<=h;f+=l){var p=Math.min(f+l-1,h);i.children.push(this._build(t,f,p,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var l=e.children[s],u=c(l),h=(f=t,p=l,(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u);h<o?(o=h,i=u<i?u:i,a=l):h===o&&u<i&&(i=u,a=l)}e=a||e.children[0]}var f,p;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),s(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r),s=d(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},r.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,s,l,u,h,f=1/0,p=1/0,d=e;d<=n-e;d++){var m=a(t,0,d,this.toBBox),g=a(t,d,n,this.toBBox),v=(i=m,o=g,s=void 0,l=void 0,u=void 0,h=void 0,s=Math.max(i.minX,o.minX),l=Math.max(i.minY,o.minY),u=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,u-s)*Math.max(0,h-l)),y=c(m)+c(g);v<f?(f=v,r=d,p=y<p?y:p):v===f&&y<p&&(p=y,r=d)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=a(t,0,e,i),l=a(t,n-e,n,i),u=h(o)+h(l),c=e;c<n-e;c++){var f=t.children[c];s(o,t.leaf?i(f):f),u+=h(o)}for(var p=n-e-1;p>=e;p--){var d=t.children[p];s(l,t.leaf?i(d):d),u+=h(l)}return u},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)s(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}()},2506:function(t,e,n){"use strict";var r,i=SyntaxError,o=Function,a=TypeError,s=function(t){try{return o('"use strict"; return ('+t+").constructor;")()}catch(e){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(A){l=null}var u=function(){throw new a},c=l?function(){try{return u}catch(t){try{return l(arguments,"callee").get}catch(e){return u}}}():u,h=n(697)(),f=Object.getPrototypeOf||function(t){return t.__proto__},p={},d="undefined"===typeof Uint8Array?r:f(Uint8Array),m={"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":h?f([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?f(f([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&h?f((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&h?f((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?f(""[Symbol.iterator]()):r,"%Symbol%":h?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":c,"%TypedArray%":d,"%TypeError%":a,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet},g=function t(e){var n;if("%AsyncFunction%"===e)n=s("async function () {}");else if("%GeneratorFunction%"===e)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=s("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&(n=f(i.prototype))}return m[e]=n,n},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=n(3350),_=n(8316),x=y.call(Function.call,Array.prototype.concat),b=y.call(Function.apply,Array.prototype.splice),w=y.call(Function.call,String.prototype.replace),k=y.call(Function.call,String.prototype.slice),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,I=function(t){var e=k(t,0,1),n=k(t,-1);if("%"===e&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return w(t,S,(function(t,e,n,i){r[r.length]=n?w(i,E,"$1"):e||t})),r},C=function(t,e){var n,r=t;if(_(v,r)&&(r="%"+(n=v[r])[0]+"%"),_(m,r)){var o=m[r];if(o===p&&(o=g(r)),"undefined"===typeof o&&!e)throw new a("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!==typeof t||0===t.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof e)throw new a('"allowMissing" argument must be a boolean');var n=I(t),r=n.length>0?n[0]:"",o=C("%"+r+"%",e),s=o.name,u=o.value,c=!1,h=o.alias;h&&(r=h[0],b(n,x([0,1],h)));for(var f=1,p=!0;f<n.length;f+=1){var d=n[f],g=k(d,0,1),v=k(d,-1);if(('"'===g||"'"===g||"`"===g||'"'===v||"'"===v||"`"===v)&&g!==v)throw new i("property names with quotes must have matching quotes");if("constructor"!==d&&p||(c=!0),_(m,s="%"+(r+="."+d)+"%"))u=m[s];else if(null!=u){if(!(d in u)){if(!e)throw new a("base intrinsic for "+t+" exists, but the property is not available.");return}if(l&&f+1>=n.length){var y=l(u,d);u=(p=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:u[d]}else p=_(u,d),u=u[d];p&&!c&&(m[s]=u)}}return u}},4097:function(t,e,n){var r;!function(i,o,a,s){"use strict";var l,u=["","webkit","Moz","MS","ms","o"],c=o.createElement("div"),h=Math.round,f=Math.abs,p=Date.now;function d(t,e,n){return setTimeout(b(t,n),e)}function m(t,e,n){return!!Array.isArray(t)&&(g(t,n[e],n),!0)}function g(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function v(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}l="function"!==typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var y=v((function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===s)&&(t[r[i]]=e[r[i]]),i++;return t}),"extend","Use `assign`."),_=v((function(t,e){return y(t,e,!0)}),"merge","Use `assign`.");function x(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&l(r,n)}function b(t,e){return function(){return t.apply(e,arguments)}}function w(t,e){return"function"==typeof t?t.apply(e&&e[0]||s,e):t}function k(t,e){return t===s?e:t}function S(t,e,n){g(A(e),(function(e){t.addEventListener(e,n,!1)}))}function E(t,e,n){g(A(e),(function(e){t.removeEventListener(e,n,!1)}))}function I(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function C(t,e){return t.indexOf(e)>-1}function A(t){return t.trim().split(/\s+/g)}function P(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function T(t){return Array.prototype.slice.call(t,0)}function M(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];P(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function L(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<u.length;){if((r=(n=u[o])?n+i:e)in t)return r;o++}return s}var R=1;function N(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var O="ontouchstart"in i,z=L(i,"PointerEvent")!==s,D=O&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),F="touch",B="mouse",j=24,Z=["x","y"],U=["clientX","clientY"];function V(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){w(t.options.enable,[t])&&n.handler(e)},this.init()}function q(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=1&e&&r-i===0,a=12&e&&r-i===0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=G(e));i>1&&!n.firstMultiple?n.firstMultiple=G(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,l=a?a.center:o.center,u=e.center=W(r);e.timeStamp=p(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=$(l,u),e.distance=Y(l,u),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y});e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=X(e.deltaX,e.deltaY);var c=H(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=f(c.x)>f(c.y)?c.x:c.y,e.scale=a?(h=a.pointers,d=r,Y(d[0],d[1],U)/Y(h[0],h[1],U)):1,e.rotation=a?function(t,e){return $(e[1],e[0],U)+$(t[1],t[0],U)}(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,o,a=t.lastInterval||e,l=e.timeStamp-a.timeStamp;if(8!=e.eventType&&(l>25||a.velocity===s)){var u=e.deltaX-a.deltaX,c=e.deltaY-a.deltaY,h=H(l,u,c);r=h.x,i=h.y,n=f(h.x)>f(h.y)?h.x:h.y,o=X(u,c),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var h,d;var m=t.element;I(e.srcEvent.target,m)&&(m=e.srcEvent.target);e.target=m}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function G(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:h(t.pointers[n].clientX),clientY:h(t.pointers[n].clientY)},n++;return{timeStamp:p(),pointers:e,center:W(e),deltaX:t.deltaX,deltaY:t.deltaY}}function W(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:h(n/e),y:h(r/e)}}function H(t,e,n){return{x:e/t||0,y:n/t||0}}function X(t,e){return t===e?1:f(t)>=f(e)?t<0?2:4:e<0?8:16}function Y(t,e,n){n||(n=Z);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function $(t,e,n){n||(n=Z);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}V.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(N(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(N(this.element),this.evWin,this.domHandler)}};var K={mousedown:1,mousemove:2,mouseup:4},J="mousedown",Q="mousemove mouseup";function tt(){this.evEl=J,this.evWin=Q,this.pressed=!1,V.apply(this,arguments)}x(tt,V,{handler:function(t){var e=K[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:B,srcEvent:t}))}});var et={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},nt={2:F,3:"pen",4:B,5:"kinect"},rt="pointerdown",it="pointermove pointerup pointercancel";function ot(){this.evEl=rt,this.evWin=it,V.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(rt="MSPointerDown",it="MSPointerMove MSPointerUp MSPointerCancel"),x(ot,V,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=et[r],o=nt[t.pointerType]||t.pointerType,a=o==F,s=P(e,t.pointerId,"pointerId");1&i&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):12&i&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var at={touchstart:1,touchmove:2,touchend:4,touchcancel:8},st="touchstart",lt="touchstart touchmove touchend touchcancel";function ut(){this.evTarget=st,this.evWin=lt,this.started=!1,V.apply(this,arguments)}function ct(t,e){var n=T(t.touches),r=T(t.changedTouches);return 12&e&&(n=M(n.concat(r),"identifier",!0)),[n,r]}x(ut,V,{handler:function(t){var e=at[t.type];if(1===e&&(this.started=!0),this.started){var n=ct.call(this,t,e);12&e&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:F,srcEvent:t})}}});var ht={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ft="touchstart touchmove touchend touchcancel";function pt(){this.evTarget=ft,this.targetIds={},V.apply(this,arguments)}function dt(t,e){var n=T(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=T(t.changedTouches),s=[],l=this.target;if(o=n.filter((function(t){return I(t.target,l)})),1===e)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),12&e&&delete r[a[i].identifier],i++;return s.length?[M(o.concat(s),"identifier",!0),s]:void 0}x(pt,V,{handler:function(t){var e=ht[t.type],n=dt.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:F,srcEvent:t})}});function mt(){V.apply(this,arguments);var t=b(this.handler,this);this.touch=new pt(this.manager,t),this.mouse=new tt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function gt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,vt.call(this,e)):12&t&&vt.call(this,e)}function vt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),2500)}}function yt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=25&&a<=25)return!0}return!1}x(mt,V,{handler:function(t,e,n){var r=n.pointerType==F,i=n.pointerType==B;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)gt.call(this,e,n);else if(i&&yt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var _t=L(c.style,"touchAction"),xt=_t!==s,bt="compute",wt="auto",kt="manipulation",St="none",Et="pan-x",It="pan-y",Ct=function(){if(!xt)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||i.CSS.supports("touch-action",n)})),t}();function At(t,e){this.manager=t,this.set(e)}At.prototype={set:function(t){t==bt&&(t=this.compute()),xt&&this.manager.element.style&&Ct[t]&&(this.manager.element.style[_t]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return g(this.manager.recognizers,(function(e){w(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(C(t,St))return St;var e=C(t,Et),n=C(t,It);if(e&&n)return St;if(e||n)return e?Et:It;if(C(t,kt))return kt;return wt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=C(r,St)&&!Ct.none,o=C(r,It)&&!Ct["pan-y"],a=C(r,Et)&&!Ct["pan-x"];if(i){var s=1===t.pointers.length,l=t.distance<2,u=t.deltaTime<250;if(s&&l&&u)return}if(!a||!o)return i||o&&6&n||a&&n&j?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Pt=32;function Tt(t){this.options=l({},this.defaults,t||{}),this.id=R++,this.manager=null,this.options.enable=k(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Mt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Lt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function Rt(t,e){var n=e.manager;return n?n.get(t):t}function Nt(){Tt.apply(this,arguments)}function Ot(){Nt.apply(this,arguments),this.pX=null,this.pY=null}function zt(){Nt.apply(this,arguments)}function Dt(){Tt.apply(this,arguments),this._timer=null,this._input=null}function Ft(){Nt.apply(this,arguments)}function Bt(){Nt.apply(this,arguments)}function jt(){Tt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Zt(t,e){return(e=e||{}).recognizers=k(e.recognizers,Zt.defaults.preset),new Ut(t,e)}Tt.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(m(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Rt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return m(t,"dropRecognizeWith",this)||(t=Rt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(m(t,"requireFailure",this))return this;var e=this.requireFail;return-1===P(e,t=Rt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(m(t,"dropRequireFailure",this))return this;t=Rt(t,this);var e=P(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+Mt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+Mt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Pt},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!w(this.options.enable,[this,e]))return this.reset(),void(this.state=Pt);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},x(Nt,Tt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(8&n||!i)?16|e:r||i?4&n?8|e:2&e?4|e:2:Pt}}),x(Ot,Nt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(It),t&j&&e.push(Et),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(6&e.direction?(i=0===o?1:o<0?2:4,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?1:a<0?8:16,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return Nt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Lt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),x(zt,Nt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[St]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),x(Dt,Tt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[wt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||12&t.eventType&&!i)this.reset();else if(1&t.eventType)this.reset(),this._timer=d((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return Pt},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),x(Ft,Nt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[St]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),x(Bt,Nt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Ot.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:n&j&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&f(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=Lt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),x(jt,Tt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[kt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||Y(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=d((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Pt},failTimeout:function(){return this._timer=d((function(){this.state=Pt}),this.options.interval,this),Pt},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Zt.VERSION="2.0.7",Zt.defaults={domEvents:!1,touchAction:bt,enable:!0,inputTarget:null,inputClass:null,preset:[[Ft,{enable:!1}],[zt,{enable:!1},["rotate"]],[Bt,{direction:6}],[Ot,{direction:6},["swipe"]],[jt],[jt,{event:"doubletap",taps:2},["tap"]],[Dt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Ut(t,e){var n;this.options=l({},Zt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(z?ot:D?pt:O?mt:tt))(n,q),this.touchAction=new At(this,this.options.touchAction),Vt(this,!0),g(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Vt(t,e){var n,r=t.element;r.style&&(g(t.options.cssProps,(function(i,o){n=L(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}Ut.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Tt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(m(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(m(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=P(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return g(A(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==s){var n=this.handlers;return g(A(t),(function(t){e?n[t]&&n[t].splice(P(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&Vt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Zt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Pt,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:j,DIRECTION_ALL:30,Manager:Ut,Input:V,TouchAction:At,TouchInput:pt,MouseInput:tt,PointerEventInput:ot,TouchMouseInput:mt,SingleTouchInput:ut,Recognizer:Tt,AttrRecognizer:Nt,Tap:jt,Pan:Ot,Swipe:Bt,Pinch:zt,Rotate:Ft,Press:Dt,on:S,off:E,each:g,merge:_,extend:y,assign:l,inherit:x,bindFn:b,prefixed:L}),("undefined"!==typeof i?i:"undefined"!==typeof self?self:{}).Hammer=Zt,(r=function(){return Zt}.call(e,n,e,t))===s||(t.exports=r)}(window,document)},697:function(t,e,n){"use strict";var r="undefined"!==typeof Symbol&&Symbol,i=n(3297);t.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},3297:function(t){"use strict";t.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"===typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"===typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},4707:function(t,e,n){"use strict";var r=n(3297);t.exports=function(){return r()&&!!Symbol.toStringTag}},8316:function(t,e,n){"use strict";var r=n(3350);t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},1975:function(t,e,n){"use strict";var r=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(t){return r.isMemo(t)?a:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,d=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(d){var i=p(n);i&&i!==d&&t(e,i,r)}var a=c(n);h&&(a=a.concat(h(n)));for(var s=l(e),m=l(n),g=0;g<a.length;++g){var v=a[g];if(!o[v]&&(!r||!r[v])&&(!m||!m[v])&&(!s||!s[v])){var y=f(n,v);try{u(e,v,y)}catch(_){}}}}return e}},746:function(t,e){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function b(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case c:case h:case o:case s:case a:case p:return t;default:switch(t=t&&t.$$typeof){case u:case f:case g:case m:case l:return t;default:return e}}case i:return e}}}function w(t){return b(t)===h}e.AsyncMode=c,e.ConcurrentMode=h,e.ContextConsumer=u,e.ContextProvider=l,e.Element=r,e.ForwardRef=f,e.Fragment=o,e.Lazy=g,e.Memo=m,e.Portal=i,e.Profiler=s,e.StrictMode=a,e.Suspense=p,e.isAsyncMode=function(t){return w(t)||b(t)===c},e.isConcurrentMode=w,e.isContextConsumer=function(t){return b(t)===u},e.isContextProvider=function(t){return b(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return b(t)===f},e.isFragment=function(t){return b(t)===o},e.isLazy=function(t){return b(t)===g},e.isMemo=function(t){return b(t)===m},e.isPortal=function(t){return b(t)===i},e.isProfiler=function(t){return b(t)===s},e.isStrictMode=function(t){return b(t)===a},e.isSuspense=function(t){return b(t)===p},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===o||t===h||t===s||t===a||t===p||t===d||"object"===typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===m||t.$$typeof===l||t.$$typeof===u||t.$$typeof===f||t.$$typeof===y||t.$$typeof===_||t.$$typeof===x||t.$$typeof===v)},e.typeOf=b},8309:function(t,e,n){"use strict";t.exports=n(746)},5450:function(t,e,n){"use strict";var r=n(4707)(),i=n(4037)("Object.prototype.toString"),o=function(t){return!(r&&t&&"object"===typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===i(t)},a=function(t){return!!o(t)||null!==t&&"object"===typeof t&&"number"===typeof t.length&&t.length>=0&&"[object Array]"!==i(t)&&"[object Function]"===i(t.callee)},s=function(){return o(arguments)}();o.isLegacyArguments=a,t.exports=s?o:a},2833:function(t,e,n){"use strict";var r=Date.prototype.getDay,i=Object.prototype.toString,o=n(4707)();t.exports=function(t){return"object"===typeof t&&null!==t&&(o?function(t){try{return r.call(t),!0}catch(e){return!1}}(t):"[object Date]"===i.call(t))}},1146:function(t,e,n){"use strict";var r,i,o,a,s=n(4037),l=n(4707)();if(l){r=s("Object.prototype.hasOwnProperty"),i=s("RegExp.prototype.exec"),o={};var u=function(){throw o};a={toString:u,valueOf:u},"symbol"===typeof Symbol.toPrimitive&&(a[Symbol.toPrimitive]=u)}var c=s("Object.prototype.toString"),h=Object.getOwnPropertyDescriptor;t.exports=l?function(t){if(!t||"object"!==typeof t)return!1;var e=h(t,"lastIndex");if(!(e&&r(e,"value")))return!1;try{i(t,a)}catch(n){return n===o}}:function(t){return!(!t||"object"!==typeof t&&"function"!==typeof t)&&"[object RegExp]"===c(t)}},1725:function(t){"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,o){for(var a,s,l=i(t),u=1;u<arguments.length;u++){for(var c in a=Object(arguments[u]))n.call(a,c)&&(l[c]=a[c]);if(e){s=e(a);for(var h=0;h<s.length;h++)r.call(a,s[h])&&(l[s[h]]=a[s[h]])}}return l}},2592:function(t){"use strict";var e=function(t){return t!==t};t.exports=function(t,n){return 0===t&&0===n?1/t===1/n:t===n||!(!e(t)||!e(n))}},3454:function(t,e,n){"use strict";var r=n(9396),i=n(9722),o=n(2592),a=n(3355),s=n(3118),l=i(a(),Object);r(l,{getPolyfill:a,implementation:o,shim:s}),t.exports=l},3355:function(t,e,n){"use strict";var r=n(2592);t.exports=function(){return"function"===typeof Object.is?Object.is:r}},3118:function(t,e,n){"use strict";var r=n(3355),i=n(9396);t.exports=function(){var t=r();return i(Object,{is:t},{is:function(){return Object.is!==t}}),t}},1949:function(t,e,n){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=n(7635),s=Object.prototype.propertyIsEnumerable,l=!s.call({toString:null},"toString"),u=s.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(t){var e=t.constructor;return e&&e.prototype===t},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"===typeof window)return!1;for(var t in window)try{if(!f["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"===typeof window[t])try{h(window[t])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(t){var e=null!==t&&"object"===typeof t,n="[object Function]"===o.call(t),r=a(t),s=e&&"[object String]"===o.call(t),f=[];if(!e&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var d=u&&n;if(s&&t.length>0&&!i.call(t,0))for(var m=0;m<t.length;++m)f.push(String(m));if(r&&t.length>0)for(var g=0;g<t.length;++g)f.push(String(g));else for(var v in t)d&&"prototype"===v||!i.call(t,v)||f.push(String(v));if(l)for(var y=function(t){if("undefined"===typeof window||!p)return h(t);try{return h(t)}catch(e){return!1}}(t),_=0;_<c.length;++_)y&&"constructor"===c[_]||!i.call(t,c[_])||f.push(c[_]);return f}}t.exports=r},4892:function(t,e,n){"use strict";var r=Array.prototype.slice,i=n(7635),o=Object.keys,a=o?function(t){return o(t)}:n(1949),s=Object.keys;a.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return i(t)?s(r.call(t)):s(t)})}else Object.keys=a;return Object.keys||a},t.exports=a},7635:function(t){"use strict";var e=Object.prototype.toString;t.exports=function(t){var n=e.call(t),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==t&&"object"===typeof t&&"number"===typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),r}},5164:function(t){t.exports=function(t,e,n,r){var i=t[0],o=t[1],a=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var s=(r-n)/2,l=0,u=s-1;l<s;u=l++){var c=e[n+2*l+0],h=e[n+2*l+1],f=e[n+2*u+0],p=e[n+2*u+1];h>o!==p>o&&i<(f-c)*(o-h)/(p-h)+c&&(a=!a)}return a}},5021:function(t,e,n){var r=n(5164),i=n(1850);t.exports=function(t,e,n,o){return e.length>0&&Array.isArray(e[0])?i(t,e,n,o):r(t,e,n,o)},t.exports.nested=i,t.exports.flat=r},1850:function(t){t.exports=function(t,e,n,r){var i=t[0],o=t[1],a=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var s=r-n,l=0,u=s-1;l<s;u=l++){var c=e[l+n][0],h=e[l+n][1],f=e[u+n][0],p=e[u+n][1];h>o!==p>o&&i<(f-c)*(o-h)/(p-h)+c&&(a=!a)}return a}},9056:function(t){t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}var r=function(){function t(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}return t}();function i(t,e){return t>e?1:t<e?-1:0}function o(t,e,n){for(var i=new r(null,null),o=i,a=i;;){var s=n(t,e.key);if(s<0){if(null===e.left)break;if(n(t,e.left.key)<0){var l=e.left;if(e.left=l.right,l.right=e,null===(e=l).left)break}a.left=e,a=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(l=e.right,e.right=l.left,l.left=e,null===(e=l).right))break;o.right=e,o=e,e=e.right}}return o.right=e.left,a.left=e.right,e.left=i.right,e.right=i.left,e}function a(t,e,n,i){var a=new r(t,e);if(null===n)return a.left=a.right=null,a;var s=i(t,(n=o(t,n,i)).key);return s<0?(a.left=n.left,a.right=n,n.left=null):s>=0&&(a.right=n.right,a.left=n,n.right=null),a}function s(t,e,n){var r=null,i=null;if(e){var a=n((e=o(t,e,n)).key,t);0===a?(r=e.left,i=e.right):a<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function l(t,e,n){return null===e?t:(null===t||((e=o(t.key,e,n)).left=t),e)}function u(t,e,n,r,i){if(t){r(e+(n?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+i(t)+"\n");var o=e+(n?"    ":"\u2502   ");t.left&&u(t.left,o,!1,r,i),t.right&&u(t.right,o,!0,r,i)}}var c=function(){function t(t){void 0===t&&(t=i),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=a(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new r(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,a=o(t,this._root,i),s=i(t,a.key);return 0===s?this._root=a:(s<0?(n.left=a.left,n.right=a,a.left=null):s>0&&(n.right=a.right,n.left=a,a.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;return null===e?null:0===n(t,(e=o(t,e,n)).key)?(null===e.left?r=e.right:(r=o(t,e.left,n)).right=e.right,this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=o(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=o(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},t.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,a=this._root;0!==i.length||a;)if(a)i.push(a),a=a.left;else{if(o((a=i.pop()).key,e)>0)break;if(o(a.key,t)>=0&&n.call(r,a))return this;a=a.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return p(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&g(t,e,0,r-1,i),null===this._root)this._root=h(t,e,0,r),this._size=r;else{var o=m(this.toList(),f(t,e),i);r=this._size+r,this._root=d({head:o},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return u(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,i=s(t,this._root,r),o=i.left,u=i.right;r(t,e)<0?u=a(e,n,u,r):o=a(e,n,o,r),this._root=l(o,u,r)},t.prototype.split=function(t){return s(t,this._root,this._comparator)},t}();function h(t,e,n,i){var o=i-n;if(o>0){var a=n+Math.floor(o/2),s=t[a],l=e[a],u=new r(s,l);return u.left=h(t,e,n,a),u.right=h(t,e,a+1,i),u}return null}function f(t,e){for(var n=new r(null,null),i=n,o=0;o<t.length;o++)i=i.next=new r(t[o],e[o]);return i.next=null,n.next}function p(t){for(var e=t,n=[],i=!1,o=new r(null,null),a=o;!i;)e?(n.push(e),e=e.left):n.length>0?e=(e=a=a.next=n.pop()).right:i=!0;return a.next=null,o.next}function d(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=d(t,e,i),a=t.head;return a.left=o,t.head=t.head.next,a.right=d(t,i+1,n),a}return null}function m(t,e,n){for(var i=new r(null,null),o=i,a=t,s=e;null!==a&&null!==s;)n(a.key,s.key)<0?(o.next=a,a=a.next):(o.next=s,s=s.next),o=o.next;return null!==a?o.next=a:null!==s&&(o.next=s),i.next}function g(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],a=n-1,s=r+1;;){do{a++}while(i(t[a],o)<0);do{s--}while(i(t[s],o)>0);if(a>=s)break;var l=t[a];t[a]=t[s],t[s]=l,l=e[a],e[a]=e[s],e[s]=l}g(t,e,n,s,i),g(t,e,s+1,r,i)}}var v=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},y=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},_=Number.EPSILON;void 0===_&&(_=Math.pow(2,-52));var x=_*_,b=function(t,e){if(-_<t&&t<_&&-_<e&&e<_)return 0;var n=t-e;return n*n<x*t*e?0:t<e?-1:1},w=function(){function e(){t(this,e),this.reset()}return n(e,[{key:"reset",value:function(){this.xRounder=new k,this.yRounder=new k}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),e}(),k=function(){function e(){t(this,e),this.tree=new c,this.round(0)}return n(e,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===b(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===b(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),e}(),S=new w,E=function(t,e){return t.x*e.y-t.y*e.x},I=function(t,e){return t.x*e.x+t.y*e.y},C=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=E(r,i);return b(o,0)},A=function(t){return Math.sqrt(I(t,t))},P=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return E(i,r)/A(i)/A(r)},T=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return I(i,r)/A(i)/A(r)},M=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},L=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},R=function(t,e,n,r){if(0===e.x)return L(n,r,t.x);if(0===r.x)return L(t,e,n.x);if(0===e.y)return M(n,r,t.y);if(0===r.y)return M(t,e,n.y);var i=E(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},a=E(o,e)/i,s=E(o,r)/i;return{x:(t.x+s*e.x+(n.x+a*r.x))/2,y:(t.y+s*e.y+(n.y+a*r.y))/2}},N=function(){function e(n,r){t(this,e),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r}return n(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return 0!==r?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:z.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),n(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i=r.otherSE;n.set(r,{sine:P(e.point,t.point,i.point),cosine:T(e.point,t.point,i.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,a=i.cosine,s=n.get(e),l=s.sine,u=s.cosine;return o>=0&&l>=0?a<u?1:a>u?-1:0:o<0&&l<0?a<u?-1:a>u?1:0:l<o?-1:l>o?1:0}}}]),e}(),O=0,z=function(){function e(n,r,i,o){t(this,e),this.id=++O,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=i,this.windings=o}return n(e,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var a=t.leftSE.point.y,s=e.leftSE.point.y,l=t.rightSE.point.y,u=e.rightSE.point.y;if(n<r){if(s<a&&s<l)return 1;if(s>a&&s>l)return-1;var c=t.comparePoint(e.leftSE.point);if(c<0)return 1;if(c>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(n>r){if(a<s&&a<u)return-1;if(a>s&&a>u)return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var p=t.comparePoint(e.rightSE.point);return p<0?1:p>0?-1:1}if(a<s)return-1;if(a>s)return 1;if(i<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(i>o){var m=t.comparePoint(e.rightSE.point);if(m<0)return 1;if(m>0)return-1}if(i!==o){var g=l-a,v=i-n,y=u-s,_=o-r;if(g>v&&y<_)return 1;if(g<v&&y>_)return-1}return i>o?1:i<o||l<u?-1:l>u?1:t.id<e.id?-1:t.id>e.id?1:0}}]),n(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var a=(t.x-e.x)/r.x,s=e.y+a*r.y;return t.y===s?0:t.y<s?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=y(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,a=t.leftSE.point,s=t.rightSE.point,l=v(e,a)&&0===this.comparePoint(a),u=v(n,i)&&0===t.comparePoint(i),c=v(e,s)&&0===this.comparePoint(s),h=v(n,o)&&0===t.comparePoint(o);if(u&&l)return h&&!c?o:!h&&c?s:null;if(u)return c&&i.x===s.x&&i.y===s.y?null:i;if(l)return h&&o.x===a.x&&o.y===a.y?null:a;if(h&&c)return null;if(h)return o;if(c)return s;var f=R(i,this.vector(),a,t.vector());return null===f?null:v(r,f)?S.round(f.x,f.y):null}},{key:"split",value:function(t){var n=[],r=void 0!==t.events,i=new N(t,!0),o=new N(t,!1),a=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var s=new e(i,a,this.rings.slice(),this.windings.slice());return N.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),N.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){for(var n=this,r=t;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=e.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var a=n;n=r,r=a}for(var s=0,l=r.rings.length;s<l;s++){var u=r.rings[s],c=r.windings[s],h=n.rings.indexOf(u);-1===h?(n.rings.push(u),n.windings.push(c)):n.windings[h]+=c}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var a=this.rings[i],s=this.windings[i],l=e.indexOf(a);-1===l?(e.push(a),n.push(s)):n[l]+=s}for(var u=[],c=[],h=0,f=e.length;h<f;h++)if(0!==n[h]){var p=e[h],d=p.poly;if(-1===c.indexOf(d))if(p.isExterior)u.push(d);else{-1===c.indexOf(d)&&c.push(d);var m=u.indexOf(p.poly);-1!==m&&u.splice(m,1)}}for(var g=0,v=u.length;g<v;g++){var y=u[g].multiPoly;-1===r.indexOf(y)&&r.push(y)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(W.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===W.numMultiPolys&&i<o;break;case"xor":var a=Math.abs(t.length-e.length);this._isInResult=a%2===1;break;case"difference":var s=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=s(t)!==s(e);break;default:throw new Error("Unrecognized operation type found ".concat(W.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var i,o,a,s=N.comparePoints(t,n);if(s<0)i=t,o=n,a=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));i=n,o=t,a=-1}return new e(new N(i,!0),new N(o,!1),[r],[a])}}]),e}(),D=function(){function e(n,r,i){if(t(this,e),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=i,this.segments=[],"number"!==typeof n[0][0]||"number"!==typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=S.round(n[0][0],n[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var a=o,s=1,l=n.length;s<l;s++){if("number"!==typeof n[s][0]||"number"!==typeof n[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=S.round(n[s][0],n[s][1]);u.x===a.x&&u.y===a.y||(this.segments.push(z.fromRing(a,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),a=u)}o.x===a.x&&o.y===a.y||this.segments.push(z.fromRing(a,o,this))}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),e}(),F=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new D(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=n.length;i<o;i++){var a=new D(n[i],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),B=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"===typeof n[0][0][0]&&(n=[n])}catch(s){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=n.length;i<o;i++){var a=new F(n[i],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),j=function(){function e(n){t(this,e),this.events=n;for(var r=0,i=n.length;r<i;r++)n[r].segment.ringOut=this;this.poly=null}return n(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(o.isInResult()&&!o.ringOut){for(var a=null,s=o.leftSE,l=o.rightSE,u=[s],c=s.point,h=[];a=s,s=l,u.push(s),s.point!==c;)for(;;){var f=s.getAvailableLinkedEvents();if(0===f.length){var p=u[0].point,d=u[u.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===f.length){l=f[0].otherSE;break}for(var m=null,g=0,v=h.length;g<v;g++)if(h[g].point===s.point){m=g;break}if(null===m){h.push({index:u.length,point:s.point});var y=s.getLeftmostComparator(a);l=f.sort(y)[0].otherSE;break}var _=h.splice(m)[0],x=u.splice(_.index);x.unshift(x[0].otherSE),n.push(new e(x.reverse()))}n.push(new e(u))}}return n}}]),n(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==C(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var a=e[0],s=e[1];0===C(a,t,s)&&e.shift(),e.push(e[0]);for(var l=this.isExteriorRing()?1:-1,u=this.isExteriorRing()?0:e.length-1,c=this.isExteriorRing()?e.length:-1,h=[],f=u;f!=c;f+=l)h.push([e[f].x,e[f].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];N.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),e}(),Z=function(){function e(n){t(this,e),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return n(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),e}(),U=function(){function e(n){t(this,e),this.rings=n,this.polys=this._composePolys(n)}return n(e,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new Z(i));else{var o=i.enclosingRing();o.poly||e.push(new Z(o)),o.poly.addInterior(i)}}return e}}]),e}(),V=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.compare;t(this,e),this.queue=n,this.tree=new c(r),this.segments=[]}return n(e,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,a=void 0,s=void 0;void 0===a;)null===(i=this.tree.prev(i))?a=null:void 0===i.key.consumedBy&&(a=i.key);for(;void 0===s;)null===(o=this.tree.next(o))?s=null:void 0===o.key.consumedBy&&(s=o.key);if(t.isLeft){var l=null;if(a){var u=a.getIntersection(e);if(null!==u&&(e.isAnEndpoint(u)||(l=u),!a.isAnEndpoint(u)))for(var c=this._splitSafely(a,u),h=0,f=c.length;h<f;h++)n.push(c[h])}var p=null;if(s){var d=s.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(p=d),!s.isAnEndpoint(d)))for(var m=this._splitSafely(s,d),g=0,v=m.length;g<v;g++)n.push(m[g])}if(null!==l||null!==p){var y=null;y=null===l?p:null===p||N.comparePoints(l,p)<=0?l:p,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var _=e.split(y),x=0,b=_.length;x<b;x++)n.push(_[x])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=a)}else{if(a&&s){var w=a.getIntersection(s);if(null!==w){if(!a.isAnEndpoint(w))for(var k=this._splitSafely(a,w),S=0,E=k.length;S<E;S++)n.push(k[S]);if(!s.isAnEndpoint(w))for(var I=this._splitSafely(s,w),C=0,A=I.length;C<A;C++)n.push(I[C])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),e}(),q="undefined"!==typeof process&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,G="undefined"!==typeof process&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,W=new(function(){function e(){t(this,e)}return n(e,[{key:"run",value:function(t,e,n){W.type=t,S.reset();for(var r=[new B(e,!0)],i=0,o=n.length;i<o;i++)r.push(new B(n[i],!1));if(W.numMultiPolys=r.length,"difference"===W.type)for(var a=r[0],s=1;s<r.length;)null!==y(r[s].bbox,a.bbox)?s++:r.splice(s,1);if("intersection"===W.type)for(var l=0,u=r.length;l<u;l++)for(var h=r[l],f=l+1,p=r.length;f<p;f++)if(null===y(h.bbox,r[f].bbox))return[];for(var d=new c(N.compare),m=0,g=r.length;m<g;m++)for(var v=r[m].getSweepEvents(),_=0,x=v.length;_<x;_++)if(d.insert(v[_]),d.size>q)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var b=new V(d),w=d.size,k=d.pop();k;){var E=k.key;if(d.size===w){var I=E.segment;throw new Error("Unable to pop() ".concat(E.isLeft?"left":"right"," SweepEvent ")+"[".concat(E.point.x,", ").concat(E.point.y,"] from segment #").concat(I.id," ")+"[".concat(I.leftSE.point.x,", ").concat(I.leftSE.point.y,"] -> ")+"[".concat(I.rightSE.point.x,", ").concat(I.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(d.size>q)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(b.segments.length>G)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var C=b.process(E),A=0,P=C.length;A<P;A++){var T=C[A];void 0===T.consumedBy&&d.insert(T)}w=d.size,k=d.pop()}S.reset();var M=j.factory(b.segments);return new U(M).getGeom()}}]),e}()),H=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return W.run("union",t,n)},X=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return W.run("intersection",t,n)},Y=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return W.run("xor",t,n)},$=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return W.run("difference",t,n)};return{union:H,intersection:X,xor:Y,difference:$}}()},888:function(t,e,n){"use strict";var r=n(9047);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(t,e,n){t.exports=n(888)()},9047:function(t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},1977:function(t,e,n){"use strict";t.exports=i,t.exports.default=i;var r=n(5287);function i(t,e){if(!(this instanceof i))return new i(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=g(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],l(i,t.leaf?r(o):o);return i}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function m(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,e,n,i,o){for(var a,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=i||(a=e+Math.ceil((n-e)/i/2)*i,r(t,a,e,n,o),s.push(e,a,a,n))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!m(t,e))return n;for(var i,o,a,s,l=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],m(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):d(t,s)?this._all(a,n):l.push(a));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!m(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],m(t,a=e.leaf?n(o):o)){if(e.leaf||d(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,a,s=this.data,l=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=c.pop(),a=!0),s.leaf&&-1!==(i=o(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;a||s.leaf||!d(s,l)?r?(n++,s=r.children[n],a=!1):s=null:(u.push(s),c.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return a(i=g(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=g([])).leaf=!1,i.height=r;var l,u,c,h,f=Math.ceil(o/s),p=f*Math.ceil(Math.sqrt(s));for(v(t,e,n,p,this.compareMinX),l=e;l<=n;l+=p)for(v(t,l,c=Math.min(l+p-1,n),f,this.compareMinY),u=l;u<=c;u+=f)h=Math.min(u+f-1,c),i.children.push(this._build(t,u,h,r-1));return a(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,l,u,c,f,p,d;r.push(e),!e.leaf&&r.length-1!==n;){for(c=f=1/0,i=0,o=e.children.length;i<o;i++)l=h(a=e.children[i]),p=t,d=a,(u=(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-l)<f?(f=u,c=l<c?l:c,s=a):u===f&&l<c&&(c=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),l(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=g(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,a(n,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,l,u,c,f;for(u=c=1/0,r=e;r<=n-e;r++)a=p(i=s(t,0,r,this.toBBox),o=s(t,r,n,this.toBBox)),l=h(i)+h(o),a<u?(u=a,f=r,c=l<c?l:c):a===u&&l<c&&(c=l,f=r);return f},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,u=s(t,0,e,a),c=s(t,n-e,n,a),h=f(u)+f(c);for(i=e;i<n-e;i++)o=t.children[i],l(u,t.leaf?a(o):o),h+=f(u);for(i=n-e-1;i>=e;i--)o=t.children[i],l(c,t.leaf?a(o):o),h+=f(c);return h},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)l(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():a(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},5287:function(t){t.exports=function(){"use strict";function t(t,n,i,o,a){e(t,n,i||0,o||t.length-1,a||r)}function e(t,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=r-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);e(t,r,Math.max(i,Math.floor(r-l*c/s+h)),Math.min(o,Math.floor(r+(s-l)*c/s+h)),a)}var f=t[r],p=i,d=o;for(n(t,i,r),a(t[o],f)>0&&n(t,i,o);p<d;){for(n(t,p,d),p++,d--;a(t[p],f)<0;)p++;for(;a(t[d],f)>0;)d--}0===a(t[i],f)?n(t,i,d):n(t,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}function n(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function r(t,e){return t<e?-1:t>e?1:0}return t}()},4463:function(t,e,n){"use strict";var r=n(2791),i=n(1725),o=n(5296);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,l={};function u(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(l[t]=e,t=0;t<e.length;t++)s.add(e[t])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,d={},m={};function g(t,e,n,r,i,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){v[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];v[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){v[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){v[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){v[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){v[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){v[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){v[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){v[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function _(t){return t[1].toUpperCase()}function x(t,e,n,r){var i=v.hasOwnProperty(e)?v[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!p.call(m,t)||!p.call(d,t)&&(f.test(t)?m[t]=!0:(d[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,_);v[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,_);v[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,_);v[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){v[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),v.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){v[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,k=60106,S=60107,E=60108,I=60114,C=60109,A=60110,P=60112,T=60113,M=60120,L=60115,R=60116,N=60121,O=60128,z=60129,D=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var B=Symbol.for;w=B("react.element"),k=B("react.portal"),S=B("react.fragment"),E=B("react.strict_mode"),I=B("react.profiler"),C=B("react.provider"),A=B("react.context"),P=B("react.forward_ref"),T=B("react.suspense"),M=B("react.suspense_list"),L=B("react.memo"),R=B("react.lazy"),N=B("react.block"),B("react.scope"),O=B("react.opaque.id"),z=B("react.debug_trace_mode"),D=B("react.offscreen"),F=B("react.legacy_hidden")}var j,Z="function"===typeof Symbol&&Symbol.iterator;function U(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=Z&&t[Z]||t["@@iterator"])?t:null}function V(t){if(void 0===j)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);j=e&&e[1]||""}return"\n"+j+t}var q=!1;function G(t,e){if(!t||q)return"";q=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{q=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?V(t):""}function W(t){switch(t.tag){case 5:return V(t.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return t=G(t.type,!1);case 11:return t=G(t.type.render,!1);case 22:return t=G(t.type._render,!1);case 1:return t=G(t.type,!0);default:return""}}function H(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case k:return"Portal";case I:return"Profiler";case E:return"StrictMode";case T:return"Suspense";case M:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case A:return(t.displayName||"Context")+".Consumer";case C:return(t._context.displayName||"Context")+".Provider";case P:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case L:return H(t.type);case N:return H(t._render);case R:e=t._payload,t=t._init;try{return H(t(e))}catch(n){}}return null}function X(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function Y(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function $(t){t._valueTracker||(t._valueTracker=function(t){var e=Y(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function K(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Y(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function J(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Q(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function tt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=X(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function et(t,e){null!=(e=e.checked)&&x(t,"checked",e,!1)}function nt(t,e){et(t,e);var n=X(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?it(t,e.type,n):e.hasOwnProperty("defaultValue")&&it(t,e.type,X(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function rt(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function it(t,e,n){"number"===e&&J(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function ot(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function at(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+X(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function st(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:X(n)}}function ut(t,e){var n=X(e.value),r=X(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function ct(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var ht="http://www.w3.org/1999/xhtml",ft="http://www.w3.org/2000/svg";function pt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?pt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var mt,gt,vt=(gt=function(t,e){if(t.namespaceURI!==ft||"innerHTML"in t)t.innerHTML=e;else{for((mt=mt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return gt(t,e)}))}:gt);function yt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var _t={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xt=["Webkit","ms","Moz","O"];function bt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||_t.hasOwnProperty(t)&&_t[t]?(""+e).trim():e+"px"}function wt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=bt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(_t).forEach((function(t){xt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_t[e]=_t[t]}))}));var kt=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function St(t,e){if(e){if(kt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(a(62))}}function Et(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function It(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Ct=null,At=null,Pt=null;function Tt(t){if(t=ri(t)){if("function"!==typeof Ct)throw Error(a(280));var e=t.stateNode;e&&(e=oi(e),Ct(t.stateNode,t.type,e))}}function Mt(t){At?Pt?Pt.push(t):Pt=[t]:At=t}function Lt(){if(At){var t=At,e=Pt;if(Pt=At=null,Tt(t),e)for(t=0;t<e.length;t++)Tt(e[t])}}function Rt(t,e){return t(e)}function Nt(t,e,n,r,i){return t(e,n,r,i)}function Ot(){}var zt=Rt,Dt=!1,Ft=!1;function Bt(){null===At&&null===Pt||(Ot(),Lt())}function jt(t,e){var n=t.stateNode;if(null===n)return null;var r=oi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(a(231,e,typeof n));return n}var Zt=!1;if(h)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){Zt=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch(gt){Zt=!1}function Vt(t,e,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var qt=!1,Gt=null,Wt=!1,Ht=null,Xt={onError:function(t){qt=!0,Gt=t}};function Yt(t,e,n,r,i,o,a,s,l){qt=!1,Gt=null,Vt.apply(Xt,arguments)}function $t(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Kt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Jt(t){if($t(t)!==t)throw Error(a(188))}function Qt(t){if(t=function(t){var e=t.alternate;if(!e){if(null===(e=$t(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Jt(i),t;if(o===r)return Jt(i),e;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(t),!t)return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function te(t,e){for(var n=t.alternate;null!==e;){if(e===t||e===n)return!0;e=e.return}return!1}var ee,ne,re,ie,oe=!1,ae=[],se=null,le=null,ue=null,ce=new Map,he=new Map,fe=[],pe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function de(t,e,n,r,i){return{blockedOn:t,domEventName:e,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function me(t,e){switch(t){case"focusin":case"focusout":se=null;break;case"dragenter":case"dragleave":le=null;break;case"mouseover":case"mouseout":ue=null;break;case"pointerover":case"pointerout":ce.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":he.delete(e.pointerId)}}function ge(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=de(e,n,r,i,o),null!==e&&(null!==(e=ri(e))&&ne(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function ve(t){var e=ni(t.target);if(null!==e){var n=$t(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Kt(n)))return t.blockedOn=e,void ie(t.lanePriority,(function(){o.unstable_runWithPriority(t.priority,(function(){re(n)}))}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ye(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=ri(n))&&ne(e),t.blockedOn=n,!1;e.shift()}return!0}function _e(t,e,n){ye(t)&&n.delete(e)}function xe(){for(oe=!1;0<ae.length;){var t=ae[0];if(null!==t.blockedOn){null!==(t=ri(t.blockedOn))&&ee(t);break}for(var e=t.targetContainers;0<e.length;){var n=Qe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n){t.blockedOn=n;break}e.shift()}null===t.blockedOn&&ae.shift()}null!==se&&ye(se)&&(se=null),null!==le&&ye(le)&&(le=null),null!==ue&&ye(ue)&&(ue=null),ce.forEach(_e),he.forEach(_e)}function be(t,e){t.blockedOn===e&&(t.blockedOn=null,oe||(oe=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,xe)))}function we(t){function e(e){return be(e,t)}if(0<ae.length){be(ae[0],t);for(var n=1;n<ae.length;n++){var r=ae[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==se&&be(se,t),null!==le&&be(le,t),null!==ue&&be(ue,t),ce.forEach(e),he.forEach(e),n=0;n<fe.length;n++)(r=fe[n]).blockedOn===t&&(r.blockedOn=null);for(;0<fe.length&&null===(n=fe[0]).blockedOn;)ve(n),null===n.blockedOn&&fe.shift()}function ke(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Se={animationend:ke("Animation","AnimationEnd"),animationiteration:ke("Animation","AnimationIteration"),animationstart:ke("Animation","AnimationStart"),transitionend:ke("Transition","TransitionEnd")},Ee={},Ie={};function Ce(t){if(Ee[t])return Ee[t];if(!Se[t])return t;var e,n=Se[t];for(e in n)if(n.hasOwnProperty(e)&&e in Ie)return Ee[t]=n[e];return t}h&&(Ie=document.createElement("div").style,"AnimationEvent"in window||(delete Se.animationend.animation,delete Se.animationiteration.animation,delete Se.animationstart.animation),"TransitionEvent"in window||delete Se.transitionend.transition);var Ae=Ce("animationend"),Pe=Ce("animationiteration"),Te=Ce("animationstart"),Me=Ce("transitionend"),Le=new Map,Re=new Map,Ne=["abort","abort",Ae,"animationEnd",Pe,"animationIteration",Te,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Me,"transitionEnd","waiting","waiting"];function Oe(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Re.set(r,e),Le.set(r,i),u(i,[r])}}(0,o.unstable_now)();var ze=8;function De(t){if(0!==(1&t))return ze=15,1;if(0!==(2&t))return ze=14,2;if(0!==(4&t))return ze=13,4;var e=24&t;return 0!==e?(ze=12,e):0!==(32&t)?(ze=11,32):0!==(e=192&t)?(ze=10,e):0!==(256&t)?(ze=9,256):0!==(e=3584&t)?(ze=8,e):0!==(4096&t)?(ze=7,4096):0!==(e=4186112&t)?(ze=6,e):0!==(e=62914560&t)?(ze=5,e):67108864&t?(ze=4,67108864):0!==(134217728&t)?(ze=3,134217728):0!==(e=805306368&t)?(ze=2,e):0!==(1073741824&t)?(ze=1,1073741824):(ze=8,t)}function Fe(t,e){var n=t.pendingLanes;if(0===n)return ze=0;var r=0,i=0,o=t.expiredLanes,a=t.suspendedLanes,s=t.pingedLanes;if(0!==o)r=o,i=ze=15;else if(0!==(o=134217727&n)){var l=o&~a;0!==l?(r=De(l),i=ze):0!==(s&=o)&&(r=De(s),i=ze)}else 0!==(o=n&~a)?(r=De(o),i=ze):0!==s&&(r=De(s),i=ze);if(0===r)return 0;if(r=n&((0>(r=31-qe(r))?0:1<<r)<<1)-1,0!==e&&e!==r&&0===(e&a)){if(De(e),i<=ze)return e;ze=i}if(0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-qe(e)),r|=t[n],e&=~i;return r}function Be(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function je(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return 0===(t=Ze(24&~e))?je(10,e):t;case 10:return 0===(t=Ze(192&~e))?je(8,e):t;case 8:return 0===(t=Ze(3584&~e))&&(0===(t=Ze(4186112&~e))&&(t=512)),t;case 2:return 0===(e=Ze(805306368&~e))&&(e=268435456),e}throw Error(a(358,t))}function Ze(t){return t&-t}function Ue(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ve(t,e,n){t.pendingLanes|=e;var r=e-1;t.suspendedLanes&=r,t.pingedLanes&=r,(t=t.eventTimes)[e=31-qe(e)]=n}var qe=Math.clz32?Math.clz32:function(t){return 0===t?32:31-(Ge(t)/We|0)|0},Ge=Math.log,We=Math.LN2;var He=o.unstable_UserBlockingPriority,Xe=o.unstable_runWithPriority,Ye=!0;function $e(t,e,n,r){Dt||Ot();var i=Je,o=Dt;Dt=!0;try{Nt(i,t,e,n,r)}finally{(Dt=o)||Bt()}}function Ke(t,e,n,r){Xe(He,Je.bind(null,t,e,n,r))}function Je(t,e,n,r){var i;if(Ye)if((i=0===(4&e))&&0<ae.length&&-1<pe.indexOf(t))t=de(null,t,e,n,r),ae.push(t);else{var o=Qe(t,e,n,r);if(null===o)i&&me(t,r);else{if(i){if(-1<pe.indexOf(t))return t=de(o,t,e,n,r),void ae.push(t);if(function(t,e,n,r,i){switch(e){case"focusin":return se=ge(se,t,e,n,r,i),!0;case"dragenter":return le=ge(le,t,e,n,r,i),!0;case"mouseover":return ue=ge(ue,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ce.set(o,ge(ce.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,he.set(o,ge(he.get(o)||null,t,e,n,r,i)),!0}return!1}(o,t,e,n,r))return;me(t,r)}Or(t,e,r,null,n)}}}function Qe(t,e,n,r){var i=It(r);if(null!==(i=ni(i))){var o=$t(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Kt(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Or(t,e,r,i,n),null}var tn=null,en=null,nn=null;function rn(){if(nn)return nn;var t,e,n=en,r=n.length,i="value"in tn?tn.value:tn.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return nn=i.slice(t,1<e?1-e:void 0)}function on(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function an(){return!0}function sn(){return!1}function ln(t){function e(e,n,r,i,o){for(var a in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?an:sn,this.isPropagationStopped=sn,this}return i(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),e}var un,cn,hn,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=ln(fn),dn=i({},fn,{view:0,detail:0}),mn=ln(dn),gn=i({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hn&&(hn&&"mousemove"===t.type?(un=t.screenX-hn.screenX,cn=t.screenY-hn.screenY):cn=un=0,hn=t),un)},movementY:function(t){return"movementY"in t?t.movementY:cn}}),vn=ln(gn),yn=ln(i({},gn,{dataTransfer:0})),_n=ln(i({},dn,{relatedTarget:0})),xn=ln(i({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},fn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wn=ln(bn),kn=ln(i({},fn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=In[t])&&!!e[t]}function An(){return Cn}var Pn=i({},dn,{key:function(t){if(t.key){var e=Sn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=on(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?En[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(t){return"keypress"===t.type?on(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?on(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Tn=ln(Pn),Mn=ln(i({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ln=ln(i({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Rn=ln(i({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=i({},gn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),On=ln(Nn),zn=[9,13,27,32],Dn=h&&"CompositionEvent"in window,Fn=null;h&&"documentMode"in document&&(Fn=document.documentMode);var Bn=h&&"TextEvent"in window&&!Fn,jn=h&&(!Dn||Fn&&8<Fn&&11>=Fn),Zn=String.fromCharCode(32),Un=!1;function Vn(t,e){switch(t){case"keyup":return-1!==zn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Gn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Wn[t.type]:"textarea"===e}function Xn(t,e,n,r){Mt(r),0<(e=Dr(e,"onChange")).length&&(n=new pn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yn=null,$n=null;function Kn(t){Pr(t,0)}function Jn(t){if(K(ii(t)))return t}function Qn(t,e){if("change"===t)return e}var tr=!1;if(h){var er;if(h){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}er=nr}else er=!1;tr=er&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",or),$n=Yn=null)}function or(t){if("value"===t.propertyName&&Jn($n)){var e=[];if(Xn(e,$n,t,It(t)),t=Kn,Dt)t(e);else{Dt=!0;try{Rt(t,e)}finally{Dt=!1,Bt()}}}}function ar(t,e,n){"focusin"===t?(ir(),$n=n,(Yn=e).attachEvent("onpropertychange",or)):"focusout"===t&&ir()}function sr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Jn($n)}function lr(t,e){if("click"===t)return Jn(e)}function ur(t,e){if("input"===t||"change"===t)return Jn(e)}var cr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},hr=Object.prototype.hasOwnProperty;function fr(t,e){if(cr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!hr.call(e,n[r])||!cr(t[n[r]],e[n[r]]))return!1;return!0}function pr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dr(t,e){var n,r=pr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=pr(r)}}function mr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?mr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function gr(){for(var t=window,e=J();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=J((t=e.contentWindow).document)}return e}function vr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var yr=h&&"documentMode"in document&&11>=document.documentMode,_r=null,xr=null,br=null,wr=!1;function kr(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==_r||_r!==J(r)||("selectionStart"in(r=_r)&&vr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&fr(br,r)||(br=r,0<(r=Dr(xr,"onSelect")).length&&(e=new pn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_r)))}Oe("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Oe("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Oe(Ne,2);for(var Sr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Sr.length;Er++)Re.set(Sr[Er],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function Ar(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,o,s,l,u){if(Yt.apply(this,arguments),qt){if(!qt)throw Error(a(198));var c=Gt;qt=!1,Gt=null,Wt||(Wt=!0,Ht=c)}}(r,e,void 0,t),t.currentTarget=null}function Pr(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break t;Ar(i,s,u),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break t;Ar(i,s,u),o=l}}}if(Wt)throw t=Ht,Wt=!1,Ht=null,t}function Tr(t,e){var n=ai(e),r=t+"__bubble";n.has(r)||(Nr(e,t,2,!1),n.add(r))}var Mr="_reactListening"+Math.random().toString(36).slice(2);function Lr(t){t[Mr]||(t[Mr]=!0,s.forEach((function(e){Cr.has(e)||Rr(e,!1,t,null),Rr(e,!0,t,null)})))}function Rr(t,e,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===t&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!e&&Cr.has(t)){if("scroll"!==t)return;i|=2,o=r}var a=ai(o),s=t+"__"+(e?"capture":"bubble");a.has(s)||(e&&(i|=4),Nr(o,t,i,e),a.add(s))}function Nr(t,e,n,r){var i=Re.get(e);switch(void 0===i?2:i){case 0:i=$e;break;case 1:i=Ke;break;default:i=Je}n=i.bind(null,e,n,t),i=void 0,!Zt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Or(t,e,n,r,i){var o=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=ni(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue t}s=s.parentNode}}r=r.return}!function(t,e,n){if(Ft)return t(e,n);Ft=!0;try{zt(t,e,n)}finally{Ft=!1,Bt()}}((function(){var r=o,i=It(n),a=[];t:{var s=Le.get(t);if(void 0!==s){var l=pn,u=t;switch(t){case"keypress":if(0===on(n))break t;case"keydown":case"keyup":l=Tn;break;case"focusin":u="focus",l=_n;break;case"focusout":u="blur",l=_n;break;case"beforeblur":case"afterblur":l=_n;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ln;break;case Ae:case Pe:case Te:l=xn;break;case Me:l=Rn;break;case"scroll":l=mn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var c=0!==(4&e),h=!c&&"scroll"===t,f=c?null!==s?s+"Capture":null:s;c=[];for(var p,d=r;null!==d;){var m=(p=d).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==f&&(null!=(m=jt(d,f))&&c.push(zr(d,m,p)))),h)break;d=d.return}0<c.length&&(s=new l(s,u,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||0!==(16&e)||!(u=n.relatedTarget||n.fromElement)||!ni(u)&&!u[ti])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?ni(u):null)&&(u!==(h=$t(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=vn,m="onMouseLeave",f="onMouseEnter",d="mouse","pointerout"!==t&&"pointerover"!==t||(c=Mn,m="onPointerLeave",f="onPointerEnter",d="pointer"),h=null==l?s:ii(l),p=null==u?s:ii(u),(s=new c(m,d+"leave",l,n,i)).target=h,s.relatedTarget=p,m=null,ni(i)===r&&((c=new c(f,d+"enter",u,n,i)).target=p,c.relatedTarget=h,m=c),h=m,l&&u)t:{for(f=u,d=0,p=c=l;p;p=Fr(p))d++;for(p=0,m=f;m;m=Fr(m))p++;for(;0<d-p;)c=Fr(c),d--;for(;0<p-d;)f=Fr(f),p--;for(;d--;){if(c===f||null!==f&&c===f.alternate)break t;c=Fr(c),f=Fr(f)}c=null}else c=null;null!==l&&Br(a,s,l,c,!1),null!==u&&null!==h&&Br(a,h,u,c,!0)}if("select"===(l=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Qn;else if(Hn(s))if(tr)g=ur;else{g=sr;var v=ar}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=lr);switch(g&&(g=g(t,r))?Xn(a,g,n,i):(v&&v(t,s,r),"focusout"===t&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&it(s,"number",s.value)),v=r?ii(r):window,t){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(_r=v,xr=r,br=null);break;case"focusout":br=xr=_r=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,kr(a,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":kr(a,n,i)}var y;if(Dn)t:{switch(t){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else Gn?Vn(t,n)&&(_="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(_="onCompositionStart");_&&(jn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Gn&&(y=rn()):(en="value"in(tn=i)?tn.value:tn.textContent,Gn=!0)),0<(v=Dr(r,_)).length&&(_=new kn(_,t,null,n,i),a.push({event:_,listeners:v}),y?_.data=y:null!==(y=qn(n))&&(_.data=y))),(y=Bn?function(t,e){switch(t){case"compositionend":return qn(e);case"keypress":return 32!==e.which?null:(Un=!0,Zn);case"textInput":return(t=e.data)===Zn&&Un?null:t;default:return null}}(t,n):function(t,e){if(Gn)return"compositionend"===t||!Dn&&Vn(t,e)?(t=rn(),nn=en=tn=null,Gn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=Dr(r,"onBeforeInput")).length&&(i=new kn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Pr(a,e)}))}function zr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Dr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=jt(t,n))&&r.unshift(zr(t,o,i)),null!=(o=jt(t,e))&&r.push(zr(t,o,i))),t=t.return}return r}function Fr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Br(t,e,n,r,i){for(var o=e._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=jt(n,o))&&a.unshift(zr(n,l,s)):i||null!=(l=jt(n,o))&&a.push(zr(n,l,s))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}function jr(){}var Zr=null,Ur=null;function Vr(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function qr(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Gr="function"===typeof setTimeout?setTimeout:void 0,Wr="function"===typeof clearTimeout?clearTimeout:void 0;function Hr(t){1===t.nodeType?t.textContent="":9===t.nodeType&&(null!=(t=t.body)&&(t.textContent=""))}function Xr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function Yr(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var $r=0;var Kr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Kr,Qr="__reactProps$"+Kr,ti="__reactContainer$"+Kr,ei="__reactEvents$"+Kr;function ni(t){var e=t[Jr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ti]||n[Jr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=Yr(t);null!==t;){if(n=t[Jr])return n;t=Yr(t)}return e}n=(t=n).parentNode}return null}function ri(t){return!(t=t[Jr]||t[ti])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function ii(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function oi(t){return t[Qr]||null}function ai(t){var e=t[ei];return void 0===e&&(e=t[ei]=new Set),e}var si=[],li=-1;function ui(t){return{current:t}}function ci(t){0>li||(t.current=si[li],si[li]=null,li--)}function hi(t,e){li++,si[li]=t.current,t.current=e}var fi={},pi=ui(fi),di=ui(!1),mi=fi;function gi(t,e){var n=t.type.contextTypes;if(!n)return fi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function vi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function yi(){ci(di),ci(pi)}function _i(t,e,n){if(pi.current!==fi)throw Error(a(168));hi(pi,e),hi(di,n)}function xi(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,H(e)||"Unknown",o));return i({},n,r)}function bi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fi,mi=pi.current,hi(pi,t),hi(di,di.current),!0}function wi(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=xi(t,e,mi),r.__reactInternalMemoizedMergedChildContext=t,ci(di),ci(pi),hi(pi,t)):ci(di),hi(di,n)}var ki=null,Si=null,Ei=o.unstable_runWithPriority,Ii=o.unstable_scheduleCallback,Ci=o.unstable_cancelCallback,Ai=o.unstable_shouldYield,Pi=o.unstable_requestPaint,Ti=o.unstable_now,Mi=o.unstable_getCurrentPriorityLevel,Li=o.unstable_ImmediatePriority,Ri=o.unstable_UserBlockingPriority,Ni=o.unstable_NormalPriority,Oi=o.unstable_LowPriority,zi=o.unstable_IdlePriority,Di={},Fi=void 0!==Pi?Pi:function(){},Bi=null,ji=null,Zi=!1,Ui=Ti(),Vi=1e4>Ui?Ti:function(){return Ti()-Ui};function qi(){switch(Mi()){case Li:return 99;case Ri:return 98;case Ni:return 97;case Oi:return 96;case zi:return 95;default:throw Error(a(332))}}function Gi(t){switch(t){case 99:return Li;case 98:return Ri;case 97:return Ni;case 96:return Oi;case 95:return zi;default:throw Error(a(332))}}function Wi(t,e){return t=Gi(t),Ei(t,e)}function Hi(t,e,n){return t=Gi(t),Ii(t,e,n)}function Xi(){if(null!==ji){var t=ji;ji=null,Ci(t)}Yi()}function Yi(){if(!Zi&&null!==Bi){Zi=!0;var t=0;try{var e=Bi;Wi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Bi=null}catch(n){throw null!==Bi&&(Bi=Bi.slice(t+1)),Ii(Li,Xi),n}finally{Zi=!1}}}var $i=b.ReactCurrentBatchConfig;function Ki(t,e){if(t&&t.defaultProps){for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var Ji=ui(null),Qi=null,to=null,eo=null;function no(){eo=to=Qi=null}function ro(t){var e=Ji.current;ci(Ji),t.type._context._currentValue=e}function io(t,e){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)===e){if(null===n||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,null!==n&&(n.childLanes|=e);t=t.return}}function oo(t,e){Qi=t,eo=to=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(Da=!0),t.firstContext=null)}function ao(t,e){if(eo!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(eo=t,e=1073741823),e={context:t,observedBits:e,next:null},null===to){if(null===Qi)throw Error(a(308));to=e,Qi.dependencies={lanes:0,firstContext:e,responders:null}}else to=to.next=e;return t._currentValue}var so=!1;function lo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function uo(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function co(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ho(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function fo(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function po(t,e,n,r){var o=t.updateQueue;so=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var u=l,c=u.next;u.next=null,null===s?a=c:s.next=c,s=u;var h=t.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==s&&(null===f?h.firstBaseUpdate=c:f.next=c,h.lastBaseUpdate=u)}}if(null!==a){for(f=o.baseState,s=0,h=c=u=null;;){l=a.lane;var p=a.eventTime;if((r&l)===l){null!==h&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var d=t,m=a;switch(l=e,p=n,m.tag){case 1:if("function"===typeof(d=m.payload)){f=d.call(p,f,l);break t}f=d;break t;case 3:d.flags=-4097&d.flags|64;case 0:if(null===(l="function"===typeof(d=m.payload)?d.call(p,f,l):d)||void 0===l)break t;f=i({},f,l);break t;case 2:so=!0}}null!==a.callback&&(t.flags|=32,null===(l=o.effects)?o.effects=[a]:l.push(a))}else p={eventTime:p,lane:l,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(c=h=p,u=f):h=h.next=p,s|=l;if(null===(a=a.next)){if(null===(l=o.shared.pending))break;a=l.next,l.next=null,o.lastBaseUpdate=l,o.shared.pending=null}}null===h&&(u=f),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=h,Zs|=s,t.lanes=s,t.memoizedState=f}}function mo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var go=(new r.Component).refs;function vo(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:i({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var yo={isMounted:function(t){return!!(t=t._reactInternals)&&$t(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=fl(),i=pl(t),o=co(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),ho(t,o),dl(t,i,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=fl(),i=pl(t),o=co(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),ho(t,o),dl(t,i,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=fl(),r=pl(t),i=co(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),ho(t,i),dl(t,r,n)}};function _o(t,e,n,r,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!fr(n,r)||!fr(i,o))}function xo(t,e,n){var r=!1,i=fi,o=e.contextType;return"object"===typeof o&&null!==o?o=ao(o):(i=vi(e)?mi:pi.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?gi(t,i):fi),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=yo,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function bo(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yo.enqueueReplaceState(e,e.state,null)}function wo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=go,lo(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=ao(o):(o=vi(e)?mi:pi.current,i.context=gi(t,o)),po(t,n,i,r),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(vo(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&yo.enqueueReplaceState(i,i.state,null),po(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4)}var ko=Array.isArray;function So(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:(e=function(t){var e=r.refs;e===go&&(e=r.refs={}),null===t?delete e[i]:e[i]=t},e._stringRef=i,e)}if("string"!==typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function Eo(t,e){if("textarea"!==t.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function Io(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Wl(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags=2,n):r:(e.flags=2,n):n}function s(e){return t&&null===e.alternate&&(e.flags=2),e}function l(t,e,n,r){return null===e||6!==e.tag?((e=$l(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function u(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=So(t,e,n),r.return=t,r):((r=Hl(n.type,n.key,n.props,null,t.mode,r)).ref=So(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Kl(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=Xl(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function f(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=$l(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case w:return(n=Hl(e.type,e.key,e.props,null,t.mode,n)).ref=So(t,null,e),n.return=t,n;case k:return(e=Kl(e,t.mode,n)).return=t,e}if(ko(e)||U(e))return(e=Xl(e,t.mode,n,null)).return=t,e;Eo(t,e)}return null}function p(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:l(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?n.type===S?h(t,e,n.props.children,r,i):u(t,e,n,r):null;case k:return n.key===i?c(t,e,n,r):null}if(ko(n)||U(n))return null!==i?null:h(t,e,n,r,null);Eo(t,n)}return null}function d(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return l(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return t=t.get(null===r.key?n:r.key)||null,r.type===S?h(e,t,r.props.children,i,r.key):u(e,t,r,i);case k:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(ko(r)||U(r))return h(e,t=t.get(n)||null,r,i,null);Eo(e,r)}return null}function m(i,a,s,l){for(var u=null,c=null,h=a,m=a=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=p(i,h,s[m],l);if(null===v){null===h&&(h=g);break}t&&h&&null===v.alternate&&e(i,h),a=o(v,a,m),null===c?u=v:c.sibling=v,c=v,h=g}if(m===s.length)return n(i,h),u;if(null===h){for(;m<s.length;m++)null!==(h=f(i,s[m],l))&&(a=o(h,a,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=r(i,h);m<s.length;m++)null!==(g=d(h,i,m,s[m],l))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g);return t&&h.forEach((function(t){return e(i,t)})),u}function g(i,s,l,u){var c=U(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var h=c=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var _=p(i,m,y.value,u);if(null===_){null===m&&(m=v);break}t&&m&&null===_.alternate&&e(i,m),s=o(_,s,g),null===h?c=_:h.sibling=_,h=_,m=v}if(y.done)return n(i,m),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=f(i,y.value,u))&&(s=o(y,s,g),null===h?c=y:h.sibling=y,h=y);return c}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=d(m,i,g,y.value,u))&&(t&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=o(y,s,g),null===h?c=y:h.sibling=y,h=y);return t&&m.forEach((function(t){return e(i,t)})),c}return function(t,r,o,l){var u="object"===typeof o&&null!==o&&o.type===S&&null===o.key;u&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case w:t:{for(c=o.key,u=r;null!==u;){if(u.key===c){if(7===u.tag){if(o.type===S){n(t,u.sibling),(r=i(u,o.props.children)).return=t,t=r;break t}}else if(u.elementType===o.type){n(t,u.sibling),(r=i(u,o.props)).ref=So(t,u,o),r.return=t,t=r;break t}n(t,u);break}e(t,u),u=u.sibling}o.type===S?((r=Xl(o.props.children,t.mode,l,o.key)).return=t,t=r):((l=Hl(o.type,o.key,o.props,null,t.mode,l)).ref=So(t,r,o),l.return=t,t=l)}return s(t);case k:t:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Kl(o,t.mode,l)).return=t,t=r}return s(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=$l(o,t.mode,l)).return=t,t=r),s(t);if(ko(o))return m(t,r,o,l);if(U(o))return g(t,r,o,l);if(c&&Eo(t,o),"undefined"===typeof o&&!u)switch(t.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,H(t.type)||"Component"))}return n(t,r)}}var Co=Io(!0),Ao=Io(!1),Po={},To=ui(Po),Mo=ui(Po),Lo=ui(Po);function Ro(t){if(t===Po)throw Error(a(174));return t}function No(t,e){switch(hi(Lo,e),hi(Mo,t),hi(To,Po),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dt(null,"");break;default:e=dt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}ci(To),hi(To,e)}function Oo(){ci(To),ci(Mo),ci(Lo)}function zo(t){Ro(Lo.current);var e=Ro(To.current),n=dt(e,t.type);e!==n&&(hi(Mo,t),hi(To,n))}function Do(t){Mo.current===t&&(ci(To),ci(Mo))}var Fo=ui(0);function Bo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jo=null,Zo=null,Uo=!1;function Vo(t,e){var n=ql(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function qo(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1}}function Go(t){if(Uo){var e=Zo;if(e){var n=e;if(!qo(t,e)){if(!(e=Xr(n.nextSibling))||!qo(t,e))return t.flags=-1025&t.flags|2,Uo=!1,void(jo=t);Vo(jo,n)}jo=t,Zo=Xr(e.firstChild)}else t.flags=-1025&t.flags|2,Uo=!1,jo=t}}function Wo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;jo=t}function Ho(t){if(t!==jo)return!1;if(!Uo)return Wo(t),Uo=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!qr(e,t.memoizedProps))for(e=Zo;e;)Vo(t,e),e=Xr(e.nextSibling);if(Wo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){Zo=Xr(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}Zo=null}}else Zo=jo?Xr(t.stateNode.nextSibling):null;return!0}function Xo(){Zo=jo=null,Uo=!1}var Yo=[];function $o(){for(var t=0;t<Yo.length;t++)Yo[t]._workInProgressVersionPrimary=null;Yo.length=0}var Ko=b.ReactCurrentDispatcher,Jo=b.ReactCurrentBatchConfig,Qo=0,ta=null,ea=null,na=null,ra=!1,ia=!1;function oa(){throw Error(a(321))}function aa(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cr(t[n],e[n]))return!1;return!0}function sa(t,e,n,r,i,o){if(Qo=o,ta=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ko.current=null===t||null===t.memoizedState?Ra:Na,t=n(r,i),ia){o=0;do{if(ia=!1,!(25>o))throw Error(a(301));o+=1,na=ea=null,e.updateQueue=null,Ko.current=Oa,t=n(r,i)}while(ia)}if(Ko.current=La,e=null!==ea&&null!==ea.next,Qo=0,na=ea=ta=null,ra=!1,e)throw Error(a(300));return t}function la(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===na?ta.memoizedState=na=t:na=na.next=t,na}function ua(){if(null===ea){var t=ta.alternate;t=null!==t?t.memoizedState:null}else t=ea.next;var e=null===na?ta.memoizedState:na.next;if(null!==e)na=e,ea=t;else{if(null===t)throw Error(a(310));t={memoizedState:(ea=t).memoizedState,baseState:ea.baseState,baseQueue:ea.baseQueue,queue:ea.queue,next:null},null===na?ta.memoizedState=na=t:na=na.next=t}return na}function ca(t,e){return"function"===typeof e?e(t):e}function ha(t){var e=ua(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=ea,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=s=o=null,u=i;do{var c=u.lane;if((Qo&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===t?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(s=l=h,o=r):l=l.next=h,ta.lanes|=c,Zs|=c}u=u.next}while(null!==u&&u!==i);null===l?o=r:l.next=s,cr(r,e.memoizedState)||(Da=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function fa(t){var e=ua(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=t(o,s.action),s=s.next}while(s!==i);cr(o,e.memoizedState)||(Da=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function pa(t,e,n){var r=e._getVersion;r=r(e._source);var i=e._workInProgressVersionPrimary;if(null!==i?t=i===r:(t=t.mutableReadLanes,(t=(Qo&t)===t)&&(e._workInProgressVersionPrimary=r,Yo.push(e))),t)return n(e._source);throw Yo.push(e),Error(a(350))}function da(t,e,n,r){var i=Rs;if(null===i)throw Error(a(349));var o=e._getVersion,s=o(e._source),l=Ko.current,u=l.useState((function(){return pa(i,e,n)})),c=u[1],h=u[0];u=na;var f=t.memoizedState,p=f.refs,d=p.getSnapshot,m=f.source;f=f.subscribe;var g=ta;return t.memoizedState={refs:p,source:e,subscribe:r},l.useEffect((function(){p.getSnapshot=n,p.setSnapshot=c;var t=o(e._source);if(!cr(s,t)){t=n(e._source),cr(h,t)||(c(t),t=pl(g),i.mutableReadLanes|=t&i.pendingLanes),t=i.mutableReadLanes,i.entangledLanes|=t;for(var r=i.entanglements,a=t;0<a;){var l=31-qe(a),u=1<<l;r[l]|=t,a&=~u}}}),[n,e,r]),l.useEffect((function(){return r(e._source,(function(){var t=p.getSnapshot,n=p.setSnapshot;try{n(t(e._source));var r=pl(g);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[e,r]),cr(d,n)&&cr(m,e)&&cr(f,r)||((t={pending:null,dispatch:null,lastRenderedReducer:ca,lastRenderedState:h}).dispatch=c=Ma.bind(null,ta,t),u.queue=t,u.baseQueue=null,h=pa(i,e,n),u.memoizedState=u.baseState=h),h}function ma(t,e,n){return da(ua(),t,e,n)}function ga(t){var e=la();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:ca,lastRenderedState:t}).dispatch=Ma.bind(null,ta,t),[e.memoizedState,t]}function va(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=ta.updateQueue)?(e={lastEffect:null},ta.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function ya(t){return t={current:t},la().memoizedState=t}function _a(){return ua().memoizedState}function xa(t,e,n,r){var i=la();ta.flags|=t,i.memoizedState=va(1|e,n,void 0,void 0===r?null:r)}function ba(t,e,n,r){var i=ua();r=void 0===r?null:r;var o=void 0;if(null!==ea){var a=ea.memoizedState;if(o=a.destroy,null!==r&&aa(r,a.deps))return void va(e,n,o,r)}ta.flags|=t,i.memoizedState=va(1|e,n,o,r)}function wa(t,e){return xa(516,4,t,e)}function ka(t,e){return ba(516,4,t,e)}function Sa(t,e){return ba(4,2,t,e)}function Ea(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ia(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ba(4,2,Ea.bind(null,e,t),n)}function Ca(){}function Aa(t,e){var n=ua();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&aa(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Pa(t,e){var n=ua();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&aa(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ta(t,e){var n=qi();Wi(98>n?98:n,(function(){t(!0)})),Wi(97<n?97:n,(function(){var n=Jo.transition;Jo.transition=1;try{t(!1),e()}finally{Jo.transition=n}}))}function Ma(t,e,n){var r=fl(),i=pl(t),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=e.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),e.pending=o,a=t.alternate,t===ta||null!==a&&a===ta)ia=ra=!0;else{if(0===t.lanes&&(null===a||0===a.lanes)&&null!==(a=e.lastRenderedReducer))try{var s=e.lastRenderedState,l=a(s,n);if(o.eagerReducer=a,o.eagerState=l,cr(l,s))return}catch(u){}dl(t,i,r)}}var La={readContext:ao,useCallback:oa,useContext:oa,useEffect:oa,useImperativeHandle:oa,useLayoutEffect:oa,useMemo:oa,useReducer:oa,useRef:oa,useState:oa,useDebugValue:oa,useDeferredValue:oa,useTransition:oa,useMutableSource:oa,useOpaqueIdentifier:oa,unstable_isNewReconciler:!1},Ra={readContext:ao,useCallback:function(t,e){return la().memoizedState=[t,void 0===e?null:e],t},useContext:ao,useEffect:wa,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,xa(4,2,Ea.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xa(4,2,t,e)},useMemo:function(t,e){var n=la();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=la();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Ma.bind(null,ta,t),[r.memoizedState,t]},useRef:ya,useState:ga,useDebugValue:Ca,useDeferredValue:function(t){var e=ga(t),n=e[0],r=e[1];return wa((function(){var e=Jo.transition;Jo.transition=1;try{r(t)}finally{Jo.transition=e}}),[t]),n},useTransition:function(){var t=ga(!1),e=t[0];return ya(t=Ta.bind(null,t[1])),[t,e]},useMutableSource:function(t,e,n){var r=la();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},da(r,t,e,n)},useOpaqueIdentifier:function(){if(Uo){var t=!1,e=function(t){return{$$typeof:O,toString:t,valueOf:t}}((function(){throw t||(t=!0,n("r:"+($r++).toString(36))),Error(a(355))})),n=ga(e)[1];return 0===(2&ta.mode)&&(ta.flags|=516,va(5,(function(){n("r:"+($r++).toString(36))}),void 0,null)),e}return ga(e="r:"+($r++).toString(36)),e},unstable_isNewReconciler:!1},Na={readContext:ao,useCallback:Aa,useContext:ao,useEffect:ka,useImperativeHandle:Ia,useLayoutEffect:Sa,useMemo:Pa,useReducer:ha,useRef:_a,useState:function(){return ha(ca)},useDebugValue:Ca,useDeferredValue:function(t){var e=ha(ca),n=e[0],r=e[1];return ka((function(){var e=Jo.transition;Jo.transition=1;try{r(t)}finally{Jo.transition=e}}),[t]),n},useTransition:function(){var t=ha(ca)[0];return[_a().current,t]},useMutableSource:ma,useOpaqueIdentifier:function(){return ha(ca)[0]},unstable_isNewReconciler:!1},Oa={readContext:ao,useCallback:Aa,useContext:ao,useEffect:ka,useImperativeHandle:Ia,useLayoutEffect:Sa,useMemo:Pa,useReducer:fa,useRef:_a,useState:function(){return fa(ca)},useDebugValue:Ca,useDeferredValue:function(t){var e=fa(ca),n=e[0],r=e[1];return ka((function(){var e=Jo.transition;Jo.transition=1;try{r(t)}finally{Jo.transition=e}}),[t]),n},useTransition:function(){var t=fa(ca)[0];return[_a().current,t]},useMutableSource:ma,useOpaqueIdentifier:function(){return fa(ca)[0]},unstable_isNewReconciler:!1},za=b.ReactCurrentOwner,Da=!1;function Fa(t,e,n,r){e.child=null===t?Ao(e,null,n,r):Co(e,t.child,n,r)}function Ba(t,e,n,r,i){n=n.render;var o=e.ref;return oo(e,i),r=sa(t,e,n,r,o,i),null===t||Da?(e.flags|=1,Fa(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,os(t,e,i))}function ja(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!==typeof a||Gl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Hl(n.type,null,r,e,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Za(t,e,a,r,i,o))}return a=t.child,0===(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:fr)(i,r)&&t.ref===e.ref)?os(t,e,o):(e.flags|=1,(t=Wl(a,r)).ref=e.ref,t.return=e,e.child=t)}function Za(t,e,n,r,i,o){if(null!==t&&fr(t.memoizedProps,r)&&t.ref===e.ref){if(Da=!1,0===(o&i))return e.lanes=t.lanes,os(t,e,o);0!==(16384&t.flags)&&(Da=!0)}return qa(t,e,n,r,o)}function Ua(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&e.mode))e.memoizedState={baseLanes:0},wl(e,n);else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},wl(e,t),null;e.memoizedState={baseLanes:0},wl(e,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,wl(e,r);return Fa(t,e,i,n),e.child}function Va(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=128)}function qa(t,e,n,r,i){var o=vi(n)?mi:pi.current;return o=gi(e,o),oo(e,i),n=sa(t,e,n,r,o,i),null===t||Da?(e.flags|=1,Fa(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,os(t,e,i))}function Ga(t,e,n,r,i){if(vi(n)){var o=!0;bi(e)}else o=!1;if(oo(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),xo(e,n,r),wo(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=ao(u):u=gi(e,u=vi(n)?mi:pi.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==u)&&bo(e,a,r,u),so=!1;var f=e.memoizedState;a.state=f,po(e,r,a,i),l=e.memoizedState,s!==r||f!==l||di.current||so?("function"===typeof c&&(vo(e,n,c,r),l=e.memoizedState),(s=so||_o(e,n,s,r,f,l,u))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4)):("function"===typeof a.componentDidMount&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"===typeof a.componentDidMount&&(e.flags|=4),r=!1)}else{a=e.stateNode,uo(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:Ki(e.type,s),a.props=u,h=e.pendingProps,f=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=ao(l):l=gi(e,l=vi(n)?mi:pi.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||f!==l)&&bo(e,a,r,l),so=!1,f=e.memoizedState,a.state=f,po(e,r,a,i);var d=e.memoizedState;s!==h||f!==d||di.current||so?("function"===typeof p&&(vo(e,n,p,r),d=e.memoizedState),(u=so||_o(e,n,u,r,f,d,l))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,d,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,d,l)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=256)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=d),a.props=r,a.state=d,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),r=!1)}return Wa(t,e,n,r,o,i)}function Wa(t,e,n,r,i,o){Va(t,e);var a=0!==(64&e.flags);if(!r&&!a)return i&&wi(e,n,!1),os(t,e,o);r=e.stateNode,za.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&a?(e.child=Co(e,t.child,null,o),e.child=Co(e,null,s,o)):Fa(t,e,s,o),e.memoizedState=r.state,i&&wi(e,n,!0),e.child}function Ha(t){var e=t.stateNode;e.pendingContext?_i(0,e.pendingContext,e.pendingContext!==e.context):e.context&&_i(0,e.context,!1),No(t,e.containerInfo)}var Xa,Ya,$a,Ka={dehydrated:null,retryLane:0};function Ja(t,e,n){var r,i=e.pendingProps,o=Fo.current,a=!1;return(r=0!==(64&e.flags))||(r=(null===t||null!==t.memoizedState)&&0!==(2&o)),r?(a=!0,e.flags&=-65):null!==t&&null===t.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),hi(Fo,1&o),null===t?(void 0!==i.fallback&&Go(e),t=i.children,o=i.fallback,a?(t=Qa(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Ka,t):"number"===typeof i.unstable_expectedLoadTime?(t=Qa(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Ka,e.lanes=33554432,t):((n=Yl({mode:"visible",children:t},e.mode,n,null)).return=e,e.child=n)):(t.memoizedState,a?(i=es(t,e,i.children,i.fallback,n),a=e.child,o=t.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=t.childLanes&~n,e.memoizedState=Ka,i):(n=ts(t,e,i.children,n),e.memoizedState=null,n))}function Qa(t,e,n,r){var i=t.mode,o=t.child;return e={mode:"hidden",children:e},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=e):o=Yl(e,i,0,null),n=Xl(n,i,r,null),o.return=t,n.return=t,o.sibling=n,t.child=o,n}function ts(t,e,n,r){var i=t.child;return t=i.sibling,n=Wl(i,{mode:"visible",children:n}),0===(2&e.mode)&&(n.lanes=r),n.return=e,n.sibling=null,null!==t&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function es(t,e,n,r,i){var o=e.mode,a=t.child;t=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&e.child!==a?((n=e.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(e.firstEffect=n.firstEffect,e.lastEffect=a,a.nextEffect=null):e.firstEffect=e.lastEffect=null):n=Wl(a,s),null!==t?r=Wl(t,r):(r=Xl(r,o,i,null)).flags|=2,r.return=e,n.return=e,n.sibling=r,e.child=n,r}function ns(t,e){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),io(t.return,e)}function rs(t,e,n,r,i,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function is(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Fa(t,e,r.children,n),0!==(2&(r=Fo.current)))r=1&r|2,e.flags|=64;else{if(null!==t&&0!==(64&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&ns(t,n);else if(19===t.tag)ns(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(hi(Fo,r),0===(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===Bo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),rs(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===Bo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}rs(e,!0,n,null,o,e.lastEffect);break;case"together":rs(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function os(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Zs|=e.lanes,0!==(n&e.childLanes)){if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=Wl(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Wl(t,t.pendingProps)).return=e;n.sibling=null}return e.child}return null}function as(t,e){if(!Uo)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ss(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return vi(e.type)&&yi(),null;case 3:return Oo(),ci(di),ci(pi),$o(),(r=e.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(Ho(e)?e.flags|=4:r.hydrate||(e.flags|=256)),null;case 5:Do(e);var o=Ro(Lo.current);if(n=e.type,null!==t&&null!=e.stateNode)Ya(t,e,n,r),t.ref!==e.ref&&(e.flags|=128);else{if(!r){if(null===e.stateNode)throw Error(a(166));return null}if(t=Ro(To.current),Ho(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Jr]=e,r[Qr]=s,n){case"dialog":Tr("cancel",r),Tr("close",r);break;case"iframe":case"object":case"embed":Tr("load",r);break;case"video":case"audio":for(t=0;t<Ir.length;t++)Tr(Ir[t],r);break;case"source":Tr("error",r);break;case"img":case"image":case"link":Tr("error",r),Tr("load",r);break;case"details":Tr("toggle",r);break;case"input":tt(r,s),Tr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Tr("invalid",r);break;case"textarea":lt(r,s),Tr("invalid",r)}for(var u in St(n,s),t=null,s)s.hasOwnProperty(u)&&(o=s[u],"children"===u?"string"===typeof o?r.textContent!==o&&(t=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(t=["children",""+o]):l.hasOwnProperty(u)&&null!=o&&"onScroll"===u&&Tr("scroll",r));switch(n){case"input":$(r),rt(r,s,!0);break;case"textarea":$(r),ct(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=jr)}r=t,e.updateQueue=r,null!==r&&(e.flags|=4)}else{switch(u=9===o.nodeType?o:o.ownerDocument,t===ht&&(t=pt(n)),t===ht?"script"===n?((t=u.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=u.createElement(n,{is:r.is}):(t=u.createElement(n),"select"===n&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,n),t[Jr]=e,t[Qr]=r,Xa(t,e),e.stateNode=t,u=Et(n,r),n){case"dialog":Tr("cancel",t),Tr("close",t),o=r;break;case"iframe":case"object":case"embed":Tr("load",t),o=r;break;case"video":case"audio":for(o=0;o<Ir.length;o++)Tr(Ir[o],t);o=r;break;case"source":Tr("error",t),o=r;break;case"img":case"image":case"link":Tr("error",t),Tr("load",t),o=r;break;case"details":Tr("toggle",t),o=r;break;case"input":tt(t,r),o=Q(t,r),Tr("invalid",t);break;case"option":o=ot(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Tr("invalid",t);break;case"textarea":lt(t,r),o=st(t,r),Tr("invalid",t);break;default:o=r}St(n,o);var c=o;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];"style"===s?wt(t,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&vt(t,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&yt(t,h):"number"===typeof h&&yt(t,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(l.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Tr("scroll",t):null!=h&&x(t,s,h,u))}switch(n){case"input":$(t),rt(t,r,!1);break;case"textarea":$(t),ct(t);break;case"option":null!=r.value&&t.setAttribute("value",""+X(r.value));break;case"select":t.multiple=!!r.multiple,null!=(s=r.value)?at(t,!!r.multiple,s,!1):null!=r.defaultValue&&at(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(t.onclick=jr)}Vr(n,r)&&(e.flags|=4)}null!==e.ref&&(e.flags|=128)}return null;case 6:if(t&&null!=e.stateNode)$a(0,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(a(166));n=Ro(Lo.current),Ro(To.current),Ho(e)?(r=e.stateNode,n=e.memoizedProps,r[Jr]=e,r.nodeValue!==n&&(e.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=e,e.stateNode=r)}return null;case 13:return ci(Fo),r=e.memoizedState,0!==(64&e.flags)?(e.lanes=n,e):(r=null!==r,n=!1,null===t?void 0!==e.memoizedProps.fallback&&Ho(e):n=null!==t.memoizedState,r&&!n&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&Fo.current)?0===Fs&&(Fs=3):(0!==Fs&&3!==Fs||(Fs=4),null===Rs||0===(134217727&Zs)&&0===(134217727&Us)||yl(Rs,Os))),(r||n)&&(e.flags|=4),null);case 4:return Oo(),null===t&&Lr(e.stateNode.containerInfo),null;case 10:return ro(e),null;case 19:if(ci(Fo),null===(r=e.memoizedState))return null;if(s=0!==(64&e.flags),null===(u=r.rendering))if(s)as(r,!1);else{if(0!==Fs||null!==t&&0!==(64&t.flags))for(t=e.child;null!==t;){if(null!==(u=Bo(t))){for(e.flags|=64,as(r,!1),null!==(s=u.updateQueue)&&(e.updateQueue=s,e.flags|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=n,n=e.child;null!==n;)t=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(u=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,t=u.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return hi(Fo,1&Fo.current|2),e.child}t=t.sibling}null!==r.tail&&Vi()>Ws&&(e.flags|=64,s=!0,as(r,!1),e.lanes=33554432)}else{if(!s)if(null!==(t=Bo(u))){if(e.flags|=64,s=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),as(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate&&!Uo)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*Vi()-r.renderingStartTime>Ws&&1073741824!==n&&(e.flags|=64,s=!0,as(r,!1),e.lanes=33554432);r.isBackwards?(u.sibling=e.child,e.child=u):(null!==(n=r.last)?n.sibling=u:e.child=u,r.last=u)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Vi(),n.sibling=null,e=Fo.current,hi(Fo,s?1&e|2:1&e),n):null;case 23:case 24:return kl(),null!==t&&null!==t.memoizedState!==(null!==e.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(e.flags|=4),null}throw Error(a(156,e.tag))}function ls(t){switch(t.tag){case 1:vi(t.type)&&yi();var e=t.flags;return 4096&e?(t.flags=-4097&e|64,t):null;case 3:if(Oo(),ci(di),ci(pi),$o(),0!==(64&(e=t.flags)))throw Error(a(285));return t.flags=-4097&e|64,t;case 5:return Do(t),null;case 13:return ci(Fo),4096&(e=t.flags)?(t.flags=-4097&e|64,t):null;case 19:return ci(Fo),null;case 4:return Oo(),null;case 10:return ro(t),null;case 23:case 24:return kl(),null;default:return null}}function us(t,e){try{var n="",r=e;do{n+=W(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i}}function cs(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}Xa=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ya=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,Ro(To.current);var a,s=null;switch(n){case"input":o=Q(t,o),r=Q(t,r),s=[];break;case"option":o=ot(t,o),r=ot(t,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=st(t,o),r=st(t,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(t.onclick=jr)}for(h in St(n,r),n=null,o)if(!r.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var u=o[h];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(u=null!=o?o[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(null!=c||null!=u))if("style"===h)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(s=s||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Tr("scroll",t),s||u===c||(s=[])):"object"===typeof c&&null!==c&&c.$$typeof===O?c.toString():(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}},$a=function(t,e,n,r){n!==r&&(e.flags|=4)};var hs="function"===typeof WeakMap?WeakMap:Map;function fs(t,e,n){(n=co(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$s||($s=!0,Ks=r),cs(0,e)},n}function ps(t,e,n){(n=co(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return cs(0,e),r(i)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Js?Js=new Set([this]):Js.add(this),cs(0,e));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}var ds="function"===typeof WeakSet?WeakSet:Set;function ms(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){jl(t,n)}else e.current=null}function gs(t,e){switch(e.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&e.flags&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Ki(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:return void(256&e.flags&&Hr(e.stateNode.containerInfo))}throw Error(a(163))}function vs(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{if(3===(3&t.tag)){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{var i=t;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Dl(n,t),zl(n,t)),t=r}while(t!==e)}return;case 1:return t=n.stateNode,4&n.flags&&(null===e?t.componentDidMount():(r=n.elementType===n.type?e.memoizedProps:Ki(n.type,e.memoizedProps),t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),void(null!==(e=n.updateQueue)&&mo(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:case 1:t=n.child.stateNode}mo(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.flags&&Vr(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&we(n)))))}throw Error(a(163))}function ys(t,e){for(var n=t;;){if(5===n.tag){var r=n.stateNode;if(e)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=bt("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===t)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function _s(t,e){if(Si&&"function"===typeof Si.onCommitFiberUnmount)try{Si.onCommitFiberUnmount(ki,e)}catch(o){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Dl(e,n);else{r=e;try{i()}catch(o){jl(r,o)}}n=n.next}while(n!==t)}break;case 1:if(ms(e),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){jl(e,o)}break;case 5:ms(e);break;case 4:Es(t,e)}}function xs(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function bs(t){return 5===t.tag||3===t.tag||4===t.tag}function ws(t){t:{for(var e=t.return;null!==e;){if(bs(e))break t;e=e.return}throw Error(a(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(yt(e,""),n.flags&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||bs(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break t}}r?ks(t,n,e):Ss(t,n,e)}function ks(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=jr));else if(4!==r&&null!==(t=t.child))for(ks(t,e,n),t=t.sibling;null!==t;)ks(t,e,n),t=t.sibling}function Ss(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(Ss(t,e,n),t=t.sibling;null!==t;)Ss(t,e,n),t=t.sibling}function Es(t,e){for(var n,r,i=e,o=!1;;){if(!o){o=i.return;t:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break t;case 3:case 4:n=n.containerInfo,r=!0;break t}o=o.return}o=!0}if(5===i.tag||6===i.tag){t:for(var s=t,l=i,u=l;;)if(_s(s,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break t;for(;null===u.sibling;){if(null===u.return||u.return===l)break t;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(s=n,l=i.stateNode,8===s.nodeType?s.parentNode.removeChild(l):s.removeChild(l)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(_s(t,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Is(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(t=r.destroy,r.destroy=void 0,void 0!==t&&t()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=e.stateNode)){r=e.memoizedProps;var i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[Qr]=r,"input"===t&&"radio"===r.type&&null!=r.name&&et(n,r),Et(t,i),e=Et(t,r),i=0;i<o.length;i+=2){var s=o[i],l=o[i+1];"style"===s?wt(n,l):"dangerouslySetInnerHTML"===s?vt(n,l):"children"===s?yt(n,l):x(n,s,l,e)}switch(t){case"input":nt(n,r);break;case"textarea":ut(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?at(n,!!r.multiple,o,!1):t!==!!r.multiple&&(null!=r.defaultValue?at(n,!!r.multiple,r.defaultValue,!0):at(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(a(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((n=e.stateNode).hydrate&&(n.hydrate=!1,we(n.containerInfo)));case 13:return null!==e.memoizedState&&(Gs=Vi(),ys(e.child,!0)),void Cs(e);case 19:return void Cs(e);case 23:case 24:return void ys(e,null!==e.memoizedState)}throw Error(a(163))}function Cs(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new ds),e.forEach((function(e){var r=Ul.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function As(t,e){return null!==t&&(null===(t=t.memoizedState)||null!==t.dehydrated)&&(null!==(e=e.memoizedState)&&null===e.dehydrated)}var Ps=Math.ceil,Ts=b.ReactCurrentDispatcher,Ms=b.ReactCurrentOwner,Ls=0,Rs=null,Ns=null,Os=0,zs=0,Ds=ui(0),Fs=0,Bs=null,js=0,Zs=0,Us=0,Vs=0,qs=null,Gs=0,Ws=1/0;function Hs(){Ws=Vi()+500}var Xs,Ys=null,$s=!1,Ks=null,Js=null,Qs=!1,tl=null,el=90,nl=[],rl=[],il=null,ol=0,al=null,sl=-1,ll=0,ul=0,cl=null,hl=!1;function fl(){return 0!==(48&Ls)?Vi():-1!==sl?sl:sl=Vi()}function pl(t){if(0===(2&(t=t.mode)))return 1;if(0===(4&t))return 99===qi()?1:2;if(0===ll&&(ll=js),0!==$i.transition){0!==ul&&(ul=null!==qs?qs.pendingLanes:0),t=ll;var e=4186112&~ul;return 0===(e&=-e)&&(0===(e=(t=4186112&~t)&-t)&&(e=8192)),e}return t=qi(),0!==(4&Ls)&&98===t?t=je(12,ll):t=je(t=function(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(t),ll),t}function dl(t,e,n){if(50<ol)throw ol=0,al=null,Error(a(185));if(null===(t=ml(t,e)))return null;Ve(t,e,n),t===Rs&&(Us|=e,4===Fs&&yl(t,Os));var r=qi();1===e?0!==(8&Ls)&&0===(48&Ls)?_l(t):(gl(t,n),0===Ls&&(Hs(),Xi())):(0===(4&Ls)||98!==r&&99!==r||(null===il?il=new Set([t]):il.add(t)),gl(t,n)),qs=t}function ml(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function gl(t,e){for(var n=t.callbackNode,r=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-qe(s),u=1<<l,c=o[l];if(-1===c){if(0===(u&r)||0!==(u&i)){c=e,De(u);var h=ze;o[l]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=e&&(t.expiredLanes|=u);s&=~u}if(r=Fe(t,t===Rs?Os:0),e=ze,0===r)null!==n&&(n!==Di&&Ci(n),t.callbackNode=null,t.callbackPriority=0);else{if(null!==n){if(t.callbackPriority===e)return;n!==Di&&Ci(n)}15===e?(n=_l.bind(null,t),null===Bi?(Bi=[n],ji=Ii(Li,Yi)):Bi.push(n),n=Di):14===e?n=Hi(99,_l.bind(null,t)):(n=function(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,t))}}(e),n=Hi(n,vl.bind(null,t))),t.callbackPriority=e,t.callbackNode=n}}function vl(t){if(sl=-1,ul=ll=0,0!==(48&Ls))throw Error(a(327));var e=t.callbackNode;if(Ol()&&t.callbackNode!==e)return null;var n=Fe(t,t===Rs?Os:0);if(0===n)return null;var r=n,i=Ls;Ls|=16;var o=Il();for(Rs===t&&Os===r||(Hs(),Sl(t,r));;)try{Pl();break}catch(l){El(t,l)}if(no(),Ts.current=o,Ls=i,null!==Ns?r=0:(Rs=null,Os=0,r=Fs),0!==(js&Us))Sl(t,0);else if(0!==r){if(2===r&&(Ls|=64,t.hydrate&&(t.hydrate=!1,Hr(t.containerInfo)),0!==(n=Be(t))&&(r=Cl(t,n))),1===r)throw e=Bs,Sl(t,0),yl(t,n),gl(t,Vi()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:case 5:Ll(t);break;case 3:if(yl(t,n),(62914560&n)===n&&10<(r=Gs+500-Vi())){if(0!==Fe(t,0))break;if(((i=t.suspendedLanes)&n)!==n){fl(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Gr(Ll.bind(null,t),r);break}Ll(t);break;case 4:if(yl(t,n),(4186112&n)===n)break;for(r=t.eventTimes,i=-1;0<n;){var s=31-qe(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=Vi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ps(n/1960))-n)){t.timeoutHandle=Gr(Ll.bind(null,t),n);break}Ll(t);break;default:throw Error(a(329))}}return gl(t,Vi()),t.callbackNode===e?vl.bind(null,t):null}function yl(t,e){for(e&=~Vs,e&=~Us,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qe(e),r=1<<n;t[n]=-1,e&=~r}}function _l(t){if(0!==(48&Ls))throw Error(a(327));if(Ol(),t===Rs&&0!==(t.expiredLanes&Os)){var e=Os,n=Cl(t,e);0!==(js&Us)&&(n=Cl(t,e=Fe(t,e)))}else n=Cl(t,e=Fe(t,0));if(0!==t.tag&&2===n&&(Ls|=64,t.hydrate&&(t.hydrate=!1,Hr(t.containerInfo)),0!==(e=Be(t))&&(n=Cl(t,e))),1===n)throw n=Bs,Sl(t,0),yl(t,e),gl(t,Vi()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ll(t),gl(t,Vi()),null}function xl(t,e){var n=Ls;Ls|=1;try{return t(e)}finally{0===(Ls=n)&&(Hs(),Xi())}}function bl(t,e){var n=Ls;Ls&=-2,Ls|=8;try{return t(e)}finally{0===(Ls=n)&&(Hs(),Xi())}}function wl(t,e){hi(Ds,zs),zs|=e,js|=e}function kl(){zs=Ds.current,ci(Ds)}function Sl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,Wr(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&yi();break;case 3:Oo(),ci(di),ci(pi),$o();break;case 5:Do(r);break;case 4:Oo();break;case 13:case 19:ci(Fo);break;case 10:ro(r);break;case 23:case 24:kl()}n=n.return}Rs=t,Ns=Wl(t.current,null),Os=zs=js=e,Fs=0,Bs=null,Vs=Us=Zs=0}function El(t,e){for(;;){var n=Ns;try{if(no(),Ko.current=La,ra){for(var r=ta.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ra=!1}if(Qo=0,na=ea=ta=null,ia=!1,Ms.current=null,null===n||null===n.return){Fs=1,Bs=e,Ns=null;break}t:{var o=t,a=n.return,s=n,l=e;if(e=Os,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&Fo.current),f=a;do{var p;if(p=13===f.tag){var d=f.memoizedState;if(null!==d)p=null!==d.dehydrated;else{var m=f.memoizedProps;p=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(p){var g=f.updateQueue;if(null===g){var v=new Set;v.add(u),f.updateQueue=v}else g.add(u);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=co(-1,1);y.tag=2,ho(s,y)}s.lanes|=1;break t}l=void 0,s=e;var _=o.pingCache;if(null===_?(_=o.pingCache=new hs,l=new Set,_.set(u,l)):void 0===(l=_.get(u))&&(l=new Set,_.set(u,l)),!l.has(s)){l.add(s);var x=Zl.bind(null,o,u,s);u.then(x,x)}f.flags|=4096,f.lanes=e;break t}f=f.return}while(null!==f);l=Error((H(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Fs&&(Fs=2),l=us(l,s),f=a;do{switch(f.tag){case 3:o=l,f.flags|=4096,e&=-e,f.lanes|=e,fo(f,fs(0,o,e));break t;case 1:o=l;var b=f.type,w=f.stateNode;if(0===(64&f.flags)&&("function"===typeof b.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Js||!Js.has(w)))){f.flags|=4096,e&=-e,f.lanes|=e,fo(f,ps(f,o,e));break t}}f=f.return}while(null!==f)}Ml(n)}catch(k){e=k,Ns===n&&null!==n&&(Ns=n=n.return);continue}break}}function Il(){var t=Ts.current;return Ts.current=La,null===t?La:t}function Cl(t,e){var n=Ls;Ls|=16;var r=Il();for(Rs===t&&Os===e||Sl(t,e);;)try{Al();break}catch(i){El(t,i)}if(no(),Ls=n,Ts.current=r,null!==Ns)throw Error(a(261));return Rs=null,Os=0,Fs}function Al(){for(;null!==Ns;)Tl(Ns)}function Pl(){for(;null!==Ns&&!Ai();)Tl(Ns)}function Tl(t){var e=Xs(t.alternate,t,zs);t.memoizedProps=t.pendingProps,null===e?Ml(t):Ns=e,Ms.current=null}function Ml(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(2048&e.flags)){if(null!==(n=ss(n,e,zs)))return void(Ns=n);if(24!==(n=e).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&zs)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==t&&0===(2048&t.flags)&&(null===t.firstEffect&&(t.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(null!==t.lastEffect?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(null!==(n=ls(e)))return n.flags&=2047,void(Ns=n);null!==t&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(null!==(e=e.sibling))return void(Ns=e);Ns=e=t}while(null!==e);0===Fs&&(Fs=5)}function Ll(t){var e=qi();return Wi(99,Rl.bind(null,t,e)),null}function Rl(t,e){do{Ol()}while(null!==tl);if(0!==(48&Ls))throw Error(a(327));var n=t.finishedWork;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(a(177));t.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var s=t.eventTimes,l=t.expirationTimes;0<o;){var u=31-qe(o),c=1<<u;i[u]=0,s[u]=-1,l[u]=-1,o&=~c}if(null!==il&&0===(24&r)&&il.has(t)&&il.delete(t),t===Rs&&(Ns=Rs=null,Os=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ls,Ls|=32,Ms.current=null,Zr=Ye,vr(s=gr())){if("selectionStart"in s)l={start:s.selectionStart,end:s.selectionEnd};else t:if(l=(l=s.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,o=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(I){l=null;break t}var h=0,f=-1,p=-1,d=0,m=0,g=s,v=null;e:for(;;){for(var y;g!==l||0!==o&&3!==g.nodeType||(f=h+o),g!==u||0!==c&&3!==g.nodeType||(p=h+c),3===g.nodeType&&(h+=g.nodeValue.length),null!==(y=g.firstChild);)v=g,g=y;for(;;){if(g===s)break e;if(v===l&&++d===o&&(f=h),v===u&&++m===c&&(p=h),null!==(y=g.nextSibling))break;v=(g=v).parentNode}g=y}l=-1===f||-1===p?null:{start:f,end:p}}else l=null;l=l||{start:0,end:0}}else l=null;Ur={focusedElem:s,selectionRange:l},Ye=!1,cl=null,hl=!1,Ys=r;do{try{Nl()}catch(I){if(null===Ys)throw Error(a(330));jl(Ys,I),Ys=Ys.nextEffect}}while(null!==Ys);cl=null,Ys=r;do{try{for(s=t;null!==Ys;){var _=Ys.flags;if(16&_&&yt(Ys.stateNode,""),128&_){var x=Ys.alternate;if(null!==x){var b=x.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&_){case 2:ws(Ys),Ys.flags&=-3;break;case 6:ws(Ys),Ys.flags&=-3,Is(Ys.alternate,Ys);break;case 1024:Ys.flags&=-1025;break;case 1028:Ys.flags&=-1025,Is(Ys.alternate,Ys);break;case 4:Is(Ys.alternate,Ys);break;case 8:Es(s,l=Ys);var w=l.alternate;xs(l),null!==w&&xs(w)}Ys=Ys.nextEffect}}catch(I){if(null===Ys)throw Error(a(330));jl(Ys,I),Ys=Ys.nextEffect}}while(null!==Ys);if(b=Ur,x=gr(),_=b.focusedElem,s=b.selectionRange,x!==_&&_&&_.ownerDocument&&mr(_.ownerDocument.documentElement,_)){null!==s&&vr(_)&&(x=s.start,void 0===(b=s.end)&&(b=x),"selectionStart"in _?(_.selectionStart=x,_.selectionEnd=Math.min(b,_.value.length)):(b=(x=_.ownerDocument||document)&&x.defaultView||window).getSelection&&(b=b.getSelection(),l=_.textContent.length,w=Math.min(s.start,l),s=void 0===s.end?w:Math.min(s.end,l),!b.extend&&w>s&&(l=s,s=w,w=l),l=dr(_,w),o=dr(_,s),l&&o&&(1!==b.rangeCount||b.anchorNode!==l.node||b.anchorOffset!==l.offset||b.focusNode!==o.node||b.focusOffset!==o.offset)&&((x=x.createRange()).setStart(l.node,l.offset),b.removeAllRanges(),w>s?(b.addRange(x),b.extend(o.node,o.offset)):(x.setEnd(o.node,o.offset),b.addRange(x))))),x=[];for(b=_;b=b.parentNode;)1===b.nodeType&&x.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<x.length;_++)(b=x[_]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Ye=!!Zr,Ur=Zr=null,t.current=n,Ys=r;do{try{for(_=t;null!==Ys;){var k=Ys.flags;if(36&k&&vs(_,Ys.alternate,Ys),128&k){x=void 0;var S=Ys.ref;if(null!==S){var E=Ys.stateNode;Ys.tag,x=E,"function"===typeof S?S(x):S.current=x}}Ys=Ys.nextEffect}}catch(I){if(null===Ys)throw Error(a(330));jl(Ys,I),Ys=Ys.nextEffect}}while(null!==Ys);Ys=null,Fi(),Ls=i}else t.current=n;if(Qs)Qs=!1,tl=t,el=e;else for(Ys=r;null!==Ys;)e=Ys.nextEffect,Ys.nextEffect=null,8&Ys.flags&&((k=Ys).sibling=null,k.stateNode=null),Ys=e;if(0===(r=t.pendingLanes)&&(Js=null),1===r?t===al?ol++:(ol=0,al=t):ol=0,n=n.stateNode,Si&&"function"===typeof Si.onCommitFiberRoot)try{Si.onCommitFiberRoot(ki,n,void 0,64===(64&n.current.flags))}catch(I){}if(gl(t,Vi()),$s)throw $s=!1,t=Ks,Ks=null,t;return 0!==(8&Ls)||Xi(),null}function Nl(){for(;null!==Ys;){var t=Ys.alternate;hl||null===cl||(0!==(8&Ys.flags)?te(Ys,cl)&&(hl=!0):13===Ys.tag&&As(t,Ys)&&te(Ys,cl)&&(hl=!0));var e=Ys.flags;0!==(256&e)&&gs(t,Ys),0===(512&e)||Qs||(Qs=!0,Hi(97,(function(){return Ol(),null}))),Ys=Ys.nextEffect}}function Ol(){if(90!==el){var t=97<el?97:el;return el=90,Wi(t,Fl)}return!1}function zl(t,e){nl.push(e,t),Qs||(Qs=!0,Hi(97,(function(){return Ol(),null})))}function Dl(t,e){rl.push(e,t),Qs||(Qs=!0,Hi(97,(function(){return Ol(),null})))}function Fl(){if(null===tl)return!1;var t=tl;if(tl=null,0!==(48&Ls))throw Error(a(331));var e=Ls;Ls|=32;var n=rl;rl=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(u){if(null===o)throw Error(a(330));jl(o,u)}}for(n=nl,nl=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var l=i.create;i.destroy=l()}catch(u){if(null===o)throw Error(a(330));jl(o,u)}}for(l=t.current.firstEffect;null!==l;)t=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=t;return Ls=e,Xi(),!0}function Bl(t,e,n){ho(t,e=fs(0,e=us(n,e),1)),e=fl(),null!==(t=ml(t,1))&&(Ve(t,1,e),gl(t,e))}function jl(t,e){if(3===t.tag)Bl(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Bl(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r))){var i=ps(n,t=us(e,t),1);if(ho(n,i),i=fl(),null!==(n=ml(n,1)))Ve(n,1,i),gl(n,i);else if("function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r)))try{r.componentDidCatch(e,t)}catch(o){}break}}n=n.return}}function Zl(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=fl(),t.pingedLanes|=t.suspendedLanes&n,Rs===t&&(Os&n)===n&&(4===Fs||3===Fs&&(62914560&Os)===Os&&500>Vi()-Gs?Sl(t,0):Vs|=n),gl(t,e)}function Ul(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(0===(2&(e=t.mode))?e=1:0===(4&e)?e=99===qi()?1:2:(0===ll&&(ll=js),0===(e=Ze(62914560&~ll))&&(e=4194304))),n=fl(),null!==(t=ml(t,e))&&(Ve(t,e,n),gl(t,n))}function Vl(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function ql(t,e,n,r){return new Vl(t,e,n,r)}function Gl(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Wl(t,e){var n=t.alternate;return null===n?((n=ql(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hl(t,e,n,r,i,o){var s=2;if(r=t,"function"===typeof t)Gl(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case S:return Xl(n.children,i,o,e);case z:s=8,i|=16;break;case E:s=8,i|=1;break;case I:return(t=ql(12,n,e,8|i)).elementType=I,t.type=I,t.lanes=o,t;case T:return(t=ql(13,n,e,i)).type=T,t.elementType=T,t.lanes=o,t;case M:return(t=ql(19,n,e,i)).elementType=M,t.lanes=o,t;case D:return Yl(n,i,o,e);case F:return(t=ql(24,n,e,i)).elementType=F,t.lanes=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case C:s=10;break t;case A:s=9;break t;case P:s=11;break t;case L:s=14;break t;case R:s=16,r=null;break t;case N:s=22;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=ql(s,n,e,i)).elementType=t,e.type=r,e.lanes=o,e}function Xl(t,e,n,r){return(t=ql(7,t,r,e)).lanes=n,t}function Yl(t,e,n,r){return(t=ql(23,t,r,e)).elementType=D,t.lanes=n,t}function $l(t,e,n){return(t=ql(6,t,null,e)).lanes=n,t}function Kl(t,e,n){return(e=ql(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Jl(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ue(0),this.expirationTimes=Ue(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ue(0),this.mutableSourceEagerHydrationData=null}function Ql(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function tu(t,e,n,r){var i=e.current,o=fl(),s=pl(i);t:if(n){e:{if($t(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(vi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(null!==l);throw Error(a(171))}if(1===n.tag){var u=n.type;if(vi(u)){n=xi(n,u,l);break t}}n=l}else n=fi;return null===e.context?e.context=n:e.pendingContext=n,(e=co(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),ho(i,e),dl(i,s,o),s}function eu(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function nu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function ru(t,e){nu(t,e),(t=t.alternate)&&nu(t,e)}function iu(t,e,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Jl(t,e,null!=n&&!0===n.hydrate),e=ql(3,null,null,2===e?7:1===e?3:0),n.current=e,e.stateNode=n,lo(e),t[ti]=n.current,Lr(8===t.nodeType?t.parentNode:t),r)for(t=0;t<r.length;t++){var i=(e=r[t])._getVersion;i=i(e._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[e,i]:n.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=n}function ou(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function au(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var t=eu(a);s.call(t)}}tu(e,a,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new iu(t,0,e?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var l=i;i=function(){var t=eu(a);l.call(t)}}bl((function(){tu(e,a,t,i)}))}return eu(a)}function su(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ou(e))throw Error(a(200));return Ql(t,e,null,n)}Xs=function(t,e,n){var r=e.lanes;if(null!==t)if(t.memoizedProps!==e.pendingProps||di.current)Da=!0;else{if(0===(n&r)){switch(Da=!1,e.tag){case 3:Ha(e),Xo();break;case 5:zo(e);break;case 1:vi(e.type)&&bi(e);break;case 4:No(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var i=e.type._context;hi(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!==(n&e.child.childLanes)?Ja(t,e,n):(hi(Fo,1&Fo.current),null!==(e=os(t,e,n))?e.sibling:null);hi(Fo,1&Fo.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(64&t.flags)){if(r)return is(t,e,n);e.flags|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),hi(Fo,Fo.current),r)break;return null;case 23:case 24:return e.lanes=0,Ua(t,e,n)}return os(t,e,n)}Da=0!==(16384&t.flags)}else Da=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=gi(e,pi.current),oo(e,n),i=sa(null,e,r,t,i,n),e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,vi(r)){var o=!0;bi(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,lo(e);var s=r.getDerivedStateFromProps;"function"===typeof s&&vo(e,r,s,t),i.updater=yo,e.stateNode=i,i._reactInternals=e,wo(e,r,t,n),e=Wa(null,e,r,!0,o,n)}else e.tag=0,Fa(null,e,i,n),e=e.child;return e;case 16:i=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=(o=i._init)(i._payload),e.type=i,o=e.tag=function(t){if("function"===typeof t)return Gl(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===P)return 11;if(t===L)return 14}return 2}(i),t=Ki(i,t),o){case 0:e=qa(null,e,i,t,n);break t;case 1:e=Ga(null,e,i,t,n);break t;case 11:e=Ba(null,e,i,t,n);break t;case 14:e=ja(null,e,i,Ki(i.type,t),r,n);break t}throw Error(a(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,qa(t,e,r,i=e.elementType===r?i:Ki(r,i),n);case 1:return r=e.type,i=e.pendingProps,Ga(t,e,r,i=e.elementType===r?i:Ki(r,i),n);case 3:if(Ha(e),r=e.updateQueue,null===t||null===r)throw Error(a(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,uo(t,e),po(e,r,null,n),(r=e.memoizedState.element)===i)Xo(),e=os(t,e,n);else{if((o=(i=e.stateNode).hydrate)&&(Zo=Xr(e.stateNode.containerInfo.firstChild),jo=e,o=Uo=!0),o){if(null!=(t=i.mutableSourceEagerHydrationData))for(i=0;i<t.length;i+=2)(o=t[i])._workInProgressVersionPrimary=t[i+1],Yo.push(o);for(n=Ao(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fa(t,e,r,n),Xo();e=e.child}return e;case 5:return zo(e),null===t&&Go(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,qr(r,i)?s=null:null!==o&&qr(r,o)&&(e.flags|=16),Va(t,e),Fa(t,e,s,n),e.child;case 6:return null===t&&Go(e),null;case 13:return Ja(t,e,n);case 4:return No(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Co(e,null,r,n):Fa(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Ba(t,e,r,i=e.elementType===r?i:Ki(r,i),n);case 7:return Fa(t,e,e.pendingProps,n),e.child;case 8:case 12:return Fa(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value;var l=e.type._context;if(hi(Ji,l._currentValue),l._currentValue=o,null!==s)if(l=s.value,0===(o=cr(l,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(s.children===i.children&&!di.current){e=os(t,e,n);break t}}else for(null!==(l=e.child)&&(l.return=e);null!==l;){var u=l.dependencies;if(null!==u){s=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&o)){1===l.tag&&((c=co(-1,n&-n)).tag=2,ho(l,c)),l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),io(l.return,n),u.lanes|=n;break}c=c.next}}else s=10===l.tag&&l.type===e.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===e){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}Fa(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,oo(e,n),r=r(i=ao(i,o.unstable_observedBits)),e.flags|=1,Fa(t,e,r,n),e.child;case 14:return o=Ki(i=e.type,e.pendingProps),ja(t,e,i,o=Ki(i.type,o),r,n);case 15:return Za(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ki(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,vi(r)?(t=!0,bi(e)):t=!1,oo(e,n),xo(e,r,i),wo(e,r,i,n),Wa(null,e,r,!0,t,n);case 19:return is(t,e,n);case 23:case 24:return Ua(t,e,n)}throw Error(a(156,e.tag))},iu.prototype.render=function(t){tu(t,this._internalRoot,null,null)},iu.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;tu(null,t,null,(function(){e[ti]=null}))},ee=function(t){13===t.tag&&(dl(t,4,fl()),ru(t,4))},ne=function(t){13===t.tag&&(dl(t,67108864,fl()),ru(t,67108864))},re=function(t){if(13===t.tag){var e=fl(),n=pl(t);dl(t,n,e),ru(t,n)}},ie=function(t,e){return e()},Ct=function(t,e,n){switch(e){case"input":if(nt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=oi(r);if(!i)throw Error(a(90));K(r),nt(r,i)}}}break;case"textarea":ut(t,n);break;case"select":null!=(e=n.value)&&at(t,!!n.multiple,e,!1)}},Rt=xl,Nt=function(t,e,n,r,i){var o=Ls;Ls|=4;try{return Wi(98,t.bind(null,e,n,r,i))}finally{0===(Ls=o)&&(Hs(),Xi())}},Ot=function(){0===(49&Ls)&&(function(){if(null!==il){var t=il;il=null,t.forEach((function(t){t.expiredLanes|=24&t.pendingLanes,gl(t,Vi())}))}Xi()}(),Ol())},zt=function(t,e){var n=Ls;Ls|=2;try{return t(e)}finally{0===(Ls=n)&&(Hs(),Xi())}};var lu={Events:[ri,ii,oi,Mt,Lt,Ol,{current:!1}]},uu={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cu={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Qt(t))?null:t.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{ki=hu.inject(cu),Si=hu}catch(gt){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lu,e.createPortal=su,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw Error(a(268,Object.keys(t)))}return t=null===(t=Qt(e))?null:t.stateNode},e.flushSync=function(t,e){var n=Ls;if(0!==(48&n))return t(e);Ls|=1;try{if(t)return Wi(99,t.bind(null,e))}finally{Ls=n,Xi()}},e.hydrate=function(t,e,n){if(!ou(e))throw Error(a(200));return au(null,t,e,!0,n)},e.render=function(t,e,n){if(!ou(e))throw Error(a(200));return au(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!ou(t))throw Error(a(40));return!!t._reactRootContainer&&(bl((function(){au(null,null,t,!1,(function(){t._reactRootContainer=null,t[ti]=null}))})),!0)},e.unstable_batchedUpdates=xl,e.unstable_createPortal=function(t,e){return su(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ou(n))throw Error(a(200));if(null==t||void 0===t._reactInternals)throw Error(a(38));return au(t,e,n,!1,r)},e.version="17.0.2"},4164:function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(4463)},1372:function(t,e){"use strict";var n=60103,r=60106,i=60107,o=60108,a=60114,s=60109,l=60110,u=60112,c=60113,h=60120,f=60115,p=60116,d=60121,m=60122,g=60117,v=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var _=Symbol.for;n=_("react.element"),r=_("react.portal"),i=_("react.fragment"),o=_("react.strict_mode"),a=_("react.profiler"),s=_("react.provider"),l=_("react.context"),u=_("react.forward_ref"),c=_("react.suspense"),h=_("react.suspense_list"),f=_("react.memo"),p=_("react.lazy"),d=_("react.block"),m=_("react.server.block"),g=_("react.fundamental"),v=_("react.debug_trace_mode"),y=_("react.legacy_hidden")}function x(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case n:switch(t=t.type){case i:case a:case o:case c:case h:return t;default:switch(t=t&&t.$$typeof){case l:case u:case p:case f:case s:return t;default:return e}}case r:return e}}}},7441:function(t,e,n){"use strict";n(1372)},6374:function(t,e,n){"use strict";n(1725);var r=n(2791),i=60103;if(e.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),e.Fragment=o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(t,e,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==e.key&&(u=""+e.key),void 0!==e.ref&&(c=e.ref),e)s.call(e,r)&&!l.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:i,type:t,key:u,ref:c,props:o,_owner:a.current}}e.jsx=u,e.jsxs=u},9117:function(t,e,n){"use strict";var r=n(1725),i=60103,o=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var a=60109,s=60110,l=60112;e.Suspense=60113;var u=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),o=h("react.portal"),e.Fragment=h("react.fragment"),e.StrictMode=h("react.strict_mode"),e.Profiler=h("react.profiler"),a=h("react.provider"),s=h("react.context"),l=h("react.forward_ref"),e.Suspense=h("react.suspense"),u=h("react.memo"),c=h("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function p(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||d}function v(){}function y(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||d}g.prototype.isReactComponent={},g.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(p(85));this.updater.enqueueSetState(this,t,e,"setState")},g.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=g.prototype;var _=y.prototype=new v;_.constructor=y,r(_,g.prototype),_.isPureReactComponent=!0;var x={current:null},b=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function k(t,e,n){var r,o={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)b.call(e,r)&&!w.hasOwnProperty(r)&&(o[r]=e[r]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:i,type:t,key:a,ref:s,props:o,_owner:x.current}}function S(t){return"object"===typeof t&&null!==t&&t.$$typeof===i}var E=/\/+/g;function I(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function C(t,e,n,r,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case i:case o:l=!0}}if(l)return a=a(l=t),t=""===r?"."+I(l,0):r,Array.isArray(a)?(n="",null!=t&&(n=t.replace(E,"$&/")+"/"),C(a,e,n,"",(function(t){return t}))):null!=a&&(S(a)&&(a=function(t,e){return{$$typeof:i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(E,"$&/")+"/")+t)),e.push(a)),1;if(l=0,r=""===r?".":r+":",Array.isArray(t))for(var u=0;u<t.length;u++){var c=r+I(s=t[u],u);l+=C(s,e,n,c,a)}else if(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof c)for(t=c.call(t),u=0;!(s=t.next()).done;)l+=C(s=s.value,e,n,c=r+I(s,u++),a);else if("object"===s)throw e=""+t,Error(p(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e));return l}function A(t,e,n){if(null==t)return t;var r=[],i=0;return C(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function P(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var T={current:null};function M(){var t=T.current;if(null===t)throw Error(p(321));return t}var L={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:A,forEach:function(t,e,n){A(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return A(t,(function(){e++})),e},toArray:function(t){return A(t,(function(t){return t}))||[]},only:function(t){if(!S(t))throw Error(p(143));return t}},e.Component=g,e.PureComponent=y,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(p(267,t));var o=r({},t.props),a=t.key,s=t.ref,l=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,l=x.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)b.call(e,c)&&!w.hasOwnProperty(c)&&(o[c]=void 0===e[c]&&void 0!==u?u[c]:e[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];o.children=u}return{$$typeof:i,type:t.type,key:a,ref:s,props:o,_owner:l}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:s,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=k,e.createFactory=function(t){var e=k.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:l,render:t}},e.isValidElement=S,e.lazy=function(t){return{$$typeof:c,_payload:{_status:-1,_result:t},_init:P}},e.memo=function(t,e){return{$$typeof:u,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return M().useCallback(t,e)},e.useContext=function(t,e){return M().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return M().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return M().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return M().useLayoutEffect(t,e)},e.useMemo=function(t,e){return M().useMemo(t,e)},e.useReducer=function(t,e,n){return M().useReducer(t,e,n)},e.useRef=function(t){return M().useRef(t)},e.useState=function(t){return M().useState(t)},e.version="17.0.2"},2791:function(t,e,n){"use strict";t.exports=n(9117)},184:function(t,e,n){"use strict";t.exports=n(6374)},9727:function(t){var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(M){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),a=new A(r||[]);return o._invoke=function(t,e,n){var r=h;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var l=c(t,e,n);if("normal"===l.type){if(r=n.done?d:f,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=d,n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(M){return{type:"throw",arg:M}}}t.wrap=u;var h="suspendedStart",f="suspendedYield",p="executing",d="completed",m={};function g(){}function v(){}function y(){}var _={};l(_,o,(function(){return this}));var x=Object.getPrototypeOf,b=x&&x(x(P([])));b&&b!==n&&r.call(b,o)&&(_=b);var w=y.prototype=g.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=c(t[i],t,o);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"===typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function E(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=c(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function P(t){if(t){var n=t[o];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:T}}function T(){return{value:e,done:!0}}return v.prototype=y,l(w,"constructor",y),l(y,"constructor",v),v.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},k(S.prototype),l(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new S(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(w),l(w,s,"Generator"),l(w,o,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=P,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=e}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},5844:function(t){"use strict";var e=Object,n=TypeError;t.exports=function(){if(null!=this&&this!==e(this))throw new n("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t}},3535:function(t,e,n){"use strict";var r=n(9396),i=n(9722),o=n(5844),a=n(1334),s=n(7888),l=i(a());r(l,{getPolyfill:a,implementation:o,shim:s}),t.exports=l},1334:function(t,e,n){"use strict";var r=n(5844),i=n(9396).supportsDescriptors,o=Object.getOwnPropertyDescriptor;t.exports=function(){if(i&&"gim"===/a/gim.flags){var t=o(RegExp.prototype,"flags");if(t&&"function"===typeof t.get&&"boolean"===typeof/a/.dotAll)return t.get}return r}},7888:function(t,e,n){"use strict";var r=n(9396).supportsDescriptors,i=n(1334),o=Object.getOwnPropertyDescriptor,a=Object.defineProperty,s=TypeError,l=Object.getPrototypeOf,u=/a/;t.exports=function(){if(!r||!l)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=i(),e=l(u),n=o(e,"flags");return n&&n.get===t||a(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},4460:function(t,e){!function(t){"use strict";var e=134217729,n=33306690738754706e-32;function r(t,e,n,r,i){var o,a,s,l,u=e[0],c=r[0],h=0,f=0;c>u==c>-u?(o=u,u=e[++h]):(o=c,c=r[++f]);var p=0;if(h<t&&f<n)for(c>u==c>-u?(s=o-((a=u+o)-u),u=e[++h]):(s=o-((a=c+o)-c),c=r[++f]),o=a,0!==s&&(i[p++]=s);h<t&&f<n;)c>u==c>-u?(s=o-((a=o+u)-(l=a-o))+(u-l),u=e[++h]):(s=o-((a=o+c)-(l=a-o))+(c-l),c=r[++f]),o=a,0!==s&&(i[p++]=s);for(;h<t;)s=o-((a=o+u)-(l=a-o))+(u-l),u=e[++h],o=a,0!==s&&(i[p++]=s);for(;f<n;)s=o-((a=o+c)-(l=a-o))+(c-l),c=r[++f],o=a,0!==s&&(i[p++]=s);return 0===o&&0!==p||(i[p++]=o),p}function i(t){return new Float64Array(t)}var o=33306690738754716e-32,a=22204460492503146e-32,s=11093356479670487e-47,l=i(4),u=i(8),c=i(12),h=i(16),f=i(4);t.orient2d=function(t,i,p,d,m,g){var v=(i-g)*(p-m),y=(t-m)*(d-g),_=v-y;if(0===v||0===y||v>0!=y>0)return _;var x=Math.abs(v+y);return Math.abs(_)>=o*x?_:-function(t,i,o,p,d,m,g){var v,y,_,x,b,w,k,S,E,I,C,A,P,T,M,L,R,N,O=t-d,z=o-d,D=i-m,F=p-m;b=(M=(S=O-(k=(w=e*O)-(w-O)))*(I=F-(E=(w=e*F)-(w-F)))-((T=O*F)-k*E-S*E-k*I))-(C=M-(R=(S=D-(k=(w=e*D)-(w-D)))*(I=z-(E=(w=e*z)-(w-z)))-((L=D*z)-k*E-S*E-k*I))),l[0]=M-(C+b)+(b-R),b=(P=T-((A=T+C)-(b=A-T))+(C-b))-(C=P-L),l[1]=P-(C+b)+(b-L),b=(N=A+C)-A,l[2]=A-(N-b)+(C-b),l[3]=N;var B=function(t,e){for(var n=e[0],r=1;r<t;r++)n+=e[r];return n}(4,l),j=a*g;if(B>=j||-B>=j)return B;if(v=t-(O+(b=t-O))+(b-d),_=o-(z+(b=o-z))+(b-d),y=i-(D+(b=i-D))+(b-m),x=p-(F+(b=p-F))+(b-m),0===v&&0===y&&0===_&&0===x)return B;if(j=s*g+n*Math.abs(B),(B+=O*x+F*v-(D*_+z*y))>=j||-B>=j)return B;b=(M=(S=v-(k=(w=e*v)-(w-v)))*(I=F-(E=(w=e*F)-(w-F)))-((T=v*F)-k*E-S*E-k*I))-(C=M-(R=(S=y-(k=(w=e*y)-(w-y)))*(I=z-(E=(w=e*z)-(w-z)))-((L=y*z)-k*E-S*E-k*I))),f[0]=M-(C+b)+(b-R),b=(P=T-((A=T+C)-(b=A-T))+(C-b))-(C=P-L),f[1]=P-(C+b)+(b-L),b=(N=A+C)-A,f[2]=A-(N-b)+(C-b),f[3]=N;var Z=r(4,l,4,f,u);b=(M=(S=O-(k=(w=e*O)-(w-O)))*(I=x-(E=(w=e*x)-(w-x)))-((T=O*x)-k*E-S*E-k*I))-(C=M-(R=(S=D-(k=(w=e*D)-(w-D)))*(I=_-(E=(w=e*_)-(w-_)))-((L=D*_)-k*E-S*E-k*I))),f[0]=M-(C+b)+(b-R),b=(P=T-((A=T+C)-(b=A-T))+(C-b))-(C=P-L),f[1]=P-(C+b)+(b-L),b=(N=A+C)-A,f[2]=A-(N-b)+(C-b),f[3]=N;var U=r(Z,u,4,f,c);b=(M=(S=v-(k=(w=e*v)-(w-v)))*(I=x-(E=(w=e*x)-(w-x)))-((T=v*x)-k*E-S*E-k*I))-(C=M-(R=(S=y-(k=(w=e*y)-(w-y)))*(I=_-(E=(w=e*_)-(w-_)))-((L=y*_)-k*E-S*E-k*I))),f[0]=M-(C+b)+(b-R),b=(P=T-((A=T+C)-(b=A-T))+(C-b))-(C=P-L),f[1]=P-(C+b)+(b-L),b=(N=A+C)-A,f[2]=A-(N-b)+(C-b),f[3]=N;var V=r(U,c,4,f,h);return h[V-1]}(t,i,p,d,m,g,x)},t.orient2dfast=function(t,e,n,r,i,o){return(e-o)*(n-i)-(t-i)*(r-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},6813:function(t,e){"use strict";var n,r,i,o;if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,c=null,h=function t(){if(null!==u)try{var n=e.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(t,0),r}};n=function(t){null!==u?setTimeout(n,0,t):(u=t,setTimeout(h,0))},r=function(t,e){c=setTimeout(t,e)},i=function(){clearTimeout(c)},e.unstable_shouldYield=function(){return!1},o=e.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var d=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof d&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,v=-1,y=5,_=0;e.unstable_shouldYield=function(){return e.unstable_now()>=_},o=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<t?Math.floor(1e3/t):5};var x=new MessageChannel,b=x.port2;x.port1.onmessage=function(){if(null!==g){var t=e.unstable_now();_=t+y;try{g(!0,t)?b.postMessage(null):(m=!1,g=null)}catch(n){throw b.postMessage(null),n}}else m=!1},n=function(t){g=t,m||(m=!0,b.postMessage(null))},r=function(t,n){v=f((function(){t(e.unstable_now())}),n)},i=function(){p(v),v=-1}}function w(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<E(i,e)))break t;t[r]=e,t[n]=i,n=r}}function k(t){return void 0===(t=t[0])?null:t}function S(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,a=t[o],s=o+1,l=t[s];if(void 0!==a&&0>E(a,n))void 0!==l&&0>E(l,a)?(t[r]=l,t[s]=n,r=s):(t[r]=a,t[o]=n,r=o);else{if(!(void 0!==l&&0>E(l,n)))break t;t[r]=l,t[s]=n,r=s}}}return e}return null}function E(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var I=[],C=[],A=1,P=null,T=3,M=!1,L=!1,R=!1;function N(t){for(var e=k(C);null!==e;){if(null===e.callback)S(C);else{if(!(e.startTime<=t))break;S(C),e.sortIndex=e.expirationTime,w(I,e)}e=k(C)}}function O(t){if(R=!1,N(t),!L)if(null!==k(I))L=!0,n(z);else{var e=k(C);null!==e&&r(O,e.startTime-t)}}function z(t,n){L=!1,R&&(R=!1,i()),M=!0;var o=T;try{for(N(n),P=k(I);null!==P&&(!(P.expirationTime>n)||t&&!e.unstable_shouldYield());){var a=P.callback;if("function"===typeof a){P.callback=null,T=P.priorityLevel;var s=a(P.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?P.callback=s:P===k(I)&&S(I),N(n)}else S(I);P=k(I)}if(null!==P)var l=!0;else{var u=k(C);null!==u&&r(O,u.startTime-n),l=!1}return l}finally{P=null,T=o,M=!1}}var D=o;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){L||M||(L=!0,n(z))},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return k(I)},e.unstable_next=function(t){switch(T){case 1:case 2:case 3:var e=3;break;default:e=T}var n=T;T=e;try{return t()}finally{T=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=D,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=T;T=t;try{return e()}finally{T=n}},e.unstable_scheduleCallback=function(t,o,a){var s=e.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,t){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return t={id:A++,callback:o,priorityLevel:t,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>s?(t.sortIndex=a,w(C,t),null===k(I)&&t===k(C)&&(R?i():R=!0,r(O,a-s))):(t.sortIndex=l,w(I,t),L||M||(L=!0,n(z))),t},e.unstable_wrapCallback=function(t){var e=T;return function(){var n=T;T=e;try{return t.apply(this,arguments)}finally{T=n}}}},5296:function(t,e,n){"use strict";t.exports=n(6813)},1848:function(t){"use strict";t.exports={eudist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var a=(t[o]||0)-(e[o]||0);i+=a*a}return n?Math.sqrt(i):i},mandist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++)i+=Math.abs((t[o]||0)-(e[o]||0));return n?Math.sqrt(i):i},dist:function(t,e,n){var r=Math.abs(t-e);return n?r:r*r}}},3556:function(t,e,n){"use strict";var r=n(1848),i=r.eudist,o=r.dist;t.exports={kmrand:function(t,e){for(var n={},r=[],i=e<<2,o=t.length,a=t[0].length>0;r.length<e&&i-- >0;){var s=t[Math.floor(Math.random()*o)],l=a?s.join("_"):""+s;n[l]||(n[l]=!0,r.push(s))}if(r.length<e)throw new Error("Error initializating clusters");return r},kmpp:function(t,e){var n=t[0].length?i:o,r=[],a=t.length,s=t[0].length>0,l=t[Math.floor(Math.random()*a)];s&&l.join("_");for(r.push(l);r.length<e;){for(var u=[],c=r.length,h=0,f=[],p=0;p<a;p++){for(var d=1/0,m=0;m<c;m++){var g=n(t[p],r[m]);g<=d&&(d=g)}u[p]=d}for(var v=0;v<a;v++)h+=u[v];for(var y=0;y<a;y++)f[y]={i:y,v:t[y],pr:u[y]/h,cs:0};f.sort((function(t,e){return t.pr-e.pr})),f[0].cs=f[0].pr;for(var _=1;_<a;_++)f[_].cs=f[_-1].cs+f[_].pr;for(var x=Math.random(),b=0;b<a-1&&f[b++].cs<x;);r.push(f[b-1].v)}return r}}},6530:function(t,e,n){"use strict";var r=n(1848),i=n(3556),o=r.eudist,a=(r.mandist,r.dist,i.kmrand),s=i.kmpp;function l(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}t.exports=function(t,e,n,r){var i=[],u=[],c=[],h=[],f=!1,p=r||1e4,d=t.length,m=t[0].length,g=m>0,v=[];if(n)i="kmrand"==n?a(t,e):"kmpp"==n?s(t,e):n;else for(var y={};i.length<e;){var _=Math.floor(Math.random()*d);y[_]||(y[_]=!0,i.push(t[_]))}do{l(e,0,v);for(var x=0;x<d;x++){for(var b=1/0,w=0,k=0;k<e;k++){(h=g?o(t[x],i[k]):Math.abs(t[x]-i[k]))<=b&&(b=h,w=k)}c[x]=w,v[w]++}for(var S=[],E=(u=[],0);E<e;E++)S[E]=g?l(m,0,S[E]):0,u[E]=i[E];if(g){for(var I=0;I<e;I++)i[I]=[];for(var C=0;C<d;C++)for(var A=S[c[C]],P=t[C],T=0;T<m;T++)A[T]+=P[T];f=!0;for(var M=0;M<e;M++){for(var L=i[M],R=S[M],N=u[M],O=v[M],z=0;z<m;z++)L[z]=R[z]/O||0;if(f)for(var D=0;D<m;D++)if(N[D]!=L[D]){f=!1;break}}}else{for(var F=0;F<d;F++){S[c[F]]+=t[F]}for(var B=0;B<e;B++)i[B]=S[B]/v[B]||0;f=!0;for(var j=0;j<e;j++)if(u[j]!=i[j]){f=!1;break}}f=f||--p<=0}while(!f);return{it:1e4-p,k:e,idxs:c,centroids:i}}},4613:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return o}});var r=n(5671),i=n(3144),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if((0,r.Z)(this,t),this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)}return(0,i.Z)(t,[{key:"push",value:function(t){this.data.push(t),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}},{key:"_down",value:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i}}]),t}();function a(t,e){return t<e?-1:t>e?1:0}},4035:function(t,e){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function r(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function a(t){return null===t?Nt:t.color}function s(t){return null===t?null:t.parent}function l(t,e){null!==t&&(t.color=e)}function u(t){return null===t?null:t.left}function c(t){return null===t?null:t.right}function h(){this.root_=null,this.size_=0}function f(){}function p(){this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}function d(){}function m(t){this.message=t||""}function g(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var v=function(){};v.prototype.interfaces_=function(){return[]},v.prototype.getClass=function(){return v},v.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var y=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),_=function(){},x={MAX_VALUE:{configurable:!0}};_.isNaN=function(t){return Number.isNaN(t)},_.doubleToLongBits=function(t){return t},_.longBitsToDouble=function(t){return t},_.isInfinite=function(t){return!Number.isFinite(t)},x.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(_,x);var b=function(){},w=function(){},k=function(){},S=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},E={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};S.prototype.setOrdinate=function(t,e){switch(t){case S.X:this.x=e;break;case S.Y:this.y=e;break;case S.Z:this.z=e;break;default:throw new y("Invalid ordinate index: "+t)}},S.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!v.equalsWithTolerance(this.x,e.x,n)&&!!v.equalsWithTolerance(this.y,e.y,n)}},S.prototype.getOrdinate=function(t){switch(t){case S.X:return this.x;case S.Y:return this.y;case S.Z:return this.z}throw new y("Invalid ordinate index: "+t)},S.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||_.isNaN(this.z))&&_.isNaN(t.z)},S.prototype.equals=function(t){return t instanceof S&&this.equals2D(t)},S.prototype.equalInZ=function(t,e){return v.equalsWithTolerance(this.z,t.z,e)},S.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},S.prototype.clone=function(){},S.prototype.copy=function(){return new S(this)},S.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},S.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},S.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},S.prototype.hashCode=function(){var t=17;return 37*(t=37*t+S.hashCode(this.x))+S.hashCode(this.y)},S.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},S.prototype.interfaces_=function(){return[b,w,e]},S.prototype.getClass=function(){return S},S.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=_.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},E.DimensionalComparator.get=function(){return I},E.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},E.NULL_ORDINATE.get=function(){return _.NaN},E.X.get=function(){return 0},E.Y.get=function(){return 1},E.Z.get=function(){return 2},Object.defineProperties(S,E);var I=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new y("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};I.prototype.compare=function(t,e){var n=t,r=e,i=I.compare(n.x,r.x);if(0!==i)return i;var o=I.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:I.compare(n.z,r.z)},I.prototype.interfaces_=function(){return[k]},I.prototype.getClass=function(){return I},I.compare=function(t,e){return t<e?-1:t>e?1:_.isNaN(t)?_.isNaN(e)?0:-1:_.isNaN(e)?1:0};var C=function(){};C.prototype.create=function(){},C.prototype.interfaces_=function(){return[]},C.prototype.getClass=function(){return C};var A=function(){},P={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};A.prototype.interfaces_=function(){return[]},A.prototype.getClass=function(){return A},A.toLocationSymbol=function(t){switch(t){case A.EXTERIOR:return"e";case A.BOUNDARY:return"b";case A.INTERIOR:return"i";case A.NONE:return"-"}throw new y("Unknown location value: "+t)},P.INTERIOR.get=function(){return 0},P.BOUNDARY.get=function(){return 1},P.EXTERIOR.get=function(){return 2},P.NONE.get=function(){return-1},Object.defineProperties(A,P);var T=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},M=function(){},L={LOG_10:{configurable:!0}};M.prototype.interfaces_=function(){return[]},M.prototype.getClass=function(){return M},M.log10=function(t){var e=Math.log(t);return _.isInfinite(e)||_.isNaN(e)?e:e/M.LOG_10},M.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},M.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},M.wrap=function(t,e){return t<0?e- -t%e:t%e},M.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[0];return r>a&&(a=r),i>a&&(a=i),o>a&&(a=o),a}},M.average=function(t,e){return(t+e)/2},L.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(M,L);var R=function(t){this.str=t};R.prototype.append=function(t){this.str+=t},R.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},R.prototype.toString=function(t){return this.str};var N=function(t){this.value=t};N.prototype.intValue=function(){return this.value},N.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},N.isNaN=function(t){return Number.isNaN(t)};var O=function(){};O.isWhitespace=function(t){return t<=32&&t>=0||127===t},O.toUpperCase=function(t){return t.toUpperCase()};var z=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},D={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};z.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},z.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=z.magnitude(n._hi),i=z.TEN.pow(r);(n=n.divide(i)).gt(z.TEN)?(n=n.divide(z.TEN),r+=1):n.lt(z.ONE)&&(n=n.multiply(z.TEN),r-=1);for(var o=r+1,a=new R,s=z.MAX_PRINT_DIGITS-1,l=0;l<=s;l++){t&&l===o&&a.append(".");var u=Math.trunc(n._hi);if(u<0)break;var c=!1,h=0;u>9?(c=!0,h="9"):h="0"+u,a.append(h),n=n.subtract(z.valueOf(u)).multiply(z.TEN),c&&n.selfAdd(z.TEN);var f=!0,p=z.magnitude(n._hi);if(p<0&&Math.abs(p)>=s-l&&(f=!1),!f)break}return e[0]=r,a.toString()},z.prototype.sqr=function(){return this.multiply(this)},z.prototype.doubleValue=function(){return this._hi+this._lo},z.prototype.subtract=function(){if(arguments[0]instanceof z){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},z.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},z.prototype.isZero=function(){return 0===this._hi&&0===this._lo},z.prototype.selfSubtract=function(){if(arguments[0]instanceof z){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},z.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},z.prototype.min=function(t){return this.le(t)?this:t},z.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof z){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,l=null,u=null,c=null,h=null;return l=this._hi/n,h=(i=(u=z.SPLIT*l)-(i=u-l))*(a=(h=z.SPLIT*n)-(a=h-n))-(c=l*n)+i*(s=n-a)+(o=l-i)*a+o*s,h=l+(u=(this._hi-c-h+this._lo-l*r)/n),this._hi=h,this._lo=l-h+u,this}},z.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},z.prototype.divide=function(){if(arguments[0]instanceof z){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,l=null;return n=(o=this._hi/t._hi)-(e=(a=z.SPLIT*o)-(e=a-o)),l=e*(r=(l=z.SPLIT*t._hi)-(r=l-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,a=(this._hi-s-l+this._lo-o*t._lo)/t._hi,new z(l=o+a,o-l+a)}if("number"==typeof arguments[0]){var u=arguments[0];return _.isNaN(u)?z.createNaN():z.copy(this).selfDivide(u,0)}},z.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},z.prototype.pow=function(t){if(0===t)return z.valueOf(1);var e=new z(this),n=z.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},z.prototype.ceil=function(){if(this.isNaN())return z.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new z(t,e)},z.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},z.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},z.prototype.setValue=function(){if(arguments[0]instanceof z){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},z.prototype.max=function(t){return this.ge(t)?this:t},z.prototype.sqrt=function(){if(this.isZero())return z.valueOf(0);if(this.isNegative())return z.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=z.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},z.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof z){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+e)-(a=i-this._hi),r=(s=(o=e-a+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var l=arguments[0],u=arguments[1],c=null,h=null,f=null,p=null,d=null,m=null,g=null;p=this._hi+l,h=this._lo+u,d=p-(m=p-this._hi),f=h-(g=h-this._lo);var v=(c=p+(m=(d=l-m+(this._hi-d))+h))+(m=(f=u-g+(this._lo-f))+(m+(p-c))),y=m+(c-v);return this._hi=v,this._lo=y,this}},z.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof z){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,l=null,u=null;i=(l=z.SPLIT*this._hi)-this._hi,u=z.SPLIT*n,i=l-i,o=this._hi-i,a=u-n;var c=(l=this._hi*n)+(u=i*(a=u-a)-l+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),h=u+(i=l-c);return this._hi=c,this._lo=h,this}},z.prototype.selfSqr=function(){return this.selfMultiply(this)},z.prototype.floor=function(){if(this.isNaN())return z.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new z(t,e)},z.prototype.negate=function(){return this.isNaN()?this:new z(-this._hi,-this._lo)},z.prototype.clone=function(){},z.prototype.multiply=function(){if(arguments[0]instanceof z){var t=arguments[0];return t.isNaN()?z.createNaN():z.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return _.isNaN(e)?z.createNaN():z.copy(this).selfMultiply(e,0)}},z.prototype.isNaN=function(){return _.isNaN(this._hi)},z.prototype.intValue=function(){return Math.trunc(this._hi)},z.prototype.toString=function(){var t=z.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},z.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+z.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+z.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},z.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,a=null,s=null;e=(i=1/this._hi)-(t=(o=z.SPLIT*i)-(t=o-i)),n=(s=z.SPLIT*this._hi)-this._hi;var l=i+(o=(1-(a=i*this._hi)-(s=t*(n=s-n)-a+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new z(l,i-l+o)},z.prototype.toSciNotation=function(){if(this.isZero())return z.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=z.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},z.prototype.abs=function(){return this.isNaN()?z.NaN:this.isNegative()?this.negate():new z(this)},z.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},z.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},z.prototype.add=function(){if(arguments[0]instanceof z){var t=arguments[0];return z.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return z.copy(this).selfAdd(e)}},z.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof z){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},z.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},z.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},z.prototype.trunc=function(){return this.isNaN()?z.NaN:this.isPositive()?this.floor():this.ceil()},z.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},z.prototype.interfaces_=function(){return[e,b,w]},z.prototype.getClass=function(){return z},z.sqr=function(t){return z.valueOf(t).selfMultiply(t)},z.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return z.parse(t)}if("number"==typeof arguments[0])return new z(arguments[0])},z.sqrt=function(t){return z.valueOf(t).sqrt()},z.parse=function(t){for(var e=0,n=t.length;O.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new z,a=0,s=0,l=0;!(e>=n);){var u=t.charAt(e);if(e++,O.isDigit(u)){var c=u-"0";o.selfMultiply(z.TEN),o.selfAdd(c),a++}else{if("."!==u){if("e"===u||"E"===u){var h=t.substring(e);try{l=N.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+u+"' at position "+e+" in string "+t)}s=a}}var f=o,p=a-s-l;if(0===p)f=o;else if(p>0){var d=z.TEN.pow(p);f=o.divide(d)}else if(p<0){var m=z.TEN.pow(-p);f=o.multiply(m)}return r?f.negate():f},z.createNaN=function(){return new z(_.NaN,_.NaN)},z.copy=function(t){return new z(t)},z.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},z.stringOfChar=function(t,e){for(var n=new R,r=0;r<e;r++)n.append(t);return n.toString()},D.PI.get=function(){return new z(3.141592653589793,12246467991473532e-32)},D.TWO_PI.get=function(){return new z(6.283185307179586,24492935982947064e-32)},D.PI_2.get=function(){return new z(1.5707963267948966,6123233995736766e-32)},D.E.get=function(){return new z(2.718281828459045,14456468917292502e-32)},D.NaN.get=function(){return new z(_.NaN,_.NaN)},D.EPS.get=function(){return 123259516440783e-46},D.SPLIT.get=function(){return 134217729},D.MAX_PRINT_DIGITS.get=function(){return 32},D.TEN.get=function(){return z.valueOf(10)},D.ONE.get=function(){return z.valueOf(1)},D.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},D.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(z,D);var F=function(){},B={DP_SAFE_EPSILON:{configurable:!0}};F.prototype.interfaces_=function(){return[]},F.prototype.getClass=function(){return F},F.orientationIndex=function(t,e,n){var r=F.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=z.valueOf(e.x).selfAdd(-t.x),o=z.valueOf(e.y).selfAdd(-t.y),a=z.valueOf(n.x).selfAdd(-e.x),s=z.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},F.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},F.intersection=function(t,e,n,r){var i=z.valueOf(r.y).selfSubtract(n.y).selfMultiply(z.valueOf(e.x).selfSubtract(t.x)),o=z.valueOf(r.x).selfSubtract(n.x).selfMultiply(z.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=z.valueOf(r.x).selfSubtract(n.x).selfMultiply(z.valueOf(t.y).selfSubtract(n.y)),l=z.valueOf(r.y).selfSubtract(n.y).selfMultiply(z.valueOf(t.x).selfSubtract(n.x)),u=s.subtract(l).selfDivide(a).doubleValue(),c=z.valueOf(t.x).selfAdd(z.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),h=z.valueOf(e.x).selfSubtract(t.x).selfMultiply(z.valueOf(t.y).selfSubtract(n.y)),f=z.valueOf(e.y).selfSubtract(t.y).selfMultiply(z.valueOf(t.x).selfSubtract(n.x)),p=h.subtract(f).selfDivide(a).doubleValue(),d=z.valueOf(n.y).selfAdd(z.valueOf(r.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new S(c,d)},F.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return F.signum(a);r=i+o}else{if(!(i<0))return F.signum(a);if(o>=0)return F.signum(a);r=-i-o}var s=F.DP_SAFE_EPSILON*r;return a>=s||-a>=s?F.signum(a):2},F.signum=function(t){return t>0?1:t<0?-1:0},B.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(F,B);var j=function(){},Z={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Z.X.get=function(){return 0},Z.Y.get=function(){return 1},Z.Z.get=function(){return 2},Z.M.get=function(){return 3},j.prototype.setOrdinate=function(t,e,n){},j.prototype.size=function(){},j.prototype.getOrdinate=function(t,e){},j.prototype.getCoordinate=function(){},j.prototype.getCoordinateCopy=function(t){},j.prototype.getDimension=function(){},j.prototype.getX=function(t){},j.prototype.clone=function(){},j.prototype.expandEnvelope=function(t){},j.prototype.copy=function(){},j.prototype.getY=function(t){},j.prototype.toCoordinateArray=function(){},j.prototype.interfaces_=function(){return[w]},j.prototype.getClass=function(){return j},Object.defineProperties(j,Z);var U=function(){},V=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(U),q=function(){};q.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},q.getProperty=function(t){return{"line.separator":"\n"}[t]};var G=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof S&&arguments[1]instanceof S){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2];this.x=l,this.y=u,this.w=c}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],m=h.y-f.y,g=f.x-h.x,v=h.x*f.y-f.x*h.y,y=p.y-d.y,_=d.x-p.x,x=p.x*d.y-d.x*p.y;this.x=g*x-_*v,this.y=y*v-m*x,this.w=m*_-y*g}};G.prototype.getY=function(){var t=this.y/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new V;return t},G.prototype.getX=function(){var t=this.x/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new V;return t},G.prototype.getCoordinate=function(){var t=new S;return t.x=this.getX(),t.y=this.getY(),t},G.prototype.interfaces_=function(){return[]},G.prototype.getClass=function(){return G},G.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,l=r.x-n.x,u=n.x*r.y-r.x*n.y,c=i*l-s*o,h=(o*u-l*a)/c,f=(s*a-i*u)/c;if(_.isNaN(h)||_.isInfinite(h)||_.isNaN(f)||_.isInfinite(f))throw new V;return new S(h,f)};var W=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof S){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3];this.init(o,a,s,l)}},H={serialVersionUID:{configurable:!0}};W.prototype.getArea=function(){return this.getWidth()*this.getHeight()},W.prototype.equals=function(t){if(!(t instanceof W))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},W.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new W;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new W(e,r,n,i)},W.prototype.isNull=function(){return this._maxx<this._minx},W.prototype.getMaxX=function(){return this._maxx},W.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof W){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},W.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof W){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof S){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},W.prototype.getMinY=function(){return this._miny},W.prototype.getMinX=function(){return this._minx},W.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof W){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},W.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},W.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},W.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},W.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},W.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},W.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},W.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},W.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},W.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},W.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof W){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof S){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},W.prototype.centre=function(){return this.isNull()?null:new S((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},W.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof W){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},W.prototype.getMaxY=function(){return this._maxy},W.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},W.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+S.hashCode(this._minx))+S.hashCode(this._maxx))+S.hashCode(this._miny))+S.hashCode(this._maxy)},W.prototype.interfaces_=function(){return[b,e]},W.prototype.getClass=function(){return W},W.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),l=Math.max(o.x,a.x),u=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(u>l)&&!(c<s)&&(s=Math.min(o.y,a.y),l=Math.max(o.y,a.y),u=Math.min(r.y,i.y),c=Math.max(r.y,i.y),!(u>l)&&!(c<s))}},H.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(W,H);var X={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Y=function(t){this.geometryFactory=t||new ve};Y.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=X.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=X.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],K[n]&&(e=K[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Y.prototype.write=function(t){return this.extractGeometry(t)},Y.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!$[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+$[e].apply(this,[t])+")"};var $={coordinate:function(t){return t.x+" "+t.y},point:function(t){return $.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+$.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push($.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push($.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+$.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+$.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+$.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+$.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},K={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(X.spaces);return this.geometryFactory.createPoint(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(X.trimParens,"$1"),r.push(K.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(X.spaces),r.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(X.spaces),r.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(X.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(X.trimParens,"$1"),r.push(K.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(X.parenComma),a=[],s=0,l=o.length;s<l;++s)e=o[s].replace(X.trimParens,"$1"),n=K.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(X.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(X.trimParens,"$1"),r.push(K.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},J=function(t){this.parser=new Y(t)};J.prototype.write=function(t){return this.parser.write(t)},J.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Q=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Q),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],et.isTrue(t,null);else if(2===arguments.length&&(e=arguments[1],!(t=arguments[0])))throw null===e?new tt:new tt(e)},et.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],et.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new S,this._intPt[1]=new S,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new R;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return J.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+J.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new W(this._inputLines[0][0],this._inputLines[0][1]),n=new W(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,W.intersects(n,r,e)&&0===st.orientationIndex(n,r,e)&&0===st.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=G.intersection(t,n,r,i)}catch(a){if(!(a instanceof V))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new S(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=F.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);q.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&q.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new S(t),o=new S(e),a=new S(n),s=new S(r),l=new S;this.normalizeToEnvCentre(i,o,a,s,l);var u=this.safeHCoordinateIntersection(i,o,a,s);return u.x+=l.x,u.y+=l.y,u},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=W.intersects(e,n,r),a=W.intersects(e,n,i),s=W.intersects(r,i,e),l=W.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&l?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&l?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&l?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,p=((o>u?o:u)+(s<h?s:h))/2,d=((a>c?a:c)+(l<f?l:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!W.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=st.orientationIndex(e,n,r),a=st.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=st.orientationIndex(r,i,e),l=st.orientationIndex(r,i,n);return s>0&&l>0||s<0&&l<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===l?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===l?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new S(r):0===a?this._intPt[0]=new S(i):0===s?this._intPt[0]=new S(e):0===l&&(this._intPt[0]=new S(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=st.distancePointLine(t,n,r),a=st.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=st.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=st.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return ot.signOfDet2x2(r,i,o,a)},ot.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=a*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=a*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var at=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};at.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,l=ot.signOfDet2x2(i,o,a,s);if(0===l)return this._isPointOnSegment=!0,null;s<o&&(l=-l),l>0&&this._crossingCount++}},at.prototype.isPointInPolygon=function(){return this.getLocation()!==A.EXTERIOR},at.prototype.getLocation=function(){return this._isPointOnSegment?A.BOUNDARY:this._crossingCount%2==1?A.INTERIOR:A.EXTERIOR},at.prototype.isOnSegment=function(){return this._isPointOnSegment},at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.locatePointInRing=function(){if(arguments[0]instanceof S&&T(arguments[1],j)){for(var t=arguments[1],e=new at(arguments[0]),n=new S,r=new S,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof S&&arguments[1]instanceof Array){for(var o=arguments[1],a=new at(arguments[0]),s=1;s<o.length;s++){var l=o[s],u=o[s-1];if(a.countSegment(l,u),a.isOnSegment())return a.getLocation()}return a.getLocation()}};var st=function(){},lt={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.orientationIndex=function(t,e,n){return F.orientationIndex(t,e,n)},st.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(T(arguments[0],j)){var a=arguments[0],s=a.size();if(s<3)return 0;var l=new S,u=new S,c=new S;a.getCoordinate(0,u),a.getCoordinate(1,c);var h=u.x;c.x-=h;for(var f=0,p=1;p<s-1;p++)l.y=u.y,u.x=c.x,u.y=c.y,a.getCoordinate(p+1,c),c.x-=h,f+=u.x*(l.y-c.y);return f/2}},st.distanceLineLine=function(t,e,n,r){if(t.equals(e))return st.distancePointLine(t,n,r);if(n.equals(r))return st.distancePointLine(r,t,e);var i=!1;if(W.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,l=a/o;(l<0||l>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?M.min(st.distancePointLine(t,n,r),st.distancePointLine(e,n,r),st.distancePointLine(n,t,e),st.distancePointLine(r,t,e)):0},st.isPointInRing=function(t,e){return st.locatePointInRing(t,e)!==A.EXTERIOR},st.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new S;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,l=r.y,u=s-i,c=l-o;n+=Math.sqrt(u*u+c*c),i=s,o=l}return n},st.isCCW=function(t){var e=t.length-1;if(e<3)throw new y("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var l=t[a],u=t[s];if(l.equals2D(n)||u.equals2D(n)||l.equals2D(u))return!1;var c=st.computeOrientation(l,n,u);return 0===c?l.x>u.x:c>0},st.locatePointInRing=function(t,e){return at.locatePointInRing(t,e)},st.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},st.computeOrientation=function(t,e,n){return st.orientationIndex(t,e,n)},st.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new y("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=st.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var l=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),u=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/l;if(u<=0)return o.distance(a);if(u>=1)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/l;return Math.abs(c)*Math.sqrt(l)}},st.isOnLine=function(t,e){for(var n=new it,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},lt.CLOCKWISE.get=function(){return-1},lt.RIGHT.get=function(){return st.CLOCKWISE},lt.COUNTERCLOCKWISE.get=function(){return 1},lt.LEFT.get=function(){return st.COUNTERCLOCKWISE},lt.COLLINEAR.get=function(){return 0},lt.STRAIGHT.get=function(){return st.COLLINEAR},Object.defineProperties(st,lt);var ut=function(){};ut.prototype.filter=function(t){},ut.prototype.interfaces_=function(){return[]},ut.prototype.getClass=function(){return ut};var ct=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ht={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ct.prototype.isGeometryCollection=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION},ct.prototype.getFactory=function(){return this._factory},ct.prototype.getGeometryN=function(t){return this},ct.prototype.getArea=function(){return 0},ct.prototype.isRectangle=function(){return!1},ct.prototype.equals=function(){if(arguments[0]instanceof ct){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ct))return!1;var n=e;return this.equalsExact(n)}},ct.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ct.prototype.geometryChanged=function(){this.apply(ct.geometryChangedFilter)},ct.prototype.geometryChangedAction=function(){this._envelope=null},ct.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ct.prototype.getLength=function(){return 0},ct.prototype.getNumGeometries=function(){return 1},ct.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},ct.prototype.getUserData=function(){return this._userData},ct.prototype.getSRID=function(){return this._SRID},ct.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ct.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION)throw new y("This method does not support GeometryCollection arguments")},ct.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ct.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ct.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ct.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new W(this._envelope)},ct.prototype.setSRID=function(t){this._SRID=t},ct.prototype.setUserData=function(t){this._userData=t},ct.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},ct.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ct.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ct.SORTINDEX_MULTIPOINT||this.getSortIndex()===ct.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ct.SORTINDEX_MULTIPOLYGON},ct.prototype.interfaces_=function(){return[w,b,e]},ct.prototype.getClass=function(){return ct},ct.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ct.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ht.serialVersionUID.get=function(){return 0x799ea46522854c00},ht.SORTINDEX_POINT.get=function(){return 0},ht.SORTINDEX_MULTIPOINT.get=function(){return 1},ht.SORTINDEX_LINESTRING.get=function(){return 2},ht.SORTINDEX_LINEARRING.get=function(){return 3},ht.SORTINDEX_MULTILINESTRING.get=function(){return 4},ht.SORTINDEX_POLYGON.get=function(){return 5},ht.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ht.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ht.geometryChangedFilter.get=function(){return ft},Object.defineProperties(ct,ht);var ft=function(){};ft.interfaces_=function(){return[ut]},ft.filter=function(t){t.geometryChangedAction()};var pt=function(){};pt.prototype.filter=function(t){},pt.prototype.interfaces_=function(){return[]},pt.prototype.getClass=function(){return pt};var dt=function(){},mt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},mt.Mod2BoundaryNodeRule.get=function(){return gt},mt.EndPointBoundaryNodeRule.get=function(){return vt},mt.MultiValentEndPointBoundaryNodeRule.get=function(){return yt},mt.MonoValentEndPointBoundaryNodeRule.get=function(){return _t},mt.MOD2_BOUNDARY_RULE.get=function(){return new gt},mt.ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},mt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new yt},mt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},mt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,mt);var gt=function(){};gt.prototype.isInBoundary=function(t){return t%2==1},gt.prototype.interfaces_=function(){return[dt]},gt.prototype.getClass=function(){return gt};var vt=function(){};vt.prototype.isInBoundary=function(t){return t>0},vt.prototype.interfaces_=function(){return[dt]},vt.prototype.getClass=function(){return vt};var yt=function(){};yt.prototype.isInBoundary=function(t){return t>1},yt.prototype.interfaces_=function(){return[dt]},yt.prototype.getClass=function(){return yt};var _t=function(){};_t.prototype.isInBoundary=function(t){return 1===t},_t.prototype.interfaces_=function(){return[dt]},_t.prototype.getClass=function(){return _t};var xt=function(){};xt.prototype.add=function(){},xt.prototype.addAll=function(){},xt.prototype.isEmpty=function(){},xt.prototype.iterator=function(){},xt.prototype.size=function(){},xt.prototype.toArray=function(){},xt.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var bt=function(){};bt.prototype.hasNext=function(){},bt.prototype.next=function(){},bt.prototype.remove=function(){};var wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(xt);(r.prototype=new Error).name="NoSuchElementException";var kt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,xt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new St(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(wt),St=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(bt),Et=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof S&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],l=arguments[1];if(arguments[2])for(var u=0;u<s.length;u++)this.add(s[u],l);else for(var c=s.length-1;c>=0;c--)this.add(s[c],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof S){var h=arguments[0],f=arguments[1];if(!arguments[2]){var p=this.size();if(p>0){if(h>0&&this.get(h-1).equals2D(f))return null;if(h<p&&this.get(h).equals2D(f))return null}}t.prototype.add.call(this,h,f)}}else if(4===arguments.length){var d=arguments[0],m=arguments[1],g=arguments[2],v=arguments[3],y=1;g>v&&(y=-1);for(var _=g;_!==v;_+=y)this.add(d[_],m);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new S(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(kt),It=function(){},Ct={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Ct.ForwardComparator.get=function(){return At},Ct.BidirectionalComparator.get=function(){return Pt},Ct.coordArrayType.get=function(){return new Array(0).fill(null)},It.prototype.interfaces_=function(){return[]},It.prototype.getClass=function(){return It},It.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},It.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(It.indexOf(r,e)<0)return r}return null},It.scroll=function(t,e){var n=It.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);q.arraycopy(t,n,r,0,t.length-n),q.arraycopy(t,0,r,t.length-n,n),q.arraycopy(r,0,t,0,t.length)},It.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},It.intersection=function(t,e){for(var n=new Et,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},It.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},It.removeRepeatedPoints=function(t){return It.hasRepeatedPoints(t)?new Et(t,!1).toCoordinateArray():t},It.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},It.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},It.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new S(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],l=0;l<s;l++)o[a+l]=new S(r[i+l])},It.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},It.envelope=function(t){for(var e=new W,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},It.toCoordinateArray=function(t){return t.toArray(It.coordArrayType)},It.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},It.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},It.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},It.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},It.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},It.extract=function(t,e,n){e=M.clamp(e,0,t.length);var r=(n=M.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(It,Ct);var At=function(){};At.prototype.compare=function(t,e){return It.compare(t,e)},At.prototype.interfaces_=function(){return[k]},At.prototype.getClass=function(){return At};var Pt=function(){};Pt.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=It.compare(n,r);return It.isEqualReversed(n,r)?0:i},Pt.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=It.increasingDirection(n),o=It.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,l=0;l<n.length;l++){var u=n[a].compareTo(r[s]);if(0!==u)return u;a+=i,s+=o}return 0},Pt.prototype.interfaces_=function(){return[k]},Pt.prototype.getClass=function(){return Pt};var Tt=function(){};Tt.prototype.get=function(){},Tt.prototype.put=function(){},Tt.prototype.size=function(){},Tt.prototype.values=function(){},Tt.prototype.entrySet=function(){};var Mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Tt);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new xt).contains=function(){};var Lt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Rt(this)},e}(o),Rt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new i},e}(bt),Nt=0;(h.prototype=new Mt).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},h.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Nt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:Nt,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},h.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(s(t)===u(s(s(t)))){var e=c(s(s(t)));1===a(e)?(l(s(t),Nt),l(e,Nt),l(s(s(t)),1),t=s(s(t))):(t===c(s(t))&&(t=s(t),this.rotateLeft(t)),l(s(t),Nt),l(s(s(t)),1),this.rotateRight(s(s(t))))}else{var n=u(s(s(t)));1===a(n)?(l(s(t),Nt),l(n,Nt),l(s(s(t)),1),t=s(s(t))):(t===u(s(t))&&(t=s(t),this.rotateRight(t)),l(s(t),Nt),l(s(s(t)),1),this.rotateLeft(s(s(t))))}this.root_.color=Nt},h.prototype.values=function(){var t=new kt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=h.successor(e));)t.add(e.value);return t},h.prototype.entrySet=function(){var t=new Lt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=h.successor(e));)t.add(e);return t},h.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},h.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},h.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},h.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},h.prototype.size=function(){return this.size_};var Ot=function(){};Ot.prototype.interfaces_=function(){return[]},Ot.prototype.getClass=function(){return Ot},f.prototype=new o,(p.prototype=new f).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},p.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},p.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},p.prototype.remove=function(t){throw new i},p.prototype.size=function(){return this.array_.length},p.prototype.isEmpty=function(){return 0===this.array_.length},p.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},p.prototype.iterator=function(){return new zt(this)};var zt=function(t){this.treeSet_=t,this.position_=0};zt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},zt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},zt.prototype.remove=function(){throw new i};var Dt=function(){};Dt.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Dt.asList=function(t){for(var e=new kt,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Ft=function(){},Bt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bt.P.get=function(){return 0},Bt.L.get=function(){return 1},Bt.A.get=function(){return 2},Bt.FALSE.get=function(){return-1},Bt.TRUE.get=function(){return-2},Bt.DONTCARE.get=function(){return-3},Bt.SYM_FALSE.get=function(){return"F"},Bt.SYM_TRUE.get=function(){return"T"},Bt.SYM_DONTCARE.get=function(){return"*"},Bt.SYM_P.get=function(){return"0"},Bt.SYM_L.get=function(){return"1"},Bt.SYM_A.get=function(){return"2"},Ft.prototype.interfaces_=function(){return[]},Ft.prototype.getClass=function(){return Ft},Ft.toDimensionSymbol=function(t){switch(t){case Ft.FALSE:return Ft.SYM_FALSE;case Ft.TRUE:return Ft.SYM_TRUE;case Ft.DONTCARE:return Ft.SYM_DONTCARE;case Ft.P:return Ft.SYM_P;case Ft.L:return Ft.SYM_L;case Ft.A:return Ft.SYM_A}throw new y("Unknown dimension value: "+t)},Ft.toDimensionValue=function(t){switch(O.toUpperCase(t)){case Ft.SYM_FALSE:return Ft.FALSE;case Ft.SYM_TRUE:return Ft.TRUE;case Ft.SYM_DONTCARE:return Ft.DONTCARE;case Ft.SYM_P:return Ft.P;case Ft.SYM_L:return Ft.L;case Ft.SYM_A:return Ft.A}throw new y("Unknown dimension symbol: "+t)},Object.defineProperties(Ft,Bt);var jt=function(){};jt.prototype.filter=function(t){},jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt};var Zt=function(){};Zt.prototype.filter=function(t,e){},Zt.prototype.isDone=function(){},Zt.prototype.isGeometryChanged=function(){},Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt};var Ut=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new y("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new W,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Dt.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Ft.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Ft.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new p(Dt.asList(this._geometries)),n=new p(Dt.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),a=i.getNumGeometries(),s=0;s<o&&s<a;){var l=this.getGeometryN(s),u=i.getGeometryN(s),c=l.compareToSameClass(u,r);if(0!==c)return c;s++}return s<o?1:s<a?-1:0}},e.prototype.apply=function(){if(T(arguments[0],pt))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(T(arguments[0],Zt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(T(arguments[0],jt)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(T(arguments[0],ut)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ct),Vt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ft.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new qt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Ot]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Ut),qt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};qt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},qt.prototype.getBoundary=function(){return this._geom instanceof Yt?this.boundaryLineString(this._geom):this._geom instanceof Vt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},qt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},qt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},qt.prototype.computeBoundaryCoordinates=function(t){var e=new kt;this._endpointMap=new h;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return It.toCoordinateArray(e)},qt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Gt,this._endpointMap.put(t,e)),e.count++},qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt},qt.getBoundary=function(){return 1===arguments.length?new qt(arguments[0]).getBoundary():2===arguments.length?new qt(arguments[0],arguments[1]).getBoundary():void 0};var Gt=function(){this.count=null};Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt};var Wt=function(){},Ht={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt},Wt.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Wt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}(Wt.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+Wt.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return o}},Wt.split=function(t,e){for(var n=e.length,r=new kt,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),l=0;l<s.length;l++)s[l]=r.get(l);return s},Wt.toString=function(){if(1===arguments.length){var t=arguments[0];return Wt.SIMPLE_ORDINATE_FORMAT.format(t)}},Wt.spaces=function(t){return Wt.chars(" ",t)},Ht.NEWLINE.get=function(){return q.getProperty("line.separator")},Ht.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Wt,Ht);var Xt=function(){};Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt},Xt.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Xt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,j.X)===t.getOrdinate(e-1,j.X)&&t.getOrdinate(0,j.Y)===t.getOrdinate(e-1,j.Y)},Xt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!_.isNaN(a)||!_.isNaN(s)))return!1}return!0},Xt.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Xt.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Xt.copy(e,i-1,r,o,1);return r},Xt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Xt.swap(t,r,e-r)},Xt.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Xt.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Xt.copyCoord(t,e+o,n,r+o)},Xt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new R;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Wt.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Xt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Xt.createClosedRing(t,e,4):e.getOrdinate(0,j.X)===e.getOrdinate(n-1,j.X)&&e.getOrdinate(0,j.Y)===e.getOrdinate(n-1,j.Y)?e:Xt.createClosedRing(t,e,n+1)},Xt.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Xt.copy(e,0,r,0,i);for(var o=i;o<n;o++)Xt.copy(e,0,r,o,1);return r};var Yt=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new W:this._points.expandEnvelope(new W)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Xt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ft.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return st.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Xt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(T(arguments[0],pt))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(T(arguments[0],Zt)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(T(arguments[0],jt)||T(arguments[0],ut))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new qt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new y("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Ot]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ct),$t=function(){};$t.prototype.interfaces_=function(){return[]},$t.prototype.getClass=function(){return $t};var Kt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new W;var t=new W;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(T(arguments[0],pt)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(T(arguments[0],Zt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(T(arguments[0],jt)||T(arguments[0],ut))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[$t]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ct),Jt=function(){};Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt};var Qt=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new y("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new y("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(st.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(st.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var l=t.getX(s),u=t.getY(s);if(l!==o===(u!==a))return!1;o=l,a=u}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Dt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);q.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=It.minCoordinate(e.getCoordinates());It.scroll(r,i),q.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],st.isCCW(e.getCoordinates())===n&&It.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,a=i._shell,s=o.compareToSameClass(a,r);if(0!==s)return s;for(var l=this.getNumInteriorRing(),u=i.getNumInteriorRing(),c=0;c<l&&c<u;){var h=this.getInteriorRingN(c),f=i.getInteriorRingN(c),p=h.compareToSameClass(f,r);if(0!==p)return p;c++}return c<l?1:c<u?-1:0}},e.prototype.apply=function(t){if(T(t,pt)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(T(t,Zt)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(T(t,jt))t.filter(this);else if(T(t,ut)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ct),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[$t]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Ut),ee=function(t){function e(e,n){e instanceof S&&n instanceof ve&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Xt.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new y("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new y("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Yt),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new kt,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Ut),re=function(t){this._factory=t||null,this._isUserDataCopied=!1},ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};re.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},re.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},re.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Ut?this.editGeometryCollection(t,e):t instanceof Qt?this.editPolygon(t,e):t instanceof Kt||t instanceof Yt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},re.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new kt,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===te?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Vt?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},re.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new kt,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.GeometryEditorOperation=function(){},ie.NoOpGeometryOperation.get=function(){return oe},ie.CoordinateOperation.get=function(){return ae},ie.CoordinateSequenceOperation.get=function(){return se},Object.defineProperties(re,ie);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var ae=function(){};ae.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Yt?e.createLineString(n):t instanceof Kt?n.length>0?e.createPoint(n[0]):e.createPoint():t},ae.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var se=function(){};se.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Yt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Kt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},se.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var le=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new S}else if(T(arguments[0],j)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var l=0;l<a;l++)this._coordinates[l]=new S}},ue={serialVersionUID:{configurable:!0}};le.prototype.setOrdinate=function(t,e,n){switch(e){case j.X:this._coordinates[t].x=n;break;case j.Y:this._coordinates[t].y=n;break;case j.Z:this._coordinates[t].z=n;break;default:throw new y("invalid ordinateIndex")}},le.prototype.size=function(){return this._coordinates.length},le.prototype.getOrdinate=function(t,e){switch(e){case j.X:return this._coordinates[t].x;case j.Y:return this._coordinates[t].y;case j.Z:return this._coordinates[t].z}return _.NaN},le.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},le.prototype.getCoordinateCopy=function(t){return new S(this._coordinates[t])},le.prototype.getDimension=function(){return this._dimension},le.prototype.getX=function(t){return this._coordinates[t].x},le.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new le(t,this._dimension)},le.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},le.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new le(t,this._dimension)},le.prototype.toString=function(){if(this._coordinates.length>0){var t=new R(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},le.prototype.getY=function(t){return this._coordinates[t].y},le.prototype.toCoordinateArray=function(){return this._coordinates},le.prototype.interfaces_=function(){return[j,e]},le.prototype.getClass=function(){return le},ue.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(le,ue);var ce=function(){},he={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ce.prototype.readResolve=function(){return ce.instance()},ce.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new le(arguments[0]);if(T(arguments[0],j))return new le(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new le(t):new le(t,e)}},ce.prototype.interfaces_=function(){return[C,e]},ce.prototype.getClass=function(){return ce},ce.instance=function(){return ce.instanceObject},he.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},he.instanceObject.get=function(){return new ce},Object.defineProperties(ce,he);var fe=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new kt,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Lt;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Tt),pe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof me){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};pe.prototype.equals=function(t){if(!(t instanceof pe))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},pe.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new N(n).compareTo(new N(r))},pe.prototype.getScale=function(){return this._scale},pe.prototype.isFloating=function(){return this._modelType===pe.FLOATING||this._modelType===pe.FLOATING_SINGLE},pe.prototype.getType=function(){return this._modelType},pe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===pe.FLOATING?t="Floating":this._modelType===pe.FLOATING_SINGLE?t="Floating-Single":this._modelType===pe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},pe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return _.isNaN(t)||this._modelType===pe.FLOATING_SINGLE?t:this._modelType===pe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof S){var e=arguments[0];if(this._modelType===pe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},pe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===pe.FLOATING?t=16:this._modelType===pe.FLOATING_SINGLE?t=6:this._modelType===pe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},pe.prototype.setScale=function(t){this._scale=Math.abs(t)},pe.prototype.interfaces_=function(){return[e,b]},pe.prototype.getClass=function(){return pe},pe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(pe,de);var me=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ge={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};me.prototype.readResolve=function(){return me.nameToTypeMap.get(this._name)},me.prototype.toString=function(){return this._name},me.prototype.interfaces_=function(){return[e]},me.prototype.getClass=function(){return me},ge.serialVersionUID.get=function(){return-552860263173159e4},ge.nameToTypeMap.get=function(){return new fe},Object.defineProperties(me,ge),pe.Type=me,pe.FIXED=new me("FIXED"),pe.FLOATING=new me("FLOATING"),pe.FLOATING_SINGLE=new me("FLOATING SINGLE");var ve=function t(){this._precisionModel=new pe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?T(arguments[0],C)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof pe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ye={serialVersionUID:{configurable:!0}};ve.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new S(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new S(t.getMinX(),t.getMinY()),new S(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new S(t.getMinX(),t.getMinY()),new S(t.getMinX(),t.getMaxY()),new S(t.getMaxX(),t.getMaxY()),new S(t.getMaxX(),t.getMinY()),new S(t.getMinX(),t.getMinY())]),null)},ve.prototype.createLineString=function(t){return t?t instanceof Array?new Yt(this.getCoordinateSequenceFactory().create(t),this):T(t,j)?new Yt(t,this):void 0:new Yt(this.getCoordinateSequenceFactory().create([]),this)},ve.prototype.createMultiLineString=function(){return 0===arguments.length?new Vt(null,this):1===arguments.length?new Vt(arguments[0],this):void 0},ve.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(ve.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof Qt)return this.createMultiPolygon(ve.toPolygonArray(t));if(s instanceof Yt)return this.createMultiLineString(ve.toLineStringArray(t));if(s instanceof Kt)return this.createMultiPoint(ve.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},ve.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},ve.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(T(arguments[0],j))return new Kt(arguments[0],this)}},ve.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ve.prototype.createPolygon=function(){if(0===arguments.length)return new Qt(null,null,this);if(1===arguments.length){if(T(arguments[0],j)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new Qt(arguments[0],arguments[1],this)},ve.prototype.getSRID=function(){return this._SRID},ve.prototype.createGeometryCollection=function(){return 0===arguments.length?new Ut(null,this):1===arguments.length?new Ut(arguments[0],this):void 0},ve.prototype.createGeometry=function(t){return new re(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},ve.prototype.getPrecisionModel=function(){return this._precisionModel},ve.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(T(arguments[0],j))return new ee(arguments[0],this)}},ve.prototype.createMultiPolygon=function(){return 0===arguments.length?new ne(null,this):1===arguments.length?new ne(arguments[0],this):void 0},ve.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(T(arguments[0],j)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());Xt.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},ve.prototype.interfaces_=function(){return[e]},ve.prototype.getClass=function(){return ve},ve.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.getDefaultCoordinateSequenceFactory=function(){return ce.instance()},ve.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ye.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ve,ye);var _e=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],xe=function(t){this.geometryFactory=t||new ve};xe.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!be[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==_e.indexOf(n)?be[n].apply(this,[e.coordinates]):"GeometryCollection"===n?be[n].apply(this,[e.geometries]):be[n].apply(this,[e])},xe.prototype.write=function(t){var e=t.getGeometryType();if(!we[e])throw new Error("Geometry is not supported");return we[e].apply(this,[t])};var be={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!be[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=be.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new S(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new S(t[0],t[1]),new S(t[2],t[1]),new S(t[2],t[3]),new S(t[0],t[3]),new S(t[0],t[1])])},Point:function(t){var e=new S(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(be.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=be.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(be.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=be.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=be.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(be.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},we={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:we.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(we.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=we.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=we.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(we[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},ke=function(t){this.geometryFactory=t||new ve,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new xe(this.geometryFactory)};ke.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===pe.FIXED&&this.reducePrecision(e),e},ke.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Se=function(){this.parser=new xe(this.geometryFactory)};Se.prototype.write=function(t){return this.parser.write(t)};var Ee=function(){},Ie={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ee.prototype.interfaces_=function(){return[]},Ee.prototype.getClass=function(){return Ee},Ee.opposite=function(t){return t===Ee.LEFT?Ee.RIGHT:t===Ee.RIGHT?Ee.LEFT:t},Ie.ON.get=function(){return 0},Ie.LEFT.get=function(){return 1},Ie.RIGHT.get=function(){return 2},Object.defineProperties(Ee,Ie),(m.prototype=new Error).name="EmptyStackException",(g.prototype=new wt).add=function(t){return this.array_.push(t),!0},g.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},g.prototype.push=function(t){return this.array_.push(t),t},g.prototype.pop=function(t){if(0===this.array_.length)throw new m;return this.array_.pop()},g.prototype.peek=function(){if(0===this.array_.length)throw new m;return this.array_[this.array_.length-1]},g.prototype.empty=function(){return 0===this.array_.length},g.prototype.isEmpty=function(){return this.empty()},g.prototype.search=function(t){return this.array_.indexOf(t)},g.prototype.size=function(){return this.array_.length},g.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Ce=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Ce.prototype.getCoordinate=function(){return this._minCoord},Ce.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Ce.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=st.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===st.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===st.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Ce.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Ee.LEFT;return n[e].y<n[e+1].y&&(r=Ee.RIGHT),r},Ce.prototype.getEdge=function(){return this._orientedDe},Ce.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Ce.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ce.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ee.LEFT&&(this._orientedDe=this._minDe.getSym())},Ce.prototype.interfaces_=function(){return[]},Ce.prototype.getClass=function(){return Ce};var Ae=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new S(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Q),Pe=function(){this.array_=[]};Pe.prototype.addLast=function(t){this.array_.push(t)},Pe.prototype.removeFirst=function(){return this.array_.shift()},Pe.prototype.isEmpty=function(){return 0===this.array_.length};var Te=function(){this._finder=null,this._dirEdgeList=new kt,this._nodes=new kt,this._rightMostCoord=null,this._env=null,this._finder=new Ce};Te.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Te.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Te.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Ae("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Te.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ee.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Te.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Te.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ee.RIGHT)>=1&&e.getDepth(Ee.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Te.prototype.computeDepths=function(t){var e=new Lt,n=new Pe,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Te.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Te.prototype.getEnvelope=function(){if(null===this._env){for(var t=new W,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Te.prototype.addReachable=function(t){var e=new g;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Te.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ee.LEFT,t.getDepth(Ee.RIGHT)),e.setDepth(Ee.RIGHT,t.getDepth(Ee.LEFT))},Te.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Te.prototype.getNodes=function(){return this._nodes},Te.prototype.getDirectedEdges=function(){return this._dirEdgeList},Te.prototype.interfaces_=function(){return[b]},Te.prototype.getClass=function(){return Te};var Me=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Ee.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Ee.ON]=o,this.location[Ee.LEFT]=a,this.location[Ee.RIGHT]=s}};Me.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Me.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==A.NONE)return!1;return!0},Me.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===A.NONE&&(this.location[e]=t)},Me.prototype.isLine=function(){return 1===this.location.length},Me.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ee.ON]=this.location[Ee.ON],e[Ee.LEFT]=A.NONE,e[Ee.RIGHT]=A.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===A.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Me.prototype.getLocations=function(){return this.location},Me.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ee.LEFT];this.location[Ee.LEFT]=this.location[Ee.RIGHT],this.location[Ee.RIGHT]=t},Me.prototype.toString=function(){var t=new R;return this.location.length>1&&t.append(A.toLocationSymbol(this.location[Ee.LEFT])),t.append(A.toLocationSymbol(this.location[Ee.ON])),this.location.length>1&&t.append(A.toLocationSymbol(this.location[Ee.RIGHT])),t.toString()},Me.prototype.setLocations=function(t,e,n){this.location[Ee.ON]=t,this.location[Ee.LEFT]=e,this.location[Ee.RIGHT]=n},Me.prototype.get=function(t){return t<this.location.length?this.location[t]:A.NONE},Me.prototype.isArea=function(){return this.location.length>1},Me.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===A.NONE)return!0;return!1},Me.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ee.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Me.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(A.NONE)},Me.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Me.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Me.prototype.interfaces_=function(){return[]},Me.prototype.getClass=function(){return Me};var Le=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Me(e),this.elt[1]=new Me(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Me(n.elt[0]),this.elt[1]=new Me(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Me(A.NONE),this.elt[1]=new Me(A.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Me(o,a,s),this.elt[1]=new Me(o,a,s)}else if(4===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Me(A.NONE,A.NONE,A.NONE),this.elt[1]=new Me(A.NONE,A.NONE,A.NONE),this.elt[l].setLocations(u,c,h)}};Le.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Le.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Le.prototype.isNull=function(t){return this.elt[t].isNull()},Le.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Le.prototype.isLine=function(t){return this.elt[t].isLine()},Le.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Me(t.elt[e]):this.elt[e].merge(t.elt[e])},Le.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Le.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ee.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Le.prototype.toString=function(){var t=new R;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Le.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Le.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Le.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ee.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Le.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Le.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Le.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Me(this.elt[t].location[0]))},Le.prototype.interfaces_=function(){return[]},Le.prototype.getClass=function(){return Le},Le.toLineLabel=function(t){for(var e=new Le(A.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Re=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new kt,this._pts=new kt,this._label=new Le(A.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new kt,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Re.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=st.isCCW(this._ring.getCoordinates())},Re.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Re.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Ae("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Ae("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();et.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Re.prototype.getLinearRing=function(){return this._ring},Re.prototype.getCoordinate=function(t){return this._pts.get(t)},Re.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Re.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},Re.prototype.isHole=function(){return this._isHole},Re.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Re.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!st.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Re.prototype.addHole=function(t){this._holes.add(t)},Re.prototype.isShell=function(){return null===this._shell},Re.prototype.getLabel=function(){return this._label},Re.prototype.getEdges=function(){return this._edges},Re.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Re.prototype.getShell=function(){return this._shell},Re.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Ee.RIGHT);if(n===A.NONE)return null;if(this._label.getLocation(e)===A.NONE)return this._label.setLocation(e,n),null}},Re.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Re.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Re.prototype.interfaces_=function(){return[]},Re.prototype.getClass=function(){return Re};var Ne=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Re),Oe=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new kt,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Ne(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Re),ze=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};ze.prototype.setVisited=function(t){this._isVisited=t},ze.prototype.setInResult=function(t){this._isInResult=t},ze.prototype.isCovered=function(){return this._isCovered},ze.prototype.isCoveredSet=function(){return this._isCoveredSet},ze.prototype.setLabel=function(t){this._label=t},ze.prototype.getLabel=function(){return this._label},ze.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},ze.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},ze.prototype.isInResult=function(){return this._isInResult},ze.prototype.isVisited=function(){return this._isVisited},ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze};var De=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Le(0,A.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=A.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==A.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Le(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Le)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===A.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=A.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case A.BOUNDARY:n=A.INTERIOR;break;case A.INTERIOR:default:n=A.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ze),Fe=function(){this.nodeMap=new h,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Fe.prototype.find=function(t){return this.nodeMap.get(t)},Fe.prototype.addNode=function(){if(arguments[0]instanceof S){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof De){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},Fe.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Fe.prototype.iterator=function(){return this.nodeMap.values().iterator()},Fe.prototype.values=function(){return this.nodeMap.values()},Fe.prototype.getBoundaryNodes=function(t){for(var e=new kt,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===A.BOUNDARY&&e.add(r)}return e},Fe.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe};var Be=function(){},je={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be.isNorthern=function(t){return t===Be.NE||t===Be.NW},Be.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},Be.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Be.isInHalfPlane=function(t,e){return e===Be.SE?t===Be.SE||t===Be.SW:t===e||t===e+1},Be.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new y("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Be.NE:Be.SE:e>=0?Be.NW:Be.SW}if(arguments[0]instanceof S&&arguments[1]instanceof S){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new y("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Be.NE:Be.SE:r.y>=n.y?Be.NW:Be.SW}},je.NE.get=function(){return 0},je.NW.get=function(){return 1},je.SW.get=function(){return 2},je.SE.get=function(){return 3},Object.defineProperties(Be,je);var Ze=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};Ze.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:st.computeOrientation(t._p0,t._p1,this._p1)},Ze.prototype.getDy=function(){return this._dy},Ze.prototype.getCoordinate=function(){return this._p0},Ze.prototype.setNode=function(t){this._node=t},Ze.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ze.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ze.prototype.getDirectedCoordinate=function(){return this._p1},Ze.prototype.getDx=function(){return this._dx},Ze.prototype.getLabel=function(){return this._label},Ze.prototype.getEdge=function(){return this._edge},Ze.prototype.getQuadrant=function(){return this._quadrant},Ze.prototype.getNode=function(){return this._node},Ze.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ze.prototype.computeLabel=function(t){},Ze.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Be.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ze.prototype.interfaces_=function(){return[b]},Ze.prototype.getClass=function(){return Ze};var Ue=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Le(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Ae("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ee.LEFT)===A.INTERIOR&&this._label.getLocation(e,Ee.RIGHT)===A.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ee.LEFT]+"/"+this._depth[Ee.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,A.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,A.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Ee.LEFT&&(r=-1);var i=Ee.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===A.EXTERIOR&&e===A.INTERIOR?1:t===A.INTERIOR&&e===A.EXTERIOR?-1:0},e}(Ze),Ve=function(){};Ve.prototype.createNode=function(t){return new De(t,null)},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve};var qe=function(){if(this._edges=new kt,this._nodes=null,this._edgeEndList=new kt,0===arguments.length)this._nodes=new Fe(new Ve);else if(1===arguments.length){var t=arguments[0];this._nodes=new Fe(t)}};qe.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},qe.prototype.find=function(t){return this._nodes.find(t)},qe.prototype.addNode=function(){if(arguments[0]instanceof De){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof S){var e=arguments[0];return this._nodes.addNode(e)}},qe.prototype.getNodeIterator=function(){return this._nodes.iterator()},qe.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},qe.prototype.debugPrintln=function(t){q.out.println(t)},qe.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===A.BOUNDARY},qe.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},qe.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&st.computeOrientation(t,e,r)===st.COLLINEAR&&Be.quadrant(t,e)===Be.quadrant(n,r)},qe.prototype.getEdgeEnds=function(){return this._edgeEndList},qe.prototype.debugPrint=function(t){q.out.print(t)},qe.prototype.getEdgeIterator=function(){return this._edges.iterator()},qe.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},qe.prototype.insertEdge=function(t){this._edges.add(t)},qe.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},qe.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new Ue(n,!0),i=new Ue(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},qe.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},qe.prototype.getNodes=function(){return this._nodes.values()},qe.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe},qe.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Ge=function(){this._geometryFactory=null,this._shellList=new kt;var t=arguments[0];this._geometryFactory=t};Ge.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Ge.prototype.computePolygons=function(t){for(var e=new kt,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Ge.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Ae("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Ge.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new kt,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},Ge.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Ge.prototype.buildMaximalEdgeRings=function(t){for(var e=new kt,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Oe(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Ge.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Ge.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ge.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var l=s.next(),u=l.getLinearRing(),c=u.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&st.isPointInRing(i,u.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=l)}return o},Ge.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Ge.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];qe.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new kt,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Ge.prototype.interfaces_=function(){return[]},Ge.prototype.getClass=function(){return Ge};var We=function(){};We.prototype.getBounds=function(){},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var He=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};He.prototype.getItem=function(){return this._item},He.prototype.getBounds=function(){return this._bounds},He.prototype.interfaces_=function(){return[We,e]},He.prototype.getClass=function(){return He};var Xe=function(){this._size=null,this._items=null,this._size=0,this._items=new kt,this._items.add(null)};Xe.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Xe.prototype.size=function(){return this._size},Xe.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},Xe.prototype.clear=function(){this._size=0,this._items.clear()},Xe.prototype.isEmpty=function(){return 0===this._size},Xe.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var Ye=function(){};Ye.prototype.visitItem=function(t){},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye};var $e=function(){};$e.prototype.insert=function(t,e){},$e.prototype.remove=function(t,e){},$e.prototype.query=function(){},$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e};var Ke=function(){if(this._childBoundables=new kt,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Je={serialVersionUID:{configurable:!0}};Ke.prototype.getLevel=function(){return this._level},Ke.prototype.size=function(){return this._childBoundables.size()},Ke.prototype.getChildBoundables=function(){return this._childBoundables},Ke.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Ke.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ke.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ke.prototype.interfaces_=function(){return[We,e]},Ke.prototype.getClass=function(){return Ke},Je.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ke,Je);var Qe=function(){};Qe.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Qe.min=function(t){return Qe.sort(t),t.get(0)},Qe.sort=function(t,e){var n=t.toArray();e?Dt.sort(n,e):Dt.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Qe.singletonList=function(t){var e=new kt;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),r=tn.isComposite(this._boundable2);if(n&&r)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new y("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new tn(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[b]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Ke};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new kt,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ke?t+=this.size(n):n instanceof He&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof He&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new kt:t}if(1===arguments.length){for(var e=arguments[0],n=new kt,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Ke){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof He?n.add(i.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new He(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new kt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(et.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Ke?this.boundablesAtLevel(n,a,i):(et.isTrue(a instanceof He),-1===n&&i.add(a))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new kt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(T(arguments[2],Ye)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var i=arguments[0],o=arguments[2],a=arguments[1].getChildBoundables(),s=0;s<a.size();s++){var l=a.get(s);this.getIntersectsOp().intersects(l.getBounds(),i)&&(l instanceof Ke?this.query(i,l,o):l instanceof He?o.visitItem(l.getItem()):et.shouldNeverReachHere())}else if(T(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var u=arguments[0],c=arguments[2],h=arguments[1].getChildBoundables(),f=0;f<h.size();f++){var p=h.get(f);this.getIntersectsOp().intersects(p.getBounds(),u)&&(p instanceof Ke?this.query(u,p,c):p instanceof He?c.add(p.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var l=s.next();if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof Ke&&(o=this.remove(n,l,i))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Ke){var r=this.depth(n);r>t&&(t=r)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new kt;n.add(this.createNode(e));var r=new kt(t);Qe.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var an=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new kt,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},n.prototype.createNode=function(t){return new sn(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new kt;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(T(arguments[2],Ye)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(T(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var s=arguments[0],l=arguments[1],u=arguments[2];t.prototype.query.call(this,s,l,u)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new kt(t);Qe.sort(i,n.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(T(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var r=arguments[0];return this.nearestNeighbour(r,_.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&T(arguments[1],on)){var i=arguments[0],o=arguments[1],a=new tn(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var s=arguments[0],l=arguments[1],u=null,c=new Xe;for(c.add(s);!c.isEmpty()&&l>0;){var h=c.poll(),f=h.getDistance();if(f>=l)break;h.isLeaves()?(l=f,u=h):h.expandToQueue(c,l)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[2],d=new He(arguments[0],arguments[1]),m=new tn(this.getRoot(),d,p);return this.nearestNeighbour(m)[0]}},n.prototype.interfaces_=function(){return[$e,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return sn},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[k]},compare:function(e,r){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(r.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[k]},compare:function(e,r){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(r.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,r),n}(en),sn=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new W(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ke),ln=function(){};ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln},ln.relativeSign=function(t,e){return t<e?-1:t>e?1:0},ln.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=ln.relativeSign(e.x,n.x),i=ln.relativeSign(e.y,n.y);switch(t){case 0:return ln.compareValue(r,i);case 1:return ln.compareValue(i,r);case 2:return ln.compareValue(i,-r);case 3:return ln.compareValue(-r,i);case 4:return ln.compareValue(-r,-i);case 5:return ln.compareValue(-i,-r);case 6:return ln.compareValue(-i,r);case 7:return ln.compareValue(r,-i)}return et.shouldNeverReachHere("invalid octant value"),0},ln.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var un=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new S(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};un.prototype.getCoordinate=function(){return this.coord},un.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},un.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:ln.compare(this._segmentOctant,this.coord,e.coord)},un.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},un.prototype.isInterior=function(){return this._isInterior},un.prototype.interfaces_=function(){return[b]},un.prototype.getClass=function(){return un};var cn=function(){this._nodeMap=new h,this._edge=null;var t=arguments[0];this._edge=t};cn.prototype.getSplitCoordinates=function(){var t=new Et;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},cn.prototype.addCollapsedNodes=function(){var t=new kt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},cn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},cn.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new N(e+1))}},cn.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new S(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new S(e.coord))},cn.prototype.iterator=function(){return this._nodeMap.values().iterator()},cn.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},cn.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},cn.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new N(e[0])),r=i}},cn.prototype.getEdge=function(){return this._edge},cn.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},cn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new S(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new S(e.coord)),new dn(o,this._edge.getData())},cn.prototype.add=function(t,e){var n=new un(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(et.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},cn.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Q("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Q("bad split edge end point at "+i)},cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn};var hn=function(){};hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new y("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof S&&arguments[1]instanceof S){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new y("Cannot compute the octant for two identical points "+i);return hn.octant(a,s)}};var fn=function(){};fn.prototype.getCoordinates=function(){},fn.prototype.size=function(){},fn.prototype.getCoordinate=function(t){},fn.prototype.isClosed=function(){},fn.prototype.setData=function(t){},fn.prototype.getData=function(){},fn.prototype.interfaces_=function(){return[]},fn.prototype.getClass=function(){return fn};var pn=function(){};pn.prototype.addIntersection=function(t,e){},pn.prototype.interfaces_=function(){return[fn]},pn.prototype.getClass=function(){return pn};var dn=function(){this._nodeList=new cn(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(t){return this._pts[t]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dn.prototype.setData=function(t){this._data=t},dn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:hn.octant(t,e)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new S(arguments[0].getIntersection(r));this.addIntersection(i,n)}},dn.prototype.toString=function(){return J.toLineString(new le(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},dn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},dn.prototype.interfaces_=function(){return[pn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new kt;return dn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var mn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new S,this.p1=new S;else if(1===arguments.length){var t=arguments[0];this.p0=new S(t.p0),this.p1=new S(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new S(e,n),this.p1=new S(r,i)}},gn={serialVersionUID:{configurable:!0}};mn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},mn.prototype.orientationIndex=function(){if(arguments[0]instanceof mn){var t=arguments[0],e=st.orientationIndex(this.p0,this.p1,t.p0),n=st.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof S){var r=arguments[0];return st.orientationIndex(this.p0,this.p1,r)}},mn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},mn.prototype.isVertical=function(){return this.p0.x===this.p1.x},mn.prototype.equals=function(t){if(!(t instanceof mn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},mn.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},mn.prototype.project=function(){if(arguments[0]instanceof S){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new S(t);var e=this.projectionFactor(t),n=new S;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof mn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new mn(a,s)}},mn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},mn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},mn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},mn.prototype.distancePerpendicular=function(t){return st.distancePointLinePerpendicular(t,this.p0,this.p1)},mn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},mn.prototype.midPoint=function(){return mn.midPoint(this.p0,this.p1)},mn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?_.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},mn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=_.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var l=t.closestPoint(this.p1);return(i=l.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=l),n},mn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},mn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},mn.prototype.getLength=function(){return this.p0.distance(this.p1)},mn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},mn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},mn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},mn.prototype.lineIntersection=function(t){try{return G.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof V))throw t}return null},mn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},mn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,l=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,l=e*o/a}return new S(n-l,r+s)},mn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},mn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||_.isNaN(e))&&(e=1),e},mn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},mn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},mn.prototype.distance=function(){if(arguments[0]instanceof mn){var t=arguments[0];return st.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof S){var e=arguments[0];return st.distancePointLine(e,this.p0,this.p1)}},mn.prototype.pointAlong=function(t){var e=new S;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},mn.prototype.hashCode=function(){var t=_.doubleToLongBits(this.p0.x);t^=31*_.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=_.doubleToLongBits(this.p1.x);return n^=31*_.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},mn.prototype.interfaces_=function(){return[b,e]},mn.prototype.getClass=function(){return mn},mn.midPoint=function(t,e){return new S((t.x+e.x)/2,(t.y+e.y)/2)},gn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(mn,gn);var vn=function(){this.tempEnv1=new W,this.tempEnv2=new W,this._overlapSeg1=new mn,this._overlapSeg2=new mn};vn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn};var yn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};yn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},yn.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},yn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},yn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},yn.prototype.setId=function(t){this._id=t},yn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},yn.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new W(t,e)}return this._env},yn.prototype.getEndIndex=function(){return this._end},yn.prototype.getStartIndex=function(){return this._start},yn.prototype.getContext=function(){return this._context},yn.prototype.getId=function(){return this._id},yn.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],l=n._pts[r],u=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(l,u),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn};var _n=function(){};_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n},_n.getChainStartIndices=function(t){var e=0,n=new kt;n.add(new N(e));do{var r=_n.findChainEnd(t,e);n.add(new N(r)),e=r}while(e<t.length-1);return _n.toIntArray(n)},_n.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Be.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Be.quadrant(t[i-1],t[i])===r);)i++;return i-1},_n.getChains=function(){if(1===arguments.length){var t=arguments[0];return _n.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new kt,i=_n.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new yn(e,i[o],i[o+1],n);r.add(a)}return r}},_n.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var xn=function(){};xn.prototype.computeNodes=function(t){},xn.prototype.getNodedSubstrings=function(){},xn.prototype.interfaces_=function(){return[]},xn.prototype.getClass=function(){return xn};var bn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};bn.prototype.setSegmentIntersector=function(t){this._segInt=t},bn.prototype.interfaces_=function(){return[xn]},bn.prototype.getClass=function(){return bn};var wn=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new kt,this._index=new an,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=_n.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new kn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return kn},Object.defineProperties(e,n),e}(bn),kn=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(vn),Sn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},En={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Sn.prototype.getEndCapStyle=function(){return this._endCapStyle},Sn.prototype.isSingleSided=function(){return this._isSingleSided},Sn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Sn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Sn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Sn.JOIN_ROUND&&(this._quadrantSegments=Sn.DEFAULT_QUADRANT_SEGMENTS)},Sn.prototype.getJoinStyle=function(){return this._joinStyle},Sn.prototype.setJoinStyle=function(t){this._joinStyle=t},Sn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Sn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Sn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Sn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Sn.prototype.getMitreLimit=function(){return this._mitreLimit},Sn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Sn.prototype.setSingleSided=function(t){this._isSingleSided=t},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn},Sn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},En.CAP_ROUND.get=function(){return 1},En.CAP_FLAT.get=function(){return 2},En.CAP_SQUARE.get=function(){return 3},En.JOIN_ROUND.get=function(){return 1},En.JOIN_MITRE.get=function(){return 2},En.JOIN_BEVEL.get=function(){return 3},En.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},En.DEFAULT_MITRE_LIMIT.get=function(){return 5},En.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Sn,En);var In=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=st.COUNTERCLOCKWISE,this._inputLine=t||null},Cn={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};In.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},In.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=In.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},In.prototype.isShallowConcavity=function(t,e,n,r){return st.computeOrientation(t,e,n)===this._angleOrientation&&st.distancePointLine(e,t,n)<r},In.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/In.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},In.prototype.isConcave=function(t,e,n){return st.computeOrientation(t,e,n)===this._angleOrientation},In.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=st.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},In.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===In.DELETE;)e++;return e},In.prototype.isShallow=function(t,e,n,r){return st.distancePointLine(e,t,n)<r},In.prototype.collapseLine=function(){for(var t=new Et,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==In.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In},In.simplify=function(t,e){return new In(t).simplify(e)},Cn.INIT.get=function(){return 0},Cn.DELETE.get=function(){return 1},Cn.KEEP.get=function(){return 1},Cn.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(In,Cn);var An=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new kt},Pn={COORDINATE_ARRAY_TYPE:{configurable:!0}};An.prototype.getCoordinates=function(){return this._ptList.toArray(An.COORDINATE_ARRAY_TYPE)},An.prototype.setPrecisionModel=function(t){this._precisionModel=t},An.prototype.addPt=function(t){var e=new S(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},An.prototype.revere=function(){},An.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},An.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},An.prototype.toString=function(){return(new ve).createLineString(this.getCoordinates()).toString()},An.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new S(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},An.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},An.prototype.interfaces_=function(){return[]},An.prototype.getClass=function(){return An},Pn.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(An,Pn);var Tn=function(){},Mn={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn},Tn.toDegrees=function(t){return 180*t/Math.PI},Tn.normalize=function(t){for(;t>Math.PI;)t-=Tn.PI_TIMES_2;for(;t<=-Math.PI;)t+=Tn.PI_TIMES_2;return t},Tn.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Tn.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Tn.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Tn.interiorAngle=function(t,e,n){var r=Tn.angle(e,t),i=Tn.angle(e,n);return Math.abs(i-r)},Tn.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Tn.PI_TIMES_2;t>=Tn.PI_TIMES_2&&(t=0)}else{for(;t>=Tn.PI_TIMES_2;)t-=Tn.PI_TIMES_2;t<0&&(t=0)}return t},Tn.angleBetween=function(t,e,n){var r=Tn.angle(e,t),i=Tn.angle(e,n);return Tn.diff(r,i)},Tn.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Tn.toRadians=function(t){return t*Math.PI/180},Tn.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Tn.COUNTERCLOCKWISE:n<0?Tn.CLOCKWISE:Tn.NONE},Tn.angleBetweenOriented=function(t,e,n){var r=Tn.angle(e,t),i=Tn.angle(e,n)-r;return i<=-Math.PI?i+Tn.PI_TIMES_2:i>Math.PI?i-Tn.PI_TIMES_2:i},Mn.PI_TIMES_2.get=function(){return 2*Math.PI},Mn.PI_OVER_2.get=function(){return Math.PI/2},Mn.PI_OVER_4.get=function(){return Math.PI/4},Mn.COUNTERCLOCKWISE.get=function(){return st.COUNTERCLOCKWISE},Mn.CLOCKWISE.get=function(){return st.CLOCKWISE},Mn.NONE.get=function(){return st.COLLINEAR},Object.defineProperties(Tn,Mn);var Ln=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new mn,this._seg1=new mn,this._offset0=new mn,this._offset1=new mn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new it,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Sn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Rn={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Ln.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=st.computeOrientation(this._s0,this._s1,this._s2),r=n===st.CLOCKWISE&&this._side===Ee.LEFT||n===st.COUNTERCLOCKWISE&&this._side===Ee.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Ln.prototype.addLineEndCap=function(t,e){var n=new mn(t,e),r=new mn;this.computeOffsetSegment(n,Ee.LEFT,this._distance,r);var i=new mn;this.computeOffsetSegment(n,Ee.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Sn.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,st.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Sn.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Sn.CAP_SQUARE:var l=new S;l.x=Math.abs(this._distance)*Math.cos(s),l.y=Math.abs(this._distance)*Math.sin(s);var u=new S(r.p1.x+l.x,r.p1.y+l.y),c=new S(i.p1.x+l.x,i.p1.y+l.y);this._segList.addPt(u),this._segList.addPt(c)}},Ln.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Ln.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=G.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof V))throw t;o=new S(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Ln.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),l=n.x-t.x,u=n.y-t.y,c=Math.atan2(u,l);r===st.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,c,r,i),this._segList.addPt(n)},Ln.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Ln.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Sn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Sn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Ln.prototype.createSquare=function(t){this._segList.addPt(new S(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new S(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Ln.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Ln.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Ln.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Ln.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Ln.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Tn.angle(i,this._seg0.p0),a=Tn.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Tn.normalize(o+a),l=Tn.normalize(s+Math.PI),u=r*n,c=n-u*Math.abs(Math.sin(a)),h=i.x+u*Math.cos(l),f=i.y+u*Math.sin(l),p=new S(h,f),d=new mn(i,p),m=d.pointAlongOffset(1,c),g=d.pointAlongOffset(1,-c);this._side===Ee.LEFT?(this._segList.addPt(m),this._segList.addPt(g)):(this._segList.addPt(g),this._segList.addPt(m))},Ln.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Ee.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),l=i*n*o/s,u=i*n*a/s;r.p0.x=t.p0.x-u,r.p0.y=t.p0.y+l,r.p1.x=t.p1.x-u,r.p1.y=t.p1.y+l},Ln.prototype.addFilletArc=function(t,e,n,r,i){var o=r===st.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var l=a/s,u=0,c=new S;u<a;){var h=e+o*u;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),u+=l}},Ln.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Ln.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new S((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new S((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Ln.prototype.createCircle=function(t){var e=new S(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Ln.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Ln.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new An,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Ln.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Ln.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Sn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Sn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,st.CLOCKWISE,this._distance))},Ln.prototype.closeRing=function(){this._segList.closeRing()},Ln.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln},Rn.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Rn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Rn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Rn.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Ln,Rn);var Nn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Nn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&It.reverse(o),o},Nn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=In.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ee.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=In.simplify(t,r),l=s.length-1;n.initSideSegments(s[0],s[1],Ee.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment(),n.closeRing()},Nn.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Ee.RIGHT&&(r=-r);var i=In.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},Nn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=In.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Ee.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=In.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Ee.LEFT);for(var l=s-2;l>=0;l--)e.addNextSegment(a[l],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},Nn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Sn.CAP_ROUND:e.createCircle(t);break;case Sn.CAP_SQUARE:e.createSquare(t)}},Nn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Nn.prototype.getBufferParameters=function(){return this._bufParams},Nn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Nn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Nn.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Nn.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=In.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ee.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=In.simplify(t,r),l=s.length-1;n.initSideSegments(s[0],s[1],Ee.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment()},Nn.prototype.getSegGen=function(t){return new Ln(this._precisionModel,this._bufParams,t)},Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},Nn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new S(t[n]);return e};var On=function(){this._subgraphs=null,this._seg=new mn,this._cga=new st;var t=arguments[0];this._subgraphs=t},zn={DepthSegment:{configurable:!0}};On.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new kt,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(T(arguments[2],wt)&&arguments[0]instanceof S&&arguments[1]instanceof Ue){for(var o=arguments[0],a=arguments[1],s=arguments[2],l=a.getEdge().getCoordinates(),u=0;u<l.length-1;u++)if(this._seg.p0=l[u],this._seg.p1=l[u+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x)&&!(this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||st.computeOrientation(this._seg.p0,this._seg.p1,o)===st.RIGHT)){var c=a.getDepth(Ee.LEFT);this._seg.p0.equals(l[u])||(c=a.getDepth(Ee.RIGHT));var h=new Dn(this._seg,c);s.add(h)}}else if(T(arguments[2],wt)&&arguments[0]instanceof S&&T(arguments[1],wt))for(var f=arguments[0],p=arguments[2],d=arguments[1].iterator();d.hasNext();){var m=d.next();m.isForward()&&this.findStabbedSegments(f,m,p)}},On.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Qe.min(e)._leftDepth},On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On},zn.DepthSegment.get=function(){return Dn},Object.defineProperties(On,zn);var Dn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new mn(t),this._leftDepth=e};Dn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Dn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Dn.prototype.toString=function(){return this._upwardSeg.toString()},Dn.prototype.interfaces_=function(){return[b]},Dn.prototype.getClass=function(){return Dn};var Fn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Fn.prototype.area=function(){return Fn.area(this.p0,this.p1,this.p2)},Fn.prototype.signedArea=function(){return Fn.signedArea(this.p0,this.p1,this.p2)},Fn.prototype.interpolateZ=function(t){if(null===t)throw new y("Supplied point is null.");return Fn.interpolateZ(t,this.p0,this.p1,this.p2)},Fn.prototype.longestSideLength=function(){return Fn.longestSideLength(this.p0,this.p1,this.p2)},Fn.prototype.isAcute=function(){return Fn.isAcute(this.p0,this.p1,this.p2)},Fn.prototype.circumcentre=function(){return Fn.circumcentre(this.p0,this.p1,this.p2)},Fn.prototype.area3D=function(){return Fn.area3D(this.p0,this.p1,this.p2)},Fn.prototype.centroid=function(){return Fn.centroid(this.p0,this.p1,this.p2)},Fn.prototype.inCentre=function(){return Fn.inCentre(this.p0,this.p1,this.p2)},Fn.prototype.interfaces_=function(){return[]},Fn.prototype.getClass=function(){return Fn},Fn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Fn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Fn.det=function(t,e,n,r){return t*r-e*n},Fn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,l=n.y-o,u=r.y-o,c=a*u-s*l,h=t.x-i,f=t.y-o,p=(u*h-s*f)/c,d=(-l*h+a*f)/c;return e.z+p*(n.z-e.z)+d*(r.z-e.z)},Fn.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},Fn.isAcute=function(t,e,n){return!!Tn.isAcute(t,e,n)&&!!Tn.isAcute(e,n,t)&&!!Tn.isAcute(n,t,e)},Fn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,l=e.y-i,u=2*Fn.det(o,a,s,l),c=Fn.det(a,o*o+a*a,l,s*s+l*l),h=Fn.det(o,o*o+a*a,s,s*s+l*l);return new S(r-c/u,i+h/u)},Fn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new G(t.x+n/2,t.y+r/2,1),o=new G(t.x-r+n/2,t.y+n+r/2,1);return new G(i,o)},Fn.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new S(t.x+i*o,t.y+i*a)},Fn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,l=n.z-t.z,u=i*l-o*s,c=o*a-r*l,h=r*s-i*a,f=u*u+c*c+h*h;return Math.sqrt(f)/2},Fn.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new S(r,i)},Fn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,l=(r*t.y+i*e.y+o*n.y)/a;return new S(s,l)};var Bn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new kt;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Bn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,A.EXTERIOR,A.INTERIOR)},Bn.prototype.addPolygon=function(t){var e=this._distance,n=Ee.LEFT;this._distance<0&&(e=-this._distance,n=Ee.RIGHT);var r=t.getExteriorRing(),i=It.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,A.EXTERIOR,A.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=It.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Ee.opposite(n),A.INTERIOR,A.EXTERIOR)}},Bn.prototype.isTriangleErodedCompletely=function(t,e){var n=new Fn(t[0],t[1],t[2]),r=n.inCentre();return st.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Bn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=It.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,A.EXTERIOR,A.INTERIOR)},Bn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new dn(t,new Le(0,A.BOUNDARY,e,n));this._curveList.add(r)},Bn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Bn.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=ee.MINIMUM_VALID_SIZE&&st.isCCW(t)&&(o=i,a=r,n=Ee.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},Bn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Qt?this.addPolygon(t):t instanceof Yt?this.addLineString(t):t instanceof Kt?this.addPoint(t):(t instanceof te||t instanceof Vt||t instanceof ne||t instanceof Ut)&&this.addCollection(t)},Bn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Bn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn};var jn=function(){};jn.prototype.locate=function(t){},jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn};var Zn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Zn.prototype.next=function(){if(this._atStart)return this._atStart=!1,Zn.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof Ut?(this._subcollectionIterator=new Zn(t),this._subcollectionIterator.next()):t},Zn.prototype.remove=function(){throw new Error(this.getClass().getName())},Zn.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Zn.prototype.interfaces_=function(){return[bt]},Zn.prototype.getClass=function(){return Zn},Zn.isAtomic=function(t){return!(t instanceof Ut)};var Un=function(){this._geom=null;var t=arguments[0];this._geom=t};Un.prototype.locate=function(t){return Un.locate(t,this._geom)},Un.prototype.interfaces_=function(){return[jn]},Un.prototype.getClass=function(){return Un},Un.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&st.isPointInRing(t,e.getCoordinates())},Un.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Un.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Un.isPointInRing(t,i))return!1}return!0},Un.containsPoint=function(t,e){if(e instanceof Qt)return Un.containsPointInPolygon(t,e);if(e instanceof Ut)for(var n=new Zn(e);n.hasNext();){var r=n.next();if(r!==e&&Un.containsPoint(t,r))return!0}return!1},Un.locate=function(t,e){return e.isEmpty()?A.EXTERIOR:Un.containsPoint(t,e)?A.INTERIOR:A.EXTERIOR};var Vn=function(){this._edgeMap=new h,this._edgeList=null,this._ptInAreaLocation=[A.NONE,A.NONE]};Vn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Vn.prototype.propagateSideLabels=function(t){for(var e=A.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Ee.LEFT)!==A.NONE&&(e=r.getLocation(t,Ee.LEFT))}if(e===A.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Ee.ON)===A.NONE&&s.setLocation(t,Ee.ON,i),s.isArea(t)){var l=s.getLocation(t,Ee.LEFT),u=s.getLocation(t,Ee.RIGHT);if(u!==A.NONE){if(u!==i)throw new Ae("side location conflict",a.getCoordinate());l===A.NONE&&et.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=l}else et.isTrue(s.getLocation(t,Ee.LEFT)===A.NONE,"found single null side"),s.setLocation(t,Ee.RIGHT,i),s.setLocation(t,Ee.LEFT,i)}}},Vn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Vn.prototype.print=function(t){q.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Vn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Vn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Ee.LEFT);et.isTrue(r!==A.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();et.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Ee.LEFT),l=a.getLocation(t,Ee.RIGHT);if(s===l)return!1;if(l!==i)return!1;i=s}return!0},Vn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Vn.prototype.iterator=function(){return this.getEdges().iterator()},Vn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new kt(this._edgeMap.values())),this._edgeList},Vn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===A.NONE&&(this._ptInAreaLocation[t]=Un.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Vn.prototype.toString=function(){var t=new R;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Vn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Vn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===A.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),l=0;l<2;l++)if(s.isAnyNull(l)){var u=A.NONE;if(e[l])u=A.EXTERIOR;else{var c=a.getCoordinate();u=this.getLocation(l,c,t)}s.setAllLocationsIfNull(l,u)}},Vn.prototype.getDegree=function(){return this._edgeMap.size()},Vn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Vn.prototype.interfaces_=function(){return[]},Vn.prototype.getClass=function(){return Vn};var qn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Ae("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Be.isNorthern(i)&&Be.isNorthern(o)?n:Be.isNorthern(i)||Be.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){q.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new kt;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Ee.LEFT),r=t.getDepth(Ee.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Ae("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var l=this._edgeList.get(s);l.setEdgeDepths(Ee.RIGHT,a),a=l.getDepth(Ee.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=A.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=A.INTERIOR;break}if(r.isInResult()){t=A.EXTERIOR;break}}}if(t===A.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===A.INTERIOR):(a.isInResult()&&(i=A.EXTERIOR),s.isInResult()&&(i=A.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Le(A.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==A.INTERIOR&&o!==A.BOUNDARY||this._label.setLocation(i,A.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Vn),Gn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new De(t,new qn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ve),Wn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Wn.prototype.compareTo=function(t){var e=t;return Wn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Wn.prototype.interfaces_=function(){return[b]},Wn.prototype.getClass=function(){return Wn},Wn.orientation=function(t){return 1===It.increasingDirection(t)},Wn.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,l=e?0:t.length-1,u=r?0:n.length-1;;){var c=t[l].compareTo(n[u]);if(0!==c)return c;var h=(l+=i)===a,f=(u+=o)===s;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}};var Hn=function(){this._edges=new kt,this._ocaMap=new h};Hn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Hn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Hn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Hn.prototype.iterator=function(){return this._edges.iterator()},Hn.prototype.getEdges=function(){return this._edges},Hn.prototype.get=function(t){return this._edges.get(t)},Hn.prototype.findEqualEdge=function(t){var e=new Wn(t.getCoordinates());return this._ocaMap.get(e)},Hn.prototype.add=function(t){this._edges.add(t);var e=new Wn(t.getCoordinates());this._ocaMap.put(e,t)},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var Xn=function(){};Xn.prototype.processIntersections=function(t,e,n,r){},Xn.prototype.isDone=function(){},Xn.prototype.interfaces_=function(){return[]},Xn.prototype.getClass=function(){return Xn};var Yn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Yn.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Yn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Yn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Yn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Yn.prototype.getLineIntersector=function(){return this._li},Yn.prototype.hasProperIntersection=function(){return this._hasProper},Yn.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Yn.prototype.hasIntersection=function(){return this._hasIntersection},Yn.prototype.isDone=function(){return!1},Yn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Yn.prototype.interfaces_=function(){return[Xn]},Yn.prototype.getClass=function(){return Yn},Yn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var $n=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new S(t),this.segmentIndex=e,this.dist=n};$n.prototype.getSegmentIndex=function(){return this.segmentIndex},$n.prototype.getCoordinate=function(){return this.coord},$n.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},$n.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},$n.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},$n.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},$n.prototype.getDistance=function(){return this.dist},$n.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},$n.prototype.interfaces_=function(){return[b]},$n.prototype.getClass=function(){return $n};var Kn=function(){this._nodeMap=new h,this.edge=null;var t=arguments[0];this.edge=t};Kn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Kn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Kn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Kn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Kn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new S(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new nr(o,new Le(this.edge._label))},Kn.prototype.add=function(t,e,n){var r=new $n(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Kn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn};var Jn=function(){};Jn.prototype.getChainStartIndices=function(t){var e=0,n=new kt;n.add(new N(e));do{var r=this.findChainEnd(t,e);n.add(new N(r)),e=r}while(e<t.length-1);return Jn.toIntArray(n)},Jn.prototype.findChainEnd=function(t,e){for(var n=Be.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Be.quadrant(t[r-1],t[r])===n;)r++;return r-1},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn},Jn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Qn=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new W,this.env2=new W;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Jn;this.startIndex=e.getChainStartIndices(this.pts)};Qn.prototype.getCoordinates=function(){return this.pts},Qn.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Qn.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Qn.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4],u=arguments[5],c=this.pts[i],h=this.pts[o],f=a.pts[s],p=a.pts[l];if(o-i==1&&l-s==1)return u.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(c,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),m=Math.trunc((s+l)/2);i<d&&(s<m&&this.computeIntersectsForChain(i,d,a,s,m,u),m<l&&this.computeIntersectsForChain(i,d,a,m,l,u)),d<o&&(s<m&&this.computeIntersectsForChain(d,o,a,s,m,u),m<l&&this.computeIntersectsForChain(d,o,a,m,l,u))}},Qn.prototype.getStartIndexes=function(){return this.startIndex},Qn.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var tr=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},er={NULL_VALUE:{configurable:!0}};tr.prototype.getDepth=function(t,e){return this._depth[t][e]},tr.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},tr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tr.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===tr.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===tr.NULL_VALUE}},tr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},tr.prototype.getDelta=function(t){return this._depth[t][Ee.RIGHT]-this._depth[t][Ee.LEFT]},tr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?A.EXTERIOR:A.INTERIOR},tr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tr.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==A.EXTERIOR&&r!==A.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=tr.depthAtLocation(r):this._depth[e][n]+=tr.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===A.INTERIOR&&this._depth[i][o]++}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.depthAtLocation=function(t){return t===A.EXTERIOR?0:t===A.INTERIOR?1:tr.NULL_VALUE},er.NULL_VALUE.get=function(){return-1},Object.defineProperties(tr,er);var nr=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Kn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tr,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Le.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Qn(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new W;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new S(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var l=this.pts[s];i.equals2D(l)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new R;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Ee.ON),e.getLocation(1,Ee.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ee.LEFT),e.getLocation(1,Ee.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ee.RIGHT),e.getLocation(1,Ee.RIGHT),2))},e}(ze),rr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Hn,this._bufParams=t||null};rr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rr.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Le(t.getLabel())).flip(),n.merge(r);var i=rr.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rr.depthDelta(t.getLabel()))},rr.prototype.buildSubgraphs=function(t,e){for(var n=new kt,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new On(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rr.prototype.createSubgraphs=function(t){for(var e=new kt,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Te;i.create(r),e.add(i)}}return Qe.sort(e,Qe.reverseOrder()),e},rr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new wn,n=new it;return n.setPrecisionModel(t),e.setSegmentIntersector(new Yn(n)),e},rr.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Nn(n,this._bufParams),i=new Bn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new qe(new Gn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Ge(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},rr.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new nr(i.getCoordinates(),new Le(a));this.insertUniqueEdge(s)}}},rr.prototype.setNoder=function(t){this._workingNoder=t},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.depthDelta=function(t){var e=t.getLocation(0,Ee.LEFT),n=t.getLocation(0,Ee.RIGHT);return e===A.INTERIOR&&n===A.EXTERIOR?1:e===A.EXTERIOR&&n===A.INTERIOR?-1:0},rr.convertSegStrings=function(t){for(var e=new ve,n=new kt;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ir=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ir.prototype.rescale=function(){if(T(arguments[0],xt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&q.out.println(n)}},ir.prototype.scale=function(){if(T(arguments[0],xt)){for(var t=arguments[0],e=new kt,n=t.iterator();n.hasNext();){var r=n.next();e.add(new dn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new S(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return It.removeRepeatedPoints(o)}},ir.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ir.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ir.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ir.prototype.interfaces_=function(){return[xn]},ir.prototype.getClass=function(){return ir};var or=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},ar={fact:{configurable:!0}};or.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new Q("found endpt/interior pt intersection at index "+o+" :pt "+n)},or.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),l=0;l<a.length-1;l++)for(var u=0;u<s.length-1;u++)this.checkInteriorIntersections(i,l,o,u);else if(4===arguments.length){var c=arguments[0],h=arguments[1],f=arguments[2],p=arguments[3];if(c===f&&h===p)return null;var d=c.getCoordinates()[h],m=c.getCoordinates()[h+1],g=f.getCoordinates()[p],v=f.getCoordinates()[p+1];if(this._li.computeIntersection(d,m,g,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,m)||this.hasInteriorIntersection(this._li,g,v)))throw new Q("found non-noded intersection at "+d+"-"+m+" and "+g+"-"+v)}},or.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},or.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},or.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},or.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Q("found non-noded collapse at "+or.fact.createLineString([t,e,n]))},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},ar.fact.get=function(){return new ve},Object.defineProperties(or,ar);var sr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new y("Scale factor must be non-zero");1!==e&&(this._pt=new S(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new S,this._p1Scaled=new S),this.initCorners(this._pt)},lr={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sr.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return et.isTrue(!(a&&s),"Found bad envelope test"),s},sr.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new S(this._maxx,this._maxy),this._corner[1]=new S(this._minx,this._maxy),this._corner[2]=new S(this._minx,this._miny),this._corner[3]=new S(this._maxx,this._miny)},sr.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},sr.prototype.getCoordinate=function(){return this._originalPt},sr.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},sr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=sr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new W(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},sr.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},sr.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!r)||!!t.equals(this._pt)||!!e.equals(this._pt))))},sr.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr},lr.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sr,lr);var ur=function(){this.tempEnv1=new W,this.selectedSegment=new mn};ur.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur};var cr=function(){this._index=null;var t=arguments[0];this._index=t},hr={HotPixelSnapAction:{configurable:!0}};cr.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new fr(e,n,r);return this._index.query(i,{interfaces_:function(){return[Ye]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},hr.HotPixelSnapAction.get=function(){return fr},Object.defineProperties(cr,hr);var fr=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ur),pr=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new kt};pr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},pr.prototype.isDone=function(){return!1},pr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},pr.prototype.interfaces_=function(){return[Xn]},pr.prototype.getClass=function(){return pr};var dr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};dr.prototype.checkCorrectness=function(t){var e=dn.getNodedSubstrings(t),n=new or(e);try{n.checkValid()}catch(t){if(!(t instanceof U))throw t;t.printStackTrace()}},dr.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},dr.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},dr.prototype.findInteriorIntersections=function(t,e){var n=new pr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},dr.prototype.computeVertexSnaps=function(){if(T(arguments[0],xt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof dn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new sr(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},dr.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new wn,this._pointSnapper=new cr(this._noder.getIndex()),this.snapRound(t,this._li)},dr.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new sr(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},dr.prototype.interfaces_=function(){return[xn]},dr.prototype.getClass=function(){return dr};var mr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Sn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},gr={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};mr.prototype.bufferFixedPrecision=function(t){var e=new ir(new dr(new pe(1)),t.getScale()),n=new rr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},mr.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=mr.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Ae))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=mr.precisionScaleFactor(this._argGeom,this._distance,n),i=new pe(r);this.bufferFixedPrecision(i)}},mr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===pe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},mr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},mr.prototype.bufferOriginalPrecision=function(){try{var t=new rr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Q))throw t;this._saveException=t}},mr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},mr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr},mr.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new mr(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new mr(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof Sn&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var i=arguments[1];return new mr(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],l=new mr(arguments[0]);return l.setQuadrantSegments(a),l.setEndCapStyle(s),l.getResultGeometry(o)}},mr.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=M.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},gr.CAP_ROUND.get=function(){return Sn.CAP_ROUND},gr.CAP_BUTT.get=function(){return Sn.CAP_FLAT},gr.CAP_FLAT.get=function(){return Sn.CAP_FLAT},gr.CAP_SQUARE.get=function(){return Sn.CAP_SQUARE},gr.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(mr,gr);var vr=function(){this._pt=[new S,new S],this._distance=_.NaN,this._isNull=!0};vr.prototype.getCoordinates=function(){return this._pt},vr.prototype.getCoordinate=function(t){return this._pt[t]},vr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},vr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},vr.prototype.getDistance=function(){return this._distance},vr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr};var yr=function(){};yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr},yr.computeDistance=function(){if(arguments[2]instanceof vr&&arguments[0]instanceof Yt&&arguments[1]instanceof S)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new mn,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof vr&&arguments[0]instanceof Qt&&arguments[1]instanceof S){var a=arguments[0],s=arguments[1],l=arguments[2];yr.computeDistance(a.getExteriorRing(),s,l);for(var u=0;u<a.getNumInteriorRing();u++)yr.computeDistance(a.getInteriorRingN(u),s,l)}else if(arguments[2]instanceof vr&&arguments[0]instanceof ct&&arguments[1]instanceof S){var c=arguments[0],h=arguments[1],f=arguments[2];if(c instanceof Yt)yr.computeDistance(c,h,f);else if(c instanceof Qt)yr.computeDistance(c,h,f);else if(c instanceof Ut)for(var p=c,d=0;d<p.getNumGeometries();d++){var m=p.getGeometryN(d);yr.computeDistance(m,h,f)}else f.setMinimum(c.getCoordinate(),h)}else if(arguments[2]instanceof vr&&arguments[0]instanceof mn&&arguments[1]instanceof S){var g=arguments[1],v=arguments[2],y=arguments[0].closestPoint(g);v.setMinimum(y,g)}};var _r=function(t){this._maxPtDist=new vr,this._inputGeom=t||null},xr={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};_r.prototype.computeMaxMidpointDistance=function(t){var e=new wr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.computeMaxVertexDistance=function(t){var e=new br(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},_r.prototype.getDistancePoints=function(){return this._maxPtDist},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r},xr.MaxPointDistanceFilter.get=function(){return br},xr.MaxMidpointDistanceFilter.get=function(){return wr},Object.defineProperties(_r,xr);var br=function(t){this._maxPtDist=new vr,this._minPtDist=new vr,this._geom=t||null};br.prototype.filter=function(t){this._minPtDist.initialize(),yr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},br.prototype.getMaxPointDistance=function(){return this._maxPtDist},br.prototype.interfaces_=function(){return[pt]},br.prototype.getClass=function(){return br};var wr=function(t){this._maxPtDist=new vr,this._minPtDist=new vr,this._geom=t||null};wr.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new S((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),yr.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wr.prototype.isDone=function(){return!1},wr.prototype.isGeometryChanged=function(){return!1},wr.prototype.getMaxPointDistance=function(){return this._maxPtDist},wr.prototype.interfaces_=function(){return[Zt]},wr.prototype.getClass=function(){return wr};var kr=function(t){this._comps=t||null};kr.prototype.filter=function(t){t instanceof Qt&&this._comps.add(t)},kr.prototype.interfaces_=function(){return[jt]},kr.prototype.getClass=function(){return kr},kr.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return kr.getPolygons(t,new kt)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Qt?n.add(e):e instanceof Ut&&e.apply(new kr(n)),n}};var Sr=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Sr.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Yt&&this._lines.add(t)},Sr.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Sr.prototype.interfaces_=function(){return[ut]},Sr.prototype.getClass=function(){return Sr},Sr.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Sr.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Sr.getLines(e,n))}},Sr.getLines=function(){if(1===arguments.length){var t=arguments[0];return Sr.getLines(t,!1)}if(2===arguments.length){if(T(arguments[0],xt)&&T(arguments[1],xt)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var r=n.next();Sr.getLines(r,e)}return e}if(arguments[0]instanceof ct&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1],a=new kt;return i.apply(new Sr(a,o)),a}if(arguments[0]instanceof ct&&T(arguments[1],xt)){var s=arguments[0],l=arguments[1];return s instanceof Yt?l.add(s):s.apply(new Sr(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&T(arguments[0],xt)&&T(arguments[1],xt)){for(var u=arguments[1],c=arguments[2],h=arguments[0].iterator();h.hasNext();){var f=h.next();Sr.getLines(f,u,c)}return u}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ct&&T(arguments[1],xt)){var p=arguments[1],d=arguments[2];return arguments[0].apply(new Sr(p,d)),p}}};var Er=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new y("Rule must be non-null");this._boundaryRule=t}};Er.prototype.locateInternal=function(){if(arguments[0]instanceof S&&arguments[1]instanceof Qt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return A.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===A.EXTERIOR)return A.EXTERIOR;if(r===A.BOUNDARY)return A.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===A.INTERIOR)return A.EXTERIOR;if(a===A.BOUNDARY)return A.BOUNDARY}return A.INTERIOR}if(arguments[0]instanceof S&&arguments[1]instanceof Yt){var s=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(s))return A.EXTERIOR;var u=l.getCoordinates();return l.isClosed()||!s.equals(u[0])&&!s.equals(u[u.length-1])?st.isOnLine(s,u)?A.INTERIOR:A.EXTERIOR:A.BOUNDARY}if(arguments[0]instanceof S&&arguments[1]instanceof Kt){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?A.INTERIOR:A.EXTERIOR}},Er.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?st.locatePointInRing(t,e.getCoordinates()):A.EXTERIOR},Er.prototype.intersects=function(t,e){return this.locate(t,e)!==A.EXTERIOR},Er.prototype.updateLocationInfo=function(t){t===A.INTERIOR&&(this._isIn=!0),t===A.BOUNDARY&&this._numBoundaries++},Er.prototype.computeLocation=function(t,e){if(e instanceof Kt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Yt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Qt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Vt)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ne)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof Ut)for(var l=new Zn(e);l.hasNext();){var u=l.next();u!==e&&this.computeLocation(t,u)}},Er.prototype.locate=function(t,e){return e.isEmpty()?A.EXTERIOR:e instanceof Yt||e instanceof Qt?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?A.BOUNDARY:this._numBoundaries>0||this._isIn?A.INTERIOR:A.EXTERIOR)},Er.prototype.interfaces_=function(){return[]},Er.prototype.getClass=function(){return Er};var Ir=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._component=e,this._segIndex=n,this._pt=r}},Cr={INSIDE_AREA:{configurable:!0}};Ir.prototype.isInsideArea=function(){return this._segIndex===Ir.INSIDE_AREA},Ir.prototype.getCoordinate=function(){return this._pt},Ir.prototype.getGeometryComponent=function(){return this._component},Ir.prototype.getSegmentIndex=function(){return this._segIndex},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir},Cr.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Ir,Cr);var Ar=function(t){this._pts=t||null};Ar.prototype.filter=function(t){t instanceof Kt&&this._pts.add(t)},Ar.prototype.interfaces_=function(){return[jt]},Ar.prototype.getClass=function(){return Ar},Ar.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Kt?Qe.singletonList(t):Ar.getPoints(t,new kt)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Kt?n.add(e):e instanceof Ut&&e.apply(new Ar(n)),n}};var Pr=function(){this._locations=null;var t=arguments[0];this._locations=t};Pr.prototype.filter=function(t){(t instanceof Kt||t instanceof Yt||t instanceof Qt)&&this._locations.add(new Ir(t,0,t.getCoordinate()))},Pr.prototype.interfaces_=function(){return[jt]},Pr.prototype.getClass=function(){return Pr},Pr.getLocations=function(t){var e=new kt;return t.apply(new Pr(e)),e};var Tr=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Er,this._minDistanceLocation=null,this._minDistance=_.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Tr.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=kr.getPolygons(this._geom[e]);if(i.size()>0){var o=Pr.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&T(arguments[0],wt)&&T(arguments[1],wt)){for(var a=arguments[0],s=arguments[1],l=arguments[2],u=0;u<a.size();u++)for(var c=a.get(u),h=0;h<s.size();h++)if(this.computeContainmentDistance(c,s.get(h),l),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ir&&arguments[1]instanceof Qt){var f=arguments[0],p=arguments[1],d=arguments[2],m=f.getCoordinate();if(A.EXTERIOR!==this._ptLocator.locate(m,p))return this._minDistance=0,d[0]=f,d[1]=new Ir(p,m),null}},Tr.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Tr.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Sr.getLines(this._geom[0]),n=Sr.getLines(this._geom[1]),r=Ar.getPoints(this._geom[0]),i=Ar.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Tr.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Tr.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Tr.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Tr.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Yt&&arguments[1]instanceof Kt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a=st.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new mn(r[o],r[o+1]).closestPoint(i);n[0]=new Ir(t,o,s),n[1]=new Ir(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Yt&&arguments[1]instanceof Yt){var l=arguments[0],u=arguments[1],c=arguments[2];if(l.getEnvelopeInternal().distance(u.getEnvelopeInternal())>this._minDistance)return null;for(var h=l.getCoordinates(),f=u.getCoordinates(),p=0;p<h.length-1;p++)for(var d=0;d<f.length-1;d++){var m=st.distanceLineLine(h[p],h[p+1],f[d],f[d+1]);if(m<this._minDistance){this._minDistance=m;var g=new mn(h[p],h[p+1]),v=new mn(f[d],f[d+1]),y=g.closestPoints(v);c[0]=new Ir(l,p,y[0]),c[1]=new Ir(u,d,y[1])}if(this._minDistance<=this._terminateDistance)return null}}},Tr.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Ir(i,0,i.getCoordinate()),n[1]=new Ir(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Tr.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new y("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Tr.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr},Tr.distance=function(t,e){return new Tr(t,e).distance()},Tr.isWithinDistance=function(t,e,n){return new Tr(t,e,n).distance()<=n},Tr.nearestPoints=function(t,e){return new Tr(t,e).nearestPoints()};var Mr=function(){this._pt=[new S,new S],this._distance=_.NaN,this._isNull=!0};Mr.prototype.getCoordinates=function(){return this._pt},Mr.prototype.getCoordinate=function(t){return this._pt[t]},Mr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Mr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Mr.prototype.toString=function(){return J.toLineString(this._pt[0],this._pt[1])},Mr.prototype.getDistance=function(){return this._distance},Mr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr};var Lr=function(){};Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Lr.computeDistance=function(){if(arguments[2]instanceof Mr&&arguments[0]instanceof Yt&&arguments[1]instanceof S)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new mn,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Mr&&arguments[0]instanceof Qt&&arguments[1]instanceof S){var s=arguments[0],l=arguments[1],u=arguments[2];Lr.computeDistance(s.getExteriorRing(),l,u);for(var c=0;c<s.getNumInteriorRing();c++)Lr.computeDistance(s.getInteriorRingN(c),l,u)}else if(arguments[2]instanceof Mr&&arguments[0]instanceof ct&&arguments[1]instanceof S){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof Yt)Lr.computeDistance(h,f,p);else if(h instanceof Qt)Lr.computeDistance(h,f,p);else if(h instanceof Ut)for(var d=h,m=0;m<d.getNumGeometries();m++){var g=d.getGeometryN(m);Lr.computeDistance(g,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof Mr&&arguments[0]instanceof mn&&arguments[1]instanceof S){var v=arguments[1],y=arguments[2],_=arguments[0].closestPoint(v);y.setMinimum(_,v)}};var Rr=function(){this._g0=null,this._g1=null,this._ptDist=new Mr,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Nr={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Rr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Rr.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new y("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Rr.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Rr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Rr.prototype.computeOrientedDistance=function(t,e,n){var r=new Or(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new zr(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Rr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Rr.prototype.interfaces_=function(){return[]},Rr.prototype.getClass=function(){return Rr},Rr.distance=function(){if(2===arguments.length)return new Rr(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Rr(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Nr.MaxPointDistanceFilter.get=function(){return Or},Nr.MaxDensifiedByFractionDistanceFilter.get=function(){return zr},Object.defineProperties(Rr,Nr);var Or=function(){this._maxPtDist=new Mr,this._minPtDist=new Mr,this._euclideanDist=new Lr,this._geom=null;var t=arguments[0];this._geom=t};Or.prototype.filter=function(t){this._minPtDist.initialize(),Lr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Or.prototype.getMaxPointDistance=function(){return this._maxPtDist},Or.prototype.interfaces_=function(){return[pt]},Or.prototype.getClass=function(){return Or};var zr=function(){this._maxPtDist=new Mr,this._minPtDist=new Mr,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};zr.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,l=n.y+a*o,u=new S(s,l);this._minPtDist.initialize(),Lr.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},zr.prototype.isDone=function(){return!1},zr.prototype.isGeometryChanged=function(){return!1},zr.prototype.getMaxPointDistance=function(){return this._maxPtDist},zr.prototype.interfaces_=function(){return[Zt]},zr.prototype.getClass=function(){return zr};var Dr=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Fr={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Dr.prototype.checkMaximumDistance=function(t,e,n){var r=new Rr(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+J.toLineString(i[0],i[1])+")"}},Dr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Dr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Dr.VERBOSE&&q.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Dr.prototype.checkNegativeValid=function(){if(!(this._input instanceof Qt||this._input instanceof ne||this._input instanceof Ut))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Dr.prototype.getErrorIndicator=function(){return this._errorIndicator},Dr.prototype.checkMinimumDistance=function(t,e,n){var r=new Tr(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+J.toLineString(i[0],i[1])+" )"}},Dr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Dr.prototype.getErrorLocation=function(){return this._errorLocation},Dr.prototype.getPolygonLines=function(t){for(var e=new kt,n=new Sr(e),r=kr.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Dr.prototype.getErrorMessage=function(){return this._errMsg},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Fr.VERBOSE.get=function(){return!1},Fr.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Dr,Fr);var Br=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},jr={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Br.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Br.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Br.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new W(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new W(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Br.prototype.checkDistance=function(){var t=new Dr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Br.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Br.prototype.checkPolygonal=function(){this._result instanceof Qt||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Br.prototype.getErrorIndicator=function(){return this._errorIndicator},Br.prototype.getErrorLocation=function(){return this._errorLocation},Br.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Br.prototype.report=function(t){if(!Br.VERBOSE)return null;q.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Br.prototype.getErrorMessage=function(){return this._errorMsg},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br},Br.isValidMsg=function(t,e,n){var r=new Br(t,e,n);return r.isValid()?null:r.getErrorMessage()},Br.isValid=function(t,e,n){return!!new Br(t,e,n).isValid()},jr.VERBOSE.get=function(){return!1},jr.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Br,jr);var Zr=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Zr.prototype.getCoordinates=function(){return this._pts},Zr.prototype.size=function(){return this._pts.length},Zr.prototype.getCoordinate=function(t){return this._pts[t]},Zr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Zr.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:hn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Zr.prototype.setData=function(t){this._data=t},Zr.prototype.getData=function(){return this._data},Zr.prototype.toString=function(){return J.toLineString(new le(this._pts))},Zr.prototype.interfaces_=function(){return[fn]},Zr.prototype.getClass=function(){return Zr};var Ur=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new kt,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Ur.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Ur.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Ur.prototype.getIntersectionSegments=function(){return this._intSegments},Ur.prototype.count=function(){return this._intersectionCount},Ur.prototype.getIntersections=function(){return this._intersections},Ur.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Ur.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Ur.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Ur.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Ur.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Ur.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Ur.prototype.interfaces_=function(){return[Xn]},Ur.prototype.getClass=function(){return Ur},Ur.createAllIntersectionsFinder=function(t){var e=new Ur(t);return e.setFindAllIntersections(!0),e},Ur.createAnyIntersectionFinder=function(t){return new Ur(t)},Ur.createIntersectionCounter=function(t){var e=new Ur(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Vr=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Vr.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Vr.prototype.getIntersections=function(){return this._segInt.getIntersections()},Vr.prototype.isValid=function(){return this.execute(),this._isValid},Vr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Vr.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Ur(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new wn;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Vr.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Ae(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Vr.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+J.toLineString(t[0],t[1])+" and "+J.toLineString(t[2],t[3])},Vr.prototype.interfaces_=function(){return[]},Vr.prototype.getClass=function(){return Vr},Vr.computeIntersections=function(t){var e=new Vr(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var qr=function t(){this._nv=null;var e=arguments[0];this._nv=new Vr(t.toSegmentStrings(e))};qr.prototype.checkValid=function(){this._nv.checkValid()},qr.prototype.interfaces_=function(){return[]},qr.prototype.getClass=function(){return qr},qr.toSegmentStrings=function(t){for(var e=new kt,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Zr(r.getCoordinates(),r))}return e},qr.checkValid=function(t){new qr(t).checkValid()};var Gr=function(t){this._mapOp=t};Gr.prototype.map=function(t){for(var e=new kt,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(ve.toGeometryArray(e))},Gr.prototype.interfaces_=function(){return[]},Gr.prototype.getClass=function(){return Gr},Gr.map=function(t,e){return new Gr(e).map(t)};var Wr=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new kt,this._resultLineList=new kt;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Wr.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Wr.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Wr.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Wr.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Ii.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Wr.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Wr.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Wr.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Wr.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Ii.isResultOfOp(r,e)&&e===Ii.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr};var Hr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new kt;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Hr.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Hr.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===Ii.INTERSECTION)){var r=n.getLabel();Ii.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Hr.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr};var Xr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Xr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Xr.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ee&&!r.isEmpty()||(n=!1);for(var i=new kt,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof ee||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new kt;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Xr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Xr.prototype.getInputGeometry=function(){return this._inputGeom},Xr.prototype.transformMultiLineString=function(t,e){for(var n=new kt,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Xr.prototype.transformCoordinates=function(t,e){return this.copy(t)},Xr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Xr.prototype.transformMultiPoint=function(t,e){for(var n=new kt,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Xr.prototype.transformMultiPolygon=function(t,e){for(var n=new kt,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Xr.prototype.copy=function(t){return t.copy()},Xr.prototype.transformGeometryCollection=function(t,e){for(var n=new kt,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ve.toGeometryArray(n)):this._factory.buildGeometry(n)},Xr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Kt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Yt)return this.transformLineString(t,null);if(t instanceof Vt)return this.transformMultiLineString(t,null);if(t instanceof Qt)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof Ut)return this.transformGeometryCollection(t,null);throw new y("Unknown Geometry subtype: "+t.getClass().getName())},Xr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr};var Yr=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new mn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Yt&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};Yr.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new S(o)),0===r&&this._isClosed&&t.set(t.size()-1,new S(o)))}},Yr.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Yr.prototype.snapTo=function(t){var e=new Et(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Yr.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new S(i),!1)}},Yr.prototype.findSegmentIndexToSnap=function(t,e){for(var n=_.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Yr.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr},Yr.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var $r=function(t){this._srcGeom=t||null},Kr={SNAP_PRECISION_FACTOR:{configurable:!0}};$r.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Jr(e,n).transform(this._srcGeom)},$r.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Jr(t,n,!0).transform(this._srcGeom),i=r;return e&&T(i,Jt)&&(i=r.buffer(0)),i},$r.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},$r.prototype.extractTargetCoordinates=function(t){for(var e=new p,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},$r.prototype.computeMinimumSegmentLength=function(t){for(var e=_.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},$r.prototype.interfaces_=function(){return[]},$r.prototype.getClass=function(){return $r},$r.snap=function(t,e,n){var r=new Array(2).fill(null),i=new $r(t);r[0]=i.snapTo(e,n);var o=new $r(e);return r[1]=o.snapTo(r[0],n),r},$r.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=$r.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===pe.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min($r.computeOverlaySnapTolerance(i),$r.computeOverlaySnapTolerance(o))}},$r.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*$r.SNAP_PRECISION_FACTOR},$r.snapToSelf=function(t,e,n){return new $r(t).snapToSelf(e,n)},Kr.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties($r,Kr);var Jr=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Yr(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xr),Qr=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Qr.prototype.getCommon=function(){return _.longBitsToDouble(this._commonBits)},Qr.prototype.add=function(t){var e=_.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Qr.signExpBits(this._commonBits),this._isFirst=!1,null):Qr.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Qr.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Qr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Qr.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=_.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+_.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr},Qr.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Qr.signExpBits=function(t){return t>>52},Qr.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Qr.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Qr.getBit(t,r)!==Qr.getBit(e,r))return n;n++}return 52};var ti=function(){this._commonCoord=null,this._ccFilter=new ni},ei={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ti.prototype.addCommonBits=function(t){var e=new ri(this._commonCoord);t.apply(e),t.geometryChanged()},ti.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new S(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ri(e);return t.apply(n),t.geometryChanged(),t},ti.prototype.getCommonCoordinate=function(){return this._commonCoord},ti.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.CommonCoordinateFilter.get=function(){return ni},ei.Translater.get=function(){return ri},Object.defineProperties(ti,ei);var ni=function(){this._commonBitsX=new Qr,this._commonBitsY=new Qr};ni.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ni.prototype.getCommonCoordinate=function(){return new S(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ni.prototype.interfaces_=function(){return[pt]},ni.prototype.getClass=function(){return ni};var ri=function(){this.trans=null;var t=arguments[0];this.trans=t};ri.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ri.prototype.isDone=function(){return!1},ri.prototype.isGeometryChanged=function(){return!0},ri.prototype.interfaces_=function(){return[Zt]},ri.prototype.getClass=function(){return ri};var ii=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ii.prototype.selfSnap=function(t){return new $r(t).snapTo(t,this._snapTolerance)},ii.prototype.removeCommonBits=function(t){this._cbr=new ti,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ii.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ii.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Ii.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ii.prototype.checkValid=function(t){t.isValid()||q.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=$r.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(t){var e=this.removeCommonBits(t);return $r.snap(e[0],e[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(t,e,n){return new ii(t,e).getResultGeometry(n)},ii.union=function(t,e){return ii.overlayOp(t,e,Ii.UNION)},ii.intersection=function(t,e){return ii.overlayOp(t,e,Ii.INTERSECTION)},ii.symDifference=function(t,e){return ii.overlayOp(t,e,Ii.SYMDIFFERENCE)},ii.difference=function(t,e){return ii.overlayOp(t,e,Ii.DIFFERENCE)};var oi=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oi.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Ii.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Q))throw t;r=t}if(!n)try{e=ii.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Q?r:t}return e},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(t,e,n){return new oi(t,e).getResultGeometry(n)},oi.union=function(t,e){return oi.overlayOp(t,e,Ii.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,Ii.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,Ii.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,Ii.DIFFERENCE)};var ai=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ai.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai};var si=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},li={INSERT:{configurable:!0},DELETE:{configurable:!0}};si.prototype.isDelete=function(){return this._eventType===si.DELETE},si.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},si.prototype.getObject=function(){return this._obj},si.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},si.prototype.getInsertEvent=function(){return this._insertEvent},si.prototype.isInsert=function(){return this._eventType===si.INSERT},si.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},si.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},si.prototype.interfaces_=function(){return[b]},si.prototype.getClass=function(){return si},li.INSERT.get=function(){return 1},li.DELETE.get=function(){return 2},Object.defineProperties(si,li);var ui=function(){};ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui};var ci=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};ci.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(ci.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},ci.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ci.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},ci.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ci.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},ci.prototype.hasProperIntersection=function(){return this._hasProper},ci.prototype.hasIntersection=function(){return this._hasIntersection},ci.prototype.isDone=function(){return this._isDone},ci.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},ci.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},ci.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},ci.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var hi=function(t){function e(){t.call(this),this.events=new kt,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Qe.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ci&&T(arguments[0],wt)&&T(arguments[1],wt)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&T(arguments[0],wt)&&arguments[1]instanceof ci){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new ai(n,i),a=new si(e,n.getMinX(i),o);this.events.add(a),this.events.add(new si(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ui),fi=function(){this._min=_.POSITIVE_INFINITY,this._max=_.NEGATIVE_INFINITY},pi={NodeComparator:{configurable:!0}};fi.prototype.getMin=function(){return this._min},fi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},fi.prototype.getMax=function(){return this._max},fi.prototype.toString=function(){return J.toLineString(new S(this._min,0),new S(this._max,0))},fi.prototype.interfaces_=function(){return[]},fi.prototype.getClass=function(){return fi},pi.NodeComparator.get=function(){return di},Object.defineProperties(fi,pi);var di=function(){};di.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},di.prototype.interfaces_=function(){return[k]},di.prototype.getClass=function(){return di};var mi=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fi),gi=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fi),vi=function(){this._leaves=new kt,this._root=null,this._level=0};vi.prototype.buildTree=function(){Qe.sort(this._leaves,new fi.NodeComparator);for(var t=this._leaves,e=null,n=new kt;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},vi.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new mi(t,e,n))},vi.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},vi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},vi.prototype.printNode=function(t){q.out.println(J.toLineString(new S(t._min,this._level),new S(t._max,this._level)))},vi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},vi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new gi(t.get(n),t.get(n+1));e.add(i)}}},vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi};var yi=function(){this._items=new kt};yi.prototype.visitItem=function(t){this._items.add(t)},yi.prototype.getItems=function(){return this._items},yi.prototype.interfaces_=function(){return[Ye]},yi.prototype.getClass=function(){return yi};var _i=function(){this._index=null;var t=arguments[0];if(!T(t,Jt))throw new y("Argument must be Polygonal");this._index=new wi(t)},xi={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};_i.prototype.locate=function(t){var e=new at(t),n=new bi(e);return this._index.query(t.y,t.y,n),e.getLocation()},_i.prototype.interfaces_=function(){return[jn]},_i.prototype.getClass=function(){return _i},xi.SegmentVisitor.get=function(){return bi},xi.IntervalIndexedGeometry.get=function(){return wi},Object.defineProperties(_i,xi);var bi=function(){this._counter=null;var t=arguments[0];this._counter=t};bi.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},bi.prototype.interfaces_=function(){return[Ye]},bi.prototype.getClass=function(){return bi};var wi=function(){this._index=new vi;var t=arguments[0];this.init(t)};wi.prototype.init=function(t){for(var e=Sr.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},wi.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new mn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},wi.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new yi;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi};var ki=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new fe,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Er,2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;A.NONE,r.getLocation(t,Ee.ON)===A.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new ci(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),a=this._parentGeom instanceof ee||this._parentGeom instanceof Qt||this._parentGeom instanceof ne,s=n||!a;return o.computeIntersections(this._edges,i,s),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new ci(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Kt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,A.INTERIOR)}else if(arguments[0]instanceof S){var e=arguments[0];this.insertPoint(this._argIndex,e,A.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),A.EXTERIOR,A.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,A.INTERIOR,A.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],A.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],A.BOUNDARY)},e.prototype.addLineString=function(t){var e=It.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new nr(e,new Le(this._argIndex,A.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===A.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=It.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;st.isCCW(r)&&(i=n,o=e);var a=new nr(r,new Le(this._argIndex,A.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],A.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Le(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new hi},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof Qt)this.addPolygon(e);else if(e instanceof Yt)this.addLineString(e);else if(e instanceof Kt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof Vt)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof Ut))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return T(this._parentGeom,Jt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new _i(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?A.BOUNDARY:A.INTERIOR},e}(qe),Si=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new ki(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ki(0,e,r),this._arg[1]=new ki(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ki(0,i,a),this._arg[1]=new ki(1,o,a)}};Si.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Si.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si};var Ei=function(){};Ei.prototype.interfaces_=function(){return[]},Ei.prototype.getClass=function(){return Ei},Ei.map=function(){if(arguments[0]instanceof ct&&T(arguments[1],Ei.MapOp)){for(var t=arguments[0],e=arguments[1],n=new kt,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(T(arguments[0],xt)&&T(arguments[1],Ei.MapOp)){for(var o=arguments[0],a=arguments[1],s=new kt,l=o.iterator();l.hasNext();){var u=l.next(),c=a.map(u);null!==c&&s.add(c)}return s}},Ei.MapOp=function(){};var Ii=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Er,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Hn,this._resultPolyList=new kt,this._resultLineList=new kt,this._resultPointList=new kt,this._graph=new qe(new Gn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Le(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new kt;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==A.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new kt,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new kt;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),qr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ge(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Wr(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Hr(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Ee.RIGHT),i.getLocation(1,Ee.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(et.isTrue(!r.isNull(i,Ee.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Ee.LEFT,r.getLocation(i,Ee.LEFT)),et.isTrue(!r.isNull(i,Ee.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Ee.RIGHT,r.getLocation(i,Ee.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Si);Ii.overlayOp=function(t,e,n){return new Ii(t,e).getResultGeometry(n)},Ii.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Ii.createEmptyResult(Ii.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Gr.map(t,{interfaces_:function(){return[Ei.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ii.INTERSECTION)},Ii.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ii.createEmptyResult(Ii.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ii.SYMDIFFERENCE)},Ii.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Ii.INTERSECTION:o=Math.min(r,i);break;case Ii.UNION:o=Math.max(r,i);break;case Ii.DIFFERENCE:o=r;break;case Ii.SYMDIFFERENCE:o=Math.max(r,i)}return o},Ii.createEmptyResult=function(t,e,n,r){var i=null;switch(Ii.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Ii.difference=function(t,e){return t.isEmpty()?Ii.createEmptyResult(Ii.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ii.DIFFERENCE))},Ii.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Ii.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===A.BOUNDARY&&(i=A.INTERIOR),o===A.BOUNDARY&&(o=A.INTERIOR),a){case Ii.INTERSECTION:return i===A.INTERIOR&&o===A.INTERIOR;case Ii.UNION:return i===A.INTERIOR||o===A.INTERIOR;case Ii.DIFFERENCE:return i===A.INTERIOR&&o!==A.INTERIOR;case Ii.SYMDIFFERENCE:return i===A.INTERIOR&&o!==A.INTERIOR||i!==A.INTERIOR&&o===A.INTERIOR}return!1}},Ii.INTERSECTION=1,Ii.UNION=2,Ii.DIFFERENCE=3,Ii.SYMDIFFERENCE=4;var Ci=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Er,this._seg=new mn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Ci.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Ci.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?A.BOUNDARY:this._ptLocator.locate(t,this._g)},Ci.prototype.extractLinework=function(t){var e=new Ai;t.apply(e);var n=e.getLinework(),r=ve.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci};var Ai=function(){this._linework=null,this._linework=new kt};Ai.prototype.getLinework=function(){return this._linework},Ai.prototype.filter=function(t){if(t instanceof Qt){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Ai.prototype.interfaces_=function(){return[jt]},Ai.prototype.getClass=function(){return Ai};var Pi=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Pi.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Pi.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Pi.prototype.getPoints=function(t){for(var e=new kt,n=Sr.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Pi.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,l=n*o/a,u=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new S(u-l,c+s);r.add(h)}if(this._doRight){var f=new S(u+l,c-s);r.add(f)}},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi};var Ti=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new kt;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Ci(this._geom[0],this._boundaryDistanceTolerance),new Ci(this._geom[1],this._boundaryDistanceTolerance),new Ci(this._geom[2],this._boundaryDistanceTolerance)]},Mi={TOLERANCE:{configurable:!0}};Ti.prototype.reportResult=function(t,e,n){q.out.println("Overlay result invalid - A:"+A.toLocationSymbol(e[0])+" B:"+A.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+A.toLocationSymbol(e[2]))},Ti.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Ti.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Ti.hasLocation(this._location,A.BOUNDARY)||this.isValidResult(r,this._location)}},Ti.prototype.addTestPts=function(t){var e=new Pi(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Ti.prototype.isValidResult=function(t,e){var n=Ii.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===A.INTERIOR);return r||this.reportResult(t,e,n),r},Ti.prototype.getInvalidLocation=function(){return this._invalidLocation},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti},Ti.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Ti.computeBoundaryDistanceTolerance=function(t,e){return Math.min($r.computeSizeBasedSnapTolerance(t),$r.computeSizeBasedSnapTolerance(e))},Ti.isValid=function(t,e,n,r){return new Ti(t,e,r).isValid(n)},Mi.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Ti,Mi);var Li=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Li.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Li.prototype.combine=function(){for(var t=new kt,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.combine=function(){if(1===arguments.length)return new Li(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Li(Li.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return new Li(Li.createList(n,r,i)).combine()}},Li.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Li.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new kt;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new kt;return a.add(r),a.add(i),a.add(o),a}};var Ri=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new kt)},Ni={STRTREE_NODE_CAPACITY:{configurable:!0}};Ri.prototype.reduceToGeometries=function(t){for(var e=new kt,n=t.iterator();n.hasNext();){var r=n.next(),i=null;T(r,wt)?i=this.unionTree(r):r instanceof ct&&(i=r),e.add(i)}return e},Ri.prototype.extractByEnvelope=function(t,e,n){for(var r=new kt,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Ri.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Li.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Ri.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new an(Ri.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Ri.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Ri.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Ri.getGeometry(e,n),Ri.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},Ri.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Ri.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Ri.prototype.unionActual=function(t,e){return Ri.restrictToPolygons(t.union(e))},Ri.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Ri.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new kt,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),Li.combine(r)},Ri.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.restrictToPolygons=function(t){if(T(t,Jt))return t;var e=kr.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ve.toPolygonArray(e))},Ri.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Ri.union=function(t){return new Ri(t).union()},Ni.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Ri,Ni);var Oi=function(){};Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Oi.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ii.createEmptyResult(Ii.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ii.UNION)},t.GeoJSONReader=ke,t.GeoJSONWriter=Se,t.OverlayOp=Ii,t.UnionOp=Oi,t.BufferOp=mr,Object.defineProperty(t,"__esModule",{value:!0})}(e)},2962:function(t){"use strict";t.exports=function(){function t(t){return void 0!==t}function e(t,n,r){if(t.nodeType===x.CDATA_SECTION||t.nodeType===x.TEXT)n?r.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(t.nodeValue);else for(t=t.firstChild;t;t=t.nextSibling)e(t,n,r);return r}function n(t){for(t=t.nextElementSibling||t.nextSibling;t&&t.nodeType!==x.ELEMENT;)t=t.nextSibling;return t}function r(e,n,r){var i;r=t(r)?r:{};var o=0;for(i=e.length;o<i;++o)r[e[o]]=n;return r}function i(e,n){return function(r,i){r=e.call(t(n)?n:this,r,i),t(r)&&i[i.length-1].push(r)}}function o(e,r,i,o,a){for(o.push(e),e=i.firstElementChild||i.firstChild;e&&e.nodeType!==x.ELEMENT;)e=e.nextSibling;for(;e;e=n(e))t(i=r[e.namespaceURI||null])&&t(i=i[e.localName])&&i.call(a,e,o);return o.pop()}function a(e,n,r){return function(i,o){var a=e.call(t(r)?r:this,i,o);t(a)&&((o=o[o.length-1])[i=t(n)?n:i.localName]=a)}}function s(e,n,r){return function(i,o){var a=e.call(t(r)?r:this,i,o);if(t(a)){o=o[o.length-1];var s=[];((i=t(n)?n:i.localName)in o?o[i]:o[i]=s).push(a)}}}function l(e){if(e=/^\s*(true|1)|(false|0)\s*$/.exec(e))return t(e[1])||!1}function u(t){return c(e(t,!1,[]).join(""))}function c(t){if(t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t))return parseFloat(t[1])}function h(t){return f(e(t,!1,[]).join(""))}function f(t){if(t=/^\s*(\d+)\s*$/.exec(t))return parseInt(t[1],10)}function p(t){return e(t,!1,[]).join("").replace(w,"")}function d(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}function m(t){return[c(t.getAttribute("minx")),c(t.getAttribute("miny")),c(t.getAttribute("maxx")),c(t.getAttribute("maxy"))]}function g(t,e){return o({},B,t,e)}function v(t,e){return o({},O,t,e)}function y(e,n){if(t(n=g(e,n)))return e=[f(e.getAttribute("width")),f(e.getAttribute("height"))],n.size=e,n}function _(t,e){return o([],j,t,e)}var x={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},b=function(t){this._parser=new t};b.prototype.toDocument=function(t){return this._parser.parseFromString(t,"application/xml")},b.prototype.getAllTextContent=function(t,n){return e(t,n,[]).join("").join("")};var w=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,k=[null,"http://www.opengis.net/wms"],S=r(k,{Service:a((function(t,e){return o({},I,t,e)})),Capability:a((function(t,e){return o({},E,t,e)}))}),E=r(k,{Request:a((function(t,e){return o({},N,t,e)})),Exception:a((function(t,e){return o([],T,t,e)})),Layer:a((function(e,n){var r=l(e.getAttribute("queryable"));return o({queryable:!!t(r)&&r},M,e,n)}))}),I=r(k,{Name:a(p),Title:a(p),Abstract:a(p),KeywordList:a(_),OnlineResource:a(d),ContactInformation:a((function(t,e){return o({},C,t,e)})),Fees:a(p),AccessConstraints:a(p),LayerLimit:a(h),MaxWidth:a(h),MaxHeight:a(h)}),C=r(k,{ContactPersonPrimary:a((function(t,e){return o({},A,t,e)})),ContactPosition:a(p),ContactAddress:a((function(t,e){return o({},P,t,e)})),ContactVoiceTelephone:a(p),ContactFacsimileTelephone:a(p),ContactElectronicMailAddress:a(p)}),A=r(k,{ContactPerson:a(p),ContactOrganization:a(p)}),P=r(k,{AddressType:a(p),Address:a(p),City:a(p),StateOrProvince:a(p),PostCode:a(p),Country:a(p)}),T=r(k,{Format:i(p)}),M=r(k,{Name:a(p),Title:a(p),Abstract:a(p),KeywordList:a(_),CRS:s(p),SRS:s(p),EX_GeographicBoundingBox:a((function(e,n){var r=o({},R,e,n);if(t(r)){e=r.westBoundLongitude,n=r.southBoundLatitude;var i=r.eastBoundLongitude;if(r=r.northBoundLatitude,t(e)&&t(n)&&t(i)&&t(r))return[e,n,i,r]}})),LatLonBoundingBox:a((function(e,n){if(t((e=m(e))[0])&&t(e[1])&&t(e[2])&&t(e[3]))return e})),BoundingBox:s((function(t,e){e=m(t);var n=[c(t.getAttribute("resx")),c(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS")||t.getAttribute("SRS"),extent:e,res:n}})),Dimension:s((function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:l(t.getAttribute("multipleValues")),nearestValue:l(t.getAttribute("nearestValue")),current:l(t.getAttribute("current")),values:p(t)}})),Attribution:a((function(t,e){return o({},L,t,e)})),AuthorityURL:s((function(e,n){if(t(n=g(e,n)))return n.name=e.getAttribute("name"),n})),Identifier:s(p),MetadataURL:s((function(e,n){if(t(n=g(e,n)))return n.type=e.getAttribute("type"),n})),DataURL:s(g),FeatureListURL:s(g),Style:s((function(t,e){return o({},F,t,e)})),MinScaleDenominator:a(u),MaxScaleDenominator:a(u),ScaleHint:a((function(t,e){return{min:parseFloat(t.getAttribute("min")),max:t=parseFloat(t.getAttribute("max"))}})),Layer:s((function(e,n){var r=n[n.length-1];if(t(n=o({},M,e,n))){var i=l(e.getAttribute("queryable"));t(i)||(i=r.queryable),n.queryable=!!t(i)&&i,t(i=f(e.getAttribute("cascaded")))||(i=r.cascaded),n.cascaded=i,t(i=l(e.getAttribute("opaque")))||(i=r.opaque),n.opaque=!!t(i)&&i,t(i=l(e.getAttribute("noSubsets")))||(i=r.noSubsets),n.noSubsets=!!t(i)&&i,t(i=c(e.getAttribute("fixedWidth")))||(i=r.fixedWidth),n.fixedWidth=i,t(e=c(e.getAttribute("fixedHeight")))||(e=r.fixedHeight),n.fixedHeight=e,i=0;for(var a=(e=["Style","CRS","AuthorityURL"]).length;i<a;i++){var s=e[i],u=r[s];if(t(u)){var h=[];h=(h=s in n?n[s]:n[s]=h).concat(u),n[s]=h}}for(i=0,a=(e="EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" ")).length;i<a;i++)t(n[s=e[i]])||(n[s]=r[s]);return n}}))}),L=r(k,{Title:a(p),OnlineResource:a(d),LogoURL:a(y)}),R=r(k,{westBoundLongitude:a(u),eastBoundLongitude:a(u),southBoundLatitude:a(u),northBoundLatitude:a(u)}),N=r(k,{GetCapabilities:a(v),GetMap:a(v),GetFeatureInfo:a(v)}),O=r(k,{Format:s(p),DCPType:s((function(t,e){return o({},z,t,e)}))}),z=r(k,{HTTP:a((function(t,e){return o({},D,t,e)}))}),D=r(k,{Get:a(g),Post:a(g)}),F=r(k,{Name:a(p),Title:a(p),Abstract:a(p),LegendURL:s(y),StyleSheetURL:a(g),StyleURL:a(g)}),B=r(k,{Format:a(p),OnlineResource:a(d)}),j=r(k,{Keyword:i(p)});return k=function(t,e){e||"undefined"===typeof window||(e=window.DOMParser),this.version=void 0,this._parser=new b(e),this._data=t},k.prototype.data=function(t){return this._data=t,this},k.prototype.toJSON=function(t){return t=t||this._data,this.parse(t)},k.prototype.parse=function(t){return this.readFromDocument(this._parser.toDocument(t))},k.prototype.readFromDocument=function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType==x.ELEMENT)return this.readFromNode(t);return null},k.prototype.readFromNode=function(t){return this.version=t.getAttribute("version"),o({version:this.version},S,t,[])||null},k}()},8655:function(t,e,n){function r(t){this.options=t||{locator:{}}}function i(){this.cdata=!1}function o(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function a(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function s(t,e,n){return"string"==typeof t?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}function l(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}r.prototype.parseFromString=function(t,e){var n=this.options,r=new h,o=n.domBuilder||new i,s=n.errorHandler,l=n.locator,c=n.xmlns||{},f=/\/x?html?$/.test(e),p=f?u.entityMap:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return l&&o.setDocumentLocator(l),r.errorHandler=function(t,e,n){if(!t){if(e instanceof i)return e;t=e}var r={},o=t instanceof Function;function s(e){var i=t[e];!i&&o&&(i=2==t.length?function(n){t(e,n)}:t),r[e]=i&&function(t){i("[xmldom "+e+"]\t"+t+a(n))}||function(){}}return n=n||{},s("warning"),s("error"),s("fatalError"),r}(s,o,l),r.domBuilder=n.domBuilder||o,f&&(c[""]="http://www.w3.org/1999/xhtml"),c.xml=c.xml||"http://www.w3.org/XML/1998/namespace",t&&"string"===typeof t?r.parse(t,c,p):r.errorHandler.error("invalid doc source"),o.doc},i.prototype={startDocument:function(){this.doc=(new p).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,n,r){var i=this.doc,a=i.createElementNS(t,n||e),s=r.length;l(this,a),this.currentElement=a,this.locator&&o(this.locator,a);for(var u=0;u<s;u++){t=r.getURI(u);var c=r.getValue(u),h=(n=r.getQName(u),i.createAttributeNS(t,n));this.locator&&o(r.getLocator(u),h),h.value=h.nodeValue=c,a.setAttributeNode(h)}},endElement:function(t,e,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.doc.createProcessingInstruction(t,e);this.locator&&o(this.locator,n),l(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=s.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(t);else r=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(t)&&this.doc.appendChild(r),this.locator&&o(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=s.apply(this,arguments);var r=this.doc.createComment(t);this.locator&&o(this.locator,r),l(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(t,e,n);this.locator&&o(this.locator,i),l(this,i)}},warning:function(t){console.warn("[xmldom warning]\t"+t,a(this.locator))},error:function(t){console.error("[xmldom error]\t"+t,a(this.locator))},fatalError:function(t){throw new f(t,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(t){i.prototype[t]=function(){return null}}));var u=n(5456),c=n(1265),h=c.XMLReader,f=c.ParseError,p=n(1928).DOMImplementation;e.XMLSerializer=n(1928).XMLSerializer},1928:function(t,e){function n(t,e){for(var n in t)e[n]=t[n]}function r(t,e){var r=t.prototype;if(!(r instanceof e)){var i=function(){};i.prototype=e.prototype,n(r,i=new i),t.prototype=r=i}r.constructor!=t&&("function"!=typeof t&&console.error("unknow Class:"+t),r.constructor=t)}var i={},o=i.ELEMENT_NODE=1,a=i.ATTRIBUTE_NODE=2,s=i.TEXT_NODE=3,l=i.CDATA_SECTION_NODE=4,u=i.ENTITY_REFERENCE_NODE=5,c=i.ENTITY_NODE=6,h=i.PROCESSING_INSTRUCTION_NODE=7,f=i.COMMENT_NODE=8,p=i.DOCUMENT_NODE=9,d=i.DOCUMENT_TYPE_NODE=10,m=i.DOCUMENT_FRAGMENT_NODE=11,g=i.NOTATION_NODE=12,v={},y={},_=(v.INDEX_SIZE_ERR=(y[1]="Index size error",1),v.DOMSTRING_SIZE_ERR=(y[2]="DOMString size error",2),v.HIERARCHY_REQUEST_ERR=(y[3]="Hierarchy request error",3)),x=(v.WRONG_DOCUMENT_ERR=(y[4]="Wrong document",4),v.INVALID_CHARACTER_ERR=(y[5]="Invalid character",5),v.NO_DATA_ALLOWED_ERR=(y[6]="No data allowed",6),v.NO_MODIFICATION_ALLOWED_ERR=(y[7]="No modification allowed",7),v.NOT_FOUND_ERR=(y[8]="Not found",8)),b=(v.NOT_SUPPORTED_ERR=(y[9]="Not supported",9),v.INUSE_ATTRIBUTE_ERR=(y[10]="Attribute in use",10));v.INVALID_STATE_ERR=(y[11]="Invalid state",11),v.SYNTAX_ERR=(y[12]="Syntax error",12),v.INVALID_MODIFICATION_ERR=(y[13]="Invalid modification",13),v.NAMESPACE_ERR=(y[14]="Invalid namespace",14),v.INVALID_ACCESS_ERR=(y[15]="Invalid access",15);function w(t,e){if(e instanceof Error)var n=e;else n=this,Error.call(this,y[t]),this.message=y[t],Error.captureStackTrace&&Error.captureStackTrace(this,w);return n.code=t,e&&(this.message=this.message+": "+e),n}function k(){}function S(t,e){this._node=t,this._refresh=e,E(this)}function E(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var r=t._refresh(t._node);rt(t,"length",r.length),n(r,t),t._inc=e}}function I(){}function C(t,e){for(var n=t.length;n--;)if(t[n]===e)return n}function A(t,e,n,r){if(r?e[C(e,r)]=n:e[e.length++]=n,t){n.ownerElement=t;var i=t.ownerDocument;i&&(r&&O(i,t,r),function(t,e,n){t&&t._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(e._nsMap[n.prefix?n.localName:""]=n.value)}(i,t,n))}}function P(t,e,n){var r=C(e,n);if(!(r>=0))throw w(x,new Error(t.tagName+"@"+n));for(var i=e.length-1;r<i;)e[r]=e[++r];if(e.length=i,t){var o=t.ownerDocument;o&&(O(o,t,n),n.ownerElement=null)}}function T(t){if(this._features={},t)for(var e in t)this._features=t[e]}function M(){}function L(t){return("<"==t?"&lt;":">"==t&&"&gt;")||"&"==t&&"&amp;"||'"'==t&&"&quot;"||"&#"+t.charCodeAt()+";"}function R(t,e){if(e(t))return!0;if(t=t.firstChild)do{if(R(t,e))return!0}while(t=t.nextSibling)}function N(){}function O(t,e,n,r){t&&t._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete e._nsMap[n.prefix?n.localName:""]}function z(t,e,n){if(t&&t._inc){t._inc++;var r=e.childNodes;if(n)r[r.length++]=n;else{for(var i=e.firstChild,o=0;i;)r[o++]=i,i=i.nextSibling;r.length=o}}}function D(t,e){var n=e.previousSibling,r=e.nextSibling;return n?n.nextSibling=r:t.firstChild=r,r?r.previousSibling=n:t.lastChild=n,z(t.ownerDocument,t),e}function F(t,e,n){var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===m){var i=e.firstChild;if(null==i)return e;var o=e.lastChild}else i=o=e;var a=n?n.previousSibling:t.lastChild;i.previousSibling=a,o.nextSibling=n,a?a.nextSibling=i:t.firstChild=i,null==n?t.lastChild=o:n.previousSibling=o;do{i.parentNode=t}while(i!==o&&(i=i.nextSibling));return z(t.ownerDocument||t,t),e.nodeType==m&&(e.firstChild=e.lastChild=null),e}function B(){this._nsMap={}}function j(){}function Z(){}function U(){}function V(){}function q(){}function G(){}function W(){}function H(){}function X(){}function Y(){}function $(){}function K(){}function J(t,e){var n=[],r=9==this.nodeType&&this.documentElement||this,i=r.prefix,o=r.namespaceURI;if(o&&null==i&&null==(i=r.lookupPrefix(o)))var a=[{namespace:o,prefix:null}];return tt(this,n,t,e,a),n.join("")}function Q(t,e,n){var r=t.prefix||"",i=t.namespaceURI;if(!r&&!i)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===i||"http://www.w3.org/2000/xmlns/"==i)return!1;for(var o=n.length;o--;){var a=n[o];if(a.prefix==r)return a.namespace!=i}return!0}function tt(t,e,n,r,i){if(r){if(!(t=r(t)))return;if("string"==typeof t)return void e.push(t)}switch(t.nodeType){case o:i||(i=[]);i.length;var c=t.attributes,g=c.length,v=t.firstChild,y=t.tagName;n="http://www.w3.org/1999/xhtml"===t.namespaceURI||n,e.push("<",y);for(var _=0;_<g;_++){"xmlns"==(x=c.item(_)).prefix?i.push({prefix:x.localName,namespace:x.value}):"xmlns"==x.nodeName&&i.push({prefix:"",namespace:x.value})}for(_=0;_<g;_++){var x;if(Q(x=c.item(_),0,i)){var b=x.prefix||"",w=x.namespaceURI,k=b?" xmlns:"+b:" xmlns";e.push(k,'="',w,'"'),i.push({prefix:b,namespace:w})}tt(x,e,n,r,i)}if(Q(t,0,i)){b=t.prefix||"";if(w=t.namespaceURI){k=b?" xmlns:"+b:" xmlns";e.push(k,'="',w,'"'),i.push({prefix:b,namespace:w})}}if(v||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(y)){if(e.push(">"),n&&/^script$/i.test(y))for(;v;)v.data?e.push(v.data):tt(v,e,n,r,i),v=v.nextSibling;else for(;v;)tt(v,e,n,r,i),v=v.nextSibling;e.push("</",y,">")}else e.push("/>");return;case p:case m:for(v=t.firstChild;v;)tt(v,e,n,r,i),v=v.nextSibling;return;case a:return e.push(" ",t.name,'="',t.value.replace(/[<&"]/g,L),'"');case s:return e.push(t.data.replace(/[<&]/g,L).replace(/]]>/g,"]]&gt;"));case l:return e.push("<![CDATA[",t.data,"]]>");case f:return e.push("\x3c!--",t.data,"--\x3e");case d:var S=t.publicId,E=t.systemId;if(e.push("<!DOCTYPE ",t.name),S)e.push(" PUBLIC ",S),E&&"."!=E&&e.push(" ",E),e.push(">");else if(E&&"."!=E)e.push(" SYSTEM ",E,">");else{var I=t.internalSubset;I&&e.push(" [",I,"]"),e.push(">")}return;case h:return e.push("<?",t.target," ",t.data,"?>");case u:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function et(t,e,n){var r;switch(e.nodeType){case o:(r=e.cloneNode(!1)).ownerDocument=t;case m:break;case a:n=!0}if(r||(r=e.cloneNode(!1)),r.ownerDocument=t,r.parentNode=null,n)for(var i=e.firstChild;i;)r.appendChild(et(t,i,n)),i=i.nextSibling;return r}function nt(t,e,n){var r=new e.constructor;for(var i in e){var s=e[i];"object"!=typeof s&&s!=r[i]&&(r[i]=s)}switch(e.childNodes&&(r.childNodes=new k),r.ownerDocument=t,r.nodeType){case o:var l=e.attributes,u=r.attributes=new I,c=l.length;u._ownerElement=r;for(var h=0;h<c;h++)r.setAttributeNode(nt(t,l.item(h),!0));break;case a:n=!0}if(n)for(var f=e.firstChild;f;)r.appendChild(nt(t,f,n)),f=f.nextSibling;return r}function rt(t,e,n){t[e]=n}w.prototype=Error.prototype,n(v,w),k.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var n=[],r=0;r<this.length;r++)tt(this[r],n,t,e);return n.join("")}},S.prototype.item=function(t){return E(this),this[t]},r(S,k),I.prototype={length:0,item:k.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var n=this[e];if(n.nodeName==t)return n}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new w(b);var n=this.getNamedItem(t.nodeName);return A(this._ownerElement,this,t,n),n},setNamedItemNS:function(t){var e,n=t.ownerElement;if(n&&n!=this._ownerElement)throw new w(b);return e=this.getNamedItemNS(t.namespaceURI,t.localName),A(this._ownerElement,this,t,e),e},removeNamedItem:function(t){var e=this.getNamedItem(t);return P(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var n=this.getNamedItemNS(t,e);return P(this._ownerElement,this,n),n},getNamedItemNS:function(t,e){for(var n=this.length;n--;){var r=this[n];if(r.localName==e&&r.namespaceURI==t)return r}return null}},T.prototype={hasFeature:function(t,e){var n=this._features[t.toLowerCase()];return!(!n||e&&!(e in n))},createDocument:function(t,e,n){var r=new N;if(r.implementation=this,r.childNodes=new k,r.doctype=n,n&&r.appendChild(n),e){var i=r.createElementNS(t,e);r.appendChild(i)}return r},createDocumentType:function(t,e,n){var r=new G;return r.name=t,r.nodeName=t,r.publicId=e,r.systemId=n,r}},M.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return F(this,t,e)},replaceChild:function(t,e){this.insertBefore(t,e),e&&this.removeChild(e)},removeChild:function(t){return D(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(t){return nt(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==s&&t.nodeType==s?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var n=e._nsMap;if(n)for(var r in n)if(n[r]==t)return r;e=e.nodeType==a?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var n=e._nsMap;if(n&&t in n)return n[t];e=e.nodeType==a?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){return null==this.lookupPrefix(t)}},n(i,M),n(i,M.prototype),N.prototype={nodeName:"#document",nodeType:p,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==m){for(var n=t.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,e),n=r}return t}return null==this.documentElement&&t.nodeType==o&&(this.documentElement=t),F(this,t,e),t.ownerDocument=this,t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),D(this,t)},importNode:function(t,e){return et(this,t,e)},getElementById:function(t){var e=null;return R(this.documentElement,(function(n){if(n.nodeType==o&&n.getAttribute("id")==t)return e=n,!0})),e},getElementsByClassName:function(t){var e=new RegExp("(^|\\s)"+t+"(\\s|$)");return new S(this,(function(t){var n=[];return R(t.documentElement,(function(r){r!==t&&r.nodeType==o&&e.test(r.getAttribute("class"))&&n.push(r)})),n}))},createElement:function(t){var e=new B;return e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.childNodes=new k,(e.attributes=new I)._ownerElement=e,e},createDocumentFragment:function(){var t=new Y;return t.ownerDocument=this,t.childNodes=new k,t},createTextNode:function(t){var e=new U;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new V;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new q;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var n=new $;return n.ownerDocument=this,n.tagName=n.target=t,n.nodeValue=n.data=e,n},createAttribute:function(t){var e=new j;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new X;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var n=new B,r=e.split(":"),i=n.attributes=new I;return n.childNodes=new k,n.ownerDocument=this,n.nodeName=e,n.tagName=e,n.namespaceURI=t,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=e,i._ownerElement=n,n},createAttributeNS:function(t,e){var n=new j,r=e.split(":");return n.ownerDocument=this,n.nodeName=e,n.name=e,n.namespaceURI=t,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=e,n}},r(N,M),B.prototype={nodeType:o,hasAttribute:function(t){return null!=this.getAttributeNode(t)},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var n=this.ownerDocument.createAttribute(t);n.value=n.nodeValue=""+e,this.setAttributeNode(n)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===m?this.insertBefore(t,null):function(t,e){var n=e.parentNode;if(n){var r=t.lastChild;n.removeChild(e),r=t.lastChild}return r=t.lastChild,e.parentNode=t,e.previousSibling=r,e.nextSibling=null,r?r.nextSibling=e:t.firstChild=e,t.lastChild=e,z(t.ownerDocument,t,e),e}(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);n&&this.removeAttributeNode(n)},hasAttributeNS:function(t,e){return null!=this.getAttributeNodeNS(t,e)},getAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);return n&&n.value||""},setAttributeNS:function(t,e,n){var r=this.ownerDocument.createAttributeNS(t,e);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new S(this,(function(e){var n=[];return R(e,(function(r){r===e||r.nodeType!=o||"*"!==t&&r.tagName!=t||n.push(r)})),n}))},getElementsByTagNameNS:function(t,e){return new S(this,(function(n){var r=[];return R(n,(function(i){i===n||i.nodeType!==o||"*"!==t&&i.namespaceURI!==t||"*"!==e&&i.localName!=e||r.push(i)})),r}))}},N.prototype.getElementsByTagName=B.prototype.getElementsByTagName,N.prototype.getElementsByTagNameNS=B.prototype.getElementsByTagNameNS,r(B,M),j.prototype.nodeType=a,r(j,M),Z.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(y[_])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,n){n=this.data.substring(0,t)+n+this.data.substring(t+e),this.nodeValue=this.data=n,this.length=n.length}},r(Z,M),U.prototype={nodeName:"#text",nodeType:s,splitText:function(t){var e=this.data,n=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},r(U,Z),V.prototype={nodeName:"#comment",nodeType:f},r(V,Z),q.prototype={nodeName:"#cdata-section",nodeType:l},r(q,Z),G.prototype.nodeType=d,r(G,M),W.prototype.nodeType=g,r(W,M),H.prototype.nodeType=c,r(H,M),X.prototype.nodeType=u,r(X,M),Y.prototype.nodeName="#document-fragment",Y.prototype.nodeType=m,r(Y,M),$.prototype.nodeType=h,r($,M),K.prototype.serializeToString=function(t,e,n){return J.call(t,e,n)},M.prototype.toString=J;try{if(Object.defineProperty){var it=function t(e){switch(e.nodeType){case o:case m:var n=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&n.push(t(e)),e=e.nextSibling;return n.join("");default:return e.nodeValue}};Object.defineProperty(S.prototype,"length",{get:function(){return E(this),this.$$length}}),Object.defineProperty(M.prototype,"textContent",{get:function(){return it(this)},set:function(t){switch(this.nodeType){case o:case m:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),rt=function(t,e,n){t["$$"+e]=n}}}catch(ot){}e.DOMImplementation=T,e.XMLSerializer=K},5456:function(t,e){e.entityMap={lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",times:"\xd7",divide:"\xf7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}},1265:function(t,e){var n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+n.source+r.source+"*(?::"+n.source+r.source+"*)?$");function o(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,o)}function a(){}function s(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function l(t,e,n,r,i,o){function a(t,e,r){t in n.attributeNames&&o.fatalError("Attribute "+t+" redefined"),n.addValue(t,e,r)}for(var s,l=++e,u=0;;){var c=t.charAt(l);switch(c){case"=":if(1===u)s=t.slice(e,l),u=3;else{if(2!==u)throw new Error("attribute equal must after attrName");u=3}break;case"'":case'"':if(3===u||1===u){if(1===u&&(o.warning('attribute value must after "="'),s=t.slice(e,l)),e=l+1,!((l=t.indexOf(c,e))>0))throw new Error("attribute value no end '"+c+"' match");a(s,h=t.slice(e,l).replace(/&#?\w+;/g,i),e-1),u=5}else{if(4!=u)throw new Error('attribute value must after "="');a(s,h=t.slice(e,l).replace(/&#?\w+;/g,i),e),o.warning('attribute "'+s+'" missed start quot('+c+")!!"),e=l+1,u=5}break;case"/":switch(u){case 0:n.setTagName(t.slice(e,l));case 5:case 6:case 7:u=7,n.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),0==u&&n.setTagName(t.slice(e,l)),l;case">":switch(u){case 0:n.setTagName(t.slice(e,l));case 5:case 6:case 7:break;case 4:case 1:"/"===(h=t.slice(e,l)).slice(-1)&&(n.closed=!0,h=h.slice(0,-1));case 2:2===u&&(h=s),4==u?(o.warning('attribute "'+h+'" missed quot(")!'),a(s,h.replace(/&#?\w+;/g,i),e)):("http://www.w3.org/1999/xhtml"===r[""]&&h.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+h+'" missed value!! "'+h+'" instead!!'),a(h,h,e));break;case 3:throw new Error("attribute value missed!!")}return l;case"\x80":c=" ";default:if(c<=" ")switch(u){case 0:n.setTagName(t.slice(e,l)),u=6;break;case 1:s=t.slice(e,l),u=2;break;case 4:var h=t.slice(e,l).replace(/&#?\w+;/g,i);o.warning('attribute "'+h+'" missed quot(")!!'),a(s,h,e);case 5:u=6}else switch(u){case 2:n.tagName;"http://www.w3.org/1999/xhtml"===r[""]&&s.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+s+'" missed value!! "'+s+'" instead2!!'),a(s,s,e),e=l,u=1;break;case 5:o.warning('attribute space is required"'+s+'"!!');case 6:u=1,e=l;break;case 3:u=4,e=l;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function u(t,e,n){for(var r=t.tagName,i=null,o=t.length;o--;){var a=t[o],s=a.qName,l=a.value;if((p=s.indexOf(":"))>0)var u=a.prefix=s.slice(0,p),c=s.slice(p+1),h="xmlns"===u&&c;else c=s,u=null,h="xmlns"===s&&"";a.localName=c,!1!==h&&(null==i&&(i={},f(n,n={})),n[h]=i[h]=l,a.uri="http://www.w3.org/2000/xmlns/",e.startPrefixMapping(h,l))}for(o=t.length;o--;){(u=(a=t[o]).prefix)&&("xml"===u&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==u&&(a.uri=n[u||""]))}var p;(p=r.indexOf(":"))>0?(u=t.prefix=r.slice(0,p),c=t.localName=r.slice(p+1)):(u=null,c=t.localName=r);var d=t.uri=n[u||""];if(e.startElement(d,c,r,t),!t.closed)return t.currentNSMap=n,t.localNSMap=i,!0;if(e.endElement(d,c,r),i)for(u in i)e.endPrefixMapping(u)}function c(t,e,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var o=t.indexOf("</"+n+">",e),a=t.substring(e+1,o);if(/[&<]/.test(a))return/^script$/i.test(n)?(i.characters(a,0,a.length),o):(a=a.replace(/&#?\w+;/g,r),i.characters(a,0,a.length),o)}return e+1}function h(t,e,n,r){var i=r[n];return null==i&&((i=t.lastIndexOf("</"+n+">"))<e&&(i=t.lastIndexOf("</"+n)),r[n]=i),i<e}function f(t,e){for(var n in t)e[n]=t[n]}function p(t,e,n,r){if("-"===t.charAt(e+2))return"-"===t.charAt(e+3)?(i=t.indexOf("--\x3e",e+4))>e?(n.comment(t,e+4,i-e-4),i+3):(r.error("Unclosed comment"),-1):-1;if("CDATA["==t.substr(e+3,6)){var i=t.indexOf("]]>",e+9);return n.startCDATA(),n.characters(t,e+9,i-e-9),n.endCDATA(),i+3}var o=function(t,e){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;i.lastIndex=e,i.exec(t);for(;n=i.exec(t);)if(r.push(n),n[1])return r}(t,e),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var s=o[1][0],l=!1,u=!1;a>3&&(/^public$/i.test(o[2][0])?(l=o[3][0],u=a>4&&o[4][0]):/^system$/i.test(o[2][0])&&(u=o[3][0]));var c=o[a-1];return n.startDTD(s,l,u),n.endDTD(),c.index+c[0].length}return-1}function d(t,e,n){var r=t.indexOf("?>",e);if(r){var i=t.substring(e,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){i[0].length;return n.processingInstruction(i[1],i[2]),r+2}return-1}return-1}function m(){this.attributeNames={}}o.prototype=new Error,o.prototype.name=o.name,a.prototype={parse:function(t,e,n){var r=this.domBuilder;r.startDocument(),f(e,e={}),function(t,e,n,r,i){function a(t){if(t>65535){var e=55296+((t-=65536)>>10),n=56320+(1023&t);return String.fromCharCode(e,n)}return String.fromCharCode(t)}function f(t){var e=t.slice(1,-1);return e in n?n[e]:"#"===e.charAt(0)?a(parseInt(e.substr(1).replace("x","0x"))):(i.error("entity not found:"+t),t)}function g(e){if(e>S){var n=t.substring(S,e).replace(/&#?\w+;/g,f);b&&v(S),r.characters(n,0,e-S),S=e}}function v(e,n){for(;e>=_&&(n=x.exec(t));)y=n.index,_=y+n[0].length,b.lineNumber++;b.columnNumber=e-y+1}var y=0,_=0,x=/.*(?:\r\n?|\n)|.*$/g,b=r.locator,w=[{currentNSMap:e}],k={},S=0;for(;;){try{var E=t.indexOf("<",S);if(E<0){if(!t.substr(S).match(/^\s*$/)){var I=r.doc,C=I.createTextNode(t.substr(S));I.appendChild(C),r.currentElement=C}return}switch(E>S&&g(E),t.charAt(E+1)){case"/":var A=t.indexOf(">",E+3),P=t.substring(E+2,A),T=w.pop();A<0?(P=t.substring(E+2).replace(/[\s<].*/,""),i.error("end tag name: "+P+" is not complete:"+T.tagName),A=E+1+P.length):P.match(/\s</)&&(P=P.replace(/[\s<].*/,""),i.error("end tag name: "+P+" maybe not complete"),A=E+1+P.length);var M=T.localNSMap,L=T.tagName==P;if(L||T.tagName&&T.tagName.toLowerCase()==P.toLowerCase()){if(r.endElement(T.uri,T.localName,P),M)for(var R in M)r.endPrefixMapping(R);L||i.fatalError("end tag name: "+P+" is not match the current start tagName:"+T.tagName)}else w.push(T);A++;break;case"?":b&&v(E),A=d(t,E,r);break;case"!":b&&v(E),A=p(t,E,r,i);break;default:b&&v(E);var N=new m,O=w[w.length-1].currentNSMap,z=(A=l(t,E,N,O,f,i),N.length);if(!N.closed&&h(t,A,N.tagName,k)&&(N.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),b&&z){for(var D=s(b,{}),F=0;F<z;F++){var B=N[F];v(B.offset),B.locator=s(b,{})}r.locator=D,u(N,r,O)&&w.push(N),r.locator=b}else u(N,r,O)&&w.push(N);"http://www.w3.org/1999/xhtml"!==N.uri||N.closed?A++:A=c(t,A,N.tagName,f,r)}}catch(j){if(j instanceof o)throw j;i.error("element parse error: "+j),A=-1}A>S?S=A:g(Math.max(E,S)+1)}}(t,e,n,r,this.errorHandler),r.endDocument()}},m.prototype={setTagName:function(t){if(!i.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,n){if(!i.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:n}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}},e.XMLReader=a,e.ParseError=o},3772:function(t,e,n){"use strict";t.exports=n.p+"static/media/airplane-icon.79089079dc6fc91e51c3.png"},9521:function(){},9214:function(){},596:function(t,e,n){var r=n(9713).default,i=n(1506).default,o=n(9100).default,a=n(6525).default,s=n(9754).default,l=n(8585).default,u=n(8551).default,c=n(319).default,h=n(3038).default,f=n(3269).default,p=n(3913).default,d=n(4575).default,m=n(2205).default,g=n(9842).default,v=n(5957).default;t.exports=function(){"use strict";var t,e,n;function y(r,i){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",a={};t(a),n=i(a),"undefined"!==typeof window&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=i;else t=i}return y(["exports"],(function(t){var e=n;function n(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=r}function r(t,n,r,i){var o=new e(t,n,r,i);return function(t){return o.solve(t)}}n.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,r=0;r<8;r++){var i=this.sampleCurveX(n)-t;if(Math.abs(i)<e)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=i/o}var a=0,s=1;for(n=t,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-t)<e));r++)t>i?a=n:s=n,n=.5*(s-a)+a;return n},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var i=r(.25,.1,.25,1);function y(t,e,n){return Math.min(n,Math.max(e,t))}function _(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function x(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)t[s]=a[s]}return t}var b=1;function w(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}function k(t,e,n){var r={};for(var i in t)r[i]=e.call(n||this,t[i],i,t);return r}function S(t,e,n){var r={};for(var i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function E(t){return Array.isArray(t)?t.map(E):"object"==typeof t&&t?k(t,E):t}var I={};function C(t){I[t]||("undefined"!=typeof console&&console.warn(t),I[t]=!0)}function A(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function P(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],r+=((n=t[a]).x-e.x)*(e.y+n.y);return r}function T(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function M(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,n,r,i){var o=r||i;return e[n]=!o||o.toLowerCase(),""})),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}var L,R,N=null;function O(t){if(null==N){var e=t.navigator?t.navigator.userAgent:null;N=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return N}function z(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap}var D={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame:function(t){var e=requestAnimationFrame(t);return{cancel:function(){return cancelAnimationFrame(e)}}},getImageData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=window.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=t.width,n.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return L||(L=document.createElement("a")),L.href=t,L.href},hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==R&&(R=matchMedia("(prefers-reduced-motion: reduce)")),R.matches)}},F=B;function B(t,e){this.x=t,this.y=e}B.prototype={clone:function(){return new B(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},B.convert=function(t){return t instanceof B?t:Array.isArray(t)?new B(t[0],t[1]):t};var j,Z,U={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},V="mapbox-tiles",q=500,G=50;function W(){"undefined"==typeof caches||j||(j=caches.open(V))}var H,X,Y=1/0,$={supported:!1,testSupport:function(t){!K&&X&&(J?Q(t):H=t)}},K=!1,J=!1;function Q(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,X),t.isContextLost())return;$.supported=!0}catch(t){}t.deleteTexture(e),K=!0}"undefined"!=typeof document&&((X=document.createElement("img")).onload=function(){H&&Q(H),H=null,J=!0},X.onerror=function(){K=!0,H=null},X.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var tt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(tt);var et=function(t){m(n,t);var e=g(n);function n(t,r,i,o){var a;return d(this,n),(a=e.call(this,"AJAXError: ".concat(r," (").concat(t,"): ").concat(i))).status=t,a.statusText=r,a.url=i,a.body=o,a}return p(n)}(v(Error)),nt=T()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===window.location.protocol?window.parent:window).location.href};function rt(t,e){var n=new AbortController,r=new Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:nt(),signal:n.signal}),i=!1,o=!1;return"json"===t.type&&r.headers.set("Accept","application/json"),function(n,a,s){if(!o){var l=Date.now();fetch(r).then((function(n){return n.ok?function(n,a,s){("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then((function(t){o||(a&&s&&function(t,e,n){if(W(),j){var r={status:e.status,statusText:e.statusText,headers:new Headers};e.headers.forEach((function(t,e){return r.headers.set(e,t)}));var i=M(e.headers.get("Cache-Control")||"");i["no-store"]||(i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-n<42e4||function(t,e){if(void 0===Z)try{new Response(new ReadableStream),Z=!0}catch(t){Z=!1}Z?e(t.body):t.blob().then(e)}(e,(function(e){var n=new Response(e,r);W(),j&&j.then((function(e){return e.put(function(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}(t.url),n)})).catch((function(t){return C(t.message)}))})))}}(r,a,s),i=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((function(t){o||e(new Error(t.message))}))}(n,null,l):n.blob().then((function(r){return e(new et(n.status,n.statusText,t.url,r))}))})).catch((function(t){20!==t.code&&e(new Error(t.message))}))}}(),{cancel:function(){o=!0,i||n.abort()}}}var it=function(t,e){if(/:\/\//.test(t.url)&&!/^https?:|^file:/.test(t.url)){if(T()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e);if(!T()){var n=t.url.substring(0,t.url.indexOf("://"));return(U.REGISTERED_PROTOCOLS[n]||rt)(t,e)}}if(!(/^file:/.test(r=t.url)||/^file:/.test(nt())&&!/^\w+:/.test(r))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return rt(t,e);if(T()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var r;return function(t,e){var n=new XMLHttpRequest;for(var r in n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer"),t.headers)n.setRequestHeader(r,t.headers[r]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===t.type)try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else{var i=new Blob([n.response],{type:n.getResponseHeader("Content-Type")});e(new et(n.status,n.statusText,t.url,i))}},n.send(t.body),{cancel:function(){return n.abort()}}}(t,e)},ot=function(t,e){return it(x(t,{type:"arrayBuffer"}),e)};function at(t){var e=window.document.createElement("a");return e.href=t,e.protocol===window.document.location.protocol&&e.host===window.document.location.host}var st,lt,ut="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";st=[],lt=0;var ct=function t(e,n){if($.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),lt>=U.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:e,callback:n,cancelled:!1,cancel:function(){this.cancelled=!0}};return st.push(r),r}lt++;var i=!1,o=function(){if(!i)for(i=!0,lt--;st.length&&lt<U.MAX_PARALLEL_IMAGE_REQUESTS;){var e=st.shift(),n=e.requestParameters,r=e.callback;e.cancelled||(e.cancel=t(n,r).cancel)}},a=ot(e,(function(t,e,r,i){o(),t?n(t):e&&function(t,e){"function"==typeof createImageBitmap?function(t,e){var n=new Blob([new Uint8Array(t)],{type:"image/png"});createImageBitmap(n).then((function(t){e(null,t)})).catch((function(t){e(new Error("Could not load image because of ".concat(t.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}(t,e):function(t,e){var n=new Image;n.onload=function(){e(null,n),URL.revokeObjectURL(n.src),n.onload=null,window.requestAnimationFrame((function(){n.src=ut}))},n.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var r=new Blob([new Uint8Array(t)],{type:"image/png"});n.src=t.byteLength?URL.createObjectURL(r):ut}(t,e)}(e,(function(t,e){null!=t?n(t):null!=e&&n(null,e,{cacheControl:r,expires:i})}))}));return{cancel:function(){a.cancel(),o()}}};function ht(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function ft(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}var pt=p((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(this,t),x(this,n),this.type=e})),dt=function(t){m(n,t);var e=g(n);function n(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d(this,n),e.call(this,"error",x({error:t},r))}return p(n)}(pt),mt=function(){function t(){d(this,t)}return p(t,[{key:"on",value:function(t,e){return this._listeners=this._listeners||{},ht(t,e,this._listeners),this}},{key:"off",value:function(t,e){return ft(t,e,this._listeners),ft(t,e,this._oneTimeListeners),this}},{key:"once",value:function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},ht(t,e,this._oneTimeListeners),this}},{key:"fire",value:function(t,e){"string"==typeof t&&(t=new pt(t,e||{}));var n=t.type;if(this.listens(n)){t.target=this;var r,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[],o=f(i);try{for(o.s();!(r=o.n()).done;)r.value.call(this,t)}catch(h){o.e(h)}finally{o.f()}var a,s=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[],l=f(s);try{for(l.s();!(a=l.n()).done;){var u=a.value;ft(n,u,this._oneTimeListeners),u.call(this,t)}}catch(h){l.e(h)}finally{l.f()}var c=this._eventedParent;c&&(x(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),c.fire(t))}else t instanceof dt&&console.error(t.error);return this}},{key:"listens",value:function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}},{key:"setEventedParent",value:function(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}]),t}(),gt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},vt=p((function t(e,n,r,i){d(this,t),this.message=(e?"".concat(e,": "):"")+r,i&&(this.identifier=i),null!=n&&n.__line__&&(this.line=n.__line__)}));function yt(t){var e=t.value;return e?[new vt(t.key,e,"constants have been deprecated as of v8")]:[]}function _t(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)t[s]=a[s]}return t}function xt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function bt(t){if(Array.isArray(t))return t.map(bt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var n in t)e[n]=bt(t[n]);return e}return xt(t)}var wt=function(t){m(n,t);var e=g(n);function n(t,r){var i;return d(this,n),(i=e.call(this,r)).message=r,i.key=t,i}return p(n)}(v(Error)),kt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];d(this,t),this.parent=e,this.bindings={};var r,i=f(n);try{for(i.s();!(r=i.n()).done;){var o=h(r.value,2),a=o[0],s=o[1];this.bindings[a]=s}}catch(l){i.e(l)}finally{i.f()}}return p(t,[{key:"concat",value:function(e){return new t(this,e)}},{key:"get",value:function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error("".concat(t," not found in scope."))}},{key:"has",value:function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}]),t}(),St={kind:"null"},Et={kind:"number"},It={kind:"string"},Ct={kind:"boolean"},At={kind:"color"},Pt={kind:"object"},Tt={kind:"value"},Mt={kind:"collator"},Lt={kind:"formatted"},Rt={kind:"resolvedImage"};function Nt(t,e){return{kind:"array",itemType:t,N:e}}function Ot(t){if("array"===t.kind){var e=Ot(t.itemType);return"number"==typeof t.N?"array<".concat(e,", ").concat(t.N,">"):"value"===t.itemType.kind?"array":"array<".concat(e,">")}return t.kind}var zt=[St,Et,It,Ct,At,Lt,Pt,Nt(Tt),Rt];function Dt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Dt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind){var n,r=f(zt);try{for(r.s();!(n=r.n()).done;)if(!Dt(n.value,e))return null}catch(i){r.e(i)}finally{r.f()}}}return"Expected ".concat(Ot(t)," but found ").concat(Ot(e)," instead.")}function Ft(t,e){return e.some((function(e){return e.kind===t.kind}))}function Bt(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t}))}var jt,Zt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ut(t){return(t=Math.round(t))<0?0:t>255?255:t}function Vt(t){return Ut("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function qt(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function Gt(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{jt={}.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in Zt)return Zt[n].slice();if("#"===n[0])return 4===n.length?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var r=n.indexOf("("),i=n.indexOf(")");if(-1!==r&&i+1===n.length){var o=n.substr(0,r),a=n.substr(r+1,i-(r+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=qt(a.pop());case"rgb":return 3!==a.length?null:[Vt(a[0]),Vt(a[1]),Vt(a[2]),s];case"hsla":if(4!==a.length)return null;s=qt(a.pop());case"hsl":if(3!==a.length)return null;var l=(parseFloat(a[0])%360+360)%360/360,u=qt(a[1]),c=qt(a[2]),h=c<=.5?c*(u+1):c+u-c*u,f=2*c-h;return[Ut(255*Gt(f,h,l+1/3)),Ut(255*Gt(f,h,l)),Ut(255*Gt(f,h,l-1/3)),s];default:return null}}return null}}catch(t){}var Wt=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;d(this,t),this.r=e,this.g=n,this.b=r,this.a=i}return p(t,[{key:"toString",value:function(){var t=this.toArray(),e=h(t,4),n=e[0],r=e[1],i=e[2],o=e[3];return"rgba(".concat(Math.round(n),",").concat(Math.round(r),",").concat(Math.round(i),",").concat(o,")")}},{key:"toArray",value:function(){var t=this.r,e=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*n/r,r]}}],[{key:"parse",value:function(e){if(e){if(e instanceof t)return e;if("string"==typeof e){var n=jt(e);return n?new t(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]):void 0}}}}]),t}();Wt.black=new Wt(0,0,0,1),Wt.white=new Wt(1,1,1,1),Wt.transparent=new Wt(0,0,0,0),Wt.red=new Wt(1,0,0,1);var Ht=function(){function t(e,n,r){d(this,t),this.sensitivity=e?n?"variant":"case":n?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}return p(t,[{key:"compare",value:function(t,e){return this.collator.compare(t,e)}},{key:"resolvedLocale",value:function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}]),t}(),Xt=p((function t(e,n,r,i,o){d(this,t),this.text=e,this.image=n,this.scale=r,this.fontStack=i,this.textColor=o})),Yt=function(){function t(e){d(this,t),this.sections=e}return p(t,[{key:"isEmpty",value:function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))}},{key:"toString",value:function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")}},{key:"serialize",value:function(){var t,e=["format"],n=f(this.sections);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.image)e.push(["image",r.image.name]);else{e.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),r.textColor&&(i["text-color"]=["rgba"].concat(r.textColor.toArray())),e.push(i)}}}catch(o){n.e(o)}finally{n.f()}return e}}],[{key:"fromString",value:function(e){return new t([new Xt(e,null,null,null,null)])}},{key:"factory",value:function(e){return e instanceof t?e:t.fromString(e)}}]),t}(),$t=function(){function t(e){d(this,t),this.name=e.name,this.available=e.available}return p(t,[{key:"toString",value:function(){return this.name}},{key:"serialize",value:function(){return["image",this.name]}}],[{key:"fromString",value:function(e){return e?new t({name:e,available:!1}):null}}]),t}();function Kt(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value [".concat([t,e,n,r].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function Jt(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Wt)return!0;if(t instanceof Ht)return!0;if(t instanceof Yt)return!0;if(t instanceof $t)return!0;if(Array.isArray(t)){var e,n=f(t);try{for(n.s();!(e=n.n()).done;)if(!Jt(e.value))return!1}catch(i){n.e(i)}finally{n.f()}return!0}if("object"==typeof t){for(var r in t)if(!Jt(t[r]))return!1;return!0}return!1}function Qt(t){if(null===t)return St;if("string"==typeof t)return It;if("boolean"==typeof t)return Ct;if("number"==typeof t)return Et;if(t instanceof Wt)return At;if(t instanceof Ht)return Mt;if(t instanceof Yt)return Lt;if(t instanceof $t)return Rt;if(Array.isArray(t)){var e,n,r=t.length,i=f(t);try{for(i.s();!(n=i.n()).done;){var o=Qt(n.value);if(e){if(e===o)continue;e=Tt;break}e=o}}catch(a){i.e(a)}finally{i.f()}return Nt(e||Tt,r)}return Pt}function te(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Wt||t instanceof Yt||t instanceof $t?t.toString():JSON.stringify(t)}var ee=function(){function t(e,n){d(this,t),this.type=e,this.value=n}return p(t,[{key:"evaluate",value:function(){return this.value}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Wt?["rgba"].concat(this.value.toArray()):this.value instanceof Yt?this.value.serialize():this.value}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("'literal' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(!Jt(e[1]))return n.error("invalid value");var r=e[1],i=Qt(r),o=n.expectedType;return"array"!==i.kind||0!==i.N||!o||"array"!==o.kind||"number"==typeof o.N&&0!==o.N||(i=o),new t(i,r)}}]),t}(),ne=function(){function t(e){d(this,t),this.name="ExpressionEvaluationError",this.message=e}return p(t,[{key:"toJSON",value:function(){return this.message}}]),t}(),re={string:It,number:Et,boolean:Ct,object:Pt},ie=function(){function t(e,n){d(this,t),this.type=e,this.args=n}return p(t,[{key:"evaluate",value:function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!Dt(this.type,Qt(n)))return n;if(e===this.args.length-1)throw new ne("Expected value to be of type ".concat(Ot(this.type),", but found ").concat(Ot(Qt(n))," instead."))}return null}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){var t=this.type,e=[t.kind];if("array"===t.kind){var n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map((function(t){return t.serialize()})))}}],[{key:"parse",value:function(e,n){if(e.length<2)return n.error("Expected at least one argument.");var r,i=1,o=e[0];if("array"===o){var a,s;if(e.length>2){var l=e[1];if("string"!=typeof l||!(l in re)||"object"===l)return n.error('The item type argument of "array" must be one of string, number, boolean',1);a=re[l],i++}else a=Tt;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return n.error('The length argument to "array" must be a positive integer literal',2);s=e[2],i++}r=Nt(a,s)}else r=re[o];for(var u=[];i<e.length;i++){var c=n.parse(e[i],i,Tt);if(!c)return null;u.push(c)}return new t(r,u)}}]),t}(),oe=function(){function t(e){d(this,t),this.type=Lt,this.sections=e}return p(t,[{key:"evaluate",value:function(t){return new Yt(this.sections.map((function(e){var n=e.content.evaluate(t);return Qt(n)===Rt?new Xt("",n,null,null,null):new Xt(te(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}},{key:"eachChild",value:function(t){var e,n=f(this.sections);try{for(n.s();!(e=n.n()).done;){var r=e.value;t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}}catch(i){n.e(i)}finally{n.f()}}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t,e=["format"],n=f(this.sections);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.push(r.content.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),e.push(i)}}catch(o){n.e(o)}finally{n.f()}return e}}],[{key:"parse",value:function(e,n){if(e.length<2)return n.error("Expected at least one argument.");var r=e[1];if(!Array.isArray(r)&&"object"==typeof r)return n.error("First argument must be an image or text section.");for(var i=[],o=!1,a=1;a<=e.length-1;++a){var s=e[a];if(o&&"object"==typeof s&&!Array.isArray(s)){o=!1;var l=null;if(s["font-scale"]&&!(l=n.parse(s["font-scale"],1,Et)))return null;var u=null;if(s["text-font"]&&!(u=n.parse(s["text-font"],1,Nt(It))))return null;var c=null;if(s["text-color"]&&!(c=n.parse(s["text-color"],1,At)))return null;var h=i[i.length-1];h.scale=l,h.font=u,h.textColor=c}else{var f=n.parse(e[a],1,Tt);if(!f)return null;var p=f.type.kind;if("string"!==p&&"value"!==p&&"null"!==p&&"resolvedImage"!==p)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,i.push({content:f,scale:null,font:null,textColor:null})}}return new t(i)}}]),t}(),ae=function(){function t(e){d(this,t),this.type=Rt,this.input=e}return p(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t),n=$t.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}},{key:"eachChild",value:function(t){t(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["image",this.input.serialize()]}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("Expected two arguments.");var r=n.parse(e[1],1,It);return r?new t(r):n.error("No image name provided.")}}]),t}(),se={"to-boolean":Ct,"to-color":At,"to-number":Et,"to-string":It},le=function(){function t(e,n){d(this,t),this.type=e,this.args=n}return p(t,[{key:"evaluate",value:function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){var e,n,r,i=f(this.args);try{for(i.s();!(r=i.n()).done;){if(e=r.value.evaluate(t),n=null,e instanceof Wt)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value ".concat(JSON.stringify(e),": expected an array containing either three or four numeric values."):Kt(e[0],e[1],e[2],e[3])))return new Wt(e[0]/255,e[1]/255,e[2]/255,e[3])}}catch(c){i.e(c)}finally{i.f()}throw new ne(n||"Could not parse color from value '".concat("string"==typeof e?e:String(JSON.stringify(e)),"'"))}if("number"===this.type.kind){var a,s=null,l=f(this.args);try{for(l.s();!(a=l.n()).done;){if(null===(s=a.value.evaluate(t)))return 0;var u=Number(s);if(!isNaN(u))return u}}catch(c){l.e(c)}finally{l.f()}throw new ne("Could not convert ".concat(JSON.stringify(s)," to number."))}return"formatted"===this.type.kind?Yt.fromString(te(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?$t.fromString(te(this.args[0].evaluate(t))):te(this.args[0].evaluate(t))}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){if("formatted"===this.type.kind)return new oe([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ae(this.args[0]).serialize();var t=["to-".concat(this.type.kind)];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,n){if(e.length<2)return n.error("Expected at least one argument.");var r=e[0];if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return n.error("Expected one argument.");for(var i=se[r],o=[],a=1;a<e.length;a++){var s=n.parse(e[a],a,Tt);if(!s)return null;o.push(s)}return new t(i,o)}}]),t}(),ue=["Unknown","Point","LineString","Polygon"],ce=function(){function t(){d(this,t),this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}return p(t,[{key:"id",value:function(){return this.feature&&"id"in this.feature?this.feature.id:null}},{key:"geometryType",value:function(){return this.feature?"number"==typeof this.feature.type?ue[this.feature.type]:this.feature.type:null}},{key:"geometry",value:function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}},{key:"canonicalID",value:function(){return this.canonical}},{key:"properties",value:function(){return this.feature&&this.feature.properties||{}}},{key:"parseColor",value:function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Wt.parse(t)),e}}]),t}(),he=function(){function t(e,n,r,i){d(this,t),this.name=e,this.type=n,this._evaluate=r,this.args=i}return p(t,[{key:"evaluate",value:function(t){return this._evaluate(t,this.args)}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))}}],[{key:"parse",value:function(e,n){var r,i=e[0],o=t.definitions[i];if(!o)return n.error('Unknown expression "'.concat(i,'". If you wanted a literal array, use ["literal", [...]].'),0);var a,s=Array.isArray(o)?o[0]:o.type,l=Array.isArray(o)?[[o[1],o[2]]]:o.overloads,u=l.filter((function(t){var n=h(t,1)[0];return!Array.isArray(n)||n.length===e.length-1})),p=null,d=f(u);try{for(d.s();!(a=d.n()).done;){var m=h(a.value,2),g=m[0],v=m[1];p=new Ne(n.registry,n.path,null,n.scope);for(var y=[],_=!1,x=1;x<e.length;x++){var b=e[x],w=Array.isArray(g)?g[x-1]:g.type,k=p.parse(b,1+y.length,w);if(!k){_=!0;break}y.push(k)}if(!_)if(Array.isArray(g)&&g.length!==y.length)p.error("Expected ".concat(g.length," arguments, but found ").concat(y.length," instead."));else{for(var S=0;S<y.length;S++){var E=Array.isArray(g)?g[S]:g.type,I=y[S];p.concat(S+1).checkSubtype(E,I.type)}if(0===p.errors.length)return new t(i,s,v,y)}}}catch(M){d.e(M)}finally{d.f()}if(1===u.length)(r=n.errors).push.apply(r,c(p.errors));else{for(var C=(u.length?u:l).map((function(t){var e;return e=h(t,1)[0],Array.isArray(e)?"(".concat(e.map(Ot).join(", "),")"):"(".concat(Ot(e.type),"...)")})).join(" | "),A=[],P=1;P<e.length;P++){var T=n.parse(e[P],1+A.length);if(!T)return null;A.push(Ot(T.type))}n.error("Expected arguments of type ".concat(C,", but found (").concat(A.join(", "),") instead."))}return null}},{key:"register",value:function(e,n){for(var r in t.definitions=n,n)e[r]=t}}]),t}(),fe=function(){function t(e,n,r){d(this,t),this.type=Mt,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=n}return p(t,[{key:"evaluate",value:function(t){return new Ht(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}},{key:"eachChild",value:function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("Expected one argument.");var r=e[1];if("object"!=typeof r||Array.isArray(r))return n.error("Collator options argument must be an object.");var i=n.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,Ct);if(!i)return null;var o=n.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,Ct);if(!o)return null;var a=null;return r.locale&&!(a=n.parse(r.locale,1,It))?null:new t(i,o,a)}}]),t}(),pe=8192;function de(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function me(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function ge(t,e){var n=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return[Math.round(n*i*pe),Math.round(r*i*pe)]}function ve(t,e,n){var r=t[0]-e[0],i=t[1]-e[1],o=t[0]-n[0],a=t[1]-n[1];return r*a-o*i==0&&r*o<=0&&i*a<=0}function ye(t,e){for(var n,r,i,o=!1,a=0,s=e.length;a<s;a++)for(var l=e[a],u=0,c=l.length;u<c-1;u++){if(ve(t,l[u],l[u+1]))return!1;(r=l[u])[1]>(n=t)[1]!=(i=l[u+1])[1]>n[1]&&n[0]<(i[0]-r[0])*(n[1]-r[1])/(i[1]-r[1])+r[0]&&(o=!o)}return o}function _e(t,e){for(var n=0;n<e.length;n++)if(ye(t,e[n]))return!0;return!1}function xe(t,e,n,r){var i=r[0]-n[0],o=r[1]-n[1],a=(t[0]-n[0])*o-i*(t[1]-n[1]),s=(e[0]-n[0])*o-i*(e[1]-n[1]);return a>0&&s<0||a<0&&s>0}function be(t,e,n){var r,i,o,a,s,l,u,c=f(n);try{for(c.s();!(r=c.n()).done;)for(var h=r.value,p=0;p<h.length-1;++p)if(0!=(l=[(s=h[p+1])[0]-(a=h[p])[0],s[1]-a[1]])[0]*(u=[(o=e)[0]-(i=t)[0],o[1]-i[1]])[1]-l[1]*u[0]&&xe(i,o,a,s)&&xe(a,s,i,o))return!0}catch(d){c.e(d)}finally{c.f()}return!1}function we(t,e){for(var n=0;n<t.length;++n)if(!ye(t[n],e))return!1;for(var r=0;r<t.length-1;++r)if(be(t[r],t[r+1],e))return!1;return!0}function ke(t,e){for(var n=0;n<e.length;n++)if(we(t,e[n]))return!0;return!1}function Se(t,e,n){for(var r=[],i=0;i<t.length;i++){for(var o=[],a=0;a<t[i].length;a++){var s=ge(t[i][a],n);de(e,s),o.push(s)}r.push(o)}return r}function Ee(t,e,n){for(var r=[],i=0;i<t.length;i++){var o=Se(t[i],e,n);r.push(o)}return r}function Ie(t,e,n,r){if(t[0]<n[0]||t[0]>n[2]){var i=.5*r,o=t[0]-n[0]>i?-r:n[0]-t[0]>i?r:0;0===o&&(o=t[0]-n[2]>i?-r:n[2]-t[0]>i?r:0),t[0]+=o}de(e,t)}function Ce(t,e,n,r){var i,o=Math.pow(2,r.z)*pe,a=[r.x*pe,r.y*pe],s=[],l=f(t);try{for(l.s();!(i=l.n()).done;){var u,c=i.value,h=f(c);try{for(h.s();!(u=h.n()).done;){var p=u.value,d=[p.x+a[0],p.y+a[1]];Ie(d,e,n,o),s.push(d)}}catch(m){h.e(m)}finally{h.f()}}}catch(m){l.e(m)}finally{l.f()}return s}function Ae(t,e,n,r){var i,o,a=Math.pow(2,r.z)*pe,s=[r.x*pe,r.y*pe],l=[],u=f(t);try{for(u.s();!(i=u.n()).done;){var c,h=i.value,p=[],d=f(h);try{for(d.s();!(c=d.n()).done;){var m=c.value,g=[m.x+s[0],m.y+s[1]];de(e,g),p.push(g)}}catch(w){d.e(w)}finally{d.f()}l.push(p)}}catch(w){u.e(w)}finally{u.f()}if(e[2]-e[0]<=a/2){(o=e)[0]=o[1]=1/0,o[2]=o[3]=-1/0;var v,y=f(l);try{for(y.s();!(v=y.n()).done;){var _,x=v.value,b=f(x);try{for(b.s();!(_=b.n()).done;)Ie(_.value,e,n,a)}catch(w){b.e(w)}finally{b.f()}}}catch(w){y.e(w)}finally{y.f()}}return l}var Pe=function(){function t(e,n){d(this,t),this.type=Ct,this.geojson=e,this.geometries=n}return p(t,[{key:"evaluate",value:function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var o=Se(e.coordinates,r,i),a=Ce(t.geometry(),n,r,i);if(!me(n,r))return!1;var s,l=f(a);try{for(l.s();!(s=l.n()).done;)if(!ye(s.value,o))return!1}catch(d){l.e(d)}finally{l.f()}}if("MultiPolygon"===e.type){var u=Ee(e.coordinates,r,i),c=Ce(t.geometry(),n,r,i);if(!me(n,r))return!1;var h,p=f(c);try{for(p.s();!(h=p.n()).done;)if(!_e(h.value,u))return!1}catch(d){p.e(d)}finally{p.f()}}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var o=Se(e.coordinates,r,i),a=Ae(t.geometry(),n,r,i);if(!me(n,r))return!1;var s,l=f(a);try{for(l.s();!(s=l.n()).done;)if(!we(s.value,o))return!1}catch(d){l.e(d)}finally{l.f()}}if("MultiPolygon"===e.type){var u=Ee(e.coordinates,r,i),c=Ae(t.geometry(),n,r,i);if(!me(n,r))return!1;var h,p=f(c);try{for(p.s();!(h=p.n()).done;)if(!ke(h.value,u))return!1}catch(d){p.e(d)}finally{p.f()}}return!0}(t,this.geometries)}return!1}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["within",this.geojson]}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("'within' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(Jt(e[1])){var r=e[1];if("FeatureCollection"===r.type)for(var i=0;i<r.features.length;++i){var o=r.features[i].geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new t(r,r.features[i].geometry)}else if("Feature"===r.type){var a=r.geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new t(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new t(r,r)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}}]),t}();function Te(t){if(t instanceof he){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Pe)return!1;var e=!0;return t.eachChild((function(t){e&&!Te(t)&&(e=!1)})),e}function Me(t){if(t instanceof he&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!Me(t)&&(e=!1)})),e}function Le(t,e){if(t instanceof he&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild((function(t){n&&!Le(t,e)&&(n=!1)})),n}var Re=function(){function t(e,n){d(this,t),this.type=n.type,this.name=e,this.boundExpression=n}return p(t,[{key:"evaluate",value:function(t){return this.boundExpression.evaluate(t)}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["var",this.name]}}],[{key:"parse",value:function(e,n){if(2!==e.length||"string"!=typeof e[1])return n.error("'var' expression requires exactly one string literal argument.");var r=e[1];return n.scope.has(r)?new t(r,n.scope.get(r)):n.error('Unknown variable "'.concat(r,'". Make sure "').concat(r,'" has been bound in an enclosing "let" expression before using it.'),1)}}]),t}(),Ne=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new kt,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];d(this,t),this.registry=e,this.path=n,this.key=n.map((function(t){return"[".concat(t,"]")})).join(""),this.scope=i,this.errors=o,this.expectedType=r}return p(t,[{key:"parse",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)}},{key:"_parse",value:function(t,e){function n(t,e,n){return"assert"===n?new ie(e,[t]):"coerce"===n?new le(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found ".concat(typeof r,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;var i=this.registry[r];if(i){var o=i.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=n(o,a,e.typeAnnotation||"coerce");else o=n(o,a,e.typeAnnotation||"assert")}if(!(o instanceof ee)&&"resolvedImage"!==o.type.kind&&Oe(o)){var l=new ce;try{o=new ee(o.type,o.evaluate(l))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'.concat(r,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof t," instead."))}},{key:"concat",value:function(e,n,r){var i="number"==typeof e?this.path.concat(e):this.path,o=r?this.scope.concat(r):this.scope;return new t(this.registry,i,n||null,o,this.errors)}},{key:"error",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i="".concat(this.key).concat(n.map((function(t){return"[".concat(t,"]")})).join(""));this.errors.push(new wt(i,t))}},{key:"checkSubtype",value:function(t,e){var n=Dt(t,e);return n&&this.error(n),n}}]),t}();function Oe(t){if(t instanceof Re)return Oe(t.boundExpression);if(t instanceof he&&"error"===t.name)return!1;if(t instanceof fe)return!1;if(t instanceof Pe)return!1;var e=t instanceof le||t instanceof ie,n=!0;return t.eachChild((function(t){n=e?n&&Oe(t):n&&t instanceof ee})),!!n&&Te(t)&&Le(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ze(t,e){for(var n,r,i=t.length-1,o=0,a=i,s=0;o<=a;)if(n=t[s=Math.floor((o+a)/2)],r=t[s+1],n<=e){if(s===i||e<r)return s;o=s+1}else{if(!(n>e))throw new ne("Input is not a number.");a=s-1}return 0}var De=function(){function t(e,n,r){d(this,t),this.type=e,this.input=n,this.labels=[],this.outputs=[];var i,o=f(r);try{for(o.s();!(i=o.n()).done;){var a=h(i.value,2),s=a[0],l=a[1];this.labels.push(s),this.outputs.push(l)}}catch(u){o.e(u)}finally{o.f()}}return p(t,[{key:"evaluate",value:function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[ze(e,r)].evaluate(t)}},{key:"eachChild",value:function(t){t(this.input);var e,n=f(this.outputs);try{for(n.s();!(e=n.n()).done;)t(e.value)}catch(r){n.e(r)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}],[{key:"parse",value:function(e,n){if(e.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");var r=n.parse(e[1],1,Et);if(!r)return null;var i=[],o=null;n.expectedType&&"value"!==n.expectedType.kind&&(o=n.expectedType);for(var a=1;a<e.length;a+=2){var s=1===a?-1/0:e[a],l=e[a+1],u=a,c=a+1;if("number"!=typeof s)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(i.length&&i[i.length-1][0]>=s)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var h=n.parse(l,c,o);if(!h)return null;o=o||h.type,i.push([s,h])}return new t(o,r,i)}}]),t}();function Fe(t,e,n){return t*(1-n)+e*n}var Be=Object.freeze({__proto__:null,number:Fe,color:function(t,e,n){return new Wt(Fe(t.r,e.r,n),Fe(t.g,e.g,n),Fe(t.b,e.b,n),Fe(t.a,e.a,n))},array:function(t,e,n){return t.map((function(t,r){return Fe(t,e[r],n)}))}}),je=.95047,Ze=1.08883,Ue=4/29,Ve=6/29,qe=3*Ve*Ve,Ge=Math.PI/180,We=180/Math.PI;function He(t){return t>.008856451679035631?Math.pow(t,1/3):t/qe+Ue}function Xe(t){return t>Ve?t*t*t:qe*(t-Ue)}function Ye(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function $e(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ke(t){var e=$e(t.r),n=$e(t.g),r=$e(t.b),i=He((.4124564*e+.3575761*n+.1804375*r)/je),o=He((.2126729*e+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-He((.0193339*e+.119192*n+.9503041*r)/Ze)),alpha:t.a}}function Je(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*Xe(e),n=je*Xe(n),r=Ze*Xe(r),new Wt(Ye(3.2404542*n-1.5371385*e-.4985314*r),Ye(-.969266*n+1.8760108*e+.041556*r),Ye(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function Qe(t,e,n){var r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}var tn={forward:Ke,reverse:Je,interpolate:function(t,e,n){return{l:Fe(t.l,e.l,n),a:Fe(t.a,e.a,n),b:Fe(t.b,e.b,n),alpha:Fe(t.alpha,e.alpha,n)}}},en={forward:function(t){var e=Ke(t),n=e.l,r=e.a,i=e.b,o=Math.atan2(i,r)*We;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:t.a}},reverse:function(t){var e=t.h*Ge,n=t.c;return Je({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:Qe(t.h,e.h,n),c:Fe(t.c,e.c,n),l:Fe(t.l,e.l,n),alpha:Fe(t.alpha,e.alpha,n)}}},nn=Object.freeze({__proto__:null,lab:tn,hcl:en}),rn=function(){function t(e,n,r,i,o){d(this,t),this.type=e,this.operator=n,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];var a,s=f(o);try{for(s.s();!(a=s.n()).done;){var l=h(a.value,2),u=l[0],c=l[1];this.labels.push(u),this.outputs.push(c)}}catch(p){s.e(p)}finally{s.f()}}return p(t,[{key:"evaluate",value:function(e){var n=this.labels,r=this.outputs;if(1===n.length)return r[0].evaluate(e);var i=this.input.evaluate(e);if(i<=n[0])return r[0].evaluate(e);var o=n.length;if(i>=n[o-1])return r[o-1].evaluate(e);var a=ze(n,i),s=t.interpolationFactor(this.interpolation,i,n[a],n[a+1]),l=r[a].evaluate(e),u=r[a+1].evaluate(e);return"interpolate"===this.operator?Be[this.type.kind.toLowerCase()](l,u,s):"interpolate-hcl"===this.operator?en.reverse(en.interpolate(en.forward(l),en.forward(u),s)):tn.reverse(tn.interpolate(tn.forward(l),tn.forward(u),s))}},{key:"eachChild",value:function(t){t(this.input);var e,n=f(this.outputs);try{for(n.s();!(e=n.n()).done;)t(e.value)}catch(r){n.e(r)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e}}],[{key:"interpolationFactor",value:function(t,n,r,i){var o=0;if("exponential"===t.name)o=on(n,t.base,r,i);else if("linear"===t.name)o=on(n,1,r,i);else if("cubic-bezier"===t.name){var a=t.controlPoints;o=new e(a[0],a[1],a[2],a[3]).solve(on(n,1,r,i))}return o}},{key:"parse",value:function(e,n){var r=u(e),i=r[0],o=r[1],a=r[2],s=r.slice(3);if(!Array.isArray(o)||0===o.length)return n.error("Expected an interpolation type expression.",1);if("linear"===o[0])o={name:"linear"};else if("exponential"===o[0]){var l=o[1];if("number"!=typeof l)return n.error("Exponential interpolation requires a numeric base.",1,1);o={name:"exponential",base:l}}else{if("cubic-bezier"!==o[0])return n.error("Unknown interpolation type ".concat(String(o[0])),1,0);var c=o.slice(1);if(4!==c.length||c.some((function(t){return"number"!=typeof t||t<0||t>1})))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);o={name:"cubic-bezier",controlPoints:c}}if(e.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(!(a=n.parse(a,2,Et)))return null;var h=[],f=null;"interpolate-hcl"===i||"interpolate-lab"===i?f=At:n.expectedType&&"value"!==n.expectedType.kind&&(f=n.expectedType);for(var p=0;p<s.length;p+=2){var d=s[p],m=s[p+1],g=p+3,v=p+4;if("number"!=typeof d)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',g);if(h.length&&h[h.length-1][0]>=d)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',g);var y=n.parse(m,v,f);if(!y)return null;f=f||y.type,h.push([d,y])}return"number"===f.kind||"color"===f.kind||"array"===f.kind&&"number"===f.itemType.kind&&"number"==typeof f.N?new t(f,i,o,a,h):n.error("Type ".concat(Ot(f)," is not interpolatable."))}}]),t}();function on(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}var an=function(){function t(e,n){d(this,t),this.type=e,this.args=n}return p(t,[{key:"evaluate",value:function(t){var e,n,r=null,i=0,o=f(this.args);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(i++,(r=a.evaluate(t))&&r instanceof $t&&!r.available&&(e||(e=r.name),r=null,i===this.args.length&&(r=e)),null!==r)break}}catch(s){o.e(s)}finally{o.f()}return r}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,n){if(e.length<2)return n.error("Expectected at least one argument.");var r=null,i=n.expectedType;i&&"value"!==i.kind&&(r=i);var o,a=[],s=f(e.slice(1));try{for(s.s();!(o=s.n()).done;){var l=o.value,u=n.parse(l,1+a.length,r,void 0,{typeAnnotation:"omit"});if(!u)return null;r=r||u.type,a.push(u)}}catch(h){s.e(h)}finally{s.f()}var c=i&&a.some((function(t){return Dt(i,t.type)}));return new t(c?Tt:r,a)}}]),t}(),sn=function(){function t(e,n){d(this,t),this.type=n.type,this.bindings=[].concat(e),this.result=n}return p(t,[{key:"evaluate",value:function(t){return this.result.evaluate(t)}},{key:"eachChild",value:function(t){var e,n=f(this.bindings);try{for(n.s();!(e=n.n()).done;)t(e.value[1])}catch(r){n.e(r)}finally{n.f()}t(this.result)}},{key:"outputDefined",value:function(){return this.result.outputDefined()}},{key:"serialize",value:function(){var t,e=["let"],n=f(this.bindings);try{for(n.s();!(t=n.n()).done;){var r=h(t.value,2),i=r[0],o=r[1];e.push(i,o.serialize())}}catch(a){n.e(a)}finally{n.f()}return e.push(this.result.serialize()),e}}],[{key:"parse",value:function(e,n){if(e.length<4)return n.error("Expected at least 3 arguments, but found ".concat(e.length-1," instead."));for(var r=[],i=1;i<e.length-1;i+=2){var o=e[i];if("string"!=typeof o)return n.error("Expected string, but found ".concat(typeof o," instead."),i);if(/[^a-zA-Z0-9_]/.test(o))return n.error("Variable names must contain only alphanumeric characters or '_'.",i);var a=n.parse(e[i+1],i+1);if(!a)return null;r.push([o,a])}var s=n.parse(e[e.length-1],e.length-1,n.expectedType,r);return s?new t(r,s):null}}]),t}(),ln=function(){function t(e,n,r){d(this,t),this.type=e,this.index=n,this.input=r}return p(t,[{key:"evaluate",value:function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new ne("Array index out of bounds: ".concat(e," < 0."));if(e>=n.length)throw new ne("Array index out of bounds: ".concat(e," > ").concat(n.length-1,"."));if(e!==Math.floor(e))throw new ne("Array index must be an integer, but found ".concat(e," instead."));return n[e]}},{key:"eachChild",value:function(t){t(this.index),t(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["at",this.index.serialize(),this.input.serialize()]}}],[{key:"parse",value:function(e,n){if(3!==e.length)return n.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1,Et),i=n.parse(e[2],2,Nt(n.expectedType||Tt));return r&&i?new t(i.type.itemType,r,i):null}}]),t}(),un=function(){function t(e,n){d(this,t),this.type=Ct,this.needle=e,this.haystack=n}return p(t,[{key:"evaluate",value:function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!Bt(e,["boolean","string","number","null"]))throw new ne("Expected first argument to be of type boolean, string, number or null, but found ".concat(Ot(Qt(e))," instead."));if(!Bt(n,["string","array"]))throw new ne("Expected second argument to be of type array or string, but found ".concat(Ot(Qt(n))," instead."));return n.indexOf(e)>=0}},{key:"eachChild",value:function(t){t(this.needle),t(this.haystack)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["in",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(e,n){if(3!==e.length)return n.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1,Tt),i=n.parse(e[2],2,Tt);return r&&i?Ft(r.type,[Ct,It,Et,St,Tt])?new t(r,i):n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Ot(r.type)," instead")):null}}]),t}(),cn=function(){function t(e,n,r){d(this,t),this.type=Et,this.needle=e,this.haystack=n,this.fromIndex=r}return p(t,[{key:"evaluate",value:function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!Bt(e,["boolean","string","number","null"]))throw new ne("Expected first argument to be of type boolean, string, number or null, but found ".concat(Ot(Qt(e))," instead."));if(!Bt(n,["string","array"]))throw new ne("Expected second argument to be of type array or string, but found ".concat(Ot(Qt(n))," instead."));if(this.fromIndex){var r=this.fromIndex.evaluate(t);return n.indexOf(e,r)}return n.indexOf(e)}},{key:"eachChild",value:function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(e,n){if(e.length<=2||e.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1,Tt),i=n.parse(e[2],2,Tt);if(!r||!i)return null;if(!Ft(r.type,[Ct,It,Et,St,Tt]))return n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Ot(r.type)," instead"));if(4===e.length){var o=n.parse(e[3],3,Et);return o?new t(r,i,o):null}return new t(r,i)}}]),t}(),hn=function(){function t(e,n,r,i,o,a){d(this,t),this.inputType=e,this.type=n,this.input=r,this.cases=i,this.outputs=o,this.otherwise=a}return p(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t);return(Qt(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}},{key:"eachChild",value:function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var t,e=this,n=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),i=[],o={},a=f(r);try{for(a.s();!(t=a.n()).done;){var s=t.value,l=o[this.cases[s]];void 0===l?(o[this.cases[s]]=i.length,i.push([this.cases[s],[s]])):i[l][1].push(s)}}catch(v){a.e(v)}finally{a.f()}for(var u=function(t){return"number"===e.inputType.kind?Number(t):t},c=0,p=i;c<p.length;c++){var d=h(p[c],2),m=d[0],g=d[1];n.push(1===g.length?u(g[0]):g.map(u)),n.push(this.outputs[m].serialize())}return n.push(this.otherwise.serialize()),n}}],[{key:"parse",value:function(e,n){if(e.length<5)return n.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=1)return n.error("Expected an even number of arguments.");var r,i;n.expectedType&&"value"!==n.expectedType.kind&&(i=n.expectedType);for(var o={},a=[],s=2;s<e.length-1;s+=2){var l=e[s],u=e[s+1];Array.isArray(l)||(l=[l]);var c=n.concat(s);if(0===l.length)return c.error("Expected at least one branch label.");var h,p=f(l);try{for(p.s();!(h=p.n()).done;){var d=h.value;if("number"!=typeof d&&"string"!=typeof d)return c.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof d&&Math.floor(d)!==d)return c.error("Numeric branch labels must be integer values.");if(r){if(c.checkSubtype(r,Qt(d)))return null}else r=Qt(d);if(void 0!==o[String(d)])return c.error("Branch labels must be unique.");o[String(d)]=a.length}}catch(y){p.e(y)}finally{p.f()}var m=n.parse(u,s,i);if(!m)return null;i=i||m.type,a.push(m)}var g=n.parse(e[1],1,Tt);if(!g)return null;var v=n.parse(e[e.length-1],e.length-1,i);return v?"value"!==g.type.kind&&n.concat(1).checkSubtype(r,g.type)?null:new t(r,i,g,o,a,v):null}}]),t}(),fn=function(){function t(e,n,r){d(this,t),this.type=e,this.branches=n,this.otherwise=r}return p(t,[{key:"evaluate",value:function(t){var e,n=f(this.branches);try{for(n.s();!(e=n.n()).done;){var r=h(e.value,2),i=r[0],o=r[1];if(i.evaluate(t))return o.evaluate(t)}}catch(a){n.e(a)}finally{n.f()}return this.otherwise.evaluate(t)}},{key:"eachChild",value:function(t){var e,n=f(this.branches);try{for(n.s();!(e=n.n()).done;){var r=h(e.value,2),i=r[0],o=r[1];t(i),t(o)}}catch(a){n.e(a)}finally{n.f()}t(this.otherwise)}},{key:"outputDefined",value:function(){return this.branches.every((function(t){var e=h(t,2);return e[0],e[1].outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,n){if(e.length<4)return n.error("Expected at least 3 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=0)return n.error("Expected an odd number of arguments.");var r;n.expectedType&&"value"!==n.expectedType.kind&&(r=n.expectedType);for(var i=[],o=1;o<e.length-1;o+=2){var a=n.parse(e[o],o,Ct);if(!a)return null;var s=n.parse(e[o+1],o+1,r);if(!s)return null;i.push([a,s]),r=r||s.type}var l=n.parse(e[e.length-1],e.length-1,r);return l?new t(r,i,l):null}}]),t}(),pn=function(){function t(e,n,r,i){d(this,t),this.type=e,this.input=n,this.beginIndex=r,this.endIndex=i}return p(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!Bt(e,["string","array"]))throw new ne("Expected first argument to be of type array or string, but found ".concat(Ot(Qt(e))," instead."));if(this.endIndex){var r=this.endIndex.evaluate(t);return e.slice(n,r)}return e.slice(n)}},{key:"eachChild",value:function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}],[{key:"parse",value:function(e,n){if(e.length<=2||e.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1,Tt),i=n.parse(e[2],2,Et);if(!r||!i)return null;if(!Ft(r.type,[Nt(Tt),It,Tt]))return n.error("Expected first argument to be of type array or string, but found ".concat(Ot(r.type)," instead"));if(4===e.length){var o=n.parse(e[3],3,Et);return o?new t(r.type,r,i,o):null}return new t(r.type,r,i)}}]),t}();function dn(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function mn(t,e,n,r){return 0===r.compare(e,n)}function gn(t,e,n){var r="=="!==t&&"!="!==t;return function(){function i(t,e,n){d(this,i),this.type=Ct,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return p(i,[{key:"evaluate",value:function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=Qt(o),l=Qt(a);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new ne('Expected arguments for "'.concat(t,'" to be (string, string) or (number, number), but found (').concat(s.kind,", ").concat(l.kind,") instead."))}if(this.collator&&!r&&this.hasUntypedArgument){var u=Qt(o),c=Qt(a);if("string"!==u.kind||"string"!==c.kind)return e(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):e(i,o,a)}},{key:"eachChild",value:function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],o=e.parse(t[1],1,Tt);if(!o)return null;if(!dn(n,o.type))return e.concat(1).error('"'.concat(n,"\" comparisons are not supported for type '").concat(Ot(o.type),"'."));var a=e.parse(t[2],2,Tt);if(!a)return null;if(!dn(n,a.type))return e.concat(2).error('"'.concat(n,"\" comparisons are not supported for type '").concat(Ot(a.type),"'."));if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '".concat(Ot(o.type),"' and '").concat(Ot(a.type),"'."));r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new ie(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new ie(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,Mt)))return null}return new i(o,a,s)}}]),i}()}var vn=gn("==",(function(t,e,n){return e===n}),mn),yn=gn("!=",(function(t,e,n){return e!==n}),(function(t,e,n,r){return!mn(0,e,n,r)})),_n=gn("<",(function(t,e,n){return e<n}),(function(t,e,n,r){return r.compare(e,n)<0})),xn=gn(">",(function(t,e,n){return e>n}),(function(t,e,n,r){return r.compare(e,n)>0})),bn=gn("<=",(function(t,e,n){return e<=n}),(function(t,e,n,r){return r.compare(e,n)<=0})),wn=gn(">=",(function(t,e,n){return e>=n}),(function(t,e,n,r){return r.compare(e,n)>=0})),kn=function(){function t(e,n,r,i,o){d(this,t),this.type=It,this.number=e,this.locale=n,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=o}return p(t,[{key:"evaluate",value:function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}},{key:"eachChild",value:function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}],[{key:"parse",value:function(e,n){if(3!==e.length)return n.error("Expected two arguments.");var r=n.parse(e[1],1,Et);if(!r)return null;var i=e[2];if("object"!=typeof i||Array.isArray(i))return n.error("NumberFormat options argument must be an object.");var o=null;if(i.locale&&!(o=n.parse(i.locale,1,It)))return null;var a=null;if(i.currency&&!(a=n.parse(i.currency,1,It)))return null;var s=null;if(i["min-fraction-digits"]&&!(s=n.parse(i["min-fraction-digits"],1,Et)))return null;var l=null;return i["max-fraction-digits"]&&!(l=n.parse(i["max-fraction-digits"],1,Et))?null:new t(r,o,a,s,l)}}]),t}(),Sn=function(){function t(e){d(this,t),this.type=Et,this.input=e}return p(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ne("Expected value to be of type string or array, but found ".concat(Ot(Qt(e))," instead."))}},{key:"eachChild",value:function(t){t(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("Expected 1 argument, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?n.error("Expected argument of type string or array, but found ".concat(Ot(r.type)," instead.")):new t(r):null}}]),t}(),En={"==":vn,"!=":yn,">":xn,"<":_n,">=":wn,"<=":bn,array:ie,at:ln,boolean:ie,case:fn,coalesce:an,collator:fe,format:oe,image:ae,in:un,"index-of":cn,interpolate:rn,"interpolate-hcl":rn,"interpolate-lab":rn,length:Sn,let:sn,literal:ee,match:hn,number:ie,"number-format":kn,object:ie,slice:pn,step:De,string:ie,"to-boolean":le,"to-color":le,"to-number":le,"to-string":le,var:Re,within:Pe};function In(t,e){var n=h(e,4),r=n[0],i=n[1],o=n[2],a=n[3];r=r.evaluate(t),i=i.evaluate(t),o=o.evaluate(t);var s=a?a.evaluate(t):1,l=Kt(r,i,o,s);if(l)throw new ne(l);return new Wt(r/255*s,i/255*s,o/255*s,s)}function Cn(t,e){return t in e}function An(t,e){var n=e[t];return void 0===n?null:n}function Pn(t){return{type:t}}function Tn(t){return{result:"success",value:t}}function Mn(t){return{result:"error",value:t}}function Ln(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Rn(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Nn(t){return!!t.expression&&t.expression.interpolated}function On(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function zn(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Dn(t){return t}function Fn(t,e){var n,r,i,o="color"===e.type,a=t.stops&&"object"==typeof t.stops[0][0],s=a||!(a||void 0!==t.property),l=t.type||(Nn(e)?"exponential":"interval");if(o&&((t=_t({},t)).stops&&(t.stops=t.stops.map((function(t){return[t[0],Wt.parse(t[1])]}))),t.default=Wt.parse(t.default?t.default:e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!nn[t.colorSpace])throw new Error("Unknown color space: ".concat(t.colorSpace));if("exponential"===l)n=Un;else if("interval"===l)n=Zn;else if("categorical"===l){n=jn,r=Object.create(null);var u,c=f(t.stops);try{for(c.s();!(u=c.n()).done;){var h=u.value;r[h[0]]=h[1]}}catch(S){c.e(S)}finally{c.f()}i=typeof t.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'.concat(l,'"'));n=Vn}if(a){for(var p={},d=[],m=0;m<t.stops.length;m++){var g=t.stops[m],v=g[0].zoom;void 0===p[v]&&(p[v]={zoom:v,type:t.type,property:t.property,default:t.default,stops:[]},d.push(v)),p[v].stops.push([g[0].value,g[1]])}for(var y=[],_=0,x=d;_<x.length;_++){var b=x[_];y.push([p[b].zoom,Fn(p[b],e)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:rn.interpolationFactor.bind(void 0,w),zoomStops:y.map((function(t){return t[0]})),evaluate:function(n,r){var i=n.zoom;return Un({stops:y,base:t.base},e,i).evaluate(i,r)}}}if(s){var k="exponential"===l?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:rn.interpolationFactor.bind(void 0,k),zoomStops:t.stops.map((function(t){return t[0]})),evaluate:function(o){var a=o.zoom;return n(t,e,a,r,i)}}}return{kind:"source",evaluate:function(o,a){var s=a&&a.properties?a.properties[t.property]:void 0;return void 0===s?Bn(t.default,e.default):n(t,e,s,r,i)}}}function Bn(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function jn(t,e,n,r,i){return Bn(typeof n===i?r[n]:void 0,t.default,e.default)}function Zn(t,e,n){if("number"!==On(n))return Bn(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var i=ze(t.stops.map((function(t){return t[0]})),n);return t.stops[i][1]}function Un(t,e,n){var r=void 0!==t.base?t.base:1;if("number"!==On(n))return Bn(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var o=ze(t.stops.map((function(t){return t[0]})),n),a=function(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1],u=Be[e.type]||Dn;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=nn[t.colorSpace];u=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=s.evaluate.apply(void 0,e),i=l.evaluate.apply(void 0,e);if(void 0!==r&&void 0!==i)return u(r,i,a)}}:u(s,l,a)}function Vn(t,e,n){return"color"===e.type?n=Wt.parse(n):"formatted"===e.type?n=Yt.fromString(n.toString()):"resolvedImage"===e.type?n=$t.fromString(n.toString()):On(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),Bn(n,t.default,e.default)}he.register(En,{error:[{kind:"error"},[It],function(t,e){var n=h(e,1)[0];throw new ne(n.evaluate(t))}],typeof:[It,[Tt],function(t,e){return Ot(Qt(h(e,1)[0].evaluate(t)))}],"to-rgba":[Nt(Et,4),[At],function(t,e){return h(e,1)[0].evaluate(t).toArray()}],rgb:[At,[Et,Et,Et],In],rgba:[At,[Et,Et,Et,Et],In],has:{type:Ct,overloads:[[[It],function(t,e){return Cn(h(e,1)[0].evaluate(t),t.properties())}],[[It,Pt],function(t,e){var n=h(e,2),r=n[0],i=n[1];return Cn(r.evaluate(t),i.evaluate(t))}]]},get:{type:Tt,overloads:[[[It],function(t,e){return An(h(e,1)[0].evaluate(t),t.properties())}],[[It,Pt],function(t,e){var n=h(e,2),r=n[0],i=n[1];return An(r.evaluate(t),i.evaluate(t))}]]},"feature-state":[Tt,[It],function(t,e){return An(h(e,1)[0].evaluate(t),t.featureState||{})}],properties:[Pt,[],function(t){return t.properties()}],"geometry-type":[It,[],function(t){return t.geometryType()}],id:[Tt,[],function(t){return t.id()}],zoom:[Et,[],function(t){return t.globals.zoom}],"heatmap-density":[Et,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Et,[],function(t){return t.globals.lineProgress||0}],accumulated:[Tt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Et,Pn(Et),function(t,e){var n,r=0,i=f(e);try{for(i.s();!(n=i.n()).done;)r+=n.value.evaluate(t)}catch(o){i.e(o)}finally{i.f()}return r}],"*":[Et,Pn(Et),function(t,e){var n,r=1,i=f(e);try{for(i.s();!(n=i.n()).done;)r*=n.value.evaluate(t)}catch(o){i.e(o)}finally{i.f()}return r}],"-":{type:Et,overloads:[[[Et,Et],function(t,e){var n=h(e,2),r=n[0],i=n[1];return r.evaluate(t)-i.evaluate(t)}],[[Et],function(t,e){return-h(e,1)[0].evaluate(t)}]]},"/":[Et,[Et,Et],function(t,e){var n=h(e,2),r=n[0],i=n[1];return r.evaluate(t)/i.evaluate(t)}],"%":[Et,[Et,Et],function(t,e){var n=h(e,2),r=n[0],i=n[1];return r.evaluate(t)%i.evaluate(t)}],ln2:[Et,[],function(){return Math.LN2}],pi:[Et,[],function(){return Math.PI}],e:[Et,[],function(){return Math.E}],"^":[Et,[Et,Et],function(t,e){var n=h(e,2),r=n[0],i=n[1];return Math.pow(r.evaluate(t),i.evaluate(t))}],sqrt:[Et,[Et],function(t,e){var n=h(e,1)[0];return Math.sqrt(n.evaluate(t))}],log10:[Et,[Et],function(t,e){var n=h(e,1)[0];return Math.log(n.evaluate(t))/Math.LN10}],ln:[Et,[Et],function(t,e){var n=h(e,1)[0];return Math.log(n.evaluate(t))}],log2:[Et,[Et],function(t,e){var n=h(e,1)[0];return Math.log(n.evaluate(t))/Math.LN2}],sin:[Et,[Et],function(t,e){var n=h(e,1)[0];return Math.sin(n.evaluate(t))}],cos:[Et,[Et],function(t,e){var n=h(e,1)[0];return Math.cos(n.evaluate(t))}],tan:[Et,[Et],function(t,e){var n=h(e,1)[0];return Math.tan(n.evaluate(t))}],asin:[Et,[Et],function(t,e){var n=h(e,1)[0];return Math.asin(n.evaluate(t))}],acos:[Et,[Et],function(t,e){var n=h(e,1)[0];return Math.acos(n.evaluate(t))}],atan:[Et,[Et],function(t,e){var n=h(e,1)[0];return Math.atan(n.evaluate(t))}],min:[Et,Pn(Et),function(t,e){return Math.min.apply(Math,c(e.map((function(e){return e.evaluate(t)}))))}],max:[Et,Pn(Et),function(t,e){return Math.max.apply(Math,c(e.map((function(e){return e.evaluate(t)}))))}],abs:[Et,[Et],function(t,e){var n=h(e,1)[0];return Math.abs(n.evaluate(t))}],round:[Et,[Et],function(t,e){var n=h(e,1)[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[Et,[Et],function(t,e){var n=h(e,1)[0];return Math.floor(n.evaluate(t))}],ceil:[Et,[Et],function(t,e){var n=h(e,1)[0];return Math.ceil(n.evaluate(t))}],"filter-==":[Ct,[It,Tt],function(t,e){var n=h(e,2),r=n[0],i=n[1];return t.properties()[r.value]===i.value}],"filter-id-==":[Ct,[Tt],function(t,e){var n=h(e,1)[0];return t.id()===n.value}],"filter-type-==":[Ct,[It],function(t,e){var n=h(e,1)[0];return t.geometryType()===n.value}],"filter-<":[Ct,[It,Tt],function(t,e){var n=h(e,2),r=n[0],i=n[1],o=t.properties()[r.value],a=i.value;return typeof o==typeof a&&o<a}],"filter-id-<":[Ct,[Tt],function(t,e){var n=h(e,1)[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[Ct,[It,Tt],function(t,e){var n=h(e,2),r=n[0],i=n[1],o=t.properties()[r.value],a=i.value;return typeof o==typeof a&&o>a}],"filter-id->":[Ct,[Tt],function(t,e){var n=h(e,1)[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[Ct,[It,Tt],function(t,e){var n=h(e,2),r=n[0],i=n[1],o=t.properties()[r.value],a=i.value;return typeof o==typeof a&&o<=a}],"filter-id-<=":[Ct,[Tt],function(t,e){var n=h(e,1)[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[Ct,[It,Tt],function(t,e){var n=h(e,2),r=n[0],i=n[1],o=t.properties()[r.value],a=i.value;return typeof o==typeof a&&o>=a}],"filter-id->=":[Ct,[Tt],function(t,e){var n=h(e,1)[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[Ct,[Tt],function(t,e){return h(e,1)[0].value in t.properties()}],"filter-has-id":[Ct,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[Ct,[Nt(It)],function(t,e){return h(e,1)[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Ct,[Nt(Tt)],function(t,e){return h(e,1)[0].value.indexOf(t.id())>=0}],"filter-in-small":[Ct,[It,Nt(Tt)],function(t,e){var n=h(e,2),r=n[0];return n[1].value.indexOf(t.properties()[r.value])>=0}],"filter-in-large":[Ct,[It,Nt(Tt)],function(t,e){var n=h(e,2),r=n[0],i=n[1];return function(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[r.value],i.value,0,i.value.length-1)}],all:{type:Ct,overloads:[[[Ct,Ct],function(t,e){var n=h(e,2),r=n[0],i=n[1];return r.evaluate(t)&&i.evaluate(t)}],[Pn(Ct),function(t,e){var n,r=f(e);try{for(r.s();!(n=r.n()).done;)if(!n.value.evaluate(t))return!1}catch(i){r.e(i)}finally{r.f()}return!0}]]},any:{type:Ct,overloads:[[[Ct,Ct],function(t,e){var n=h(e,2),r=n[0],i=n[1];return r.evaluate(t)||i.evaluate(t)}],[Pn(Ct),function(t,e){var n,r=f(e);try{for(r.s();!(n=r.n()).done;)if(n.value.evaluate(t))return!0}catch(i){r.e(i)}finally{r.f()}return!1}]]},"!":[Ct,[Ct],function(t,e){return!h(e,1)[0].evaluate(t)}],"is-supported-script":[Ct,[It],function(t,e){var n=h(e,1)[0],r=t.globals&&t.globals.isSupportedScript;return!r||r(n.evaluate(t))}],upcase:[It,[It],function(t,e){return h(e,1)[0].evaluate(t).toUpperCase()}],downcase:[It,[It],function(t,e){return h(e,1)[0].evaluate(t).toLowerCase()}],concat:[It,Pn(Tt),function(t,e){return e.map((function(e){return te(e.evaluate(t))})).join("")}],"resolved-locale":[It,[Mt],function(t,e){return h(e,1)[0].evaluate(t).resolvedLocale()}]});var qn=function(){function t(e,n){d(this,t),this.expression=e,this._warningHistory={},this._evaluator=new ce,this._defaultValue=n?function(t){return"color"===t.type&&zn(t.default)?new Wt(0,0,0,0):"color"===t.type?Wt.parse(t.default)||null:void 0===t.default?null:t.default}(n):null,this._enumValues=n&&"enum"===n.type?n.values:null}return p(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,n,r,i,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}},{key:"evaluate",value:function(t,e,n,r,i,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new ne("Expected value to be one of ".concat(Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", "),", but found ").concat(JSON.stringify(a)," instead."));return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}]),t}();function Gn(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in En}function Wn(t,e){var n=new Ne(En,[],e?function(t){var e={color:At,string:It,number:Et,enum:It,boolean:Ct,formatted:Lt,resolvedImage:Rt};return"array"===t.type?Nt(e[t.value]||Tt,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?Tn(new qn(r,e)):Mn(n.errors)}var Hn=function(){function t(e,n){d(this,t),this.kind=e,this._styleExpression=n,this.isStateDependent="constant"!==e&&!Me(n.expression)}return p(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}},{key:"evaluate",value:function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}}]),t}(),Xn=function(){function t(e,n,r,i){d(this,t),this.kind=e,this.zoomStops=r,this._styleExpression=n,this.isStateDependent="camera"!==e&&!Me(n.expression),this.interpolationType=i}return p(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}},{key:"evaluate",value:function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}},{key:"interpolationFactor",value:function(t,e,n){return this.interpolationType?rn.interpolationFactor(this.interpolationType,t,e,n):0}}]),t}();function Yn(t,e){var n=Wn(t,e);if("error"===n.result)return n;var r=n.value.expression,i=Te(r);if(!i&&!Ln(e))return Mn([new wt("","data expressions not supported")]);var o=Le(r,["zoom"]);if(!o&&!Rn(e))return Mn([new wt("","zoom expressions not supported")]);var a=Kn(r);return a||o?a instanceof wt?Mn([a]):a instanceof rn&&!Nn(e)?Mn([new wt("",'"interpolate" expressions cannot be used with this property')]):Tn(a?new Xn(i?"camera":"composite",n.value,a.labels,a instanceof rn?a.interpolation:void 0):new Hn(i?"constant":"source",n.value)):Mn([new wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}var $n=function(){function t(e,n){d(this,t),this._parameters=e,this._specification=n,_t(this,Fn(this._parameters,this._specification))}return p(t,null,[{key:"deserialize",value:function(e){return new t(e._parameters,e._specification)}},{key:"serialize",value:function(t){return{_parameters:t._parameters,_specification:t._specification}}}]),t}();function Kn(t){var e=null;if(t instanceof sn)e=Kn(t.result);else if(t instanceof an){var n,r=f(t.args);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e=Kn(i))break}}catch(o){r.e(o)}finally{r.f()}}else(t instanceof De||t instanceof rn)&&t.input instanceof he&&"zoom"===t.input.name&&(e=t);return e instanceof wt||t.eachChild((function(t){var n=Kn(t);n instanceof wt?e=n:!e&&n?e=new wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new wt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function Jn(t){var e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],l=On(n);if("object"!==l)return[new vt(e,n,"object expected, ".concat(l," found"))];for(var u in n){var c=u.split(".")[0],h=r[c]||r["*"],f=void 0;if(i[c])f=i[c];else if(r[c])f=Er;else if(i["*"])f=i["*"];else{if(!r["*"]){s.push(new vt(e,n[u],'unknown property "'.concat(u,'"')));continue}f=Er}s=s.concat(f({key:(e?"".concat(e,"."):e)+u,value:n[u],valueSpec:h,style:o,styleSpec:a,object:n,objectKey:u},n))}for(var p in r)i[p]||r[p].required&&void 0===r[p].default&&void 0===n[p]&&s.push(new vt(e,n,'missing required property "'.concat(p,'"')));return s}function Qn(t){var e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||Er;if("array"!==On(e))return[new vt(o,e,"array expected, ".concat(On(e)," found"))];if(n.length&&e.length!==n.length)return[new vt(o,e,"array length ".concat(n.length," expected, length ").concat(e.length," found"))];if(n["min-length"]&&e.length<n["min-length"])return[new vt(o,e,"array length at least ".concat(n["min-length"]," expected, length ").concat(e.length," found"))];var s={type:n.value,values:n.values};i.$version<7&&(s.function=n.function),"object"===On(n.value)&&(s=n.value);for(var l=[],u=0;u<e.length;u++)l=l.concat(a({array:e,arrayIndex:u,value:e[u],valueSpec:s,style:r,styleSpec:i,key:"".concat(o,"[").concat(u,"]")}));return l}function tr(t){var e=t.key,n=t.value,r=t.valueSpec,i=On(n);return"number"===i&&n!=n&&(i="NaN"),"number"!==i?[new vt(e,n,"number expected, ".concat(i," found"))]:"minimum"in r&&n<r.minimum?[new vt(e,n,"".concat(n," is less than the minimum value ").concat(r.minimum))]:"maximum"in r&&n>r.maximum?[new vt(e,n,"".concat(n," is greater than the maximum value ").concat(r.maximum))]:[]}function er(t){var e,n,r,i=t.valueSpec,o=xt(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,l=!s,u="array"===On(t.value.stops)&&"array"===On(t.value.stops[0])&&"object"===On(t.value.stops[0][0]),c=Jn({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new vt(t.key,t.value,'identity function may not have a "stops" property')];var e=[],n=t.value;return e=e.concat(Qn({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===On(n)&&0===n.length&&e.push(new vt(t.key,n,"array must have at least one stop")),e},default:function(t){return Er({key:t.key,value:t.value,valueSpec:i,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&c.push(new vt(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||c.push(new vt(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!Nn(t.valueSpec)&&c.push(new vt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Ln(t.valueSpec)?c.push(new vt(t.key,t.value,"property functions not supported")):s&&!Rn(t.valueSpec)&&c.push(new vt(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!u||void 0!==t.value.property||c.push(new vt(t.key,t.value,'"property" property is required')),c;function h(t){var e=[],o=t.value,s=t.key;if("array"!==On(o))return[new vt(s,o,"array expected, ".concat(On(o)," found"))];if(2!==o.length)return[new vt(s,o,"array length 2 expected, length ".concat(o.length," found"))];if(u){if("object"!==On(o[0]))return[new vt(s,o,"object expected, ".concat(On(o[0])," found"))];if(void 0===o[0].zoom)return[new vt(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new vt(s,o,"object stop key must have value")];if(r&&r>xt(o[0].zoom))return[new vt(s,o[0].zoom,"stop zoom values must appear in ascending order")];xt(o[0].zoom)!==r&&(r=xt(o[0].zoom),n=void 0,a={}),e=e.concat(Jn({key:"".concat(s,"[0]"),value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:tr,value:f}}))}else e=e.concat(f({key:"".concat(s,"[0]"),value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return Gn(bt(o[1]))?e.concat([new vt("".concat(s,"[1]"),o[1],"expressions are not allowed in function stops.")]):e.concat(Er({key:"".concat(s,"[1]"),value:o[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function f(t,r){var s=On(t.value),l=xt(t.value),u=null!==t.value?t.value:r;if(e){if(s!==e)return[new vt(t.key,u,"".concat(s," stop domain type must match previous stop domain type ").concat(e))]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new vt(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var c="number expected, ".concat(s," found");return Ln(i)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new vt(t.key,u,c)]}return"categorical"!==o||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==o&&"number"===s&&void 0!==n&&l<n?[new vt(t.key,u,"stop domain values must appear in ascending order")]:(n=l,"categorical"===o&&l in a?[new vt(t.key,u,"stop domain values must be unique")]:(a[l]=!0,[])):[new vt(t.key,u,"integer expected, found ".concat(l))]}}function nr(t){var e=("property"===t.expressionContext?Yn:Wn)(bt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new vt("".concat(t.key).concat(e.key),t.value,e.message)}));var n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new vt(t.key,t.value,'Invalid data expression for "'.concat(t.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===t.expressionContext&&"layout"===t.propertyType&&!Me(n))return[new vt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!Me(n))return[new vt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Le(n,["zoom","feature-state"]))return[new vt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Te(n))return[new vt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function rr(t){var e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(xt(n))&&i.push(new vt(e,n,"expected one of [".concat(r.values.join(", "),"], ").concat(JSON.stringify(n)," found"))):-1===Object.keys(r.values).indexOf(xt(n))&&i.push(new vt(e,n,"expected one of [".concat(Object.keys(r.values).join(", "),"], ").concat(JSON.stringify(n)," found"))),i}function ir(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":var e,n=f(t.slice(1));try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!ir(r)&&"boolean"!=typeof r)return!1}}catch(i){n.e(i)}finally{n.f()}return!0;default:return!0}}var or={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ar(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};ir(t)||(t=ur(t));var e=Wn(t,or);if("error"===e.result)throw new Error(e.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));return{filter:function(t,n,r){return e.value.evaluate(t,n,{},r)},needGeometry:lr(t)}}function sr(t,e){return t<e?-1:t>e?1:0}function lr(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(var e=1;e<t.length;e++)if(lr(t[e]))return!0;return!1}function ur(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?cr(t[1],t[2],"=="):"!="===n?pr(cr(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?cr(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(ur))):"all"===n?["all"].concat(t.slice(1).map(ur)):"none"===n?["all"].concat(t.slice(1).map(ur).map(pr)):"in"===n?hr(t[1],t.slice(2)):"!in"===n?pr(hr(t[1],t.slice(2))):"has"===n?fr(t[1]):"!has"===n?pr(fr(t[1])):"within"!==n||t}function cr(t,e,n){switch(t){case"$type":return["filter-type-".concat(n),e];case"$id":return["filter-id-".concat(n),e];default:return["filter-".concat(n),t,e]}}function hr(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return typeof t!=typeof e[0]}))?["filter-in-large",t,["literal",e.sort(sr)]]:["filter-in-small",t,["literal",e]]}}function fr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function pr(t){return["!",t]}function dr(t){return ir(bt(t.value))?nr(_t({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):mr(t)}function mr(t){var e=t.value,n=t.key;if("array"!==On(e))return[new vt(n,e,"array expected, ".concat(On(e)," found"))];var r,i=t.styleSpec,o=[];if(e.length<1)return[new vt(n,e,"filter array must have at least 1 element")];switch(o=o.concat(rr({key:"".concat(n,"[0]"),value:e[0],valueSpec:i.filter_operator,style:t.style,styleSpec:t.styleSpec})),xt(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===xt(e[1])&&o.push(new vt(n,e,'"$type" cannot be use with operator "'.concat(e[0],'"')));case"==":case"!=":3!==e.length&&o.push(new vt(n,e,'filter array for operator "'.concat(e[0],'" must have 3 elements')));case"in":case"!in":e.length>=2&&"string"!==(r=On(e[1]))&&o.push(new vt("".concat(n,"[1]"),e[1],"string expected, ".concat(r," found")));for(var a=2;a<e.length;a++)r=On(e[a]),"$type"===xt(e[1])?o=o.concat(rr({key:"".concat(n,"[").concat(a,"]"),value:e[a],valueSpec:i.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&o.push(new vt("".concat(n,"[").concat(a,"]"),e[a],"string, number, or boolean expected, ".concat(r," found")));break;case"any":case"all":case"none":for(var s=1;s<e.length;s++)o=o.concat(mr({key:"".concat(n,"[").concat(s,"]"),value:e[s],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":r=On(e[1]),2!==e.length?o.push(new vt(n,e,'filter array for "'.concat(e[0],'" operator must have 2 elements'))):"string"!==r&&o.push(new vt("".concat(n,"[1]"),e[1],"string expected, ".concat(r," found")));break;case"within":r=On(e[1]),2!==e.length?o.push(new vt(n,e,'filter array for "'.concat(e[0],'" operator must have 2 elements'))):"object"!==r&&o.push(new vt("".concat(n,"[1]"),e[1],"object expected, ".concat(r," found")))}return o}function gr(t,e){var n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i["".concat(e,"_").concat(t.layerType)];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return Er({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var u,c=t.valueSpec||s[a];if(!c)return[new vt(n,o,'unknown property "'.concat(a,'"'))];if("string"===On(o)&&Ln(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new vt(n,o,'"'.concat(a,'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ').concat(JSON.stringify(u[1])," }`."))];var h=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new vt(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&zn(bt(o))&&"identity"===xt(o.type)&&h.push(new vt(n,o,'"text-font" does not support identity functions'))),h.concat(Er({key:t.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function vr(t){return gr(t,"paint")}function yr(t){return gr(t,"layout")}function _r(t){var e=[],n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new vt(r,n,'either "type" or "ref" is required'));var a,s=xt(n.type),l=xt(n.ref);if(n.id)for(var u=xt(n.id),c=0;c<t.arrayIndex;c++){var h=i.layers[c];xt(h.id)===u&&e.push(new vt(r,n.id,'duplicate layer id "'.concat(n.id,'", previously used at line ').concat(h.id.__line__)))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(t){t in n&&e.push(new vt(r,n[t],'"'.concat(t,'" is prohibited for ref layers')))})),i.layers.forEach((function(t){xt(t.id)===l&&(a=t)})),a?a.ref?e.push(new vt(r,n.ref,"ref cannot reference another ref layer")):s=xt(a.type):e.push(new vt(r,n.ref,'ref layer "'.concat(l,'" not found')));else if("background"!==s)if(n.source){var f=i.sources&&i.sources[n.source],p=f&&xt(f.type);f?"vector"===p&&"raster"===s?e.push(new vt(r,n.source,'layer "'.concat(n.id,'" requires a raster source'))):"raster"===p&&"raster"!==s?e.push(new vt(r,n.source,'layer "'.concat(n.id,'" requires a vector source'))):"vector"!==p||n["source-layer"]?"raster-dem"===p&&"hillshade"!==s?e.push(new vt(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===p&&f.lineMetrics||e.push(new vt(r,n,'layer "'.concat(n.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):e.push(new vt(r,n,'layer "'.concat(n.id,'" must specify a "source-layer"'))):e.push(new vt(r,n.source,'source "'.concat(n.source,'" not found')))}else e.push(new vt(r,n,'missing required property "source"'));return e=e.concat(Jn({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Er({key:"".concat(r,".type"),value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:dr,layout:function(t){return Jn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return yr(_t({layerType:s},t))}}})},paint:function(t){return Jn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return vr(_t({layerType:s},t))}}})}}})),e}function xr(t){var e=t.value,n=t.key,r=On(e);return"string"!==r?[new vt(n,e,"string expected, ".concat(r," found"))]:[]}var br={promoteId:function(t){var e=t.key,n=t.value;if("string"===On(n))return xr({key:e,value:n});var r=[];for(var i in n)r.push.apply(r,c(xr({key:"".concat(e,".").concat(i),value:n[i]})));return r}};function wr(t){var e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new vt(n,e,'"type" is required')];var o,a=xt(e.type);switch(a){case"vector":case"raster":case"raster-dem":return o=Jn({key:n,value:e,valueSpec:r["source_".concat(a.replace("-","_"))],style:t.style,styleSpec:r,objectElementValidators:br});case"geojson":if(o=Jn({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:br}),e.cluster)for(var s in e.clusterProperties){var l,u,f=h(e.clusterProperties[s],2),p=f[0],d=f[1],m="string"==typeof p?[p,["accumulated"],["get",s]]:p;(l=o).push.apply(l,c(nr({key:"".concat(n,".").concat(s,".map"),value:d,expressionContext:"cluster-map"}))),(u=o).push.apply(u,c(nr({key:"".concat(n,".").concat(s,".reduce"),value:m,expressionContext:"cluster-reduce"})))}return o;case"video":return Jn({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return Jn({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new vt(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return rr({key:"".concat(n,".type"),value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function kr(t){var e=t.value,n=t.styleSpec,r=n.light,i=t.style,o=[],a=On(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new vt("light",e,"object expected, ".concat(a," found"))]);for(var s in e){var l=s.match(/^(.*)-transition$/);o=o.concat(l&&r[l[1]]&&r[l[1]].transition?Er({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?Er({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n}):[new vt(s,e[s],'unknown property "'.concat(s,'"'))])}return o}var Sr={"*":function(){return[]},array:Qn,boolean:function(t){var e=t.value,n=t.key,r=On(e);return"boolean"!==r?[new vt(n,e,"boolean expected, ".concat(r," found"))]:[]},number:tr,color:function(t){var e=t.key,n=t.value,r=On(n);return"string"!==r?[new vt(e,n,"color expected, ".concat(r," found"))]:null===jt(n)?[new vt(e,n,'color expected, "'.concat(n,'" found'))]:[]},constants:yt,enum:rr,filter:dr,function:er,layer:_r,object:Jn,source:wr,light:kr,string:xr,formatted:function(t){return 0===xr(t).length?[]:nr(t)},resolvedImage:function(t){return 0===xr(t).length?[]:nr(t)}};function Er(t){var e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&zn(xt(e))?er(t):n.expression&&Gn(bt(e))?nr(t):n.type&&Sr[n.type]?Sr[n.type](t):Jn(_t({},t,{valueSpec:n.type?r[n.type]:n}))}function Ir(t){var e=t.value,n=t.key,r=xr(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new vt(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new vt(n,e,'"glyphs" url must include a "{range}" token'))),r}function Cr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gt,n=[];return n=n.concat(Er({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Ir,"*":function(){return[]}}})),t.constants&&(n=n.concat(yt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Ar(n)}function Ar(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function Pr(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ar(t.apply(this,n))}}Cr.source=Pr(wr),Cr.light=Pr(kr),Cr.layer=Pr(_r),Cr.filter=Pr(dr),Cr.paintProperty=Pr(vr),Cr.layoutProperty=Pr(yr);var Tr=Cr,Mr=Tr.light,Lr=Tr.paintProperty,Rr=Tr.layoutProperty;function Nr(t,e){var n=!1;if(e&&e.length){var r,i=f(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.fire(new dt(new Error(o.message))),n=!0}}catch(a){i.e(a)}finally{i.f()}}return n}var Or=function(){function t(e,n,r){d(this,t);var i=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var o=new Int32Array(this.arrayBuffer);e=o[0],this.d=(n=o[1])+2*(r=o[2]);for(var a=0;a<this.d*this.d;a++){var s=o[3+a],l=o[3+a+1];i.push(s===l?null:o.subarray(s,l))}var u=o[3+i.length+1];this.keys=o.subarray(o[3+i.length],u),this.bboxes=o.subarray(u),this.insert=this._insertReadonly}else{this.d=n+2*r;for(var c=0;c<this.d*this.d;c++)i.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=e,this.padding=r,this.scale=n/e,this.uid=0;var h=r/n*e;this.min=-h,this.max=e+h}return p(t,[{key:"insert",value:function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}},{key:"_insertReadonly",value:function(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}},{key:"_insertCell",value:function(t,e,n,r,i,o){this.cells[i].push(o)}},{key:"query",value:function(t,e,n,r,i){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,r,this._queryCell,s,{},i),s}},{key:"_queryCell",value:function(t,e,n,r,i,o,a,s){var l=this.cells[i];if(null!==l)for(var u=this.keys,c=this.bboxes,h=0;h<l.length;h++){var f=l[h];if(void 0===a[f]){var p=4*f;(s?s(c[p+0],c[p+1],c[p+2],c[p+3]):t<=c[p+2]&&e<=c[p+3]&&n>=c[p+0]&&r>=c[p+1])?(a[f]=!0,o.push(u[f])):a[f]=!1}}}},{key:"_forEachCell",value:function(t,e,n,r,i,o,a,s){for(var l=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(n),h=this._convertToCellCoord(r),f=l;f<=c;f++)for(var p=u;p<=h;p++){var d=this.d*p+f;if((!s||s(this._convertFromCellCoord(f),this._convertFromCellCoord(p),this._convertFromCellCoord(f+1),this._convertFromCellCoord(p+1)))&&i.call(this,t,e,n,r,d,o,a,s))return}}},{key:"_convertFromCellCoord",value:function(t){return(t-this.padding)/this.scale}},{key:"_convertToCellCoord",value:function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}},{key:"toArrayBuffer",value:function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];i[3+a]=o,i.set(s,o),o+=s.length}return i[3+t.length]=o,i.set(this.keys,o),o+=this.keys.length,i[3+t.length+1]=o,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer}}],[{key:"serialize",value:function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}}},{key:"deserialize",value:function(e){return new t(e.buffer)}}]),t}(),zr={};function Dr(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),zr[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}for(var Fr in Dr("Object",Object),Dr("TransferableGridIndex",Or),Dr("Color",Wt),Dr("Error",Error),Dr("AJAXError",et),Dr("ResolvedImage",$t),Dr("StylePropertyFunction",$n),Dr("StyleExpression",qn,{omit:["_evaluator"]}),Dr("ZoomDependentExpression",Xn),Dr("ZoomConstantExpression",Hn),Dr("CompoundExpression",he,{omit:["_evaluate"]}),En)En[Fr]._classRegistryKey||Dr("Expression_".concat(Fr),En[Fr]);function Br(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function jr(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob)return t;if(Br(t))return e&&e.push(t),t;if(z(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof ImageData)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){var r,i=[],o=f(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;i.push(jr(a,e))}}catch(p){o.e(p)}finally{o.f()}return i}if("object"==typeof t){var s=t.constructor,l=s._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class");var u=s.serialize?s.serialize(t,e):{};if(!s.serialize){for(var c in t)if(t.hasOwnProperty(c)&&!(zr[l].omit.indexOf(c)>=0)){var h=t[c];u[c]=zr[l].shallow.indexOf(c)>=0?h:jr(h,e)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==l&&(u.$name=l),u}throw new Error("can't serialize object of type "+typeof t)}function Zr(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob||Br(t)||z(t)||ArrayBuffer.isView(t)||t instanceof ImageData)return t;if(Array.isArray(t))return t.map(Zr);if("object"==typeof t){var e=t.$name||"Object";if(!zr[e])throw new Error("can't deserialize unregistered class ".concat(e));var n=zr[e].klass;if(!n)throw new Error("can't deserialize unregistered class ".concat(e));if(n.deserialize)return n.deserialize(t);for(var r=Object.create(n.prototype),i=0,o=Object.keys(t);i<o.length;i++){var a=o[i];if("$name"!==a){var s=t[a];r[a]=zr[e].shallow.indexOf(a)>=0?s:Zr(s)}}return r}throw new Error("can't deserialize object of type "+typeof t)}var Ur=function(){function t(){d(this,t),this.first=!0}return p(t,[{key:"update",value:function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))}}]),t}(),Vr={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function qr(t){var e,n=f(t);try{for(n.s();!(e=n.n()).done;)if(Hr(e.value.charCodeAt(0)))return!0}catch(r){n.e(r)}finally{n.f()}return!1}function Gr(t){var e,n=f(t);try{for(n.s();!(e=n.n()).done;)if(!Wr(e.value.charCodeAt(0)))return!1}catch(r){n.e(r)}finally{n.f()}return!0}function Wr(t){return!(Vr.Arabic(t)||Vr["Arabic Supplement"](t)||Vr["Arabic Extended-A"](t)||Vr["Arabic Presentation Forms-A"](t)||Vr["Arabic Presentation Forms-B"](t))}function Hr(t){return!(746!==t&&747!==t&&(t<4352||!(Vr["Bopomofo Extended"](t)||Vr.Bopomofo(t)||Vr["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Vr["CJK Compatibility Ideographs"](t)||Vr["CJK Compatibility"](t)||Vr["CJK Radicals Supplement"](t)||Vr["CJK Strokes"](t)||!(!Vr["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Vr["CJK Unified Ideographs Extension A"](t)||Vr["CJK Unified Ideographs"](t)||Vr["Enclosed CJK Letters and Months"](t)||Vr["Hangul Compatibility Jamo"](t)||Vr["Hangul Jamo Extended-A"](t)||Vr["Hangul Jamo Extended-B"](t)||Vr["Hangul Jamo"](t)||Vr["Hangul Syllables"](t)||Vr.Hiragana(t)||Vr["Ideographic Description Characters"](t)||Vr.Kanbun(t)||Vr["Kangxi Radicals"](t)||Vr["Katakana Phonetic Extensions"](t)||Vr.Katakana(t)&&12540!==t||!(!Vr["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Vr["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Vr["Unified Canadian Aboriginal Syllabics"](t)||Vr["Unified Canadian Aboriginal Syllabics Extended"](t)||Vr["Vertical Forms"](t)||Vr["Yijing Hexagram Symbols"](t)||Vr["Yi Syllables"](t)||Vr["Yi Radicals"](t))))}function Xr(t){return!(Hr(t)||function(t){return!!(Vr["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Vr["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Vr["Letterlike Symbols"](t)||Vr["Number Forms"](t)||Vr["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Vr["Control Pictures"](t)&&9251!==t||Vr["Optical Character Recognition"](t)||Vr["Enclosed Alphanumerics"](t)||Vr["Geometric Shapes"](t)||Vr["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Vr["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Vr["CJK Symbols and Punctuation"](t)||Vr.Katakana(t)||Vr["Private Use Area"](t)||Vr["CJK Compatibility Forms"](t)||Vr["Small Form Variants"](t)||Vr["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Yr(t){return t>=1424&&t<=2303||Vr["Arabic Presentation Forms-A"](t)||Vr["Arabic Presentation Forms-B"](t)}function $r(t,e){return!(!e&&Yr(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Vr.Khmer(t))}function Kr(t){var e,n=f(t);try{for(n.s();!(e=n.n()).done;)if(Yr(e.value.charCodeAt(0)))return!0}catch(r){n.e(r)}finally{n.f()}return!1}var Jr="deferred",Qr="loading",ti="loaded",ei=null,ni="unavailable",ri=null,ii=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(ni="error"),ei&&ei(t)};function oi(){ai.fire(new pt("pluginStateChange",{pluginStatus:ni,pluginURL:ri}))}var ai=new mt,si=function(){return ni},li=function(){if(ni!==Jr||!ri)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ni=Qr,oi(),ri&&ot({url:ri},(function(t){t?ii(t):(ni=ti,oi())}))},ui={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return ni===ti||null!=ui.applyArabicShaping},isLoading:function(){return ni===Qr},setState:function(t){ni=t.pluginStatus,ri=t.pluginURL},isParsed:function(){return null!=ui.applyArabicShaping&&null!=ui.processBidirectionalText&&null!=ui.processStyledBidirectionalText},getPluginURL:function(){return ri}},ci=function(){function t(e,n){d(this,t),this.zoom=e,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.zoomHistory=n.zoomHistory,this.transition=n.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ur,this.transition={})}return p(t,[{key:"isSupportedScript",value:function(t){return function(t,e){var n,r=f(t);try{for(r.s();!(n=r.n()).done;)if(!$r(n.value.charCodeAt(0),e))return!1}catch(i){r.e(i)}finally{r.f()}return!0}(t,ui.isLoaded())}},{key:"crossFadingFactor",value:function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}},{key:"getCrossfadeParameters",value:function(){var t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}}}]),t}(),hi=function(){function t(e,n){d(this,t),this.property=e,this.value=n,this.expression=function(t,e){if(zn(t))return new $n(t,e);if(Gn(t)){var n=Yn(t,e);if("error"===n.result)throw new Error(n.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));return n.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=Wt.parse(t)),{kind:"constant",evaluate:function(){return r}}}(void 0===n?e.specification.default:n,e.specification)}return p(t,[{key:"isDataDriven",value:function(){return"source"===this.expression.kind||"composite"===this.expression.kind}},{key:"possiblyEvaluate",value:function(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)}}]),t}(),fi=function(){function t(e){d(this,t),this.property=e,this.value=new hi(e,void 0)}return p(t,[{key:"transitioned",value:function(t,e){return new di(this.property,this.value,e,x({},t.transition,this.transition),t.now)}},{key:"untransitioned",value:function(){return new di(this.property,this.value,null,{},0)}}]),t}(),pi=function(){function t(e){d(this,t),this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}return p(t,[{key:"getValue",value:function(t){return E(this._values[t].value.value)}},{key:"setValue",value:function(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new fi(this._values[t].property)),this._values[t].value=new hi(this._values[t].property,null===e?void 0:E(e))}},{key:"getTransition",value:function(t){return E(this._values[t].transition)}},{key:"setTransition",value:function(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new fi(this._values[t].property)),this._values[t].transition=E(e)||void 0}},{key:"serialize",value:function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e++){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i);var o=this.getTransition(r);void 0!==o&&(t["".concat(r,"-transition")]=o)}return t}},{key:"transitioned",value:function(t,e){for(var n=new mi(this._properties),r=0,i=Object.keys(this._values);r<i.length;r++){var o=i[r];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n}},{key:"untransitioned",value:function(){for(var t=new mi(this._properties),e=0,n=Object.keys(this._values);e<n.length;e++){var r=n[e];t._values[r]=this._values[r].untransitioned()}return t}}]),t}(),di=function(){function t(e,n,r,i,o){d(this,t),this.property=e,this.value=n,this.begin=o+i.delay||0,this.end=this.begin+i.duration||0,e.specification.transition&&(i.delay||i.duration)&&(this.prior=r)}return p(t,[{key:"possiblyEvaluate",value:function(t,e,n){var r=t.now||0,i=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(t,e,n);var a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),i,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(a))}return i}}]),t}(),mi=function(){function t(e){d(this,t),this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}return p(t,[{key:"possiblyEvaluate",value:function(t,e,n){for(var r=new yi(this._properties),i=0,o=Object.keys(this._values);i<o.length;i++){var a=o[i];r._values[a]=this._values[a].possiblyEvaluate(t,e,n)}return r}},{key:"hasTransition",value:function(){for(var t=0,e=Object.keys(this._values);t<e.length;t++){var n=e[t];if(this._values[n].prior)return!0}return!1}}]),t}(),gi=function(){function t(e){d(this,t),this._properties=e,this._values=Object.create(e.defaultPropertyValues)}return p(t,[{key:"getValue",value:function(t){return E(this._values[t].value)}},{key:"setValue",value:function(t,e){this._values[t]=new hi(this._values[t].property,null===e?void 0:E(e))}},{key:"serialize",value:function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e++){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i)}return t}},{key:"possiblyEvaluate",value:function(t,e,n){for(var r=new yi(this._properties),i=0,o=Object.keys(this._values);i<o.length;i++){var a=o[i];r._values[a]=this._values[a].possiblyEvaluate(t,e,n)}return r}}]),t}(),vi=function(){function t(e,n,r){d(this,t),this.property=e,this.value=n,this.parameters=r}return p(t,[{key:"isConstant",value:function(){return"constant"===this.value.kind}},{key:"constantOr",value:function(t){return"constant"===this.value.kind?this.value.value:t}},{key:"evaluate",value:function(t,e,n,r){return this.property.evaluate(this.value,this.parameters,t,e,n,r)}}]),t}(),yi=function(){function t(e){d(this,t),this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}return p(t,[{key:"get",value:function(t){return this._values[t]}}]),t}(),_i=function(){function t(e){d(this,t),this.specification=e}return p(t,[{key:"possiblyEvaluate",value:function(t,e){return t.expression.evaluate(e)}},{key:"interpolate",value:function(t,e,n){var r=Be[this.specification.type];return r?r(t,e,n):t}}]),t}(),xi=function(){function t(e,n){d(this,t),this.specification=e,this.overrides=n}return p(t,[{key:"possiblyEvaluate",value:function(t,e,n,r){return new vi(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,r)}:t.expression,e)}},{key:"interpolate",value:function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new vi(this,{kind:"constant",value:void 0},t.parameters);var r=Be[this.specification.type];return r?new vi(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.parameters):t}},{key:"evaluate",value:function(t,e,n,r,i,o){return"constant"===t.kind?t.value:t.evaluate(e,n,r,i,o)}}]),t}(),bi=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"possiblyEvaluate",value:function(t,e,n,r){if(void 0===t.value)return new vi(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},n,r),o="resolvedImage"===t.property.specification.type&&"string"!=typeof i?i.name:i,a=this._calculate(o,o,o,e);return new vi(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new vi(this,{kind:"constant",value:s},e)}return new vi(this,t.expression,e)}},{key:"evaluate",value:function(t,e,n,r,i,o){if("source"===t.kind){var a=t.evaluate(e,n,r,i,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,r),t.evaluate({zoom:Math.floor(e.zoom)},n,r),t.evaluate({zoom:Math.floor(e.zoom)+1},n,r),e):t.value}},{key:"_calculate",value:function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}}},{key:"interpolate",value:function(t){return t}}]),n}(xi),wi=function(){function t(e){d(this,t),this.specification=e}return p(t,[{key:"possiblyEvaluate",value:function(t,e,n,r){if(void 0!==t.value){if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},n,r);return this._calculate(i,i,i,e)}return this._calculate(t.expression.evaluate(new ci(Math.floor(e.zoom-1),e)),t.expression.evaluate(new ci(Math.floor(e.zoom),e)),t.expression.evaluate(new ci(Math.floor(e.zoom+1),e)),e)}}},{key:"_calculate",value:function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}}},{key:"interpolate",value:function(t){return t}}]),t}(),ki=function(){function t(e){d(this,t),this.specification=e}return p(t,[{key:"possiblyEvaluate",value:function(t,e,n,r){return!!t.expression.evaluate(e,null,{},n,r)}},{key:"interpolate",value:function(){return!1}}]),t}(),Si=p((function t(e){for(var n in d(this,t),this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var r=e[n];r.specification.overridable&&this.overridableProperties.push(n);var i=this.defaultPropertyValues[n]=new hi(r,void 0),o=this.defaultTransitionablePropertyValues[n]=new fi(r);this.defaultTransitioningPropertyValues[n]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=i.possiblyEvaluate({})}}));Dr("DataDrivenProperty",xi),Dr("DataConstantProperty",_i),Dr("CrossFadedDataDrivenProperty",bi),Dr("CrossFadedProperty",wi),Dr("ColorRampProperty",ki);var Ei="-transition",Ii=function(t){m(n,t);var e=g(n);function n(t,r){var i;if(d(this,n),(i=e.call(this)).id=t.id,i.type=t.type,i._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==t.type&&(i.metadata=(t=t).metadata,i.minzoom=t.minzoom,i.maxzoom=t.maxzoom,"background"!==t.type&&(i.source=t.source,i.sourceLayer=t["source-layer"],i.filter=t.filter),r.layout&&(i._unevaluatedLayout=new gi(r.layout)),r.paint)){for(var o in i._transitionablePaint=new pi(r.paint),t.paint)i.setPaintProperty(o,t.paint[o],{validate:!1});for(var a in t.layout)i.setLayoutProperty(a,t.layout[a],{validate:!1});i._transitioningPaint=i._transitionablePaint.untransitioned(),i.paint=new yi(r.paint)}return l(i)}return p(n,[{key:"getCrossfadeParameters",value:function(){return this._crossfadeParameters}},{key:"getLayoutProperty",value:function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}},{key:"setLayoutProperty",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=e&&this._validate(Rr,"layers.".concat(this.id,".layout.").concat(t),t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}},{key:"getPaintProperty",value:function(t){return t.endsWith(Ei)?this._transitionablePaint.getTransition(t.slice(0,-Ei.length)):this._transitionablePaint.getValue(t)}},{key:"setPaintProperty",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e&&this._validate(Lr,"layers.".concat(this.id,".paint.").concat(t),t,e,n))return!1;if(t.endsWith(Ei))return this._transitionablePaint.setTransition(t.slice(0,-Ei.length),e||void 0),!1;var r=this._transitionablePaint._values[t],i="cross-faded-data-driven"===r.property.specification["property-type"],o=r.value.isDataDriven(),a=r.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||o||i||this._handleOverridablePaintPropertyUpdate(t,a,s)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(t){}},{key:"_handleOverridablePaintPropertyUpdate",value:function(t,e,n){return!1}},{key:"isHidden",value:function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}},{key:"updateTransitions",value:function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}},{key:"hasTransition",value:function(){return this._transitioningPaint.hasTransition()}},{key:"recalculate",value:function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}},{key:"serialize",value:function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),S(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))}},{key:"_validate",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!i||!1!==i.validate)&&Nr(this,t.call(Tr,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:gt,style:{glyphs:!0,sprite:!0}}))}},{key:"is3D",value:function(){return!1}},{key:"isTileClipped",value:function(){return!1}},{key:"hasOffscreenPass",value:function(){return!1}},{key:"resize",value:function(){}},{key:"isStateDependent",value:function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof vi&&Ln(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}}]),n}(mt),Ci={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ai=p((function t(e,n){d(this,t),this._structArray=e,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8})),Pi=function(){function t(){d(this,t),this.isTransferred=!1,this.capacity=-1,this.resize(0)}return p(t,[{key:"_trim",value:function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}},{key:"clear",value:function(){this.length=0}},{key:"resize",value:function(t){this.reserve(t),this.length=t}},{key:"reserve",value:function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}},{key:"_refreshViews",value:function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}],[{key:"serialize",value:function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}},{key:"deserialize",value:function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}}]),t}();function Ti(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,r=0;return{members:t.map((function(t){var i=Ci[t.type].BYTES_PER_ELEMENT,o=n=Mi(n,Math.max(e,i)),a=t.components||1;return r=Math.max(r,i),n+=i*a,{name:t.name,type:t.type,components:a,offset:o}})),size:Mi(n,Math.max(r,e)),alignment:e}}function Mi(t,e){return Math.ceil(t/e)*e}var Li=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)}},{key:"emplace",value:function(t,e,n){var r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t}}]),n}(Pi);Li.prototype.bytesPerElement=4,Dr("StructArrayLayout2i4",Li);var Ri=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}},{key:"emplace",value:function(t,e,n,r,i){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t}}]),n}(Pi);Ri.prototype.bytesPerElement=8,Dr("StructArrayLayout4i8",Ri);var Ni=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)}},{key:"emplace",value:function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t}}]),n}(Pi);Ni.prototype.bytesPerElement=12,Dr("StructArrayLayout2i4i12",Ni);var Oi=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)}},{key:"emplace",value:function(t,e,n,r,i,o,a){var s=4*t,l=8*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.uint8[l+4]=r,this.uint8[l+5]=i,this.uint8[l+6]=o,this.uint8[l+7]=a,t}}]),n}(Pi);Oi.prototype.bytesPerElement=8,Dr("StructArrayLayout2i4ub8",Oi);var zi=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)}},{key:"emplace",value:function(t,e,n){var r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t}}]),n}(Pi);zi.prototype.bytesPerElement=8,Dr("StructArrayLayout2f8",zi);var Di=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,o,a,s,l,u){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,n,r,i,o,a,s,l,u)}},{key:"emplace",value:function(t,e,n,r,i,o,a,s,l,u,c){var h=10*t;return this.uint16[h+0]=e,this.uint16[h+1]=n,this.uint16[h+2]=r,this.uint16[h+3]=i,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=u,this.uint16[h+9]=c,t}}]),n}(Pi);Di.prototype.bytesPerElement=20,Dr("StructArrayLayout10ui20",Di);var Fi=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,o,a,s,l,u,c,h){var f=this.length;return this.resize(f+1),this.emplace(f,t,e,n,r,i,o,a,s,l,u,c,h)}},{key:"emplace",value:function(t,e,n,r,i,o,a,s,l,u,c,h,f){var p=12*t;return this.int16[p+0]=e,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=u,this.int16[p+9]=c,this.int16[p+10]=h,this.int16[p+11]=f,t}}]),n}(Pi);Fi.prototype.bytesPerElement=24,Dr("StructArrayLayout4i4ui4i24",Fi);var Bi=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}},{key:"emplace",value:function(t,e,n,r){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t}}]),n}(Pi);Bi.prototype.bytesPerElement=12,Dr("StructArrayLayout3f12",Bi);var ji=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)}},{key:"emplace",value:function(t,e){return this.uint32[1*t+0]=e,t}}]),n}(Pi);ji.prototype.bytesPerElement=4,Dr("StructArrayLayout1ul4",ji);var Zi=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,o,a,s,l){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,r,i,o,a,s,l)}},{key:"emplace",value:function(t,e,n,r,i,o,a,s,l,u){var c=10*t,h=5*t;return this.int16[c+0]=e,this.int16[c+1]=n,this.int16[c+2]=r,this.int16[c+3]=i,this.int16[c+4]=o,this.int16[c+5]=a,this.uint32[h+3]=s,this.uint16[c+8]=l,this.uint16[c+9]=u,t}}]),n}(Pi);Zi.prototype.bytesPerElement=20,Dr("StructArrayLayout6i1ul2ui20",Zi);var Ui=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)}},{key:"emplace",value:function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t}}]),n}(Pi);Ui.prototype.bytesPerElement=12,Dr("StructArrayLayout2i2i2i12",Ui);var Vi=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)}},{key:"emplace",value:function(t,e,n,r,i,o){var a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=r,this.int16[s+6]=i,this.int16[s+7]=o,t}}]),n}(Pi);Vi.prototype.bytesPerElement=16,Dr("StructArrayLayout2f1f2i16",Vi);var qi=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}},{key:"emplace",value:function(t,e,n,r,i){var o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,t}}]),n}(Pi);qi.prototype.bytesPerElement=12,Dr("StructArrayLayout2ub2f12",qi);var Gi=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}},{key:"emplace",value:function(t,e,n,r){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t}}]),n}(Pi);Gi.prototype.bytesPerElement=6,Dr("StructArrayLayout3ui6",Gi);var Wi=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,m,g){var v=this.length;return this.resize(v+1),this.emplace(v,t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,m,g)}},{key:"emplace",value:function(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,m,g,v){var y=24*t,_=12*t,x=48*t;return this.int16[y+0]=e,this.int16[y+1]=n,this.uint16[y+2]=r,this.uint16[y+3]=i,this.uint32[_+2]=o,this.uint32[_+3]=a,this.uint32[_+4]=s,this.uint16[y+10]=l,this.uint16[y+11]=u,this.uint16[y+12]=c,this.float32[_+7]=h,this.float32[_+8]=f,this.uint8[x+36]=p,this.uint8[x+37]=d,this.uint8[x+38]=m,this.uint32[_+10]=g,this.int16[y+22]=v,t}}]),n}(Pi);Wi.prototype.bytesPerElement=48,Dr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Wi);var Hi=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,m,g,v,y,_,x,b,w,k,S,E,I,C){var A=this.length;return this.resize(A+1),this.emplace(A,t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,m,g,v,y,_,x,b,w,k,S,E,I,C)}},{key:"emplace",value:function(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,m,g,v,y,_,x,b,w,k,S,E,I,C,A){var P=34*t,T=17*t;return this.int16[P+0]=e,this.int16[P+1]=n,this.int16[P+2]=r,this.int16[P+3]=i,this.int16[P+4]=o,this.int16[P+5]=a,this.int16[P+6]=s,this.int16[P+7]=l,this.uint16[P+8]=u,this.uint16[P+9]=c,this.uint16[P+10]=h,this.uint16[P+11]=f,this.uint16[P+12]=p,this.uint16[P+13]=d,this.uint16[P+14]=m,this.uint16[P+15]=g,this.uint16[P+16]=v,this.uint16[P+17]=y,this.uint16[P+18]=_,this.uint16[P+19]=x,this.uint16[P+20]=b,this.uint16[P+21]=w,this.uint16[P+22]=k,this.uint32[T+12]=S,this.float32[T+13]=E,this.float32[T+14]=I,this.float32[T+15]=C,this.float32[T+16]=A,t}}]),n}(Pi);Hi.prototype.bytesPerElement=68,Dr("StructArrayLayout8i15ui1ul4f68",Hi);var Xi=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)}},{key:"emplace",value:function(t,e){return this.float32[1*t+0]=e,t}}]),n}(Pi);Xi.prototype.bytesPerElement=4,Dr("StructArrayLayout1f4",Xi);var Yi=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}},{key:"emplace",value:function(t,e,n,r){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t}}]),n}(Pi);Yi.prototype.bytesPerElement=6,Dr("StructArrayLayout3i6",Yi);var $i=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}},{key:"emplace",value:function(t,e,n,r){var i=4*t;return this.uint32[2*t+0]=e,this.uint16[i+2]=n,this.uint16[i+3]=r,t}}]),n}(Pi);$i.prototype.bytesPerElement=8,Dr("StructArrayLayout1ul2ui8",$i);var Ki=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)}},{key:"emplace",value:function(t,e,n){var r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t}}]),n}(Pi);Ki.prototype.bytesPerElement=4,Dr("StructArrayLayout2ui4",Ki);var Ji=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)}},{key:"emplace",value:function(t,e){return this.uint16[1*t+0]=e,t}}]),n}(Pi);Ji.prototype.bytesPerElement=2,Dr("StructArrayLayout1ui2",Ji);var Qi=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}},{key:"emplace",value:function(t,e,n,r,i){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t}}]),n}(Pi);Qi.prototype.bytesPerElement=16,Dr("StructArrayLayout4f16",Qi);var to=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"anchorPointX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"anchorPointY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"x1",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"y1",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"x2",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"y2",get:function(){return this._structArray.int16[this._pos2+5]}},{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+3]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+8]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+9]}},{key:"anchorPoint",get:function(){return new F(this.anchorPointX,this.anchorPointY)}}]),n}(Ai);to.prototype.size=20;var eo=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"get",value:function(t){return new to(this,t)}}]),n}(Zi);Dr("CollisionBoxArray",eo);var no=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"anchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"anchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"glyphStartIndex",get:function(){return this._structArray.uint16[this._pos2+2]}},{key:"numGlyphs",get:function(){return this._structArray.uint16[this._pos2+3]}},{key:"vertexStartIndex",get:function(){return this._structArray.uint32[this._pos4+2]}},{key:"lineStartIndex",get:function(){return this._structArray.uint32[this._pos4+3]}},{key:"lineLength",get:function(){return this._structArray.uint32[this._pos4+4]}},{key:"segment",get:function(){return this._structArray.uint16[this._pos2+10]}},{key:"lowerSize",get:function(){return this._structArray.uint16[this._pos2+11]}},{key:"upperSize",get:function(){return this._structArray.uint16[this._pos2+12]}},{key:"lineOffsetX",get:function(){return this._structArray.float32[this._pos4+7]}},{key:"lineOffsetY",get:function(){return this._structArray.float32[this._pos4+8]}},{key:"writingMode",get:function(){return this._structArray.uint8[this._pos1+36]}},{key:"placedOrientation",get:function(){return this._structArray.uint8[this._pos1+37]},set:function(t){this._structArray.uint8[this._pos1+37]=t}},{key:"hidden",get:function(){return this._structArray.uint8[this._pos1+38]},set:function(t){this._structArray.uint8[this._pos1+38]=t}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+10]},set:function(t){this._structArray.uint32[this._pos4+10]=t}},{key:"associatedIconIndex",get:function(){return this._structArray.int16[this._pos2+22]}}]),n}(Ai);no.prototype.size=48;var ro=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"get",value:function(t){return new no(this,t)}}]),n}(Wi);Dr("PlacedSymbolArray",ro);var io=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"anchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"anchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"rightJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"centerJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"leftJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"verticalPlacedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+5]}},{key:"placedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+6]}},{key:"verticalPlacedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+7]}},{key:"key",get:function(){return this._structArray.uint16[this._pos2+8]}},{key:"textBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+9]}},{key:"textBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+10]}},{key:"verticalTextBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+11]}},{key:"verticalTextBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+12]}},{key:"iconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+13]}},{key:"iconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+14]}},{key:"verticalIconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+15]}},{key:"verticalIconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"featureIndex",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"numHorizontalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"numVerticalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+19]}},{key:"numIconVertices",get:function(){return this._structArray.uint16[this._pos2+20]}},{key:"numVerticalIconVertices",get:function(){return this._structArray.uint16[this._pos2+21]}},{key:"useRuntimeCollisionCircles",get:function(){return this._structArray.uint16[this._pos2+22]}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+12]},set:function(t){this._structArray.uint32[this._pos4+12]=t}},{key:"textBoxScale",get:function(){return this._structArray.float32[this._pos4+13]}},{key:"textOffset0",get:function(){return this._structArray.float32[this._pos4+14]}},{key:"textOffset1",get:function(){return this._structArray.float32[this._pos4+15]}},{key:"collisionCircleDiameter",get:function(){return this._structArray.float32[this._pos4+16]}}]),n}(Ai);io.prototype.size=68;var oo=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"get",value:function(t){return new io(this,t)}}]),n}(Hi);Dr("SymbolInstanceArray",oo);var ao=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getoffsetX",value:function(t){return this.float32[1*t+0]}}]),n}(Xi);Dr("GlyphOffsetArray",ao);var so=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getx",value:function(t){return this.int16[3*t+0]}},{key:"gety",value:function(t){return this.int16[3*t+1]}},{key:"gettileUnitDistanceFromAnchor",value:function(t){return this.int16[3*t+2]}}]),n}(Yi);Dr("SymbolLineVertexArray",so);var lo=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+0]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+2]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+3]}}]),n}(Ai);lo.prototype.size=8;var uo=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"get",value:function(t){return new lo(this,t)}}]),n}($i);Dr("FeatureIndexArray",uo);var co=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n)}(Li),ho=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n)}(Li),fo=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n)}(Ni),po=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n)}(Oi),mo=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n)}(zi),go=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n)}(Di),vo=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n)}(Fi),yo=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n)}(Bi),_o=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n)}(ji),xo=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n)}(Ui),bo=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n)}(qi),wo=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n)}(Gi),ko=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n)}(Ki),So=Ti([{name:"a_pos",components:2,type:"Int16"}],4).members,Eo=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];d(this,t),this.segments=e}return p(t,[{key:"prepareSegment",value:function(e,n,r,i){var o=this.segments[this.segments.length-1];return e>t.MAX_VERTEX_ARRAY_LENGTH&&C("Max vertices per segment is ".concat(t.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(e)),(!o||o.vertexLength+e>t.MAX_VERTEX_ARRAY_LENGTH||o.sortKey!==i)&&(o={vertexOffset:n.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==i&&(o.sortKey=i),this.segments.push(o)),o}},{key:"get",value:function(){return this.segments}},{key:"destroy",value:function(){var t,e=f(this.segments);try{for(e.s();!(t=e.n()).done;){var n=t.value;for(var r in n.vaos)n.vaos[r].destroy()}}catch(i){e.e(i)}finally{e.f()}}}],[{key:"simpleSegment",value:function(e,n,r,i){return new t([{vertexOffset:e,primitiveOffset:n,vertexLength:r,primitiveLength:i,vaos:{},sortKey:0}])}}]),t}();function Io(t,e){return 256*(t=y(Math.floor(t),0,255))+y(Math.floor(e),0,255)}Eo.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Dr("SegmentVector",Eo);var Co=Ti([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Ao={exports:{}},Po={exports:{}};Po.exports=function(t,e){var n,r,i,o,a,s,l,u;for(r=t.length-(n=3&t.length),i=e,a=3432918353,s=461845907,u=0;u<r;)l=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&t.charCodeAt(u+2))<<16;case 2:l^=(255&t.charCodeAt(u+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(u)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var To={exports:{}};To.exports=function(t,e){for(var n,r=t.length,i=e^r,o=0;r>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var Mo=Po.exports,Lo=To.exports;Ao.exports=Mo,Ao.exports.murmur3=Mo,Ao.exports.murmur2=Lo;var Ro=Ao.exports,No=function(){function t(){d(this,t),this.ids=[],this.positions=[],this.indexed=!1}return p(t,[{key:"add",value:function(t,e,n,r){this.ids.push(Oo(t)),this.positions.push(e,n,r)}},{key:"getPositions",value:function(t){for(var e=Oo(t),n=0,r=this.ids.length-1;n<r;){var i=n+r>>1;this.ids[i]>=e?r=i:n=i+1}for(var o=[];this.ids[n]===e;)o.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return o}}],[{key:"serialize",value:function(t,e){var n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return zo(n,r,0,n.length-1),e&&e.push(n.buffer,r.buffer),{ids:n,positions:r}}},{key:"deserialize",value:function(e){var n=new t;return n.ids=e.ids,n.positions=e.positions,n.indexed=!0,n}}]),t}();function Oo(t){var e=+t;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:Ro(String(t))}function zo(t,e,n,r){for(;n<r;){for(var i=t[n+r>>1],o=n-1,a=r+1;;){do{o++}while(t[o]<i);do{a--}while(t[a]>i);if(o>=a)break;Do(t,o,a),Do(e,3*o,3*a),Do(e,3*o+1,3*a+1),Do(e,3*o+2,3*a+2)}a-n<r-a?(zo(t,e,n,a),n=a+1):(zo(t,e,a+1,r),r=a)}}function Do(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}Dr("FeaturePositionMap",No);var Fo=p((function t(e,n){d(this,t),this.gl=e.gl,this.location=n})),Bo=function(t){m(n,t);var e=g(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).current=0,i}return p(n,[{key:"set",value:function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}]),n}(Fo),jo=function(t){m(n,t);var e=g(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).current=[0,0,0,0],i}return p(n,[{key:"set",value:function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}]),n}(Fo),Zo=function(t){m(n,t);var e=g(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).current=Wt.transparent,i}return p(n,[{key:"set",value:function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}]),n}(Fo),Uo=new Float32Array(16);function Vo(t){return[Io(255*t.r,255*t.g),Io(255*t.b,255*t.a)]}var qo=function(){function t(e,n,r){d(this,t),this.value=e,this.uniformNames=n.map((function(t){return"u_".concat(t)})),this.type=r}return p(t,[{key:"setUniform",value:function(t,e,n){t.set(n.constantOr(this.value))}},{key:"getBinding",value:function(t,e,n){return"color"===this.type?new Zo(t,e):new Bo(t,e)}}]),t}(),Go=function(){function t(e,n){d(this,t),this.uniformNames=n.map((function(t){return"u_".concat(t)})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}return p(t,[{key:"setConstantPatternPositions",value:function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr}},{key:"setUniform",value:function(t,e,n,r){var i="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&t.set(i)}},{key:"getBinding",value:function(t,e,n){return"u_pattern"===n.substr(0,9)?new jo(t,e):new Bo(t,e)}}]),t}(),Wo=function(){function t(e,n,r,i){d(this,t),this.expression=e,this.type=r,this.maxValue=0,this.paintVertexAttributes=n.map((function(t){return{name:"a_".concat(t),type:"Float32",components:"color"===r?2:1,offset:0}})),this.paintVertexArray=new i}return p(t,[{key:"populatePaintArray",value:function(t,e,n,r,i){var o=this.paintVertexArray.length,a=this.expression.evaluate(new ci(0),e,{},r,[],i);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)}},{key:"updatePaintArray",value:function(t,e,n,r){var i=this.expression.evaluate({zoom:0},n,r);this._setPaintValue(t,e,i)}},{key:"_setPaintValue",value:function(t,e,n){if("color"===this.type)for(var r=Vo(n),i=t;i<e;i++)this.paintVertexArray.emplace(i,r[0],r[1]);else{for(var o=t;o<e;o++)this.paintVertexArray.emplace(o,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}},{key:"upload",value:function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}]),t}(),Ho=function(){function t(e,n,r,i,o,a){d(this,t),this.expression=e,this.uniformNames=n.map((function(t){return"u_".concat(t,"_t")})),this.type=r,this.useIntegerZoom=i,this.zoom=o,this.maxValue=0,this.paintVertexAttributes=n.map((function(t){return{name:"a_".concat(t),type:"Float32",components:"color"===r?4:2,offset:0}})),this.paintVertexArray=new a}return p(t,[{key:"populatePaintArray",value:function(t,e,n,r,i){var o=this.expression.evaluate(new ci(this.zoom),e,{},r,[],i),a=this.expression.evaluate(new ci(this.zoom+1),e,{},r,[],i),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)}},{key:"updatePaintArray",value:function(t,e,n,r){var i=this.expression.evaluate({zoom:this.zoom},n,r),o=this.expression.evaluate({zoom:this.zoom+1},n,r);this._setPaintValue(t,e,i,o)}},{key:"_setPaintValue",value:function(t,e,n,r){if("color"===this.type)for(var i=Vo(n),o=Vo(r),a=t;a<e;a++)this.paintVertexArray.emplace(a,i[0],i[1],o[0],o[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}},{key:"upload",value:function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}},{key:"setUniform",value:function(t,e){var n=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=y(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(r)}},{key:"getBinding",value:function(t,e,n){return new Bo(t,e)}}]),t}(),Xo=function(){function t(e,n,r,i,o,a){d(this,t),this.expression=e,this.type=n,this.useIntegerZoom=r,this.zoom=i,this.layerId=a,this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}return p(t,[{key:"populatePaintArray",value:function(t,e,n){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],n)}},{key:"updatePaintArray",value:function(t,e,n,r,i){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],i)}},{key:"_setPaintValues",value:function(t,e,n,r){if(r&&n){var i=n.min,o=n.mid,a=n.max,s=r[i],l=r[o],u=r[a];if(s&&l&&u)for(var c=t;c<e;c++)this.zoomInPaintVertexArray.emplace(c,l.tl[0],l.tl[1],l.br[0],l.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1],l.pixelRatio,s.pixelRatio),this.zoomOutPaintVertexArray.emplace(c,l.tl[0],l.tl[1],l.br[0],l.br[1],u.tl[0],u.tl[1],u.br[0],u.br[1],l.pixelRatio,u.pixelRatio)}}},{key:"upload",value:function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Co.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Co.members,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}]),t}(),Yo=function(){function t(e,n,r){d(this,t),this.binders={},this._buffers=[];var i=[];for(var o in e.paint._values)if(r(o)){var a=e.paint.get(o);if(a instanceof vi&&Ln(a.property.specification)){var s=Ko(o,e.type),l=a.value,u=a.property.specification.type,c=a.property.useIntegerZoom,h=a.property.specification["property-type"],f="cross-faded"===h||"cross-faded-data-driven"===h;if("constant"===l.kind)this.binders[o]=f?new Go(l.value,s):new qo(l.value,s,u),i.push("/u_".concat(o));else if("source"===l.kind||f){var p=Jo(o,u,"source");this.binders[o]=f?new Xo(l,u,c,n,p,e.id):new Wo(l,s,u,p),i.push("/a_".concat(o))}else{var m=Jo(o,u,"composite");this.binders[o]=new Ho(l,s,u,c,n,m),i.push("/z_".concat(o))}}}this.cacheKey=i.sort().join("")}return p(t,[{key:"getMaxValue",value:function(t){var e=this.binders[t];return e instanceof Wo||e instanceof Ho?e.maxValue:0}},{key:"populatePaintArrays",value:function(t,e,n,r,i){for(var o in this.binders){var a=this.binders[o];(a instanceof Wo||a instanceof Ho||a instanceof Xo)&&a.populatePaintArray(t,e,n,r,i)}}},{key:"setConstantPatternPositions",value:function(t,e){for(var n in this.binders){var r=this.binders[n];r instanceof Go&&r.setConstantPatternPositions(t,e)}}},{key:"updatePaintArrays",value:function(t,e,n,r,i){var o=!1;for(var a in t){var s,l=e.getPositions(a),u=f(l);try{for(u.s();!(s=u.n()).done;){var c=s.value,h=n.feature(c.index);for(var p in this.binders){var d=this.binders[p];if((d instanceof Wo||d instanceof Ho||d instanceof Xo)&&!0===d.expression.isStateDependent){var m=r.paint.get(p);d.expression=m.value,d.updatePaintArray(c.start,c.end,h,t[a],i),o=!0}}}}catch(g){u.e(g)}finally{u.f()}}return o}},{key:"defines",value:function(){var t=[];for(var e in this.binders){var n=this.binders[e];(n instanceof qo||n instanceof Go)&&t.push.apply(t,c(n.uniformNames.map((function(t){return"#define HAS_UNIFORM_".concat(t)}))))}return t}},{key:"getBinderAttributes",value:function(){var t=[];for(var e in this.binders){var n=this.binders[e];if(n instanceof Wo||n instanceof Ho)for(var r=0;r<n.paintVertexAttributes.length;r++)t.push(n.paintVertexAttributes[r].name);else if(n instanceof Xo)for(var i=0;i<Co.members.length;i++)t.push(Co.members[i].name)}return t}},{key:"getBinderUniforms",value:function(){var t=[];for(var e in this.binders){var n=this.binders[e];if(n instanceof qo||n instanceof Go||n instanceof Ho){var r,i=f(n.uniformNames);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.push(o)}}catch(a){i.e(a)}finally{i.f()}}}return t}},{key:"getPaintVertexBuffers",value:function(){return this._buffers}},{key:"getUniforms",value:function(t,e){var n=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof qo||i instanceof Go||i instanceof Ho){var o,a=f(i.uniformNames);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(e[s]){var l=i.getBinding(t,e[s],s);n.push({name:s,property:r,binding:l})}}}catch(u){a.e(u)}finally{a.f()}}}return n}},{key:"setUniforms",value:function(t,e,n,r){var i,o=f(e);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=a.name,l=a.property,u=a.binding;this.binders[l].setUniform(u,r,n.get(l),s)}}catch(c){o.e(c)}finally{o.f()}}},{key:"updatePaintBuffers",value:function(t){for(var e in this._buffers=[],this.binders){var n=this.binders[e];if(t&&n instanceof Xo){var r=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;r&&this._buffers.push(r)}else(n instanceof Wo||n instanceof Ho)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}},{key:"upload",value:function(t){for(var e in this.binders){var n=this.binders[e];(n instanceof Wo||n instanceof Ho||n instanceof Xo)&&n.upload(t)}this.updatePaintBuffers()}},{key:"destroy",value:function(){for(var t in this.binders){var e=this.binders[t];(e instanceof Wo||e instanceof Ho||e instanceof Xo)&&e.destroy()}}}]),t}(),$o=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};d(this,t),this.programConfigurations={};var i,o=f(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;this.programConfigurations[a.id]=new Yo(a,n,r)}}catch(s){o.e(s)}finally{o.f()}this.needsUpload=!1,this._featureMap=new No,this._bufferOffset=0}return p(t,[{key:"populatePaintArrays",value:function(t,e,n,r,i,o){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,r,i,o);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}},{key:"updatePaintArrays",value:function(t,e,n,r){var i,o=f(n);try{for(o.s();!(i=o.n()).done;){var a=i.value;this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,r)||this.needsUpload}}catch(s){o.e(s)}finally{o.f()}}},{key:"get",value:function(t){return this.programConfigurations[t]}},{key:"upload",value:function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}},{key:"destroy",value:function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()}}]),t}();function Ko(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace("".concat(e,"-"),"").replace(/-/g,"_")]}function Jo(t,e,n){var r={color:{source:zi,composite:Qi},number:{source:Xi,composite:zi}},i=function(t){return{"line-pattern":{source:go,composite:go},"fill-pattern":{source:go,composite:go},"fill-extrusion-pattern":{source:go,composite:go}}[t]}(t);return i&&i[n]||r[e][n]}Dr("ConstantBinder",qo),Dr("CrossFadedConstantBinder",Go),Dr("SourceExpressionBinder",Wo),Dr("CrossFadedCompositeBinder",Xo),Dr("CompositeExpressionBinder",Ho),Dr("ProgramConfiguration",Yo,{omit:["_buffers"]}),Dr("ProgramConfigurationSet",$o);var Qo=8192,ta=Math.pow(2,14)-1,ea=-ta-1;function na(t){for(var e=Qo/t.extent,n=t.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],o=0;o<i.length;o++){var a=i[o],s=Math.round(a.x*e),l=Math.round(a.y*e);a.x=y(s,ea,ta),a.y=y(l,ea,ta),(s<a.x||s>a.x+1||l<a.y||l>a.y+1)&&C("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function ra(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?na(t):[]}}function ia(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}var oa=function(){function t(e){d(this,t),this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new co,this.indexArray=new wo,this.segments=new Eo,this.programConfigurations=new $o(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))}return p(t,[{key:"populate",value:function(t,e,n){var r=this.layers[0],i=[],o=null,a=!1;"circle"===r.type&&(a=!(o=r.layout.get("circle-sort-key")).isConstant());var s,l=f(t);try{for(l.s();!(s=l.n()).done;){var u=s.value,c=u.feature,h=u.id,p=u.index,d=u.sourceLayerIndex,m=this.layers[0]._featureFilter.needGeometry,g=ra(c,m);if(this.layers[0]._featureFilter.filter(new ci(this.zoom),g,n)){var v=a?o.evaluate(g,{},n):void 0,y={id:h,properties:c.properties,type:c.type,sourceLayerIndex:d,index:p,geometry:m?g.geometry:na(c),patterns:{},sortKey:v};i.push(y)}}}catch(I){l.e(I)}finally{l.f()}a&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var _=0,x=i;_<x.length;_++){var b=x[_],w=b.geometry,k=b.index,S=b.sourceLayerIndex,E=t[k].feature;this.addFeature(b,w,k,n),e.featureIndex.insert(E,w,k,S,this.index)}}},{key:"update",value:function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,So),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"addFeature",value:function(t,e,n,r){var i,o=f(e);try{for(o.s();!(i=o.n()).done;){var a,s=i.value,l=f(s);try{for(l.s();!(a=l.n()).done;){var u=a.value,c=u.x,h=u.y;if(!(c<0||c>=Qo||h<0||h>=Qo)){var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),d=p.vertexLength;ia(this.layoutVertexArray,c,h,-1,-1),ia(this.layoutVertexArray,c,h,1,-1),ia(this.layoutVertexArray,c,h,1,1),ia(this.layoutVertexArray,c,h,-1,1),this.indexArray.emplaceBack(d,d+1,d+2),this.indexArray.emplaceBack(d,d+3,d+2),p.vertexLength+=4,p.primitiveLength+=2}}}catch(m){l.e(m)}finally{l.f()}}}catch(m){o.e(m)}finally{o.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},r)}}]),t}();function aa(t,e){for(var n=0;n<t.length;n++)if(ma(e,t[n]))return!0;for(var r=0;r<e.length;r++)if(ma(t,e[r]))return!0;return!!ca(t,e)}function sa(t,e,n){return!!ma(t,e)||!!fa(e,t,n)}function la(t,e){if(1===t.length)return da(e,t[0]);for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)if(ma(t,r[i]))return!0;for(var o=0;o<t.length;o++)if(da(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(ca(t,e[a]))return!0;return!1}function ua(t,e,n){if(t.length>1){if(ca(t,e))return!0;for(var r=0;r<e.length;r++)if(fa(e[r],t,n))return!0}for(var i=0;i<t.length;i++)if(fa(t[i],e,n))return!0;return!1}function ca(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],o=0;o<e.length-1;o++)if(ha(r,i,e[o],e[o+1]))return!0;return!1}function ha(t,e,n,r){return A(t,n,r)!==A(e,n,r)&&A(t,e,n)!==A(t,e,r)}function fa(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++)if(pa(t,e[i-1],e[i])<r)return!0;return!1}function pa(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return t.distSqr(i<0?e:i>1?n:n.sub(e)._mult(i)._add(e))}function da(t,e){for(var n,r,i,o=!1,a=0;a<t.length;a++)for(var s=0,l=(n=t[a]).length-1;s<n.length;l=s++)r=n[s],i=n[l],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function ma(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function ga(t,e,n){var r=n[0],i=n[2];if(t.x<r.x&&e.x<r.x||t.x>i.x&&e.x>i.x||t.y<r.y&&e.y<r.y||t.y>i.y&&e.y>i.y)return!1;var o=A(t,e,n[0]);return o!==A(t,e,n[1])||o!==A(t,e,n[2])||o!==A(t,e,n[3])}function va(t,e,n){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).getMaxValue(t)}function ya(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function _a(t,e,n,r,i){if(!e[0]&&!e[1])return t;var o=F.convert(e)._mult(i);"viewport"===n&&o._rotate(-r);for(var a=[],s=0;s<t.length;s++)a.push(t[s].sub(o));return a}Dr("CircleBucket",oa,{omit:["layers"]});var xa=new Si({"circle-sort-key":new xi(gt.layout_circle["circle-sort-key"])}),ba={paint:new Si({"circle-radius":new xi(gt.paint_circle["circle-radius"]),"circle-color":new xi(gt.paint_circle["circle-color"]),"circle-blur":new xi(gt.paint_circle["circle-blur"]),"circle-opacity":new xi(gt.paint_circle["circle-opacity"]),"circle-translate":new _i(gt.paint_circle["circle-translate"]),"circle-translate-anchor":new _i(gt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new _i(gt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new _i(gt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new xi(gt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new xi(gt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new xi(gt.paint_circle["circle-stroke-opacity"])}),layout:xa},wa="undefined"!=typeof Float32Array?Float32Array:Array;function ka(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Sa(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],m=e[12],g=e[13],v=e[14],y=e[15],_=n[0],x=n[1],b=n[2],w=n[3];return t[0]=_*r+x*s+b*h+w*m,t[1]=_*i+x*l+b*f+w*g,t[2]=_*o+x*u+b*p+w*v,t[3]=_*a+x*c+b*d+w*y,t[4]=(_=n[4])*r+(x=n[5])*s+(b=n[6])*h+(w=n[7])*m,t[5]=_*i+x*l+b*f+w*g,t[6]=_*o+x*u+b*p+w*v,t[7]=_*a+x*c+b*d+w*y,t[8]=(_=n[8])*r+(x=n[9])*s+(b=n[10])*h+(w=n[11])*m,t[9]=_*i+x*l+b*f+w*g,t[10]=_*o+x*u+b*p+w*v,t[11]=_*a+x*c+b*d+w*y,t[12]=(_=n[12])*r+(x=n[13])*s+(b=n[14])*h+(w=n[15])*m,t[13]=_*i+x*l+b*f+w*g,t[14]=_*o+x*u+b*p+w*v,t[15]=_*a+x*c+b*d+w*y,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Ea,Ia=Sa;function Ca(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function Aa(t,e){var n=Ca([],[t.x,t.y,0,1],e);return new F(n[0]/n[3],n[1]/n[3])}Ea=new wa(4),wa!=Float32Array&&(Ea[0]=0,Ea[1]=0,Ea[2]=0,Ea[3]=0);var Pa=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n)}(oa);Dr("HeatmapBucket",Pa,{omit:["layers"]});var Ta={paint:new Si({"heatmap-radius":new xi(gt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new xi(gt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new _i(gt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ki(gt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new _i(gt.paint_heatmap["heatmap-opacity"])})};function Ma(t,e,n,r){var i=e.width,o=e.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*o*n)throw new RangeError("mismatched image size. expected: ".concat(r.length," but got: ").concat(i*o*n))}else r=new Uint8Array(i*o*n);return t.width=i,t.height=o,t.data=r,t}function La(t,e,n){var r=e.width,i=e.height;if(r!==t.width||i!==t.height){var o=Ma({},{width:r,height:i},n);Ra(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=o.data}}function Ra(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,l=0;l<i.height;l++)for(var u=((n.y+l)*t.width+n.x)*o,c=((r.y+l)*e.width+r.x)*o,h=0;h<i.width*o;h++)s[c+h]=a[u+h];return e}var Na=function(){function t(e,n){d(this,t),Ma(this,e,1,n)}return p(t,[{key:"resize",value:function(t){La(this,t,1)}},{key:"clone",value:function(){return new t({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(t,e,n,r,i){Ra(t,e,n,r,i,1)}}]),t}(),Oa=function(){function t(e,n){d(this,t),Ma(this,e,4,n)}return p(t,[{key:"resize",value:function(t){La(this,t,4)}},{key:"replace",value:function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}},{key:"clone",value:function(){return new t({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(t,e,n,r,i){Ra(t,e,n,r,i,4)}}]),t}();function za(t){var e={},n=t.resolution||256,r=t.clips?t.clips.length:1,i=t.image||new Oa({width:n,height:r}),o=function(n,r,o){e[t.evaluationKey]=o;var a=t.expression.evaluate(e);i.data[n+r+0]=Math.floor(255*a.r/a.a),i.data[n+r+1]=Math.floor(255*a.g/a.a),i.data[n+r+2]=Math.floor(255*a.b/a.a),i.data[n+r+3]=Math.floor(255*a.a)};if(t.clips)for(var a=0,s=0;a<r;++a,s+=4*n)for(var l=0,u=0;l<n;l++,u+=4){var c=l/(n-1),h=t.clips[a];o(s,u,h.start*(1-c)+h.end*c)}else for(var f=0,p=0;f<n;f++,p+=4)o(0,p,f/(n-1));return i}Dr("AlphaImage",Na),Dr("RGBAImage",Oa);var Da={paint:new Si({"hillshade-illumination-direction":new _i(gt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new _i(gt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new _i(gt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new _i(gt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new _i(gt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new _i(gt.paint_hillshade["hillshade-accent-color"])})},Fa=Ti([{name:"a_pos",components:2,type:"Int16"}],4).members,Ba={exports:{}};function ja(t,e,n){n=n||2;var r,i,o,a,s,l,u,c=e&&e.length,h=c?e[0]*n:t.length,f=Za(t,0,h,n,!0),p=[];if(!f||f.next===f.prev)return p;if(c&&(f=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=Za(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(Ja(a));for(s.sort(Xa),i=0;i<s.length;i++)n=Ua(n=Ya(s[i],n),n.next);return n}(t,e,f,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<h;d+=n)(s=t[d])<r&&(r=s),(l=t[d+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-r,a-i))?1/u:0}return Va(f,p,n,r,i,u),p}function Za(t,e,n,r,i){var o,a;if(i===hs(t,e,n,r)>0)for(o=e;o<n;o+=r)a=ls(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=ls(o,t[o],t[o+1],a);return a&&ns(a,a.next)&&(us(a),a=a.next),a}function Ua(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!ns(r,r.next)&&0!==es(r.prev,r,r.next))r=r.next;else{if(us(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Va(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Ka(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,l,u=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<u&&(s++,r=r.nextZ);e++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(t,r,i,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?Ga(t,r,i,o):qa(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),us(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?Va(t=Wa(Ua(t),e,n),e,n,r,i,o,2):2===a&&Ha(t,e,n,r,i,o):Va(Ua(t),e,n,r,i,o,1);break}}}function qa(t){var e=t.prev,n=t,r=t.next;if(es(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Qa(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&es(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Ga(t,e,n,r){var i=t.prev,o=t,a=t.next;if(es(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,u=Ka(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,e,n,r),c=Ka(s,l,e,n,r),h=t.prevZ,f=t.nextZ;h&&h.z>=u&&f&&f.z<=c;){if(h!==t.prev&&h!==t.next&&Qa(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&es(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,f!==t.prev&&f!==t.next&&Qa(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&es(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;h&&h.z>=u;){if(h!==t.prev&&h!==t.next&&Qa(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&es(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;f&&f.z<=c;){if(f!==t.prev&&f!==t.next&&Qa(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&es(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function Wa(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!ns(i,o)&&rs(i,r,r.next,o)&&as(i,o)&&as(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),us(r),us(r.next),r=t=o),r=r.next}while(r!==t);return Ua(r)}function Ha(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&ts(a,s)){var l=ss(a,s);return a=Ua(a,a.next),l=Ua(l,l.next),Va(a,e,n,r,i,o),void Va(l,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function Xa(t,e){return t.x-e.x}function Ya(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n;var l,u=n,c=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&Qa(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),as(r,t)&&(l<f||l===f&&(r.x>n.x||r.x===n.x&&$a(n,r)))&&(n=r,f=l)),r=r.next}while(r!==u);return n}(t,e);if(!n)return e;var r=ss(n,t),i=Ua(n,n.next);return Ua(r,r.next),e===n?i:e}function $a(t,e){return es(t.prev,t,e.prev)<0&&es(e.next,t,t.next)<0}function Ka(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ja(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Qa(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function ts(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&rs(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(as(t,e)&&as(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(es(t.prev,t,e.prev)||es(t,e.prev,e))||ns(t,e)&&es(t.prev,t,t.next)>0&&es(e.prev,e,e.next)>0)}function es(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function ns(t,e){return t.x===e.x&&t.y===e.y}function rs(t,e,n,r){var i=os(es(t,e,n)),o=os(es(t,e,r)),a=os(es(n,r,t)),s=os(es(n,r,e));return i!==o&&a!==s||!(0!==i||!is(t,n,e))||!(0!==o||!is(t,r,e))||!(0!==a||!is(n,t,r))||!(0!==s||!is(n,e,r))}function is(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function os(t){return t>0?1:t<0?-1:0}function as(t,e){return es(t.prev,t,t.next)<0?es(t,e,t.next)>=0&&es(t,t.prev,e)>=0:es(t,e,t.prev)<0||es(t,t.next,e)<0}function ss(t,e){var n=new cs(t.i,t.x,t.y),r=new cs(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function ls(t,e,n,r){var i=new cs(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function us(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function cs(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function hs(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}Ba.exports=ja,Ba.exports.default=ja,ja.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(hs(t,0,i?e[0]*n:t.length,n));if(i)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(hs(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var l=0;for(a=0;a<r.length;a+=3){var u=r[a]*n,c=r[a+1]*n,h=r[a+2]*n;l+=Math.abs((t[u]-t[h])*(t[c+1]-t[u+1])-(t[u]-t[c])*(t[h+1]-t[u+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},ja.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&n.holes.push(r+=t[i-1].length)}return n};var fs=Ba.exports;function ps(t,e,n,r,i){ds(t,e,n||0,r||t.length-1,i||gs)}function ds(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=e-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);ds(t,e,Math.max(n,Math.floor(e-a*l/o+u)),Math.min(r,Math.floor(e+(o-a)*l/o+u)),i)}var c=t[e],h=n,f=r;for(ms(t,n,e),i(t[r],c)>0&&ms(t,n,r);h<f;){for(ms(t,h,f),h++,f--;i(t[h],c)<0;)h++;for(;i(t[f],c)>0;)f--}0===i(t[n],c)?ms(t,n,f):ms(t,++f,r),f<=e&&(n=f+1),e<=f&&(r=f-1)}}function ms(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function gs(t,e){return t<e?-1:t>e?1:0}function vs(t,e){var n=t.length;if(n<=1)return[t];for(var r,i,o=[],a=0;a<n;a++){var s=P(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&o.push(r),r=[t[a]]):r.push(t[a]))}if(r&&o.push(r),e>1)for(var l=0;l<o.length;l++)o[l].length<=e||(ps(o[l],e,1,o[l].length-1,ys),o[l]=o[l].slice(0,e));return o}function ys(t,e){return e.area-t.area}function _s(t,e,n){var r,i=n.patternDependencies,o=!1,a=f(e);try{for(a.s();!(r=a.n()).done;){var s=r.value.paint.get("".concat(t,"-pattern"));s.isConstant()||(o=!0);var l=s.constantOr(null);l&&(o=!0,i[l.to]=!0,i[l.from]=!0)}}catch(u){a.e(u)}finally{a.f()}return o}function xs(t,e,n,r,i){var o,a=i.patternDependencies,s=f(e);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=l.paint.get("".concat(t,"-pattern")).value;if("constant"!==u.kind){var c=u.evaluate({zoom:r-1},n,{},i.availableImages),h=u.evaluate({zoom:r},n,{},i.availableImages),p=u.evaluate({zoom:r+1},n,{},i.availableImages);c=c&&c.name?c.name:c,h=h&&h.name?h.name:h,p=p&&p.name?p.name:p,a[c]=!0,a[h]=!0,a[p]=!0,n.patterns[l.id]={min:c,mid:h,max:p}}}}catch(d){s.e(d)}finally{s.f()}return n}var bs=function(){function t(e){d(this,t),this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ho,this.indexArray=new wo,this.indexArray2=new ko,this.programConfigurations=new $o(e.layers,e.zoom),this.segments=new Eo,this.segments2=new Eo,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))}return p(t,[{key:"populate",value:function(t,e,n){this.hasPattern=_s("fill",this.layers,e);var r,i=this.layers[0].layout.get("fill-sort-key"),o=!i.isConstant(),a=[],s=f(t);try{for(s.s();!(r=s.n()).done;){var l=r.value,u=l.feature,c=l.id,h=l.index,p=l.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,m=ra(u,d);if(this.layers[0]._featureFilter.filter(new ci(this.zoom),m,n)){var g=o?i.evaluate(m,{},n,e.availableImages):void 0,v={id:c,properties:u.properties,type:u.type,sourceLayerIndex:p,index:h,geometry:d?m.geometry:na(u),patterns:{},sortKey:g};a.push(v)}}}catch(E){s.e(E)}finally{s.f()}o&&a.sort((function(t,e){return t.sortKey-e.sortKey}));for(var y=0,_=a;y<_.length;y++){var x=_[y],b=x.geometry,w=x.index,k=x.sourceLayerIndex;if(this.hasPattern){var S=xs("fill",this.layers,x,this.zoom,e);this.patternFeatures.push(S)}else this.addFeature(x,b,w,n,{});e.featureIndex.insert(t[w].feature,b,w,k,this.index)}}},{key:"update",value:function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}},{key:"addFeatures",value:function(t,e,n){var r,i=f(this.patternFeatures);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.addFeature(o,o.geometry,o.index,e,n)}}catch(a){i.e(a)}finally{i.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Fa),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}},{key:"addFeature",value:function(t,e,n,r,i){var o,a=f(vs(e,500));try{for(a.s();!(o=a.n()).done;){var s,l=o.value,u=0,c=f(l);try{for(c.s();!(s=c.n()).done;)u+=s.value.length}catch(S){c.e(S)}finally{c.f()}var h,p=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray),d=p.vertexLength,m=[],g=[],v=f(l);try{for(v.s();!(h=v.n()).done;){var y=h.value;if(0!==y.length){y!==l[0]&&g.push(m.length/2);var _=this.segments2.prepareSegment(y.length,this.layoutVertexArray,this.indexArray2),x=_.vertexLength;this.layoutVertexArray.emplaceBack(y[0].x,y[0].y),this.indexArray2.emplaceBack(x+y.length-1,x),m.push(y[0].x),m.push(y[0].y);for(var b=1;b<y.length;b++)this.layoutVertexArray.emplaceBack(y[b].x,y[b].y),this.indexArray2.emplaceBack(x+b-1,x+b),m.push(y[b].x),m.push(y[b].y);_.vertexLength+=y.length,_.primitiveLength+=y.length}}}catch(S){v.e(S)}finally{v.f()}for(var w=fs(m,g),k=0;k<w.length;k+=3)this.indexArray.emplaceBack(d+w[k],d+w[k+1],d+w[k+2]);p.vertexLength+=u,p.primitiveLength+=w.length/3}}catch(S){a.e(S)}finally{a.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)}}]),t}();Dr("FillBucket",bs,{omit:["layers","patternFeatures"]});var ws=new Si({"fill-sort-key":new xi(gt.layout_fill["fill-sort-key"])}),ks={paint:new Si({"fill-antialias":new _i(gt.paint_fill["fill-antialias"]),"fill-opacity":new xi(gt.paint_fill["fill-opacity"]),"fill-color":new xi(gt.paint_fill["fill-color"]),"fill-outline-color":new xi(gt.paint_fill["fill-outline-color"]),"fill-translate":new _i(gt.paint_fill["fill-translate"]),"fill-translate-anchor":new _i(gt.paint_fill["fill-translate-anchor"]),"fill-pattern":new bi(gt.paint_fill["fill-pattern"])}),layout:ws},Ss=Ti([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Es={},Is=F,Cs=As;function As(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(Ps,this,e)}function Ps(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function Ts(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)r+=((n=t[a]).x-(e=t[i]).x)*(e.y+n.y);return r}As.types=["Unknown","Point","LineString","Polygon"],As.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,s=[];t.pos<n;){if(i<=0){var l=t.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new Is(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},As.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(r<=0){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=t.readSVarint())<l&&(l=o),o>u&&(u=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,u]},As.prototype.toGeoJSON=function(t,e,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),u=As.types[this.type];function c(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];c(l=h);break;case 2:for(r=0;r<l.length;r++)c(l[r]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=Ts(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)c(l[r][i])}1===l.length?l=l[0]:u="Multi"+u;var f={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(f.id=this.id),f};var Ms=Cs,Ls=Rs;function Rs(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Ns,this,e),this.length=this._features.length}function Ns(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}Rs.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Ms(this._pbf,e,this.extent,this._keys,this._values)};var Os=Ls;function zs(t,e,n){if(3===t){var r=new Os(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}Es.VectorTile=function(t,e){this.layers=t.readFields(zs,{},e)},Es.VectorTileFeature=Cs,Es.VectorTileLayer=Ls;var Ds=Es.VectorTileFeature.types,Fs=Math.pow(2,13);function Bs(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,2*Math.floor(r*Fs)+a,i*Fs*2,o*Fs*2,Math.round(s))}var js=function(){function t(e){d(this,t),this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new fo,this.indexArray=new wo,this.programConfigurations=new $o(e.layers,e.zoom),this.segments=new Eo,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))}return p(t,[{key:"populate",value:function(t,e,n){this.features=[],this.hasPattern=_s("fill-extrusion",this.layers,e);var r,i=f(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.feature,s=o.id,l=o.index,u=o.sourceLayerIndex,c=this.layers[0]._featureFilter.needGeometry,h=ra(a,c);if(this.layers[0]._featureFilter.filter(new ci(this.zoom),h,n)){var p={id:s,sourceLayerIndex:u,index:l,geometry:c?h.geometry:na(a),properties:a.properties,type:a.type,patterns:{}};this.hasPattern?this.features.push(xs("fill-extrusion",this.layers,p,this.zoom,e)):this.addFeature(p,p.geometry,l,n,{}),e.featureIndex.insert(a,p.geometry,l,u,this.index,!0)}}}catch(d){i.e(d)}finally{i.f()}}},{key:"addFeatures",value:function(t,e,n){var r,i=f(this.features);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.geometry;this.addFeature(o,a,o.index,e,n)}}catch(s){i.e(s)}finally{i.f()}}},{key:"update",value:function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ss),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"addFeature",value:function(t,e,n,r,i){var o,a=f(vs(e,500));try{for(a.s();!(o=a.n()).done;){var s,l=o.value,u=0,c=f(l);try{for(c.s();!(s=c.n()).done;)u+=s.value.length}catch(R){c.e(R)}finally{c.f()}var h,p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),d=f(l);try{for(d.s();!(h=d.n()).done;){var m=h.value;if(0!==m.length&&!Us(m))for(var g=0,v=0;v<m.length;v++){var y=m[v];if(v>=1){var _=m[v-1];if(!Zs(y,_)){p.vertexLength+4>Eo.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var x=y.sub(_)._perp()._unit(),b=_.dist(y);g+b>32768&&(g=0),Bs(this.layoutVertexArray,y.x,y.y,x.x,x.y,0,0,g),Bs(this.layoutVertexArray,y.x,y.y,x.x,x.y,0,1,g),g+=b,Bs(this.layoutVertexArray,_.x,_.y,x.x,x.y,0,0,g),Bs(this.layoutVertexArray,_.x,_.y,x.x,x.y,0,1,g);var w=p.vertexLength;this.indexArray.emplaceBack(w,w+2,w+1),this.indexArray.emplaceBack(w+1,w+2,w+3),p.vertexLength+=4,p.primitiveLength+=2}}}}}catch(R){d.e(R)}finally{d.f()}if(p.vertexLength+u>Eo.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray)),"Polygon"===Ds[t.type]){var k,S=[],E=[],I=p.vertexLength,C=f(l);try{for(C.s();!(k=C.n()).done;){var A=k.value;if(0!==A.length){A!==l[0]&&E.push(S.length/2);for(var P=0;P<A.length;P++){var T=A[P];Bs(this.layoutVertexArray,T.x,T.y,0,0,1,1,0),S.push(T.x),S.push(T.y)}}}}catch(R){C.e(R)}finally{C.f()}for(var M=fs(S,E),L=0;L<M.length;L+=3)this.indexArray.emplaceBack(I+M[L],I+M[L+2],I+M[L+1]);p.primitiveLength+=M.length/3,p.vertexLength+=u}}}catch(R){a.e(R)}finally{a.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)}}]),t}();function Zs(t,e){return t.x===e.x&&(t.x<0||t.x>Qo)||t.y===e.y&&(t.y<0||t.y>Qo)}function Us(t){return t.every((function(t){return t.x<0}))||t.every((function(t){return t.x>Qo}))||t.every((function(t){return t.y<0}))||t.every((function(t){return t.y>Qo}))}Dr("FillExtrusionBucket",js,{omit:["layers","features"]});var Vs={paint:new Si({"fill-extrusion-opacity":new _i(gt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new xi(gt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new _i(gt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new _i(gt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new bi(gt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new xi(gt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new xi(gt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new _i(gt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function qs(t,e){return t.x*e.x+t.y*e.y}function Gs(t,e){if(1===t.length){for(var n,r=0,i=e[r++];!n||i.equals(n);)if(!(n=e[r++]))return 1/0;for(;r<e.length;r++){var o=e[r],a=t[0],s=n.sub(i),l=o.sub(i),u=a.sub(i),c=qs(s,s),h=qs(s,l),p=qs(l,l),d=qs(u,s),m=qs(u,l),g=c*p-h*h,v=(p*d-h*m)/g,y=(c*m-h*d)/g,_=i.z*(1-v-y)+n.z*v+o.z*y;if(isFinite(_))return _}return 1/0}var x,b=1/0,w=f(e);try{for(w.s();!(x=w.n()).done;){var k=x.value;b=Math.min(b,k.z)}}catch(S){w.e(S)}finally{w.f()}return b}var Ws=Ti([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Hs=Ti([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Xs=Es.VectorTileFeature.types,Ys=Math.cos(Math.PI/180*37.5),$s=Math.pow(2,14)/.5,Ks=function(){function t(e){var n=this;d(this,t),this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(t){n.gradients[t.id]={}})),this.layoutVertexArray=new po,this.layoutVertexArray2=new mo,this.indexArray=new wo,this.programConfigurations=new $o(e.layers,e.zoom),this.segments=new Eo,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))}return p(t,[{key:"populate",value:function(t,e,n){this.hasPattern=_s("line",this.layers,e);var r,i=this.layers[0].layout.get("line-sort-key"),o=!i.isConstant(),a=[],s=f(t);try{for(s.s();!(r=s.n()).done;){var l=r.value,u=l.feature,c=l.id,h=l.index,p=l.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,m=ra(u,d);if(this.layers[0]._featureFilter.filter(new ci(this.zoom),m,n)){var g=o?i.evaluate(m,{},n):void 0,v={id:c,properties:u.properties,type:u.type,sourceLayerIndex:p,index:h,geometry:d?m.geometry:na(u),patterns:{},sortKey:g};a.push(v)}}}catch(E){s.e(E)}finally{s.f()}o&&a.sort((function(t,e){return t.sortKey-e.sortKey}));for(var y=0,_=a;y<_.length;y++){var x=_[y],b=x.geometry,w=x.index,k=x.sourceLayerIndex;if(this.hasPattern){var S=xs("line",this.layers,x,this.zoom,e);this.patternFeatures.push(S)}else this.addFeature(x,b,w,n,{});e.featureIndex.insert(t[w].feature,b,w,k,this.index)}}},{key:"update",value:function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}},{key:"addFeatures",value:function(t,e,n){var r,i=f(this.patternFeatures);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.addFeature(o,o.geometry,o.index,e,n)}}catch(a){i.e(a)}finally{i.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Hs)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ws),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"lineFeatureClips",value:function(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}},{key:"addFeature",value:function(t,e,n,r,i){var o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),l=o.get("line-miter-limit"),u=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);var c,h=f(e);try{for(h.s();!(c=h.n()).done;){var p=c.value;this.addLine(p,t,a,s,l,u)}}catch(d){h.e(d)}finally{h.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)}},{key:"addLine",value:function(t,e,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var a=0;a<t.length-1;a++)this.totalDistance+=t[a].dist(t[a+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===Xs[e.type],l=t.length;l>=2&&t[l-1].equals(t[l-2]);)l--;for(var u=0;u<l-1&&t[u].equals(t[u+1]);)u++;if(!(l<(s?3:2))){"bevel"===n&&(i=1.05);var c,h,f,p,d,m=this.overscaling<=16?122880/(512*this.overscaling):0,g=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);this.e1=this.e2=-1,s&&(c=t[l-2],d=t[u].sub(c)._unit()._perp());for(var v=u;v<l;v++)if(!(f=v===l-1?s?t[u+1]:void 0:t[v+1])||!t[v].equals(f)){d&&(p=d),c&&(h=c),c=t[v],d=f?f.sub(c)._unit()._perp():p;var y=(p=p||d).add(d);0===y.x&&0===y.y||y._unit();var _=p.x*d.x+p.y*d.y,x=y.x*d.x+y.y*d.y,b=0!==x?1/x:1/0,w=2*Math.sqrt(2-2*x),k=x<Ys&&h&&f,S=p.x*d.y-p.y*d.x>0;if(k&&v>u){var E=c.dist(h);if(E>2*m){var I=c.sub(c.sub(h)._mult(m/E)._round());this.updateDistance(h,I),this.addCurrentVertex(I,p,0,0,g),h=I}}var C=h&&f,A=C?n:s?"butt":r;if(C&&"round"===A&&(b<o?A="miter":b<=2&&(A="fakeround")),"miter"===A&&b>i&&(A="bevel"),"bevel"===A&&(b>2&&(A="flipbevel"),b<i&&(A="miter")),h&&this.updateDistance(h,c),"miter"===A)y._mult(b),this.addCurrentVertex(c,y,0,0,g);else if("flipbevel"===A){if(b>100)y=d.mult(-1);else{var P=b*p.add(d).mag()/p.sub(d).mag();y._perp()._mult(P*(S?-1:1))}this.addCurrentVertex(c,y,0,0,g),this.addCurrentVertex(c,y.mult(-1),0,0,g)}else if("bevel"===A||"fakeround"===A){var T=-Math.sqrt(b*b-1),M=S?T:0,L=S?0:T;if(h&&this.addCurrentVertex(c,p,M,L,g),"fakeround"===A)for(var R=Math.round(180*w/Math.PI/20),N=1;N<R;N++){var O=N/R;if(.5!==O){var z=O-.5;O+=O*z*(O-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*z*z+(.848013+_*(.215638*_-1.06021)))}var D=d.sub(p)._mult(O)._add(p)._unit()._mult(S?-1:1);this.addHalfVertex(c,D.x,D.y,!1,S,0,g)}f&&this.addCurrentVertex(c,d,-M,-L,g)}else if("butt"===A)this.addCurrentVertex(c,y,0,0,g);else if("square"===A){var F=h?1:-1;this.addCurrentVertex(c,y,F,F,g)}else"round"===A&&(h&&(this.addCurrentVertex(c,p,0,0,g),this.addCurrentVertex(c,p,1,1,g,!0)),f&&(this.addCurrentVertex(c,d,-1,-1,g,!0),this.addCurrentVertex(c,d,0,0,g)));if(k&&v<l-1){var B=c.dist(f);if(B>2*m){var j=c.add(f.sub(c)._mult(m/B)._round());this.updateDistance(c,j),this.addCurrentVertex(j,d,0,0,g),c=j}}}}}},{key:"addCurrentVertex",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,o,!1,n,i),this.addHalfVertex(t,a,s,o,!0,-r,i),this.distance>$s/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,n,r,i,o))}},{key:"addHalfVertex",value:function(t,e,n,r,i,o,a){var s=t.x,l=t.y,u=.5*(this.lineClips?this.scaledDistance*($s-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(r?1:0),(l<<1)+(i?1:0),Math.round(63*e)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1)|(63&u)<<2,u>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var c=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,c),a.primitiveLength++),i?this.e2=c:this.e1=c}},{key:"updateScaledDistance",value:function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}},{key:"updateDistance",value:function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}]),t}();Dr("LineBucket",Ks,{omit:["layers","patternFeatures"]});var Js=new Si({"line-cap":new _i(gt.layout_line["line-cap"]),"line-join":new xi(gt.layout_line["line-join"]),"line-miter-limit":new _i(gt.layout_line["line-miter-limit"]),"line-round-limit":new _i(gt.layout_line["line-round-limit"]),"line-sort-key":new xi(gt.layout_line["line-sort-key"])}),Qs={paint:new Si({"line-opacity":new xi(gt.paint_line["line-opacity"]),"line-color":new xi(gt.paint_line["line-color"]),"line-translate":new _i(gt.paint_line["line-translate"]),"line-translate-anchor":new _i(gt.paint_line["line-translate-anchor"]),"line-width":new xi(gt.paint_line["line-width"]),"line-gap-width":new xi(gt.paint_line["line-gap-width"]),"line-offset":new xi(gt.paint_line["line-offset"]),"line-blur":new xi(gt.paint_line["line-blur"]),"line-dasharray":new wi(gt.paint_line["line-dasharray"]),"line-pattern":new bi(gt.paint_line["line-pattern"]),"line-gradient":new ki(gt.paint_line["line-gradient"])}),layout:Js},tl=new(function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"possiblyEvaluate",value:function(t,e){return e=new ci(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),a(s(n.prototype),"possiblyEvaluate",this).call(this,t,e)}},{key:"evaluate",value:function(t,e,r,i){return e=x({},e,{zoom:Math.floor(e.zoom)}),a(s(n.prototype),"evaluate",this).call(this,t,e,r,i)}}]),n}(xi))(Qs.paint.properties["line-width"].specification);function el(t,e){return e>0?e+2*t:t}tl.useIntegerZoom=!0;var nl=Ti([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),rl=Ti([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ti([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var il=Ti([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Ti([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var ol=Ti([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),al=Ti([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function sl(t,e,n){return t.sections.forEach((function(t){t.text=function(t,e,n){var r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),ui.applyArabicShaping&&(t=ui.applyArabicShaping(t)),t}(t.text,e,n)})),t}Ti([{name:"triangle",components:3,type:"Uint16"}]),Ti([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ti([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ti([{type:"Float32",name:"offsetX"}]),Ti([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ll={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},ul=24,cl=pl,hl=function(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},fl=function(t,e,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?f/l:f*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*l-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[n+p]=255&a,p+=d,a/=256,u-=8);t[n+p-d]|=128*m};function pl(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}pl.Varint=0,pl.Fixed64=1,pl.Bytes=2,pl.Fixed32=5;var dl,ml=4294967296,gl=1/ml,vl="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function yl(t){return t.type===pl.Bytes?t.readVarint()+t.pos:t.pos+1}function _l(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function xl(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function bl(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function wl(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function kl(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function Sl(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function El(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function Il(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function Cl(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function Al(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function Pl(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function Tl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Ml(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function Ll(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Rl(t,e,n){1===t&&n.readMessage(Nl,e)}function Nl(t,e,n){if(3===t){var r=n.readMessage(Ol,{}),i=r.id,o=r.bitmap,a=r.width,s=r.height,l=r.left,u=r.top,c=r.advance;e.push({id:i,bitmap:new Na({width:a+6,height:s+6},o),metrics:{width:a,height:s,left:l,top:u,advance:c}})}}function Ol(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function zl(t){var e,n=0,r=0,i=f(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;n+=o.w*o.h,r=Math.max(r,o.w)}}catch(g){i.e(g)}finally{i.f()}t.sort((function(t,e){return e.h-t.h}));var a,s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),r),h:1/0}],l=0,u=0,c=f(t);try{for(c.s();!(a=c.n()).done;)for(var h=a.value,p=s.length-1;p>=0;p--){var d=s[p];if(!(h.w>d.w||h.h>d.h)){if(h.x=d.x,h.y=d.y,u=Math.max(u,h.y+h.h),l=Math.max(l,h.x+h.w),h.w===d.w&&h.h===d.h){var m=s.pop();p<s.length&&(s[p]=m)}else h.h===d.h?(d.x+=h.w,d.w-=h.w):h.w===d.w?(d.y+=h.h,d.h-=h.h):(s.push({x:d.x+h.w,y:d.y,w:d.w-h.w,h:h.h}),d.y+=h.h,d.h-=h.h);break}}}catch(g){c.e(g)}finally{c.f()}return{w:l,h:u,fill:n/(l*u)||0}}pl.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Tl(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Ll(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Tl(this.buf,this.pos)+Tl(this.buf,this.pos+4)*ml;return this.pos+=8,t},readSFixed64:function(){var t=Tl(this.buf,this.pos)+Ll(this.buf,this.pos+4)*ml;return this.pos+=8,t},readFloat:function(){var t=hl(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=hl(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return _l(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return _l(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return _l(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return _l(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return _l(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return _l(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&vl?function(t,e,n){return vl.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,l=t[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>n)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(a=t[i+2],128==(192&(o=t[i+1]))&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(a=t[i+2],s=t[i+3],128==(192&(o=t[i+1]))&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),i+=c}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==pl.Bytes)return t.push(this.readVarint(e));var n=yl(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==pl.Bytes)return t.push(this.readSVarint());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==pl.Bytes)return t.push(this.readBoolean());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==pl.Bytes)return t.push(this.readFloat());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==pl.Bytes)return t.push(this.readDouble());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==pl.Bytes)return t.push(this.readFixed32());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==pl.Bytes)return t.push(this.readSFixed32());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==pl.Bytes)return t.push(this.readFixed64());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==pl.Bytes)return t.push(this.readSFixed64());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===pl.Varint)for(;this.buf[this.pos++]>127;);else if(e===pl.Bytes)this.pos=this.readVarint()+this.pos;else if(e===pl.Fixed32)this.pos+=4;else{if(e!==pl.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Ml(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Ml(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Ml(this.buf,-1&t,this.pos),Ml(this.buf,Math.floor(t*gl),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Ml(this.buf,-1&t,this.pos),Ml(this.buf,Math.floor(t*gl),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&xl(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),fl(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),fl(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&xl(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,pl.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,bl,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,wl,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,El,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,kl,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Sl,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Il,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Cl,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Al,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Pl,e)},writeBytesField:function(t,e){this.writeTag(t,pl.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,pl.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,pl.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,pl.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,pl.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,pl.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,pl.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,pl.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,pl.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,pl.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var Dl=function(){function t(e,n){var r=n.pixelRatio,i=n.version,o=n.stretchX,a=n.stretchY,s=n.content;d(this,t),this.paddedRect=e,this.pixelRatio=r,this.stretchX=o,this.stretchY=a,this.content=s,this.version=i}return p(t,[{key:"tl",get:function(){return[this.paddedRect.x+1,this.paddedRect.y+1]}},{key:"br",get:function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}},{key:"tlbr",get:function(){return this.tl.concat(this.br)}},{key:"displaySize",get:function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}]),t}(),Fl=function(){function t(e,n){d(this,t);var r={},i={};this.haveRenderCallbacks=[];var o=[];this.addImages(e,r,o),this.addImages(n,i,o);var a=zl(o),s=a.w,l=a.h,u=new Oa({width:s||1,height:l||1});for(var c in e){var h=e[c],f=r[c].paddedRect;Oa.copy(h.data,u,{x:0,y:0},{x:f.x+1,y:f.y+1},h.data)}for(var p in n){var m=n[p],g=i[p].paddedRect,v=g.x+1,y=g.y+1,_=m.data.width,x=m.data.height;Oa.copy(m.data,u,{x:0,y:0},{x:v,y:y},m.data),Oa.copy(m.data,u,{x:0,y:x-1},{x:v,y:y-1},{width:_,height:1}),Oa.copy(m.data,u,{x:0,y:0},{x:v,y:y+x},{width:_,height:1}),Oa.copy(m.data,u,{x:_-1,y:0},{x:v-1,y:y},{width:1,height:x}),Oa.copy(m.data,u,{x:0,y:0},{x:v+_,y:y},{width:1,height:x})}this.image=u,this.iconPositions=r,this.patternPositions=i}return p(t,[{key:"addImages",value:function(t,e,n){for(var r in t){var i=t[r],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(o),e[r]=new Dl(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}},{key:"patchUpdatedImages",value:function(t,e){for(var n in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)}},{key:"patchUpdatedImage",value:function(t,e,n){if(t&&e&&t.version!==e.version){t.version=e.version;var r=h(t.tl,2),i=r[0],o=r[1];n.update(e.data,void 0,{x:i,y:o})}}}]),t}();Dr("ImagePosition",Dl),Dr("ImageAtlas",Fl),t.WritingMode=void 0,(dl=t.WritingMode||(t.WritingMode={}))[dl.none=0]="none",dl[dl.horizontal=1]="horizontal",dl[dl.vertical=2]="vertical",dl[dl.horizontalOnly=3]="horizontalOnly";var Bl=-17,jl=function(){function t(){d(this,t),this.scale=1,this.fontStack="",this.imageName=null}return p(t,null,[{key:"forText",value:function(e,n){var r=new t;return r.scale=e||1,r.fontStack=n,r}},{key:"forImage",value:function(e){var n=new t;return n.imageName=e,n}}]),t}(),Zl=function(){function t(){d(this,t),this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}return p(t,[{key:"length",value:function(){return this.text.length}},{key:"getSection",value:function(t){return this.sections[this.sectionIndex[t]]}},{key:"getSectionIndex",value:function(t){return this.sectionIndex[t]}},{key:"getCharCode",value:function(t){return this.text.charCodeAt(t)}},{key:"verticalizePunctuation",value:function(){this.text=function(t){for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n+1)||null,i=t.charCodeAt(n-1)||null;e+=r&&Xr(r)&&!ll[t[n+1]]||i&&Xr(i)&&!ll[t[n-1]]||!ll[t[n]]?t[n]:ll[t[n]]}return e}(this.text)}},{key:"trim",value:function(){for(var t=0,e=0;e<this.text.length&&Vl[this.text.charCodeAt(e)];e++)t++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=t&&Vl[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)}},{key:"substring",value:function(e,n){var r=new t;return r.text=this.text.substring(e,n),r.sectionIndex=this.sectionIndex.slice(e,n),r.sections=this.sections,r}},{key:"toString",value:function(){return this.text}},{key:"getMaxScale",value:function(){var t=this;return this.sectionIndex.reduce((function(e,n){return Math.max(e,t.sections[n].scale)}),0)}},{key:"addTextSection",value:function(t,e){this.text+=t.text,this.sections.push(jl.forText(t.scale,t.fontStack||e));for(var n=this.sections.length-1,r=0;r<t.text.length;++r)this.sectionIndex.push(n)}},{key:"addImageSection",value:function(t){var e=t.image?t.image.name:"";if(0!==e.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(jl.forImage(e)),this.sectionIndex.push(this.sections.length-1)):C("Reached maximum number of images 6401")}else C("Can't add FormattedSection with an empty image.")}},{key:"getNextImageSectionCharCode",value:function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}],[{key:"fromFeature",value:function(e,n){for(var r=new t,i=0;i<e.sections.length;i++){var o=e.sections[i];o.image?r.addImageSection(o):r.addTextSection(o,n)}return r}}]),t}();function Ul(e,n,r,i,o,a,s,l,u,c,h,p,d,m,g,v){var y,_=Zl.fromFeature(e,o);p===t.WritingMode.vertical&&_.verticalizePunctuation();var x=ui.processBidirectionalText,b=ui.processStyledBidirectionalText;if(x&&1===_.sections.length){y=[];var w,k=x(_.toString(),$l(_,c,a,n,i,m,g)),S=f(k);try{for(S.s();!(w=S.n()).done;){var E=w.value,I=new Zl;I.text=E,I.sections=_.sections;for(var C=0;C<E.length;C++)I.sectionIndex.push(0);y.push(I)}}catch(O){S.e(O)}finally{S.f()}}else if(b){y=[];var A,P=b(_.text,_.sectionIndex,$l(_,c,a,n,i,m,g)),T=f(P);try{for(T.s();!(A=T.n()).done;){var M=A.value,L=new Zl;L.text=M[0],L.sectionIndex=M[1],L.sections=_.sections,y.push(L)}}catch(O){T.e(O)}finally{T.f()}}else y=function(t,e){var n,r=[],i=t.text,o=0,a=f(e);try{for(a.s();!(n=a.n()).done;){var s=n.value;r.push(t.substring(o,s)),o=s}}catch(O){a.e(O)}finally{a.f()}return o<i.length&&r.push(t.substring(o,i.length)),r}(_,$l(_,c,a,n,i,m,g));var R=[],N={positionedLines:R,text:_.toString(),top:h[1],bottom:h[1],left:h[0],right:h[0],writingMode:p,iconsInText:!1,verticalizable:!1};return function(e,n,r,i,o,a,s,l,u,c,h,p){var d,m,g=0,v=Bl,y=0,_=0,x="right"===l?1:"left"===l?0:.5,b=0,w=f(o);try{for(w.s();!(d=w.n()).done;){var k=d.value;k.trim();var S=k.getMaxScale(),E=(S-1)*ul,I={positionedGlyphs:[],lineOffset:0};e.positionedLines[b]=I;var C=I.positionedGlyphs,A=0;if(k.length()){for(var P=0;P<k.length();P++){var T=k.getSection(P),M=k.getSectionIndex(P),L=k.getCharCode(P),R=0,N=null,z=null,D=null,F=ul,B=!(u===t.WritingMode.horizontal||!h&&!Hr(L)||h&&(Vl[L]||(m=L,Vr.Arabic(m)||Vr["Arabic Supplement"](m)||Vr["Arabic Extended-A"](m)||Vr["Arabic Presentation Forms-A"](m)||Vr["Arabic Presentation Forms-B"](m))));if(T.imageName){var j=i[T.imageName];if(!j)continue;D=T.imageName,e.iconsInText=e.iconsInText||!0,z=j.paddedRect;var Z=j.displaySize;T.scale=T.scale*ul/p,N={width:Z[0],height:Z[1],left:1,top:-3,advance:B?Z[1]:Z[0]},R=E+(ul-Z[1]*T.scale),F=N.advance;var U=B?Z[0]*T.scale-ul*S:Z[1]*T.scale-ul*S;U>0&&U>A&&(A=U)}else{var V=r[T.fontStack],q=V&&V[L];if(q&&q.rect)z=q.rect,N=q.metrics;else{var G=n[T.fontStack],W=G&&G[L];if(!W)continue;N=W.metrics}R=(S-T.scale)*ul}B?(e.verticalizable=!0,C.push({glyph:L,imageName:D,x:g,y:v+R,vertical:B,scale:T.scale,fontStack:T.fontStack,sectionIndex:M,metrics:N,rect:z}),g+=F*T.scale+c):(C.push({glyph:L,imageName:D,x:g,y:v+R,vertical:B,scale:T.scale,fontStack:T.fontStack,sectionIndex:M,metrics:N,rect:z}),g+=N.advance*T.scale+c)}0!==C.length&&(y=Math.max(g-c,y),Jl(C,0,C.length-1,x,A)),g=0;var H=a*S+A;I.lineOffset=Math.max(A,E),v+=H,_=Math.max(H,_),++b}else v+=a,++b}}catch(O){w.e(O)}finally{w.f()}var X=v-Bl,Y=Kl(s),$=Y.horizontalAlign,K=Y.verticalAlign;(function(t,e,n,r,i,o,a,s,l){var u=(e-n)*i,c=0;c=o!==a?-s*r-Bl:(-r*l+.5)*a;var h,p=f(t);try{for(p.s();!(h=p.n()).done;){var d,m=h.value,g=f(m.positionedGlyphs);try{for(g.s();!(d=g.n()).done;){var v=d.value;v.x+=u,v.y+=c}}catch(O){g.e(O)}finally{g.f()}}}catch(O){p.e(O)}finally{p.f()}})(e.positionedLines,x,$,K,y,_,a,X,o.length),e.top+=-K*X,e.bottom=e.top+X,e.left+=-$*y,e.right=e.left+y}(N,n,r,i,y,s,l,u,p,c,d,v),!function(t){var e,n=f(t);try{for(n.s();!(e=n.n()).done;)if(0!==e.value.positionedGlyphs.length)return!1}catch(O){n.e(O)}finally{n.f()}return!0}(R)&&N}var Vl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ql={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Gl(t,e,n,r,i,o){if(e.imageName){var a=r[e.imageName];return a?a.displaySize[0]*e.scale*ul/o+i:0}var s=n[e.fontStack],l=s&&s[t];return l?l.metrics.advance*e.scale+i:0}function Wl(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function Hl(t,e,n){var r=0;return 10===t&&(r-=1e4),n&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Xl(t,e,n,r,i,o){var a,s=null,l=Wl(e,n,i,o),u=f(r);try{for(u.s();!(a=u.n()).done;){var c=a.value,h=Wl(e-c.x,n,i,o)+c.badness;h<=l&&(s=c,l=h)}}catch(p){u.e(p)}finally{u.f()}return{index:t,x:e,priorBreak:s,badness:l}}function Yl(t){return t?Yl(t.priorBreak).concat(t.index):[]}function $l(t,e,n,r,i,o,a){if("point"!==o)return[];if(!t)return[];for(var s,l=[],u=function(t,e,n,r,i,o){for(var a=0,s=0;s<t.length();s++){var l=t.getSection(s);a+=Gl(t.getCharCode(s),l,r,i,e,o)}return a/Math.max(1,Math.ceil(a/n))}(t,e,n,r,i,a),c=t.text.indexOf("\u200b")>=0,h=0,f=0;f<t.length();f++){var p=t.getSection(f),d=t.getCharCode(f);if(Vl[d]||(h+=Gl(d,p,r,i,e,a)),f<t.length()-1){var m=!((s=d)<11904||!(Vr["Bopomofo Extended"](s)||Vr.Bopomofo(s)||Vr["CJK Compatibility Forms"](s)||Vr["CJK Compatibility Ideographs"](s)||Vr["CJK Compatibility"](s)||Vr["CJK Radicals Supplement"](s)||Vr["CJK Strokes"](s)||Vr["CJK Symbols and Punctuation"](s)||Vr["CJK Unified Ideographs Extension A"](s)||Vr["CJK Unified Ideographs"](s)||Vr["Enclosed CJK Letters and Months"](s)||Vr["Halfwidth and Fullwidth Forms"](s)||Vr.Hiragana(s)||Vr["Ideographic Description Characters"](s)||Vr["Kangxi Radicals"](s)||Vr["Katakana Phonetic Extensions"](s)||Vr.Katakana(s)||Vr["Vertical Forms"](s)||Vr["Yi Radicals"](s)||Vr["Yi Syllables"](s)));(ql[d]||m||p.imageName)&&l.push(Xl(f+1,h,u,l,Hl(d,t.getCharCode(f+1),m&&c),!1))}}return Yl(Xl(t.length(),h,u,l,0,!0))}function Kl(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Jl(t,e,n,r,i){if(r||i)for(var o=t[n],a=(t[n].x+o.metrics.advance*o.scale)*r,s=e;s<=n;s++)t[s].x-=a,t[s].y+=i}function Ql(t,e,n){var r=Kl(n),i=r.horizontalAlign,o=r.verticalAlign,a=e[0]-t.displaySize[0]*i,s=e[1]-t.displaySize[1]*o;return{image:t,top:s,bottom:s+t.displaySize[1],left:a,right:a+t.displaySize[0]}}function tu(t,e,n,r,i,o){var a,s=t.image;if(s.content){var l=s.content,u=s.pixelRatio||1;a=[l[0]/u,l[1]/u,s.displaySize[0]-l[2]/u,s.displaySize[1]-l[3]/u]}var c,h,f,p,d=e.left*o,m=e.right*o;"width"===n||"both"===n?(p=i[0]+d-r[3],h=i[0]+m+r[1]):h=(p=i[0]+(d+m-s.displaySize[0])/2)+s.displaySize[0];var g=e.top*o,v=e.bottom*o;return"height"===n||"both"===n?(c=i[1]+g-r[0],f=i[1]+v+r[2]):f=(c=i[1]+(g+v-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:c,right:h,bottom:f,left:p,collisionPadding:a}}var eu=128;function nu(t,e){var n=e.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new ci(t+1))};if("source"===n.kind)return{kind:"source"};for(var r=n.zoomStops,i=n.interpolationType,o=0;o<r.length&&r[o]<=t;)o++;for(var a=o=Math.max(0,o-1);a<r.length&&r[a]<t+1;)a++;a=Math.min(r.length-1,a);var s=r[o],l=r[a];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:l,minSize:n.evaluate(new ci(s)),maxSize:n.evaluate(new ci(l)),interpolationType:i}}var ru=function(t){m(n,t);var e=g(n);function n(t,r,i,o){var a;return d(this,n),(a=e.call(this,t,r)).angle=i,void 0!==o&&(a.segment=o),a}return p(n,[{key:"clone",value:function(){return new n(this.x,this.y,this.angle,this.segment)}}]),n}(F);function iu(t,e,n,r,i){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var l=[],u=0;s<n/2;){var c=t[a],h=t[a+1];if(!h)return!1;var f=t[a-1].angleTo(c)-c.angleTo(h);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:f}),u+=f;s-l[0].distance>r;)u-=l.shift().angleDelta;if(u>i)return!1;a++,s+=c.dist(h)}return!0}function ou(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function au(t,e,n){return t?.6*e*n:0}function su(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function lu(t,e,n,r,i,o){for(var a=au(n,i,o),s=su(n,r)*o,l=0,u=ou(t)/2,c=0;c<t.length-1;c++){var h=t[c],f=t[c+1],p=h.dist(f);if(l+p>u){var d=(u-l)/p,m=Fe(h.x,f.x,d),g=Fe(h.y,f.y,d),v=new ru(m,g,f.angleTo(h),c);return v._round(),!a||iu(t,v,s,a,e)?v:void 0}l+=p}}function uu(t,e,n,r,i,o,a,s,l){var u=au(r,o,a),c=su(r,i),h=c*a,f=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),cu(t,f?e/2*s%e:(c/2+2*o)*a*s%e,e,u,n,h,f,!1,l)}function cu(t,e,n,r,i,o,a,s,l){for(var u=o/2,c=ou(t),h=0,f=e-n,p=[],d=0;d<t.length-1;d++){for(var m=t[d],g=t[d+1],v=m.dist(g),y=g.angleTo(m);f+n<h+v;){var _=((f+=n)-h)/v,x=Fe(m.x,g.x,_),b=Fe(m.y,g.y,_);if(x>=0&&x<l&&b>=0&&b<l&&f-u>=0&&f+u<=c){var w=new ru(x,b,y,d);w._round(),r&&!iu(t,w,o,r,i)||p.push(w)}}h+=v}return s||p.length||a||(p=cu(t,h/2,n,r,i,o,a,!0,l)),p}function hu(t,e,n,r,i){for(var o=[],a=0;a<t.length;a++)for(var s=t[a],l=void 0,u=0;u<s.length-1;u++){var c=s[u],h=s[u+1];c.x<e&&h.x<e||(c.x<e?c=new F(e,c.y+(e-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x<e&&(h=new F(e,c.y+(e-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y<n&&h.y<n||(c.y<n?c=new F(c.x+(n-c.y)/(h.y-c.y)*(h.x-c.x),n)._round():h.y<n&&(h=new F(c.x+(n-c.y)/(h.y-c.y)*(h.x-c.x),n)._round()),c.x>=r&&h.x>=r||(c.x>=r?c=new F(r,c.y+(r-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x>=r&&(h=new F(r,c.y+(r-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y>=i&&h.y>=i||(c.y>=i?c=new F(c.x+(i-c.y)/(h.y-c.y)*(h.x-c.x),i)._round():h.y>=i&&(h=new F(c.x+(i-c.y)/(h.y-c.y)*(h.x-c.x),i)._round()),l&&c.equals(l[l.length-1])||(l=[c],o.push(l)),l.push(h)))))}return o}function fu(t,e,n,r){var i=[],o=t.image,a=o.pixelRatio,s=o.paddedRect.w-2,l=o.paddedRect.h-2,u=t.right-t.left,c=t.bottom-t.top,h=o.stretchX||[[0,s]],f=o.stretchY||[[0,l]],p=function(t,e){return t+e[1]-e[0]},d=h.reduce(p,0),m=f.reduce(p,0),g=s-d,v=l-m,y=0,_=d,x=0,b=m,w=0,k=g,S=0,E=v;if(o.content&&r){var I=o.content;y=pu(h,0,I[0]),x=pu(f,0,I[1]),_=pu(h,I[0],I[2]),b=pu(f,I[1],I[3]),w=I[0]-y,S=I[1]-x,k=I[2]-I[0]-_,E=I[3]-I[1]-b}var C=function(r,i,s,l){var h=mu(r.stretch-y,_,u,t.left),f=gu(r.fixed-w,k,r.stretch,d),p=mu(i.stretch-x,b,c,t.top),g=gu(i.fixed-S,E,i.stretch,m),v=mu(s.stretch-y,_,u,t.left),I=gu(s.fixed-w,k,s.stretch,d),C=mu(l.stretch-x,b,c,t.top),A=gu(l.fixed-S,E,l.stretch,m),P=new F(h,p),T=new F(v,p),M=new F(v,C),L=new F(h,C),R=new F(f/a,g/a),N=new F(I/a,A/a),O=e*Math.PI/180;if(O){var z=Math.sin(O),D=Math.cos(O),B=[D,-z,z,D];P._matMult(B),T._matMult(B),L._matMult(B),M._matMult(B)}var j=r.stretch+r.fixed,Z=i.stretch+i.fixed;return{tl:P,tr:T,bl:L,br:M,tex:{x:o.paddedRect.x+1+j,y:o.paddedRect.y+1+Z,w:s.stretch+s.fixed-j,h:l.stretch+l.fixed-Z},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:R,pixelOffsetBR:N,minFontScaleX:k/a/u,minFontScaleY:E/a/c,isSDF:n}};if(r&&(o.stretchX||o.stretchY))for(var A=du(h,g,d),P=du(f,v,m),T=0;T<A.length-1;T++)for(var M=A[T],L=A[T+1],R=0;R<P.length-1;R++)i.push(C(M,P[R],L,P[R+1]));else i.push(C({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return i}function pu(t,e,n){var r,i=0,o=f(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;i+=Math.max(e,Math.min(n,a[1]))-Math.max(e,Math.min(n,a[0]))}}catch(s){o.e(s)}finally{o.f()}return i}function du(t,e,n){var r,i=[{fixed:-1,stretch:0}],o=f(t);try{for(o.s();!(r=o.n()).done;){var a=h(r.value,2),s=a[0],l=a[1],u=i[i.length-1];i.push({fixed:s-u.stretch,stretch:u.stretch}),i.push({fixed:s-u.stretch,stretch:u.stretch+(l-s)})}}catch(c){o.e(c)}finally{o.f()}return i.push({fixed:e+1,stretch:n}),i}function mu(t,e,n,r){return t/e*n+r}function gu(t,e,n,r){return t-e*n/r}Dr("Anchor",ru);var vu=p((function t(e,n,r,i,o,a,s,l,u,c){if(d(this,t),this.boxStartIndex=e.length,u){var h=a.top,f=a.bottom,p=a.collisionPadding;p&&(h-=p[1],f+=p[3]);var m=f-h;m>0&&(m=Math.max(10,m),this.circleDiameter=m)}else{var g=a.top*s-l,v=a.bottom*s+l,y=a.left*s-l,_=a.right*s+l,x=a.collisionPadding;if(x&&(y-=x[0]*s,g-=x[1]*s,_+=x[2]*s,v+=x[3]*s),c){var b=new F(y,g),w=new F(_,g),k=new F(y,v),S=new F(_,v),E=c*Math.PI/180;b._rotate(E),w._rotate(E),k._rotate(E),S._rotate(E),y=Math.min(b.x,w.x,k.x,S.x),_=Math.max(b.x,w.x,k.x,S.x),g=Math.min(b.y,w.y,k.y,S.y),v=Math.max(b.y,w.y,k.y,S.y)}e.emplaceBack(n.x,n.y,y,g,_,v,r,i,o)}this.boxEndIndex=e.length})),yu=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_u;if(d(this,t),this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}return p(t,[{key:"push",value:function(t){this.data.push(t),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}},{key:"_down",value:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i}}]),t}();function _u(t,e){return t<e?-1:t>e?1:0}function xu(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1/0,i=1/0,o=-1/0,a=-1/0,s=t[0],l=0;l<s.length;l++){var u=s[l];(!l||u.x<r)&&(r=u.x),(!l||u.y<i)&&(i=u.y),(!l||u.x>o)&&(o=u.x),(!l||u.y>a)&&(a=u.y)}var c=Math.min(o-r,a-i),h=c/2,f=new yu([],bu);if(0===c)return new F(r,i);for(var p=r;p<o;p+=c)for(var d=i;d<a;d+=c)f.push(new wu(p+h,d+h,h,t));for(var m=function(t){for(var e=0,n=0,r=0,i=t[0],o=0,a=i.length,s=a-1;o<a;s=o++){var l=i[o],u=i[s],c=l.x*u.y-u.x*l.y;n+=(l.x+u.x)*c,r+=(l.y+u.y)*c,e+=3*c}return new wu(n/e,r/e,0,t)}(t),g=f.length;f.length;){var v=f.pop();(v.d>m.d||!m.d)&&(m=v,n&&console.log("found best %d after %d probes",Math.round(1e4*v.d)/1e4,g)),v.max-m.d<=e||(h=v.h/2,f.push(new wu(v.p.x-h,v.p.y-h,h,t)),f.push(new wu(v.p.x+h,v.p.y-h,h,t)),f.push(new wu(v.p.x-h,v.p.y+h,h,t)),f.push(new wu(v.p.x+h,v.p.y+h,h,t)),g+=4)}return n&&(console.log("num probes: ".concat(g)),console.log("best distance: ".concat(m.d))),m.p}function bu(t,e){return e.max-t.max}function wu(t,e,n,r){this.p=new F(t,e),this.h=n,this.d=function(t,e){for(var n=!1,r=1/0,i=0;i<e.length;i++)for(var o=e[i],a=0,s=o.length,l=s-1;a<s;l=a++){var u=o[a],c=o[l];u.y>t.y!=c.y>t.y&&t.x<(c.x-u.x)*(t.y-u.y)/(c.y-u.y)+u.x&&(n=!n),r=Math.min(r,pa(t,u,c))}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}var ku=Number.POSITIVE_INFINITY;function Su(t,e){return e[1]!==ku?function(t,e,n){var r=0,i=0;switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,i]}(t,e[0],e[1]):function(t,e){var n=0,r=0;e<0&&(e=0);var i=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-e;break;case"top":r=e-7}switch(t){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=e;break;case"right":n=-e}return[n,r]}(t,e[0])}function Eu(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Iu(e,n,r,i,o,a,s,l,u,c,p){var d=a.textMaxSize.evaluate(n,{});void 0===d&&(d=s);var m,g=e.layers[0].layout,v=g.get("icon-offset").evaluate(n,{},p),y=Pu(r.horizontal),_=s/24,x=e.tilePixelRatio*_,b=e.tilePixelRatio*d/24,w=e.tilePixelRatio*l,k=e.tilePixelRatio*g.get("symbol-spacing"),S=g.get("text-padding")*e.tilePixelRatio,E=g.get("icon-padding")*e.tilePixelRatio,I=g.get("text-max-angle")/180*Math.PI,A="viewport"!==g.get("text-rotation-alignment")&&"point"!==g.get("symbol-placement"),P="map"===g.get("icon-rotation-alignment")&&"point"!==g.get("symbol-placement"),T=g.get("symbol-placement"),M=k/2,L=g.get("icon-text-fit");i&&"none"!==L&&(e.allowVerticalPlacement&&r.vertical&&(m=tu(i,r.vertical,L,g.get("icon-text-fit-padding"),v,_)),y&&(i=tu(i,y,L,g.get("icon-text-fit-padding"),v,_)));var R=function(l,f){f.x<0||f.x>=Qo||f.y<0||f.y>=Qo||function(e,n,r,i,o,a,s,l,u,c,f,p,d,m,g,v,y,_,x,b,w,k,S,E,I){var A,P,T,M,L,R,N=e.addToLineVertexArray(n,r),O=0,z=0,D=0,F=0,B=-1,j=-1,Z={},U=Ro(""),V=0,q=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?(A=l.layout.get("text-offset").evaluate(w,{},E).map((function(t){return t*ul})),V=(P=h(A,2))[0],q=P[1]):(V=l.layout.get("text-radial-offset").evaluate(w,{},E)*ul,q=ku),e.allowVerticalPlacement&&i.vertical){var G=l.layout.get("text-rotate").evaluate(w,{},E)+90;L=new vu(u,n,c,f,p,i.vertical,d,m,g,G),s&&(R=new vu(u,n,c,f,p,s,y,_,g,G))}if(o){var W=l.layout.get("icon-rotate").evaluate(w,{}),H="none"!==l.layout.get("icon-text-fit"),X=fu(o,W,S,H),Y=s?fu(s,W,S,H):void 0;M=new vu(u,n,c,f,p,o,y,_,!1,W),O=4*X.length;var $=e.iconSizeData,K=null;"source"===$.kind?(K=[eu*l.layout.get("icon-size").evaluate(w,{})])[0]>Cu&&C("".concat(e.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".')):"composite"===$.kind&&((K=[eu*k.compositeIconSizes[0].evaluate(w,{},E),eu*k.compositeIconSizes[1].evaluate(w,{},E)])[0]>Cu||K[1]>Cu)&&C("".concat(e.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".')),e.addSymbols(e.icon,X,K,b,x,w,t.WritingMode.none,n,N.lineStartIndex,N.lineLength,-1,E),B=e.icon.placedSymbolArray.length-1,Y&&(z=4*Y.length,e.addSymbols(e.icon,Y,K,b,x,w,t.WritingMode.vertical,n,N.lineStartIndex,N.lineLength,-1,E),j=e.icon.placedSymbolArray.length-1)}for(var J=Object.keys(i.horizontal),Q=0,tt=J;Q<tt.length;Q++){var et=tt[Q],nt=i.horizontal[et];if(!T){U=Ro(nt.text);var rt=l.layout.get("text-rotate").evaluate(w,{},E);T=new vu(u,n,c,f,p,nt,d,m,g,rt)}var it=1===nt.positionedLines.length;if(D+=Au(e,n,nt,a,l,g,w,v,N,i.vertical?t.WritingMode.horizontal:t.WritingMode.horizontalOnly,it?J:[et],Z,B,k,E),it)break}i.vertical&&(F+=Au(e,n,i.vertical,a,l,g,w,v,N,t.WritingMode.vertical,["vertical"],Z,j,k,E));var ot=T?T.boxStartIndex:e.collisionBoxArray.length,at=T?T.boxEndIndex:e.collisionBoxArray.length,st=L?L.boxStartIndex:e.collisionBoxArray.length,lt=L?L.boxEndIndex:e.collisionBoxArray.length,ut=M?M.boxStartIndex:e.collisionBoxArray.length,ct=M?M.boxEndIndex:e.collisionBoxArray.length,ht=R?R.boxStartIndex:e.collisionBoxArray.length,ft=R?R.boxEndIndex:e.collisionBoxArray.length,pt=-1,dt=function(t,e){return t&&t.circleDiameter?Math.max(t.circleDiameter,e):e};pt=dt(T,pt),pt=dt(L,pt),pt=dt(M,pt);var mt=(pt=dt(R,pt))>-1?1:0;mt&&(pt*=I/ul),e.glyphOffsetArray.length>=Fu.MAX_GLYPHS&&C("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==w.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,w.sortKey),e.symbolInstances.emplaceBack(n.x,n.y,Z.right>=0?Z.right:-1,Z.center>=0?Z.center:-1,Z.left>=0?Z.left:-1,Z.vertical||-1,B,j,U,ot,at,st,lt,ut,ct,ht,ft,c,D,F,O,z,mt,0,d,V,q,pt)}(e,f,l,r,i,o,m,e.layers[0],e.collisionBoxArray,n.index,n.sourceLayerIndex,e.index,x,S,A,u,w,E,P,v,n,a,c,p,s)};if("line"===T){var N,O=f(hu(n.geometry,0,0,Qo,Qo));try{for(O.s();!(N=O.n()).done;){var z,D=N.value,F=uu(D,k,I,r.vertical||y,i,24,b,e.overscaling,Qo),B=f(F);try{for(B.s();!(z=B.n()).done;){var j=z.value;y&&Tu(e,y.text,M,j)||R(D,j)}}catch(it){B.e(it)}finally{B.f()}}}catch(it){O.e(it)}finally{O.f()}}else if("line-center"===T){var Z,U=f(n.geometry);try{for(U.s();!(Z=U.n()).done;){var V=Z.value;if(V.length>1){var q=lu(V,I,r.vertical||y,i,24,b);q&&R(V,q)}}}catch(it){U.e(it)}finally{U.f()}}else if("Polygon"===n.type){var G,W=f(vs(n.geometry,0));try{for(W.s();!(G=W.n()).done;){var H=G.value,X=xu(H,16);R(H[0],new ru(X.x,X.y,0))}}catch(it){W.e(it)}finally{W.f()}}else if("LineString"===n.type){var Y,$=f(n.geometry);try{for($.s();!(Y=$.n()).done;){var K=Y.value;R(K,new ru(K[0].x,K[0].y,0))}}catch(it){$.e(it)}finally{$.f()}}else if("Point"===n.type){var J,Q=f(n.geometry);try{for(Q.s();!(J=Q.n()).done;){var tt,et=J.value,nt=f(et);try{for(nt.s();!(tt=nt.n()).done;){var rt=tt.value;R([rt],new ru(rt.x,rt.y,0))}}catch(it){nt.e(it)}finally{nt.f()}}}catch(it){Q.e(it)}finally{Q.f()}}}var Cu=32640;function Au(t,e,n,r,i,a,s,l,u,h,p,d,m,g,v){var y=function(t,e,n,r,i,a,s,l){var u,h=r.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,p=[],d=f(e.positionedLines);try{for(d.s();!(u=d.n()).done;){var m,g=u.value,v=f(g.positionedGlyphs);try{for(v.s();!(m=v.n()).done;){var y=m.value;if(y.rect){var _=y.rect||{},x=4,b=!0,w=1,k=0,S=(i||l)&&y.vertical,E=y.metrics.advance*y.scale/2;if(l&&e.verticalizable){var I=(y.scale-1)*ul,C=(ul-y.metrics.width*y.scale)/2;k=g.lineOffset/2-(y.imageName?-C:I)}if(y.imageName){var A=s[y.imageName];b=A.sdf,x=1/(w=A.pixelRatio)}var P=i?[y.x+E,y.y]:[0,0],T=i?[0,0]:[y.x+E+n[0],y.y+n[1]-k],M=[0,0];S&&(M=T,T=[0,0]);var L=(y.metrics.left-x)*y.scale-E+T[0],R=(-y.metrics.top-x)*y.scale+T[1],N=L+_.w*y.scale/w,O=R+_.h*y.scale/w,z=new F(L,R),D=new F(N,R),B=new F(L,O),j=new F(N,O);if(S){var Z=new F(-E,E-Bl),U=-Math.PI/2,V=12-E,q=new F(22-V,-(y.imageName?V:0)),G=o(F,c(M));z._rotateAround(U,Z)._add(q)._add(G),D._rotateAround(U,Z)._add(q)._add(G),B._rotateAround(U,Z)._add(q)._add(G),j._rotateAround(U,Z)._add(q)._add(G)}if(h){var W=Math.sin(h),H=Math.cos(h),X=[H,-W,W,H];z._matMult(X),D._matMult(X),B._matMult(X),j._matMult(X)}var Y=new F(0,0),$=new F(0,0);p.push({tl:z,tr:D,bl:B,br:j,tex:_,writingMode:e.writingMode,glyphOffset:P,sectionIndex:y.sectionIndex,isSDF:b,pixelOffsetTL:Y,pixelOffsetBR:$,minFontScaleX:0,minFontScaleY:0})}}}catch(K){v.e(K)}finally{v.f()}}}catch(K){d.e(K)}finally{d.f()}return p}(0,n,l,i,a,s,r,t.allowVerticalPlacement),_=t.textSizeData,x=null;"source"===_.kind?(x=[eu*i.layout.get("text-size").evaluate(s,{})])[0]>Cu&&C("".concat(t.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".')):"composite"===_.kind&&((x=[eu*g.compositeTextSizes[0].evaluate(s,{},v),eu*g.compositeTextSizes[1].evaluate(s,{},v)])[0]>Cu||x[1]>Cu)&&C("".concat(t.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".')),t.addSymbols(t.text,y,x,l,a,s,h,e,u.lineStartIndex,u.lineLength,m,v);var b,w=f(p);try{for(w.s();!(b=w.n()).done;)d[b.value]=t.text.placedSymbolArray.length-1}catch(k){w.e(k)}finally{w.f()}return 4*y.length}function Pu(t){for(var e in t)return t[e];return null}function Tu(t,e,n,r){var i=t.compareText;if(e in i){for(var o=i[e],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[e]=[];return i[e].push(r),!1}var Mu=Es.VectorTileFeature.types,Lu=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ru(t,e,n,r,i,o,a,s,l,u,c,h,f){var p=s?Math.min(Cu,Math.round(s[0])):0,d=s?Math.min(Cu,Math.round(s[1])):0;t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,a,(p<<1)+(l?1:0),d,16*u,16*c,256*h,256*f)}function Nu(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function Ou(t){var e,n=f(t.sections);try{for(n.s();!(e=n.n()).done;)if(Kr(e.value.text))return!0}catch(r){n.e(r)}finally{n.f()}return!1}var zu=function(){function t(e){d(this,t),this.layoutVertexArray=new vo,this.indexArray=new wo,this.programConfigurations=e,this.segments=new Eo,this.dynamicLayoutVertexArray=new yo,this.opacityVertexArray=new _o,this.placedSymbolArray=new ro}return p(t,[{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}},{key:"upload",value:function(t,e,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,nl.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,rl.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Lu,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t))}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}]),t}();Dr("SymbolBuffers",zu);var Du=function(){function t(e,n,r){d(this,t),this.layoutVertexArray=new e,this.layoutAttributes=n,this.indexArray=new r,this.segments=new Eo,this.collisionVertexArray=new bo}return p(t,[{key:"upload",value:function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,il.members,!0)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}]),t}();Dr("CollisionBuffers",Du);var Fu=function(){function e(n){d(this,e),this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ka([]),this.placementViewportMatrix=ka([]);var r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=nu(this.zoom,r["text-size"]),this.iconSizeData=nu(this.zoom,r["icon-size"]);var i=this.layers[0].layout,o=i.get("symbol-sort-key"),a=i.get("symbol-z-order");this.canOverlap="never"!==Vu(i,"text-overlap","text-allow-overlap")||"never"!==Vu(i,"icon-overlap","icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==a&&!o.isConstant(),this.sortFeaturesByY=("viewport-y"===a||"auto"===a&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map((function(e){return t.WritingMode[e]}))),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=n.sourceID}return p(e,[{key:"createArrays",value:function(){this.text=new zu(new $o(this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new zu(new $o(this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.glyphOffsetArray=new ao,this.lineVertexArray=new so,this.symbolInstances=new oo}},{key:"calculateGlyphDependencies",value:function(t,e,n,r,i){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(n||r)&&i){var a=ll[t.charAt(o)];a&&(e[a.charCodeAt(0)]=!0)}}},{key:"populate",value:function(e,n,r){var i=this.layers[0],o=i.layout,a=o.get("text-font"),s=o.get("text-field"),l=o.get("icon-image"),u=("constant"!==s.value.kind||s.value.value instanceof Yt&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),c="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],u||c){var p,d=n.iconDependencies,m=n.glyphDependencies,g=n.availableImages,v=new ci(this.zoom),y=f(e);try{for(y.s();!(p=y.n()).done;){var _=p.value,x=_.feature,b=_.id,w=_.index,k=_.sourceLayerIndex,S=i._featureFilter.needGeometry,E=ra(x,S);if(i._featureFilter.filter(v,E,r)){var I=void 0,C=void 0;if(S||(E.geometry=na(x)),u){var A=i.getValueAndResolveTokens("text-field",E,r,g),P=Yt.factory(A);Ou(P)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===si()||this.hasRTLText&&ui.isParsed())&&(I=sl(P,i,E))}if(c){var T=i.getValueAndResolveTokens("icon-image",E,r,g);C=T instanceof $t?T:$t.fromString(T)}if(I||C){var M=this.sortFeaturesByKey?h.evaluate(E,{},r):void 0;if(this.features.push({id:b,text:I,icon:C,index:w,sourceLayerIndex:k,geometry:E.geometry,properties:x.properties,type:Mu[x.type],sortKey:M}),C&&(d[C.name]=!0),I){var L=a.evaluate(E,{},r).join(","),R="viewport"!==o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(t.WritingMode.vertical)>=0;var N,O=f(I.sections);try{for(O.s();!(N=O.n()).done;){var z=N.value;if(z.image)d[z.image.name]=!0;else{var D=qr(I.toString()),F=z.fontStack||L,B=m[F]=m[F]||{};this.calculateGlyphDependencies(z.text,B,R,this.allowVerticalPlacement,D)}}}catch(j){O.e(j)}finally{O.f()}}}}}}catch(j){y.e(j)}finally{y.f()}"line"===o.get("symbol-placement")&&(this.features=function(t){var e={},n={},r=[],i=0;function o(e){r.push(t[e]),i++}function a(t,e,i){var o=n[t];return delete n[t],n[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(t,n,i){var o=e[n];return delete e[n],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function l(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return"".concat(t,":").concat(r.x,":").concat(r.y)}for(var u=0;u<t.length;u++){var c=t[u],h=c.geometry,f=c.text?c.text.toString():null;if(f){var p=l(f,h),d=l(f,h,!0);if(p in n&&d in e&&n[p]!==e[d]){var m=s(p,d,h),g=a(p,d,r[m].geometry);delete e[p],delete n[d],n[l(f,r[g].geometry,!0)]=g,r[m].geometry=null}else p in n?a(p,d,h):d in e?s(p,d,h):(o(u),e[p]=i-1,n[d]=i-1)}else o(u)}return r.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}}},{key:"update",value:function(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))}},{key:"isEmpty",value:function(){return 0===this.symbolInstances.length&&!this.hasRTLText}},{key:"uploadPending",value:function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}},{key:"upload",value:function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}},{key:"destroyDebugData",value:function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}},{key:"destroy",value:function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}},{key:"addToLineVertexArray",value:function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:r},a<e.length-1&&(r+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var l=0;l<e.length;l++){var u=o[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}},{key:"addSymbols",value:function(e,n,r,i,o,a,s,l,u,c,h,f){for(var p=e.indexArray,d=e.layoutVertexArray,m=e.segments.prepareSegment(4*n.length,d,p,this.canOverlap?a.sortKey:void 0),g=this.glyphOffsetArray.length,v=m.vertexLength,y=this.allowVerticalPlacement&&s===t.WritingMode.vertical?Math.PI/2:0,_=a.text&&a.text.sections,x=0;x<n.length;x++){var b=n[x],w=b.tl,k=b.tr,S=b.bl,E=b.br,I=b.tex,C=b.pixelOffsetTL,A=b.pixelOffsetBR,P=b.minFontScaleX,T=b.minFontScaleY,M=b.glyphOffset,L=b.isSDF,R=b.sectionIndex,N=m.vertexLength,O=M[1];Ru(d,l.x,l.y,w.x,O+w.y,I.x,I.y,r,L,C.x,C.y,P,T),Ru(d,l.x,l.y,k.x,O+k.y,I.x+I.w,I.y,r,L,A.x,C.y,P,T),Ru(d,l.x,l.y,S.x,O+S.y,I.x,I.y+I.h,r,L,C.x,A.y,P,T),Ru(d,l.x,l.y,E.x,O+E.y,I.x+I.w,I.y+I.h,r,L,A.x,A.y,P,T),Nu(e.dynamicLayoutVertexArray,l,y),p.emplaceBack(N,N+1,N+2),p.emplaceBack(N+1,N+2,N+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(M[0]),x!==n.length-1&&R===n[x+1].sectionIndex||e.programConfigurations.populatePaintArrays(d.length,a,a.index,{},f,_&&_[R])}e.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,v,u,c,l.segment,r?r[0]:0,r?r[1]:0,i[0],i[1],s,0,!1,0,h)}},{key:"_addCollisionDebugVertex",value:function(t,e,n,r,i,o){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,r,i,Math.round(o.x),Math.round(o.y))}},{key:"addCollisionDebugVertices",value:function(t,e,n,r,i,o,a){var s=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),l=s.vertexLength,u=i.layoutVertexArray,c=i.collisionVertexArray,h=a.anchorX,f=a.anchorY;this._addCollisionDebugVertex(u,c,o,h,f,new F(t,e)),this._addCollisionDebugVertex(u,c,o,h,f,new F(n,e)),this._addCollisionDebugVertex(u,c,o,h,f,new F(n,r)),this._addCollisionDebugVertex(u,c,o,h,f,new F(t,r)),s.vertexLength+=4;var p=i.indexArray;p.emplaceBack(l,l+1),p.emplaceBack(l+1,l+2),p.emplaceBack(l+2,l+3),p.emplaceBack(l+3,l),s.primitiveLength+=4}},{key:"addDebugCollisionBoxes",value:function(t,e,n,r){for(var i=t;i<e;i++){var o=this.collisionBoxArray.get(i);this.addCollisionDebugVertices(o.x1,o.y1,o.x2,o.y2,r?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,n)}}},{key:"generateCollisionDebugBuffers",value:function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Du(xo,ol.members,ko),this.iconCollisionBox=new Du(xo,ol.members,ko);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}}},{key:"_deserializeCollisionBoxesForSymbol",value:function(t,e,n,r,i,o,a,s,l){for(var u={},c=e;c<n;c++){var h=t.get(c);u.textBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},u.textFeatureIndex=h.featureIndex;break}for(var f=r;f<i;f++){var p=t.get(f);u.verticalTextBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},u.verticalTextFeatureIndex=p.featureIndex;break}for(var d=o;d<a;d++){var m=t.get(d);u.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},u.iconFeatureIndex=m.featureIndex;break}for(var g=s;g<l;g++){var v=t.get(g);u.verticalIconBox={x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,anchorPointX:v.anchorPointX,anchorPointY:v.anchorPointY},u.verticalIconFeatureIndex=v.featureIndex;break}return u}},{key:"deserializeCollisionBoxes",value:function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}},{key:"hasTextData",value:function(){return this.text.segments.get().length>0}},{key:"hasIconData",value:function(){return this.icon.segments.get().length>0}},{key:"hasDebugData",value:function(){return this.textCollisionBox&&this.iconCollisionBox}},{key:"hasTextCollisionBoxData",value:function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}},{key:"hasIconCollisionBoxData",value:function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}},{key:"addIndicesForPlacedSymbol",value:function(t,e){for(var n=t.placedSymbolArray.get(e),r=n.vertexStartIndex+4*n.numGlyphs,i=n.vertexStartIndex;i<r;i+=4)t.indexArray.emplaceBack(i,i+1,i+2),t.indexArray.emplaceBack(i+1,i+2,i+3)}},{key:"getSortedSymbolIndexes",value:function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),n=Math.cos(t),r=[],i=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);r.push(0|Math.round(e*s.anchorX+n*s.anchorY)),i.push(s.featureIndex)}return o.sort((function(t,e){return r[t]-r[e]||i[e]-i[t]})),o}},{key:"addToSortKeyRanges",value:function(t,e){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}},{key:"sortFeatures",value:function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];var n,r=f(this.symbolInstanceIndexes);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=this.symbolInstances.get(i);this.featureSortOrder.push(o.featureIndex),[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(t,n,r){t>=0&&r.indexOf(t)===n&&e.addIndicesForPlacedSymbol(e.text,t)})),o.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,o.verticalPlacedTextSymbolIndex),o.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.placedIconSymbolIndex),o.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.verticalPlacedIconSymbolIndex)}}catch(a){r.e(a)}finally{r.f()}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}]),e}();Dr("SymbolBucket",Fu,{omit:["layers","collisionBoxArray","features","compareText"]}),Fu.MAX_GLYPHS=65535,Fu.addDynamicAttributes=Nu;var Bu=new Si({"symbol-placement":new _i(gt.layout_symbol["symbol-placement"]),"symbol-spacing":new _i(gt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new _i(gt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new xi(gt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new _i(gt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new _i(gt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new _i(gt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new _i(gt.layout_symbol["icon-ignore-placement"]),"icon-optional":new _i(gt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new _i(gt.layout_symbol["icon-rotation-alignment"]),"icon-size":new xi(gt.layout_symbol["icon-size"]),"icon-text-fit":new _i(gt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new _i(gt.layout_symbol["icon-text-fit-padding"]),"icon-image":new xi(gt.layout_symbol["icon-image"]),"icon-rotate":new xi(gt.layout_symbol["icon-rotate"]),"icon-padding":new _i(gt.layout_symbol["icon-padding"]),"icon-keep-upright":new _i(gt.layout_symbol["icon-keep-upright"]),"icon-offset":new xi(gt.layout_symbol["icon-offset"]),"icon-anchor":new xi(gt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new _i(gt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new _i(gt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new _i(gt.layout_symbol["text-rotation-alignment"]),"text-field":new xi(gt.layout_symbol["text-field"]),"text-font":new xi(gt.layout_symbol["text-font"]),"text-size":new xi(gt.layout_symbol["text-size"]),"text-max-width":new xi(gt.layout_symbol["text-max-width"]),"text-line-height":new _i(gt.layout_symbol["text-line-height"]),"text-letter-spacing":new xi(gt.layout_symbol["text-letter-spacing"]),"text-justify":new xi(gt.layout_symbol["text-justify"]),"text-radial-offset":new xi(gt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new _i(gt.layout_symbol["text-variable-anchor"]),"text-anchor":new xi(gt.layout_symbol["text-anchor"]),"text-max-angle":new _i(gt.layout_symbol["text-max-angle"]),"text-writing-mode":new _i(gt.layout_symbol["text-writing-mode"]),"text-rotate":new xi(gt.layout_symbol["text-rotate"]),"text-padding":new _i(gt.layout_symbol["text-padding"]),"text-keep-upright":new _i(gt.layout_symbol["text-keep-upright"]),"text-transform":new xi(gt.layout_symbol["text-transform"]),"text-offset":new xi(gt.layout_symbol["text-offset"]),"text-allow-overlap":new _i(gt.layout_symbol["text-allow-overlap"]),"text-overlap":new _i(gt.layout_symbol["text-overlap"]),"text-ignore-placement":new _i(gt.layout_symbol["text-ignore-placement"]),"text-optional":new _i(gt.layout_symbol["text-optional"])}),ju={paint:new Si({"icon-opacity":new xi(gt.paint_symbol["icon-opacity"]),"icon-color":new xi(gt.paint_symbol["icon-color"]),"icon-halo-color":new xi(gt.paint_symbol["icon-halo-color"]),"icon-halo-width":new xi(gt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new xi(gt.paint_symbol["icon-halo-blur"]),"icon-translate":new _i(gt.paint_symbol["icon-translate"]),"icon-translate-anchor":new _i(gt.paint_symbol["icon-translate-anchor"]),"text-opacity":new xi(gt.paint_symbol["text-opacity"]),"text-color":new xi(gt.paint_symbol["text-color"],{runtimeType:At,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new xi(gt.paint_symbol["text-halo-color"]),"text-halo-width":new xi(gt.paint_symbol["text-halo-width"]),"text-halo-blur":new xi(gt.paint_symbol["text-halo-blur"]),"text-translate":new _i(gt.paint_symbol["text-translate"]),"text-translate-anchor":new _i(gt.paint_symbol["text-translate-anchor"])}),layout:Bu},Zu=function(){function t(e){d(this,t),this.type=e.property.overrides?e.property.overrides.runtimeType:St,this.defaultValue=e}return p(t,[{key:"evaluate",value:function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}},{key:"eachChild",value:function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return null}}]),t}();Dr("FormatSectionOverride",Zu,{omit:["defaultValue"]});var Uu=function(t){m(n,t);var e=g(n);function n(t){return d(this,n),e.call(this,t,ju)}return p(n,[{key:"recalculate",value:function(t,e){if(a(s(n.prototype),"recalculate",this).call(this,t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var r=this.layout.get("text-writing-mode");if(r){var i,o=[],l=f(r);try{for(l.s();!(i=l.n()).done;){var u=i.value;o.indexOf(u)<0&&o.push(u)}}catch(c){l.e(c)}finally{l.f()}this.layout._values["text-writing-mode"]=o}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}},{key:"getValueAndResolveTokens",value:function(t,e,n,r){var i=this.layout.get(t).evaluate(e,{},n,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||Gn(o.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,n){return n in t?String(t[n]):""}))}(e.properties,i)}},{key:"createBucket",value:function(t){return new Fu(t)}},{key:"queryRadius",value:function(){return 0}},{key:"queryIntersectsFeature",value:function(){return!1}},{key:"_setPaintOverrides",value:function(){var t,e=f(ju.paint.overridableProperties);try{for(e.s();!(t=e.n()).done;){var r=t.value;if(n.hasPaintOverride(this.layout,r)){var i=this.paint.get(r),o=new Zu(i),a=new qn(o,i.property.specification),s=null;s="constant"===i.value.kind||"source"===i.value.kind?new Hn("source",a):new Xn("composite",a,i.value.zoomStops,i.value._interpolationType),this.paint._values[r]=new vi(i.property,s,i.parameters)}}}catch(l){e.e(l)}finally{e.f()}}},{key:"_handleOverridablePaintPropertyUpdate",value:function(t,e,r){return!(!this.layout||e.isDataDriven()||r.isDataDriven())&&n.hasPaintOverride(this.layout,t)}}],[{key:"hasPaintOverride",value:function(t,e){var n=t.get("text-field"),r=ju.paint.properties[e],i=!1,o=function(t){var e,n=f(t);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(r.overrides&&r.overrides.hasOverride(o))return void(i=!0)}}catch(a){n.e(a)}finally{n.f()}};if("constant"===n.value.kind&&n.value.value instanceof Yt)o(n.value.value.sections);else if("source"===n.value.kind){var a=function t(e){i||(e instanceof ee&&Qt(e.value)===Lt?o(e.value.sections):e instanceof oe?o(e.sections):e.eachChild(t))},s=n.value;s._styleExpression&&a(s._styleExpression.expression)}return i}}]),n}(Ii);function Vu(t,e,n){var r="never",i=t.get(e);return i?r=i:t.get(n)&&(r="always"),r}var qu={paint:new Si({"background-color":new _i(gt.paint_background["background-color"]),"background-pattern":new wi(gt.paint_background["background-pattern"]),"background-opacity":new _i(gt.paint_background["background-opacity"])})},Gu={paint:new Si({"raster-opacity":new _i(gt.paint_raster["raster-opacity"]),"raster-hue-rotate":new _i(gt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new _i(gt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new _i(gt.paint_raster["raster-brightness-max"]),"raster-saturation":new _i(gt.paint_raster["raster-saturation"]),"raster-contrast":new _i(gt.paint_raster["raster-contrast"]),"raster-resampling":new _i(gt.paint_raster["raster-resampling"]),"raster-fade-duration":new _i(gt.paint_raster["raster-fade-duration"])})},Wu=function(t){m(n,t);var e=g(n);function n(t){var r;return d(this,n),(r=e.call(this,t,{})).onAdd=function(t){r.implementation.onAdd&&r.implementation.onAdd(t,t.painter.context.gl)},r.onRemove=function(t){r.implementation.onRemove&&r.implementation.onRemove(t,t.painter.context.gl)},r.implementation=t,r}return p(n,[{key:"is3D",value:function(){return"3d"===this.implementation.renderingMode}},{key:"hasOffscreenPass",value:function(){return void 0!==this.implementation.prerender}},{key:"recalculate",value:function(){}},{key:"updateTransitions",value:function(){}},{key:"hasTransition",value:function(){return!1}},{key:"serialize",value:function(){}}]),n}(Ii),Hu={circle:function(t){m(n,t);var e=g(n);function n(t){return d(this,n),e.call(this,t,ba)}return p(n,[{key:"createBucket",value:function(t){return new oa(t)}},{key:"queryRadius",value:function(t){var e=t;return va("circle-radius",this,e)+va("circle-stroke-width",this,e)+ya(this.paint.get("circle-translate"))}},{key:"queryIntersectsFeature",value:function(t,e,n,r,i,o,a,s){var l,u=_a(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),c=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),h="map"===this.paint.get("circle-pitch-alignment"),p=h?u:function(t,e){return t.map((function(t){return Aa(t,e)}))}(u,s),d=h?c*a:c,m=f(r);try{for(m.s();!(l=m.n()).done;){var g,v=l.value,y=f(v);try{for(y.s();!(g=y.n()).done;){var _=g.value,x=h?_:Aa(_,s),b=d,w=Ca([],[_.x,_.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?b*=w[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(b*=o.cameraToCenterDistance/w[3]),sa(p,x,b))return!0}}catch(k){y.e(k)}finally{y.f()}}}catch(k){m.e(k)}finally{m.f()}return!1}}]),n}(Ii),heatmap:function(t){m(n,t);var e=g(n);function n(t){var r;return d(this,n),(r=e.call(this,t,Ta))._updateColorRamp(),r}return p(n,[{key:"createBucket",value:function(t){return new Pa(t)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(t){"heatmap-color"===t&&this._updateColorRamp()}},{key:"_updateColorRamp",value:function(){this.colorRamp=za({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}},{key:"resize",value:function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}},{key:"queryRadius",value:function(){return 0}},{key:"queryIntersectsFeature",value:function(){return!1}},{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}]),n}(Ii),hillshade:function(t){m(n,t);var e=g(n);function n(t){return d(this,n),e.call(this,t,Da)}return p(n,[{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}]),n}(Ii),fill:function(t){m(n,t);var e=g(n);function n(t){return d(this,n),e.call(this,t,ks)}return p(n,[{key:"recalculate",value:function(t,e){a(s(n.prototype),"recalculate",this).call(this,t,e);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}},{key:"createBucket",value:function(t){return new bs(t)}},{key:"queryRadius",value:function(){return ya(this.paint.get("fill-translate"))}},{key:"queryIntersectsFeature",value:function(t,e,n,r,i,o,a){return la(_a(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)}},{key:"isTileClipped",value:function(){return!0}}]),n}(Ii),"fill-extrusion":function(t){m(n,t);var e=g(n);function n(t){return d(this,n),e.call(this,t,Vs)}return p(n,[{key:"createBucket",value:function(t){return new js(t)}},{key:"queryRadius",value:function(){return ya(this.paint.get("fill-extrusion-translate"))}},{key:"is3D",value:function(){return!0}},{key:"queryIntersectsFeature",value:function(t,e,n,r,i,o,a,s){var l=_a(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),u=this.paint.get("fill-extrusion-height").evaluate(e,n),c=this.paint.get("fill-extrusion-base").evaluate(e,n),h=function(t,e,n,r){var i,o=[],a=f(t);try{for(a.s();!(i=a.n()).done;){var s=i.value,l=[s.x,s.y,0,1];Ca(l,l,e),o.push(new F(l[0]/l[3],l[1]/l[3]))}}catch(u){a.e(u)}finally{a.f()}return o}(l,s),p=function(t,e,n,r){var i,o=[],a=[],s=r[8]*e,l=r[9]*e,u=r[10]*e,c=r[11]*e,h=r[8]*n,p=r[9]*n,d=r[10]*n,m=r[11]*n,g=f(t);try{for(g.s();!(i=g.n()).done;){var v,y=i.value,_=[],x=[],b=f(y);try{for(b.s();!(v=b.n()).done;){var w=v.value,k=w.x,S=w.y,E=r[0]*k+r[4]*S+r[12],I=r[1]*k+r[5]*S+r[13],C=r[2]*k+r[6]*S+r[14],A=r[3]*k+r[7]*S+r[15],P=C+u,T=A+c,M=E+h,L=I+p,R=C+d,N=A+m,O=new F((E+s)/T,(I+l)/T);O.z=P/T,_.push(O);var z=new F(M/N,L/N);z.z=R/N,x.push(z)}}catch(D){b.e(D)}finally{b.f()}o.push(_),a.push(x)}}catch(D){g.e(D)}finally{g.f()}return[o,a]}(r,c,u,s);return function(t,e,n){var r=1/0;la(n,e)&&(r=Gs(n,e[0]));for(var i=0;i<e.length;i++)for(var o=e[i],a=t[i],s=0;s<o.length-1;s++){var l=o[s],u=[l,o[s+1],a[s+1],a[s],l];aa(n,u)&&(r=Math.min(r,Gs(n,u)))}return r!==1/0&&r}(p[0],p[1],h)}}]),n}(Ii),line:function(t){m(n,t);var e=g(n);function n(t){var r;return d(this,n),(r=e.call(this,t,Qs)).gradientVersion=0,r}return p(n,[{key:"_handleSpecialPaintPropertyUpdate",value:function(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof De,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}},{key:"gradientExpression",value:function(){return this._transitionablePaint._values["line-gradient"].value.expression}},{key:"recalculate",value:function(t,e){a(s(n.prototype),"recalculate",this).call(this,t,e),this.paint._values["line-floorwidth"]=tl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}},{key:"createBucket",value:function(t){return new Ks(t)}},{key:"queryRadius",value:function(t){var e=t,n=el(va("line-width",this,e),va("line-gap-width",this,e)),r=va("line-offset",this,e);return n/2+Math.abs(r)+ya(this.paint.get("line-translate"))}},{key:"queryIntersectsFeature",value:function(t,e,n,r,i,o,a){var s=_a(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),l=a/2*el(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),u=this.paint.get("line-offset").evaluate(e,n);return u&&(r=function(t,e){for(var n=[],r=0;r<t.length;r++){for(var i=t[r],o=[],a=0;a<i.length;a++){var s=i[a-1],l=i[a],u=i[a+1],c=0===a?new F(0,0):l.sub(s)._unit()._perp(),h=a===i.length-1?new F(0,0):u.sub(l)._unit()._perp(),f=c._add(h)._unit(),p=f.x*h.x+f.y*h.y;0!==p&&f._mult(1/p),o.push(f._mult(e)._add(l))}n.push(o)}return n}(r,u*a)),function(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];if(t.length>=3)for(var o=0;o<i.length;o++)if(ma(t,i[o]))return!0;if(ua(t,i,n))return!0}return!1}(s,r,l)}},{key:"isTileClipped",value:function(){return!0}}]),n}(Ii),symbol:Uu,background:function(t){m(n,t);var e=g(n);function n(t){return d(this,n),e.call(this,t,qu)}return p(n)}(Ii),raster:function(t){m(n,t);var e=g(n);function n(t){return d(this,n),e.call(this,t,Gu)}return p(n)}(Ii)},Xu=function(){function t(e){var n=this;d(this,t),this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){n._triggered=!1,n._callback()})}return p(t,[{key:"trigger",value:function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))}},{key:"remove",value:function(){delete this._channel,this._callback=function(){}}}]),t}(),Yu=6371008.8,$u=function(){function t(e,n){if(d(this,t),isNaN(e)||isNaN(n))throw new Error("Invalid LngLat object: (".concat(e,", ").concat(n,")"));if(this.lng=+e,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return p(t,[{key:"wrap",value:function(){return new t(_(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(t){var e=Math.PI/180,n=this.lat*e,r=t.lat*e,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return Yu*Math.acos(Math.min(i,1))}},{key:"toBounds",value:function(){var e=360*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new Ku(new t(this.lng-n,this.lat-e),new t(this.lng+n,this.lat+e))}}],[{key:"convert",value:function(e){if(e instanceof t)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new t(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new t(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),t}(),Ku=function(){function t(e,n){d(this,t),e&&(n?this.setSouthWest(e).setNorthEast(n):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}return p(t,[{key:"setNorthEast",value:function(t){return this._ne=t instanceof $u?new $u(t.lng,t.lat):$u.convert(t),this}},{key:"setSouthWest",value:function(t){return this._sw=t instanceof $u?new $u(t.lng,t.lat):$u.convert(t),this}},{key:"extend",value:function(e){var n,r,i=this._sw,o=this._ne;if(e instanceof $u)n=e,r=e;else{if(!(e instanceof t))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(t.convert(e)):this.extend($u.convert(e)):this;if(n=e._sw,r=e._ne,!n||!r)return this}return i||o?(i.lng=Math.min(n.lng,i.lng),i.lat=Math.min(n.lat,i.lat),o.lng=Math.max(r.lng,o.lng),o.lat=Math.max(r.lat,o.lat)):(this._sw=new $u(n.lng,n.lat),this._ne=new $u(r.lng,r.lat)),this}},{key:"getCenter",value:function(){return new $u((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}},{key:"getSouthWest",value:function(){return this._sw}},{key:"getNorthEast",value:function(){return this._ne}},{key:"getNorthWest",value:function(){return new $u(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new $u(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this._sw.lng}},{key:"getSouth",value:function(){return this._sw.lat}},{key:"getEast",value:function(){return this._ne.lng}},{key:"getNorth",value:function(){return this._ne.lat}},{key:"toArray",value:function(){return[this._sw.toArray(),this._ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this._sw&&this._ne)}},{key:"contains",value:function(t){var e=$u.convert(t),n=e.lng,r=e.lat,i=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&i}}],[{key:"convert",value:function(e){return e instanceof t?e:e?new t(e):e}}]),t}(),Ju=2*Math.PI*Yu;function Qu(t){return Ju*Math.cos(t*Math.PI/180)}function tc(t){return(180+t)/360}function ec(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function nc(t,e){return t/Qu(e)}function rc(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var ic=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;d(this,t),this.x=+e,this.y=+n,this.z=+r}return p(t,[{key:"toLngLat",value:function(){return new $u(360*this.x-180,rc(this.y))}},{key:"toAltitude",value:function(){return this.z*Qu(rc(this.y))}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/Ju*(t=rc(this.y),1/Math.cos(t*Math.PI/180));var t}}],[{key:"fromLngLat",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=$u.convert(e);return new t(tc(r.lng),ec(r.lat),nc(n,r.lat))}}]),t}();function oc(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}var ac=function(){function t(e,n,r){d(this,t),this.z=e,this.x=n,this.y=r,this.key=uc(0,e,e,n,r)}return p(t,[{key:"equals",value:function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}},{key:"url",value:function(t,e,n){var r,i,o,a,s,l=(i=this.y,o=this.z,a=oc(256*(r=this.x),256*(i=Math.pow(2,o)-i-1),o),s=oc(256*(r+1),256*(i+1),o),a[0]+","+a[1]+","+s[0]+","+s[1]),u=function(t,e,n){for(var r,i="",o=t;o>0;o--)i+=(e&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,e>1?"@2x":"").replace(/{quadkey}/g,u).replace(/{bbox-epsg-3857}/g,l)}},{key:"getTilePoint",value:function(t){var e=Math.pow(2,this.z);return new F((t.x*e-this.x)*Qo,(t.y*e-this.y)*Qo)}},{key:"toString",value:function(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}]),t}(),sc=p((function t(e,n){d(this,t),this.wrap=e,this.canonical=n,this.key=uc(e,n.z,n.z,n.x,n.y)})),lc=function(){function t(e,n,r,i,o){d(this,t),this.overscaledZ=e,this.wrap=n,this.canonical=new ac(r,+i,+o),this.key=uc(n,e,r,i,o)}return p(t,[{key:"equals",value:function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}},{key:"scaledTo",value:function(e){var n=this.canonical.z-e;return e>this.canonical.z?new t(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new t(e,this.wrap,e,this.canonical.x>>n,this.canonical.y>>n)}},{key:"calculateScaledKey",value:function(t,e){var n=this.canonical.z-t;return t>this.canonical.z?uc(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):uc(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)}},{key:"isChildOf",value:function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}},{key:"children",value:function(e){if(this.overscaledZ>=e)return[new t(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var n=this.canonical.z+1,r=2*this.canonical.x,i=2*this.canonical.y;return[new t(n,this.wrap,n,r,i),new t(n,this.wrap,n,r+1,i),new t(n,this.wrap,n,r,i+1),new t(n,this.wrap,n,r+1,i+1)]}},{key:"isLessThan",value:function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}},{key:"wrapped",value:function(){return new t(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"unwrapTo",value:function(e){return new t(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"overscaleFactor",value:function(){return Math.pow(2,this.overscaledZ-this.canonical.z)}},{key:"toUnwrapped",value:function(){return new sc(this.wrap,this.canonical)}},{key:"toString",value:function(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}},{key:"getTilePoint",value:function(t){return this.canonical.getTilePoint(new ic(t.x-this.wrap,t.y))}}]),t}();function uc(t,e,n,r,i){(t*=2)<0&&(t=-1*t-1);var o=1<<n;return(o*o*t+o*i+r).toString(36)+n.toString(36)+e.toString(36)}Dr("CanonicalTileID",ac),Dr("OverscaledTileID",lc,{omit:["posMatrix"]});var cc=function(){function t(e,n,r){if(d(this,t),this.uid=e,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)C('"'.concat(r,'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'));else{this.stride=n.height;var i=this.dim=n.height-2;this.data=new Uint32Array(n.data.buffer),this.encoding=r||"mapbox";for(var o=0;o<i;o++)this.data[this._idx(-1,o)]=this.data[this._idx(0,o)],this.data[this._idx(i,o)]=this.data[this._idx(i-1,o)],this.data[this._idx(o,-1)]=this.data[this._idx(o,0)],this.data[this._idx(o,i)]=this.data[this._idx(o,i-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(i,-1)]=this.data[this._idx(i-1,0)],this.data[this._idx(-1,i)]=this.data[this._idx(0,i-1)],this.data[this._idx(i,i)]=this.data[this._idx(i-1,i-1)]}}return p(t,[{key:"get",value:function(t,e){var n=new Uint8Array(this.data.buffer),r=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[r],n[r+1],n[r+2])}},{key:"getUnpackVector",value:function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}},{key:"_idx",value:function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}},{key:"_unpackMapbox",value:function(t,e,n){return(256*t*256+256*e+n)/10-1e4}},{key:"_unpackTerrarium",value:function(t,e,n){return 256*t+e+n/256-32768}},{key:"getPixels",value:function(){return new Oa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}},{key:"backfillBorder",value:function(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var r=e*this.dim,i=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,l=-n*this.dim,u=o;u<a;u++)for(var c=r;c<i;c++)this.data[this._idx(c,u)]=t.data[this._idx(c+s,u+l)]}}]),t}();Dr("DEMData",cc);var hc,fc=function(){function t(e){d(this,t),this._stringToNumber={},this._numberToString=[];for(var n=0;n<e.length;n++){var r=e[n];this._stringToNumber[r]=n,this._numberToString[n]=r}}return p(t,[{key:"encode",value:function(t){return this._stringToNumber[t]}},{key:"decode",value:function(t){return this._numberToString[t]}}]),t}(),pc=function(){function t(e,n,r,i,o){d(this,t),this.type="Feature",this._vectorTileFeature=e,e._z=n,e._x=r,e._y=i,this.properties=e.properties,this.id=o}return p(t,[{key:"geometry",get:function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},set:function(t){this._geometry=t}},{key:"toJSON",value:function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t}}]),t}(),dc=function(){function t(e,n){d(this,t),this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Or(Qo,16,0),this.grid3D=new Or(Qo,16,0),this.featureIndexArray=new uo,this.promoteId=n}return p(t,[{key:"insert",value:function(t,e,n,r,i,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var s=o?this.grid3D:this.grid,l=0;l<e.length;l++){for(var u=e[l],c=[1/0,1/0,-1/0,-1/0],h=0;h<u.length;h++){var f=u[h];c[0]=Math.min(c[0],f.x),c[1]=Math.min(c[1],f.y),c[2]=Math.max(c[2],f.x),c[3]=Math.max(c[3],f.y)}c[0]<Qo&&c[1]<Qo&&c[2]>=0&&c[3]>=0&&s.insert(a,c[0],c[1],c[2],c[3])}}},{key:"loadVTLayers",value:function(){return this.vtLayers||(this.vtLayers=new Es.VectorTile(new cl(this.rawTileData)).layers,this.sourceLayerCoder=new fc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}},{key:"query",value:function(t,e,n,r){var i=this;this.loadVTLayers();var o,a=t.params||{},s=Qo/t.tileSize/t.scale,l=ar(a.filter),u=t.queryGeometry,c=t.queryPadding*s,h=gc(u),p=this.grid.query(h.minX-c,h.minY-c,h.maxX+c,h.maxY+c),d=gc(t.cameraQueryGeometry),m=this.grid3D.query(d.minX-c,d.minY-c,d.maxX+c,d.maxY+c,(function(e,n,r,i){return function(t,e,n,r,i){var o,a=f(t);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(e<=s.x&&n<=s.y&&r>=s.x&&i>=s.y)return!0}}catch(p){a.e(p)}finally{a.f()}var l=[new F(e,n),new F(e,i),new F(r,i),new F(r,n)];if(t.length>2){var u,c=f(l);try{for(c.s();!(u=c.n()).done;)if(ma(t,u.value))return!0}catch(p){c.e(p)}finally{c.f()}}for(var h=0;h<t.length-1;h++)if(ga(t[h],t[h+1],l))return!0;return!1}(t.cameraQueryGeometry,e-c,n-c,r+c,i+c)})),g=f(m);try{for(g.s();!(o=g.n()).done;){var v=o.value;p.push(v)}}catch(w){g.e(w)}finally{g.f()}p.sort(vc);for(var y,_={},x=function(o){var c=p[o];if(c===y)return"continue";y=c;var h=i.featureIndexArray.get(c),f=null;i.loadMatchingFeature(_,h.bucketIndex,h.sourceLayerIndex,h.featureIndex,l,a.layers,a.availableImages,e,n,r,(function(e,n,r){return f||(f=na(e)),n.queryIntersectsFeature(u,e,r,f,i.z,t.transform,s,t.pixelPosMatrix)}))},b=0;b<p.length;b++)x(b);return _}},{key:"loadMatchingFeature",value:function(t,e,n,r,i,o,a,s,l,u,c){var h=this.bucketLayerIDs[e];if(!o||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(o,h)){var f=this.sourceLayerCoder.decode(n),p=this.vtLayers[f].feature(r);if(i.needGeometry){var d=ra(p,!0);if(!i.filter(new ci(this.tileID.overscaledZ),d,this.tileID.canonical))return}else if(!i.filter(new ci(this.tileID.overscaledZ),p))return;for(var m=this.getId(p,f),g=0;g<h.length;g++){var v=h[g];if(!(o&&o.indexOf(v)<0)){var y=s[v];if(y){var _={};m&&u&&(_=u.getState(y.sourceLayer||"_geojsonTileLayer",m));var b=x({},l[v]);b.paint=mc(b.paint,y.paint,p,_,a),b.layout=mc(b.layout,y.layout,p,_,a);var w=!c||c(p,y,_);if(w){var k=new pc(p,this.z,this.x,this.y,m);k.layer=b;var S=t[v];void 0===S&&(S=t[v]=[]),S.push({featureIndex:r,feature:k,intersectionZ:w})}}}}}}},{key:"lookupSymbolFeatures",value:function(t,e,n,r,i,o,a,s){var l={};this.loadVTLayers();var u,c=ar(i),h=f(t);try{for(h.s();!(u=h.n()).done;){var p=u.value;this.loadMatchingFeature(l,n,r,p,c,o,a,s,e)}}catch(d){h.e(d)}finally{h.f()}return l}},{key:"hasLayer",value:function(t){var e,n=f(this.bucketLayerIDs);try{for(n.s();!(e=n.n()).done;){var r,i=e.value,o=f(i);try{for(o.s();!(r=o.n()).done;)if(t===r.value)return!0}catch(a){o.e(a)}finally{o.f()}}}catch(a){n.e(a)}finally{n.f()}return!1}},{key:"getId",value:function(t,e){var n=t.id;return this.promoteId&&"boolean"==typeof(n=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(n=Number(n)),n}}]),t}();function mc(t,e,n,r,i){return k(t,(function(t,o){var a=e instanceof yi?e.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a}))}function gc(t){var e,n=1/0,r=1/0,i=-1/0,o=-1/0,a=f(t);try{for(a.s();!(e=a.n()).done;){var s=e.value;n=Math.min(n,s.x),r=Math.min(r,s.y),i=Math.max(i,s.x),o=Math.max(o,s.y)}}catch(l){a.e(l)}finally{a.f()}return{minX:n,minY:r,maxX:i,maxY:o}}function vc(t,e){return e-t}Dr("FeatureIndex",dc,{omit:["rawTileData","sourceLayerCoder"]}),t.PerformanceMarkers=void 0,(hc=t.PerformanceMarkers||(t.PerformanceMarkers={})).create="create",hc.load="load",hc.fullLoad="fullLoad";var yc=null,_c=[],xc=1e3/30,bc={mark:function(t){performance.mark(t)},frame:function(t){var e=t;null!=yc&&_c.push(e-yc),yc=e},clearMetrics:function(){for(var e in yc=null,_c=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime"),t.PerformanceMarkers)performance.clearMarks(t.PerformanceMarkers[e])},getPerformanceMetrics:function(){performance.measure("loadTime",t.PerformanceMarkers.create,t.PerformanceMarkers.load),performance.measure("fullLoadTime",t.PerformanceMarkers.create,t.PerformanceMarkers.fullLoad);var e=performance.getEntriesByName("loadTime")[0].duration,n=performance.getEntriesByName("fullLoadTime")[0].duration,r=_c.length,i=1/(_c.reduce((function(t,e){return t+e}),0)/r/1e3),o=_c.filter((function(t){return t>xc})).reduce((function(t,e){return t+(e-xc)/xc}),0);return{loadTime:e,fullLoadTime:n,fps:i,percentDroppedFrames:o/(r+o)*100}}};t.AJAXError=et,t.ARRAY_TYPE=wa,t.Actor=function(){function t(e,n,r){d(this,t),this.target=e,this.parent=n,this.mapId=r,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},w(["receive","process"],this),this.invoker=new Xu(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=T()?e:window}return p(t,[{key:"send",value:function(t,e,n,r){var i=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[a]=n);var s=O(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!n,targetMapId:r,mustQueue:o,sourceMapId:this.mapId,data:jr(e,s)},s),{cancel:function(){n&&delete i.callbacks[a],i.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:i.mapId})}}}},{key:"receive",value:function(t){var e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[n];var r=this.cancelCallbacks[n];delete this.cancelCallbacks[n],r&&r()}else T()||e.mustQueue?(this.tasks[n]=e,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,e)}},{key:"process",value:function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}}},{key:"processTask",value:function(t,e){var n=this;if("<response>"===e.type){var r=this.callbacks[t];delete this.callbacks[t],r&&(e.error?r(Zr(e.error)):r(null,Zr(e.data)))}else{var i=!1,o=O(this.globalScope)?void 0:[],a=e.hasCallback?function(e,r){i=!0,delete n.cancelCallbacks[t],n.target.postMessage({id:t,type:"<response>",sourceMapId:n.mapId,error:e?jr(e):null,data:jr(r,o)},o)}:function(t){i=!0},s=null,l=Zr(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,l,a);else if(this.parent.getWorkerSource){var u=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,u[0],l.source)[u[1]](l,a)}else a(new Error("Could not find function ".concat(e.type)));!i&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}}},{key:"remove",value:function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}}]),t}(),t.AlphaImage=Na,t.CanonicalTileID=ac,t.CollisionBoxArray=eo,t.CollisionCircleLayoutArray=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n)}(Vi),t.Color=Wt,t.DEMData=cc,t.DataConstantProperty=_i,t.DictionaryCoder=fc,t.EXTENT=Qo,t.ErrorEvent=dt,t.EvaluationParameters=ci,t.Event=pt,t.Evented=mt,t.FeatureIndex=dc,t.FillBucket=bs,t.FillExtrusionBucket=js,t.GeoJSONFeature=pc,t.ImageAtlas=Fl,t.ImagePosition=Dl,t.LineBucket=Ks,t.LineStripIndexArray=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n)}(Ji),t.LngLat=$u,t.LngLatBounds=Ku,t.MercatorCoordinate=ic,t.ONE_EM=ul,t.OverscaledTileID=lc,t.PerformanceUtils=bc,t.PosArray=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n)}(Li),t.Properties=Si,t.QuadTriangleArray=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n)}(Gi),t.RGBAImage=Oa,t.RasterBoundsArray=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n)}(Ri),t.RequestPerformance=function(){function t(e){d(this,t),this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},performance.mark(this._marks.start)}return p(t,[{key:"finish",value:function(){performance.mark(this._marks.end);var t=performance.getEntriesByName(this._marks.measure);return 0===t.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),t=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),t}}]),t}(),t.ResourceType=tt,t.SegmentVector=Eo,t.SymbolBucket=Fu,t.Transitionable=pi,t.TriangleIndexArray=wo,t.Uniform1f=Bo,t.Uniform1i=function(t){m(n,t);var e=g(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).current=0,i}return p(n,[{key:"set",value:function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))}}]),n}(Fo),t.Uniform2f=function(t){m(n,t);var e=g(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).current=[0,0],i}return p(n,[{key:"set",value:function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))}}]),n}(Fo),t.Uniform3f=function(t){m(n,t);var e=g(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).current=[0,0,0],i}return p(n,[{key:"set",value:function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))}}]),n}(Fo),t.Uniform4f=jo,t.UniformColor=Zo,t.UniformMatrix4f=function(t){m(n,t);var e=g(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).current=Uo,i}return p(n,[{key:"set",value:function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}}}]),n}(Fo),t.UnwrappedTileID=sc,t.ValidationError=vt,t.ZoomHistory=Ur,t.addDynamicAttributes=Nu,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach((function(t,a){e(t,(function(t,e){t&&(o=t),i[a]=e,0==--r&&n(o,i)}))}))},t.bezier=r,t.bindAll=w,t.cacheEntryPossiblyAdded=function(t){++Y>G&&(t.getActor().send("enforceCacheSizeLimit",q),Y=0)},t.clamp=y,t.clearTileCache=function(t){var e=caches.delete(V);t&&e.catch(t).then((function(){return t()}))},t.clipLine=hu,t.clone=function(t){var e=new wa(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=E,t.collisionCircleLayout=al,t.config=U,t.create=function(){var t=new wa(16);return wa!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.createExpression=Wn,t.createFilter=ar,t.createLayout=Ti,t.createStyleLayer=function(t){return"custom"===t.type?new Wu(t):new Hu[t.type](t)},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=i,t.emitValidationErrors=Nr,t.enforceCacheSizeLimit=function(t){W(),j&&j.then((function(e){e.keys().then((function(n){for(var r=0;r<n.length-t;r++)e.delete(n[r])}))}))},t.evaluateSizeForFeature=function(t,e,n){var r=e.uSize,i=e.uSizeT,o=n.lowerSize,a=n.upperSize;return"source"===t.kind?o/eu:"composite"===t.kind?Fe(o/eu,a/eu,i):r},t.evaluateSizeForZoom=function(t,e){var n=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){var i=t.interpolationType,o=t.minZoom,a=t.maxZoom,s=i?y(rn.interpolationFactor(i,e,o,a),0,1):0;"camera"===t.kind?r=Fe(t.minSize,t.maxSize,s):n=s}return{uSizeT:n,uSize:r}},t.evaluateVariableOffset=Su,t.evented=ai,t.exported=D,t.exported$1=$,t.extend=x,t.filterObject=S,t.getAnchorAlignment=Kl,t.getAnchorJustification=Eu,t.getArrayBuffer=ot,t.getImage=ct,t.getJSON=function(t,e){return it(x(t,{type:"json"}),e)},t.getOverlapMode=Vu,t.getRTLTextPluginStatus=si,t.getReferrer=nt,t.getVideo=function(t,e){var n=window.document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(var r=0;r<t.length;r++){var i=window.document.createElement("source");at(t[r])||(n.crossOrigin="Anonymous"),i.src=t[r],n.appendChild(i)}return{cancel:function(){}}},t.identity=ka,t.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],p=e[11],d=e[12],m=e[13],g=e[14],v=e[15],y=n*s-r*a,_=n*l-i*a,x=n*u-o*a,b=r*l-i*s,w=r*u-o*s,k=i*u-o*l,S=c*m-h*d,E=c*g-f*d,I=c*v-p*d,C=h*g-f*m,A=h*v-p*m,P=f*v-p*g,T=y*P-_*A+x*C+b*I-w*E+k*S;return T?(t[0]=(s*P-l*A+u*C)*(T=1/T),t[1]=(i*A-r*P-o*C)*T,t[2]=(m*k-g*w+v*b)*T,t[3]=(f*w-h*k-p*b)*T,t[4]=(l*I-a*P-u*E)*T,t[5]=(n*P-i*I+o*E)*T,t[6]=(g*x-d*k-v*_)*T,t[7]=(c*k-f*x+p*_)*T,t[8]=(a*A-s*I+u*S)*T,t[9]=(r*I-n*A-o*S)*T,t[10]=(d*w-m*x+v*y)*T,t[11]=(h*x-c*w-p*y)*T,t[12]=(s*E-a*C-l*S)*T,t[13]=(n*C-r*E+i*S)*T,t[14]=(m*_-d*b-g*y)*T,t[15]=(c*b-h*_+f*y)*T,t):null},t.isImageBitmap=z,t.isSafari=O,t.keysDifference=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n},t.lazyLoadRTLTextPlugin=function(){ui.isLoading()||ui.isLoaded()||"deferred"!==si()||li()},t.makeRequest=it,t.mapObject=k,t.mercatorXfromLng=tc,t.mercatorYfromLat=ec,t.mercatorZfromAltitude=nc,t.mul=Ia,t.multiply=Sa,t.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.number=Fe,t.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),l=1/(r-i),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(a+o)*u,t[15]=1,t},t.parseCacheControl=M,t.parseGlyphPBF=function(t){return new cl(t).readFields(Rl,[])},t.pbf=cl,t.performSymbolLayout=function(e,n,r,i,o,a,s){e.createArrays(),e.tilePixelRatio=Qo/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var l=e.layers[0].layout,u=e.layers[0]._unevaluatedLayout._values,c={layoutIconSize:u["icon-size"].possiblyEvaluate(new ci(e.zoom+1),s),layoutTextSize:u["text-size"].possiblyEvaluate(new ci(e.zoom+1),s),textMaxSize:u["text-size"].possiblyEvaluate(new ci(18))};if("composite"===e.textSizeData.kind){var h=e.textSizeData,p=h.minZoom,d=h.maxZoom;c.compositeTextSizes=[u["text-size"].possiblyEvaluate(new ci(p),s),u["text-size"].possiblyEvaluate(new ci(d),s)]}if("composite"===e.iconSizeData.kind){var m=e.iconSizeData,g=m.minZoom,v=m.maxZoom;c.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new ci(g),s),u["icon-size"].possiblyEvaluate(new ci(v),s)]}var y,_=l.get("text-line-height")*ul,x="viewport"!==l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),b=l.get("text-keep-upright"),w=l.get("text-size"),k=f(e.features);try{var S=function(){var a=y.value,u=l.get("text-font").evaluate(a,{},s).join(","),h=w.evaluate(a,{},s),f=c.layoutTextSize.evaluate(a,{},s),p=c.layoutIconSize.evaluate(a,{},s),d={horizontal:{},vertical:void 0},m=a.text,g=void 0,v=[0,0];if(m){var k=m.toString(),S=l.get("text-letter-spacing").evaluate(a,{},s)*ul,E=Gr(k)?S:0,I=l.get("text-anchor").evaluate(a,{},s),A=l.get("text-variable-anchor");if(!A){var P=l.get("text-radial-offset").evaluate(a,{},s);v=P?Su(I,[P*ul,ku]):l.get("text-offset").evaluate(a,{},s).map((function(t){return t*ul}))}var T=x?"center":l.get("text-justify").evaluate(a,{},s),M=l.get("symbol-placement"),L="point"===M?l.get("text-max-width").evaluate(a,{},s)*ul:0,R=function(){e.allowVerticalPlacement&&qr(k)&&(d.vertical=Ul(m,n,r,o,u,L,_,I,"left",E,v,t.WritingMode.vertical,!0,M,f,h))};if(!x&&A){for(var N="auto"===T?A.map((function(t){return Eu(t)})):[T],O=!1,z=0;z<N.length;z++){var D=N[z];if(!d.horizontal[D])if(O)d.horizontal[D]=d.horizontal[0];else{var F=Ul(m,n,r,o,u,L,_,"center",D,E,v,t.WritingMode.horizontal,!1,M,f,h);F&&(d.horizontal[D]=F,O=1===F.positionedLines.length)}}R()}else{"auto"===T&&(T=Eu(I));var B=Ul(m,n,r,o,u,L,_,I,T,E,v,t.WritingMode.horizontal,!1,M,f,h);B&&(d.horizontal[T]=B),R(),qr(k)&&x&&b&&(d.vertical=Ul(m,n,r,o,u,L,_,I,T,E,v,t.WritingMode.vertical,!1,M,f,h))}}var j=!1;if(a.icon&&a.icon.name){var Z=i[a.icon.name];Z&&(g=Ql(o[a.icon.name],l.get("icon-offset").evaluate(a,{},s),l.get("icon-anchor").evaluate(a,{},s)),j=!!Z.sdf,void 0===e.sdfIcons?e.sdfIcons=j:e.sdfIcons!==j&&C("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Z.pixelRatio!==e.pixelRatio||0!==l.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}var U=Pu(d.horizontal)||d.vertical;e.iconsInText=!!U&&U.iconsInText,(U||g)&&Iu(e,a,d,g,i,c,f,p,v,j,s)};for(k.s();!(y=k.n()).done;)S()}catch(E){k.e(E)}finally{k.f()}a&&e.generateCollisionDebugBuffers()},t.perspective=function(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(o=1/(r-i)),t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},t.pick=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n},t.plugin=ui,t.pointGeometry=F,t.polygonIntersectsPolygon=aa,t.potpack=zl,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Dr,t.registerForPluginStateChange=function(t){return t({pluginStatus:ni,pluginURL:ri}),ai.on("pluginStateChange",t),t},t.renderColorRamp=za,t.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+u*r,t[5]=a*i+c*r,t[6]=s*i+h*r,t[7]=l*i+f*r,t[8]=u*i-o*r,t[9]=c*i-a*r,t[10]=h*i-s*r,t[11]=f*i-l*r,t},t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+u*r,t[1]=a*i+c*r,t[2]=s*i+h*r,t[3]=l*i+f*r,t[4]=u*i-o*r,t[5]=c*i-a*r,t[6]=h*i-s*r,t[7]=f*i-l*r,t},t.scale=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},t.setCacheLimits=function(t,e){q=t,G=e},t.setRTLTextPlugin=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ni===Jr||ni===Qr||ni===ti)throw new Error("setRTLTextPlugin cannot be called multiple times.");ri=D.resolveURL(t),ni=Jr,ei=e,oi(),n||li()},t.spec=gt,t.sphericalToCartesian=function(t){var e=h(t,3),n=e[0],r=e[1],i=e[2];return r+=90,r*=Math.PI/180,i*=Math.PI/180,{x:n*Math.cos(r)*Math.sin(i),y:n*Math.sin(r)*Math.sin(i),z:n*Math.cos(i)}},t.toEvaluationFeature=ra,t.transformMat4=Ca,t.translate=function(t,e,n){var r,i,o,a,s,l,u,c,h,f,p,d,m=n[0],g=n[1],v=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*v+e[12],t[13]=e[1]*m+e[5]*g+e[9]*v+e[13],t[14]=e[2]*m+e[6]*g+e[10]*v+e[14],t[15]=e[3]*m+e[7]*g+e[11]*v+e[15]):(i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],t[0]=r=e[0],t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=f,t[10]=p,t[11]=d,t[12]=r*m+s*g+h*v+e[12],t[13]=i*m+l*g+f*v+e[13],t[14]=o*m+u*g+p*v+e[14],t[15]=a*m+c*g+d*v+e[15]),t},t.triggerPluginCompletionEvent=ii,t.unicodeBlockLookup=Vr,t.uniqueId=function(){return b++},t.validateCustomStyleLayer=function(t){var e=[],n=t.id;return void 0===n&&e.push({message:"layers.".concat(n,': missing required property "id"')}),void 0===t.render&&e.push({message:"layers.".concat(n,': missing required method "render"')}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers.".concat(n,': property "renderingMode" must be either "2d" or "3d"')}),e},t.validateLight=Mr,t.validateStyle=Tr,t.vectorTile=Es,t.warnOnce=C,t.wrap=_})),y(["./shared"],(function(t){function e(t){var n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){var r,i="[",o=f(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;i+="".concat(e(a),",")}}catch(c){o.e(c)}finally{o.f()}return"".concat(i,"]")}for(var s=Object.keys(t).sort(),l="{",u=0;u<s.length;u++)l+="".concat(JSON.stringify(s[u]),":").concat(e(t[s[u]]),",");return"".concat(l,"}")}function n(n){var r,i="",o=f(t.refProperties);try{for(o.s();!(r=o.n()).done;){var a=r.value;i+="/".concat(e(n[a]))}}catch(s){o.e(s)}finally{o.f()}return i}var r=function(){function e(t){d(this,e),this.keyCache={},t&&this.replace(t)}return p(e,[{key:"replace",value:function(t){this._layerConfigs={},this._layers={},this.update(t,[])}},{key:"update",value:function(e,r){var i,o=this,a=f(e);try{for(a.s();!(i=a.n()).done;){var s=i.value;this._layerConfigs[s.id]=s;var l=this._layers[s.id]=t.createStyleLayer(s);l._featureFilter=t.createFilter(l.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}}catch(w){a.e(w)}finally{a.f()}var u,c=f(r);try{for(c.s();!(u=c.n()).done;){var h=u.value;delete this.keyCache[h],delete this._layerConfigs[h],delete this._layers[h]}}catch(w){c.e(w)}finally{c.f()}this.familiesBySource={};var p,d=function(t,e){for(var r={},i=0;i<t.length;i++){var o=e&&e[t[i].id]||n(t[i]);e&&(e[t[i].id]=o);var a=r[o];a||(a=r[o]=[]),a.push(t[i])}var s=[];for(var l in r)s.push(r[l]);return s}(Object.values(this._layerConfigs),this.keyCache),m=f(d);try{for(m.s();!(p=m.n()).done;){var g=p.value.map((function(t){return o._layers[t.id]})),v=g[0];if("none"!==v.visibility){var y=v.source||"",_=this.familiesBySource[y];_||(_=this.familiesBySource[y]={});var x=v.sourceLayer||"_geojsonTileLayer",b=_[x];b||(b=_[x]=[]),b.push(g)}}}catch(w){m.e(w)}finally{m.f()}}}]),e}(),i=p((function e(n){d(this,e);var r={},i=[];for(var o in n){var a=n[o],s=r[o]={};for(var l in a){var u=a[+l];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var c={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2};i.push(c),s[l]={rect:c,metrics:u.metrics}}}}var h=t.potpack(i),f=h.w,p=h.h,m=new t.AlphaImage({width:f||1,height:p||1});for(var g in n){var v=n[g];for(var y in v){var _=v[+y];if(_&&0!==_.bitmap.width&&0!==_.bitmap.height){var x=r[g][y].rect;t.AlphaImage.copy(_.bitmap,m,{x:0,y:0},{x:x.x+1,y:x.y+1},_.bitmap)}}}this.image=m,this.positions=r}));t.register("GlyphAtlas",i);var o=function(){function e(n){d(this,e),this.tileID=new t.OverscaledTileID(n.tileID.overscaledZ,n.tileID.wrap,n.tileID.canonical.z,n.tileID.canonical.x,n.tileID.canonical.y),this.uid=n.uid,this.zoom=n.zoom,this.pixelRatio=n.pixelRatio,this.tileSize=n.tileSize,this.source=n.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=n.showCollisionBoxes,this.collectResourceTiming=!!n.collectResourceTiming,this.returnDependencies=!!n.returnDependencies,this.promoteId=n.promoteId}return p(e,[{key:"parse",value:function(e,n,r,o,a){var s=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var u=new t.DictionaryCoder(Object.keys(e.layers).sort()),c=new t.FeatureIndex(this.tileID,this.promoteId);c.bucketLayerIDs=[];var h,p,d,m,g={},v={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:r},y=n.familiesBySource[this.source];for(var _ in y){var x=e.layers[_];if(x){1===x.version&&t.warnOnce('Vector tile source "'.concat(this.source,'" layer "').concat(_,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));for(var b=u.encode(_),w=[],k=0;k<x.length;k++){var S=x.feature(k),E=c.getId(S,_);w.push({feature:S,id:E,index:k,sourceLayerIndex:b})}var I,C=f(y[_]);try{for(C.s();!(I=C.n()).done;){var A=I.value,P=A[0];P.minzoom&&this.zoom<Math.floor(P.minzoom)||P.maxzoom&&this.zoom>=P.maxzoom||"none"!==P.visibility&&(l(A,this.zoom,r),(g[P.id]=P.createBucket({index:c.bucketLayerIDs.length,layers:A,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:b,sourceID:this.source})).populate(w,v,this.tileID.canonical),c.bucketLayerIDs.push(A.map((function(t){return t.id}))))}}catch(N){C.e(N)}finally{C.f()}}}var T=t.mapObject(v.glyphDependencies,(function(t){return Object.keys(t).map(Number)}));Object.keys(T).length?o.send("getGlyphs",{uid:this.uid,stacks:T},(function(t,e){h||(h=t,p=e,R.call(s))})):p={};var M=Object.keys(v.iconDependencies);M.length?o.send("getImages",{icons:M,source:this.source,tileID:this.tileID,type:"icons"},(function(t,e){h||(h=t,d=e,R.call(s))})):d={};var L=Object.keys(v.patternDependencies);function R(){if(h)return a(h);if(p&&d&&m){var e=new i(p),n=new t.ImageAtlas(d,m);for(var o in g){var s=g[o];s instanceof t.SymbolBucket?(l(s.layers,this.zoom,r),t.performSymbolLayout(s,p,e.positions,d,n.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):s.hasPattern&&(s instanceof t.LineBucket||s instanceof t.FillBucket||s instanceof t.FillExtrusionBucket)&&(l(s.layers,this.zoom,r),s.addFeatures(v,this.tileID.canonical,n.patternPositions))}this.status="done",a(null,{buckets:Object.values(g).filter((function(t){return!t.isEmpty()})),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:n,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?d:null,glyphPositions:this.returnDependencies?e.positions:null})}}L.length?o.send("getImages",{icons:L,source:this.source,tileID:this.tileID,type:"patterns"},(function(t,e){h||(h=t,m=e,R.call(s))})):m={},R.call(this)}}]),e}();function l(e,n,r){var i,o=new t.EvaluationParameters(n),a=f(e);try{for(a.s();!(i=a.n()).done;)i.value.recalculate(o,r)}catch(s){a.e(s)}finally{a.f()}}function u(e,n){var r=t.getArrayBuffer(e.request,(function(e,r,i,o){e?n(e):r&&n(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(r)),rawData:r,cacheControl:i,expires:o})}));return function(){r.cancel(),n()}}var c=function(){function e(t,n,r,i){d(this,e),this.actor=t,this.layerIndex=n,this.availableImages=r,this.loadVectorData=i||u,this.loading={},this.loaded={}}return p(e,[{key:"loadTile",value:function(e,n){var r=this,i=e.uid;this.loading||(this.loading={});var a=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),s=this.loading[i]=new o(e);s.abort=this.loadVectorData(e,(function(e,o){if(delete r.loading[i],e||!o)return s.status="done",r.loaded[i]=s,n(e);var l=o.rawData,u={};o.expires&&(u.expires=o.expires),o.cacheControl&&(u.cacheControl=o.cacheControl);var c={};if(a){var h=a.finish();h&&(c.resourceTiming=JSON.parse(JSON.stringify(h)))}s.vectorTile=o.vectorTile,s.parse(o.vectorTile,r.layerIndex,r.availableImages,r.actor,(function(e,r){if(e||!r)return n(e);n(null,t.extend({rawTileData:l.slice(0)},r,u,c))})),r.loaded=r.loaded||{},r.loaded[i]=s}))}},{key:"reloadTile",value:function(t,e){var n=this,r=this.loaded,i=t.uid,o=this;if(r&&r[i]){var a=r[i];a.showCollisionBoxes=t.showCollisionBoxes;var s=function(t,r){var i=a.reloadCallback;i&&(delete a.reloadCallback,a.parse(a.vectorTile,o.layerIndex,n.availableImages,o.actor,i)),e(t,r)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}}},{key:"abortTile",value:function(t,e){var n=this.loading,r=t.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()}},{key:"removeTile",value:function(t,e){var n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()}}]),e}(),v=function(){function e(){d(this,e),this.loaded={}}return p(e,[{key:"loadTile",value:function(e,n){var r=e.uid,i=e.encoding,o=e.rawImageData,a=t.isImageBitmap(o)?this.getImageData(o):o,s=new t.DEMData(r,a,i);this.loaded=this.loaded||{},this.loaded[r]=s,n(null,s)}},{key:"getImageData",value:function(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var n=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:n.width,height:n.height},n.data)}},{key:"removeTile",value:function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]}}]),e}(),y=function t(e,n){var r,i=e&&e.type;if("FeatureCollection"===i)for(r=0;r<e.features.length;r++)t(e.features[r],n);else if("GeometryCollection"===i)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],n);else if("Feature"===i)t(e.geometry,n);else if("Polygon"===i)_(e.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<e.coordinates.length;r++)_(e.coordinates[r],n);return e};function _(t,e){if(0!==t.length){x(t[0],e);for(var n=1;n<t.length;n++)x(t[n],!e)}}function x(t,e){for(var n=0,r=0,i=0,o=t.length,a=o-1;i<o;a=i++){var s=(t[i][0]-t[a][0])*(t[a][1]+t[i][1]),l=n+s;r+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+r>=0!=!!e&&t.reverse()}var b=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,w=function(){function e(n){d(this,e),this._feature=n,this.extent=t.EXTENT,this.type=n.type,this.properties=n.tags,"id"in n&&!isNaN(n.id)&&(this.id=parseInt(n.id,10))}return p(e,[{key:"loadGeometry",value:function(){if(1===this._feature.type){var e,n=[],r=f(this._feature.geometry);try{for(r.s();!(e=r.n()).done;){var i=e.value;n.push([new t.pointGeometry(i[0],i[1])])}}catch(d){r.e(d)}finally{r.f()}return n}var o,a=[],s=f(this._feature.geometry);try{for(s.s();!(o=s.n()).done;){var l,u=o.value,c=[],h=f(u);try{for(h.s();!(l=h.n()).done;){var p=l.value;c.push(new t.pointGeometry(p[0],p[1]))}}catch(d){h.e(d)}finally{h.f()}a.push(c)}}catch(d){s.e(d)}finally{s.f()}return a}},{key:"toGeoJSON",value:function(t,e,n){return b.call(this,t,e,n)}}]),e}(),k=function(){function e(n){d(this,e),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=n.length,this._features=n}return p(e,[{key:"feature",value:function(t){return new w(this._features[t])}}]),e}(),S={exports:{}},E=t.pointGeometry,I=t.vectorTile.VectorTileFeature,C=A;function A(t,e){this.options=e||{},this.features=t,this.length=t.length}function P(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}A.prototype.feature=function(t){return new P(this.features[t],this.options.extent)},P.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],r=[],i=0;i<n.length;i++)r.push(new E(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},P.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[e,r,n,i]},P.prototype.toGeoJSON=I.prototype.toGeoJSON;var T=t.pbf,M=C;function L(t){var e=new T;return function(t,e){for(var n in t.layers)e.writeMessage(3,R,t.layers[n])}(t,e),e.finish()}function R(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,N,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,B,o[n])}function N(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,O,t),e.writeVarintField(3,n.type),e.writeMessage(4,F,n)}function O(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var l=n.properties[s],u=o[s];if(null!==l){void 0===u&&(r.push(s),o[s]=u=r.length-1),e.writeVarint(u);var c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var h=c+":"+l,f=a[h];void 0===f&&(i.push(l),a[h]=f=i.length-1),e.writeVarint(f)}}}function z(t,e){return(e<<3)+(7&t)}function D(t){return t<<1^t>>31}function F(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],u=1;1===r&&(u=l.length),e.writeVarint(z(1,u));for(var c=3===r?l.length-1:l.length,h=0;h<c;h++){1===h&&1!==r&&e.writeVarint(z(2,c-1));var f=l[h].x-i,p=l[h].y-o;e.writeVarint(D(f)),e.writeVarint(D(p)),i+=f,o+=p}3===r&&e.writeVarint(z(7,1))}}function B(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}S.exports=L,S.exports.fromVectorTileJs=L,S.exports.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new M(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return L({layers:n})},S.exports.GeoJSONWrapper=M;var j=S.exports;function Z(t,e,n,r,i,o){if(!(i-r<=n)){var a=r+i>>1;U(t,e,a,r,i,o%2),Z(t,e,n,r,a-1,o+1),Z(t,e,n,a+1,i,o+1)}}function U(t,e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);U(t,e,n,Math.max(r,Math.floor(n-s*u/a+c)),Math.min(i,Math.floor(n+(a-s)*u/a+c)),o)}var h=e[2*n+o],f=r,p=i;for(V(t,e,r,n),e[2*i+o]>h&&V(t,e,r,i);f<p;){for(V(t,e,f,p),f++,p--;e[2*f+o]<h;)f++;for(;e[2*p+o]>h;)p--}e[2*r+o]===h?V(t,e,r,p):V(t,e,++p,i),p<=n&&(r=p+1),n<=p&&(i=p-1)}}function V(t,e,n,r){q(t,n,r),q(e,2*n,2*r),q(e,2*n+1,2*r+1)}function q(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function G(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}var W,H=function(t){return t[0]},X=function(t){return t[1]},Y=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:X,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Float64Array;d(this,t),this.nodeSize=i,this.points=e;for(var a=e.length<65536?Uint16Array:Uint32Array,s=this.ids=new a(e.length),l=this.coords=new o(2*e.length),u=0;u<e.length;u++)s[u]=u,l[2*u]=n(e[u]),l[2*u+1]=r(e[u]);Z(s,l,i,0,s.length-1,0)}return p(t,[{key:"range",value:function(t,e,n,r){return function(t,e,n,r,i,o,a){for(var s,l,u=[0,t.length-1,0],c=[];u.length;){var h=u.pop(),f=u.pop(),p=u.pop();if(f-p<=a)for(var d=p;d<=f;d++)s=e[2*d],l=e[2*d+1],s>=n&&s<=i&&l>=r&&l<=o&&c.push(t[d]);else{var m=Math.floor((p+f)/2);s=e[2*m],l=e[2*m+1],s>=n&&s<=i&&l>=r&&l<=o&&c.push(t[m]);var g=(h+1)%2;(0===h?n<=s:r<=l)&&(u.push(p),u.push(m-1),u.push(g)),(0===h?i>=s:o>=l)&&(u.push(m+1),u.push(f),u.push(g))}}return c}(this.ids,this.coords,t,e,n,r,this.nodeSize)}},{key:"within",value:function(t,e,n){return function(t,e,n,r,i,o){for(var a=[0,t.length-1,0],s=[],l=i*i;a.length;){var u=a.pop(),c=a.pop(),h=a.pop();if(c-h<=o)for(var f=h;f<=c;f++)G(e[2*f],e[2*f+1],n,r)<=l&&s.push(t[f]);else{var p=Math.floor((h+c)/2),d=e[2*p],m=e[2*p+1];G(d,m,n,r)<=l&&s.push(t[p]);var g=(u+1)%2;(0===u?n-i<=d:r-i<=m)&&(a.push(h),a.push(p-1),a.push(g)),(0===u?n+i>=d:r+i>=m)&&(a.push(p+1),a.push(c),a.push(g))}}return s}(this.ids,this.coords,t,e,n,this.nodeSize)}}]),t}(),$={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},K=Math.fround||(W=new Float32Array(1),function(t){return W[0]=+t,W[0]}),J=function(){function t(e){d(this,t),this.options=at(Object.create($),e),this.trees=new Array(this.options.maxZoom+1)}return p(t,[{key:"load",value:function(t){var e=this.options,n=e.log,r=e.minZoom,i=e.maxZoom,o=e.nodeSize;n&&console.time("total time");var a="prepare ".concat(t.length," points");n&&console.time(a),this.points=t;for(var s=[],l=0;l<t.length;l++)t[l].geometry&&s.push(tt(t[l],l));this.trees[i+1]=new Y(s,st,lt,o,Float32Array),n&&console.timeEnd(a);for(var u=i;u>=r;u--){var c=+Date.now();s=this._cluster(s,u),this.trees[u]=new Y(s,st,lt,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",u,s.length,+Date.now()-c)}return n&&console.timeEnd("total time"),this}},{key:"getClusters",value:function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return a.concat(s)}var l,u=this.trees[this._limitZoom(e)],c=u.range(rt(n),it(o),rt(i),it(r)),h=[],p=f(c);try{for(p.s();!(l=p.n()).done;){var d=l.value,m=u.points[d];h.push(m.numPoints?et(m):this.points[m.index])}}catch(g){p.e(g)}finally{p.f()}return h}},{key:"getChildren",value:function(t){var e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[e];if(!o)throw new Error(r);var a,s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),l=i.within(o.x,o.y,s),u=[],c=f(l);try{for(c.s();!(a=c.n()).done;){var h=a.value,p=i.points[h];p.parentId===t&&u.push(p.numPoints?et(p):this.points[p.index])}}catch(d){c.e(d)}finally{c.f()}if(0===u.length)throw new Error(r);return u}},{key:"getLeaves",value:function(t,e,n){var r=[];return this._appendLeaves(r,t,e=e||10,n=n||0,0),r}},{key:"getTile",value:function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,a=o.extent,s=o.radius/a,l=(n-s)/i,u=(n+1+s)/i,c={features:[]};return this._addTileFeatures(r.range((e-s)/i,l,(e+1+s)/i,u),r.points,e,n,i,c),0===e&&this._addTileFeatures(r.range(1-s/i,l,1,u),r.points,i,n,i,c),e===i-1&&this._addTileFeatures(r.range(0,l,s/i,u),r.points,-1,n,i,c),c.features.length?c:null}},{key:"getClusterExpansionZoom",value:function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}},{key:"_appendLeaves",value:function(t,e,n,r,i){var o,a=this.getChildren(e),s=f(a);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=l.properties;if(u&&u.cluster?i+u.point_count<=r?i+=u.point_count:i=this._appendLeaves(t,u.cluster_id,n,r,i):i<r?i++:t.push(l),t.length===n)break}}catch(c){s.e(c)}finally{s.f()}return i}},{key:"_addTileFeatures",value:function(t,e,n,r,i,o){var a,s=f(t);try{for(s.s();!(a=s.n()).done;){var l=e[a.value],u=l.numPoints,c=void 0,h=void 0,p=void 0;if(u)c=nt(l),h=l.x,p=l.y;else{var d=this.points[l.index];c=d.properties,h=rt(d.geometry.coordinates[0]),p=it(d.geometry.coordinates[1])}var m={type:1,geometry:[[Math.round(this.options.extent*(h*i-n)),Math.round(this.options.extent*(p*i-r))]],tags:c},g=void 0;u?g=l.id:this.options.generateId?g=l.index:this.points[l.index].id&&(g=this.points[l.index].id),void 0!==g&&(m.id=g),o.features.push(m)}}catch(v){s.e(v)}finally{s.f()}}},{key:"_limitZoom",value:function(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))}},{key:"_cluster",value:function(t,e){for(var n=[],r=this.options,i=r.radius,o=r.extent,a=r.reduce,s=r.minPoints,l=i/(o*Math.pow(2,e)),u=0;u<t.length;u++){var c=t[u];if(!(c.zoom<=e)){c.zoom=e;var h,p=this.trees[e+1],d=p.within(c.x,c.y,l),m=c.numPoints||1,g=m,v=f(d);try{for(v.s();!(h=v.n()).done;){var y=h.value,_=p.points[y];_.zoom>e&&(g+=_.numPoints||1)}}catch(R){v.e(R)}finally{v.f()}if(g>m&&g>=s){var x,b=c.x*m,w=c.y*m,k=a&&m>1?this._map(c,!0):null,S=(u<<5)+(e+1)+this.points.length,E=f(d);try{for(E.s();!(x=E.n()).done;){var I=x.value,C=p.points[I];if(!(C.zoom<=e)){C.zoom=e;var A=C.numPoints||1;b+=C.x*A,w+=C.y*A,C.parentId=S,a&&(k||(k=this._map(c,!0)),a(k,this._map(C)))}}}catch(R){E.e(R)}finally{E.f()}c.parentId=S,n.push(Q(b/g,w/g,S,g,k))}else if(n.push(c),g>1){var P,T=f(d);try{for(T.s();!(P=T.n()).done;){var M=P.value,L=p.points[M];L.zoom<=e||(L.zoom=e,n.push(L))}}catch(R){T.e(R)}finally{T.f()}}}}return n}},{key:"_getOriginId",value:function(t){return t-this.points.length>>5}},{key:"_getOriginZoom",value:function(t){return(t-this.points.length)%32}},{key:"_map",value:function(t,e){if(t.numPoints)return e?at({},t.properties):t.properties;var n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?at({},r):r}}]),t}();function Q(t,e,n,r,i){return{x:K(t),y:K(e),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function tt(t,e){var n=h(t.geometry.coordinates,2),r=n[0],i=n[1];return{x:K(rt(r)),y:K(it(i)),zoom:1/0,index:e,parentId:-1}}function et(t){return{type:"Feature",id:t.id,properties:nt(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),ot(t.y)]}};var e}function nt(t){var e=t.numPoints,n=e>=1e4?"".concat(Math.round(e/1e3),"k"):e>=1e3?Math.round(e/100)/10+"k":e;return at(at({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function rt(t){return t/360+.5}function it(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function ot(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function at(t,e){for(var n in e)t[n]=e[n];return t}function st(t){return t.x}function lt(t){return t.y}function ut(t,e,n,r){for(var i,o=r,a=n-e>>1,s=n-e,l=t[e],u=t[e+1],c=t[n],h=t[n+1],f=e+3;f<n;f+=3){var p=ct(t[f],t[f+1],l,u,c,h);if(p>o)i=f,o=p;else if(p===o){var d=Math.abs(f-a);d<s&&(i=f,s=d)}}o>r&&(i-e>3&&ut(t,e,i,r),t[i+2]=o,n-i>3&&ut(t,i,n,r))}function ct(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var l=((t-n)*a+(e-r)*s)/(a*a+s*s);l>1?(n=i,r=o):l>0&&(n+=a*l,r+=s*l)}return(a=t-n)*a+(s=e-r)*s}function ht(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)ft(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)ft(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)ft(t,e[r][i])}(i),i}function ft(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function pt(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===o)dt(i,s);else if("MultiPoint"===o)for(var u=0;u<i.length;u++)dt(i[u],s);else if("LineString"===o)mt(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(u=0;u<i.length;u++)mt(i[u],s=[],a,!1),t.push(ht(l,"LineString",s,e.properties));return}gt(i,s,a,!1)}else if("Polygon"===o)gt(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(u=0;u<e.geometry.geometries.length;u++)pt(t,{id:l,geometry:e.geometry.geometries[u],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<i.length;u++){var c=[];gt(i[u],c,a,!0),s.push(c)}}t.push(ht(l,o,s,e.properties))}}function dt(t,e){e.push(vt(t[0])),e.push(yt(t[1])),e.push(0)}function mt(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var l=vt(t[s][0]),u=yt(t[s][1]);e.push(l),e.push(u),e.push(0),s>0&&(a+=r?(i*u-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-o,2))),i=l,o=u}var c=e.length-3;e[2]=1,ut(e,0,c,n),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function gt(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];mt(t[i],o,n,r),e.push(o)}}function vt(t){return t/360+.5}function yt(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function _t(t,e,n,r,i,o,a,s){if(r/=e,o>=(n/=e)&&a<r)return t;if(a<n||o>=r)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],h=c.geometry,f=c.type,p=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(p>=n&&d<r)l.push(c);else if(!(d<n||p>=r)){var m=[];if("Point"===f||"MultiPoint"===f)xt(h,m,n,r,i);else if("LineString"===f)bt(h,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===f)kt(h,m,n,r,i,!1);else if("Polygon"===f)kt(h,m,n,r,i,!0);else if("MultiPolygon"===f)for(var g=0;g<h.length;g++){var v=[];kt(h[g],v,n,r,i,!0),v.length&&m.push(v)}if(m.length){if(s.lineMetrics&&"LineString"===f){for(g=0;g<m.length;g++)l.push(ht(c.id,f,m[g],c.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===m.length?(f="LineString",m=m[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===m.length?"Point":"MultiPoint"),l.push(ht(c.id,f,m,c.tags))}}}return l.length?l:null}function xt(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function bt(t,e,n,r,i,o,a){for(var s,l,u=wt(t),c=0===i?Et:It,h=t.start,f=0;f<t.length-3;f+=3){var p=t[f],d=t[f+1],m=t[f+2],g=t[f+3],v=t[f+4],y=0===i?p:d,_=0===i?g:v,x=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(d-v,2))),y<n?_>n&&(l=c(u,p,d,g,v,n),a&&(u.start=h+s*l)):y>r?_<r&&(l=c(u,p,d,g,v,r),a&&(u.start=h+s*l)):St(u,p,d,m),_<n&&y>=n&&(l=c(u,p,d,g,v,n),x=!0),_>r&&y<=r&&(l=c(u,p,d,g,v,r),x=!0),!o&&x&&(a&&(u.end=h+s*l),e.push(u),u=wt(t)),a&&(h+=s)}var b=t.length-3;p=t[b],d=t[b+1],m=t[b+2],(y=0===i?p:d)>=n&&y<=r&&St(u,p,d,m),b=u.length-3,o&&b>=3&&(u[b]!==u[0]||u[b+1]!==u[1])&&St(u,u[0],u[1],u[2]),u.length&&e.push(u)}function wt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function kt(t,e,n,r,i,o){for(var a=0;a<t.length;a++)bt(t[a],e,n,r,i,o,!1)}function St(t,e,n,r){t.push(e),t.push(n),t.push(r)}function Et(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function It(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function Ct(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=At(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(At(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(At(o.geometry[s][u],e));i.push(l)}n.push(ht(o.id,a,i,o.tags))}return n}function At(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function Pt(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(r=0;r<u.length;r+=2)l.geometry.push(Tt(u[r],u[r+1],e,o,a,s));else for(r=0;r<u.length;r++){var h=[];for(i=0;i<u[r].length;i+=2)h.push(Tt(u[r][i],u[r][i+1],e,o,a,s));l.geometry.push(h)}}return t.transformed=!0,t}function Tt(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function Mt(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,Lt(a,t[s],o,i);var l=t[s].minX,u=t[s].minY,c=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),h>a.maxY&&(a.maxY=h)}return a}function Lt(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)Rt(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)Rt(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var u=i[l];for(s=0;s<u.length;s++)Rt(a,u[s],t,n,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var f={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(f.id=e.id),t.features.push(f)}}function Rt(t,e,n,r,i,o){var a=r*r;if(r>0&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===r||e[l+2]>a)&&(n.numSimplified++,s.push(e[l]),s.push(e[l+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}(s,o),t.push(s)}}function Nt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)pt(n,t.features[r],e,r);else pt(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(t,e){var n=e.buffer/e.extent,r=t,i=_t(t,1,-1-n,n,0,-1,2,e),o=_t(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=_t(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=Ct(i,1).concat(r)),o&&(r=r.concat(Ct(o,-1)))),r}(r,e),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ot(t,e,n){return 32*((1<<t)*n+e)+t}function zt(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return e(null,null);var i=new k(r.features),o=j(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}Nt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Nt.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],l=this.options,u=l.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,h=Ot(e,n,r),f=this.tiles[h];if(!f&&(u>1&&console.time("creation"),f=this.tiles[h]=Mt(t,e,n,r,l),this.tileCoords.push({z:e,x:n,y:r}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,f.numFeatures,f.numPoints,f.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(f.source=t,i){if(e===l.maxZoom||e===i)continue;var d=1<<i-e;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(e===l.indexMaxZoom||f.numPoints<=l.indexMaxPoints)continue;if(f.source=null,0!==t.length){u>1&&console.time("clipping");var m,g,v,y,_,x,b=.5*l.buffer/l.extent,w=.5-b,k=.5+b,S=1+b;m=g=v=y=null,_=_t(t,c,n-b,n+k,0,f.minX,f.maxX,l),x=_t(t,c,n+w,n+S,0,f.minX,f.maxX,l),t=null,_&&(m=_t(_,c,r-b,r+k,1,f.minY,f.maxY,l),g=_t(_,c,r+w,r+S,1,f.minY,f.maxY,l),_=null),x&&(v=_t(x,c,r-b,r+k,1,f.minY,f.maxY,l),y=_t(x,c,r+w,r+S,1,f.minY,f.maxY,l),x=null),u>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*n,2*r),s.push(g||[],e+1,2*n,2*r+1),s.push(v||[],e+1,2*n+1,2*r),s.push(y||[],e+1,2*n+1,2*r+1)}}},Nt.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,s=Ot(t,e=(e%a+a)%a,n);if(this.tiles[s])return Pt(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l,u=t,c=e,h=n;!l&&u>0;)u--,c=Math.floor(c/2),h=Math.floor(h/2),l=this.tiles[Ot(u,c,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",u,c,h),o>1&&console.time("drilling down"),this.splitTile(l.source,u,c,h,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?Pt(this.tiles[s],i):null):null};var Dt=function(e){m(r,e);var n=g(r);function r(t,e,i,o){var a;return d(this,r),a=n.call(this,t,e,i,zt),o&&(a.loadGeoJSON=o),a}return p(r,[{key:"loadData",value:function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}},{key:"_loadData",value:function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var n=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var i=!!(r&&r.request&&r.request.collectResourceTiming)&&new t.RequestPerformance(r.request);this.loadGeoJSON(r,(function(o,a){if(o||!a)return n(o);if("object"!=typeof a)return n(new Error("Input data given to '".concat(r.source,"' is not a valid GeoJSON object.")));y(a,!0);try{if(r.filter){var s=t.createExpression(r.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===s.result)throw new Error(s.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));var l=a.features.filter((function(t){return s.value.evaluate({zoom:0},t)}));a={type:"FeatureCollection",features:l}}e._geoJSONIndex=r.cluster?new J(function(e){var n=e.superclusterOptions,r=e.clusterProperties;if(!r||!n)return n;for(var i={},o={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(r),u=0,c=l;u<c.length;u++){var p=c[u],d=h(r[p],2),m=d[0],g=d[1],v=t.createExpression(g),y=t.createExpression("string"==typeof m?[m,["accumulated"],["get",p]]:m);i[p]=v.value,o[p]=y.value}return n.map=function(t){s.properties=t;var e,n={},r=f(l);try{for(r.s();!(e=r.n()).done;){var o=e.value;n[o]=i[o].evaluate(a,s)}}catch(u){r.e(u)}finally{r.f()}return n},n.reduce=function(t,e){s.properties=e;var n,r=f(l);try{for(r.s();!(n=r.n()).done;){var i=n.value;a.accumulated=t[i],t[i]=o[i].evaluate(a,s)}}catch(u){r.e(u)}finally{r.f()}},n}(r)).load(a.features):function(t,e){return new Nt(t,e)}(a,r.geojsonVtOptions)}catch(o){return n(o)}e.loaded={};var u={};if(i){var c=i.finish();c&&(u.resourceTiming={},u.resourceTiming[r.source]=JSON.parse(JSON.stringify(c)))}n(null,u)}))}}},{key:"coalesce",value:function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())}},{key:"reloadTile",value:function(t,e){var n=this.loaded;return n&&n[t.uid]?a(s(r.prototype),"reloadTile",this).call(this,t,e):this.loadTile(t,e)}},{key:"loadGeoJSON",value:function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object.")));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object.")))}}}},{key:"removeSource",value:function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()}},{key:"getClusterExpansionZoom",value:function(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}},{key:"getClusterChildren",value:function(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}},{key:"getClusterLeaves",value:function(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}]),r}(c),Ft=function(){function e(n){var r=this;d(this,e),this.self=n,this.actor=new t.Actor(n,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:c,geojson:Dt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(r.workerSourceTypes[t])throw new Error('Worker source with name "'.concat(t,'" already registered.'));r.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}return p(e,[{key:"setReferrer",value:function(t,e){this.referrer=e}},{key:"setImages",value:function(t,e,n){for(var r in this.availableImages[t]=e,this.workerSources[t]){var i=this.workerSources[t][r];for(var o in i)i[o].availableImages=e}n()}},{key:"setLayers",value:function(t,e,n){this.getLayerIndex(t).replace(e),n()}},{key:"updateLayers",value:function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()}},{key:"loadTile",value:function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)}},{key:"loadDEMTile",value:function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)}},{key:"reloadTile",value:function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)}},{key:"abortTile",value:function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)}},{key:"removeTile",value:function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)}},{key:"removeDEMTile",value:function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)}},{key:"removeSource",value:function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}}},{key:"loadWorkerSource",value:function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}}},{key:"syncRTLPluginState",value:function(e,n,r){try{t.plugin.setState(n);var i=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=i){this.self.importScripts(i);var o=t.plugin.isParsed();r(o?void 0:new Error("RTL Text Plugin failed to import scripts from ".concat(i)),o)}}catch(t){r(t.toString())}}},{key:"getAvailableImages",value:function(t){var e=this.availableImages[t];return e||(e=[]),e}},{key:"getLayerIndex",value:function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e}},{key:"getWorkerSource",value:function(t,e,n){var r=this;if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){var i={send:function(e,n,i){r.actor.send(e,n,i,t)}};this.workerSources[t][e][n]=new this.workerSourceTypes[e](i,this.getLayerIndex(t),this.getAvailableImages(t))}return this.workerSources[t][e][n]}},{key:"getDEMWorkerSource",value:function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new v),this.demWorkerSources[t][e]}},{key:"enforceCacheSizeLimit",value:function(e,n){t.enforceCacheSizeLimit(n)}}]),e}();return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Ft(self)),Ft})),y(["./shared"],(function(t){var e=n;function n(t){return!function(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(void 0===o[e=t&&t.failIfMajorPerformanceCaveat]&&(o[e]=function(t){var e,r=function(t){var e=document.createElement("canvas"),r=Object.create(n.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,e.getContext("webgl",r)||e.getContext("experimental-webgl",r)}(t);if(!r)return!1;try{e=r.createShader(r.VERTEX_SHADER)}catch(t){return!1}return!(!e||r.isContextLost())&&(r.shaderSource(e,"void main() {}"),r.compileShader(e),!0===r.getShaderParameter(e,r.COMPILE_STATUS))}(e)),o[e]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var e}(t)}var o={};function u(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!u(t[n],e[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t)if(!u(t[r],e[r]))return!1;return!0}return t===e}n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};var c=function(){function e(){d(this,e)}return p(e,null,[{key:"testProp",value:function(t){if(!e.docStyle)return t[0];for(var n=0;n<t.length;n++)if(t[n]in e.docStyle)return t[n];return t[0]}},{key:"create",value:function(t,e,n){var r=window.document.createElement(t);return void 0!==e&&(r.className=e),n&&n.appendChild(r),r}},{key:"createNS",value:function(t,e){return window.document.createElementNS(t,e)}},{key:"disableDrag",value:function(){e.docStyle&&e.selectProp&&(e.userSelect=e.docStyle[e.selectProp],e.docStyle[e.selectProp]="none")}},{key:"enableDrag",value:function(){e.docStyle&&e.selectProp&&(e.docStyle[e.selectProp]=e.userSelect)}},{key:"setTransform",value:function(t,n){t.style[e.transformProp]=n}},{key:"addEventListener",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.addEventListener(e,n,"passive"in r?r:r.capture)}},{key:"removeEventListener",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.removeEventListener(e,n,"passive"in r?r:r.capture)}},{key:"suppressClickInternal",value:function(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",e.suppressClickInternal,!0)}},{key:"suppressClick",value:function(){window.addEventListener("click",e.suppressClickInternal,!0),window.setTimeout((function(){window.removeEventListener("click",e.suppressClickInternal,!0)}),0)}},{key:"mousePos",value:function(e,n){var r=e.getBoundingClientRect();return new t.pointGeometry(n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop)}},{key:"touchPos",value:function(e,n){for(var r=e.getBoundingClientRect(),i=[],o=0;o<n.length;o++)i.push(new t.pointGeometry(n[o].clientX-r.left-e.clientLeft,n[o].clientY-r.top-e.clientTop));return i}},{key:"mouseButton",value:function(t){return t.button}},{key:"remove",value:function(t){t.parentNode&&t.parentNode.removeChild(t)}}]),e}();c.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,c.selectProp=c.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),c.transformProp=c.testProp(["transform","WebkitTransform"]);var v=function(){function t(e){d(this,t),this._transformRequestFn=e}return p(t,[{key:"transformRequest",value:function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}},{key:"normalizeSpriteURL",value:function(t,e,n){var r=function(t){var e=t.match(y);if(!e)throw new Error('Unable to parse URL "'.concat(t,'"'));return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}(t);return r.path+="".concat(e).concat(n),function(t){var e=t.params.length?"?".concat(t.params.join("&")):"";return"".concat(t.protocol,"://").concat(t.authority).concat(t.path).concat(e)}(r)}},{key:"setTransformRequest",value:function(t){this._transformRequestFn=t}}]),t}(),y=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function _(e){var n=new t.ARRAY_TYPE(3);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}var x,b=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t};x=new t.ARRAY_TYPE(3),t.ARRAY_TYPE!=Float32Array&&(x[0]=0,x[1]=0,x[2]=0);var w=function(t){var e=t[0],n=t[1];return e*e+n*n};!function(){var e=new t.ARRAY_TYPE(2);t.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0)}();var k=function(){function e(t,n,r,i){d(this,e),this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(n,i)}return p(e,[{key:"update",value:function(e,n,r){var i=e.width,o=e.height,a=!(this.size&&this.size[0]===i&&this.size[1]===o||r),s=this.context,l=s.gl;if(this.useMipmap=Boolean(n&&n.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!n||!1!==n.premultiply)),a)this.size=[i,o],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.isImageBitmap(e)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,e):l.texImage2D(l.TEXTURE_2D,0,this.format,i,o,0,this.format,l.UNSIGNED_BYTE,e.data);else{var u=r||{x:0,y:0},c=u.x,h=u.y;e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.isImageBitmap(e)?l.texSubImage2D(l.TEXTURE_2D,0,c,h,l.RGBA,l.UNSIGNED_BYTE,e):l.texSubImage2D(l.TEXTURE_2D,0,c,h,i,o,l.RGBA,l.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D)}},{key:"bind",value:function(t,e,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)}},{key:"isSizePowerOfTwo",value:function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}},{key:"destroy",value:function(){this.context.gl.deleteTexture(this.texture),this.texture=null}}]),e}();function S(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}var E=function(e){m(r,e);var n=g(r);function r(){var e;return d(this,r),(e=n.call(this)).images={},e.updatedImages={},e.callbackDispatchedThisFrame={},e.loaded=!1,e.requestors=[],e.patterns={},e.atlasImage=new t.RGBAImage({width:1,height:1}),e.dirty=!0,e}return p(r,[{key:"isLoaded",value:function(){return this.loaded}},{key:"setLoaded",value:function(t){if(this.loaded!==t&&(this.loaded=t,t)){var e,n=f(this.requestors);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=r.ids,o=r.callback;this._notify(i,o)}}catch(a){n.e(a)}finally{n.f()}this.requestors=[]}}},{key:"getImage",value:function(t){return this.images[t]}},{key:"addImage",value:function(t,e){this._validate(t,e)&&(this.images[t]=e)}},{key:"_validate",value:function(e,n){var r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'.concat(e,'" has invalid "stretchX" value')))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'.concat(e,'" has invalid "stretchY" value')))),r=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error('Image "'.concat(e,'" has invalid "content" value')))),r=!1),r}},{key:"_validateStretch",value:function(t,e){if(!t)return!0;var n,r=0,i=f(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o[0]<r||o[1]<o[0]||e<o[1])return!1;r=o[1]}}catch(a){i.e(a)}finally{i.f()}return!0}},{key:"_validateContent",value:function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}},{key:"updateImage",value:function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0}},{key:"removeImage",value:function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}},{key:"listImages",value:function(){return Object.keys(this.images)}},{key:"getImages",value:function(t,e){var n=!0;if(!this.isLoaded()){var r,i=f(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.images[o]||(n=!1)}}catch(a){i.e(a)}finally{i.f()}}this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})}},{key:"_notify",value:function(e,n){var r,i={},o=f(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;this.images[a]||this.fire(new t.Event("styleimagemissing",{id:a}));var s=this.images[a];s?i[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'.concat(a,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}}catch(l){o.e(l)}finally{o.f()}n(null,i)}},{key:"getPixelSize",value:function(){var t=this.atlasImage;return{width:t.width,height:t.height}}},{key:"getPattern",value:function(e){var n=this.patterns[e],r=this.getImage(e);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},o=new t.ImagePosition(i,r);this.patterns[e]={bin:i,position:o}}return this._updatePatternAtlas(),this.patterns[e].position}},{key:"bind",value:function(t){var e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new k(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)}},{key:"_updatePatternAtlas",value:function(){var e=[];for(var n in this.patterns)e.push(this.patterns[n].bin);var r=t.potpack(e),i=r.w,o=r.h,a=this.atlasImage;for(var s in a.resize({width:i||1,height:o||1}),this.patterns){var l=this.patterns[s].bin,u=l.x+1,c=l.y+1,h=this.images[s].data,f=h.width,p=h.height;t.RGBAImage.copy(h,a,{x:0,y:0},{x:u,y:c},{width:f,height:p}),t.RGBAImage.copy(h,a,{x:0,y:p-1},{x:u,y:c-1},{width:f,height:1}),t.RGBAImage.copy(h,a,{x:0,y:0},{x:u,y:c+p},{width:f,height:1}),t.RGBAImage.copy(h,a,{x:f-1,y:0},{x:u-1,y:c},{width:1,height:p}),t.RGBAImage.copy(h,a,{x:0,y:0},{x:u+f,y:c},{width:1,height:p})}this.dirty=!0}},{key:"beginFrame",value:function(){this.callbackDispatchedThisFrame={}}},{key:"dispatchRenderCallbacks",value:function(t){var e,n=f(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!this.callbackDispatchedThisFrame[r]){this.callbackDispatchedThisFrame[r]=!0;var i=this.images[r];S(i)&&this.updateImage(r,i)}}}catch(o){n.e(o)}finally{n.f()}}}]),r}(t.Evented),I=1e20;function C(t,e,n,r,i,o,a,s,l){for(var u=e;u<e+r;u++)A(t,n*o+u,o,i,a,s,l);for(var c=n;c<n+i;c++)A(t,c*o+e,1,r,a,s,l)}function A(t,e,n,r,i,o,a){o[0]=0,a[0]=-I,a[1]=I,i[0]=t[e];for(var s=1,l=0,u=0;s<r;s++){i[s]=t[e+s*n];var c=s*s;do{var h=o[l];u=(i[s]-i[h]+c-h*h)/(s-h)/2}while(u<=a[l]&&--l>-1);o[++l]=s,a[l]=u,a[l+1]=I}for(var f=0,p=0;f<r;f++){for(;a[p+1]<f;)p++;var d=o[p],m=f-d;t[e+f*n]=i[d]+m*m}}var P=function(){function e(t,n){d(this,e),this.requestManager=t,this.localIdeographFontFamily=n,this.entries={}}return p(e,[{key:"setURL",value:function(t){this.url=t}},{key:"getGlyphs",value:function(n,r){var i=this,o=[];for(var a in n){var s,l=f(n[a]);try{for(l.s();!(s=l.n()).done;){var u=s.value;o.push({stack:a,id:u})}}catch(c){l.e(c)}finally{l.f()}}t.asyncAll(o,(function(t,n){var r=t.stack,o=t.id,a=i.entries[r];a||(a=i.entries[r]={glyphs:{},requests:{},ranges:{}});var s=a.glyphs[o];if(void 0===s){if(s=i._tinySDF(a,r,o))return a.glyphs[o]=s,void n(null,{stack:r,id:o,glyph:s});var l=Math.floor(o/256);if(256*l>65535)n(new Error("glyphs > 65535 not supported"));else if(a.ranges[l])n(null,{stack:r,id:o,glyph:s});else{var u=a.requests[l];u||(u=a.requests[l]=[],e.loadGlyphRange(r,l,i.url,i.requestManager,(function(t,e){if(e){for(var n in e)i._doesCharSupportLocalGlyph(+n)||(a.glyphs[+n]=e[+n]);a.ranges[l]=!0}var r,o=f(u);try{for(o.s();!(r=o.n()).done;)(0,r.value)(t,e)}catch(c){o.e(c)}finally{o.f()}delete a.requests[l]}))),u.push((function(t,e){t?n(t):e&&n(null,{stack:r,id:o,glyph:e[o]||null})}))}}else n(null,{stack:r,id:o,glyph:s})}),(function(t,e){if(t)r(t);else if(e){var n,i={},o=f(e);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=a.stack,l=a.id,u=a.glyph;(i[s]||(i[s]={}))[l]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}}catch(c){o.e(c)}finally{o.f()}r(null,i)}}))}},{key:"_doesCharSupportLocalGlyph",value:function(e){return!!this.localIdeographFontFamily&&(t.unicodeBlockLookup["CJK Unified Ideographs"](e)||t.unicodeBlockLookup["Hangul Syllables"](e)||t.unicodeBlockLookup.Hiragana(e)||t.unicodeBlockLookup.Katakana(e))}},{key:"_tinySDF",value:function(n,r,i){var o=this.localIdeographFontFamily;if(o&&this._doesCharSupportLocalGlyph(i)){var a=n.tinySDF;if(!a){var s="400";/bold/i.test(r)?s="900":/medium/i.test(r)?s="500":/light/i.test(r)&&(s="200"),a=n.tinySDF=new e.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:o,fontWeight:s})}var l=a.draw(String.fromCharCode(i));return{id:i,bitmap:new t.AlphaImage({width:l.width||30,height:l.height||30},l.data),metrics:{width:l.glyphWidth||24,height:l.glyphHeight||24,left:l.glyphLeft||0,top:l.glyphTop-27||-8,advance:l.glyphAdvance||24}}}}}]),e}();P.loadGlyphRange=function(e,n,r,i,o){var a=256*n,s=a+255,l=i.transformRequest(r.replace("{fontstack}",e).replace("{range}","".concat(a,"-").concat(s)),t.ResourceType.Glyphs);t.getArrayBuffer(l,(function(e,n){if(e)o(e);else if(n){var r,i={},a=f(t.parseGlyphPBF(n));try{for(a.s();!(r=a.n()).done;){var s=r.value;i[s.id]=s}}catch(l){a.e(l)}finally{a.f()}o(null,i)}}))},P.TinySDF=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.fontSize,r=void 0===n?24:n,i=e.buffer,o=void 0===i?3:i,a=e.radius,s=void 0===a?8:a,l=e.cutoff,u=void 0===l?.25:l,c=e.fontFamily,h=void 0===c?"sans-serif":c,f=e.fontWeight,p=void 0===f?"normal":f,m=e.fontStyle,g=void 0===m?"normal":m;d(this,t),this.buffer=o,this.cutoff=u,this.radius=s;var v=this.size=r+4*o,y=this._createCanvas(v),_=this.ctx=y.getContext("2d",{willReadFrequently:!0});_.font="".concat(g," ").concat(p," ").concat(r,"px ").concat(h),_.textBaseline="alphabetic",_.textAlign="left",_.fillStyle="black",this.gridOuter=new Float64Array(v*v),this.gridInner=new Float64Array(v*v),this.f=new Float64Array(v),this.z=new Float64Array(v+1),this.v=new Uint16Array(v)}return p(t,[{key:"_createCanvas",value:function(t){var e=document.createElement("canvas");return e.width=e.height=t,e}},{key:"draw",value:function(t){var e=this.ctx.measureText(t),n=e.width,r=e.actualBoundingBoxAscent,i=e.actualBoundingBoxDescent,o=e.actualBoundingBoxLeft,a=e.actualBoundingBoxRight,s=Math.ceil(r),l=Math.min(this.size-this.buffer,Math.ceil(a-o)),u=Math.min(this.size-this.buffer,s+Math.ceil(i)),c=l+2*this.buffer,h=u+2*this.buffer,f=Math.max(c*h,0),p=new Uint8ClampedArray(f),d={data:p,width:c,height:h,glyphWidth:l,glyphHeight:u,glyphTop:s,glyphLeft:0,glyphAdvance:n};if(0===l||0===u)return d;var m=this.ctx,g=this.buffer,v=this.gridInner,y=this.gridOuter;m.clearRect(g,g,l,u),m.fillText(t,g,g+s);var _=m.getImageData(g,g,l,u);y.fill(I,0,f),v.fill(0,0,f);for(var x=0;x<u;x++)for(var b=0;b<l;b++){var w=_.data[4*(x*l+b)+3]/255;if(0!==w){var k=(x+g)*c+b+g;if(1===w)y[k]=0,v[k]=I;else{var S=.5-w;y[k]=S>0?S*S:0,v[k]=S<0?S*S:0}}}C(y,0,0,c,h,c,this.f,this.v,this.z),C(v,g,g,l,u,c,this.f,this.v,this.z);for(var E=0;E<f;E++){var A=Math.sqrt(y[E])-Math.sqrt(v[E]);p[E]=Math.round(255-255*(A/this.radius+this.cutoff))}return d}}]),t}();var T=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new(function(){function e(){d(this,e),this.specification=t.spec.light.position}return p(e,[{key:"possiblyEvaluate",value:function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))}},{key:"interpolate",value:function(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r)}}}]),e}()),color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)}),M="-transition",L=function(e){m(r,e);var n=g(r);function r(e){var i;return d(this,r),(i=n.call(this))._transitionable=new t.Transitionable(T),i.setLight(e),i._transitioning=i._transitionable.untransitioned(),i}return p(r,[{key:"getLight",value:function(){return this._transitionable.serialize()}},{key:"setLight",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.validateLight,e,n))for(var r in e){var i=e[r];r.endsWith(M)?this._transitionable.setTransition(r.slice(0,-M.length),i):this._transitionable.setValue(r,i)}}},{key:"updateTransitions",value:function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(t){this.properties=this._transitioning.possiblyEvaluate(t)}},{key:"_validate",value:function(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}]),r}(t.Evented),R=function(){function e(t,n){d(this,e),this.width=t,this.height=n,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}return p(e,[{key:"getDash",value:function(t,e){var n=t.join(",")+String(e);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(t,e)),this.dashEntry[n]}},{key:"getDashRanges",value:function(t,e,n){var r=[],i=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===t[0]});for(var s=t[0],l=1;l<t.length;l++){a=!a;var u=t[l];i=s*n,o=(s+=u)*n,r.push({left:i,right:o,isDash:a,zeroLength:0===u})}return r}},{key:"addRoundDash",value:function(t,e,n){for(var r=e/2,i=-n;i<=n;i++)for(var o=this.width*(this.nextRow+n+i),a=0,s=t[a],l=0;l<this.width;l++){l/s.right>1&&(s=t[++a]);var u=Math.abs(l-s.left),c=Math.abs(l-s.right),h=Math.min(u,c),f=void 0,p=i/n*(r+1);if(s.isDash){var d=r-Math.abs(p);f=Math.sqrt(h*h+d*d)}else f=r-Math.sqrt(h*h+p*p);this.data[o+l]=Math.max(0,Math.min(255,f+128))}}},{key:"addRegularDash",value:function(t){for(var e=t.length-1;e>=0;--e){var n=t[e],r=t[e+1];n.zeroLength?t.splice(e,1):r&&r.isDash===n.isDash&&(r.left=n.left,t.splice(e,1))}var i=t[0],o=t[t.length-1];i.isDash===o.isDash&&(i.left=o.left-this.width,o.right=i.right+this.width);for(var a=this.width*this.nextRow,s=0,l=t[s],u=0;u<this.width;u++){u/l.right>1&&(l=t[++s]);var c=Math.abs(u-l.left),h=Math.abs(u-l.right),f=Math.min(c,h);this.data[a+u]=Math.max(0,Math.min(255,(l.isDash?f:-f)+128))}}},{key:"addDash",value:function(e,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];if(0!==o){var s=this.width/o,l=this.getDashRanges(e,this.width,s);n?this.addRoundDash(l,s,r):this.addRegularDash(l)}var u={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,u}},{key:"bind",value:function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))}}]),e}(),N=function(){function e(n,r){d(this,e),this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var i=this.workerPool.acquire(this.id),o=0;o<i.length;o++){var a=new e.Actor(i[o],r,this.id);a.name="Worker ".concat(o),this.actors.push(a)}}return p(e,[{key:"broadcast",value:function(e,n,r){t.asyncAll(this.actors,(function(t,r){t.send(e,n,r)}),r=r||function(){})}},{key:"getActor",value:function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}},{key:"remove",value:function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)}}]),e}();function O(e,n,r){var i=function(n,i){if(n)return r(n);if(i){var o=t.pick(t.extend(i,e),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(o.vectorLayers=i.vector_layers,o.vectorLayerIds=o.vectorLayers.map((function(t){return t.id}))),r(null,o)}};return e.url?t.getJSON(n.transformRequest(e.url,t.ResourceType.Source),i):t.exported.frame((function(){return i(null,e)}))}N.Actor=t.Actor;var z,D=function(){function e(n,r,i){d(this,e),this.bounds=t.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=r||0,this.maxzoom=i||24}return p(e,[{key:"validateBounds",value:function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}},{key:"contains",value:function(e){var n=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=r&&e.x<o&&e.y>=i&&e.y<a}}]),e}(),F=function(e){m(r,e);var n=g(r);function r(e,o,a,s){var u;if(d(this,r),(u=n.call(this)).id=e,u.dispatcher=a,u.type="vector",u.minzoom=0,u.maxzoom=22,u.scheme="xyz",u.tileSize=512,u.reparseOverscaled=!0,u.isTileClipped=!0,u._loaded=!1,t.extend(i(u),t.pick(o,["url","scheme","tileSize","promoteId"])),u._options=t.extend({type:"vector"},o),u._collectResourceTiming=o.collectResourceTiming,512!==u.tileSize)throw new Error("vector tile sources must have a tileSize of 512");return u.setEventedParent(s),l(u)}return p(r,[{key:"load",value:function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,(function(n,r){e._tileJSONRequest=null,e._loaded=!0,e.map.style.sourceCaches[e.id].clearTiles(),n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new D(r.bounds,e.minzoom,e.maxzoom)),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}},{key:"loaded",value:function(){return this._loaded}},{key:"hasTile",value:function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}},{key:"onAdd",value:function(t){this.map=t,this.load()}},{key:"setSourceProperty",value:function(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.load()}},{key:"setTiles",value:function(t){var e=this;return this.setSourceProperty((function(){e._options.tiles=t})),this}},{key:"setUrl",value:function(t){var e=this;return this.setSourceProperty((function(){e.url=t,e._options.url=t})),this}},{key:"onRemove",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},{key:"serialize",value:function(){return t.extend({},this._options)}},{key:"loadTile",value:function(e,n){var r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),i={request:this.map._requestManager.transformRequest(r,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function o(r,i){return delete e.request,e.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}i.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",i,o.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",i,o.bind(this)))}},{key:"abortTile",value:function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)}},{key:"unloadTile",value:function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)}},{key:"hasTransition",value:function(){return!1}}]),r}(t.Evented),B=function(e){m(r,e);var n=g(r);function r(e,o,a,s){var l;return d(this,r),(l=n.call(this)).id=e,l.dispatcher=a,l.setEventedParent(s),l.type="raster",l.minzoom=0,l.maxzoom=22,l.roundZoom=!0,l.scheme="xyz",l.tileSize=512,l._loaded=!1,l._options=t.extend({type:"raster"},o),t.extend(i(l),t.pick(o,["url","scheme","tileSize"])),l}return p(r,[{key:"load",value:function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,(function(n,r){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new D(r.bounds,e.minzoom,e.maxzoom)),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(t){this.map=t,this.load()}},{key:"onRemove",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},{key:"serialize",value:function(){return t.extend({},this._options)}},{key:"hasTile",value:function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}},{key:"loadTile",value:function(e,n){var r=this,i=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),(function(i,o,a){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){r.map._refreshExpiredTiles&&e.setExpiryData(a);var s=r.map.painter.context,l=s.gl;e.texture=r.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new k(s,o,l.RGBA,{useMipmap:!0}),e.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),s.extTextureFilterAnisotropic&&l.texParameterf(l.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(r.dispatcher),n(null)}}))}},{key:"abortTile",value:function(t,e){t.request&&(t.request.cancel(),delete t.request),e()}},{key:"unloadTile",value:function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}},{key:"hasTransition",value:function(){return!1}}]),r}(t.Evented),j=function(e){m(r,e);var n=g(r);function r(e,i,o,a){var s;return d(this,r),(s=n.call(this,e,i,o,a)).type="raster-dem",s.maxzoom=22,s._options=t.extend({type:"raster-dem"},i),s.encoding=i.encoding||"mapbox",s}return p(r,[{key:"serialize",value:function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}},{key:"loadTile",value:function(e,n){var r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function i(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),function(r,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=t.isImageBitmap(o)&&(null==z&&(z="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),z)?o:t.exported.getImageData(o,1),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:a,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",s,i.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)}},{key:"_getNeighboringTiles",value:function(e){var n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l}},{key:"unloadTile",value:function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})}}]),r}(B),Z=function(e){m(r,e);var n=g(r);function r(e,i,o,a){var s;d(this,r),(s=n.call(this)).id=e,s.type="geojson",s.minzoom=0,s.maxzoom=18,s.tileSize=512,s.isTileClipped=!0,s.reparseOverscaled=!0,s._removed=!1,s._pendingLoads=0,s.actor=o.getActor(),s.setEventedParent(a),s._data=i.data,s._options=t.extend({},i),s._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(s.maxzoom=i.maxzoom),i.type&&(s.type=i.type),i.attribution&&(s.attribution=i.attribution),s.promoteId=i.promoteId;var l=t.EXTENT/s.tileSize;return s.workerOptions=t.extend({source:s.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*l,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*l,extent:t.EXTENT,maxZoom:s.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:s.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:t.EXTENT,radius:(i.clusterRadius||50)*l,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions),s}return p(r,[{key:"load",value:function(){this._updateWorkerData("metadata")}},{key:"onAdd",value:function(t){this.map=t,this.load()}},{key:"setData",value:function(t){return this._data=t,this._updateWorkerData("content"),this}},{key:"getClusterExpansionZoom",value:function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}},{key:"getClusterChildren",value:function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}},{key:"getClusterLeaves",value:function(t,e,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r),this}},{key:"_updateWorkerData",value:function(e){var n=this,r=t.extend({},this.workerOptions),i=this._data;"string"==typeof i?(r.request=this.map._requestManager.transformRequest(t.exported.resolveURL(i),t.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(i),this._pendingLoads++,this.fire(new t.Event("dataloading",{dataType:"source"})),this.actor.send("".concat(this.type,".loadData"),r,(function(i,o){if(n._pendingLoads--,!(n._removed||o&&o.abandoned)){var a=null;if(o&&o.resourceTiming&&o.resourceTiming[n.id]&&(a=o.resourceTiming[n.id].slice(0)),n.actor.send("".concat(n.type,".coalesce"),{source:r.source},null),i)n.fire(new t.ErrorEvent(i));else{var s={dataType:"source",sourceDataType:e};n._collectResourceTiming&&a&&a.length>0&&t.extend(s,{resourceTiming:a}),n.fire(new t.Event("data",s))}}}))}},{key:"loaded",value:function(){return 0===this._pendingLoads}},{key:"loadTile",value:function(t,e){var n=this,r=t.actor?"reloadTile":"loadTile";t.actor=this.actor;var i={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.request=this.actor.send(r,i,(function(i,o){return delete t.request,t.unloadVectorData(),t.aborted?e(null):i?e(i):(t.loadVectorData(o,n.map.painter,"reloadTile"===r),e(null))}))}},{key:"abortTile",value:function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}},{key:"unloadTile",value:function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}},{key:"onRemove",value:function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}},{key:"serialize",value:function(){return t.extend({},this._options,{type:this.type,data:this._data})}},{key:"hasTransition",value:function(){return!1}}]),r}(t.Evented),U=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),V=function(e){m(r,e);var n=g(r);function r(t,e,i,o){var a;return d(this,r),(a=n.call(this)).id=t,a.dispatcher=i,a.coordinates=e.coordinates,a.type="image",a.minzoom=0,a.maxzoom=22,a.tileSize=512,a.tiles={},a._loaded=!1,a.setEventedParent(o),a.options=e,a}return p(r,[{key:"load",value:function(e,n){var r=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(function(i,o){r._loaded=!0,i?r.fire(new t.ErrorEvent(i)):o&&(r.image=o,e&&(r.coordinates=e),n&&n(),r._finishLoading())}))}},{key:"loaded",value:function(){return this._loaded}},{key:"updateImage",value:function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(function(){e.texture=null})),this):this}},{key:"_finishLoading",value:function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}},{key:"onAdd",value:function(t){this.map=t,this.load()}},{key:"setCoordinates",value:function(e){var n=this;this.coordinates=e;var r=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){var n,r=1/0,i=1/0,o=-1/0,a=-1/0,s=f(e);try{for(s.s();!(n=s.n()).done;){var l=n.value;r=Math.min(r,l.x),i=Math.min(i,l.y),o=Math.max(o,l.x),a=Math.max(a,l.y)}}catch(p){s.e(p)}finally{s.f()}var u=Math.max(o-r,a-i),c=Math.max(0,Math.floor(-Math.log(u)/Math.LN2)),h=Math.pow(2,c);return new t.CanonicalTileID(c,Math.floor((r+o)/2*h),Math.floor((i+a)/2*h))}(r),this.minzoom=this.maxzoom=this.tileID.z;var i=r.map((function(t){return n.tileID.getTilePoint(t)._round()}));return this._boundsArray=new t.RasterBoundsArray,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}},{key:"prepare",value:function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,U.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new k(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}}},{key:"loadTile",value:function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}},{key:"serialize",value:function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return!1}}]),r}(t.Evented),q=function(e){m(r,e);var n=g(r);function r(t,e,i,o){var a;return d(this,r),(a=n.call(this,t,e,i,o)).roundZoom=!0,a.type="video",a.options=e,a}return p(r,[{key:"load",value:function(){var e=this;this._loaded=!1;var n=this.options;this.urls=[];var r,i=f(n.urls);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.urls.push(this.map._requestManager.transformRequest(o,t.ResourceType.Source).url)}}catch(a){i.e(a)}finally{i.f()}t.getVideo(this.urls,(function(n,r){e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(e.video=r,e.video.loop=!0,e.video.addEventListener("playing",(function(){e.map.triggerRepaint()})),e.map&&e.video.play(),e._finishLoading())}))}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"play",value:function(){this.video&&this.video.play()}},{key:"seek",value:function(e){if(this.video){var n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(n.start(0)," and ").concat(n.end(0),"-second mark.")))):this.video.currentTime=e}}},{key:"getVideo",value:function(){return this.video}},{key:"onAdd",value:function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}},{key:"prepare",value:function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,U.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new k(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}}},{key:"serialize",value:function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this.video&&!this.video.paused}}]),r}(V),G=function(e){m(r,e);var n=g(r);function r(e,i,o,a){var s;return d(this,r),s=n.call(this,e,i,o,a),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||s.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):s.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&s.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof HTMLCanvasElement||s.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):s.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'missing required property "canvas"'))),s.options=i,s.animate=void 0===i.animate||i.animate,s}return p(r,[{key:"load",value:function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}},{key:"getCanvas",value:function(){return this.canvas}},{key:"onAdd",value:function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}},{key:"onRemove",value:function(){this.pause()}},{key:"prepare",value:function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,U.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new k(n,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}}},{key:"serialize",value:function(){return{type:"canvas",coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this._playing}},{key:"_hasInvalidDimensions",value:function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t++){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1}}]),r}(V),W={vector:F,raster:B,"raster-dem":j,geojson:Z,video:q,image:V,canvas:G};function H(e,n){var r=t.create();return t.translate(r,r,[1,1,0]),t.scale(r,r,[.5*e.width,.5*e.height,1]),t.multiply(r,r,e.calculatePosMatrix(n.toUnwrapped()))}function X(t,e,n,r,i,o){var a=function(t,e,n){if(t){var r,i=f(t);try{for(i.s();!(r=i.n()).done;){var o=e[r.value];if(o&&o.source===n&&"fill-extrusion"===o.type)return!0}}catch(l){i.e(l)}finally{i.f()}}else for(var a in e){var s=e[a];if(s.source===n&&"fill-extrusion"===s.type)return!0}return!1}(i&&i.layers,e,t.id),s=o.maxPitchScaleFactor(),l=t.tilesIn(r,s,a);l.sort(Y);var u,c=[],h=f(l);try{for(h.s();!(u=h.n()).done;){var p=u.value;c.push({wrappedTileID:p.tileID.wrapped().key,queryResults:p.tile.queryRenderedFeatures(e,n,t._state,p.queryGeometry,p.cameraQueryGeometry,p.scale,i,o,s,H(t.transform,p.tileID))})}}catch(g){h.e(g)}finally{h.f()}var d=function(t){var e,n={},r={},i=f(t);try{for(i.s();!(e=i.n()).done;){var o=e.value,a=o.queryResults,s=o.wrappedTileID,l=r[s]=r[s]||{};for(var u in a){var c,h=a[u],p=l[u]=l[u]||{},d=n[u]=n[u]||[],m=f(h);try{for(m.s();!(c=m.n()).done;){var v=c.value;p[v.featureIndex]||(p[v.featureIndex]=!0,d.push(v))}}catch(g){m.e(g)}finally{m.f()}}}}catch(g){i.e(g)}finally{i.f()}return n}(c);for(var m in d)d[m].forEach((function(e){var n=e.feature,r=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r}));return d}function Y(t,e){var n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}var $=function(){function e(n,r){d(this,e),this.tileID=n,this.uid=t.uniqueId(),this.uses=0,this.tileSize=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}return p(e,[{key:"registerFadeDuration",value:function(e){var n=e+this.timeAdded;n<t.exported.now()||this.fadeEndTime&&n<this.fadeEndTime||(this.fadeEndTime=n)}},{key:"wasRequested",value:function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}},{key:"loadVectorData",value:function(e,n,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var i in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;var r,i=f(t);try{var o=function(){var t=r.value,i=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==i.length){t.layers=i,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return i.filter((function(e){return e.id===t}))[0]})));var o,a=f(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;n[s.id]=t}}catch(l){a.e(l)}finally{a.f()}}};for(i.s();!(r=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return n}(e.buckets,n.style),this.hasSymbolBuckets=!1,this.buckets){var o=this.buckets[i];if(o instanceof t.SymbolBucket){if(this.hasSymbolBuckets=!0,!r)break;o.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var a in this.buckets){var s=this.buckets[a];if(s instanceof t.SymbolBucket&&s.hasRTLText){this.hasRTLText=!0,t.lazyLoadRTLTextPlugin();break}}for(var l in this.queryPadding=0,this.buckets){var u=this.buckets[l];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(l).queryRadius(u))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new t.CollisionBoxArray}},{key:"unloadVectorData",value:function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}},{key:"getBucket",value:function(t){return this.buckets[t.id]}},{key:"upload",value:function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var r=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new k(t,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new k(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)}},{key:"prepare",value:function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}},{key:"queryRenderedFeatures",value:function(t,e,n,r,i,o,a,s,l,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:i,scale:o,tileSize:this.tileSize,pixelPosMatrix:u,transform:s,params:a,queryPadding:this.queryPadding*l},t,e,n):{}}},{key:"querySourceFeatures",value:function(e,n){var r=this.latestFeatureIndex;if(r&&r.rawTileData){var i=r.loadVTLayers(),o=n?n.sourceLayer:"",a=i._geojsonTileLayer||i[o];if(a)for(var s=t.createFilter(n&&n.filter),l=this.tileID.canonical,u=l.z,c=l.x,h=l.y,f={z:u,x:c,y:h},p=0;p<a.length;p++){var d=a.feature(p);if(s.needGeometry){var m=t.toEvaluationFeature(d,!0);if(!s.filter(new t.EvaluationParameters(this.tileID.overscaledZ),m,this.tileID.canonical))continue}else if(!s.filter(new t.EvaluationParameters(this.tileID.overscaledZ),d))continue;var g=r.getId(d,o),v=new t.GeoJSONFeature(d,u,c,h,g);v.tile=f,e.push(v)}}}},{key:"hasData",value:function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}},{key:"patternsLoaded",value:function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}},{key:"setExpiryData",value:function(e){var n=this.expirationTime;if(e.cacheControl){var r=t.parseCacheControl(e.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var i=Date.now(),o=!1;if(this.expirationTime>i)o=!1;else if(n)if(this.expirationTime<n)o=!0;else{var a=this.expirationTime-n;a?this.expirationTime=i+Math.max(a,3e4):o=!0}else o=!0;o?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}},{key:"getExpiryTimeout",value:function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}},{key:"setFeatureState",value:function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets)if(e.style.hasLayer(r)){var i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=t[o];if(a&&s&&0!==Object.keys(s).length){i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});var l=e&&e.style&&e.style.getLayer(r);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(i)))}}}}},{key:"holdingForFade",value:function(){return void 0!==this.symbolFadeHoldUntil}},{key:"symbolFadeFinished",value:function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<t.exported.now()}},{key:"clearFadeHold",value:function(){this.symbolFadeHoldUntil=void 0}},{key:"setHoldDuration",value:function(e){this.symbolFadeHoldUntil=t.exported.now()+e}},{key:"setDependencies",value:function(t,e){var n,r={},i=f(e);try{for(i.s();!(n=i.n()).done;)r[n.value]=!0}catch(o){i.e(o)}finally{i.f()}this.dependencies[t]=r}},{key:"hasDependency",value:function(t,e){var n,r=f(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=this.dependencies[i];if(o){var a,s=f(e);try{for(s.s();!(a=s.n()).done;)if(o[a.value])return!0}catch(l){s.e(l)}finally{s.f()}}}}catch(l){r.e(l)}finally{r.f()}return!1}}]),e}(),K=function(){function t(e,n){d(this,t),this.max=e,this.onRemove=n,this.reset()}return p(t,[{key:"reset",value:function(){for(var t in this.data){var e,n=f(this.data[t]);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}}catch(i){n.e(i)}finally{n.f()}}return this.data={},this.order=[],this}},{key:"add",value:function(t,e,n){var r=this,i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:e,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout((function(){r.remove(t,o)}),n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}},{key:"has",value:function(t){return t.wrapped().key in this.data}},{key:"getAndRemove",value:function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}},{key:"_getAndRemoveByKey",value:function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}},{key:"getByKey",value:function(t){var e=this.data[t];return e?e[0].value:null}},{key:"get",value:function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}},{key:"remove",value:function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}},{key:"setMaxSize",value:function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}},{key:"filter",value:function(t){var e=[];for(var n in this.data){var r,i=f(this.data[n]);try{for(i.s();!(r=i.n()).done;){var o=r.value;t(o.value)||e.push(o)}}catch(u){i.e(u)}finally{i.f()}}for(var a=0,s=e;a<s.length;a++){var l=s[a];this.remove(l.value.tileID,l)}}}]),t}(),J=function(){function e(){d(this,e),this.state={},this.stateChanges={},this.deletedStates={}}return p(e,[{key:"updateState",value:function(e,n,r){var i=String(n);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][i]=this.stateChanges[e][i]||{},t.extend(this.stateChanges[e][i],r),null===this.deletedStates[e])for(var o in this.deletedStates[e]={},this.state[e])o!==i&&(this.deletedStates[e][o]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][i])for(var a in this.deletedStates[e][i]={},this.state[e][i])r[a]||(this.deletedStates[e][i][a]=null);else for(var s in r)this.deletedStates[e]&&this.deletedStates[e][i]&&null===this.deletedStates[e][i][s]&&delete this.deletedStates[e][i][s]}},{key:"removeFeatureState",value:function(t,e,n){if(null!==this.deletedStates[t]){var r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(n in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][n]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}}},{key:"getState",value:function(e,n){var r=String(n),i=t.extend({},(this.state[e]||{})[r],(this.stateChanges[e]||{})[r]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var o=this.deletedStates[e][n];if(null===o)return{};for(var a in o)delete i[a]}return i}},{key:"initializeTileState",value:function(t,e){t.setFeatureState(this.state,e)}},{key:"coalesceChanges",value:function(e,n){var r={};for(var i in this.stateChanges){this.state[i]=this.state[i]||{};var o={};for(var a in this.stateChanges[i])this.state[i][a]||(this.state[i][a]={}),t.extend(this.state[i][a],this.stateChanges[i][a]),o[a]=this.state[i][a];r[i]=o}for(var s in this.deletedStates){this.state[s]=this.state[s]||{};var l={};if(null===this.deletedStates[s])for(var u in this.state[s])l[u]={},this.state[s][u]={};else for(var c in this.deletedStates[s]){if(null===this.deletedStates[s][c])this.state[s][c]={};else for(var h=0,f=Object.keys(this.deletedStates[s][c]);h<f.length;h++){var p=f[h];delete this.state[s][c][p]}l[c]=this.state[s][c]}r[s]=r[s]||{},t.extend(r[s],l)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(var d in e)e[d].setFeatureState(r,n)}}]),e}(),Q=function(e){m(r,e);var n=g(r);function r(e,o,a){var s;return d(this,r),(s=n.call(this)).id=e,s.dispatcher=a,s.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(s._sourceLoaded=!0),s._sourceLoaded&&!s._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(s.reload(),s.transform&&s.update(s.transform))})),s.on("dataloading",(function(){s._sourceErrored=!1})),s.on("error",(function(){s._sourceErrored=s._source.loaded()})),s._source=function(e,n,r,i){var o=new W[n.type](e,n,r,i);if(o.id!==e)throw new Error("Expected Source id to be ".concat(e," instead of ").concat(o.id));return t.bindAll(["load","abort","unload","serialize","prepare"],o),o}(e,o,a,i(s)),s._tiles={},s._cache=new K(0,s._unloadTile.bind(i(s))),s._timers={},s._cacheTimers={},s._maxTileCacheSize=null,s._loadedParentTiles={},s._coveredTiles={},s._state=new J,s}return p(r,[{key:"onAdd",value:function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}},{key:"onRemove",value:function(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}},{key:"loaded",value:function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}},{key:"getSource",value:function(){return this._source}},{key:"pause",value:function(){this._paused=!0}},{key:"resume",value:function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}}},{key:"_loadTile",value:function(t,e){return this._source.loadTile(t,e)}},{key:"_unloadTile",value:function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))}},{key:"_abortTile",value:function(e){this._source.abortTile&&this._source.abortTile(e,(function(){})),this._source.fire(new t.Event("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}},{key:"serialize",value:function(){return this._source.serialize()}},{key:"prepare",value:function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}}},{key:"getIds",value:function(){return Object.values(this._tiles).map((function(t){return t.tileID})).sort(tt).map((function(t){return t.key}))}},{key:"getRenderableIds",value:function(e){var n=this,r=[];for(var i in this._tiles)this._isIdRenderable(i,e)&&r.push(this._tiles[i]);return e?r.sort((function(e,r){var i=e.tileID,o=r.tileID,a=new t.pointGeometry(i.canonical.x,i.canonical.y)._rotate(n.transform.angle),s=new t.pointGeometry(o.canonical.x,o.canonical.y)._rotate(n.transform.angle);return i.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x})).map((function(t){return t.tileID.key})):r.map((function(t){return t.tileID})).sort(tt).map((function(t){return t.key}))}},{key:"hasRenderableParent",value:function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}},{key:"_isIdRenderable",value:function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}},{key:"reload",value:function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")}},{key:"_reloadTile",value:function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))}},{key:"_tileLoaded",value:function(e,n,r,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.ErrorEvent(i,{tile:e})):this.update(this.transform));e.timeAdded=t.exported.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))}},{key:"_backfillDEM",value:function(t){for(var e=this.getRenderableIds(),n=0;n<e.length;n++){var r=e[n];if(t.neighboringTiles&&t.neighboringTiles[r]){var i=this.getTileByID(r);o(t,i),o(i,t)}}function o(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}}},{key:"getTile",value:function(t){return this.getTileByID(t.key)}},{key:"getTileByID",value:function(t){return this._tiles[t]}},{key:"_retainLoadedChildren",value:function(t,e,n,r){for(var i in this._tiles){var o=this._tiles[i];if(!(r[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var l=a;l.overscaledZ>e;)if(t[(l=l.scaledTo(l.overscaledZ-1)).key]){r[a.key]=a;break}}}}},{key:"findLoadedParent",value:function(t,e){if(t.key in this._loadedParentTiles){var n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(var r=t.overscaledZ-1;r>=e;r--){var i=t.scaledTo(r),o=this._getLoadedTile(i);if(o)return o}}},{key:"_getLoadedTile",value:function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)}},{key:"updateCacheSize",value:function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,n=Math.ceil(t.height/this._source.tileSize)+1,r=Math.floor(e*n*5),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(i)}},{key:"handleWrapJump",value:function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var n={};for(var r in this._tiles){var i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),n[i.tileID.key]=i}for(var o in this._tiles=n,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}}},{key:"update",value:function(e){var n=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter((function(t){return n._source.hasTile(t)})))):i=[];var o=e.coveringZoomLevel(this._source),a=Math.max(o-r.maxOverzooming,this._source.minzoom),s=Math.max(o+r.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(i,o);if(et(this._source.type)){for(var u={},c={},h=0,p=Object.keys(l);h<p.length;h++){var d=p[h],m=l[d],g=this._tiles[d];if(g&&!(g.fadeEndTime&&g.fadeEndTime<=t.exported.now())){var v=this.findLoadedParent(m,a);v&&(this._addTile(v.tileID),u[v.tileID.key]=v.tileID),c[d]=m}}for(var y in this._retainLoadedChildren(c,o,s,l),u)l[y]||(this._coveredTiles[y]=!0,l[y]=u[y])}for(var _ in l)this._tiles[_].clearFadeHold();var x,b=t.keysDifference(this._tiles,l),w=f(b);try{for(w.s();!(x=w.n()).done;){var k=x.value,S=this._tiles[k];S.hasSymbolBuckets&&!S.holdingForFade()?S.setHoldDuration(this.map._fadeDuration):S.hasSymbolBuckets&&!S.symbolFadeFinished()||this._removeTile(k)}}catch(E){w.e(E)}finally{w.f()}this._updateLoadedParentTileCache()}}},{key:"releaseSymbolFadeTiles",value:function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}},{key:"_updateRetainedTiles",value:function(t,e){var n,i={},o={},a=Math.max(e-r.maxOverzooming,this._source.minzoom),s=Math.max(e+r.maxUnderzooming,this._source.minzoom),l={},u=f(t);try{for(u.s();!(n=u.n()).done;){var c=n.value,h=this._addTile(c);i[c.key]=c,h.hasData()||e<this._source.maxzoom&&(l[c.key]=c)}}catch(k){u.e(k)}finally{u.f()}this._retainLoadedChildren(l,e,s,i);var p,d=f(t);try{for(d.s();!(p=d.n()).done;){var m=p.value,g=this._tiles[m.key];if(!g.hasData()){if(e+1>this._source.maxzoom){var v=m.children(this._source.maxzoom)[0],y=this.getTile(v);if(y&&y.hasData()){i[v.key]=v;continue}}else{var _=m.children(this._source.maxzoom);if(i[_[0].key]&&i[_[1].key]&&i[_[2].key]&&i[_[3].key])continue}for(var x=g.wasRequested(),b=m.overscaledZ-1;b>=a;--b){var w=m.scaledTo(b);if(o[w.key])break;if(o[w.key]=!0,!(g=this.getTile(w))&&x&&(g=this._addTile(w)),g&&(i[w.key]=w,x=g.wasRequested(),g.hasData()))break}}}}catch(k){d.e(k)}finally{d.f()}return i}},{key:"_updateLoadedParentTileCache",value:function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],n=void 0,r=this._tiles[t].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}e.push(r.key);var i=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(i))break;r=i}for(var o=0,a=e;o<a.length;o++){var s=a[o];this._loadedParentTiles[s]=n}}}},{key:"_addTile",value:function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var r=n;return n||(n=new $(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n}},{key:"_setTileReloadTimer",value:function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout((function(){n._reloadTile(t,"expired"),delete n._timers[t]}),r))}},{key:"_removeTile",value:function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}},{key:"clearTiles",value:function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()}},{key:"tilesIn",value:function(e,n,r){var i=this,o=[],a=this.transform;if(!a)return o;var s,l=r?a.getCameraQueryGeometry(e):e,u=e.map((function(t){return a.pointCoordinate(t)})),c=l.map((function(t){return a.pointCoordinate(t)})),h=this.getIds(),p=1/0,d=1/0,m=-1/0,g=-1/0,v=f(c);try{for(v.s();!(s=v.n()).done;){var y=s.value;p=Math.min(p,y.x),d=Math.min(d,y.y),m=Math.max(m,y.x),g=Math.max(g,y.y)}}catch(b){v.e(b)}finally{v.f()}for(var _=function(e){var r=i._tiles[h[e]];if(r.holdingForFade())return"continue";var s=r.tileID,l=Math.pow(2,a.zoom-r.tileID.overscaledZ),f=n*r.queryPadding*t.EXTENT/r.tileSize/l,v=[s.getTilePoint(new t.MercatorCoordinate(p,d)),s.getTilePoint(new t.MercatorCoordinate(m,g))];if(v[0].x-f<t.EXTENT&&v[0].y-f<t.EXTENT&&v[1].x+f>=0&&v[1].y+f>=0){var y=u.map((function(t){return s.getTilePoint(t)})),_=c.map((function(t){return s.getTilePoint(t)}));o.push({tile:r,tileID:s,queryGeometry:y,cameraQueryGeometry:_,scale:l})}},x=0;x<h.length;x++)_(x);return o}},{key:"getVisibleCoordinates",value:function(t){var e,n=this,r=this.getRenderableIds(t).map((function(t){return n._tiles[t].tileID})),i=f(r);try{for(i.s();!(e=i.n()).done;){var o=e.value;o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"hasTransition",value:function(){if(this._source.hasTransition())return!0;if(et(this._source.type))for(var e in this._tiles){var n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.exported.now())return!0}return!1}},{key:"setFeatureState",value:function(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)}},{key:"removeFeatureState",value:function(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)}},{key:"getFeatureState",value:function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}},{key:"setDependencies",value:function(t,e,n){var r=this._tiles[t];r&&r.setDependencies(e,n)}},{key:"reloadTilesForDependencies",value:function(t,e){for(var n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(n,"reloading");this._cache.filter((function(n){return!n.hasDependency(t,e)}))}}]),r}(t.Evented);function tt(t,e){var n=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function et(t){return"raster"===t||"image"===t||"video"===t}Q.maxOverzooming=10,Q.maxUnderzooming=3;var nt,rt="mapboxgl_preloaded_worker_pool",it=function(){function t(){d(this,t),this.active={}}return p(t,[{key:"acquire",value:function(e){if(!this.workers)for(this.workers=[];this.workers.length<t.workerCount;)this.workers.push(new Worker(Ti.workerUrl));return this.active[e]=!0,this.workers.slice()}},{key:"release",value:function(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)}},{key:"isPreloaded",value:function(){return!!this.active[rt]}},{key:"numActive",value:function(){return Object.keys(this.active).length}}]),t}(),ot=Math.floor(t.exported.hardwareConcurrency/2);function at(){return nt||(nt=new it),nt}function st(e,n){var r={};for(var i in e)"ref"!==i&&(r[i]=e[i]);return t.refProperties.forEach((function(t){t in n&&(r[t]=n[t])})),r}function lt(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=st(t[r],e[t[r].ref]));return t}it.workerCount=Math.max(Math.min(ot,6),1);var ut={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ct(t,e,n){n.push({command:ut.addSource,args:[t,e[t]]})}function ht(t,e,n){e.push({command:ut.removeSource,args:[t]}),n[t]=!0}function ft(t,e,n,r){ht(t,n,r),ct(t,e,n)}function pt(t,e,n){var r;for(r in t[n])if(Object.prototype.hasOwnProperty.call(t[n],r)&&"data"!==r&&!u(t[n][r],e[n][r]))return!1;for(r in e[n])if(Object.prototype.hasOwnProperty.call(e[n],r)&&"data"!==r&&!u(t[n][r],e[n][r]))return!1;return!0}function dt(t,e,n,r,i,o){var a;for(a in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,a)&&(u(t[a],e[a])||n.push({command:o,args:[r,a,e[a],i]}));for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&!Object.prototype.hasOwnProperty.call(t,a)&&(u(t[a],e[a])||n.push({command:o,args:[r,a,e[a],i]}))}function mt(t){return t.id}function gt(t,e){return t[e.id]=e,t}var vt=function(){function e(t,n){d(this,e),this.reset(t,n)}return p(e,[{key:"reset",value:function(t,e){this.points=t||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}},{key:"lerp",value:function(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);for(var n=1,r=this._distances[n],i=e*this.paddedLength+this.padding;r<i&&n<this._distances.length;)r=this._distances[++n];var o=n-1,a=this._distances[o],s=r-a,l=s>0?(i-a)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}]),e}();function yt(t,e){var n=!0;return"always"===t||"never"!==t&&"never"!==e||(n=!1),n}var _t=function(){function t(e,n,r){d(this,t);var i=this.boxCells=[],o=this.circleCells=[];this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(n/r);for(var a=0;a<this.xCellCount*this.yCellCount;a++)i.push([]),o.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=n,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0}return p(t,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}},{key:"insertCircle",value:function(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)}},{key:"_insertBoxCell",value:function(t,e,n,r,i,o){this.boxCells[i].push(o)}},{key:"_insertCircleCell",value:function(t,e,n,r,i,o){this.circleCells[i].push(o)}},{key:"_query",value:function(t,e,n,r,i,o,a){if(n<0||t>this.width||r<0||e>this.height)return[];var s=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return[{key:null,x1:t,y1:e,x2:n,y2:r}];for(var l=0;l<this.boxKeys.length;l++)s.push({key:this.boxKeys[l],x1:this.bboxes[4*l],y1:this.bboxes[4*l+1],x2:this.bboxes[4*l+2],y2:this.bboxes[4*l+3]});for(var u=0;u<this.circleKeys.length;u++){var c=this.circles[3*u],h=this.circles[3*u+1],f=this.circles[3*u+2];s.push({key:this.circleKeys[u],x1:c-f,y1:h-f,x2:c+f,y2:h+f})}}else this._forEachCell(t,e,n,r,this._queryCell,s,{hitTest:i,overlapMode:o,seenUids:{box:{},circle:{}}},a);return s}},{key:"query",value:function(t,e,n,r){return this._query(t,e,n,r,!1,null)}},{key:"hitTest",value:function(t,e,n,r,i,o){return this._query(t,e,n,r,!0,i,o).length>0}},{key:"hitTestCircle",value:function(t,e,n,r,i){var o=t-n,a=t+n,s=e-n,l=e+n;if(a<0||o>this.width||l<0||s>this.height)return!1;var u=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,u,{hitTest:!0,overlapMode:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},i),u.length>0}},{key:"_queryCell",value:function(t,e,n,r,i,o,a,s){var l=a.seenUids,u=a.hitTest,c=a.overlapMode,h=this.boxCells[i];if(null!==h){var p,d=this.bboxes,m=f(h);try{for(m.s();!(p=m.n()).done;){var g=p.value;if(!l.box[g]){l.box[g]=!0;var v=4*g,y=this.boxKeys[g];if(t<=d[v+2]&&e<=d[v+3]&&n>=d[v+0]&&r>=d[v+1]&&(!s||s(y))&&(!u||!yt(c,y.overlapMode))&&(o.push({key:y,x1:d[v],y1:d[v+1],x2:d[v+2],y2:d[v+3]}),u))return!0}}}catch(P){m.e(P)}finally{m.f()}}var _=this.circleCells[i];if(null!==_){var x,b=this.circles,w=f(_);try{for(w.s();!(x=w.n()).done;){var k=x.value;if(!l.circle[k]){l.circle[k]=!0;var S=3*k,E=this.circleKeys[k];if(this._circleAndRectCollide(b[S],b[S+1],b[S+2],t,e,n,r)&&(!s||s(E))&&(!u||!yt(c,E.overlapMode))){var I=b[S],C=b[S+1],A=b[S+2];if(o.push({key:E,x1:I-A,y1:C-A,x2:I+A,y2:C+A}),u)return!0}}}}catch(P){w.e(P)}finally{w.f()}}return!1}},{key:"_queryCellCircle",value:function(t,e,n,r,i,o,a,s){var l=a.circle,u=a.seenUids,c=a.overlapMode,h=this.boxCells[i];if(null!==h){var p,d=this.bboxes,m=f(h);try{for(m.s();!(p=m.n()).done;){var g=p.value;if(!u.box[g]){u.box[g]=!0;var v=4*g,y=this.boxKeys[g];if(this._circleAndRectCollide(l.x,l.y,l.radius,d[v+0],d[v+1],d[v+2],d[v+3])&&(!s||s(y))&&!yt(c,y.overlapMode))return o.push(!0),!0}}}catch(I){m.e(I)}finally{m.f()}}var _=this.circleCells[i];if(null!==_){var x,b=this.circles,w=f(_);try{for(w.s();!(x=w.n()).done;){var k=x.value;if(!u.circle[k]){u.circle[k]=!0;var S=3*k,E=this.circleKeys[k];if(this._circlesCollide(b[S],b[S+1],b[S+2],l.x,l.y,l.radius)&&(!s||s(E))&&!yt(c,E.overlapMode))return o.push(!0),!0}}}catch(I){w.e(I)}finally{w.f()}}}},{key:"_forEachCell",value:function(t,e,n,r,i,o,a,s){for(var l=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r),f=l;f<=c;f++)for(var p=u;p<=h;p++)if(i.call(this,t,e,n,r,this.xCellCount*p+f,o,a,s))return}},{key:"_convertToXCellCoord",value:function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}},{key:"_convertToYCellCoord",value:function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}},{key:"_circlesCollide",value:function(t,e,n,r,i,o){var a=r-t,s=i-e,l=n+o;return l*l>a*a+s*s}},{key:"_circleAndRectCollide",value:function(t,e,n,r,i,o,a){var s=(o-r)/2,l=Math.abs(t-(r+s));if(l>s+n)return!1;var u=(a-i)/2,c=Math.abs(e-(i+u));if(c>u+n)return!1;if(l<=s||c<=u)return!0;var h=l-s,f=c-u;return h*h+f*f<=n*n}}]),t}();function xt(e,n,r,i,o){var a=t.create();return n?(t.scale(a,a,[1/o,1/o,1]),r||t.rotateZ(a,a,i.angle)):t.multiply(a,i.labelPlaneMatrix,e),a}function bt(e,n,r,i,o){if(n){var a=t.clone(e);return t.scale(a,a,[o,o,1]),r||t.rotateZ(a,a,-i.angle),a}return i.glCoordMatrix}function wt(e,n){var r=[e.x,e.y,0,1];Rt(r,r,n);var i=r[3];return{point:new t.pointGeometry(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function kt(t,e){return.5+t/e*.5}function St(t,e){var n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function Et(e,n,r,i,o,a,s,l,u){var c=i?e.textSizeData:e.iconSizeData,h=t.evaluateSizeForZoom(c,r.transform.zoom),f=[256/r.width*2+1,256/r.height*2+1],p=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();for(var d=e.lineVertexArray,m=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,g=r.transform.width/r.transform.height,v=!1,y=0;y<m.length;y++){var _=m.get(y);if(_.hidden||_.writingMode===t.WritingMode.vertical&&!v)Lt(_.numGlyphs,p);else{v=!1;var x=[_.anchorX,_.anchorY,0,1];if(t.transformMat4(x,x,n),St(x,f)){var b=kt(r.transform.cameraToCenterDistance,x[3]),w=t.evaluateSizeForFeature(c,h,_),k=s?w/b:w*b,S=new t.pointGeometry(_.anchorX,_.anchorY),E=wt(S,o).point,I={},C=At(_,k,!1,l,n,o,a,e.glyphOffsetArray,d,p,E,S,I,g,u);v=C.useVertical,(C.notEnoughRoom||v||C.needsFlipping&&At(_,k,!0,l,n,o,a,e.glyphOffsetArray,d,p,E,S,I,g,u).notEnoughRoom)&&Lt(_.numGlyphs,p)}else Lt(_.numGlyphs,p)}}i?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function It(t,e,n,r,i,o,a,s,l,u,c,h){var f=s.glyphStartIndex+s.numGlyphs,p=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,m=e.getoffsetX(s.glyphStartIndex),g=e.getoffsetX(f-1),v=Tt(t*m,n,r,i,o,a,s.segment,p,d,l,u,c,h);if(!v)return null;var y=Tt(t*g,n,r,i,o,a,s.segment,p,d,l,u,c,h);return y?{first:v,last:y}:null}function Ct(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function At(e,n,r,i,o,a,s,l,u,c,h,p,d,m,g){var v,y=n/24,_=e.lineOffsetX*y,x=e.lineOffsetY*y;if(e.numGlyphs>1){var b=e.glyphStartIndex+e.numGlyphs,w=e.lineStartIndex,k=e.lineStartIndex+e.lineLength,S=It(y,l,_,x,r,h,p,e,u,a,d,g);if(!S)return{notEnoughRoom:!0};var E=wt(S.first.point,s).point,I=wt(S.last.point,s).point;if(i&&!r){var C=Ct(e.writingMode,E,I,m);if(C)return C}v=[S.first];for(var A=e.glyphStartIndex+1;A<b-1;A++)v.push(Tt(y*l.getoffsetX(A),_,x,r,h,p,e.segment,w,k,u,a,d,g));v.push(S.last)}else{if(i&&!r){var P=wt(p,o).point,T=e.lineStartIndex+e.segment+1,M=new t.pointGeometry(u.getx(T),u.gety(T)),L=wt(M,o),R=L.signedDistanceFromCamera>0?L.point:Pt(p,M,P,1,o),N=Ct(e.writingMode,P,R,m);if(N)return N}var O=Tt(y*l.getoffsetX(e.glyphStartIndex),_,x,r,h,p,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,u,a,d,g);if(!O)return{notEnoughRoom:!0};v=[O]}var z,D=f(v);try{for(D.s();!(z=D.n()).done;){var F=z.value;t.addDynamicAttributes(c,F.point,F.angle)}}catch(B){D.e(B)}finally{D.f()}return{}}function Pt(t,e,n,r,i){var o=wt(t.add(t.sub(e)._unit()),i).point,a=n.sub(o);return n.add(a._mult(r/a.mag()))}function Tt(e,n,r,i,o,a,s,l,u,c,h,f,p){var d=i?e-n:e+n,m=d>0?1:-1,g=0;i&&(m*=-1,g=Math.PI),m<0&&(g+=Math.PI);for(var v=m>0?l+s:l+s+1,y=o,_=o,x=0,b=0,w=Math.abs(d),k=[];x+b<=w;){if((v+=m)<l||v>=u)return null;if(_=y,k.push(y),void 0===(y=f[v])){var S=new t.pointGeometry(c.getx(v),c.gety(v)),E=wt(S,h);if(E.signedDistanceFromCamera>0)y=f[v]=E.point;else{var I=v-m;y=Pt(0===x?a:new t.pointGeometry(c.getx(I),c.gety(I)),S,_,w-x+1,h)}}x+=b,b=_.dist(y)}var C=(w-x)/b,A=y.sub(_),P=A.mult(C)._add(_);P._add(A._unit()._perp()._mult(r*m));var T=g+Math.atan2(y.y-_.y,y.x-_.x);return k.push(P),{point:P,angle:p?T:0,path:k}}var Mt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Lt(t,e){for(var n=0;n<t;n++){var r=e.length;e.resize(r+4),e.float32.set(Mt,3*r)}}function Rt(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}var Nt=100,Ot=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _t(t.width+200,t.height+200,25),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new _t(t.width+200,t.height+200,25);d(this,e),this.transform=t,this.grid=n,this.ignoredGrid=r,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+Nt,this.screenBottomBoundary=t.height+Nt,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200}return p(e,[{key:"placeCollisionBox",value:function(t,e,n,r,i){var o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),a=n*o.perspectiveRatio,s=t.x1*a+o.point.x,l=t.y1*a+o.point.y,u=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,l,u,c)||"always"!==e&&this.grid.hitTest(s,l,u,c,e,i)?{box:[],offscreen:!1}:{box:[s,l,u,c],offscreen:this.isOffscreen(s,l,u,c)}}},{key:"placeCollisionCircles",value:function(e,n,r,i,o,a,s,l,u,c,h,p,d){var m=[],g=new t.pointGeometry(n.anchorX,n.anchorY),v=wt(g,a),y=kt(this.transform.cameraToCenterDistance,v.signedDistanceFromCamera),_=(c?o/y:o*y)/t.ONE_EM,x=wt(g,s).point,b=It(_,i,n.lineOffsetX*_,n.lineOffsetY*_,!1,x,g,n,r,s,{},!1),w=!1,k=!1,S=!0;if(b){for(var E=.5*p*y+d,I=new t.pointGeometry(-100,-100),C=new t.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),A=new vt,P=b.first,T=b.last,M=[],L=P.path.length-1;L>=1;L--)M.push(P.path[L]);for(var R=1;R<T.path.length;R++)M.push(T.path[R]);var N=2.5*E;if(l){var O=M.map((function(t){return wt(t,l)}));M=O.some((function(t){return t.signedDistanceFromCamera<=0}))?[]:O.map((function(t){return t.point}))}var z=[];if(M.length>0){for(var D=M[0].clone(),F=M[0].clone(),B=1;B<M.length;B++)D.x=Math.min(D.x,M[B].x),D.y=Math.min(D.y,M[B].y),F.x=Math.max(F.x,M[B].x),F.y=Math.max(F.y,M[B].y);z=D.x>=I.x&&F.x<=C.x&&D.y>=I.y&&F.y<=C.y?[M]:F.x<I.x||D.x>C.x||F.y<I.y||D.y>C.y?[]:t.clipLine([M],I.x,I.y,C.x,C.y)}var j,Z=f(z);try{for(Z.s();!(j=Z.n()).done;){var U=j.value;A.reset(U,.25*E);var V=0;V=A.length<=.5*E?1:Math.ceil(A.paddedLength/N)+1;for(var q=0;q<V;q++){var G=q/Math.max(V-1,1),W=A.lerp(G),H=W.x+Nt,X=W.y+Nt;m.push(H,X,E,0);var Y=H-E,$=X-E,K=H+E,J=X+E;if(S=S&&this.isOffscreen(Y,$,K,J),k=k||this.isInsideGrid(Y,$,K,J),"always"!==e&&this.grid.hitTestCircle(H,X,E,e,h)&&(w=!0,!u))return{circles:[],offscreen:!1,collisionDetected:w}}}}catch(Q){Z.e(Q)}finally{Z.f()}}return{circles:!u&&w||!k?[]:m,offscreen:S,collisionDetected:w}}},{key:"queryRenderedSymbols",value:function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};var n,r=[],i=1/0,o=1/0,a=-1/0,s=-1/0,l=f(e);try{for(l.s();!(n=l.n()).done;){var u=n.value,c=new t.pointGeometry(u.x+Nt,u.y+Nt);i=Math.min(i,c.x),o=Math.min(o,c.y),a=Math.max(a,c.x),s=Math.max(s,c.y),r.push(c)}}catch(x){l.e(x)}finally{l.f()}var h,p=this.grid.query(i,o,a,s).concat(this.ignoredGrid.query(i,o,a,s)),d={},m={},g=f(p);try{for(g.s();!(h=g.n()).done;){var v=h.value,y=v.key;if(void 0===d[y.bucketInstanceId]&&(d[y.bucketInstanceId]={}),!d[y.bucketInstanceId][y.featureIndex]){var _=[new t.pointGeometry(v.x1,v.y1),new t.pointGeometry(v.x2,v.y1),new t.pointGeometry(v.x2,v.y2),new t.pointGeometry(v.x1,v.y2)];t.polygonIntersectsPolygon(r,_)&&(d[y.bucketInstanceId][y.featureIndex]=!0,void 0===m[y.bucketInstanceId]&&(m[y.bucketInstanceId]=[]),m[y.bucketInstanceId].push(y.featureIndex))}}}catch(x){g.e(x)}finally{g.f()}return m}},{key:"insertCollisionBox",value:function(t,e,n,r,i,o){(n?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:i,collisionGroupID:o,overlapMode:e},t[0],t[1],t[2],t[3])}},{key:"insertCollisionCircles",value:function(t,e,n,r,i,o){for(var a=n?this.ignoredGrid:this.grid,s={bucketInstanceId:r,featureIndex:i,collisionGroupID:o,overlapMode:e},l=0;l<t.length;l+=4)a.insertCircle(s,t[l],t[l+1],t[l+2])}},{key:"projectAndGetPerspectiveRatio",value:function(e,n,r){var i=[n,r,0,1];return Rt(i,i,e),{point:new t.pointGeometry((i[0]/i[3]+1)/2*this.transform.width+Nt,(-i[1]/i[3]+1)/2*this.transform.height+Nt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}}},{key:"isOffscreen",value:function(t,e,n,r){return n<Nt||t>=this.screenRightBoundary||r<Nt||e>this.screenBottomBoundary}},{key:"isInsideGrid",value:function(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary}},{key:"getViewportMatrix",value:function(){var e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}]),e}();function zt(e,n,r){return n*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}var Dt=function(){function t(e,n,r,i){d(this,t),this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?n:-n))):i&&r?1:0,this.placed=r}return p(t,[{key:"isHidden",value:function(){return 0===this.opacity&&!this.placed}}]),t}(),Ft=function(){function t(e,n,r,i,o){d(this,t),this.text=new Dt(e?e.text:null,n,r,o),this.icon=new Dt(e?e.icon:null,n,i,o)}return p(t,[{key:"isHidden",value:function(){return this.text.isHidden()&&this.icon.isHidden()}}]),t}(),Bt=p((function t(e,n,r){d(this,t),this.text=e,this.icon=n,this.skipFade=r})),jt=p((function e(){d(this,e),this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]})),Zt=p((function t(e,n,r,i,o){d(this,t),this.bucketInstanceId=e,this.featureIndex=n,this.sourceLayerIndex=r,this.bucketIndex=i,this.tileID=o})),Ut=function(){function t(e){d(this,t),this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}return p(t,[{key:"get",value:function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]}}]),t}();function Vt(e,n,r,i,o){var a=t.getAnchorAlignment(e),s=-(a.horizontalAlign-.5)*n,l=-(a.verticalAlign-.5)*r,u=t.evaluateVariableOffset(e,i);return new t.pointGeometry(s+u[0]*o,l+u[1]*o)}function qt(e,n,r,i,o,a){var s=e.x1,l=e.x2,u=e.y1,c=e.y2,h=e.anchorPointX,f=e.anchorPointY,p=new t.pointGeometry(n,r);return i&&p._rotate(o?a:-a),{x1:s+p.x,y1:u+p.y,x2:l+p.x,y2:c+p.y,anchorPointX:h,anchorPointY:f}}var Gt=function(){function e(t,n,r,i){d(this,e),this.transform=t.clone(),this.collisionIndex=new Ot(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new Ut(r),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}return p(e,[{key:"getBucketParts",value:function(e,n,r,i){var o=r.getBucket(n),a=r.latestFeatureIndex;if(o&&a&&n.id===o.layerIds[0]){var s=r.collisionBoxArray,l=o.layers[0].layout,u=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/t.EXTENT,h=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),p="map"===l.get("text-pitch-alignment"),d="map"===l.get("text-rotation-alignment"),m=zt(r,1,this.transform.zoom),g=xt(h,p,d,this.transform,m),v=null;if(p){var y=bt(h,p,d,this.transform,m);v=t.multiply([],this.transform.labelPlaneMatrix,y)}this.retainedQueryData[o.bucketInstanceId]=new Zt(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);var _={bucket:o,layout:l,posMatrix:h,textLabelPlaneMatrix:g,labelToScreenMatrix:v,scale:u,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i){var x,b=f(o.sortKeyRanges);try{for(b.s();!(x=b.n()).done;){var w=x.value,k=w.sortKey,S=w.symbolInstanceStart,E=w.symbolInstanceEnd;e.push({sortKey:k,symbolInstanceStart:S,symbolInstanceEnd:E,parameters:_})}}catch(I){b.e(I)}finally{b.f()}}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:_})}}},{key:"attemptAnchorPlacement",value:function(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d){var m,g=[h.textOffset0,h.textOffset1],v=Vt(t,n,r,g,i),y=this.collisionIndex.placeCollisionBox(qt(e,v.x,v.y,o,a,this.transform.angle),c,s,l,u.predicate);if((!d||0!==this.collisionIndex.placeCollisionBox(qt(d,v.x,v.y,o,a,this.transform.angle),c,s,l,u.predicate).box.length)&&y.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(m=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:g,width:n,height:r,anchor:t,textBoxScale:i,prevAnchor:m},this.markUsedJustification(f,t,h,p),f.allowVerticalPlacement&&(this.markUsedOrientation(f,p,h),this.placedOrientations[h.crossTileID]=p),{shift:v,placedGlyphBoxes:y}}},{key:"placeLayerBucketPart",value:function(e,n,r){var i=this,o=e.parameters,a=o.bucket,s=o.layout,l=o.posMatrix,u=o.textLabelPlaneMatrix,c=o.labelToScreenMatrix,h=o.textPixelRatio,p=o.holdingForFade,d=o.collisionBoxArray,m=o.partiallyEvaluatedTextSize,g=o.collisionGroup,v=s.get("text-optional"),y=s.get("icon-optional"),_=t.getOverlapMode(s,"text-overlap","text-allow-overlap"),x="always"===_,b=t.getOverlapMode(s,"icon-overlap","icon-allow-overlap"),w="always"===b,k="map"===s.get("text-rotation-alignment"),S="map"===s.get("text-pitch-alignment"),E="none"!==s.get("icon-text-fit"),I="viewport-y"===s.get("symbol-z-order"),C=x&&(w||!a.hasIconData()||y),A=w&&(x||!a.hasTextData()||v);!a.collisionArrays&&d&&a.deserializeCollisionBoxes(d);var P=function(e,o){if(!n[e.crossTileID])if(p)i.placements[e.crossTileID]=new Bt(!1,!1,!1);else{var d=!1,w=!1,I=!0,P=null,T={box:null,offscreen:null},M={box:null,offscreen:null},L=null,R=null,N=null,O=0,z=0,D=0;o.textFeatureIndex?O=o.textFeatureIndex:e.useRuntimeCollisionCircles&&(O=e.featureIndex),o.verticalTextFeatureIndex&&(z=o.verticalTextFeatureIndex);var F=o.textBox;if(F){var B=function(n){var r=t.WritingMode.horizontal;if(a.allowVerticalPlacement&&!n&&i.prevPlacement){var o=i.prevPlacement.placedOrientations[e.crossTileID];o&&(i.placedOrientations[e.crossTileID]=o,r=o,i.markUsedOrientation(a,r,e))}return r},j=function(n,r){if(a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&o.verticalTextBox){var i,s=f(a.writingModes);try{for(s.s();!(i=s.n()).done&&(i.value===t.WritingMode.vertical?(T=r(),M=T):T=n(),!(T&&T.box&&T.box.length)););}catch(l){s.e(l)}finally{s.f()}}else T=n()};if(s.get("text-variable-anchor")){var Z=s.get("text-variable-anchor");if(i.prevPlacement&&i.prevPlacement.variableOffsets[e.crossTileID]){var U=i.prevPlacement.variableOffsets[e.crossTileID];Z.indexOf(U.anchor)>0&&(Z=Z.filter((function(t){return t!==U.anchor})),Z.unshift(U.anchor))}var V=function(t,n,r){for(var o=t.x2-t.x1,s=t.y2-t.y1,u=e.textBoxScale,c=E&&"never"===b?n:null,f={box:[],offscreen:!1},p="never"!==_?2*Z.length:Z.length,m=0;m<p;++m){var v=i.attemptAnchorPlacement(Z[m%Z.length],t,o,s,u,k,S,h,l,g,m>=Z.length?_:"never",e,a,r,c);if(v&&(f=v.placedGlyphBoxes)&&f.box&&f.box.length){d=!0,P=v.shift;break}}return f};j((function(){return V(F,o.iconBox,t.WritingMode.horizontal)}),(function(){var n=o.verticalTextBox;return a.allowVerticalPlacement&&!(T&&T.box&&T.box.length)&&e.numVerticalGlyphVertices>0&&n?V(n,o.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),T&&(d=T.box,I=T.offscreen);var q=B(T&&T.box);if(!d&&i.prevPlacement){var G=i.prevPlacement.variableOffsets[e.crossTileID];G&&(i.variableOffsets[e.crossTileID]=G,i.markUsedJustification(a,G.anchor,e,q))}}else{var W=function(t,n){var r=i.collisionIndex.placeCollisionBox(t,_,h,l,g.predicate);return r&&r.box&&r.box.length&&(i.markUsedOrientation(a,n,e),i.placedOrientations[e.crossTileID]=n),r};j((function(){return W(F,t.WritingMode.horizontal)}),(function(){var n=o.verticalTextBox;return a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?W(n,t.WritingMode.vertical):{box:null,offscreen:null}})),B(T&&T.box&&T.box.length)}}if(d=(L=T)&&L.box&&L.box.length>0,I=L&&L.offscreen,e.useRuntimeCollisionCircles){var H=a.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),X=t.evaluateSizeForFeature(a.textSizeData,m,H),Y=s.get("text-padding");R=i.collisionIndex.placeCollisionCircles(_,H,a.lineVertexArray,a.glyphOffsetArray,X,l,u,c,r,S,g.predicate,e.collisionCircleDiameter,Y),d=x||R.circles.length>0&&!R.collisionDetected,I=I&&R.offscreen}if(o.iconFeatureIndex&&(D=o.iconFeatureIndex),o.iconBox){var $=function(t){var e=E&&P?qt(t,P.x,P.y,k,S,i.transform.angle):t;return i.collisionIndex.placeCollisionBox(e,b,h,l,g.predicate)};w=M&&M.box&&M.box.length&&o.verticalIconBox?(N=$(o.verticalIconBox)).box.length>0:(N=$(o.iconBox)).box.length>0,I=I&&N.offscreen}var K=v||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,J=y||0===e.numIconVertices;if(K||J?J?K||(w=w&&d):d=w&&d:w=d=w&&d,d&&L&&L.box&&i.collisionIndex.insertCollisionBox(L.box,_,s.get("text-ignore-placement"),a.bucketInstanceId,M&&M.box&&z?z:O,g.ID),w&&N&&i.collisionIndex.insertCollisionBox(N.box,b,s.get("icon-ignore-placement"),a.bucketInstanceId,D,g.ID),R&&(d&&i.collisionIndex.insertCollisionCircles(R.circles,_,s.get("text-ignore-placement"),a.bucketInstanceId,O,g.ID),r)){var Q=a.bucketInstanceId,tt=i.collisionCircleArrays[Q];void 0===tt&&(tt=i.collisionCircleArrays[Q]=new jt);for(var et=0;et<R.circles.length;et+=4)tt.circles.push(R.circles[et+0]),tt.circles.push(R.circles[et+1]),tt.circles.push(R.circles[et+2]),tt.circles.push(R.collisionDetected?1:0)}i.placements[e.crossTileID]=new Bt(d||C,w||A,I||a.justReloaded),n[e.crossTileID]=!0}};if(I)for(var T=a.getSortedSymbolIndexes(this.transform.angle),M=T.length-1;M>=0;--M){var L=T[M];P(a.symbolInstances.get(L),a.collisionArrays[L])}else for(var R=e.symbolInstanceStart;R<e.symbolInstanceEnd;R++)P(a.symbolInstances.get(R),a.collisionArrays[R]);if(r&&a.bucketInstanceId in this.collisionCircleArrays){var N=this.collisionCircleArrays[a.bucketInstanceId];t.invert(N.invProjMatrix,l),N.viewportMatrix=this.collisionIndex.getViewportMatrix()}a.justReloaded=!1}},{key:"markUsedJustification",value:function(e,n,r,i){var o;o=i===t.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(n)];for(var a=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];a<s.length;a++){var l=s[a];l>=0&&(e.text.placedSymbolArray.get(l).crossTileID=o>=0&&l!==o?0:r.crossTileID)}}},{key:"markUsedOrientation",value:function(e,n,r){for(var i=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,o=n===t.WritingMode.vertical?n:0,a=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];a<s.length;a++){var l=s[a];e.text.placedSymbolArray.get(l).placedOrientation=i}r.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)}},{key:"commit",value:function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var r=e?e.symbolFadeChange(t):1,i=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],u=i[s];u?(this.opacities[s]=new Ft(u,r,l.text,l.icon),n=n||l.text!==u.text.placed||l.icon!==u.icon.placed):(this.opacities[s]=new Ft(null,r,l.text,l.icon,l.skipFade),n=n||l.text||l.icon)}for(var c in i){var h=i[c];if(!this.opacities[c]){var f=new Ft(h,r,!1,!1);f.isHidden()||(this.opacities[c]=f,n=n||h.text.placed||h.icon.placed)}}for(var p in o)this.variableOffsets[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.variableOffsets[p]=o[p]);for(var d in a)this.placedOrientations[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.placedOrientations[d]=a[d]);n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}},{key:"updateLayerOpacities",value:function(t,e){var n,r={},i=f(e);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,r,o.collisionBoxArray)}}catch(s){i.e(s)}finally{i.f()}}},{key:"updateBucketOpacities",value:function(e,n,r){var i=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();var o=e.layers[0].layout,a=new Ft(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),l=o.get("icon-allow-overlap"),u=o.get("text-variable-anchor"),c="map"===o.get("text-rotation-alignment"),h="map"===o.get("text-pitch-alignment"),f="none"!==o.get("icon-text-fit"),p=new Ft(null,0,s&&(l||!e.hasIconData()||o.get("icon-optional")),l&&(s||!e.hasTextData()||o.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);for(var d=function(t,e,n){for(var r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(n)},m=function(r){var o=e.symbolInstances.get(r),s=o.numHorizontalGlyphVertices,l=o.numVerticalGlyphVertices,m=o.crossTileID,g=i.opacities[m];n[m]?g=a:g||(g=p,i.opacities[m]=g),n[m]=!0;var v=o.numIconVertices>0,y=i.placedOrientations[o.crossTileID],_=y===t.WritingMode.vertical,x=y===t.WritingMode.horizontal||y===t.WritingMode.horizontalOnly;if(s>0||l>0){var b=te(g.text);d(e.text,s,_?ee:b),d(e.text,l,x?ee:b);var w=g.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=w||_?1:0)})),o.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=w||x?1:0);var k=i.variableOffsets[o.crossTileID];k&&i.markUsedJustification(e,k.anchor,o,y);var S=i.placedOrientations[o.crossTileID];S&&(i.markUsedJustification(e,"left",o,S),i.markUsedOrientation(e,S,o))}if(v){var E=te(g.icon),I=!(f&&o.verticalPlacedIconSymbolIndex&&_);o.placedIconSymbolIndex>=0&&(d(e.icon,o.numIconVertices,I?E:ee),e.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=g.icon.isHidden()),o.verticalPlacedIconSymbolIndex>=0&&(d(e.icon,o.numVerticalIconVertices,I?ee:E),e.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=g.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){var C=e.collisionArrays[r];if(C){var A=new t.pointGeometry(0,0);if(C.textBox||C.verticalTextBox){var P=!0;if(u){var T=i.variableOffsets[m];T?(A=Vt(T.anchor,T.width,T.height,T.textOffset,T.textBoxScale),c&&A._rotate(h?i.transform.angle:-i.transform.angle)):P=!1}C.textBox&&Wt(e.textCollisionBox.collisionVertexArray,g.text.placed,!P||_,A.x,A.y),C.verticalTextBox&&Wt(e.textCollisionBox.collisionVertexArray,g.text.placed,!P||x,A.x,A.y)}var M=Boolean(!x&&C.verticalIconBox);C.iconBox&&Wt(e.iconCollisionBox.collisionVertexArray,g.icon.placed,M,f?A.x:0,f?A.y:0),C.verticalIconBox&&Wt(e.iconCollisionBox.collisionVertexArray,g.icon.placed,!M,f?A.x:0,f?A.y:0)}}},g=0;g<e.symbolInstances.length;g++)m(g);if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){var v=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=v.invProjMatrix,e.placementViewportMatrix=v.viewportMatrix,e.collisionCircleArray=v.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}},{key:"symbolFadeChange",value:function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}},{key:"zoomAdjustment",value:function(t){return Math.max(0,(this.transform.zoom-t)/1.5)}},{key:"hasTransitions",value:function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}},{key:"stillRecent",value:function(t,e){var n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t}},{key:"setStale",value:function(){this.stale=!0}}]),e}();function Wt(t,e,n,r,i){t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0)}var Ht=Math.pow(2,25),Xt=Math.pow(2,24),Yt=Math.pow(2,17),$t=Math.pow(2,16),Kt=Math.pow(2,9),Jt=Math.pow(2,8),Qt=Math.pow(2,1);function te(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*Ht+e*Xt+n*Yt+e*$t+n*Kt+e*Jt+n*Qt+e}var ee=0,ne=function(){function t(e){d(this,t),this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}return p(t,[{key:"continuePlacement",value:function(t,e,n,r,i){for(var o=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((function(t,e){return t.sortKey-e.sortKey})));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,i())return!0;return!1}}]),t}(),re=function(){function e(t,n,r,i,o,a,s){d(this,e),this.placement=new Gt(t,o,a,s),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=i,this._done=!1}return p(e,[{key:"isDone",value:function(){return this._done}},{key:"continuePlacement",value:function(e,n,r){for(var i=this,o=t.exported.now(),a=function(){var e=t.exported.now()-o;return!i._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=n[e[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new ne(s)),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}},{key:"commit",value:function(t){return this.placement.commit(t),this.placement}}]),e}(),ie=512/t.EXTENT/2,oe=function(){function e(t,n,r){d(this,e),this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=r;for(var i=0;i<n.length;i++){var o=n.get(i),a=o.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:o.crossTileID,coord:this.getScaledCoordinates(o,t)})}}return p(e,[{key:"getScaledCoordinates",value:function(e,n){var r=ie/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*r)}}},{key:"findMatches",value:function(t,e,n){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),i=0;i<t.length;i++){var o=t.get(i);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a){var s,l=this.getScaledCoordinates(o,e),u=f(a);try{for(u.s();!(s=u.n()).done;){var c=s.value;if(Math.abs(c.coord.x-l.x)<=r&&Math.abs(c.coord.y-l.y)<=r&&!n[c.crossTileID]){n[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}catch(h){u.e(h)}finally{u.f()}}}}}}]),e}(),ae=function(){function t(){d(this,t),this.maxCrossTileID=0}return p(t,[{key:"generate",value:function(){return++this.maxCrossTileID}}]),t}(),se=function(){function t(){d(this,t),this.indexes={},this.usedCrossTileIDs={},this.lng=0}return p(t,[{key:"handleWrapJump",value:function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var r=this.indexes[n],i={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),i[a.tileID.key]=a}this.indexes[n]=i}this.lng=t}},{key:"addBucket",value:function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var i=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var l=a[s];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,i)}else{var u=a[t.scaledTo(Number(o)).key];u&&u.findMatches(e.symbolInstances,t,i)}}for(var c=0;c<e.symbolInstances.length;c++){var h=e.symbolInstances.get(c);h.crossTileID||(h.crossTileID=n.generate(),i[h.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new oe(t,e.symbolInstances,e.bucketInstanceId),!0}},{key:"removeBucketCrossTileIDs",value:function(t,e){for(var n in e.indexedSymbolInstances){var r,i=f(e.indexedSymbolInstances[n]);try{for(i.s();!(r=i.n()).done;){var o=r.value;delete this.usedCrossTileIDs[t][o.crossTileID]}}catch(a){i.e(a)}finally{i.f()}}}},{key:"removeStaleBuckets",value:function(t){var e=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e}}]),t}(),le=function(){function t(){d(this,t),this.layerIndexes={},this.crossTileIDs=new ae,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}return p(t,[{key:"addLayer",value:function(t,e,n){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new se);var i=!1,o={};r.handleWrapJump(n);var a,s=f(e);try{for(s.s();!(a=s.n()).done;){var l=a.value,u=l.getBucket(t);u&&t.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(l.tileID,u,this.crossTileIDs)&&(i=!0),o[u.bucketInstanceId]=!0)}}catch(c){s.e(c)}finally{s.f()}return r.removeStaleBuckets(o)&&(i=!0),i}},{key:"pruneUnusedLayers",value:function(t){var e={};for(var n in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[n]||delete this.layerIndexes[n]}}]),t}(),ue=function(e,n){return t.emitValidationErrors(e,n&&n.filter((function(t){return"source.canvas"!==t.identifier})))},ce=t.pick(ut,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),he=t.pick(ut,["setCenter","setZoom","setBearing","setPitch"]),fe=function(){var e={},n=t.spec.$version;for(var r in t.spec.$root){var i=t.spec.$root[r];if(i.required){var o=null;null!=(o="version"===r?n:"array"===i.type?[]:{})&&(e[r]=o)}}return e}(),pe=function(e){m(r,e);var n=g(r);function r(e){var o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(this,r),(o=n.call(this)).map=e,o.dispatcher=new N(at(),i(o)),o.imageManager=new E,o.imageManager.setEventedParent(i(o)),o.glyphManager=new P(e._requestManager,a.localIdeographFontFamily),o.lineAtlas=new R(256,512),o.crossTileSymbolIndex=new le,o._layers={},o._serializedLayers={},o._order=[],o.sourceCaches={},o.zoomHistory=new t.ZoomHistory,o._loaded=!1,o._availableImages=[],o._resetUpdates(),o.dispatcher.broadcast("setReferrer",t.getReferrer());var s=i(o);return o._rtlTextPluginCallback=r.registerForPluginStateChange((function(e){s.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(function(e,n){if(t.triggerPluginCompletionEvent(e),n&&n.every((function(t){return t})))for(var r in s.sourceCaches)s.sourceCaches[r].reload()}))})),o.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var r in o._layers){var i=o._layers[r];i.source===n.id&&o._validateLayer(i)}}}})),o}return p(r,[{key:"loadURL",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new t.Event("dataloading",{dataType:"style"}));var i="boolean"!=typeof r.validate||r.validate,o=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,(function(e,r){n._request=null,e?n.fire(new t.ErrorEvent(e)):r&&n._load(r,i)}))}},{key:"loadJSON",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame((function(){n._request=null,n._load(e,!1!==r.validate)}))}},{key:"loadEmpty",value:function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(fe,!1)}},{key:"_load",value:function(e,n){if(!n||!ue(this,t.validateStyle(e))){for(var r in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(r,e.sources[r],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var i=lt(this.stylesheet.layers);this._order=i.map((function(t){return t.id})),this._layers={},this._serializedLayers={};var o,a=f(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;(s=t.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize()}}catch(l){a.e(l)}finally{a.f()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new L(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}}},{key:"_loadSprite",value:function(e){var n=this;this._spriteRequest=function(e,n,r,i){var o,a,s,l=r>1?"@2x":"",u=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,l,".json"),t.ResourceType.SpriteJSON),(function(t,e){u=null,s||(s=t,o=e,h())})),c=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,l,".png"),t.ResourceType.SpriteImage),(function(t,e){c=null,s||(s=t,a=e,h())}));function h(){if(s)i(s);else if(o&&a){var e=t.exported.getImageData(a),n={};for(var r in o){var l=o[r],u=l.width,c=l.height,h=l.x,f=l.y,p=l.sdf,d=l.pixelRatio,m=l.stretchX,g=l.stretchY,v=l.content,y=new t.RGBAImage({width:u,height:c});t.RGBAImage.copy(e,y,{x:h,y:f},{x:0,y:0},{width:u,height:c}),n[r]={data:y,pixelRatio:d,sdf:p,stretchX:m,stretchY:g,content:v}}i(null,n)}}return{cancel:function(){u&&(u.cancel(),u=null),c&&(c.cancel(),c=null)}}}(e,this.map._requestManager,this.map.getPixelRatio(),(function(e,r){if(n._spriteRequest=null,e)n.fire(new t.ErrorEvent(e));else if(r)for(var i in r)n.imageManager.addImage(i,r[i]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.fire(new t.Event("data",{dataType:"style"}))}))}},{key:"_validateLayer",value:function(e){var n=this.sourceCaches[e.source];if(n){var r=e.sourceLayer;if(r){var i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error('Source layer "'.concat(r,'" does not exist on source "').concat(i.id,'" as specified by style layer "').concat(e.id,'".'))))}}}},{key:"loaded",value:function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}},{key:"_serializeLayers",value:function(t){var e,n=[],r=f(t);try{for(r.s();!(e=r.n()).done;){var i=e.value,o=this._layers[i];"custom"!==o.type&&n.push(o.serialize())}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"hasTransitions",value:function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}},{key:"_checkLoaded",value:function(){if(!this._loaded)throw new Error("Style is not done loading.")}},{key:"update",value:function(e){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var o in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}var l={};for(var u in this.sourceCaches){var c=this.sourceCaches[u];l[u]=c.used,c.used=!1}var h,p=f(this._order);try{for(p.s();!(h=p.n()).done;){var d=h.value,m=this._layers[d];m.recalculate(e,this._availableImages),!m.isHidden(e.zoom)&&m.source&&(this.sourceCaches[m.source].used=!0)}}catch(y){p.e(y)}finally{p.f()}for(var g in l){var v=this.sourceCaches[g];l[g]!==v.used&&v.fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(e),this.z=e.zoom,n&&this.fire(new t.Event("data",{dataType:"style"}))}}},{key:"_updateTilesForChangedImages",value:function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}},{key:"_updateWorkerLayers",value:function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}},{key:"_resetUpdates",value:function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}},{key:"setState",value:function(e){var n=this;if(this._checkLoaded(),ue(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=lt(e.layers);var r=function(t,e){if(!t)return[{command:ut.setStyle,args:[e]}];var n=[];try{if(!u(t.version,e.version))return[{command:ut.setStyle,args:[e]}];u(t.center,e.center)||n.push({command:ut.setCenter,args:[e.center]}),u(t.zoom,e.zoom)||n.push({command:ut.setZoom,args:[e.zoom]}),u(t.bearing,e.bearing)||n.push({command:ut.setBearing,args:[e.bearing]}),u(t.pitch,e.pitch)||n.push({command:ut.setPitch,args:[e.pitch]}),u(t.sprite,e.sprite)||n.push({command:ut.setSprite,args:[e.sprite]}),u(t.glyphs,e.glyphs)||n.push({command:ut.setGlyphs,args:[e.glyphs]}),u(t.transition,e.transition)||n.push({command:ut.setTransition,args:[e.transition]}),u(t.light,e.light)||n.push({command:ut.setLight,args:[e.light]});var r={},i=[];!function(t,e,n,r){var i;for(i in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,i)&&(Object.prototype.hasOwnProperty.call(e,i)||ht(i,n,r));for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(Object.prototype.hasOwnProperty.call(t,i)?u(t[i],e[i])||("geojson"===t[i].type&&"geojson"===e[i].type&&pt(t,e,i)?n.push({command:ut.setGeoJSONSourceData,args:[i,e[i].data]}):ft(i,e,n,r)):ct(i,e,n))}(t.sources,e.sources,i,r);var o=[];t.layers&&t.layers.forEach((function(t){r[t.source]?n.push({command:ut.removeLayer,args:[t.id]}):o.push(t)})),n=n.concat(i),function(t,e,n){e=e||[];var r,i,o,a,s,l,c,h=(t=t||[]).map(mt),f=e.map(mt),p=t.reduce(gt,{}),d=e.reduce(gt,{}),m=h.slice(),g=Object.create(null);for(r=0,i=0;r<h.length;r++)o=h[r],Object.prototype.hasOwnProperty.call(d,o)?i++:(n.push({command:ut.removeLayer,args:[o]}),m.splice(m.indexOf(o,i),1));for(r=0,i=0;r<f.length;r++)o=f[f.length-1-r],m[m.length-1-r]!==o&&(Object.prototype.hasOwnProperty.call(p,o)?(n.push({command:ut.removeLayer,args:[o]}),m.splice(m.lastIndexOf(o,m.length-i),1)):i++,l=m[m.length-r],n.push({command:ut.addLayer,args:[d[o],l]}),m.splice(m.length-r,0,o),g[o]=!0);for(r=0;r<f.length;r++)if(a=p[o=f[r]],s=d[o],!g[o]&&!u(a,s))if(u(a.source,s.source)&&u(a["source-layer"],s["source-layer"])&&u(a.type,s.type)){for(c in dt(a.layout,s.layout,n,o,null,ut.setLayoutProperty),dt(a.paint,s.paint,n,o,null,ut.setPaintProperty),u(a.filter,s.filter)||n.push({command:ut.setFilter,args:[o,s.filter]}),u(a.minzoom,s.minzoom)&&u(a.maxzoom,s.maxzoom)||n.push({command:ut.setLayerZoomRange,args:[o,s.minzoom,s.maxzoom]}),a)Object.prototype.hasOwnProperty.call(a,c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?dt(a[c],s[c],n,o,c.slice(6),ut.setPaintProperty):u(a[c],s[c])||n.push({command:ut.setLayerProperty,args:[o,c,s[c]]}));for(c in s)Object.prototype.hasOwnProperty.call(s,c)&&!Object.prototype.hasOwnProperty.call(a,c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?dt(a[c],s[c],n,o,c.slice(6),ut.setPaintProperty):u(a[c],s[c])||n.push({command:ut.setLayerProperty,args:[o,c,s[c]]}))}else n.push({command:ut.removeLayer,args:[o]}),l=m[m.lastIndexOf(o)+1],n.push({command:ut.addLayer,args:[s,l]})}(o,e.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:ut.setStyle,args:[e]}]}return n}(this.serialize(),e).filter((function(t){return!(t.command in he)}));if(0===r.length)return!1;var i=r.filter((function(t){return!(t.command in ce)}));if(i.length>0)throw new Error("Unimplemented: ".concat(i.map((function(t){return t.command})).join(", "),"."));return r.forEach((function(t){"setTransition"!==t.command&&n[t.command].apply(n,t.args)})),this.stylesheet=e,!0}},{key:"addImage",value:function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error('An image named "'.concat(e,'" already exists.'))));this.imageManager.addImage(e,n),this._afterImageUpdated(e)}},{key:"updateImage",value:function(t,e){this.imageManager.updateImage(t,e)}},{key:"getImage",value:function(t){return this.imageManager.getImage(t)}},{key:"removeImage",value:function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error('An image named "'.concat(e,'" does not exist.'))));this.imageManager.removeImage(e),this._afterImageUpdated(e)}},{key:"_afterImageUpdated",value:function(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}},{key:"listImages",value:function(){return this._checkLoaded(),this.imageManager.listImages()}},{key:"addSource",value:function(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error('Source "'.concat(e,'" already exists.'));if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(n).join(", "),"."));if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,"sources.".concat(e),n,null,i))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=this.sourceCaches[e]=new Q(e,n,this.dispatcher);o.style=this,o.setEventedParent(this,(function(){return{isSourceLoaded:r.loaded(),source:o.serialize(),sourceId:e}})),o.onAdd(this.map),this._changed=!0}}},{key:"removeSource",value:function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'.concat(e,'" cannot be removed while layer "').concat(n,'" is using it.'))));var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.onRemove(this.map),this._changed=!0}},{key:"setGeoJSONSourceData",value:function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0}},{key:"getSource",value:function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}},{key:"addLayer",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var i=e.id;if(this.getLayer(i))this.fire(new t.ErrorEvent(new Error('Layer "'.concat(i,'" already exists on this map.'))));else{var o;if("custom"===e.type){if(ue(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone$1(e),e=t.extend(e,{source:i})),this._validate(t.validateStyle.layer,"layers.".concat(i),e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize()}var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error('Cannot add layer "'.concat(i,'" before non-existing layer "').concat(n,'".'))));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}}},{key:"moveLayer",value:function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var r=this._order.indexOf(e);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error('Cannot move layer "'.concat(e,'" before non-existing layer "').concat(n,'".')))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be moved."))))}},{key:"removeLayer",value:function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error('Cannot remove non-existing layer "'.concat(e,'".'))))}},{key:"getLayer",value:function(t){return this._layers[t]}},{key:"hasLayer",value:function(t){return t in this._layers}},{key:"setLayerZoomRange",value:function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error('Cannot set the zoom range of non-existing layer "'.concat(e,'".'))))}},{key:"setFilter",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var i=this.getLayer(e);if(i){if(!u(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(t.validateStyle.filter,"layers.".concat(i.id,".filter"),n,null,r)||(i.filter=t.clone$1(n),this._updateLayer(i)))}else this.fire(new t.ErrorEvent(new Error('Cannot filter non-existing layer "'.concat(e,'".'))))}},{key:"getFilter",value:function(e){return t.clone$1(this.getLayer(e).filter)}},{key:"setLayoutProperty",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var o=this.getLayer(e);o?u(o.getLayoutProperty(n),r)||(o.setLayoutProperty(n,r,i),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error('Cannot style non-existing layer "'.concat(e,'".'))))}},{key:"getLayoutProperty",value:function(e,n){var r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error('Cannot get style of non-existing layer "'.concat(e,'".'))))}},{key:"setPaintProperty",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var o=this.getLayer(e);o?u(o.getPaintProperty(n),r)||(o.setPaintProperty(n,r,i)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error('Cannot style non-existing layer "'.concat(e,'".'))))}},{key:"getPaintProperty",value:function(t,e){return this.getLayer(t).getPaintProperty(e)}},{key:"setFeatureState",value:function(e,n){this._checkLoaded();var r=e.source,i=e.sourceLayer,o=this.sourceCaches[r];if(void 0!==o){var a=o.getSource().type;"geojson"===a&&i?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||i?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(i,e.id,n)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '".concat(r,"' does not exist in the map's style."))))}},{key:"removeFeatureState",value:function(e,n){this._checkLoaded();var r=e.source,i=this.sourceCaches[r];if(void 0!==i){var o=i.getSource().type,a="vector"===o?e.sourceLayer:void 0;"vector"!==o||a?n&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):i.removeFeatureState(a,e.id,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '".concat(r,"' does not exist in the map's style."))))}},{key:"getFeatureState",value:function(e){this._checkLoaded();var n=e.source,r=e.sourceLayer,i=this.sourceCaches[n];if(void 0!==i)return"vector"!==i.getSource().type||r?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),i.getFeatureState(r,e.id)):void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new t.ErrorEvent(new Error("The source '".concat(n,"' does not exist in the map's style."))))}},{key:"getTransition",value:function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}},{key:"serialize",value:function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(function(t){return t.serialize()})),layers:this._serializeLayers(this._order)},(function(t){return void 0!==t}))}},{key:"_updateLayer",value:function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0}},{key:"_flattenAndSortRenderedFeatures",value:function(t){for(var e=this,n=function(t){return"fill-extrusion"===e._layers[t].type},r={},i=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(n(a)){r[a]=o;var s,l=f(t);try{for(l.s();!(s=l.n()).done;){var u=s.value[a];if(u){var c,h=f(u);try{for(h.s();!(c=h.n()).done;){var p=c.value;i.push(p)}}catch(E){h.e(E)}finally{h.f()}}}}catch(E){l.e(E)}finally{l.f()}}}i.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var d=[],m=this._order.length-1;m>=0;m--){var g=this._order[m];if(n(g))for(var v=i.length-1;v>=0;v--){var y=i[v].feature;if(r[y.layer.id]<m)break;d.push(y),i.pop()}else{var _,x=f(t);try{for(x.s();!(_=x.n()).done;){var b=_.value[g];if(b){var w,k=f(b);try{for(k.s();!(w=k.n()).done;){var S=w.value;d.push(S.feature)}}catch(E){k.e(E)}finally{k.f()}}}}catch(E){x.e(E)}finally{x.f()}}}return d}},{key:"queryRenderedFeatures",value:function(e,n,r){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);var i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];var o,a=f(n.layers);try{for(a.s();!(o=a.n()).done;){var s=o.value,l=this._layers[s];if(!l)return this.fire(new t.ErrorEvent(new Error("The layer '".concat(s,"' does not exist in the map's style and cannot be queried for features.")))),[];i[l.source]=!0}}catch(h){a.e(h)}finally{a.f()}}var u=[];for(var c in n.availableImages=this._availableImages,this.sourceCaches)n.layers&&!i[c]||u.push(X(this.sourceCaches[c],this._layers,this._serializedLayers,e,n,r));return this.placement&&u.push(function(t,e,n,r,i,o,a){var s,l={},u=o.queryRenderedSymbols(r),c=[],p=f(Object.keys(u).map(Number));try{for(p.s();!(s=p.n()).done;){var d=s.value;c.push(a[d])}}catch(h){p.e(h)}finally{p.f()}c.sort(Y);for(var m=function(){var n=v[g],r=n.featureIndex.lookupSymbolFeatures(u[n.bucketInstanceId],e,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,t);for(var o in r){var a=l[o]=l[o]||[],s=r[o];s.sort((function(t,e){var r=n.featureSortOrder;if(r){var i=r.indexOf(t.featureIndex);return r.indexOf(e.featureIndex)-i}return e.featureIndex-t.featureIndex}));var c,p=f(s);try{for(p.s();!(c=p.n()).done;){var d=c.value;a.push(d)}}catch(h){p.e(h)}finally{p.f()}}},g=0,v=c;g<v.length;g++)m();var y=function(e){l[e].forEach((function(r){var i=r.feature,o=n[t[e].source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o}))};for(var _ in l)y(_);return l}(this._layers,this._serializedLayers,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(u)}},{key:"querySourceFeatures",value:function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);var r=this.sourceCaches[e];return r?function(t,e){for(var n=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,e))}return r}(r,n):[]}},{key:"addSourceType",value:function(t,e,n){return r.getSourceType(t)?n(new Error('A source type called "'.concat(t,'" already exists.'))):(r.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))}},{key:"getLight",value:function(){return this.light.getLight()}},{key:"setLight",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();var r=this.light.getLight(),i=!1;for(var o in e)if(!u(e[o],r[o])){i=!0;break}if(i){var a={now:t.exported.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(a)}}},{key:"_validate",value:function(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!o||!1!==o.validate)&&ue(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.spec},i)))}},{key:"_remove",value:function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var n in this.sourceCaches){var r=this.sourceCaches[n];r.setEventedParent(null),r.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}},{key:"_clearSource",value:function(t){this.sourceCaches[t].clearTiles()}},{key:"_reloadSource",value:function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}},{key:"_updateSources",value:function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)}},{key:"_generateCollisionBoxes",value:function(){for(var t in this.sourceCaches)this._reloadSource(t)}},{key:"_updatePlacement",value:function(e,n,r,i){var o,a=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=!1,u=!1,c={},h=f(this._order);try{for(h.s();!(o=h.n()).done;){var p=o.value,d=this._layers[p];if("symbol"===d.type){c[d.source]||function(){var t=a.sourceCaches[d.source];c[d.source]=t.getRenderableIds(!0).map((function(e){return t.getTileByID(e)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}();var m=this.crossTileSymbolIndex.addLayer(d,c[d.source],e.center.lng);l=l||m}}}catch(x){h.e(x)}finally{h.f()}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((s=s||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),e.zoom))&&(this.pauseablePlacement=new re(e,this._order,s,n,r,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,c),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),u=!0),l&&this.pauseablePlacement.placement.setStale()),u||l){var g,v=f(this._order);try{for(v.s();!(g=v.n()).done;){var y=g.value,_=this._layers[y];"symbol"===_.type&&this.placement.updateLayerOpacities(_,c[_.source])}}catch(x){v.e(x)}finally{v.f()}}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}},{key:"_releaseSymbolFadeTiles",value:function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}},{key:"getImages",value:function(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();var r=this.sourceCaches[e.source];r&&r.setDependencies(e.tileID.key,e.type,e.icons)}},{key:"getGlyphs",value:function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)}},{key:"getResource",value:function(e,n,r){return t.makeRequest(n,r)}}]),r}(t.Evented);pe.getSourceType=function(t){return W[t]},pe.setSourceType=function(t,e){W[t]=e},pe.registerForPluginStateChange=t.registerForPluginStateChange;var de=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),me={prelude:ge("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),background:ge("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:ge("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ge("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:ge("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ge("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:ge("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ge("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ge("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ge("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:ge("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:ge("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:ge("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:ge("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:ge("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:ge("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:ge("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ge("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:ge("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),lineGradient:ge("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),linePattern:ge("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:ge("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:ge("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:ge("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),symbolSDF:ge("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:ge("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}")};function ge(t,e){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute ([\w]+) ([\w]+)/g),i=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(i):i,s={};return{fragmentSource:t=t.replace(n,(function(t,e,n,r,i){return s[i]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\nvarying ").concat(n," ").concat(r," ").concat(i,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(i,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(i,"\n    ").concat(n," ").concat(r," ").concat(i," = u_").concat(i,";\n#endif\n")})),vertexSource:e=e.replace(n,(function(t,e,n,r,i){var o="float"===r?"vec2":"vec4",a=i.match(/color/)?"color":o;return s[i]?"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\nuniform lowp float u_").concat(i,"_t;\nattribute ").concat(n," ").concat(o," a_").concat(i,";\nvarying ").concat(n," ").concat(r," ").concat(i,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(i,";\n#endif\n"):"vec4"===a?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\n    ").concat(i," = a_").concat(i,";\n#else\n    ").concat(n," ").concat(r," ").concat(i," = u_").concat(i,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(i,"\n    ").concat(i," = unpack_mix_").concat(a,"(a_").concat(i,", u_").concat(i,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(i," = u_").concat(i,";\n#endif\n"):"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\nuniform lowp float u_").concat(i,"_t;\nattribute ").concat(n," ").concat(o," a_").concat(i,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(i,";\n#endif\n"):"vec4"===a?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\n    ").concat(n," ").concat(r," ").concat(i," = a_").concat(i,";\n#else\n    ").concat(n," ").concat(r," ").concat(i," = u_").concat(i,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(i,"\n    ").concat(n," ").concat(r," ").concat(i," = unpack_mix_").concat(a,"(a_").concat(i,", u_").concat(i,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(i," = u_").concat(i,";\n#endif\n")})),staticAttributes:r,staticUniforms:a}}var ve=function(){function t(){d(this,t),this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}return p(t,[{key:"bind",value:function(t,e,n,r,i,o,a,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==r.length,u=0;!l&&u<r.length;u++)this.boundPaintVertexBuffers[u]!==r[u]&&(l=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===n&&!l&&this.boundIndexBuffer===i&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind()):this.freshBind(e,n,r,i,o,a,s)}},{key:"freshBind",value:function(t,e,n,r,i,o,a){var s,l=t.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=u.currentNumAttributes||0;for(var h=l;h<s;h++)c.disableVertexAttribArray(h)}e.enableAttributes(c,t);var p,d=f(n);try{for(d.s();!(p=d.n()).done;)p.value.enableAttributes(c,t)}catch(y){d.e(y)}finally{d.f()}o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,i);var m,g=f(n);try{for(g.s();!(m=g.n()).done;){var v=m.value;v.bind(),v.setVertexAttribPointers(c,t,i)}}catch(y){g.e(y)}finally{g.f()}o&&(o.bind(),o.setVertexAttribPointers(c,t,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,i)),u.currentNumAttributes=l}},{key:"destroy",value:function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}]),t}();function ye(t){for(var e=[],n=0;n<t.length;n++)if(null!==t[n]){var r=t[n].split(" ");e.push(r.pop())}return e}var _e=function(){function t(e,n,r,i,o,a){d(this,t);var s=e.gl;this.program=s.createProgram();var l,u=ye(r.staticAttributes),c=i?i.getBinderAttributes():[],h=u.concat(c),p=r.staticUniforms?ye(r.staticUniforms):[],m=i?i.getBinderUniforms():[],g=p.concat(m),v=[],y=f(g);try{for(y.s();!(l=y.n()).done;){var _=l.value;v.indexOf(_)<0&&v.push(_)}}catch(T){y.e(T)}finally{y.f()}var x=i?i.defines():[];a&&x.push("#define OVERDRAW_INSPECTOR;");var b=x.concat(me.prelude.fragmentSource,r.fragmentSource).join("\n"),w=x.concat(me.prelude.vertexSource,r.vertexSource).join("\n"),k=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(k,b),s.compileShader(k),s.attachShader(this.program,k);var S=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(S,w),s.compileShader(S),s.attachShader(this.program,S),this.attributes={};var E={};this.numAttributes=h.length;for(var I=0;I<this.numAttributes;I++)h[I]&&(s.bindAttribLocation(this.program,I,h[I]),this.attributes[h[I]]=I);s.linkProgram(this.program),s.deleteShader(S),s.deleteShader(k);for(var C=0;C<v.length;C++){var A=v[C];if(A&&!E[A]){var P=s.getUniformLocation(this.program,A);P&&(E[A]=P)}}this.fixedUniforms=o(e,E),this.binderUniforms=i?i.getUniforms(e,E):[]}}}return p(t,[{key:"draw",value:function(t,e,n,i,o,a,s,l,u,c,h,p,d,m,g,v){var y,_=t.gl;if(!this.failedToCreate){for(var x in t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(i),t.setColorMode(o),t.setCullFace(a),this.fixedUniforms)this.fixedUniforms[x].set(s[x]);m&&m.setUniforms(t,this.binderUniforms,p,{zoom:d});var b,w=(y={},r(y,_.LINES,2),r(y,_.TRIANGLES,3),r(y,_.LINE_STRIP,1),y)[e],k=f(h.get());try{for(k.s();!(b=k.n()).done;){var S=b.value,E=S.vaos||(S.vaos={});(E[l]||(E[l]=new ve)).bind(t,this,u,m?m.getPaintVertexBuffers():[],c,S.vertexOffset,g,v),_.drawElements(e,S.primitiveLength*w,_.UNSIGNED_SHORT,S.primitiveOffset*w*2)}}catch(I){k.e(I)}finally{k.f()}}}}]),t}();function xe(t,e,n){var r=1/zt(n,1,e.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,e.transform.tileZoom)/i,a=o*(n.tileID.canonical.x+n.tileID.wrap*i),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}var be=function(e,n,r,i){var o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=function(){var e=new t.ARRAY_TYPE(9);return t.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}();"viewport"===o.properties.get("anchor")&&function(t,e){var n=Math.sin(e),r=Math.cos(e);t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1}(l,-n.transform.angle),function(t,e,n){var r=e[0],i=e[1],o=e[2];t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8]}(s,s,l);var u=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+r,u_opacity:i}},we=function(e,n,r,i,o,a,s){return t.extend(be(e,n,r,i),xe(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8})},ke=function(t){return{u_matrix:t}},Se=function(e,n,r,i){return t.extend(ke(e),xe(r,n,i))},Ee=function(t,e){return{u_matrix:t,u_world:e}},Ie=function(e,n,r,i,o){return t.extend(Se(e,n,r,i),{u_world:o})},Ce=function(t,e,n,r){var i,o,a=t.transform;if("map"===r.paint.get("circle-pitch-alignment")){var s=zt(n,1,a.zoom);i=!0,o=[s,s]}else i=!1,o=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+i,u_device_pixel_ratio:t.pixelRatio,u_extrude_scale:o}},Ae=function(t,e,n){var r=zt(n,1,e.zoom),i=Math.pow(2,e.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[e.pixelsToGLUnits[0]/(r*i),e.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:o}},Pe=function(t,e){return{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},Te=function(t){return{u_matrix:t}},Me=function(t,e,n,r){return{u_matrix:t,u_extrude_scale:zt(e,1,n),u_intensity:r}};function Le(e,n){var r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new t.MercatorCoordinate(0,i/r).toLngLat().lat,new t.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}var Re=function(t,e,n){var r=t.transform;return{u_matrix:Fe(t,e,n),u_ratio:1/zt(e,1,r.zoom),u_device_pixel_ratio:t.pixelRatio,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},Ne=function(e,n,r,i){return t.extend(Re(e,n,r),{u_image:0,u_image_height:i})},Oe=function(t,e,n,r){var i=t.transform,o=De(e,i);return{u_matrix:Fe(t,e,n),u_texsize:e.imageAtlasTexture.size,u_ratio:1/zt(e,1,i.zoom),u_device_pixel_ratio:t.pixelRatio,u_image:0,u_scale:[o,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},ze=function(e,n,r,i,o){var a=e.lineAtlas,s=De(n,e.transform),l="round"===r.layout.get("line-cap"),u=a.getDash(i.from,l),c=a.getDash(i.to,l),h=u.width*o.fromScale,f=c.width*o.toScale;return t.extend(Re(e,n,r),{u_patternscale_a:[s/h,-u.height/2],u_patternscale_b:[s/f,-c.height/2],u_sdfgamma:a.width/(256*Math.min(h,f)*e.pixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:c.y,u_mix:o.t})};function De(t,e){return 1/zt(t,1,e.tileZoom)}function Fe(t,e,n){return t.translatePosMatrix(e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var Be=function(t,e,n,r,i){return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:je(i.paint.get("raster-hue-rotate"))};var o,a};function je(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}var Ze=function(t,e,n,r,i,o,a,s,l,u){var c=i.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+r,u_texsize:u,u_texture:0}},Ue=function(e,n,r,i,o,a,s,l,u,c,h){var f=o.transform;return t.extend(Ze(e,n,r,i,o,a,s,l,u,c),{u_gamma_scale:i?Math.cos(f._pitch)*f.cameraToCenterDistance:1,u_device_pixel_ratio:o.pixelRatio,u_is_halo:+h})},Ve=function(e,n,r,i,o,a,s,l,u,c){return t.extend(Ue(e,n,r,i,o,a,s,l,!0,u,!0),{u_texsize_icon:c,u_texture_icon:1})},qe=function(t,e,n){return{u_matrix:t,u_opacity:e,u_color:n}},Ge=function(e,n,r,i,o,a){return t.extend(function(t,e,n,r){var i=n.imageManager.getPattern(t.from.toString()),o=n.imageManager.getPattern(t.to.toString()),a=n.imageManager.getPixelSize(),s=a.width,l=a.height,u=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/u,h=c*(r.tileID.canonical.x+r.tileID.wrap*u),f=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,l],u_mix:e.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/zt(r,1,n.transform.tileZoom),u_pixel_coord_upper:[h>>16,f>>16],u_pixel_coord_lower:[65535&h,65535&f]}}(i,a,r,o),{u_matrix:e,u_opacity:n})},We={fillExtrusion:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fillExtrusionPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fill:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},fillPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},fillOutline:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}},fillOutlinePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},circle:function(e,n){return{u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},collisionBox:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}},collisionCircle:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,n.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,n.u_viewport_size)}},debug:function(e,n){return{u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_overlay:new t.Uniform1i(e,n.u_overlay),u_overlay_scale:new t.Uniform1f(e,n.u_overlay_scale)}},clippingMask:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmap:function(e,n){return{u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmapTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}},hillshade:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}},hillshadePrepare:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_unpack:new t.Uniform4f(e,n.u_unpack)}},line:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels)}},lineGradient:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image),u_image_height:new t.Uniform1f(e,n.u_image_height)}},linePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_image:new t.Uniform1i(e,n.u_image),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},lineSDF:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}},raster:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}},symbolIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}},symbolSDF:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}},symbolTextAndIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texsize_icon:new t.Uniform2f(e,n.u_texsize_icon),u_texture:new t.Uniform1i(e,n.u_texture),u_texture_icon:new t.Uniform1i(e,n.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}},background:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}},backgroundPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}}},He=function(){function t(e,n,r){d(this,t),this.context=e;var i=e.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer}return p(t,[{key:"bind",value:function(){this.context.bindElementBuffer.set(this.buffer)}},{key:"updateData",value:function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),t}(),Xe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Ye=function(){function t(e,n,r,i){d(this,t),this.length=n.length,this.attributes=r,this.itemSize=n.bytesPerElement,this.dynamicDraw=i,this.context=e;var o=e.gl;this.buffer=o.createBuffer(),e.bindVertexBuffer.set(this.buffer),o.bufferData(o.ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer}return p(t,[{key:"bind",value:function(){this.context.bindVertexBuffer.set(this.buffer)}},{key:"updateData",value:function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}},{key:"enableAttributes",value:function(t,e){for(var n=0;n<this.attributes.length;n++){var r=e.attributes[this.attributes[n].name];void 0!==r&&t.enableVertexAttribArray(r)}}},{key:"setVertexAttribPointers",value:function(t,e,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[Xe[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),t}(),$e=function(){function t(e){d(this,t),this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}return p(t,[{key:"get",value:function(){return this.current}},{key:"set",value:function(t){}},{key:"getDefault",value:function(){return this.default}},{key:"setDefault",value:function(){this.set(this.default)}}]),t}(),Ke=function(e){m(r,e);var n=g(r);function r(){return d(this,r),n.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return t.Color.transparent}},{key:"set",value:function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}]),r}($e),Je=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return 1}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}]),n}($e),Qe=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return 0}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}]),n}($e),tn=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return[!0,!0,!0,!0]}},{key:"set",value:function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}]),n}($e),en=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!0}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}]),n}($e),nn=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return 255}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}]),n}($e),rn=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return{func:this.gl.ALWAYS,ref:0,mask:255}}},{key:"set",value:function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}]),n}($e),on=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}},{key:"set",value:function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}]),n}($e),an=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}}]),n}($e),sn=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return[0,1]}},{key:"set",value:function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}]),n}($e),ln=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}}]),n}($e),un=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return this.gl.LESS}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}]),n}($e),cn=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}}]),n}($e),hn=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){var t=this.gl;return[t.ONE,t.ZERO]}},{key:"set",value:function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}]),n}($e),fn=function(e){m(r,e);var n=g(r);function r(){return d(this,r),n.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return t.Color.transparent}},{key:"set",value:function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}]),r}($e),pn=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return this.gl.FUNC_ADD}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}]),n}($e),dn=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}}]),n}($e),mn=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return this.gl.BACK}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}]),n}($e),gn=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return this.gl.CCW}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}]),n}($e),vn=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}]),n}($e),yn=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return this.gl.TEXTURE0}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}]),n}($e),_n=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}},{key:"set",value:function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}]),n}($e),xn=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}}]),n}($e),bn=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}}]),n}($e),wn=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}}]),n}($e),kn=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}}]),n}($e),Sn=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}]),n}($e),En=function(t){m(n,t);var e=g(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).vao=t.extVertexArrayObject,r}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}]),n}($e),In=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return 4}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}}]),n}($e),Cn=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}}]),n}($e),An=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}}]),n}($e),Pn=function(t){m(n,t);var e=g(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t)).context=t,i.parent=r,i}return p(n,[{key:"getDefault",value:function(){return null}}]),n}($e),Tn=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"setDirty",value:function(){this.dirty=!0}},{key:"set",value:function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}}]),n}(Pn),Mn=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"set",value:function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}}]),n}(Pn),Ln=function(){function t(e,n,r,i){d(this,t),this.context=e,this.width=n,this.height=r;var o=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new Tn(e,o),i&&(this.depthAttachment=new Mn(e,o))}return p(t,[{key:"destroy",value:function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n)}t.deleteFramebuffer(this.framebuffer)}}]),t}(),Rn=p((function t(e,n,r){d(this,t),this.blendFunction=e,this.blendColor=n,this.mask=r}));Rn.Replace=[1,0],Rn.disabled=new Rn(Rn.Replace,t.Color.transparent,[!1,!1,!1,!1]),Rn.unblended=new Rn(Rn.Replace,t.Color.transparent,[!0,!0,!0,!0]),Rn.alphaBlended=new Rn([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Nn=function(){function t(e){d(this,t),this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ke(this),this.clearDepth=new Je(this),this.clearStencil=new Qe(this),this.colorMask=new tn(this),this.depthMask=new en(this),this.stencilMask=new nn(this),this.stencilFunc=new rn(this),this.stencilOp=new on(this),this.stencilTest=new an(this),this.depthRange=new sn(this),this.depthTest=new ln(this),this.depthFunc=new un(this),this.blend=new cn(this),this.blendFunc=new hn(this),this.blendColor=new fn(this),this.blendEquation=new pn(this),this.cullFace=new dn(this),this.cullFaceSide=new mn(this),this.frontFace=new gn(this),this.program=new vn(this),this.activeTexture=new yn(this),this.viewport=new _n(this),this.bindFramebuffer=new xn(this),this.bindRenderbuffer=new bn(this),this.bindTexture=new wn(this),this.bindVertexBuffer=new kn(this),this.bindElementBuffer=new Sn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new En(this),this.pixelStoreUnpack=new In(this),this.pixelStoreUnpackPremultiplyAlpha=new Cn(this),this.pixelStoreUnpackFlipY=new An(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}return p(t,[{key:"setDefault",value:function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}},{key:"setDirty",value:function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}},{key:"createIndexBuffer",value:function(t,e){return new He(this,t,e)}},{key:"createVertexBuffer",value:function(t,e,n){return new Ye(this,t,e,n)}},{key:"createRenderbuffer",value:function(t,e,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i}},{key:"createFramebuffer",value:function(t,e,n){return new Ln(this,t,e,n)}},{key:"clear",value:function(t){var e=t.color,n=t.depth,r=this.gl,i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)}},{key:"setCullFace",value:function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}},{key:"setDepthMode",value:function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}},{key:"setStencilMode",value:function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}},{key:"setColorMode",value:function(t){u(t.blendFunction,Rn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}},{key:"unbindVAO",value:function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}]),t}(),On=p((function t(e,n,r){d(this,t),this.func=e,this.mask=n,this.range=r}));On.ReadOnly=!1,On.ReadWrite=!0,On.disabled=new On(519,On.ReadOnly,[0,1]);var zn=7680,Dn=p((function t(e,n,r,i,o,a){d(this,t),this.test=e,this.ref=n,this.mask=r,this.fail=i,this.depthFail=o,this.pass=a}));Dn.disabled=new Dn({func:519,mask:0},0,0,zn,zn,zn);var Fn,Bn=p((function t(e,n,r){d(this,t),this.enable=e,this.mode=n,this.frontFace=r}));function jn(e,n,r,i,o,a,s){for(var l=e.context,u=l.gl,c=e.useProgram("collisionBox"),h=[],f=0,p=0,d=0;d<i.length;d++){var m=i[d],g=n.getTile(m),v=g.getBucket(r);if(v){var y=m.posMatrix;0===o[0]&&0===o[1]||(y=e.translatePosMatrix(m.posMatrix,g,o,a));var _=s?v.textCollisionBox:v.iconCollisionBox,x=v.collisionCircleArray;if(x.length>0){var b=t.create(),w=y;t.mul(b,v.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(b,b,v.placementViewportMatrix),h.push({circleArray:x,circleOffset:p,transform:w,invTransform:b}),p=f+=x.length/4}_&&c.draw(l,u.LINES,On.disabled,Dn.disabled,e.colorModeForRenderPass(),Bn.disabled,Ae(y,e.transform,g),r.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,null,e.transform.zoom,null,null,_.collisionVertexBuffer)}}if(s&&h.length){var k=e.useProgram("collisionCircle"),S=new t.CollisionCircleLayoutArray;S.resize(4*f),S._trim();for(var E=0,I=0,C=h;I<C.length;I++)for(var A=C[I],P=0;P<A.circleArray.length/4;P++){var T=4*P,M=A.circleArray[T+0],L=A.circleArray[T+1],R=A.circleArray[T+2],N=A.circleArray[T+3];S.emplace(E++,M,L,R,N,0),S.emplace(E++,M,L,R,N,1),S.emplace(E++,M,L,R,N,2),S.emplace(E++,M,L,R,N,3)}(!Fn||Fn.length<2*f)&&(Fn=function(e){var n=2*e,r=new t.QuadTriangleArray;r.resize(n),r._trim();for(var i=0;i<n;i++){var o=6*i;r.uint16[o+0]=4*i+0,r.uint16[o+1]=4*i+1,r.uint16[o+2]=4*i+2,r.uint16[o+3]=4*i+2,r.uint16[o+4]=4*i+3,r.uint16[o+5]=4*i+0}return r}(f));for(var O,z=l.createIndexBuffer(Fn,!0),D=l.createVertexBuffer(S,t.collisionCircleLayout.members,!0),F=0,B=h;F<B.length;F++){var j=B[F],Z={u_matrix:j.transform,u_inv_matrix:j.invTransform,u_camera_to_center_distance:(O=e.transform).cameraToCenterDistance,u_viewport_size:[O.width,O.height]};k.draw(l,u.TRIANGLES,On.disabled,Dn.disabled,e.colorModeForRenderPass(),Bn.disabled,Z,r.id,D,z,t.SegmentVector.simpleSegment(0,2*j.circleOffset,j.circleArray.length,j.circleArray.length/2),null,e.transform.zoom,null,null,null)}D.destroy(),z.destroy()}}Bn.disabled=new Bn(!1,1029,2305),Bn.backCCW=new Bn(!0,1029,2305);var Zn=t.identity(new Float32Array(16));function Un(e,n,r,i,o,a){var s=t.getAnchorAlignment(e),l=-(s.horizontalAlign-.5)*n,u=-(s.verticalAlign-.5)*r,c=t.evaluateVariableOffset(e,i);return new t.pointGeometry((l/o+c[0])*a,(u/o+c[1])*a)}function Vn(e,n,r,i,o,a,s,l,u,c){var h=e.text.placedSymbolArray,f=e.text.dynamicLayoutVertexArray,p=e.icon.dynamicLayoutVertexArray,d={};f.clear();for(var m=0;m<h.length;m++){var g=h.get(m),v=e.allowVerticalPlacement&&!g.placedOrientation,y=g.hidden||!g.crossTileID||v?null:i[g.crossTileID];if(y){var _=new t.pointGeometry(g.anchorX,g.anchorY),x=wt(_,r?s:a),b=kt(o.cameraToCenterDistance,x.signedDistanceFromCamera),w=t.evaluateSizeForFeature(e.textSizeData,u,g)*b/t.ONE_EM;r&&(w*=e.tilePixelRatio/l);for(var k=y.width,S=y.height,E=Un(y.anchor,k,S,y.textOffset,y.textBoxScale,w),I=r?wt(_.add(E),a).point:x.point.add(n?E.rotate(-o.angle):E),C=e.allowVerticalPlacement&&g.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,A=0;A<g.numGlyphs;A++)t.addDynamicAttributes(f,I,C);c&&g.associatedIconIndex>=0&&(d[g.associatedIconIndex]={shiftedAnchor:I,angle:C})}else Lt(g.numGlyphs,f)}if(c){p.clear();for(var P=e.icon.placedSymbolArray,T=0;T<P.length;T++){var M=P.get(T);if(M.hidden)Lt(M.numGlyphs,p);else{var L=d[T];if(L)for(var R=0;R<M.numGlyphs;R++)t.addDynamicAttributes(p,L.shiftedAnchor,L.angle);else Lt(M.numGlyphs,p)}}e.icon.dynamicLayoutVertexBuffer.updateData(p)}e.text.dynamicLayoutVertexBuffer.updateData(f)}function qn(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function Gn(e,n,r,i,o,a,s,l,u,c,h,p){var d,m=e.context,g=m.gl,v=e.transform,y="map"===l,_="map"===u,x="viewport"!==l&&"point"!==r.layout.get("symbol-placement"),b=y&&!_&&!x,w=!r.layout.get("symbol-sort-key").isConstant(),k=!1,S=e.depthModeForSublayer(0,On.ReadOnly),E=r.layout.get("text-variable-anchor"),I=[],C=f(i);try{for(C.s();!(d=C.n()).done;){var A=d.value,P=n.getTile(A),T=P.getBucket(r);if(T){var M=o?T.text:T.icon;if(M&&M.segments.get().length){var L=M.programConfigurations.get(r.id),R=o||T.sdfIcons,N=o?T.textSizeData:T.iconSizeData,O=_||0!==v.pitch,z=e.useProgram(qn(R,o,T),L),D=t.evaluateSizeForZoom(N,v.zoom),F=void 0,B=void 0,j=void 0,Z=void 0,U=[0,0],V=null;if(o){if(B=P.glyphAtlasTexture,j=g.LINEAR,F=P.glyphAtlasTexture.size,T.iconsInText){U=P.imageAtlasTexture.size,V=P.imageAtlasTexture;var q="composite"===N.kind||"camera"===N.kind;Z=O||e.options.rotating||e.options.zooming||q?g.LINEAR:g.NEAREST}}else{var G=1!==r.layout.get("icon-size").constantOr(0)||T.iconsNeedLinear;B=P.imageAtlasTexture,j=R||e.options.rotating||e.options.zooming||G||O?g.LINEAR:g.NEAREST,F=P.imageAtlasTexture.size}var W=zt(P,1,e.transform.zoom),H=xt(A.posMatrix,_,y,e.transform,W),X=bt(A.posMatrix,_,y,e.transform,W),Y=E&&T.hasTextData(),$="none"!==r.layout.get("icon-text-fit")&&Y&&T.hasIconData();if(x){var K="map"===r.layout.get("text-rotation-alignment");Et(T,A.posMatrix,e,o,H,X,_,c,K)}var J=e.translatePosMatrix(A.posMatrix,P,a,s),Q=x||o&&E||$?Zn:H,tt=e.translatePosMatrix(X,P,a,s,!0),et=R&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),nt={program:z,buffers:M,uniformValues:R?T.iconsInText?Ve(N.kind,D,b,_,e,J,Q,tt,F,U):Ue(N.kind,D,b,_,e,J,Q,tt,o,F,!0):Ze(N.kind,D,b,_,e,J,Q,tt,o,F),atlasTexture:B,atlasTextureIcon:V,atlasInterpolation:j,atlasInterpolationIcon:Z,isSDF:R,hasHalo:et};if(w&&T.canOverlap){k=!0;var rt,it=M.segments.get(),ot=f(it);try{for(ot.s();!(rt=ot.n()).done;){var at=rt.value;I.push({segments:new t.SegmentVector([at]),sortKey:at.sortKey,state:nt})}}catch(ft){ot.e(ft)}finally{ot.f()}}else I.push({segments:M.segments,sortKey:0,state:nt})}}}}catch(ft){C.e(ft)}finally{C.f()}k&&I.sort((function(t,e){return t.sortKey-e.sortKey}));for(var st=0,lt=I;st<lt.length;st++){var ut=lt[st],ct=ut.state;if(m.activeTexture.set(g.TEXTURE0),ct.atlasTexture.bind(ct.atlasInterpolation,g.CLAMP_TO_EDGE),ct.atlasTextureIcon&&(m.activeTexture.set(g.TEXTURE1),ct.atlasTextureIcon&&ct.atlasTextureIcon.bind(ct.atlasInterpolationIcon,g.CLAMP_TO_EDGE)),ct.isSDF){var ht=ct.uniformValues;ct.hasHalo&&(ht.u_is_halo=1,Wn(ct.buffers,ut.segments,r,e,ct.program,S,h,p,ht)),ht.u_is_halo=0}Wn(ct.buffers,ut.segments,r,e,ct.program,S,h,p,ct.uniformValues)}}function Wn(t,e,n,r,i,o,a,s,l){var u=r.context;i.draw(u,u.gl.TRIANGLES,o,a,s,Bn.disabled,l,n.id,t.layoutVertexBuffer,t.indexBuffer,e,n.paint,r.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Hn(t,e,n,r,i,o,a){var s,l,u,c,h,p=t.context.gl,d=n.paint.get("fill-pattern"),m=d&&d.constantOr(1),g=n.getCrossfadeParameters();a?(l=m&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=p.LINES):(l=m?"fillPattern":"fill",s=p.TRIANGLES);var v,y=f(r);try{for(y.s();!(v=y.n()).done;){var _=v.value,x=e.getTile(_);if(!m||x.patternsLoaded()){var b=x.getBucket(n);if(b){var w=b.programConfigurations.get(n.id),k=t.useProgram(l,w);m&&(t.context.activeTexture.set(p.TEXTURE0),x.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),w.updatePaintBuffers(g));var S=d.constantOr(null);if(S&&x.imageAtlas){var E=x.imageAtlas,I=E.patternPositions[S.to.toString()],C=E.patternPositions[S.from.toString()];I&&C&&w.setConstantPatternPositions(I,C)}var A=t.translatePosMatrix(_.posMatrix,x,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){c=b.indexBuffer2,h=b.segments2;var P=[p.drawingBufferWidth,p.drawingBufferHeight];u="fillOutlinePattern"===l&&m?Ie(A,t,g,x,P):Ee(A,P)}else c=b.indexBuffer,h=b.segments,u=m?Se(A,t,g,x):ke(A);k.draw(t.context,s,i,t.stencilModeForClipping(_),o,Bn.disabled,u,n.id,b.layoutVertexBuffer,c,h,n.paint,t.transform.zoom,w)}}}}catch(T){y.e(T)}finally{y.f()}}function Xn(t,e,n,r,i,o,a){var s,l=t.context,u=l.gl,c=n.paint.get("fill-extrusion-pattern"),h=c.constantOr(1),p=n.getCrossfadeParameters(),d=n.paint.get("fill-extrusion-opacity"),m=f(r);try{for(m.s();!(s=m.n()).done;){var g=s.value,v=e.getTile(g),y=v.getBucket(n);if(y){var _=y.programConfigurations.get(n.id),x=t.useProgram(h?"fillExtrusionPattern":"fillExtrusion",_);h&&(t.context.activeTexture.set(u.TEXTURE0),v.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),_.updatePaintBuffers(p));var b=c.constantOr(null);if(b&&v.imageAtlas){var w=v.imageAtlas,k=w.patternPositions[b.to.toString()],S=w.patternPositions[b.from.toString()];k&&S&&_.setConstantPatternPositions(k,S)}var E=t.translatePosMatrix(g.posMatrix,v,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),I=n.paint.get("fill-extrusion-vertical-gradient"),C=h?we(E,t,I,d,g,p,v):be(E,t,I,d);x.draw(l,l.gl.TRIANGLES,i,o,a,Bn.backCCW,C,n.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,n.paint,t.transform.zoom,_)}}}catch(A){m.e(A)}finally{m.f()}}function Yn(t,e,n,r,i,o){var a=t.context,s=a.gl,l=e.fbo;if(l){var u=t.useProgram("hillshade");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l.colorAttachment.get());var c=function(t,e,n){var r=n.paint.get("hillshade-shadow-color"),i=n.paint.get("hillshade-highlight-color"),o=n.paint.get("hillshade-accent-color"),a=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);var s=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),s),u_image:0,u_latrange:Le(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),a],u_shadow:r,u_highlight:i,u_accent:o}}(t,e,n);u.draw(a,s.TRIANGLES,r,i,o,Bn.disabled,c,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function $n(e,n,r,i,o,a){var s=e.context,l=s.gl,u=n.dem;if(u&&u.data){var c=u.dim,h=u.stride,f=u.getPixels();if(s.activeTexture.set(l.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(h),n.demTexture){var p=n.demTexture;p.update(f,{premultiply:!1}),p.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else n.demTexture=new k(s,f,l.RGBA,{premultiply:!1}),n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);s.activeTexture.set(l.TEXTURE0);var d=n.fbo;if(!d){var m=new k(s,{width:c,height:c,data:null},l.RGBA);m.bind(l.LINEAR,l.CLAMP_TO_EDGE),(d=n.fbo=s.createFramebuffer(c,c,!0)).colorAttachment.set(m.texture)}s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,c,c]),e.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,o,a,Bn.disabled,function(e,n){var r=n.stride,i=t.create();return t.ortho(i,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(i,i,[0,-t.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_unpack:n.getUnpackVector()}}(n.tileID,u),r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Kn(e,n,r,i,o){var a=i.paint.get("raster-fade-duration");if(a>0){var s=t.exported.now(),l=(s-e.timeAdded)/a,u=n?(s-n.timeAdded)/a:-1,c=r.getSource(),h=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),f=!n||Math.abs(n.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),p=f&&e.refreshedUponExpiration?1:t.clamp(f?l:1-u,0,1);return e.refreshedUponExpiration&&l>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}var Jn=new t.Color(1,0,0,1),Qn=new t.Color(0,1,0,1),tr=new t.Color(0,0,1,1),er=new t.Color(1,0,1,1),nr=new t.Color(0,1,1,1);function rr(t,e,n,r){or(t,0,e+n/2,t.transform.width,n,r)}function ir(t,e,n,r){or(t,e-n/2,0,n,t.transform.height,r)}function or(t,e,n,r,i,o){var a=t.context,s=a.gl;s.enable(s.SCISSOR_TEST),s.scissor(e*t.pixelRatio,n*t.pixelRatio,r*t.pixelRatio,i*t.pixelRatio),a.clear({color:o}),s.disable(s.SCISSOR_TEST)}function ar(e,n,r){var i=e.context,o=i.gl,a=r.posMatrix,s=e.useProgram("debug"),l=On.disabled,u=Dn.disabled,c=e.colorModeForRenderPass(),h="$debug";i.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(i,o.LINE_STRIP,l,u,c,Bn.disabled,Pe(a,t.Color.red),h,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var f=n.getTileByID(r.key).latestRawTileData,p=Math.floor((f&&f.byteLength||0)/1024),d=n.getTile(r).tileSize,m=512/Math.min(d,512)*(r.overscaledZ/e.transform.zoom)*.5,g=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(g+=" => ".concat(r.overscaledZ)),function(t,e){t.initDebugOverlayCanvas();var n=t.debugOverlayCanvas,r=t.context.gl,i=t.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(e,5,5),i.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,"".concat(g," ").concat(p,"kb")),s.draw(i,o.TRIANGLES,l,u,Rn.alphaBlended,Bn.disabled,Pe(a,t.Color.transparent,m),h,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}var sr={symbol:function(e,n,r,i,o){if("translucent"===e.renderPass){var a=Dn.disabled,s=e.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(e,n,r,i,o,a,s){var l,u=n.transform,c="map"===o,h="map"===a,p=f(e);try{for(p.s();!(l=p.n()).done;){var d=l.value,m=i.getTile(d),g=m.getBucket(r);if(g&&g.text&&g.text.segments.get().length){var v=t.evaluateSizeForZoom(g.textSizeData,u.zoom),y=zt(m,1,n.transform.zoom),_=xt(d.posMatrix,h,c,n.transform,y),x="none"!==r.layout.get("icon-text-fit")&&g.hasIconData();if(v){var b=Math.pow(2,u.zoom-m.tileID.overscaledZ);Vn(g,c,h,s,u,_,d.posMatrix,b,v,x)}}}}catch(w){p.e(w)}finally{p.f()}}(i,e,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&Gn(e,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&Gn(e,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(jn(e,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),jn(e,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=!r.layout.get("circle-sort-key").isConstant();if(0!==o.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){for(var u=e.context,c=u.gl,h=e.depthModeForSublayer(0,On.ReadOnly),p=Dn.disabled,d=e.colorModeForRenderPass(),m=[],g=0;g<i.length;g++){var v=i[g],y=n.getTile(v),_=y.getBucket(r);if(_){var x=_.programConfigurations.get(r.id),b={programConfiguration:x,program:e.useProgram("circle",x),layoutVertexBuffer:_.layoutVertexBuffer,indexBuffer:_.indexBuffer,uniformValues:Ce(e,v,y,r)};if(l){var w,k=_.segments.get(),S=f(k);try{for(S.s();!(w=S.n()).done;){var E=w.value;m.push({segments:new t.SegmentVector([E]),sortKey:E.sortKey,state:b})}}catch(O){S.e(O)}finally{S.f()}}else m.push({segments:_.segments,sortKey:0,state:b})}}l&&m.sort((function(t,e){return t.sortKey-e.sortKey}));for(var I=0,C=m;I<C.length;I++){var A=C[I],P=A.state,T=P.programConfiguration,M=P.program,L=P.layoutVertexBuffer,R=P.indexBuffer,N=P.uniformValues;M.draw(u,c.TRIANGLES,h,p,d,Bn.disabled,N,r.id,L,R,A.segments,r.paint,e.transform.zoom,T)}}}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,s=Dn.disabled,l=new Rn([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,n,r){var i=t.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e.width/4,e.height/4,0,i.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(t,e,o,i)}}(o,e,r),o.clear({color:t.Color.transparent});for(var u=0;u<i.length;u++){var c=i[u];if(!n.hasRenderableParent(c)){var h=n.getTile(c),f=h.getBucket(r);if(f){var p=f.programConfigurations.get(r.id),d=e.useProgram("heatmap",p),m=e.transform.zoom;d.draw(o,a.TRIANGLES,On.disabled,s,l,Bn.disabled,Me(c.posMatrix,h,m,r.paint.get("heatmap-intensity")),r.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,r.paint,e.transform.zoom,p)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var r=e.context,i=r.gl,o=n.heatmapFbo;if(o){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new k(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,On.disabled,Dn.disabled,e.colorModeForRenderPass(),Bn.disabled,function(e,n,r,i){var o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}}(e,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,r))},line:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1)){var s,l=e.depthModeForSublayer(0,On.ReadOnly),u=e.colorModeForRenderPass(),c=r.paint.get("line-dasharray"),h=r.paint.get("line-pattern"),p=h.constantOr(1),d=r.paint.get("line-gradient"),m=r.getCrossfadeParameters(),g=p?"linePattern":c?"lineSDF":d?"lineGradient":"line",v=e.context,y=v.gl,_=!0,x=f(i);try{for(x.s();!(s=x.n()).done;){var b=s.value,w=n.getTile(b);if(!p||w.patternsLoaded()){var S=w.getBucket(r);if(S){var E=S.programConfigurations.get(r.id),I=e.context.program.get(),C=e.useProgram(g,E),A=_||C.program!==I,P=h.constantOr(null);if(P&&w.imageAtlas){var T=w.imageAtlas,M=T.patternPositions[P.to.toString()],L=T.patternPositions[P.from.toString()];M&&L&&E.setConstantPatternPositions(M,L)}var R=p?Oe(e,w,r,m):c?ze(e,w,r,c,m):d?Ne(e,w,r,S.lineClipsArray.length):Re(e,w,r);if(p)v.activeTexture.set(y.TEXTURE0),w.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),E.updatePaintBuffers(m);else if(c&&(A||e.lineAtlas.dirty))v.activeTexture.set(y.TEXTURE0),e.lineAtlas.bind(v);else if(d){var N=S.gradients[r.id],O=N.texture;if(r.gradientVersion!==N.version){var z=256;if(r.stepInterpolant){var D=n.getSource().maxzoom,F=b.canonical.z===D?Math.ceil(1<<e.transform.maxZoom-b.canonical.z):1;z=t.clamp(t.nextPowerOfTwo(S.maxLineLength/t.EXTENT*1024*F),256,v.maxTextureSize)}N.gradient=t.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:z,image:N.gradient||void 0,clips:S.lineClipsArray}),N.texture?N.texture.update(N.gradient):N.texture=new k(v,N.gradient,y.RGBA),N.version=r.gradientVersion,O=N.texture}v.activeTexture.set(y.TEXTURE0),O.bind(r.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}C.draw(v,y.TRIANGLES,l,e.stencilModeForClipping(b),u,Bn.disabled,R,r.id,S.layoutVertexBuffer,S.indexBuffer,S.segments,r.paint,e.transform.zoom,E,S.layoutVertexBuffer2),_=!1}}}}catch(B){x.e(B)}finally{x.f()}}}},fill:function(e,n,r,i){var o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),u=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===u){var c=e.depthModeForSublayer(1,"opaque"===e.renderPass?On.ReadWrite:On.ReadOnly);Hn(e,n,r,i,c,s,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){var h=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,On.ReadOnly);Hn(e,n,r,i,h,s,!0)}}},"fill-extrusion":function(t,e,n,r){var i=n.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===t.renderPass){var o=new On(t.context.gl.LEQUAL,On.ReadWrite,t.depthRangeFor3D);if(1!==i||n.paint.get("fill-extrusion-pattern").constantOr(1))Xn(t,e,n,r,o,Dn.disabled,Rn.disabled),Xn(t,e,n,r,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();Xn(t,e,n,r,o,Dn.disabled,a)}}},hillshade:function(t,e,n,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var i,o=t.context,a=t.depthModeForSublayer(0,On.ReadOnly),s=t.colorModeForRenderPass(),l="translucent"===t.renderPass?t.stencilConfigForOverlap(r):[{},r],u=h(l,2),c=u[0],p=u[1],d=f(p);try{for(d.s();!(i=d.n()).done;){var m=i.value,g=e.getTile(m);g.needsHillshadePrepare&&"offscreen"===t.renderPass?$n(t,g,n,a,Dn.disabled,s):"translucent"===t.renderPass&&Yn(t,g,n,a,c[m.overscaledZ],s)}}catch(v){d.e(v)}finally{d.f()}o.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,n,r){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")&&r.length){var i,o=t.context,a=o.gl,s=e.getSource(),l=t.useProgram("raster"),u=t.colorModeForRenderPass(),c=s instanceof V?[{},r]:t.stencilConfigForOverlap(r),p=h(c,2),d=p[0],m=p[1],g=m[m.length-1].overscaledZ,v=!t.options.moving,y=f(m);try{for(y.s();!(i=y.n()).done;){var _=i.value,x=t.depthModeForSublayer(_.overscaledZ-g,1===n.paint.get("raster-opacity")?On.ReadWrite:On.ReadOnly,a.LESS),b=e.getTile(_),w=t.transform.calculatePosMatrix(_.toUnwrapped(),v);b.registerFadeDuration(n.paint.get("raster-fade-duration"));var k=e.findLoadedParent(_,0),S=Kn(b,k,e,n,t.transform),E=void 0,I=void 0,C="nearest"===n.paint.get("raster-resampling")?a.NEAREST:a.LINEAR;o.activeTexture.set(a.TEXTURE0),b.texture.bind(C,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),o.activeTexture.set(a.TEXTURE1),k?(k.texture.bind(C,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),E=Math.pow(2,k.tileID.overscaledZ-b.tileID.overscaledZ),I=[b.tileID.canonical.x*E%1,b.tileID.canonical.y*E%1]):b.texture.bind(C,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);var A=Be(w,I||[0,0],E||1,S,n);s instanceof V?l.draw(o,a.TRIANGLES,x,Dn.disabled,u,Bn.disabled,A,n.id,s.boundsBuffer,t.quadTriangleIndexBuffer,s.boundsSegments):l.draw(o,a.TRIANGLES,x,d[_.overscaledZ],u,Bn.disabled,A,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}catch(P){y.e(P)}finally{y.f()}}},background:function(t,e,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var o=t.context,a=o.gl,s=t.transform,l=s.tileSize,u=n.paint.get("background-pattern");if(!t.isPatternMissing(u)){var c=!u&&1===r.a&&1===i&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===c){var h=Dn.disabled,p=t.depthModeForSublayer(0,"opaque"===c?On.ReadWrite:On.ReadOnly),d=t.colorModeForRenderPass(),m=t.useProgram(u?"backgroundPattern":"background"),g=s.coveringTiles({tileSize:l});u&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));var v,y=n.getCrossfadeParameters(),_=f(g);try{for(_.s();!(v=_.n()).done;){var x=v.value,b=t.transform.calculatePosMatrix(x.toUnwrapped()),w=u?Ge(b,i,t,u,{tileID:x,tileSize:l},y):qe(b,i,r);m.draw(o,a.TRIANGLES,p,h,d,Bn.disabled,w,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}catch(k){_.e(k)}finally{_.f()}}}}},debug:function(t,e,n){for(var r=0;r<n.length;r++)ar(t,e,n[r])},custom:function(t,e,n){var r=t.context,i=n.implementation;if("offscreen"===t.renderPass){var o=i.prerender;o&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),o.call(i,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(Dn.disabled);var a="3d"===i.renderingMode?new On(t.context.gl.LEQUAL,On.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,On.ReadOnly);r.setDepthMode(a),i.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}},lr=function(){function e(t,n){d(this,e),this.context=new Nn(t),this.transform=n,this._tileTextures={},this.setup(),this.numSublayers=Q.maxUnderzooming+Q.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new le,this.gpuTimers={}}return p(e,[{key:"resize",value:function(t,e,n){if(this.width=t*n,this.height=e*n,this.pixelRatio=n,this.context.viewport.set([0,0,this.width,this.height]),this.style){var r,i=f(this.style._order);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.style._layers[o].resize()}}catch(a){i.e(a)}finally{i.f()}}}},{key:"setup",value:function(){var e=this.context,n=new t.PosArray;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,de.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var r=new t.PosArray;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,de.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var i=new t.RasterBoundsArray;i.emplaceBack(0,0,0,0),i.emplaceBack(t.EXTENT,0,t.EXTENT,0),i.emplaceBack(0,t.EXTENT,0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(i,U.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.PosArray;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,de.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.LineStripIndexArray;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.TriangleIndexArray;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new k(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);var l=this.context.gl;this.stencilClearMode=new Dn({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)}},{key:"clearStencil",value:function(){var e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var r=t.create();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,On.disabled,this.stencilClearMode,Rn.disabled,Bn.disabled,Te(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}},{key:"_renderTileClippingMasks",value:function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var n=this.context,r=n.gl;this.nextStencilID+e.length>256&&this.clearStencil(),n.setColorMode(Rn.disabled),n.setDepthMode(On.disabled);var i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};var o,a=f(e);try{for(a.s();!(o=a.n()).done;){var s=o.value,l=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;i.draw(n,r.TRIANGLES,On.disabled,new Dn({func:r.ALWAYS,mask:0},l,255,r.KEEP,r.KEEP,r.REPLACE),Rn.disabled,Bn.disabled,Te(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}catch(u){a.e(u)}finally{a.f()}}}},{key:"stencilModeFor3D",value:function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new Dn({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)}},{key:"stencilModeForClipping",value:function(t){var e=this.context.gl;return new Dn({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)}},{key:"stencilConfigForOverlap",value:function(t){var e=this.context.gl,n=t.sort((function(t,e){return e.overscaledZ-t.overscaledZ})),i=n[n.length-1].overscaledZ,o=n[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var a={},s=0;s<o;s++)a[s+i]=new Dn({func:e.GEQUAL,mask:255},s+this.nextStencilID,255,e.KEEP,e.KEEP,e.REPLACE);return this.nextStencilID+=o,[a,n]}return[r({},i,Dn.disabled),n]}},{key:"colorModeForRenderPass",value:function(){var e=this.context.gl;if(this._showOverdrawInspector){var n=1/8;return new Rn([e.CONSTANT_COLOR,e.ONE],new t.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?Rn.unblended:Rn.alphaBlended}},{key:"depthModeForSublayer",value:function(t,e,n){if(!this.opaquePassEnabledForLayer())return On.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new On(n||this.context.gl.LEQUAL,e,[r,r])}},{key:"opaquePassEnabledForLayer",value:function(){return this.currentLayer<this.opaquePassCutoff}},{key:"render",value:function(e,n){var r=this;this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();var i=this.style._order,o=this.style.sourceCaches;for(var a in o){var s=o[a];s.used&&s.prepare(this.context)}var l={},u={},c={};for(var h in o){var p=o[h];l[h]=p.getVisibleCoordinates(),u[h]=l[h].slice().reverse(),c[h]=p.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var d=0;d<i.length;d++)if(this.style._layers[i[d]].is3D()){this.opaquePassCutoff=d;break}this.renderPass="offscreen";var m,g,v,y=f(i);try{for(y.s();!(m=y.n()).done;){var _=m.value,x=this.style._layers[_];if(x.hasOffscreenPass()&&!x.isHidden(this.transform.zoom)){var b=u[x.source];("custom"===x.type||b.length)&&this.renderLayer(this,o[x.source],x,b)}}}catch(A){y.e(A)}finally{y.f()}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var w=this.style._layers[i[this.currentLayer]],k=o[w.source],S=l[w.source];this._renderTileClippingMasks(w,S),this.renderLayer(this,k,w,S)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){var E=this.style._layers[i[this.currentLayer]],I=o[E.source],C=("symbol"===E.type?c:u)[E.source];this._renderTileClippingMasks(E,l[E.source]),this.renderLayer(this,I,E,C)}this.options.showTileBoundaries&&(Object.values(this.style._layers).forEach((function(t){t.source&&!t.isHidden(r.transform.zoom)&&(t.source!==(v&&v.id)&&(v=r.style.sourceCaches[t.source]),(!g||g.getSource().maxzoom<v.getSource().maxzoom)&&(g=v))})),g&&sr.debug(this,g,g.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;rr(t,t.transform.height-(e.top||0),3,Jn),rr(t,e.bottom||0,3,Qn),ir(t,e.left||0,3,tr),ir(t,t.transform.width-(e.right||0),3,er);var n=t.transform.centerPoint;!function(t,e,n,r){or(t,e-1,n-10,2,20,r),or(t,e-10,n-1,20,2,r)}(t,n.x,t.transform.height-n.y,nr)}(this),this.context.setDefault()}},{key:"renderLayer",value:function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||r.length)&&(this.id=n.id,this.gpuTimingStart(n),sr[n.type](t,e,n,r,this.style.placement.variableOffsets),this.gpuTimingEnd())}},{key:"gpuTimingStart",value:function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}}},{key:"gpuTimingEnd",value:function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}}},{key:"collectGpuTimers",value:function(){var t=this.gpuTimers;return this.gpuTimers={},t}},{key:"queryGpuTimers",value:function(t){var e={};for(var n in t){var r=t[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),e[n]=o}return e}},{key:"translatePosMatrix",value:function(e,n,r,i,o){if(!r[0]&&!r[1])return e;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var s=Math.sin(a),l=Math.cos(a);r=[r[0]*l-r[1]*s,r[0]*s+r[1]*l]}var u=[o?r[0]:zt(n,r[0],this.transform.zoom),o?r[1]:zt(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,u),c}},{key:"saveTileTexture",value:function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}},{key:"getTileTexture",value:function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null}},{key:"isPatternMissing",value:function(t){if(!t)return!1;if(!t.from||!t.to)return!0;var e=this.imageManager.getPattern(t.from.toString()),n=this.imageManager.getPattern(t.to.toString());return!e||!n}},{key:"useProgram",value:function(t,e){this.cache=this.cache||{};var n="".concat(t).concat(e?e.cacheKey:"").concat(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new _e(this.context,t,me[t],e,We[t],this._showOverdrawInspector)),this.cache[n]}},{key:"setCustomLayerDefaults",value:function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}},{key:"setBaseState",value:function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}},{key:"initDebugOverlayCanvas",value:function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new k(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}},{key:"destroy",value:function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}]),e}(),ur=function(){function e(t,n){d(this,e),this.points=t,this.planes=n}return p(e,null,[{key:"fromInvProjectionMatrix",value:function(n,r,i){var o=Math.pow(2,i),a=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(e){return t.transformMat4([],e,n)})).map((function(e){return t.scale$1([],e,1/e[3]/r*o)})),s=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(t){var e,n,r=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}([],function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],l=n[2];return t[0]=i*l-o*s,t[1]=o*a-r*l,t[2]=r*s-i*a,t}([],b([],a[t[0]],a[t[1]]),b([],a[t[2]],a[t[1]]))),i=-((e=r)[0]*(n=a[t[1]])[0]+e[1]*n[1]+e[2]*n[2]);return r.concat(i)}));return new e(a,s)}}]),e}(),cr=function(){function e(t,n){d(this,e),this.min=t,this.max=n,this.center=function(t,e,n){return t[0]=.5*e[0],t[1]=.5*e[1],t[2]=.5*e[2],t}([],function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}([],this.min,this.max))}return p(e,[{key:"quadrant",value:function(t){for(var n=[t%2==0,t<2],r=_(this.min),i=_(this.max),o=0;o<n.length;o++)r[o]=n[o]?this.min[o]:this.center[o],i[o]=n[o]?this.center[o]:this.max[o];return i[2]=this.max[2],new e(r,i)}},{key:"distanceX",value:function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}},{key:"distanceY",value:function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}},{key:"intersects",value:function(e){for(var n=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],r=!0,i=0;i<e.planes.length;i++){for(var o=e.planes[i],a=0,s=0;s<n.length;s++)t.dot(o,n[s])>=0&&a++;if(0===a)return 0;a!==n.length&&(r=!1)}if(r)return 2;for(var l=0;l<3;l++){for(var u=Number.MAX_VALUE,c=-Number.MAX_VALUE,h=0;h<e.points.length;h++){var f=e.points[h][l]-this.min[l];u=Math.min(u,f),c=Math.max(c,f)}if(c<0||u>this.max[l]-this.min[l])return 0}return 1}}]),e}(),hr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(d(this,e),isNaN(t)||t<0||isNaN(n)||n<0||isNaN(r)||r<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=n,this.left=r,this.right=i}return p(e,[{key:"interpolate",value:function(e,n,r){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,r)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,r)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,r)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,r)),this}},{key:"getCenter",value:function(e,n){var r=t.clamp((this.left+e-this.right)/2,0,e),i=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.pointGeometry(r,i)}},{key:"equals",value:function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}},{key:"clone",value:function(){return new e(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),e}(),fr=function(){function e(n,r,i,o,a){d(this,e),this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===a||!!a,this._minZoom=n||0,this._maxZoom=r||22,this._minPitch=null==i?0:i,this._maxPitch=null==o?60:o,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new hr,this._posMatrixCache={},this._alignedPosMatrixCache={}}return p(e,[{key:"clone",value:function(){var t=new e(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t}},{key:"minZoom",get:function(){return this._minZoom},set:function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}},{key:"minPitch",get:function(){return this._minPitch},set:function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new t.pointGeometry(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=function(){var e=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}(),function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);t[0]=r*l+o*s,t[1]=i*l+a*s,t[2]=r*-s+o*l,t[3]=i*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(e){var n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())}},{key:"center",get:function(){return this._center},set:function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}},{key:"padding",get:function(){return this._edgeInsets.toJSON()},set:function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}},{key:"centerPoint",get:function(){return this._edgeInsets.getCenter(this.width,this.height)}},{key:"isPaddingEqual",value:function(t){return this._edgeInsets.equals(t)}},{key:"interpolatePadding",value:function(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()}},{key:"coveringZoomLevel",value:function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}},{key:"getVisibleUnwrappedCoordinates",value:function(e){var n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new t.pointGeometry(0,0)),i=this.pointCoordinate(new t.pointGeometry(this.width,0)),o=this.pointCoordinate(new t.pointGeometry(this.width,this.height)),a=this.pointCoordinate(new t.pointGeometry(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),l=Math.floor(Math.max(r.x,i.x,o.x,a.x)),u=1,c=s-u;c<=l+u;c++)0!==c&&n.push(new t.UnwrappedTileID(c,e));return n}},{key:"coveringTiles",value:function(e){var n=this.coveringZoomLevel(e),r=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var i=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,n),a=[o*i.x,o*i.y,0],s=ur.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),l=e.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(l=n);var u=function(t){return{aabb:new cr([t*o,0,0],[(t+1)*o,o,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},c=[],h=[],f=n,p=e.reparseOverscaled?r:n;if(this._renderWorldCopies)for(var d=1;d<=3;d++)c.push(u(-d)),c.push(u(d));for(c.push(u(0));c.length>0;){var m=c.pop(),g=m.x,v=m.y,y=m.fullyVisible;if(!y){var _=m.aabb.intersects(s);if(0===_)continue;y=2===_}var x=m.aabb.distanceX(a),b=m.aabb.distanceY(a),k=Math.max(Math.abs(x),Math.abs(b)),S=3+(1<<f-m.zoom)-2;if(m.zoom===f||k>S&&m.zoom>=l)h.push({tileID:new t.OverscaledTileID(m.zoom===f?p:m.zoom,m.wrap,m.zoom,g,v),distanceSq:w([a[0]-.5-g,a[1]-.5-v])});else for(var E=0;E<4;E++){var I=(g<<1)+E%2,C=(v<<1)+(E>>1);c.push({aabb:m.aabb.quadrant(E),zoom:m.zoom+1,x:I,y:C,wrap:m.wrap,fullyVisible:y})}}return h.sort((function(t,e){return t.distanceSq-e.distanceSq})).map((function(t){return t.tileID}))}},{key:"resize",value:function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}},{key:"unmodified",get:function(){return this._unmodified}},{key:"zoomScale",value:function(t){return Math.pow(2,t)}},{key:"scaleZoom",value:function(t){return Math.log(t)/Math.LN2}},{key:"project",value:function(e){var n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.pointGeometry(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)}},{key:"unproject",value:function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}},{key:"point",get:function(){return this.project(this.center)}},{key:"setLocationAtPoint",value:function(e,n){var r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(r.x-i.x),o.y-(r.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"locationPoint",value:function(t){return this.coordinatePoint(this.locationCoordinate(t))}},{key:"pointLocation",value:function(t){return this.coordinateLocation(this.pointCoordinate(t))}},{key:"locationCoordinate",value:function(e){return t.MercatorCoordinate.fromLngLat(e)}},{key:"coordinateLocation",value:function(t){return t.toLngLat()}},{key:"pointCoordinate",value:function(e){var n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],o=r[3],a=n[1]/i,s=r[1]/o,l=n[2]/i,u=r[2]/o,c=l===u?0:(0-l)/(u-l);return new t.MercatorCoordinate(t.number(n[0]/i,r[0]/o,c)/this.worldSize,t.number(a,s,c)/this.worldSize)}},{key:"coordinatePoint",value:function(e){var n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix),new t.pointGeometry(n[0]/n[3],n[1]/n[3])}},{key:"getBounds",value:function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.pointGeometry(0,0))).extend(this.pointLocation(new t.pointGeometry(this.width,0))).extend(this.pointLocation(new t.pointGeometry(this.width,this.height))).extend(this.pointLocation(new t.pointGeometry(0,this.height)))}},{key:"getMaxBounds",value:function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}},{key:"setMaxBounds",value:function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"calculatePosMatrix",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*a,o.y*a,0]),t.scale(l,l,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(l,n?this.alignedProjMatrix:this.projMatrix,l),i[r]=new Float32Array(l),i[r]}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"_constrain",value:function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,r,i,o=-90,a=90,s=-180,l=180,u=this.size,c=this._unmodified;if(this.latRange){var h=this.latRange;o=t.mercatorYfromLat(h[1])*this.worldSize,e=(a=t.mercatorYfromLat(h[0])*this.worldSize)-o<u.y?u.y/(a-o):0}if(this.lngRange){var f=this.lngRange;s=t.mercatorXfromLng(f[0])*this.worldSize,n=(l=t.mercatorXfromLng(f[1])*this.worldSize)-s<u.x?u.x/(l-s):0}var p=this.point,d=Math.max(n||0,e||0);if(d)return this.center=this.unproject(new t.pointGeometry(n?(l+s)/2:p.x,e?(a+o)/2:p.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var m=p.y,g=u.y/2;m-g<o&&(i=o+g),m+g>a&&(i=a-g)}if(this.lngRange){var v=p.x,y=u.x/2;v-y<s&&(r=s+y),v+y>l&&(r=l-y)}void 0===r&&void 0===i||(this.center=this.unproject(new t.pointGeometry(void 0!==r?r:p.x,void 0!==i?i:p.y))),this._unmodified=c,this._constraining=!1}}},{key:"_calcMatrices",value:function(){if(this.height){var e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var n=Math.PI/2+this._pitch,r=this._fov*(.5+e.y/this.height),i=Math.sin(r)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-n-r,.01,Math.PI-.01)),o=this.point,a=o.x,s=o.y,l=1.01*(Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance),u=this.height/50,c=new Float64Array(16);t.perspective(c,this._fov,this.width/this.height,u,l),c[8]=2*-e.x/this.width,c[9]=2*e.y/this.height,t.scale(c,c,[1,-1,1]),t.translate(c,c,[0,0,-this.cameraToCenterDistance]),t.rotateX(c,c,this._pitch),t.rotateZ(c,c,this.angle),t.translate(c,c,[-a,-s,0]),this.mercatorMatrix=t.scale([],c,[this.worldSize,this.worldSize,this.worldSize]),t.scale(c,c,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize]),this.projMatrix=c,this.invProjMatrix=t.invert([],this.projMatrix);var h=this.width%2/2,f=this.height%2/2,p=Math.cos(this.angle),d=Math.sin(this.angle),m=a-Math.round(a)+p*h+d*f,g=s-Math.round(s)+p*f+d*h,v=new Float64Array(c);if(t.translate(v,v,[m>.5?m-1:m,g>.5?g-1:g,0]),this.alignedProjMatrix=v,c=t.create(),t.scale(c,c,[this.width/2,-this.height/2,1]),t.translate(c,c,[1,-1,0]),this.labelPlaneMatrix=c,c=t.create(),t.scale(c,c,[1,-1,1]),t.translate(c,c,[-1,-1,0]),t.scale(c,c,[2/this.width,2/this.height,1]),this.glCoordMatrix=c,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(c=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=c,this._posMatrixCache={},this._alignedPosMatrixCache={}}}},{key:"maxPitchScaleFactor",value:function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.pointGeometry(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance}},{key:"getCameraPoint",value:function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.pointGeometry(0,e))}},{key:"getCameraQueryGeometry",value:function(e){var n=this.getCameraPoint();if(1===e.length)return[e[0],n];var r,i=n.x,o=n.y,a=n.x,s=n.y,l=f(e);try{for(l.s();!(r=l.n()).done;){var u=r.value;i=Math.min(i,u.x),o=Math.min(o,u.y),a=Math.max(a,u.x),s=Math.max(s,u.y)}}catch(c){l.e(c)}finally{l.f()}return[new t.pointGeometry(i,o),new t.pointGeometry(a,o),new t.pointGeometry(a,s),new t.pointGeometry(i,s),new t.pointGeometry(i,o)]}}]),e}(),pr=function(){function e(n){d(this,e),this._hashName=n&&encodeURIComponent(n),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(t,e){var n=!1,r=null,i=function e(){r=null,n&&(t(),r=setTimeout(e,300),n=!1)};return function(){return n=!0,r||i(),r}}(this._updateHashUnthrottled.bind(this))}return p(e,[{key:"addTo",value:function(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}},{key:"remove",value:function(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}},{key:"getHashString",value:function(t){var e=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(e.lng*i)/i,a=Math.round(e.lat*i)/i,s=this._map.getBearing(),l=this._map.getPitch(),u="";if(u+=t?"/".concat(o,"/").concat(a,"/").concat(n):"".concat(n,"/").concat(a,"/").concat(o),(s||l)&&(u+="/"+Math.round(10*s)/10),l&&(u+="/".concat(Math.round(l))),this._hashName){var c=this._hashName,h=!1,f=window.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===c?(h=!0,"".concat(e,"=").concat(u)):t})).filter((function(t){return t}));return h||f.push("".concat(c,"=").concat(u)),"#".concat(f.join("&"))}return"#".concat(u)}},{key:"_getCurrentHash",value:function(){var t,e=this,n=window.location.hash.replace("#","");return this._hashName?(n.split("&").map((function(t){return t.split("=")})).forEach((function(n){n[0]===e._hashName&&(t=n)})),(t&&t[1]||"").split("/")):n.split("/")}},{key:"_onHashChange",value:function(){var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(t){return isNaN(t)}))){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1}},{key:"_updateHashUnthrottled",value:function(){var t=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,t)}catch(t){}}}]),e}(),dr={linearity:.3,easing:t.bezier(0,0,.3,1)},mr=t.extend({deceleration:2500,maxSpeed:1400},dr),gr=t.extend({deceleration:20,maxSpeed:1400},dr),vr=t.extend({deceleration:1e3,maxSpeed:360},dr),yr=t.extend({deceleration:1e3,maxSpeed:90},dr),_r=function(){function e(t){d(this,e),this._map=t,this.clear()}return p(e,[{key:"clear",value:function(){this._inertiaBuffer=[]}},{key:"record",value:function(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:e})}},{key:"_drainInertiaBuffer",value:function(){for(var e=this._inertiaBuffer,n=t.exported.now();e.length>0&&n-e[0].time>160;)e.shift()}},{key:"_onMoveEnd",value:function(e){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){var n,r={zoom:0,bearing:0,pitch:0,pan:new t.pointGeometry(0,0),pinchAround:void 0,around:void 0},i=f(this._inertiaBuffer);try{for(i.s();!(n=i.n()).done;){var o=n.value.settings;r.zoom+=o.zoomDelta||0,r.bearing+=o.bearingDelta||0,r.pitch+=o.pitchDelta||0,o.panDelta&&r.pan._add(o.panDelta),o.around&&(r.around=o.around),o.pinchAround&&(r.pinchAround=o.pinchAround)}}catch(d){i.e(d)}finally{i.f()}var a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(r.pan.mag()){var l=br(r.pan.mag(),a,t.extend({},mr,e||{}));s.offset=r.pan.mult(l.amount/r.pan.mag()),s.center=this._map.transform.center,xr(s,l)}if(r.zoom){var u=br(r.zoom,a,gr);s.zoom=this._map.transform.zoom+u.amount,xr(s,u)}if(r.bearing){var c=br(r.bearing,a,vr);s.bearing=this._map.transform.bearing+t.clamp(c.amount,-179,179),xr(s,c)}if(r.pitch){var h=br(r.pitch,a,yr);s.pitch=this._map.transform.pitch+h.amount,xr(s,h)}if(s.zoom||s.bearing){var p=void 0===r.pinchAround?r.around:r.pinchAround;s.around=p?this._map.unproject(p):this._map.getCenter()}return this.clear(),t.extend(s,{noMoveStart:!0})}}}]),e}();function xr(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function br(e,n,r){var i=r.maxSpeed,o=r.linearity,a=r.deceleration,s=t.clamp(e*o/(n/1e3),-i,i),l=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}var wr=function(e){m(r,e);var n=g(r);function r(e,i,o){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};d(this,r);var l=c.mousePos(i.getCanvasContainer(),o),u=i.unproject(l);return(a=n.call(this,e,t.extend({point:l,lngLat:u,originalEvent:o},s)))._defaultPrevented=!1,a.target=i,a}return p(r,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),r}(t.Event),kr=function(e){m(r,e);var n=g(r);function r(e,i,o){var a;d(this,r);var s="touchend"===e?o.changedTouches:o.touches,l=c.touchPos(i.getCanvasContainer(),s),u=l.map((function(t){return i.unproject(t)})),h=l.reduce((function(t,e,n,r){return t.add(e.div(r.length))}),new t.pointGeometry(0,0));return(a=n.call(this,e,{points:l,point:h,lngLats:u,lngLat:i.unproject(h),originalEvent:o}))._defaultPrevented=!1,a}return p(r,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),r}(t.Event),Sr=function(t){m(n,t);var e=g(n);function n(t,r,i){var o;return d(this,n),(o=e.call(this,t,{originalEvent:i}))._defaultPrevented=!1,o}return p(n,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),n}(t.Event),Er=function(){function t(e,n){d(this,t),this._map=e,this._clickTolerance=n.clickTolerance}return p(t,[{key:"reset",value:function(){delete this._mousedownPos}},{key:"wheel",value:function(t){return this._firePreventable(new Sr(t.type,this._map,t))}},{key:"mousedown",value:function(t,e){return this._mousedownPos=e,this._firePreventable(new wr(t.type,this._map,t))}},{key:"mouseup",value:function(t){this._map.fire(new wr(t.type,this._map,t))}},{key:"click",value:function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new wr(t.type,this._map,t))}},{key:"dblclick",value:function(t){return this._firePreventable(new wr(t.type,this._map,t))}},{key:"mouseover",value:function(t){this._map.fire(new wr(t.type,this._map,t))}},{key:"mouseout",value:function(t){this._map.fire(new wr(t.type,this._map,t))}},{key:"touchstart",value:function(t){return this._firePreventable(new kr(t.type,this._map,t))}},{key:"touchmove",value:function(t){this._map.fire(new kr(t.type,this._map,t))}},{key:"touchend",value:function(t){this._map.fire(new kr(t.type,this._map,t))}},{key:"touchcancel",value:function(t){this._map.fire(new kr(t.type,this._map,t))}},{key:"_firePreventable",value:function(t){if(this._map.fire(t),t.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),t}(),Ir=function(){function t(e){d(this,t),this._map=e}return p(t,[{key:"reset",value:function(){this._delayContextMenu=!1,delete this._contextMenuEvent}},{key:"mousemove",value:function(t){this._map.fire(new wr(t.type,this._map,t))}},{key:"mousedown",value:function(){this._delayContextMenu=!0}},{key:"mouseup",value:function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new wr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}},{key:"contextmenu",value:function(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new wr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),t}(),Cr=function(){function e(t,n){d(this,e),this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=n.clickTolerance||1}return p(e,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1)}},{key:"mousedown",value:function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(c.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)}},{key:"mousemoveWindow",value:function(t,e){if(this._active){var n=e;if(!(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=n,this._box||(this._box=c.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var i=Math.min(r.x,n.x),o=Math.max(r.x,n.x),a=Math.min(r.y,n.y),s=Math.max(r.y,n.y);c.setTransform(this._box,"translate(".concat(i,"px,").concat(a,"px)")),this._box.style.width=o-i+"px",this._box.style.height=s-a+"px"}}}},{key:"mouseupWindow",value:function(e,n){var r=this;if(this._active&&0===e.button){var i=this._startPos,o=n;if(this.reset(),c.suppressClick(),i.x!==o.x||i.y!==o.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:function(t){return t.fitScreenCoordinates(i,o,r._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",e)}}},{key:"keydown",value:function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}},{key:"reset",value:function(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(c.remove(this._box),this._box=null),c.enableDrag(),delete this._startPos,delete this._lastPos}},{key:"_fireEvent",value:function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))}}]),e}();function Ar(t,e){for(var n={},r=0;r<t.length;r++)n[t[r].identifier]=e[r];return n}var Pr=function(){function e(t){d(this,e),this.reset(),this.numTouches=t.numTouches}return p(e,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(e,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=function(e){var n,r=new t.pointGeometry(0,0),i=f(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;r._add(o)}}catch(a){i.e(a)}finally{i.f()}return r.div(e.length)}(n),this.touches=Ar(r,n)))}},{key:"touchmove",value:function(t,e,n){if(!this.aborted&&this.centroid){var r=Ar(n,e);for(var i in this.touches){var o=this.touches[i],a=r[i];(!a||a.dist(o)>30)&&(this.aborted=!0)}}}},{key:"touchend",value:function(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}}}]),e}(),Tr=function(){function t(e){d(this,t),this.singleTap=new Pr(e),this.numTaps=e.numTaps,this.reset()}return p(t,[{key:"reset",value:function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(t,e,n){this.singleTap.touchstart(t,e,n)}},{key:"touchmove",value:function(t,e,n){this.singleTap.touchmove(t,e,n)}},{key:"touchend",value:function(t,e,n){var r=this.singleTap.touchend(t,e,n);if(r){var i=t.timeStamp-this.lastTime<500,o=!this.lastTap||this.lastTap.dist(r)<30;if(i&&o||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}]),t}(),Mr=function(){function t(){d(this,t),this._zoomIn=new Tr({numTouches:1,numTaps:2}),this._zoomOut=new Tr({numTouches:2,numTaps:1}),this.reset()}return p(t,[{key:"reset",value:function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}},{key:"touchstart",value:function(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)}},{key:"touchmove",value:function(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)}},{key:"touchend",value:function(t,e,n){var r=this,i=this._zoomIn.touchend(t,e,n),o=this._zoomOut.touchend(t,e,n);return i?(this._active=!0,t.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(i)},{originalEvent:t})}}):o?(this._active=!0,t.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(o)},{originalEvent:t})}}):void 0}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),t}(),Lr={0:1,2:2},Rr=function(){function t(e){d(this,t),this.reset(),this._clickTolerance=e.clickTolerance||1}return p(t,[{key:"reset",value:function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}},{key:"_correctButton",value:function(t,e){return!1}},{key:"_move",value:function(t,e){return{}}},{key:"mousedown",value:function(t,e){if(!this._lastPoint){var n=c.mouseButton(t);this._correctButton(t,n)&&(this._lastPoint=e,this._eventButton=n)}}},{key:"mousemoveWindow",value:function(t,e){var n=this._lastPoint;if(n)if(t.preventDefault(),function(t,e){var n=Lr[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)}},{key:"mouseupWindow",value:function(t){this._lastPoint&&c.mouseButton(t)===this._eventButton&&(this._moved&&c.suppressClick(),this.reset())}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),t}(),Nr=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"mousedown",value:function(t,e){a(s(n.prototype),"mousedown",this).call(this,t,e),this._lastPoint&&(this._active=!0)}},{key:"_correctButton",value:function(t,e){return 0===e&&!t.ctrlKey}},{key:"_move",value:function(t,e){return{around:e,panDelta:e.sub(t)}}}]),n}(Rr),Or=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_correctButton",value:function(t,e){return 0===e&&t.ctrlKey||2===e}},{key:"_move",value:function(t,e){var n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}}},{key:"contextmenu",value:function(t){t.preventDefault()}}]),n}(Rr),zr=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"_correctButton",value:function(t,e){return 0===e&&t.ctrlKey||2===e}},{key:"_move",value:function(t,e){var n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}}},{key:"contextmenu",value:function(t){t.preventDefault()}}]),n}(Rr),Dr=function(){function e(t){d(this,e),this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()}return p(e,[{key:"reset",value:function(){this._active=!1,this._touches={},this._sum=new t.pointGeometry(0,0)}},{key:"touchstart",value:function(t,e,n){return this._calculateTransform(t,e,n)}},{key:"touchmove",value:function(t,e,n){if(this._active&&!(n.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,n)}},{key:"touchend",value:function(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"_calculateTransform",value:function(e,n,r){r.length>0&&(this._active=!0);var i=Ar(r,n),o=new t.pointGeometry(0,0),a=new t.pointGeometry(0,0),s=0;for(var l in i){var u=i[l],c=this._touches[l];c&&(o._add(u),a._add(u.sub(c)),s++,i[l]=u)}if(this._touches=i,!(s<this._minTouches)&&a.mag()){var h=a.div(s);return this._sum._add(h),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:h}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Fr=function(){function t(){d(this,t),this.reset()}return p(t,[{key:"reset",value:function(){this._active=!1,delete this._firstTwoTouches}},{key:"_start",value:function(t){}},{key:"_move",value:function(t,e,n){return{}}},{key:"touchstart",value:function(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))}},{key:"touchmove",value:function(t,e,n){if(this._firstTwoTouches){t.preventDefault();var r=h(this._firstTwoTouches,2),i=r[0],o=r[1],a=Br(n,e,i),s=Br(n,e,o);if(a&&s){var l=this._aroundCenter?null:a.add(s).div(2);return this._move([a,s],l,t)}}}},{key:"touchend",value:function(t,e,n){if(this._firstTwoTouches){var r=h(this._firstTwoTouches,2),i=r[0],o=r[1],a=Br(n,e,i),s=Br(n,e,o);a&&s||(this._active&&c.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),t}();function Br(t,e,n){for(var r=0;r<t.length;r++)if(t[r].identifier===n)return e[r]}function jr(t,e){return Math.log(t/e)/Math.LN2}var Zr=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"reset",value:function(){a(s(n.prototype),"reset",this).call(this),delete this._distance,delete this._startDistance}},{key:"_start",value:function(t){this._startDistance=this._distance=t[0].dist(t[1])}},{key:"_move",value:function(t,e){var n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(jr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:jr(this._distance,n),pinchAround:e}}}]),n}(Fr);function Ur(t,e){return 180*t.angleWith(e)/Math.PI}var Vr=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"reset",value:function(){a(s(n.prototype),"reset",this).call(this),delete this._minDiameter,delete this._startVector,delete this._vector}},{key:"_start",value:function(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}},{key:"_move",value:function(t,e){var n=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ur(this._vector,n),pinchAround:e}}},{key:"_isBelowThreshold",value:function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360,n=Ur(t,this._startVector);return Math.abs(n)<e}}]),n}(Fr);function qr(t){return Math.abs(t.y)>Math.abs(t.x)}var Gr=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"reset",value:function(){a(s(n.prototype),"reset",this).call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints}},{key:"_start",value:function(t){this._lastPoints=t,qr(t[0].sub(t[1]))&&(this._valid=!1)}},{key:"_move",value:function(t,e,n){var r=t[0].sub(this._lastPoints[0]),i=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,i,n.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(r.y+i.y)/2*-.5}}},{key:"gestureBeginsVertically",value:function(t,e,n){if(void 0!==this._valid)return this._valid;var r=t.mag()>=2,i=e.mag()>=2;if(r||i){if(!r||!i)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;var o=t.y>0==e.y>0;return qr(t)&&qr(e)&&o}}}]),n}(Fr),Wr={panStep:100,bearingStep:15,pitchStep:10},Hr=function(){function t(){d(this,t);var e=Wr;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}return p(t,[{key:"reset",value:function(){this._active=!1}},{key:"keydown",value:function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var n=0,r=0,i=0,o=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:t.shiftKey?r=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?r=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?i=-1:(t.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(r=0,i=0),{cameraAnimation:function(s){var l=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:Xr,zoom:n?Math.round(l)+n*(t.shiftKey?2:1):l,bearing:s.getBearing()+r*e._bearingStep,pitch:s.getPitch()+i*e._pitchStep,offset:[-o*e._panStep,-a*e._panStep],center:s.getCenter()},{originalEvent:t})}}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}},{key:"disableRotation",value:function(){this._rotationDisabled=!0}},{key:"enableRotation",value:function(){this._rotationDisabled=!1}}]),t}();function Xr(t){return t*(2-t)}var Yr=4.000244140625,$r=function(){function e(n,r){d(this,e),this._map=n,this._el=n.getCanvasContainer(),this._handler=r,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout"],this)}return p(e,[{key:"setZoomRate",value:function(t){this._defaultZoomRate=t}},{key:"setWheelZoomRate",value:function(t){this._wheelZoomRate=t}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active||void 0!==this._finishTimeout}},{key:"isZooming",value:function(){return!!this._zooming}},{key:"enable",value:function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1)}},{key:"wheel",value:function(e){if(this.isEnabled()){var n=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,r=t.exported.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%Yr==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}}},{key:"_onTimeout",value:function(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}},{key:"_start",value:function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var n=c.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(n)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}}},{key:"renderFrame",value:function(){var e=this;if(this._frameId&&(this._frameId=null,this.isActive())){var n=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>Yr?this._wheelZoomRate:this._defaultZoomRate,i=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==i&&(i=1/i);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a,s="number"==typeof this._targetZoom?this._targetZoom:n.zoom,l=this._startZoom,u=this._easing,c=!1;if("wheel"===this._type&&l&&u){var h=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),f=u(h);a=t.number(l,s,f),h<1?this._frameId||(this._frameId=!0):c=!0}else a=s,c=!0;return this._active=!0,c&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._zooming=!1,e._handler._triggerRenderFrame(),delete e._targetZoom,delete e._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!c,zoomDelta:a-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}}},{key:"_smoothOutEasing",value:function(e){var n=t.ease;if(this._prevEase){var r=this._prevEase,i=(t.exported.now()-r.start)/r.duration,o=r.easing(i+.01)-r.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=t.bezier(a,s,.25,1)}return this._prevEase={start:t.exported.now(),duration:e,easing:n},n}},{key:"reset",value:function(){this._active=!1}}]),e}(),Kr=function(){function t(e,n){d(this,t),this._clickZoom=e,this._tapZoom=n}return p(t,[{key:"enable",value:function(){this._clickZoom.enable(),this._tapZoom.enable()}},{key:"disable",value:function(){this._clickZoom.disable(),this._tapZoom.disable()}},{key:"isEnabled",value:function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}},{key:"isActive",value:function(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}]),t}(),Jr=function(){function t(){d(this,t),this.reset()}return p(t,[{key:"reset",value:function(){this._active=!1}},{key:"dblclick",value:function(t,e){return t.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),t}(),Qr=function(){function t(){d(this,t),this._tap=new Tr({numTouches:1,numTaps:1}),this.reset()}return p(t,[{key:"reset",value:function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}},{key:"touchstart",value:function(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))}},{key:"touchmove",value:function(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var r=e[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(t,e,n)}},{key:"touchend",value:function(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),t}(),ti=function(){function t(e,n,r){d(this,t),this._el=e,this._mousePan=n,this._touchPan=r}return p(t,[{key:"enable",value:function(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}},{key:"disable",value:function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}},{key:"isEnabled",value:function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}},{key:"isActive",value:function(){return this._mousePan.isActive()||this._touchPan.isActive()}}]),t}(),ei=function(){function t(e,n,r){d(this,t),this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=n,this._mousePitch=r}return p(t,[{key:"enable",value:function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}},{key:"disable",value:function(){this._mouseRotate.disable(),this._mousePitch.disable()}},{key:"isEnabled",value:function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}},{key:"isActive",value:function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}]),t}(),ni=function(){function t(e,n,r,i){d(this,t),this._el=e,this._touchZoom=n,this._touchRotate=r,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}return p(t,[{key:"enable",value:function(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}},{key:"disable",value:function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this._rotationDisabled=!0,this._touchRotate.disable()}},{key:"enableRotation",value:function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}]),t}(),ri=function(t){return t.zoom||t.drag||t.pitch||t.rotate},ii=function(t){m(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n)}(t.Event);function oi(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}var ai=function(){function e(n,r){d(this,e),this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new _r(n),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(r),t.bindAll(["handleEvent","handleWindowEvent"],this);var i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[window,"blur",void 0]];var o,a=f(this._listeners);try{for(a.s();!(o=a.n()).done;){var s=h(o.value,3),l=s[0],u=s[1],p=s[2];c.addEventListener(l,u,l===document?this.handleWindowEvent:this.handleEvent,p)}}catch(m){a.e(m)}finally{a.f()}}return p(e,[{key:"destroy",value:function(){var t,e=f(this._listeners);try{for(e.s();!(t=e.n()).done;){var n=h(t.value,3),r=n[0],i=n[1],o=n[2];c.removeEventListener(r,i,r===document?this.handleWindowEvent:this.handleEvent,o)}}catch(a){e.e(a)}finally{e.f()}}},{key:"_addDefaultHandlers",value:function(t){var e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new Er(e,t));var r=e.boxZoom=new Cr(e,t);this._add("boxZoom",r);var i=new Mr,o=new Jr;e.doubleClickZoom=new Kr(o,i),this._add("tapZoom",i),this._add("clickZoom",o);var a=new Qr;this._add("tapDragZoom",a);var s=e.touchPitch=new Gr;this._add("touchPitch",s);var l=new Or(t),u=new zr(t);e.dragRotate=new ei(t,l,u),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]);var c=new Nr(t),h=new Dr(t);e.dragPan=new ti(n,c,h),this._add("mousePan",c),this._add("touchPan",h,["touchZoom","touchRotate"]);var f=new Vr,p=new Zr;e.touchZoomRotate=new ni(n,p,f,a),this._add("touchRotate",f,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]);var d=e.scrollZoom=new $r(e,this);this._add("scrollZoom",d,["mousePan"]);var m=e.keyboard=new Hr;this._add("keyboard",m),this._add("blockableMapEvent",new Ir(e));for(var g=0,v=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];g<v.length;g++){var y=v[g];t.interactive&&t[y]&&e[y].enable(t[y])}}},{key:"_add",value:function(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e}},{key:"stop",value:function(t){if(!this._updatingCamera){var e,n=f(this._handlers);try{for(n.s();!(e=n.n()).done;)e.value.handler.reset()}catch(r){n.e(r)}finally{n.f()}this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}},{key:"isActive",value:function(){var t,e=f(this._handlers);try{for(e.s();!(t=e.n()).done;)if(t.value.handler.isActive())return!0}catch(n){e.e(n)}finally{e.f()}return!1}},{key:"isZooming",value:function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this._eventsInProgress.rotate}},{key:"isMoving",value:function(){return Boolean(ri(this._eventsInProgress))||this.isZooming()}},{key:"_blockedByActive",value:function(t,e,n){for(var r in t)if(r!==n&&(!e||e.indexOf(r)<0))return!0;return!1}},{key:"handleWindowEvent",value:function(t){this.handleEvent(t,"".concat(t.type,"Window"))}},{key:"_getMapTouches",value:function(t){var e,n=[],r=f(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;this._el.contains(i.target)&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"handleEvent",value:function(t,e){if("blur"!==t.type){this._updatingCamera=!0;var n,r="renderFrame"===t.type?void 0:t,i={needsRenderFrame:!1},o={},a={},s=t.touches,l=s?this._getMapTouches(s):void 0,u=l?c.touchPos(this._el,l):c.mousePos(this._el,t),h=f(this._handlers);try{for(h.s();!(n=h.n()).done;){var p=n.value,d=p.handlerName,m=p.handler,g=p.allowed;if(m.isEnabled()){var v=void 0;this._blockedByActive(a,g,d)?m.reset():m[e||t.type]&&(v=m[e||t.type](t,u,l),this.mergeHandlerResult(i,o,v,d,r),v&&v.needsRenderFrame&&this._triggerRenderFrame()),(v||m.isActive())&&(a[d]=m)}}}catch(b){h.e(b)}finally{h.f()}var y={};for(var _ in this._previousActiveHandlers)a[_]||(y[_]=r);this._previousActiveHandlers=a,(Object.keys(y).length||oi(i))&&(this._changes.push([i,o,y]),this._triggerRenderFrame()),(Object.keys(a).length||oi(i))&&this._map._stop(!0),this._updatingCamera=!1;var x=i.cameraAnimation;x&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],x(this._map))}else this.stop(!0)}},{key:"mergeHandlerResult",value:function(e,n,r,i,o){if(r){t.extend(e,r);var a={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=a),void 0!==r.panDelta&&(n.drag=a),void 0!==r.pitchDelta&&(n.pitch=a),void 0!==r.bearingDelta&&(n.rotate=a)}}},{key:"_applyChanges",value:function(){var e,n={},r={},i={},o=f(this._changes);try{for(o.s();!(e=o.n()).done;){var a=h(e.value,3),s=a[0],l=a[1],u=a[2];s.panDelta&&(n.panDelta=(n.panDelta||new t.pointGeometry(0,0))._add(s.panDelta)),s.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(n.around=s.around),void 0!==s.pinchAround&&(n.pinchAround=s.pinchAround),s.noInertia&&(n.noInertia=s.noInertia),t.extend(r,l),t.extend(i,u)}}catch(c){o.e(c)}finally{o.f()}this._updateMapTransform(n,r,i),this._changes=[]}},{key:"_updateMapTransform",value:function(t,e,n){var r=this._map,i=r.transform;if(!oi(t))return this._fireEvents(e,n,!0);var o=t.panDelta,a=t.zoomDelta,s=t.bearingDelta,l=t.pitchDelta,u=t.around,c=t.pinchAround;void 0!==c&&(u=c),r._stop(!0),u=u||r.transform.centerPoint;var h=i.pointLocation(o?u.sub(o):u);s&&(i.bearing+=s),l&&(i.pitch+=l),a&&(i.zoom+=a),i.setLocationAtPoint(h,u),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,n,!0)}},{key:"_fireEvents",value:function(e,n,r){var i=this,o=ri(this._eventsInProgress),a=ri(e),s={};for(var l in e){var u=e[l].originalEvent;this._eventsInProgress[l]||(s["".concat(l,"start")]=u),this._eventsInProgress[l]=e[l]}for(var c in!o&&a&&this._fireEvent("movestart",a.originalEvent),s)this._fireEvent(c,s[c]);for(var h in a&&this._fireEvent("move",a.originalEvent),e){var f=e[h].originalEvent;this._fireEvent(h,f)}var p,d={};for(var m in this._eventsInProgress){var g=this._eventsInProgress[m],v=g.handlerName,y=g.originalEvent;this._handlersById[v].isActive()||(delete this._eventsInProgress[m],p=n[v]||y,d["".concat(m,"end")]=p)}for(var _ in d)this._fireEvent(_,d[_]);var x=ri(this._eventsInProgress);if(r&&(o||a)&&!x){this._updatingCamera=!0;var b=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),w=function(t){return 0!==t&&-i._bearingSnap<t&&t<i._bearingSnap};b?(w(b.bearing||this._map.getBearing())&&(b.bearing=0),this._map.easeTo(b,{originalEvent:p})):(this._map.fire(new t.Event("moveend",{originalEvent:p})),w(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}},{key:"_fireEvent",value:function(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))}},{key:"_requestFrame",value:function(){var t=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(e){delete t._frameId,t.handleEvent(new ii("renderFrame",{timeStamp:e})),t._applyChanges()}))}},{key:"_triggerRenderFrame",value:function(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}]),e}(),si={extend:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.extend.apply(t,[e].concat(r))},run:function(t){t()},logToElement:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"log",r=window.document.getElementById(n);r&&(e&&(r.innerHTML=""),r.innerHTML+="<br>".concat(t))}},li=function(e){m(r,e);var n=g(r);function r(e,o){var a;return d(this,r),(a=n.call(this))._moving=!1,a._zooming=!1,a.transform=e,a._bearingSnap=o.bearingSnap,t.bindAll(["_renderFrameCallback"],i(a)),a}return p(r,[{key:"getCenter",value:function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}},{key:"setCenter",value:function(t,e){return this.jumpTo({center:t},e)}},{key:"panBy",value:function(e,n,r){return e=t.pointGeometry.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)}},{key:"panTo",value:function(e,n,r){return this.easeTo(t.extend({center:e},n),r)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"setZoom",value:function(t,e){return this.jumpTo({zoom:t},e),this}},{key:"zoomTo",value:function(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)}},{key:"zoomIn",value:function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}},{key:"zoomOut",value:function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"setBearing",value:function(t,e){return this.jumpTo({bearing:t},e),this}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(t,e){return this.jumpTo({padding:t},e),this}},{key:"rotateTo",value:function(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)}},{key:"resetNorth",value:function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this}},{key:"resetNorthPitch",value:function(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this}},{key:"snapToNorth",value:function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setPitch",value:function(t,e){return this.jumpTo({pitch:t},e),this}},{key:"cameraForBounds",value:function(e,n){e=t.LngLatBounds.convert(e);var r=n&&n.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),r,n)}},{key:"_cameraForBoxAndBearing",value:function(e,n,r,i){var o={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=t.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){var a=i.padding;i.padding={top:a,bottom:a,right:a,left:a}}i.padding=t.extend(o,i.padding);var s=this.transform,l=s.padding,u=s.project(t.LngLat.convert(e)),c=s.project(t.LngLat.convert(n)),h=u.rotate(-r*Math.PI/180),f=c.rotate(-r*Math.PI/180),p=new t.pointGeometry(Math.max(h.x,f.x),Math.max(h.y,f.y)),d=new t.pointGeometry(Math.min(h.x,f.x),Math.min(h.y,f.y)),m=p.sub(d),g=(s.width-(l.left+l.right+i.padding.left+i.padding.right))/m.x,v=(s.height-(l.top+l.bottom+i.padding.top+i.padding.bottom))/m.y;if(!(v<0||g<0)){var y=Math.min(s.scaleZoom(s.scale*Math.min(g,v)),i.maxZoom),_=t.pointGeometry.convert(i.offset),x=new t.pointGeometry((i.padding.left-i.padding.right)/2,(i.padding.top-i.padding.bottom)/2).rotate(r*Math.PI/180),b=_.add(x).mult(s.scale/s.zoomScale(y));return{center:s.unproject(u.add(c).div(2).sub(b)),zoom:y,bearing:r}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}},{key:"fitBounds",value:function(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)}},{key:"fitScreenCoordinates",value:function(e,n,r,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.pointGeometry.convert(e)),this.transform.pointLocation(t.pointGeometry.convert(n)),r,i),i,o)}},{key:"_fitInternal",value:function(e,n,r){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}},{key:"jumpTo",value:function(e,n){this.stop();var r=this.transform,i=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))}},{key:"easeTo",value:function(e,n){var r=this;this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.exported.prefersReducedMotion)&&(e.duration=0);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),l=this.getPadding(),u="zoom"in e?+e.zoom:o,c="bearing"in e?this._normalizeBearing(e.bearing,a):a,h="pitch"in e?+e.pitch:s,f="padding"in e?e.padding:i.padding,p=t.pointGeometry.convert(e.offset),d=i.centerPoint.add(p),m=i.pointLocation(d),g=t.LngLat.convert(e.center||m);this._normalizeCenter(g);var v,y,_=i.project(m),x=i.project(g).sub(_),b=i.zoomScale(u-o);e.around&&(v=t.LngLat.convert(e.around),y=i.locationPoint(v));var w={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||u!==o,this._rotating=this._rotating||a!==c,this._pitching=this._pitching||h!==s,this._padding=!i.isPaddingEqual(f),this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,w),this._ease((function(e){if(r._zooming&&(i.zoom=t.number(o,u,e)),r._rotating&&(i.bearing=t.number(a,c,e)),r._pitching&&(i.pitch=t.number(s,h,e)),r._padding&&(i.interpolatePadding(l,f,e),d=i.centerPoint.add(p)),v)i.setLocationAtPoint(v,y);else{var m=i.zoomScale(i.zoom-o),g=u>o?Math.min(2,b):Math.max(.5,b),w=Math.pow(g,1-e),k=i.unproject(_.add(x.mult(e*w)).mult(m));i.setLocationAtPoint(i.renderWorldCopies?k.wrap():k,d)}r._fireMoveEvents(n)}),(function(t){r._afterEase(n,t)}),e),this}},{key:"_prepareEase",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,n||r.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!r.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new t.Event("pitchstart",e))}},{key:"_fireMoveEvents",value:function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}},{key:"_afterEase",value:function(e,n){if(!this._easeId||!n||this._easeId!==n){delete this._easeId;var r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new t.Event("zoomend",e)),i&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}}},{key:"flyTo",value:function(e,n){var r=this;if(!e.essential&&t.exported.prefersReducedMotion){var i=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var o=this.transform,a=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u=this.getPadding(),c="zoom"in e?t.clamp(+e.zoom,o.minZoom,o.maxZoom):a,h="bearing"in e?this._normalizeBearing(e.bearing,s):s,f="pitch"in e?+e.pitch:l,p="padding"in e?e.padding:o.padding,d=o.zoomScale(c-a),m=t.pointGeometry.convert(e.offset),g=o.centerPoint.add(m),v=o.pointLocation(g),y=t.LngLat.convert(e.center||v);this._normalizeCenter(y);var _=o.project(v),x=o.project(y).sub(_),b=e.curve,w=Math.max(o.width,o.height),k=w/d,S=x.mag();if("minZoom"in e){var E=t.clamp(Math.min(e.minZoom,a,c),o.minZoom,o.maxZoom),I=w/o.zoomScale(E-a);b=Math.sqrt(I/S*2)}var C=b*b;function A(t){var e=(k*k-w*w+(t?-1:1)*C*C*S*S)/(2*(t?k:w)*C*S);return Math.log(Math.sqrt(e*e+1)-e)}function P(t){return(Math.exp(t)-Math.exp(-t))/2}function T(t){return(Math.exp(t)+Math.exp(-t))/2}var M=A(0),L=function(t){return T(M)/T(M+b*t)},R=function(t){return w*((T(M)*(P(e=M+b*t)/T(e))-P(M))/C)/S;var e},N=(A(1)-M)/b;if(Math.abs(S)<1e-6||!isFinite(N)){if(Math.abs(w-k)<1e-6)return this.easeTo(e,n);var O=k<w?-1:1;N=Math.abs(Math.log(k/w))/b,R=function(){return 0},L=function(t){return Math.exp(O*b*t)}}return e.duration="duration"in e?+e.duration:1e3*N/("screenSpeed"in e?+e.screenSpeed/b:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==h,this._pitching=f!==l,this._padding=!o.isPaddingEqual(p),this._prepareEase(n,!1),this._ease((function(e){var i=e*N,d=1/L(i);o.zoom=1===e?c:a+o.scaleZoom(d),r._rotating&&(o.bearing=t.number(s,h,e)),r._pitching&&(o.pitch=t.number(l,f,e)),r._padding&&(o.interpolatePadding(u,p,e),g=o.centerPoint.add(m));var v=1===e?y:o.unproject(_.add(x.mult(R(i))).mult(d));o.setLocationAtPoint(o.renderWorldCopies?v.wrap():v,g),r._fireMoveEvents(n)}),(function(){return r._afterEase(n)}),e),this}},{key:"isEasing",value:function(){return!!this._easeFrameId}},{key:"stop",value:function(){return this._stop()}},{key:"_stop",value:function(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var n=this._onEaseEnd;delete this._onEaseEnd,n.call(this,e)}if(!t){var r=this.handlers;r&&r.stop(!1)}return this}},{key:"_ease",value:function(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.exported.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}},{key:"_renderFrameCallback",value:function(){var e=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}},{key:"_normalizeBearing",value:function(e,n){e=t.wrap(e,-180,180);var r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e}},{key:"_normalizeCenter",value:function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}}}]),r}(t.Evented),ui=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,e),this.options=n,t.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}return p(e,[{key:"getDefaultPosition",value:function(){return"bottom-right"}},{key:"onAdd",value:function(t){return this._map=t,this._compact=this.options&&this.options.compact,this._container=c.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=c.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=c.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}},{key:"onRemove",value:function(){c.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}},{key:"_setElementTitle",value:function(t,e){var n=this._map._getUIString("AttributionControl.".concat(e));t.title=n,t.setAttribute("aria-label",n)}},{key:"_toggleAttribution",value:function(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}},{key:"_updateData",value:function(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||this._updateAttributions()}},{key:"_updateAttributions",value:function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((function(t){return"string"!=typeof t?"":t}))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r];if(i.used){var o=i.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}(t=t.filter((function(t){return String(t).trim()}))).sort((function(t,e){return t.length-e.length})),t=t.filter((function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0}));var a=t.join(" | ");a!==this._attribHTML&&(this._attribHTML=a,t.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}}},{key:"_updateCompact",value:function(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}},{key:"_updateCompactMinimize",value:function(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}]),e}(),ci=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,e),this.options=n,t.bindAll(["_updateCompact"],this)}return p(e,[{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"onAdd",value:function(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=c.create("div","maplibregl-ctrl mapboxgl-ctrl");var e=c.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://maplibre.org/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}},{key:"onRemove",value:function(){c.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}},{key:"_updateCompact",value:function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&e.classList.add("maplibregl-compact","mapboxgl-compact"):e.classList.remove("maplibregl-compact","mapboxgl-compact")}}}]),e}(),hi=function(){function t(){d(this,t),this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}return p(t,[{key:"add",value:function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}},{key:"remove",value:function(t){var e,n=this._currentlyRunning,r=n?this._queue.concat(n):this._queue,i=f(r);try{for(i.s();!(e=i.n()).done;){var o=e.value;if(o.id===t)return void(o.cancelled=!0)}}catch(a){i.e(a)}finally{i.f()}}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this._currentlyRunning=this._queue;this._queue=[];var n,r=f(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.cancelled&&(i.callback(t),this._cleared))break}}catch(o){r.e(o)}finally{r.f()}this._cleared=!1,this._currentlyRunning=!1}},{key:"clear",value:function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}]),t}(),fi={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},pi={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},di={showCompass:!0,showZoom:!0,visualizePitch:!1},mi=function(){function e(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];d(this,e),this._clickTolerance=10,this.element=r,this.mouseRotate=new Or({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,i&&(this.mousePitch=new zr({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),c.addEventListener(r,"mousedown",this.mousedown),c.addEventListener(r,"touchstart",this.touchstart,{passive:!1}),c.addEventListener(r,"touchmove",this.touchmove),c.addEventListener(r,"touchend",this.touchend),c.addEventListener(r,"touchcancel",this.reset)}return p(e,[{key:"down",value:function(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),c.disableDrag()}},{key:"move",value:function(t,e){var n=this.map,r=this.mouseRotate.mousemoveWindow(t,e);if(r&&r.bearingDelta&&n.setBearing(n.getBearing()+r.bearingDelta),this.mousePitch){var i=this.mousePitch.mousemoveWindow(t,e);i&&i.pitchDelta&&n.setPitch(n.getPitch()+i.pitchDelta)}}},{key:"off",value:function(){var t=this.element;c.removeEventListener(t,"mousedown",this.mousedown),c.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),c.removeEventListener(t,"touchmove",this.touchmove),c.removeEventListener(t,"touchend",this.touchend),c.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}},{key:"offTemp",value:function(){c.enableDrag(),c.removeEventListener(window,"mousemove",this.mousemove),c.removeEventListener(window,"mouseup",this.mouseup)}},{key:"mousedown",value:function(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:function(){return e.preventDefault()}}),c.mousePos(this.element,e)),c.addEventListener(window,"mousemove",this.mousemove),c.addEventListener(window,"mouseup",this.mouseup)}},{key:"mousemove",value:function(t){this.move(t,c.mousePos(this.element,t))}},{key:"mouseup",value:function(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}},{key:"touchstart",value:function(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=c.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return t.preventDefault()}},this._startPos))}},{key:"touchmove",value:function(t){1!==t.targetTouches.length?this.reset():(this._lastPos=c.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos))}},{key:"touchend",value:function(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}},{key:"reset",value:function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}]),e}();function gi(e,n,r){if(e=new t.LngLat(e.lng,e.lat),n){var i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=r.locationPoint(e).distSqr(n);r.locationPoint(i).distSqr(n)<a?e=i:r.locationPoint(o).distSqr(n)<a&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){var s=r.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=r.width&&s.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}var vi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function yi(t,e,n){var r=t.classList;for(var i in vi)r.remove("maplibregl-".concat(n,"-anchor-").concat(i),"mapboxgl-".concat(n,"-anchor-").concat(i));r.add("maplibregl-".concat(n,"-anchor-").concat(e),"mapboxgl-".concat(n,"-anchor-").concat(e))}var _i,xi=function(e){m(r,e);var n=g(r);function r(e,o){var a;if(d(this,r),a=n.call(this),(e instanceof HTMLElement||o)&&(e=t.extend({element:e},o)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],i(a)),a._anchor=e&&e.anchor||"center",a._color=e&&e.color||"#3FB1CE",a._scale=e&&e.scale||1,a._draggable=e&&e.draggable||!1,a._clickTolerance=e&&e.clickTolerance||0,a._isDragging=!1,a._state="inactive",a._rotation=e&&e.rotation||0,a._rotationAlignment=e&&e.rotationAlignment||"auto",a._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:a._rotationAlignment,e&&e.element)a._element=e.element,a._offset=t.pointGeometry.convert(e&&e.offset||[0,0]);else{a._defaultMarker=!0,a._element=c.create("div"),a._element.setAttribute("aria-label","Map marker");var s=c.createNS("http://www.w3.org/2000/svg","svg"),u=41,h=27;s.setAttributeNS(null,"display","block"),s.setAttributeNS(null,"height","".concat(u,"px")),s.setAttributeNS(null,"width","".concat(h,"px")),s.setAttributeNS(null,"viewBox","0 0 ".concat(h," ").concat(u));var f=c.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"stroke","none"),f.setAttributeNS(null,"stroke-width","1"),f.setAttributeNS(null,"fill","none"),f.setAttributeNS(null,"fill-rule","evenodd");var p=c.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"fill-rule","nonzero");var m=c.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(3.0, 29.0)"),m.setAttributeNS(null,"fill","#000000");for(var g=0,v=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];g<v.length;g++){var y=v[g],_=c.createNS("http://www.w3.org/2000/svg","ellipse");_.setAttributeNS(null,"opacity","0.04"),_.setAttributeNS(null,"cx","10.5"),_.setAttributeNS(null,"cy","5.80029008"),_.setAttributeNS(null,"rx",y.rx),_.setAttributeNS(null,"ry",y.ry),m.appendChild(_)}var x=c.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"fill",a._color);var b=c.createNS("http://www.w3.org/2000/svg","path");b.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),x.appendChild(b);var w=c.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"opacity","0.25"),w.setAttributeNS(null,"fill","#000000");var k=c.createNS("http://www.w3.org/2000/svg","path");k.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),w.appendChild(k);var S=c.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"transform","translate(6.0, 7.0)"),S.setAttributeNS(null,"fill","#FFFFFF");var E=c.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(8.0, 8.0)");var I=c.createNS("http://www.w3.org/2000/svg","circle");I.setAttributeNS(null,"fill","#000000"),I.setAttributeNS(null,"opacity","0.25"),I.setAttributeNS(null,"cx","5.5"),I.setAttributeNS(null,"cy","5.5"),I.setAttributeNS(null,"r","5.4999962");var C=c.createNS("http://www.w3.org/2000/svg","circle");C.setAttributeNS(null,"fill","#FFFFFF"),C.setAttributeNS(null,"cx","5.5"),C.setAttributeNS(null,"cy","5.5"),C.setAttributeNS(null,"r","5.4999962"),E.appendChild(I),E.appendChild(C),p.appendChild(m),p.appendChild(x),p.appendChild(w),p.appendChild(S),p.appendChild(E),s.appendChild(p),s.setAttributeNS(null,"height",u*a._scale+"px"),s.setAttributeNS(null,"width",h*a._scale+"px"),a._element.appendChild(s),a._offset=t.pointGeometry.convert(e&&e.offset||[0,-14])}return a._element.classList.add("maplibregl-marker","mapboxgl-marker"),a._element.addEventListener("dragstart",(function(t){t.preventDefault()})),a._element.addEventListener("mousedown",(function(t){t.preventDefault()})),yi(a._element,a._anchor,"marker"),a._popup=null,l(a)}return p(r,[{key:"addTo",value:function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}},{key:"remove",value:function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),c.remove(this._element),this._popup&&this._popup.remove(),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}},{key:"getElement",value:function(){return this._element}},{key:"setPopup",value:function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[r,-1*(e-n+r)],"bottom-right":[-r,-1*(e-n+r)],left:[n,-1*(e-n)],right:[-n,-1*(e-n)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}},{key:"_onKeyPress",value:function(t){var e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()}},{key:"_onMapClick",value:function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()}},{key:"getPopup",value:function(){return this._popup}},{key:"togglePopup",value:function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this}},{key:"_update",value:function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=gi(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ(".concat(this._rotation,"deg)"):"map"===this._rotationAlignment&&(e="rotateZ(".concat(this._rotation-this._map.getBearing(),"deg)"));var n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n="rotateX(".concat(this._map.getPitch(),"deg)")),t&&"moveend"!==t.type||(this._pos=this._pos.round()),c.setTransform(this._element,"".concat(vi[this._anchor]," translate(").concat(this._pos.x,"px, ").concat(this._pos.y,"px) ").concat(n," ").concat(e))}}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(e){return this._offset=t.pointGeometry.convert(e),this._update(),this}},{key:"_onMove",value:function(e){if(!this._isDragging){var n=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=n}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))}},{key:"_onUp",value:function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}},{key:"_addDragHandler",value:function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}},{key:"setDraggable",value:function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}},{key:"isDraggable",value:function(){return this._draggable}},{key:"setRotation",value:function(t){return this._rotation=t||0,this._update(),this}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotationAlignment",value:function(t){return this._rotationAlignment=t||"auto",this._update(),this}},{key:"getRotationAlignment",value:function(){return this._rotationAlignment}},{key:"setPitchAlignment",value:function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}},{key:"getPitchAlignment",value:function(){return this._pitchAlignment}}]),r}(t.Evented),bi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},wi=0,ki=!1,Si={maxWidth:100,unit:"metric"};function Ei(t,e,n){var r=n&&n.maxWidth||100,i=t._container.clientHeight/2,o=t.unproject([0,i]),a=t.unproject([r,i]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){var l=3.2808*s;l>5280?Ii(e,r,l/5280,t._getUIString("ScaleControl.Miles")):Ii(e,r,l,t._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?Ii(e,r,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Ii(e,r,s/1e3,t._getUIString("ScaleControl.Kilometers")):Ii(e,r,s,t._getUIString("ScaleControl.Meters"))}function Ii(t,e,n,r){var i=function(t){var e=Math.pow(10,"".concat(Math.floor(t)).length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(n),e*n}(n);t.style.width=e*(i/n)+"px",t.innerHTML="".concat(i,"&nbsp;").concat(r)}var Ci={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ai=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Pi(e){if(e){if("number"==typeof e){var n=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new t.pointGeometry(0,0),top:new t.pointGeometry(0,e),"top-left":new t.pointGeometry(n,n),"top-right":new t.pointGeometry(-n,n),bottom:new t.pointGeometry(0,-e),"bottom-left":new t.pointGeometry(n,-n),"bottom-right":new t.pointGeometry(-n,-n),left:new t.pointGeometry(e,0),right:new t.pointGeometry(-e,0)}}if(e instanceof t.pointGeometry||Array.isArray(e)){var r=t.pointGeometry.convert(e);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:t.pointGeometry.convert(e.center||[0,0]),top:t.pointGeometry.convert(e.top||[0,0]),"top-left":t.pointGeometry.convert(e["top-left"]||[0,0]),"top-right":t.pointGeometry.convert(e["top-right"]||[0,0]),bottom:t.pointGeometry.convert(e.bottom||[0,0]),"bottom-left":t.pointGeometry.convert(e["bottom-left"]||[0,0]),"bottom-right":t.pointGeometry.convert(e["bottom-right"]||[0,0]),left:t.pointGeometry.convert(e.left||[0,0]),right:t.pointGeometry.convert(e.right||[0,0])}}return Pi(new t.pointGeometry(0,0))}var Ti={supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:function(n){m(y,n);var u=g(y);function y(e){var n,r;if(d(this,y),t.PerformanceUtils.mark(t.PerformanceMarkers.create),null!=(e=t.extend({},pi,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if((n=u.call(this,new fr(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}))._interactive=e.interactive,n._maxTileCacheSize=e.maxTileCacheSize,n._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,n._preserveDrawingBuffer=e.preserveDrawingBuffer,n._antialias=e.antialias,n._trackResize=e.trackResize,n._bearingSnap=e.bearingSnap,n._refreshExpiredTiles=e.refreshExpiredTiles,n._fadeDuration=e.fadeDuration,n._crossSourceCollisions=e.crossSourceCollisions,n._crossFadingFactor=1,n._collectResourceTiming=e.collectResourceTiming,n._renderTaskQueue=new hi,n._controls=[],n._mapId=t.uniqueId(),n._locale=t.extend({},fi,e.locale),n._clickTolerance=e.clickTolerance,n._pixelRatio=null!==(r=e.pixelRatio)&&void 0!==r?r:devicePixelRatio,n._requestManager=new v(e.transformRequest),"string"==typeof e.container){if(n._container=document.getElementById(e.container),!n._container)throw new Error("Container '".concat(e.container,"' not found."))}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");n._container=e.container}if(e.maxBounds&&n.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],i(n)),n._setupContainer(),n._setupPainter(),void 0===n.painter)throw new Error("Failed to initialize WebGL.");return n.on("move",(function(){return n._update(!1)})),n.on("moveend",(function(){return n._update(!1)})),n.on("zoom",(function(){return n._update(!0)})),"undefined"!=typeof window&&(addEventListener("online",n._onWindowOnline,!1),addEventListener("resize",n._onWindowResize,!1),addEventListener("orientationchange",n._onWindowResize,!1)),n.handlers=new ai(i(n),e),n._hash=e.hash&&new pr("string"==typeof e.hash&&e.hash||void 0).addTo(i(n)),n._hash&&n._hash._onHashChange()||(n.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(n.resize(),n.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),n.resize(),n._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&n.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&n.addControl(new ui({customAttribution:e.customAttribution})),e.maplibreLogo&&n.addControl(new ci,e.logoPosition),n.on("style.load",(function(){n.transform.unmodified&&n.jumpTo(n.style.stylesheet)})),n.on("data",(function(e){n._update("style"===e.dataType),n.fire(new t.Event("".concat(e.dataType,"data"),e))})),n.on("dataloading",(function(e){n.fire(new t.Event("".concat(e.dataType,"dataloading"),e))})),n.on("dataabort",(function(e){n.fire(new t.Event("sourcedataabort",e))})),l(n)}return p(y,[{key:"_getMapId",value:function(){return this._mapId}},{key:"addControl",value:function(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=e.onAdd(this);this._controls.push(e);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}},{key:"removeControl",value:function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this}},{key:"hasControl",value:function(t){return this._controls.indexOf(t)>-1}},{key:"resize",value:function(e){var n=this._containerDimensions(),r=n[0],i=n[1];this._resizeCanvas(r,i,this.getPixelRatio()),this.transform.resize(r,i),this.painter.resize(r,i,this.getPixelRatio());var o=!this._moving;return o&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),o&&this.fire(new t.Event("moveend",e)),this}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(t){var e=this._containerDimensions(),n=h(e,2),r=n[0],i=n[1];this._pixelRatio=t,this._resizeCanvas(r,i,t),this.painter.resize(r,i,t)}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}},{key:"setMinZoom",value:function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(t){if((t=null==t?60:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(t){return this.transform.renderWorldCopies=t,this._update()}},{key:"project",value:function(e){return this.transform.locationPoint(t.LngLat.convert(e))}},{key:"unproject",value:function(e){return this.transform.pointLocation(t.pointGeometry.convert(e))}},{key:"isMoving",value:function(){return this._moving||this.handlers.isMoving()}},{key:"isZooming",value:function(){return this._zooming||this.handlers.isZooming()}},{key:"isRotating",value:function(){return this._rotating||this.handlers.isRotating()}},{key:"_createDelegatedListener",value:function(t,e,n){var i=this;if("mouseenter"===t||"mouseover"===t){var o=!1,a=function(r){var a=i.getLayer(e)?i.queryRenderedFeatures(r.point,{layers:[e]}):[];a.length?o||(o=!0,n.call(i,new wr(t,i,r.originalEvent,{features:a}))):o=!1};return{layer:e,listener:n,delegates:{mousemove:a,mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var s=!1,l=function(r){(i.getLayer(e)?i.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?s=!0:s&&(s=!1,n.call(i,new wr(t,i,r.originalEvent)))},u=function(e){s&&(s=!1,n.call(i,new wr(t,i,e.originalEvent)))};return{layer:e,listener:n,delegates:{mousemove:l,mouseout:u}}}var c=function(t){var r=i.getLayer(e)?i.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,n.call(i,t),delete t.features)};return{layer:e,listener:n,delegates:r({},t,c)}}},{key:"on",value:function(t,e,n){if(void 0===n)return a(s(y.prototype),"on",this).call(this,t,e);var r=this._createDelegatedListener(t,e,n);for(var i in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(r),r.delegates)this.on(i,r.delegates[i]);return this}},{key:"once",value:function(t,e,n){if(void 0===n)return a(s(y.prototype),"once",this).call(this,t,e);var r=this._createDelegatedListener(t,e,n);for(var i in r.delegates)this.once(i,r.delegates[i]);return this}},{key:"off",value:function(t,e,n){var r=this;return void 0===n?a(s(y.prototype),"off",this).call(this,t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&function(i){for(var o=r._delegatedListeners[t],a=0;a<o.length;a++){var s=o[a];if(s.layer===e&&s.listener===n){for(var l in s.delegates)r.off(l,s.delegates[l]);return o.splice(a,1),r}}}(),this)}},{key:"queryRenderedFeatures",value:function(e,n){if(!this.style)return[];var r;if(void 0!==n||void 0===e||e instanceof t.pointGeometry||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.pointGeometry||"number"==typeof e[0])r=[t.pointGeometry.convert(e)];else{var i=t.pointGeometry.convert(e[0]),o=t.pointGeometry.convert(e[1]);r=[i,new t.pointGeometry(o.x,i.y),o,new t.pointGeometry(i.x,o.y),i]}return this.style.queryRenderedFeatures(r,n,this.transform)}},{key:"querySourceFeatures",value:function(t,e){return this.style.querySourceFeatures(t,e)}},{key:"setStyle",value:function(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(e,n))}},{key:"setTransformRequest",value:function(t){return this._requestManager.setTransformRequest(t),this}},{key:"_getUIString",value:function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '".concat(t,"'"));return e}},{key:"_updateStyle",value:function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new pe(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)}},{key:"_lazyInitEmptyStyle",value:function(){this.style||(this.style=new pe(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}},{key:"_diffStyle",value:function(e,n){var r=this;if("string"==typeof e){var i=this._requestManager.transformRequest(e,t.ResourceType.Style);t.getJSON(i,(function(e,i){e?r.fire(new t.ErrorEvent(e)):i&&r._updateDiff(i,n)}))}else"object"==typeof e&&this._updateDiff(e,n)}},{key:"_updateDiff",value:function(e,n){try{this.style.setState(e)&&this._update(!0)}catch(o){t.warnOnce("Unable to perform style diff: ".concat(o.message||o.error||o,".  Rebuilding the style from scratch.")),this._updateStyle(e,n)}}},{key:"getStyle",value:function(){if(this.style)return this.style.serialize()}},{key:"isStyleLoaded",value:function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")}},{key:"addSource",value:function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}},{key:"isSourceLoaded",value:function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '".concat(e,"'"))))}},{key:"areTilesLoaded",value:function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0}},{key:"addSourceType",value:function(t,e,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)}},{key:"removeSource",value:function(t){return this.style.removeSource(t),this._update(!0)}},{key:"getSource",value:function(t){return this.style.getSource(t)}},{key:"addImage",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.pixelRatio,o=void 0===i?1:i,a=r.sdf,s=void 0!==a&&a,l=r.stretchX,u=r.stretchY,c=r.content;if(this._lazyInitEmptyStyle(),n instanceof HTMLImageElement||t.isImageBitmap(n)){var h=t.exported.getImageData(n),f=h.width,p=h.height,d=h.data;this.style.addImage(e,{data:new t.RGBAImage({width:f,height:p},d),pixelRatio:o,stretchX:l,stretchY:u,content:c,sdf:s,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var m=n.width,g=n.height,v=n.data,y=n;this.style.addImage(e,{data:new t.RGBAImage({width:m,height:g},new Uint8Array(v)),pixelRatio:o,stretchX:l,stretchY:u,content:c,sdf:s,version:0,userImage:y}),y.onAdd&&y.onAdd(this,e)}}},{key:"updateImage",value:function(e,n){var r=this.style.getImage(e);if(!r)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var i=n instanceof HTMLImageElement||t.isImageBitmap(n)?t.exported.getImageData(n):n,o=i.width,a=i.height,s=i.data;if(void 0===o||void 0===a)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(o!==r.data.width||a!==r.data.height)return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var l=!(n instanceof HTMLImageElement||t.isImageBitmap(n));r.data.replace(s,l),this.style.updateImage(e,r)}},{key:"hasImage",value:function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}},{key:"removeImage",value:function(t){this.style.removeImage(t)}},{key:"loadImage",value:function(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),n)}},{key:"listImages",value:function(){return this.style.listImages()}},{key:"addLayer",value:function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}},{key:"moveLayer",value:function(t,e){return this.style.moveLayer(t,e),this._update(!0)}},{key:"removeLayer",value:function(t){return this.style.removeLayer(t),this._update(!0)}},{key:"getLayer",value:function(t){return this.style.getLayer(t)}},{key:"setLayerZoomRange",value:function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)}},{key:"setFilter",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(t,e,n),this._update(!0)}},{key:"getFilter",value:function(t){return this.style.getFilter(t)}},{key:"setPaintProperty",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(t,e,n,r),this._update(!0)}},{key:"getPaintProperty",value:function(t,e){return this.style.getPaintProperty(t,e)}},{key:"setLayoutProperty",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(t,e,n,r),this._update(!0)}},{key:"getLayoutProperty",value:function(t,e){return this.style.getLayoutProperty(t,e)}},{key:"setLight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}},{key:"getLight",value:function(){return this.style.getLight()}},{key:"setFeatureState",value:function(t,e){return this.style.setFeatureState(t,e),this._update()}},{key:"removeFeatureState",value:function(t,e){return this.style.removeFeatureState(t,e),this._update()}},{key:"getFeatureState",value:function(t){return this.style.getFeatureState(t)}},{key:"getContainer",value:function(){return this._container}},{key:"getCanvasContainer",value:function(){return this._canvasContainer}},{key:"getCanvas",value:function(){return this._canvas}},{key:"_containerDimensions",value:function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]}},{key:"_setupContainer",value:function(){var t=this._container;t.classList.add("maplibregl-map","mapboxgl-map");var e=this._canvasContainer=c.create("div","maplibregl-canvas-container mapboxgl-canvas-container",t);this._interactive&&e.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=c.create("canvas","maplibregl-canvas mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1],this.getPixelRatio());var r=this._controlContainer=c.create("div","maplibregl-control-container mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){i[t]=c.create("div","maplibregl-ctrl-".concat(t," mapboxgl-ctrl-").concat(t),r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}},{key:"_resizeCanvas",value:function(t,e,n){this._canvas.width=n*t,this._canvas.height=n*e,this._canvas.style.width="".concat(t,"px"),this._canvas.style.height="".concat(e,"px")}},{key:"_setupPainter",value:function(){var n=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?(this.painter=new lr(r,this.transform),t.exported$1.testSupport(r)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}},{key:"_contextLost",value:function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}},{key:"_contextRestored",value:function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}},{key:"_onMapScroll",value:function(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}},{key:"loaded",value:function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}},{key:"_update",value:function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}},{key:"_requestRenderFrame",value:function(t){return this._update(),this._renderTaskQueue.add(t)}},{key:"_cancelRenderFrame",value:function(t){this._renderTaskQueue.remove(t)}},{key:"_render",value:function(e){var n,r=this,i=0,o=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,n),i=t.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),!this._removed){var a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,l=t.exported.now();this.style.zoomHistory.update(s,l);var u=new t.EvaluationParameters(s,{now:l,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),c=u.crossFadingFactor();1===c&&c===this._crossFadingFactor||(a=!0,this._crossFadingFactor=c),this.style.update(u)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,t.PerformanceUtils.mark(t.PerformanceMarkers.load),this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var h=t.exported.now()-i;o.endQueryEXT(o.TIME_ELAPSED_EXT,n),setTimeout((function(){var e=o.getQueryObjectEXT(n,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(n),r.fire(new t.Event("gpu-timing-frame",{cpuTime:h,gpuTime:e}))}),50)}if(this.listens("gpu-timing-layer")){var f=this.painter.collectGpuTimers();setTimeout((function(){var e=r.painter.queryGpuTimers(f);r.fire(new t.Event("gpu-timing-layer",{layerTimes:e}))}),50)}var p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,t.PerformanceUtils.mark(t.PerformanceMarkers.fullLoad)),this}}},{key:"redraw",value:function(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}},{key:"remove",value:function(){this._hash&&this._hash.remove();var e,n=f(this._controls);try{for(n.s();!(e=n.n()).done;)e.value.onRemove(this)}catch(i){n.e(i)}finally{n.f()}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),c.remove(this._canvasContainer),c.remove(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),t.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new t.Event("remove"))}},{key:"triggerRepaint",value:function(){var e=this;this.style&&!this._frame&&(this._frame=t.exported.frame((function(n){t.PerformanceUtils.frame(n),e._frame=null,e._render(n)})))}},{key:"_onWindowOnline",value:function(){this._update()}},{key:"_onWindowResize",value:function(t){this._trackResize&&this.resize({originalEvent:t})._update()}},{key:"showTileBoundaries",get:function(){return!!this._showTileBoundaries},set:function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}},{key:"showPadding",get:function(){return!!this._showPadding},set:function(t){this._showPadding!==t&&(this._showPadding=t,this._update())}},{key:"showCollisionBoxes",get:function(){return!!this._showCollisionBoxes},set:function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}},{key:"showOverdrawInspector",get:function(){return!!this._showOverdrawInspector},set:function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}},{key:"repaint",get:function(){return!!this._repaint},set:function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}},{key:"vertices",get:function(){return!!this._vertices},set:function(t){this._vertices=t,this._update()}},{key:"_setCacheLimits",value:function(e,n){t.setCacheLimits(e,n)}}]),y}(li),NavigationControl:function(){function e(n){var r=this;d(this,e),this.options=t.extend({},di,n),this._container=c.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",(function(t){return r._map.zoomIn({},{originalEvent:t})})),c.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",(function(t){return r._map.zoomOut({},{originalEvent:t})})),c.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",(function(t){r.options.visualizePitch?r._map.resetNorthPitch({},{originalEvent:t}):r._map.resetNorth({},{originalEvent:t})})),this._compassIcon=c.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}return p(e,[{key:"_updateZoomButtons",value:function(){var t=this._map.getZoom(),e=t===this._map.getMaxZoom(),n=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())}},{key:"_rotateCompassArrow",value:function(){var t=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(this._map.transform.pitch,"deg) rotateZ(").concat(this._map.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(this._map.transform.angle*(180/Math.PI),"deg)");this._compassIcon.style.transform=t}},{key:"onAdd",value:function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new mi(this._map,this._compass,this.options.visualizePitch)),this._container}},{key:"onRemove",value:function(){c.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}},{key:"_createButton",value:function(t,e){var n=c.create("button",t,this._container);return n.type="button",n.addEventListener("click",e),n}},{key:"_setButtonTitle",value:function(t,e){var n=this._map._getUIString("NavigationControl.".concat(e));t.title=n,t.setAttribute("aria-label",n)}}]),e}(),GeolocateControl:function(e){m(r,e);var n=g(r);function r(e){var o;return d(this,r),(o=n.call(this)).options=t.extend({},bi,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],i(o)),o}return p(r,[{key:"onAdd",value:function(t){var e;return this._map=t,this._container=c.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),e=this._setupUI,void 0!==_i?e(_i):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then((function(t){_i="denied"!==t.state,e(_i)})):(_i=!!window.navigator.geolocation,e(_i)),this._container}},{key:"onRemove",value:function(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),c.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,wi=0,ki=!1}},{key:"_isOutOfMapMaxBounds",value:function(t){var e=this._map.getMaxBounds(),n=t.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())}},{key:"_setErrorState",value:function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}}},{key:"_onSuccess",value:function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}},{key:"_updateCamera",value:function(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,i=this._map.getBearing(),o=t.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})}},{key:"_updateMarker",value:function(e){if(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}},{key:"_updateCircleRadius",value:function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),n=this._map.unproject([1,t]),r=e.distanceTo(n),i=Math.ceil(2*this._accuracy/r);this._circleElement.style.width="".concat(i,"px"),this._circleElement.style.height="".concat(i,"px")}},{key:"_onZoom",value:function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}},{key:"_onError",value:function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&ki)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}},{key:"_finish",value:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}},{key:"_setupUI",value:function(e){var n=this;if(this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._geolocateButton=c.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),c.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{var i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=c.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new xi(this._dotElement),this._circleElement=c.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new xi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(e){e.geolocateSource||"ACTIVE_LOCK"!==n._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),n.fire(new t.Event("trackuserlocationend")))}))}},{key:"trigger",value:function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":wi--,ki=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++wi>1?(e={maximumAge:6e5,timeout:0},ki=!0):(e=this.options.positionOptions,ki=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}},{key:"_clearWatch",value:function(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}}]),r}(t.Evented),AttributionControl:ui,LogoControl:ci,ScaleControl:function(){function e(n){d(this,e),this.options=t.extend({},Si,n),t.bindAll(["_onMove","setUnit"],this)}return p(e,[{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_onMove",value:function(){Ei(this._map,this._container,this.options)}},{key:"onAdd",value:function(t){return this._map=t,this._container=c.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}},{key:"onRemove",value:function(){c.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},{key:"setUnit",value:function(t){this.options.unit=t,Ei(this._map,this._container,this.options)}}]),e}(),FullscreenControl:function(){function e(n){d(this,e),this._fullscreen=!1,n&&n.container&&(n.container instanceof HTMLElement?this._container=n.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}return p(e,[{key:"onAdd",value:function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=c.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}},{key:"onRemove",value:function(){c.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_checkFullscreenSupport",value:function(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}},{key:"_setupUI",value:function(){var t=this._fullscreenButton=c.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);c.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_updateTitle",value:function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t}},{key:"_getTitle",value:function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}},{key:"_isFullscreen",value:function(){return this._fullscreen}},{key:"_changeIcon",value:function(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}},{key:"_onClickFullscreen",value:function(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}}]),e}(),Popup:function(e){m(r,e);var n=g(r);function r(e){var o;return d(this,r),(o=n.call(this)).options=t.extend(Object.create(Ci),e),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],i(o)),o}return p(r,[{key:"addTo",value:function(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this}},{key:"isOpen",value:function(){return!!this._map}},{key:"remove",value:function(){return this._content&&c.remove(this._content),this._container&&(c.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}},{key:"trackPointer",value:function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}},{key:"getElement",value:function(){return this._container}},{key:"setText",value:function(t){return this.setDOMContent(document.createTextNode(t))}},{key:"setHTML",value:function(t){var e,n=document.createDocumentFragment(),r=document.createElement("body");for(r.innerHTML=t;e=r.firstChild;)n.appendChild(e);return this.setDOMContent(n)}},{key:"getMaxWidth",value:function(){return this._container&&this._container.style.maxWidth}},{key:"setMaxWidth",value:function(t){return this.options.maxWidth=t,this._update(),this}},{key:"setDOMContent",value:function(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=c.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this}},{key:"addClassName",value:function(t){this._container&&this._container.classList.add(t)}},{key:"removeClassName",value:function(t){this._container&&this._container.classList.remove(t)}},{key:"setOffset",value:function(t){return this.options.offset=t,this._update(),this}},{key:"toggleClassName",value:function(t){if(this._container)return this._container.classList.toggle(t)}},{key:"_createCloseButton",value:function(){this.options.closeButton&&(this._closeButton=c.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}},{key:"_onMouseUp",value:function(t){this._update(t.point)}},{key:"_onMouseMove",value:function(t){this._update(t.point)}},{key:"_onDrag",value:function(t){this._update(t.point)}},{key:"_update",value:function(t){var e=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=c.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=c.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(t){return e._container.classList.add(t)})),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=gi(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||t)){var n=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat),r=this.options.anchor,i=Pi(this.options.offset);if(!r){var o,a=this._container.offsetWidth,s=this._container.offsetHeight;o=n.y+i.bottom.y<s?["top"]:n.y>this._map.transform.height-s?["bottom"]:[],n.x<a/2?o.push("left"):n.x>this._map.transform.width-a/2&&o.push("right"),r=0===o.length?"bottom":o.join("-")}var l=n.add(i[r]).round();c.setTransform(this._container,"".concat(vi[r]," translate(").concat(l.x,"px,").concat(l.y,"px)")),yi(this._container,r,"popup")}}},{key:"_focusFirstElement",value:function(){if(this.options.focusAfterOpen&&this._container){var t=this._container.querySelector(Ai);t&&t.focus()}}},{key:"_onClose",value:function(){this.remove()}}]),r}(t.Evented),Marker:xi,Style:pe,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.pointGeometry,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,AJAXError:t.AJAXError,config:t.config,CanvasSource:G,GeoJSONSource:Z,ImageSource:V,RasterDEMTileSource:j,RasterTileSource:B,VectorTileSource:F,VideoSource:q,prewarm:function(){at().acquire(rt)},clearPrewarmedResources:function(){var t=nt;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(rt),nt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get workerCount(){return it.workerCount},set workerCount(t){it.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:"",addProtocol:function(e,n){t.config.REGISTERED_PROTOCOLS[e]=n},removeProtocol:function(e){delete t.config.REGISTERED_PROTOCOLS[e]}};return si.extend(Ti,{isSafari:t.isSafari,getPerformanceMetrics:t.PerformanceUtils.getPerformanceMetrics}),Ti})),n}()},4307:function(t){t.exports=function(){"use strict";var t,e,n;function r(r,i){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",a={};t(a),n=i(a),"undefined"!==typeof window&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=i;else t=i}return r(["exports"],(function(t){var e=n;function n(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=r}function r(t,n,r,i){const o=new e(t,n,r,i);return function(t){return o.solve(t)}}n.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,r=0;r<8;r++){var i=this.sampleCurveX(n)-t;if(Math.abs(i)<e)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=i/o}var a=0,s=1;for(n=t,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-t)<e));r++)t>i?a=n:s=n,n=.5*(s-a)+a;return n},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};const i=r(.25,.1,.25,1);function o(t,e,n){return Math.min(n,Math.max(e,t))}function a(t,e,n){const r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function s(t,...e){for(const n of e)for(const e in n)t[e]=n[e];return t}let l=1;function u(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e))}))}function c(t,e,n){const r={};for(const i in t)r[i]=e.call(n||this,t[i],i,t);return r}function h(t,e,n){const r={};for(const i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function f(t){return Array.isArray(t)?t.map(f):"object"==typeof t&&t?c(t,f):t}const p={};function d(t){p[t]||("undefined"!=typeof console&&console.warn(t),p[t]=!0)}function m(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function g(t){let e=0;for(let n,r,i=0,o=t.length,a=o-1;i<o;a=i++)n=t[i],r=t[a],e+=(r.x-n.x)*(n.y+r.y);return e}function v(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function y(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,n,r,i)=>{const o=r||i;return e[n]=!o||o.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}let _,x,b=null;function w(t){if(null==b){const e=t.navigator?t.navigator.userAgent:null;b=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return b}function k(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap}const S={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(t){const e=requestAnimationFrame(t);return{cancel:()=>cancelAnimationFrame(e)}},getImageData(t,e=0){const n=window.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=t.width,n.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:t=>(_||(_=document.createElement("a")),_.href=t,_.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==x&&(x=matchMedia("(prefers-reduced-motion: reduce)")),x.matches)}};var E=I;function I(t,e){this.x=t,this.y=e}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},I.convert=function(t){return t instanceof I?t:Array.isArray(t)?new I(t[0],t[1]):t};const C={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},A="mapbox-tiles";let P,T,M=500,L=50;function R(){"undefined"==typeof caches||P||(P=caches.open(A))}let N=1/0;const O={supported:!1,testSupport:function(t){!F&&D&&(B?j(t):z=t)}};let z,D,F=!1,B=!1;function j(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,D),t.isContextLost())return;O.supported=!0}catch(t){}t.deleteTexture(e),F=!0}"undefined"!=typeof document&&(D=document.createElement("img"),D.onload=function(){z&&j(z),z=null,B=!0},D.onerror=function(){F=!0,z=null},D.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Z={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Z);class U extends Error{constructor(t,e,n,r){super(`AJAXError: ${e} (${t}): ${n}`),this.status=t,this.statusText=e,this.url=n,this.body=r}}const V=v()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href;function q(t,e){const n=new AbortController,r=new Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:V(),signal:n.signal});let i=!1,o=!1;return"json"===t.type&&r.headers.set("Accept","application/json"),((n,a,s)=>{if(o)return;const l=Date.now();fetch(r).then((n=>n.ok?((n,a,s)=>{("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then((t=>{o||(a&&s&&function(t,e,n){if(R(),!P)return;const r={status:e.status,statusText:e.statusText,headers:new Headers};e.headers.forEach(((t,e)=>r.headers.set(e,t)));const i=y(e.headers.get("Cache-Control")||"");i["no-store"]||(i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-n<42e4||function(t,e){if(void 0===T)try{new Response(new ReadableStream),T=!0}catch(t){T=!1}T?e(t.body):t.blob().then(e)}(e,(e=>{const n=new Response(e,r);R(),P&&P.then((e=>e.put(function(t){const e=t.indexOf("?");return e<0?t:t.slice(0,e)}(t.url),n))).catch((t=>d(t.message)))})))}(r,a,s),i=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((t=>{o||e(new Error(t.message))}))})(n,null,l):n.blob().then((r=>e(new U(n.status,n.statusText,t.url,r)))))).catch((t=>{20!==t.code&&e(new Error(t.message))}))})(),{cancel:()=>{o=!0,i||n.abort()}}}const G=function(t,e){if(/:\/\//.test(t.url)&&!/^https?:|^file:/.test(t.url)){if(v()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e);if(!v()){const n=t.url.substring(0,t.url.indexOf("://"));return(C.REGISTERED_PROTOCOLS[n]||q)(t,e)}}if(!(/^file:/.test(n=t.url)||/^file:/.test(V())&&!/^\w+:/.test(n))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return q(t,e);if(v()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(t,e){const n=new XMLHttpRequest;n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer");for(const r in t.headers)n.setRequestHeader(r,t.headers[r]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=()=>{e(new Error(n.statusText))},n.onload=()=>{if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){let r=n.response;if("json"===t.type)try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else{const r=new Blob([n.response],{type:n.getResponseHeader("Content-Type")});e(new U(n.status,n.statusText,t.url,r))}},n.send(t.body),{cancel:()=>n.abort()}}(t,e)},W=function(t,e){return G(s(t,{type:"arrayBuffer"}),e)};function H(t){const e=window.document.createElement("a");return e.href=t,e.protocol===window.document.location.protocol&&e.host===window.document.location.host}const X="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Y,$;Y=[],$=0;const K=function(t,e){if(O.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),$>=C.MAX_PARALLEL_IMAGE_REQUESTS){const n={requestParameters:t,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return Y.push(n),n}$++;let n=!1;const r=()=>{if(!n)for(n=!0,$--;Y.length&&$<C.MAX_PARALLEL_IMAGE_REQUESTS;){const t=Y.shift(),{requestParameters:e,callback:n,cancelled:r}=t;r||(t.cancel=K(e,n).cancel)}},i=W(t,((t,n,i,o)=>{r(),t?e(t):n&&function(t,e){"function"==typeof createImageBitmap?function(t,e){const n=new Blob([new Uint8Array(t)],{type:"image/png"});createImageBitmap(n).then((t=>{e(null,t)})).catch((t=>{e(new Error(`Could not load image because of ${t.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(t,e):function(t,e){const n=new Image;n.onload=()=>{e(null,n),URL.revokeObjectURL(n.src),n.onload=null,window.requestAnimationFrame((()=>{n.src=X}))},n.onerror=()=>e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const r=new Blob([new Uint8Array(t)],{type:"image/png"});n.src=t.byteLength?URL.createObjectURL(r):X}(t,e)}(n,((t,n)=>{null!=t?e(t):null!=n&&e(null,n,{cacheControl:i,expires:o})}))}));return{cancel:()=>{i.cancel(),r()}}};function J(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function Q(t,e,n){if(n&&n[t]){const r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}class tt{constructor(t,e={}){s(this,e),this.type=t}}class et extends tt{constructor(t,e={}){super("error",s({error:t},e))}}class nt{on(t,e){return this._listeners=this._listeners||{},J(t,e,this._listeners),this}off(t,e){return Q(t,e,this._listeners),Q(t,e,this._oneTimeListeners),this}once(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},J(t,e,this._oneTimeListeners),this}fire(t,e){"string"==typeof t&&(t=new tt(t,e||{}));const n=t.type;if(this.listens(n)){t.target=this;const e=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of e)n.call(this,t);const r=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const o of r)Q(n,o,this._oneTimeListeners),o.call(this,t);const i=this._eventedParent;i&&(s(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(t))}else t instanceof et&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var rt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class it{constructor(t,e,n,r){this.message=(t?`${t}: `:"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)}}function ot(t){const e=t.value;return e?[new it(t.key,e,"constants have been deprecated as of v8")]:[]}function at(t,...e){for(const n of e)for(const e in n)t[e]=n[e];return t}function st(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function lt(t){if(Array.isArray(t))return t.map(lt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const n in t)e[n]=lt(t[n]);return e}return st(t)}class ut extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class ct{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[n,r]of e)this.bindings[n]=r}concat(t){return new ct(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const ht={kind:"null"},ft={kind:"number"},pt={kind:"string"},dt={kind:"boolean"},mt={kind:"color"},gt={kind:"object"},vt={kind:"value"},yt={kind:"collator"},_t={kind:"formatted"},xt={kind:"resolvedImage"};function bt(t,e){return{kind:"array",itemType:t,N:e}}function wt(t){if("array"===t.kind){const e=wt(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const kt=[ht,ft,pt,dt,mt,_t,gt,bt(vt),xt];function St(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!St(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of kt)if(!St(t,e))return null}return`Expected ${wt(t)} but found ${wt(e)} instead.`}function Et(t,e){return e.some((e=>e.kind===t.kind))}function It(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}var Ct,At={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Pt(t){return(t=Math.round(t))<0?0:t>255?255:t}function Tt(t){return Pt("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function Mt(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function Lt(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{Ct={}.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in At)return At[n].slice();if("#"===n[0])return 4===n.length?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var r=n.indexOf("("),i=n.indexOf(")");if(-1!==r&&i+1===n.length){var o=n.substr(0,r),a=n.substr(r+1,i-(r+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=Mt(a.pop());case"rgb":return 3!==a.length?null:[Tt(a[0]),Tt(a[1]),Tt(a[2]),s];case"hsla":if(4!==a.length)return null;s=Mt(a.pop());case"hsl":if(3!==a.length)return null;var l=(parseFloat(a[0])%360+360)%360/360,u=Mt(a[1]),c=Mt(a[2]),h=c<=.5?c*(u+1):c+u-c*u,f=2*c-h;return[Pt(255*Lt(f,h,l+1/3)),Pt(255*Lt(f,h,l)),Pt(255*Lt(f,h,l-1/3)),s];default:return null}}return null}}catch(t){}class Rt{constructor(t,e,n,r=1){this.r=t,this.g=e,this.b=n,this.a=r}static parse(t){if(!t)return;if(t instanceof Rt)return t;if("string"!=typeof t)return;const e=Ct(t);return e?new Rt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,n,r]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(n)},${r})`}toArray(){const{r:t,g:e,b:n,a:r}=this;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*n/r,r]}}Rt.black=new Rt(0,0,0,1),Rt.white=new Rt(1,1,1,1),Rt.transparent=new Rt(0,0,0,0),Rt.red=new Rt(1,0,0,1);class Nt{constructor(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ot{constructor(t,e,n,r,i){this.text=t,this.image=e,this.scale=n,this.fontStack=r,this.textColor=i}}class zt{constructor(t){this.sections=t}static fromString(t){return new zt([new Ot(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof zt?t:zt.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const n={};e.fontStack&&(n["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(n["font-scale"]=e.scale),e.textColor&&(n["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(n)}return t}}class Dt{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Dt({name:t,available:!1}):null}serialize(){return["image",this.name]}}function Ft(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[t,e,n,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Bt(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Rt)return!0;if(t instanceof Nt)return!0;if(t instanceof zt)return!0;if(t instanceof Dt)return!0;if(Array.isArray(t)){for(const e of t)if(!Bt(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!Bt(t[e]))return!1;return!0}return!1}function jt(t){if(null===t)return ht;if("string"==typeof t)return pt;if("boolean"==typeof t)return dt;if("number"==typeof t)return ft;if(t instanceof Rt)return mt;if(t instanceof Nt)return yt;if(t instanceof zt)return _t;if(t instanceof Dt)return xt;if(Array.isArray(t)){const e=t.length;let n;for(const r of t){const t=jt(r);if(n){if(n===t)continue;n=vt;break}n=t}return bt(n||vt,e)}return gt}function Zt(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Rt||t instanceof zt||t instanceof Dt?t.toString():JSON.stringify(t)}class Ut{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Bt(t[1]))return e.error("invalid value");const n=t[1];let r=jt(n);const i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new Ut(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Rt?["rgba"].concat(this.value.toArray()):this.value instanceof zt?this.value.serialize():this.value}}class Vt{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const qt={string:pt,number:ft,boolean:dt,object:gt};class Gt{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let n,r=1;const i=t[0];if("array"===i){let i,o;if(t.length>2){const n=t[1];if("string"!=typeof n||!(n in qt)||"object"===n)return e.error('The item type argument of "array" must be one of string, number, boolean',1);i=qt[n],r++}else i=vt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],r++}n=bt(i,o)}else n=qt[i];const o=[];for(;r<t.length;r++){const n=e.parse(t[r],r,vt);if(!n)return null;o.push(n)}return new Gt(n,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const n=this.args[e].evaluate(t);if(!St(this.type,jt(n)))return n;if(e===this.args.length-1)throw new Vt(`Expected value to be of type ${wt(this.type)}, but found ${wt(jt(n))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);const r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map((t=>t.serialize())))}}class Wt{constructor(t){this.type=_t,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");const r=[];let i=!1;for(let o=1;o<=t.length-1;++o){const n=t[o];if(i&&"object"==typeof n&&!Array.isArray(n)){i=!1;let t=null;if(n["font-scale"]&&(t=e.parse(n["font-scale"],1,ft),!t))return null;let o=null;if(n["text-font"]&&(o=e.parse(n["text-font"],1,bt(pt)),!o))return null;let a=null;if(n["text-color"]&&(a=e.parse(n["text-color"],1,mt),!a))return null;const s=r[r.length-1];s.scale=t,s.font=o,s.textColor=a}else{const n=e.parse(t[o],1,vt);if(!n)return null;const a=n.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:n,scale:null,font:null,textColor:null})}}return new Wt(r)}evaluate(t){return new zt(this.sections.map((e=>{const n=e.content.evaluate(t);return jt(n)===xt?new Ot("",n,null,null,null):new Ot(Zt(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const n={};e.scale&&(n["font-scale"]=e.scale.serialize()),e.font&&(n["text-font"]=e.font.serialize()),e.textColor&&(n["text-color"]=e.textColor.serialize()),t.push(n)}return t}}class Ht{constructor(t){this.type=xt,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,pt);return n?new Ht(n):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),n=Dt.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Xt={"to-boolean":dt,"to-color":mt,"to-number":ft,"to-string":pt};class Yt{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");const r=Xt[n],i=[];for(let o=1;o<t.length;o++){const n=e.parse(t[o],o,vt);if(!n)return null;i.push(n)}return new Yt(r,i)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,n;for(const r of this.args){if(e=r.evaluate(t),n=null,e instanceof Rt)return e;if("string"==typeof e){const n=t.parseColor(e);if(n)return n}else if(Array.isArray(e)&&(n=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:Ft(e[0],e[1],e[2],e[3]),!n))return new Rt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Vt(n||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const n of this.args){if(e=n.evaluate(t),null===e)return 0;const r=Number(e);if(!isNaN(r))return r}throw new Vt(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?zt.fromString(Zt(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Dt.fromString(Zt(this.args[0].evaluate(t))):Zt(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new Wt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ht(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild((e=>{t.push(e.serialize())})),t}}const $t=["Unknown","Point","LineString","Polygon"];class Kt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?$t[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Rt.parse(t)),e}}class Jt{constructor(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((t=>t.serialize())))}static parse(t,e){const n=t[0],r=Jt.definitions[n];if(!r)return e.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let s=null;for(const[l,u]of a){s=new be(e.registry,e.path,null,e.scope);const r=[];let o=!1;for(let e=1;e<t.length;e++){const n=t[e],i=Array.isArray(l)?l[e-1]:l.type,a=s.parse(n,1+r.length,i);if(!a){o=!0;break}r.push(a)}if(!o)if(Array.isArray(l)&&l.length!==r.length)s.error(`Expected ${l.length} arguments, but found ${r.length} instead.`);else{for(let t=0;t<r.length;t++){const e=Array.isArray(l)?l[t]:l.type,n=r[t];s.concat(t+1).checkSubtype(e,n.type)}if(0===s.errors.length)return new Jt(n,i,u,r)}}if(1===a.length)e.errors.push(...s.errors);else{const n=(a.length?a:o).map((([t])=>{return e=t,Array.isArray(e)?`(${e.map(wt).join(", ")})`:`(${wt(e.type)}...)`;var e})).join(" | "),r=[];for(let i=1;i<t.length;i++){const n=e.parse(t[i],1+r.length);if(!n)return null;r.push(wt(n.type))}e.error(`Expected arguments of type ${n}, but found (${r.join(", ")}) instead.`)}return null}static register(t,e){Jt.definitions=e;for(const n in e)t[n]=Jt}}class Qt{constructor(t,e,n){this.type=yt,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");const r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,dt);if(!r)return null;const i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,dt);if(!i)return null;let o=null;return n.locale&&(o=e.parse(n.locale,1,pt),!o)?null:new Qt(r,i,o)}evaluate(t){return new Nt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const te=8192;function ee(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function ne(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function re(t,e){const n=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return[Math.round(n*i*te),Math.round(r*i*te)]}function ie(t,e,n){const r=t[0]-e[0],i=t[1]-e[1],o=t[0]-n[0],a=t[1]-n[1];return r*a-o*i==0&&r*o<=0&&i*a<=0}function oe(t,e){let n=!1;for(let a=0,s=e.length;a<s;a++){const s=e[a];for(let e=0,a=s.length;e<a-1;e++){if(ie(t,s[e],s[e+1]))return!1;(i=s[e])[1]>(r=t)[1]!=(o=s[e+1])[1]>r[1]&&r[0]<(o[0]-i[0])*(r[1]-i[1])/(o[1]-i[1])+i[0]&&(n=!n)}}var r,i,o;return n}function ae(t,e){for(let n=0;n<e.length;n++)if(oe(t,e[n]))return!0;return!1}function se(t,e,n,r){const i=r[0]-n[0],o=r[1]-n[1],a=(t[0]-n[0])*o-i*(t[1]-n[1]),s=(e[0]-n[0])*o-i*(e[1]-n[1]);return a>0&&s<0||a<0&&s>0}function le(t,e,n){for(const u of n)for(let n=0;n<u.length-1;++n)if(0!=(s=[(a=u[n+1])[0]-(o=u[n])[0],a[1]-o[1]])[0]*(l=[(i=e)[0]-(r=t)[0],i[1]-r[1]])[1]-s[1]*l[0]&&se(r,i,o,a)&&se(o,a,r,i))return!0;var r,i,o,a,s,l;return!1}function ue(t,e){for(let n=0;n<t.length;++n)if(!oe(t[n],e))return!1;for(let n=0;n<t.length-1;++n)if(le(t[n],t[n+1],e))return!1;return!0}function ce(t,e){for(let n=0;n<e.length;n++)if(ue(t,e[n]))return!0;return!1}function he(t,e,n){const r=[];for(let i=0;i<t.length;i++){const o=[];for(let r=0;r<t[i].length;r++){const a=re(t[i][r],n);ee(e,a),o.push(a)}r.push(o)}return r}function fe(t,e,n){const r=[];for(let i=0;i<t.length;i++){const o=he(t[i],e,n);r.push(o)}return r}function pe(t,e,n,r){if(t[0]<n[0]||t[0]>n[2]){const e=.5*r;let i=t[0]-n[0]>e?-r:n[0]-t[0]>e?r:0;0===i&&(i=t[0]-n[2]>e?-r:n[2]-t[0]>e?r:0),t[0]+=i}ee(e,t)}function de(t,e,n,r){const i=Math.pow(2,r.z)*te,o=[r.x*te,r.y*te],a=[];for(const s of t)for(const t of s){const r=[t.x+o[0],t.y+o[1]];pe(r,e,n,i),a.push(r)}return a}function me(t,e,n,r){const i=Math.pow(2,r.z)*te,o=[r.x*te,r.y*te],a=[];for(const l of t){const t=[];for(const n of l){const r=[n.x+o[0],n.y+o[1]];ee(e,r),t.push(r)}a.push(t)}if(e[2]-e[0]<=i/2){(s=e)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const t of a)for(const r of t)pe(r,e,n,i)}var s;return a}class ge{constructor(t,e){this.type=dt,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Bt(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const n=e.features[t].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new ge(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new ge(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new ge(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){const o=he(e.coordinates,r,i),a=de(t.geometry(),n,r,i);if(!ne(n,r))return!1;for(const t of a)if(!oe(t,o))return!1}if("MultiPolygon"===e.type){const o=fe(e.coordinates,r,i),a=de(t.geometry(),n,r,i);if(!ne(n,r))return!1;for(const t of a)if(!ae(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){const o=he(e.coordinates,r,i),a=me(t.geometry(),n,r,i);if(!ne(n,r))return!1;for(const t of a)if(!ue(t,o))return!1}if("MultiPolygon"===e.type){const o=fe(e.coordinates,r,i),a=me(t.geometry(),n,r,i);if(!ne(n,r))return!1;for(const t of a)if(!ce(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function ve(t){if(t instanceof Jt){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof ge)return!1;let e=!0;return t.eachChild((t=>{e&&!ve(t)&&(e=!1)})),e}function ye(t){if(t instanceof Jt&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!ye(t)&&(e=!1)})),e}function _e(t,e){if(t instanceof Jt&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild((t=>{n&&!_e(t,e)&&(n=!1)})),n}class xe{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const n=t[1];return e.scope.has(n)?new xe(n,e.scope.get(n)):e.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class be{constructor(t,e=[],n,r=new ct,i=[]){this.registry=t,this.path=e,this.key=e.map((t=>`[${t}]`)).join(""),this.scope=r,this.errors=i,this.expectedType=n}parse(t,e,n,r,i={}){return e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)}_parse(t,e){function n(t,e,n){return"assert"===n?new Gt(e,[t]):"coerce"===n?new Yt(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=t[0];if("string"!=typeof r)return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[r];if(i){let r=i.parse(t,this);if(!r)return null;if(this.expectedType){const t=this.expectedType,i=r.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==i.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(t,i))return null}else r=n(r,t,e.typeAnnotation||"coerce");else r=n(r,t,e.typeAnnotation||"assert")}if(!(r instanceof Ut)&&"resolvedImage"!==r.type.kind&&we(r)){const e=new Kt;try{r=new Ut(r.type,r.evaluate(e))}catch(t){return this.error(t.message),null}}return r}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,n){const r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new be(this.registry,r,e||null,i,this.errors)}error(t,...e){const n=`${this.key}${e.map((t=>`[${t}]`)).join("")}`;this.errors.push(new ut(n,t))}checkSubtype(t,e){const n=St(t,e);return n&&this.error(n),n}}function we(t){if(t instanceof xe)return we(t.boundExpression);if(t instanceof Jt&&"error"===t.name)return!1;if(t instanceof Qt)return!1;if(t instanceof ge)return!1;const e=t instanceof Yt||t instanceof Gt;let n=!0;return t.eachChild((t=>{n=e?n&&we(t):n&&t instanceof Ut})),!!n&&ve(t)&&_e(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ke(t,e){const n=t.length-1;let r,i,o=0,a=n,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),r=t[s],i=t[s+1],r<=e){if(s===n||e<i)return s;o=s+1}else{if(!(r>e))throw new Vt("Input is not a number.");a=s-1}return 0}class Se{constructor(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[r,i]of n)this.labels.push(r),this.outputs.push(i)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const n=e.parse(t[1],1,ft);if(!n)return null;const r=[];let i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(let o=1;o<t.length;o+=2){const n=1===o?-1/0:t[o],a=t[o+1],s=o,l=o+1;if("number"!=typeof n)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=n)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const u=e.parse(a,l,i);if(!u)return null;i=i||u.type,r.push([n,u])}return new Se(i,n,r)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);const i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[ke(e,r)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}function Ee(t,e,n){return t*(1-n)+e*n}var Ie=Object.freeze({__proto__:null,number:Ee,color:function(t,e,n){return new Rt(Ee(t.r,e.r,n),Ee(t.g,e.g,n),Ee(t.b,e.b,n),Ee(t.a,e.a,n))},array:function(t,e,n){return t.map(((t,r)=>Ee(t,e[r],n)))}});const Ce=.95047,Ae=1.08883,Pe=4/29,Te=6/29,Me=3*Te*Te,Le=Math.PI/180,Re=180/Math.PI;function Ne(t){return t>.008856451679035631?Math.pow(t,1/3):t/Me+Pe}function Oe(t){return t>Te?t*t*t:Me*(t-Pe)}function ze(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function De(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Fe(t){const e=De(t.r),n=De(t.g),r=De(t.b),i=Ne((.4124564*e+.3575761*n+.1804375*r)/Ce),o=Ne((.2126729*e+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-Ne((.0193339*e+.119192*n+.9503041*r)/Ae)),alpha:t.a}}function Be(t){let e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*Oe(e),n=Ce*Oe(n),r=Ae*Oe(r),new Rt(ze(3.2404542*n-1.5371385*e-.4985314*r),ze(-.969266*n+1.8760108*e+.041556*r),ze(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function je(t,e,n){const r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}const Ze={forward:Fe,reverse:Be,interpolate:function(t,e,n){return{l:Ee(t.l,e.l,n),a:Ee(t.a,e.a,n),b:Ee(t.b,e.b,n),alpha:Ee(t.alpha,e.alpha,n)}}},Ue={forward:function(t){const{l:e,a:n,b:r}=Fe(t),i=Math.atan2(r,n)*Re;return{h:i<0?i+360:i,c:Math.sqrt(n*n+r*r),l:e,alpha:t.a}},reverse:function(t){const e=t.h*Le,n=t.c;return Be({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:je(t.h,e.h,n),c:Ee(t.c,e.c,n),l:Ee(t.l,e.l,n),alpha:Ee(t.alpha,e.alpha,n)}}};var Ve=Object.freeze({__proto__:null,lab:Ze,hcl:Ue});class qe{constructor(t,e,n,r,i){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[o,a]of i)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(t,n,r,i){let o=0;if("exponential"===t.name)o=Ge(n,t.base,r,i);else if("linear"===t.name)o=Ge(n,1,r,i);else if("cubic-bezier"===t.name){const a=t.controlPoints;o=new e(a[0],a[1],a[2],a[3]).solve(Ge(n,1,r,i))}return o}static parse(t,e){let[n,r,i,...o]=t;if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const t=r[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:t}}else{if("cubic-bezier"!==r[0])return e.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const t=r.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(i=e.parse(i,2,ft),!i)return null;const a=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=mt:e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType);for(let l=0;l<o.length;l+=2){const t=o[l],n=o[l+1],r=l+3,i=l+4;if("number"!=typeof t)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(a.length&&a[a.length-1][0]>=t)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const u=e.parse(n,i,s);if(!u)return null;s=s||u.type,a.push([t,u])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new qe(s,n,r,i,a):e.error(`Type ${wt(s)} is not interpolatable.`)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);const i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);const o=ke(e,r),a=qe.interpolationFactor(this.interpolation,r,e[o],e[o+1]),s=n[o].evaluate(t),l=n[o+1].evaluate(t);return"interpolate"===this.operator?Ie[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?Ue.reverse(Ue.interpolate(Ue.forward(s),Ue.forward(l),a)):Ze.reverse(Ze.interpolate(Ze.forward(s),Ze.forward(l),a))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e}}function Ge(t,e,n,r){const i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}class We{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let n=null;const r=e.expectedType;r&&"value"!==r.kind&&(n=r);const i=[];for(const a of t.slice(1)){const t=e.parse(a,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!t)return null;n=n||t.type,i.push(t)}const o=r&&i.some((t=>St(r,t.type)));return new We(o?vt:n,i)}evaluate(t){let e,n=null,r=0;for(const i of this.args)if(r++,n=i.evaluate(t),n&&n instanceof Dt&&!n.available&&(e||(e=n.name),n=null,r===this.args.length&&(n=e)),null!==n)break;return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=["coalesce"];return this.eachChild((e=>{t.push(e.serialize())})),t}}class He{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const n=[];for(let i=1;i<t.length-1;i+=2){const r=t[i];if("string"!=typeof r)return e.error(`Expected string, but found ${typeof r} instead.`,i);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);const o=e.parse(t[i+1],i+1);if(!o)return null;n.push([r,o])}const r=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return r?new He(n,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,n]of this.bindings)t.push(e,n.serialize());return t.push(this.result.serialize()),t}}class Xe{constructor(t,e,n){this.type=t,this.index=e,this.input=n}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,ft),r=e.parse(t[2],2,bt(e.expectedType||vt));return n&&r?new Xe(r.type.itemType,n,r):null}evaluate(t){const e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new Vt(`Array index out of bounds: ${e} < 0.`);if(e>=n.length)throw new Vt(`Array index out of bounds: ${e} > ${n.length-1}.`);if(e!==Math.floor(e))throw new Vt(`Array index must be an integer, but found ${e} instead.`);return n[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Ye{constructor(t,e){this.type=dt,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,vt),r=e.parse(t[2],2,vt);return n&&r?Et(n.type,[dt,pt,ft,ht,vt])?new Ye(n,r):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${wt(n.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!It(e,["boolean","string","number","null"]))throw new Vt(`Expected first argument to be of type boolean, string, number or null, but found ${wt(jt(e))} instead.`);if(!It(n,["string","array"]))throw new Vt(`Expected second argument to be of type array or string, but found ${wt(jt(n))} instead.`);return n.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class $e{constructor(t,e,n){this.type=ft,this.needle=t,this.haystack=e,this.fromIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,vt),r=e.parse(t[2],2,vt);if(!n||!r)return null;if(!Et(n.type,[dt,pt,ft,ht,vt]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${wt(n.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,ft);return i?new $e(n,r,i):null}return new $e(n,r)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!It(e,["boolean","string","number","null"]))throw new Vt(`Expected first argument to be of type boolean, string, number or null, but found ${wt(jt(e))} instead.`);if(!It(n,["string","array"]))throw new Vt(`Expected second argument to be of type array or string, but found ${wt(jt(n))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(t);return n.indexOf(e,r)}return n.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Ke{constructor(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);const i={},o=[];for(let l=2;l<t.length-1;l+=2){let a=t[l];const s=t[l+1];Array.isArray(a)||(a=[a]);const u=e.concat(l);if(0===a.length)return u.error("Expected at least one branch label.");for(const t of a){if("number"!=typeof t&&"string"!=typeof t)return u.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return u.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return u.error("Numeric branch labels must be integer values.");if(n){if(u.checkSubtype(n,jt(t)))return null}else n=jt(t);if(void 0!==i[String(t)])return u.error("Branch labels must be unique.");i[String(t)]=o.length}const c=e.parse(s,l,r);if(!c)return null;r=r||c.type,o.push(c)}const a=e.parse(t[1],1,vt);if(!a)return null;const s=e.parse(t[t.length-1],t.length-1,r);return s?"value"!==a.type.kind&&e.concat(1).checkSubtype(n,a.type)?null:new Ke(n,r,a,i,o,s):null}evaluate(t){const e=this.input.evaluate(t);return(jt(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),n=[],r={};for(const o of e){const t=r[this.cases[o]];void 0===t?(r[this.cases[o]]=n.length,n.push([this.cases[o],[o]])):n[t][1].push(o)}const i=t=>"number"===this.inputType.kind?Number(t):t;for(const[o,a]of n)t.push(1===a.length?i(a[0]):a.map(i)),t.push(this.outputs[o].serialize());return t.push(this.otherwise.serialize()),t}}class Je{constructor(t,e,n){this.type=t,this.branches=e,this.otherwise=n}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const r=[];for(let o=1;o<t.length-1;o+=2){const i=e.parse(t[o],o,dt);if(!i)return null;const a=e.parse(t[o+1],o+1,n);if(!a)return null;r.push([i,a]),n=n||a.type}const i=e.parse(t[t.length-1],t.length-1,n);return i?new Je(n,r,i):null}evaluate(t){for(const[e,n]of this.branches)if(e.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,n]of this.branches)t(e),t(n);t(this.otherwise)}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild((e=>{t.push(e.serialize())})),t}}class Qe{constructor(t,e,n,r){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,vt),r=e.parse(t[2],2,ft);if(!n||!r)return null;if(!Et(n.type,[bt(vt),pt,vt]))return e.error(`Expected first argument to be of type array or string, but found ${wt(n.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,ft);return i?new Qe(n.type,n,r,i):null}return new Qe(n.type,n,r)}evaluate(t){const e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!It(e,["string","array"]))throw new Vt(`Expected first argument to be of type array or string, but found ${wt(jt(e))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(t);return e.slice(n,r)}return e.slice(n)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function tn(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function en(t,e,n,r){return 0===r.compare(e,n)}function nn(t,e,n){const r="=="!==t&&"!="!==t;return class i{constructor(t,e,n){this.type=dt,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const n=t[0];let o=e.parse(t[1],1,vt);if(!o)return null;if(!tn(n,o.type))return e.concat(1).error(`"${n}" comparisons are not supported for type '${wt(o.type)}'.`);let a=e.parse(t[2],2,vt);if(!a)return null;if(!tn(n,a.type))return e.concat(2).error(`"${n}" comparisons are not supported for type '${wt(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error(`Cannot compare types '${wt(o.type)}' and '${wt(a.type)}'.`);r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Gt(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Gt(o.type,[a])));let s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(s=e.parse(t[3],3,yt),!s)return null}return new i(o,a,s)}evaluate(i){const o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){const e=jt(o),n=jt(a);if(e.kind!==n.kind||"string"!==e.kind&&"number"!==e.kind)throw new Vt(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${n.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const t=jt(o),n=jt(a);if("string"!==t.kind||"string"!==n.kind)return e(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):e(i,o,a)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild((t=>{e.push(t.serialize())})),e}}}const rn=nn("==",(function(t,e,n){return e===n}),en),on=nn("!=",(function(t,e,n){return e!==n}),(function(t,e,n,r){return!en(0,e,n,r)})),an=nn("<",(function(t,e,n){return e<n}),(function(t,e,n,r){return r.compare(e,n)<0})),sn=nn(">",(function(t,e,n){return e>n}),(function(t,e,n,r){return r.compare(e,n)>0})),ln=nn("<=",(function(t,e,n){return e<=n}),(function(t,e,n,r){return r.compare(e,n)<=0})),un=nn(">=",(function(t,e,n){return e>=n}),(function(t,e,n,r){return r.compare(e,n)>=0}));class cn{constructor(t,e,n,r,i){this.type=pt,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,ft);if(!n)return null;const r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");let i=null;if(r.locale&&(i=e.parse(r.locale,1,pt),!i))return null;let o=null;if(r.currency&&(o=e.parse(r.currency,1,pt),!o))return null;let a=null;if(r["min-fraction-digits"]&&(a=e.parse(r["min-fraction-digits"],1,ft),!a))return null;let s=null;return r["max-fraction-digits"]&&(s=e.parse(r["max-fraction-digits"],1,ft),!s)?null:new cn(n,i,o,a,s)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class hn{constructor(t){this.type=ft,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error(`Expected argument of type string or array, but found ${wt(n.type)} instead.`):new hn(n):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Vt(`Expected value to be of type string or array, but found ${wt(jt(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild((e=>{t.push(e.serialize())})),t}}const fn={"==":rn,"!=":on,">":sn,"<":an,">=":un,"<=":ln,array:Gt,at:Xe,boolean:Gt,case:Je,coalesce:We,collator:Qt,format:Wt,image:Ht,in:Ye,"index-of":$e,interpolate:qe,"interpolate-hcl":qe,"interpolate-lab":qe,length:hn,let:He,literal:Ut,match:Ke,number:Gt,"number-format":cn,object:Gt,slice:Qe,step:Se,string:Gt,"to-boolean":Yt,"to-color":Yt,"to-number":Yt,"to-string":Yt,var:xe,within:ge};function pn(t,[e,n,r,i]){e=e.evaluate(t),n=n.evaluate(t),r=r.evaluate(t);const o=i?i.evaluate(t):1,a=Ft(e,n,r,o);if(a)throw new Vt(a);return new Rt(e/255*o,n/255*o,r/255*o,o)}function dn(t,e){return t in e}function mn(t,e){const n=e[t];return void 0===n?null:n}function gn(t){return{type:t}}function vn(t){return{result:"success",value:t}}function yn(t){return{result:"error",value:t}}function _n(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function xn(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function bn(t){return!!t.expression&&t.expression.interpolated}function wn(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function kn(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Sn(t){return t}function En(t,e){const n="color"===e.type,r=t.stops&&"object"==typeof t.stops[0][0],i=r||!(r||void 0!==t.property),o=t.type||(bn(e)?"exponential":"interval");if(n&&((t=at({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],Rt.parse(t[1])]))),t.default=Rt.parse(t.default?t.default:e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!Ve[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let a,s,l;if("exponential"===o)a=Pn;else if("interval"===o)a=An;else if("categorical"===o){a=Cn,s=Object.create(null);for(const e of t.stops)s[e[0]]=e[1];l=typeof t.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);a=Tn}if(r){const n={},r=[];for(let e=0;e<t.stops.length;e++){const i=t.stops[e],o=i[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},r.push(o)),n[o].stops.push([i[0].value,i[1]])}const i=[];for(const t of r)i.push([n[t].zoom,En(n[t],e)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:qe.interpolationFactor.bind(void 0,o),zoomStops:i.map((t=>t[0])),evaluate:({zoom:n},r)=>Pn({stops:i,base:t.base},e,n).evaluate(n,r)}}if(i){const n="exponential"===o?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:qe.interpolationFactor.bind(void 0,n),zoomStops:t.stops.map((t=>t[0])),evaluate:({zoom:n})=>a(t,e,n,s,l)}}return{kind:"source",evaluate(n,r){const i=r&&r.properties?r.properties[t.property]:void 0;return void 0===i?In(t.default,e.default):a(t,e,i,s,l)}}}function In(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function Cn(t,e,n,r,i){return In(typeof n===i?r[n]:void 0,t.default,e.default)}function An(t,e,n){if("number"!==wn(n))return In(t.default,e.default);const r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];const i=ke(t.stops.map((t=>t[0])),n);return t.stops[i][1]}function Pn(t,e,n){const r=void 0!==t.base?t.base:1;if("number"!==wn(n))return In(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];const o=ke(t.stops.map((t=>t[0])),n),a=function(t,e,n,r){const i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1];let u=Ie[e.type]||Sn;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=Ve[t.colorSpace];u=(t,n)=>e.reverse(e.interpolate(e.forward(t),e.forward(n),a))}return"function"==typeof s.evaluate?{evaluate(...t){const e=s.evaluate.apply(void 0,t),n=l.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==n)return u(e,n,a)}}:u(s,l,a)}function Tn(t,e,n){return"color"===e.type?n=Rt.parse(n):"formatted"===e.type?n=zt.fromString(n.toString()):"resolvedImage"===e.type?n=Dt.fromString(n.toString()):wn(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),In(n,t.default,e.default)}Jt.register(fn,{error:[{kind:"error"},[pt],(t,[e])=>{throw new Vt(e.evaluate(t))}],typeof:[pt,[vt],(t,[e])=>wt(jt(e.evaluate(t)))],"to-rgba":[bt(ft,4),[mt],(t,[e])=>e.evaluate(t).toArray()],rgb:[mt,[ft,ft,ft],pn],rgba:[mt,[ft,ft,ft,ft],pn],has:{type:dt,overloads:[[[pt],(t,[e])=>dn(e.evaluate(t),t.properties())],[[pt,gt],(t,[e,n])=>dn(e.evaluate(t),n.evaluate(t))]]},get:{type:vt,overloads:[[[pt],(t,[e])=>mn(e.evaluate(t),t.properties())],[[pt,gt],(t,[e,n])=>mn(e.evaluate(t),n.evaluate(t))]]},"feature-state":[vt,[pt],(t,[e])=>mn(e.evaluate(t),t.featureState||{})],properties:[gt,[],t=>t.properties()],"geometry-type":[pt,[],t=>t.geometryType()],id:[vt,[],t=>t.id()],zoom:[ft,[],t=>t.globals.zoom],"heatmap-density":[ft,[],t=>t.globals.heatmapDensity||0],"line-progress":[ft,[],t=>t.globals.lineProgress||0],accumulated:[vt,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[ft,gn(ft),(t,e)=>{let n=0;for(const r of e)n+=r.evaluate(t);return n}],"*":[ft,gn(ft),(t,e)=>{let n=1;for(const r of e)n*=r.evaluate(t);return n}],"-":{type:ft,overloads:[[[ft,ft],(t,[e,n])=>e.evaluate(t)-n.evaluate(t)],[[ft],(t,[e])=>-e.evaluate(t)]]},"/":[ft,[ft,ft],(t,[e,n])=>e.evaluate(t)/n.evaluate(t)],"%":[ft,[ft,ft],(t,[e,n])=>e.evaluate(t)%n.evaluate(t)],ln2:[ft,[],()=>Math.LN2],pi:[ft,[],()=>Math.PI],e:[ft,[],()=>Math.E],"^":[ft,[ft,ft],(t,[e,n])=>Math.pow(e.evaluate(t),n.evaluate(t))],sqrt:[ft,[ft],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[ft,[ft],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[ft,[ft],(t,[e])=>Math.log(e.evaluate(t))],log2:[ft,[ft],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[ft,[ft],(t,[e])=>Math.sin(e.evaluate(t))],cos:[ft,[ft],(t,[e])=>Math.cos(e.evaluate(t))],tan:[ft,[ft],(t,[e])=>Math.tan(e.evaluate(t))],asin:[ft,[ft],(t,[e])=>Math.asin(e.evaluate(t))],acos:[ft,[ft],(t,[e])=>Math.acos(e.evaluate(t))],atan:[ft,[ft],(t,[e])=>Math.atan(e.evaluate(t))],min:[ft,gn(ft),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[ft,gn(ft),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[ft,[ft],(t,[e])=>Math.abs(e.evaluate(t))],round:[ft,[ft],(t,[e])=>{const n=e.evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[ft,[ft],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[ft,[ft],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[dt,[pt,vt],(t,[e,n])=>t.properties()[e.value]===n.value],"filter-id-==":[dt,[vt],(t,[e])=>t.id()===e.value],"filter-type-==":[dt,[pt],(t,[e])=>t.geometryType()===e.value],"filter-<":[dt,[pt,vt],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r<i}],"filter-id-<":[dt,[vt],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n<r}],"filter->":[dt,[pt,vt],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r>i}],"filter-id->":[dt,[vt],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n>r}],"filter-<=":[dt,[pt,vt],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[dt,[vt],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n<=r}],"filter->=":[dt,[pt,vt],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[dt,[vt],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n>=r}],"filter-has":[dt,[vt],(t,[e])=>e.value in t.properties()],"filter-has-id":[dt,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[dt,[bt(pt)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[dt,[bt(vt)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[dt,[pt,bt(vt)],(t,[e,n])=>n.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[dt,[pt,bt(vt)],(t,[e,n])=>function(t,e,n,r){for(;n<=r;){const i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[e.value],n.value,0,n.value.length-1)],all:{type:dt,overloads:[[[dt,dt],(t,[e,n])=>e.evaluate(t)&&n.evaluate(t)],[gn(dt),(t,e)=>{for(const n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:dt,overloads:[[[dt,dt],(t,[e,n])=>e.evaluate(t)||n.evaluate(t)],[gn(dt),(t,e)=>{for(const n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[dt,[dt],(t,[e])=>!e.evaluate(t)],"is-supported-script":[dt,[pt],(t,[e])=>{const n=t.globals&&t.globals.isSupportedScript;return!n||n(e.evaluate(t))}],upcase:[pt,[pt],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[pt,[pt],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[pt,gn(vt),(t,e)=>e.map((e=>Zt(e.evaluate(t)))).join("")],"resolved-locale":[pt,[yt],(t,[e])=>e.evaluate(t).resolvedLocale()]});class Mn{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Kt,this._defaultValue=e?function(t){return"color"===t.type&&kn(t.default)?new Rt(0,0,0,0):"color"===t.type?Rt.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,n,r,i,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(t,e,n,r,i,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new Vt(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function Ln(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in fn}function Rn(t,e){const n=new be(fn,[],e?function(t){const e={color:mt,string:pt,number:ft,enum:pt,boolean:dt,formatted:_t,resolvedImage:xt};return"array"===t.type?bt(e[t.value]||vt,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?vn(new Mn(r,e)):yn(n.errors)}class Nn{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!ye(e.expression)}evaluateWithoutErrorHandling(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}evaluate(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}}class On{constructor(t,e,n,r){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!ye(e.expression),this.interpolationType=r}evaluateWithoutErrorHandling(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}evaluate(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}interpolationFactor(t,e,n){return this.interpolationType?qe.interpolationFactor(this.interpolationType,t,e,n):0}}function zn(t,e){const n=Rn(t,e);if("error"===n.result)return n;const r=n.value.expression,i=ve(r);if(!i&&!_n(e))return yn([new ut("","data expressions not supported")]);const o=_e(r,["zoom"]);if(!o&&!xn(e))return yn([new ut("","zoom expressions not supported")]);const a=Fn(r);return a||o?a instanceof ut?yn([a]):a instanceof qe&&!bn(e)?yn([new ut("",'"interpolate" expressions cannot be used with this property')]):vn(a?new On(i?"camera":"composite",n.value,a.labels,a instanceof qe?a.interpolation:void 0):new Nn(i?"constant":"source",n.value)):yn([new ut("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Dn{constructor(t,e){this._parameters=t,this._specification=e,at(this,En(this._parameters,this._specification))}static deserialize(t){return new Dn(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Fn(t){let e=null;if(t instanceof He)e=Fn(t.result);else if(t instanceof We){for(const n of t.args)if(e=Fn(n),e)break}else(t instanceof Se||t instanceof qe)&&t.input instanceof Jt&&"zoom"===t.input.name&&(e=t);return e instanceof ut||t.eachChild((t=>{const n=Fn(t);n instanceof ut?e=n:!e&&n?e=new ut("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new ut("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function Bn(t){const e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec;let s=[];const l=wn(n);if("object"!==l)return[new it(e,n,`object expected, ${l} found`)];for(const u in n){const t=u.split(".")[0],l=r[t]||r["*"];let c;if(i[t])c=i[t];else if(r[t])c=fr;else if(i["*"])c=i["*"];else{if(!r["*"]){s.push(new it(e,n[u],`unknown property "${u}"`));continue}c=fr}s=s.concat(c({key:(e?`${e}.`:e)+u,value:n[u],valueSpec:l,style:o,styleSpec:a,object:n,objectKey:u},n))}for(const u in r)i[u]||r[u].required&&void 0===r[u].default&&void 0===n[u]&&s.push(new it(e,n,`missing required property "${u}"`));return s}function jn(t){const e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||fr;if("array"!==wn(e))return[new it(o,e,`array expected, ${wn(e)} found`)];if(n.length&&e.length!==n.length)return[new it(o,e,`array length ${n.length} expected, length ${e.length} found`)];if(n["min-length"]&&e.length<n["min-length"])return[new it(o,e,`array length at least ${n["min-length"]} expected, length ${e.length} found`)];let s={type:n.value,values:n.values};i.$version<7&&(s.function=n.function),"object"===wn(n.value)&&(s=n.value);let l=[];for(let u=0;u<e.length;u++)l=l.concat(a({array:e,arrayIndex:u,value:e[u],valueSpec:s,style:r,styleSpec:i,key:`${o}[${u}]`}));return l}function Zn(t){const e=t.key,n=t.value,r=t.valueSpec;let i=wn(n);return"number"===i&&n!=n&&(i="NaN"),"number"!==i?[new it(e,n,`number expected, ${i} found`)]:"minimum"in r&&n<r.minimum?[new it(e,n,`${n} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&n>r.maximum?[new it(e,n,`${n} is greater than the maximum value ${r.maximum}`)]:[]}function Un(t){const e=t.valueSpec,n=st(t.value.type);let r,i,o,a={};const s="categorical"!==n&&void 0===t.value.property,l=!s,u="array"===wn(t.value.stops)&&"array"===wn(t.value.stops[0])&&"object"===wn(t.value.stops[0][0]),c=Bn({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===n)return[new it(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const r=t.value;return e=e.concat(jn({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===wn(r)&&0===r.length&&e.push(new it(t.key,r,"array must have at least one stop")),e},default:function(t){return fr({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===n&&s&&c.push(new it(t.key,t.value,'missing required property "property"')),"identity"===n||t.value.stops||c.push(new it(t.key,t.value,'missing required property "stops"')),"exponential"===n&&t.valueSpec.expression&&!bn(t.valueSpec)&&c.push(new it(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!_n(t.valueSpec)?c.push(new it(t.key,t.value,"property functions not supported")):s&&!xn(t.valueSpec)&&c.push(new it(t.key,t.value,"zoom functions not supported"))),"categorical"!==n&&!u||void 0!==t.value.property||c.push(new it(t.key,t.value,'"property" property is required')),c;function h(t){let n=[];const r=t.value,s=t.key;if("array"!==wn(r))return[new it(s,r,`array expected, ${wn(r)} found`)];if(2!==r.length)return[new it(s,r,`array length 2 expected, length ${r.length} found`)];if(u){if("object"!==wn(r[0]))return[new it(s,r,`object expected, ${wn(r[0])} found`)];if(void 0===r[0].zoom)return[new it(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new it(s,r,"object stop key must have value")];if(o&&o>st(r[0].zoom))return[new it(s,r[0].zoom,"stop zoom values must appear in ascending order")];st(r[0].zoom)!==o&&(o=st(r[0].zoom),i=void 0,a={}),n=n.concat(Bn({key:`${s}[0]`,value:r[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Zn,value:f}}))}else n=n.concat(f({key:`${s}[0]`,value:r[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},r));return Ln(lt(r[1]))?n.concat([new it(`${s}[1]`,r[1],"expressions are not allowed in function stops.")]):n.concat(fr({key:`${s}[1]`,value:r[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function f(t,o){const s=wn(t.value),l=st(t.value),u=null!==t.value?t.value:o;if(r){if(s!==r)return[new it(t.key,u,`${s} stop domain type must match previous stop domain type ${r}`)]}else r=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new it(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let r=`number expected, ${s} found`;return _n(e)&&void 0===n&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new it(t.key,u,r)]}return"categorical"!==n||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&void 0!==i&&l<i?[new it(t.key,u,"stop domain values must appear in ascending order")]:(i=l,"categorical"===n&&l in a?[new it(t.key,u,"stop domain values must be unique")]:(a[l]=!0,[])):[new it(t.key,u,`integer expected, found ${l}`)]}}function Vn(t){const e=("property"===t.expressionContext?zn:Rn)(lt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new it(`${t.key}${e.key}`,t.value,e.message)));const n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new it(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ye(n))return[new it(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!ye(n))return[new it(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!_e(n,["zoom","feature-state"]))return[new it(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!ve(n))return[new it(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function qn(t){const e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(st(n))&&i.push(new it(e,n,`expected one of [${r.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(r.values).indexOf(st(n))&&i.push(new it(e,n,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(n)} found`)),i}function Gn(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!Gn(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const Wn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Hn(t){if(null==t)return{filter:()=>!0,needGeometry:!1};Gn(t)||(t=$n(t));const e=Rn(t,Wn);if("error"===e.result)throw new Error(e.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return{filter:(t,n,r)=>e.value.evaluate(t,n,{},r),needGeometry:Yn(t)}}function Xn(t,e){return t<e?-1:t>e?1:0}function Yn(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(Yn(t[e]))return!0;return!1}function $n(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?Kn(t[1],t[2],"=="):"!="===e?tr(Kn(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Kn(t[1],t[2],e):"any"===e?(n=t.slice(1),["any"].concat(n.map($n))):"all"===e?["all"].concat(t.slice(1).map($n)):"none"===e?["all"].concat(t.slice(1).map($n).map(tr)):"in"===e?Jn(t[1],t.slice(2)):"!in"===e?tr(Jn(t[1],t.slice(2))):"has"===e?Qn(t[1]):"!has"===e?tr(Qn(t[1])):"within"!==e||t;var n}function Kn(t,e,n){switch(t){case"$type":return[`filter-type-${n}`,e];case"$id":return[`filter-id-${n}`,e];default:return[`filter-${n}`,t,e]}}function Jn(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(Xn)]]:["filter-in-small",t,["literal",e]]}}function Qn(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function tr(t){return["!",t]}function er(t){return Gn(lt(t.value))?Vn(at({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):nr(t)}function nr(t){const e=t.value,n=t.key;if("array"!==wn(e))return[new it(n,e,`array expected, ${wn(e)} found`)];const r=t.styleSpec;let i,o=[];if(e.length<1)return[new it(n,e,"filter array must have at least 1 element")];switch(o=o.concat(qn({key:`${n}[0]`,value:e[0],valueSpec:r.filter_operator,style:t.style,styleSpec:t.styleSpec})),st(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===st(e[1])&&o.push(new it(n,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&o.push(new it(n,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(i=wn(e[1]),"string"!==i&&o.push(new it(`${n}[1]`,e[1],`string expected, ${i} found`)));for(let a=2;a<e.length;a++)i=wn(e[a]),"$type"===st(e[1])?o=o.concat(qn({key:`${n}[${a}]`,value:e[a],valueSpec:r.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new it(`${n}[${a}]`,e[a],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let r=1;r<e.length;r++)o=o.concat(nr({key:`${n}[${r}]`,value:e[r],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":i=wn(e[1]),2!==e.length?o.push(new it(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==i&&o.push(new it(`${n}[1]`,e[1],`string expected, ${i} found`));break;case"within":i=wn(e[1]),2!==e.length?o.push(new it(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==i&&o.push(new it(`${n}[1]`,e[1],`object expected, ${i} found`))}return o}function rr(t,e){const n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[`${e}_${t.layerType}`];if(!s)return[];const l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return fr({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});const u=t.valueSpec||s[a];if(!u)return[new it(n,o,`unknown property "${a}"`)];let c;if("string"===wn(o)&&_n(u)&&!u.tokens&&(c=/^{([^}]+)}$/.exec(o)))return[new it(n,o,`"${a}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(c[1])} }\`.`)];const h=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new it(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&kn(lt(o))&&"identity"===st(o.type)&&h.push(new it(n,o,'"text-font" does not support identity functions'))),h.concat(fr({key:t.key,value:o,valueSpec:u,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function ir(t){return rr(t,"paint")}function or(t){return rr(t,"layout")}function ar(t){let e=[];const n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new it(r,n,'either "type" or "ref" is required'));let a=st(n.type);const s=st(n.ref);if(n.id){const o=st(n.id);for(let a=0;a<t.arrayIndex;a++){const t=i.layers[a];st(t.id)===o&&e.push(new it(r,n.id,`duplicate layer id "${n.id}", previously used at line ${t.id.__line__}`))}}if("ref"in n){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in n&&e.push(new it(r,n[t],`"${t}" is prohibited for ref layers`))})),i.layers.forEach((e=>{st(e.id)===s&&(t=e)})),t?t.ref?e.push(new it(r,n.ref,"ref cannot reference another ref layer")):a=st(t.type):e.push(new it(r,n.ref,`ref layer "${s}" not found`))}else if("background"!==a)if(n.source){const t=i.sources&&i.sources[n.source],o=t&&st(t.type);t?"vector"===o&&"raster"===a?e.push(new it(r,n.source,`layer "${n.id}" requires a raster source`)):"raster"===o&&"raster"!==a?e.push(new it(r,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==a?e.push(new it(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!n.paint||!n.paint["line-gradient"]||"geojson"===o&&t.lineMetrics||e.push(new it(r,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new it(r,n,`layer "${n.id}" must specify a "source-layer"`)):e.push(new it(r,n.source,`source "${n.source}" not found`))}else e.push(new it(r,n,'missing required property "source"'));return e=e.concat(Bn({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>fr({key:`${r}.type`,value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"}),filter:er,layout:t=>Bn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>or(at({layerType:a},t))}}),paint:t=>Bn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>ir(at({layerType:a},t))}})}})),e}function sr(t){const e=t.value,n=t.key,r=wn(e);return"string"!==r?[new it(n,e,`string expected, ${r} found`)]:[]}const lr={promoteId:function({key:t,value:e}){if("string"===wn(e))return sr({key:t,value:e});{const n=[];for(const r in e)n.push(...sr({key:`${t}.${r}`,value:e[r]}));return n}}};function ur(t){const e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new it(n,e,'"type" is required')];const o=st(e.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=Bn({key:n,value:e,valueSpec:r[`source_${o.replace("-","_")}`],style:t.style,styleSpec:r,objectElementValidators:lr}),a;case"geojson":if(a=Bn({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:lr}),e.cluster)for(const t in e.clusterProperties){const[r,i]=e.clusterProperties[t],o="string"==typeof r?[r,["accumulated"],["get",t]]:r;a.push(...Vn({key:`${n}.${t}.map`,value:i,expressionContext:"cluster-map"})),a.push(...Vn({key:`${n}.${t}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return Bn({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return Bn({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new it(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return qn({key:`${n}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function cr(t){const e=t.value,n=t.styleSpec,r=n.light,i=t.style;let o=[];const a=wn(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new it("light",e,`object expected, ${a} found`)]),o;for(const s in e){const t=s.match(/^(.*)-transition$/);o=o.concat(t&&r[t[1]]&&r[t[1]].transition?fr({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?fr({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n}):[new it(s,e[s],`unknown property "${s}"`)])}return o}const hr={"*":()=>[],array:jn,boolean:function(t){const e=t.value,n=t.key,r=wn(e);return"boolean"!==r?[new it(n,e,`boolean expected, ${r} found`)]:[]},number:Zn,color:function(t){const e=t.key,n=t.value,r=wn(n);return"string"!==r?[new it(e,n,`color expected, ${r} found`)]:null===Ct(n)?[new it(e,n,`color expected, "${n}" found`)]:[]},constants:ot,enum:qn,filter:er,function:Un,layer:ar,object:Bn,source:ur,light:cr,string:sr,formatted:function(t){return 0===sr(t).length?[]:Vn(t)},resolvedImage:function(t){return 0===sr(t).length?[]:Vn(t)}};function fr(t){const e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&kn(st(e))?Un(t):n.expression&&Ln(lt(e))?Vn(t):n.type&&hr[n.type]?hr[n.type](t):Bn(at({},t,{valueSpec:n.type?r[n.type]:n}))}function pr(t){const e=t.value,n=t.key,r=sr(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new it(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new it(n,e,'"glyphs" url must include a "{range}" token'))),r}function dr(t,e=rt){let n=[];return n=n.concat(fr({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:pr,"*":()=>[]}})),t.constants&&(n=n.concat(ot({key:"constants",value:t.constants,style:t,styleSpec:e}))),mr(n)}function mr(t){return[].concat(t).sort(((t,e)=>t.line-e.line))}function gr(t){return function(...e){return mr(t.apply(this,e))}}dr.source=gr(ur),dr.light=gr(cr),dr.layer=gr(ar),dr.filter=gr(er),dr.paintProperty=gr(ir),dr.layoutProperty=gr(or);const vr=dr,yr=vr.light,_r=vr.paintProperty,xr=vr.layoutProperty;function br(t,e){let n=!1;if(e&&e.length)for(const r of e)t.fire(new et(new Error(r.message))),n=!0;return n}class wr{constructor(t,e,n){const r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(n=i[2]);for(let t=0;t<this.d*this.d;t++){const e=i[3+t],n=i[3+t+1];r.push(e===n?null:i.subarray(e,n))}const o=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],o),this.bboxes=i.subarray(o),this.insert=this._insertReadonly}else{this.d=e+2*n;for(let t=0;t<this.d*this.d;t++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;const i=n/e*t;this.min=-i,this.max=t+i}insert(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,e,n,r,i,o){this.cells[i].push(o)}query(t,e,n,r,i){const o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);{const o=[];return this._forEachCell(t,e,n,r,this._queryCell,o,{},i),o}}_queryCell(t,e,n,r,i,o,a,s){const l=this.cells[i];if(null!==l){const i=this.keys,u=this.bboxes;for(let c=0;c<l.length;c++){const h=l[c];if(void 0===a[h]){const l=4*h;(s?s(u[l+0],u[l+1],u[l+2],u[l+3]):t<=u[l+2]&&e<=u[l+3]&&n>=u[l+0]&&r>=u[l+1])?(a[h]=!0,o.push(i[h])):a[h]=!1}}}}_forEachCell(t,e,n,r,i,o,a,s){const l=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(n),h=this._convertToCellCoord(r);for(let f=l;f<=c;f++)for(let l=u;l<=h;l++){const u=this.d*l+f;if((!s||s(this._convertFromCellCoord(f),this._convertFromCellCoord(l),this._convertFromCellCoord(f+1),this._convertFromCellCoord(l+1)))&&i.call(this,t,e,n,r,u,o,a,s))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,e=3+this.cells.length+1+1;let n=0;for(let o=0;o<this.cells.length;o++)n+=this.cells[o].length;const r=new Int32Array(e+n+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;let i=e;for(let o=0;o<t.length;o++){const e=t[o];r[3+o]=i,r.set(e,i),i+=e.length}return r[3+t.length]=i,r.set(this.keys,i),i+=this.keys.length,r[3+t.length+1]=i,r.set(this.bboxes,i),i+=this.bboxes.length,r.buffer}static serialize(t,e){const n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}}static deserialize(t){return new wr(t.buffer)}}const kr={};function Sr(t,e,n={}){Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),kr[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}Sr("Object",Object),Sr("TransferableGridIndex",wr),Sr("Color",Rt),Sr("Error",Error),Sr("AJAXError",U),Sr("ResolvedImage",Dt),Sr("StylePropertyFunction",Dn),Sr("StyleExpression",Mn,{omit:["_evaluator"]}),Sr("ZoomDependentExpression",On),Sr("ZoomConstantExpression",Nn),Sr("CompoundExpression",Jt,{omit:["_evaluate"]});for(const pc in fn)fn[pc]._classRegistryKey||Sr(`Expression_${pc}`,fn[pc]);function Er(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Ir(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob)return t;if(Er(t))return e&&e.push(t),t;if(k(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){const n=t;return e&&e.push(n.buffer),n}if(t instanceof ImageData)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){const n=[];for(const r of t)n.push(Ir(r,e));return n}if("object"==typeof t){const n=t.constructor,r=n._classRegistryKey;if(!r)throw new Error("can't serialize object of unregistered class");const i=n.serialize?n.serialize(t,e):{};if(!n.serialize){for(const n in t){if(!t.hasOwnProperty(n))continue;if(kr[r].omit.indexOf(n)>=0)continue;const o=t[n];i[n]=kr[r].shallow.indexOf(n)>=0?o:Ir(o,e)}t instanceof Error&&(i.message=t.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(i.$name=r),i}throw new Error("can't serialize object of type "+typeof t)}function Cr(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob||Er(t)||k(t)||ArrayBuffer.isView(t)||t instanceof ImageData)return t;if(Array.isArray(t))return t.map(Cr);if("object"==typeof t){const e=t.$name||"Object";if(!kr[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:n}=kr[e];if(!n)throw new Error(`can't deserialize unregistered class ${e}`);if(n.deserialize)return n.deserialize(t);const r=Object.create(n.prototype);for(const i of Object.keys(t)){if("$name"===i)continue;const n=t[i];r[i]=kr[e].shallow.indexOf(i)>=0?n:Cr(n)}return r}throw new Error("can't deserialize object of type "+typeof t)}class Ar{constructor(){this.first=!0}update(t,e){const n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))}}const Pr={"Latin-1 Supplement":t=>t>=128&&t<=255,Arabic:t=>t>=1536&&t<=1791,"Arabic Supplement":t=>t>=1872&&t<=1919,"Arabic Extended-A":t=>t>=2208&&t<=2303,"Hangul Jamo":t=>t>=4352&&t<=4607,"Unified Canadian Aboriginal Syllabics":t=>t>=5120&&t<=5759,Khmer:t=>t>=6016&&t<=6143,"Unified Canadian Aboriginal Syllabics Extended":t=>t>=6320&&t<=6399,"General Punctuation":t=>t>=8192&&t<=8303,"Letterlike Symbols":t=>t>=8448&&t<=8527,"Number Forms":t=>t>=8528&&t<=8591,"Miscellaneous Technical":t=>t>=8960&&t<=9215,"Control Pictures":t=>t>=9216&&t<=9279,"Optical Character Recognition":t=>t>=9280&&t<=9311,"Enclosed Alphanumerics":t=>t>=9312&&t<=9471,"Geometric Shapes":t=>t>=9632&&t<=9727,"Miscellaneous Symbols":t=>t>=9728&&t<=9983,"Miscellaneous Symbols and Arrows":t=>t>=11008&&t<=11263,"CJK Radicals Supplement":t=>t>=11904&&t<=12031,"Kangxi Radicals":t=>t>=12032&&t<=12255,"Ideographic Description Characters":t=>t>=12272&&t<=12287,"CJK Symbols and Punctuation":t=>t>=12288&&t<=12351,Hiragana:t=>t>=12352&&t<=12447,Katakana:t=>t>=12448&&t<=12543,Bopomofo:t=>t>=12544&&t<=12591,"Hangul Compatibility Jamo":t=>t>=12592&&t<=12687,Kanbun:t=>t>=12688&&t<=12703,"Bopomofo Extended":t=>t>=12704&&t<=12735,"CJK Strokes":t=>t>=12736&&t<=12783,"Katakana Phonetic Extensions":t=>t>=12784&&t<=12799,"Enclosed CJK Letters and Months":t=>t>=12800&&t<=13055,"CJK Compatibility":t=>t>=13056&&t<=13311,"CJK Unified Ideographs Extension A":t=>t>=13312&&t<=19903,"Yijing Hexagram Symbols":t=>t>=19904&&t<=19967,"CJK Unified Ideographs":t=>t>=19968&&t<=40959,"Yi Syllables":t=>t>=40960&&t<=42127,"Yi Radicals":t=>t>=42128&&t<=42191,"Hangul Jamo Extended-A":t=>t>=43360&&t<=43391,"Hangul Syllables":t=>t>=44032&&t<=55215,"Hangul Jamo Extended-B":t=>t>=55216&&t<=55295,"Private Use Area":t=>t>=57344&&t<=63743,"CJK Compatibility Ideographs":t=>t>=63744&&t<=64255,"Arabic Presentation Forms-A":t=>t>=64336&&t<=65023,"Vertical Forms":t=>t>=65040&&t<=65055,"CJK Compatibility Forms":t=>t>=65072&&t<=65103,"Small Form Variants":t=>t>=65104&&t<=65135,"Arabic Presentation Forms-B":t=>t>=65136&&t<=65279,"Halfwidth and Fullwidth Forms":t=>t>=65280&&t<=65519};function Tr(t){for(const e of t)if(Rr(e.charCodeAt(0)))return!0;return!1}function Mr(t){for(const e of t)if(!Lr(e.charCodeAt(0)))return!1;return!0}function Lr(t){return!(Pr.Arabic(t)||Pr["Arabic Supplement"](t)||Pr["Arabic Extended-A"](t)||Pr["Arabic Presentation Forms-A"](t)||Pr["Arabic Presentation Forms-B"](t))}function Rr(t){return!(746!==t&&747!==t&&(t<4352||!(Pr["Bopomofo Extended"](t)||Pr.Bopomofo(t)||Pr["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Pr["CJK Compatibility Ideographs"](t)||Pr["CJK Compatibility"](t)||Pr["CJK Radicals Supplement"](t)||Pr["CJK Strokes"](t)||!(!Pr["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Pr["CJK Unified Ideographs Extension A"](t)||Pr["CJK Unified Ideographs"](t)||Pr["Enclosed CJK Letters and Months"](t)||Pr["Hangul Compatibility Jamo"](t)||Pr["Hangul Jamo Extended-A"](t)||Pr["Hangul Jamo Extended-B"](t)||Pr["Hangul Jamo"](t)||Pr["Hangul Syllables"](t)||Pr.Hiragana(t)||Pr["Ideographic Description Characters"](t)||Pr.Kanbun(t)||Pr["Kangxi Radicals"](t)||Pr["Katakana Phonetic Extensions"](t)||Pr.Katakana(t)&&12540!==t||!(!Pr["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Pr["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Pr["Unified Canadian Aboriginal Syllabics"](t)||Pr["Unified Canadian Aboriginal Syllabics Extended"](t)||Pr["Vertical Forms"](t)||Pr["Yijing Hexagram Symbols"](t)||Pr["Yi Syllables"](t)||Pr["Yi Radicals"](t))))}function Nr(t){return!(Rr(t)||function(t){return!!(Pr["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Pr["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Pr["Letterlike Symbols"](t)||Pr["Number Forms"](t)||Pr["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Pr["Control Pictures"](t)&&9251!==t||Pr["Optical Character Recognition"](t)||Pr["Enclosed Alphanumerics"](t)||Pr["Geometric Shapes"](t)||Pr["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Pr["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Pr["CJK Symbols and Punctuation"](t)||Pr.Katakana(t)||Pr["Private Use Area"](t)||Pr["CJK Compatibility Forms"](t)||Pr["Small Form Variants"](t)||Pr["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Or(t){return t>=1424&&t<=2303||Pr["Arabic Presentation Forms-A"](t)||Pr["Arabic Presentation Forms-B"](t)}function zr(t,e){return!(!e&&Or(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Pr.Khmer(t))}function Dr(t){for(const e of t)if(Or(e.charCodeAt(0)))return!0;return!1}const Fr="deferred",Br="loading",jr="loaded";let Zr=null,Ur="unavailable",Vr=null;const qr=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Ur="error"),Zr&&Zr(t)};function Gr(){Wr.fire(new tt("pluginStateChange",{pluginStatus:Ur,pluginURL:Vr}))}const Wr=new nt,Hr=function(){return Ur},Xr=function(){if(Ur!==Fr||!Vr)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ur=Br,Gr(),Vr&&W({url:Vr},(t=>{t?qr(t):(Ur=jr,Gr())}))},Yr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ur===jr||null!=Yr.applyArabicShaping,isLoading:()=>Ur===Br,setState(t){Ur=t.pluginStatus,Vr=t.pluginURL},isParsed:()=>null!=Yr.applyArabicShaping&&null!=Yr.processBidirectionalText&&null!=Yr.processStyledBidirectionalText,getPluginURL:()=>Vr};class $r{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ar,this.transition={})}isSupportedScript(t){return function(t,e){for(const n of t)if(!zr(n.charCodeAt(0),e))return!1;return!0}(t,Yr.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}}}class Kr{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(kn(t))return new Dn(t,e);if(Ln(t)){const n=zn(t,e);if("error"===n.result)throw new Error(n.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return n.value}{let n=t;return"string"==typeof t&&"color"===e.type&&(n=Rt.parse(t)),{kind:"constant",evaluate:()=>n}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)}}class Jr{constructor(t){this.property=t,this.value=new Kr(t,void 0)}transitioned(t,e){return new ti(this.property,this.value,e,s({},t.transition,this.transition),t.now)}untransitioned(){return new ti(this.property,this.value,null,{},0)}}class Qr{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return f(this._values[t].value.value)}setValue(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Jr(this._values[t].property)),this._values[t].value=new Kr(this._values[t].property,null===e?void 0:f(e))}getTransition(t){return f(this._values[t].transition)}setTransition(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Jr(this._values[t].property)),this._values[t].transition=f(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n);const r=this.getTransition(e);void 0!==r&&(t[`${e}-transition`]=r)}return t}transitioned(t,e){const n=new ei(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].transitioned(t,e._values[r]);return n}untransitioned(){const t=new ei(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class ti{constructor(t,e,n,r,i){this.property=t,this.value=e,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)}possiblyEvaluate(t,e,n){const r=t.now||0,i=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(t,e,n);{const a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),i,function(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(a))}}return i}}class ei{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,n){const r=new ii(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(t,e,n);return r}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class ni{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return f(this._values[t].value)}setValue(t,e){this._values[t]=new Kr(this._values[t].property,null===e?void 0:f(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n)}return t}possiblyEvaluate(t,e,n){const r=new ii(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(t,e,n);return r}}class ri{constructor(t,e,n){this.property=t,this.value=e,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,n,r){return this.property.evaluate(this.value,this.parameters,t,e,n,r)}}class ii{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class oi{constructor(t){this.specification=t}possiblyEvaluate(t,e){return t.expression.evaluate(e)}interpolate(t,e,n){const r=Ie[this.specification.type];return r?r(t,e,n):t}}class ai{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,n,r){return new ri(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,r)}:t.expression,e)}interpolate(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new ri(this,{kind:"constant",value:void 0},t.parameters);const r=Ie[this.specification.type];return r?new ri(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.parameters):t}evaluate(t,e,n,r,i,o){return"constant"===t.kind?t.value:t.evaluate(e,n,r,i,o)}}class si extends ai{possiblyEvaluate(t,e,n,r){if(void 0===t.value)return new ri(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){const i=t.expression.evaluate(e,null,{},n,r),o="resolvedImage"===t.property.specification.type&&"string"!=typeof i?i.name:i,a=this._calculate(o,o,o,e);return new ri(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){const n=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new ri(this,{kind:"constant",value:n},e)}return new ri(this,t.expression,e)}evaluate(t,e,n,r,i,o){if("source"===t.kind){const a=t.evaluate(e,n,r,i,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,r),t.evaluate({zoom:Math.floor(e.zoom)},n,r),t.evaluate({zoom:Math.floor(e.zoom)+1},n,r),e):t.value}_calculate(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}}interpolate(t){return t}}class li{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,r){if(void 0!==t.value){if("constant"===t.expression.kind){const i=t.expression.evaluate(e,null,{},n,r);return this._calculate(i,i,i,e)}return this._calculate(t.expression.evaluate(new $r(Math.floor(e.zoom-1),e)),t.expression.evaluate(new $r(Math.floor(e.zoom),e)),t.expression.evaluate(new $r(Math.floor(e.zoom+1),e)),e)}}_calculate(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}}interpolate(t){return t}}class ui{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,r){return!!t.expression.evaluate(e,null,{},n,r)}interpolate(){return!1}}class ci{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const e in t){const n=t[e];n.specification.overridable&&this.overridableProperties.push(e);const r=this.defaultPropertyValues[e]=new Kr(n,void 0),i=this.defaultTransitionablePropertyValues[e]=new Jr(n);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}}}Sr("DataDrivenProperty",ai),Sr("DataConstantProperty",oi),Sr("CrossFadedDataDrivenProperty",si),Sr("CrossFadedProperty",li),Sr("ColorRampProperty",ui);const hi="-transition";class fi extends nt{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==t.type&&(this.metadata=(t=t).metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new ni(e.layout)),e.paint)){this._transitionablePaint=new Qr(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ii(e.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e,n={}){null!=e&&this._validate(xr,`layers.${this.id}.layout.${t}`,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}getPaintProperty(t){return t.endsWith(hi)?this._transitionablePaint.getTransition(t.slice(0,-hi.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e,n={}){if(null!=e&&this._validate(_r,`layers.${this.id}.paint.${t}`,t,e,n))return!1;if(t.endsWith(hi))return this._transitionablePaint.setTransition(t.slice(0,-hi.length),e||void 0),!1;{const n=this._transitionablePaint._values[t],r="cross-faded-data-driven"===n.property.specification["property-type"],i=n.value.isDataDriven(),o=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const a=this._transitionablePaint._values[t].value;return a.isDataDriven()||i||r||this._handleOverridablePaintPropertyUpdate(t,o,a)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,e,n){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),h(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,n,r,i={}){return(!i||!1!==i.validate)&&br(this,t.call(vr,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:rt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof ri&&_n(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}}const pi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class di{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class mi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function gi(t,e=1){let n=0,r=0;return{members:t.map((t=>{const i=pi[t.type].BYTES_PER_ELEMENT,o=n=vi(n,Math.max(e,i)),a=t.components||1;return r=Math.max(r,i),n+=i*a,{name:t.name,type:t.type,components:a,offset:o}})),size:vi(n,Math.max(r,e)),alignment:e}}function vi(t,e){return Math.ceil(t/e)*e}class yi extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t}}yi.prototype.bytesPerElement=4,Sr("StructArrayLayout2i4",yi);class _i extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t}}_i.prototype.bytesPerElement=8,Sr("StructArrayLayout4i8",_i);class xi extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)}emplace(t,e,n,r,i,o,a){const s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t}}xi.prototype.bytesPerElement=12,Sr("StructArrayLayout2i4i12",xi);class bi extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)}emplace(t,e,n,r,i,o,a){const s=4*t,l=8*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.uint8[l+4]=r,this.uint8[l+5]=i,this.uint8[l+6]=o,this.uint8[l+7]=a,t}}bi.prototype.bytesPerElement=8,Sr("StructArrayLayout2i4ub8",bi);class wi extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t}}wi.prototype.bytesPerElement=8,Sr("StructArrayLayout2f8",wi);class ki extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,u){const c=this.length;return this.resize(c+1),this.emplace(c,t,e,n,r,i,o,a,s,l,u)}emplace(t,e,n,r,i,o,a,s,l,u,c){const h=10*t;return this.uint16[h+0]=e,this.uint16[h+1]=n,this.uint16[h+2]=r,this.uint16[h+3]=i,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=u,this.uint16[h+9]=c,t}}ki.prototype.bytesPerElement=20,Sr("StructArrayLayout10ui20",ki);class Si extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,u,c,h){const f=this.length;return this.resize(f+1),this.emplace(f,t,e,n,r,i,o,a,s,l,u,c,h)}emplace(t,e,n,r,i,o,a,s,l,u,c,h,f){const p=12*t;return this.int16[p+0]=e,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=u,this.int16[p+9]=c,this.int16[p+10]=h,this.int16[p+11]=f,t}}Si.prototype.bytesPerElement=24,Sr("StructArrayLayout4i4ui4i24",Si);class Ei extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t}}Ei.prototype.bytesPerElement=12,Sr("StructArrayLayout3f12",Ei);class Ii extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}Ii.prototype.bytesPerElement=4,Sr("StructArrayLayout1ul4",Ii);class Ci extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l){const u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,r,i,o,a,s,l)}emplace(t,e,n,r,i,o,a,s,l,u){const c=10*t,h=5*t;return this.int16[c+0]=e,this.int16[c+1]=n,this.int16[c+2]=r,this.int16[c+3]=i,this.int16[c+4]=o,this.int16[c+5]=a,this.uint32[h+3]=s,this.uint16[c+8]=l,this.uint16[c+9]=u,t}}Ci.prototype.bytesPerElement=20,Sr("StructArrayLayout6i1ul2ui20",Ci);class Ai extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)}emplace(t,e,n,r,i,o,a){const s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t}}Ai.prototype.bytesPerElement=12,Sr("StructArrayLayout2i2i2i12",Ai);class Pi extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)}emplace(t,e,n,r,i,o){const a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=r,this.int16[s+6]=i,this.int16[s+7]=o,t}}Pi.prototype.bytesPerElement=16,Sr("StructArrayLayout2f1f2i16",Pi);class Ti extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,t}}Ti.prototype.bytesPerElement=12,Sr("StructArrayLayout2ub2f12",Ti);class Mi extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t}}Mi.prototype.bytesPerElement=6,Sr("StructArrayLayout3ui6",Mi);class Li extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,m,g){const v=this.length;return this.resize(v+1),this.emplace(v,t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,m,g)}emplace(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,m,g,v){const y=24*t,_=12*t,x=48*t;return this.int16[y+0]=e,this.int16[y+1]=n,this.uint16[y+2]=r,this.uint16[y+3]=i,this.uint32[_+2]=o,this.uint32[_+3]=a,this.uint32[_+4]=s,this.uint16[y+10]=l,this.uint16[y+11]=u,this.uint16[y+12]=c,this.float32[_+7]=h,this.float32[_+8]=f,this.uint8[x+36]=p,this.uint8[x+37]=d,this.uint8[x+38]=m,this.uint32[_+10]=g,this.int16[y+22]=v,t}}Li.prototype.bytesPerElement=48,Sr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Li);class Ri extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,m,g,v,y,_,x,b,w,k,S,E,I,C){const A=this.length;return this.resize(A+1),this.emplace(A,t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,m,g,v,y,_,x,b,w,k,S,E,I,C)}emplace(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,m,g,v,y,_,x,b,w,k,S,E,I,C,A){const P=34*t,T=17*t;return this.int16[P+0]=e,this.int16[P+1]=n,this.int16[P+2]=r,this.int16[P+3]=i,this.int16[P+4]=o,this.int16[P+5]=a,this.int16[P+6]=s,this.int16[P+7]=l,this.uint16[P+8]=u,this.uint16[P+9]=c,this.uint16[P+10]=h,this.uint16[P+11]=f,this.uint16[P+12]=p,this.uint16[P+13]=d,this.uint16[P+14]=m,this.uint16[P+15]=g,this.uint16[P+16]=v,this.uint16[P+17]=y,this.uint16[P+18]=_,this.uint16[P+19]=x,this.uint16[P+20]=b,this.uint16[P+21]=w,this.uint16[P+22]=k,this.uint32[T+12]=S,this.float32[T+13]=E,this.float32[T+14]=I,this.float32[T+15]=C,this.float32[T+16]=A,t}}Ri.prototype.bytesPerElement=68,Sr("StructArrayLayout8i15ui1ul4f68",Ri);class Ni extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}Ni.prototype.bytesPerElement=4,Sr("StructArrayLayout1f4",Ni);class Oi extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t}}Oi.prototype.bytesPerElement=6,Sr("StructArrayLayout3i6",Oi);class zi extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=4*t;return this.uint32[2*t+0]=e,this.uint16[i+2]=n,this.uint16[i+3]=r,t}}zi.prototype.bytesPerElement=8,Sr("StructArrayLayout1ul2ui8",zi);class Di extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t}}Di.prototype.bytesPerElement=4,Sr("StructArrayLayout2ui4",Di);class Fi extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}Fi.prototype.bytesPerElement=2,Sr("StructArrayLayout1ui2",Fi);class Bi extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t}}Bi.prototype.bytesPerElement=16,Sr("StructArrayLayout4f16",Bi);class ji extends di{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new E(this.anchorPointX,this.anchorPointY)}}ji.prototype.size=20;class Zi extends Ci{get(t){return new ji(this,t)}}Sr("CollisionBoxArray",Zi);class Ui extends di{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ui.prototype.size=48;class Vi extends Li{get(t){return new Ui(this,t)}}Sr("PlacedSymbolArray",Vi);class qi extends di{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}qi.prototype.size=68;class Gi extends Ri{get(t){return new qi(this,t)}}Sr("SymbolInstanceArray",Gi);class Wi extends Ni{getoffsetX(t){return this.float32[1*t+0]}}Sr("GlyphOffsetArray",Wi);class Hi extends Oi{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}Sr("SymbolLineVertexArray",Hi);class Xi extends di{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Xi.prototype.size=8;class Yi extends zi{get(t){return new Xi(this,t)}}Sr("FeatureIndexArray",Yi);class $i extends yi{}class Ki extends yi{}class Ji extends xi{}class Qi extends bi{}class to extends wi{}class eo extends ki{}class no extends Si{}class ro extends Ei{}class io extends Ii{}class oo extends Ai{}class ao extends Ti{}class so extends Mi{}class lo extends Di{}const uo=gi([{name:"a_pos",components:2,type:"Int16"}],4),{members:co}=uo;class ho{constructor(t=[]){this.segments=t}prepareSegment(t,e,n,r){let i=this.segments[this.segments.length-1];return t>ho.MAX_VERTEX_ARRAY_LENGTH&&d(`Max vertices per segment is ${ho.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!i||i.vertexLength+t>ho.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,n,r){return new ho([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])}}function fo(t,e){return 256*(t=o(Math.floor(t),0,255))+o(Math.floor(e),0,255)}ho.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Sr("SegmentVector",ho);const po=gi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var mo={exports:{}},go={exports:{}};go.exports=function(t,e){var n,r,i,o,a,s,l,u;for(r=t.length-(n=3&t.length),i=e,a=3432918353,s=461845907,u=0;u<r;)l=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&t.charCodeAt(u+2))<<16;case 2:l^=(255&t.charCodeAt(u+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(u)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var vo={exports:{}};vo.exports=function(t,e){for(var n,r=t.length,i=e^r,o=0;r>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var yo=go.exports,_o=vo.exports;mo.exports=yo,mo.exports.murmur3=yo,mo.exports.murmur2=_o;var xo=mo.exports;class bo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,n,r){this.ids.push(wo(t)),this.positions.push(e,n,r)}getPositions(t){const e=wo(t);let n=0,r=this.ids.length-1;for(;n<r;){const t=n+r>>1;this.ids[t]>=e?r=t:n=t+1}const i=[];for(;this.ids[n]===e;)i.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return i}static serialize(t,e){const n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return ko(n,r,0,n.length-1),e&&e.push(n.buffer,r.buffer),{ids:n,positions:r}}static deserialize(t){const e=new bo;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function wo(t){const e=+t;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:xo(String(t))}function ko(t,e,n,r){for(;n<r;){const i=t[n+r>>1];let o=n-1,a=r+1;for(;;){do{o++}while(t[o]<i);do{a--}while(t[a]>i);if(o>=a)break;So(t,o,a),So(e,3*o,3*a),So(e,3*o+1,3*a+1),So(e,3*o+2,3*a+2)}a-n<r-a?(ko(t,e,n,a),n=a+1):(ko(t,e,a+1,r),r=a)}}function So(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}Sr("FeaturePositionMap",bo);class Eo{constructor(t,e){this.gl=t.gl,this.location=e}}class Io extends Eo{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Co extends Eo{constructor(t,e){super(t,e),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Ao extends Eo{constructor(t,e){super(t,e),this.current=Rt.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Po=new Float32Array(16);function To(t){return[fo(255*t.r,255*t.g),fo(255*t.b,255*t.a)]}class Mo{constructor(t,e,n){this.value=t,this.uniformNames=e.map((t=>`u_${t}`)),this.type=n}setUniform(t,e,n){t.set(n.constantOr(this.value))}getBinding(t,e,n){return"color"===this.type?new Ao(t,e):new Io(t,e)}}class Lo{constructor(t,e){this.uniformNames=e.map((t=>`u_${t}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr}setUniform(t,e,n,r){const i="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&t.set(i)}getBinding(t,e,n){return"u_pattern"===n.substr(0,9)?new Co(t,e):new Io(t,e)}}class Ro{constructor(t,e,n,r){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new r}populatePaintArray(t,e,n,r,i){const o=this.paintVertexArray.length,a=this.expression.evaluate(new $r(0),e,{},r,[],i);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)}updatePaintArray(t,e,n,r){const i=this.expression.evaluate({zoom:0},n,r);this._setPaintValue(t,e,i)}_setPaintValue(t,e,n){if("color"===this.type){const r=To(n);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,r[0],r[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class No{constructor(t,e,n,r,i,o){this.expression=t,this.uniformNames=e.map((t=>`u_${t}_t`)),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(t,e,n,r,i){const o=this.expression.evaluate(new $r(this.zoom),e,{},r,[],i),a=this.expression.evaluate(new $r(this.zoom+1),e,{},r,[],i),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)}updatePaintArray(t,e,n,r){const i=this.expression.evaluate({zoom:this.zoom},n,r),o=this.expression.evaluate({zoom:this.zoom+1},n,r);this._setPaintValue(t,e,i,o)}_setPaintValue(t,e,n,r){if("color"===this.type){const i=To(n),o=To(r);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i[0],i[1],o[0],o[1])}else{for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e){const n=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=o(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(r)}getBinding(t,e,n){return new Io(t,e)}}class Oo{constructor(t,e,n,r,i,o){this.expression=t,this.type=e,this.useIntegerZoom=n,this.zoom=r,this.layerId=o,this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i}populatePaintArray(t,e,n){const r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],n)}updatePaintArray(t,e,n,r,i){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],i)}_setPaintValues(t,e,n,r){if(!r||!n)return;const{min:i,mid:o,max:a}=n,s=r[i],l=r[o],u=r[a];if(s&&l&&u)for(let c=t;c<e;c++)this.zoomInPaintVertexArray.emplace(c,l.tl[0],l.tl[1],l.br[0],l.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1],l.pixelRatio,s.pixelRatio),this.zoomOutPaintVertexArray.emplace(c,l.tl[0],l.tl[1],l.br[0],l.br[1],u.tl[0],u.tl[1],u.br[0],u.br[1],l.pixelRatio,u.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,po.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,po.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class zo{constructor(t,e,n){this.binders={},this._buffers=[];const r=[];for(const i in t.paint._values){if(!n(i))continue;const o=t.paint.get(i);if(!(o instanceof ri&&_n(o.property.specification)))continue;const a=Fo(i,t.type),s=o.value,l=o.property.specification.type,u=o.property.useIntegerZoom,c=o.property.specification["property-type"],h="cross-faded"===c||"cross-faded-data-driven"===c;if("constant"===s.kind)this.binders[i]=h?new Lo(s.value,a):new Mo(s.value,a,l),r.push(`/u_${i}`);else if("source"===s.kind||h){const n=Bo(i,l,"source");this.binders[i]=h?new Oo(s,l,u,e,n,t.id):new Ro(s,a,l,n),r.push(`/a_${i}`)}else{const t=Bo(i,l,"composite");this.binders[i]=new No(s,a,l,u,e,t),r.push(`/z_${i}`)}}this.cacheKey=r.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof Ro||e instanceof No?e.maxValue:0}populatePaintArrays(t,e,n,r,i){for(const o in this.binders){const a=this.binders[o];(a instanceof Ro||a instanceof No||a instanceof Oo)&&a.populatePaintArray(t,e,n,r,i)}}setConstantPatternPositions(t,e){for(const n in this.binders){const r=this.binders[n];r instanceof Lo&&r.setConstantPatternPositions(t,e)}}updatePaintArrays(t,e,n,r,i){let o=!1;for(const a in t){const s=e.getPositions(a);for(const e of s){const s=n.feature(e.index);for(const n in this.binders){const l=this.binders[n];if((l instanceof Ro||l instanceof No||l instanceof Oo)&&!0===l.expression.isStateDependent){const u=r.paint.get(n);l.expression=u.value,l.updatePaintArray(e.start,e.end,s,t[a],i),o=!0}}}}return o}defines(){const t=[];for(const e in this.binders){const n=this.binders[e];(n instanceof Mo||n instanceof Lo)&&t.push(...n.uniformNames.map((t=>`#define HAS_UNIFORM_${t}`)))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof Ro||n instanceof No)for(let e=0;e<n.paintVertexAttributes.length;e++)t.push(n.paintVertexAttributes[e].name);else if(n instanceof Oo)for(let e=0;e<po.members.length;e++)t.push(po.members[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof Mo||n instanceof Lo||n instanceof No)for(const e of n.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,e){const n=[];for(const r in this.binders){const i=this.binders[r];if(i instanceof Mo||i instanceof Lo||i instanceof No)for(const o of i.uniformNames)if(e[o]){const a=i.getBinding(t,e[o],o);n.push({name:o,property:r,binding:a})}}return n}setUniforms(t,e,n,r){for(const{name:i,property:o,binding:a}of e)this.binders[o].setUniform(a,r,n.get(o),i)}updatePaintBuffers(t){this._buffers=[];for(const e in this.binders){const n=this.binders[e];if(t&&n instanceof Oo){const e=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;e&&this._buffers.push(e)}else(n instanceof Ro||n instanceof No)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(t){for(const e in this.binders){const n=this.binders[e];(n instanceof Ro||n instanceof No||n instanceof Oo)&&n.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof Ro||e instanceof No||e instanceof Oo)&&e.destroy()}}}class Do{constructor(t,e,n=(()=>!0)){this.programConfigurations={};for(const r of t)this.programConfigurations[r.id]=new zo(r,e,n);this.needsUpload=!1,this._featureMap=new bo,this._bufferOffset=0}populatePaintArrays(t,e,n,r,i,o){for(const a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,r,i,o);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,n,r){for(const i of n)this.needsUpload=this.programConfigurations[i.id].updatePaintArrays(t,this._featureMap,e,i,r)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function Fo(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}function Bo(t,e,n){const r={color:{source:wi,composite:Bi},number:{source:Ni,composite:wi}},i=function(t){return{"line-pattern":{source:eo,composite:eo},"fill-pattern":{source:eo,composite:eo},"fill-extrusion-pattern":{source:eo,composite:eo}}[t]}(t);return i&&i[n]||r[e][n]}Sr("ConstantBinder",Mo),Sr("CrossFadedConstantBinder",Lo),Sr("SourceExpressionBinder",Ro),Sr("CrossFadedCompositeBinder",Oo),Sr("CompositeExpressionBinder",No),Sr("ProgramConfiguration",zo,{omit:["_buffers"]}),Sr("ProgramConfigurationSet",Do);var jo=8192;const Zo=Math.pow(2,14)-1,Uo=-Zo-1;function Vo(t){const e=jo/t.extent,n=t.loadGeometry();for(let r=0;r<n.length;r++){const t=n[r];for(let n=0;n<t.length;n++){const r=t[n],i=Math.round(r.x*e),a=Math.round(r.y*e);r.x=o(i,Uo,Zo),r.y=o(a,Uo,Zo),(i<r.x||i>r.x+1||a<r.y||a>r.y+1)&&d("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function qo(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?Vo(t):[]}}function Go(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}class Wo{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new $i,this.indexArray=new so,this.segments=new ho,this.programConfigurations=new Do(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){const r=this.layers[0],i=[];let o=null,a=!1;"circle"===r.type&&(o=r.layout.get("circle-sort-key"),a=!o.isConstant());for(const{feature:s,id:l,index:u,sourceLayerIndex:c}of t){const t=this.layers[0]._featureFilter.needGeometry,e=qo(s,t);if(!this.layers[0]._featureFilter.filter(new $r(this.zoom),e,n))continue;const r=a?o.evaluate(e,{},n):void 0,h={id:l,properties:s.properties,type:s.type,sourceLayerIndex:c,index:u,geometry:t?e.geometry:Vo(s),patterns:{},sortKey:r};i.push(h)}a&&i.sort(((t,e)=>t.sortKey-e.sortKey));for(const s of i){const{geometry:r,index:i,sourceLayerIndex:o}=s,a=t[i].feature;this.addFeature(s,r,i,n),e.featureIndex.insert(a,r,i,o,this.index)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,co),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,n,r){for(const i of e)for(const e of i){const n=e.x,r=e.y;if(n<0||n>=jo||r<0||r>=jo)continue;const i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),o=i.vertexLength;Go(this.layoutVertexArray,n,r,-1,-1),Go(this.layoutVertexArray,n,r,1,-1),Go(this.layoutVertexArray,n,r,1,1),Go(this.layoutVertexArray,n,r,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),i.vertexLength+=4,i.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},r)}}function Ho(t,e){for(let n=0;n<t.length;n++)if(na(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(na(t,e[n]))return!0;return!!Ko(t,e)}function Xo(t,e,n){return!!na(t,e)||!!Qo(e,t,n)}function Yo(t,e){if(1===t.length)return ea(e,t[0]);for(let n=0;n<e.length;n++){const r=e[n];for(let e=0;e<r.length;e++)if(na(t,r[e]))return!0}for(let n=0;n<t.length;n++)if(ea(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(Ko(t,e[n]))return!0;return!1}function $o(t,e,n){if(t.length>1){if(Ko(t,e))return!0;for(let r=0;r<e.length;r++)if(Qo(e[r],t,n))return!0}for(let r=0;r<t.length;r++)if(Qo(t[r],e,n))return!0;return!1}function Ko(t,e){if(0===t.length||0===e.length)return!1;for(let n=0;n<t.length-1;n++){const r=t[n],i=t[n+1];for(let t=0;t<e.length-1;t++)if(Jo(r,i,e[t],e[t+1]))return!0}return!1}function Jo(t,e,n,r){return m(t,n,r)!==m(e,n,r)&&m(t,e,n)!==m(t,e,r)}function Qo(t,e,n){const r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(let i=1;i<e.length;i++)if(ta(t,e[i-1],e[i])<r)return!0;return!1}function ta(t,e,n){const r=e.distSqr(n);if(0===r)return t.distSqr(e);const i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return t.distSqr(i<0?e:i>1?n:n.sub(e)._mult(i)._add(e))}function ea(t,e){let n,r,i,o=!1;for(let a=0;a<t.length;a++){n=t[a];for(let t=0,a=n.length-1;t<n.length;a=t++)r=n[t],i=n[a],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function na(t,e){let n=!1;for(let r=0,i=t.length-1;r<t.length;i=r++){const o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function ra(t,e,n){const r=n[0],i=n[2];if(t.x<r.x&&e.x<r.x||t.x>i.x&&e.x>i.x||t.y<r.y&&e.y<r.y||t.y>i.y&&e.y>i.y)return!1;const o=m(t,e,n[0]);return o!==m(t,e,n[1])||o!==m(t,e,n[2])||o!==m(t,e,n[3])}function ia(t,e,n){const r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).getMaxValue(t)}function oa(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function aa(t,e,n,r,i){if(!e[0]&&!e[1])return t;const o=E.convert(e)._mult(i);"viewport"===n&&o._rotate(-r);const a=[];for(let s=0;s<t.length;s++)a.push(t[s].sub(o));return a}Sr("CircleBucket",Wo,{omit:["layers"]});const sa=new ci({"circle-sort-key":new ai(rt.layout_circle["circle-sort-key"])});var la={paint:new ci({"circle-radius":new ai(rt.paint_circle["circle-radius"]),"circle-color":new ai(rt.paint_circle["circle-color"]),"circle-blur":new ai(rt.paint_circle["circle-blur"]),"circle-opacity":new ai(rt.paint_circle["circle-opacity"]),"circle-translate":new oi(rt.paint_circle["circle-translate"]),"circle-translate-anchor":new oi(rt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new oi(rt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new oi(rt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ai(rt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ai(rt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ai(rt.paint_circle["circle-stroke-opacity"])}),layout:sa},ua="undefined"!=typeof Float32Array?Float32Array:Array;function ca(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ha(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],m=e[12],g=e[13],v=e[14],y=e[15],_=n[0],x=n[1],b=n[2],w=n[3];return t[0]=_*r+x*s+b*h+w*m,t[1]=_*i+x*l+b*f+w*g,t[2]=_*o+x*u+b*p+w*v,t[3]=_*a+x*c+b*d+w*y,t[4]=(_=n[4])*r+(x=n[5])*s+(b=n[6])*h+(w=n[7])*m,t[5]=_*i+x*l+b*f+w*g,t[6]=_*o+x*u+b*p+w*v,t[7]=_*a+x*c+b*d+w*y,t[8]=(_=n[8])*r+(x=n[9])*s+(b=n[10])*h+(w=n[11])*m,t[9]=_*i+x*l+b*f+w*g,t[10]=_*o+x*u+b*p+w*v,t[11]=_*a+x*c+b*d+w*y,t[12]=(_=n[12])*r+(x=n[13])*s+(b=n[14])*h+(w=n[15])*m,t[13]=_*i+x*l+b*f+w*g,t[14]=_*o+x*u+b*p+w*v,t[15]=_*a+x*c+b*d+w*y,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var fa,pa=ha;function da(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function ma(t,e){const n=da([],[t.x,t.y,0,1],e);return new E(n[0]/n[3],n[1]/n[3])}fa=new ua(4),ua!=Float32Array&&(fa[0]=0,fa[1]=0,fa[2]=0,fa[3]=0);class ga extends Wo{}Sr("HeatmapBucket",ga,{omit:["layers"]});var va={paint:new ci({"heatmap-radius":new ai(rt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ai(rt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new oi(rt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ui(rt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new oi(rt.paint_heatmap["heatmap-opacity"])})};function ya(t,{width:e,height:n},r,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==e*n*r)throw new RangeError(`mismatched image size. expected: ${i.length} but got: ${e*n*r}`)}else i=new Uint8Array(e*n*r);return t.width=e,t.height=n,t.data=i,t}function _a(t,{width:e,height:n},r){if(e===t.width&&n===t.height)return;const i=ya({},{width:e,height:n},r);xa(t,i,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,e),height:Math.min(t.height,n)},r),t.width=e,t.height=n,t.data=i.data}function xa(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const a=t.data,s=e.data;for(let l=0;l<i.height;l++){const u=((n.y+l)*t.width+n.x)*o,c=((r.y+l)*e.width+r.x)*o;for(let t=0;t<i.width*o;t++)s[c+t]=a[u+t]}return e}class ba{constructor(t,e){ya(this,t,1,e)}resize(t){_a(this,t,1)}clone(){return new ba({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,r,i){xa(t,e,n,r,i,1)}}class wa{constructor(t,e){ya(this,t,4,e)}resize(t){_a(this,t,4)}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new wa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,r,i){xa(t,e,n,r,i,4)}}function ka(t){const e={},n=t.resolution||256,r=t.clips?t.clips.length:1,i=t.image||new wa({width:n,height:r}),o=(n,r,o)=>{e[t.evaluationKey]=o;const a=t.expression.evaluate(e);i.data[n+r+0]=Math.floor(255*a.r/a.a),i.data[n+r+1]=Math.floor(255*a.g/a.a),i.data[n+r+2]=Math.floor(255*a.b/a.a),i.data[n+r+3]=Math.floor(255*a.a)};if(t.clips)for(let a=0,s=0;a<r;++a,s+=4*n)for(let e=0,r=0;e<n;e++,r+=4){const i=e/(n-1),{start:l,end:u}=t.clips[a];o(s,r,l*(1-i)+u*i)}else for(let a=0,s=0;a<n;a++,s+=4)o(0,s,a/(n-1));return i}Sr("AlphaImage",ba),Sr("RGBAImage",wa);var Sa={paint:new ci({"hillshade-illumination-direction":new oi(rt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new oi(rt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new oi(rt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new oi(rt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new oi(rt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new oi(rt.paint_hillshade["hillshade-accent-color"])})};const Ea=gi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ia}=Ea;var Ca={exports:{}};function Aa(t,e,n){n=n||2;var r,i,o,a,s,l,u,c=e&&e.length,h=c?e[0]*n:t.length,f=Pa(t,0,h,n,!0),p=[];if(!f||f.next===f.prev)return p;if(c&&(f=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=Pa(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(ja(a));for(s.sort(za),i=0;i<s.length;i++)n=Ta(n=Da(s[i],n),n.next);return n}(t,e,f,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<h;d+=n)(s=t[d])<r&&(r=s),(l=t[d+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-r,a-i))?1/u:0}return Ma(f,p,n,r,i,u),p}function Pa(t,e,n,r,i){var o,a;if(i===Qa(t,e,n,r)>0)for(o=e;o<n;o+=r)a=$a(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=$a(o,t[o],t[o+1],a);return a&&qa(a,a.next)&&(Ka(a),a=a.next),a}function Ta(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!qa(r,r.next)&&0!==Va(r.prev,r,r.next))r=r.next;else{if(Ka(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Ma(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Ba(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,l,u=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<u&&(s++,r=r.nextZ);e++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(t,r,i,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?Ra(t,r,i,o):La(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),Ka(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?Ma(t=Na(Ta(t),e,n),e,n,r,i,o,2):2===a&&Oa(t,e,n,r,i,o):Ma(Ta(t),e,n,r,i,o,1);break}}}function La(t){var e=t.prev,n=t,r=t.next;if(Va(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Za(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Va(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Ra(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Va(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,u=Ba(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,e,n,r),c=Ba(s,l,e,n,r),h=t.prevZ,f=t.nextZ;h&&h.z>=u&&f&&f.z<=c;){if(h!==t.prev&&h!==t.next&&Za(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Va(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,f!==t.prev&&f!==t.next&&Za(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Va(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;h&&h.z>=u;){if(h!==t.prev&&h!==t.next&&Za(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Va(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;f&&f.z<=c;){if(f!==t.prev&&f!==t.next&&Za(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Va(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function Na(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!qa(i,o)&&Ga(i,r,r.next,o)&&Xa(i,o)&&Xa(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Ka(r),Ka(r.next),r=t=o),r=r.next}while(r!==t);return Ta(r)}function Oa(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Ua(a,s)){var l=Ya(a,s);return a=Ta(a,a.next),l=Ta(l,l.next),Ma(a,e,n,r,i,o),void Ma(l,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function za(t,e){return t.x-e.x}function Da(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n;var l,u=n,c=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&Za(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),Xa(r,t)&&(l<f||l===f&&(r.x>n.x||r.x===n.x&&Fa(n,r)))&&(n=r,f=l)),r=r.next}while(r!==u);return n}(t,e);if(!n)return e;var r=Ya(n,t),i=Ta(n,n.next);return Ta(r,r.next),e===n?i:e}function Fa(t,e){return Va(t.prev,t,e.prev)<0&&Va(e.next,t,t.next)<0}function Ba(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ja(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Za(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Ua(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Ga(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Xa(t,e)&&Xa(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(Va(t.prev,t,e.prev)||Va(t,e.prev,e))||qa(t,e)&&Va(t.prev,t,t.next)>0&&Va(e.prev,e,e.next)>0)}function Va(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function qa(t,e){return t.x===e.x&&t.y===e.y}function Ga(t,e,n,r){var i=Ha(Va(t,e,n)),o=Ha(Va(t,e,r)),a=Ha(Va(n,r,t)),s=Ha(Va(n,r,e));return i!==o&&a!==s||!(0!==i||!Wa(t,n,e))||!(0!==o||!Wa(t,r,e))||!(0!==a||!Wa(n,t,r))||!(0!==s||!Wa(n,e,r))}function Wa(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Ha(t){return t>0?1:t<0?-1:0}function Xa(t,e){return Va(t.prev,t,t.next)<0?Va(t,e,t.next)>=0&&Va(t,t.prev,e)>=0:Va(t,e,t.prev)<0||Va(t,t.next,e)<0}function Ya(t,e){var n=new Ja(t.i,t.x,t.y),r=new Ja(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function $a(t,e,n,r){var i=new Ja(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ka(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ja(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Qa(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}Ca.exports=Aa,Ca.exports.default=Aa,Aa.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(Qa(t,0,i?e[0]*n:t.length,n));if(i)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(Qa(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var l=0;for(a=0;a<r.length;a+=3){var u=r[a]*n,c=r[a+1]*n,h=r[a+2]*n;l+=Math.abs((t[u]-t[h])*(t[c+1]-t[u+1])-(t[u]-t[c])*(t[h+1]-t[u+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},Aa.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&n.holes.push(r+=t[i-1].length)}return n};var ts=Ca.exports;function es(t,e,n,r,i){ns(t,e,n||0,r||t.length-1,i||is)}function ns(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=e-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);ns(t,e,Math.max(n,Math.floor(e-a*l/o+u)),Math.min(r,Math.floor(e+(o-a)*l/o+u)),i)}var c=t[e],h=n,f=r;for(rs(t,n,e),i(t[r],c)>0&&rs(t,n,r);h<f;){for(rs(t,h,f),h++,f--;i(t[h],c)<0;)h++;for(;i(t[f],c)>0;)f--}0===i(t[n],c)?rs(t,n,f):rs(t,++f,r),f<=e&&(n=f+1),e<=f&&(r=f-1)}}function rs(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function is(t,e){return t<e?-1:t>e?1:0}function os(t,e){const n=t.length;if(n<=1)return[t];const r=[];let i,o;for(let a=0;a<n;a++){const e=g(t[a]);0!==e&&(t[a].area=Math.abs(e),void 0===o&&(o=e<0),o===e<0?(i&&r.push(i),i=[t[a]]):i.push(t[a]))}if(i&&r.push(i),e>1)for(let a=0;a<r.length;a++)r[a].length<=e||(es(r[a],e,1,r[a].length-1,as),r[a]=r[a].slice(0,e));return r}function as(t,e){return e.area-t.area}function ss(t,e,n){const r=n.patternDependencies;let i=!1;for(const o of e){const e=o.paint.get(`${t}-pattern`);e.isConstant()||(i=!0);const n=e.constantOr(null);n&&(i=!0,r[n.to]=!0,r[n.from]=!0)}return i}function ls(t,e,n,r,i){const o=i.patternDependencies;for(const a of e){const e=a.paint.get(`${t}-pattern`).value;if("constant"!==e.kind){let t=e.evaluate({zoom:r-1},n,{},i.availableImages),s=e.evaluate({zoom:r},n,{},i.availableImages),l=e.evaluate({zoom:r+1},n,{},i.availableImages);t=t&&t.name?t.name:t,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,o[t]=!0,o[s]=!0,o[l]=!0,n.patterns[a.id]={min:t,mid:s,max:l}}}return n}class us{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ki,this.indexArray=new so,this.indexArray2=new lo,this.programConfigurations=new Do(t.layers,t.zoom),this.segments=new ho,this.segments2=new ho,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){this.hasPattern=ss("fill",this.layers,e);const r=this.layers[0].layout.get("fill-sort-key"),i=!r.isConstant(),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:u}of t){const t=this.layers[0]._featureFilter.needGeometry,c=qo(a,t);if(!this.layers[0]._featureFilter.filter(new $r(this.zoom),c,n))continue;const h=i?r.evaluate(c,{},n,e.availableImages):void 0,f={id:s,properties:a.properties,type:a.type,sourceLayerIndex:u,index:l,geometry:t?c.geometry:Vo(a),patterns:{},sortKey:h};o.push(f)}i&&o.sort(((t,e)=>t.sortKey-e.sortKey));for(const a of o){const{geometry:r,index:i,sourceLayerIndex:o}=a;if(this.hasPattern){const t=ls("fill",this.layers,a,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(a,r,i,n,{});e.featureIndex.insert(t[i].feature,r,i,o,this.index)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}addFeatures(t,e,n){for(const r of this.patternFeatures)this.addFeature(r,r.geometry,r.index,e,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ia),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,n,r,i){for(const o of os(e,500)){let t=0;for(const s of o)t+=s.length;const e=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),n=e.vertexLength,r=[],i=[];for(const s of o){if(0===s.length)continue;s!==o[0]&&i.push(r.length/2);const t=this.segments2.prepareSegment(s.length,this.layoutVertexArray,this.indexArray2),e=t.vertexLength;this.layoutVertexArray.emplaceBack(s[0].x,s[0].y),this.indexArray2.emplaceBack(e+s.length-1,e),r.push(s[0].x),r.push(s[0].y);for(let n=1;n<s.length;n++)this.layoutVertexArray.emplaceBack(s[n].x,s[n].y),this.indexArray2.emplaceBack(e+n-1,e+n),r.push(s[n].x),r.push(s[n].y);t.vertexLength+=s.length,t.primitiveLength+=s.length}const a=ts(r,i);for(let o=0;o<a.length;o+=3)this.indexArray.emplaceBack(n+a[o],n+a[o+1],n+a[o+2]);e.vertexLength+=t,e.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)}}Sr("FillBucket",us,{omit:["layers","patternFeatures"]});const cs=new ci({"fill-sort-key":new ai(rt.layout_fill["fill-sort-key"])});var hs={paint:new ci({"fill-antialias":new oi(rt.paint_fill["fill-antialias"]),"fill-opacity":new ai(rt.paint_fill["fill-opacity"]),"fill-color":new ai(rt.paint_fill["fill-color"]),"fill-outline-color":new ai(rt.paint_fill["fill-outline-color"]),"fill-translate":new oi(rt.paint_fill["fill-translate"]),"fill-translate-anchor":new oi(rt.paint_fill["fill-translate-anchor"]),"fill-pattern":new si(rt.paint_fill["fill-pattern"])}),layout:cs};const fs=gi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),{members:ps}=fs;var ds={},ms=E,gs=vs;function vs(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(ys,this,e)}function ys(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function _s(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)r+=((n=t[a]).x-(e=t[i]).x)*(e.y+n.y);return r}vs.types=["Unknown","Point","LineString","Polygon"],vs.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,s=[];t.pos<n;){if(i<=0){var l=t.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new ms(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},vs.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(r<=0){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=t.readSVarint())<l&&(l=o),o>u&&(u=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,u]},vs.prototype.toGeoJSON=function(t,e,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),u=vs.types[this.type];function c(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];c(l=h);break;case 2:for(r=0;r<l.length;r++)c(l[r]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=_s(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)c(l[r][i])}1===l.length?l=l[0]:u="Multi"+u;var f={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(f.id=this.id),f};var xs=gs,bs=ws;function ws(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(ks,this,e),this.length=this._features.length}function ks(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}ws.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new xs(this._pbf,e,this.extent,this._keys,this._values)};var Ss=bs;function Es(t,e,n){if(3===t){var r=new Ss(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}ds.VectorTile=function(t,e){this.layers=t.readFields(Es,{},e)},ds.VectorTileFeature=gs,ds.VectorTileLayer=bs;const Is=ds.VectorTileFeature.types,Cs=Math.pow(2,13);function As(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,2*Math.floor(r*Cs)+a,i*Cs*2,o*Cs*2,Math.round(s))}class Ps{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ji,this.indexArray=new so,this.programConfigurations=new Do(t.layers,t.zoom),this.segments=new ho,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){this.features=[],this.hasPattern=ss("fill-extrusion",this.layers,e);for(const{feature:r,id:i,index:o,sourceLayerIndex:a}of t){const t=this.layers[0]._featureFilter.needGeometry,s=qo(r,t);if(!this.layers[0]._featureFilter.filter(new $r(this.zoom),s,n))continue;const l={id:i,sourceLayerIndex:a,index:o,geometry:t?s.geometry:Vo(r),properties:r.properties,type:r.type,patterns:{}};this.hasPattern?this.features.push(ls("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,l.geometry,o,n,{}),e.featureIndex.insert(r,l.geometry,o,a,this.index,!0)}}addFeatures(t,e,n){for(const r of this.features){const{geometry:t}=r;this.addFeature(r,t,r.index,e,n)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ps),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,n,r,i){for(const o of os(e,500)){let e=0;for(const t of o)e+=t.length;let n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const t of o){if(0===t.length)continue;if(Ms(t))continue;let e=0;for(let r=0;r<t.length;r++){const i=t[r];if(r>=1){const o=t[r-1];if(!Ts(i,o)){n.vertexLength+4>ho.MAX_VERTEX_ARRAY_LENGTH&&(n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const t=i.sub(o)._perp()._unit(),r=o.dist(i);e+r>32768&&(e=0),As(this.layoutVertexArray,i.x,i.y,t.x,t.y,0,0,e),As(this.layoutVertexArray,i.x,i.y,t.x,t.y,0,1,e),e+=r,As(this.layoutVertexArray,o.x,o.y,t.x,t.y,0,0,e),As(this.layoutVertexArray,o.x,o.y,t.x,t.y,0,1,e);const a=n.vertexLength;this.indexArray.emplaceBack(a,a+2,a+1),this.indexArray.emplaceBack(a+1,a+2,a+3),n.vertexLength+=4,n.primitiveLength+=2}}}}if(n.vertexLength+e>ho.MAX_VERTEX_ARRAY_LENGTH&&(n=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray)),"Polygon"!==Is[t.type])continue;const r=[],i=[],a=n.vertexLength;for(const t of o)if(0!==t.length){t!==o[0]&&i.push(r.length/2);for(let e=0;e<t.length;e++){const n=t[e];As(this.layoutVertexArray,n.x,n.y,0,0,1,1,0),r.push(n.x),r.push(n.y)}}const s=ts(r,i);for(let t=0;t<s.length;t+=3)this.indexArray.emplaceBack(a+s[t],a+s[t+2],a+s[t+1]);n.primitiveLength+=s.length/3,n.vertexLength+=e}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)}}function Ts(t,e){return t.x===e.x&&(t.x<0||t.x>jo)||t.y===e.y&&(t.y<0||t.y>jo)}function Ms(t){return t.every((t=>t.x<0))||t.every((t=>t.x>jo))||t.every((t=>t.y<0))||t.every((t=>t.y>jo))}Sr("FillExtrusionBucket",Ps,{omit:["layers","features"]});var Ls={paint:new ci({"fill-extrusion-opacity":new oi(rt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ai(rt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new oi(rt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new oi(rt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new si(rt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ai(rt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ai(rt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new oi(rt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Rs(t,e){return t.x*e.x+t.y*e.y}function Ns(t,e){if(1===t.length){let n=0;const r=e[n++];let i;for(;!i||r.equals(i);)if(i=e[n++],!i)return 1/0;for(;n<e.length;n++){const o=e[n],a=t[0],s=i.sub(r),l=o.sub(r),u=a.sub(r),c=Rs(s,s),h=Rs(s,l),f=Rs(l,l),p=Rs(u,s),d=Rs(u,l),m=c*f-h*h,g=(f*p-h*d)/m,v=(c*d-h*p)/m,y=r.z*(1-g-v)+i.z*g+o.z*v;if(isFinite(y))return y}return 1/0}{let t=1/0;for(const n of e)t=Math.min(t,n.z);return t}}const Os=gi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:zs}=Os,Ds=gi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Fs}=Ds,Bs=ds.VectorTileFeature.types,js=Math.cos(Math.PI/180*37.5),Zs=Math.pow(2,14)/.5;class Us{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={}})),this.layoutVertexArray=new Qi,this.layoutVertexArray2=new to,this.indexArray=new so,this.programConfigurations=new Do(t.layers,t.zoom),this.segments=new ho,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){this.hasPattern=ss("line",this.layers,e);const r=this.layers[0].layout.get("line-sort-key"),i=!r.isConstant(),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:u}of t){const t=this.layers[0]._featureFilter.needGeometry,e=qo(a,t);if(!this.layers[0]._featureFilter.filter(new $r(this.zoom),e,n))continue;const c=i?r.evaluate(e,{},n):void 0,h={id:s,properties:a.properties,type:a.type,sourceLayerIndex:u,index:l,geometry:t?e.geometry:Vo(a),patterns:{},sortKey:c};o.push(h)}i&&o.sort(((t,e)=>t.sortKey-e.sortKey));for(const a of o){const{geometry:r,index:i,sourceLayerIndex:o}=a;if(this.hasPattern){const t=ls("line",this.layers,a,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(a,r,i,n,{});e.featureIndex.insert(t[i].feature,r,i,o,this.index)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}addFeatures(t,e,n){for(const r of this.patternFeatures)this.addFeature(r,r.geometry,r.index,e,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Fs)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,zs),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,n,r,i){const o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),l=o.get("line-miter-limit"),u=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const c of e)this.addLine(c,t,a,s,l,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)}addLine(t,e,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===Bs[e.type];let s=t.length;for(;s>=2&&t[s-1].equals(t[s-2]);)s--;let l=0;for(;l<s-1&&t[l].equals(t[l+1]);)l++;if(s<(a?3:2))return;"bevel"===n&&(i=1.05);const u=this.overscaling<=16?122880/(512*this.overscaling):0,c=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let h,f,p,d,m;this.e1=this.e2=-1,a&&(h=t[s-2],m=t[l].sub(h)._unit()._perp());for(let g=l;g<s;g++){if(p=g===s-1?a?t[l+1]:void 0:t[g+1],p&&t[g].equals(p))continue;m&&(d=m),h&&(f=h),h=t[g],m=p?p.sub(h)._unit()._perp():d,d=d||m;let e=d.add(m);0===e.x&&0===e.y||e._unit();const v=d.x*m.x+d.y*m.y,y=e.x*m.x+e.y*m.y,_=0!==y?1/y:1/0,x=2*Math.sqrt(2-2*y),b=y<js&&f&&p,w=d.x*m.y-d.y*m.x>0;if(b&&g>l){const t=h.dist(f);if(t>2*u){const e=h.sub(h.sub(f)._mult(u/t)._round());this.updateDistance(f,e),this.addCurrentVertex(e,d,0,0,c),f=e}}const k=f&&p;let S=k?n:a?"butt":r;if(k&&"round"===S&&(_<o?S="miter":_<=2&&(S="fakeround")),"miter"===S&&_>i&&(S="bevel"),"bevel"===S&&(_>2&&(S="flipbevel"),_<i&&(S="miter")),f&&this.updateDistance(f,h),"miter"===S)e._mult(_),this.addCurrentVertex(h,e,0,0,c);else if("flipbevel"===S){if(_>100)e=m.mult(-1);else{const t=_*d.add(m).mag()/d.sub(m).mag();e._perp()._mult(t*(w?-1:1))}this.addCurrentVertex(h,e,0,0,c),this.addCurrentVertex(h,e.mult(-1),0,0,c)}else if("bevel"===S||"fakeround"===S){const t=-Math.sqrt(_*_-1),e=w?t:0,n=w?0:t;if(f&&this.addCurrentVertex(h,d,e,n,c),"fakeround"===S){const t=Math.round(180*x/Math.PI/20);for(let e=1;e<t;e++){let n=e/t;if(.5!==n){const t=n-.5;n+=n*t*(n-1)*((1.0904+v*(v*(3.55645-1.43519*v)-3.2452))*t*t+(.848013+v*(.215638*v-1.06021)))}const r=m.sub(d)._mult(n)._add(d)._unit()._mult(w?-1:1);this.addHalfVertex(h,r.x,r.y,!1,w,0,c)}}p&&this.addCurrentVertex(h,m,-e,-n,c)}else if("butt"===S)this.addCurrentVertex(h,e,0,0,c);else if("square"===S){const t=f?1:-1;this.addCurrentVertex(h,e,t,t,c)}else"round"===S&&(f&&(this.addCurrentVertex(h,d,0,0,c),this.addCurrentVertex(h,d,1,1,c,!0)),p&&(this.addCurrentVertex(h,m,-1,-1,c,!0),this.addCurrentVertex(h,m,0,0,c)));if(b&&g<s-1){const t=h.dist(p);if(t>2*u){const e=h.add(p.sub(h)._mult(u/t)._round());this.updateDistance(h,e),this.addCurrentVertex(e,m,0,0,c),h=e}}}}addCurrentVertex(t,e,n,r,i,o=!1){const a=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,o,!1,n,i),this.addHalfVertex(t,a,s,o,!0,-r,i),this.distance>Zs/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,n,r,i,o))}addHalfVertex({x:t,y:e},n,r,i,o,a,s){const l=.5*(this.lineClips?this.scaledDistance*(Zs-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(i?1:0),(e<<1)+(o?1:0),Math.round(63*n)+128,Math.round(63*r)+128,1+(0===a?0:a<0?-1:1)|(63&l)<<2,l>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const u=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),s.primitiveLength++),o?this.e2=u:this.e1=u}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}Sr("LineBucket",Us,{omit:["layers","patternFeatures"]});const Vs=new ci({"line-cap":new oi(rt.layout_line["line-cap"]),"line-join":new ai(rt.layout_line["line-join"]),"line-miter-limit":new oi(rt.layout_line["line-miter-limit"]),"line-round-limit":new oi(rt.layout_line["line-round-limit"]),"line-sort-key":new ai(rt.layout_line["line-sort-key"])});var qs={paint:new ci({"line-opacity":new ai(rt.paint_line["line-opacity"]),"line-color":new ai(rt.paint_line["line-color"]),"line-translate":new oi(rt.paint_line["line-translate"]),"line-translate-anchor":new oi(rt.paint_line["line-translate-anchor"]),"line-width":new ai(rt.paint_line["line-width"]),"line-gap-width":new ai(rt.paint_line["line-gap-width"]),"line-offset":new ai(rt.paint_line["line-offset"]),"line-blur":new ai(rt.paint_line["line-blur"]),"line-dasharray":new li(rt.paint_line["line-dasharray"]),"line-pattern":new si(rt.paint_line["line-pattern"]),"line-gradient":new ui(rt.paint_line["line-gradient"])}),layout:Vs};const Gs=new class extends ai{possiblyEvaluate(t,e){return e=new $r(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,n,r){return e=s({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,n,r)}}(qs.paint.properties["line-width"].specification);function Ws(t,e){return e>0?e+2*t:t}Gs.useIntegerZoom=!0;const Hs=gi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Xs=gi([{name:"a_projected_pos",components:3,type:"Float32"}],4);gi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Ys=gi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);gi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const $s=gi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ks=gi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Js(t,e,n){return t.sections.forEach((t=>{t.text=function(t,e,n){const r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),Yr.applyArabicShaping&&(t=Yr.applyArabicShaping(t)),t}(t.text,e,n)})),t}gi([{name:"triangle",components:3,type:"Uint16"}]),gi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),gi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),gi([{type:"Float32",name:"offsetX"}]),gi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Qs={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var tl=24,el=il,nl=function(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},rl=function(t,e,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?f/l:f*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*l-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[n+p]=255&a,p+=d,a/=256,u-=8);t[n+p-d]|=128*m};function il(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}il.Varint=0,il.Fixed64=1,il.Bytes=2,il.Fixed32=5;var ol,al=4294967296,sl=1/al,ll="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function ul(t){return t.type===il.Bytes?t.readVarint()+t.pos:t.pos+1}function cl(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function hl(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function fl(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function pl(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function dl(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function ml(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function gl(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function vl(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function yl(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function _l(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function xl(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function bl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function wl(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function kl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Sl(t,e,n){1===t&&n.readMessage(El,e)}function El(t,e,n){if(3===t){const{id:t,bitmap:r,width:i,height:o,left:a,top:s,advance:l}=n.readMessage(Il,{});e.push({id:t,bitmap:new ba({width:i+6,height:o+6},r),metrics:{width:i,height:o,left:a,top:s,advance:l}})}}function Il(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function Cl(t){let e=0,n=0;for(const a of t)e+=a.w*a.h,n=Math.max(n,a.w);t.sort(((t,e)=>e.h-t.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let i=0,o=0;for(const a of t)for(let t=r.length-1;t>=0;t--){const e=r[t];if(!(a.w>e.w||a.h>e.h)){if(a.x=e.x,a.y=e.y,o=Math.max(o,a.y+a.h),i=Math.max(i,a.x+a.w),a.w===e.w&&a.h===e.h){const e=r.pop();t<r.length&&(r[t]=e)}else a.h===e.h?(e.x+=a.w,e.w-=a.w):a.w===e.w?(e.y+=a.h,e.h-=a.h):(r.push({x:e.x+a.w,y:e.y,w:e.w-a.w,h:a.h}),e.y+=a.h,e.h-=a.h);break}}return{w:i,h:o,fill:e/(i*o)||0}}il.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=bl(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=kl(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=bl(this.buf,this.pos)+bl(this.buf,this.pos+4)*al;return this.pos+=8,t},readSFixed64:function(){var t=bl(this.buf,this.pos)+kl(this.buf,this.pos+4)*al;return this.pos+=8,t},readFloat:function(){var t=nl(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=nl(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return cl(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return cl(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return cl(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return cl(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return cl(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return cl(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&ll?function(t,e,n){return ll.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,l=t[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>n)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(a=t[i+2],128==(192&(o=t[i+1]))&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(a=t[i+2],s=t[i+3],128==(192&(o=t[i+1]))&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),i+=c}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==il.Bytes)return t.push(this.readVarint(e));var n=ul(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==il.Bytes)return t.push(this.readSVarint());var e=ul(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==il.Bytes)return t.push(this.readBoolean());var e=ul(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==il.Bytes)return t.push(this.readFloat());var e=ul(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==il.Bytes)return t.push(this.readDouble());var e=ul(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==il.Bytes)return t.push(this.readFixed32());var e=ul(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==il.Bytes)return t.push(this.readSFixed32());var e=ul(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==il.Bytes)return t.push(this.readFixed64());var e=ul(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==il.Bytes)return t.push(this.readSFixed64());var e=ul(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===il.Varint)for(;this.buf[this.pos++]>127;);else if(e===il.Bytes)this.pos=this.readVarint()+this.pos;else if(e===il.Fixed32)this.pos+=4;else{if(e!==il.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),wl(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),wl(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),wl(this.buf,-1&t,this.pos),wl(this.buf,Math.floor(t*sl),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),wl(this.buf,-1&t,this.pos),wl(this.buf,Math.floor(t*sl),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&hl(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),rl(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),rl(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&hl(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,il.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,fl,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,pl,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,gl,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,dl,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,ml,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,vl,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,yl,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,_l,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,xl,e)},writeBytesField:function(t,e){this.writeTag(t,il.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,il.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,il.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,il.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,il.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,il.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,il.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,il.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,il.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,il.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};class Al{constructor(t,{pixelRatio:e,version:n,stretchX:r,stretchY:i,content:o}){this.paddedRect=t,this.pixelRatio=e,this.stretchX=r,this.stretchY=i,this.content=o,this.version=n}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Pl{constructor(t,e){const n={},r={};this.haveRenderCallbacks=[];const i=[];this.addImages(t,n,i),this.addImages(e,r,i);const{w:o,h:a}=Cl(i),s=new wa({width:o||1,height:a||1});for(const l in t){const e=t[l],r=n[l].paddedRect;wa.copy(e.data,s,{x:0,y:0},{x:r.x+1,y:r.y+1},e.data)}for(const l in e){const t=e[l],n=r[l].paddedRect,i=n.x+1,o=n.y+1,a=t.data.width,u=t.data.height;wa.copy(t.data,s,{x:0,y:0},{x:i,y:o},t.data),wa.copy(t.data,s,{x:0,y:u-1},{x:i,y:o-1},{width:a,height:1}),wa.copy(t.data,s,{x:0,y:0},{x:i,y:o+u},{width:a,height:1}),wa.copy(t.data,s,{x:a-1,y:0},{x:i-1,y:o},{width:1,height:u}),wa.copy(t.data,s,{x:0,y:0},{x:i+a,y:o},{width:1,height:u})}this.image=s,this.iconPositions=n,this.patternPositions=r}addImages(t,e,n){for(const r in t){const i=t[r],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(o),e[r]=new Al(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(t,e){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)}patchUpdatedImage(t,e,n){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[r,i]=t.tl;n.update(e.data,void 0,{x:r,y:i})}}Sr("ImagePosition",Al),Sr("ImageAtlas",Pl),t.WritingMode=void 0,(ol=t.WritingMode||(t.WritingMode={}))[ol.none=0]="none",ol[ol.horizontal=1]="horizontal",ol[ol.vertical=2]="vertical",ol[ol.horizontalOnly=3]="horizontalOnly";const Tl=-17;class Ml{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const n=new Ml;return n.scale=t||1,n.fontStack=e,n}static forImage(t){const e=new Ml;return e.imageName=t,e}}class Ll{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const n=new Ll;for(let r=0;r<t.sections.length;r++){const i=t.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,e)}return n}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n+1)||null,i=t.charCodeAt(n-1)||null;e+=r&&Nr(r)&&!Qs[t[n+1]]||i&&Nr(i)&&!Qs[t[n-1]]||!Qs[t[n]]?t[n]:Qs[t[n]]}return e}(this.text)}trim(){let t=0;for(let n=0;n<this.text.length&&Nl[this.text.charCodeAt(n)];n++)t++;let e=this.text.length;for(let n=this.text.length-1;n>=0&&n>=t&&Nl[this.text.charCodeAt(n)];n--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const n=new Ll;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(Ml.forText(t.scale,t.fontStack||e));const n=this.sections.length-1;for(let r=0;r<t.text.length;++r)this.sectionIndex.push(n)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void d("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Ml.forImage(e)),this.sectionIndex.push(this.sections.length-1)):d("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Rl(e,n,r,i,o,a,s,l,u,c,h,f,p,d,m,g){const v=Ll.fromFeature(e,o);let y;f===t.WritingMode.vertical&&v.verticalizePunctuation();const{processBidirectionalText:_,processStyledBidirectionalText:x}=Yr;if(_&&1===v.sections.length){y=[];const t=_(v.toString(),Zl(v,c,a,n,i,d,m));for(const e of t){const t=new Ll;t.text=e,t.sections=v.sections;for(let n=0;n<e.length;n++)t.sectionIndex.push(0);y.push(t)}}else if(x){y=[];const t=x(v.text,v.sectionIndex,Zl(v,c,a,n,i,d,m));for(const e of t){const t=new Ll;t.text=e[0],t.sectionIndex=e[1],t.sections=v.sections,y.push(t)}}else y=function(t,e){const n=[],r=t.text;let i=0;for(const o of e)n.push(t.substring(i,o)),i=o;return i<r.length&&n.push(t.substring(i,r.length)),n}(v,Zl(v,c,a,n,i,d,m));const b=[],w={positionedLines:b,text:v.toString(),top:h[1],bottom:h[1],left:h[0],right:h[0],writingMode:f,iconsInText:!1,verticalizable:!1};return function(e,n,r,i,o,a,s,l,u,c,h,f){let p=0,d=Tl,m=0,g=0;const v="right"===l?1:"left"===l?0:.5;let y=0;for(const k of o){k.trim();const o=k.getMaxScale(),s=(o-1)*tl,l={positionedGlyphs:[],lineOffset:0};e.positionedLines[y]=l;const x=l.positionedGlyphs;let b=0;if(!k.length()){d+=a,++y;continue}for(let a=0;a<k.length();a++){const l=k.getSection(a),m=k.getSectionIndex(a),g=k.getCharCode(a);let v=0,y=null,w=null,S=null,E=tl;const I=!(u===t.WritingMode.horizontal||!h&&!Rr(g)||h&&(Nl[g]||(_=g,Pr.Arabic(_)||Pr["Arabic Supplement"](_)||Pr["Arabic Extended-A"](_)||Pr["Arabic Presentation Forms-A"](_)||Pr["Arabic Presentation Forms-B"](_))));if(l.imageName){const t=i[l.imageName];if(!t)continue;S=l.imageName,e.iconsInText=e.iconsInText||!0,w=t.paddedRect;const n=t.displaySize;l.scale=l.scale*tl/f,y={width:n[0],height:n[1],left:1,top:-3,advance:I?n[1]:n[0]},v=s+(tl-n[1]*l.scale),E=y.advance;const r=I?n[0]*l.scale-tl*o:n[1]*l.scale-tl*o;r>0&&r>b&&(b=r)}else{const t=r[l.fontStack],e=t&&t[g];if(e&&e.rect)w=e.rect,y=e.metrics;else{const t=n[l.fontStack],e=t&&t[g];if(!e)continue;y=e.metrics}v=(o-l.scale)*tl}I?(e.verticalizable=!0,x.push({glyph:g,imageName:S,x:p,y:d+v,vertical:I,scale:l.scale,fontStack:l.fontStack,sectionIndex:m,metrics:y,rect:w}),p+=E*l.scale+c):(x.push({glyph:g,imageName:S,x:p,y:d+v,vertical:I,scale:l.scale,fontStack:l.fontStack,sectionIndex:m,metrics:y,rect:w}),p+=y.advance*l.scale+c)}0!==x.length&&(m=Math.max(p-c,m),Vl(x,0,x.length-1,v,b)),p=0;const w=a*o+b;l.lineOffset=Math.max(b,s),d+=w,g=Math.max(w,g),++y}var _;const x=d-Tl,{horizontalAlign:b,verticalAlign:w}=Ul(s);(function(t,e,n,r,i,o,a,s,l){const u=(e-n)*i;let c=0;c=o!==a?-s*r-Tl:(-r*l+.5)*a;for(const h of t)for(const t of h.positionedGlyphs)t.x+=u,t.y+=c})(e.positionedLines,v,b,w,m,g,a,x,o.length),e.top+=-w*x,e.bottom=e.top+x,e.left+=-b*m,e.right=e.left+m}(w,n,r,i,y,s,l,u,f,c,p,g),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(b)&&w}const Nl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ol={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function zl(t,e,n,r,i,o){if(e.imageName){const t=r[e.imageName];return t?t.displaySize[0]*e.scale*tl/o+i:0}{const r=n[e.fontStack],o=r&&r[t];return o?o.metrics.advance*e.scale+i:0}}function Dl(t,e,n,r){const i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function Fl(t,e,n){let r=0;return 10===t&&(r-=1e4),n&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Bl(t,e,n,r,i,o){let a=null,s=Dl(e,n,i,o);for(const l of r){const t=Dl(e-l.x,n,i,o)+l.badness;t<=s&&(a=l,s=t)}return{index:t,x:e,priorBreak:a,badness:s}}function jl(t){return t?jl(t.priorBreak).concat(t.index):[]}function Zl(t,e,n,r,i,o,a){if("point"!==o)return[];if(!t)return[];const s=[],l=function(t,e,n,r,i,o){let a=0;for(let s=0;s<t.length();s++){const n=t.getSection(s);a+=zl(t.getCharCode(s),n,r,i,e,o)}return a/Math.max(1,Math.ceil(a/n))}(t,e,n,r,i,a),u=t.text.indexOf("\u200b")>=0;let c=0;for(let f=0;f<t.length();f++){const n=t.getSection(f),o=t.getCharCode(f);if(Nl[o]||(c+=zl(o,n,r,i,e,a)),f<t.length()-1){const e=!((h=o)<11904||!(Pr["Bopomofo Extended"](h)||Pr.Bopomofo(h)||Pr["CJK Compatibility Forms"](h)||Pr["CJK Compatibility Ideographs"](h)||Pr["CJK Compatibility"](h)||Pr["CJK Radicals Supplement"](h)||Pr["CJK Strokes"](h)||Pr["CJK Symbols and Punctuation"](h)||Pr["CJK Unified Ideographs Extension A"](h)||Pr["CJK Unified Ideographs"](h)||Pr["Enclosed CJK Letters and Months"](h)||Pr["Halfwidth and Fullwidth Forms"](h)||Pr.Hiragana(h)||Pr["Ideographic Description Characters"](h)||Pr["Kangxi Radicals"](h)||Pr["Katakana Phonetic Extensions"](h)||Pr.Katakana(h)||Pr["Vertical Forms"](h)||Pr["Yi Radicals"](h)||Pr["Yi Syllables"](h)));(Ol[o]||e||n.imageName)&&s.push(Bl(f+1,c,l,s,Fl(o,t.getCharCode(f+1),e&&u),!1))}}var h;return jl(Bl(t.length(),c,l,s,0,!0))}function Ul(t){let e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Vl(t,e,n,r,i){if(!r&&!i)return;const o=t[n],a=(t[n].x+o.metrics.advance*o.scale)*r;for(let s=e;s<=n;s++)t[s].x-=a,t[s].y+=i}function ql(t,e,n){const{horizontalAlign:r,verticalAlign:i}=Ul(n),o=e[0]-t.displaySize[0]*r,a=e[1]-t.displaySize[1]*i;return{image:t,top:a,bottom:a+t.displaySize[1],left:o,right:o+t.displaySize[0]}}function Gl(t,e,n,r,i,o){const a=t.image;let s;if(a.content){const t=a.content,e=a.pixelRatio||1;s=[t[0]/e,t[1]/e,a.displaySize[0]-t[2]/e,a.displaySize[1]-t[3]/e]}const l=e.left*o,u=e.right*o;let c,h,f,p;"width"===n||"both"===n?(p=i[0]+l-r[3],h=i[0]+u+r[1]):(p=i[0]+(l+u-a.displaySize[0])/2,h=p+a.displaySize[0]);const d=e.top*o,m=e.bottom*o;return"height"===n||"both"===n?(c=i[1]+d-r[0],f=i[1]+m+r[2]):(c=i[1]+(d+m-a.displaySize[1])/2,f=c+a.displaySize[1]),{image:a,top:c,right:h,bottom:f,left:p,collisionPadding:s}}const Wl=128;function Hl(t,e){const{expression:n}=e;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new $r(t+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:r}=n;let i=0;for(;i<e.length&&e[i]<=t;)i++;i=Math.max(0,i-1);let o=i;for(;o<e.length&&e[o]<t+1;)o++;o=Math.min(e.length-1,o);const a=e[i],s=e[o];return"composite"===n.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:r}:{kind:"camera",minZoom:a,maxZoom:s,minSize:n.evaluate(new $r(a)),maxSize:n.evaluate(new $r(s)),interpolationType:r}}}class Xl extends E{constructor(t,e,n,r){super(t,e),this.angle=n,void 0!==r&&(this.segment=r)}clone(){return new Xl(this.x,this.y,this.angle,this.segment)}}function Yl(t,e,n,r,i){if(void 0===e.segment)return!0;let o=e,a=e.segment+1,s=0;for(;s>-n/2;){if(a--,a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;const l=[];let u=0;for(;s<n/2;){const e=t[a],n=t[a+1];if(!n)return!1;let o=t[a-1].angleTo(e)-e.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),u+=o;s-l[0].distance>r;)u-=l.shift().angleDelta;if(u>i)return!1;a++,s+=e.dist(n)}return!0}function $l(t){let e=0;for(let n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function Kl(t,e,n){return t?.6*e*n:0}function Jl(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Ql(t,e,n,r,i,o){const a=Kl(n,i,o),s=Jl(n,r)*o;let l=0;const u=$l(t)/2;for(let c=0;c<t.length-1;c++){const n=t[c],r=t[c+1],i=n.dist(r);if(l+i>u){const o=(u-l)/i,h=Ee(n.x,r.x,o),f=Ee(n.y,r.y,o),p=new Xl(h,f,r.angleTo(n),c);return p._round(),!a||Yl(t,p,s,a,e)?p:void 0}l+=i}}function tu(t,e,n,r,i,o,a,s,l){const u=Kl(r,o,a),c=Jl(r,i),h=c*a,f=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),eu(t,f?e/2*s%e:(c/2+2*o)*a*s%e,e,u,n,h,f,!1,l)}function eu(t,e,n,r,i,o,a,s,l){const u=o/2,c=$l(t);let h=0,f=e-n,p=[];for(let d=0;d<t.length-1;d++){const e=t[d],a=t[d+1],s=e.dist(a),m=a.angleTo(e);for(;f+n<h+s;){f+=n;const g=(f-h)/s,v=Ee(e.x,a.x,g),y=Ee(e.y,a.y,g);if(v>=0&&v<l&&y>=0&&y<l&&f-u>=0&&f+u<=c){const e=new Xl(v,y,m,d);e._round(),r&&!Yl(t,e,o,r,i)||p.push(e)}}h+=s}return s||p.length||a||(p=eu(t,h/2,n,r,i,o,a,!0,l)),p}function nu(t,e,n,r,i){const o=[];for(let a=0;a<t.length;a++){const s=t[a];let l;for(let t=0;t<s.length-1;t++){let a=s[t],u=s[t+1];a.x<e&&u.x<e||(a.x<e?a=new E(e,a.y+(e-a.x)/(u.x-a.x)*(u.y-a.y))._round():u.x<e&&(u=new E(e,a.y+(e-a.x)/(u.x-a.x)*(u.y-a.y))._round()),a.y<n&&u.y<n||(a.y<n?a=new E(a.x+(n-a.y)/(u.y-a.y)*(u.x-a.x),n)._round():u.y<n&&(u=new E(a.x+(n-a.y)/(u.y-a.y)*(u.x-a.x),n)._round()),a.x>=r&&u.x>=r||(a.x>=r?a=new E(r,a.y+(r-a.x)/(u.x-a.x)*(u.y-a.y))._round():u.x>=r&&(u=new E(r,a.y+(r-a.x)/(u.x-a.x)*(u.y-a.y))._round()),a.y>=i&&u.y>=i||(a.y>=i?a=new E(a.x+(i-a.y)/(u.y-a.y)*(u.x-a.x),i)._round():u.y>=i&&(u=new E(a.x+(i-a.y)/(u.y-a.y)*(u.x-a.x),i)._round()),l&&a.equals(l[l.length-1])||(l=[a],o.push(l)),l.push(u)))))}}return o}function ru(t,e,n,r){const i=[],o=t.image,a=o.pixelRatio,s=o.paddedRect.w-2,l=o.paddedRect.h-2,u=t.right-t.left,c=t.bottom-t.top,h=o.stretchX||[[0,s]],f=o.stretchY||[[0,l]],p=(t,e)=>t+e[1]-e[0],d=h.reduce(p,0),m=f.reduce(p,0),g=s-d,v=l-m;let y=0,_=d,x=0,b=m,w=0,k=g,S=0,I=v;if(o.content&&r){const t=o.content;y=iu(h,0,t[0]),x=iu(f,0,t[1]),_=iu(h,t[0],t[2]),b=iu(f,t[1],t[3]),w=t[0]-y,S=t[1]-x,k=t[2]-t[0]-_,I=t[3]-t[1]-b}const C=(r,i,s,l)=>{const h=au(r.stretch-y,_,u,t.left),f=su(r.fixed-w,k,r.stretch,d),p=au(i.stretch-x,b,c,t.top),g=su(i.fixed-S,I,i.stretch,m),v=au(s.stretch-y,_,u,t.left),C=su(s.fixed-w,k,s.stretch,d),A=au(l.stretch-x,b,c,t.top),P=su(l.fixed-S,I,l.stretch,m),T=new E(h,p),M=new E(v,p),L=new E(v,A),R=new E(h,A),N=new E(f/a,g/a),O=new E(C/a,P/a),z=e*Math.PI/180;if(z){const t=Math.sin(z),e=Math.cos(z),n=[e,-t,t,e];T._matMult(n),M._matMult(n),R._matMult(n),L._matMult(n)}const D=r.stretch+r.fixed,F=i.stretch+i.fixed;return{tl:T,tr:M,bl:R,br:L,tex:{x:o.paddedRect.x+1+D,y:o.paddedRect.y+1+F,w:s.stretch+s.fixed-D,h:l.stretch+l.fixed-F},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:N,pixelOffsetBR:O,minFontScaleX:k/a/u,minFontScaleY:I/a/c,isSDF:n}};if(r&&(o.stretchX||o.stretchY)){const t=ou(h,g,d),e=ou(f,v,m);for(let n=0;n<t.length-1;n++){const r=t[n],o=t[n+1];for(let t=0;t<e.length-1;t++)i.push(C(r,e[t],o,e[t+1]))}}else i.push(C({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return i}function iu(t,e,n){let r=0;for(const i of t)r+=Math.max(e,Math.min(n,i[1]))-Math.max(e,Math.min(n,i[0]));return r}function ou(t,e,n){const r=[{fixed:-1,stretch:0}];for(const[i,o]of t){const t=r[r.length-1];r.push({fixed:i-t.stretch,stretch:t.stretch}),r.push({fixed:i-t.stretch,stretch:t.stretch+(o-i)})}return r.push({fixed:e+1,stretch:n}),r}function au(t,e,n,r){return t/e*n+r}function su(t,e,n,r){return t-e*n/r}Sr("Anchor",Xl);class lu{constructor(t,e,n,r,i,o,a,s,l,u){if(this.boxStartIndex=t.length,l){let t=o.top,e=o.bottom;const n=o.collisionPadding;n&&(t-=n[1],e+=n[3]);let r=e-t;r>0&&(r=Math.max(10,r),this.circleDiameter=r)}else{let l=o.top*a-s,c=o.bottom*a+s,h=o.left*a-s,f=o.right*a+s;const p=o.collisionPadding;if(p&&(h-=p[0]*a,l-=p[1]*a,f+=p[2]*a,c+=p[3]*a),u){const t=new E(h,l),e=new E(f,l),n=new E(h,c),r=new E(f,c),i=u*Math.PI/180;t._rotate(i),e._rotate(i),n._rotate(i),r._rotate(i),h=Math.min(t.x,e.x,n.x,r.x),f=Math.max(t.x,e.x,n.x,r.x),l=Math.min(t.y,e.y,n.y,r.y),c=Math.max(t.y,e.y,n.y,r.y)}t.emplaceBack(e.x,e.y,h,l,f,c,n,r,i)}this.boxEndIndex=t.length}}class uu{constructor(t=[],e=cu){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,r=e[t];for(;t>0;){const i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}_down(t){const{data:e,compare:n}=this,r=this.length>>1,i=e[t];for(;t<r;){let r=1+(t<<1),o=e[r];const a=r+1;if(a<this.length&&n(e[a],o)<0&&(r=a,o=e[a]),n(o,i)>=0)break;e[t]=o,t=r}e[t]=i}}function cu(t,e){return t<e?-1:t>e?1:0}function hu(t,e=1,n=!1){let r=1/0,i=1/0,o=-1/0,a=-1/0;const s=t[0];for(let p=0;p<s.length;p++){const t=s[p];(!p||t.x<r)&&(r=t.x),(!p||t.y<i)&&(i=t.y),(!p||t.x>o)&&(o=t.x),(!p||t.y>a)&&(a=t.y)}const l=Math.min(o-r,a-i);let u=l/2;const c=new uu([],fu);if(0===l)return new E(r,i);for(let p=r;p<o;p+=l)for(let e=i;e<a;e+=l)c.push(new pu(p+u,e+u,u,t));let h=function(t){let e=0,n=0,r=0;const i=t[0];for(let o=0,a=i.length,s=a-1;o<a;s=o++){const t=i[o],a=i[s],l=t.x*a.y-a.x*t.y;n+=(t.x+a.x)*l,r+=(t.y+a.y)*l,e+=3*l}return new pu(n/e,r/e,0,t)}(t),f=c.length;for(;c.length;){const r=c.pop();(r.d>h.d||!h.d)&&(h=r,n&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,f)),r.max-h.d<=e||(u=r.h/2,c.push(new pu(r.p.x-u,r.p.y-u,u,t)),c.push(new pu(r.p.x+u,r.p.y-u,u,t)),c.push(new pu(r.p.x-u,r.p.y+u,u,t)),c.push(new pu(r.p.x+u,r.p.y+u,u,t)),f+=4)}return n&&(console.log(`num probes: ${f}`),console.log(`best distance: ${h.d}`)),h.p}function fu(t,e){return e.max-t.max}function pu(t,e,n,r){this.p=new E(t,e),this.h=n,this.d=function(t,e){let n=!1,r=1/0;for(let i=0;i<e.length;i++){const o=e[i];for(let e=0,i=o.length,a=i-1;e<i;a=e++){const i=o[e],s=o[a];i.y>t.y!=s.y>t.y&&t.x<(s.x-i.x)*(t.y-i.y)/(s.y-i.y)+i.x&&(n=!n),r=Math.min(r,ta(t,i,s))}}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}const du=Number.POSITIVE_INFINITY;function mu(t,e){return e[1]!==du?function(t,e,n){let r=0,i=0;switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,i]}(t,e[0],e[1]):function(t,e){let n=0,r=0;e<0&&(e=0);const i=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-e;break;case"top":r=e-7}switch(t){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=e;break;case"right":n=-e}return[n,r]}(t,e[0])}function gu(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function vu(e,n,r,i,o,a,s,l,u,c,h){let f=a.textMaxSize.evaluate(n,{});void 0===f&&(f=s);const p=e.layers[0].layout,m=p.get("icon-offset").evaluate(n,{},h),g=xu(r.horizontal),v=s/24,y=e.tilePixelRatio*v,_=e.tilePixelRatio*f/24,x=e.tilePixelRatio*l,b=e.tilePixelRatio*p.get("symbol-spacing"),w=p.get("text-padding")*e.tilePixelRatio,k=p.get("icon-padding")*e.tilePixelRatio,S=p.get("text-max-angle")/180*Math.PI,E="viewport"!==p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),I="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),C=p.get("symbol-placement"),A=b/2,P=p.get("icon-text-fit");let T;i&&"none"!==P&&(e.allowVerticalPlacement&&r.vertical&&(T=Gl(i,r.vertical,P,p.get("icon-text-fit-padding"),m,v)),g&&(i=Gl(i,g,P,p.get("icon-text-fit-padding"),m,v)));const M=(l,f)=>{f.x<0||f.x>=jo||f.y<0||f.y>=jo||function(e,n,r,i,o,a,s,l,u,c,h,f,p,m,g,v,y,_,x,b,w,k,S,E,I){const C=e.addToLineVertexArray(n,r);let A,P,T,M,L=0,R=0,N=0,O=0,z=-1,D=-1;const F={};let B=xo(""),j=0,Z=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[j,Z]=l.layout.get("text-offset").evaluate(w,{},E).map((t=>t*tl)):(j=l.layout.get("text-radial-offset").evaluate(w,{},E)*tl,Z=du),e.allowVerticalPlacement&&i.vertical){const t=l.layout.get("text-rotate").evaluate(w,{},E)+90;T=new lu(u,n,c,h,f,i.vertical,p,m,g,t),s&&(M=new lu(u,n,c,h,f,s,y,_,g,t))}if(o){const r=l.layout.get("icon-rotate").evaluate(w,{}),i="none"!==l.layout.get("icon-text-fit"),a=ru(o,r,S,i),p=s?ru(s,r,S,i):void 0;P=new lu(u,n,c,h,f,o,y,_,!1,r),L=4*a.length;const m=e.iconSizeData;let g=null;"source"===m.kind?(g=[Wl*l.layout.get("icon-size").evaluate(w,{})],g[0]>yu&&d(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===m.kind&&(g=[Wl*k.compositeIconSizes[0].evaluate(w,{},E),Wl*k.compositeIconSizes[1].evaluate(w,{},E)],(g[0]>yu||g[1]>yu)&&d(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),e.addSymbols(e.icon,a,g,b,x,w,t.WritingMode.none,n,C.lineStartIndex,C.lineLength,-1,E),z=e.icon.placedSymbolArray.length-1,p&&(R=4*p.length,e.addSymbols(e.icon,p,g,b,x,w,t.WritingMode.vertical,n,C.lineStartIndex,C.lineLength,-1,E),D=e.icon.placedSymbolArray.length-1)}const U=Object.keys(i.horizontal);for(const d of U){const r=i.horizontal[d];if(!A){B=xo(r.text);const t=l.layout.get("text-rotate").evaluate(w,{},E);A=new lu(u,n,c,h,f,r,p,m,g,t)}const o=1===r.positionedLines.length;if(N+=_u(e,n,r,a,l,g,w,v,C,i.vertical?t.WritingMode.horizontal:t.WritingMode.horizontalOnly,o?U:[d],F,z,k,E),o)break}i.vertical&&(O+=_u(e,n,i.vertical,a,l,g,w,v,C,t.WritingMode.vertical,["vertical"],F,D,k,E));const V=A?A.boxStartIndex:e.collisionBoxArray.length,q=A?A.boxEndIndex:e.collisionBoxArray.length,G=T?T.boxStartIndex:e.collisionBoxArray.length,W=T?T.boxEndIndex:e.collisionBoxArray.length,H=P?P.boxStartIndex:e.collisionBoxArray.length,X=P?P.boxEndIndex:e.collisionBoxArray.length,Y=M?M.boxStartIndex:e.collisionBoxArray.length,$=M?M.boxEndIndex:e.collisionBoxArray.length;let K=-1;const J=(t,e)=>t&&t.circleDiameter?Math.max(t.circleDiameter,e):e;K=J(A,K),K=J(T,K),K=J(P,K),K=J(M,K);const Q=K>-1?1:0;Q&&(K*=I/tl),e.glyphOffsetArray.length>=Pu.MAX_GLYPHS&&d("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==w.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,w.sortKey),e.symbolInstances.emplaceBack(n.x,n.y,F.right>=0?F.right:-1,F.center>=0?F.center:-1,F.left>=0?F.left:-1,F.vertical||-1,z,D,B,V,q,G,W,H,X,Y,$,c,N,O,L,R,Q,0,p,j,Z,K)}(e,f,l,r,i,o,T,e.layers[0],e.collisionBoxArray,n.index,n.sourceLayerIndex,e.index,y,w,E,u,x,k,I,m,n,a,c,h,s)};if("line"===C)for(const t of nu(n.geometry,0,0,jo,jo)){const n=tu(t,b,S,r.vertical||g,i,24,_,e.overscaling,jo);for(const r of n){const n=g;n&&bu(e,n.text,A,r)||M(t,r)}}else if("line-center"===C){for(const t of n.geometry)if(t.length>1){const e=Ql(t,S,r.vertical||g,i,24,_);e&&M(t,e)}}else if("Polygon"===n.type)for(const t of os(n.geometry,0)){const e=hu(t,16);M(t[0],new Xl(e.x,e.y,0))}else if("LineString"===n.type)for(const t of n.geometry)M(t,new Xl(t[0].x,t[0].y,0));else if("Point"===n.type)for(const t of n.geometry)for(const e of t)M([e],new Xl(e.x,e.y,0))}const yu=32640;function _u(t,e,n,r,i,o,a,s,l,u,c,h,f,p,m){const g=function(t,e,n,r,i,o,a,s){const l=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=[];for(const c of e.positionedLines)for(const t of c.positionedGlyphs){if(!t.rect)continue;const r=t.rect||{};let o=4,h=!0,f=1,p=0;const d=(i||s)&&t.vertical,m=t.metrics.advance*t.scale/2;if(s&&e.verticalizable){const e=(t.scale-1)*tl,n=(tl-t.metrics.width*t.scale)/2;p=c.lineOffset/2-(t.imageName?-n:e)}if(t.imageName){const e=a[t.imageName];h=e.sdf,f=e.pixelRatio,o=1/f}const g=i?[t.x+m,t.y]:[0,0];let v=i?[0,0]:[t.x+m+n[0],t.y+n[1]-p],y=[0,0];d&&(y=v,v=[0,0]);const _=(t.metrics.left-o)*t.scale-m+v[0],x=(-t.metrics.top-o)*t.scale+v[1],b=_+r.w*t.scale/f,w=x+r.h*t.scale/f,k=new E(_,x),S=new E(b,x),I=new E(_,w),C=new E(b,w);if(d){const e=new E(-m,m-Tl),n=-Math.PI/2,r=12-m,i=new E(22-r,-(t.imageName?r:0)),o=new E(...y);k._rotateAround(n,e)._add(i)._add(o),S._rotateAround(n,e)._add(i)._add(o),I._rotateAround(n,e)._add(i)._add(o),C._rotateAround(n,e)._add(i)._add(o)}if(l){const t=Math.sin(l),e=Math.cos(l),n=[e,-t,t,e];k._matMult(n),S._matMult(n),I._matMult(n),C._matMult(n)}const A=new E(0,0),P=new E(0,0);u.push({tl:k,tr:S,bl:I,br:C,tex:r,writingMode:e.writingMode,glyphOffset:g,sectionIndex:t.sectionIndex,isSDF:h,pixelOffsetTL:A,pixelOffsetBR:P,minFontScaleX:0,minFontScaleY:0})}return u}(0,n,s,i,o,a,r,t.allowVerticalPlacement),v=t.textSizeData;let y=null;"source"===v.kind?(y=[Wl*i.layout.get("text-size").evaluate(a,{})],y[0]>yu&&d(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===v.kind&&(y=[Wl*p.compositeTextSizes[0].evaluate(a,{},m),Wl*p.compositeTextSizes[1].evaluate(a,{},m)],(y[0]>yu||y[1]>yu)&&d(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),t.addSymbols(t.text,g,y,s,o,a,u,e,l.lineStartIndex,l.lineLength,f,m);for(const d of c)h[d]=t.text.placedSymbolArray.length-1;return 4*g.length}function xu(t){for(const e in t)return t[e];return null}function bu(t,e,n,r){const i=t.compareText;if(e in i){const t=i[e];for(let e=t.length-1;e>=0;e--)if(r.dist(t[e])<n)return!0}else i[e]=[];return i[e].push(r),!1}const wu=ds.VectorTileFeature.types,ku=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Su(t,e,n,r,i,o,a,s,l,u,c,h,f){const p=s?Math.min(yu,Math.round(s[0])):0,d=s?Math.min(yu,Math.round(s[1])):0;t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,a,(p<<1)+(l?1:0),d,16*u,16*c,256*h,256*f)}function Eu(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function Iu(t){for(const e of t.sections)if(Dr(e.text))return!0;return!1}class Cu{constructor(t){this.layoutVertexArray=new no,this.indexArray=new so,this.programConfigurations=t,this.segments=new ho,this.dynamicLayoutVertexArray=new ro,this.opacityVertexArray=new io,this.placedSymbolArray=new Vi}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Hs.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Xs.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,ku,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Sr("SymbolBuffers",Cu);class Au{constructor(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new ho,this.collisionVertexArray=new ao}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Ys.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Sr("CollisionBuffers",Au);class Pu{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ca([]),this.placementViewportMatrix=ca([]);const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Hl(this.zoom,n["text-size"]),this.iconSizeData=Hl(this.zoom,n["icon-size"]);const r=this.layers[0].layout,i=r.get("symbol-sort-key"),o=r.get("symbol-z-order");this.canOverlap="never"!==Nu(r,"text-overlap","text-allow-overlap")||"never"!==Nu(r,"icon-overlap","icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&!i.isConstant(),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===r.get("symbol-placement")&&(this.writingModes=r.get("text-writing-mode").map((e=>t.WritingMode[e]))),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=e.sourceID}createArrays(){this.text=new Cu(new Do(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new Cu(new Do(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new Wi,this.lineVertexArray=new Hi,this.symbolInstances=new Gi}calculateGlyphDependencies(t,e,n,r,i){for(let o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(n||r)&&i){const n=Qs[t.charAt(o)];n&&(e[n.charCodeAt(0)]=!0)}}populate(e,n,r){const i=this.layers[0],o=i.layout,a=o.get("text-font"),s=o.get("text-field"),l=o.get("icon-image"),u=("constant"!==s.value.kind||s.value.value instanceof zt&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),c="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],!u&&!c)return;const f=n.iconDependencies,p=n.glyphDependencies,d=n.availableImages,m=new $r(this.zoom);for(const{feature:g,id:v,index:y,sourceLayerIndex:_}of e){const e=i._featureFilter.needGeometry,n=qo(g,e);if(!i._featureFilter.filter(m,n,r))continue;let s,l;if(e||(n.geometry=Vo(g)),u){const t=i.getValueAndResolveTokens("text-field",n,r,d),e=zt.factory(t);Iu(e)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Hr()||this.hasRTLText&&Yr.isParsed())&&(s=Js(e,i,n))}if(c){const t=i.getValueAndResolveTokens("icon-image",n,r,d);l=t instanceof Dt?t:Dt.fromString(t)}if(!s&&!l)continue;const x=this.sortFeaturesByKey?h.evaluate(n,{},r):void 0;if(this.features.push({id:v,text:s,icon:l,index:y,sourceLayerIndex:_,geometry:n.geometry,properties:g.properties,type:wu[g.type],sortKey:x}),l&&(f[l.name]=!0),s){const e=a.evaluate(n,{},r).join(","),i="viewport"!==o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(t.WritingMode.vertical)>=0;for(const t of s.sections)if(t.image)f[t.image.name]=!0;else{const n=Tr(s.toString()),r=t.fontStack||e,o=p[r]=p[r]||{};this.calculateGlyphDependencies(t.text,o,i,this.allowVerticalPlacement,n)}}}"line"===o.get("symbol-placement")&&(this.features=function(t){const e={},n={},r=[];let i=0;function o(e){r.push(t[e]),i++}function a(t,e,i){const o=n[t];return delete n[t],n[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(t,n,i){const o=e[n];return delete e[n],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function l(t,e,n){const r=n?e[0][e[0].length-1]:e[0][0];return`${t}:${r.x}:${r.y}`}for(let u=0;u<t.length;u++){const c=t[u],h=c.geometry,f=c.text?c.text.toString():null;if(!f){o(u);continue}const p=l(f,h),d=l(f,h,!0);if(p in n&&d in e&&n[p]!==e[d]){const t=s(p,d,h),i=a(p,d,r[t].geometry);delete e[p],delete n[d],n[l(f,r[i].geometry,!0)]=i,r[t].geometry=null}else p in n?a(p,d,h):d in e?s(p,d,h):(o(u),e[p]=i-1,n[d]=i-1)}return r.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey))}update(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const n=this.lineVertexArray.length;if(void 0!==t.segment){let n=t.dist(e[t.segment+1]),r=t.dist(e[t.segment]);const i={};for(let o=t.segment+1;o<e.length;o++)i[o]={x:e[o].x,y:e[o].y,tileUnitDistanceFromAnchor:n},o<e.length-1&&(n+=e[o+1].dist(e[o]));for(let o=t.segment||0;o>=0;o--)i[o]={x:e[o].x,y:e[o].y,tileUnitDistanceFromAnchor:r},o>0&&(r+=e[o-1].dist(e[o]));for(let t=0;t<e.length;t++){const e=i[t];this.lineVertexArray.emplaceBack(e.x,e.y,e.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(e,n,r,i,o,a,s,l,u,c,h,f){const p=e.indexArray,d=e.layoutVertexArray,m=e.segments.prepareSegment(4*n.length,d,p,this.canOverlap?a.sortKey:void 0),g=this.glyphOffsetArray.length,v=m.vertexLength,y=this.allowVerticalPlacement&&s===t.WritingMode.vertical?Math.PI/2:0,_=a.text&&a.text.sections;for(let t=0;t<n.length;t++){const{tl:i,tr:o,bl:s,br:u,tex:c,pixelOffsetTL:h,pixelOffsetBR:g,minFontScaleX:v,minFontScaleY:x,glyphOffset:b,isSDF:w,sectionIndex:k}=n[t],S=m.vertexLength,E=b[1];Su(d,l.x,l.y,i.x,E+i.y,c.x,c.y,r,w,h.x,h.y,v,x),Su(d,l.x,l.y,o.x,E+o.y,c.x+c.w,c.y,r,w,g.x,h.y,v,x),Su(d,l.x,l.y,s.x,E+s.y,c.x,c.y+c.h,r,w,h.x,g.y,v,x),Su(d,l.x,l.y,u.x,E+u.y,c.x+c.w,c.y+c.h,r,w,g.x,g.y,v,x),Eu(e.dynamicLayoutVertexArray,l,y),p.emplaceBack(S,S+1,S+2),p.emplaceBack(S+1,S+2,S+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(b[0]),t!==n.length-1&&k===n[t+1].sectionIndex||e.programConfigurations.populatePaintArrays(d.length,a,a.index,{},f,_&&_[k])}e.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,v,u,c,l.segment,r?r[0]:0,r?r[1]:0,i[0],i[1],s,0,!1,0,h)}_addCollisionDebugVertex(t,e,n,r,i,o){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,r,i,Math.round(o.x),Math.round(o.y))}addCollisionDebugVertices(t,e,n,r,i,o,a){const s=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),l=s.vertexLength,u=i.layoutVertexArray,c=i.collisionVertexArray,h=a.anchorX,f=a.anchorY;this._addCollisionDebugVertex(u,c,o,h,f,new E(t,e)),this._addCollisionDebugVertex(u,c,o,h,f,new E(n,e)),this._addCollisionDebugVertex(u,c,o,h,f,new E(n,r)),this._addCollisionDebugVertex(u,c,o,h,f,new E(t,r)),s.vertexLength+=4;const p=i.indexArray;p.emplaceBack(l,l+1),p.emplaceBack(l+1,l+2),p.emplaceBack(l+2,l+3),p.emplaceBack(l+3,l),s.primitiveLength+=4}addDebugCollisionBoxes(t,e,n,r){for(let i=t;i<e;i++){const t=this.collisionBoxArray.get(i);this.addCollisionDebugVertices(t.x1,t.y1,t.x2,t.y2,r?this.textCollisionBox:this.iconCollisionBox,t.anchorPoint,n)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Au(oo,$s.members,lo),this.iconCollisionBox=new Au(oo,$s.members,lo);for(let t=0;t<this.symbolInstances.length;t++){const e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}}_deserializeCollisionBoxesForSymbol(t,e,n,r,i,o,a,s,l){const u={};for(let c=e;c<n;c++){const e=t.get(c);u.textBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},u.textFeatureIndex=e.featureIndex;break}for(let c=r;c<i;c++){const e=t.get(c);u.verticalTextBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},u.verticalTextFeatureIndex=e.featureIndex;break}for(let c=o;c<a;c++){const e=t.get(c);u.iconBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},u.iconFeatureIndex=e.featureIndex;break}for(let c=s;c<l;c++){const e=t.get(c);u.verticalIconBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},u.verticalIconFeatureIndex=e.featureIndex;break}return u}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const n=t.placedSymbolArray.get(e),r=n.vertexStartIndex+4*n.numGlyphs;for(let i=n.vertexStartIndex;i<r;i+=4)t.indexArray.emplaceBack(i,i+1,i+2),t.indexArray.emplaceBack(i+1,i+2,i+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),n=Math.cos(t),r=[],i=[],o=[];for(let a=0;a<this.symbolInstances.length;++a){o.push(a);const t=this.symbolInstances.get(a);r.push(0|Math.round(e*t.anchorX+n*t.anchorY)),i.push(t.featureIndex)}return o.sort(((t,e)=>r[t]-r[e]||i[e]-i[t])),o}addToSortKeyRanges(t,e){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex),[e.rightJustifiedTextSymbolIndex,e.centerJustifiedTextSymbolIndex,e.leftJustifiedTextSymbolIndex].forEach(((t,e,n)=>{t>=0&&n.indexOf(t)===e&&this.addIndicesForPlacedSymbol(this.text,t)})),e.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,e.verticalPlacedTextSymbolIndex),e.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.placedIconSymbolIndex),e.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Sr("SymbolBucket",Pu,{omit:["layers","collisionBoxArray","features","compareText"]}),Pu.MAX_GLYPHS=65535,Pu.addDynamicAttributes=Eu;const Tu=new ci({"symbol-placement":new oi(rt.layout_symbol["symbol-placement"]),"symbol-spacing":new oi(rt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new oi(rt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ai(rt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new oi(rt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new oi(rt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new oi(rt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new oi(rt.layout_symbol["icon-ignore-placement"]),"icon-optional":new oi(rt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new oi(rt.layout_symbol["icon-rotation-alignment"]),"icon-size":new ai(rt.layout_symbol["icon-size"]),"icon-text-fit":new oi(rt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new oi(rt.layout_symbol["icon-text-fit-padding"]),"icon-image":new ai(rt.layout_symbol["icon-image"]),"icon-rotate":new ai(rt.layout_symbol["icon-rotate"]),"icon-padding":new oi(rt.layout_symbol["icon-padding"]),"icon-keep-upright":new oi(rt.layout_symbol["icon-keep-upright"]),"icon-offset":new ai(rt.layout_symbol["icon-offset"]),"icon-anchor":new ai(rt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new oi(rt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new oi(rt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new oi(rt.layout_symbol["text-rotation-alignment"]),"text-field":new ai(rt.layout_symbol["text-field"]),"text-font":new ai(rt.layout_symbol["text-font"]),"text-size":new ai(rt.layout_symbol["text-size"]),"text-max-width":new ai(rt.layout_symbol["text-max-width"]),"text-line-height":new oi(rt.layout_symbol["text-line-height"]),"text-letter-spacing":new ai(rt.layout_symbol["text-letter-spacing"]),"text-justify":new ai(rt.layout_symbol["text-justify"]),"text-radial-offset":new ai(rt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new oi(rt.layout_symbol["text-variable-anchor"]),"text-anchor":new ai(rt.layout_symbol["text-anchor"]),"text-max-angle":new oi(rt.layout_symbol["text-max-angle"]),"text-writing-mode":new oi(rt.layout_symbol["text-writing-mode"]),"text-rotate":new ai(rt.layout_symbol["text-rotate"]),"text-padding":new oi(rt.layout_symbol["text-padding"]),"text-keep-upright":new oi(rt.layout_symbol["text-keep-upright"]),"text-transform":new ai(rt.layout_symbol["text-transform"]),"text-offset":new ai(rt.layout_symbol["text-offset"]),"text-allow-overlap":new oi(rt.layout_symbol["text-allow-overlap"]),"text-overlap":new oi(rt.layout_symbol["text-overlap"]),"text-ignore-placement":new oi(rt.layout_symbol["text-ignore-placement"]),"text-optional":new oi(rt.layout_symbol["text-optional"])});var Mu={paint:new ci({"icon-opacity":new ai(rt.paint_symbol["icon-opacity"]),"icon-color":new ai(rt.paint_symbol["icon-color"]),"icon-halo-color":new ai(rt.paint_symbol["icon-halo-color"]),"icon-halo-width":new ai(rt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ai(rt.paint_symbol["icon-halo-blur"]),"icon-translate":new oi(rt.paint_symbol["icon-translate"]),"icon-translate-anchor":new oi(rt.paint_symbol["icon-translate-anchor"]),"text-opacity":new ai(rt.paint_symbol["text-opacity"]),"text-color":new ai(rt.paint_symbol["text-color"],{runtimeType:mt,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new ai(rt.paint_symbol["text-halo-color"]),"text-halo-width":new ai(rt.paint_symbol["text-halo-width"]),"text-halo-blur":new ai(rt.paint_symbol["text-halo-blur"]),"text-translate":new oi(rt.paint_symbol["text-translate"]),"text-translate-anchor":new oi(rt.paint_symbol["text-translate-anchor"])}),layout:Tu};class Lu{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:ht,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Sr("FormatSectionOverride",Lu,{omit:["defaultValue"]});class Ru extends fi{constructor(t){super(t,Mu)}recalculate(t,e){if(super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const t=this.layout.get("text-writing-mode");if(t){const e=[];for(const n of t)e.indexOf(n)<0&&e.push(n);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,e,n,r){const i=this.layout.get(t).evaluate(e,{},n,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||Ln(o.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,((e,n)=>n in t?String(t[n]):""))}(e.properties,i)}createBucket(t){return new Pu(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of Mu.paint.overridableProperties){if(!Ru.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),n=new Lu(e),r=new Mn(n,e.property.specification);let i=null;i="constant"===e.value.kind||"source"===e.value.kind?new Nn("source",r):new On("composite",r,e.value.zoomStops,e.value._interpolationType),this.paint._values[t]=new ri(e.property,i,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,n){return!(!this.layout||e.isDataDriven()||n.isDataDriven())&&Ru.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const n=t.get("text-field"),r=Mu.paint.properties[e];let i=!1;const o=t=>{for(const e of t)if(r.overrides&&r.overrides.hasOverride(e))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof zt)o(n.value.value.sections);else if("source"===n.value.kind){const t=e=>{i||(e instanceof Ut&&jt(e.value)===_t?o(e.value.sections):e instanceof Wt?o(e.sections):e.eachChild(t))},e=n.value;e._styleExpression&&t(e._styleExpression.expression)}return i}}function Nu(t,e,n){let r="never";const i=t.get(e);return i?r=i:t.get(n)&&(r="always"),r}var Ou={paint:new ci({"background-color":new oi(rt.paint_background["background-color"]),"background-pattern":new li(rt.paint_background["background-pattern"]),"background-opacity":new oi(rt.paint_background["background-opacity"])})},zu={paint:new ci({"raster-opacity":new oi(rt.paint_raster["raster-opacity"]),"raster-hue-rotate":new oi(rt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new oi(rt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new oi(rt.paint_raster["raster-brightness-max"]),"raster-saturation":new oi(rt.paint_raster["raster-saturation"]),"raster-contrast":new oi(rt.paint_raster["raster-contrast"]),"raster-resampling":new oi(rt.paint_raster["raster-resampling"]),"raster-fade-duration":new oi(rt.paint_raster["raster-fade-duration"])})};class Du extends fi{constructor(t){super(t,{}),this.onAdd=t=>{this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},this.onRemove=t=>{this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}}const Fu={circle:class extends fi{constructor(t){super(t,la)}createBucket(t){return new Wo(t)}queryRadius(t){const e=t;return ia("circle-radius",this,e)+ia("circle-stroke-width",this,e)+oa(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,n,r,i,o,a,s){const l=aa(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),u=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),c="map"===this.paint.get("circle-pitch-alignment"),h=c?l:function(t,e){return t.map((t=>ma(t,e)))}(l,s),f=c?u*a:u;for(const p of r)for(const t of p){const e=c?t:ma(t,s);let n=f;const r=da([],[t.x,t.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?n*=r[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(n*=o.cameraToCenterDistance/r[3]),Xo(h,e,n))return!0}return!1}},heatmap:class extends fi{constructor(t){super(t,va),this._updateColorRamp()}createBucket(t){return new ga(t)}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ka({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},hillshade:class extends fi{constructor(t){super(t,Sa)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},fill:class extends fi{constructor(t){super(t,hs)}recalculate(t,e){super.recalculate(t,e);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new us(t)}queryRadius(){return oa(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,n,r,i,o,a){return Yo(aa(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)}isTileClipped(){return!0}},"fill-extrusion":class extends fi{constructor(t){super(t,Ls)}createBucket(t){return new Ps(t)}queryRadius(){return oa(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,e,n,r,i,o,a,s){const l=aa(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),u=this.paint.get("fill-extrusion-height").evaluate(e,n),c=this.paint.get("fill-extrusion-base").evaluate(e,n),h=function(t,e,n,r){const i=[];for(const o of t){const t=[o.x,o.y,0,1];da(t,t,e),i.push(new E(t[0]/t[3],t[1]/t[3]))}return i}(l,s),f=function(t,e,n,r){const i=[],o=[],a=r[8]*e,s=r[9]*e,l=r[10]*e,u=r[11]*e,c=r[8]*n,h=r[9]*n,f=r[10]*n,p=r[11]*n;for(const d of t){const t=[],e=[];for(const n of d){const i=n.x,o=n.y,d=r[0]*i+r[4]*o+r[12],m=r[1]*i+r[5]*o+r[13],g=r[2]*i+r[6]*o+r[14],v=r[3]*i+r[7]*o+r[15],y=g+l,_=v+u,x=d+c,b=m+h,w=g+f,k=v+p,S=new E((d+a)/_,(m+s)/_);S.z=y/_,t.push(S);const I=new E(x/k,b/k);I.z=w/k,e.push(I)}i.push(t),o.push(e)}return[i,o]}(r,c,u,s);return function(t,e,n){let r=1/0;Yo(n,e)&&(r=Ns(n,e[0]));for(let i=0;i<e.length;i++){const o=e[i],a=t[i];for(let t=0;t<o.length-1;t++){const e=o[t],i=[e,o[t+1],a[t+1],a[t],e];Ho(n,i)&&(r=Math.min(r,Ns(n,i)))}}return r!==1/0&&r}(f[0],f[1],h)}},line:class extends fi{constructor(t){super(t,qs),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Se,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=Gs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Us(t)}queryRadius(t){const e=t,n=Ws(ia("line-width",this,e),ia("line-gap-width",this,e)),r=ia("line-offset",this,e);return n/2+Math.abs(r)+oa(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,n,r,i,o,a){const s=aa(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),l=a/2*Ws(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),u=this.paint.get("line-offset").evaluate(e,n);return u&&(r=function(t,e){const n=[];for(let r=0;r<t.length;r++){const i=t[r],o=[];for(let t=0;t<i.length;t++){const n=i[t-1],r=i[t],a=i[t+1],s=0===t?new E(0,0):r.sub(n)._unit()._perp(),l=t===i.length-1?new E(0,0):a.sub(r)._unit()._perp(),u=s._add(l)._unit(),c=u.x*l.x+u.y*l.y;0!==c&&u._mult(1/c),o.push(u._mult(e)._add(r))}n.push(o)}return n}(r,u*a)),function(t,e,n){for(let r=0;r<e.length;r++){const i=e[r];if(t.length>=3)for(let e=0;e<i.length;e++)if(na(t,i[e]))return!0;if($o(t,i,n))return!0}return!1}(s,r,l)}isTileClipped(){return!0}},symbol:Ru,background:class extends fi{constructor(t){super(t,Ou)}},raster:class extends fi{constructor(t){super(t,zu)}}};class Bu{constructor(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){delete this._channel,this._callback=()=>{}}}const ju=6371008.8;class Zu{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Zu(a(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const e=Math.PI/180,n=this.lat*e,r=t.lat*e,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return ju*Math.acos(Math.min(i,1))}toBounds(t=0){const e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new Uu(new Zu(this.lng-n,this.lat-e),new Zu(this.lng+n,this.lat+e))}static convert(t){if(t instanceof Zu)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Zu(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Zu(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Uu{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof Zu?new Zu(t.lng,t.lat):Zu.convert(t),this}setSouthWest(t){return this._sw=t instanceof Zu?new Zu(t.lng,t.lat):Zu.convert(t),this}extend(t){const e=this._sw,n=this._ne;let r,i;if(t instanceof Zu)r=t,i=t;else{if(!(t instanceof Uu))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Uu.convert(t)):this.extend(Zu.convert(t)):this;if(r=t._sw,i=t._ne,!r||!i)return this}return e||n?(e.lng=Math.min(r.lng,e.lng),e.lat=Math.min(r.lat,e.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new Zu(r.lng,r.lat),this._ne=new Zu(i.lng,i.lat)),this}getCenter(){return new Zu((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Zu(this.getWest(),this.getNorth())}getSouthEast(){return new Zu(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:e,lat:n}=Zu.convert(t);let r=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&r}static convert(t){return t instanceof Uu?t:t?new Uu(t):t}}const Vu=2*Math.PI*ju;function qu(t){return Vu*Math.cos(t*Math.PI/180)}function Gu(t){return(180+t)/360}function Wu(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Hu(t,e){return t/qu(e)}function Xu(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}class Yu{constructor(t,e,n=0){this.x=+t,this.y=+e,this.z=+n}static fromLngLat(t,e=0){const n=Zu.convert(t);return new Yu(Gu(n.lng),Wu(n.lat),Hu(e,n.lat))}toLngLat(){return new Zu(360*this.x-180,Xu(this.y))}toAltitude(){return this.z*qu(Xu(this.y))}meterInMercatorCoordinateUnits(){return 1/Vu*(t=Xu(this.y),1/Math.cos(t*Math.PI/180));var t}}function $u(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}class Ku{constructor(t,e,n){this.z=t,this.x=e,this.y=n,this.key=tc(0,t,t,e,n)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e,n){const r=(o=this.y,a=this.z,s=$u(256*(i=this.x),256*(o=Math.pow(2,a)-o-1),a),l=$u(256*(i+1),256*(o+1),a),s[0]+","+s[1]+","+l[0]+","+l[1]);var i,o,a,s,l;const u=function(t,e,n){let r,i="";for(let o=t;o>0;o--)r=1<<o-1,i+=(e&r?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,e>1?"@2x":"").replace(/{quadkey}/g,u).replace(/{bbox-epsg-3857}/g,r)}getTilePoint(t){const e=Math.pow(2,this.z);return new E((t.x*e-this.x)*jo,(t.y*e-this.y)*jo)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ju{constructor(t,e){this.wrap=t,this.canonical=e,this.key=tc(t,e.z,e.z,e.x,e.y)}}class Qu{constructor(t,e,n,r,i){this.overscaledZ=t,this.wrap=e,this.canonical=new Ku(n,+r,+i),this.key=tc(e,t,n,r,i)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const e=this.canonical.z-t;return t>this.canonical.z?new Qu(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Qu(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t,e){const n=this.canonical.z-t;return t>this.canonical.z?tc(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):tc(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new Qu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new Qu(e,this.wrap,e,n,r),new Qu(e,this.wrap,e,n+1,r),new Qu(e,this.wrap,e,n,r+1),new Qu(e,this.wrap,e,n+1,r+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Qu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Qu(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ju(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Yu(t.x-this.wrap,t.y))}}function tc(t,e,n,r,i){(t*=2)<0&&(t=-1*t-1);const o=1<<n;return(o*o*t+o*i+r).toString(36)+n.toString(36)+e.toString(36)}Sr("CanonicalTileID",Ku),Sr("OverscaledTileID",Qu,{omit:["posMatrix"]});class ec{constructor(t,e,n){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return void d(`"${n}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=e.height;const r=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=n||"mapbox";for(let i=0;i<r;i++)this.data[this._idx(-1,i)]=this.data[this._idx(0,i)],this.data[this._idx(r,i)]=this.data[this._idx(r-1,i)],this.data[this._idx(i,-1)]=this.data[this._idx(i,0)],this.data[this._idx(i,r)]=this.data[this._idx(i,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)]}get(t,e){const n=new Uint8Array(this.data.buffer),r=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[r],n[r+1],n[r+2])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}_unpackMapbox(t,e,n){return(256*t*256+256*e+n)/10-1e4}_unpackTerrarium(t,e,n){return 256*t+e+n/256-32768}getPixels(){return new wa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let r=e*this.dim,i=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}const s=-e*this.dim,l=-n*this.dim;for(let u=o;u<a;u++)for(let e=r;e<i;e++)this.data[this._idx(e,u)]=t.data[this._idx(e+s,u+l)]}}Sr("DEMData",ec);class nc{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}class rc{constructor(t,e,n,r,i){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t}}class ic{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new wr(jo,16,0),this.grid3D=new wr(jo,16,0),this.featureIndexArray=new Yi,this.promoteId=e}insert(t,e,n,r,i,o){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);const s=o?this.grid3D:this.grid;for(let l=0;l<e.length;l++){const t=e[l],n=[1/0,1/0,-1/0,-1/0];for(let e=0;e<t.length;e++){const r=t[e];n[0]=Math.min(n[0],r.x),n[1]=Math.min(n[1],r.y),n[2]=Math.max(n[2],r.x),n[3]=Math.max(n[3],r.y)}n[0]<jo&&n[1]<jo&&n[2]>=0&&n[3]>=0&&s.insert(a,n[0],n[1],n[2],n[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ds.VectorTile(new el(this.rawTileData)).layers,this.sourceLayerCoder=new nc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,e,n,r){this.loadVTLayers();const i=t.params||{},o=jo/t.tileSize/t.scale,a=Hn(i.filter),s=t.queryGeometry,l=t.queryPadding*o,u=ac(s),c=this.grid.query(u.minX-l,u.minY-l,u.maxX+l,u.maxY+l),h=ac(t.cameraQueryGeometry),f=this.grid3D.query(h.minX-l,h.minY-l,h.maxX+l,h.maxY+l,((e,n,r,i)=>function(t,e,n,r,i){for(const a of t)if(e<=a.x&&n<=a.y&&r>=a.x&&i>=a.y)return!0;const o=[new E(e,n),new E(e,i),new E(r,i),new E(r,n)];if(t.length>2)for(const a of o)if(na(t,a))return!0;for(let a=0;a<t.length-1;a++)if(ra(t[a],t[a+1],o))return!0;return!1}(t.cameraQueryGeometry,e-l,n-l,r+l,i+l)));for(const m of f)c.push(m);c.sort(sc);const p={};let d;for(let m=0;m<c.length;m++){const l=c[m];if(l===d)continue;d=l;const u=this.featureIndexArray.get(l);let h=null;this.loadMatchingFeature(p,u.bucketIndex,u.sourceLayerIndex,u.featureIndex,a,i.layers,i.availableImages,e,n,r,((e,n,r)=>(h||(h=Vo(e)),n.queryIntersectsFeature(s,e,r,h,this.z,t.transform,o,t.pixelPosMatrix))))}return p}loadMatchingFeature(t,e,n,r,i,o,a,l,u,c,h){const f=this.bucketLayerIDs[e];if(o&&!function(t,e){for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(o,f))return;const p=this.sourceLayerCoder.decode(n),d=this.vtLayers[p].feature(r);if(i.needGeometry){const t=qo(d,!0);if(!i.filter(new $r(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!i.filter(new $r(this.tileID.overscaledZ),d))return;const m=this.getId(d,p);for(let g=0;g<f.length;g++){const e=f[g];if(o&&o.indexOf(e)<0)continue;const n=l[e];if(!n)continue;let i={};m&&c&&(i=c.getState(n.sourceLayer||"_geojsonTileLayer",m));const p=s({},u[e]);p.paint=oc(p.paint,n.paint,d,i,a),p.layout=oc(p.layout,n.layout,d,i,a);const v=!h||h(d,n,i);if(!v)continue;const y=new rc(d,this.z,this.x,this.y,m);y.layer=p;let _=t[e];void 0===_&&(_=t[e]=[]),_.push({featureIndex:r,feature:y,intersectionZ:v})}}lookupSymbolFeatures(t,e,n,r,i,o,a,s){const l={};this.loadVTLayers();const u=Hn(i);for(const c of t)this.loadMatchingFeature(l,n,r,c,u,o,a,s,e);return l}hasLayer(t){for(const e of this.bucketLayerIDs)for(const n of e)if(t===n)return!0;return!1}getId(t,e){let n=t.id;return this.promoteId&&(n=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]],"boolean"==typeof n&&(n=Number(n))),n}}function oc(t,e,n,r,i){return c(t,((t,o)=>{const a=e instanceof ii?e.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a}))}function ac(t){let e=1/0,n=1/0,r=-1/0,i=-1/0;for(const o of t)e=Math.min(e,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x),i=Math.max(i,o.y);return{minX:e,minY:n,maxX:r,maxY:i}}function sc(t,e){return e-t}var lc;Sr("FeatureIndex",ic,{omit:["rawTileData","sourceLayerCoder"]}),t.PerformanceMarkers=void 0,(lc=t.PerformanceMarkers||(t.PerformanceMarkers={})).create="create",lc.load="load",lc.fullLoad="fullLoad";let uc=null,cc=[];const hc=1e3/30,fc={mark(t){performance.mark(t)},frame(t){const e=t;null!=uc&&cc.push(e-uc),uc=e},clearMetrics(){uc=null,cc=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const e in t.PerformanceMarkers)performance.clearMarks(t.PerformanceMarkers[e])},getPerformanceMetrics(){performance.measure("loadTime",t.PerformanceMarkers.create,t.PerformanceMarkers.load),performance.measure("fullLoadTime",t.PerformanceMarkers.create,t.PerformanceMarkers.fullLoad);const e=performance.getEntriesByName("loadTime")[0].duration,n=performance.getEntriesByName("fullLoadTime")[0].duration,r=cc.length,i=1/(cc.reduce(((t,e)=>t+e),0)/r/1e3),o=cc.filter((t=>t>hc)).reduce(((t,e)=>t+(e-hc)/hc),0);return{loadTime:e,fullLoadTime:n,fps:i,percentDroppedFrames:o/(r+o)*100}}};t.AJAXError=U,t.ARRAY_TYPE=ua,t.Actor=class{constructor(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},u(["receive","process"],this),this.invoker=new Bu(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=v()?t:window}send(t,e,n,r,i=!1){const o=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[o]=n);const a=w(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:t,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:Ir(e,a)},a),{cancel:()=>{n&&delete this.callbacks[o],this.target.postMessage({id:o,type:"<cancel>",targetMapId:r,sourceMapId:this.mapId})}}}receive(t){const e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[n];const t=this.cancelCallbacks[n];delete this.cancelCallbacks[n],t&&t()}else v()||e.mustQueue?(this.tasks[n]=e,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,e)}process(){if(!this.taskQueue.length)return;const t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}processTask(t,e){if("<response>"===e.type){const n=this.callbacks[t];delete this.callbacks[t],n&&(e.error?n(Cr(e.error)):n(null,Cr(e.data)))}else{let n=!1;const r=w(this.globalScope)?void 0:[],i=e.hasCallback?(e,i)=>{n=!0,delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?Ir(e):null,data:Ir(i,r)},r)}:t=>{n=!0};let o=null;const a=Cr(e.data);if(this.parent[e.type])o=this.parent[e.type](e.sourceMapId,a,i);else if(this.parent.getWorkerSource){const t=e.type.split(".");o=this.parent.getWorkerSource(e.sourceMapId,t[0],a.source)[t[1]](a,i)}else i(new Error(`Could not find function ${e.type}`));!n&&o&&o.cancel&&(this.cancelCallbacks[t]=o.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.AlphaImage=ba,t.CanonicalTileID=Ku,t.CollisionBoxArray=Zi,t.CollisionCircleLayoutArray=class extends Pi{},t.Color=Rt,t.DEMData=ec,t.DataConstantProperty=oi,t.DictionaryCoder=nc,t.EXTENT=jo,t.ErrorEvent=et,t.EvaluationParameters=$r,t.Event=tt,t.Evented=nt,t.FeatureIndex=ic,t.FillBucket=us,t.FillExtrusionBucket=Ps,t.GeoJSONFeature=rc,t.ImageAtlas=Pl,t.ImagePosition=Al,t.LineBucket=Us,t.LineStripIndexArray=class extends Fi{},t.LngLat=Zu,t.LngLatBounds=Uu,t.MercatorCoordinate=Yu,t.ONE_EM=tl,t.OverscaledTileID=Qu,t.PerformanceUtils=fc,t.PosArray=class extends yi{},t.Properties=ci,t.QuadTriangleArray=class extends Mi{},t.RGBAImage=wa,t.RasterBoundsArray=class extends _i{},t.RequestPerformance=class{constructor(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let t=performance.getEntriesByName(this._marks.measure);return 0===t.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),t=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),t}},t.ResourceType=Z,t.SegmentVector=ho,t.SymbolBucket=Pu,t.Transitionable=Qr,t.TriangleIndexArray=so,t.Uniform1f=Io,t.Uniform1i=class extends Eo{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))}},t.Uniform2f=class extends Eo{constructor(t,e){super(t,e),this.current=[0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))}},t.Uniform3f=class extends Eo{constructor(t,e){super(t,e),this.current=[0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))}},t.Uniform4f=Co,t.UniformColor=Ao,t.UniformMatrix4f=class extends Eo{constructor(t,e){super(t,e),this.current=Po}set(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(let e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}}},t.UnwrappedTileID=Ju,t.ValidationError=it,t.ZoomHistory=Ar,t.addDynamicAttributes=Eu,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);let r=t.length;const i=new Array(t.length);let o=null;t.forEach(((t,a)=>{e(t,((t,e)=>{t&&(o=t),i[a]=e,0==--r&&n(o,i)}))}))},t.bezier=r,t.bindAll=u,t.cacheEntryPossiblyAdded=function(t){N++,N>L&&(t.getActor().send("enforceCacheSizeLimit",M),N=0)},t.clamp=o,t.clearTileCache=function(t){const e=caches.delete(A);t&&e.catch(t).then((()=>t()))},t.clipLine=nu,t.clone=function(t){var e=new ua(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=f,t.collisionCircleLayout=Ks,t.config=C,t.create=function(){var t=new ua(16);return ua!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.createExpression=Rn,t.createFilter=Hn,t.createLayout=gi,t.createStyleLayer=function(t){return"custom"===t.type?new Du(t):new Fu[t.type](t)},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=i,t.emitValidationErrors=br,t.enforceCacheSizeLimit=function(t){R(),P&&P.then((e=>{e.keys().then((n=>{for(let r=0;r<n.length-t;r++)e.delete(n[r])}))}))},t.evaluateSizeForFeature=function(t,{uSize:e,uSizeT:n},{lowerSize:r,upperSize:i}){return"source"===t.kind?r/Wl:"composite"===t.kind?Ee(r/Wl,i/Wl,n):e},t.evaluateSizeForZoom=function(t,e){let n=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){const{interpolationType:i,minZoom:a,maxZoom:s}=t,l=i?o(qe.interpolationFactor(i,e,a,s),0,1):0;"camera"===t.kind?r=Ee(t.minSize,t.maxSize,l):n=l}return{uSizeT:n,uSize:r}},t.evaluateVariableOffset=mu,t.evented=Wr,t.exported=S,t.exported$1=O,t.extend=s,t.filterObject=h,t.getAnchorAlignment=Ul,t.getAnchorJustification=gu,t.getArrayBuffer=W,t.getImage=K,t.getJSON=function(t,e){return G(s(t,{type:"json"}),e)},t.getOverlapMode=Nu,t.getRTLTextPluginStatus=Hr,t.getReferrer=V,t.getVideo=function(t,e){const n=window.document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(let r=0;r<t.length;r++){const e=window.document.createElement("source");H(t[r])||(n.crossOrigin="Anonymous"),e.src=t[r],n.appendChild(e)}return{cancel:()=>{}}},t.identity=ca,t.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],p=e[11],d=e[12],m=e[13],g=e[14],v=e[15],y=n*s-r*a,_=n*l-i*a,x=n*u-o*a,b=r*l-i*s,w=r*u-o*s,k=i*u-o*l,S=c*m-h*d,E=c*g-f*d,I=c*v-p*d,C=h*g-f*m,A=h*v-p*m,P=f*v-p*g,T=y*P-_*A+x*C+b*I-w*E+k*S;return T?(t[0]=(s*P-l*A+u*C)*(T=1/T),t[1]=(i*A-r*P-o*C)*T,t[2]=(m*k-g*w+v*b)*T,t[3]=(f*w-h*k-p*b)*T,t[4]=(l*I-a*P-u*E)*T,t[5]=(n*P-i*I+o*E)*T,t[6]=(g*x-d*k-v*_)*T,t[7]=(c*k-f*x+p*_)*T,t[8]=(a*A-s*I+u*S)*T,t[9]=(r*I-n*A-o*S)*T,t[10]=(d*w-m*x+v*y)*T,t[11]=(h*x-c*w-p*y)*T,t[12]=(s*E-a*C-l*S)*T,t[13]=(n*C-r*E+i*S)*T,t[14]=(m*_-d*b-g*y)*T,t[15]=(c*b-h*_+f*y)*T,t):null},t.isImageBitmap=k,t.isSafari=w,t.keysDifference=function(t,e){const n=[];for(const r in t)r in e||n.push(r);return n},t.lazyLoadRTLTextPlugin=function(){Yr.isLoading()||Yr.isLoaded()||"deferred"!==Hr()||Xr()},t.makeRequest=G,t.mapObject=c,t.mercatorXfromLng=Gu,t.mercatorYfromLat=Wu,t.mercatorZfromAltitude=Hu,t.mul=pa,t.multiply=ha,t.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.number=Ee,t.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),l=1/(r-i),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(a+o)*u,t[15]=1,t},t.parseCacheControl=y,t.parseGlyphPBF=function(t){return new el(t).readFields(Sl,[])},t.pbf=el,t.performSymbolLayout=function(e,n,r,i,o,a,s){e.createArrays(),e.tilePixelRatio=jo/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;const l=e.layers[0].layout,u=e.layers[0]._unevaluatedLayout._values,c={layoutIconSize:u["icon-size"].possiblyEvaluate(new $r(e.zoom+1),s),layoutTextSize:u["text-size"].possiblyEvaluate(new $r(e.zoom+1),s),textMaxSize:u["text-size"].possiblyEvaluate(new $r(18))};if("composite"===e.textSizeData.kind){const{minZoom:t,maxZoom:n}=e.textSizeData;c.compositeTextSizes=[u["text-size"].possiblyEvaluate(new $r(t),s),u["text-size"].possiblyEvaluate(new $r(n),s)]}if("composite"===e.iconSizeData.kind){const{minZoom:t,maxZoom:n}=e.iconSizeData;c.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new $r(t),s),u["icon-size"].possiblyEvaluate(new $r(n),s)]}const h=l.get("text-line-height")*tl,f="viewport"!==l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),p=l.get("text-keep-upright"),m=l.get("text-size");for(const g of e.features){const a=l.get("text-font").evaluate(g,{},s).join(","),u=m.evaluate(g,{},s),v=c.layoutTextSize.evaluate(g,{},s),y=c.layoutIconSize.evaluate(g,{},s),_={horizontal:{},vertical:void 0},x=g.text;let b,w=[0,0];if(x){const i=x.toString(),c=l.get("text-letter-spacing").evaluate(g,{},s)*tl,d=Mr(i)?c:0,m=l.get("text-anchor").evaluate(g,{},s),y=l.get("text-variable-anchor");if(!y){const t=l.get("text-radial-offset").evaluate(g,{},s);w=t?mu(m,[t*tl,du]):l.get("text-offset").evaluate(g,{},s).map((t=>t*tl))}let b=f?"center":l.get("text-justify").evaluate(g,{},s);const k=l.get("symbol-placement"),S="point"===k?l.get("text-max-width").evaluate(g,{},s)*tl:0,E=()=>{e.allowVerticalPlacement&&Tr(i)&&(_.vertical=Rl(x,n,r,o,a,S,h,m,"left",d,w,t.WritingMode.vertical,!0,k,v,u))};if(!f&&y){const e="auto"===b?y.map((t=>gu(t))):[b];let i=!1;for(let s=0;s<e.length;s++){const l=e[s];if(!_.horizontal[l])if(i)_.horizontal[l]=_.horizontal[0];else{const e=Rl(x,n,r,o,a,S,h,"center",l,d,w,t.WritingMode.horizontal,!1,k,v,u);e&&(_.horizontal[l]=e,i=1===e.positionedLines.length)}}E()}else{"auto"===b&&(b=gu(m));const e=Rl(x,n,r,o,a,S,h,m,b,d,w,t.WritingMode.horizontal,!1,k,v,u);e&&(_.horizontal[b]=e),E(),Tr(i)&&f&&p&&(_.vertical=Rl(x,n,r,o,a,S,h,m,b,d,w,t.WritingMode.vertical,!1,k,v,u))}}let k=!1;if(g.icon&&g.icon.name){const t=i[g.icon.name];t&&(b=ql(o[g.icon.name],l.get("icon-offset").evaluate(g,{},s),l.get("icon-anchor").evaluate(g,{},s)),k=!!t.sdf,void 0===e.sdfIcons?e.sdfIcons=k:e.sdfIcons!==k&&d("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.pixelRatio||0!==l.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}const S=xu(_.horizontal)||_.vertical;e.iconsInText=!!S&&S.iconsInText,(S||b)&&vu(e,g,_,b,i,c,v,y,w,k,s)}a&&e.generateCollisionDebugBuffers()},t.perspective=function(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(o=1/(r-i)),t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},t.pick=function(t,e){const n={};for(let r=0;r<e.length;r++){const i=e[r];i in t&&(n[i]=t[i])}return n},t.plugin=Yr,t.pointGeometry=E,t.polygonIntersectsPolygon=Ho,t.potpack=Cl,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Sr,t.registerForPluginStateChange=function(t){return t({pluginStatus:Ur,pluginURL:Vr}),Wr.on("pluginStateChange",t),t},t.renderColorRamp=ka,t.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+u*r,t[5]=a*i+c*r,t[6]=s*i+h*r,t[7]=l*i+f*r,t[8]=u*i-o*r,t[9]=c*i-a*r,t[10]=h*i-s*r,t[11]=f*i-l*r,t},t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+u*r,t[1]=a*i+c*r,t[2]=s*i+h*r,t[3]=l*i+f*r,t[4]=u*i-o*r,t[5]=c*i-a*r,t[6]=h*i-s*r,t[7]=f*i-l*r,t},t.scale=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},t.setCacheLimits=function(t,e){M=t,L=e},t.setRTLTextPlugin=function(t,e,n=!1){if(Ur===Fr||Ur===Br||Ur===jr)throw new Error("setRTLTextPlugin cannot be called multiple times.");Vr=S.resolveURL(t),Ur=Fr,Zr=e,Gr(),n||Xr()},t.spec=rt,t.sphericalToCartesian=function([t,e,n]){return e+=90,e*=Math.PI/180,n*=Math.PI/180,{x:t*Math.cos(e)*Math.sin(n),y:t*Math.sin(e)*Math.sin(n),z:t*Math.cos(n)}},t.toEvaluationFeature=qo,t.transformMat4=da,t.translate=function(t,e,n){var r,i,o,a,s,l,u,c,h,f,p,d,m=n[0],g=n[1],v=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*v+e[12],t[13]=e[1]*m+e[5]*g+e[9]*v+e[13],t[14]=e[2]*m+e[6]*g+e[10]*v+e[14],t[15]=e[3]*m+e[7]*g+e[11]*v+e[15]):(i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],t[0]=r=e[0],t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=f,t[10]=p,t[11]=d,t[12]=r*m+s*g+h*v+e[12],t[13]=i*m+l*g+f*v+e[13],t[14]=o*m+u*g+p*v+e[14],t[15]=a*m+c*g+d*v+e[15]),t},t.triggerPluginCompletionEvent=qr,t.unicodeBlockLookup=Pr,t.uniqueId=function(){return l++},t.validateCustomStyleLayer=function(t){const e=[],n=t.id;return void 0===n&&e.push({message:`layers.${n}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${n}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),e},t.validateLight=yr,t.validateStyle=vr,t.vectorTile=ds,t.warnOnce=d,t.wrap=a})),r(["./shared"],(function(t){function e(t){const n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){let n="[";for(const r of t)n+=`${e(r)},`;return`${n}]`}const r=Object.keys(t).sort();let i="{";for(let o=0;o<r.length;o++)i+=`${JSON.stringify(r[o])}:${e(t[r[o]])},`;return`${i}}`}function n(n){let r="";for(const i of t.refProperties)r+=`/${e(n[i])}`;return r}class r{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,r){for(const n of e){this._layerConfigs[n.id]=n;const e=this._layers[n.id]=t.createStyleLayer(n);e._featureFilter=t.createFilter(e.filter),this.keyCache[n.id]&&delete this.keyCache[n.id]}for(const t of r)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const i=function(t,e){const r={};for(let o=0;o<t.length;o++){const i=e&&e[t[o].id]||n(t[o]);e&&(e[t[o].id]=i);let a=r[i];a||(a=r[i]=[]),a.push(t[o])}const i=[];for(const n in r)i.push(r[n]);return i}(Object.values(this._layerConfigs),this.keyCache);for(const t of i){const e=t.map((t=>this._layers[t.id])),n=e[0];if("none"===n.visibility)continue;const r=n.source||"";let i=this.familiesBySource[r];i||(i=this.familiesBySource[r]={});const o=n.sourceLayer||"_geojsonTileLayer";let a=i[o];a||(a=i[o]=[]),a.push(e)}}}class i{constructor(e){const n={},r=[];for(const t in e){const i=e[t],o=n[t]={};for(const t in i){const e=i[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const n={x:0,y:0,w:e.bitmap.width+2,h:e.bitmap.height+2};r.push(n),o[t]={rect:n,metrics:e.metrics}}}const{w:i,h:o}=t.potpack(r),a=new t.AlphaImage({width:i||1,height:o||1});for(const s in e){const r=e[s];for(const e in r){const i=r[+e];if(!i||0===i.bitmap.width||0===i.bitmap.height)continue;const o=n[s][e].rect;t.AlphaImage.copy(i.bitmap,a,{x:0,y:0},{x:o.x+1,y:o.y+1},i.bitmap)}}this.image=a,this.positions=n}}t.register("GlyphAtlas",i);class o{constructor(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId}parse(e,n,r,o,s){this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;const l=new t.DictionaryCoder(Object.keys(e.layers).sort()),u=new t.FeatureIndex(this.tileID,this.promoteId);u.bucketLayerIDs=[];const c={},h={featureIndex:u,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:r},f=n.familiesBySource[this.source];for(const i in f){const n=e.layers[i];if(!n)continue;1===n.version&&t.warnOnce(`Vector tile source "${this.source}" layer "${i}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const o=l.encode(i),s=[];for(let t=0;t<n.length;t++){const e=n.feature(t),r=u.getId(e,i);s.push({feature:e,id:r,index:t,sourceLayerIndex:o})}for(const t of f[i]){const e=t[0];e.minzoom&&this.zoom<Math.floor(e.minzoom)||e.maxzoom&&this.zoom>=e.maxzoom||"none"!==e.visibility&&(a(t,this.zoom,r),(c[e.id]=e.createBucket({index:u.bucketLayerIDs.length,layers:t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:o,sourceID:this.source})).populate(s,h,this.tileID.canonical),u.bucketLayerIDs.push(t.map((t=>t.id))))}}let p,d,m,g;const v=t.mapObject(h.glyphDependencies,(t=>Object.keys(t).map(Number)));Object.keys(v).length?o.send("getGlyphs",{uid:this.uid,stacks:v},((t,e)=>{p||(p=t,d=e,x.call(this))})):d={};const y=Object.keys(h.iconDependencies);y.length?o.send("getImages",{icons:y,source:this.source,tileID:this.tileID,type:"icons"},((t,e)=>{p||(p=t,m=e,x.call(this))})):m={};const _=Object.keys(h.patternDependencies);function x(){if(p)return s(p);if(d&&m&&g){const e=new i(d),n=new t.ImageAtlas(m,g);for(const i in c){const o=c[i];o instanceof t.SymbolBucket?(a(o.layers,this.zoom,r),t.performSymbolLayout(o,d,e.positions,m,n.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):o.hasPattern&&(o instanceof t.LineBucket||o instanceof t.FillBucket||o instanceof t.FillExtrusionBucket)&&(a(o.layers,this.zoom,r),o.addFeatures(h,this.tileID.canonical,n.patternPositions))}this.status="done",s(null,{buckets:Object.values(c).filter((t=>!t.isEmpty())),featureIndex:u,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:n,glyphMap:this.returnDependencies?d:null,iconMap:this.returnDependencies?m:null,glyphPositions:this.returnDependencies?e.positions:null})}}_.length?o.send("getImages",{icons:_,source:this.source,tileID:this.tileID,type:"patterns"},((t,e)=>{p||(p=t,g=e,x.call(this))})):g={},x.call(this)}}function a(e,n,r){const i=new t.EvaluationParameters(n);for(const t of e)t.recalculate(i,r)}function s(e,n){const r=t.getArrayBuffer(e.request,((e,r,i,o)=>{e?n(e):r&&n(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(r)),rawData:r,cacheControl:i,expires:o})}));return()=>{r.cancel(),n()}}class l{constructor(t,e,n,r){this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=r||s,this.loading={},this.loaded={}}loadTile(e,n){const r=e.uid;this.loading||(this.loading={});const i=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),a=this.loading[r]=new o(e);a.abort=this.loadVectorData(e,((e,o)=>{if(delete this.loading[r],e||!o)return a.status="done",this.loaded[r]=a,n(e);const s=o.rawData,l={};o.expires&&(l.expires=o.expires),o.cacheControl&&(l.cacheControl=o.cacheControl);const u={};if(i){const t=i.finish();t&&(u.resourceTiming=JSON.parse(JSON.stringify(t)))}a.vectorTile=o.vectorTile,a.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((e,r)=>{if(e||!r)return n(e);n(null,t.extend({rawTileData:s.slice(0)},r,l,u))})),this.loaded=this.loaded||{},this.loaded[r]=a}))}reloadTile(t,e){const n=this.loaded,r=t.uid,i=this;if(n&&n[r]){const o=n[r];o.showCollisionBoxes=t.showCollisionBoxes;const a=(t,n)=>{const r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,this.availableImages,i.actor,r)),e(t,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}}abortTile(t,e){const n=this.loading,r=t.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()}removeTile(t,e){const n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()}}class u{constructor(){this.loaded={}}loadTile(e,n){const{uid:r,encoding:i,rawImageData:o}=e,a=t.isImageBitmap(o)?this.getImageData(o):o,s=new t.DEMData(r,a,i);this.loaded=this.loaded||{},this.loaded[r]=s,n(null,s)}getImageData(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const n=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:n.width,height:n.height},n.data)}removeTile(t){const e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]}}var c=function t(e,n){var r,i=e&&e.type;if("FeatureCollection"===i)for(r=0;r<e.features.length;r++)t(e.features[r],n);else if("GeometryCollection"===i)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],n);else if("Feature"===i)t(e.geometry,n);else if("Polygon"===i)h(e.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<e.coordinates.length;r++)h(e.coordinates[r],n);return e};function h(t,e){if(0!==t.length){f(t[0],e);for(var n=1;n<t.length;n++)f(t[n],!e)}}function f(t,e){for(var n=0,r=0,i=0,o=t.length,a=o-1;i<o;a=i++){var s=(t[i][0]-t[a][0])*(t[a][1]+t[i][1]),l=n+s;r+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+r>=0!=!!e&&t.reverse()}const p=t.vectorTile.VectorTileFeature.prototype.toGeoJSON;class d{constructor(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const n of this._feature.geometry)e.push([new t.pointGeometry(n[0],n[1])]);return e}{const e=[];for(const n of this._feature.geometry){const r=[];for(const e of n)r.push(new t.pointGeometry(e[0],e[1]));e.push(r)}return e}}toGeoJSON(t,e,n){return p.call(this,t,e,n)}}class m{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e}feature(t){return new d(this._features[t])}}var g={exports:{}},v=t.pointGeometry,y=t.vectorTile.VectorTileFeature,_=x;function x(t,e){this.options=e||{},this.features=t,this.length=t.length}function b(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}x.prototype.feature=function(t){return new b(this.features[t],this.options.extent)},b.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],r=[],i=0;i<n.length;i++)r.push(new v(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},b.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[e,r,n,i]},b.prototype.toGeoJSON=y.prototype.toGeoJSON;var w=t.pbf,k=_;function S(t){var e=new w;return function(t,e){for(var n in t.layers)e.writeMessage(3,E,t.layers[n])}(t,e),e.finish()}function E(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,I,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,M,o[n])}function I(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,C,t),e.writeVarintField(3,n.type),e.writeMessage(4,T,n)}function C(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var l=n.properties[s],u=o[s];if(null!==l){void 0===u&&(r.push(s),o[s]=u=r.length-1),e.writeVarint(u);var c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var h=c+":"+l,f=a[h];void 0===f&&(i.push(l),a[h]=f=i.length-1),e.writeVarint(f)}}}function A(t,e){return(e<<3)+(7&t)}function P(t){return t<<1^t>>31}function T(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],u=1;1===r&&(u=l.length),e.writeVarint(A(1,u));for(var c=3===r?l.length-1:l.length,h=0;h<c;h++){1===h&&1!==r&&e.writeVarint(A(2,c-1));var f=l[h].x-i,p=l[h].y-o;e.writeVarint(P(f)),e.writeVarint(P(p)),i+=f,o+=p}3===r&&e.writeVarint(A(7,1))}}function M(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}g.exports=S,g.exports.fromVectorTileJs=S,g.exports.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new k(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return S({layers:n})},g.exports.GeoJSONWrapper=k;var L=g.exports;function R(t,e,n,r,i,o){if(i-r<=n)return;const a=r+i>>1;N(t,e,a,r,i,o%2),R(t,e,n,r,a-1,o+1),R(t,e,n,a+1,i,o+1)}function N(t,e,n,r,i,o){for(;i>r;){if(i-r>600){const a=i-r+1,s=n-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);N(t,e,n,Math.max(r,Math.floor(n-s*u/a+c)),Math.min(i,Math.floor(n+(a-s)*u/a+c)),o)}const a=e[2*n+o];let s=r,l=i;for(O(t,e,r,n),e[2*i+o]>a&&O(t,e,r,i);s<l;){for(O(t,e,s,l),s++,l--;e[2*s+o]<a;)s++;for(;e[2*l+o]>a;)l--}e[2*r+o]===a?O(t,e,r,l):(l++,O(t,e,l,i)),l<=n&&(r=l+1),n<=l&&(i=l-1)}}function O(t,e,n,r){z(t,n,r),z(e,2*n,2*r),z(e,2*n+1,2*r+1)}function z(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function D(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}const F=t=>t[0],B=t=>t[1];class j{constructor(t,e=F,n=B,r=64,i=Float64Array){this.nodeSize=r,this.points=t;const o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new i(2*t.length);for(let l=0;l<t.length;l++)a[l]=l,s[2*l]=e(t[l]),s[2*l+1]=n(t[l]);R(a,s,r,0,a.length-1,0)}range(t,e,n,r){return function(t,e,n,r,i,o,a){const s=[0,t.length-1,0],l=[];let u,c;for(;s.length;){const h=s.pop(),f=s.pop(),p=s.pop();if(f-p<=a){for(let a=p;a<=f;a++)u=e[2*a],c=e[2*a+1],u>=n&&u<=i&&c>=r&&c<=o&&l.push(t[a]);continue}const d=Math.floor((p+f)/2);u=e[2*d],c=e[2*d+1],u>=n&&u<=i&&c>=r&&c<=o&&l.push(t[d]);const m=(h+1)%2;(0===h?n<=u:r<=c)&&(s.push(p),s.push(d-1),s.push(m)),(0===h?i>=u:o>=c)&&(s.push(d+1),s.push(f),s.push(m))}return l}(this.ids,this.coords,t,e,n,r,this.nodeSize)}within(t,e,n){return function(t,e,n,r,i,o){const a=[0,t.length-1,0],s=[],l=i*i;for(;a.length;){const u=a.pop(),c=a.pop(),h=a.pop();if(c-h<=o){for(let i=h;i<=c;i++)D(e[2*i],e[2*i+1],n,r)<=l&&s.push(t[i]);continue}const f=Math.floor((h+c)/2),p=e[2*f],d=e[2*f+1];D(p,d,n,r)<=l&&s.push(t[f]);const m=(u+1)%2;(0===u?n-i<=p:r-i<=d)&&(a.push(h),a.push(f-1),a.push(m)),(0===u?n+i>=p:r+i>=d)&&(a.push(f+1),a.push(c),a.push(m))}return s}(this.ids,this.coords,t,e,n,this.nodeSize)}}const Z={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},U=Math.fround||(V=new Float32Array(1),t=>(V[0]=+t,V[0]));var V;class q{constructor(t){this.options=J(Object.create(Z),t),this.trees=new Array(this.options.maxZoom+1)}load(t){const{log:e,minZoom:n,maxZoom:r,nodeSize:i}=this.options;e&&console.time("total time");const o=`prepare ${t.length} points`;e&&console.time(o),this.points=t;let a=[];for(let s=0;s<t.length;s++)t[s].geometry&&a.push(W(t[s],s));this.trees[r+1]=new j(a,Q,tt,i,Float32Array),e&&console.timeEnd(o);for(let s=r;s>=n;s--){const t=+Date.now();a=this._cluster(a,s),this.trees[s]=new j(a,Q,tt,i,Float32Array),e&&console.log("z%d: %d clusters in %dms",s,a.length,+Date.now()-t)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,t[1]));let i=180===t[2]?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){const t=this.getClusters([n,r,180,o],e),a=this.getClusters([-180,r,i,o],e);return t.concat(a)}const a=this.trees[this._limitZoom(e)],s=a.range(Y(n),$(o),Y(i),$(r)),l=[];for(const u of s){const t=a.points[u];l.push(t.numPoints?H(t):this.points[t.index])}return l}getChildren(t){const e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const o=i.points[e];if(!o)throw new Error(r);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),l=[];for(const u of s){const e=i.points[u];e.parentId===t&&l.push(e.numPoints?H(e):this.points[e.index])}if(0===l.length)throw new Error(r);return l}getLeaves(t,e,n){const r=[];return this._appendLeaves(r,t,e=e||10,n=n||0,0),r}getTile(t,e,n){const r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),{extent:o,radius:a}=this.options,s=a/o,l=(n-s)/i,u=(n+1+s)/i,c={features:[]};return this._addTileFeatures(r.range((e-s)/i,l,(e+1+s)/i,u),r.points,e,n,i,c),0===e&&this._addTileFeatures(r.range(1-s/i,l,1,u),r.points,i,n,i,c),e===i-1&&this._addTileFeatures(r.range(0,l,s/i,u),r.points,-1,n,i,c),c.features.length?c:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,r,i){const o=this.getChildren(e);for(const a of o){const e=a.properties;if(e&&e.cluster?i+e.point_count<=r?i+=e.point_count:i=this._appendLeaves(t,e.cluster_id,n,r,i):i<r?i++:t.push(a),t.length===n)break}return i}_addTileFeatures(t,e,n,r,i,o){for(const a of t){const t=e[a],s=t.numPoints;let l,u,c;if(s)l=X(t),u=t.x,c=t.y;else{const e=this.points[t.index];l=e.properties,u=Y(e.geometry.coordinates[0]),c=$(e.geometry.coordinates[1])}const h={type:1,geometry:[[Math.round(this.options.extent*(u*i-n)),Math.round(this.options.extent*(c*i-r))]],tags:l};let f;s?f=t.id:this.options.generateId?f=t.index:this.points[t.index].id&&(f=this.points[t.index].id),void 0!==f&&(h.id=f),o.features.push(h)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))}_cluster(t,e){const n=[],{radius:r,extent:i,reduce:o,minPoints:a}=this.options,s=r/(i*Math.pow(2,e));for(let l=0;l<t.length;l++){const r=t[l];if(r.zoom<=e)continue;r.zoom=e;const i=this.trees[e+1],u=i.within(r.x,r.y,s),c=r.numPoints||1;let h=c;for(const t of u){const n=i.points[t];n.zoom>e&&(h+=n.numPoints||1)}if(h>c&&h>=a){let t=r.x*c,a=r.y*c,s=o&&c>1?this._map(r,!0):null;const f=(l<<5)+(e+1)+this.points.length;for(const n of u){const l=i.points[n];if(l.zoom<=e)continue;l.zoom=e;const u=l.numPoints||1;t+=l.x*u,a+=l.y*u,l.parentId=f,o&&(s||(s=this._map(r,!0)),o(s,this._map(l)))}r.parentId=f,n.push(G(t/h,a/h,f,h,s))}else if(n.push(r),h>1)for(const t of u){const r=i.points[t];r.zoom<=e||(r.zoom=e,n.push(r))}}return n}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?J({},t.properties):t.properties;const n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?J({},r):r}}function G(t,e,n,r,i){return{x:U(t),y:U(e),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function W(t,e){const[n,r]=t.geometry.coordinates;return{x:U(Y(n)),y:U($(r)),zoom:1/0,index:e,parentId:-1}}function H(t){return{type:"Feature",id:t.id,properties:X(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),K(t.y)]}};var e}function X(t){const e=t.numPoints,n=e>=1e4?`${Math.round(e/1e3)}k`:e>=1e3?Math.round(e/100)/10+"k":e;return J(J({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function Y(t){return t/360+.5}function $(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function K(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function J(t,e){for(const n in e)t[n]=e[n];return t}function Q(t){return t.x}function tt(t){return t.y}function et(t,e,n,r){for(var i,o=r,a=n-e>>1,s=n-e,l=t[e],u=t[e+1],c=t[n],h=t[n+1],f=e+3;f<n;f+=3){var p=nt(t[f],t[f+1],l,u,c,h);if(p>o)i=f,o=p;else if(p===o){var d=Math.abs(f-a);d<s&&(i=f,s=d)}}o>r&&(i-e>3&&et(t,e,i,r),t[i+2]=o,n-i>3&&et(t,i,n,r))}function nt(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var l=((t-n)*a+(e-r)*s)/(a*a+s*s);l>1?(n=i,r=o):l>0&&(n+=a*l,r+=s*l)}return(a=t-n)*a+(s=e-r)*s}function rt(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)it(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)it(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)it(t,e[r][i])}(i),i}function it(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function ot(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===o)at(i,s);else if("MultiPoint"===o)for(var u=0;u<i.length;u++)at(i[u],s);else if("LineString"===o)st(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(u=0;u<i.length;u++)st(i[u],s=[],a,!1),t.push(rt(l,"LineString",s,e.properties));return}lt(i,s,a,!1)}else if("Polygon"===o)lt(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(u=0;u<e.geometry.geometries.length;u++)ot(t,{id:l,geometry:e.geometry.geometries[u],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<i.length;u++){var c=[];lt(i[u],c,a,!0),s.push(c)}}t.push(rt(l,o,s,e.properties))}}function at(t,e){e.push(ut(t[0])),e.push(ct(t[1])),e.push(0)}function st(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var l=ut(t[s][0]),u=ct(t[s][1]);e.push(l),e.push(u),e.push(0),s>0&&(a+=r?(i*u-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-o,2))),i=l,o=u}var c=e.length-3;e[2]=1,et(e,0,c,n),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function lt(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];st(t[i],o,n,r),e.push(o)}}function ut(t){return t/360+.5}function ct(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function ht(t,e,n,r,i,o,a,s){if(r/=e,o>=(n/=e)&&a<r)return t;if(a<n||o>=r)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],h=c.geometry,f=c.type,p=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(p>=n&&d<r)l.push(c);else if(!(d<n||p>=r)){var m=[];if("Point"===f||"MultiPoint"===f)ft(h,m,n,r,i);else if("LineString"===f)pt(h,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===f)mt(h,m,n,r,i,!1);else if("Polygon"===f)mt(h,m,n,r,i,!0);else if("MultiPolygon"===f)for(var g=0;g<h.length;g++){var v=[];mt(h[g],v,n,r,i,!0),v.length&&m.push(v)}if(m.length){if(s.lineMetrics&&"LineString"===f){for(g=0;g<m.length;g++)l.push(rt(c.id,f,m[g],c.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===m.length?(f="LineString",m=m[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===m.length?"Point":"MultiPoint"),l.push(rt(c.id,f,m,c.tags))}}}return l.length?l:null}function ft(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function pt(t,e,n,r,i,o,a){for(var s,l,u=dt(t),c=0===i?vt:yt,h=t.start,f=0;f<t.length-3;f+=3){var p=t[f],d=t[f+1],m=t[f+2],g=t[f+3],v=t[f+4],y=0===i?p:d,_=0===i?g:v,x=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(d-v,2))),y<n?_>n&&(l=c(u,p,d,g,v,n),a&&(u.start=h+s*l)):y>r?_<r&&(l=c(u,p,d,g,v,r),a&&(u.start=h+s*l)):gt(u,p,d,m),_<n&&y>=n&&(l=c(u,p,d,g,v,n),x=!0),_>r&&y<=r&&(l=c(u,p,d,g,v,r),x=!0),!o&&x&&(a&&(u.end=h+s*l),e.push(u),u=dt(t)),a&&(h+=s)}var b=t.length-3;p=t[b],d=t[b+1],m=t[b+2],(y=0===i?p:d)>=n&&y<=r&&gt(u,p,d,m),b=u.length-3,o&&b>=3&&(u[b]!==u[0]||u[b+1]!==u[1])&&gt(u,u[0],u[1],u[2]),u.length&&e.push(u)}function dt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function mt(t,e,n,r,i,o){for(var a=0;a<t.length;a++)pt(t[a],e,n,r,i,o,!1)}function gt(t,e,n,r){t.push(e),t.push(n),t.push(r)}function vt(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function yt(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function _t(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=xt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(xt(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(xt(o.geometry[s][u],e));i.push(l)}n.push(rt(o.id,a,i,o.tags))}return n}function xt(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function bt(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(r=0;r<u.length;r+=2)l.geometry.push(wt(u[r],u[r+1],e,o,a,s));else for(r=0;r<u.length;r++){var h=[];for(i=0;i<u[r].length;i+=2)h.push(wt(u[r][i],u[r][i+1],e,o,a,s));l.geometry.push(h)}}return t.transformed=!0,t}function wt(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function kt(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,St(a,t[s],o,i);var l=t[s].minX,u=t[s].minY,c=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),h>a.maxY&&(a.maxY=h)}return a}function St(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)Et(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)Et(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var u=i[l];for(s=0;s<u.length;s++)Et(a,u[s],t,n,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var f={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(f.id=e.id),t.features.push(f)}}function Et(t,e,n,r,i,o){var a=r*r;if(r>0&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===r||e[l+2]>a)&&(n.numSimplified++,s.push(e[l]),s.push(e[l+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}(s,o),t.push(s)}}function It(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)ot(n,t.features[r],e,r);else ot(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(t,e){var n=e.buffer/e.extent,r=t,i=ht(t,1,-1-n,n,0,-1,2,e),o=ht(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=ht(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=_t(i,1).concat(r)),o&&(r=r.concat(_t(o,-1)))),r}(r,e),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ct(t,e,n){return 32*((1<<t)*n+e)+t}function At(t,e){const n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);const r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return e(null,null);const i=new m(r.features);let o=L(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}It.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},It.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],l=this.options,u=l.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,h=Ct(e,n,r),f=this.tiles[h];if(!f&&(u>1&&console.time("creation"),f=this.tiles[h]=kt(t,e,n,r,l),this.tileCoords.push({z:e,x:n,y:r}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,f.numFeatures,f.numPoints,f.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(f.source=t,i){if(e===l.maxZoom||e===i)continue;var d=1<<i-e;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(e===l.indexMaxZoom||f.numPoints<=l.indexMaxPoints)continue;if(f.source=null,0!==t.length){u>1&&console.time("clipping");var m,g,v,y,_,x,b=.5*l.buffer/l.extent,w=.5-b,k=.5+b,S=1+b;m=g=v=y=null,_=ht(t,c,n-b,n+k,0,f.minX,f.maxX,l),x=ht(t,c,n+w,n+S,0,f.minX,f.maxX,l),t=null,_&&(m=ht(_,c,r-b,r+k,1,f.minY,f.maxY,l),g=ht(_,c,r+w,r+S,1,f.minY,f.maxY,l),_=null),x&&(v=ht(x,c,r-b,r+k,1,f.minY,f.maxY,l),y=ht(x,c,r+w,r+S,1,f.minY,f.maxY,l),x=null),u>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*n,2*r),s.push(g||[],e+1,2*n,2*r+1),s.push(v||[],e+1,2*n+1,2*r),s.push(y||[],e+1,2*n+1,2*r+1)}}},It.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,s=Ct(t,e=(e%a+a)%a,n);if(this.tiles[s])return bt(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l,u=t,c=e,h=n;!l&&u>0;)u--,c=Math.floor(c/2),h=Math.floor(h/2),l=this.tiles[Ct(u,c,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",u,c,h),o>1&&console.time("drilling down"),this.splitTile(l.source,u,c,h,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?bt(this.tiles[s],i):null):null};class Pt extends l{constructor(t,e,n,r){super(t,e,n,At),r&&(this.loadGeoJSON=r)}loadData(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const e=this._pendingCallback,n=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const r=!!(n&&n.request&&n.request.collectResourceTiming)&&new t.RequestPerformance(n.request);this.loadGeoJSON(n,((i,o)=>{if(i||!o)return e(i);if("object"!=typeof o)return e(new Error(`Input data given to '${n.source}' is not a valid GeoJSON object.`));{c(o,!0);try{if(n.filter){const e=t.createExpression(n.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===e.result)throw new Error(e.value.map((t=>`${t.key}: ${t.message}`)).join(", "));const r=o.features.filter((t=>e.value.evaluate({zoom:0},t)));o={type:"FeatureCollection",features:r}}this._geoJSONIndex=n.cluster?new q(function({superclusterOptions:e,clusterProperties:n}){if(!n||!e)return e;const r={},i={},o={accumulated:null,zoom:0},a={properties:null},s=Object.keys(n);for(const l of s){const[e,o]=n[l],a=t.createExpression(o),s=t.createExpression("string"==typeof e?[e,["accumulated"],["get",l]]:e);r[l]=a.value,i[l]=s.value}return e.map=t=>{a.properties=t;const e={};for(const n of s)e[n]=r[n].evaluate(o,a);return e},e.reduce=(t,e)=>{a.properties=e;for(const n of s)o.accumulated=t[n],t[n]=i[n].evaluate(o,a)},e}(n)).load(o.features):function(t,e){return new It(t,e)}(o,n.geojsonVtOptions)}catch(i){return e(i)}this.loaded={};const a={};if(r){const t=r.finish();t&&(a.resourceTiming={},a.resourceTiming[n.source]=JSON.parse(JSON.stringify(t)))}e(null,a)}}))}coalesce(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())}reloadTile(t,e){const n=this.loaded;return n&&n[t.uid]?super.reloadTile(t,e):this.loadTile(t,e)}loadGeoJSON(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`))}}}removeSource(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()}getClusterExpansionZoom(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}getClusterChildren(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}getClusterLeaves(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}class Tt{constructor(e){this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:Pt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(t,e)=>{if(this.workerSourceTypes[t])throw new Error(`Worker source with name "${t}" already registered.`);this.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=e=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}setReferrer(t,e){this.referrer=e}setImages(t,e,n){this.availableImages[t]=e;for(const r in this.workerSources[t]){const n=this.workerSources[t][r];for(const t in n)n[t].availableImages=e}n()}setLayers(t,e,n){this.getLayerIndex(t).replace(e),n()}updateLayers(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()}loadTile(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)}loadDEMTile(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)}reloadTile(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)}abortTile(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)}removeTile(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)}removeDEMTile(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)}removeSource(t,e,n){if(!this.workerSources[t]||!this.workerSources[t][e.type]||!this.workerSources[t][e.type][e.source])return;const r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}loadWorkerSource(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}}syncRTLPluginState(e,n,r){try{t.plugin.setState(n);const e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=e){this.self.importScripts(e);const n=t.plugin.isParsed();r(n?void 0:new Error(`RTL Text Plugin failed to import scripts from ${e}`),n)}}catch(t){r(t.toString())}}getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}getLayerIndex(t){let e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e}getWorkerSource(t,e,n){if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){const r={send:(e,n,r)=>{this.actor.send(e,n,r,t)}};this.workerSources[t][e][n]=new this.workerSourceTypes[e](r,this.getLayerIndex(t),this.getAvailableImages(t))}return this.workerSources[t][e][n]}getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new u),this.demWorkerSources[t][e]}enforceCacheSizeLimit(e,n){t.enforceCacheSizeLimit(n)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Tt(self)),Tt})),r(["./shared"],(function(t){var e=n;function n(t){return!function(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(void 0===r[e=t&&t.failIfMajorPerformanceCaveat]&&(r[e]=function(t){var e,r=function(t){var e=document.createElement("canvas"),r=Object.create(n.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,e.getContext("webgl",r)||e.getContext("experimental-webgl",r)}(t);if(!r)return!1;try{e=r.createShader(r.VERTEX_SHADER)}catch(t){return!1}return!(!e||r.isContextLost())&&(r.shaderSource(e,"void main() {}"),r.compileShader(e),!0===r.getShaderParameter(e,r.COMPILE_STATUS))}(e)),r[e]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var e}(t)}var r={};function i(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!i(t[n],e[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!i(t[n],e[n]))return!1;return!0}return t===e}n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class o{static testProp(t){if(!o.docStyle)return t[0];for(let e=0;e<t.length;e++)if(t[e]in o.docStyle)return t[e];return t[0]}static create(t,e,n){const r=window.document.createElement(t);return void 0!==e&&(r.className=e),n&&n.appendChild(r),r}static createNS(t,e){return window.document.createElementNS(t,e)}static disableDrag(){o.docStyle&&o.selectProp&&(o.userSelect=o.docStyle[o.selectProp],o.docStyle[o.selectProp]="none")}static enableDrag(){o.docStyle&&o.selectProp&&(o.docStyle[o.selectProp]=o.userSelect)}static setTransform(t,e){t.style[o.transformProp]=e}static addEventListener(t,e,n,r={}){t.addEventListener(e,n,"passive"in r?r:r.capture)}static removeEventListener(t,e,n,r={}){t.removeEventListener(e,n,"passive"in r?r:r.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",o.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",o.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",o.suppressClickInternal,!0)}),0)}static mousePos(e,n){const r=e.getBoundingClientRect();return new t.pointGeometry(n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop)}static touchPos(e,n){const r=e.getBoundingClientRect(),i=[];for(let o=0;o<n.length;o++)i.push(new t.pointGeometry(n[o].clientX-r.left-e.clientLeft,n[o].clientY-r.top-e.clientTop));return i}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}}o.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,o.selectProp=o.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),o.transformProp=o.testProp(["transform","WebkitTransform"]);class a{constructor(t){this._transformRequestFn=t}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeSpriteURL(t,e,n){const r=function(t){const e=t.match(s);if(!e)throw new Error(`Unable to parse URL "${t}"`);return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}(t);return r.path+=`${e}${n}`,function(t){const e=t.params.length?`?${t.params.join("&")}`:"";return`${t.protocol}://${t.authority}${t.path}${e}`}(r)}setTransformRequest(t){this._transformRequestFn=t}}const s=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function l(e){var n=new t.ARRAY_TYPE(3);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}var u,c=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t};u=new t.ARRAY_TYPE(3),t.ARRAY_TYPE!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0);var h=function(t){var e=t[0],n=t[1];return e*e+n*n};!function(){var e=new t.ARRAY_TYPE(2);t.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0)}();class f{constructor(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)}update(e,n,r){const{width:i,height:o}=e,a=!(this.size&&this.size[0]===i&&this.size[1]===o||r),{context:s}=this,{gl:l}=s;if(this.useMipmap=Boolean(n&&n.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!n||!1!==n.premultiply)),a)this.size=[i,o],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.isImageBitmap(e)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,e):l.texImage2D(l.TEXTURE_2D,0,this.format,i,o,0,this.format,l.UNSIGNED_BYTE,e.data);else{const{x:n,y:a}=r||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.isImageBitmap(e)?l.texSubImage2D(l.TEXTURE_2D,0,n,a,l.RGBA,l.UNSIGNED_BYTE,e):l.texSubImage2D(l.TEXTURE_2D,0,n,a,i,o,l.RGBA,l.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D)}bind(t,e,n){const{context:r}=this,{gl:i}=r;i.bindTexture(i.TEXTURE_2D,this.texture),n!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=i.LINEAR),t!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}function p(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}class d extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,callback:e}of this.requestors)this._notify(t,e);this.requestors=[]}}getImage(t){return this.images[t]}addImage(t,e){this._validate(t,e)&&(this.images[t]=e)}_validate(e,n){let r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchX" value`))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchY" value`))),r=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "content" value`))),r=!1),r}_validateStretch(t,e){if(!t)return!0;let n=0;for(const r of t){if(r[0]<n||r[1]<r[0]||e<r[1])return!1;n=r[1]}return!0}_validateContent(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0}removeImage(t){const e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,e){let n=!0;if(!this.isLoaded())for(const r of t)this.images[r]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})}_notify(e,n){const r={};for(const i of e){this.images[i]||this.fire(new t.Event("styleimagemissing",{id:i}));const e=this.images[i];e?r[i]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.warnOnce(`Image "${i}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}n(null,r)}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(e){const n=this.patterns[e],r=this.getImage(e);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{const n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new t.ImagePosition(n,r);this.patterns[e]={bin:n,position:i}}return this._updatePatternAtlas(),this.patterns[e].position}bind(t){const e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new f(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:n,h:r}=t.potpack(e),i=this.atlasImage;i.resize({width:n||1,height:r||1});for(const o in this.patterns){const{bin:e}=this.patterns[o],n=e.x+1,r=e.y+1,a=this.images[o].data,s=a.width,l=a.height;t.RGBAImage.copy(a,i,{x:0,y:0},{x:n,y:r},{width:s,height:l}),t.RGBAImage.copy(a,i,{x:0,y:l-1},{x:n,y:r-1},{width:s,height:1}),t.RGBAImage.copy(a,i,{x:0,y:0},{x:n,y:r+l},{width:s,height:1}),t.RGBAImage.copy(a,i,{x:s-1,y:0},{x:n-1,y:r},{width:1,height:l}),t.RGBAImage.copy(a,i,{x:0,y:0},{x:n+s,y:r},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const e of t){if(this.callbackDispatchedThisFrame[e])continue;this.callbackDispatchedThisFrame[e]=!0;const t=this.images[e];p(t)&&this.updateImage(e,t)}}}const m=1e20;function g(t,e,n,r,i,o,a,s,l){for(let u=e;u<e+r;u++)v(t,n*o+u,o,i,a,s,l);for(let u=n;u<n+i;u++)v(t,u*o+e,1,r,a,s,l)}function v(t,e,n,r,i,o,a){o[0]=0,a[0]=-m,a[1]=m,i[0]=t[e];for(let s=1,l=0,u=0;s<r;s++){i[s]=t[e+s*n];const r=s*s;do{const t=o[l];u=(i[s]-i[t]+r-t*t)/(s-t)/2}while(u<=a[l]&&--l>-1);l++,o[l]=s,a[l]=u,a[l+1]=m}for(let s=0,l=0;s<r;s++){for(;a[l+1]<s;)l++;const r=o[l],u=s-r;t[e+s*n]=i[r]+u*u}}class y{constructor(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}}setURL(t){this.url=t}getGlyphs(e,n){const r=[];for(const t in e)for(const n of e[t])r.push({stack:t,id:n});t.asyncAll(r,(({stack:t,id:e},n)=>{let r=this.entries[t];r||(r=this.entries[t]={glyphs:{},requests:{},ranges:{}});let i=r.glyphs[e];if(void 0!==i)return void n(null,{stack:t,id:e,glyph:i});if(i=this._tinySDF(r,t,e),i)return r.glyphs[e]=i,void n(null,{stack:t,id:e,glyph:i});const o=Math.floor(e/256);if(256*o>65535)return void n(new Error("glyphs > 65535 not supported"));if(r.ranges[o])return void n(null,{stack:t,id:e,glyph:i});let a=r.requests[o];a||(a=r.requests[o]=[],y.loadGlyphRange(t,o,this.url,this.requestManager,((t,e)=>{if(e){for(const t in e)this._doesCharSupportLocalGlyph(+t)||(r.glyphs[+t]=e[+t]);r.ranges[o]=!0}for(const n of a)n(t,e);delete r.requests[o]}))),a.push(((r,i)=>{r?n(r):i&&n(null,{stack:t,id:e,glyph:i[e]||null})}))}),((t,e)=>{if(t)n(t);else if(e){const t={};for(const{stack:n,id:r,glyph:i}of e)(t[n]||(t[n]={}))[r]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics};n(null,t)}}))}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&(t.unicodeBlockLookup["CJK Unified Ideographs"](e)||t.unicodeBlockLookup["Hangul Syllables"](e)||t.unicodeBlockLookup.Hiragana(e)||t.unicodeBlockLookup.Katakana(e))}_tinySDF(e,n,r){const i=this.localIdeographFontFamily;if(!i)return;if(!this._doesCharSupportLocalGlyph(r))return;let o=e.tinySDF;if(!o){let t="400";/bold/i.test(n)?t="900":/medium/i.test(n)?t="500":/light/i.test(n)&&(t="200"),o=e.tinySDF=new y.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:i,fontWeight:t})}const a=o.draw(String.fromCharCode(r));return{id:r,bitmap:new t.AlphaImage({width:a.width||30,height:a.height||30},a.data),metrics:{width:a.glyphWidth||24,height:a.glyphHeight||24,left:a.glyphLeft||0,top:a.glyphTop-27||-8,advance:a.glyphAdvance||24}}}}y.loadGlyphRange=function(e,n,r,i,o){const a=256*n,s=a+255,l=i.transformRequest(r.replace("{fontstack}",e).replace("{range}",`${a}-${s}`),t.ResourceType.Glyphs);t.getArrayBuffer(l,((e,n)=>{if(e)o(e);else if(n){const e={};for(const r of t.parseGlyphPBF(n))e[r.id]=r;o(null,e)}}))},y.TinySDF=class{constructor({fontSize:t=24,buffer:e=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}={}){this.buffer=e,this.cutoff=r,this.radius=n;const s=this.size=t+4*e,l=this._createCanvas(s),u=this.ctx=l.getContext("2d",{willReadFrequently:!0});u.font=`${a} ${o} ${t}px ${i}`,u.textBaseline="alphabetic",u.textAlign="left",u.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(t),a=Math.ceil(n),s=Math.min(this.size-this.buffer,Math.ceil(o-i)),l=Math.min(this.size-this.buffer,a+Math.ceil(r)),u=s+2*this.buffer,c=l+2*this.buffer,h=Math.max(u*c,0),f=new Uint8ClampedArray(h),p={data:f,width:u,height:c,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:e};if(0===s||0===l)return p;const{ctx:d,buffer:v,gridInner:y,gridOuter:_}=this;d.clearRect(v,v,s,l),d.fillText(t,v,v+a);const x=d.getImageData(v,v,s,l);_.fill(m,0,h),y.fill(0,0,h);for(let g=0;g<l;g++)for(let t=0;t<s;t++){const e=x.data[4*(g*s+t)+3]/255;if(0===e)continue;const n=(g+v)*u+t+v;if(1===e)_[n]=0,y[n]=m;else{const t=.5-e;_[n]=t>0?t*t:0,y[n]=t<0?t*t:0}}g(_,0,0,u,c,u,this.f,this.v,this.z),g(y,v,v,s,l,u,this.f,this.v,this.z);for(let m=0;m<h;m++){const t=Math.sqrt(_[m])-Math.sqrt(y[m]);f[m]=Math.round(255-255*(t/this.radius+this.cutoff))}return p}};const _=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new class{constructor(){this.specification=t.spec.light.position}possiblyEvaluate(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))}interpolate(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r)}}},color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)}),x="-transition";class b extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(_),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,n={}){if(!this._validate(t.validateLight,e,n))for(const t in e){const n=e[t];t.endsWith(x)?this._transitionable.setTransition(t.slice(0,-x.length),n):this._transitionable.setValue(t,n)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}class w{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,e){const n=t.join(",")+String(e);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(t,e)),this.dashEntry[n]}getDashRanges(t,e,n){const r=[];let i=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===t[0]});let s=t[0];for(let l=1;l<t.length;l++){a=!a;const e=t[l];i=s*n,s+=e,o=s*n,r.push({left:i,right:o,isDash:a,zeroLength:0===e})}return r}addRoundDash(t,e,n){const r=e/2;for(let i=-n;i<=n;i++){const e=this.width*(this.nextRow+n+i);let o=0,a=t[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=t[++o]);const l=Math.abs(s-a.left),u=Math.abs(s-a.right),c=Math.min(l,u);let h;const f=i/n*(r+1);if(a.isDash){const t=r-Math.abs(f);h=Math.sqrt(c*c+t*t)}else h=r-Math.sqrt(c*c+f*f);this.data[e+s]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(t){for(let a=t.length-1;a>=0;--a){const e=t[a],n=t[a+1];e.zeroLength?t.splice(a,1):n&&n.isDash===e.isDash&&(n.left=e.left,t.splice(a,1))}const e=t[0],n=t[t.length-1];e.isDash===n.isDash&&(e.left=n.left-this.width,n.right=e.right+this.width);const r=this.width*this.nextRow;let i=0,o=t[i];for(let a=0;a<this.width;a++){a/o.right>1&&(o=t[++i]);const e=Math.abs(a-o.left),n=Math.abs(a-o.right),s=Math.min(e,n);this.data[r+a]=Math.max(0,Math.min(255,(o.isDash?s:-s)+128))}}addDash(e,n){const r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.warnOnce("LineAtlas out of space"),null;let o=0;for(let t=0;t<e.length;t++)o+=e[t];if(0!==o){const t=this.width/o,i=this.getDashRanges(e,this.width,t);n?this.addRoundDash(i,t,r):this.addRegularDash(i)}const a={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,a}bind(t){const e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))}}class k{constructor(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const r=this.workerPool.acquire(this.id);for(let t=0;t<r.length;t++){const e=new k.Actor(r[t],n,this.id);e.name=`Worker ${t}`,this.actors.push(e)}}broadcast(e,n,r){t.asyncAll(this.actors,((t,r)=>{t.send(e,n,r)}),r=r||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((t=>{t.remove()})),this.actors=[],this.workerPool.release(this.id)}}function S(e,n,r){const i=function(n,i){if(n)return r(n);if(i){const n=t.pick(t.extend(i,e),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(n.vectorLayers=i.vector_layers,n.vectorLayerIds=n.vectorLayers.map((t=>t.id))),r(null,n)}};return e.url?t.getJSON(n.transformRequest(e.url,t.ResourceType.Source),i):t.exported.frame((()=>i(null,e)))}k.Actor=t.Actor;class E{constructor(e,n,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=r||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(e){const n=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=r&&e.x<o&&e.y>=i&&e.y<a}}class I extends t.Evented{constructor(e,n,r,i){if(super(),this.id=e,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(n,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i)}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=S(this._options,this.map._requestManager,((e,n)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e?this.fire(new t.ErrorEvent(e)):n&&(t.extend(this,n),n.bounds&&(this.tileBounds=new E(n.bounds,this.minzoom,this.maxzoom)),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}loadTile(e,n){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),i={request:this.map._requestManager.transformRequest(r,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function o(r,i){return delete e.request,e.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}i.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",i,o.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",i,o.bind(this)))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class C extends t.Evented{constructor(e,n,r,i){super(),this.id=e,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},n),t.extend(this,t.pick(n,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=S(this._options,this.map._requestManager,((e,n)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(t.extend(this,n),n.bounds&&(this.tileBounds=new E(n.bounds,this.minzoom,this.maxzoom)),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,n){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),((r,i,o)=>{if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(i){this.map._refreshExpiredTiles&&e.setExpiryData(o);const r=this.map.painter.context,a=r.gl;e.texture=this.map.painter.getTileTexture(i.width),e.texture?e.texture.update(i,{useMipmap:!0}):(e.texture=new f(r,i,a.RGBA,{useMipmap:!0}),e.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),r.extTextureFilterAnisotropic&&a.texParameterf(a.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),n(null)}}))}abortTile(t,e){t.request&&(t.request.cancel(),delete t.request),e()}unloadTile(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}hasTransition(){return!1}}let A;class P extends C{constructor(e,n,r,i){super(e,n,r,i),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(e,n){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function i(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),function(r,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;const n=t.isImageBitmap(o)&&(null==A&&(A="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),A)?o:t.exported.getImageData(o,1),r={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:n,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",r,i.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)}_getNeighboringTiles(e){const n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})}}class T extends t.Evented{constructor(e,n,r,i){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=r.getActor(),this.setEventedParent(i),this._data=n.data,this._options=t.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:t.EXTENT,radius:(n.clusterRadius||50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData("content"),this}getClusterExpansionZoom(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}getClusterChildren(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}getClusterLeaves(t,e,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r),this}_updateWorkerData(e){const n=t.extend({},this.workerOptions),r=this._data;"string"==typeof r?(n.request=this.map._requestManager.transformRequest(t.exported.resolveURL(r),t.ResourceType.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(r),this._pendingLoads++,this.fire(new t.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,n,((r,i)=>{if(this._pendingLoads--,this._removed||i&&i.abandoned)return;let o=null;if(i&&i.resourceTiming&&i.resourceTiming[this.id]&&(o=i.resourceTiming[this.id].slice(0)),this.actor.send(`${this.type}.coalesce`,{source:n.source},null),r)return void this.fire(new t.ErrorEvent(r));const a={dataType:"source",sourceDataType:e};this._collectResourceTiming&&o&&o.length>0&&t.extend(a,{resourceTiming:o}),this.fire(new t.Event("data",a))}))}loaded(){return 0===this._pendingLoads}loadTile(t,e){const n=t.actor?"reloadTile":"loadTile";t.actor=this.actor;const r={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.request=this.actor.send(n,r,((r,i)=>(delete t.request,t.unloadVectorData(),t.aborted?e(null):r?e(r):(t.loadVectorData(i,this.map.painter,"reloadTile"===n),e(null)))))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var M=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class L extends t.Evented{constructor(t,e,n,r){super(),this.id=t,this.dispatcher=n,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=e}load(e,n){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),((r,i)=>{this._loaded=!0,r?this.fire(new t.ErrorEvent(r)):i&&(this.image=i,e&&(this.coordinates=e),n&&n(),this._finishLoading())}))}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}setCoordinates(e){this.coordinates=e;const n=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){let n=1/0,r=1/0,i=-1/0,o=-1/0;for(const t of e)n=Math.min(n,t.x),r=Math.min(r,t.y),i=Math.max(i,t.x),o=Math.max(o,t.y);const a=Math.max(i-n,o-r),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new t.CanonicalTileID(s,Math.floor((n+i)/2*l),Math.floor((r+o)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z;const r=n.map((t=>this.tileID.getTilePoint(t)._round()));return this._boundsArray=new t.RasterBoundsArray,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(r[2].x,r[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,n=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,M.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new f(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}loadTile(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class R extends L{constructor(t,e,n,r){super(t,e,n,r),this.roundZoom=!0,this.type="video",this.options=e}load(){this._loaded=!1;const e=this.options;this.urls=[];for(const n of e.urls)this.urls.push(this.map._requestManager.transformRequest(n,t.ResourceType.Source).url);t.getVideo(this.urls,((e,n)=>{this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(this.video=n,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,n=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,M.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new f(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class N extends L{constructor(e,n,r,i){super(e,n,r,i),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((t=>!Array.isArray(t)||2!==t.length||t.some((t=>"number"!=typeof t))))||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context,r=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,M.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new f(n,this.canvas,r.RGBA,{premultiply:!0});for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const O={vector:I,raster:C,"raster-dem":P,geojson:T,video:R,image:L,canvas:N};function z(e,n){const r=t.create();return t.translate(r,r,[1,1,0]),t.scale(r,r,[.5*e.width,.5*e.height,1]),t.multiply(r,r,e.calculatePosMatrix(n.toUnwrapped()))}function D(t,e,n,r,i,o){const a=function(t,e,n){if(t)for(const r of t){const t=e[r];if(t&&t.source===n&&"fill-extrusion"===t.type)return!0}else for(const r in e){const t=e[r];if(t.source===n&&"fill-extrusion"===t.type)return!0}return!1}(i&&i.layers,e,t.id),s=o.maxPitchScaleFactor(),l=t.tilesIn(r,s,a);l.sort(F);const u=[];for(const h of l)u.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,n,t._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,i,o,s,z(t.transform,h.tileID))});const c=function(t){const e={},n={};for(const r of t){const t=r.queryResults,i=r.wrappedTileID,o=n[i]=n[i]||{};for(const n in t){const r=t[n],i=o[n]=o[n]||{},a=e[n]=e[n]||[];for(const t of r)i[t.featureIndex]||(i[t.featureIndex]=!0,a.push(t))}}return e}(u);for(const h in c)c[h].forEach((e=>{const n=e.feature,r=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r}));return c}function F(t,e){const n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}class B{constructor(e,n){this.tileID=e,this.uid=t.uniqueId(),this.uses=0,this.tileSize=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const n=e+this.timeAdded;n<t.exported.now()||this.fadeEndTime&&n<this.fadeEndTime||(this.fadeEndTime=n)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}loadVectorData(e,n,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(t,e){const n={};if(!e)return n;for(const r of t){const t=r.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){r.layers=t,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)n[e.id]=r}}return n}(e.buckets,n.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const n=this.buckets[e];if(n instanceof t.SymbolBucket){if(this.hasSymbolBuckets=!0,!r)break;n.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const n=this.buckets[e];if(n instanceof t.SymbolBucket&&n.hasRTLText){this.hasRTLText=!0,t.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const t in this.buckets){const e=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(t).queryRadius(e))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new t.CollisionBoxArray}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const n in this.buckets){const e=this.buckets[n];e.uploadPending()&&e.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new f(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new f(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,n,r,i,o,a,s,l,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:i,scale:o,tileSize:this.tileSize,pixelPosMatrix:u,transform:s,params:a,queryPadding:this.queryPadding*l},t,e,n):{}}querySourceFeatures(e,n){const r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;const i=r.loadVTLayers(),o=n?n.sourceLayer:"",a=i._geojsonTileLayer||i[o];if(!a)return;const s=t.createFilter(n&&n.filter),{z:l,x:u,y:c}=this.tileID.canonical,h={z:l,x:u,y:c};for(let f=0;f<a.length;f++){const n=a.feature(f);if(s.needGeometry){const e=t.toEvaluationFeature(n,!0);if(!s.filter(new t.EvaluationParameters(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!s.filter(new t.EvaluationParameters(this.tileID.overscaledZ),n))continue;const i=r.getId(n,o),p=new t.GeoJSONFeature(n,l,u,c,i);p.tile=h,e.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const n=this.expirationTime;if(e.cacheControl){const n=t.parseCacheControl(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const t=Date.now();let e=!1;if(this.expirationTime>t)e=!1;else if(n)if(this.expirationTime<n)e=!0;else{const r=this.expirationTime-n;r?this.expirationTime=t+Math.max(r,3e4):e=!0}else e=!0;e?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length)return;const n=this.latestFeatureIndex.loadVTLayers();for(const r in this.buckets){if(!e.style.hasLayer(r))continue;const i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=t[o];if(!a||!s||0===Object.keys(s).length)continue;i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=e&&e.style&&e.style.getLayer(r);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(i)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<t.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=t.exported.now()+e}setDependencies(t,e){const n={};for(const r of e)n[r]=!0;this.dependencies[t]=n}hasDependency(t,e){for(const n of t){const t=this.dependencies[n];if(t)for(const n of e)if(t[n])return!0}return!1}}class j{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,n){const r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const i={value:e,timeout:void 0};if(void 0!==n&&(i.timeout=setTimeout((()=>{this.remove(t,i)}),n)),this.data[r].push(i),this.order.push(r),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const n in this.data)for(const r of this.data[n])t(r.value)||e.push(r);for(const n of e)this.remove(n.value.tileID,n)}}class Z{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,n,r){const i=String(n);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][i]=this.stateChanges[e][i]||{},t.extend(this.stateChanges[e][i],r),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==i&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][i]){this.deletedStates[e][i]={};for(const t in this.state[e][i])r[t]||(this.deletedStates[e][i][t]=null)}else for(const t in r)this.deletedStates[e]&&this.deletedStates[e][i]&&null===this.deletedStates[e][i][t]&&delete this.deletedStates[e][i][t]}removeFeatureState(t,e,n){if(null===this.deletedStates[t])return;const r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(n in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][n]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}getState(e,n){const r=String(n),i=t.extend({},(this.state[e]||{})[r],(this.stateChanges[e]||{})[r]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const t=this.deletedStates[e][n];if(null===t)return{};for(const e in t)delete i[e]}return i}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(e,n){const r={};for(const i in this.stateChanges){this.state[i]=this.state[i]||{};const e={};for(const n in this.stateChanges[i])this.state[i][n]||(this.state[i][n]={}),t.extend(this.state[i][n],this.stateChanges[i][n]),e[n]=this.state[i][n];r[i]=e}for(const i in this.deletedStates){this.state[i]=this.state[i]||{};const e={};if(null===this.deletedStates[i])for(const t in this.state[i])e[t]={},this.state[i][t]={};else for(const t in this.deletedStates[i]){if(null===this.deletedStates[i][t])this.state[i][t]={};else for(const e of Object.keys(this.deletedStates[i][t]))delete this.state[i][t][e];e[t]=this.state[i][t]}r[i]=r[i]||{},t.extend(r[i],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(const t in e)e[t].setFeatureState(r,n)}}class U extends t.Evented{constructor(e,n,r){super(),this.id=e,this.dispatcher=r,this.on("data",(t=>{"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=function(e,n,r,i){const o=new O[n.type](e,n,r,i);if(o.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${o.id}`);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o}(e,n,r,this),this._tiles={},this._cache=new j(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Z}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,e){return this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,(()=>{}))}_abortTile(e){this._source.abortTile&&this._source.abortTile(e,(()=>{})),this._source.fire(new t.Event("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((t=>t.tileID)).sort(V).map((t=>t.key))}getRenderableIds(e){const n=[];for(const t in this._tiles)this._isIdRenderable(t,e)&&n.push(this._tiles[t]);return e?n.sort(((e,n)=>{const r=e.tileID,i=n.tileID,o=new t.pointGeometry(r.canonical.x,r.canonical.y)._rotate(this.transform.angle),a=new t.pointGeometry(i.canonical.x,i.canonical.y)._rotate(this.transform.angle);return r.overscaledZ-i.overscaledZ||a.y-o.y||a.x-o.x})).map((t=>t.tileID.key)):n.map((t=>t.tileID)).sort(V).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")}}_reloadTile(t,e){const n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))}_tileLoaded(e,n,r,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.ErrorEvent(i,{tile:e})):this.update(this.transform));e.timeAdded=t.exported.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(t){const e=this.getRenderableIds();for(let r=0;r<e.length;r++){const i=e[r];if(t.neighboringTiles&&t.neighboringTiles[i]){const e=this.getTileByID(i);n(t,e),n(e,t)}}function n(t,e){t.needsHillshadePrepare=!0;let n=e.tileID.canonical.x-t.tileID.canonical.x;const r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,n,r){for(const i in this._tiles){let o=this._tiles[i];if(r[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>e+1;){const t=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[t.key],o&&o.hasData()&&(a=t)}let s=a;for(;s.overscaledZ>e;)if(s=s.scaledTo(s.overscaledZ-1),t[s.key]){r[a.key]=a;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(let n=t.overscaledZ-1;n>=e;n--){const e=t.scaledTo(n),r=this._getLoadedTile(e);if(r)return r}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const e=Math.ceil(t.width/this._source.tileSize)+1,n=Math.ceil(t.height/this._source.tileSize)+1,r=Math.floor(e*n*5),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(i)}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const n in this._tiles){const r=this._tiles[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),t[r.tileID.key]=r}this._tiles=t;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(e,this._tiles[e])}}update(e){if(this.transform=e,!this._sourceLoaded||this._paused)return;let n;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?n=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(n=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(n=n.filter((t=>this._source.hasTile(t))))):n=[];const r=e.coveringZoomLevel(this._source),i=Math.max(r-U.maxOverzooming,this._source.minzoom),o=Math.max(r+U.maxUnderzooming,this._source.minzoom),a=this._updateRetainedTiles(n,r);if(q(this._source.type)){const e={},n={},s=Object.keys(a);for(const r of s){const o=a[r],s=this._tiles[r];if(!s||s.fadeEndTime&&s.fadeEndTime<=t.exported.now())continue;const l=this.findLoadedParent(o,i);l&&(this._addTile(l.tileID),e[l.tileID.key]=l.tileID),n[r]=o}this._retainLoadedChildren(n,r,o,a);for(const t in e)a[t]||(this._coveredTiles[t]=!0,a[t]=e[t])}for(const t in a)this._tiles[t].clearFadeHold();const s=t.keysDifference(this._tiles,a);for(const t of s){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(t)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,e){const n={},r={},i=Math.max(e-U.maxOverzooming,this._source.minzoom),o=Math.max(e+U.maxUnderzooming,this._source.minzoom),a={};for(const s of t){const t=this._addTile(s);n[s.key]=s,t.hasData()||e<this._source.maxzoom&&(a[s.key]=s)}this._retainLoadedChildren(a,e,o,n);for(const s of t){let t=this._tiles[s.key];if(t.hasData())continue;if(e+1>this._source.maxzoom){const t=s.children(this._source.maxzoom)[0],e=this.getTile(t);if(e&&e.hasData()){n[t.key]=t;continue}}else{const t=s.children(this._source.maxzoom);if(n[t[0].key]&&n[t[1].key]&&n[t[2].key]&&n[t[3].key])continue}let o=t.wasRequested();for(let e=s.overscaledZ-1;e>=i;--e){const i=s.scaledTo(e);if(r[i.key])break;if(r[i.key]=!0,t=this.getTile(i),!t&&o&&(t=this._addTile(i)),t&&(n[i.key]=i,o=t.wasRequested(),t.hasData()))break}}return n}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let n,r=this._tiles[t].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}e.push(r.key);const t=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(t),n)break;r=t}for(const t of e)this._loadedParentTiles[t]=n}}_addTile(e){let n=this._tiles[e.key];if(n)return n;n=this._cache.getAndRemove(e),n&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));const r=n;return n||(n=new B(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),n))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(e,n,r){const i=[],o=this.transform;if(!o)return i;const a=r?o.getCameraQueryGeometry(e):e,s=e.map((t=>o.pointCoordinate(t))),l=a.map((t=>o.pointCoordinate(t))),u=this.getIds();let c=1/0,h=1/0,f=-1/0,p=-1/0;for(const t of l)c=Math.min(c,t.x),h=Math.min(h,t.y),f=Math.max(f,t.x),p=Math.max(p,t.y);for(let d=0;d<u.length;d++){const e=this._tiles[u[d]];if(e.holdingForFade())continue;const r=e.tileID,a=Math.pow(2,o.zoom-e.tileID.overscaledZ),m=n*e.queryPadding*t.EXTENT/e.tileSize/a,g=[r.getTilePoint(new t.MercatorCoordinate(c,h)),r.getTilePoint(new t.MercatorCoordinate(f,p))];if(g[0].x-m<t.EXTENT&&g[0].y-m<t.EXTENT&&g[1].x+m>=0&&g[1].y+m>=0){const t=s.map((t=>r.getTilePoint(t))),n=l.map((t=>r.getTilePoint(t)));i.push({tile:e,tileID:r,queryGeometry:t,cameraQueryGeometry:n,scale:a})}}return i}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const n of e)n.posMatrix=this.transform.calculatePosMatrix(n.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(q(this._source.type))for(const e in this._tiles){const n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.exported.now())return!0}return!1}setFeatureState(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)}removeFeatureState(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,n){const r=this._tiles[t];r&&r.setDependencies(e,n)}reloadTilesForDependencies(t,e){for(const n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(n,"reloading");this._cache.filter((n=>!n.hasDependency(t,e)))}}function V(t,e){const n=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function q(t){return"raster"===t||"image"===t||"video"===t}U.maxOverzooming=10,U.maxUnderzooming=3;const G="mapboxgl_preloaded_worker_pool";class W{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<W.workerCount;)this.workers.push(new Worker(_i.workerUrl));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((t=>{t.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[G]}numActive(){return Object.keys(this.active).length}}const H=Math.floor(t.exported.hardwareConcurrency/2);let X;function Y(){return X||(X=new W),X}function $(e,n){const r={};for(const t in e)"ref"!==t&&(r[t]=e[t]);return t.refProperties.forEach((t=>{t in n&&(r[t]=n[t])})),r}function K(t){t=t.slice();const e=Object.create(null);for(let n=0;n<t.length;n++)e[t[n].id]=t[n];for(let n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=$(t[n],e[t[n].ref]));return t}W.workerCount=Math.max(Math.min(H,6),1);const J={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Q(t,e,n){n.push({command:J.addSource,args:[t,e[t]]})}function tt(t,e,n){e.push({command:J.removeSource,args:[t]}),n[t]=!0}function et(t,e,n,r){tt(t,n,r),Q(t,e,n)}function nt(t,e,n){let r;for(r in t[n])if(Object.prototype.hasOwnProperty.call(t[n],r)&&"data"!==r&&!i(t[n][r],e[n][r]))return!1;for(r in e[n])if(Object.prototype.hasOwnProperty.call(e[n],r)&&"data"!==r&&!i(t[n][r],e[n][r]))return!1;return!0}function rt(t,e,n,r,o,a){let s;for(s in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,s)&&(i(t[s],e[s])||n.push({command:a,args:[r,s,e[s],o]}));for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&!Object.prototype.hasOwnProperty.call(t,s)&&(i(t[s],e[s])||n.push({command:a,args:[r,s,e[s],o]}))}function it(t){return t.id}function ot(t,e){return t[e.id]=e,t}class at{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);let n=1,r=this._distances[n];const i=e*this.paddedLength+this.padding;for(;r<i&&n<this._distances.length;)r=this._distances[++n];const o=n-1,a=this._distances[o],s=r-a,l=s>0?(i-a)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}function st(t,e){let n=!0;return"always"===t||"never"!==t&&"never"!==e||(n=!1),n}class lt{constructor(t,e,n){const r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(let o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}insertCircle(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)}_insertBoxCell(t,e,n,r,i,o){this.boxCells[i].push(o)}_insertCircleCell(t,e,n,r,i,o){this.circleCells[i].push(o)}_query(t,e,n,r,i,o,a){if(n<0||t>this.width||r<0||e>this.height)return[];const s=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return[{key:null,x1:t,y1:e,x2:n,y2:r}];for(let t=0;t<this.boxKeys.length;t++)s.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],n=this.circles[3*t+1],r=this.circles[3*t+2];s.push({key:this.circleKeys[t],x1:e-r,y1:n-r,x2:e+r,y2:n+r})}}else this._forEachCell(t,e,n,r,this._queryCell,s,{hitTest:i,overlapMode:o,seenUids:{box:{},circle:{}}},a);return s}query(t,e,n,r){return this._query(t,e,n,r,!1,null)}hitTest(t,e,n,r,i,o){return this._query(t,e,n,r,!0,i,o).length>0}hitTestCircle(t,e,n,r,i){const o=t-n,a=t+n,s=e-n,l=e+n;if(a<0||o>this.width||l<0||s>this.height)return!1;const u=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,u,{hitTest:!0,overlapMode:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},i),u.length>0}_queryCell(t,e,n,r,i,o,a,s){const{seenUids:l,hitTest:u,overlapMode:c}=a,h=this.boxCells[i];if(null!==h){const i=this.bboxes;for(const a of h)if(!l.box[a]){l.box[a]=!0;const h=4*a,f=this.boxKeys[a];if(t<=i[h+2]&&e<=i[h+3]&&n>=i[h+0]&&r>=i[h+1]&&(!s||s(f))&&(!u||!st(c,f.overlapMode))&&(o.push({key:f,x1:i[h],y1:i[h+1],x2:i[h+2],y2:i[h+3]}),u))return!0}}const f=this.circleCells[i];if(null!==f){const i=this.circles;for(const a of f)if(!l.circle[a]){l.circle[a]=!0;const h=3*a,f=this.circleKeys[a];if(this._circleAndRectCollide(i[h],i[h+1],i[h+2],t,e,n,r)&&(!s||s(f))&&(!u||!st(c,f.overlapMode))){const t=i[h],e=i[h+1],n=i[h+2];if(o.push({key:f,x1:t-n,y1:e-n,x2:t+n,y2:e+n}),u)return!0}}}return!1}_queryCellCircle(t,e,n,r,i,o,a,s){const{circle:l,seenUids:u,overlapMode:c}=a,h=this.boxCells[i];if(null!==h){const t=this.bboxes;for(const e of h)if(!u.box[e]){u.box[e]=!0;const n=4*e,r=this.boxKeys[e];if(this._circleAndRectCollide(l.x,l.y,l.radius,t[n+0],t[n+1],t[n+2],t[n+3])&&(!s||s(r))&&!st(c,r.overlapMode))return o.push(!0),!0}}const f=this.circleCells[i];if(null!==f){const t=this.circles;for(const e of f)if(!u.circle[e]){u.circle[e]=!0;const n=3*e,r=this.circleKeys[e];if(this._circlesCollide(t[n],t[n+1],t[n+2],l.x,l.y,l.radius)&&(!s||s(r))&&!st(c,r.overlapMode))return o.push(!0),!0}}}_forEachCell(t,e,n,r,i,o,a,s){const l=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r);for(let f=l;f<=c;f++)for(let l=u;l<=h;l++)if(i.call(this,t,e,n,r,this.xCellCount*l+f,o,a,s))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,n,r,i,o){const a=r-t,s=i-e,l=n+o;return l*l>a*a+s*s}_circleAndRectCollide(t,e,n,r,i,o,a){const s=(o-r)/2,l=Math.abs(t-(r+s));if(l>s+n)return!1;const u=(a-i)/2,c=Math.abs(e-(i+u));if(c>u+n)return!1;if(l<=s||c<=u)return!0;const h=l-s,f=c-u;return h*h+f*f<=n*n}}function ut(e,n,r,i,o){const a=t.create();return n?(t.scale(a,a,[1/o,1/o,1]),r||t.rotateZ(a,a,i.angle)):t.multiply(a,i.labelPlaneMatrix,e),a}function ct(e,n,r,i,o){if(n){const n=t.clone(e);return t.scale(n,n,[o,o,1]),r||t.rotateZ(n,n,-i.angle),n}return i.glCoordMatrix}function ht(e,n){const r=[e.x,e.y,0,1];wt(r,r,n);const i=r[3];return{point:new t.pointGeometry(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function ft(t,e){return.5+t/e*.5}function pt(t,e){const n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function dt(e,n,r,i,o,a,s,l,u){const c=i?e.textSizeData:e.iconSizeData,h=t.evaluateSizeForZoom(c,r.transform.zoom),f=[256/r.width*2+1,256/r.height*2+1],p=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();const d=e.lineVertexArray,m=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,g=r.transform.width/r.transform.height;let v=!1;for(let y=0;y<m.length;y++){const i=m.get(y);if(i.hidden||i.writingMode===t.WritingMode.vertical&&!v){bt(i.numGlyphs,p);continue}v=!1;const _=[i.anchorX,i.anchorY,0,1];if(t.transformMat4(_,_,n),!pt(_,f)){bt(i.numGlyphs,p);continue}const x=ft(r.transform.cameraToCenterDistance,_[3]),b=t.evaluateSizeForFeature(c,h,i),w=s?b/x:b*x,k=new t.pointGeometry(i.anchorX,i.anchorY),S=ht(k,o).point,E={},I=vt(i,w,!1,l,n,o,a,e.glyphOffsetArray,d,p,S,k,E,g,u);v=I.useVertical,(I.notEnoughRoom||v||I.needsFlipping&&vt(i,w,!0,l,n,o,a,e.glyphOffsetArray,d,p,S,k,E,g,u).notEnoughRoom)&&bt(i.numGlyphs,p)}i?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function mt(t,e,n,r,i,o,a,s,l,u,c,h){const f=s.glyphStartIndex+s.numGlyphs,p=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,m=e.getoffsetX(s.glyphStartIndex),g=e.getoffsetX(f-1),v=_t(t*m,n,r,i,o,a,s.segment,p,d,l,u,c,h);if(!v)return null;const y=_t(t*g,n,r,i,o,a,s.segment,p,d,l,u,c,h);return y?{first:v,last:y}:null}function gt(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function vt(e,n,r,i,o,a,s,l,u,c,h,f,p,d,m){const g=n/24,v=e.lineOffsetX*g,y=e.lineOffsetY*g;let _;if(e.numGlyphs>1){const t=e.glyphStartIndex+e.numGlyphs,n=e.lineStartIndex,o=e.lineStartIndex+e.lineLength,c=mt(g,l,v,y,r,h,f,e,u,a,p,m);if(!c)return{notEnoughRoom:!0};const x=ht(c.first.point,s).point,b=ht(c.last.point,s).point;if(i&&!r){const t=gt(e.writingMode,x,b,d);if(t)return t}_=[c.first];for(let i=e.glyphStartIndex+1;i<t-1;i++)_.push(_t(g*l.getoffsetX(i),v,y,r,h,f,e.segment,n,o,u,a,p,m));_.push(c.last)}else{if(i&&!r){const n=ht(f,o).point,r=e.lineStartIndex+e.segment+1,i=new t.pointGeometry(u.getx(r),u.gety(r)),a=ht(i,o),s=a.signedDistanceFromCamera>0?a.point:yt(f,i,n,1,o),l=gt(e.writingMode,n,s,d);if(l)return l}const n=_t(g*l.getoffsetX(e.glyphStartIndex),v,y,r,h,f,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,u,a,p,m);if(!n)return{notEnoughRoom:!0};_=[n]}for(const x of _)t.addDynamicAttributes(c,x.point,x.angle);return{}}function yt(t,e,n,r,i){const o=ht(t.add(t.sub(e)._unit()),i).point,a=n.sub(o);return n.add(a._mult(r/a.mag()))}function _t(e,n,r,i,o,a,s,l,u,c,h,f,p){const d=i?e-n:e+n;let m=d>0?1:-1,g=0;i&&(m*=-1,g=Math.PI),m<0&&(g+=Math.PI);let v=m>0?l+s:l+s+1,y=o,_=o,x=0,b=0;const w=Math.abs(d),k=[];for(;x+b<=w;){if(v+=m,v<l||v>=u)return null;if(_=y,k.push(y),y=f[v],void 0===y){const e=new t.pointGeometry(c.getx(v),c.gety(v)),n=ht(e,h);if(n.signedDistanceFromCamera>0)y=f[v]=n.point;else{const n=v-m;y=yt(0===x?a:new t.pointGeometry(c.getx(n),c.gety(n)),e,_,w-x+1,h)}}x+=b,b=_.dist(y)}const S=(w-x)/b,E=y.sub(_),I=E.mult(S)._add(_);I._add(E._unit()._perp()._mult(r*m));const C=g+Math.atan2(y.y-_.y,y.x-_.x);return k.push(I),{point:I,angle:p?C:0,path:k}}const xt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function bt(t,e){for(let n=0;n<t;n++){const t=e.length;e.resize(t+4),e.float32.set(xt,3*t)}}function wt(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}const kt=100;class St{constructor(t,e=new lt(t.width+200,t.height+200,25),n=new lt(t.width+200,t.height+200,25)){this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+kt,this.screenBottomBoundary=t.height+kt,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200}placeCollisionBox(t,e,n,r,i){const o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),a=n*o.perspectiveRatio,s=t.x1*a+o.point.x,l=t.y1*a+o.point.y,u=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,l,u,c)||"always"!==e&&this.grid.hitTest(s,l,u,c,e,i)?{box:[],offscreen:!1}:{box:[s,l,u,c],offscreen:this.isOffscreen(s,l,u,c)}}placeCollisionCircles(e,n,r,i,o,a,s,l,u,c,h,f,p){const d=[],m=new t.pointGeometry(n.anchorX,n.anchorY),g=ht(m,a),v=ft(this.transform.cameraToCenterDistance,g.signedDistanceFromCamera),y=(c?o/v:o*v)/t.ONE_EM,_=ht(m,s).point,x=mt(y,i,n.lineOffsetX*y,n.lineOffsetY*y,!1,_,m,n,r,s,{},!1);let b=!1,w=!1,k=!0;if(x){const n=.5*f*v+p,r=new t.pointGeometry(-100,-100),i=new t.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),o=new at,a=x.first,s=x.last;let c=[];for(let t=a.path.length-1;t>=1;t--)c.push(a.path[t]);for(let t=1;t<s.path.length;t++)c.push(s.path[t]);const m=2.5*n;if(l){const t=c.map((t=>ht(t,l)));c=t.some((t=>t.signedDistanceFromCamera<=0))?[]:t.map((t=>t.point))}let g=[];if(c.length>0){const e=c[0].clone(),n=c[0].clone();for(let t=1;t<c.length;t++)e.x=Math.min(e.x,c[t].x),e.y=Math.min(e.y,c[t].y),n.x=Math.max(n.x,c[t].x),n.y=Math.max(n.y,c[t].y);g=e.x>=r.x&&n.x<=i.x&&e.y>=r.y&&n.y<=i.y?[c]:n.x<r.x||e.x>i.x||n.y<r.y||e.y>i.y?[]:t.clipLine([c],r.x,r.y,i.x,i.y)}for(const t of g){o.reset(t,.25*n);let r=0;r=o.length<=.5*n?1:Math.ceil(o.paddedLength/m)+1;for(let t=0;t<r;t++){const i=t/Math.max(r-1,1),a=o.lerp(i),s=a.x+kt,l=a.y+kt;d.push(s,l,n,0);const c=s-n,f=l-n,p=s+n,m=l+n;if(k=k&&this.isOffscreen(c,f,p,m),w=w||this.isInsideGrid(c,f,p,m),"always"!==e&&this.grid.hitTestCircle(s,l,n,e,h)&&(b=!0,!u))return{circles:[],offscreen:!1,collisionDetected:b}}}}return{circles:!u&&b||!w?[]:d,offscreen:k,collisionDetected:b}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let r=1/0,i=1/0,o=-1/0,a=-1/0;for(const c of e){const e=new t.pointGeometry(c.x+kt,c.y+kt);r=Math.min(r,e.x),i=Math.min(i,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y),n.push(e)}const s=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a)),l={},u={};for(const c of s){const e=c.key;if(void 0===l[e.bucketInstanceId]&&(l[e.bucketInstanceId]={}),l[e.bucketInstanceId][e.featureIndex])continue;const r=[new t.pointGeometry(c.x1,c.y1),new t.pointGeometry(c.x2,c.y1),new t.pointGeometry(c.x2,c.y2),new t.pointGeometry(c.x1,c.y2)];t.polygonIntersectsPolygon(n,r)&&(l[e.bucketInstanceId][e.featureIndex]=!0,void 0===u[e.bucketInstanceId]&&(u[e.bucketInstanceId]=[]),u[e.bucketInstanceId].push(e.featureIndex))}return u}insertCollisionBox(t,e,n,r,i,o){(n?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:i,collisionGroupID:o,overlapMode:e},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,n,r,i,o){const a=n?this.ignoredGrid:this.grid,s={bucketInstanceId:r,featureIndex:i,collisionGroupID:o,overlapMode:e};for(let l=0;l<t.length;l+=4)a.insertCircle(s,t[l],t[l+1],t[l+2])}projectAndGetPerspectiveRatio(e,n,r){const i=[n,r,0,1];return wt(i,i,e),{point:new t.pointGeometry((i[0]/i[3]+1)/2*this.transform.width+kt,(-i[1]/i[3]+1)/2*this.transform.height+kt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}}isOffscreen(t,e,n,r){return n<kt||t>=this.screenRightBoundary||r<kt||e>this.screenBottomBoundary}isInsideGrid(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}function Et(e,n,r){return n*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}class It{constructor(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class Ct{constructor(t,e,n,r,i){this.text=new It(t?t.text:null,e,n,i),this.icon=new It(t?t.icon:null,e,r,i)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class At{constructor(t,e,n){this.text=t,this.icon=e,this.skipFade=n}}class Pt{constructor(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]}}class Tt{constructor(t,e,n,r,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}}class Mt{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function Lt(e,n,r,i,o){const{horizontalAlign:a,verticalAlign:s}=t.getAnchorAlignment(e),l=-(a-.5)*n,u=-(s-.5)*r,c=t.evaluateVariableOffset(e,i);return new t.pointGeometry(l+c[0]*o,u+c[1]*o)}function Rt(e,n,r,i,o,a){const{x1:s,x2:l,y1:u,y2:c,anchorPointX:h,anchorPointY:f}=e,p=new t.pointGeometry(n,r);return i&&p._rotate(o?a:-a),{x1:s+p.x,y1:u+p.y,x2:l+p.x,y2:c+p.y,anchorPointX:h,anchorPointY:f}}class Nt{constructor(t,e,n,r){this.transform=t.clone(),this.collisionIndex=new St(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new Mt(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,n,r,i){const o=r.getBucket(n),a=r.latestFeatureIndex;if(!o||!a||n.id!==o.layerIds[0])return;const s=r.collisionBoxArray,l=o.layers[0].layout,u=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/t.EXTENT,h=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),f="map"===l.get("text-pitch-alignment"),p="map"===l.get("text-rotation-alignment"),d=Et(r,1,this.transform.zoom),m=ut(h,f,p,this.transform,d);let g=null;if(f){const e=ct(h,f,p,this.transform,d);g=t.multiply([],this.transform.labelPlaneMatrix,e)}this.retainedQueryData[o.bucketInstanceId]=new Tt(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);const v={bucket:o,layout:l,posMatrix:h,textLabelPlaneMatrix:m,labelToScreenMatrix:g,scale:u,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(const t of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i}=t;e.push({sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i,parameters:v})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:v})}attemptAnchorPlacement(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d){const m=[h.textOffset0,h.textOffset1],g=Lt(t,n,r,m,i),v=this.collisionIndex.placeCollisionBox(Rt(e,g.x,g.y,o,a,this.transform.angle),c,s,l,u.predicate);if((!d||0!==this.collisionIndex.placeCollisionBox(Rt(d,g.x,g.y,o,a,this.transform.angle),c,s,l,u.predicate).box.length)&&v.box.length>0){let e;return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(e=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:m,width:n,height:r,anchor:t,textBoxScale:i,prevAnchor:e},this.markUsedJustification(f,t,h,p),f.allowVerticalPlacement&&(this.markUsedOrientation(f,p,h),this.placedOrientations[h.crossTileID]=p),{shift:g,placedGlyphBoxes:v}}}placeLayerBucketPart(e,n,r){const{bucket:i,layout:o,posMatrix:a,textLabelPlaneMatrix:s,labelToScreenMatrix:l,textPixelRatio:u,holdingForFade:c,collisionBoxArray:h,partiallyEvaluatedTextSize:f,collisionGroup:p}=e.parameters,d=o.get("text-optional"),m=o.get("icon-optional"),g=t.getOverlapMode(o,"text-overlap","text-allow-overlap"),v="always"===g,y=t.getOverlapMode(o,"icon-overlap","icon-allow-overlap"),_="always"===y,x="map"===o.get("text-rotation-alignment"),b="map"===o.get("text-pitch-alignment"),w="none"!==o.get("icon-text-fit"),k="viewport-y"===o.get("symbol-z-order"),S=v&&(_||!i.hasIconData()||m),E=_&&(v||!i.hasTextData()||d);!i.collisionArrays&&h&&i.deserializeCollisionBoxes(h);const I=(e,h)=>{if(n[e.crossTileID])return;if(c)return void(this.placements[e.crossTileID]=new At(!1,!1,!1));let _=!1,k=!1,I=!0,C=null,A={box:null,offscreen:null},P={box:null,offscreen:null},T=null,M=null,L=null,R=0,N=0,O=0;h.textFeatureIndex?R=h.textFeatureIndex:e.useRuntimeCollisionCircles&&(R=e.featureIndex),h.verticalTextFeatureIndex&&(N=h.verticalTextFeatureIndex);const z=h.textBox;if(z){const n=n=>{let r=t.WritingMode.horizontal;if(i.allowVerticalPlacement&&!n&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,r=t,this.markUsedOrientation(i,r,e))}return r},r=(n,r)=>{if(i.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&h.verticalTextBox){for(const e of i.writingModes)if(e===t.WritingMode.vertical?(A=r(),P=A):A=n(),A&&A.box&&A.box.length)break}else A=n()};if(o.get("text-variable-anchor")){let s=o.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[e.crossTileID]){const t=this.prevPlacement.variableOffsets[e.crossTileID];s.indexOf(t.anchor)>0&&(s=s.filter((e=>e!==t.anchor)),s.unshift(t.anchor))}const l=(t,n,r)=>{const o=t.x2-t.x1,l=t.y2-t.y1,c=e.textBoxScale,h=w&&"never"===y?n:null;let f={box:[],offscreen:!1};const d="never"!==g?2*s.length:s.length;for(let m=0;m<d;++m){const n=this.attemptAnchorPlacement(s[m%s.length],t,o,l,c,x,b,u,a,p,m>=s.length?g:"never",e,i,r,h);if(n&&(f=n.placedGlyphBoxes,f&&f.box&&f.box.length)){_=!0,C=n.shift;break}}return f};r((()=>l(z,h.iconBox,t.WritingMode.horizontal)),(()=>{const n=h.verticalTextBox;return i.allowVerticalPlacement&&!(A&&A.box&&A.box.length)&&e.numVerticalGlyphVertices>0&&n?l(n,h.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),A&&(_=A.box,I=A.offscreen);const c=n(A&&A.box);if(!_&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(i,t.anchor,e,c))}}else{const o=(t,n)=>{const r=this.collisionIndex.placeCollisionBox(t,g,u,a,p.predicate);return r&&r.box&&r.box.length&&(this.markUsedOrientation(i,n,e),this.placedOrientations[e.crossTileID]=n),r};r((()=>o(z,t.WritingMode.horizontal)),(()=>{const n=h.verticalTextBox;return i.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?o(n,t.WritingMode.vertical):{box:null,offscreen:null}})),n(A&&A.box&&A.box.length)}}if(T=A,_=T&&T.box&&T.box.length>0,I=T&&T.offscreen,e.useRuntimeCollisionCircles){const n=i.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),u=t.evaluateSizeForFeature(i.textSizeData,f,n),c=o.get("text-padding");M=this.collisionIndex.placeCollisionCircles(g,n,i.lineVertexArray,i.glyphOffsetArray,u,a,s,l,r,b,p.predicate,e.collisionCircleDiameter,c),_=v||M.circles.length>0&&!M.collisionDetected,I=I&&M.offscreen}if(h.iconFeatureIndex&&(O=h.iconFeatureIndex),h.iconBox){const t=t=>{const e=w&&C?Rt(t,C.x,C.y,x,b,this.transform.angle):t;return this.collisionIndex.placeCollisionBox(e,y,u,a,p.predicate)};P&&P.box&&P.box.length&&h.verticalIconBox?(L=t(h.verticalIconBox),k=L.box.length>0):(L=t(h.iconBox),k=L.box.length>0),I=I&&L.offscreen}const D=d||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,F=m||0===e.numIconVertices;if(D||F?F?D||(k=k&&_):_=k&&_:k=_=k&&_,_&&T&&T.box&&this.collisionIndex.insertCollisionBox(T.box,g,o.get("text-ignore-placement"),i.bucketInstanceId,P&&P.box&&N?N:R,p.ID),k&&L&&this.collisionIndex.insertCollisionBox(L.box,y,o.get("icon-ignore-placement"),i.bucketInstanceId,O,p.ID),M&&(_&&this.collisionIndex.insertCollisionCircles(M.circles,g,o.get("text-ignore-placement"),i.bucketInstanceId,R,p.ID),r)){const t=i.bucketInstanceId;let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new Pt);for(let n=0;n<M.circles.length;n+=4)e.circles.push(M.circles[n+0]),e.circles.push(M.circles[n+1]),e.circles.push(M.circles[n+2]),e.circles.push(M.collisionDetected?1:0)}this.placements[e.crossTileID]=new At(_||S,k||E,I||i.justReloaded),n[e.crossTileID]=!0};if(k){const t=i.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const n=t[e];I(i.symbolInstances.get(n),i.collisionArrays[n])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)I(i.symbolInstances.get(t),i.collisionArrays[t]);if(r&&i.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[i.bucketInstanceId];t.invert(e.invProjMatrix,a),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}i.justReloaded=!1}markUsedJustification(e,n,r,i){let o;o=i===t.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(n)];const a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];for(const t of a)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=o>=0&&t!==o?0:r.crossTileID)}markUsedOrientation(e,n,r){const i=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,o=n===t.WritingMode.vertical?n:0,a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];for(const t of a)e.text.placedSymbolArray.get(t).placedOrientation=i;r.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const e=this.prevPlacement;let n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;const r=e?e.symbolFadeChange(t):1,i=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(const s in this.placements){const t=this.placements[s],e=i[s];e?(this.opacities[s]=new Ct(e,r,t.text,t.icon),n=n||t.text!==e.text.placed||t.icon!==e.icon.placed):(this.opacities[s]=new Ct(null,r,t.text,t.icon,t.skipFade),n=n||t.text||t.icon)}for(const s in i){const t=i[s];if(!this.opacities[s]){const e=new Ct(t,r,!1,!1);e.isHidden()||(this.opacities[s]=e,n=n||t.text.placed||t.icon.placed)}}for(const s in o)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=o[s]);for(const s in a)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=a[s]);n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}updateLayerOpacities(t,e){const n={};for(const r of e){const e=r.getBucket(t);e&&r.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,n,r.collisionBoxArray)}}updateBucketOpacities(e,n,r){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const i=e.layers[0].layout,o=new Ct(null,0,!1,!1,!0),a=i.get("text-allow-overlap"),s=i.get("icon-allow-overlap"),l=i.get("text-variable-anchor"),u="map"===i.get("text-rotation-alignment"),c="map"===i.get("text-pitch-alignment"),h="none"!==i.get("icon-text-fit"),f=new Ct(null,0,a&&(s||!e.hasIconData()||i.get("icon-optional")),s&&(a||!e.hasTextData()||i.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);const p=(t,e,n)=>{for(let r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(n)};for(let d=0;d<e.symbolInstances.length;d++){const r=e.symbolInstances.get(d),{numHorizontalGlyphVertices:i,numVerticalGlyphVertices:a,crossTileID:s}=r;let m=this.opacities[s];n[s]?m=o:m||(m=f,this.opacities[s]=m),n[s]=!0;const g=r.numIconVertices>0,v=this.placedOrientations[r.crossTileID],y=v===t.WritingMode.vertical,_=v===t.WritingMode.horizontal||v===t.WritingMode.horizontalOnly;if(i>0||a>0){const t=Vt(m.text);p(e.text,i,y?qt:t),p(e.text,a,_?qt:t);const n=m.text.isHidden();[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=n||y?1:0)})),r.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).hidden=n||_?1:0);const o=this.variableOffsets[r.crossTileID];o&&this.markUsedJustification(e,o.anchor,r,v);const s=this.placedOrientations[r.crossTileID];s&&(this.markUsedJustification(e,"left",r,s),this.markUsedOrientation(e,s,r))}if(g){const t=Vt(m.icon),n=!(h&&r.verticalPlacedIconSymbolIndex&&y);r.placedIconSymbolIndex>=0&&(p(e.icon,r.numIconVertices,n?t:qt),e.icon.placedSymbolArray.get(r.placedIconSymbolIndex).hidden=m.icon.isHidden()),r.verticalPlacedIconSymbolIndex>=0&&(p(e.icon,r.numVerticalIconVertices,n?qt:t),e.icon.placedSymbolArray.get(r.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const n=e.collisionArrays[d];if(n){let r=new t.pointGeometry(0,0);if(n.textBox||n.verticalTextBox){let t=!0;if(l){const e=this.variableOffsets[s];e?(r=Lt(e.anchor,e.width,e.height,e.textOffset,e.textBoxScale),u&&r._rotate(c?this.transform.angle:-this.transform.angle)):t=!1}n.textBox&&Ot(e.textCollisionBox.collisionVertexArray,m.text.placed,!t||y,r.x,r.y),n.verticalTextBox&&Ot(e.textCollisionBox.collisionVertexArray,m.text.placed,!t||_,r.x,r.y)}const i=Boolean(!_&&n.verticalIconBox);n.iconBox&&Ot(e.iconCollisionBox.collisionVertexArray,m.icon.placed,i,h?r.x:0,h?r.y:0),n.verticalIconBox&&Ot(e.iconCollisionBox.collisionVertexArray,m.icon.placed,!i,h?r.x:0,h?r.y:0)}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t}setStale(){this.stale=!0}}function Ot(t,e,n,r,i){t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0)}const zt=Math.pow(2,25),Dt=Math.pow(2,24),Ft=Math.pow(2,17),Bt=Math.pow(2,16),jt=Math.pow(2,9),Zt=Math.pow(2,8),Ut=Math.pow(2,1);function Vt(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*zt+e*Dt+n*Ft+e*Bt+n*jt+e*Zt+n*Ut+e}const qt=0;class Gt{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,e,n,r,i){const o=this._bucketParts;for(;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((t,e)=>t.sortKey-e.sortKey)));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,i())return!0;return!1}}class Wt{constructor(t,e,n,r,i,o,a){this.placement=new Nt(t,i,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(e,n,r){const i=t.exported.now(),o=()=>{const e=t.exported.now()-i;return!this._forceFullPlacement&&e>2};for(;this._currentPlacementIndex>=0;){const t=n[e[this._currentPlacementIndex]],i=this.placement.collisionIndex.transform.zoom;if("symbol"===t.type&&(!t.minzoom||t.minzoom<=i)&&(!t.maxzoom||t.maxzoom>i)){if(this._inProgressLayer||(this._inProgressLayer=new Gt(t)),this._inProgressLayer.continuePlacement(r[t.source],this.placement,this._showCollisionBoxes,t,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const Ht=512/t.EXTENT/2;class Xt{constructor(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(let r=0;r<e.length;r++){const n=e.get(r),i=n.key;this.indexedSymbolInstances[i]||(this.indexedSymbolInstances[i]=[]),this.indexedSymbolInstances[i].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,t)})}}getScaledCoordinates(e,n){const r=Ht/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*r)}}findMatches(t,e,n){const r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z);for(let i=0;i<t.length;i++){const o=t.get(i);if(o.crossTileID)continue;const a=this.indexedSymbolInstances[o.key];if(!a)continue;const s=this.getScaledCoordinates(o,e);for(const t of a)if(Math.abs(t.coord.x-s.x)<=r&&Math.abs(t.coord.y-s.y)<=r&&!n[t.crossTileID]){n[t.crossTileID]=!0,o.crossTileID=t.crossTileID;break}}}}class Yt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class $t{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const n in this.indexes){const t=this.indexes[n],r={};for(const n in t){const i=t[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),r[i.tileID.key]=i}this.indexes[n]=r}this.lng=t}addBucket(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let i=0;i<e.symbolInstances.length;i++)e.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const r=this.usedCrossTileIDs[t.overscaledZ];for(const i in this.indexes){const n=this.indexes[i];if(Number(i)>t.overscaledZ)for(const i in n){const o=n[i];o.tileID.isChildOf(t)&&o.findMatches(e.symbolInstances,t,r)}else{const o=n[t.scaledTo(Number(i)).key];o&&o.findMatches(e.symbolInstances,t,r)}}for(let i=0;i<e.symbolInstances.length;i++){const t=e.symbolInstances.get(i);t.crossTileID||(t.crossTileID=n.generate(),r[t.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Xt(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const n in e.indexedSymbolInstances)for(const r of e.indexedSymbolInstances[n])delete this.usedCrossTileIDs[t][r.crossTileID]}removeStaleBuckets(t){let e=!1;for(const n in this.indexes){const r=this.indexes[n];for(const i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e}}class Kt{constructor(){this.layerIndexes={},this.crossTileIDs=new Yt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,n){let r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new $t);let i=!1;const o={};r.handleWrapJump(n);for(const a of e){const e=a.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(a.tileID,e,this.crossTileIDs)&&(i=!0),o[e.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i}pruneUnusedLayers(t){const e={};t.forEach((t=>{e[t]=!0}));for(const n in this.layerIndexes)e[n]||delete this.layerIndexes[n]}}const Jt=(e,n)=>t.emitValidationErrors(e,n&&n.filter((t=>"source.canvas"!==t.identifier))),Qt=t.pick(J,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),te=t.pick(J,["setCenter","setZoom","setBearing","setPitch"]),ee=function(){const e={},n=t.spec.$version;for(const r in t.spec.$root){const i=t.spec.$root[r];if(i.required){let t=null;t="version"===r?n:"array"===i.type?[]:{},null!=t&&(e[r]=t)}}return e}();class ne extends t.Evented{constructor(e,n={}){super(),this.map=e,this.dispatcher=new k(Y(),this),this.imageManager=new d,this.imageManager.setEventedParent(this),this.glyphManager=new y(e._requestManager,n.localIdeographFontFamily),this.lineAtlas=new w(256,512),this.crossTileSymbolIndex=new Kt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const r=this;this._rtlTextPluginCallback=ne.registerForPluginStateChange((e=>{r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},((e,n)=>{if(t.triggerPluginCompletionEvent(e),n&&n.every((t=>t)))for(const t in r.sourceCaches)r.sourceCaches[t].reload()}))})),this.on("data",(t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.sourceCaches[t.sourceId];if(!e)return;const n=e.getSource();if(n&&n.vectorLayerIds)for(const r in this._layers){const t=this._layers[r];t.source===n.id&&this._validateLayer(t)}}))}loadURL(e,n={}){this.fire(new t.Event("dataloading",{dataType:"style"}));const r="boolean"!=typeof n.validate||n.validate,i=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(i,((e,n)=>{this._request=null,e?this.fire(new t.ErrorEvent(e)):n&&this._load(n,r)}))}loadJSON(e,n={}){this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame((()=>{this._request=null,this._load(e,!1!==n.validate)}))}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(ee,!1)}_load(e,n){if(n&&Jt(this,t.validateStyle(e)))return;this._loaded=!0,this.stylesheet=e;for(const t in e.sources)this.addSource(t,e.sources[t],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);const r=K(this.stylesheet.layers);this._order=r.map((t=>t.id)),this._layers={},this._serializedLayers={};for(let i of r)i=t.createStyleLayer(i),i.setEventedParent(this,{layer:{id:i.id}}),this._layers[i.id]=i,this._serializedLayers[i.id]=i.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new b(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}_loadSprite(e){this._spriteRequest=function(e,n,r,i){let o,a,s;const l=r>1?"@2x":"";let u=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,l,".json"),t.ResourceType.SpriteJSON),((t,e)=>{u=null,s||(s=t,o=e,h())})),c=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,l,".png"),t.ResourceType.SpriteImage),((t,e)=>{c=null,s||(s=t,a=e,h())}));function h(){if(s)i(s);else if(o&&a){const e=t.exported.getImageData(a),n={};for(const r in o){const{width:i,height:a,x:s,y:l,sdf:u,pixelRatio:c,stretchX:h,stretchY:f,content:p}=o[r],d=new t.RGBAImage({width:i,height:a});t.RGBAImage.copy(e,d,{x:s,y:l},{x:0,y:0},{width:i,height:a}),n[r]={data:d,pixelRatio:c,sdf:u,stretchX:h,stretchY:f,content:p}}i(null,n)}}return{cancel(){u&&(u.cancel(),u=null),c&&(c.cancel(),c=null)}}}(e,this.map._requestManager,this.map.getPixelRatio(),((e,n)=>{if(this._spriteRequest=null,e)this.fire(new t.ErrorEvent(e));else if(n)for(const t in n)this.imageManager.addImage(t,n[t]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}))}_validateLayer(e){const n=this.sourceCaches[e.source];if(!n)return;const r=e.sourceLayer;if(!r)return;const i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error(`Source layer "${r}" does not exist on source "${i.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const e=[];for(const n of t){const t=this._layers[n];"custom"!==t.type&&e.push(t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const n=this._changed;if(this._changed){const t=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(t.length||n.length)&&this._updateWorkerLayers(t,n);for(const e in this._updatedSources){const t=this._updatedSources[e];"reload"===t?this._reloadSource(e):"clear"===t&&this._clearSource(e)}this._updateTilesForChangedImages();for(const r in this._updatedPaintProps)this._layers[r].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}const r={};for(const t in this.sourceCaches){const e=this.sourceCaches[t];r[t]=e.used,e.used=!1}for(const t of this._order){const n=this._layers[t];n.recalculate(e,this._availableImages),!n.isHidden(e.zoom)&&n.source&&(this.sourceCaches[n.source].used=!0)}for(const i in r){const e=this.sourceCaches[i];r[i]!==e.used&&e.fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:i}))}this.light.recalculate(e),this.z=e.zoom,n&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(e){if(this._checkLoaded(),Jt(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=K(e.layers);const n=function(t,e){if(!t)return[{command:J.setStyle,args:[e]}];let n=[];try{if(!i(t.version,e.version))return[{command:J.setStyle,args:[e]}];i(t.center,e.center)||n.push({command:J.setCenter,args:[e.center]}),i(t.zoom,e.zoom)||n.push({command:J.setZoom,args:[e.zoom]}),i(t.bearing,e.bearing)||n.push({command:J.setBearing,args:[e.bearing]}),i(t.pitch,e.pitch)||n.push({command:J.setPitch,args:[e.pitch]}),i(t.sprite,e.sprite)||n.push({command:J.setSprite,args:[e.sprite]}),i(t.glyphs,e.glyphs)||n.push({command:J.setGlyphs,args:[e.glyphs]}),i(t.transition,e.transition)||n.push({command:J.setTransition,args:[e.transition]}),i(t.light,e.light)||n.push({command:J.setLight,args:[e.light]});const r={},o=[];!function(t,e,n,r){let o;for(o in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,o)&&(Object.prototype.hasOwnProperty.call(e,o)||tt(o,n,r));for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&(Object.prototype.hasOwnProperty.call(t,o)?i(t[o],e[o])||("geojson"===t[o].type&&"geojson"===e[o].type&&nt(t,e,o)?n.push({command:J.setGeoJSONSourceData,args:[o,e[o].data]}):et(o,e,n,r)):Q(o,e,n))}(t.sources,e.sources,o,r);const a=[];t.layers&&t.layers.forEach((t=>{r[t.source]?n.push({command:J.removeLayer,args:[t.id]}):a.push(t)})),n=n.concat(o),function(t,e,n){e=e||[];const r=(t=t||[]).map(it),o=e.map(it),a=t.reduce(ot,{}),s=e.reduce(ot,{}),l=r.slice(),u=Object.create(null);let c,h,f,p,d,m,g;for(c=0,h=0;c<r.length;c++)f=r[c],Object.prototype.hasOwnProperty.call(s,f)?h++:(n.push({command:J.removeLayer,args:[f]}),l.splice(l.indexOf(f,h),1));for(c=0,h=0;c<o.length;c++)f=o[o.length-1-c],l[l.length-1-c]!==f&&(Object.prototype.hasOwnProperty.call(a,f)?(n.push({command:J.removeLayer,args:[f]}),l.splice(l.lastIndexOf(f,l.length-h),1)):h++,m=l[l.length-c],n.push({command:J.addLayer,args:[s[f],m]}),l.splice(l.length-c,0,f),u[f]=!0);for(c=0;c<o.length;c++)if(f=o[c],p=a[f],d=s[f],!u[f]&&!i(p,d))if(i(p.source,d.source)&&i(p["source-layer"],d["source-layer"])&&i(p.type,d.type)){for(g in rt(p.layout,d.layout,n,f,null,J.setLayoutProperty),rt(p.paint,d.paint,n,f,null,J.setPaintProperty),i(p.filter,d.filter)||n.push({command:J.setFilter,args:[f,d.filter]}),i(p.minzoom,d.minzoom)&&i(p.maxzoom,d.maxzoom)||n.push({command:J.setLayerZoomRange,args:[f,d.minzoom,d.maxzoom]}),p)Object.prototype.hasOwnProperty.call(p,g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?rt(p[g],d[g],n,f,g.slice(6),J.setPaintProperty):i(p[g],d[g])||n.push({command:J.setLayerProperty,args:[f,g,d[g]]}));for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&!Object.prototype.hasOwnProperty.call(p,g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?rt(p[g],d[g],n,f,g.slice(6),J.setPaintProperty):i(p[g],d[g])||n.push({command:J.setLayerProperty,args:[f,g,d[g]]}))}else n.push({command:J.removeLayer,args:[f]}),m=l[l.lastIndexOf(f)+1],n.push({command:J.addLayer,args:[d,m]})}(a,e.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:J.setStyle,args:[e]}]}return n}(this.serialize(),e).filter((t=>!(t.command in te)));if(0===n.length)return!1;const r=n.filter((t=>!(t.command in Qt)));if(r.length>0)throw new Error(`Unimplemented: ${r.map((t=>t.command)).join(", ")}.`);return n.forEach((t=>{"setTransition"!==t.command&&this[t.command].apply(this,t.args)})),this.stylesheet=e,!0}addImage(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,n),this._afterImageUpdated(e)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,n,r={}){if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error(`Source "${e}" already exists.`);if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,`sources.${e}`,n,null,r))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const i=this.sourceCaches[e]=new U(e,n,this.dispatcher);i.style=this,i.setEventedParent(this,(()=>({isSourceLoaded:this.loaded(),source:i.serialize(),sourceId:e}))),i.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(const r in this._layers)if(this._layers[r].source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while layer "${r}" is using it.`)));const n=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],n.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),n.setEventedParent(null),n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(e,n,r={}){this._checkLoaded();const i=e.id;if(this.getLayer(i))return void this.fire(new t.ErrorEvent(new Error(`Layer "${i}" already exists on this map.`)));let o;if("custom"===e.type){if(Jt(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone$1(e),e=t.extend(e,{source:i})),this._validate(t.validateStyle.layer,`layers.${i}`,e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize()}const a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error(`Cannot add layer "${i}" before non-existing layer "${n}".`)));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){const t=this._removedLayers[i];delete this._removedLayers[i],t.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}moveLayer(e,n){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===n)return;const r=this._order.indexOf(e);this._order.splice(r,1);const i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error(`Cannot move layer "${e}" before non-existing layer "${n}".`))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const n=this._layers[e];if(!n)return void this.fire(new t.ErrorEvent(new Error(`Cannot remove non-existing layer "${e}".`)));n.setEventedParent(null);const r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}setLayerZoomRange(e,n,r){this._checkLoaded();const i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,n,r={}){this._checkLoaded();const o=this.getLayer(e);if(o){if(!i(o.filter,n))return null==n?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(t.validateStyle.filter,`layers.${o.id}.filter`,n,null,r)||(o.filter=t.clone$1(n),this._updateLayer(o)))}else this.fire(new t.ErrorEvent(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return t.clone$1(this.getLayer(e).filter)}setLayoutProperty(e,n,r,o={}){this._checkLoaded();const a=this.getLayer(e);a?i(a.getLayoutProperty(n),r)||(a.setLayoutProperty(n,r,o),this._updateLayer(a)):this.fire(new t.ErrorEvent(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,n){const r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,n,r,o={}){this._checkLoaded();const a=this.getLayer(e);a?i(a.getPaintProperty(n),r)||(a.setPaintProperty(n,r,o)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(t,e){return this.getLayer(t).getPaintProperty(e)}setFeatureState(e,n){this._checkLoaded();const r=e.source,i=e.sourceLayer,o=this.sourceCaches[r];if(void 0===o)return void this.fire(new t.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const a=o.getSource().type;"geojson"===a&&i?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||i?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(i,e.id,n)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,n){this._checkLoaded();const r=e.source,i=this.sourceCaches[r];if(void 0===i)return void this.fire(new t.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const o=i.getSource().type,a="vector"===o?e.sourceLayer:void 0;"vector"!==o||a?n&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):i.removeFeatureState(a,e.id,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const n=e.source,r=e.sourceLayer,i=this.sourceCaches[n];if(void 0!==i)return"vector"!==i.getSource().type||r?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),i.getFeatureState(r,e.id)):void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new t.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(t=>t.serialize())),layers:this._serializeLayers(this._order)},(t=>void 0!==t))}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,n={},r=[];for(let o=this._order.length-1;o>=0;o--){const i=this._order[o];if(e(i)){n[i]=o;for(const e of t){const t=e[i];if(t)for(const e of t)r.push(e)}}}r.sort(((t,e)=>e.intersectionZ-t.intersectionZ));const i=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(e(a))for(let t=r.length-1;t>=0;t--){const e=r[t].feature;if(n[e.layer.id]<o)break;i.push(e),r.pop()}else for(const e of t){const t=e[a];if(t)for(const e of t)i.push(e.feature)}}return i}queryRenderedFeatures(e,n,r){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);const i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const e of n.layers){const n=this._layers[e];if(!n)return this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];i[n.source]=!0}}const o=[];n.availableImages=this._availableImages;for(const t in this.sourceCaches)n.layers&&!i[t]||o.push(D(this.sourceCaches[t],this._layers,this._serializedLayers,e,n,r));return this.placement&&o.push(function(t,e,n,r,i,o,a){const s={},l=o.queryRenderedSymbols(r),u=[];for(const c of Object.keys(l).map(Number))u.push(a[c]);u.sort(F);for(const c of u){const n=c.featureIndex.lookupSymbolFeatures(l[c.bucketInstanceId],e,c.bucketIndex,c.sourceLayerIndex,i.filter,i.layers,i.availableImages,t);for(const t in n){const e=s[t]=s[t]||[],r=n[t];r.sort(((t,e)=>{const n=c.featureSortOrder;if(n){const r=n.indexOf(t.featureIndex);return n.indexOf(e.featureIndex)-r}return e.featureIndex-t.featureIndex}));for(const t of r)e.push(t)}}for(const c in s)s[c].forEach((e=>{const r=e.feature,i=n[t[c].source].getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=i}));return s}(this._layers,this._serializedLayers,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);const r=this.sourceCaches[e];return r?function(t,e){const n=t.getRenderableIds().map((e=>t.getTileByID(e))),r=[],i={};for(let o=0;o<n.length;o++){const t=n[o],a=t.tileID.canonical.key;i[a]||(i[a]=!0,t.querySourceFeatures(r,e))}return r}(r,n):[]}addSourceType(t,e,n){return ne.getSourceType(t)?n(new Error(`A source type called "${t}" already exists.`)):(ne.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(e,n={}){this._checkLoaded();const r=this.light.getLight();let o=!1;for(const t in e)if(!i(e[t],r[t])){o=!0;break}if(!o)return;const a={now:t.exported.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(a)}_validate(e,n,r,i,o={}){return(!o||!1!==o.validate)&&Jt(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.spec},i)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this.sourceCaches){const e=this.sourceCaches[t];e.setEventedParent(null),e.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const e in this.sourceCaches)this.sourceCaches[e].update(t)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(e,n,r,i,o=!1){let a=!1,s=!1;const l={};for(const t of this._order){const n=this._layers[t];if("symbol"!==n.type)continue;if(!l[n.source]){const t=this.sourceCaches[n.source];l[n.source]=t.getRenderableIds(!0).map((e=>t.getTileByID(e))).sort(((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)))}const r=this.crossTileSymbolIndex.addLayer(n,l[n.source],e.center.lng);a=a||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),e.zoom))&&(this.pauseablePlacement=new Wt(e,this._order,o,n,r,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const t of this._order){const e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();const r=this.sourceCaches[e.source];r&&r.setDependencies(e.tileID.key,e.type,e.icons)}getGlyphs(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)}getResource(e,n,r){return t.makeRequest(n,r)}}ne.getSourceType=function(t){return O[t]},ne.setSourceType=function(t,e){O[t]=e},ne.registerForPluginStateChange=t.registerForPluginStateChange;var re=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),ie={prelude:oe("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),background:oe("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:oe("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:oe("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:oe("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:oe("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:oe("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:oe("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:oe("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:oe("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:oe("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:oe("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:oe("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:oe("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:oe("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:oe("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:oe("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:oe("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:oe("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),lineGradient:oe("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),linePattern:oe("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:oe("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:oe("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:oe("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),symbolSDF:oe("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:oe("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}")};function oe(t,e){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute ([\w]+) ([\w]+)/g),i=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(i):i,s={};return{fragmentSource:t=t.replace(n,((t,e,n,r,i)=>(s[i]=!0,"define"===e?`\n#ifndef HAS_UNIFORM_u_${i}\nvarying ${n} ${r} ${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = u_${i};\n#endif\n`))),vertexSource:e=e.replace(n,((t,e,n,r,i)=>{const o="float"===r?"vec2":"vec4",a=i.match(/color/)?"color":o;return s[i]?"define"===e?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nattribute ${n} ${o} a_${i};\nvarying ${n} ${r} ${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = a_${i};\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = unpack_mix_${a}(a_${i}, u_${i}_t);\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:"define"===e?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nattribute ${n} ${o} a_${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = a_${i};\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = unpack_mix_${a}(a_${i}, u_${i}_t);\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`})),staticAttributes:r,staticUniforms:a}}class ae{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,e,n,r,i,o,a,s){this.context=t;let l=this.boundPaintVertexBuffers.length!==r.length;for(let u=0;!l&&u<r.length;u++)this.boundPaintVertexBuffers[u]!==r[u]&&(l=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===n&&!l&&this.boundIndexBuffer===i&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind()):this.freshBind(e,n,r,i,o,a,s)}freshBind(t,e,n,r,i,o,a){let s;const l=t.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=u.currentNumAttributes||0;for(let t=l;t<s;t++)c.disableVertexAttribArray(t)}e.enableAttributes(c,t);for(const h of n)h.enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,i);for(const h of n)h.bind(),h.setVertexAttribPointers(c,t,i);o&&(o.bind(),o.setVertexAttribPointers(c,t,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,i)),u.currentNumAttributes=l}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function se(t){const e=[];for(let n=0;n<t.length;n++){if(null===t[n])continue;const r=t[n].split(" ");e.push(r.pop())}return e}class le{constructor(t,e,n,r,i,o){const a=t.gl;this.program=a.createProgram();const s=se(n.staticAttributes),l=r?r.getBinderAttributes():[],u=s.concat(l),c=n.staticUniforms?se(n.staticUniforms):[],h=r?r.getBinderUniforms():[],f=c.concat(h),p=[];for(const x of f)p.indexOf(x)<0&&p.push(x);const d=r?r.defines():[];o&&d.push("#define OVERDRAW_INSPECTOR;");const m=d.concat(ie.prelude.fragmentSource,n.fragmentSource).join("\n"),g=d.concat(ie.prelude.vertexSource,n.vertexSource).join("\n"),v=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())return void(this.failedToCreate=!0);a.shaderSource(v,m),a.compileShader(v),a.attachShader(this.program,v);const y=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())return void(this.failedToCreate=!0);a.shaderSource(y,g),a.compileShader(y),a.attachShader(this.program,y),this.attributes={};const _={};this.numAttributes=u.length;for(let x=0;x<this.numAttributes;x++)u[x]&&(a.bindAttribLocation(this.program,x,u[x]),this.attributes[u[x]]=x);a.linkProgram(this.program),a.deleteShader(y),a.deleteShader(v);for(let x=0;x<p.length;x++){const t=p[x];if(t&&!_[t]){const e=a.getUniformLocation(this.program,t);e&&(_[t]=e)}}this.fixedUniforms=i(t,_),this.binderUniforms=r?r.getUniforms(t,_):[]}draw(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,m){const g=t.gl;if(this.failedToCreate)return;t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(r),t.setColorMode(i),t.setCullFace(o);for(const y in this.fixedUniforms)this.fixedUniforms[y].set(a[y]);p&&p.setUniforms(t,this.binderUniforms,h,{zoom:f});const v={[g.LINES]:2,[g.TRIANGLES]:3,[g.LINE_STRIP]:1}[e];for(const y of c.get()){const n=y.vaos||(y.vaos={});(n[s]||(n[s]=new ae)).bind(t,this,l,p?p.getPaintVertexBuffers():[],u,y.vertexOffset,d,m),g.drawElements(e,y.primitiveLength*v,g.UNSIGNED_SHORT,y.primitiveOffset*v*2)}}}function ue(t,e,n){const r=1/Et(n,1,e.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,e.transform.tileZoom)/i,a=o*(n.tileID.canonical.x+n.tileID.wrap*i),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}const ce=(e,n,r,i)=>{const o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=function(){var e=new t.ARRAY_TYPE(9);return t.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}();"viewport"===o.properties.get("anchor")&&function(t,e){var n=Math.sin(e),r=Math.cos(e);t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1}(l,-n.transform.angle),function(t,e,n){var r=e[0],i=e[1],o=e[2];t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8]}(s,s,l);const u=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+r,u_opacity:i}},he=(e,n,r,i,o,a,s)=>t.extend(ce(e,n,r,i),ue(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8}),fe=t=>({u_matrix:t}),pe=(e,n,r,i)=>t.extend(fe(e),ue(r,n,i)),de=(t,e)=>({u_matrix:t,u_world:e}),me=(e,n,r,i,o)=>t.extend(pe(e,n,r,i),{u_world:o}),ge=(t,e,n,r)=>{const i=t.transform;let o,a;if("map"===r.paint.get("circle-pitch-alignment")){const t=Et(n,1,i.zoom);o=!0,a=[t,t]}else o=!1,a=i.pixelsToGLUnits;return{u_camera_to_center_distance:i.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.pixelRatio,u_extrude_scale:a}},ve=(t,e,n)=>{const r=Et(n,1,e.zoom),i=Math.pow(2,e.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[e.pixelsToGLUnits[0]/(r*i),e.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:o}},ye=(t,e,n=1)=>({u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:n}),_e=t=>({u_matrix:t}),xe=(t,e,n,r)=>({u_matrix:t,u_extrude_scale:Et(e,1,n),u_intensity:r});function be(e,n){const r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new t.MercatorCoordinate(0,i/r).toLngLat().lat,new t.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}const we=(t,e,n)=>{const r=t.transform;return{u_matrix:Ce(t,e,n),u_ratio:1/Et(e,1,r.zoom),u_device_pixel_ratio:t.pixelRatio,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},ke=(e,n,r,i)=>t.extend(we(e,n,r),{u_image:0,u_image_height:i}),Se=(t,e,n,r)=>{const i=t.transform,o=Ie(e,i);return{u_matrix:Ce(t,e,n),u_texsize:e.imageAtlasTexture.size,u_ratio:1/Et(e,1,i.zoom),u_device_pixel_ratio:t.pixelRatio,u_image:0,u_scale:[o,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},Ee=(e,n,r,i,o)=>{const a=e.lineAtlas,s=Ie(n,e.transform),l="round"===r.layout.get("line-cap"),u=a.getDash(i.from,l),c=a.getDash(i.to,l),h=u.width*o.fromScale,f=c.width*o.toScale;return t.extend(we(e,n,r),{u_patternscale_a:[s/h,-u.height/2],u_patternscale_b:[s/f,-c.height/2],u_sdfgamma:a.width/(256*Math.min(h,f)*e.pixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:c.y,u_mix:o.t})};function Ie(t,e){return 1/Et(t,1,e.tileZoom)}function Ce(t,e,n){return t.translatePosMatrix(e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}const Ae=(t,e,n,r,i)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Pe(i.paint.get("raster-hue-rotate"))};var o,a};function Pe(t){t*=Math.PI/180;const e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}const Te=(t,e,n,r,i,o,a,s,l,u)=>{const c=i.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+r,u_texsize:u,u_texture:0}},Me=(e,n,r,i,o,a,s,l,u,c,h)=>{const f=o.transform;return t.extend(Te(e,n,r,i,o,a,s,l,u,c),{u_gamma_scale:i?Math.cos(f._pitch)*f.cameraToCenterDistance:1,u_device_pixel_ratio:o.pixelRatio,u_is_halo:+h})},Le=(e,n,r,i,o,a,s,l,u,c)=>t.extend(Me(e,n,r,i,o,a,s,l,!0,u,!0),{u_texsize_icon:c,u_texture_icon:1}),Re=(t,e,n)=>({u_matrix:t,u_opacity:e,u_color:n}),Ne=(e,n,r,i,o,a)=>t.extend(function(t,e,n,r){const i=n.imageManager.getPattern(t.from.toString()),o=n.imageManager.getPattern(t.to.toString()),{width:a,height:s}=n.imageManager.getPixelSize(),l=Math.pow(2,r.tileID.overscaledZ),u=r.tileSize*Math.pow(2,n.transform.tileZoom)/l,c=u*(r.tileID.canonical.x+r.tileID.wrap*l),h=u*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[a,s],u_mix:e.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/Et(r,1,n.transform.tileZoom),u_pixel_coord_upper:[c>>16,h>>16],u_pixel_coord_lower:[65535&c,65535&h]}}(i,a,r,o),{u_matrix:e,u_opacity:n}),Oe={fillExtrusion:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_opacity:new t.Uniform1f(e,n.u_opacity)}),fillExtrusionPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade),u_opacity:new t.Uniform1f(e,n.u_opacity)}),fill:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),fillPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),fillOutline:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}),fillOutlinePattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),circle:(e,n)=>({u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),collisionBox:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}),collisionCircle:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,n.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,n.u_viewport_size)}),debug:(e,n)=>({u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_overlay:new t.Uniform1i(e,n.u_overlay),u_overlay_scale:new t.Uniform1f(e,n.u_overlay_scale)}),clippingMask:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),heatmap:(e,n)=>({u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),heatmapTexture:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}),hillshade:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}),hillshadePrepare:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_unpack:new t.Uniform4f(e,n.u_unpack)}),line:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels)}),lineGradient:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image),u_image_height:new t.Uniform1f(e,n.u_image_height)}),linePattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_image:new t.Uniform1i(e,n.u_image),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),lineSDF:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}),raster:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}),symbolIcon:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}),symbolSDF:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}),symbolTextAndIcon:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texsize_icon:new t.Uniform2f(e,n.u_texsize_icon),u_texture:new t.Uniform1i(e,n.u_texture),u_texture_icon:new t.Uniform1i(e,n.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}),background:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}),backgroundPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)})};class ze{constructor(t,e,n){this.context=t;const r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const De={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Fe{constructor(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;const i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let n=0;n<this.attributes.length;n++){const r=e.attributes[this.attributes[n].name];void 0!==r&&t.enableVertexAttribArray(r)}}setVertexAttribPointers(t,e,n){for(let r=0;r<this.attributes.length;r++){const i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[De[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Be{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class je extends Be{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Ze extends Be{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class Ue extends Be{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class Ve extends Be{getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class qe extends Be{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class Ge extends Be{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class We extends Be{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class He extends Be{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Xe extends Be{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class Ye extends Be{getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class $e extends Be{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class Ke extends Be{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class Je extends Be{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class Qe extends Be{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class tn extends Be{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class en extends Be{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class nn extends Be{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class rn extends Be{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class on extends Be{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class an extends Be{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class sn extends Be{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class ln extends Be{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class un extends Be{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class cn extends Be{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class hn extends Be{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class fn extends Be{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class pn extends Be{getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class dn extends Be{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class mn extends Be{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class gn extends Be{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class vn extends Be{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class yn extends Be{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class _n extends yn{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class xn extends yn{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class bn{constructor(t,e,n,r){this.context=t,this.width=e,this.height=n;const i=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new _n(t,i),r&&(this.depthAttachment=new xn(t,i))}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class wn{constructor(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n}}wn.Replace=[1,0],wn.disabled=new wn(wn.Replace,t.Color.transparent,[!1,!1,!1,!1]),wn.unblended=new wn(wn.Replace,t.Color.transparent,[!0,!0,!0,!0]),wn.alphaBlended=new wn([1,771],t.Color.transparent,[!0,!0,!0,!0]);class kn{constructor(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new je(this),this.clearDepth=new Ze(this),this.clearStencil=new Ue(this),this.colorMask=new Ve(this),this.depthMask=new qe(this),this.stencilMask=new Ge(this),this.stencilFunc=new We(this),this.stencilOp=new He(this),this.stencilTest=new Xe(this),this.depthRange=new Ye(this),this.depthTest=new $e(this),this.depthFunc=new Ke(this),this.blend=new Je(this),this.blendFunc=new Qe(this),this.blendColor=new tn(this),this.blendEquation=new en(this),this.cullFace=new nn(this),this.cullFaceSide=new rn(this),this.frontFace=new on(this),this.program=new an(this),this.activeTexture=new sn(this),this.viewport=new ln(this),this.bindFramebuffer=new un(this),this.bindRenderbuffer=new cn(this),this.bindTexture=new hn(this),this.bindVertexBuffer=new fn(this),this.bindElementBuffer=new pn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new dn(this),this.pixelStoreUnpack=new mn(this),this.pixelStoreUnpackPremultiplyAlpha=new gn(this),this.pixelStoreUnpackFlipY=new vn(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new ze(this,t,e)}createVertexBuffer(t,e,n){return new Fe(this,t,e,n)}createRenderbuffer(t,e,n){const r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i}createFramebuffer(t,e,n){return new bn(this,t,e,n)}clear({color:t,depth:e}){const n=this.gl;let r=0;t&&(r|=n.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==e&&(r|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(e),this.depthMask.set(!0)),n.clear(r)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){i(t.blendFunction,wn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Sn{constructor(t,e,n){this.func=t,this.mask=e,this.range=n}}Sn.ReadOnly=!1,Sn.ReadWrite=!0,Sn.disabled=new Sn(519,Sn.ReadOnly,[0,1]);const En=7680;class In{constructor(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o}}In.disabled=new In({func:519,mask:0},0,0,En,En,En);class Cn{constructor(t,e,n){this.enable=t,this.mode=e,this.frontFace=n}}let An;function Pn(e,n,r,i,o,a,s){const l=e.context,u=l.gl,c=e.useProgram("collisionBox"),h=[];let f=0,p=0;for(let x=0;x<i.length;x++){const d=i[x],m=n.getTile(d),g=m.getBucket(r);if(!g)continue;let v=d.posMatrix;0===o[0]&&0===o[1]||(v=e.translatePosMatrix(d.posMatrix,m,o,a));const y=s?g.textCollisionBox:g.iconCollisionBox,_=g.collisionCircleArray;if(_.length>0){const n=t.create(),r=v;t.mul(n,g.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(n,n,g.placementViewportMatrix),h.push({circleArray:_,circleOffset:p,transform:r,invTransform:n}),f+=_.length/4,p=f}y&&c.draw(l,u.LINES,Sn.disabled,In.disabled,e.colorModeForRenderPass(),Cn.disabled,ve(v,e.transform,m),r.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,null,e.transform.zoom,null,null,y.collisionVertexBuffer)}if(!s||!h.length)return;const d=e.useProgram("collisionCircle"),m=new t.CollisionCircleLayoutArray;m.resize(4*f),m._trim();let g=0;for(const t of h)for(let e=0;e<t.circleArray.length/4;e++){const n=4*e,r=t.circleArray[n+0],i=t.circleArray[n+1],o=t.circleArray[n+2],a=t.circleArray[n+3];m.emplace(g++,r,i,o,a,0),m.emplace(g++,r,i,o,a,1),m.emplace(g++,r,i,o,a,2),m.emplace(g++,r,i,o,a,3)}(!An||An.length<2*f)&&(An=function(e){const n=2*e,r=new t.QuadTriangleArray;r.resize(n),r._trim();for(let t=0;t<n;t++){const e=6*t;r.uint16[e+0]=4*t+0,r.uint16[e+1]=4*t+1,r.uint16[e+2]=4*t+2,r.uint16[e+3]=4*t+2,r.uint16[e+4]=4*t+3,r.uint16[e+5]=4*t+0}return r}(f));const v=l.createIndexBuffer(An,!0),y=l.createVertexBuffer(m,t.collisionCircleLayout.members,!0);for(const x of h){const n={u_matrix:x.transform,u_inv_matrix:x.invTransform,u_camera_to_center_distance:(_=e.transform).cameraToCenterDistance,u_viewport_size:[_.width,_.height]};d.draw(l,u.TRIANGLES,Sn.disabled,In.disabled,e.colorModeForRenderPass(),Cn.disabled,n,r.id,y,v,t.SegmentVector.simpleSegment(0,2*x.circleOffset,x.circleArray.length,x.circleArray.length/2),null,e.transform.zoom,null,null,null)}var _;y.destroy(),v.destroy()}Cn.disabled=new Cn(!1,1029,2305),Cn.backCCW=new Cn(!0,1029,2305);const Tn=t.identity(new Float32Array(16));function Mn(e,n,r,i,o,a){const{horizontalAlign:s,verticalAlign:l}=t.getAnchorAlignment(e),u=-(s-.5)*n,c=-(l-.5)*r,h=t.evaluateVariableOffset(e,i);return new t.pointGeometry((u/o+h[0])*a,(c/o+h[1])*a)}function Ln(e,n,r,i,o,a,s,l,u,c){const h=e.text.placedSymbolArray,f=e.text.dynamicLayoutVertexArray,p=e.icon.dynamicLayoutVertexArray,d={};f.clear();for(let m=0;m<h.length;m++){const p=h.get(m),g=e.allowVerticalPlacement&&!p.placedOrientation,v=p.hidden||!p.crossTileID||g?null:i[p.crossTileID];if(v){const i=new t.pointGeometry(p.anchorX,p.anchorY),h=ht(i,r?s:a),m=ft(o.cameraToCenterDistance,h.signedDistanceFromCamera);let g=t.evaluateSizeForFeature(e.textSizeData,u,p)*m/t.ONE_EM;r&&(g*=e.tilePixelRatio/l);const{width:y,height:_,anchor:x,textOffset:b,textBoxScale:w}=v,k=Mn(x,y,_,b,w,g),S=r?ht(i.add(k),a).point:h.point.add(n?k.rotate(-o.angle):k),E=e.allowVerticalPlacement&&p.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let e=0;e<p.numGlyphs;e++)t.addDynamicAttributes(f,S,E);c&&p.associatedIconIndex>=0&&(d[p.associatedIconIndex]={shiftedAnchor:S,angle:E})}else bt(p.numGlyphs,f)}if(c){p.clear();const n=e.icon.placedSymbolArray;for(let e=0;e<n.length;e++){const r=n.get(e);if(r.hidden)bt(r.numGlyphs,p);else{const n=d[e];if(n)for(let e=0;e<r.numGlyphs;e++)t.addDynamicAttributes(p,n.shiftedAnchor,n.angle);else bt(r.numGlyphs,p)}}e.icon.dynamicLayoutVertexBuffer.updateData(p)}e.text.dynamicLayoutVertexBuffer.updateData(f)}function Rn(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function Nn(e,n,r,i,o,a,s,l,u,c,h,f){const p=e.context,d=p.gl,m=e.transform,g="map"===l,v="map"===u,y="viewport"!==l&&"point"!==r.layout.get("symbol-placement"),_=g&&!v&&!y,x=!r.layout.get("symbol-sort-key").isConstant();let b=!1;const w=e.depthModeForSublayer(0,Sn.ReadOnly),k=r.layout.get("text-variable-anchor"),S=[];for(const E of i){const i=n.getTile(E),l=i.getBucket(r);if(!l)continue;const u=o?l.text:l.icon;if(!u||!u.segments.get().length)continue;const h=u.programConfigurations.get(r.id),f=o||l.sdfIcons,p=o?l.textSizeData:l.iconSizeData,w=v||0!==m.pitch,I=e.useProgram(Rn(f,o,l),h),C=t.evaluateSizeForZoom(p,m.zoom);let A,P,T,M,L=[0,0],R=null;if(o){if(P=i.glyphAtlasTexture,T=d.LINEAR,A=i.glyphAtlasTexture.size,l.iconsInText){L=i.imageAtlasTexture.size,R=i.imageAtlasTexture;const t="composite"===p.kind||"camera"===p.kind;M=w||e.options.rotating||e.options.zooming||t?d.LINEAR:d.NEAREST}}else{const t=1!==r.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;P=i.imageAtlasTexture,T=f||e.options.rotating||e.options.zooming||t||w?d.LINEAR:d.NEAREST,A=i.imageAtlasTexture.size}const N=Et(i,1,e.transform.zoom),O=ut(E.posMatrix,v,g,e.transform,N),z=ct(E.posMatrix,v,g,e.transform,N),D=k&&l.hasTextData(),F="none"!==r.layout.get("icon-text-fit")&&D&&l.hasIconData();if(y){const t="map"===r.layout.get("text-rotation-alignment");dt(l,E.posMatrix,e,o,O,z,v,c,t)}const B=e.translatePosMatrix(E.posMatrix,i,a,s),j=y||o&&k||F?Tn:O,Z=e.translatePosMatrix(z,i,a,s,!0),U=f&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let V;V=f?l.iconsInText?Le(p.kind,C,_,v,e,B,j,Z,A,L):Me(p.kind,C,_,v,e,B,j,Z,o,A,!0):Te(p.kind,C,_,v,e,B,j,Z,o,A);const q={program:I,buffers:u,uniformValues:V,atlasTexture:P,atlasTextureIcon:R,atlasInterpolation:T,atlasInterpolationIcon:M,isSDF:f,hasHalo:U};if(x&&l.canOverlap){b=!0;const e=u.segments.get();for(const n of e)S.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:q})}else S.push({segments:u.segments,sortKey:0,state:q})}b&&S.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of S){const n=t.state;if(p.activeTexture.set(d.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,d.CLAMP_TO_EDGE),n.atlasTextureIcon&&(p.activeTexture.set(d.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,d.CLAMP_TO_EDGE)),n.isSDF){const i=n.uniformValues;n.hasHalo&&(i.u_is_halo=1,On(n.buffers,t.segments,r,e,n.program,w,h,f,i)),i.u_is_halo=0}On(n.buffers,t.segments,r,e,n.program,w,h,f,n.uniformValues)}}function On(t,e,n,r,i,o,a,s,l){const u=r.context;i.draw(u,u.gl.TRIANGLES,o,a,s,Cn.disabled,l,n.id,t.layoutVertexBuffer,t.indexBuffer,e,n.paint,r.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function zn(t,e,n,r,i,o,a){const s=t.context.gl,l=n.paint.get("fill-pattern"),u=l&&l.constantOr(1),c=n.getCrossfadeParameters();let h,f,p,d,m;a?(f=u&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",h=s.LINES):(f=u?"fillPattern":"fill",h=s.TRIANGLES);for(const g of r){const r=e.getTile(g);if(u&&!r.patternsLoaded())continue;const v=r.getBucket(n);if(!v)continue;const y=v.programConfigurations.get(n.id),_=t.useProgram(f,y);u&&(t.context.activeTexture.set(s.TEXTURE0),r.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),y.updatePaintBuffers(c));const x=l.constantOr(null);if(x&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[x.to.toString()],n=t.patternPositions[x.from.toString()];e&&n&&y.setConstantPatternPositions(e,n)}const b=t.translatePosMatrix(g.posMatrix,r,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){d=v.indexBuffer2,m=v.segments2;const e=[s.drawingBufferWidth,s.drawingBufferHeight];p="fillOutlinePattern"===f&&u?me(b,t,c,r,e):de(b,e)}else d=v.indexBuffer,m=v.segments,p=u?pe(b,t,c,r):fe(b);_.draw(t.context,h,i,t.stencilModeForClipping(g),o,Cn.disabled,p,n.id,v.layoutVertexBuffer,d,m,n.paint,t.transform.zoom,y)}}function Dn(t,e,n,r,i,o,a){const s=t.context,l=s.gl,u=n.paint.get("fill-extrusion-pattern"),c=u.constantOr(1),h=n.getCrossfadeParameters(),f=n.paint.get("fill-extrusion-opacity");for(const p of r){const r=e.getTile(p),d=r.getBucket(n);if(!d)continue;const m=d.programConfigurations.get(n.id),g=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",m);c&&(t.context.activeTexture.set(l.TEXTURE0),r.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),m.updatePaintBuffers(h));const v=u.constantOr(null);if(v&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[v.to.toString()],n=t.patternPositions[v.from.toString()];e&&n&&m.setConstantPatternPositions(e,n)}const y=t.translatePosMatrix(p.posMatrix,r,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),_=n.paint.get("fill-extrusion-vertical-gradient"),x=c?he(y,t,_,f,p,h,r):ce(y,t,_,f);g.draw(s,s.gl.TRIANGLES,i,o,a,Cn.backCCW,x,n.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,n.paint,t.transform.zoom,m)}}function Fn(t,e,n,r,i,o){const a=t.context,s=a.gl,l=e.fbo;if(!l)return;const u=t.useProgram("hillshade");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l.colorAttachment.get());const c=((t,e,n)=>{const r=n.paint.get("hillshade-shadow-color"),i=n.paint.get("hillshade-highlight-color"),o=n.paint.get("hillshade-accent-color");let a=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);const s=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),s),u_image:0,u_latrange:be(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),a],u_shadow:r,u_highlight:i,u_accent:o}})(t,e,n);u.draw(a,s.TRIANGLES,r,i,o,Cn.disabled,c,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}function Bn(e,n,r,i,o,a){const s=e.context,l=s.gl,u=n.dem;if(u&&u.data){const c=u.dim,h=u.stride,p=u.getPixels();if(s.activeTexture.set(l.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(h),n.demTexture){const t=n.demTexture;t.update(p,{premultiply:!1}),t.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else n.demTexture=new f(s,p,l.RGBA,{premultiply:!1}),n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);s.activeTexture.set(l.TEXTURE0);let d=n.fbo;if(!d){const t=new f(s,{width:c,height:c,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),d=n.fbo=s.createFramebuffer(c,c,!0),d.colorAttachment.set(t.texture)}s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,c,c]),e.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,o,a,Cn.disabled,((e,n)=>{const r=n.stride,i=t.create();return t.ortho(i,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(i,i,[0,-t.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_unpack:n.getUnpackVector()}})(n.tileID,u),r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function jn(e,n,r,i,o){const a=i.paint.get("raster-fade-duration");if(a>0){const i=t.exported.now(),s=(i-e.timeAdded)/a,l=n?(i-n.timeAdded)/a:-1,u=r.getSource(),c=o.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-c)>Math.abs(e.tileID.overscaledZ-c),f=h&&e.refreshedUponExpiration?1:t.clamp(h?s:1-l,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}const Zn=new t.Color(1,0,0,1),Un=new t.Color(0,1,0,1),Vn=new t.Color(0,0,1,1),qn=new t.Color(1,0,1,1),Gn=new t.Color(0,1,1,1);function Wn(t,e,n,r){Xn(t,0,e+n/2,t.transform.width,n,r)}function Hn(t,e,n,r){Xn(t,e-n/2,0,n,t.transform.height,r)}function Xn(t,e,n,r,i,o){const a=t.context,s=a.gl;s.enable(s.SCISSOR_TEST),s.scissor(e*t.pixelRatio,n*t.pixelRatio,r*t.pixelRatio,i*t.pixelRatio),a.clear({color:o}),s.disable(s.SCISSOR_TEST)}function Yn(e,n,r){const i=e.context,o=i.gl,a=r.posMatrix,s=e.useProgram("debug"),l=Sn.disabled,u=In.disabled,c=e.colorModeForRenderPass(),h="$debug";i.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(i,o.LINE_STRIP,l,u,c,Cn.disabled,ye(a,t.Color.red),h,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);const f=n.getTileByID(r.key).latestRawTileData,p=Math.floor((f&&f.byteLength||0)/1024),d=n.getTile(r).tileSize,m=512/Math.min(d,512)*(r.overscaledZ/e.transform.zoom)*.5;let g=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(g+=` => ${r.overscaledZ}`),function(t,e){t.initDebugOverlayCanvas();const n=t.debugOverlayCanvas,r=t.context.gl,i=t.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(e,5,5),i.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,`${g} ${p}kb`),s.draw(i,o.TRIANGLES,l,u,wn.alphaBlended,Cn.disabled,ye(a,t.Color.transparent,m),h,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}const $n={symbol:function(e,n,r,i,o){if("translucent"!==e.renderPass)return;const a=In.disabled,s=e.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(e,n,r,i,o,a,s){const l=n.transform,u="map"===o,c="map"===a;for(const h of e){const e=i.getTile(h),o=e.getBucket(r);if(!o||!o.text||!o.text.segments.get().length)continue;const a=t.evaluateSizeForZoom(o.textSizeData,l.zoom),f=Et(e,1,n.transform.zoom),p=ut(h.posMatrix,c,u,n.transform,f),d="none"!==r.layout.get("icon-text-fit")&&o.hasIconData();if(a){const t=Math.pow(2,l.zoom-e.tileID.overscaledZ);Ln(o,u,c,s,l,p,h.posMatrix,t,a,d)}}}(i,e,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&Nn(e,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&Nn(e,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(Pn(e,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Pn(e,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))},circle:function(e,n,r,i){if("translucent"!==e.renderPass)return;const o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=!r.layout.get("circle-sort-key").isConstant();if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const u=e.context,c=u.gl,h=e.depthModeForSublayer(0,Sn.ReadOnly),f=In.disabled,p=e.colorModeForRenderPass(),d=[];for(let m=0;m<i.length;m++){const o=i[m],a=n.getTile(o),s=a.getBucket(r);if(!s)continue;const u=s.programConfigurations.get(r.id),c={programConfiguration:u,program:e.useProgram("circle",u),layoutVertexBuffer:s.layoutVertexBuffer,indexBuffer:s.indexBuffer,uniformValues:ge(e,o,a,r)};if(l){const e=s.segments.get();for(const n of e)d.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:c})}else d.push({segments:s.segments,sortKey:0,state:c})}l&&d.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of d){const{programConfiguration:n,program:i,layoutVertexBuffer:o,indexBuffer:a,uniformValues:s}=t.state;i.draw(u,c.TRIANGLES,h,f,p,Cn.disabled,s,r.id,o,a,t.segments,r.paint,e.transform.zoom,n)}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const o=e.context,a=o.gl,s=In.disabled,l=new wn([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){const r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);let i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{const o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,n,r){const i=t.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e.width/4,e.height/4,0,i.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(t,e,o,i)}}(o,e,r),o.clear({color:t.Color.transparent});for(let t=0;t<i.length;t++){const u=i[t];if(n.hasRenderableParent(u))continue;const c=n.getTile(u),h=c.getBucket(r);if(!h)continue;const f=h.programConfigurations.get(r.id),p=e.useProgram("heatmap",f),{zoom:d}=e.transform;p.draw(o,a.TRIANGLES,Sn.disabled,s,l,Cn.disabled,xe(u.posMatrix,c,d,r.paint.get("heatmap-intensity")),r.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,r.paint,e.transform.zoom,f)}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){const r=e.context,i=r.gl,o=n.heatmapFbo;if(!o)return;r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);let a=n.colorRampTexture;a||(a=n.colorRampTexture=new f(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,Sn.disabled,In.disabled,e.colorModeForRenderPass(),Cn.disabled,((e,n,r,i)=>{const o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);const a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}})(e,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}(e,r))},line:function(e,n,r,i){if("translucent"!==e.renderPass)return;const o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=e.depthModeForSublayer(0,Sn.ReadOnly),l=e.colorModeForRenderPass(),u=r.paint.get("line-dasharray"),c=r.paint.get("line-pattern"),h=c.constantOr(1),p=r.paint.get("line-gradient"),d=r.getCrossfadeParameters(),m=h?"linePattern":u?"lineSDF":p?"lineGradient":"line",g=e.context,v=g.gl;let y=!0;for(const _ of i){const i=n.getTile(_);if(h&&!i.patternsLoaded())continue;const o=i.getBucket(r);if(!o)continue;const a=o.programConfigurations.get(r.id),x=e.context.program.get(),b=e.useProgram(m,a),w=y||b.program!==x,k=c.constantOr(null);if(k&&i.imageAtlas){const t=i.imageAtlas,e=t.patternPositions[k.to.toString()],n=t.patternPositions[k.from.toString()];e&&n&&a.setConstantPatternPositions(e,n)}const S=h?Se(e,i,r,d):u?Ee(e,i,r,u,d):p?ke(e,i,r,o.lineClipsArray.length):we(e,i,r);if(h)g.activeTexture.set(v.TEXTURE0),i.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),a.updatePaintBuffers(d);else if(u&&(w||e.lineAtlas.dirty))g.activeTexture.set(v.TEXTURE0),e.lineAtlas.bind(g);else if(p){const i=o.gradients[r.id];let a=i.texture;if(r.gradientVersion!==i.version){let s=256;if(r.stepInterpolant){const r=n.getSource().maxzoom,i=_.canonical.z===r?Math.ceil(1<<e.transform.maxZoom-_.canonical.z):1;s=t.clamp(t.nextPowerOfTwo(o.maxLineLength/t.EXTENT*1024*i),256,g.maxTextureSize)}i.gradient=t.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:s,image:i.gradient||void 0,clips:o.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new f(g,i.gradient,v.RGBA),i.version=r.gradientVersion,a=i.texture}g.activeTexture.set(v.TEXTURE0),a.bind(r.stepInterpolant?v.NEAREST:v.LINEAR,v.CLAMP_TO_EDGE)}b.draw(g,v.TRIANGLES,s,e.stencilModeForClipping(_),l,Cn.disabled,S,r.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,r.paint,e.transform.zoom,a,o.layoutVertexBuffer2),y=!1}},fill:function(e,n,r,i){const o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=e.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),u=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===u){const t=e.depthModeForSublayer(1,"opaque"===e.renderPass?Sn.ReadWrite:Sn.ReadOnly);zn(e,n,r,i,t,s,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){const t=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Sn.ReadOnly);zn(e,n,r,i,t,s,!0)}},"fill-extrusion":function(t,e,n,r){const i=n.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===t.renderPass){const o=new Sn(t.context.gl.LEQUAL,Sn.ReadWrite,t.depthRangeFor3D);if(1!==i||n.paint.get("fill-extrusion-pattern").constantOr(1))Dn(t,e,n,r,o,In.disabled,wn.disabled),Dn(t,e,n,r,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{const i=t.colorModeForRenderPass();Dn(t,e,n,r,o,In.disabled,i)}}},hillshade:function(t,e,n,r){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const i=t.context,o=t.depthModeForSublayer(0,Sn.ReadOnly),a=t.colorModeForRenderPass(),[s,l]="translucent"===t.renderPass?t.stencilConfigForOverlap(r):[{},r];for(const u of l){const r=e.getTile(u);r.needsHillshadePrepare&&"offscreen"===t.renderPass?Bn(t,r,n,o,In.disabled,a):"translucent"===t.renderPass&&Fn(t,r,n,o,s[u.overscaledZ],a)}i.viewport.set([0,0,t.width,t.height])},raster:function(t,e,n,r){if("translucent"!==t.renderPass)return;if(0===n.paint.get("raster-opacity"))return;if(!r.length)return;const i=t.context,o=i.gl,a=e.getSource(),s=t.useProgram("raster"),l=t.colorModeForRenderPass(),[u,c]=a instanceof L?[{},r]:t.stencilConfigForOverlap(r),h=c[c.length-1].overscaledZ,f=!t.options.moving;for(const p of c){const r=t.depthModeForSublayer(p.overscaledZ-h,1===n.paint.get("raster-opacity")?Sn.ReadWrite:Sn.ReadOnly,o.LESS),c=e.getTile(p),d=t.transform.calculatePosMatrix(p.toUnwrapped(),f);c.registerFadeDuration(n.paint.get("raster-fade-duration"));const m=e.findLoadedParent(p,0),g=jn(c,m,e,n,t.transform);let v,y;const _="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),c.texture.bind(_,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),m?(m.texture.bind(_,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),v=Math.pow(2,m.tileID.overscaledZ-c.tileID.overscaledZ),y=[c.tileID.canonical.x*v%1,c.tileID.canonical.y*v%1]):c.texture.bind(_,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);const x=Ae(d,y||[0,0],v||1,g,n);a instanceof L?s.draw(i,o.TRIANGLES,r,In.disabled,l,Cn.disabled,x,n.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(i,o.TRIANGLES,r,u[p.overscaledZ],l,Cn.disabled,x,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,n){const r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0===i)return;const o=t.context,a=o.gl,s=t.transform,l=s.tileSize,u=n.paint.get("background-pattern");if(t.isPatternMissing(u))return;const c=!u&&1===r.a&&1===i&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==c)return;const h=In.disabled,f=t.depthModeForSublayer(0,"opaque"===c?Sn.ReadWrite:Sn.ReadOnly),p=t.colorModeForRenderPass(),d=t.useProgram(u?"backgroundPattern":"background"),m=s.coveringTiles({tileSize:l});u&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));const g=n.getCrossfadeParameters();for(const v of m){const e=t.transform.calculatePosMatrix(v.toUnwrapped()),s=u?Ne(e,i,t,u,{tileID:v,tileSize:l},g):Re(e,i,r);d.draw(o,a.TRIANGLES,f,h,p,Cn.disabled,s,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}},debug:function(t,e,n){for(let r=0;r<n.length;r++)Yn(t,e,n[r])},custom:function(t,e,n){const r=t.context,i=n.implementation;if("offscreen"===t.renderPass){const e=i.prerender;e&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),e.call(i,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(In.disabled);const e="3d"===i.renderingMode?new Sn(t.context.gl.LEQUAL,Sn.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,Sn.ReadOnly);r.setDepthMode(e),i.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}};class Kn{constructor(t,e){this.context=new kn(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=U.maxUnderzooming+U.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Kt,this.gpuTimers={}}resize(t,e,n){if(this.width=t*n,this.height=e*n,this.pixelRatio=n,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const r of this.style._order)this.style._layers[r].resize()}setup(){const e=this.context,n=new t.PosArray;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,re.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const r=new t.PosArray;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,re.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const i=new t.RasterBoundsArray;i.emplaceBack(0,0,0,0),i.emplaceBack(t.EXTENT,0,t.EXTENT,0),i.emplaceBack(0,t.EXTENT,0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(i,M.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const o=new t.PosArray;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,re.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const a=new t.LineStripIndexArray;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);const s=new t.TriangleIndexArray;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new f(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);const l=this.context.gl;this.stencilClearMode=new In({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)}clearStencil(){const e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const r=t.create();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,Sn.disabled,this.stencilClearMode,wn.disabled,Cn.disabled,_e(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,e){if(this.currentStencilSource===t.source||!t.isTileClipped()||!e||!e.length)return;this.currentStencilSource=t.source;const n=this.context,r=n.gl;this.nextStencilID+e.length>256&&this.clearStencil(),n.setColorMode(wn.disabled),n.setDepthMode(Sn.disabled);const i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const o of e){const t=this._tileClippingMaskIDs[o.key]=this.nextStencilID++;i.draw(n,r.TRIANGLES,Sn.disabled,new In({func:r.ALWAYS,mask:0},t,255,r.KEEP,r.KEEP,r.REPLACE),wn.disabled,Cn.disabled,_e(o.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,e=this.context.gl;return new In({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)}stencilModeForClipping(t){const e=this.context.gl;return new In({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)}stencilConfigForOverlap(t){const e=this.context.gl,n=t.sort(((t,e)=>e.overscaledZ-t.overscaledZ)),r=n[n.length-1].overscaledZ,i=n[0].overscaledZ-r+1;if(i>1){this.currentStencilSource=void 0,this.nextStencilID+i>256&&this.clearStencil();const t={};for(let n=0;n<i;n++)t[n+r]=new In({func:e.GEQUAL,mask:255},n+this.nextStencilID,255,e.KEEP,e.KEEP,e.REPLACE);return this.nextStencilID+=i,[t,n]}return[{[r]:In.disabled},n]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new wn([e.CONSTANT_COLOR,e.ONE],new t.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?wn.unblended:wn.alphaBlended}depthModeForSublayer(t,e,n){if(!this.opaquePassEnabledForLayer())return Sn.disabled;const r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Sn(n||this.context.gl.LEQUAL,e,[r,r])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,n){this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();const r=this.style._order,i=this.style.sourceCaches;for(const t in i){const e=i[t];e.used&&e.prepare(this.context)}const o={},a={},s={};for(const t in i){const e=i[t];o[t]=e.getVisibleCoordinates(),a[t]=o[t].slice().reverse(),s[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<r.length;t++)if(this.style._layers[r[t]].is3D()){this.opaquePassCutoff=t;break}this.renderPass="offscreen";for(const t of r){const e=this.style._layers[t];if(!e.hasOffscreenPass()||e.isHidden(this.transform.zoom))continue;const n=a[e.source];("custom"===e.type||n.length)&&this.renderLayer(this,i[e.source],e,n)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[r[this.currentLayer]],e=i[t.source],n=o[t.source];this._renderTileClippingMasks(t,n),this.renderLayer(this,e,t,n)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const t=this.style._layers[r[this.currentLayer]],e=i[t.source],n=("symbol"===t.type?s:a)[t.source];this._renderTileClippingMasks(t,o[t.source]),this.renderLayer(this,e,t,n)}if(this.options.showTileBoundaries){let t,e;Object.values(this.style._layers).forEach((n=>{n.source&&!n.isHidden(this.transform.zoom)&&(n.source!==(e&&e.id)&&(e=this.style.sourceCaches[n.source]),(!t||t.getSource().maxzoom<e.getSource().maxzoom)&&(t=e))})),t&&$n.debug(this,t,t.getVisibleCoordinates())}this.options.showPadding&&function(t){const e=t.transform.padding;Wn(t,t.transform.height-(e.top||0),3,Zn),Wn(t,e.bottom||0,3,Un),Hn(t,e.left||0,3,Vn),Hn(t,t.transform.width-(e.right||0),3,qn);const n=t.transform.centerPoint;!function(t,e,n,r){Xn(t,e-1,n-10,2,20,r),Xn(t,e-10,n-1,20,2,r)}(t,n.x,t.transform.height-n.y,Gn)}(this),this.context.setDefault()}renderLayer(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||r.length)&&(this.id=n.id,this.gpuTimingStart(n),$n[n.type](t,e,n,r,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;let n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}queryGpuTimers(t){const e={};for(const n in t){const r=t[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),e[n]=o}return e}translatePosMatrix(e,n,r,i,o){if(!r[0]&&!r[1])return e;const a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){const t=Math.sin(a),e=Math.cos(a);r=[r[0]*e-r[1]*t,r[0]*t+r[1]*e]}const s=[o?r[0]:Et(n,r[0],this.transform.zoom),o?r[1]:Et(n,r[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,s),l}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const e=this.imageManager.getPattern(t.from.toString()),n=this.imageManager.getPattern(t.to.toString());return!e||!n}useProgram(t,e){this.cache=this.cache||{};const n=`${t}${e?e.cacheKey:""}${this._showOverdrawInspector?"/overdraw":""}`;return this.cache[n]||(this.cache[n]=new le(this.context,t,ie[t],e,Oe[t],this._showOverdrawInspector)),this.cache[n]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new f(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Jn{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(e,n,r){const i=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>t.transformMat4([],n,e))).map((e=>t.scale$1([],e,1/e[3]/n*i))),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((t=>{const e=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}([],function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],l=n[2];return t[0]=i*l-o*s,t[1]=o*a-r*l,t[2]=r*s-i*a,t}([],c([],o[t[0]],o[t[1]]),c([],o[t[2]],o[t[1]]))),n=-((r=e)[0]*(i=o[t[1]])[0]+r[1]*i[1]+r[2]*i[2]);var r,i;return e.concat(n)}));return new Jn(o,a)}}class Qn{constructor(t,e){this.min=t,this.max=e,this.center=function(t,e,n){return t[0]=.5*e[0],t[1]=.5*e[1],t[2]=.5*e[2],t}([],function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}([],this.min,this.max))}quadrant(t){const e=[t%2==0,t<2],n=l(this.min),r=l(this.max);for(let i=0;i<e.length;i++)n[i]=e[i]?this.min[i]:this.center[i],r[i]=e[i]?this.center[i]:this.max[i];return r[2]=this.max[2],new Qn(n,r)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersects(e){const n=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]];let r=!0;for(let i=0;i<e.planes.length;i++){const o=e.planes[i];let a=0;for(let e=0;e<n.length;e++)t.dot(o,n[e])>=0&&a++;if(0===a)return 0;a!==n.length&&(r=!1)}if(r)return 2;for(let t=0;t<3;t++){let n=Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let i=0;i<e.points.length;i++){const o=e.points[i][t]-this.min[t];n=Math.min(n,o),r=Math.max(r,o)}if(r<0||n>this.max[t]-this.min[t])return 0}return 1}}class tr{constructor(t=0,e=0,n=0,r=0){if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=r}interpolate(e,n,r){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,r)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,r)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,r)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,r)),this}getCenter(e,n){const r=t.clamp((this.left+e-this.right)/2,0,e),i=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.pointGeometry(r,i)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new tr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class er{constructor(e,n,r,i,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||!!o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new tr,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const t=new er(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=function(){var e=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}(),function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);t[0]=r*l+o*s,t[1]=i*l+a*s,t[2]=r*-s+o*l,t[3]=i*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(e){const n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies){const r=this.pointCoordinate(new t.pointGeometry(0,0)),i=this.pointCoordinate(new t.pointGeometry(this.width,0)),o=this.pointCoordinate(new t.pointGeometry(this.width,this.height)),a=this.pointCoordinate(new t.pointGeometry(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),l=Math.floor(Math.max(r.x,i.x,o.x,a.x)),u=1;for(let c=s-u;c<=l+u;c++)0!==c&&n.push(new t.UnwrappedTileID(c,e))}return n}coveringTiles(e){let n=this.coveringZoomLevel(e);const r=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);const i=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,n),a=[o*i.x,o*i.y,0],s=Jn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n);let l=e.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(l=n);const u=t=>({aabb:new Qn([t*o,0,0],[(t+1)*o,o,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}),c=[],f=[],p=n,d=e.reparseOverscaled?r:n;if(this._renderWorldCopies)for(let t=1;t<=3;t++)c.push(u(-t)),c.push(u(t));for(c.push(u(0));c.length>0;){const e=c.pop(),n=e.x,r=e.y;let i=e.fullyVisible;if(!i){const t=e.aabb.intersects(s);if(0===t)continue;i=2===t}const o=e.aabb.distanceX(a),u=e.aabb.distanceY(a),m=Math.max(Math.abs(o),Math.abs(u)),g=3+(1<<p-e.zoom)-2;if(e.zoom===p||m>g&&e.zoom>=l)f.push({tileID:new t.OverscaledTileID(e.zoom===p?d:e.zoom,e.wrap,e.zoom,n,r),distanceSq:h([a[0]-.5-n,a[1]-.5-r])});else for(let t=0;t<4;t++){const o=(n<<1)+t%2,a=(r<<1)+(t>>1);c.push({aabb:e.aabb.quadrant(t),zoom:e.zoom+1,x:o,y:a,wrap:e.wrap,fullyVisible:i})}}return f.sort(((t,e)=>t.distanceSq-e.distanceSq)).map((t=>t.tileID))}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(e){const n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.pointGeometry(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)}unproject(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(e,n){const r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(r.x-i.x),o.y-(r.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t){return this.coordinatePoint(this.locationCoordinate(t))}pointLocation(t){return this.coordinateLocation(this.pointCoordinate(t))}locationCoordinate(e){return t.MercatorCoordinate.fromLngLat(e)}coordinateLocation(t){return t.toLngLat()}pointCoordinate(e){const n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(r,r,this.pixelMatrixInverse);const i=n[3],o=r[3],a=n[1]/i,s=r[1]/o,l=n[2]/i,u=r[2]/o,c=l===u?0:(0-l)/(u-l);return new t.MercatorCoordinate(t.number(n[0]/i,r[0]/o,c)/this.worldSize,t.number(a,s,c)/this.worldSize)}coordinatePoint(e){const n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix),new t.pointGeometry(n[0]/n[3],n[1]/n[3])}getBounds(){return(new t.LngLatBounds).extend(this.pointLocation(new t.pointGeometry(0,0))).extend(this.pointLocation(new t.pointGeometry(this.width,0))).extend(this.pointLocation(new t.pointGeometry(this.width,this.height))).extend(this.pointLocation(new t.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(e,n=!1){const r=e.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];const o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*a,o.y*a,0]),t.scale(l,l,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(l,n?this.alignedProjMatrix:this.projMatrix,l),i[r]=new Float32Array(l),i[r]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let e,n,r,i,o=-90,a=90,s=-180,l=180;const u=this.size,c=this._unmodified;if(this.latRange){const n=this.latRange;o=t.mercatorYfromLat(n[1])*this.worldSize,a=t.mercatorYfromLat(n[0])*this.worldSize,e=a-o<u.y?u.y/(a-o):0}if(this.lngRange){const e=this.lngRange;s=t.mercatorXfromLng(e[0])*this.worldSize,l=t.mercatorXfromLng(e[1])*this.worldSize,n=l-s<u.x?u.x/(l-s):0}const h=this.point,f=Math.max(n||0,e||0);if(f)return this.center=this.unproject(new t.pointGeometry(n?(l+s)/2:h.x,e?(a+o)/2:h.y)),this.zoom+=this.scaleZoom(f),this._unmodified=c,void(this._constraining=!1);if(this.latRange){const t=h.y,e=u.y/2;t-e<o&&(i=o+e),t+e>a&&(i=a-e)}if(this.lngRange){const t=h.x,e=u.x/2;t-e<s&&(r=s+e),t+e>l&&(r=l-e)}void 0===r&&void 0===i||(this.center=this.unproject(new t.pointGeometry(void 0!==r?r:h.x,void 0!==i?i:h.y))),this._unmodified=c,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const n=Math.PI/2+this._pitch,r=this._fov*(.5+e.y/this.height),i=Math.sin(r)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-n-r,.01,Math.PI-.01)),o=this.point,a=o.x,s=o.y,l=1.01*(Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance),u=this.height/50;let c=new Float64Array(16);t.perspective(c,this._fov,this.width/this.height,u,l),c[8]=2*-e.x/this.width,c[9]=2*e.y/this.height,t.scale(c,c,[1,-1,1]),t.translate(c,c,[0,0,-this.cameraToCenterDistance]),t.rotateX(c,c,this._pitch),t.rotateZ(c,c,this.angle),t.translate(c,c,[-a,-s,0]),this.mercatorMatrix=t.scale([],c,[this.worldSize,this.worldSize,this.worldSize]),t.scale(c,c,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize]),this.projMatrix=c,this.invProjMatrix=t.invert([],this.projMatrix);const h=this.width%2/2,f=this.height%2/2,p=Math.cos(this.angle),d=Math.sin(this.angle),m=a-Math.round(a)+p*h+d*f,g=s-Math.round(s)+p*f+d*h,v=new Float64Array(c);if(t.translate(v,v,[m>.5?m-1:m,g>.5?g-1:g,0]),this.alignedProjMatrix=v,c=t.create(),t.scale(c,c,[this.width/2,-this.height/2,1]),t.translate(c,c,[1,-1,0]),this.labelPlaneMatrix=c,c=t.create(),t.scale(c,c,[1,-1,1]),t.translate(c,c,[-1,-1,0]),t.scale(c,c,[2/this.width,2/this.height,1]),this.glCoordMatrix=c,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),c=t.invert(new Float64Array(16),this.pixelMatrix),!c)throw new Error("failed to invert matrix");this.pixelMatrixInverse=c,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new t.pointGeometry(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.pointGeometry(0,e))}getCameraQueryGeometry(e){const n=this.getCameraPoint();if(1===e.length)return[e[0],n];{let r=n.x,i=n.y,o=n.x,a=n.y;for(const t of e)r=Math.min(r,t.x),i=Math.min(i,t.y),o=Math.max(o,t.x),a=Math.max(a,t.y);return[new t.pointGeometry(r,i),new t.pointGeometry(o,i),new t.pointGeometry(o,a),new t.pointGeometry(r,a),new t.pointGeometry(r,i)]}}}class nr{constructor(e){this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(t,e){let n=!1,r=null;const i=()=>{r=null,n&&(t(),r=setTimeout(i,300),n=!1)};return()=>(n=!0,r||i(),r)}(this._updateHashUnthrottled.bind(this))}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(t){const e=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(e.lng*i)/i,a=Math.round(e.lat*i)/i,s=this._map.getBearing(),l=this._map.getPitch();let u="";if(u+=t?`/${o}/${a}/${n}`:`${n}/${a}/${o}`,(s||l)&&(u+="/"+Math.round(10*s)/10),l&&(u+=`/${Math.round(l)}`),this._hashName){const t=this._hashName;let e=!1;const n=window.location.hash.slice(1).split("&").map((n=>{const r=n.split("=")[0];return r===t?(e=!0,`${r}=${u}`):n})).filter((t=>t));return e||n.push(`${t}=${u}`),`#${n.join("&")}`}return`#${u}`}_getCurrentHash(){const t=window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((t=>t.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t)})),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const t=this._getCurrentHash();if(t.length>=3&&!t.some((t=>isNaN(t)))){const e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,t)}catch(t){}}}const rr={linearity:.3,easing:t.bezier(0,0,.3,1)},ir=t.extend({deceleration:2500,maxSpeed:1400},rr),or=t.extend({deceleration:20,maxSpeed:1400},rr),ar=t.extend({deceleration:1e3,maxSpeed:360},rr),sr=t.extend({deceleration:1e3,maxSpeed:90},rr);class lr{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,n=t.exported.now();for(;e.length>0&&n-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new t.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)n.zoom+=t.zoomDelta||0,n.bearing+=t.bearingDelta||0,n.pitch+=t.pitchDelta||0,t.panDelta&&n.pan._add(t.panDelta),t.around&&(n.around=t.around),t.pinchAround&&(n.pinchAround=t.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(n.pan.mag()){const o=cr(n.pan.mag(),r,t.extend({},ir,e||{}));i.offset=n.pan.mult(o.amount/n.pan.mag()),i.center=this._map.transform.center,ur(i,o)}if(n.zoom){const t=cr(n.zoom,r,or);i.zoom=this._map.transform.zoom+t.amount,ur(i,t)}if(n.bearing){const e=cr(n.bearing,r,ar);i.bearing=this._map.transform.bearing+t.clamp(e.amount,-179,179),ur(i,e)}if(n.pitch){const t=cr(n.pitch,r,sr);i.pitch=this._map.transform.pitch+t.amount,ur(i,t)}if(i.zoom||i.bearing){const t=void 0===n.pinchAround?n.around:n.pinchAround;i.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),t.extend(i,{noMoveStart:!0})}}function ur(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function cr(e,n,r){const{maxSpeed:i,linearity:o,deceleration:a}=r,s=t.clamp(e*o/(n/1e3),-i,i),l=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}class hr extends t.Event{constructor(e,n,r,i={}){const a=o.mousePos(n.getCanvasContainer(),r),s=n.unproject(a);super(e,t.extend({point:a,lngLat:s,originalEvent:r},i)),this._defaultPrevented=!1,this.target=n}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class fr extends t.Event{constructor(e,n,r){const i="touchend"===e?r.changedTouches:r.touches,a=o.touchPos(n.getCanvasContainer(),i),s=a.map((t=>n.unproject(t))),l=a.reduce(((t,e,n,r)=>t.add(e.div(r.length))),new t.pointGeometry(0,0));super(e,{points:a,point:l,lngLats:s,lngLat:n.unproject(l),originalEvent:r}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class pr extends t.Event{constructor(t,e,n){super(t,{originalEvent:n}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class dr{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new pr(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new hr(t.type,this._map,t))}mouseup(t){this._map.fire(new hr(t.type,this._map,t))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new hr(t.type,this._map,t))}dblclick(t){return this._firePreventable(new hr(t.type,this._map,t))}mouseover(t){this._map.fire(new hr(t.type,this._map,t))}mouseout(t){this._map.fire(new hr(t.type,this._map,t))}touchstart(t){return this._firePreventable(new fr(t.type,this._map,t))}touchmove(t){this._map.fire(new fr(t.type,this._map,t))}touchend(t){this._map.fire(new fr(t.type,this._map,t))}touchcancel(t){this._map.fire(new fr(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class mr{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(t){this._map.fire(new hr(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new hr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new hr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gr{constructor(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(o.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const n=e;if(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)return;const r=this._startPos;this._lastPos=n,this._box||(this._box=o.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const i=Math.min(r.x,n.x),a=Math.max(r.x,n.x),s=Math.min(r.y,n.y),l=Math.max(r.y,n.y);o.setTransform(this._box,`translate(${i}px,${s}px)`),this._box.style.width=a-i+"px",this._box.style.height=l-s+"px"}mouseupWindow(e,n){if(!this._active)return;if(0!==e.button)return;const r=this._startPos,i=n;if(this.reset(),o.suppressClick(),r.x!==i.x||r.y!==i.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:t=>t.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(o.remove(this._box),this._box=null),o.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))}}function vr(t,e){const n={};for(let r=0;r<t.length;r++)n[t[r].identifier]=e[r];return n}class yr{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=function(e){const n=new t.pointGeometry(0,0);for(const t of e)n._add(t);return n.div(e.length)}(n),this.touches=vr(r,n)))}touchmove(t,e,n){if(this.aborted||!this.centroid)return;const r=vr(n,e);for(const i in this.touches){const t=this.touches[i],e=r[i];(!e||e.dist(t)>30)&&(this.aborted=!0)}}touchend(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class _r{constructor(t){this.singleTap=new yr(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,e,n){this.singleTap.touchstart(t,e,n)}touchmove(t,e,n){this.singleTap.touchmove(t,e,n)}touchend(t,e,n){const r=this.singleTap.touchend(t,e,n);if(r){const e=t.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(r)<30;if(e&&n||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class xr{constructor(){this._zoomIn=new _r({numTouches:1,numTaps:2}),this._zoomOut=new _r({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)}touchmove(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)}touchend(t,e,n){const r=this._zoomIn.touchend(t,e,n),i=this._zoomOut.touchend(t,e,n);return r?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(r)},{originalEvent:t})}):i?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(i)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const br={0:1,2:2};class wr{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(t,e){return!1}_move(t,e){return{}}mousedown(t,e){if(this._lastPoint)return;const n=o.mouseButton(t);this._correctButton(t,n)&&(this._lastPoint=e,this._eventButton=n)}mousemoveWindow(t,e){const n=this._lastPoint;if(n)if(t.preventDefault(),function(t,e){const n=br[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)}mouseupWindow(t){this._lastPoint&&o.mouseButton(t)===this._eventButton&&(this._moved&&o.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kr extends wr{mousedown(t,e){super.mousedown(t,e),this._lastPoint&&(this._active=!0)}_correctButton(t,e){return 0===e&&!t.ctrlKey}_move(t,e){return{around:e,panDelta:e.sub(t)}}}class Sr extends wr{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(t){t.preventDefault()}}class Er extends wr{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(t){t.preventDefault()}}class Ir{constructor(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new t.pointGeometry(0,0)}touchstart(t,e,n){return this._calculateTransform(t,e,n)}touchmove(t,e,n){if(this._active&&!(n.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,n)}touchend(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,r){r.length>0&&(this._active=!0);const i=vr(r,n),o=new t.pointGeometry(0,0),a=new t.pointGeometry(0,0);let s=0;for(const t in i){const e=i[t],n=this._touches[t];n&&(o._add(e),a._add(e.sub(n)),s++,i[t]=e)}if(this._touches=i,s<this._minTouches||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(t){}_move(t,e,n){return{}}touchstart(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,n){if(!this._firstTwoTouches)return;t.preventDefault();const[r,i]=this._firstTwoTouches,o=Ar(n,e,r),a=Ar(n,e,i);if(!o||!a)return;const s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}touchend(t,e,n){if(!this._firstTwoTouches)return;const[r,i]=this._firstTwoTouches,a=Ar(n,e,r),s=Ar(n,e,i);a&&s||(this._active&&o.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ar(t,e,n){for(let r=0;r<t.length;r++)if(t[r].identifier===n)return e[r]}function Pr(t,e){return Math.log(t/e)/Math.LN2}class Tr extends Cr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Pr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Pr(this._distance,n),pinchAround:e}}}function Mr(t,e){return 180*t.angleWith(e)/Math.PI}class Lr extends Cr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e){const n=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Mr(this._vector,n),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,n=Mr(t,this._startVector);return Math.abs(n)<e}}function Rr(t){return Math.abs(t.y)>Math.abs(t.x)}class Nr extends Cr{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(t){this._lastPoints=t,Rr(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,e,n){const r=t[0].sub(this._lastPoints[0]),i=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,i,n.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(r.y+i.y)/2*-.5}}gestureBeginsVertically(t,e,n){if(void 0!==this._valid)return this._valid;const r=t.mag()>=2,i=e.mag()>=2;if(!r&&!i)return;if(!r||!i)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=t.y>0==e.y>0;return Rr(t)&&Rr(e)&&o}}const Or={panStep:100,bearingStep:15,pitchStep:10};class zr{constructor(){const t=Or;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,n=0,r=0,i=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),i=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),i=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?r=-1:(t.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,r=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:Dr,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+n*this._bearingStep,pitch:a.getPitch()+r*this._pitchStep,offset:[-i*this._panStep,-o*this._panStep],center:a.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Dr(t){return t*(2-t)}const Fr=4.000244140625;class Br{constructor(e,n){this._map=e,this._el=e.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(e){if(!this.isEnabled())return;let n=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const r=t.exported.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%Fr==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const n=o.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(n)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._map.transform;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>Fr?this._wheelZoomRate:this._defaultZoomRate;let n=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==n&&(n=1/n);const r="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(r*n))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const n="number"==typeof this._targetZoom?this._targetZoom:e.zoom,r=this._startZoom,i=this._easing;let o,a=!1;if("wheel"===this._type&&r&&i){const e=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),s=i(e);o=t.number(r,n,s),e<1?this._frameId||(this._frameId=!0):a=!0}else o=n,a=!0;return this._active=!0,a&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!a,zoomDelta:o-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=t.ease;if(this._prevEase){const e=this._prevEase,r=(t.exported.now()-e.start)/e.duration,i=e.easing(r+.01)-e.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);n=t.bezier(o,a,.25,1)}return this._prevEase={start:t.exported.now(),duration:e,easing:n},n}reset(){this._active=!1}}class jr{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Zr{constructor(){this.reset()}reset(){this._active=!1}dblclick(t,e){return t.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ur{constructor(){this._tap=new _r({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))}touchmove(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const r=e[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(t,e,n)}touchend(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vr{constructor(t,e,n){this._el=t,this._mousePan=e,this._touchPan=n}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class qr{constructor(t,e,n){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Gr{constructor(t,e,n,r){this._el=t,this._touchZoom=e,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Wr=t=>t.zoom||t.drag||t.pitch||t.rotate;class Hr extends t.Event{}function Xr(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class Yr{constructor(e,n){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new lr(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(n),t.bindAll(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[window,"blur",void 0]];for(const[t,i,a]of this._listeners)o.addEventListener(t,i,t===document?this.handleWindowEvent:this.handleEvent,a)}destroy(){for(const[t,e,n]of this._listeners)o.removeEventListener(t,e,t===document?this.handleWindowEvent:this.handleEvent,n)}_addDefaultHandlers(t){const e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new dr(e,t));const r=e.boxZoom=new gr(e,t);this._add("boxZoom",r);const i=new xr,o=new Zr;e.doubleClickZoom=new jr(o,i),this._add("tapZoom",i),this._add("clickZoom",o);const a=new Ur;this._add("tapDragZoom",a);const s=e.touchPitch=new Nr;this._add("touchPitch",s);const l=new Sr(t),u=new Er(t);e.dragRotate=new qr(t,l,u),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]);const c=new kr(t),h=new Ir(t);e.dragPan=new Vr(n,c,h),this._add("mousePan",c),this._add("touchPan",h,["touchZoom","touchRotate"]);const f=new Lr,p=new Tr;e.touchZoomRotate=new Gr(n,p,f,a),this._add("touchRotate",f,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]);const d=e.scrollZoom=new Br(e,this);this._add("scrollZoom",d,["mousePan"]);const m=e.keyboard=new zr;this._add("keyboard",m),this._add("blockableMapEvent",new mr(e));for(const g of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[g]&&e[g].enable(t[g])}_add(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Wr(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,e,n){for(const r in t)if(r!==n&&(!e||e.indexOf(r)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const e=[];for(const n of t)this._el.contains(n.target)&&e.push(n);return e}handleEvent(t,e){if("blur"===t.type)return void this.stop(!0);this._updatingCamera=!0;const n="renderFrame"===t.type?void 0:t,r={needsRenderFrame:!1},i={},a={},s=t.touches,l=s?this._getMapTouches(s):void 0,u=l?o.touchPos(this._el,l):o.mousePos(this._el,t);for(const{handlerName:o,handler:f,allowed:p}of this._handlers){if(!f.isEnabled())continue;let s;this._blockedByActive(a,p,o)?f.reset():f[e||t.type]&&(s=f[e||t.type](t,u,l),this.mergeHandlerResult(r,i,s,o,n),s&&s.needsRenderFrame&&this._triggerRenderFrame()),(s||f.isActive())&&(a[o]=f)}const c={};for(const o in this._previousActiveHandlers)a[o]||(c[o]=n);this._previousActiveHandlers=a,(Object.keys(c).length||Xr(r))&&(this._changes.push([r,i,c]),this._triggerRenderFrame()),(Object.keys(a).length||Xr(r))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:h}=r;h&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],h(this._map))}mergeHandlerResult(e,n,r,i,o){if(!r)return;t.extend(e,r);const a={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=a),void 0!==r.panDelta&&(n.drag=a),void 0!==r.pitchDelta&&(n.pitch=a),void 0!==r.bearingDelta&&(n.rotate=a)}_applyChanges(){const e={},n={},r={};for(const[i,o,a]of this._changes)i.panDelta&&(e.panDelta=(e.panDelta||new t.pointGeometry(0,0))._add(i.panDelta)),i.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(e.around=i.around),void 0!==i.pinchAround&&(e.pinchAround=i.pinchAround),i.noInertia&&(e.noInertia=i.noInertia),t.extend(n,o),t.extend(r,a);this._updateMapTransform(e,n,r),this._changes=[]}_updateMapTransform(t,e,n){const r=this._map,i=r.transform;if(!Xr(t))return this._fireEvents(e,n,!0);let{panDelta:o,zoomDelta:a,bearingDelta:s,pitchDelta:l,around:u,pinchAround:c}=t;void 0!==c&&(u=c),r._stop(!0),u=u||r.transform.centerPoint;const h=i.pointLocation(o?u.sub(o):u);s&&(i.bearing+=s),l&&(i.pitch+=l),a&&(i.zoom+=a),i.setLocationAtPoint(h,u),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,n,!0)}_fireEvents(e,n,r){const i=Wr(this._eventsInProgress),o=Wr(e),a={};for(const t in e){const{originalEvent:n}=e[t];this._eventsInProgress[t]||(a[`${t}start`]=n),this._eventsInProgress[t]=e[t]}!i&&o&&this._fireEvent("movestart",o.originalEvent);for(const t in a)this._fireEvent(t,a[t]);o&&this._fireEvent("move",o.originalEvent);for(const t in e){const{originalEvent:n}=e[t];this._fireEvent(t,n)}const s={};let l;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:r}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],l=n[e]||r,s[`${t}end`]=l)}for(const t in s)this._fireEvent(t,s[t]);const u=Wr(this._eventsInProgress);if(r&&(i||o)&&!u){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;e?(n(e.bearing||this._map.getBearing())&&(e.bearing=0),this._map.easeTo(e,{originalEvent:l})):(this._map.fire(new t.Event("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new Hr("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const $r={extend:(e,...n)=>t.extend(e,...n),run(t){t()},logToElement(t,e=!1,n="log"){const r=window.document.getElementById(n);r&&(e&&(r.innerHTML=""),r.innerHTML+=`<br>${t}`)}};class Kr extends t.Evented{constructor(e,n){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=n.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(e,n,r){return e=t.pointGeometry.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)}panTo(e,n,r){return this.easeTo(t.extend({center:e},n),r)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)}resetNorth(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(e,n){e=t.LngLatBounds.convert(e);const r=n&&n.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),r,n)}_cameraForBoxAndBearing(e,n,r,i){const o={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=t.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){const t=i.padding;i.padding={top:t,bottom:t,right:t,left:t}}i.padding=t.extend(o,i.padding);const a=this.transform,s=a.padding,l=a.project(t.LngLat.convert(e)),u=a.project(t.LngLat.convert(n)),c=l.rotate(-r*Math.PI/180),h=u.rotate(-r*Math.PI/180),f=new t.pointGeometry(Math.max(c.x,h.x),Math.max(c.y,h.y)),p=new t.pointGeometry(Math.min(c.x,h.x),Math.min(c.y,h.y)),d=f.sub(p),m=(a.width-(s.left+s.right+i.padding.left+i.padding.right))/d.x,g=(a.height-(s.top+s.bottom+i.padding.top+i.padding.bottom))/d.y;if(g<0||m<0)return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const v=Math.min(a.scaleZoom(a.scale*Math.min(m,g)),i.maxZoom),y=t.pointGeometry.convert(i.offset),_=new t.pointGeometry((i.padding.left-i.padding.right)/2,(i.padding.top-i.padding.bottom)/2).rotate(r*Math.PI/180),x=y.add(_).mult(a.scale/a.zoomScale(v));return{center:a.unproject(l.add(u).div(2).sub(x)),zoom:v,bearing:r}}fitBounds(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)}fitScreenCoordinates(e,n,r,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.pointGeometry.convert(e)),this.transform.pointLocation(t.pointGeometry.convert(n)),r,i),i,o)}_fitInternal(e,n,r){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}jumpTo(e,n){this.stop();const r=this.transform;let i=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))}easeTo(e,n){this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.exported.prefersReducedMotion)&&(e.duration=0);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in e?+e.zoom:i,u="bearing"in e?this._normalizeBearing(e.bearing,o):o,c="pitch"in e?+e.pitch:a,h="padding"in e?e.padding:r.padding,f=t.pointGeometry.convert(e.offset);let p=r.centerPoint.add(f);const d=r.pointLocation(p),m=t.LngLat.convert(e.center||d);this._normalizeCenter(m);const g=r.project(d),v=r.project(m).sub(g),y=r.zoomScale(l-i);let _,x;e.around&&(_=t.LngLat.convert(e.around),x=r.locationPoint(_));const b={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==i,this._rotating=this._rotating||o!==u,this._pitching=this._pitching||c!==a,this._padding=!r.isPaddingEqual(h),this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,b),this._ease((e=>{if(this._zooming&&(r.zoom=t.number(i,l,e)),this._rotating&&(r.bearing=t.number(o,u,e)),this._pitching&&(r.pitch=t.number(a,c,e)),this._padding&&(r.interpolatePadding(s,h,e),p=r.centerPoint.add(f)),_)r.setLocationAtPoint(_,x);else{const t=r.zoomScale(r.zoom-i),n=l>i?Math.min(2,y):Math.max(.5,y),o=Math.pow(n,1-e),a=r.unproject(g.add(v.mult(e*o)).mult(t));r.setLocationAtPoint(r.renderWorldCopies?a.wrap():a,p)}this._fireMoveEvents(n)}),(t=>{this._afterEase(n,t)}),e),this}_prepareEase(e,n,r={}){this._moving=!0,n||r.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!r.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new t.Event("pitchstart",e))}_fireMoveEvents(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId;const r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new t.Event("zoomend",e)),i&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}flyTo(e,n){if(!e.essential&&t.exported.prefersReducedMotion){const r=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in e?t.clamp(+e.zoom,r.minZoom,r.maxZoom):i,u="bearing"in e?this._normalizeBearing(e.bearing,o):o,c="pitch"in e?+e.pitch:a,h="padding"in e?e.padding:r.padding,f=r.zoomScale(l-i),p=t.pointGeometry.convert(e.offset);let d=r.centerPoint.add(p);const m=r.pointLocation(d),g=t.LngLat.convert(e.center||m);this._normalizeCenter(g);const v=r.project(m),y=r.project(g).sub(v);let _=e.curve;const x=Math.max(r.width,r.height),b=x/f,w=y.mag();if("minZoom"in e){const n=t.clamp(Math.min(e.minZoom,i,l),r.minZoom,r.maxZoom),o=x/r.zoomScale(n-i);_=Math.sqrt(o/w*2)}const k=_*_;function S(t){const e=(b*b-x*x+(t?-1:1)*k*k*w*w)/(2*(t?b:x)*k*w);return Math.log(Math.sqrt(e*e+1)-e)}function E(t){return(Math.exp(t)-Math.exp(-t))/2}function I(t){return(Math.exp(t)+Math.exp(-t))/2}const C=S(0);let A=function(t){return I(C)/I(C+_*t)},P=function(t){return x*((I(C)*(E(e=C+_*t)/I(e))-E(C))/k)/w;var e},T=(S(1)-C)/_;if(Math.abs(w)<1e-6||!isFinite(T)){if(Math.abs(x-b)<1e-6)return this.easeTo(e,n);const t=b<x?-1:1;T=Math.abs(Math.log(b/x))/_,P=function(){return 0},A=function(e){return Math.exp(t*_*e)}}return e.duration="duration"in e?+e.duration:1e3*T/("screenSpeed"in e?+e.screenSpeed/_:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=o!==u,this._pitching=c!==a,this._padding=!r.isPaddingEqual(h),this._prepareEase(n,!1),this._ease((e=>{const f=e*T,m=1/A(f);r.zoom=1===e?l:i+r.scaleZoom(m),this._rotating&&(r.bearing=t.number(o,u,e)),this._pitching&&(r.pitch=t.number(a,c,e)),this._padding&&(r.interpolatePadding(s,h,e),d=r.centerPoint.add(p));const _=1===e?g:r.unproject(v.add(y.mult(P(f))).mult(m));r.setLocationAtPoint(r.renderWorldCopies?_.wrap():_,d),this._fireMoveEvents(n)}),(()=>this._afterEase(n)),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const t=this._onEaseEnd;delete this._onEaseEnd,t.call(this,e)}if(!t){const t=this.handlers;t&&t.stop(!1)}return this}_ease(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.exported.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,n){e=t.wrap(e,-180,180);const r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e}_normalizeCenter(t){const e=this.transform;if(!e.renderWorldCopies||e.lngRange)return;const n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}}class Jr{constructor(e={}){this.options=e,t.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options&&this.options.compact,this._container=o.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){o.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const n=this._map._getUIString(`AttributionControl.${e}`);t.title=n,t.setAttribute("aria-label",n)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((t=>"string"!=typeof t?"":t))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style.sourceCaches;for(const r in e){const n=e[r];if(n.used){const e=n.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t=t.filter((t=>String(t).trim())),t.sort(((t,e)=>t.length-e.length)),t=t.filter(((e,n)=>{for(let r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0}));const n=t.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,t.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Qr{constructor(e={}){this.options=e,t.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=o.create("div","maplibregl-ctrl mapboxgl-ctrl");const e=o.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://maplibre.org/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){o.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&e.classList.add("maplibregl-compact","mapboxgl-compact"):e.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class ti{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,n=e?this._queue.concat(e):this._queue;for(const r of n)if(r.id===t)return void(r.cancelled=!0)}run(t=0){const e=this._currentlyRunning=this._queue;this._queue=[];for(const n of e)if(!n.cancelled&&(n.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const ei={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ni={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},ri={showCompass:!0,showZoom:!0,visualizePitch:!1};class ii{constructor(e,n,r=!1){this._clickTolerance=10,this.element=n,this.mouseRotate=new Sr({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,r&&(this.mousePitch=new Er({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),o.addEventListener(n,"mousedown",this.mousedown),o.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),o.addEventListener(n,"touchmove",this.touchmove),o.addEventListener(n,"touchend",this.touchend),o.addEventListener(n,"touchcancel",this.reset)}down(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),o.disableDrag()}move(t,e){const n=this.map,r=this.mouseRotate.mousemoveWindow(t,e);if(r&&r.bearingDelta&&n.setBearing(n.getBearing()+r.bearingDelta),this.mousePitch){const r=this.mousePitch.mousemoveWindow(t,e);r&&r.pitchDelta&&n.setPitch(n.getPitch()+r.pitchDelta)}}off(){const t=this.element;o.removeEventListener(t,"mousedown",this.mousedown),o.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),o.removeEventListener(t,"touchmove",this.touchmove),o.removeEventListener(t,"touchend",this.touchend),o.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){o.enableDrag(),o.removeEventListener(window,"mousemove",this.mousemove),o.removeEventListener(window,"mouseup",this.mouseup)}mousedown(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),o.mousePos(this.element,e)),o.addEventListener(window,"mousemove",this.mousemove),o.addEventListener(window,"mouseup",this.mouseup)}mousemove(t){this.move(t,o.mousePos(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=o.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=o.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function oi(e,n,r){if(e=new t.LngLat(e.lng,e.lat),n){const i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=r.locationPoint(e).distSqr(n);r.locationPoint(i).distSqr(n)<a?e=i:r.locationPoint(o).distSqr(n)<a&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){const t=r.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=r.width&&t.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}const ai={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function si(t,e,n){const r=t.classList;for(const i in ai)r.remove(`maplibregl-${n}-anchor-${i}`,`mapboxgl-${n}-anchor-${i}`);r.add(`maplibregl-${n}-anchor-${e}`,`mapboxgl-${n}-anchor-${e}`)}class li extends t.Evented{constructor(e,n){if(super(),(e instanceof HTMLElement||n)&&(e=t.extend({element:e},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,e&&e.element)this._element=e.element,this._offset=t.pointGeometry.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=o.create("div"),this._element.setAttribute("aria-label","Map marker");const n=o.createNS("http://www.w3.org/2000/svg","svg"),r=41,i=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height",`${r}px`),n.setAttributeNS(null,"width",`${i}px`),n.setAttributeNS(null,"viewBox",`0 0 ${i} ${r}`);const a=o.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"stroke-width","1"),a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"fill-rule","evenodd");const s=o.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const l=o.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const u=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const t of u){const e=o.createNS("http://www.w3.org/2000/svg","ellipse");e.setAttributeNS(null,"opacity","0.04"),e.setAttributeNS(null,"cx","10.5"),e.setAttributeNS(null,"cy","5.80029008"),e.setAttributeNS(null,"rx",t.rx),e.setAttributeNS(null,"ry",t.ry),l.appendChild(e)}const c=o.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"fill",this._color);const h=o.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),c.appendChild(h);const f=o.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"opacity","0.25"),f.setAttributeNS(null,"fill","#000000");const p=o.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),f.appendChild(p);const d=o.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"transform","translate(6.0, 7.0)"),d.setAttributeNS(null,"fill","#FFFFFF");const m=o.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=o.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const v=o.createNS("http://www.w3.org/2000/svg","circle");v.setAttributeNS(null,"fill","#FFFFFF"),v.setAttributeNS(null,"cx","5.5"),v.setAttributeNS(null,"cy","5.5"),v.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(v),s.appendChild(l),s.appendChild(c),s.appendChild(f),s.appendChild(d),s.appendChild(m),n.appendChild(s),n.setAttributeNS(null,"height",r*this._scale+"px"),n.setAttributeNS(null,"width",i*this._scale+"px"),this._element.appendChild(n),this._offset=t.pointGeometry.convert(e&&e.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",(t=>{t.preventDefault()})),this._element.addEventListener("mousedown",(t=>{t.preventDefault()})),si(this._element,this._anchor,"marker"),this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),o.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[r,-1*(e-n+r)],"bottom-right":[-r,-1*(e-n+r)],left:[n,-1*(e-n)],right:[-n,-1*(e-n)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(t){const e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()}_onMapClick(t){const e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this}_update(t){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=oi(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(e=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n=`rotateX(${this._map.getPitch()}deg)`),t&&"moveend"!==t.type||(this._pos=this._pos.round()),o.setTransform(this._element,`${ai[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${n} ${e}`)}getOffset(){return this._offset}setOffset(e){return this._offset=t.pointGeometry.convert(e),this._update(),this}_onMove(e){if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const ui={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ci,hi=0,fi=!1;const pi={maxWidth:100,unit:"metric"};function di(t,e,n){const r=n&&n.maxWidth||100,i=t._container.clientHeight/2,o=t.unproject([0,i]),a=t.unproject([r,i]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){const n=3.2808*s;n>5280?mi(e,r,n/5280,t._getUIString("ScaleControl.Miles")):mi(e,r,n,t._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?mi(e,r,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?mi(e,r,s/1e3,t._getUIString("ScaleControl.Kilometers")):mi(e,r,s,t._getUIString("ScaleControl.Meters"))}function mi(t,e,n,r){const i=function(t){const e=Math.pow(10,`${Math.floor(t)}`.length-1);let n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(n),e*n}(n);t.style.width=e*(i/n)+"px",t.innerHTML=`${i}&nbsp;${r}`}const gi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},vi=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function yi(e){if(e){if("number"==typeof e){const n=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new t.pointGeometry(0,0),top:new t.pointGeometry(0,e),"top-left":new t.pointGeometry(n,n),"top-right":new t.pointGeometry(-n,n),bottom:new t.pointGeometry(0,-e),"bottom-left":new t.pointGeometry(n,-n),"bottom-right":new t.pointGeometry(-n,-n),left:new t.pointGeometry(e,0),right:new t.pointGeometry(-e,0)}}if(e instanceof t.pointGeometry||Array.isArray(e)){const n=t.pointGeometry.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:t.pointGeometry.convert(e.center||[0,0]),top:t.pointGeometry.convert(e.top||[0,0]),"top-left":t.pointGeometry.convert(e["top-left"]||[0,0]),"top-right":t.pointGeometry.convert(e["top-right"]||[0,0]),bottom:t.pointGeometry.convert(e.bottom||[0,0]),"bottom-left":t.pointGeometry.convert(e["bottom-left"]||[0,0]),"bottom-right":t.pointGeometry.convert(e["bottom-right"]||[0,0]),left:t.pointGeometry.convert(e.left||[0,0]),right:t.pointGeometry.convert(e.right||[0,0])}}return yi(new t.pointGeometry(0,0))}const _i={supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends Kr{constructor(e){var n;if(t.PerformanceUtils.mark(t.PerformanceMarkers.create),null!=(e=t.extend({},ni,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new er(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new ti,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},ei,e.locale),this._clickTolerance=e.clickTolerance,this._pixelRatio=null!==(n=e.pixelRatio)&&void 0!==n?n:devicePixelRatio,this._requestManager=new a(e.transformRequest),"string"==typeof e.container){if(this._container=document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),"undefined"!=typeof window&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Yr(this,e),this._hash=e.hash&&new nr("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Jr({customAttribution:e.customAttribution})),e.maplibreLogo&&this.addControl(new Qr,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.Event(`${e.dataType}data`,e))})),this.on("dataloading",(e=>{this.fire(new t.Event(`${e.dataType}dataloading`,e))})),this.on("dataabort",(e=>{this.fire(new t.Event("sourcedataabort",e))}))}_getMapId(){return this._mapId}addControl(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=e.onAdd(this);this._controls.push(e);const i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}resize(e){const n=this._containerDimensions(),r=n[0],i=n[1];this._resizeCanvas(r,i,this.getPixelRatio()),this.transform.resize(r,i),this.painter.resize(r,i,this.getPixelRatio());const o=!this._moving;return o&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),o&&this.fire(new t.Event("moveend",e)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(t){const[e,n]=this._containerDimensions();this._pixelRatio=t,this._resizeCanvas(e,n,t),this.painter.resize(e,n,t)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?60:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this._update()}project(e){return this.transform.locationPoint(t.LngLat.convert(e))}unproject(e){return this.transform.pointLocation(t.pointGeometry.convert(e))}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(t,e,n){if("mouseenter"===t||"mouseover"===t){let r=!1;const i=i=>{const o=this.getLayer(e)?this.queryRenderedFeatures(i.point,{layers:[e]}):[];o.length?r||(r=!0,n.call(this,new hr(t,this,i.originalEvent,{features:o}))):r=!1};return{layer:e,listener:n,delegates:{mousemove:i,mouseout:()=>{r=!1}}}}if("mouseleave"===t||"mouseout"===t){let r=!1;const i=i=>{(this.getLayer(e)?this.queryRenderedFeatures(i.point,{layers:[e]}):[]).length?r=!0:r&&(r=!1,n.call(this,new hr(t,this,i.originalEvent)))},o=e=>{r&&(r=!1,n.call(this,new hr(t,this,e.originalEvent)))};return{layer:e,listener:n,delegates:{mousemove:i,mouseout:o}}}{const r=t=>{const r=this.getLayer(e)?this.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,n.call(this,t),delete t.features)};return{layer:e,listener:n,delegates:{[t]:r}}}}on(t,e,n){if(void 0===n)return super.on(t,e);const r=this._createDelegatedListener(t,e,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(r);for(const i in r.delegates)this.on(i,r.delegates[i]);return this}once(t,e,n){if(void 0===n)return super.once(t,e);const r=this._createDelegatedListener(t,e,n);for(const i in r.delegates)this.once(i,r.delegates[i]);return this}off(t,e,n){return void 0===n?super.off(t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&(r=>{const i=this._delegatedListeners[t];for(let t=0;t<i.length;t++){const r=i[t];if(r.layer===e&&r.listener===n){for(const t in r.delegates)this.off(t,r.delegates[t]);return i.splice(t,1),this}}})(),this)}queryRenderedFeatures(e,n){if(!this.style)return[];let r;if(void 0!==n||void 0===e||e instanceof t.pointGeometry||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.pointGeometry||"number"==typeof e[0])r=[t.pointGeometry.convert(e)];else{const n=t.pointGeometry.convert(e[0]),i=t.pointGeometry.convert(e[1]);r=[n,new t.pointGeometry(i.x,n.y),i,new t.pointGeometry(n.x,i.y),n]}return this.style.queryRenderedFeatures(r,n,this.transform)}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}setStyle(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(e,n))}setTransformRequest(t){return this._requestManager.setTransformRequest(t),this}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error(`Missing UI string '${t}'`);return e}_updateStyle(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new ne(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ne(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,n){if("string"==typeof e){const r=this._requestManager.transformRequest(e,t.ResourceType.Style);t.getJSON(r,((e,r)=>{e?this.fire(new t.ErrorEvent(e)):r&&this._updateDiff(r,n)}))}else"object"==typeof e&&this._updateDiff(e,n)}_updateDiff(e,n){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(e,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(e){const n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error(`There is no source with ID '${e}'`)))}areTilesLoaded(){const t=this.style&&this.style.sourceCaches;for(const e in t){const n=t[e]._tiles;for(const t in n){const e=n[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}addSourceType(t,e,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)}removeSource(t){return this.style.removeSource(t),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(e,n,{pixelRatio:r=1,sdf:i=!1,stretchX:o,stretchY:a,content:s}={}){if(this._lazyInitEmptyStyle(),n instanceof HTMLImageElement||t.isImageBitmap(n)){const{width:l,height:u,data:c}=t.exported.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:l,height:u},c),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:u,data:c}=n,h=n;this.style.addImage(e,{data:new t.RGBAImage({width:l,height:u},new Uint8Array(c)),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0,userImage:h}),h.onAdd&&h.onAdd(this,e)}}}updateImage(e,n){const r=this.style.getImage(e);if(!r)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=n instanceof HTMLImageElement||t.isImageBitmap(n)?t.exported.getImageData(n):n,{width:o,height:a,data:s}=i;if(void 0===o||void 0===a)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(o!==r.data.width||a!==r.data.height)return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const l=!(n instanceof HTMLImageElement||t.isImageBitmap(n));r.data.replace(s,l),this.style.updateImage(e,r)}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),n)}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}setLayerZoomRange(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)}setFilter(t,e,n={}){return this.style.setFilter(t,e,n),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,n,r={}){return this.style.setPaintProperty(t,e,n,r),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,n,r={}){return this.style.setLayoutProperty(t,e,n,r),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setLight(t,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]}_setupContainer(){const t=this._container;t.classList.add("maplibregl-map","mapboxgl-map");const e=this._canvasContainer=o.create("div","maplibregl-canvas-container mapboxgl-canvas-container",t);this._interactive&&e.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=o.create("canvas","maplibregl-canvas mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const n=this._containerDimensions();this._resizeCanvas(n[0],n[1],this.getPixelRatio());const r=this._controlContainer=o.create("div","maplibregl-control-container mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((t=>{i[t]=o.create("div",`maplibregl-ctrl-${t} mapboxgl-ctrl-${t}`,r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,e,n){this._canvas.width=n*t,this._canvas.height=n*e,this._canvas.style.width=`${t}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const n=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?(this.painter=new Kn(r,this.transform),t.exported$1.testSupport(r)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}_onMapScroll(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_render(e){let n,r=0;const i=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,n),r=t.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._removed)return;let o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,n=t.exported.now();this.style.zoomHistory.update(e,n);const r=new t.EvaluationParameters(e,{now:n,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),i=r.crossFadingFactor();1===i&&i===this._crossFadingFactor||(o=!0,this._crossFadingFactor=i),this.style.update(r)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,t.PerformanceUtils.mark(t.PerformanceMarkers.load),this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const e=t.exported.now()-r;i.endQueryEXT(i.TIME_ELAPSED_EXT,n),setTimeout((()=>{const r=i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n),this.fire(new t.Event("gpu-timing-frame",{cpuTime:e,gpuTime:r}))}),50)}if(this.listens("gpu-timing-layer")){const e=this.painter.collectGpuTimers();setTimeout((()=>{const n=this.painter.queryGpuTimers(e);this.fire(new t.Event("gpu-timing-layer",{layerTimes:n}))}),50)}const a=this._sourcesDirty||this._styleDirty||this._placementDirty;return a||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||a||(this._fullyLoaded=!0,t.PerformanceUtils.mark(t.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),o.remove(this._canvasContainer),o.remove(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),t.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=t.exported.frame((e=>{t.PerformanceUtils.frame(e),this._frame=null,this._render(e)})))}_onWindowOnline(){this._update()}_onWindowResize(t){this._trackResize&&this.resize({originalEvent:t})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}_setCacheLimits(e,n){t.setCacheLimits(e,n)}},NavigationControl:class{constructor(e){this.options=t.extend({},ri,e),this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const t=this._map.getZoom(),e=t===this._map.getMaxZoom(),n=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())}_rotateCompassArrow(){const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ii(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){o.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(t,e){const n=o.create("button",t,this._container);return n.type="button",n.addEventListener("click",e),n}_setButtonTitle(t,e){const n=this._map._getUIString(`NavigationControl.${e}`);t.title=n,t.setAttribute("aria-label",n)}},GeolocateControl:class extends t.Evented{constructor(e){super(),this.options=t.extend({},ui,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(t){var e;return this._map=t,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),e=this._setupUI,void 0!==ci?e(ci):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then((t=>{ci="denied"!==t.state,e(ci)})):(ci=!!window.navigator.geolocation,e(ci)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),o.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,hi=0,fi=!1}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),n=t.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}_updateCamera(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,i=this._map.getBearing(),o=t.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})}_updateMarker(e){if(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),n=this._map.unproject([1,t]),r=e.distanceTo(n),i=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=`${i}px`,this._circleElement.style.height=`${i}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&fi)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=o.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new li(this._dotElement),this._circleElement=o.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new li({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))}))}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":hi--,fi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),hi++,hi>1?(t={maximumAge:6e5,timeout:0},fi=!0):(t=this.options.positionOptions,fi=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Jr,LogoControl:Qr,ScaleControl:class{constructor(e){this.options=t.extend({},pi,e),t.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){di(this._map,this._container,this.options)}onAdd(t){return this._map=t,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){o.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(t){this.options.unit=t,di(this._map,this._container,this.options)}},FullscreenControl:class{constructor(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){o.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=o.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends t.Evented{constructor(e){super(),this.options=t.extend(Object.create(gi),e),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(document.createTextNode(t))}setHTML(t){const e=document.createDocumentFragment(),n=document.createElement("body");let r;for(n.innerHTML=t;r=n.firstChild,r;)e.appendChild(r);return this.setDOMContent(e)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=o.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(t){this._container&&this._container.classList.add(t)}removeClassName(t){this._container&&this._container.classList.remove(t)}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){if(this._container)return this._container.classList.toggle(t)}_createCloseButton(){this.options.closeButton&&(this._closeButton=o.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(t){this._update(t.point)}_onMouseMove(t){this._update(t.point)}_onDrag(t){this._update(t.point)}_update(t){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(this._container||(this._container=o.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=o.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((t=>this._container.classList.add(t))),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=oi(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!t)return;const e=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);let n=this.options.anchor;const r=yi(this.options.offset);if(!n){const t=this._container.offsetWidth,i=this._container.offsetHeight;let o;o=e.y+r.bottom.y<i?["top"]:e.y>this._map.transform.height-i?["bottom"]:[],e.x<t/2?o.push("left"):e.x>this._map.transform.width-t/2&&o.push("right"),n=0===o.length?"bottom":o.join("-")}const i=e.add(r[n]).round();o.setTransform(this._container,`${ai[n]} translate(${i.x}px,${i.y}px)`),si(this._container,n,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(vi);t&&t.focus()}_onClose(){this.remove()}},Marker:li,Style:ne,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.pointGeometry,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,AJAXError:t.AJAXError,config:t.config,CanvasSource:N,GeoJSONSource:T,ImageSource:L,RasterDEMTileSource:P,RasterTileSource:C,VectorTileSource:I,VideoSource:R,prewarm:function(){Y().acquire(G)},clearPrewarmedResources:function(){const t=X;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(G),X=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get workerCount(){return W.workerCount},set workerCount(t){W.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage(e){t.clearTileCache(e)},workerUrl:"",addProtocol(e,n){t.config.REGISTERED_PROTOCOLS[e]=n},removeProtocol(e){delete t.config.REGISTERED_PROTOCOLS[e]}};return $r.extend(_i,{isSafari:t.isSafari,getPerformanceMetrics:t.PerformanceUtils.getPerformanceMetrics}),_i})),n}()},907:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{Z:function(){return r}})},7326:function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,{Z:function(){return r}})},5861:function(t,e,n){"use strict";function r(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(u){return void n(u)}s.done?e(l):Promise.resolve(l).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,l,"next",t)}function l(t){r(a,i,o,s,l,"throw",t)}s(void 0)}))}}n.d(e,{Z:function(){return i}})},5671:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,{Z:function(){return r}})},3144:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}n.d(e,{Z:function(){return i}})},7762:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(181);function i(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=(0,r.Z)(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}},9388:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(1120),i=n(8814),o=n(2963);function a(t){var e=(0,i.Z)();return function(){var n,i=(0,r.Z)(t);if(e){var a=(0,r.Z)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return(0,o.Z)(this,n)}}},4942:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:function(){return r}})},7462:function(t,e,n){"use strict";function r(){return r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(this,arguments)}n.d(e,{Z:function(){return r}})},1752:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(1120);function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=(0,r.Z)(t)););return t}function o(){return o="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},o.apply(this,arguments)}},1120:function(t,e,n){"use strict";function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}n.d(e,{Z:function(){return r}})},136:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(9611);function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&(0,r.Z)(t,e)}},8814:function(t,e,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}n.d(e,{Z:function(){return r}})},3366:function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}n.d(e,{Z:function(){return r}})},2963:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(1002),i=n(7326);function o(t,e){if(e&&("object"===(0,r.Z)(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(t)}},9611:function(t,e,n){"use strict";function r(t,e){return r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}n.d(e,{Z:function(){return r}})},885:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(181);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||(0,r.Z)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2982:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(907);var i=n(181);function o(t){return function(t){if(Array.isArray(t))return(0,r.Z)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||(0,i.Z)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1002:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}n.d(e,{Z:function(){return r}})},181:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(907);function i(t,e){if(t){if("string"===typeof t)return(0,r.Z)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(t,e):void 0}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.m=t,n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};t=t||[null,e({}),e([]),e(e)];for(var s=2&i&&r;"object"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((function(t){a[t]=function(){return r[t]}}));return a.default=function(){return r},n.d(o,a),o}}(),n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,r){return n.f[r](t,e),e}),[]))},n.u=function(t){return"static/js/"+t+"."+{498:"b229ed3a",513:"242d164c",703:"c5e57fc6",787:"09c29f35"}[t]+".chunk.js"},n.miniCssF=function(t){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t={},e="projectx:";n.l=function(r,i,o,a){if(t[r])t[r].push(i);else{var s,l;if(void 0!==o)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==e+o){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",e+o),s.src=r),t[r]=[i];var f=function(e,n){s.onerror=s.onload=null,clearTimeout(p);var i=t[r];if(delete t[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(t){return t(n)})),e)return e(n)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="./",function(){var t={179:0};n.f.j=function(e,r){var i=n.o(t,e)?t[e]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((function(n,r){i=t[e]=[n,r]}));r.push(i[2]=o);var a=n.p+n.u(e),s=new Error;n.l(a,(function(r){if(n.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+e,e)}};var e=function(e,r){var i,o,a=r[0],s=r[1],l=r[2],u=0;if(a.some((function(e){return 0!==t[e]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(e&&e(r);u<a.length;u++)o=a[u],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0},r=self.webpackChunkprojectx=self.webpackChunkprojectx||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}(),function(){"use strict";var t=n(2791),e=n.t(t,2),r=n(4164),i=n(885);function o(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var a,s=n(5671),l=n(3144),u=n(2982),c=n(4942),h=n(4307),f=new Uint8Array(16);function p(){if(!a&&!(a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(f)}var d=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var m=function(t){return"string"===typeof t&&d.test(t)},g=[],v=0;v<256;++v)g.push((v+256).toString(16).substr(1));var y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(g[t[e+0]]+g[t[e+1]]+g[t[e+2]]+g[t[e+3]]+"-"+g[t[e+4]]+g[t[e+5]]+"-"+g[t[e+6]]+g[t[e+7]]+"-"+g[t[e+8]]+g[t[e+9]]+"-"+g[t[e+10]]+g[t[e+11]]+g[t[e+12]]+g[t[e+13]]+g[t[e+14]]+g[t[e+15]]).toLowerCase();if(!m(n))throw TypeError("Stringified UUID is invalid");return n};var _=function(t,e,n){var r=(t=t||{}).random||(t.rng||p)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return y(r)},x=n(2007),b=n.n(x),w=n(596),k=n.n(w),S=n(1002),E=Uint8Array,I=Uint16Array,C=Uint32Array,A=new E([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),P=new E([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),T=new E([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),M=function(t,e){for(var n=new I(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var i=new C(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},L=M(A,2),R=L[0],N=L[1];R[28]=258,N[258]=28;for(var O=M(P,0),z=O[0],D=O[1],F=new I(32768),B=0;B<32768;++B){var j=(43690&B)>>>1|(21845&B)<<1;j=(61680&(j=(52428&j)>>>2|(13107&j)<<2))>>>4|(3855&j)<<4,F[B]=((65280&j)>>>8|(255&j)<<8)>>>1}var Z=function(t,e,n){for(var r=t.length,i=0,o=new I(e);i<r;++i)++o[t[i]-1];var a,s=new I(e);for(i=0;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;if(n){a=new I(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],c=e-t[i],h=s[t[i]-1]++<<c,f=h|(1<<c)-1;h<=f;++h)a[F[h]>>>l]=u}else for(a=new I(r),i=0;i<r;++i)a[i]=F[s[t[i]-1]++]>>>15-t[i];return a},U=new E(288);for(B=0;B<144;++B)U[B]=8;for(B=144;B<256;++B)U[B]=9;for(B=256;B<280;++B)U[B]=7;for(B=280;B<288;++B)U[B]=8;var V=new E(32);for(B=0;B<32;++B)V[B]=5;var q=Z(U,9,0),G=Z(U,9,1),W=Z(V,5,0),H=Z(V,5,1),X=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Y=function(t,e,n){var r=e/8>>0;return(t[r]|t[r+1]<<8)>>>(7&e)&n},$=function(t,e){var n=e/8>>0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>>(7&e)},K=function(t){return(t/8>>0)+(7&t&&1)},J=function(t,e,n){(null==e||e<0)&&(e=0),(null==n||n>t.length)&&(n=t.length);var r=new(t instanceof I?I:t instanceof C?C:E)(n-e);return r.set(t.subarray(e,n)),r},Q=function(t,e,n){var r=t.length,i=!e||n,o=!n||n.i;n||(n={}),e||(e=new E(3*r));var a=function(t){var n=e.length;if(t>n){var r=new E(Math.max(2*n,t));r.set(e),e=r}},s=n.f||0,l=n.p||0,u=n.b||0,c=n.l,h=n.d,f=n.m,p=n.n,d=8*r;do{if(!c){n.f=s=Y(t,l,1);var m=Y(t,l+1,3);if(l+=3,!m){var g=t[(M=K(l)+4)-4]|t[M-3]<<8,v=M+g;if(v>r){if(o)throw"unexpected EOF";break}i&&a(u+g),e.set(t.subarray(M,v),u),n.b=u+=g,n.p=l=8*v;continue}if(1==m)c=G,h=H,f=9,p=5;else{if(2!=m)throw"invalid block type";var y=Y(t,l,31)+257,_=Y(t,l+10,15)+4,x=y+Y(t,l+5,31)+1;l+=14;for(var b=new E(x),w=new E(19),k=0;k<_;++k)w[T[k]]=Y(t,l+3*k,7);l+=3*_;var S=X(w),I=(1<<S)-1;if(!o&&l+x*(S+7)>d)break;var C=Z(w,S,1);for(k=0;k<x;){var M,L=C[Y(t,l,I)];if(l+=15&L,(M=L>>>4)<16)b[k++]=M;else{var N=0,O=0;for(16==M?(O=3+Y(t,l,3),l+=2,N=b[k-1]):17==M?(O=3+Y(t,l,7),l+=3):18==M&&(O=11+Y(t,l,127),l+=7);O--;)b[k++]=N}}var D=b.subarray(0,y),F=b.subarray(y);f=X(D),p=X(F),c=Z(D,f,1),h=Z(F,p,1)}if(l>d)throw"unexpected EOF"}i&&a(u+131072);for(var B=(1<<f)-1,j=(1<<p)-1,U=f+p+18;o||l+U<d;){var V=(N=c[$(t,l)&B])>>>4;if((l+=15&N)>d)throw"unexpected EOF";if(!N)throw"invalid length/literal";if(V<256)e[u++]=V;else{if(256==V){c=null;break}var q=V-254;if(V>264){var W=A[k=V-257];q=Y(t,l,(1<<W)-1)+R[k],l+=W}var Q=h[$(t,l)&j],tt=Q>>>4;if(!Q)throw"invalid distance";l+=15&Q;F=z[tt];if(tt>3){W=P[tt];F+=$(t,l)&(1<<W)-1,l+=W}if(l>d)throw"unexpected EOF";i&&a(u+131072);for(var et=u+q;u<et;u+=4)e[u]=e[u-F],e[u+1]=e[u+1-F],e[u+2]=e[u+2-F],e[u+3]=e[u+3-F];u=et}}n.l=c,n.p=l,n.b=u,c&&(s=1,n.m=f,n.d=h,n.n=p)}while(!s);return u==e.length?e:J(e,0,u)},tt=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8},et=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},nt=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,o=n.slice();if(!i)return[new E(0),0];if(1==i){var a=new E(n[0].s+1);return a[n[0].s]=1,[a,1]}n.sort((function(t,e){return t.f-e.f})),n.push({s:-1,f:25001});var s=n[0],l=n[1],u=0,c=1,h=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};c!=i-1;)s=n[n[u].f<n[h].f?u++:h++],l=n[u!=c&&n[u].f<n[h].f?u++:h++],n[c++]={s:-1,f:s.f+l.f,l:s,r:l};var f=o[0].s;for(r=1;r<i;++r)o[r].s>f&&(f=o[r].s);var p=new I(f+1),d=rt(n[c-1],p,0);if(d>e){r=0;var m=0,g=d-e,v=1<<g;for(o.sort((function(t,e){return p[e.s]-p[t.s]||t.f-e.f}));r<i;++r){var y=o[r].s;if(!(p[y]>e))break;m+=v-(1<<d-p[y]),p[y]=e}for(m>>>=g;m>0;){var _=o[r].s;p[_]<e?m-=1<<e-p[_]++-1:++r}for(;r>=0&&m;--r){var x=o[r].s;p[x]==e&&(--p[x],++m)}d=e}return[new E(p),d]},rt=function t(e,n,r){return-1==e.s?Math.max(t(e.l,n,r+1),t(e.r,n,r+1)):n[e.s]=r},it=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new I(++e),r=0,i=t[0],o=1,a=function(t){n[r++]=t},s=1;s<=e;++s)if(t[s]==i&&s!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(i),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}for(;o--;)a(i);o=1,i=t[s]}return[n.subarray(0,r),e]},ot=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},at=function(t,e,n){var r=n.length,i=K(e+2);t[i]=255&r,t[i+1]=r>>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var o=0;o<r;++o)t[i+o+4]=n[o];return 8*(i+4+r)},st=function(t,e,n,r,i,o,a,s,l,u,c){tt(e,c++,n),++i[256];for(var h=nt(i,15),f=h[0],p=h[1],d=nt(o,15),m=d[0],g=d[1],v=it(f),y=v[0],_=v[1],x=it(m),b=x[0],w=x[1],k=new I(19),S=0;S<y.length;++S)k[31&y[S]]++;for(S=0;S<b.length;++S)k[31&b[S]]++;for(var E=nt(k,7),C=E[0],M=E[1],L=19;L>4&&!C[T[L-1]];--L);var R,N,O,z,D=u+5<<3,F=ot(i,U)+ot(o,V)+a,B=ot(i,f)+ot(o,m)+a+14+3*L+ot(k,C)+(2*k[16]+3*k[17]+7*k[18]);if(D<=F&&D<=B)return at(e,c,t.subarray(l,l+u));if(tt(e,c,1+(B<F)),c+=2,B<F){R=Z(f,p,0),N=f,O=Z(m,g,0),z=m;var j=Z(C,M,0);tt(e,c,_-257),tt(e,c+5,w-1),tt(e,c+10,L-4),c+=14;for(S=0;S<L;++S)tt(e,c+3*S,C[T[S]]);c+=3*L;for(var G=[y,b],H=0;H<2;++H){var X=G[H];for(S=0;S<X.length;++S){var Y=31&X[S];tt(e,c,j[Y]),c+=C[Y],Y>15&&(tt(e,c,X[S]>>>5&127),c+=X[S]>>>12)}}}else R=q,N=U,O=W,z=V;for(S=0;S<s;++S)if(r[S]>255){Y=r[S]>>>18&31;et(e,c,R[Y+257]),c+=N[Y+257],Y>7&&(tt(e,c,r[S]>>>23&31),c+=A[Y]);var $=31&r[S];et(e,c,O[$]),c+=z[$],$>3&&(et(e,c,r[S]>>>5&8191),c+=P[$])}else et(e,c,R[r[S]]),c+=N[r[S]];return et(e,c,R[256]),c+N[256]},lt=new C([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ut=new E(0),ct=function(t,e,n,r,i,o){var a=t.length,s=new E(r+a+5*(1+Math.floor(a/7e3))+i),l=s.subarray(r,s.length-i),u=0;if(!e||a<8)for(var c=0;c<=a;c+=65535){var h=c+65535;h<a?u=at(l,u,t.subarray(c,h)):(l[c]=o,u=at(l,u,t.subarray(c,a)))}else{for(var f=lt[e-1],p=f>>>13,d=8191&f,m=(1<<n)-1,g=new I(32768),v=new I(m+1),y=Math.ceil(n/3),_=2*y,x=function(e){return(t[e]^t[e+1]<<y^t[e+2]<<_)&m},b=new C(25e3),w=new I(288),k=new I(32),S=0,T=0,M=(c=0,0),L=0,R=0;c<a;++c){var O=x(c),z=32767&c,F=v[O];if(g[z]=F,v[O]=z,L<=c){var B=a-c;if((S>7e3||M>24576)&&B>423){u=st(t,l,0,b,w,k,T,M,R,c-R,u),M=S=T=0,R=c;for(var j=0;j<286;++j)w[j]=0;for(j=0;j<30;++j)k[j]=0}var Z=2,U=0,V=d,q=z-F&32767;if(B>2&&O==x(c-q))for(var G=Math.min(p,B)-1,W=Math.min(32767,c),H=Math.min(258,B);q<=W&&--V&&z!=F;){if(t[c+Z]==t[c+Z-q]){for(var X=0;X<H&&t[c+X]==t[c+X-q];++X);if(X>Z){if(Z=X,U=q,X>G)break;var Y=Math.min(q,X-2),$=0;for(j=0;j<Y;++j){var Q=c-q+j+32768&32767,tt=Q-g[Q]+32768&32767;tt>$&&($=tt,F=Q)}}}q+=(z=F)-(F=g[z])+32768&32767}if(U){b[M++]=268435456|N[Z]<<18|D[U];var et=31&N[Z],nt=31&D[U];T+=A[et]+P[nt],++w[257+et],++k[nt],L=c+Z,++S}else b[M++]=t[c],++w[t[c]]}}u=st(t,l,o,b,w,k,T,M,R,c-R,u),o||(u=at(l,u,ut))}return J(s,0,r+K(u)+i)},ht=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,o=n.length,a=0;a!=o;){for(var s=Math.min(a+5552,o);a<s;++a)i+=r+=n[a];r%=65521,i%=65521}t=r,e=i},d:function(){return(t>>>8<<16|(255&e)<<8|e>>>8)+2*((255&t)<<23)}}},ft=function(t,e,n,r,i){return ct(t,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,r,!i)},pt=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},dt=function(t,e){var n=e.level,r=0==n?0:n<6?1:9==n?3:2;t[0]=120,t[1]=r<<6|(r?32-2*r:1)},mt=function(t){if(8!=(15&t[0])||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(32&t[1])throw"invalid zlib data: preset dictionaries not supported"};function gt(t,e){void 0===e&&(e={});var n=ht();n.p(t);var r=ft(t,e,2,4);return dt(r,e),pt(r,r.length-4,n.d()),r}function vt(t,e){return Q((mt(t),t.subarray(2,-4)),e)}var yt=function(){return"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:this}();function _t(){yt.console&&"function"==typeof yt.console.log&&yt.console.log.apply(yt.console,arguments)}var xt={log:_t,warn:function(t){yt.console&&("function"==typeof yt.console.warn?yt.console.warn.apply(yt.console,arguments):_t.call(null,arguments))},error:function(t){yt.console&&("function"==typeof yt.console.error?yt.console.error.apply(yt.console,arguments):_t(t))}};function bt(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){It(r.response,e,n)},r.onerror=function(){xt.error("could not download file")},r.send()}function wt(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return e.status>=200&&e.status<=299}function kt(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(Lm){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var St,Et,It=yt.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,S.Z)(window))||window!==yt?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=yt.URL||yt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener","string"==typeof t?(i.href=t,i.origin!==location.origin?wt(i.href)?bt(t,e,n):kt(i,i.target="_blank"):kt(i)):(i.href=r.createObjectURL(t),setTimeout((function(){r.revokeObjectURL(i.href)}),4e4),setTimeout((function(){kt(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download","string"==typeof t)if(wt(t))bt(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout((function(){kt(r)}))}else navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!==(0,S.Z)(e)&&(xt.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return bt(t,e,n);var i="application/octet-stream"===t.type,o=/constructor/i.test(yt.HTMLElement)||yt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&o)&&"object"===("undefined"==typeof FileReader?"undefined":(0,S.Z)(FileReader))){var s=new FileReader;s.onloadend=function(){var t=s.result;t=a?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},s.readAsDataURL(t)}else{var l=yt.URL||yt.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout((function(){l.revokeObjectURL(u)}),4e4)}});function Ct(t){var e;t=t||"",this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,o=n[r].process,a=i.exec(t);a&&(e=o(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n}}function At(t,e){var n=t[0],r=t[1],i=t[2],o=t[3];n=Tt(n,r,i,o,e[0],7,-680876936),o=Tt(o,n,r,i,e[1],12,-389564586),i=Tt(i,o,n,r,e[2],17,606105819),r=Tt(r,i,o,n,e[3],22,-1044525330),n=Tt(n,r,i,o,e[4],7,-176418897),o=Tt(o,n,r,i,e[5],12,1200080426),i=Tt(i,o,n,r,e[6],17,-1473231341),r=Tt(r,i,o,n,e[7],22,-45705983),n=Tt(n,r,i,o,e[8],7,1770035416),o=Tt(o,n,r,i,e[9],12,-1958414417),i=Tt(i,o,n,r,e[10],17,-42063),r=Tt(r,i,o,n,e[11],22,-1990404162),n=Tt(n,r,i,o,e[12],7,1804603682),o=Tt(o,n,r,i,e[13],12,-40341101),i=Tt(i,o,n,r,e[14],17,-1502002290),n=Mt(n,r=Tt(r,i,o,n,e[15],22,1236535329),i,o,e[1],5,-165796510),o=Mt(o,n,r,i,e[6],9,-1069501632),i=Mt(i,o,n,r,e[11],14,643717713),r=Mt(r,i,o,n,e[0],20,-373897302),n=Mt(n,r,i,o,e[5],5,-701558691),o=Mt(o,n,r,i,e[10],9,38016083),i=Mt(i,o,n,r,e[15],14,-660478335),r=Mt(r,i,o,n,e[4],20,-405537848),n=Mt(n,r,i,o,e[9],5,568446438),o=Mt(o,n,r,i,e[14],9,-1019803690),i=Mt(i,o,n,r,e[3],14,-187363961),r=Mt(r,i,o,n,e[8],20,1163531501),n=Mt(n,r,i,o,e[13],5,-1444681467),o=Mt(o,n,r,i,e[2],9,-51403784),i=Mt(i,o,n,r,e[7],14,1735328473),n=Lt(n,r=Mt(r,i,o,n,e[12],20,-1926607734),i,o,e[5],4,-378558),o=Lt(o,n,r,i,e[8],11,-2022574463),i=Lt(i,o,n,r,e[11],16,1839030562),r=Lt(r,i,o,n,e[14],23,-35309556),n=Lt(n,r,i,o,e[1],4,-1530992060),o=Lt(o,n,r,i,e[4],11,1272893353),i=Lt(i,o,n,r,e[7],16,-155497632),r=Lt(r,i,o,n,e[10],23,-1094730640),n=Lt(n,r,i,o,e[13],4,681279174),o=Lt(o,n,r,i,e[0],11,-358537222),i=Lt(i,o,n,r,e[3],16,-722521979),r=Lt(r,i,o,n,e[6],23,76029189),n=Lt(n,r,i,o,e[9],4,-640364487),o=Lt(o,n,r,i,e[12],11,-421815835),i=Lt(i,o,n,r,e[15],16,530742520),n=Rt(n,r=Lt(r,i,o,n,e[2],23,-995338651),i,o,e[0],6,-198630844),o=Rt(o,n,r,i,e[7],10,1126891415),i=Rt(i,o,n,r,e[14],15,-1416354905),r=Rt(r,i,o,n,e[5],21,-57434055),n=Rt(n,r,i,o,e[12],6,1700485571),o=Rt(o,n,r,i,e[3],10,-1894986606),i=Rt(i,o,n,r,e[10],15,-1051523),r=Rt(r,i,o,n,e[1],21,-2054922799),n=Rt(n,r,i,o,e[8],6,1873313359),o=Rt(o,n,r,i,e[15],10,-30611744),i=Rt(i,o,n,r,e[6],15,-1560198380),r=Rt(r,i,o,n,e[13],21,1309151649),n=Rt(n,r,i,o,e[4],6,-145523070),o=Rt(o,n,r,i,e[11],10,-1120210379),i=Rt(i,o,n,r,e[2],15,718787259),r=Rt(r,i,o,n,e[9],21,-343485551),t[0]=Zt(n,t[0]),t[1]=Zt(r,t[1]),t[2]=Zt(i,t[2]),t[3]=Zt(o,t[3])}function Pt(t,e,n,r,i,o){return e=Zt(Zt(e,t),Zt(r,o)),Zt(e<<i|e>>>32-i,n)}function Tt(t,e,n,r,i,o,a){return Pt(e&n|~e&r,t,e,i,o,a)}function Mt(t,e,n,r,i,o,a){return Pt(e&r|n&~r,t,e,i,o,a)}function Lt(t,e,n,r,i,o,a){return Pt(e^n^r,t,e,i,o,a)}function Rt(t,e,n,r,i,o,a){return Pt(n^(e|~r),t,e,i,o,a)}function Nt(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)At(r,Ot(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(At(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,At(r,i),r}function Ot(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}St=yt.atob.bind(yt),Et=yt.btoa.bind(yt);var zt="0123456789abcdef".split("");function Dt(t){for(var e="",n=0;n<4;n++)e+=zt[t>>8*n+4&15]+zt[t>>8*n&15];return e}function Ft(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Bt(t){return Nt(t).map(Ft).join("")}var jt="5d41402abc4b2a76b9719d911017c592"!=function(t){for(var e=0;e<t.length;e++)t[e]=Dt(t[e]);return t.join("")}(Nt("hello"));function Zt(t,e){if(jt){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}function Ut(t,e){var n,r,i,o;if(t!==n){for(var a=(i=t,o=1+(256/t.length>>0),new Array(o+1).join(i)),s=[],l=0;l<256;l++)s[l]=l;var u=0;for(l=0;l<256;l++){var c=s[l];u=(u+c+a.charCodeAt(l))%256,s[l]=s[u],s[u]=c}n=t,r=s}else s=r;var h=e.length,f=0,p=0,d="";for(l=0;l<h;l++)p=(p+(c=s[f=(f+1)%256]))%256,s[f]=s[p],s[p]=c,a=s[(s[f]+s[p])%256],d+=String.fromCharCode(e.charCodeAt(l)^a);return d}var Vt={print:4,modify:8,copy:16,"annot-forms":32};function qt(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach((function(t){if(void 0!==Vt.perm)throw new Error("Invalid permission: "+t);i+=Vt[t]})),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var o=(e+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,a),this.P=-(1+(255^i)),this.encryptionKey=Bt(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Ut(this.encryptionKey,this.padding)}function Gt(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);e+=i<33||35===i||37===i||40===i||41===i||47===i||60===i||62===i||91===i||93===i||123===i||125===i||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return e}function Wt(t){if("object"!==(0,S.Z)(t))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,r){if(r=r||!1,"string"!=typeof t||"function"!=typeof n||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var i=Math.random().toString(35);return e[t][i]=[n,!!r],i},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],0===Object.keys(e[n]).length&&delete e[n],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[n]){var a=e[n][o];try{a[0].apply(t,r)}catch(n){yt.console&&xt.error("jsPDF PubSub Error",n.message,n)}a[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Ht(t){if(!(this instanceof Ht))return new Ht(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Xt(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Yt(t,e,n,r,i){if(!(this instanceof Yt))return new Yt(t,e,n,r,i);this.type="axial"===t?2:3,this.coords=e,this.colors=n,Xt.call(this,r,i)}function $t(t,e,n,r,i){if(!(this instanceof $t))return new $t(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Xt.call(this,r,i)}function Kt(t){var e,n="string"==typeof arguments[0]?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],a=[],s=1,l=16,u="S",c=null;"object"===(0,S.Z)(t=t||{})&&(n=t.orientation,r=t.unit||r,i=t.format||i,o=t.compress||t.compressPdf||o,null!==(c=t.encryption||null)&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),s="number"==typeof t.userUnit?Math.abs(t.userUnit):1,void 0!==t.precision&&(e=t.precision),void 0!==t.floatPrecision&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),a=t.filters||(!0===o?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,f={},p={internal:{},__private__:{}};p.__private__.PubSub=Wt;var d="1.3",m=p.__private__.getPdfVersion=function(){return d};p.__private__.setPdfVersion=function(t){d=t};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return g};var v=p.__private__.getPageFormat=function(t){return g[t]};i=i||"a4";var y={COMPAT:"compat",ADVANCED:"advanced"},_=y.COMPAT;function x(){this.saveGraphicsState(),Q(new Ft(dt,0,0,-dt,0,jn()*dt).toString()+" cm"),this.setFontSize(this.getFontSize()/dt),u="n",_=y.ADVANCED}function b(){this.restoreGraphicsState(),u="S",_=y.COMPAT}var w=p.__private__.combineFontStyleAndFontWeight=function(t,e){if("bold"==t&&"normal"==e||"bold"==t&&400==e||"normal"==t&&"italic"==e||"bold"==t&&"italic"==e)throw new Error("Invalid Combination of fontweight and fontstyle");return e&&(t=400==e||"normal"===e?"italic"===t?"italic":"normal":700!=e&&"bold"!==e||"normal"!==t?(700==e?"bold":e)+""+t:"bold"),t};p.advancedAPI=function(t){var e=_===y.COMPAT;return e&&x.call(this),"function"!=typeof t||(t(this),e&&b.call(this)),this},p.compatAPI=function(t){var e=_===y.ADVANCED;return e&&b.call(this),"function"!=typeof t||(t(this),e&&x.call(this)),this},p.isAdvancedAPI=function(){return _===y.ADVANCED};var k,E=function(t){if(_!==y.ADVANCED)throw new Error(t+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=p.roundToPrecision=p.__private__.roundToPrecision=function(t,n){var r=e||n;if(isNaN(t)||isNaN(r))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return t.toFixed(r).replace(/0+$/,"")};k=p.hpf=p.__private__.hpf="number"==typeof l?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return I(t,l)}:"smart"===l?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return I(t,t>-1&&t<1?16:5)}:function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return I(t,16)};var C=p.f2=p.__private__.f2=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f2");return I(t,2)},A=p.__private__.f3=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f3");return I(t,3)},P=p.scale=p.__private__.scale=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.scale");return _===y.COMPAT?t*dt:_===y.ADVANCED?t:void 0},T=function(t){return _===y.COMPAT?jn()-t:_===y.ADVANCED?t:void 0},M=function(t){return P(T(t))};p.__private__.setPrecision=p.setPrecision=function(t){"number"==typeof parseInt(t,10)&&(e=parseInt(t,10))};var L,R="00000000000000000000000000000000",N=p.__private__.getFileId=function(){return R},O=p.__private__.setFileId=function(t){return R=void 0!==t&&/^[a-fA-F0-9]{32}$/.test(t)?t.toUpperCase():R.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),null!==c&&(He=new qt(c.userPermissions,c.userPassword,c.ownerPassword,R)),R};p.setFileId=function(t){return O(t),this},p.getFileId=function(){return N()};var z=p.__private__.convertDateToPDFDate=function(t){var e=t.getTimezoneOffset(),n=e<0?"+":"-",r=Math.floor(Math.abs(e/60)),i=Math.abs(e%60),o=[n,Z(r),"'",Z(i),"'"].join("");return["D:",t.getFullYear(),Z(t.getMonth()+1),Z(t.getDate()),Z(t.getHours()),Z(t.getMinutes()),Z(t.getSeconds()),o].join("")},D=p.__private__.convertPDFDateToDate=function(t){var e=parseInt(t.substr(2,4),10),n=parseInt(t.substr(6,2),10)-1,r=parseInt(t.substr(8,2),10),i=parseInt(t.substr(10,2),10),o=parseInt(t.substr(12,2),10),a=parseInt(t.substr(14,2),10);return new Date(e,n,r,i,o,a,0)},F=p.__private__.setCreationDate=function(t){var e;if(void 0===t&&(t=new Date),t instanceof Date)e=z(t);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(t))throw new Error("Invalid argument passed to jsPDF.setCreationDate");e=t}return L=e},B=p.__private__.getCreationDate=function(t){var e=L;return"jsDate"===t&&(e=D(L)),e};p.setCreationDate=function(t){return F(t),this},p.getCreationDate=function(t){return B(t)};var j,Z=p.__private__.padd2=function(t){return("0"+parseInt(t)).slice(-2)},U=p.__private__.padd2Hex=function(t){return("00"+(t=t.toString())).substr(t.length)},V=0,q=[],G=[],W=0,H=[],X=[],Y=!1,$=G,K=function(){V=0,W=0,G=[],q=[],H=[],Qt=Vt(),te=Vt()};p.__private__.setCustomOutputDestination=function(t){Y=!0,$=t};var J=function(t){Y||($=t)};p.__private__.resetCustomOutputDestination=function(){Y=!1,$=G};var Q=p.__private__.out=function(t){return t=t.toString(),W+=t.length+1,$.push(t),$},tt=p.__private__.write=function(t){return Q(1===arguments.length?t.toString():Array.prototype.join.call(arguments," "))},et=p.__private__.getArrayBuffer=function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n);e--;)r[e]=t.charCodeAt(e);return n},nt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return nt};var rt=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(t){return rt=_===y.ADVANCED?t/dt:t,this};var it,ot=p.__private__.getFontSize=p.getFontSize=function(){return _===y.COMPAT?rt:rt*dt},at=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(t){return at=t,this},p.__private__.getR2L=p.getR2L=function(){return at};var st,lt=p.__private__.setZoomMode=function(t){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(t))it=t;else if(isNaN(t)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(t))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+t+'" is not recognized.');it=t}else it=parseInt(t,10)};p.__private__.getZoomMode=function(){return it};var ut,ct=p.__private__.setPageMode=function(t){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(t))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+t+'" is not recognized.');st=t};p.__private__.getPageMode=function(){return st};var ht=p.__private__.setLayoutMode=function(t){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(t))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+t+'" is not recognized.');ut=t};p.__private__.getLayoutMode=function(){return ut},p.__private__.setDisplayMode=p.setDisplayMode=function(t,e,n){return lt(t),ht(e),ct(n),this};var ft={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(t){if(-1===Object.keys(ft).indexOf(t))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ft[t]},p.__private__.getDocumentProperties=function(){return ft},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(t){for(var e in ft)ft.hasOwnProperty(e)&&t[e]&&(ft[e]=t[e]);return this},p.__private__.setDocumentProperty=function(t,e){if(-1===Object.keys(ft).indexOf(t))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ft[t]=e};var pt,dt,mt,gt,vt,_t={},bt={},wt=[],kt={},St={},At={},Pt={},Tt=null,Mt=0,Lt=[],Rt=new Wt(p),Nt=t.hotfixes||[],Ot={},zt={},Dt=[],Ft=function t(e,n,r,i,o,a){if(!(this instanceof t))return new t(e,n,r,i,o,a);isNaN(e)&&(e=1),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(i)&&(i=1),isNaN(o)&&(o=0),isNaN(a)&&(a=0),this._matrix=[e,n,r,i,o,a]};Object.defineProperty(Ft.prototype,"sx",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(Ft.prototype,"shy",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(Ft.prototype,"shx",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(Ft.prototype,"sy",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(Ft.prototype,"tx",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(Ft.prototype,"ty",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(Ft.prototype,"a",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(Ft.prototype,"b",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(Ft.prototype,"c",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(Ft.prototype,"d",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(Ft.prototype,"e",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(Ft.prototype,"f",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(Ft.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ft.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ft.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ft.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Ft.prototype.join=function(t){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(k).join(t)},Ft.prototype.multiply=function(t){var e=t.sx*this.sx+t.shy*this.shx,n=t.sx*this.shy+t.shy*this.sy,r=t.shx*this.sx+t.sy*this.shx,i=t.shx*this.shy+t.sy*this.sy,o=t.tx*this.sx+t.ty*this.shx+this.tx,a=t.tx*this.shy+t.ty*this.sy+this.ty;return new Ft(e,n,r,i,o,a)},Ft.prototype.decompose=function(){var t=this.sx,e=this.shy,n=this.shx,r=this.sy,i=this.tx,o=this.ty,a=Math.sqrt(t*t+e*e),s=(t/=a)*n+(e/=a)*r;n-=t*s,r-=e*s;var l=Math.sqrt(n*n+r*r);return s/=l,t*(r/=l)<e*(n/=l)&&(t=-t,e=-e,s=-s,a=-a),{scale:new Ft(a,0,0,l,0,0),translate:new Ft(1,0,0,1,i,o),rotate:new Ft(t,e,-e,t,0,0),skew:new Ft(1,0,s,1,0,0)}},Ft.prototype.toString=function(t){return this.join(" ")},Ft.prototype.inversed=function(){var t=this.sx,e=this.shy,n=this.shx,r=this.sy,i=this.tx,o=this.ty,a=1/(t*r-e*n),s=r*a,l=-e*a,u=-n*a,c=t*a;return new Ft(s,l,u,c,-s*i-u*o,-l*i-c*o)},Ft.prototype.applyToPoint=function(t){var e=t.x*this.sx+t.y*this.shx+this.tx,n=t.x*this.shy+t.y*this.sy+this.ty;return new Ln(e,n)},Ft.prototype.applyToRectangle=function(t){var e=this.applyToPoint(t),n=this.applyToPoint(new Ln(t.x+t.w,t.y+t.h));return new Rn(e.x,e.y,n.x-e.x,n.y-e.y)},Ft.prototype.clone=function(){var t=this.sx,e=this.shy,n=this.shx,r=this.sy,i=this.tx,o=this.ty;return new Ft(t,e,n,r,i,o)},p.Matrix=Ft;var Bt=p.matrixMult=function(t,e){return e.multiply(t)},jt=new Ft(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=jt;var Zt=function(t,e){if(!St[t]){var n=(e instanceof Yt?"Sh":"P")+(Object.keys(kt).length+1).toString(10);e.id=n,St[t]=n,kt[n]=e,Rt.publish("addPattern",e)}};p.ShadingPattern=Yt,p.TilingPattern=$t,p.addShadingPattern=function(t,e){return E("addShadingPattern()"),Zt(t,e),this},p.beginTilingPattern=function(t){E("beginTilingPattern()"),On(t.boundingBox[0],t.boundingBox[1],t.boundingBox[2]-t.boundingBox[0],t.boundingBox[3]-t.boundingBox[1],t.matrix)},p.endTilingPattern=function(t,e){E("endTilingPattern()"),e.stream=X[j].join("\n"),Zt(t,e),Rt.publish("endTilingPattern",e),Dt.pop().restore()};var Ut=p.__private__.newObject=function(){var t=Vt();return Xt(t,!0),t},Vt=p.__private__.newObjectDeferred=function(){return V++,q[V]=function(){return W},V},Xt=function(t,e){return e="boolean"==typeof e&&e,q[t]=W,e&&Q(t+" 0 obj"),t},Jt=p.__private__.newAdditionalObject=function(){var t={objId:Vt(),content:""};return H.push(t),t},Qt=Vt(),te=Vt(),ee=p.__private__.decodeColorString=function(t){var e=t.split(" ");if(2!==e.length||"g"!==e[1]&&"G"!==e[1])5!==e.length||"k"!==e[4]&&"K"!==e[4]||(e=[(1-e[0])*(1-e[3]),(1-e[1])*(1-e[3]),(1-e[2])*(1-e[3]),"r"]);else{var n=parseFloat(e[0]);e=[n,n,n,"r"]}for(var r="#",i=0;i<3;i++)r+=("0"+Math.floor(255*parseFloat(e[i])).toString(16)).slice(-2);return r},ne=p.__private__.encodeColorString=function(t){var e;"string"==typeof t&&(t={ch1:t});var n=t.ch1,r=t.ch2,i=t.ch3,o=t.ch4,a="draw"===t.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var s=new Ct(n);if(s.ok)n=s.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var l=parseInt(n.substr(1),16);n=l>>16&255,r=l>>8&255,i=255&l}if(void 0===r||void 0===o&&n===r&&r===i)if("string"==typeof n)e=n+" "+a[0];else if(2===t.precision)e=C(n/255)+" "+a[0];else e=A(n/255)+" "+a[0];else if(void 0===o||"object"===(0,S.Z)(o)){if(o&&!isNaN(o.a)&&0===o.a)return["1.","1.","1.",a[1]].join(" ");if("string"==typeof n)e=[n,r,i,a[1]].join(" ");else if(2===t.precision)e=[C(n/255),C(r/255),C(i/255),a[1]].join(" ");else e=[A(n/255),A(r/255),A(i/255),a[1]].join(" ")}else if("string"==typeof n)e=[n,r,i,o,a[2]].join(" ");else if(2===t.precision)e=[C(n),C(r),C(i),C(o),a[2]].join(" ");else e=[A(n),A(r),A(i),A(o),a[2]].join(" ");return e},re=p.__private__.getFilters=function(){return a},ie=p.__private__.putStream=function(t){var e=(t=t||{}).data||"",n=t.filters||re(),r=t.alreadyAppliedFilters||[],i=t.addLength1||!1,o=e.length,a=t.objectId,s=function(t){return t};if(null!==c&&void 0===a)throw new Error("ObjectId must be passed to putStream for file encryption");null!==c&&(s=He.encryptor(a,0));var l={};!0===n&&(n=["FlateEncode"]);var u=t.additionalKeyValues||[],h=(l=void 0!==Kt.API.processDataByFilters?Kt.API.processDataByFilters(e,n):{data:e,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());if(0!==l.data.length&&(u.push({key:"Length",value:l.data.length}),!0===i&&u.push({key:"Length1",value:o})),0!=h.length)if(h.split("/").length-1==1)u.push({key:"Filter",value:h});else{u.push({key:"Filter",value:"["+h+"]"});for(var f=0;f<u.length;f+=1)if("DecodeParms"===u[f].key){for(var p=[],d=0;d<l.reverseChain.split("/").length-1;d+=1)p.push("null");p.push(u[f].value),u[f].value="["+p.join(" ")+"]"}}Q("<<");for(var m=0;m<u.length;m++)Q("/"+u[m].key+" "+u[m].value);Q(">>"),0!==l.data.length&&(Q("stream"),Q(s(l.data)),Q("endstream"))},oe=p.__private__.putPage=function(t){var e=t.number,n=t.data,r=t.objId,i=t.contentsObjId;Xt(r,!0),Q("<</Type /Page"),Q("/Parent "+t.rootDictionaryObjId+" 0 R"),Q("/Resources "+t.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(k(t.mediaBox.bottomLeftX))+" "+parseFloat(k(t.mediaBox.bottomLeftY))+" "+k(t.mediaBox.topRightX)+" "+k(t.mediaBox.topRightY)+"]"),null!==t.cropBox&&Q("/CropBox ["+k(t.cropBox.bottomLeftX)+" "+k(t.cropBox.bottomLeftY)+" "+k(t.cropBox.topRightX)+" "+k(t.cropBox.topRightY)+"]"),null!==t.bleedBox&&Q("/BleedBox ["+k(t.bleedBox.bottomLeftX)+" "+k(t.bleedBox.bottomLeftY)+" "+k(t.bleedBox.topRightX)+" "+k(t.bleedBox.topRightY)+"]"),null!==t.trimBox&&Q("/TrimBox ["+k(t.trimBox.bottomLeftX)+" "+k(t.trimBox.bottomLeftY)+" "+k(t.trimBox.topRightX)+" "+k(t.trimBox.topRightY)+"]"),null!==t.artBox&&Q("/ArtBox ["+k(t.artBox.bottomLeftX)+" "+k(t.artBox.bottomLeftY)+" "+k(t.artBox.topRightX)+" "+k(t.artBox.topRightY)+"]"),"number"==typeof t.userUnit&&1!==t.userUnit&&Q("/UserUnit "+t.userUnit),Rt.publish("putPage",{objId:r,pageContext:Lt[e],pageNumber:e,page:n}),Q("/Contents "+i+" 0 R"),Q(">>"),Q("endobj");var o=n.join("\n");return _===y.ADVANCED&&(o+="\nQ"),Xt(i,!0),ie({data:o,filters:re(),objectId:i}),Q("endobj"),r},ae=p.__private__.putPages=function(){var t,e,n=[];for(t=1;t<=Mt;t++)Lt[t].objId=Vt(),Lt[t].contentsObjId=Vt();for(t=1;t<=Mt;t++)n.push(oe({number:t,data:X[t],objId:Lt[t].objId,contentsObjId:Lt[t].contentsObjId,mediaBox:Lt[t].mediaBox,cropBox:Lt[t].cropBox,bleedBox:Lt[t].bleedBox,trimBox:Lt[t].trimBox,artBox:Lt[t].artBox,userUnit:Lt[t].userUnit,rootDictionaryObjId:Qt,resourceDictionaryObjId:te}));Xt(Qt,!0),Q("<</Type /Pages");var r="/Kids [";for(e=0;e<Mt;e++)r+=n[e]+" 0 R ";Q(r+"]"),Q("/Count "+Mt),Q(">>"),Q("endobj"),Rt.publish("postPutPages")},se=function(t){Rt.publish("putFont",{font:t,out:Q,newObject:Ut,putStream:ie}),!0!==t.isAlreadyPutted&&(t.objectNumber=Ut(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+Gt(t.postScriptName)),Q("/Subtype /Type1"),"string"==typeof t.encoding&&Q("/Encoding /"+t.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},le=function(){for(var t in _t)_t.hasOwnProperty(t)&&(!1===h||!0===h&&f.hasOwnProperty(t))&&se(_t[t])},ue=function(t){t.objectNumber=Ut();var e=[];e.push({key:"Type",value:"/XObject"}),e.push({key:"Subtype",value:"/Form"}),e.push({key:"BBox",value:"["+[k(t.x),k(t.y),k(t.x+t.width),k(t.y+t.height)].join(" ")+"]"}),e.push({key:"Matrix",value:"["+t.matrix.toString()+"]"});var n=t.pages[1].join("\n");ie({data:n,additionalKeyValues:e,objectId:t.objectNumber}),Q("endobj")},ce=function(){for(var t in Ot)Ot.hasOwnProperty(t)&&ue(Ot[t])},he=function(t,e){var n,r=[],i=1/(e-1);for(n=0;n<1;n+=i)r.push(n);if(r.push(1),0!=t[0].offset){var o={offset:0,color:t[0].color};t.unshift(o)}if(1!=t[t.length-1].offset){var a={offset:1,color:t[t.length-1].color};t.push(a)}for(var s="",l=0,u=0;u<r.length;u++){for(n=r[u];n>t[l+1].offset;)l++;var c=t[l].offset,h=(n-c)/(t[l+1].offset-c),f=t[l].color,p=t[l+1].color;s+=U(Math.round((1-h)*f[0]+h*p[0]).toString(16))+U(Math.round((1-h)*f[1]+h*p[1]).toString(16))+U(Math.round((1-h)*f[2]+h*p[2]).toString(16))}return s.trim()},fe=function(t,e){e||(e=21);var n=Ut(),r=he(t.colors,e),i=[];i.push({key:"FunctionType",value:"0"}),i.push({key:"Domain",value:"[0.0 1.0]"}),i.push({key:"Size",value:"["+e+"]"}),i.push({key:"BitsPerSample",value:"8"}),i.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),i.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ie({data:r,additionalKeyValues:i,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),Q("endobj"),t.objectNumber=Ut(),Q("<< /ShadingType "+t.type),Q("/ColorSpace /DeviceRGB");var o="/Coords ["+k(parseFloat(t.coords[0]))+" "+k(parseFloat(t.coords[1]))+" ";2===t.type?o+=k(parseFloat(t.coords[2]))+" "+k(parseFloat(t.coords[3])):o+=k(parseFloat(t.coords[2]))+" "+k(parseFloat(t.coords[3]))+" "+k(parseFloat(t.coords[4]))+" "+k(parseFloat(t.coords[5])),Q(o+="]"),t.matrix&&Q("/Matrix ["+t.matrix.toString()+"]"),Q("/Function "+n+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},pe=function(t,e){var n=Vt(),r=Ut();e.push({resourcesOid:n,objectOid:r}),t.objectNumber=r;var i=[];i.push({key:"Type",value:"/Pattern"}),i.push({key:"PatternType",value:"1"}),i.push({key:"PaintType",value:"1"}),i.push({key:"TilingType",value:"1"}),i.push({key:"BBox",value:"["+t.boundingBox.map(k).join(" ")+"]"}),i.push({key:"XStep",value:k(t.xStep)}),i.push({key:"YStep",value:k(t.yStep)}),i.push({key:"Resources",value:n+" 0 R"}),t.matrix&&i.push({key:"Matrix",value:"["+t.matrix.toString()+"]"}),ie({data:t.stream,additionalKeyValues:i,objectId:t.objectNumber}),Q("endobj")},de=function(t){var e;for(e in kt)kt.hasOwnProperty(e)&&(kt[e]instanceof Yt?fe(kt[e]):kt[e]instanceof $t&&pe(kt[e],t))},me=function(t){for(var e in t.objectNumber=Ut(),Q("<<"),t)switch(e){case"opacity":Q("/ca "+C(t[e]));break;case"stroke-opacity":Q("/CA "+C(t[e]))}Q(">>"),Q("endobj")},ge=function(){var t;for(t in At)At.hasOwnProperty(t)&&me(At[t])},ve=function(){for(var t in Q("/XObject <<"),Ot)Ot.hasOwnProperty(t)&&Ot[t].objectNumber>=0&&Q("/"+t+" "+Ot[t].objectNumber+" 0 R");Rt.publish("putXobjectDict"),Q(">>")},ye=function(){He.oid=Ut(),Q("<<"),Q("/Filter /Standard"),Q("/V "+He.v),Q("/R "+He.r),Q("/U <"+He.toHexString(He.U)+">"),Q("/O <"+He.toHexString(He.O)+">"),Q("/P "+He.P),Q(">>"),Q("endobj")},_e=function(){for(var t in Q("/Font <<"),_t)_t.hasOwnProperty(t)&&(!1===h||!0===h&&f.hasOwnProperty(t))&&Q("/"+t+" "+_t[t].objectNumber+" 0 R");Q(">>")},xe=function(){if(Object.keys(kt).length>0){for(var t in Q("/Shading <<"),kt)kt.hasOwnProperty(t)&&kt[t]instanceof Yt&&kt[t].objectNumber>=0&&Q("/"+t+" "+kt[t].objectNumber+" 0 R");Rt.publish("putShadingPatternDict"),Q(">>")}},be=function(t){if(Object.keys(kt).length>0){for(var e in Q("/Pattern <<"),kt)kt.hasOwnProperty(e)&&kt[e]instanceof p.TilingPattern&&kt[e].objectNumber>=0&&kt[e].objectNumber<t&&Q("/"+e+" "+kt[e].objectNumber+" 0 R");Rt.publish("putTilingPatternDict"),Q(">>")}},we=function(){if(Object.keys(At).length>0){var t;for(t in Q("/ExtGState <<"),At)At.hasOwnProperty(t)&&At[t].objectNumber>=0&&Q("/"+t+" "+At[t].objectNumber+" 0 R");Rt.publish("putGStateDict"),Q(">>")}},ke=function(t){Xt(t.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),_e(),xe(),be(t.objectOid),we(),ve(),Q(">>"),Q("endobj")},Se=function(){var t=[];le(),ge(),ce(),de(t),Rt.publish("putResources"),t.forEach(ke),ke({resourcesOid:te,objectOid:Number.MAX_SAFE_INTEGER}),Rt.publish("postPutResources")},Ee=function(){Rt.publish("putAdditionalObjects");for(var t=0;t<H.length;t++){var e=H[t];Xt(e.objId,!0),Q(e.content),Q("endobj")}Rt.publish("postPutAdditionalObjects")},Ie=function(t){bt[t.fontName]=bt[t.fontName]||{},bt[t.fontName][t.fontStyle]=t.id},Ce=function(t,e,n,r,i){var o={id:"F"+(Object.keys(_t).length+1).toString(10),postScriptName:t,fontName:e,fontStyle:n,encoding:r,isStandardFont:i||!1,metadata:{}};return Rt.publish("addFont",{font:o,instance:this}),_t[o.id]=o,Ie(o),o.id},Ae=function(t){for(var e=0,n=nt.length;e<n;e++){var r=Ce.call(this,t[e][0],t[e][1],t[e][2],nt[e][3],!0);!1===h&&(f[r]=!0);var i=t[e][0].split("-");Ie({id:r,fontName:i[0],fontStyle:i[1]||""})}Rt.publish("addFonts",{fonts:_t,dictionary:bt})},Pe=function(t){return t.foo=function(){try{return t.apply(this,arguments)}catch(t){var e=t.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var n="Error in function "+e.split("\n")[0].split("<")[0]+": "+t.message;if(!yt.console)throw new Error(n);yt.console.error(n,t),yt.alert&&alert(n)}},t.foo.bar=t,t.foo},Te=function(t,e){var n,r,i,o,a,s,l,u,c;if(i=(e=e||{}).sourceEncoding||"Unicode",a=e.outputEncoding,(e.autoencode||a)&&_t[pt].metadata&&_t[pt].metadata[i]&&_t[pt].metadata[i].encoding&&(o=_t[pt].metadata[i].encoding,!a&&_t[pt].encoding&&(a=_t[pt].encoding),!a&&o.codePages&&(a=o.codePages[0]),"string"==typeof a&&(a=o[a]),a)){for(l=!1,s=[],n=0,r=t.length;n<r;n++)(u=a[t.charCodeAt(n)])?s.push(String.fromCharCode(u)):s.push(t[n]),s[n].charCodeAt(0)>>8&&(l=!0);t=s.join("")}for(n=t.length;void 0===l&&0!==n;)t.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return t;for(s=e.noBOM?[]:[254,255],n=0,r=t.length;n<r;n++){if((c=(u=t.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+t+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");s.push(c),s.push(u-(c<<8))}return String.fromCharCode.apply(void 0,s)},Me=p.__private__.pdfEscape=p.pdfEscape=function(t,e){return Te(t,e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Le=p.__private__.beginPage=function(t){X[++Mt]=[],Lt[Mt]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(t[0]),topRightY:Number(t[1])}},Oe(Mt),J(X[j])},Re=function(t,e){var r,o,a;switch(n=e||n,"string"==typeof t&&(r=v(t.toLowerCase()),Array.isArray(r)&&(o=r[0],a=r[1])),Array.isArray(t)&&(o=t[0]*dt,a=t[1]*dt),isNaN(o)&&(o=i[0],a=i[1]),(o>14400||a>14400)&&(xt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),o=Math.min(14400,o),a=Math.min(14400,a)),i=[o,a],n.substr(0,1)){case"l":a>o&&(i=[a,o]);break;case"p":o>a&&(i=[a,o])}Le(i),mn(pn),Q(kn),0!==Pn&&Q(Pn+" J"),0!==Tn&&Q(Tn+" j"),Rt.publish("addPage",{pageNumber:Mt})},Ne=function(t){t>0&&t<=Mt&&(X.splice(t,1),Lt.splice(t,1),Mt--,j>Mt&&(j=Mt),this.setPage(j))},Oe=function(t){t>0&&t<=Mt&&(j=t)},ze=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return X.length-1},De=function(t,e,n){var r,i=void 0;return n=n||{},t=void 0!==t?t:_t[pt].fontName,e=void 0!==e?e:_t[pt].fontStyle,r=t.toLowerCase(),void 0!==bt[r]&&void 0!==bt[r][e]?i=bt[r][e]:void 0!==bt[t]&&void 0!==bt[t][e]?i=bt[t][e]:!1===n.disableWarning&&xt.warn("Unable to look up font label for font '"+t+"', '"+e+"'. Refer to getFontList() for available fonts."),i||n.noFallback||null==(i=bt.times[e])&&(i=bt.times.normal),i},Fe=p.__private__.putInfo=function(){var t=Ut(),e=function(t){return t};for(var n in null!==c&&(e=He.encryptor(t,0)),Q("<<"),Q("/Producer ("+Me(e("jsPDF "+Kt.version))+")"),ft)ft.hasOwnProperty(n)&&ft[n]&&Q("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+Me(e(ft[n]))+")");Q("/CreationDate ("+Me(e(L))+")"),Q(">>"),Q("endobj")},Be=p.__private__.putCatalog=function(t){var e=(t=t||{}).rootDictionaryObjId||Qt;switch(Ut(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+e+" 0 R"),it||(it="fullwidth"),it){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+it;"%"===n.substr(n.length-1)&&(it=parseInt(it)/100),"number"==typeof it&&Q("/OpenAction [3 0 R /XYZ null null "+C(it)+"]")}switch(ut||(ut="continuous"),ut){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}st&&Q("/PageMode /"+st),Rt.publish("putCatalog"),Q(">>"),Q("endobj")},je=p.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(V+1)),Q("/Root "+V+" 0 R"),Q("/Info "+(V-1)+" 0 R"),null!==c&&Q("/Encrypt "+He.oid+" 0 R"),Q("/ID [ <"+R+"> <"+R+"> ]"),Q(">>")},Ze=p.__private__.putHeader=function(){Q("%PDF-"+d),Q("%\xba\xdf\xac\xe0")},Ue=p.__private__.putXRef=function(){var t="0000000000";Q("xref"),Q("0 "+(V+1)),Q("0000000000 65535 f ");for(var e=1;e<=V;e++)"function"==typeof q[e]?Q((t+q[e]()).slice(-10)+" 00000 n "):void 0!==q[e]?Q((t+q[e]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},Ve=p.__private__.buildDocument=function(){K(),J(G),Rt.publish("buildDocument"),Ze(),ae(),Ee(),Se(),null!==c&&ye(),Fe(),Be();var t=W;return Ue(),je(),Q("startxref"),Q(""+t),Q("%%EOF"),J(X[j]),G.join("\n")},qe=p.__private__.getBlob=function(t){return new Blob([et(t)],{type:"application/pdf"})},Ge=p.output=p.__private__.output=Pe((function(t,e){switch("string"==typeof(e=e||{})?e={filename:e}:e.filename=e.filename||"generated.pdf",t){case void 0:return Ve();case"save":p.save(e.filename);break;case"arraybuffer":return et(Ve());case"blob":return qe(Ve());case"bloburi":case"bloburl":if(void 0!==yt.URL&&"function"==typeof yt.URL.createObjectURL)return yt.URL&&yt.URL.createObjectURL(qe(Ve()))||void 0;xt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",r=Ve();try{n=Et(r)}catch(t){n=Et(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+e.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(yt)){var i="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",o=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';e.pdfObjectUrl&&(i=e.pdfObjectUrl,o="");var a='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+i+'"'+o+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(e)+");<\/script></body></html>",s=yt.open();return null!==s&&s.document.write(a),s}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(yt)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(e.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+e.filename+'" width="500px" height="400px" /></body></html>',u=yt.open();if(null!==u){u.document.write(l);var c=this;u.document.documentElement.querySelector("#pdfViewer").onload=function(){u.document.title=e.filename,u.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(c.output("bloburl"))}}return u}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(yt))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var h='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",e)+'"></iframe></body></html>',f=yt.open();if(null!==f&&(f.document.write(h),f.document.title=e.filename),f||"undefined"==typeof safari)return f;break;case"datauri":case"dataurl":return yt.document.location.href=this.output("datauristring",e);default:return null}})),We=function(t){return!0===Array.isArray(Nt)&&Nt.indexOf(t)>-1};switch(r){case"pt":dt=1;break;case"mm":dt=72/25.4;break;case"cm":dt=72/2.54;break;case"in":dt=72;break;case"px":dt=1==We("px_scaling")?.75:96/72;break;case"pc":case"em":dt=12;break;case"ex":dt=6;break;default:if("number"!=typeof r)throw new Error("Invalid unit: "+r);dt=r}var He=null;F(),O();var Xe=function(t){return null!==c?He.encryptor(t,0):function(t){return t}},Ye=p.__private__.getPageInfo=p.getPageInfo=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Lt[t].objId,pageNumber:t,pageContext:Lt[t]}},$e=p.__private__.getPageInfoByObjId=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var e in Lt)if(Lt[e].objId===t)break;return Ye(e)},Ke=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Lt[j].objId,pageNumber:j,pageContext:Lt[j]}};p.addPage=function(){return Re.apply(this,arguments),this},p.setPage=function(){return Oe.apply(this,arguments),J.call(this,X[j]),this},p.insertPage=function(t){return this.addPage(),this.movePage(j,t),this},p.movePage=function(t,e){var n,r;if(t>e){n=X[t],r=Lt[t];for(var i=t;i>e;i--)X[i]=X[i-1],Lt[i]=Lt[i-1];X[e]=n,Lt[e]=r,this.setPage(e)}else if(t<e){n=X[t],r=Lt[t];for(var o=t;o<e;o++)X[o]=X[o+1],Lt[o]=Lt[o+1];X[e]=n,Lt[e]=r,this.setPage(e)}return this},p.deletePage=function(){return Ne.apply(this,arguments),this},p.__private__.text=p.text=function(t,e,n,r,i){var o,a,s,l,u,c,h,p,d,m=(r=r||{}).scope||this;if("number"==typeof t&&"number"==typeof e&&("string"==typeof n||Array.isArray(n))){var g=n;n=e,e=t,t=g}if(arguments[3]instanceof Ft==0?(s=arguments[4],l=arguments[5],"object"===(0,S.Z)(h=arguments[3])&&null!==h||("string"==typeof s&&(l=s,s=null),"string"==typeof h&&(l=h,h=null),"number"==typeof h&&(s=h,h=null),r={flags:h,angle:s,align:l})):(E("The transform parameter of text() with a Matrix value"),d=i),isNaN(e)||isNaN(n)||null==t)throw new Error("Invalid arguments passed to jsPDF.text");if(0===t.length)return m;var v="",x=!1,b="number"==typeof r.lineHeightFactor?r.lineHeightFactor:fn,w=m.internal.scaleFactor;function I(t){return t=t.split("\t").join(Array(r.TabLen||9).join(" ")),Me(t,h)}function C(t){for(var e,n=t.concat(),r=[],i=n.length;i--;)"string"==typeof(e=n.shift())?r.push(e):Array.isArray(t)&&(1===e.length||void 0===e[1]&&void 0===e[2])?r.push(e[0]):r.push([e[0],e[1],e[2]]);return r}function A(t,e){var n;if("string"==typeof t)n=e(t)[0];else if(Array.isArray(t)){for(var r,i,o=t.concat(),a=[],s=o.length;s--;)"string"==typeof(r=o.shift())?a.push(e(r)[0]):Array.isArray(r)&&"string"==typeof r[0]&&(i=e(r[0],r[1],r[2]),a.push([i[0],i[1],i[2]]));n=a}return n}var T=!1,M=!0;if("string"==typeof t)T=!0;else if(Array.isArray(t)){var L=t.concat();a=[];for(var R,N=L.length;N--;)("string"!=typeof(R=L.shift())||Array.isArray(R)&&"string"!=typeof R[0])&&(M=!1);T=M}if(!1===T)throw new Error('Type of text must be string or Array. "'+t+'" is not recognized.');"string"==typeof t&&(t=t.match(/[\r?\n]/)?t.split(/\r\n|\r|\n/g):[t]);var O=rt/m.internal.scaleFactor,z=O*(b-1);switch(r.baseline){case"bottom":n-=z;break;case"top":n+=O-z;break;case"hanging":n+=O-2*z;break;case"middle":n+=O/2-z}if((c=r.maxWidth||0)>0&&("string"==typeof t?t=m.splitTextToSize(t,c):"[object Array]"===Object.prototype.toString.call(t)&&(t=t.reduce((function(t,e){return t.concat(m.splitTextToSize(e,c))}),[]))),o={text:t,x:e,y:n,options:r,mutex:{pdfEscape:Me,activeFontKey:pt,fonts:_t,activeFontSize:rt}},Rt.publish("preProcessText",o),t=o.text,s=(r=o.options).angle,d instanceof Ft==0&&s&&"number"==typeof s){s*=Math.PI/180,0===r.rotationDirection&&(s=-s),_===y.ADVANCED&&(s=-s);var D=Math.cos(s),F=Math.sin(s);d=new Ft(D,F,-F,D,0,0)}else s&&s instanceof Ft&&(d=s);_!==y.ADVANCED||d||(d=jt),void 0!==(u=r.charSpace||Cn)&&(v+=k(P(u))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(p=r.horizontalScale)&&(v+=k(100*p)+" Tz\n"),r.lang;var B=-1,j=void 0!==r.renderingMode?r.renderingMode:r.stroke,Z=m.internal.getCurrentPageInfo().pageContext;switch(j){case 0:case!1:case"fill":B=0;break;case 1:case!0:case"stroke":B=1;break;case 2:case"fillThenStroke":B=2;break;case 3:case"invisible":B=3;break;case 4:case"fillAndAddForClipping":B=4;break;case 5:case"strokeAndAddPathForClipping":B=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":B=6;break;case 7:case"addToPathForClipping":B=7}var U=void 0!==Z.usedRenderingMode?Z.usedRenderingMode:-1;-1!==B?v+=B+" Tr\n":-1!==U&&(v+="0 Tr\n"),-1!==B&&(Z.usedRenderingMode=B),l=r.align||"left";var V,q=rt*b,G=m.internal.pageSize.getWidth(),W=_t[pt];u=r.charSpace||Cn,c=r.maxWidth||0,h=Object.assign({autoencode:!0,noBOM:!0},r.flags);var H=[];if("[object Array]"===Object.prototype.toString.call(t)){var X;a=C(t),"left"!==l&&(V=a.map((function(t){return m.getStringUnitWidth(t,{font:W,charSpace:u,fontSize:rt,doKerning:!1})*rt/w})));var Y,$=0;if("right"===l){e-=V[0],t=[],N=a.length;for(var K=0;K<N;K++)0===K?(Y=_n(e),X=xn(n)):(Y=P($-V[K]),X=-q),t.push([a[K],Y,X]),$=V[K]}else if("center"===l){e-=V[0]/2,t=[],N=a.length;for(var J=0;J<N;J++)0===J?(Y=_n(e),X=xn(n)):(Y=P(($-V[J])/2),X=-q),t.push([a[J],Y,X]),$=V[J]}else if("left"===l){t=[],N=a.length;for(var tt=0;tt<N;tt++)t.push(a[tt])}else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');t=[],N=a.length,c=0!==c?c:G;for(var et=0;et<N;et++)X=0===et?xn(n):-q,Y=0===et?_n(e):0,et<N-1?H.push(k(P((c-V[et])/(a[et].split(" ").length-1)))):H.push(0),t.push([a[et],Y,X])}}var nt="boolean"==typeof r.R2L?r.R2L:at;!0===nt&&(t=A(t,(function(t,e,n){return[t.split("").reverse().join(""),e,n]}))),o={text:t,x:e,y:n,options:r,mutex:{pdfEscape:Me,activeFontKey:pt,fonts:_t,activeFontSize:rt}},Rt.publish("postProcessText",o),t=o.text,x=o.mutex.isHex||!1;var it=_t[pt].encoding;"WinAnsiEncoding"!==it&&"StandardEncoding"!==it||(t=A(t,(function(t,e,n){return[I(t),e,n]}))),a=C(t),t=[];for(var ot,st,lt,ut=0,ct=1,ht=Array.isArray(a[0])?ct:ut,ft="",dt=function(t,e,n){var i="";return n instanceof Ft?(n="number"==typeof r.angle?Bt(n,new Ft(1,0,0,1,t,e)):Bt(new Ft(1,0,0,1,t,e),n),_===y.ADVANCED&&(n=Bt(new Ft(1,0,0,-1,0,0),n)),i=n.join(" ")+" Tm\n"):i=k(t)+" "+k(e)+" Td\n",i},mt=0;mt<a.length;mt++){switch(ft="",ht){case ct:lt=(x?"<":"(")+a[mt][0]+(x?">":")"),ot=parseFloat(a[mt][1]),st=parseFloat(a[mt][2]);break;case ut:lt=(x?"<":"(")+a[mt]+(x?">":")"),ot=_n(e),st=xn(n)}void 0!==H&&void 0!==H[mt]&&(ft=H[mt]+" Tw\n"),0===mt?t.push(ft+dt(ot,st,d)+lt):ht===ut?t.push(ft+lt):ht===ct&&t.push(ft+dt(ot,st,d)+lt)}t=ht===ut?t.join(" Tj\nT* "):t.join(" Tj\n"),t+=" Tj\n";var gt="BT\n/";return gt+=pt+" "+rt+" Tf\n",gt+=k(rt*b)+" TL\n",gt+=En+"\n",gt+=v,gt+=t,Q(gt+="ET"),f[pt]=!0,m};var Je=p.__private__.clip=p.clip=function(t){return Q("evenodd"===t?"W*":"W"),this};p.clipEvenOdd=function(){return Je("evenodd")},p.__private__.discardPath=p.discardPath=function(){return Q("n"),this};var Qe=p.__private__.isValidStyle=function(t){var e=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(t)&&(e=!0),e};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(t){return Qe(t)&&(u=t),this};var tn=p.__private__.getStyle=p.getStyle=function(t){var e=u;switch(t){case"D":case"S":e="S";break;case"F":e="f";break;case"FD":case"DF":e="B";break;case"f":case"f*":case"B":case"B*":e=t}return e},en=p.close=function(){return Q("h"),this};p.stroke=function(){return Q("S"),this},p.fill=function(t){return nn("f",t),this},p.fillEvenOdd=function(t){return nn("f*",t),this},p.fillStroke=function(t){return nn("B",t),this},p.fillStrokeEvenOdd=function(t){return nn("B*",t),this};var nn=function(t,e){"object"===(0,S.Z)(e)?an(e,t):Q(t)},rn=function(t){null===t||_===y.ADVANCED&&void 0===t||(t=tn(t),Q(t))};function on(t,e,n,r,i){var o=new $t(e||this.boundingBox,n||this.xStep,r||this.yStep,this.gState,i||this.matrix);o.stream=this.stream;var a=t+"$$"+this.cloneIndex+++"$$";return Zt(a,o),o}var an=function(t,e){var n=St[t.key],r=kt[n];if(r instanceof Yt)Q("q"),Q(sn(e)),r.gState&&p.setGState(r.gState),Q(t.matrix.toString()+" cm"),Q("/"+n+" sh"),Q("Q");else if(r instanceof $t){var i=new Ft(1,0,0,-1,0,jn());t.matrix&&(i=i.multiply(t.matrix||jt),n=on.call(r,t.key,t.boundingBox,t.xStep,t.yStep,i).id),Q("q"),Q("/Pattern cs"),Q("/"+n+" scn"),r.gState&&p.setGState(r.gState),Q(e),Q("Q")}},sn=function(t){switch(t){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},ln=p.moveTo=function(t,e){return Q(k(P(t))+" "+k(M(e))+" m"),this},un=p.lineTo=function(t,e){return Q(k(P(t))+" "+k(M(e))+" l"),this},cn=p.curveTo=function(t,e,n,r,i,o){return Q([k(P(t)),k(M(e)),k(P(n)),k(M(r)),k(P(i)),k(M(o)),"c"].join(" ")),this};p.__private__.line=p.line=function(t,e,n,r,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||!Qe(i))throw new Error("Invalid arguments passed to jsPDF.line");return _===y.COMPAT?this.lines([[n-t,r-e]],t,e,[1,1],i||"S"):this.lines([[n-t,r-e]],t,e,[1,1]).stroke()},p.__private__.lines=p.lines=function(t,e,n,r,i,o){var a,s,l,u,c,h,f,p,d,m,g,v;if("number"==typeof t&&(v=n,n=e,e=t,t=v),r=r||[1,1],o=o||!1,isNaN(e)||isNaN(n)||!Array.isArray(t)||!Array.isArray(r)||!Qe(i)||"boolean"!=typeof o)throw new Error("Invalid arguments passed to jsPDF.lines");for(ln(e,n),a=r[0],s=r[1],u=t.length,m=e,g=n,l=0;l<u;l++)2===(c=t[l]).length?(m=c[0]*a+m,g=c[1]*s+g,un(m,g)):(h=c[0]*a+m,f=c[1]*s+g,p=c[2]*a+m,d=c[3]*s+g,m=c[4]*a+m,g=c[5]*s+g,cn(h,f,p,d,m,g));return o&&en(),rn(i),this},p.path=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n.c;switch(n.op){case"m":ln(r[0],r[1]);break;case"l":un(r[0],r[1]);break;case"c":cn.apply(this,r);break;case"h":en()}}return this},p.__private__.rect=p.rect=function(t,e,n,r,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||!Qe(i))throw new Error("Invalid arguments passed to jsPDF.rect");return _===y.COMPAT&&(r=-r),Q([k(P(t)),k(M(e)),k(P(n)),k(P(r)),"re"].join(" ")),rn(i),this},p.__private__.triangle=p.triangle=function(t,e,n,r,i,o,a){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(o)||!Qe(a))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-t,r-e],[i-n,o-r],[t-i,e-o]],t,e,[1,1],a,!0),this},p.__private__.roundedRect=p.roundedRect=function(t,e,n,r,i,o,a){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(o)||!Qe(a))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var s=4/3*(Math.SQRT2-1);return i=Math.min(i,.5*n),o=Math.min(o,.5*r),this.lines([[n-2*i,0],[i*s,0,i,o-o*s,i,o],[0,r-2*o],[0,o*s,-i*s,o,-i,o],[2*i-n,0],[-i*s,0,-i,-o*s,-i,-o],[0,2*o-r],[0,-o*s,i*s,-o,i,-o]],t+i,e,[1,1],a,!0),this},p.__private__.ellipse=p.ellipse=function(t,e,n,r,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||!Qe(i))throw new Error("Invalid arguments passed to jsPDF.ellipse");var o=4/3*(Math.SQRT2-1)*n,a=4/3*(Math.SQRT2-1)*r;return ln(t+n,e),cn(t+n,e-a,t+o,e-r,t,e-r),cn(t-o,e-r,t-n,e-a,t-n,e),cn(t-n,e+a,t-o,e+r,t,e+r),cn(t+o,e+r,t+n,e+a,t+n,e),rn(i),this},p.__private__.circle=p.circle=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||!Qe(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(t,e,n,n,r)},p.setFont=function(t,e,n){return n&&(e=w(e,n)),pt=De(t,e,{disableWarning:!1}),this};var hn=p.__private__.getFont=p.getFont=function(){return _t[De.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var t,e,n={};for(t in bt)if(bt.hasOwnProperty(t))for(e in n[t]=[],bt[t])bt[t].hasOwnProperty(e)&&n[t].push(e);return n},p.addFont=function(t,e,n,r,i){var o=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==o.indexOf(arguments[3])?i=arguments[3]:arguments[3]&&-1==o.indexOf(arguments[3])&&(n=w(n,r)),i=i||"Identity-H",Ce.call(this,t,e,n,i)};var fn,pn=t.lineWidth||.200025,dn=p.__private__.getLineWidth=p.getLineWidth=function(){return pn},mn=p.__private__.setLineWidth=p.setLineWidth=function(t){return pn=t,Q(k(P(t))+" w"),this};p.__private__.setLineDash=Kt.API.setLineDash=Kt.API.setLineDashPattern=function(t,e){if(t=t||[],e=e||0,isNaN(e)||!Array.isArray(t))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return t=t.map((function(t){return k(P(t))})).join(" "),e=k(P(e)),Q("["+t+"] "+e+" d"),this};var gn=p.__private__.getLineHeight=p.getLineHeight=function(){return rt*fn};p.__private__.getLineHeight=p.getLineHeight=function(){return rt*fn};var vn=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(t){return"number"==typeof(t=t||1.15)&&(fn=t),this},yn=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return fn};vn(t.lineHeight);var _n=p.__private__.getHorizontalCoordinate=function(t){return P(t)},xn=p.__private__.getVerticalCoordinate=function(t){return _===y.ADVANCED?t:Lt[j].mediaBox.topRightY-Lt[j].mediaBox.bottomLeftY-P(t)},bn=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(t){return k(_n(t))},wn=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(t){return k(xn(t))},kn=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return ee(kn)},p.__private__.setStrokeColor=p.setDrawColor=function(t,e,n,r){return kn=ne({ch1:t,ch2:e,ch3:n,ch4:r,pdfColorType:"draw",precision:2}),Q(kn),this};var Sn=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return ee(Sn)},p.__private__.setFillColor=p.setFillColor=function(t,e,n,r){return Sn=ne({ch1:t,ch2:e,ch3:n,ch4:r,pdfColorType:"fill",precision:2}),Q(Sn),this};var En=t.textColor||"0 g",In=p.__private__.getTextColor=p.getTextColor=function(){return ee(En)};p.__private__.setTextColor=p.setTextColor=function(t,e,n,r){return En=ne({ch1:t,ch2:e,ch3:n,ch4:r,pdfColorType:"text",precision:3}),this};var Cn=t.charSpace,An=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Cn||0)};p.__private__.setCharSpace=p.setCharSpace=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Cn=t,this};var Pn=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(t){var e=p.CapJoinStyles[t];if(void 0===e)throw new Error("Line cap style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Pn=e,Q(e+" J"),this};var Tn=0;p.__private__.setLineJoin=p.setLineJoin=function(t){var e=p.CapJoinStyles[t];if(void 0===e)throw new Error("Line join style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Tn=e,Q(e+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(t){if(t=t||0,isNaN(t))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(k(P(t))+" M"),this},p.GState=Ht,p.setGState=function(t){(t="string"==typeof t?At[Pt[t]]:Mn(null,t)).equals(Tt)||(Q("/"+t.id+" gs"),Tt=t)};var Mn=function(t,e){if(!t||!Pt[t]){var n=!1;for(var r in At)if(At.hasOwnProperty(r)&&At[r].equals(e)){n=!0;break}if(n)e=At[r];else{var i="GS"+(Object.keys(At).length+1).toString(10);At[i]=e,e.id=i}return t&&(Pt[t]=e.id),Rt.publish("addGState",e),e}};p.addGState=function(t,e){return Mn(t,e),this},p.saveGraphicsState=function(){return Q("q"),wt.push({key:pt,size:rt,color:En}),this},p.restoreGraphicsState=function(){Q("Q");var t=wt.pop();return pt=t.key,rt=t.size,En=t.color,Tt=null,this},p.setCurrentTransformationMatrix=function(t){return Q(t.toString()+" cm"),this},p.comment=function(t){return Q("#"+t),this};var Ln=function(t,e){var n=t||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(t){isNaN(t)||(n=parseFloat(t))}});var r=e||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(t){isNaN(t)||(r=parseFloat(t))}});var i="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return i},set:function(t){i=t.toString()}}),this},Rn=function(t,e,n,r){Ln.call(this,t,e),this.type="rect";var i=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return i},set:function(t){isNaN(t)||(i=parseFloat(t))}});var o=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return o},set:function(t){isNaN(t)||(o=parseFloat(t))}}),this},Nn=function(){this.page=Mt,this.currentPage=j,this.pages=X.slice(0),this.pagesContext=Lt.slice(0),this.x=mt,this.y=gt,this.matrix=vt,this.width=Fn(j),this.height=jn(j),this.outputDestination=$,this.id="",this.objectNumber=-1};Nn.prototype.restore=function(){Mt=this.page,j=this.currentPage,Lt=this.pagesContext,X=this.pages,mt=this.x,gt=this.y,vt=this.matrix,Bn(j,this.width),Zn(j,this.height),$=this.outputDestination};var On=function(t,e,n,r,i){Dt.push(new Nn),Mt=j=0,X=[],mt=t,gt=e,vt=i,Le([n,r])},zn=function(t){if(zt[t])Dt.pop().restore();else{var e=new Nn,n="Xo"+(Object.keys(Ot).length+1).toString(10);e.id=n,zt[t]=n,Ot[n]=e,Rt.publish("addFormObject",e),Dt.pop().restore()}};for(var Dn in p.beginFormObject=function(t,e,n,r,i){return On(t,e,n,r,i),this},p.endFormObject=function(t){return zn(t),this},p.doFormObject=function(t,e){var n=Ot[zt[t]];return Q("q"),Q(e.toString()+" cm"),Q("/"+n.id+" Do"),Q("Q"),this},p.getFormObject=function(t){var e=Ot[zt[t]];return{x:e.x,y:e.y,width:e.width,height:e.height,matrix:e.matrix}},p.save=function(t,e){return t=t||"generated.pdf",(e=e||{}).returnPromise=e.returnPromise||!1,!1===e.returnPromise?(It(qe(Ve()),t),"function"==typeof It.unload&&yt.setTimeout&&setTimeout(It.unload,911),this):new Promise((function(e,n){try{var r=It(qe(Ve()),t);"function"==typeof It.unload&&yt.setTimeout&&setTimeout(It.unload,911),e(r)}catch(t){n(t.message)}}))},Kt.API)Kt.API.hasOwnProperty(Dn)&&("events"===Dn&&Kt.API.events.length?function(t,e){var n,r,i;for(i=e.length-1;-1!==i;i--)n=e[i][0],r=e[i][1],t.subscribe.apply(t,[n].concat("function"==typeof r?[r]:r))}(Rt,Kt.API.events):p[Dn]=Kt.API[Dn]);var Fn=p.getPageWidth=function(t){return(Lt[t=t||j].mediaBox.topRightX-Lt[t].mediaBox.bottomLeftX)/dt},Bn=p.setPageWidth=function(t,e){Lt[t].mediaBox.topRightX=e*dt+Lt[t].mediaBox.bottomLeftX},jn=p.getPageHeight=function(t){return(Lt[t=t||j].mediaBox.topRightY-Lt[t].mediaBox.bottomLeftY)/dt},Zn=p.setPageHeight=function(t,e){Lt[t].mediaBox.topRightY=e*dt+Lt[t].mediaBox.bottomLeftY};return p.internal={pdfEscape:Me,getStyle:tn,getFont:hn,getFontSize:ot,getCharSpace:An,getTextColor:In,getLineHeight:gn,getLineHeightFactor:yn,getLineWidth:dn,write:tt,getHorizontalCoordinate:_n,getVerticalCoordinate:xn,getCoordinateString:bn,getVerticalCoordinateString:wn,collections:{},newObject:Ut,newAdditionalObject:Jt,newObjectDeferred:Vt,newObjectDeferredBegin:Xt,getFilters:re,putStream:ie,events:Rt,scaleFactor:dt,pageSize:{getWidth:function(){return Fn(j)},setWidth:function(t){Bn(j,t)},getHeight:function(){return jn(j)},setHeight:function(t){Zn(j,t)}},encryptionOptions:c,encryption:He,getEncryptor:Xe,output:Ge,getNumberOfPages:ze,pages:X,out:Q,f2:C,f3:A,getPageInfo:Ye,getPageInfoByObjId:$e,getCurrentPageInfo:Ke,getPDFVersion:m,Point:Ln,Rectangle:Rn,Matrix:Ft,hasHotfix:We},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Fn(j)},set:function(t){Bn(j,t)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return jn(j)},set:function(t){Zn(j,t)},enumerable:!0,configurable:!0}),Ae.call(p,nt),pt="F1",Re(i,n),Rt.publish("initialized"),p}qt.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},qt.prototype.toHexString=function(t){return t.split("").map((function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)})).join("")},qt.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},qt.prototype.processOwnerPassword=function(t,e){return Ut(Bt(e).substr(0,5),t)},qt.prototype.encryptor=function(t,e){var n=Bt(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(t){return Ut(n,t)}},Ht.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||(0,S.Z)(t)!==(0,S.Z)(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e))return!1;if(this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return 0===r},Kt.API={events:[]},Kt.version="2.5.1";var Jt=Kt.API,Qt=1,te=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ee=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ne=function(t){return t.toFixed(2)},re=function(t){return t.toFixed(5)};Jt.__acroform__={};var ie=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},oe=function(t){return t*Qt},ae=function(t){var e=new ke,n=De.internal.getHeight(t)||0,r=De.internal.getWidth(t)||0;return e.BBox=[0,0,Number(ne(r)),Number(ne(n))],e},se=Jt.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},le=Jt.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},ue=Jt.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(t&1<<e)?0:1},ce=Jt.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ue(t,e-1)},he=Jt.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return se(t,e-1)},fe=Jt.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return le(t,e-1)},pe=Jt.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],o=t[1],a=t[2],s=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(o+s)||0,l.upperRight_X=n(i+a)||0,l.upperRight_Y=r(o)||0,[Number(ne(l.lowerLeft_X)),Number(ne(l.lowerLeft_Y)),Number(ne(l.upperRight_X)),Number(ne(l.upperRight_Y))]},de=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=me(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+ne(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=ae(t);return o.scope=t.scope,o.stream=e.join("\n"),o}},me=function(t,e){var n=0===t.fontSize?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=")"==(e="("==e.substr(0,1)?e.substr(1):e).substr(e.length-1)?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map((function(t){return t.split("\n")})):i.map((function(t){return[t]}));var o=n,a=De.internal.getHeight(t)||0;a=a<0?-a:a;var s=De.internal.getWidth(t)||0;s=s<0?-s:s;var l=function(e,n,r){if(e+1<i.length){var o=n+" "+i[e+1][0];return ge(o,t,r).width<=s-4}return!1};o++;t:for(;o>0;){e="",o--;var u,c,h=ge("3",t,o).height,f=t.multiline?a-o:(a-h)/2,p=f+=2,d=0,m=0,g=0;if(o<=0){e="(...) Tj\n",e+="% Width of Text: "+ge(e,t,o=12).width+", FieldWidth:"+s+"\n";break}for(var v="",y=0,_=0;_<i.length;_++)if(i.hasOwnProperty(_)){var x=!1;if(1!==i[_].length&&g!==i[_].length-1){if((h+2)*(y+2)+2>a)continue t;v+=i[_][g],x=!0,m=_,_--}else{v=" "==(v+=i[_][g]+" ").substr(v.length-1)?v.substr(0,v.length-1):v;var b=parseInt(_),w=l(b,v,o),k=_>=i.length-1;if(w&&!k){v+=" ",g=0;continue}if(w||k){if(k)m=b;else if(t.multiline&&(h+2)*(y+2)+2>a)continue t}else{if(!t.multiline)continue t;if((h+2)*(y+2)+2>a)continue t;m=b}}for(var S="",E=d;E<=m;E++){var I=i[E];if(t.multiline){if(E===m){S+=I[g]+" ",g=(g+1)%I.length;continue}if(E===d){S+=I[I.length-1]+" ";continue}}S+=I[0]+" "}switch(S=" "==S.substr(S.length-1)?S.substr(0,S.length-1):S,c=ge(S,t,o).width,t.textAlign){case"right":u=s-c-2;break;case"center":u=(s-c)/2;break;default:u=2}e+=ne(u)+" "+ne(p)+" Td\n",e+="("+te(S)+") Tj\n",e+=-ne(u)+" 0 Td\n",p=-(o+2),c=0,d=x?m:m+1,y++,v=""}break}return r.text=e,r.fontSize=o,r},ge=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},ve={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ye=function(t,e){var n={type:"reference",object:t};void 0===e.internal.getPageInfo(t.page).pageContext.annotations.find((function(t){return t.type===n.type&&t.object===n.object}))&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},_e=function(t,e){if(e.scope=t,void 0!==t.internal&&(void 0===t.internal.acroformPlugin||!1===t.internal.acroformPlugin.isInitialized)){if(Ee.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(ve)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Qt=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Se,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",(function(){var e;(e=t).internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})),t.internal.events.subscribe("buildDocument",(function(){!function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var e=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];r.objId=void 0,r.hasAnnotation&&ye(r,t)}}(t)})),t.internal.events.subscribe("putCatalog",(function(){!function(t){if(void 0===t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(t)})),t.internal.events.subscribe("postPutPages",(function(e){!function(t,e){var n=!t;for(var r in t||(e.internal.newObjectDeferredBegin(e.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),e.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),t=t||e.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(t.hasOwnProperty(r)){var i=t[r],o=[],a=i.Rect;if(i.Rect&&(i.Rect=pe(i.Rect,e)),e.internal.newObjectDeferredBegin(i.objId,!0),i.DA=De.createDefaultAppearanceStream(i),"object"===(0,S.Z)(i)&&"function"==typeof i.getKeyValueListForStream&&(o=i.getKeyValueListForStream()),i.Rect=a,i.hasAppearanceStream&&!i.appearanceStreamContent){var s=de(i);o.push({key:"AP",value:"<</N "+s+">>"}),e.internal.acroformPlugin.xForms.push(s)}if(i.appearanceStreamContent){var l="";for(var u in i.appearanceStreamContent)if(i.appearanceStreamContent.hasOwnProperty(u)){var c=i.appearanceStreamContent[u];if(l+="/"+u+" ",l+="<<",Object.keys(c).length>=1||Array.isArray(c)){for(var r in c)if(c.hasOwnProperty(r)){var h=c[r];"function"==typeof h&&(h=h.call(e,i)),l+="/"+r+" "+h+" ",e.internal.acroformPlugin.xForms.indexOf(h)>=0||e.internal.acroformPlugin.xForms.push(h)}}else"function"==typeof(h=c)&&(h=h.call(e,i)),l+="/"+r+" "+h,e.internal.acroformPlugin.xForms.indexOf(h)>=0||e.internal.acroformPlugin.xForms.push(h);l+=">>"}o.push({key:"AP",value:"<<\n"+l+">>"})}e.internal.putStream({additionalKeyValues:o,objectId:i.objId}),e.internal.out("endobj")}n&&function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),"object"===(0,S.Z)(i)&&"function"==typeof i.putStream&&i.putStream(),delete t[r]}}(e.internal.acroformPlugin.xForms,e)}(e,t)})),t.internal.acroformPlugin.isInitialized=!0}},xe=Jt.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(t){return t};if(Array.isArray(t)){for(var i="[",o=0;o<t.length;o++)switch(0!==o&&(i+=" "),(0,S.Z)(t[o])){case"boolean":case"number":case"object":i+=t[o].toString();break;case"string":"/"!==t[o].substr(0,1)?(void 0!==e&&n&&(r=n.internal.getEncryptor(e)),i+="("+te(r(t[o].toString()))+")"):i+=t[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},be=function(t,e,n){var r=function(t){return t};return void 0!==e&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+te(r(t))+")"},we=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};we.prototype.toString=function(){return this.objId+" 0 R"},we.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},we.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter((function(t){return"content"!=t&&"appearanceStreamContent"!=t&&"scope"!=t&&"objId"!=t&&"_"!=t.substring(0,1)}));for(var n in e)if(!1===Object.getOwnPropertyDescriptor(this,e[n]).configurable){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:xe(i,this.objId,this.scope)}):i instanceof we?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):"function"!=typeof i&&t.push({key:r,value:i}))}return t};var ke=function(){we.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){t=e.trim()},get:function(){return t||null}})};ie(ke,we);var Se=function(){we.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var e=function(t){return t};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+te(e(t))+")"}},set:function(e){t=e}})};ie(Se,we);var Ee=function t(){we.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute F supplied.');e=t}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(e,3))},set:function(t){!0===Boolean(t)?this.F=he(e,3):this.F=fe(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute Ff supplied.');n=t}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(t){r=void 0!==t?t:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(t){r[0]=t}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(t){r[1]=t}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(t){r[2]=t}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(t){r[3]=t}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(t){switch(t){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=t;break;default:throw new Error('Invalid value "'+t+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Re)return;o="FieldObject"+t.FieldNum++}var e=function(t){return t};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+te(e(o))+")"},set:function(t){o=t.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(t){o=t}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(t){a=t}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(t){s=t}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(t){l=t}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===u?50/Qt:u},set:function(t){u=t}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(t){c=t}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Re||this instanceof Oe))return be(h,this.objId,this.scope)},set:function(t){t=t.toString(),h=t}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Te==0?be(f,this.objId,this.scope):f},set:function(t){t=t.toString(),f=this instanceof Te==0?"("===t.substr(0,1)?ee(t.substr(1,t.length-2)):ee(t):t}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Te==1?ee(f.substr(1,f.length-1)):f},set:function(t){t=t.toString(),f=this instanceof Te==1?"/"+t:t}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(t){this.V=t}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Te==0?be(p,this.objId,this.scope):p},set:function(t){t=t.toString(),p=this instanceof Te==0?"("===t.substr(0,1)?ee(t.substr(1,t.length-2)):ee(t):t}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Te==1?ee(p.substr(1,p.length-1)):p},set:function(t){t=t.toString(),p=this instanceof Te==1?"/"+t:t}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var d,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(t){t=Boolean(t),m=t}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(d)return d},set:function(t){d=t}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(this.Ff,1))},set:function(t){!0===Boolean(t)?this.Ff=he(this.Ff,1):this.Ff=fe(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(this.Ff,2))},set:function(t){!0===Boolean(t)?this.Ff=he(this.Ff,2):this.Ff=fe(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(this.Ff,3))},set:function(t){!0===Boolean(t)?this.Ff=he(this.Ff,3):this.Ff=fe(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(t){if(-1===[0,1,2].indexOf(t))throw new Error('Invalid value "'+t+'" for attribute Q supplied.');g=t}}),Object.defineProperty(this,"textAlign",{get:function(){var t;switch(g){case 0:default:t="left";break;case 1:t="center";break;case 2:t="right"}return t},configurable:!0,enumerable:!0,set:function(t){switch(t){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};ie(Ee,we);var Ie=function(){Ee.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){t=e}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return xe(e,this.objId,this.scope)},set:function(t){var n,r;r=[],"string"==typeof(n=t)&&(r=function(t,e,n){n||(n=1);for(var r,i=[];r=e.exec(t);)i.push(r[n]);return i}(n,/\((.*?)\)/g)),e=r}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();-1!==e.indexOf(t)&&(e.splice(e.indexOf(t),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(this.Ff,18))},set:function(t){!0===Boolean(t)?this.Ff=he(this.Ff,18):this.Ff=fe(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(this.Ff,19))},set:function(t){!0===this.combo&&(!0===Boolean(t)?this.Ff=he(this.Ff,19):this.Ff=fe(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(this.Ff,20))},set:function(t){!0===Boolean(t)?(this.Ff=he(this.Ff,20),e.sort()):this.Ff=fe(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(this.Ff,22))},set:function(t){!0===Boolean(t)?this.Ff=he(this.Ff,22):this.Ff=fe(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(this.Ff,23))},set:function(t){!0===Boolean(t)?this.Ff=he(this.Ff,23):this.Ff=fe(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(this.Ff,27))},set:function(t){!0===Boolean(t)?this.Ff=he(this.Ff,27):this.Ff=fe(this.Ff,27)}}),this.hasAppearanceStream=!1};ie(Ie,Ee);var Ce=function(){Ie.call(this),this.fontName="helvetica",this.combo=!1};ie(Ce,Ie);var Ae=function(){Ce.call(this),this.combo=!0};ie(Ae,Ce);var Pe=function(){Ae.call(this),this.edit=!0};ie(Pe,Ae);var Te=function(){Ee.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(this.Ff,15))},set:function(t){!0===Boolean(t)?this.Ff=he(this.Ff,15):this.Ff=fe(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(this.Ff,16))},set:function(t){!0===Boolean(t)?this.Ff=he(this.Ff,16):this.Ff=fe(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(this.Ff,17))},set:function(t){!0===Boolean(t)?this.Ff=he(this.Ff,17):this.Ff=fe(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(this.Ff,26))},set:function(t){!0===Boolean(t)?this.Ff=he(this.Ff,26):this.Ff=fe(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(t){return t};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(e).length){var n,r=[];for(n in r.push("<<"),e)r.push("/"+n+" ("+te(t(e[n]))+")");return r.push(">>"),r.join("\n")}},set:function(t){"object"===(0,S.Z)(t)&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){"string"==typeof t&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(e){t="/"+e}})};ie(Te,Ee);var Me=function(){Te.call(this),this.pushButton=!0};ie(Me,Te);var Le=function(){Te.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=void 0!==e?e:[]}})};ie(Le,Te);var Re=function(){var t,e;Ee.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(t){e=t}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(t){return t};this.scope&&(t=this.scope.internal.getEncryptor(this.objId));var e,n=[];for(e in n.push("<<"),r)n.push("/"+e+" ("+te(t(r[e]))+")");return n.push(">>"),n.join("\n")},set:function(t){"object"===(0,S.Z)(t)&&(r=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(t){"string"==typeof t&&(r.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=De.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ie(Re,Ee),Le.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Le.prototype.createOption=function(t){var e=new Re;return e.Parent=this,e.optionName=t,this.Kids.push(e),Fe.call(this.scope,e),e};var Ne=function(){Te.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=De.CheckBox.createAppearanceStream()};ie(Ne,Te);var Oe=function(){Ee.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(this.Ff,13))},set:function(t){!0===Boolean(t)?this.Ff=he(this.Ff,13):this.Ff=fe(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(this.Ff,21))},set:function(t){!0===Boolean(t)?this.Ff=he(this.Ff,21):this.Ff=fe(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(this.Ff,23))},set:function(t){!0===Boolean(t)?this.Ff=he(this.Ff,23):this.Ff=fe(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(this.Ff,24))},set:function(t){!0===Boolean(t)?this.Ff=he(this.Ff,24):this.Ff=fe(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(this.Ff,25))},set:function(t){!0===Boolean(t)?this.Ff=he(this.Ff,25):this.Ff=fe(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(this.Ff,26))},set:function(t){!0===Boolean(t)?this.Ff=he(this.Ff,26):this.Ff=fe(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ie(Oe,Ee);var ze=function(){Oe.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(ce(this.Ff,14))},set:function(t){!0===Boolean(t)?this.Ff=he(this.Ff,14):this.Ff=fe(this.Ff,14)}}),this.password=!0};ie(ze,Oe);var De={CheckBox:{createAppearanceStream:function(){return{N:{On:De.CheckBox.YesNormal},D:{On:De.CheckBox.YesPushDown,Off:De.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=ae(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=me(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+ne(De.internal.getWidth(t))+" "+ne(De.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+ne(o.fontSize)+" Tf "+i),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join("\n"),e},YesNormal:function(t){var e=ae(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],o=De.internal.getHeight(t),a=De.internal.getWidth(t),s=me(t,t.caption);return i.push("1 g"),i.push("0 0 "+ne(a)+" "+ne(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+ne(a-1)+" "+ne(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+ne(s.fontSize)+" Tf "+r),i.push(s.text),i.push("ET"),i.push("Q"),e.stream=i.join("\n"),e},OffPushDown:function(t){var e=ae(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ne(De.internal.getWidth(t))+" "+ne(De.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join("\n"),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:De.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=De.RadioButton.Circle.YesNormal,e.D[t]=De.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=ae(t);e.scope=t.scope;var n=[],r=De.internal.getWidth(t)<=De.internal.getHeight(t)?De.internal.getWidth(t)/4:De.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=De.internal.Bezier_C,o=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+re(De.internal.getWidth(t)/2)+" "+re(De.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e},YesPushDown:function(t){var e=ae(t);e.scope=t.scope;var n=[],r=De.internal.getWidth(t)<=De.internal.getHeight(t)?De.internal.getWidth(t)/4:De.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*De.internal.Bezier_C).toFixed(5)),a=Number((r*De.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+re(De.internal.getWidth(t)/2)+" "+re(De.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+re(De.internal.getWidth(t)/2)+" "+re(De.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e},OffPushDown:function(t){var e=ae(t);e.scope=t.scope;var n=[],r=De.internal.getWidth(t)<=De.internal.getHeight(t)?De.internal.getWidth(t)/4:De.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*De.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+re(De.internal.getWidth(t)/2)+" "+re(De.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:De.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=De.RadioButton.Cross.YesNormal,e.D[t]=De.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=ae(t);e.scope=t.scope;var n=[],r=De.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+ne(De.internal.getWidth(t)-2)+" "+ne(De.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(ne(r.x1.x)+" "+ne(r.x1.y)+" m"),n.push(ne(r.x2.x)+" "+ne(r.x2.y)+" l"),n.push(ne(r.x4.x)+" "+ne(r.x4.y)+" m"),n.push(ne(r.x3.x)+" "+ne(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join("\n"),e},YesPushDown:function(t){var e=ae(t);e.scope=t.scope;var n=De.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+ne(De.internal.getWidth(t))+" "+ne(De.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+ne(De.internal.getWidth(t)-2)+" "+ne(De.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(ne(n.x1.x)+" "+ne(n.x1.y)+" m"),r.push(ne(n.x2.x)+" "+ne(n.x2.y)+" l"),r.push(ne(n.x4.x)+" "+ne(n.x4.y)+" m"),r.push(ne(n.x3.x)+" "+ne(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join("\n"),e},OffPushDown:function(t){var e=ae(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ne(De.internal.getWidth(t))+" "+ne(De.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join("\n"),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};De.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=De.internal.getWidth(t),n=De.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},De.internal.getWidth=function(t){var e=0;return"object"===(0,S.Z)(t)&&(e=oe(t.Rect[2])),e},De.internal.getHeight=function(t){var e=0;return"object"===(0,S.Z)(t)&&(e=oe(t.Rect[3])),e};var Fe=Jt.addField=function(t){if(_e(this,t),!(t instanceof Ee))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Jt.AcroFormChoiceField=Ie,Jt.AcroFormListBox=Ce,Jt.AcroFormComboBox=Ae,Jt.AcroFormEditBox=Pe,Jt.AcroFormButton=Te,Jt.AcroFormPushButton=Me,Jt.AcroFormRadioButton=Le,Jt.AcroFormCheckBox=Ne,Jt.AcroFormTextField=Oe,Jt.AcroFormPasswordField=ze,Jt.AcroFormAppearance=De,Jt.AcroForm={ChoiceField:Ie,ListBox:Ce,ComboBox:Ae,EditBox:Pe,Button:Te,PushButton:Me,RadioButton:Le,CheckBox:Ne,TextField:Oe,PasswordField:ze,Appearance:De},Kt.AcroForm={ChoiceField:Ie,ListBox:Ce,ComboBox:Ae,EditBox:Pe,Button:Te,PushButton:Me,RadioButton:Le,CheckBox:Ne,TextField:Oe,PasswordField:ze,Appearance:De};Kt.AcroForm;function Be(t){return t.reduce((function(t,e,n){return t[e]=n,t}),{})}!function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(t,r){var i,o,a,s,l,u=e;if("RGBA"===(r=r||e)||void 0!==t.data&&t.data instanceof Uint8ClampedArray&&"height"in t&&"width"in t)return"RGBA";if(w(t))for(l in n)for(a=n[l],i=0;i<a.length;i+=1){for(s=!0,o=0;o<a[i].length;o+=1)if(void 0!==a[i][o]&&a[i][o]!==t[o]){s=!1;break}if(!0===s){u=l;break}}else for(l in n)for(a=n[l],i=0;i<a.length;i+=1){for(s=!0,o=0;o<a[i].length;o+=1)if(void 0!==a[i][o]&&a[i][o]!==t.charCodeAt(o)){s=!1;break}if(!0===s){u=l;break}}return u===e&&r!==e&&(u=r),u},i=function t(e){for(var n=this.internal.write,r=this.internal.putStream,i=(0,this.internal.getFilters)();-1!==i.indexOf("FlateEncode");)i.splice(i.indexOf("FlateEncode"),1);e.objectId=this.internal.newObject();var o=[];if(o.push({key:"Type",value:"/XObject"}),o.push({key:"Subtype",value:"/Image"}),o.push({key:"Width",value:e.width}),o.push({key:"Height",value:e.height}),e.colorSpace===g.INDEXED?o.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(e.palette.length/3-1)+" "+("sMask"in e&&void 0!==e.sMask?e.objectId+2:e.objectId+1)+" 0 R]"}):(o.push({key:"ColorSpace",value:"/"+e.colorSpace}),e.colorSpace===g.DEVICE_CMYK&&o.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),o.push({key:"BitsPerComponent",value:e.bitsPerComponent}),"decodeParameters"in e&&void 0!==e.decodeParameters&&o.push({key:"DecodeParms",value:"<<"+e.decodeParameters+">>"}),"transparency"in e&&Array.isArray(e.transparency)){for(var a="",s=0,l=e.transparency.length;s<l;s++)a+=e.transparency[s]+" "+e.transparency[s]+" ";o.push({key:"Mask",value:"["+a+"]"})}void 0!==e.sMask&&o.push({key:"SMask",value:e.objectId+1+" 0 R"});var u=void 0!==e.filter?["/"+e.filter]:void 0;if(r({data:e.data,additionalKeyValues:o,alreadyAppliedFilters:u,objectId:e.objectId}),n("endobj"),"sMask"in e&&void 0!==e.sMask){var c="/Predictor "+e.predictor+" /Colors 1 /BitsPerComponent "+e.bitsPerComponent+" /Columns "+e.width,h={width:e.width,height:e.height,colorSpace:"DeviceGray",bitsPerComponent:e.bitsPerComponent,decodeParameters:c,data:e.sMask};"filter"in e&&(h.filter=e.filter),t.call(this,h)}if(e.colorSpace===g.INDEXED){var f=this.internal.newObject();r({data:E(new Uint8Array(e.palette)),objectId:f}),n("endobj")}},o=function(){var t=this.internal.collections.addImage_images;for(var e in t)i.call(this,t[e])},a=function(){var t,e=this.internal.collections.addImage_images,n=this.internal.write;for(var r in e)n("/I"+(t=e[r]).index,t.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var t=this.internal.collections.addImage_images;return s.call(this),t},u=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(e){return"function"==typeof t["process"+e.toUpperCase()]},h=function(t){return"object"===(0,S.Z)(t)&&1===t.nodeType},f=function(e,n){if("IMG"===e.nodeName&&e.hasAttribute("src")){var r=""+e.getAttribute("src");if(0===r.indexOf("data:image/"))return St(unescape(r).split("base64,").pop());var i=t.loadFile(r,!0);if(void 0!==i)return i}if("CANVAS"===e.nodeName){if(0===e.width||0===e.height)throw new Error("Given canvas must have data. Canvas width: "+e.width+", height: "+e.height);var o;switch(n){case"PNG":o="image/png";break;case"WEBP":o="image/webp";break;default:o="image/jpeg"}return St(e.toDataURL(o,1).split("base64,").pop())}},p=function(t){var e=this.internal.collections.addImage_images;if(e)for(var n in e)if(t===e[n].alias)return e[n]},d=function(t,e,n){return t||e||(t=-96,e=-96),t<0&&(t=-1*n.width*72/t/this.internal.scaleFactor),e<0&&(e=-1*n.height*72/e/this.internal.scaleFactor),0===t&&(t=e*n.width/n.height),0===e&&(e=t*n.height/n.width),[t,e]},m=function(t,e,n,r,i,o){var a=d.call(this,n,r,i),s=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,c=l.call(this);if(n=a[0],r=a[1],c[i.index]=i,o){o*=Math.PI/180;var h=Math.cos(o),f=Math.sin(o),p=function(t){return t.toFixed(4)},m=[p(h),p(f),p(-1*f),p(h),0,0,"cm"]}this.internal.write("q"),o?(this.internal.write([1,"0","0",1,s(t),u(e+r),"cm"].join(" ")),this.internal.write(m.join(" ")),this.internal.write([s(n),"0","0",s(r),"0","0","cm"].join(" "))):this.internal.write([s(n),"0","0",s(r),s(t),u(e+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+i.index+" Do"),this.internal.write("Q")},g=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=t.__addimage__.sHashCode=function(t){var e,n,r=0;if("string"==typeof t)for(n=t.length,e=0;e<n;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;else if(w(t))for(n=t.byteLength/2,e=0;e<n;e++)r=(r<<5)-r+t[e],r|=0;return r},_=t.__addimage__.validateStringAsBase64=function(t){(t=t||"").toString().trim();var e=!0;return 0===t.length&&(e=!1),t.length%4!=0&&(e=!1),!1===/^[A-Za-z0-9+/]+$/.test(t.substr(0,t.length-2))&&(e=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(t.substr(-2))&&(e=!1),e},x=t.__addimage__.extractImageFromDataUrl=function(t){var e=(t=t||"").split("base64,"),n=null;if(2===e.length){var r=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(e[0]);Array.isArray(r)&&(n={mimeType:r[1],charset:r[2],data:e[1]})}return n},b=t.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};t.__addimage__.isArrayBuffer=function(t){return b()&&t instanceof ArrayBuffer};var w=t.__addimage__.isArrayBufferView=function(t){return b()&&"undefined"!=typeof Uint32Array&&(t instanceof Int8Array||t instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)},k=t.__addimage__.binaryStringToUint8Array=function(t){for(var e=t.length,n=new Uint8Array(e),r=0;r<e;r++)n[r]=t.charCodeAt(r);return n},E=t.__addimage__.arrayBufferToBinaryString=function(t){for(var e="",n=w(t)?t:new Uint8Array(t),r=0;r<n.length;r+=8192)e+=String.fromCharCode.apply(null,n.subarray(r,r+8192));return e};t.addImage=function(){var t,n,r,i,o,a,l,u,c;if("number"==typeof arguments[1]?(n=e,r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[4],l=arguments[5],u=arguments[6],c=arguments[7]):(n=arguments[1],r=arguments[2],i=arguments[3],o=arguments[4],a=arguments[5],l=arguments[6],u=arguments[7],c=arguments[8]),"object"===(0,S.Z)(t=arguments[0])&&!h(t)&&"imageData"in t){var f=t;t=f.imageData,n=f.format||n||e,r=f.x||r||0,i=f.y||i||0,o=f.w||f.width||o,a=f.h||f.height||a,l=f.alias||l,u=f.compression||u,c=f.rotation||f.angle||c}var p=this.internal.getFilters();if(void 0===u&&-1!==p.indexOf("FlateEncode")&&(u="SLOW"),isNaN(r)||isNaN(i))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var d=I.call(this,t,n,l,u);return m.call(this,r,i,o,a,d,c),this};var I=function(n,i,o,a){var s,l,d;if("string"==typeof n&&r(n)===e){n=unescape(n);var m=C(n,!1);(""!==m||void 0!==(m=t.loadFile(n,!0)))&&(n=m)}if(h(n)&&(n=f(n,i)),i=r(n,i),!c(i))throw new Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.");if((null==(d=o)||0===d.length)&&(o=function(t){return"string"==typeof t||w(t)?y(t):w(t.data)?y(t.data):null}(n)),(s=p.call(this,o))||(b()&&(n instanceof Uint8Array||"RGBA"===i||(l=n,n=k(n))),s=this["process"+i.toUpperCase()](n,u.call(this),o,function(e){return e&&"string"==typeof e&&(e=e.toUpperCase()),e in t.image_compression?e:v.NONE}(a),l)),!s)throw new Error("An unknown error occurred whilst processing the image.");return s},C=t.__addimage__.convertBase64ToBinaryString=function(t,e){var n;e="boolean"!=typeof e||e;var r,i="";if("string"==typeof t){r=null!==(n=x(t))?n.data:t;try{i=St(r)}catch(t){if(e)throw _(r)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+t.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return i};t.getImageProperties=function(n){var i,o,a="";if(h(n)&&(n=f(n)),"string"==typeof n&&r(n)===e&&(""===(a=C(n,!1))&&(a=t.loadFile(n)||""),n=a),o=r(n),!c(o))throw new Error("addImage does not support files of type '"+o+"', please ensure that a plugin for '"+o+"' support is added.");if(!b()||n instanceof Uint8Array||(n=k(n)),!(i=this["process"+o.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return i.fileType=o,i}}(Kt.API),function(t){var e=function(t){if(void 0!==t&&""!=t)return!0};Kt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(t){for(var n,r,i,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,s=this.internal.getPageInfoByObjId(t.objId),l=t.pageContext.annotations,u=!1,c=0;c<l.length&&!u;c++)switch((n=l[c]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(0!=u){this.internal.write("/Annots [");for(var h=0;h<l.length;h++){n=l[h];var f=this.internal.pdfEscape,p=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var d=this.internal.newAdditionalObject(),m=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(d.objId),v=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(r="/Rect ["+o(n.bounds.x)+" "+a(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y)+"] ")+"/Contents ("+f(g(n.contents))+")",i+=" /Popup "+m.objId+" 0 R",i+=" /P "+s.objId+" 0 R",i+=" /T ("+f(g(v))+") >>",d.content=i;var y=d.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+o(n.bounds.x+30)+" "+a(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+a(n.bounds.y)+"] ")+" /Parent "+y,n.open&&(i+=" /Open true"),i+=" >>",m.content=i,this.internal.write(d.objId,"0 R",m.objId,"0 R");break;case"freetext":r="/Rect ["+o(n.bounds.x)+" "+a(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y+n.bounds.h)+"] ";var _=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+f(p(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var x=this.annotations._nameMap[n.options.name];n.options.pageNumber=x.page,n.options.top=x.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+f(p(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var b=a(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+b+" "+n.options.zoom+"]"}""!=i&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(t){var e=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":e.pageContext.annotations.push(t)}},t.link=function(t,e,n,r,i){var o=this.internal.getCurrentPageInfo(),a=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:a(t),y:s(e),w:a(t+n),h:s(e+r)},options:i,type:"link"})},t.textWithLink=function(t,e,n,r){var i,o,a=this.getTextWidth(t),s=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){o=r.maxWidth;var l=this.splitTextToSize(t,o).length;i=Math.ceil(s*l)}else o=a,i=s;return this.text(t,e,n,r),n+=.2*s,"center"===r.align&&(e-=a/2),"right"===r.align&&(e-=a),this.link(e,n-s,o,i,r),a},t.getTextWidth=function(t){var e=this.internal.getFontSize();return this.getStringUnitWidth(t)*e/this.internal.scaleFactor}}(Kt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(t){return void 0!==e[t.charCodeAt(0)]},a=t.__arabicParser__.isArabicLetter=function(t){return"string"==typeof t&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(t)},s=t.__arabicParser__.isArabicEndLetter=function(t){return a(t)&&o(t)&&e[t.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(t){return a(t)&&i.indexOf(t.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(t){return a(t)&&o(t)&&e[t.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(t){return a(t)&&o(t)&&e[t.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(t){return a(t)&&o(t)&&e[t.charCodeAt(0)].length>=3};var c=t.__arabicParser__.arabicLetterHasMedialForm=function(t){return a(t)&&o(t)&&4==e[t.charCodeAt(0)].length},h=t.__arabicParser__.resolveLigatures=function(t){var e=0,r=n,i="",o=0;for(e=0;e<t.length;e+=1)void 0!==r[t.charCodeAt(e)]?(o++,"number"==typeof(r=r[t.charCodeAt(e)])&&(i+=String.fromCharCode(r),r=n,o=0),e===t.length-1&&(r=n,i+=t.charAt(e-(o-1)),e-=o-1,o=0)):(r=n,i+=t.charAt(e-o),e-=o,o=0);return i};t.__arabicParser__.isArabicDiacritic=function(t){return void 0!==t&&void 0!==r[t.charCodeAt(0)]};var f=t.__arabicParser__.getCorrectForm=function(t,e,n){return a(t)?!1===o(t)?-1:!u(t)||!a(e)&&!a(n)||!a(n)&&s(e)||s(t)&&!a(e)||s(t)&&l(e)||s(t)&&s(e)?0:c(t)&&a(e)&&!s(e)&&a(n)&&u(n)?3:s(t)||!a(n)?1:2:-1},p=function(t){var n=0,r=0,i=0,o="",s="",l="",u=(t=t||"").split("\\s+"),c=[];for(n=0;n<u.length;n+=1){for(c.push(""),r=0;r<u[n].length;r+=1)o=u[n][r],s=u[n][r-1],l=u[n][r+1],a(o)?(i=f(o,s,l),c[n]+=-1!==i?String.fromCharCode(e[o.charCodeAt(0)][i]):o):c[n]+=o;c[n]=h(c[n])}return c.join(" ")},d=t.__arabicParser__.processArabic=t.processArabic=function(){var t,e="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(e)){var r=0;for(n=[],r=0;r<e.length;r+=1)Array.isArray(e[r])?n.push([p(e[r][0]),e[r][1],e[r][2]]):n.push([p(e[r])]);t=n}else t=p(e);return"string"==typeof arguments[0]?t:(arguments[0].text=t,arguments[0])};t.events.push(["preProcessText",d])}(Kt.API),Kt.API.autoPrint=function(t){var e;if("javascript"===((t=t||{}).variant=t.variant||"non-conform",t.variant))this.addJS("print({});");else this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}));return this},function(t){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(e){t=e}});var e=150;Object.defineProperty(this,"width",{get:function(){return e},set:function(t){e=isNaN(t)||!1===Number.isInteger(t)||t<0?150:t,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=e+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(t){n=isNaN(t)||!1===Number.isInteger(t)||t<0?300:t,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(t){r=t}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,e){var n;if("2d"!==(t=t||"2d"))return null;for(n in e)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=e[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Kt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var t=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var e=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(t){n=t}});var r=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return r},set:function(t){r=t}});var i=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return i},set:function(t){i=t}});var o=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return o},set:function(t){o=t}});var a=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return a},set:function(t){a=t}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(t){return r.call(this),this.internal.__cell__.headerFunction="function"==typeof t?t:void 0,this},t.getTextDimensions=function(t,e){r.call(this);var n=(e=e||{}).fontSize||this.getFontSize(),i=e.font||this.getFont(),o=e.scaleFactor||this.internal.scaleFactor,a=0,s=0,l=0,u=this;if(!Array.isArray(t)&&"string"!=typeof t){if("number"!=typeof t)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");t=String(t)}var c=e.maxWidth;c>0?"string"==typeof t?t=this.splitTextToSize(t,c):"[object Array]"===Object.prototype.toString.call(t)&&(t=t.reduce((function(t,e){return t.concat(u.splitTextToSize(e,c))}),[])):t=Array.isArray(t)?t:[t];for(var h=0;h<t.length;h++)a<(l=this.getStringUnitWidth(t[h],{font:i})*n)&&(a=l);return 0!==a&&(s=t.length),{w:a/=o,h:Math.max((s*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/o,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var t=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(t.left,t.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var t;t=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var i=this.internal.__cell__.lastCell,a=this.internal.__cell__.padding,s=this.internal.__cell__.margins||e,l=this.internal.__cell__.tableHeaderRow,u=this.internal.__cell__.printHeaders;return void 0!==i.lineNumber&&(i.lineNumber===t.lineNumber?(t.x=(i.x||0)+(i.width||0),t.y=i.y||0):i.y+i.height+t.height+s.bottom>this.getPageHeight()?(this.cellAddPage(),t.y=s.top,u&&l&&(this.printHeaderRow(t.lineNumber,!0),t.y+=l[0].height)):t.y=i.y+i.height||t.y),void 0!==t.text[0]&&(this.rect(t.x,t.y,t.width,t.height,!0===n?"FD":void 0),"right"===t.align?this.text(t.text,t.x+t.width-a,t.y+a,{align:"right",baseline:"top"}):"center"===t.align?this.text(t.text,t.x+t.width/2,t.y+a,{align:"center",baseline:"top",maxWidth:t.width-a-a}):this.text(t.text,t.x+a,t.y+a,{align:"left",baseline:"top",maxWidth:t.width-a-a})),this.internal.__cell__.lastCell=t,this};t.table=function(t,n,l,u,c){if(r.call(this),!l)throw new Error("No data for PDF table.");var h,f,p,d,m=[],g=[],v=[],y={},_={},x=[],b=[],w=(c=c||{}).autoSize||!1,k=!1!==c.printHeaders,E=c.css&&void 0!==c.css["font-size"]?16*c.css["font-size"]:c.fontSize||12,I=c.margins||Object.assign({width:this.getPageWidth()},e),C="number"==typeof c.padding?c.padding:3,A=c.headerBackgroundColor||"#c8c8c8",P=c.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=E,this.internal.__cell__.padding=C,this.internal.__cell__.headerBackgroundColor=A,this.internal.__cell__.headerTextColor=P,this.setFontSize(E),null==u)g=m=Object.keys(l[0]),v=m.map((function(){return"left"}));else if(Array.isArray(u)&&"object"===(0,S.Z)(u[0]))for(m=u.map((function(t){return t.name})),g=u.map((function(t){return t.prompt||t.name||""})),v=u.map((function(t){return t.align||"left"})),h=0;h<u.length;h+=1)_[u[h].name]=u[h].width*(19.049976/25.4);else Array.isArray(u)&&"string"==typeof u[0]&&(g=m=u,v=m.map((function(){return"left"})));if(w||Array.isArray(u)&&"string"==typeof u[0])for(h=0;h<m.length;h+=1){for(y[d=m[h]]=l.map((function(t){return t[d]})),this.setFont(void 0,"bold"),x.push(this.getTextDimensions(g[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),f=y[d],this.setFont(void 0,"normal"),p=0;p<f.length;p+=1)x.push(this.getTextDimensions(f[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);_[d]=Math.max.apply(null,x)+C+C,x=[]}if(k){var T={};for(h=0;h<m.length;h+=1)T[m[h]]={},T[m[h]].text=g[h],T[m[h]].align=v[h];var M=s.call(this,T,_);b=m.map((function(e){return new o(t,n,_[e],M,T[e].text,void 0,T[e].align)})),this.setTableHeaderRow(b),this.printHeaderRow(1,!1)}var L=u.reduce((function(t,e){return t[e.name]=e.align,t}),{});for(h=0;h<l.length;h+=1){"rowStart"in c&&c.rowStart instanceof Function&&c.rowStart({row:h,data:l[h]},this);var R=s.call(this,l[h],_);for(p=0;p<m.length;p+=1){var N=l[h][m[p]];"cellStart"in c&&c.cellStart instanceof Function&&c.cellStart({row:h,col:p,data:N},this),a.call(this,new o(t,n,_[m[p]],R,N,h+2,L[m[p]]))}}return this.internal.__cell__.table_x=t,this.internal.__cell__.table_y=n,this};var s=function(t,e){var n=this.internal.__cell__.padding,r=this.internal.__cell__.table_font_size,i=this.internal.scaleFactor;return Object.keys(t).map((function(r){var i=t[r];return this.splitTextToSize(i.hasOwnProperty("text")?i.text:i,e[r]-n-n)}),this).map((function(t){return this.getLineHeightFactor()*t.length*r/i+n+n}),this).reduce((function(t,e){return Math.max(t,e)}),0)};t.setTableHeaderRow=function(t){r.call(this),this.internal.__cell__.tableHeaderRow=t},t.printHeaderRow=function(t,e){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var i;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var s=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(s[0],s[1],s[2],s[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],u=0;u<this.internal.__cell__.tableHeaderRow.length;u+=1){i=this.internal.__cell__.tableHeaderRow[u].clone(),e&&(i.y=this.internal.__cell__.margins.top||0,l.push(i)),i.lineNumber=t;var c=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,i),this.setTextColor(c)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(Kt.API);var je={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Ze=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ue=Be(Ze),Ve=[100,200,300,400,500,600,700,800,900],qe=Be(Ve);function Ge(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(t){return je[t=t||"normal"]?t:"normal"}(t.style),r=function(t){return t?"number"==typeof t?t>=100&&t<=900&&t%100==0?t:400:/^\d00$/.test(t)?parseInt(t):"bold"===t?700:400:400}(t.weight),i=function(t){return"number"==typeof Ue[t=t||"normal"]?t:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function We(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var He={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Xe={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Ye(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function $e(t){return t.trimLeft()}function Ke(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function Je(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===e?null:[e[0],t.substring(e[0].length)]}var Qe,tn,en,nn,rn=["times"];!function(t){var e,n,r,i,o,a,s,l,u,c=function(t){return t=t||{},this.isStrokeTransparent=t.isStrokeTransparent||!1,this.strokeOpacity=t.strokeOpacity||1,this.strokeStyle=t.strokeStyle||"#000000",this.fillStyle=t.fillStyle||"#000000",this.isFillTransparent=t.isFillTransparent||!1,this.fillOpacity=t.fillOpacity||1,this.font=t.font||"10px sans-serif",this.textBaseline=t.textBaseline||"alphabetic",this.textAlign=t.textAlign||"left",this.lineWidth=t.lineWidth||1,this.lineJoin=t.lineJoin||"miter",this.lineCap=t.lineCap||"butt",this.path=t.path||[],this.transform=void 0!==t.transform?t.transform.clone():new l,this.globalCompositeOperation=t.globalCompositeOperation||"normal",this.globalAlpha=t.globalAlpha||1,this.clip_path=t.clip_path||[],this.currentPoint=t.currentPoint||new a,this.miterLimit=t.miterLimit||10,this.lastPoint=t.lastPoint||new a,this.lineDashOffset=t.lineDashOffset||0,this.lineDash=t.lineDash||[],this.margin=t.margin||[0,0,0,0],this.prevPageLastElemOffset=t.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof t.ignoreClearRect||t.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,a=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,u=new c}]);var h=function(t){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var e=t;Object.defineProperty(this,"pdf",{get:function(){return e}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(t){n=Boolean(t)}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(t){r=Boolean(t)}});var i=0;Object.defineProperty(this,"posX",{get:function(){return i},set:function(t){isNaN(t)||(i=t)}});var o=0;Object.defineProperty(this,"posY",{get:function(){return o},set:function(t){isNaN(t)||(o=t)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(t){var e;"number"==typeof t?e=[t,t,t,t]:((e=new Array(4))[0]=t[0],e[1]=t.length>=2?t[1]:e[0],e[2]=t.length>=3?t[2]:e[0],e[3]=t.length>=4?t[3]:e[1]),u.margin=e}});var a=!1;Object.defineProperty(this,"autoPaging",{get:function(){return a},set:function(t){a=t}});var s=0;Object.defineProperty(this,"lastBreak",{get:function(){return s},set:function(t){s=t}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(t){l=t}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(t){t instanceof c&&(u=t)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(t){u.path=t}});var h=[];Object.defineProperty(this,"ctxStack",{get:function(){return h},set:function(t){h=t}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(t){var e;e=f(t),this.ctx.fillStyle=e.style,this.ctx.isFillTransparent=0===e.a,this.ctx.fillOpacity=e.a,this.pdf.setFillColor(e.r,e.g,e.b,{a:e.a}),this.pdf.setTextColor(e.r,e.g,e.b,{a:e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(t){var e=f(t);this.ctx.strokeStyle=e.style,this.ctx.isStrokeTransparent=0===e.a,this.ctx.strokeOpacity=e.a,0===e.a?this.pdf.setDrawColor(255,255,255):(e.a,this.pdf.setDrawColor(e.r,e.g,e.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(t){-1!==["butt","round","square"].indexOf(t)&&(this.ctx.lineCap=t,this.pdf.setLineCap(t))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(t){isNaN(t)||(this.ctx.lineWidth=t,this.pdf.setLineWidth(t))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(t){-1!==["bevel","round","miter"].indexOf(t)&&(this.ctx.lineJoin=t,this.pdf.setLineJoin(t))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(t){isNaN(t)||(this.ctx.miterLimit=t,this.pdf.setMiterLimit(t))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(t){this.ctx.textBaseline=t}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(t){-1!==["right","end","center","left","start"].indexOf(t)&&(this.ctx.textAlign=t)}});var p=null;function d(t,e){if(null===p){var n=function(t){var e=[];return Object.keys(t).forEach((function(n){t[n].forEach((function(t){var r=null;switch(t){case"bold":r={family:n,weight:"bold"};break;case"italic":r={family:n,style:"italic"};break;case"bolditalic":r={family:n,weight:"bold",style:"italic"};break;case"":case"normal":r={family:n}}null!==r&&(r.ref={name:n,style:t},e.push(r))}))})),e}(t.getFontList());p=function(t){for(var e={},n=0;n<t.length;++n){var r=Ge(t[n]),i=r.family,o=r.stretch,a=r.style,s=r.weight;e[i]=e[i]||{},e[i][o]=e[i][o]||{},e[i][o][a]=e[i][o][a]||{},e[i][o][a][s]=r}return e}(n.concat(e))}return p}var m=null;Object.defineProperty(this,"fontFaces",{get:function(){return m},set:function(t){p=null,m=t}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(t){var e;if(this.ctx.font=t,null!==(e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(t))){var n=e[1],r=(e[2],e[3]),i=e[4],o=(e[5],e[6]),a=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(i)[2];i="px"===a?Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor):"em"===a?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(i);var s=function(t){var e,n,r=[],i=t.trim();if(""===i)return rn;if(i in Xe)return[Xe[i]];for(;""!==i;){switch(n=null,e=(i=$e(i)).charAt(0)){case'"':case"'":n=Ke(i.substring(1),e);break;default:n=Je(i)}if(null===n)return rn;if(r.push(n[0]),""!==(i=$e(n[1]))&&","!==i.charAt(0))return rn;i=i.replace(/^,/,"")}return r}(o);if(this.fontFaces){var l=function(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},He,n.genericFontFamilies||{}),o=null,a=null,s=0;s<e.length;++s)if(i[(o=Ge(e[s])).family]&&(o.family=i[o.family]),t.hasOwnProperty(o.family)){a=t[o.family];break}if(!(a=a||t[r]))throw new Error("Could not find a font-family for the rule '"+Ye(o)+"' and default family '"+r+"'.");if(a=function(t,e){if(e[t])return e[t];var n=Ue[t],r=n<=Ue.normal?-1:1,i=We(e,Ze,n,r);if(!i)throw new Error("Could not find a matching font-stretch value for "+t);return i}(o.stretch,a),a=function(t,e){if(e[t])return e[t];for(var n=je[t],r=0;r<n.length;++r)if(e[n[r]])return e[n[r]];throw new Error("Could not find a matching font-style for "+t)}(o.style,a),!(a=function(t,e){if(e[t])return e[t];if(400===t&&e[500])return e[500];if(500===t&&e[400])return e[400];var n=qe[t],r=We(e,Ve,n,t<400?-1:1);if(!r)throw new Error("Could not find a matching font-weight for value "+t);return r}(o.weight,a)))throw new Error("Failed to resolve a font for the rule '"+Ye(o)+"'.");return a}(d(this.pdf,this.fontFaces),s.map((function(t){return{family:t,stretch:"normal",weight:r,style:n}})));this.pdf.setFont(l.ref.name,l.ref.style)}else{var u="";("bold"===r||parseInt(r,10)>=700||"bold"===n)&&(u="bold"),"italic"===n&&(u+="italic"),0===u.length&&(u="normal");for(var c="",h={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},f=0;f<s.length;f++){if(void 0!==this.pdf.internal.getFont(s[f],u,{noFallback:!0,disableWarning:!0})){c=s[f];break}if("bolditalic"===u&&void 0!==this.pdf.internal.getFont(s[f],"bold",{noFallback:!0,disableWarning:!0}))c=s[f],u="bold";else if(void 0!==this.pdf.internal.getFont(s[f],"normal",{noFallback:!0,disableWarning:!0})){c=s[f],u="normal";break}}if(""===c)for(var p=0;p<s.length;p++)if(h[s[p]]){c=h[s[p]];break}c=""===c?"Times":c,this.pdf.setFont(c,u)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(t){this.ctx.globalCompositeOperation=t}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(t){this.ctx.globalAlpha=t}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(t){this.ctx.lineDashOffset=t,F.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(t){this.ctx.lineDash=t,F.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(t){this.ctx.ignoreClearRect=Boolean(t)}})};h.prototype.setLineDash=function(t){this.lineDash=t},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){x.call(this,"fill",!1)},h.prototype.stroke=function(){x.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(t,e){if(isNaN(t)||isNaN(e))throw xt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new a(t,e));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new a(t,e)},h.prototype.closePath=function(){var t=new a(0,0),e=0;for(e=this.path.length-1;-1!==e;e--)if("begin"===this.path[e].type&&"object"===(0,S.Z)(this.path[e+1])&&"number"==typeof this.path[e+1].x){t=new a(this.path[e+1].x,this.path[e+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(t.x,t.y)},h.prototype.lineTo=function(t,e){if(isNaN(t)||isNaN(e))throw xt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new a(t,e));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new a(n.x,n.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),x.call(this,null,!0)},h.prototype.quadraticCurveTo=function(t,e,n,r){if(isNaN(n)||isNaN(r)||isNaN(t)||isNaN(e))throw xt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var i=this.ctx.transform.applyToPoint(new a(n,r)),o=this.ctx.transform.applyToPoint(new a(t,e));this.path.push({type:"qct",x1:o.x,y1:o.y,x:i.x,y:i.y}),this.ctx.lastPoint=new a(i.x,i.y)},h.prototype.bezierCurveTo=function(t,e,n,r,i,o){if(isNaN(i)||isNaN(o)||isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw xt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var s=this.ctx.transform.applyToPoint(new a(i,o)),l=this.ctx.transform.applyToPoint(new a(t,e)),u=this.ctx.transform.applyToPoint(new a(n,r));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:u.x,y2:u.y,x:s.x,y:s.y}),this.ctx.lastPoint=new a(s.x,s.y)},h.prototype.arc=function(t,e,n,r,i,o){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i))throw xt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(o=Boolean(o),!this.ctx.transform.isIdentity){var s=this.ctx.transform.applyToPoint(new a(t,e));t=s.x,e=s.y;var l=this.ctx.transform.applyToPoint(new a(0,n)),u=this.ctx.transform.applyToPoint(new a(0,0));n=Math.sqrt(Math.pow(l.x-u.x,2)+Math.pow(l.y-u.y,2))}Math.abs(i-r)>=2*Math.PI&&(r=0,i=2*Math.PI),this.path.push({type:"arc",x:t,y:e,radius:n,startAngle:r,endAngle:i,counterclockwise:o})},h.prototype.arcTo=function(t,e,n,r,i){throw new Error("arcTo not implemented.")},h.prototype.rect=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw xt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+r),this.lineTo(t,e+r),this.lineTo(t,e),this.lineTo(t+n,e),this.lineTo(t,e)},h.prototype.fillRect=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw xt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var i={};"butt"!==this.lineCap&&(i.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(i.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(t,e,n,r),this.fill(),i.hasOwnProperty("lineCap")&&(this.lineCap=i.lineCap),i.hasOwnProperty("lineJoin")&&(this.lineJoin=i.lineJoin)}},h.prototype.strokeRect=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw xt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");d.call(this)||(this.beginPath(),this.rect(t,e,n,r),this.stroke())},h.prototype.clearRect=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw xt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(t,e,n,r))},h.prototype.save=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(e),t){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},h.prototype.restore=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(e),t&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(t){var e,n,r,i;if(!0===t.isCanvasGradient&&(t=t.getColor()),!t)return{r:0,g:0,b:0,a:0,style:t};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(t))e=0,n=0,r=0,i=0;else{var o=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(t);if(null!==o)e=parseInt(o[1]),n=parseInt(o[2]),r=parseInt(o[3]),i=1;else if(null!==(o=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(t)))e=parseInt(o[1]),n=parseInt(o[2]),r=parseInt(o[3]),i=parseFloat(o[4]);else{if(i=1,"string"==typeof t&&"#"!==t.charAt(0)){var a=new Ct(t);t=a.ok?a.toHex():"#000000"}4===t.length?(e=t.substring(1,2),e+=e,n=t.substring(2,3),n+=n,r=t.substring(3,4),r+=r):(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7)),e=parseInt(e,16),n=parseInt(n,16),r=parseInt(r,16)}}return{r:e,g:n,b:r,a:i,style:t}},p=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},d=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};h.prototype.fillText=function(t,e,n,r){if(isNaN(e)||isNaN(n)||"string"!=typeof t)throw xt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!p.call(this)){var i=O(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;P.call(this,{text:t,x:e,y:n,scale:o,angle:i,align:this.textAlign,maxWidth:r})}},h.prototype.strokeText=function(t,e,n,r){if(isNaN(e)||isNaN(n)||"string"!=typeof t)throw xt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!d.call(this)){r=isNaN(r)?void 0:r;var i=O(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;P.call(this,{text:t,x:e,y:n,scale:o,renderingMode:"stroke",angle:i,align:this.textAlign,maxWidth:r})}},h.prototype.measureText=function(t){if("string"!=typeof t)throw xt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var e=this.pdf,n=this.pdf.internal.scaleFactor,r=e.internal.getFontSize(),i=e.getStringUnitWidth(t)*r/e.internal.scaleFactor,o=function(t){var e=(t=t||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return e}}),this};return new o({width:i*=Math.round(96*n/72*1e4)/1e4})},h.prototype.scale=function(t,e){if(isNaN(t)||isNaN(e))throw xt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new l(t,0,0,e,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.rotate=function(t){if(isNaN(t))throw xt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var e=new l(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0);this.ctx.transform=this.ctx.transform.multiply(e)},h.prototype.translate=function(t,e){if(isNaN(t)||isNaN(e))throw xt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new l(1,0,0,1,t,e);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.transform=function(t,e,n,r,i,o){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(o))throw xt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var a=new l(t,e,n,r,i,o);this.ctx.transform=this.ctx.transform.multiply(a)},h.prototype.setTransform=function(t,e,n,r,i,o){t=isNaN(t)?1:t,e=isNaN(e)?0:e,n=isNaN(n)?0:n,r=isNaN(r)?1:r,i=isNaN(i)?0:i,o=isNaN(o)?0:o,this.ctx.transform=new l(t,e,n,r,i,o)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(t,e,n,r,i,o,a,u,c){var h=this.pdf.getImageProperties(t),f=1,p=1,d=1,v=1;void 0!==r&&void 0!==u&&(d=u/r,v=c/i,f=h.width/r*u/r,p=h.height/i*c/i),void 0===o&&(o=e,a=n,e=0,n=0),void 0!==r&&void 0===u&&(u=r,c=i),void 0===r&&void 0===u&&(u=h.width,c=h.height);for(var x,w=this.ctx.transform.decompose(),k=O(w.rotate.shx),S=new l,E=(S=(S=(S=S.multiply(w.translate)).multiply(w.skew)).multiply(w.scale)).applyToRectangle(new s(o-e*d,a-n*v,r*f,i*p)),I=g.call(this,E),C=[],A=0;A<I.length;A+=1)-1===C.indexOf(I[A])&&C.push(I[A]);if(_(C),this.autoPaging)for(var P=C[0],T=C[C.length-1],M=P;M<T+1;M++){this.pdf.setPage(M);var L=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],R=1===M?this.posY+this.margin[0]:this.margin[0],N=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],z=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],D=1===M?0:N+(M-2)*z;if(0!==this.ctx.clip_path.length){var F=this.path;x=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(x,this.posX+this.margin[3],-D+R+this.ctx.prevPageLastElemOffset),b.call(this,"fill",!0),this.path=F}var B=JSON.parse(JSON.stringify(E));B=y([B],this.posX+this.margin[3],-D+R+this.ctx.prevPageLastElemOffset)[0];var j=(M>P||M<T)&&m.call(this);j&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],L,z,null).clip().discardPath()),this.pdf.addImage(t,"JPEG",B.x,B.y,B.w,B.h,null,null,k),j&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(t,"JPEG",E.x,E.y,E.w,E.h,null,null,k)};var g=function(t,e,n){var r=[];e=e||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var i=this.posY+this.ctx.prevPageLastElemOffset;switch(t.type){default:case"mt":case"lt":r.push(Math.floor((t.y+i)/n)+1);break;case"arc":r.push(Math.floor((t.y+i-t.radius)/n)+1),r.push(Math.floor((t.y+i+t.radius)/n)+1);break;case"qct":var o=z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x,t.y);r.push(Math.floor((o.y+i)/n)+1),r.push(Math.floor((o.y+o.h+i)/n)+1);break;case"bct":var a=D(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x2,t.y2,t.x,t.y);r.push(Math.floor((a.y+i)/n)+1),r.push(Math.floor((a.y+a.h+i)/n)+1);break;case"rect":r.push(Math.floor((t.y+i)/n)+1),r.push(Math.floor((t.y+t.h+i)/n)+1)}for(var s=0;s<r.length;s+=1)for(;this.pdf.internal.getNumberOfPages()<r[s];)v.call(this);return r},v=function(){var t=this.fillStyle,e=this.strokeStyle,n=this.font,r=this.lineCap,i=this.lineWidth,o=this.lineJoin;this.pdf.addPage(),this.fillStyle=t,this.strokeStyle=e,this.font=n,this.lineCap=r,this.lineWidth=i,this.lineJoin=o},y=function(t,e,n){for(var r=0;r<t.length;r++)switch(t[r].type){case"bct":t[r].x2+=e,t[r].y2+=n;case"qct":t[r].x1+=e,t[r].y1+=n;default:t[r].x+=e,t[r].y+=n}return t},_=function(t){return t.sort((function(t,e){return t-e}))},x=function(t,e){for(var n,r,i=this.fillStyle,o=this.strokeStyle,a=this.lineCap,s=this.lineWidth,l=Math.abs(s*this.ctx.transform.scaleX),u=this.lineJoin,c=JSON.parse(JSON.stringify(this.path)),h=JSON.parse(JSON.stringify(this.path)),f=[],p=0;p<h.length;p++)if(void 0!==h[p].x)for(var d=g.call(this,h[p]),x=0;x<d.length;x+=1)-1===f.indexOf(d[x])&&f.push(d[x]);for(var w=0;w<f.length;w++)for(;this.pdf.internal.getNumberOfPages()<f[w];)v.call(this);if(_(f),this.autoPaging)for(var k=f[0],S=f[f.length-1],E=k;E<S+1;E++){this.pdf.setPage(E),this.fillStyle=i,this.strokeStyle=o,this.lineCap=a,this.lineWidth=l,this.lineJoin=u;var I=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],C=1===E?this.posY+this.margin[0]:this.margin[0],A=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],P=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],T=1===E?0:A+(E-2)*P;if(0!==this.ctx.clip_path.length){var M=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(n,this.posX+this.margin[3],-T+C+this.ctx.prevPageLastElemOffset),b.call(this,t,!0),this.path=M}if(r=JSON.parse(JSON.stringify(c)),this.path=y(r,this.posX+this.margin[3],-T+C+this.ctx.prevPageLastElemOffset),!1===e||0===E){var L=(E>k||E<S)&&m.call(this);L&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],I,P,null).clip().discardPath()),b.call(this,t,e),L&&this.pdf.restoreGraphicsState()}this.lineWidth=s}else this.lineWidth=l,b.call(this,t,e),this.lineWidth=s;this.path=c},b=function(t,e){if(("stroke"!==t||e||!d.call(this))&&("stroke"===t||e||!p.call(this))){for(var n,r,i=[],o=this.path,a=0;a<o.length;a++){var s=o[a];switch(s.type){case"begin":i.push({begin:!0});break;case"close":i.push({close:!0});break;case"mt":i.push({start:s,deltas:[],abs:[]});break;case"lt":var l=i.length;if(o[a-1]&&!isNaN(o[a-1].x)&&(n=[s.x-o[a-1].x,s.y-o[a-1].y],l>0))for(;l>=0;l--)if(!0!==i[l-1].close&&!0!==i[l-1].begin){i[l-1].deltas.push(n),i[l-1].abs.push(s);break}break;case"bct":n=[s.x1-o[a-1].x,s.y1-o[a-1].y,s.x2-o[a-1].x,s.y2-o[a-1].y,s.x-o[a-1].x,s.y-o[a-1].y],i[i.length-1].deltas.push(n);break;case"qct":var u=o[a-1].x+2/3*(s.x1-o[a-1].x),c=o[a-1].y+2/3*(s.y1-o[a-1].y),h=s.x+2/3*(s.x1-s.x),f=s.y+2/3*(s.y1-s.y),m=s.x,g=s.y;n=[u-o[a-1].x,c-o[a-1].y,h-o[a-1].x,f-o[a-1].y,m-o[a-1].x,g-o[a-1].y],i[i.length-1].deltas.push(n);break;case"arc":i.push({deltas:[],abs:[],arc:!0}),Array.isArray(i[i.length-1].abs)&&i[i.length-1].abs.push(s)}}r=e?null:"stroke"===t?"stroke":"fill";for(var v=!1,y=0;y<i.length;y++)if(i[y].arc)for(var _=i[y].abs,x=0;x<_.length;x++){var b=_[x];"arc"===b.type?E.call(this,b.x,b.y,b.radius,b.startAngle,b.endAngle,b.counterclockwise,void 0,e,!v):T.call(this,b.x,b.y),v=!0}else if(!0===i[y].close)this.pdf.internal.out("h"),v=!1;else if(!0!==i[y].begin){var w=i[y].start.x,k=i[y].start.y;M.call(this,i[y].deltas,w,k),v=!0}r&&I.call(this,r),e&&C.call(this)}},w=function(t){var e=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=e*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return t-n;case"top":return t+e-n;case"hanging":return t+e-2*n;case"middle":return t+e/2-n;default:return t}},k=function(t){return t+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var t=function(){};return t.colorStops=[],t.addColorStop=function(t,e){this.colorStops.push([t,e])},t.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},t.isCanvasGradient=!0,t},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(t,e,n,r,i,o,a,s,l){for(var u=R.call(this,n,r,i,o),c=0;c<u.length;c++){var h=u[c];0===c&&(l?A.call(this,h.x1+t,h.y1+e):T.call(this,h.x1+t,h.y1+e)),L.call(this,t,e,h.x2,h.y2,h.x3,h.y3,h.x4,h.y4)}s?C.call(this):I.call(this,a)},I=function(t){switch(t){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},C=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(t,e){this.pdf.internal.out(n(t)+" "+r(e)+" m")},P=function(t){var e;switch(t.align){case"right":case"end":e="right";break;case"center":e="center";break;default:e="left"}var n=this.pdf.getTextDimensions(t.text),r=w.call(this,t.y),i=k.call(this,r)-n.h,o=this.ctx.transform.applyToPoint(new a(t.x,r)),u=this.ctx.transform.decompose(),c=new l;c=(c=(c=c.multiply(u.translate)).multiply(u.skew)).multiply(u.scale);for(var h,f,p,d=this.ctx.transform.applyToRectangle(new s(t.x,r,n.w,n.h)),v=c.applyToRectangle(new s(t.x,i,n.w,n.h)),x=g.call(this,v),S=[],E=0;E<x.length;E+=1)-1===S.indexOf(x[E])&&S.push(x[E]);if(_(S),this.autoPaging)for(var I=S[0],C=S[S.length-1],A=I;A<C+1;A++){this.pdf.setPage(A);var P=1===A?this.posY+this.margin[0]:this.margin[0],T=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],M=this.pdf.internal.pageSize.height-this.margin[2],L=M-this.margin[0],R=this.pdf.internal.pageSize.width-this.margin[1],N=R-this.margin[3],O=1===A?0:T+(A-2)*L;if(0!==this.ctx.clip_path.length){var z=this.path;h=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(h,this.posX+this.margin[3],-1*O+P),b.call(this,"fill",!0),this.path=z}var D=y([JSON.parse(JSON.stringify(v))],this.posX+this.margin[3],-O+P+this.ctx.prevPageLastElemOffset)[0];t.scale>=.01&&(f=this.pdf.internal.getFontSize(),this.pdf.setFontSize(f*t.scale),p=this.lineWidth,this.lineWidth=p*t.scale);var F="text"!==this.autoPaging;if(F||D.y+D.h<=M){if(F||D.y>=P&&D.x<=R){var B=F?t.text:this.pdf.splitTextToSize(t.text,t.maxWidth||R-D.x)[0],j=y([JSON.parse(JSON.stringify(d))],this.posX+this.margin[3],-O+P+this.ctx.prevPageLastElemOffset)[0],Z=F&&(A>I||A<C)&&m.call(this);Z&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],N,L,null).clip().discardPath()),this.pdf.text(B,j.x,j.y,{angle:t.angle,align:e,renderingMode:t.renderingMode}),Z&&this.pdf.restoreGraphicsState()}}else D.y<M&&(this.ctx.prevPageLastElemOffset+=M-D.y);t.scale>=.01&&(this.pdf.setFontSize(f),this.lineWidth=p)}else t.scale>=.01&&(f=this.pdf.internal.getFontSize(),this.pdf.setFontSize(f*t.scale),p=this.lineWidth,this.lineWidth=p*t.scale),this.pdf.text(t.text,o.x+this.posX,o.y+this.posY,{angle:t.angle,align:e,renderingMode:t.renderingMode,maxWidth:t.maxWidth}),t.scale>=.01&&(this.pdf.setFontSize(f),this.lineWidth=p)},T=function(t,e,i,o){i=i||0,o=o||0,this.pdf.internal.out(n(t+i)+" "+r(e+o)+" l")},M=function(t,e,n){return this.pdf.lines(t,e,n,null,null)},L=function(t,n,r,a,s,l,u,c){this.pdf.internal.out([e(i(r+t)),e(o(a+n)),e(i(s+t)),e(o(l+n)),e(i(u+t)),e(o(c+n)),"c"].join(" "))},R=function(t,e,n,r){for(var i=2*Math.PI,o=Math.PI/2;e>n;)e-=i;var a=Math.abs(n-e);a<i&&r&&(a=i-a);for(var s=[],l=r?-1:1,u=e;a>1e-5;){var c=u+l*Math.min(a,o);s.push(N.call(this,t,u,c)),a-=Math.abs(c-u),u=c}return s},N=function(t,e,n){var r=(n-e)/2,i=t*Math.cos(r),o=t*Math.sin(r),a=i,s=-o,l=a*a+s*s,u=l+a*i+s*o,c=4/3*(Math.sqrt(2*l*u)-u)/(a*o-s*i),h=a-c*s,f=s+c*a,p=h,d=-f,m=r+e,g=Math.cos(m),v=Math.sin(m);return{x1:t*Math.cos(e),y1:t*Math.sin(e),x2:h*g-f*v,y2:h*v+f*g,x3:p*g-d*v,y3:p*v+d*g,x4:t*Math.cos(n),y4:t*Math.sin(n)}},O=function(t){return 180*t/Math.PI},z=function(t,e,n,r,i,o){var a=t+.5*(n-t),l=e+.5*(r-e),u=i+.5*(n-i),c=o+.5*(r-o),h=Math.min(t,i,a,u),f=Math.max(t,i,a,u),p=Math.min(e,o,l,c),d=Math.max(e,o,l,c);return new s(h,p,f-h,d-p)},D=function(t,e,n,r,i,o,a,l){var u,c,h,f,p,d,m,g,v,y,_,x,b,w,k=n-t,S=r-e,E=i-n,I=o-r,C=a-i,A=l-o;for(c=0;c<41;c++)v=(m=(h=t+(u=c/40)*k)+u*((p=n+u*E)-h))+u*(p+u*(i+u*C-p)-m),y=(g=(f=e+u*S)+u*((d=r+u*I)-f))+u*(d+u*(o+u*A-d)-g),0==c?(_=v,x=y,b=v,w=y):(_=Math.min(_,v),x=Math.min(x,y),b=Math.max(b,v),w=Math.max(w,y));return new s(Math.round(_),Math.round(x),Math.round(b-_),Math.round(w-x))},F=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var t,e,n=(t=this.ctx.lineDash,e=this.ctx.lineDashOffset,JSON.stringify({lineDash:t,lineDashOffset:e}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(Kt.API),function(t){var e=function(t){var e,n,r,i,o,a,s,l,u,c;for(/[^\x00-\xFF]/.test(t),n=[],r=0,i=(t+=e="\0\0\0\0".slice(t.length%4||4)).length;i>r;r+=4)0!==(o=(t.charCodeAt(r)<<24)+(t.charCodeAt(r+1)<<16)+(t.charCodeAt(r+2)<<8)+t.charCodeAt(r+3))?(a=(o=((o=((o=((o=(o-(c=o%85))/85)-(u=o%85))/85)-(l=o%85))/85)-(s=o%85))/85)%85,n.push(a+33,s+33,l+33,u+33,c+33)):n.push(122);return function(t,e){for(var n=e;n>0;n--)t.pop()}(n,e.length),String.fromCharCode.apply(String,n)+"~>"},n=function(t){var e,n,r,i,o,a=String,s="length",l=255,u="charCodeAt",c="slice",h="replace";for(t[c](-2),t=t[c](0,-2)[h](/\s/g,"")[h]("z","!!!!!"),r=[],i=0,o=(t+=e="uuuuu"[c](t[s]%5||5))[s];o>i;i+=5)n=52200625*(t[u](i)-33)+614125*(t[u](i+1)-33)+7225*(t[u](i+2)-33)+85*(t[u](i+3)-33)+(t[u](i+4)-33),r.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(t,e){for(var n=e;n>0;n--)t.pop()}(r,e[s]),a.fromCharCode.apply(a,r)},r=function(t){var e=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(t=t.replace(/\s/g,"")).indexOf(">")&&(t=t.substr(0,t.indexOf(">"))),t.length%2&&(t+="0"),!1===e.test(t))return"";for(var n="",r=0;r<t.length;r+=2)n+=String.fromCharCode("0x"+(t[r]+t[r+1]));return n},i=function(t){for(var e=new Uint8Array(t.length),n=t.length;n--;)e[n]=t.charCodeAt(n);return(e=gt(e)).reduce((function(t,e){return t+String.fromCharCode(e)}),"")};t.processDataByFilters=function(t,o){var a=0,s=t||"",l=[];for("string"==typeof(o=o||[])&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":s=n(s),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":s=e(s),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":s=r(s),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":s=s.split("").map((function(t){return("0"+t.charCodeAt().toString(16)).slice(-2)})).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":s=i(s),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:s,reverseChain:l.reverse().join(" ")}}}(Kt.API),(nn=Kt.API).loadFile=function(t,e,n){return function(t,e,n){e=!1!==e,n="function"==typeof n?n:function(){};var r=void 0;try{r=function(t,e,n){var r=new XMLHttpRequest,i=0,o=function(t){var e=t.length,n=[],r=String.fromCharCode;for(i=0;i<e;i+=1)n.push(r(255&t.charCodeAt(i)));return n.join("")};if(r.open("GET",t,!e),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===e&&(r.onload=function(){200===r.status?n(o(this.responseText)):n(void 0)}),r.send(null),e&&200===r.status)return o(r.responseText)}(t,e,n)}catch(t){}return r}(t,e,n)},nn.loadImageFile=nn.loadFile,function(t){function e(){return(yt.html2canvas?Promise.resolve(yt.html2canvas):n.e(498).then(n.t.bind(n,5498,23))).catch((function(t){return Promise.reject(new Error("Could not load html2canvas: "+t))})).then((function(t){return t.default?t.default:t}))}function r(){return(yt.DOMPurify?Promise.resolve(yt.DOMPurify):n.e(703).then(n.t.bind(n,8703,23))).catch((function(t){return Promise.reject(new Error("Could not load dompurify: "+t))})).then((function(t){return t.default?t.default:t}))}var i=function(t){var e=(0,S.Z)(t);return"undefined"===e?"undefined":"string"===e||t instanceof String?"string":"number"===e||t instanceof Number?"number":"function"===e||t instanceof Function?"function":t&&t.constructor===Array?"array":t&&1===t.nodeType?"element":"object"===e?"object":"unknown"},o=function(t,e){var n=document.createElement(t);for(var r in e.className&&(n.className=e.className),e.innerHTML&&e.dompurify&&(n.innerHTML=e.dompurify.sanitize(e.innerHTML)),e.style)n.style[r]=e.style[r];return n},a=function t(e){var n=Object.assign(t.convert(Promise.resolve()),JSON.parse(JSON.stringify(t.template))),r=t.convert(Promise.resolve(),n);return(r=r.setProgress(1,t,1,[t])).set(e)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(t,e){return t.__proto__=e||a.prototype,t},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(t,e){return this.then((function(){switch(e=e||function(t){switch(i(t)){case"string":return"string";case"element":return"canvas"===t.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(t)){case"string":return this.then(r).then((function(e){return this.set({src:o("div",{innerHTML:t,dompurify:e})})}));case"element":return this.set({src:t});case"canvas":return this.set({canvas:t});case"img":return this.set({img:t});default:return this.error("Unknown source type.")}}))},a.prototype.to=function(t){switch(t){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var t={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},e=function t(e,n){for(var r=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),i=e.firstChild;i;i=i.nextSibling)!0!==n&&1===i.nodeType&&"SCRIPT"===i.nodeName||r.appendChild(t(i,n));return 1===e.nodeType&&("CANVAS"===e.nodeName?(r.width=e.width,r.height=e.height,r.getContext("2d").drawImage(e,0,0)):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(r.value=e.value),r.addEventListener("load",(function(){r.scrollTop=e.scrollTop,r.scrollLeft=e.scrollLeft}),!0)),r}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===e.tagName&&(t.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:t}),this.prop.container.appendChild(e),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},a.prototype.toCanvas=function(){var t=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(t).then(e).then((function(t){var e=Object.assign({},this.opt.html2canvas);return delete e.onrendered,t(this.prop.container,e)})).then((function(t){(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},a.prototype.toContext2d=function(){var t=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(t).then(e).then((function(t){var e=this.opt.jsPDF,n=this.opt.fontFaces,r="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,i=Object.assign({async:!0,allowTaint:!0,scale:r,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete i.onrendered,e.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,e.context2d.posX=this.opt.x,e.context2d.posY=this.opt.y,e.context2d.margin=this.opt.margin,e.context2d.fontFaces=n,n)for(var o=0;o<n.length;++o){var a=n[o],s=a.src.find((function(t){return"truetype"===t.format}));s&&e.addFont(s.url,a.ref.name,a.ref.style)}return i.windowHeight=i.windowHeight||0,i.windowHeight=0==i.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):i.windowHeight,e.context2d.save(!0),t(this.prop.container,i)})).then((function(t){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var t=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=t}))},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},a.prototype.output=function(t,e,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(t,e):this.outputPdf(t,e)},a.prototype.outputPdf=function(t,e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(t,e)}))},a.prototype.outputImg=function(t){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(t){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+t+'" is not supported.'}}))},a.prototype.save=function(t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(t?{filename:t}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},a.prototype.set=function(t){if("object"!==i(t))return this;var e=Object.keys(t||{}).map((function(e){if(e in a.template.prop)return function(){this.prop[e]=t[e]};switch(e){case"margin":return this.setMargin.bind(this,t.margin);case"jsPDF":return function(){return this.opt.jsPDF=t.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,t.pageSize);default:return function(){this.opt[e]=t[e]}}}),this);return this.then((function(){return this.thenList(e)}))},a.prototype.get=function(t,e){return this.then((function(){var n=t in a.template.prop?this.prop[t]:this.opt[t];return e?e(n):n}))},a.prototype.setMargin=function(t){return this.then((function(){switch(i(t)){case"number":t=[t,t,t,t];case"array":if(2===t.length&&(t=[t[0],t[1],t[0],t[1]]),4===t.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=t})).then(this.setPageSize)},a.prototype.setPageSize=function(t){function e(t,e){return Math.floor(t*e/72*96)}return this.then((function(){(t=t||Kt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(t.inner={width:t.width-this.opt.margin[1]-this.opt.margin[3],height:t.height-this.opt.margin[0]-this.opt.margin[2]},t.inner.px={width:e(t.inner.width,t.k),height:e(t.inner.height,t.k)},t.inner.ratio=t.inner.height/t.inner.width),this.prop.pageSize=t}))},a.prototype.setProgress=function(t,e,n,r){return null!=t&&(this.progress.val=t),null!=e&&(this.progress.state=e),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(t,e,n,r){return this.setProgress(t?this.progress.val+t:null,e||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},a.prototype.then=function(t,e){var n=this;return this.thenCore(t,e,(function(t,e){return n.updateProgress(null,null,1,[t]),Promise.prototype.then.call(this,(function(e){return n.updateProgress(null,t),e})).then(t,e).then((function(t){return n.updateProgress(1),t}))}))},a.prototype.thenCore=function(t,e,n){n=n||Promise.prototype.then,t&&(t=t.bind(this)),e&&(e=e.bind(this));var r=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:a.convert(Object.assign({},this),Promise.prototype),i=n.call(r,t,e);return a.convert(i,this.__proto__)},a.prototype.thenExternal=function(t,e){return Promise.prototype.then.call(this,t,e)},a.prototype.thenList=function(t){var e=this;return t.forEach((function(t){e=e.thenCore(t)})),e},a.prototype.catch=function(t){t&&(t=t.bind(this));var e=Promise.prototype.catch.call(this,t);return a.convert(e,this)},a.prototype.catchExternal=function(t){return Promise.prototype.catch.call(this,t)},a.prototype.error=function(t){return this.then((function(){throw new Error(t)}))},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Kt.getPageSize=function(t,e,n){if("object"===(0,S.Z)(t)){var r=t;t=r.orientation,e=r.unit||e,n=r.format||n}e=e||"mm",n=n||"a4",t=(""+(t||"P")).toLowerCase();var i,o=(""+n).toLowerCase(),a={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(e){case"pt":i=1;break;case"mm":i=72/25.4;break;case"cm":i=72/2.54;break;case"in":i=72;break;case"px":i=.75;break;case"pc":case"em":i=12;break;case"ex":i=6;break;default:throw"Invalid unit: "+e}var s,l=0,u=0;if(a.hasOwnProperty(o))l=a[o][1]/i,u=a[o][0]/i;else try{l=n[1],u=n[0]}catch(nn){throw new Error("Invalid format: "+n)}if("p"===t||"portrait"===t)t="p",u>l&&(s=u,u=l,l=s);else{if("l"!==t&&"landscape"!==t)throw"Invalid orientation: "+t;t="l",l>u&&(s=u,u=l,l=s)}return{width:u,height:l,unit:e,k:i,orientation:t}},t.html=function(t,e){(e=e||{}).callback=e.callback||function(){},e.html2canvas=e.html2canvas||{},e.html2canvas.canvas=e.html2canvas.canvas||this.canvas,e.jsPDF=e.jsPDF||this,e.fontFaces=e.fontFaces?e.fontFaces.map(Ge):null;var n=new a(e);return e.worker?n:n.from(t).doCallback()}}(Kt.API),Kt.API.addJS=function(t){return en=t,this.internal.events.subscribe("postPutResources",(function(){Qe=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Qe+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),tn=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+en+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==Qe&&void 0!==tn&&this.internal.out("/Names <</JavaScript "+Qe+" 0 R>>")})),this},function(t){var e;t.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=t.outline.render().split(/\r\n/),i=0;i<r.length;i++){var o=r[i],a=n.exec(o);if(null!=a){var s=a[1];t.internal.newObjectDeferredBegin(s,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,u=[];for(i=0;i<l;i++){var c=t.internal.newObject();u.push(c);var h=t.internal.getPageInfo(i+1);t.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var f=t.internal.newObject();for(t.internal.write("<< /Names [ "),i=0;i<u.length;i++)t.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+f+" 0 R"),t.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(t,e,n){var r={title:e,options:n,children:[]};return null==t&&(t=this.root),t.children.push(r),r},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(e){e.id=t.internal.newObjectDeferred();for(var n=0;n<e.children.length;n++)this.genIds_r(e.children[n])},t.outline.renderRoot=function(t){this.objStart(t),this.line("/Type /Outlines"),t.children.length>0&&(this.line("/First "+this.makeRef(t.children[0])),this.line("/Last "+this.makeRef(t.children[t.children.length-1]))),this.line("/Count "+this.count_r({count:0},t)),this.objEnd()},t.outline.renderItems=function(e){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<e.children.length;r++){var i=e.children[r];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(e)),r>0&&this.line("/Prev "+this.makeRef(e.children[r-1])),r<e.children.length-1&&this.line("/Next "+this.makeRef(e.children[r+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var a=t.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+a.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var s=0;s<e.children.length;s++)this.renderItems(e.children[s])},t.outline.line=function(t){this.ctx.val+=t+"\r\n"},t.outline.makeRef=function(t){return t.id+" 0 R"},t.outline.makeString=function(e){return"("+t.internal.pdfEscape(e)+")"},t.outline.objStart=function(t){this.ctx.val+="\r\n"+t.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(t,e){for(var n=0;n<e.children.length;n++)t.count++,this.count_r(t,e.children[n]);return t.count}}])}(Kt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(t,n,r,i,o,a){var s,l=this.decode.DCT_DECODE,u=null;if("string"==typeof t||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(s=function(t){for(var n,r=256*t.charCodeAt(4)+t.charCodeAt(5),i=t.length,o={width:0,height:0,numcomponents:1},a=4;a<i;a+=2){if(a+=r,-1!==e.indexOf(t.charCodeAt(a+1))){n=256*t.charCodeAt(a+5)+t.charCodeAt(a+6),o={width:256*t.charCodeAt(a+7)+t.charCodeAt(a+8),height:n,numcomponents:t.charCodeAt(a+9)};break}r=256*t.charCodeAt(a+2)+t.charCodeAt(a+3)}return o}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:t,width:s.width,height:s.height,colorSpace:a,bitsPerComponent:8,filter:l,index:n,alias:r}}return u}}(Kt.API);var on,an,sn,ln,un,cn=function(){var t,e,n;function r(t){var e,n,r,i,o,a,s,l,u,c,h,f,p,d;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},a=null;;){switch(e=this.readUInt32(),u=function(){var t,e;for(e=[],t=0;t<4;++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":a&&this.animation.frames.push(a),this.pos+=4,a={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},o=this.readUInt16(),i=this.readUInt16()||100,a.delay=1e3*o/i,a.disposeOp=this.data[this.pos++],a.blendOp=this.data[this.pos++],a.data=[];break;case"IDAT":case"fdAT":for("fdAT"===u&&(this.pos+=4,e-=4),t=(null!=a?a.data:void 0)||this.imgData,f=0;0<=e?f<e:f>e;0<=e?++f:--f)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(e),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((c=r-this.transparency.indexed.length)>0)for(p=0;0<=c?p<c:p>c;0<=c?++p:--p)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":s=(h=this.read(e)).indexOf(0),l=String.fromCharCode.apply(String,h.slice(0,s)),this.text[l]=String.fromCharCode.apply(String,h.slice(s+1));break;case"IEND":return a&&this.animation.frames.push(a),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(d=this.colorType)||6===d,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;0<=t?++e:--e)n.push(this.data[this.pos++]);return n},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(t){var e=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*e),r=0,i=this;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);function o(o,a,s,l){var u,c,h,f,p,d,m,g,v,y,_,x,b,w,k,S,E,I,C,A,P,T=Math.ceil((i.width-o)/s),M=Math.ceil((i.height-a)/l),L=i.width==T&&i.height==M;for(w=e*T,x=L?n:new Uint8Array(w*M),d=t.length,b=0,c=0;b<M&&r<d;){switch(t[r++]){case 0:for(f=E=0;E<w;f=E+=1)x[c++]=t[r++];break;case 1:for(f=I=0;I<w;f=I+=1)u=t[r++],p=f<e?0:x[c-e],x[c++]=(u+p)%256;break;case 2:for(f=C=0;C<w;f=C+=1)u=t[r++],h=(f-f%e)/e,k=b&&x[(b-1)*w+h*e+f%e],x[c++]=(k+u)%256;break;case 3:for(f=A=0;A<w;f=A+=1)u=t[r++],h=(f-f%e)/e,p=f<e?0:x[c-e],k=b&&x[(b-1)*w+h*e+f%e],x[c++]=(u+Math.floor((p+k)/2))%256;break;case 4:for(f=P=0;P<w;f=P+=1)u=t[r++],h=(f-f%e)/e,p=f<e?0:x[c-e],0===b?k=S=0:(k=x[(b-1)*w+h*e+f%e],S=h&&x[(b-1)*w+(h-1)*e+f%e]),m=p+k-S,g=Math.abs(m-p),y=Math.abs(m-k),_=Math.abs(m-S),v=g<=y&&g<=_?p:y<=_?k:S,x[c++]=(u+v)%256;break;default:throw new Error("Invalid filter algorithm: "+t[r-1])}if(!L){var R=((a+b*l)*i.width+o)*e,N=b*w;for(f=0;f<T;f+=1){for(var O=0;O<e;O+=1)n[R++]=x[N++];R+=(s-1)*e}}b++}}return t=vt(t),1==i.interlaceMethod?(o(0,0,8,8),o(4,0,8,8),o(0,4,4,8),o(2,0,4,4),o(0,2,2,4),o(1,0,2,2),o(0,1,1,2)):o(0,0,1,1),n},r.prototype.decodePalette=function(){var t,e,n,r,i,o,a,s,l;for(n=this.palette,o=this.transparency.indexed||[],i=new Uint8Array((o.length||0)+n.length),r=0,t=0,e=a=0,s=n.length;a<s;e=a+=3)i[r++]=n[e],i[r++]=n[e+1],i[r++]=n[e+2],i[r++]=null!=(l=o[t++])?l:255;return i},r.prototype.copyToImageData=function(t,e){var n,r,i,o,a,s,l,u,c,h,f;if(r=this.colors,c=null,n=this.hasAlphaChannel,this.palette.length&&(c=null!=(f=this._decodedPalette)?f:this._decodedPalette=this.decodePalette(),r=4,n=!0),u=(i=t.data||t).length,a=c||e,o=s=0,1===r)for(;o<u;)l=c?4*e[o/4]:s,h=a[l++],i[o++]=h,i[o++]=h,i[o++]=h,i[o++]=n?a[l++]:255,s=l;else for(;o<u;)l=c?4*e[o/4]:s,i[o++]=a[l++],i[o++]=a[l++],i[o++]=a[l++],i[o++]=n?a[l++]:255,s=l},r.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t};var i=function(){if("[object Window]"===Object.prototype.toString.call(yt)){try{e=yt.document.createElement("canvas"),n=e.getContext("2d")}catch(t){return!1}return!0}return!1};return i(),t=function(t){var r;if(!0===i())return n.width=t.width,n.height=t.height,n.clearRect(0,0,t.width,t.height),n.putImageData(t,0,0),(r=new Image).src=e.toDataURL(),r;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(e){var n,r,i,o,a,s,l,u;if(this.animation){for(u=[],r=a=0,s=(l=this.animation.frames).length;a<s;r=++a)n=l[r],i=e.createImageData(n.width,n.height),o=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(i,o),n.imageData=i,u.push(n.image=t(i));return u}},r.prototype.renderFrame=function(t,e){var n,r,i;return n=(r=this.animation.frames)[e],i=r[e-1],0===e&&t.clearRect(0,0,this.width,this.height),1===(null!=i?i.disposeOp:void 0)?t.clearRect(i.xOffset,i.yOffset,i.width,i.height):2===(null!=i?i.disposeOp:void 0)&&t.putImageData(i.imageData,i.xOffset,i.yOffset),0===n.blendOp&&t.clearRect(n.xOffset,n.yOffset,n.width,n.height),t.drawImage(n.image,n.xOffset,n.yOffset)},r.prototype.animate=function(t){var e,n,r,i,o,a,s=this;return n=0,a=this.animation,i=a.numFrames,r=a.frames,o=a.numPlays,(e=function(){var a,l;if(a=n++%i,l=r[a],s.renderFrame(t,a),i>1&&n/i<o)return s.animation._timeout=setTimeout(e,l.delay)})()},r.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)},r.prototype.render=function(t){var e,n;return t._png&&t._png.stopAnimation(),t._png=this,t.width=this.width,t.height=this.height,e=t.getContext("2d"),this.animation?(this.decodeFrames(e),this.animate(e)):(n=e.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),e.putImageData(n,0,0))},r}();function hn(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!=(t[e++]+1&253)||97!==t[e++])throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],o=i>>7,a=1<<1+(7&i);t[e++],t[e++];var s=null,l=null;o&&(s=e,l=a,e+=3*a);var u=!0,c=[],h=0,f=null,p=0,d=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,d=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((C=t[e++])>=0))throw Error("Invalid block size");if(0===C)break;e+=C}break;case 249:if(4!==t[e++]||0!==t[e+4])throw new Error("Invalid graphics extension block.");var m=t[e++];h=t[e++]|t[e++]<<8,f=t[e++],0==(1&m)&&(f=null),p=m>>2&7,e++;break;case 254:for(;;){if(!((C=t[e++])>=0))throw Error("Invalid block size");if(0===C)break;e+=C}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,x=t[e++],b=x>>6&1,w=1<<1+(7&x),k=s,S=l,E=!1;x>>7&&(E=!0,k=e,S=w,e+=3*w);var I=e;for(e++;;){var C;if(!((C=t[e++])>=0))throw Error("Invalid block size");if(0===C)break;e+=C}c.push({x:g,y:v,width:y,height:_,has_local_palette:E,palette_offset:k,palette_size:S,data_offset:I,data_length:e-I,transparent_index:f,interlaced:!!b,delay:h,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return d},this.frameInfo=function(t){if(t<0||t>=c.length)throw new Error("Frame index out of range.");return c[t]},this.decodeAndBlitFrameBGRA=function(e,r){var i=this.frameInfo(e),o=i.width*i.height,a=new Uint8Array(o);fn(t,i.data_offset,a,o);var s=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var u=i.width,c=n-u,h=u,f=4*(i.y*n+i.x),p=4*((i.y+i.height)*n+i.x),d=f,m=4*c;!0===i.interlaced&&(m+=4*n*7);for(var g=8,v=0,y=a.length;v<y;++v){var _=a[v];if(0===h&&(h=u,(d+=m)>=p&&(m=4*c+4*n*(g-1),d=f+(u+c)*(g<<1),g>>=1)),_===l)d+=4;else{var x=t[s+3*_],b=t[s+3*_+1],w=t[s+3*_+2];r[d++]=w,r[d++]=b,r[d++]=x,r[d++]=255}--h}},this.decodeAndBlitFrameRGBA=function(e,r){var i=this.frameInfo(e),o=i.width*i.height,a=new Uint8Array(o);fn(t,i.data_offset,a,o);var s=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var u=i.width,c=n-u,h=u,f=4*(i.y*n+i.x),p=4*((i.y+i.height)*n+i.x),d=f,m=4*c;!0===i.interlaced&&(m+=4*n*7);for(var g=8,v=0,y=a.length;v<y;++v){var _=a[v];if(0===h&&(h=u,(d+=m)>=p&&(m=4*c+4*n*(g-1),d=f+(u+c)*(g<<1),g>>=1)),_===l)d+=4;else{var x=t[s+3*_],b=t[s+3*_+1],w=t[s+3*_+2];r[d++]=x,r[d++]=b,r[d++]=w,r[d++]=255}--h}}}function fn(t,e,n,r){for(var i=t[e++],o=1<<i,a=o+1,s=a+1,l=i+1,u=(1<<l)-1,c=0,h=0,f=0,p=t[e++],d=new Int32Array(4096),m=null;;){for(;c<16&&0!==p;)h|=t[e++]<<c,c+=8,1===p?p=t[e++]:--p;if(c<l)break;var g=h&u;if(h>>=l,c-=l,g!==o){if(g===a)break;for(var v=g<s?g:m,y=0,_=v;_>o;)_=d[_]>>8,++y;var x=_;if(f+y+(v!==g?1:0)>r)return void xt.log("Warning, gif stream longer than expected.");n[f++]=x;var b=f+=y;for(v!==g&&(n[f++]=x),_=v;y--;)_=d[_],n[--b]=255&_,_>>=8;null!==m&&s<4096&&(d[s++]=m<<8|x,s>=u+1&&l<12&&(++l,u=u<<1|1)),m=g}else s=a+1,u=(1<<(l=i+1))-1,m=null}return f!==r&&xt.log("Warning, gif stream shorter than expected."),n}function pn(t){var e,n,r,i,o,a=Math.floor,s=new Array(64),l=new Array(64),u=new Array(64),c=new Array(64),h=new Array(65535),f=new Array(65535),p=new Array(64),d=new Array(64),m=[],g=0,v=7,y=new Array(64),_=new Array(64),x=new Array(64),b=new Array(256),w=new Array(2048),k=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],M=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function L(t,e){for(var n=0,r=0,i=new Array,o=1;o<=16;o++){for(var a=1;a<=t[o];a++)i[e[r]]=[],i[e[r]][0]=n,i[e[r]][1]=o,r++,n++;n*=2}return i}function R(t){for(var e=t[0],n=t[1]-1;n>=0;)e&1<<n&&(g|=1<<v),n--,--v<0&&(255==g?(N(255),N(0)):N(g),v=7,g=0)}function N(t){m.push(t)}function O(t){N(t>>8&255),N(255&t)}function z(t,e,n,r,i){for(var o,a=i[0],s=i[240],l=function(t,e){var n,r,i,o,a,s,l,u,c,h,f=0;for(c=0;c<8;++c){n=t[f],r=t[f+1],i=t[f+2],o=t[f+3],a=t[f+4],s=t[f+5],l=t[f+6];var d=n+(u=t[f+7]),m=n-u,g=r+l,v=r-l,y=i+s,_=i-s,x=o+a,b=o-a,w=d+x,k=d-x,S=g+y,E=g-y;t[f]=w+S,t[f+4]=w-S;var I=.707106781*(E+k);t[f+2]=k+I,t[f+6]=k-I;var C=.382683433*((w=b+_)-(E=v+m)),A=.5411961*w+C,P=1.306562965*E+C,T=.707106781*(S=_+v),M=m+T,L=m-T;t[f+5]=L+A,t[f+3]=L-A,t[f+1]=M+P,t[f+7]=M-P,f+=8}for(f=0,c=0;c<8;++c){n=t[f],r=t[f+8],i=t[f+16],o=t[f+24],a=t[f+32],s=t[f+40],l=t[f+48];var R=n+(u=t[f+56]),N=n-u,O=r+l,z=r-l,D=i+s,F=i-s,B=o+a,j=o-a,Z=R+B,U=R-B,V=O+D,q=O-D;t[f]=Z+V,t[f+32]=Z-V;var G=.707106781*(q+U);t[f+16]=U+G,t[f+48]=U-G;var W=.382683433*((Z=j+F)-(q=z+N)),H=.5411961*Z+W,X=1.306562965*q+W,Y=.707106781*(V=F+z),$=N+Y,K=N-Y;t[f+40]=K+H,t[f+24]=K-H,t[f+8]=$+X,t[f+56]=$-X,f++}for(c=0;c<64;++c)h=t[c]*e[c],p[c]=h>0?h+.5|0:h-.5|0;return p}(t,e),u=0;u<64;++u)d[k[u]]=l[u];var c=d[0]-n;n=d[0],0==c?R(r[0]):(R(r[f[o=32767+c]]),R(h[o]));for(var m=63;m>0&&0==d[m];)m--;if(0==m)return R(a),n;for(var g,v=1;v<=m;){for(var y=v;0==d[v]&&v<=m;)++v;var _=v-y;if(_>=16){g=_>>4;for(var x=1;x<=g;++x)R(s);_&=15}o=32767+d[v],R(i[(_<<4)+f[o]]),R(h[o]),v++}return 63!=m&&R(a),n}function D(t){t=Math.min(Math.max(t,1),100),o!=t&&(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=a((e[n]*t+50)/100);r=Math.min(Math.max(r,1),255),s[k[n]]=r}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var h=a((i[o]*t+50)/100);h=Math.min(Math.max(h,1),255),l[k[o]]=h}for(var f=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],p=0,d=0;d<8;d++)for(var m=0;m<8;m++)u[p]=1/(s[k[p]]*f[d]*f[m]*8),c[p]=1/(l[k[p]]*f[d]*f[m]*8),p++}(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),o=t)}this.encode=function(t,o){o&&D(o),m=new Array,g=0,v=7,O(65496),O(65504),O(16),N(74),N(70),N(73),N(70),N(0),N(1),N(1),N(0),O(1),O(1),N(0),N(0),function(){O(65499),O(132),N(0);for(var t=0;t<64;t++)N(s[t]);N(1);for(var e=0;e<64;e++)N(l[e])}(),function(t,e){O(65472),O(17),N(8),O(e),O(t),N(3),N(1),N(17),N(0),N(2),N(17),N(1),N(3),N(17),N(1)}(t.width,t.height),function(){O(65476),O(418),N(0);for(var t=0;t<16;t++)N(S[t+1]);for(var e=0;e<=11;e++)N(E[e]);N(16);for(var n=0;n<16;n++)N(I[n+1]);for(var r=0;r<=161;r++)N(C[r]);N(1);for(var i=0;i<16;i++)N(A[i+1]);for(var o=0;o<=11;o++)N(P[o]);N(17);for(var a=0;a<16;a++)N(T[a+1]);for(var s=0;s<=161;s++)N(M[s])}(),O(65498),O(12),N(3),N(1),N(0),N(2),N(17),N(3),N(17),N(0),N(63),N(0);var a=0,h=0,f=0;g=0,v=7,this.encode.displayName="_encode_";for(var p,d,b,k,L,F,B,j,Z,U=t.data,V=t.width,q=t.height,G=4*V,W=0;W<q;){for(p=0;p<G;){for(L=G*W+p,B=-1,j=0,Z=0;Z<64;Z++)F=L+(j=Z>>3)*G+(B=4*(7&Z)),W+j>=q&&(F-=G*(W+1+j-q)),p+B>=G&&(F-=p+B-G+4),d=U[F++],b=U[F++],k=U[F++],y[Z]=(w[d]+w[b+256>>0]+w[k+512>>0]>>16)-128,_[Z]=(w[d+768>>0]+w[b+1024>>0]+w[k+1280>>0]>>16)-128,x[Z]=(w[d+1280>>0]+w[b+1536>>0]+w[k+1792>>0]>>16)-128;a=z(y,u,a,e,r),h=z(_,c,h,n,i),f=z(x,c,f,n,i),p+=32}W+=8}if(v>=0){var H=[];H[1]=v+1,H[0]=(1<<v+1)-1,R(H)}return O(65497),new Uint8Array(m)},t=t||50,function(){for(var t=String.fromCharCode,e=0;e<256;e++)b[e]=t(e)}(),e=L(S,E),n=L(A,P),r=L(I,C),i=L(T,M),function(){for(var t=1,e=2,n=1;n<=15;n++){for(var r=t;r<e;r++)f[32767+r]=n,h[32767+r]=[],h[32767+r][1]=n,h[32767+r][0]=r;for(var i=-(e-1);i<=-t;i++)f[32767+i]=n,h[32767+i]=[],h[32767+i][1]=n,h[32767+i][0]=e-1+i;t<<=1,e<<=1}}(),function(){for(var t=0;t<256;t++)w[t]=19595*t,w[t+256>>0]=38470*t,w[t+512>>0]=7471*t+32768,w[t+768>>0]=-11059*t,w[t+1024>>0]=-21709*t,w[t+1280>>0]=32768*t+8421375,w[t+1536>>0]=-27439*t,w[t+1792>>0]=-5329*t}(),D(t)}function dn(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function mn(t){function e(t){if(!t)throw Error("assert :P")}function n(t,e,n){for(var r=0;4>r;r++)if(t[e+r]!=n.charCodeAt(r))return!0;return!1}function r(t,e,n,r,i){for(var o=0;o<i;o++)t[e+o]=n[r+o]}function i(t,e,n,r){for(var i=0;i<r;i++)t[e+i]=n}function o(t){return new Int32Array(t)}function a(t,e){for(var n=[],r=0;r<t;r++)n.push(new e);return n}function s(t,e){var n=[];return function t(n,r,i){for(var o=i[r],a=0;a<o&&(n.push(i.length>r+1?[]:new e),!(i.length<r+1));a++)t(n[a],r+1,i)}(n,0,t),n}var l=function(){var t=this;function l(t,e){for(var n=1<<e-1>>>0;t&n;)n>>>=1;return n?(t&n-1)+n:t}function u(t,n,r,i,o){e(!(i%r));do{t[n+(i-=r)]=o}while(0<i)}function c(t,n,r,i,a){if(e(2328>=a),512>=a)var s=o(512);else if(null==(s=o(a)))return 0;return function(t,n,r,i,a,s){var c,f,p=n,d=1<<r,m=o(16),g=o(16);for(e(0!=a),e(null!=i),e(null!=t),e(0<r),f=0;f<a;++f){if(15<i[f])return 0;++m[i[f]]}if(m[0]==a)return 0;for(g[1]=0,c=1;15>c;++c){if(m[c]>1<<c)return 0;g[c+1]=g[c]+m[c]}for(f=0;f<a;++f)c=i[f],0<i[f]&&(s[g[c]++]=f);if(1==g[15])return(i=new h).g=0,i.value=s[0],u(t,p,1,d,i),d;var v,y=-1,_=d-1,x=0,b=1,w=1,k=1<<r;for(f=0,c=1,a=2;c<=r;++c,a<<=1){if(b+=w<<=1,0>(w-=m[c]))return 0;for(;0<m[c];--m[c])(i=new h).g=c,i.value=s[f++],u(t,p+x,a,k,i),x=l(x,c)}for(c=r+1,a=2;15>=c;++c,a<<=1){if(b+=w<<=1,0>(w-=m[c]))return 0;for(;0<m[c];--m[c]){if(i=new h,(x&_)!=y){for(p+=k,v=1<<(y=c)-r;15>y&&!(0>=(v-=m[y]));)++y,v<<=1;d+=k=1<<(v=y-r),t[n+(y=x&_)].g=v+r,t[n+y].value=p-n-y}i.g=c-r,i.value=s[f++],u(t,p+(x>>r),a,k,i),x=l(x,c)}}return b!=2*g[15]-1?0:d}(t,n,r,i,a,s)}function h(){this.value=this.g=0}function f(){this.value=this.g=0}function p(){this.G=a(5,h),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Bn,f)}function d(t,n,r,i){e(null!=t),e(null!=n),e(2147483648>i),t.Ca=254,t.I=0,t.b=-8,t.Ka=0,t.oa=n,t.pa=r,t.Jd=n,t.Yc=r+i,t.Zc=4<=i?r+i-4+1:r,I(t)}function m(t,e){for(var n=0;0<e--;)n|=A(t,128)<<e;return n}function g(t,e){var n=m(t,e);return C(t)?-n:n}function v(t,n,r,i){var o,a=0;for(e(null!=t),e(null!=n),e(4294967288>i),t.Sb=i,t.Ra=0,t.u=0,t.h=0,4<i&&(i=4),o=0;o<i;++o)a+=n[r+o]<<8*o;t.Ra=a,t.bb=i,t.oa=n,t.pa=r}function y(t){for(;8<=t.u&&t.bb<t.Sb;)t.Ra>>>=8,t.Ra+=t.oa[t.pa+t.bb]<<Un-8>>>0,++t.bb,t.u-=8;k(t)&&(t.h=1,t.u=0)}function _(t,n){if(e(0<=n),!t.h&&n<=Zn){var r=w(t)&jn[n];return t.u+=n,y(t),r}return t.h=1,t.u=0}function x(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function b(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function w(t){return t.Ra>>>(t.u&Un-1)>>>0}function k(t){return e(t.bb<=t.Sb),t.h||t.bb==t.Sb&&t.u>Un}function S(t,e){t.u=e,t.h=k(t)}function E(t){t.u>=Vn&&(e(t.u>=Vn),y(t))}function I(t){e(null!=t&&null!=t.oa),t.pa<t.Zc?(t.I=(t.oa[t.pa++]|t.I<<8)>>>0,t.b+=8):(e(null!=t&&null!=t.oa),t.pa<t.Yc?(t.b+=8,t.I=t.oa[t.pa++]|t.I<<8):t.Ka?t.b=0:(t.I<<=8,t.b+=8,t.Ka=1))}function C(t){return m(t,1)}function A(t,e){var n=t.Ca;0>t.b&&I(t);var r=t.b,i=n*e>>>8,o=(t.I>>>r>i)+0;for(o?(n-=i,t.I-=i+1<<r>>>0):n=i+1,r=n,i=0;256<=r;)i+=8,r>>=8;return r=7^i+qn[r],t.b-=r,t.Ca=(n<<r)-1,o}function P(t,e,n){t[e+0]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=n>>0&255}function T(t,e){return t[e+0]<<0|t[e+1]<<8}function M(t,e){return T(t,e)|t[e+2]<<16}function L(t,e){return T(t,e)|T(t,e+2)<<16}function R(t,n){var r=1<<n;return e(null!=t),e(0<n),t.X=o(r),null==t.X?0:(t.Mb=32-n,t.Xa=n,1)}function N(t,n){e(null!=t),e(null!=n),e(t.Xa==n.Xa),r(n.X,0,t.X,0,1<<n.Xa)}function O(){this.X=[],this.Xa=this.Mb=0}function z(t,n,r,i){e(null!=r),e(null!=i);var o=r[0],a=i[0];return 0==o&&(o=(t*a+n/2)/n),0==a&&(a=(n*o+t/2)/t),0>=o||0>=a?0:(r[0]=o,i[0]=a,1)}function D(t,e){return t+(1<<e)-1>>>e}function F(t,e){return((4278255360&t)+(4278255360&e)>>>0&4278255360)+((16711935&t)+(16711935&e)>>>0&16711935)>>>0}function B(e,n){t[n]=function(n,r,i,o,a,s,l){var u;for(u=0;u<a;++u){var c=t[e](s[l+u-1],i,o+u);s[l+u]=F(n[r+u],c)}}}function j(){this.ud=this.hd=this.jd=0}function Z(t,e){return((4278124286&(t^e))>>>1)+(t&e)>>>0}function U(t){return 0<=t&&256>t?t:0>t?0:255<t?255:void 0}function V(t,e){return U(t+(t-e+.5>>1))}function q(t,e,n){return Math.abs(e-n)-Math.abs(t-n)}function G(t,e,n,r,i,o,a){for(r=o[a-1],n=0;n<i;++n)o[a+n]=r=F(t[e+n],r)}function W(t,e,n,r,i){var o;for(o=0;o<n;++o){var a=t[e+o],s=a>>8&255,l=16711935&(l=(l=16711935&a)+((s<<16)+s));r[i+o]=(4278255360&a)+l>>>0}}function H(t,e){e.jd=t>>0&255,e.hd=t>>8&255,e.ud=t>>16&255}function X(t,e,n,r,i,o){var a;for(a=0;a<r;++a){var s=e[n+a],l=s>>>8,u=s,c=255&(c=(c=s>>>16)+((t.jd<<24>>24)*(l<<24>>24)>>>5));u=255&(u=(u+=(t.hd<<24>>24)*(l<<24>>24)>>>5)+((t.ud<<24>>24)*(c<<24>>24)>>>5)),i[o+a]=(4278255360&s)+(c<<16)+u}}function Y(e,n,r,i,o){t[n]=function(t,e,n,r,a,s,l,u,c){for(r=l;r<u;++r)for(l=0;l<c;++l)a[s++]=o(n[i(t[e++])])},t[e]=function(e,n,a,s,l,u,c){var h=8>>e.b,f=e.Ea,p=e.K[0],d=e.w;if(8>h)for(e=(1<<e.b)-1,d=(1<<h)-1;n<a;++n){var m,g=0;for(m=0;m<f;++m)m&e||(g=i(s[l++])),u[c++]=o(p[g&d]),g>>=h}else t["VP8LMapColor"+r](s,l,p,d,u,c,n,a,f)}}function $(t,e,n,r,i){for(n=e+n;e<n;){var o=t[e++];r[i++]=o>>16&255,r[i++]=o>>8&255,r[i++]=o>>0&255}}function K(t,e,n,r,i){for(n=e+n;e<n;){var o=t[e++];r[i++]=o>>16&255,r[i++]=o>>8&255,r[i++]=o>>0&255,r[i++]=o>>24&255}}function J(t,e,n,r,i){for(n=e+n;e<n;){var o=(a=t[e++])>>16&240|a>>12&15,a=a>>0&240|a>>28&15;r[i++]=o,r[i++]=a}}function Q(t,e,n,r,i){for(n=e+n;e<n;){var o=(a=t[e++])>>16&248|a>>13&7,a=a>>5&224|a>>3&31;r[i++]=o,r[i++]=a}}function tt(t,e,n,r,i){for(n=e+n;e<n;){var o=t[e++];r[i++]=o>>0&255,r[i++]=o>>8&255,r[i++]=o>>16&255}}function et(t,e,n,i,o,a){if(0==a)for(n=e+n;e<n;)P(i,((a=t[e++])[0]>>24|a[1]>>8&65280|a[2]<<8&16711680|a[3]<<24)>>>0),o+=32;else r(i,o,t,e,n)}function nt(e,n){t[n][0]=t[e+"0"],t[n][1]=t[e+"1"],t[n][2]=t[e+"2"],t[n][3]=t[e+"3"],t[n][4]=t[e+"4"],t[n][5]=t[e+"5"],t[n][6]=t[e+"6"],t[n][7]=t[e+"7"],t[n][8]=t[e+"8"],t[n][9]=t[e+"9"],t[n][10]=t[e+"10"],t[n][11]=t[e+"11"],t[n][12]=t[e+"12"],t[n][13]=t[e+"13"],t[n][14]=t[e+"0"],t[n][15]=t[e+"0"]}function rt(t){return t==Vr||t==qr||t==Gr||t==Wr}function it(){this.eb=[],this.size=this.A=this.fb=0}function ot(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function at(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new it,this.f.kb=new ot,this.sd=null}function st(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function lt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ut(t){return alert("todo:WebPSamplerProcessPlane"),t.T}function ct(t,e){var n=t.T,i=e.ba.f.RGBA,o=i.eb,a=i.fb+t.ka*i.A,s=vi[e.ba.S],l=t.y,u=t.O,c=t.f,h=t.N,f=t.ea,p=t.W,d=e.cc,m=e.dc,g=e.Mc,v=e.Nc,y=t.ka,_=t.ka+t.T,x=t.U,b=x+1>>1;for(0==y?s(l,u,null,null,c,h,f,p,c,h,f,p,o,a,null,null,x):(s(e.ec,e.fc,l,u,d,m,g,v,c,h,f,p,o,a-i.A,o,a,x),++n);y+2<_;y+=2)d=c,m=h,g=f,v=p,h+=t.Rc,p+=t.Rc,a+=2*i.A,s(l,(u+=2*t.fa)-t.fa,l,u,d,m,g,v,c,h,f,p,o,a-i.A,o,a,x);return u+=t.fa,t.j+_<t.o?(r(e.ec,e.fc,l,u,x),r(e.cc,e.dc,c,h,b),r(e.Mc,e.Nc,f,p,b),n--):1&_||s(l,u,null,null,c,h,f,p,c,h,f,p,o,a+i.A,null,null,x),n}function ht(t,n,r){var i=t.F,o=[t.J];if(null!=i){var a=t.U,s=n.ba.S,l=s==jr||s==Gr;n=n.ba.f.RGBA;var u=[0],c=t.ka;u[0]=t.T,t.Kb&&(0==c?--u[0]:(--c,o[0]-=t.width),t.j+t.ka+t.T==t.o&&(u[0]=t.o-t.j-c));var h=n.eb;c=n.fb+c*n.A,t=Er(i,o[0],t.width,a,u,h,c+(l?0:3),n.A),e(r==u),t&&rt(s)&&kr(h,c,l,a,u,n.A)}return 0}function ft(t){var e=t.ma,n=e.ba.S,r=11>n,i=n==Dr||n==Br||n==jr||n==Zr||12==n||rt(n);if(e.memory=null,e.Ib=null,e.Jb=null,e.Nd=null,!zn(e.Oa,t,i?11:12))return 0;if(i&&rt(n)&&_n(),t.da)alert("todo:use_scaling");else{if(r){if(e.Ib=ut,t.Kb){if(n=t.U+1>>1,e.memory=o(t.U+2*n),null==e.memory)return 0;e.ec=e.memory,e.fc=0,e.cc=e.ec,e.dc=e.fc+t.U,e.Mc=e.cc,e.Nc=e.dc+n,e.Ib=ct,_n()}}else alert("todo:EmitYUV");i&&(e.Jb=ht,r&&vn())}if(r&&!Mi){for(t=0;256>t;++t)Li[t]=89858*(t-128)+Ii>>Ei,Oi[t]=-22014*(t-128)+Ii,Ni[t]=-45773*(t-128),Ri[t]=113618*(t-128)+Ii>>Ei;for(t=Ci;t<Ai;++t)e=76283*(t-16)+Ii>>Ei,zi[t-Ci]=Gt(e,255),Di[t-Ci]=Gt(e+8>>4,15);Mi=1}return 1}function pt(t){var n=t.ma,r=t.U,i=t.T;return e(!(1&t.ka)),0>=r||0>=i?0:(r=n.Ib(t,n),null!=n.Jb&&n.Jb(t,n,r),n.Dc+=r,1)}function dt(t){t.ma.memory=null}function mt(t,e,n,r){return 47!=_(t,8)?0:(e[0]=_(t,14)+1,n[0]=_(t,14)+1,r[0]=_(t,1),0!=_(t,3)?0:!t.h)}function gt(t,e){if(4>t)return t+1;var n=t-2>>1;return(2+(1&t)<<n)+_(e,n)+1}function vt(t,e){return 120<e?e-120:1<=(n=((n=Jr[e-1])>>4)*t+(8-(15&n)))?n:1;var n}function yt(t,e,n){var r=w(n),i=t[e+=255&r].g-8;return 0<i&&(S(n,n.u+8),r=w(n),e+=t[e].value,e+=r&(1<<i)-1),S(n,n.u+t[e].g),t[e].value}function _t(t,n,r){return r.g+=t.g,r.value+=t.value<<n>>>0,e(8>=r.g),t.g}function xt(t,n,r){var i=t.xc;return e((n=0==i?0:t.vc[t.md*(r>>i)+(n>>i)])<t.Wb),t.Ya[n]}function bt(t,n,i,o){var a=t.ab,s=t.c*n,l=t.C;n=l+n;var u=i,c=o;for(o=t.Ta,i=t.Ua;0<a--;){var h=t.gc[a],f=l,p=n,d=u,m=c,g=(c=o,u=i,h.Ea);switch(e(f<p),e(p<=h.nc),h.hc){case 2:Hn(d,m,(p-f)*g,c,u);break;case 0:var v=f,y=p,_=c,x=u,b=(I=h).Ea;0==v&&(Gn(d,m,null,null,1,_,x),G(d,m+1,0,0,b-1,_,x+1),m+=b,x+=b,++v);for(var w=1<<I.b,k=w-1,S=D(b,I.b),E=I.K,I=I.w+(v>>I.b)*S;v<y;){var C=E,A=I,P=1;for(Wn(d,m,_,x-b,1,_,x);P<b;){var T=(P&~k)+w;T>b&&(T=b),(0,Jn[C[A++]>>8&15])(d,m+ +P,_,x+P-b,T-P,_,x+P),P=T}m+=b,x+=b,++v&k||(I+=S)}p!=h.nc&&r(c,u-g,c,u+(p-f-1)*g,g);break;case 1:for(g=d,y=m,b=(d=h.Ea)-(x=d&~(_=(m=1<<h.b)-1)),v=D(d,h.b),w=h.K,h=h.w+(f>>h.b)*v;f<p;){for(k=w,S=h,E=new j,I=y+x,C=y+d;y<I;)H(k[S++],E),Qn(E,g,y,m,c,u),y+=m,u+=m;y<C&&(H(k[S++],E),Qn(E,g,y,b,c,u),y+=b,u+=b),++f&_||(h+=v)}break;case 3:if(d==c&&m==u&&0<h.b){for(y=c,d=g=u+(p-f)*g-(x=(p-f)*D(h.Ea,h.b)),m=c,_=u,v=[],x=(b=x)-1;0<=x;--x)v[x]=m[_+x];for(x=b-1;0<=x;--x)y[d+x]=v[x];Xn(h,f,p,c,g,c,u)}else Xn(h,f,p,d,m,c,u)}u=o,c=i}c!=i&&r(o,i,u,c,s)}function wt(t,n){var r=t.V,i=t.Ba+t.c*t.C,o=n-t.C;if(e(n<=t.l.o),e(16>=o),0<o){var a=t.l,s=t.Ta,l=t.Ua,u=a.width;if(bt(t,o,r,i),o=l=[l],e((r=t.C)<(i=n)),e(a.v<a.va),i>a.o&&(i=a.o),r<a.j){var c=a.j-r;r=a.j,o[0]+=c*u}if(r>=i?r=0:(o[0]+=4*a.v,a.ka=r-a.j,a.U=a.va-a.v,a.T=i-r,r=1),r){if(l=l[0],11>(r=t.ca).S){var h=r.f.RGBA,f=(i=r.S,o=a.U,a=a.T,c=h.eb,h.A),p=a;for(h=h.fb+t.Ma*h.A;0<p--;){var d=s,m=l,g=o,v=c,y=h;switch(i){case zr:tr(d,m,g,v,y);break;case Dr:er(d,m,g,v,y);break;case Vr:er(d,m,g,v,y),kr(v,y,0,g,1,0);break;case Fr:ir(d,m,g,v,y);break;case Br:et(d,m,g,v,y,1);break;case qr:et(d,m,g,v,y,1),kr(v,y,0,g,1,0);break;case jr:et(d,m,g,v,y,0);break;case Gr:et(d,m,g,v,y,0),kr(v,y,1,g,1,0);break;case Zr:nr(d,m,g,v,y);break;case Wr:nr(d,m,g,v,y),Sr(v,y,g,1,0);break;case Ur:rr(d,m,g,v,y);break;default:e(0)}l+=u,h+=f}t.Ma+=a}else alert("todo:EmitRescaledRowsYUVA");e(t.Ma<=r.height)}}t.C=n,e(t.C<=t.i)}function kt(t){var e;if(0<t.ua)return 0;for(e=0;e<t.Wb;++e){var n=t.Ya[e].G,r=t.Ya[e].H;if(0<n[1][r[1]+0].g||0<n[2][r[2]+0].g||0<n[3][r[3]+0].g)return 0}return 1}function St(t,n,r,i,o,a){if(0!=t.Z){var s=t.qd,l=t.rd;for(e(null!=gi[t.Z]);n<r;++n)gi[t.Z](s,l,i,o,i,o,a),s=i,l=o,o+=a;t.qd=s,t.rd=l}}function Et(t,n){var r=t.l.ma,i=0==r.Z||1==r.Z?t.l.j:t.C;if(i=t.C<i?i:t.C,e(n<=t.l.o),n>i){var o=t.l.width,a=r.ca,s=r.tb+o*i,l=t.V,u=t.Ba+t.c*i,c=t.gc;e(1==t.ab),e(3==c[0].hc),$n(c[0],i,n,l,u,a,s),St(r,i,n,a,s,o)}t.C=t.Ma=n}function It(t,n,r,i,o,a,s){var l=t.$/i,u=t.$%i,c=t.m,h=t.s,f=r+t.$,p=f;o=r+i*o;var d=r+i*a,m=280+h.ua,g=t.Pb?l:16777216,v=0<h.ua?h.Wa:null,y=h.wc,_=f<d?xt(h,u,l):null;e(t.C<a),e(d<=o);var x=!1;t:for(;;){for(;x||f<d;){var b=0;if(l>=g){var I=f-r;e((g=t).Pb),g.wd=g.m,g.xd=I,0<g.s.ua&&N(g.s.Wa,g.s.vb),g=l+ti}if(u&y||(_=xt(h,u,l)),e(null!=_),_.Qb&&(n[f]=_.qb,x=!0),!x)if(E(c),_.jc){b=c,I=n;var C=f,A=_.pd[w(b)&Bn-1];e(_.jc),256>A.g?(S(b,b.u+A.g),I[C]=A.value,b=0):(S(b,b.u+A.g-256),e(256<=A.value),b=A.value),0==b&&(x=!0)}else b=yt(_.G[0],_.H[0],c);if(c.h)break;if(x||256>b){if(!x)if(_.nd)n[f]=(_.qb|b<<8)>>>0;else{if(E(c),x=yt(_.G[1],_.H[1],c),E(c),I=yt(_.G[2],_.H[2],c),C=yt(_.G[3],_.H[3],c),c.h)break;n[f]=(C<<24|x<<16|b<<8|I)>>>0}if(x=!1,++f,++u>=i&&(u=0,++l,null!=s&&l<=a&&!(l%16)&&s(t,l),null!=v))for(;p<f;)b=n[p++],v.X[(506832829*b&4294967295)>>>v.Mb]=b}else if(280>b){if(b=gt(b-256,c),I=yt(_.G[4],_.H[4],c),E(c),I=vt(i,I=gt(I,c)),c.h)break;if(f-r<I||o-f<b)break t;for(C=0;C<b;++C)n[f+C]=n[f+C-I];for(f+=b,u+=b;u>=i;)u-=i,++l,null!=s&&l<=a&&!(l%16)&&s(t,l);if(e(f<=o),u&y&&(_=xt(h,u,l)),null!=v)for(;p<f;)b=n[p++],v.X[(506832829*b&4294967295)>>>v.Mb]=b}else{if(!(b<m))break t;for(x=b-280,e(null!=v);p<f;)b=n[p++],v.X[(506832829*b&4294967295)>>>v.Mb]=b;b=f,e(!(x>>>(I=v).Xa)),n[b]=I.X[x],x=!0}x||e(c.h==k(c))}if(t.Pb&&c.h&&f<o)e(t.m.h),t.a=5,t.m=t.wd,t.$=t.xd,0<t.s.ua&&N(t.s.vb,t.s.Wa);else{if(c.h)break t;null!=s&&s(t,l>a?a:l),t.a=0,t.$=f-r}return 1}return t.a=3,0}function Ct(t){e(null!=t),t.vc=null,t.yc=null,t.Ya=null;var n=t.Wa;null!=n&&(n.X=null),t.vb=null,e(null!=t)}function At(){var e=new sn;return null==e?null:(e.a=0,e.xb=mi,nt("Predictor","VP8LPredictors"),nt("Predictor","VP8LPredictors_C"),nt("PredictorAdd","VP8LPredictorsAdd"),nt("PredictorAdd","VP8LPredictorsAdd_C"),Hn=W,Qn=X,tr=$,er=K,nr=J,rr=Q,ir=tt,t.VP8LMapColor32b=Yn,t.VP8LMapColor8b=Kn,e)}function Pt(t,n,r,s,l){var u=1,f=[t],d=[n],m=s.m,g=s.s,v=null,y=0;t:for(;;){if(r)for(;u&&_(m,1);){var x=f,b=d,k=s,I=1,C=k.m,A=k.gc[k.ab],P=_(C,2);if(k.Oc&1<<P)u=0;else{switch(k.Oc|=1<<P,A.hc=P,A.Ea=x[0],A.nc=b[0],A.K=[null],++k.ab,e(4>=k.ab),P){case 0:case 1:A.b=_(C,3)+2,I=Pt(D(A.Ea,A.b),D(A.nc,A.b),0,k,A.K),A.K=A.K[0];break;case 3:var T,M=_(C,8)+1,L=16<M?0:4<M?1:2<M?2:3;if(x[0]=D(A.Ea,L),A.b=L,T=I=Pt(M,1,0,k,A.K)){var N,O=M,z=A,B=1<<(8>>z.b),j=o(B);if(null==j)T=0;else{var Z=z.K[0],U=z.w;for(j[0]=z.K[0][0],N=1;N<1*O;++N)j[N]=F(Z[U+N],j[N-1]);for(;N<4*B;++N)j[N]=0;z.K[0]=null,z.K[0]=j,T=1}}I=T;break;case 2:break;default:e(0)}u=I}}if(f=f[0],d=d[0],u&&_(m,1)&&!(u=1<=(y=_(m,4))&&11>=y)){s.a=3;break t}var V;if(V=u)e:{var q,G,W,H=s,X=f,Y=d,$=y,K=r,J=H.m,Q=H.s,tt=[null],et=1,nt=0,rt=Qr[$];n:for(;;){if(K&&_(J,1)){var it=_(J,3)+2,ot=D(X,it),at=D(Y,it),st=ot*at;if(!Pt(ot,at,0,H,tt))break n;for(tt=tt[0],Q.xc=it,q=0;q<st;++q){var lt=tt[q]>>8&65535;tt[q]=lt,lt>=et&&(et=lt+1)}}if(J.h)break n;for(G=0;5>G;++G){var ut=Yr[G];!G&&0<$&&(ut+=1<<$),nt<ut&&(nt=ut)}var ct=a(et*rt,h),ht=et,ft=a(ht,p);if(null==ft)var pt=null;else e(65536>=ht),pt=ft;var dt=o(nt);if(null==pt||null==dt||null==ct){H.a=1;break n}var mt=ct;for(q=W=0;q<et;++q){var gt=pt[q],vt=gt.G,yt=gt.H,xt=0,bt=1,wt=0;for(G=0;5>G;++G){ut=Yr[G],vt[G]=mt,yt[G]=W,!G&&0<$&&(ut+=1<<$);r:{var kt,St=ut,Et=H,At=dt,Tt=mt,Mt=W,Lt=0,Rt=Et.m,Nt=_(Rt,1);if(i(At,0,0,St),Nt){var Ot=_(Rt,1)+1,zt=_(Rt,1),Dt=_(Rt,0==zt?1:8);At[Dt]=1,2==Ot&&(At[Dt=_(Rt,8)]=1);var Ft=1}else{var Bt=o(19),jt=_(Rt,4)+4;if(19<jt){Et.a=3;var Zt=0;break r}for(kt=0;kt<jt;++kt)Bt[Kr[kt]]=_(Rt,3);var Ut=void 0,Vt=void 0,qt=Et,Gt=Bt,Wt=St,Ht=At,Xt=0,Yt=qt.m,$t=8,Kt=a(128,h);i:for(;c(Kt,0,7,Gt,19);){if(_(Yt,1)){var Jt=2+2*_(Yt,3);if((Ut=2+_(Yt,Jt))>Wt)break i}else Ut=Wt;for(Vt=0;Vt<Wt&&Ut--;){E(Yt);var Qt=Kt[0+(127&w(Yt))];S(Yt,Yt.u+Qt.g);var te=Qt.value;if(16>te)Ht[Vt++]=te,0!=te&&($t=te);else{var ee=16==te,ne=te-16,re=Xr[ne],ie=_(Yt,Hr[ne])+re;if(Vt+ie>Wt)break i;for(var oe=ee?$t:0;0<ie--;)Ht[Vt++]=oe}}Xt=1;break i}Xt||(qt.a=3),Ft=Xt}(Ft=Ft&&!Rt.h)&&(Lt=c(Tt,Mt,8,At,St)),Ft&&0!=Lt?Zt=Lt:(Et.a=3,Zt=0)}if(0==Zt)break n;if(bt&&1==$r[G]&&(bt=0==mt[W].g),xt+=mt[W].g,W+=Zt,3>=G){var ae,se=dt[0];for(ae=1;ae<ut;++ae)dt[ae]>se&&(se=dt[ae]);wt+=se}}if(gt.nd=bt,gt.Qb=0,bt&&(gt.qb=(vt[3][yt[3]+0].value<<24|vt[1][yt[1]+0].value<<16|vt[2][yt[2]+0].value)>>>0,0==xt&&256>vt[0][yt[0]+0].value&&(gt.Qb=1,gt.qb+=vt[0][yt[0]+0].value<<8)),gt.jc=!gt.Qb&&6>wt,gt.jc){var le,ue=gt;for(le=0;le<Bn;++le){var ce=le,he=ue.pd[ce],fe=ue.G[0][ue.H[0]+ce];256<=fe.value?(he.g=fe.g+256,he.value=fe.value):(he.g=0,he.value=0,ce>>=_t(fe,8,he),ce>>=_t(ue.G[1][ue.H[1]+ce],16,he),ce>>=_t(ue.G[2][ue.H[2]+ce],0,he),_t(ue.G[3][ue.H[3]+ce],24,he))}}}Q.vc=tt,Q.Wb=et,Q.Ya=pt,Q.yc=ct,V=1;break e}V=0}if(!(u=V)){s.a=3;break t}if(0<y){if(g.ua=1<<y,!R(g.Wa,y)){s.a=1,u=0;break t}}else g.ua=0;var pe=s,de=f,me=d,ge=pe.s,ve=ge.xc;if(pe.c=de,pe.i=me,ge.md=D(de,ve),ge.wc=0==ve?-1:(1<<ve)-1,r){s.xb=di;break t}if(null==(v=o(f*d))){s.a=1,u=0;break t}u=(u=It(s,v,0,f,d,d,null))&&!m.h;break t}return u?(null!=l?l[0]=v:(e(null==v),e(r)),s.$=0,r||Ct(g)):Ct(g),u}function Tt(t,n){var r=t.c*t.i,i=r+n+16*n;return e(t.c<=n),t.V=o(i),null==t.V?(t.Ta=null,t.Ua=0,t.a=1,0):(t.Ta=t.V,t.Ua=t.Ba+r+n,1)}function Mt(t,n){var r=t.C,i=n-r,o=t.V,a=t.Ba+t.c*r;for(e(n<=t.l.o);0<i;){var s=16<i?16:i,l=t.l.ma,u=t.l.width,c=u*s,h=l.ca,f=l.tb+u*r,p=t.Ta,d=t.Ua;bt(t,s,o,a),Ir(p,d,h,f,c),St(l,r,r+s,h,f,u),i-=s,o+=s*t.c,r+=s}e(r==n),t.C=t.Ma=n}function Lt(){this.ub=this.yd=this.td=this.Rb=0}function Rt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Nt(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Ot(){this.Yb=function(){var t=[];return function t(e,n,r){for(var i=r[n],o=0;o<i&&(e.push(r.length>n+1?[]:0),!(r.length<n+1));o++)t(e[o],n+1,r)}(t,0,[3,11]),t}()}function zt(){this.jb=o(3),this.Wc=s([4,8],Ot),this.Xc=s([4,17],Ot)}function Dt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Ft(){this.ld=this.La=this.dd=this.tc=0}function Bt(){this.Na=this.la=0}function jt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Zt(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ut(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ft),this.Y=0,this.ya=Array(new Zt),this.aa=0,this.l=new Wt}function Vt(){this.y=o(16),this.f=o(8),this.ea=o(8)}function qt(){this.cb=this.a=0,this.sc="",this.m=new x,this.Od=new Lt,this.Kc=new Rt,this.ed=new Dt,this.Qa=new Nt,this.Ic=this.$c=this.Aa=0,this.D=new Ut,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,x),this.ia=0,this.pb=a(4,jt),this.Pa=new zt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Vt),this.Hd=0,this.rb=Array(new Bt),this.sb=0,this.wa=Array(new Ft),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Zt),this.L=this.aa=0,this.gd=s([4,2],Ft),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Gt(t,e){return 0>t?0:t>e?e:t}function Wt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ht(){var t=new qt;return null!=t&&(t.a=0,t.sc="OK",t.cb=0,t.Xb=0,ri||(ri=Kt)),t}function Xt(t,e,n){return 0==t.a&&(t.a=e,t.sc=n,t.cb=0),0}function Yt(t,e,n){return 3<=n&&157==t[e+0]&&1==t[e+1]&&42==t[e+2]}function $t(t,n){if(null==t)return 0;if(t.a=0,t.sc="OK",null==n)return Xt(t,2,"null VP8Io passed to VP8GetHeaders()");var r=n.data,o=n.w,a=n.ha;if(4>a)return Xt(t,7,"Truncated header.");var s=r[o+0]|r[o+1]<<8|r[o+2]<<16,l=t.Od;if(l.Rb=!(1&s),l.td=s>>1&7,l.yd=s>>4&1,l.ub=s>>5,3<l.td)return Xt(t,3,"Incorrect keyframe parameters.");if(!l.yd)return Xt(t,4,"Frame not displayable.");o+=3,a-=3;var u=t.Kc;if(l.Rb){if(7>a)return Xt(t,7,"cannot parse picture header");if(!Yt(r,o,a))return Xt(t,3,"Bad code word");u.c=16383&(r[o+4]<<8|r[o+3]),u.Td=r[o+4]>>6,u.i=16383&(r[o+6]<<8|r[o+5]),u.Ud=r[o+6]>>6,o+=7,a-=7,t.za=u.c+15>>4,t.Ub=u.i+15>>4,n.width=u.c,n.height=u.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,i((s=t.Pa).jb,0,255,s.jb.length),e(null!=(s=t.Qa)),s.Cb=0,s.Bb=0,s.Fb=1,i(s.Zb,0,0,s.Zb.length),i(s.Lb,0,0,s.Lb)}if(l.ub>a)return Xt(t,7,"bad partition length");d(s=t.m,r,o,l.ub),o+=l.ub,a-=l.ub,l.Rb&&(u.Ld=C(s),u.Kd=C(s)),u=t.Qa;var c,h=t.Pa;if(e(null!=s),e(null!=u),u.Cb=C(s),u.Cb){if(u.Bb=C(s),C(s)){for(u.Fb=C(s),c=0;4>c;++c)u.Zb[c]=C(s)?g(s,7):0;for(c=0;4>c;++c)u.Lb[c]=C(s)?g(s,6):0}if(u.Bb)for(c=0;3>c;++c)h.jb[c]=C(s)?m(s,8):255}else u.Bb=0;if(s.Ka)return Xt(t,3,"cannot parse segment header");if((u=t.ed).zd=C(s),u.Tb=m(s,6),u.wb=m(s,3),u.Pc=C(s),u.Pc&&C(s)){for(h=0;4>h;++h)C(s)&&(u.vd[h]=g(s,6));for(h=0;4>h;++h)C(s)&&(u.od[h]=g(s,6))}if(t.L=0==u.Tb?0:u.zd?1:2,s.Ka)return Xt(t,3,"cannot parse filter header");var f=a;if(a=c=o,o=c+f,u=f,t.Xb=(1<<m(t.m,2))-1,f<3*(h=t.Xb))r=7;else{for(c+=3*h,u-=3*h,f=0;f<h;++f){var p=r[a+0]|r[a+1]<<8|r[a+2]<<16;p>u&&(p=u),d(t.Jc[+f],r,c,p),c+=p,u-=p,a+=3}d(t.Jc[+h],r,c,u),r=c<o?0:5}if(0!=r)return Xt(t,r,"cannot parse partitions");for(r=m(c=t.m,7),a=C(c)?g(c,4):0,o=C(c)?g(c,4):0,u=C(c)?g(c,4):0,h=C(c)?g(c,4):0,c=C(c)?g(c,4):0,f=t.Qa,p=0;4>p;++p){if(f.Cb){var v=f.Zb[p];f.Fb||(v+=r)}else{if(0<p){t.pb[p]=t.pb[0];continue}v=r}var y=t.pb[p];y.Sc[0]=ei[Gt(v+a,127)],y.Sc[1]=ni[Gt(v+0,127)],y.Eb[0]=2*ei[Gt(v+o,127)],y.Eb[1]=101581*ni[Gt(v+u,127)]>>16,8>y.Eb[1]&&(y.Eb[1]=8),y.Qc[0]=ei[Gt(v+h,117)],y.Qc[1]=ni[Gt(v+c,127)],y.lc=v+c}if(!l.Rb)return Xt(t,4,"Not a key frame.");for(C(s),l=t.Pa,r=0;4>r;++r){for(a=0;8>a;++a)for(o=0;3>o;++o)for(u=0;11>u;++u)h=A(s,ui[r][a][o][u])?m(s,8):si[r][a][o][u],l.Wc[r][a].Yb[o][u]=h;for(a=0;17>a;++a)l.Xc[r][a]=l.Wc[r][ci[a]]}return t.kc=C(s),t.kc&&(t.Bd=m(s,8)),t.cb=1}function Kt(t,e,n,r,i,o,a){var s=e[i].Yb[n];for(n=0;16>i;++i){if(!A(t,s[n+0]))return i;for(;!A(t,s[n+1]);)if(s=e[++i].Yb[0],n=0,16==i)return 16;var l=e[i+1].Yb;if(A(t,s[n+2])){var u=t,c=0;if(A(u,(f=s)[(h=n)+3]))if(A(u,f[h+6])){for(s=0,h=2*(c=A(u,f[h+8]))+(f=A(u,f[h+9+c])),c=0,f=ii[h];f[s];++s)c+=c+A(u,f[s]);c+=3+(8<<h)}else A(u,f[h+7])?(c=7+2*A(u,165),c+=A(u,145)):c=5+A(u,159);else c=A(u,f[h+4])?3+A(u,f[h+5]):2;s=l[2]}else c=1,s=l[1];l=a+oi[i],0>(u=t).b&&I(u);var h,f=u.b,p=(h=u.Ca>>1)-(u.I>>f)>>31;--u.b,u.Ca+=p,u.Ca|=1,u.I-=(h+1&p)<<f,o[l]=((c^p)-p)*r[(0<i)+0]}return 16}function Jt(t){var e=t.rb[t.sb-1];e.la=0,e.Na=0,i(t.zc,0,0,t.zc.length),t.ja=0}function Qt(t,n){if(null==t)return 0;if(null==n)return Xt(t,2,"NULL VP8Io parameter in VP8Decode().");if(!t.cb&&!$t(t,n))return 0;if(e(t.cb),null==n.ac||n.ac(n)){n.ob&&(t.L=0);var s=Bi[t.L];if(2==t.L?(t.yb=0,t.zb=0):(t.yb=n.v-s>>4,t.zb=n.j-s>>4,0>t.yb&&(t.yb=0),0>t.zb&&(t.zb=0)),t.Va=n.o+15+s>>4,t.Hb=n.va+15+s>>4,t.Hb>t.za&&(t.Hb=t.za),t.Va>t.Ub&&(t.Va=t.Ub),0<t.L){var l=t.ed;for(s=0;4>s;++s){var u;if(t.Qa.Cb){var c=t.Qa.Lb[s];t.Qa.Fb||(c+=l.Tb)}else c=l.Tb;for(u=0;1>=u;++u){var h=t.gd[s][u],f=c;if(l.Pc&&(f+=l.vd[0],u&&(f+=l.od[0])),0<(f=0>f?0:63<f?63:f)){var p=f;0<l.wb&&(p=4<l.wb?p>>2:p>>1)>9-l.wb&&(p=9-l.wb),1>p&&(p=1),h.dd=p,h.tc=2*f+p,h.ld=40<=f?2:15<=f?1:0}else h.tc=0;h.La=u}}}s=0}else Xt(t,6,"Frame setup failed"),s=t.a;if(s=0==s){if(s){t.$c=0,0<t.Aa||(t.Ic=Zi);t:{s=t.Ic,l=4*(p=t.za);var d=32*p,m=p+1,g=0<t.L?p*(0<t.Aa?2:1):0,v=(2==t.Aa?2:1)*p;if((h=l+832+(u=3*(16*s+Bi[t.L])/2*d)+(c=null!=t.Fa&&0<t.Fa.length?t.Kc.c*t.Kc.i:0))!=h)s=0;else{if(h>t.Vb){if(t.Vb=0,t.Ec=o(h),t.Fc=0,null==t.Ec){s=Xt(t,1,"no memory during frame initialization.");break t}t.Vb=h}h=t.Ec,f=t.Fc,t.Ac=h,t.Bc=f,f+=l,t.Gd=a(d,Vt),t.Hd=0,t.rb=a(m+1,Bt),t.sb=1,t.wa=g?a(g,Ft):null,t.Y=0,t.D.Nb=0,t.D.wa=t.wa,t.D.Y=t.Y,0<t.Aa&&(t.D.Y+=p),e(!0),t.oc=h,t.pc=f,f+=832,t.ya=a(v,Zt),t.aa=0,t.D.ya=t.ya,t.D.aa=t.aa,2==t.Aa&&(t.D.aa+=p),t.R=16*p,t.B=8*p,p=(d=Bi[t.L])*t.R,d=d/2*t.B,t.sa=h,t.ta=f+p,t.qa=t.sa,t.ra=t.ta+16*s*t.R+d,t.Ha=t.qa,t.Ia=t.ra+8*s*t.B+d,t.$c=0,f+=u,t.mb=c?h:null,t.nb=c?f:null,e(f+c<=t.Fc+t.Vb),Jt(t),i(t.Ac,t.Bc,0,l),s=1}}if(s){if(n.ka=0,n.y=t.sa,n.O=t.ta,n.f=t.qa,n.N=t.ra,n.ea=t.Ha,n.Vd=t.Ia,n.fa=t.R,n.Rc=t.B,n.F=null,n.J=0,!Mr){for(s=-255;255>=s;++s)Cr[255+s]=0>s?-s:s;for(s=-1020;1020>=s;++s)Ar[1020+s]=-128>s?-128:127<s?127:s;for(s=-112;112>=s;++s)Pr[112+s]=-16>s?-16:15<s?15:s;for(s=-255;510>=s;++s)Tr[255+s]=0>s?0:255<s?255:s;Mr=1}or=ue,ar=oe,lr=ae,ur=se,cr=le,sr=ie,hr=Xe,fr=Ye,pr=Je,dr=Qe,mr=$e,gr=Ke,vr=tn,yr=en,_r=Ue,xr=Ve,br=qe,wr=Ge,fi[0]=Se,fi[1]=he,fi[2]=we,fi[3]=ke,fi[4]=Ee,fi[5]=Ce,fi[6]=Ie,fi[7]=Ae,fi[8]=Te,fi[9]=Pe,hi[0]=ve,hi[1]=pe,hi[2]=de,hi[3]=me,hi[4]=ye,hi[5]=_e,hi[6]=xe,pi[0]=Ne,pi[1]=fe,pi[2]=Me,pi[3]=Le,pi[4]=ze,pi[5]=Oe,pi[6]=De,s=1}else s=0}s&&(s=function(t,n){for(t.M=0;t.M<t.Va;++t.M){var a,s=t.Jc[t.M&t.Xb],l=t.m,u=t;for(a=0;a<u.za;++a){var c=l,h=u,f=h.Ac,p=h.Bc+4*a,d=h.zc,m=h.ya[h.aa+a];if(h.Qa.Bb?m.$b=A(c,h.Pa.jb[0])?2+A(c,h.Pa.jb[2]):A(c,h.Pa.jb[1]):m.$b=0,h.kc&&(m.Ad=A(c,h.Bd)),m.Za=!A(c,145)+0,m.Za){var g=m.Ob,v=0;for(h=0;4>h;++h){var y,_=d[0+h];for(y=0;4>y;++y){_=li[f[p+y]][_];for(var x=ai[A(c,_[0])];0<x;)x=ai[2*x+A(c,_[x])];_=-x,f[p+y]=_}r(g,v,f,p,4),v+=4,d[0+h]=_}}else _=A(c,156)?A(c,128)?1:3:A(c,163)?2:0,m.Ob[0]=_,i(f,p,_,4),i(d,0,_,4);m.Dd=A(c,142)?A(c,114)?A(c,183)?1:3:2:0}if(u.m.Ka)return Xt(t,7,"Premature end-of-partition0 encountered.");for(;t.ja<t.za;++t.ja){if(u=s,c=(l=t).rb[l.sb-1],f=l.rb[l.sb+l.ja],a=l.ya[l.aa+l.ja],p=l.kc?a.Ad:0)c.la=f.la=0,a.Za||(c.Na=f.Na=0),a.Hc=0,a.Gc=0,a.ia=0;else{var b,w;if(c=f,f=u,p=l.Pa.Xc,d=l.ya[l.aa+l.ja],m=l.pb[d.$b],h=d.ad,g=0,v=l.rb[l.sb-1],_=y=0,i(h,g,0,384),d.Za)var k=0,S=p[3];else{x=o(16);var E=c.Na+v.Na;if(E=ri(f,p[1],E,m.Eb,0,x,0),c.Na=v.Na=(0<E)+0,1<E)or(x,0,h,g);else{var I=x[0]+3>>3;for(x=0;256>x;x+=16)h[g+x]=I}k=1,S=p[0]}var C=15&c.la,P=15&v.la;for(x=0;4>x;++x){var T=1&P;for(I=w=0;4>I;++I)C=C>>1|(T=(E=ri(f,S,E=T+(1&C),m.Sc,k,h,g))>k)<<7,w=w<<2|(3<E?3:1<E?2:0!=h[g+0]),g+=16;C>>=4,P=P>>1|T<<7,y=(y<<8|w)>>>0}for(S=C,k=P>>4,b=0;4>b;b+=2){for(w=0,C=c.la>>4+b,P=v.la>>4+b,x=0;2>x;++x){for(T=1&P,I=0;2>I;++I)E=T+(1&C),C=C>>1|(T=0<(E=ri(f,p[2],E,m.Qc,0,h,g)))<<3,w=w<<2|(3<E?3:1<E?2:0!=h[g+0]),g+=16;C>>=2,P=P>>1|T<<5}_|=w<<4*b,S|=C<<4<<b,k|=(240&P)<<b}c.la=S,v.la=k,d.Hc=y,d.Gc=_,d.ia=43690&_?0:m.ia,p=!(y|_)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[a.$b][a.Za],l.wa[l.Y+l.ja].La|=!p),u.Ka)return Xt(t,7,"Premature end-of-file encountered.")}if(Jt(t),l=n,u=1,a=(s=t).D,c=0<s.L&&s.M>=s.zb&&s.M<=s.Va,0==s.Aa)t:{if(a.M=s.M,a.uc=c,Nn(s,a),u=1,a=(w=s.D).Nb,c=(_=Bi[s.L])*s.R,f=_/2*s.B,x=16*a*s.R,I=8*a*s.B,p=s.sa,d=s.ta-c+x,m=s.qa,h=s.ra-f+I,g=s.Ha,v=s.Ia-f+I,P=0==(C=w.M),y=C>=s.Va-1,2==s.Aa&&Nn(s,w),w.uc)for(T=(E=s).D.M,e(E.D.uc),w=E.yb;w<E.Hb;++w){k=w,S=T;var M=(L=(Z=E).D).Nb;b=Z.R;var L=L.wa[L.Y+k],R=Z.sa,N=Z.ta+16*M*b+16*k,O=L.dd,z=L.tc;if(0!=z)if(e(3<=z),1==Z.L)0<k&&xr(R,N,b,z+4),L.La&&wr(R,N,b,z),0<S&&_r(R,N,b,z+4),L.La&&br(R,N,b,z);else{var D=Z.B,F=Z.qa,B=Z.ra+8*M*D+8*k,j=Z.Ha,Z=Z.Ia+8*M*D+8*k;M=L.ld,0<k&&(fr(R,N,b,z+4,O,M),dr(F,B,j,Z,D,z+4,O,M)),L.La&&(gr(R,N,b,z,O,M),yr(F,B,j,Z,D,z,O,M)),0<S&&(hr(R,N,b,z+4,O,M),pr(F,B,j,Z,D,z+4,O,M)),L.La&&(mr(R,N,b,z,O,M),vr(F,B,j,Z,D,z,O,M))}}if(s.ia&&alert("todo:DitherRow"),null!=l.put){if(w=16*C,C=16*(C+1),P?(l.y=s.sa,l.O=s.ta+x,l.f=s.qa,l.N=s.ra+I,l.ea=s.Ha,l.W=s.Ia+I):(w-=_,l.y=p,l.O=d,l.f=m,l.N=h,l.ea=g,l.W=v),y||(C-=_),C>l.o&&(C=l.o),l.F=null,l.J=null,null!=s.Fa&&0<s.Fa.length&&w<C&&(l.J=fn(s,l,w,C-w),l.F=s.mb,null==l.F&&0==l.F.length)){u=Xt(s,3,"Could not decode alpha data.");break t}w<l.j&&(_=l.j-w,w=l.j,e(!(1&_)),l.O+=s.R*_,l.N+=s.B*(_>>1),l.W+=s.B*(_>>1),null!=l.F&&(l.J+=l.width*_)),w<C&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=w-l.j,l.U=l.va-l.v,l.T=C-w,u=l.put(l))}a+1!=s.Ic||y||(r(s.sa,s.ta-c,p,d+16*s.R,c),r(s.qa,s.ra-f,m,h+8*s.B,f),r(s.Ha,s.Ia-f,g,v+8*s.B,f))}if(!u)return Xt(t,6,"Output aborted.")}return 1}(t,n)),null!=n.bc&&n.bc(n),s&=1}return s?(t.cb=0,s):0}function te(t,e,n,r,i){i=t[e+n+32*r]+(i>>3),t[e+n+32*r]=-256&i?0>i?0:255:i}function ee(t,e,n,r,i,o){te(t,e,0,n,r+i),te(t,e,1,n,r+o),te(t,e,2,n,r-o),te(t,e,3,n,r-i)}function ne(t){return(20091*t>>16)+t}function re(t,e,n,r){var i,a=0,s=o(16);for(i=0;4>i;++i){var l=t[e+0]+t[e+8],u=t[e+0]-t[e+8],c=(35468*t[e+4]>>16)-ne(t[e+12]),h=ne(t[e+4])+(35468*t[e+12]>>16);s[a+0]=l+h,s[a+1]=u+c,s[a+2]=u-c,s[a+3]=l-h,a+=4,e++}for(i=a=0;4>i;++i)l=(t=s[a+0]+4)+s[a+8],u=t-s[a+8],c=(35468*s[a+4]>>16)-ne(s[a+12]),te(n,r,0,0,l+(h=ne(s[a+4])+(35468*s[a+12]>>16))),te(n,r,1,0,u+c),te(n,r,2,0,u-c),te(n,r,3,0,l-h),a++,r+=32}function ie(t,e,n,r){var i=t[e+0]+4,o=35468*t[e+4]>>16,a=ne(t[e+4]),s=35468*t[e+1]>>16;ee(n,r,0,i+a,t=ne(t[e+1]),s),ee(n,r,1,i+o,t,s),ee(n,r,2,i-o,t,s),ee(n,r,3,i-a,t,s)}function oe(t,e,n,r,i){re(t,e,n,r),i&&re(t,e+16,n,r+4)}function ae(t,e,n,r){ar(t,e+0,n,r,1),ar(t,e+32,n,r+128,1)}function se(t,e,n,r){var i;for(t=t[e+0]+4,i=0;4>i;++i)for(e=0;4>e;++e)te(n,r,e,i,t)}function le(t,e,n,r){t[e+0]&&ur(t,e+0,n,r),t[e+16]&&ur(t,e+16,n,r+4),t[e+32]&&ur(t,e+32,n,r+128),t[e+48]&&ur(t,e+48,n,r+128+4)}function ue(t,e,n,r){var i,a=o(16);for(i=0;4>i;++i){var s=t[e+0+i]+t[e+12+i],l=t[e+4+i]+t[e+8+i],u=t[e+4+i]-t[e+8+i],c=t[e+0+i]-t[e+12+i];a[0+i]=s+l,a[8+i]=s-l,a[4+i]=c+u,a[12+i]=c-u}for(i=0;4>i;++i)s=(t=a[0+4*i]+3)+a[3+4*i],l=a[1+4*i]+a[2+4*i],u=a[1+4*i]-a[2+4*i],c=t-a[3+4*i],n[r+0]=s+l>>3,n[r+16]=c+u>>3,n[r+32]=s-l>>3,n[r+48]=c-u>>3,r+=64}function ce(t,e,n){var r,i=e-32,o=Nr,a=255-t[i-1];for(r=0;r<n;++r){var s,l=o,u=a+t[e-1];for(s=0;s<n;++s)t[e+s]=l[u+t[i+s]];e+=32}}function he(t,e){ce(t,e,4)}function fe(t,e){ce(t,e,8)}function pe(t,e){ce(t,e,16)}function de(t,e){var n;for(n=0;16>n;++n)r(t,e+32*n,t,e-32,16)}function me(t,e){var n;for(n=16;0<n;--n)i(t,e,t[e-1],16),e+=32}function ge(t,e,n){var r;for(r=0;16>r;++r)i(e,n+32*r,t,16)}function ve(t,e){var n,r=16;for(n=0;16>n;++n)r+=t[e-1+32*n]+t[e+n-32];ge(r>>5,t,e)}function ye(t,e){var n,r=8;for(n=0;16>n;++n)r+=t[e-1+32*n];ge(r>>4,t,e)}function _e(t,e){var n,r=8;for(n=0;16>n;++n)r+=t[e+n-32];ge(r>>4,t,e)}function xe(t,e){ge(128,t,e)}function be(t,e,n){return t+2*e+n+2>>2}function we(t,e){var n,i=e-32;for(i=new Uint8Array([be(t[i-1],t[i+0],t[i+1]),be(t[i+0],t[i+1],t[i+2]),be(t[i+1],t[i+2],t[i+3]),be(t[i+2],t[i+3],t[i+4])]),n=0;4>n;++n)r(t,e+32*n,i,0,i.length)}function ke(t,e){var n=t[e-1],r=t[e-1+32],i=t[e-1+64],o=t[e-1+96];P(t,e+0,16843009*be(t[e-1-32],n,r)),P(t,e+32,16843009*be(n,r,i)),P(t,e+64,16843009*be(r,i,o)),P(t,e+96,16843009*be(i,o,o))}function Se(t,e){var n,r=4;for(n=0;4>n;++n)r+=t[e+n-32]+t[e-1+32*n];for(r>>=3,n=0;4>n;++n)i(t,e+32*n,r,4)}function Ee(t,e){var n=t[e-1+0],r=t[e-1+32],i=t[e-1+64],o=t[e-1-32],a=t[e+0-32],s=t[e+1-32],l=t[e+2-32],u=t[e+3-32];t[e+0+96]=be(r,i,t[e-1+96]),t[e+1+96]=t[e+0+64]=be(n,r,i),t[e+2+96]=t[e+1+64]=t[e+0+32]=be(o,n,r),t[e+3+96]=t[e+2+64]=t[e+1+32]=t[e+0+0]=be(a,o,n),t[e+3+64]=t[e+2+32]=t[e+1+0]=be(s,a,o),t[e+3+32]=t[e+2+0]=be(l,s,a),t[e+3+0]=be(u,l,s)}function Ie(t,e){var n=t[e+1-32],r=t[e+2-32],i=t[e+3-32],o=t[e+4-32],a=t[e+5-32],s=t[e+6-32],l=t[e+7-32];t[e+0+0]=be(t[e+0-32],n,r),t[e+1+0]=t[e+0+32]=be(n,r,i),t[e+2+0]=t[e+1+32]=t[e+0+64]=be(r,i,o),t[e+3+0]=t[e+2+32]=t[e+1+64]=t[e+0+96]=be(i,o,a),t[e+3+32]=t[e+2+64]=t[e+1+96]=be(o,a,s),t[e+3+64]=t[e+2+96]=be(a,s,l),t[e+3+96]=be(s,l,l)}function Ce(t,e){var n=t[e-1+0],r=t[e-1+32],i=t[e-1+64],o=t[e-1-32],a=t[e+0-32],s=t[e+1-32],l=t[e+2-32],u=t[e+3-32];t[e+0+0]=t[e+1+64]=o+a+1>>1,t[e+1+0]=t[e+2+64]=a+s+1>>1,t[e+2+0]=t[e+3+64]=s+l+1>>1,t[e+3+0]=l+u+1>>1,t[e+0+96]=be(i,r,n),t[e+0+64]=be(r,n,o),t[e+0+32]=t[e+1+96]=be(n,o,a),t[e+1+32]=t[e+2+96]=be(o,a,s),t[e+2+32]=t[e+3+96]=be(a,s,l),t[e+3+32]=be(s,l,u)}function Ae(t,e){var n=t[e+0-32],r=t[e+1-32],i=t[e+2-32],o=t[e+3-32],a=t[e+4-32],s=t[e+5-32],l=t[e+6-32],u=t[e+7-32];t[e+0+0]=n+r+1>>1,t[e+1+0]=t[e+0+64]=r+i+1>>1,t[e+2+0]=t[e+1+64]=i+o+1>>1,t[e+3+0]=t[e+2+64]=o+a+1>>1,t[e+0+32]=be(n,r,i),t[e+1+32]=t[e+0+96]=be(r,i,o),t[e+2+32]=t[e+1+96]=be(i,o,a),t[e+3+32]=t[e+2+96]=be(o,a,s),t[e+3+64]=be(a,s,l),t[e+3+96]=be(s,l,u)}function Pe(t,e){var n=t[e-1+0],r=t[e-1+32],i=t[e-1+64],o=t[e-1+96];t[e+0+0]=n+r+1>>1,t[e+2+0]=t[e+0+32]=r+i+1>>1,t[e+2+32]=t[e+0+64]=i+o+1>>1,t[e+1+0]=be(n,r,i),t[e+3+0]=t[e+1+32]=be(r,i,o),t[e+3+32]=t[e+1+64]=be(i,o,o),t[e+3+64]=t[e+2+64]=t[e+0+96]=t[e+1+96]=t[e+2+96]=t[e+3+96]=o}function Te(t,e){var n=t[e-1+0],r=t[e-1+32],i=t[e-1+64],o=t[e-1+96],a=t[e-1-32],s=t[e+0-32],l=t[e+1-32],u=t[e+2-32];t[e+0+0]=t[e+2+32]=n+a+1>>1,t[e+0+32]=t[e+2+64]=r+n+1>>1,t[e+0+64]=t[e+2+96]=i+r+1>>1,t[e+0+96]=o+i+1>>1,t[e+3+0]=be(s,l,u),t[e+2+0]=be(a,s,l),t[e+1+0]=t[e+3+32]=be(n,a,s),t[e+1+32]=t[e+3+64]=be(r,n,a),t[e+1+64]=t[e+3+96]=be(i,r,n),t[e+1+96]=be(o,i,r)}function Me(t,e){var n;for(n=0;8>n;++n)r(t,e+32*n,t,e-32,8)}function Le(t,e){var n;for(n=0;8>n;++n)i(t,e,t[e-1],8),e+=32}function Re(t,e,n){var r;for(r=0;8>r;++r)i(e,n+32*r,t,8)}function Ne(t,e){var n,r=8;for(n=0;8>n;++n)r+=t[e+n-32]+t[e-1+32*n];Re(r>>4,t,e)}function Oe(t,e){var n,r=4;for(n=0;8>n;++n)r+=t[e+n-32];Re(r>>3,t,e)}function ze(t,e){var n,r=4;for(n=0;8>n;++n)r+=t[e-1+32*n];Re(r>>3,t,e)}function De(t,e){Re(128,t,e)}function Fe(t,e,n){var r=t[e-n],i=t[e+0],o=3*(i-r)+Lr[1020+t[e-2*n]-t[e+n]],a=Rr[112+(o+4>>3)];t[e-n]=Nr[255+r+Rr[112+(o+3>>3)]],t[e+0]=Nr[255+i-a]}function Be(t,e,n,r){var i=t[e+0],o=t[e+n];return Or[255+t[e-2*n]-t[e-n]]>r||Or[255+o-i]>r}function je(t,e,n,r){return 4*Or[255+t[e-n]-t[e+0]]+Or[255+t[e-2*n]-t[e+n]]<=r}function Ze(t,e,n,r,i){var o=t[e-3*n],a=t[e-2*n],s=t[e-n],l=t[e+0],u=t[e+n],c=t[e+2*n],h=t[e+3*n];return 4*Or[255+s-l]+Or[255+a-u]>r?0:Or[255+t[e-4*n]-o]<=i&&Or[255+o-a]<=i&&Or[255+a-s]<=i&&Or[255+h-c]<=i&&Or[255+c-u]<=i&&Or[255+u-l]<=i}function Ue(t,e,n,r){var i=2*r+1;for(r=0;16>r;++r)je(t,e+r,n,i)&&Fe(t,e+r,n)}function Ve(t,e,n,r){var i=2*r+1;for(r=0;16>r;++r)je(t,e+r*n,1,i)&&Fe(t,e+r*n,1)}function qe(t,e,n,r){var i;for(i=3;0<i;--i)Ue(t,e+=4*n,n,r)}function Ge(t,e,n,r){var i;for(i=3;0<i;--i)Ve(t,e+=4,n,r)}function We(t,e,n,r,i,o,a,s){for(o=2*o+1;0<i--;){if(Ze(t,e,n,o,a))if(Be(t,e,n,s))Fe(t,e,n);else{var l=t,u=e,c=n,h=l[u-2*c],f=l[u-c],p=l[u+0],d=l[u+c],m=l[u+2*c],g=27*(y=Lr[1020+3*(p-f)+Lr[1020+h-d]])+63>>7,v=18*y+63>>7,y=9*y+63>>7;l[u-3*c]=Nr[255+l[u-3*c]+y],l[u-2*c]=Nr[255+h+v],l[u-c]=Nr[255+f+g],l[u+0]=Nr[255+p-g],l[u+c]=Nr[255+d-v],l[u+2*c]=Nr[255+m-y]}e+=r}}function He(t,e,n,r,i,o,a,s){for(o=2*o+1;0<i--;){if(Ze(t,e,n,o,a))if(Be(t,e,n,s))Fe(t,e,n);else{var l=t,u=e,c=n,h=l[u-c],f=l[u+0],p=l[u+c],d=Rr[112+(4+(m=3*(f-h))>>3)],m=Rr[112+(m+3>>3)],g=d+1>>1;l[u-2*c]=Nr[255+l[u-2*c]+g],l[u-c]=Nr[255+h+m],l[u+0]=Nr[255+f-d],l[u+c]=Nr[255+p-g]}e+=r}}function Xe(t,e,n,r,i,o){We(t,e,n,1,16,r,i,o)}function Ye(t,e,n,r,i,o){We(t,e,1,n,16,r,i,o)}function $e(t,e,n,r,i,o){var a;for(a=3;0<a;--a)He(t,e+=4*n,n,1,16,r,i,o)}function Ke(t,e,n,r,i,o){var a;for(a=3;0<a;--a)He(t,e+=4,1,n,16,r,i,o)}function Je(t,e,n,r,i,o,a,s){We(t,e,i,1,8,o,a,s),We(n,r,i,1,8,o,a,s)}function Qe(t,e,n,r,i,o,a,s){We(t,e,1,i,8,o,a,s),We(n,r,1,i,8,o,a,s)}function tn(t,e,n,r,i,o,a,s){He(t,e+4*i,i,1,8,o,a,s),He(n,r+4*i,i,1,8,o,a,s)}function en(t,e,n,r,i,o,a,s){He(t,e+4,1,i,8,o,a,s),He(n,r+4,1,i,8,o,a,s)}function nn(){this.ba=new at,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new lt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function on(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function an(){this.ua=0,this.Wa=new O,this.vb=new O,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new p,this.yc=new h}function sn(){this.xb=this.a=0,this.l=new Wt,this.ca=new at,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new b,this.Pb=0,this.wd=new b,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new an,this.ab=0,this.gc=a(4,on),this.Oc=0}function ln(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Wt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function un(t,e,n,r,i,o,a){for(t=null==t?0:t[e+0],e=0;e<a;++e)i[o+e]=t+n[r+e]&255,t=i[o+e]}function cn(t,e,n,r,i,o,a){var s;if(null==t)un(null,null,n,r,i,o,a);else for(s=0;s<a;++s)i[o+s]=t[e+s]+n[r+s]&255}function hn(t,e,n,r,i,o,a){if(null==t)un(null,null,n,r,i,o,a);else{var s,l=t[e+0],u=l,c=l;for(s=0;s<a;++s)u=c+(l=t[e+s])-u,c=n[r+s]+(-256&u?0>u?0:255:u)&255,u=l,i[o+s]=c}}function fn(t,n,i,a){var s=n.width,l=n.o;if(e(null!=t&&null!=n),0>i||0>=a||i+a>l)return null;if(!t.Cc){if(null==t.ga){var u;if(t.ga=new ln,(u=null==t.ga)||(u=n.width*n.o,e(0==t.Gb.length),t.Gb=o(u),t.Uc=0,null==t.Gb?u=0:(t.mb=t.Gb,t.nb=t.Uc,t.rc=null,u=1),u=!u),!u){u=t.ga;var c=t.Fa,h=t.P,f=t.qc,p=t.mb,d=t.nb,m=h+1,g=f-1,y=u.l;if(e(null!=c&&null!=p&&null!=n),gi[0]=null,gi[1]=un,gi[2]=cn,gi[3]=hn,u.ca=p,u.tb=d,u.c=n.width,u.i=n.height,e(0<u.c&&0<u.i),1>=f)n=0;else if(u.$a=c[h+0]>>0&3,u.Z=c[h+0]>>2&3,u.Lc=c[h+0]>>4&3,h=c[h+0]>>6&3,0>u.$a||1<u.$a||4<=u.Z||1<u.Lc||h)n=0;else if(y.put=pt,y.ac=ft,y.bc=dt,y.ma=u,y.width=n.width,y.height=n.height,y.Da=n.Da,y.v=n.v,y.va=n.va,y.j=n.j,y.o=n.o,u.$a)t:{e(1==u.$a),n=At();e:for(;;){if(null==n){n=0;break t}if(e(null!=u),u.mc=n,n.c=u.c,n.i=u.i,n.l=u.l,n.l.ma=u,n.l.width=u.c,n.l.height=u.i,n.a=0,v(n.m,c,m,g),!Pt(u.c,u.i,1,n,null))break e;if(1==n.ab&&3==n.gc[0].hc&&kt(n.s)?(u.ic=1,c=n.c*n.i,n.Ta=null,n.Ua=0,n.V=o(c),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(u.ic=0,n=Tt(n,u.c)),!n)break e;n=1;break t}u.mc=null,n=0}else n=g>=u.c*u.i;u=!n}if(u)return null;1!=t.ga.Lc?t.Ga=0:a=l-i}e(null!=t.ga),e(i+a<=l);t:{if(n=(c=t.ga).c,l=c.l.o,0==c.$a){if(m=t.rc,g=t.Vc,y=t.Fa,h=t.P+1+i*n,f=t.mb,p=t.nb+i*n,e(h<=t.P+t.qc),0!=c.Z)for(e(null!=gi[c.Z]),u=0;u<a;++u)gi[c.Z](m,g,y,h,f,p,n),m=f,g=p,p+=n,h+=n;else for(u=0;u<a;++u)r(f,p,y,h,n),m=f,g=p,p+=n,h+=n;t.rc=m,t.Vc=g}else{if(e(null!=c.mc),n=i+a,e(null!=(u=c.mc)),e(n<=u.i),u.C>=n)n=1;else if(c.ic||vn(),c.ic){c=u.V,m=u.Ba,g=u.c;var _=u.i,x=(y=1,h=u.$/g,f=u.$%g,p=u.m,d=u.s,u.$),b=g*_,w=g*n,S=d.wc,I=x<w?xt(d,f,h):null;e(x<=b),e(n<=_),e(kt(d));e:for(;;){for(;!p.h&&x<w;){if(f&S||(I=xt(d,f,h)),e(null!=I),E(p),256>(_=yt(I.G[0],I.H[0],p)))c[m+x]=_,++x,++f>=g&&(f=0,++h<=n&&!(h%16)&&Et(u,h));else{if(!(280>_)){y=0;break e}_=gt(_-256,p);var C,A=yt(I.G[4],I.H[4],p);if(E(p),!(x>=(A=vt(g,A=gt(A,p)))&&b-x>=_)){y=0;break e}for(C=0;C<_;++C)c[m+x+C]=c[m+x+C-A];for(x+=_,f+=_;f>=g;)f-=g,++h<=n&&!(h%16)&&Et(u,h);x<w&&f&S&&(I=xt(d,f,h))}e(p.h==k(p))}Et(u,h>n?n:h);break e}!y||p.h&&x<b?(y=0,u.a=p.h?5:3):u.$=x,n=y}else n=It(u,u.V,u.Ba,u.c,u.i,n,Mt);if(!n){a=0;break t}}i+a>=l&&(t.Cc=1),a=1}if(!a)return null;if(t.Cc&&(null!=(a=t.ga)&&(a.mc=null),t.ga=null,0<t.Ga))return alert("todo:WebPDequantizeLevels"),null}return t.nb+i*s}function pn(t,e,n,r,i,o){for(;0<i--;){var a,s=t,l=e+(n?1:0),u=t,c=e+(n?0:3);for(a=0;a<r;++a){var h=u[c+4*a];255!=h&&(h*=32897,s[l+4*a+0]=s[l+4*a+0]*h>>23,s[l+4*a+1]=s[l+4*a+1]*h>>23,s[l+4*a+2]=s[l+4*a+2]*h>>23)}e+=o}}function dn(t,e,n,r,i){for(;0<r--;){var o;for(o=0;o<n;++o){var a=t[e+2*o+0],s=15&(u=t[e+2*o+1]),l=4369*s,u=(240&u|u>>4)*l>>16;t[e+2*o+0]=(240&a|a>>4)*l>>16&240|(15&a|a<<4)*l>>16>>4&15,t[e+2*o+1]=240&u|s}e+=i}}function mn(t,e,n,r,i,o,a,s){var l,u,c=255;for(u=0;u<i;++u){for(l=0;l<r;++l){var h=t[e+l];o[a+4*l]=h,c&=h}e+=n,a+=s}return 255!=c}function gn(t,e,n,r,i){var o;for(o=0;o<i;++o)n[r+o]=t[e+o]>>8}function vn(){kr=pn,Sr=dn,Er=mn,Ir=gn}function yn(n,r,i){t[n]=function(t,n,o,a,s,l,u,c,h,f,p,d,m,g,v,y,_){var x,b=_-1>>1,w=s[l+0]|u[c+0]<<16,k=h[f+0]|p[d+0]<<16;e(null!=t);var S=3*w+k+131074>>2;for(r(t[n+0],255&S,S>>16,m,g),null!=o&&(S=3*k+w+131074>>2,r(o[a+0],255&S,S>>16,v,y)),x=1;x<=b;++x){var E=s[l+x]|u[c+x]<<16,I=h[f+x]|p[d+x]<<16,C=w+E+k+I+524296,A=C+2*(E+k)>>3;S=A+w>>1,w=(C=C+2*(w+I)>>3)+E>>1,r(t[n+2*x-1],255&S,S>>16,m,g+(2*x-1)*i),r(t[n+2*x-0],255&w,w>>16,m,g+(2*x-0)*i),null!=o&&(S=C+k>>1,w=A+I>>1,r(o[a+2*x-1],255&S,S>>16,v,y+(2*x-1)*i),r(o[a+2*x+0],255&w,w>>16,v,y+(2*x+0)*i)),w=E,k=I}1&_||(S=3*w+k+131074>>2,r(t[n+_-1],255&S,S>>16,m,g+(_-1)*i),null!=o&&(S=3*k+w+131074>>2,r(o[a+_-1],255&S,S>>16,v,y+(_-1)*i)))}}function _n(){vi[zr]=yi,vi[Dr]=xi,vi[Fr]=_i,vi[Br]=bi,vi[jr]=wi,vi[Zr]=ki,vi[Ur]=Si,vi[Vr]=xi,vi[qr]=bi,vi[Gr]=wi,vi[Wr]=ki}function xn(t){return t&~Ti?0>t?0:255:t>>Pi}function bn(t,e){return xn((19077*t>>8)+(26149*e>>8)-14234)}function wn(t,e,n){return xn((19077*t>>8)-(6419*e>>8)-(13320*n>>8)+8708)}function kn(t,e){return xn((19077*t>>8)+(33050*e>>8)-17685)}function Sn(t,e,n,r,i){r[i+0]=bn(t,n),r[i+1]=wn(t,e,n),r[i+2]=kn(t,e)}function En(t,e,n,r,i){r[i+0]=kn(t,e),r[i+1]=wn(t,e,n),r[i+2]=bn(t,n)}function In(t,e,n,r,i){var o=wn(t,e,n);e=o<<3&224|kn(t,e)>>3,r[i+0]=248&bn(t,n)|o>>5,r[i+1]=e}function Cn(t,e,n,r,i){var o=240&kn(t,e)|15;r[i+0]=240&bn(t,n)|wn(t,e,n)>>4,r[i+1]=o}function An(t,e,n,r,i){r[i+0]=255,Sn(t,e,n,r,i+1)}function Pn(t,e,n,r,i){En(t,e,n,r,i),r[i+3]=255}function Tn(t,e,n,r,i){Sn(t,e,n,r,i),r[i+3]=255}function Gt(t,e){return 0>t?0:t>e?e:t}function Mn(e,n,r){t[e]=function(t,e,i,o,a,s,l,u,c){for(var h=u+(-2&c)*r;u!=h;)n(t[e+0],i[o+0],a[s+0],l,u),n(t[e+1],i[o+0],a[s+0],l,u+r),e+=2,++o,++s,u+=2*r;1&c&&n(t[e+0],i[o+0],a[s+0],l,u)}}function Ln(t,e,n){return 0==n?0==t?0==e?6:5:0==e?4:0:n}function Rn(t,e,n,r,i){switch(t>>>30){case 3:ar(e,n,r,i,0);break;case 2:sr(e,n,r,i);break;case 1:ur(e,n,r,i)}}function Nn(t,e){var n,o,a=e.M,s=e.Nb,l=t.oc,u=t.pc+40,c=t.oc,h=t.pc+584,f=t.oc,p=t.pc+600;for(n=0;16>n;++n)l[u+32*n-1]=129;for(n=0;8>n;++n)c[h+32*n-1]=129,f[p+32*n-1]=129;for(0<a?l[u-1-32]=c[h-1-32]=f[p-1-32]=129:(i(l,u-32-1,127,21),i(c,h-32-1,127,9),i(f,p-32-1,127,9)),o=0;o<t.za;++o){var d=e.ya[e.aa+o];if(0<o){for(n=-1;16>n;++n)r(l,u+32*n-4,l,u+32*n+12,4);for(n=-1;8>n;++n)r(c,h+32*n-4,c,h+32*n+4,4),r(f,p+32*n-4,f,p+32*n+4,4)}var m=t.Gd,g=t.Hd+o,v=d.ad,y=d.Hc;if(0<a&&(r(l,u-32,m[g].y,0,16),r(c,h-32,m[g].f,0,8),r(f,p-32,m[g].ea,0,8)),d.Za){var _=l,x=u-32+16;for(0<a&&(o>=t.za-1?i(_,x,m[g].y[15],4):r(_,x,m[g+1].y,0,4)),n=0;4>n;n++)_[x+128+n]=_[x+256+n]=_[x+384+n]=_[x+0+n];for(n=0;16>n;++n,y<<=2)_=l,x=u+Fi[n],fi[d.Ob[n]](_,x),Rn(y,v,16*+n,_,x)}else if(_=Ln(o,a,d.Ob[0]),hi[_](l,u),0!=y)for(n=0;16>n;++n,y<<=2)Rn(y,v,16*+n,l,u+Fi[n]);for(n=d.Gc,_=Ln(o,a,d.Dd),pi[_](c,h),pi[_](f,p),y=v,_=c,x=h,255&(d=n>>0)&&(170&d?lr(y,256,_,x):cr(y,256,_,x)),d=f,y=p,255&(n>>=8)&&(170&n?lr(v,320,d,y):cr(v,320,d,y)),a<t.Ub-1&&(r(m[g].y,0,l,u+480,16),r(m[g].f,0,c,h+224,8),r(m[g].ea,0,f,p+224,8)),n=8*s*t.B,m=t.sa,g=t.ta+16*o+16*s*t.R,v=t.qa,d=t.ra+8*o+n,y=t.Ha,_=t.Ia+8*o+n,n=0;16>n;++n)r(m,g+n*t.R,l,u+32*n,16);for(n=0;8>n;++n)r(v,d+n*t.B,c,h+32*n,8),r(y,_+n*t.B,f,p+32*n,8)}}function On(t,r,i,o,a,s,l,u,c){var h=[0],f=[0],p=0,d=null!=c?c.kd:0,m=null!=c?c:new rn;if(null==t||12>i)return 7;m.data=t,m.w=r,m.ha=i,r=[r],i=[i],m.gb=[m.gb];t:{var g=r,y=i,_=m.gb;if(e(null!=t),e(null!=y),e(null!=_),_[0]=0,12<=y[0]&&!n(t,g[0],"RIFF")){if(n(t,g[0]+8,"WEBP")){_=3;break t}var x=L(t,g[0]+4);if(12>x||4294967286<x){_=3;break t}if(d&&x>y[0]-8){_=7;break t}_[0]=x,g[0]+=12,y[0]-=12}_=0}if(0!=_)return _;for(x=0<m.gb[0],i=i[0];;){t:{var w=t;y=r,_=i;var k=h,S=f,E=g=[0];if((A=p=[p])[0]=0,8>_[0])_=7;else{if(!n(w,y[0],"VP8X")){if(10!=L(w,y[0]+4)){_=3;break t}if(18>_[0]){_=7;break t}var I=L(w,y[0]+8),C=1+M(w,y[0]+12);if(2147483648<=C*(w=1+M(w,y[0]+15))){_=3;break t}null!=E&&(E[0]=I),null!=k&&(k[0]=C),null!=S&&(S[0]=w),y[0]+=18,_[0]-=18,A[0]=1}_=0}}if(p=p[0],g=g[0],0!=_)return _;if(y=!!(2&g),!x&&p)return 3;if(null!=s&&(s[0]=!!(16&g)),null!=l&&(l[0]=y),null!=u&&(u[0]=0),l=h[0],g=f[0],p&&y&&null==c){_=0;break}if(4>i){_=7;break}if(x&&p||!x&&!p&&!n(t,r[0],"ALPH")){i=[i],m.na=[m.na],m.P=[m.P],m.Sa=[m.Sa];t:{I=t,_=r,x=i;var A=m.gb;k=m.na,S=m.P,E=m.Sa,C=22,e(null!=I),e(null!=x),w=_[0];var P=x[0];for(e(null!=k),e(null!=E),k[0]=null,S[0]=null,E[0]=0;;){if(_[0]=w,x[0]=P,8>P){_=7;break t}var T=L(I,w+4);if(4294967286<T){_=3;break t}var R=8+T+1&-2;if(C+=R,0<A&&C>A){_=3;break t}if(!n(I,w,"VP8 ")||!n(I,w,"VP8L")){_=0;break t}if(P[0]<R){_=7;break t}n(I,w,"ALPH")||(k[0]=I,S[0]=w+8,E[0]=T),w+=R,P-=R}}if(i=i[0],m.na=m.na[0],m.P=m.P[0],m.Sa=m.Sa[0],0!=_)break}i=[i],m.Ja=[m.Ja],m.xa=[m.xa];t:if(A=t,_=r,x=i,k=m.gb[0],S=m.Ja,E=m.xa,I=_[0],w=!n(A,I,"VP8 "),C=!n(A,I,"VP8L"),e(null!=A),e(null!=x),e(null!=S),e(null!=E),8>x[0])_=7;else{if(w||C){if(A=L(A,I+4),12<=k&&A>k-12){_=3;break t}if(d&&A>x[0]-8){_=7;break t}S[0]=A,_[0]+=8,x[0]-=8,E[0]=C}else E[0]=5<=x[0]&&47==A[I+0]&&!(A[I+4]>>5),S[0]=x[0];_=0}if(i=i[0],m.Ja=m.Ja[0],m.xa=m.xa[0],r=r[0],0!=_)break;if(4294967286<m.Ja)return 3;if(null==u||y||(u[0]=m.xa?2:1),l=[l],g=[g],m.xa){if(5>i){_=7;break}u=l,d=g,y=s,null==t||5>i?t=0:5<=i&&47==t[r+0]&&!(t[r+4]>>5)?(x=[0],A=[0],k=[0],v(S=new b,t,r,i),mt(S,x,A,k)?(null!=u&&(u[0]=x[0]),null!=d&&(d[0]=A[0]),null!=y&&(y[0]=k[0]),t=1):t=0):t=0}else{if(10>i){_=7;break}u=g,null==t||10>i||!Yt(t,r+3,i-3)?t=0:(d=t[r+0]|t[r+1]<<8|t[r+2]<<16,y=16383&(t[r+7]<<8|t[r+6]),t=16383&(t[r+9]<<8|t[r+8]),1&d||3<(d>>1&7)||!(d>>4&1)||d>>5>=m.Ja||!y||!t?t=0:(l&&(l[0]=y),u&&(u[0]=t),t=1))}if(!t)return 3;if(l=l[0],g=g[0],p&&(h[0]!=l||f[0]!=g))return 3;null!=c&&(c[0]=m,c.offset=r-c.w,e(4294967286>r-c.w),e(c.offset==c.ha-i));break}return 0==_||7==_&&p&&null==c?(null!=s&&(s[0]|=null!=m.na&&0<m.na.length),null!=o&&(o[0]=l),null!=a&&(a[0]=g),0):_}function zn(t,e,n){var r=e.width,i=e.height,o=0,a=0,s=r,l=i;if(e.Da=null!=t&&0<t.Da,e.Da&&(s=t.cd,l=t.bd,o=t.v,a=t.j,11>n||(o&=-2,a&=-2),0>o||0>a||0>=s||0>=l||o+s>r||a+l>i))return 0;if(e.v=o,e.j=a,e.va=o+s,e.o=a+l,e.U=s,e.T=l,e.da=null!=t&&0<t.da,e.da){if(!z(s,l,n=[t.ib],o=[t.hb]))return 0;e.ib=n[0],e.hb=o[0]}return e.ob=null!=t&&t.ob,e.Kb=null==t||!t.Sd,e.da&&(e.ob=e.ib<3*r/4&&e.hb<3*i/4,e.Kb=0),1}function Dn(t){if(null==t)return 2;if(11>t.S){var e=t.f.RGBA;e.fb+=(t.height-1)*e.A,e.A=-e.A}else e=t.f.kb,t=t.height,e.O+=(t-1)*e.fa,e.fa=-e.fa,e.N+=(t-1>>1)*e.Ab,e.Ab=-e.Ab,e.W+=(t-1>>1)*e.Db,e.Db=-e.Db,null!=e.F&&(e.J+=(t-1)*e.lb,e.lb=-e.lb);return 0}function Fn(t,e,n,r){if(null==r||0>=t||0>=e)return 2;if(null!=n){if(n.Da){var i=n.cd,a=n.bd,s=-2&n.v,l=-2&n.j;if(0>s||0>l||0>=i||0>=a||s+i>t||l+a>e)return 2;t=i,e=a}if(n.da){if(!z(t,e,i=[n.ib],a=[n.hb]))return 2;t=i[0],e=a[0]}}r.width=t,r.height=e;t:{var u=r.width,c=r.height;if(t=r.S,0>=u||0>=c||!(t>=zr&&13>t))t=2;else{if(0>=r.Rd&&null==r.sd){s=a=i=e=0;var h=(l=u*Ui[t])*c;if(11>t||(a=(c+1)/2*(e=(u+1)/2),12==t&&(s=(i=u)*c)),null==(c=o(h+2*a+s))){t=1;break t}r.sd=c,11>t?((u=r.f.RGBA).eb=c,u.fb=0,u.A=l,u.size=h):((u=r.f.kb).y=c,u.O=0,u.fa=l,u.Fd=h,u.f=c,u.N=0+h,u.Ab=e,u.Cd=a,u.ea=c,u.W=0+h+a,u.Db=e,u.Ed=a,12==t&&(u.F=c,u.J=0+h+2*a),u.Tc=s,u.lb=i)}if(e=1,i=r.S,a=r.width,s=r.height,i>=zr&&13>i)if(11>i)t=r.f.RGBA,e&=(l=Math.abs(t.A))*(s-1)+a<=t.size,e&=l>=a*Ui[i],e&=null!=t.eb;else{t=r.f.kb,l=(a+1)/2,h=(s+1)/2,u=Math.abs(t.fa),c=Math.abs(t.Ab);var f=Math.abs(t.Db),p=Math.abs(t.lb),d=p*(s-1)+a;e&=u*(s-1)+a<=t.Fd,e&=c*(h-1)+l<=t.Cd,e=(e&=f*(h-1)+l<=t.Ed)&u>=a&c>=l&f>=l,e&=null!=t.y,e&=null!=t.f,e&=null!=t.ea,12==i&&(e&=p>=a,e&=d<=t.Tc,e&=null!=t.F)}else e=0;t=e?0:2}}return 0!=t||null!=n&&n.fd&&(t=Dn(r)),t}var Bn=64,jn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Zn=24,Un=32,Vn=8,qn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];B("Predictor0","PredictorAdd0"),t.Predictor0=function(){return 4278190080},t.Predictor1=function(t){return t},t.Predictor2=function(t,e,n){return e[n+0]},t.Predictor3=function(t,e,n){return e[n+1]},t.Predictor4=function(t,e,n){return e[n-1]},t.Predictor5=function(t,e,n){return Z(Z(t,e[n+1]),e[n+0])},t.Predictor6=function(t,e,n){return Z(t,e[n-1])},t.Predictor7=function(t,e,n){return Z(t,e[n+0])},t.Predictor8=function(t,e,n){return Z(e[n-1],e[n+0])},t.Predictor9=function(t,e,n){return Z(e[n+0],e[n+1])},t.Predictor10=function(t,e,n){return Z(Z(t,e[n-1]),Z(e[n+0],e[n+1]))},t.Predictor11=function(t,e,n){var r=e[n+0];return 0>=q(r>>24&255,t>>24&255,(e=e[n-1])>>24&255)+q(r>>16&255,t>>16&255,e>>16&255)+q(r>>8&255,t>>8&255,e>>8&255)+q(255&r,255&t,255&e)?r:t},t.Predictor12=function(t,e,n){var r=e[n+0];return(U((t>>24&255)+(r>>24&255)-((e=e[n-1])>>24&255))<<24|U((t>>16&255)+(r>>16&255)-(e>>16&255))<<16|U((t>>8&255)+(r>>8&255)-(e>>8&255))<<8|U((255&t)+(255&r)-(255&e)))>>>0},t.Predictor13=function(t,e,n){var r=e[n-1];return(V((t=Z(t,e[n+0]))>>24&255,r>>24&255)<<24|V(t>>16&255,r>>16&255)<<16|V(t>>8&255,r>>8&255)<<8|V(t>>0&255,r>>0&255))>>>0};var Gn=t.PredictorAdd0;t.PredictorAdd1=G,B("Predictor2","PredictorAdd2"),B("Predictor3","PredictorAdd3"),B("Predictor4","PredictorAdd4"),B("Predictor5","PredictorAdd5"),B("Predictor6","PredictorAdd6"),B("Predictor7","PredictorAdd7"),B("Predictor8","PredictorAdd8"),B("Predictor9","PredictorAdd9"),B("Predictor10","PredictorAdd10"),B("Predictor11","PredictorAdd11"),B("Predictor12","PredictorAdd12"),B("Predictor13","PredictorAdd13");var Wn=t.PredictorAdd2;Y("ColorIndexInverseTransform","MapARGB","32b",(function(t){return t>>8&255}),(function(t){return t})),Y("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(t){return t}),(function(t){return t>>8&255}));var Hn,Xn=t.ColorIndexInverseTransform,Yn=t.MapARGB,$n=t.VP8LColorIndexInverseTransformAlpha,Kn=t.MapAlpha,Jn=t.VP8LPredictorsAdd=[];Jn.length=16,(t.VP8LPredictors=[]).length=16,(t.VP8LPredictorsAdd_C=[]).length=16,(t.VP8LPredictors_C=[]).length=16;var Qn,tr,er,nr,rr,ir,or,ar,sr,lr,ur,cr,hr,fr,pr,dr,mr,gr,vr,yr,_r,xr,br,wr,kr,Sr,Er,Ir,Cr=o(511),Ar=o(2041),Pr=o(225),Tr=o(767),Mr=0,Lr=Ar,Rr=Pr,Nr=Tr,Or=Cr,zr=0,Dr=1,Fr=2,Br=3,jr=4,Zr=5,Ur=6,Vr=7,qr=8,Gr=9,Wr=10,Hr=[2,3,7],Xr=[3,3,11],Yr=[280,256,256,256,40],$r=[0,1,1,1,0],Kr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Jr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Qr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ti=8,ei=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ni=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ri=null,ii=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],oi=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ai=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],si=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],li=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ui=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ci=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],hi=[],fi=[],pi=[],di=1,mi=2,gi=[],vi=[];yn("UpsampleRgbLinePair",Sn,3),yn("UpsampleBgrLinePair",En,3),yn("UpsampleRgbaLinePair",Tn,4),yn("UpsampleBgraLinePair",Pn,4),yn("UpsampleArgbLinePair",An,4),yn("UpsampleRgba4444LinePair",Cn,2),yn("UpsampleRgb565LinePair",In,2);var yi=t.UpsampleRgbLinePair,_i=t.UpsampleBgrLinePair,xi=t.UpsampleRgbaLinePair,bi=t.UpsampleBgraLinePair,wi=t.UpsampleArgbLinePair,ki=t.UpsampleRgba4444LinePair,Si=t.UpsampleRgb565LinePair,Ei=16,Ii=1<<Ei-1,Ci=-227,Ai=482,Pi=6,Ti=(256<<Pi)-1,Mi=0,Li=o(256),Ri=o(256),Ni=o(256),Oi=o(256),zi=o(Ai-Ci),Di=o(Ai-Ci);Mn("YuvToRgbRow",Sn,3),Mn("YuvToBgrRow",En,3),Mn("YuvToRgbaRow",Tn,4),Mn("YuvToBgraRow",Pn,4),Mn("YuvToArgbRow",An,4),Mn("YuvToRgba4444Row",Cn,2),Mn("YuvToRgb565Row",In,2);var Fi=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Bi=[0,2,8],ji=[8,7,6,4,4,2,2,2,1,1,1,1],Zi=1;this.WebPDecodeRGBA=function(t,n,r,i,o){var a=Dr,s=new nn,l=new at;s.ba=l,l.S=a,l.width=[l.width],l.height=[l.height];var u=l.width,c=l.height,h=new st;if(null==h||null==t)var f=2;else e(null!=h),f=On(t,n,r,h.width,h.height,h.Pd,h.Qd,h.format,null);if(0!=f?u=0:(null!=u&&(u[0]=h.width[0]),null!=c&&(c[0]=h.height[0]),u=1),u){l.width=l.width[0],l.height=l.height[0],null!=i&&(i[0]=l.width),null!=o&&(o[0]=l.height);t:{if(i=new Wt,(o=new rn).data=t,o.w=n,o.ha=r,o.kd=1,n=[0],e(null!=o),(0==(t=On(o.data,o.w,o.ha,null,null,null,n,null,o))||7==t)&&n[0]&&(t=4),0==(n=t)){if(e(null!=s),i.data=o.data,i.w=o.w+o.offset,i.ha=o.ha-o.offset,i.put=pt,i.ac=ft,i.bc=dt,i.ma=s,o.xa){if(null==(t=At())){s=1;break t}if(function(t,n){var r=[0],i=[0],o=[0];e:for(;;){if(null==t)return 0;if(null==n)return t.a=2,0;if(t.l=n,t.a=0,v(t.m,n.data,n.w,n.ha),!mt(t.m,r,i,o)){t.a=3;break e}if(t.xb=mi,n.width=r[0],n.height=i[0],!Pt(r[0],i[0],1,t,null))break e;return 1}return e(0!=t.a),0}(t,i)){if(i=0==(n=Fn(i.width,i.height,s.Oa,s.ba))){e:{i=t;n:for(;;){if(null==i){i=0;break e}if(e(null!=i.s.yc),e(null!=i.s.Ya),e(0<i.s.Wb),e(null!=(r=i.l)),e(null!=(o=r.ma)),0!=i.xb){if(i.ca=o.ba,i.tb=o.tb,e(null!=i.ca),!zn(o.Oa,r,Br)){i.a=2;break n}if(!Tt(i,r.width))break n;if(r.da)break n;if((r.da||rt(i.ca.S))&&vn(),11>i.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=i.ca.f.kb.F&&vn()),i.Pb&&0<i.s.ua&&null==i.s.vb.X&&!R(i.s.vb,i.s.Wa.Xa)){i.a=1;break n}i.xb=0}if(!It(i,i.V,i.Ba,i.c,i.i,r.o,wt))break n;o.Dc=i.Ma,i=1;break e}e(0!=i.a),i=0}i=!i}i&&(n=t.a)}else n=t.a}else{if(null==(t=new Ht)){s=1;break t}if(t.Fa=o.na,t.P=o.P,t.qc=o.Sa,$t(t,i)){if(0==(n=Fn(i.width,i.height,s.Oa,s.ba))){if(t.Aa=0,r=s.Oa,e(null!=(o=t)),null!=r){if(0<(u=0>(u=r.Md)?0:100<u?255:255*u/100)){for(c=h=0;4>c;++c)12>(f=o.pb[c]).lc&&(f.ia=u*ji[0>f.lc?0:f.lc]>>3),h|=f.ia;h&&(alert("todo:VP8InitRandom"),o.ia=1)}o.Ga=r.Id,100<o.Ga?o.Ga=100:0>o.Ga&&(o.Ga=0)}Qt(t,i)||(n=t.a)}}else n=t.a}0==n&&null!=s.Oa&&s.Oa.fd&&(n=Dn(s.ba))}s=n}a=0!=s?null:11>a?l.f.RGBA.eb:l.f.kb.y}else a=null;return a};var Ui=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(t,e){for(var n="",r=0;r<4;r++)n+=String.fromCharCode(t[e++]);return n}function c(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16)>>>0}function h(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}new l;var f=[0],p=[0],d=[],m=new l,g=t,v=function(t,e){var n={},r=0,i=!1,o=0,a=0;if(n.frames=[],!function(t,e,n,r){for(var i=0;i<4;i++)if(t[e+i]!="RIFF".charCodeAt(i))return!0;return!1}(t,e)){var s,l;for(h(t,e+=4),e+=8;e<t.length;){var f=u(t,e),p=h(t,e+=4);e+=4;var d=p+(1&p);switch(f){case"VP8 ":case"VP8L":void 0===n.frames[r]&&(n.frames[r]={}),(v=n.frames[r]).src_off=i?a:e-8,v.src_size=o+p+8,r++,i&&(i=!1,o=0,a=0);break;case"VP8X":(v=n.header={}).feature_flags=t[e];var m=e+4;v.canvas_width=1+c(t,m),m+=3,v.canvas_height=1+c(t,m),m+=3;break;case"ALPH":i=!0,o=d+8,a=e-8;break;case"ANIM":(v=n.header).bgcolor=h(t,e),m=e+4,v.loop_count=(s=t)[(l=m)+0]<<0|s[l+1]<<8,m+=2;break;case"ANMF":var g,v;(v=n.frames[r]={}).offset_x=2*c(t,e),e+=3,v.offset_y=2*c(t,e),e+=3,v.width=1+c(t,e),e+=3,v.height=1+c(t,e),e+=3,v.duration=c(t,e),e+=3,g=t[e++],v.dispose=1&g,v.blend=g>>1&1}"ANMF"!=f&&(e+=d)}return n}}(g,0);v.response=g,v.rgbaoutput=!0,v.dataurl=!1;var y=v.header?v.header:null,_=v.frames?v.frames:null;if(y){y.loop_counter=y.loop_count,f=[y.canvas_height],p=[y.canvas_width];for(var x=0;x<_.length&&0!=_[x].blend;x++);}var b=_[0],w=m.WebPDecodeRGBA(g,b.src_off,b.src_size,p,f);b.rgba=w,b.imgwidth=p[0],b.imgheight=f[0];for(var k=0;k<p[0]*f[0]*4;k++)d[k]=w[k];return this.width=p,this.height=f,this.data=d,this}!function(t){var e=function(e,r,l,u){var c=4,h=o;switch(u){case t.image_compression.FAST:c=1,h=i;break;case t.image_compression.MEDIUM:c=6,h=a;break;case t.image_compression.SLOW:c=9,h=s}var f=gt(e=n(e,r,l,h),{level:c});return t.__addimage__.arrayBufferToBinaryString(f)},n=function(t,e,n,r){for(var i,o,a,s=t.length/e,l=new Uint8Array(t.length+s),h=u(),f=0;f<s;f+=1){if(a=f*e,i=t.subarray(a,a+e),r)l.set(r(i,n,o),a+f);else{for(var p,d=h.length,m=[];p<d;p+=1)m[p]=h[p](i,n,o);var g=c(m.concat());l.set(m[g],a+f)}o=i}return l},r=function(t){var e=Array.apply([],t);return e.unshift(0),e},i=function(t,e){var n,r=[],i=t.length;r[0]=1;for(var o=0;o<i;o+=1)n=t[o-e]||0,r[o+1]=t[o]-n+256&255;return r},o=function(t,e,n){var r,i=[],o=t.length;i[0]=2;for(var a=0;a<o;a+=1)r=n&&n[a]||0,i[a+1]=t[a]-r+256&255;return i},a=function(t,e,n){var r,i,o=[],a=t.length;o[0]=3;for(var s=0;s<a;s+=1)r=t[s-e]||0,i=n&&n[s]||0,o[s+1]=t[s]+256-(r+i>>>1)&255;return o},s=function(t,e,n){var r,i,o,a,s=[],u=t.length;s[0]=4;for(var c=0;c<u;c+=1)r=t[c-e]||0,i=n&&n[c]||0,o=n&&n[c-e]||0,a=l(r,i,o),s[c+1]=t[c]-a+256&255;return s},l=function(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),i=Math.abs(t-n),o=Math.abs(t+e-n-n);return r<=i&&r<=o?t:i<=o?e:n},u=function(){return[r,i,o,a,s]},c=function(t){var e=t.map((function(t){return t.reduce((function(t,e){return t+Math.abs(e)}),0)}));return e.indexOf(Math.min.apply(null,e))};t.processPNG=function(n,r,i,o){var a,s,l,u,c,h,f,p,d,m,g,v,y,_,x,b=this.decode.FLATE_DECODE,w="";if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){if(n=(l=new cn(n)).imgData,s=l.bits,a=l.colorSpace,c=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits){d=(p=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,g=new Uint8Array(d*l.colors),m=new Uint8Array(d);var k,S=l.pixelBitlength-l.bits;for(_=0,x=0;_<d;_++){for(y=p[_],k=0;k<S;)g[x++]=y>>>k&255,k+=l.bits;m[_]=y>>>k&255}}if(16===l.bits){d=(p=new Uint32Array(l.decodePixels().buffer)).length,g=new Uint8Array(d*(32/l.pixelBitlength)*l.colors),m=new Uint8Array(d*(32/l.pixelBitlength)),v=l.colors>1,_=0,x=0;for(var E=0;_<d;)y=p[_++],g[x++]=y>>>0&255,v&&(g[x++]=y>>>16&255,y=p[_++],g[x++]=y>>>0&255),m[E++]=y>>>16&255;s=8}o!==t.image_compression.NONE?(n=e(g,l.width*l.colors,l.colors,o),f=e(m,l.width,1,o)):(n=g,f=m,b=void 0)}if(3===l.colorType&&(a=this.color_spaces.INDEXED,h=l.palette,l.transparency.indexed)){var I=l.transparency.indexed,C=0;for(_=0,d=I.length;_<d;++_)C+=I[_];if((C/=255)===d-1&&-1!==I.indexOf(0))u=[I.indexOf(0)];else if(C!==d){for(p=l.decodePixels(),m=new Uint8Array(p.length),_=0,d=p.length;_<d;_++)m[_]=I[p[_]];f=e(m,l.width,1)}}var A=function(e){var n;switch(e){case t.image_compression.FAST:n=11;break;case t.image_compression.MEDIUM:n=13;break;case t.image_compression.SLOW:n=14;break;default:n=12}return n}(o);return b===this.decode.FLATE_DECODE&&(w="/Predictor "+A+" "),w+="/Colors "+c+" /BitsPerComponent "+s+" /Columns "+l.width,(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:i,data:n,index:r,filter:b,decodeParameters:w,transparency:u,palette:h,sMask:f,predictor:A,width:l.width,height:l.height,bitsPerComponent:s,colorSpace:a}}}}(Kt.API),function(t){t.processGIF89A=function(e,n,r,i){var o=new hn(e),a=o.width,s=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:a,height:s},c=new pn(100).encode(u,100);return t.processJPEG.call(this,c,n,r,i)},t.processGIF87A=t.processGIF89A}(Kt.API),dn.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},dn.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(t){xt.log("bit decode error:"+t)}},dn.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var l=this.palette[o>>7-s&1];this.data[a+4*s]=l.blue,this.data[a+4*s+1]=l.green,this.data[a+4*s+2]=l.red,this.data[a+4*s+3]=255}0!==n&&(this.pos+=4-n)}},dn.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var o=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,s=o>>4,l=15&o,u=this.palette[s];if(this.data[a]=u.blue,this.data[a+1]=u.green,this.data[a+2]=u.red,this.data[a+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[a+4]=u.blue,this.data[a+4+1]=u.green,this.data[a+4+2]=u.red,this.data[a+4+3]=255}0!==e&&(this.pos+=4-e)}},dn.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[o]=a.red,this.data[o+1]=a.green,this.data[o+2]=a.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}0!==t&&(this.pos+=4-t)}},dn.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,s=(o>>5&e)/e*255|0,l=(o>>10&e)/e*255|0,u=o>>15?255:0,c=r*this.width*4+4*i;this.data[c]=l,this.data[c+1]=s,this.data[c+2]=a,this.data[c+3]=u}this.pos+=t}},dn.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&e)/e*255|0,l=(a>>5&n)/n*255|0,u=(a>>11)/e*255|0,c=i*this.width*4+4*o;this.data[c]=u,this.data[c+1]=l,this.data[c+2]=s,this.data[c+3]=255}this.pos+=t}},dn.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},dn.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=a}},dn.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var o=new dn(e,!1),a=o.width,s=o.height,l={data:o.getData(),width:a,height:s},u=new pn(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(Kt.API),mn.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var o=new mn(e,!1),a=o.width,s=o.height,l={data:o.getData(),width:a,height:s},u=new pn(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(Kt.API),Kt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,o=new Uint8Array(i/4*3),a=new Uint8Array(i/4),s=0,l=0,u=0;u<i;u+=4){var c=r[u],h=r[u+1],f=r[u+2],p=r[u+3];o[s++]=c,o[s++]=h,o[s++]=f,a[l++]=p}var d=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:d,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Kt.API.setLanguage=function(t){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]&&(this.internal.languageSettings.languageCode=t,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},on=Kt.API,an=on.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),s=e.widths?e.widths:i.metadata.Unicode.widths,l=s.fof?s.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,c=u.fof?u.fof:1,h=!1!==e.doKerning,f=0,p=t.length,d=0,m=s[0]||l,g=[];for(n=0;n<p;n++)r=t.charCodeAt(n),"function"==typeof i.metadata.widthOfString?g.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/o)||0)/1e3):(f=h&&"object"===(0,S.Z)(u[r])&&!isNaN(parseInt(u[r][d],10))?u[r][d]/c:0,g.push((s[r]||m)/l+f)),d=r;return g},sn=on.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return on.processArabic&&(t=on.processArabic(t)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(t,n,i)/n:an.apply(this,arguments).reduce((function(t,e){return t+e}),0)},ln=function(t,e,n,r){for(var i=[],o=0,a=t.length,s=0;o!==a&&s+e[o]<n;)s+=e[o],o++;i.push(t.slice(0,o));var l=o;for(s=0;o!==a;)s+e[o]>r&&(i.push(t.slice(l,o)),s=0,l=o),s+=e[o],o++;return l!==o&&i.push(t.slice(l,o)),i},un=function(t,e,n){n||(n={});var r,i,o,a,s,l,u,c=[],h=[c],f=n.textIndent||0,p=0,d=0,m=t.split(" "),g=an.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?m[0].length+2:n.lineIndent||0){var v=Array(l).join(" "),y=[];m.map((function(t){(t=t.split(/\s*\n/)).length>1?y=y.concat(t.map((function(t,e){return(e&&t.length?"\n":"")+t}))):y.push(t[0])})),m=y,l=sn.apply(this,[v,n])}for(o=0,a=m.length;o<a;o++){var _=0;if(r=m[o],l&&"\n"==r[0]&&(r=r.substr(1),_=1),f+p+(d=(i=an.apply(this,[r,n])).reduce((function(t,e){return t+e}),0))>e||_){if(d>e){for(s=ln.apply(this,[r,i,e-(f+p),e]),c.push(s.shift()),c=[s.pop()];s.length;)h.push([s.shift()]);d=i.slice(r.length-(c[0]?c[0].length:0)).reduce((function(t,e){return t+e}),0)}else c=[r];h.push(c),f=d+l,p=g}else c.push(r),f+=p+d,p=g}return u=l?function(t,e){return(e?v:"")+t.join(" ")}:function(t){return t.join(" ")},h.map(u)},on.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),o=function(t){if(t.widths&&t.kerning)return{widths:t.widths,kerning:t.kerning};var e=this.internal.getFont(t.fontName,t.fontStyle);return e.metadata.Unicode?{widths:e.metadata.Unicode.widths||{0:1},kerning:e.metadata.Unicode.kerning||{}}:{font:e.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=n.lineIndent;var s,l,u=[];for(s=0,l=r.length;s<l;s++)u=u.concat(un.apply(this,[r[s],a,o]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var o=function(t){return"0x"+parseInt(t,10).toString(16)},a=t.__fontmetrics__.compress=function(t){var e,n,i,s,l=["{"];for(var u in t){if(e=t[u],isNaN(parseInt(u,10))?n="'"+u+"'":(u=parseInt(u,10),n=(n=o(u).slice(2)).slice(0,-1)+r[n.slice(-1)]),"number"==typeof e)e<0?(i=o(e).slice(3),s="-"):(i=o(e).slice(2),s=""),i=s+i.slice(0,-1)+r[i.slice(-1)];else{if("object"!==(0,S.Z)(e))throw new Error("Don't know what to do with value type "+(0,S.Z)(e)+".");i=a(e)}l.push(n+i)}return l.push("}"),l.join("")},s=t.__fontmetrics__.uncompress=function(t){if("string"!=typeof t)throw new Error("Invalid argument passed to uncompress.");for(var e,r,i,o,a={},s=1,l=a,u=[],c="",h="",f=t.length-1,p=1;p<f;p+=1)"'"==(o=t[p])?e?(i=e.join(""),e=void 0):e=[]:e?e.push(o):"{"==o?(u.push([l,i]),l={},i=void 0):"}"==o?((r=u.pop())[0][r[1]]=l,i=void 0,l=r[0]):"-"==o?s=-1:void 0===i?n.hasOwnProperty(o)?(c+=n[o],i=parseInt(c,16)*s,s=1,c=""):c+=o:n.hasOwnProperty(o)?(h+=n[o],l[i]=parseInt(h,16)*s,s=1,i=void 0,h=""):h+=o;return a},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},c={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(t){var e=t.font,n=c.Unicode[e.postScriptName];n&&(e.metadata.Unicode={},e.metadata.Unicode.widths=n.widths,e.metadata.Unicode.kerning=n.kerning);var r=u.Unicode[e.postScriptName];r&&(e.metadata.Unicode.encoding=r,e.encoding=r.codePages[0])}])}(Kt.API),function(t){var e=function(t){for(var e=t.length,n=new Uint8Array(e),r=0;r<e;r++)n[r]=t.charCodeAt(r);return n};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,o=n.instance;if(!i.isStandardFont){if(void 0===o)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if("string"!=typeof(r=!1===o.existsFileInVFS(i.postScriptName)?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");!function(n,r){r=/^\x00\x01\x00\x00/.test(r)?e(r):e(St(r)),n.metadata=t.API.TTFFont.open(r),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(i,r)}}])}(Kt),function(t){function e(){return(yt.canvg?Promise.resolve(yt.canvg):n.e(513).then(n.bind(n,6513))).catch((function(t){return Promise.reject(new Error("Could not load canvg: "+t))})).then((function(t){return t.default?t.default:t}))}Kt.API.addSvgAsImage=function(t,n,r,i,o,a,s,l){if(isNaN(n)||isNaN(r))throw xt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw xt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var c=u.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,u.width,u.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then((function(e){return e.fromString(c,t,h)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(t){return t.render(h)})).then((function(){f.addImage(u.toDataURL("image/jpeg",1),n,r,i,o,s,l)}))}}(),Kt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},Kt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,o,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(a),l=[],u=0,c=0,h=0;function f(t,e){var n,r=!1;for(n=0;n<t.length;n+=1)t[n]===e&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===t||!0===e){var p=s.length;for(h=0;h<p;h+=1)n[s[h]].value=n[s[h]].defaultValue,n[s[h]].explicitSet=!1}if("object"===(0,S.Z)(t))for(i in t)if(o=t[i],f(s,i)&&void 0!==o){if("boolean"===n[i].type&&"boolean"==typeof o)n[i].value=o;else if("name"===n[i].type&&f(n[i].valueSet,o))n[i].value=o;else if("integer"===n[i].type&&Number.isInteger(o))n[i].value=o;else if("array"===n[i].type){for(u=0;u<o.length;u+=1)if(r=!0,1===o[u].length&&"number"==typeof o[u][0])l.push(String(o[u]-1));else if(o[u].length>1){for(c=0;c<o[u].length;c+=1)"number"!=typeof o[u][c]&&(r=!1);!0===r&&l.push([o[u][0]-1,o[u][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var t,e=[];for(t in n)!0===n[t].explicitSet&&("name"===n[t].type?e.push("/"+t+" /"+n[t].value):e.push("/"+t+" "+n[t].value));0!==e.length&&this.internal.write("/ViewerPreferences\n<<\n"+e.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var t='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',e=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(t)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),i=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),o=unescape(encodeURIComponent("</x:xmpmeta>")),a=n.length+r.length+i.length+e.length+o.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+a+" >>"),this.internal.write("stream"),this.internal.write(e+n+r+i+o),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(t,r){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:t,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(Kt.API),function(t){var e=t.API,n=e.pdfEscape16=function(t,e){for(var n,r=e.metadata.Unicode.widths,i=["","0","00","000","0000"],o=[""],a=0,s=t.length;a<s;++a){if(n=e.metadata.characterToGlyph(t.charCodeAt(a)),e.metadata.glyIdsUsed.push(n),e.metadata.toUnicode[n]=t.charCodeAt(a),-1==r.indexOf(n)&&(r.push(n),r.push([parseInt(e.metadata.widthOfGlyph(n),10)])),"0"==n)return o.join("");n=n.toString(16),o.push(i[4-n.length],n)}return o.join("")},r=function(t){var e,n,r,i,o,a,s;for(o="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],a=0,s=(n=Object.keys(t).sort((function(t,e){return t-e}))).length;a<s;a++)e=n[a],r.length>=100&&(o+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),void 0!==t[e]&&null!==t[e]&&"function"==typeof t[e].toString&&(i=("0000"+t[e].toString(16)).slice(-4),e=("0000"+(+e).toString(16)).slice(-4),r.push("<"+e+"><"+i+">"));return r.length&&(o+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),o+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};e.events.push(["putFont",function(e){!function(e){var n=e.font,i=e.out,o=e.newObject,a=e.putStream;if(n.metadata instanceof t.API.TTFFont&&"Identity-H"===n.encoding){for(var s=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),u="",c=0;c<l.length;c++)u+=String.fromCharCode(l[c]);var h=o();a({data:u,addLength1:!0,objectId:h}),i("endobj");var f=o();a({data:r(n.metadata.toUnicode),addLength1:!0,objectId:f}),i("endobj");var p=o();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+Gt(n.fontName)),i("/FontFile2 "+h+" 0 R"),i("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),i("/Flags "+n.metadata.flags),i("/StemV "+n.metadata.stemV),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i(">>"),i("endobj");var d=o();i("<<"),i("/Type /Font"),i("/BaseFont /"+Gt(n.fontName)),i("/FontDescriptor "+p+" 0 R"),i("/W "+t.API.PDFObject.convert(s)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+n.encoding+")"),i(">>"),i(">>"),i("endobj"),n.objectNumber=o(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+f+" 0 R"),i("/BaseFont /"+Gt(n.fontName)),i("/Encoding /"+n.encoding),i("/DescendantFonts ["+d+" 0 R]"),i(">>"),i("endobj"),n.isAlreadyPutted=!0}}(e)}]),e.events.push(["putFont",function(e){!function(e){var n=e.font,i=e.out,o=e.newObject,a=e.putStream;if(n.metadata instanceof t.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var s=n.metadata.rawData,l="",u=0;u<s.length;u++)l+=String.fromCharCode(s[u]);var c=o();a({data:l,addLength1:!0,objectId:c}),i("endobj");var h=o();a({data:r(n.metadata.toUnicode),addLength1:!0,objectId:h}),i("endobj");var f=o();i("<<"),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i("/StemV "+n.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+c+" 0 R"),i("/Flags 96"),i("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),i("/FontName /"+Gt(n.fontName)),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i(">>"),i("endobj"),n.objectNumber=o();for(var p=0;p<n.metadata.hmtx.widths.length;p++)n.metadata.hmtx.widths[p]=parseInt(n.metadata.hmtx.widths[p]*(1e3/n.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+h+" 0 R/BaseFont/"+Gt(n.fontName)+"/FontDescriptor "+f+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),i("endobj"),n.isAlreadyPutted=!0}}(e)}]);var i=function(t){var e,r=t.text||"",i=t.x,o=t.y,a=t.options||{},s=t.mutex||{},l=s.pdfEscape,u=s.activeFontKey,c=s.fonts,h=u,f="",p=0,d="",m=c[h].encoding;if("Identity-H"!==c[h].encoding)return{text:r,x:i,y:o,options:a,mutex:s};for(d=r,h=u,Array.isArray(r)&&(d=r[0]),p=0;p<d.length;p+=1)c[h].metadata.hasOwnProperty("cmap")&&(e=c[h].metadata.cmap.unicode.codeMap[d[p].charCodeAt(0)]),e||d[p].charCodeAt(0)<256&&c[h].metadata.hasOwnProperty("Unicode")?f+=d[p]:f+="";var g="";return parseInt(h.slice(1))<14||"WinAnsiEncoding"===m?g=l(f,h).split("").map((function(t){return t.charCodeAt(0).toString(16)})).join(""):"Identity-H"===m&&(g=n(f,c[h])),s.isHex=!0,{text:g,x:i,y:o,options:a,mutex:s}};e.events.push(["postProcessText",function(t){var e=t.text||"",n=[],r={text:e,x:t.x,y:t.y,options:t.options,mutex:t.mutex};if(Array.isArray(e)){var o=0;for(o=0;o<e.length;o+=1)Array.isArray(e[o])&&3===e[o].length?n.push([i(Object.assign({},r,{text:e[o][0]})).text,e[o][1],e[o][2]]):n.push(i(Object.assign({},r,{text:e[o]})).text);t.text=n}else t.text=i(Object.assign({},r,{text:e})).text}])}(Kt),function(t){var e=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]},t.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},t.getFileFromVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]?this.internal.vFS[t]:null}}(Kt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(t){var n,r,i,o,a,s,l,u=e,c=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],f={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},d=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],m=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,v=0;this.__bidiEngine__={};var y=function(t){var e=t.charCodeAt(),n=e>>8,r=p[n];return void 0!==r?u[256*r+(255&e)]:252===n||253===n?"AL":m.test(n)?"L":8===n?"R":"N"},_=function(t){for(var e,n=0;n<t.length;n++){if("L"===(e=y(t.charAt(n))))return!1;if("R"===e)return!0}return!1},x=function(t,e,a,s){var l,u,c,h,f=e[s];switch(f){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"N":case"AN":break;case"EN":g&&(f="AN");break;case"AL":g=!0,f="R";break;case"WS":case"BN":f="N";break;case"CS":s<1||s+1>=e.length||"EN"!==(l=a[s-1])&&"AN"!==l||"EN"!==(u=e[s+1])&&"AN"!==u?f="N":g&&(u="AN"),f=u===l?u:"N";break;case"ES":f="EN"===(l=s>0?a[s-1]:"B")&&s+1<e.length&&"EN"===e[s+1]?"EN":"N";break;case"ET":if(s>0&&"EN"===a[s-1]){f="EN";break}if(g){f="N";break}for(c=s+1,h=e.length;c<h&&"ET"===e[c];)c++;f=c<h&&"EN"===e[c]?"EN":"N";break;case"NSM":if(i&&!o){for(h=e.length,c=s+1;c<h&&"NSM"===e[c];)c++;if(c<h){var p=t[s],d=p>=1425&&p<=2303||64286===p;if(l=e[c],d&&("R"===l||"AL"===l)){f="R";break}}}f=s<1||"B"===(l=e[s-1])?"N":a[s-1];break;case"B":g=!1,n=!0,f=v;break;case"S":r=!0,f="N"}return f},b=function(t,e,n){var r=t.split("");return n&&w(r,n,{hiLevel:v}),r.reverse(),e&&e.reverse(),r.join("")},w=function(t,e,i){var o,a,s,l,u,p=-1,d=t.length,m=0,_=[],b=v?h:c,w=[];for(g=!1,n=!1,r=!1,a=0;a<d;a++)w[a]=y(t[a]);for(s=0;s<d;s++){if(u=m,_[s]=x(t,w,_,s),o=240&(m=b[u][f[_[s]]]),m&=15,e[s]=l=b[m][5],o>0)if(16===o){for(a=p;a<s;a++)e[a]=1;p=-1}else p=-1;if(b[m][6])-1===p&&(p=s);else if(p>-1){for(a=p;a<s;a++)e[a]=l;p=-1}"B"===w[s]&&(e[s]=0),i.hiLevel|=l}r&&function(t,e,n){for(var r=0;r<n;r++)if("S"===t[r]){e[r]=v;for(var i=r-1;i>=0&&"WS"===t[i];i--)e[i]=v}}(w,e,d)},k=function(t,e,r,i,o){if(!(o.hiLevel<t)){if(1===t&&1===v&&!n)return e.reverse(),void(r&&r.reverse());for(var a,s,l,u,c=e.length,h=0;h<c;){if(i[h]>=t){for(l=h+1;l<c&&i[l]>=t;)l++;for(u=h,s=l-1;u<s;u++,s--)a=e[u],e[u]=e[s],e[s]=a,r&&(a=r[u],r[u]=r[s],r[s]=a);h=l}h++}}},S=function(t,e,n){var r=t.split(""),i={hiLevel:v};return n||(n=[]),w(r,n,i),function(t,e,n){if(0!==n.hiLevel&&l)for(var r,i=0;i<t.length;i++)1===e[i]&&(r=d.indexOf(t[i]))>=0&&(t[i]=d[r+1])}(r,n,i),k(2,r,e,n,i),k(1,r,e,n,i),r.join("")};return this.__bidiEngine__.doBidiReorder=function(t,e,n){if(function(t,e){if(e)for(var n=0;n<t.length;n++)e[n]=n;void 0===o&&(o=_(t)),void 0===s&&(s=_(t))}(t,e),i||!a||s)if(i&&a&&o^s)v=o?1:0,t=b(t,e,n);else if(!i&&a&&s)v=o?1:0,t=S(t,e,n),t=b(t,e);else if(!i||o||a||s){if(i&&!a&&o^s)t=b(t,e),o?(v=0,t=S(t,e,n)):(v=1,t=S(t,e,n),t=b(t,e));else if(i&&o&&!a&&s)v=1,t=S(t,e,n),t=b(t,e);else if(!i&&!a&&o^s){var r=l;o?(v=1,t=S(t,e,n),v=0,l=!1,t=S(t,e,n),l=r):(v=0,t=S(t,e,n),t=b(t,e),v=1,l=!1,t=S(t,e,n),l=r,t=b(t,e))}}else v=0,t=S(t,e,n);else v=o?1:0,t=S(t,e,n);return t},this.__bidiEngine__.setOptions=function(t){t&&(i=t.isInputVisual,a=t.isOutputVisual,o=t.isInputRtl,s=t.isOutputRtl,l=t.isSymmetricSwapping)},this.__bidiEngine__.setOptions(t),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(t){var e=t.text,r=(t.x,t.y,t.options||{}),i=(t.mutex,r.lang,[]);if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,n.setOptions(r),"[object Array]"===Object.prototype.toString.call(e)){var o=0;for(i=[],o=0;o<e.length;o+=1)"[object Array]"===Object.prototype.toString.call(e[o])?i.push([n.doBidiReorder(e[o][0]),e[o][1],e[o][2]]):i.push([n.doBidiReorder(e[o])]);t.text=i}else t.text=n.doBidiReorder(e);n.setOptions({isInputVisual:!0})}])}(Kt),Kt.API.TTFFont=function(){function t(t){var e;if(this.rawData=t,e=this.contents=new vn(t),this.contents.pos=4,"ttcf"===e.readString(4))throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new zn(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new yn(this.contents),this.head=new bn(this),this.name=new An(this),this.cmap=new kn(this),this.toUnicode={},this.hhea=new Sn(this),this.maxp=new Pn(this),this.hmtx=new Tn(this),this.post=new In(this),this.os2=new En(this),this.loca=new On(this),this.glyf=new Ln(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var t,e,n,r,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var e,n,r,i;for(i=[],e=0,n=(r=this.bbox).length;e<n;e++)t=r[e],i.push(Math.round(t*this.scaleFactor));return i}.call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),0!=(32768&(e=r>>16))&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(i=this.familyClass)||2===i||3===i||4===i||5===i||7===i,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(t){var e;return(null!=(e=this.cmap.unicode)?e.codeMap[t]:void 0)||0},t.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},t.prototype.widthOfString=function(t,e,n){var r,i,o,a;for(o=0,i=0,a=(t=""+t).length;0<=a?i<a:i>a;i=0<=a?++i:--i)r=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/e)||0;return o*(e/1e3)},t.prototype.lineHeight=function(t,e){var n;return null==e&&(e=!1),n=e?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},t}();var gn,vn=function(){function t(t){this.data=null!=t?t:[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(t){return this.data[this.pos++]=t},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},t.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},t.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},t.prototype.readString=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)n[e]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(t){var e,n,r;for(r=[],e=0,n=t.length;0<=n?e<n:e>n;e=0<=n?++e:--e)r.push(this.writeByte(t.charCodeAt(e)));return r},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(t){return this.writeInt16(t)},t.prototype.readLongLong=function(){var t,e,n,r,i,o,a,s;return t=this.readByte(),e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),a=this.readByte(),s=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^i)+65536*(255^o)+256*(255^a)+(255^s)+1):72057594037927940*t+281474976710656*e+1099511627776*n+4294967296*r+16777216*i+65536*o+256*a+s},t.prototype.writeLongLong=function(t){var e,n;return e=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(t){return this.writeInt32(t)},t.prototype.read=function(t){var e,n;for(e=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)e.push(this.readByte());return e},t.prototype.write=function(t){var e,n,r,i;for(i=[],n=0,r=t.length;n<r;n++)e=t[n],i.push(this.writeByte(e));return i},t}(),yn=function(){var t;function e(t){var e,n,r;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},n=0,r=this.tableCount;0<=r?n<r:n>r;n=0<=r?++n:--n)e={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[e.tag]=e}return e.prototype.encode=function(e){var n,r,i,o,a,s,l,u,c,h,f,p,d;for(d in f=Object.keys(e).length,s=Math.log(2),c=16*Math.floor(Math.log(f)/s),o=Math.floor(c/s),u=16*f-c,(r=new vn).writeInt(this.scalarType),r.writeShort(f),r.writeShort(c),r.writeShort(o),r.writeShort(u),i=16*f,l=r.pos+i,a=null,p=[],e)for(h=e[d],r.writeString(d),r.writeInt(t(h)),r.writeInt(l),r.writeInt(h.length),p=p.concat(h),"head"===d&&(a=l),l+=h.length;l%4;)p.push(0),l++;return r.write(p),n=2981146554-t(r.data),r.pos=a+8,r.writeUInt32(n),r.data},t=function(t){var e,n,r,i;for(t=Mn.call(t);t.length%4;)t.push(0);for(r=new vn(t),n=0,e=0,i=t.length;e<i;e=e+=4)n+=r.readUInt32();return 4294967295&n},e}(),_n={}.hasOwnProperty,xn=function(t,e){for(var n in e)_n.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};gn=function(){function t(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var bn=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return xn(e,gn),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var e;return(e=new vn).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},e}(),wn=function(){function t(t,e){var n,r,i,o,a,s,l,u,c,h,f,p,d,m,g,v,y;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),c=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(s=0;s<256;++s)this.codeMap[s]=t.readByte();break;case 4:for(f=t.readUInt16(),h=f/2,t.pos+=6,i=function(){var e,n;for(n=[],s=e=0;0<=h?e<h:e>h;s=0<=h?++e:--e)n.push(t.readUInt16());return n}(),t.pos+=2,d=function(){var e,n;for(n=[],s=e=0;0<=h?e<h:e>h;s=0<=h?++e:--e)n.push(t.readUInt16());return n}(),l=function(){var e,n;for(n=[],s=e=0;0<=h?e<h:e>h;s=0<=h?++e:--e)n.push(t.readUInt16());return n}(),u=function(){var e,n;for(n=[],s=e=0;0<=h?e<h:e>h;s=0<=h?++e:--e)n.push(t.readUInt16());return n}(),r=(this.length-t.pos+this.offset)/2,a=function(){var e,n;for(n=[],s=e=0;0<=r?e<r:e>r;s=0<=r?++e:--e)n.push(t.readUInt16());return n}(),s=g=0,y=i.length;g<y;s=++g)for(m=i[s],n=v=p=d[s];p<=m?v<=m:v>=m;n=p<=m?++v:--v)0===u[s]?o=n+l[s]:0!==(o=a[u[s]/2+(n-p)-(h-s)]||0)&&(o+=l[s]),this.codeMap[n]=65535&o}t.pos=c}return t.encode=function(t,e){var n,r,i,o,a,s,l,u,c,h,f,p,d,m,g,v,y,_,x,b,w,k,S,E,I,C,A,P,T,M,L,R,N,O,z,D,F,B,j,Z,U,V,q,G,W,H;switch(P=new vn,o=Object.keys(t).sort((function(t,e){return t-e})),e){case"macroman":for(d=0,m=function(){var t=[];for(p=0;p<256;++p)t.push(0);return t}(),v={0:0},i={},T=0,N=o.length;T<N;T++)null==v[q=t[r=o[T]]]&&(v[q]=++d),i[r]={old:t[r],new:v[t[r]]},m[r]=v[t[r]];return P.writeUInt16(1),P.writeUInt16(0),P.writeUInt32(12),P.writeUInt16(0),P.writeUInt16(262),P.writeUInt16(0),P.write(m),{charMap:i,subtable:P.data,maxGlyphID:d+1};case"unicode":for(C=[],c=[],y=0,v={},n={},g=l=null,M=0,O=o.length;M<O;M++)null==v[x=t[r=o[M]]]&&(v[x]=++y),n[r]={old:x,new:v[x]},a=v[x]-r,null!=g&&a===l||(g&&c.push(g),C.push(r),l=a),g=r;for(g&&c.push(g),c.push(65535),C.push(65535),E=2*(S=C.length),k=2*Math.pow(Math.log(S)/Math.LN2,2),h=Math.log(k/2)/Math.LN2,w=2*S-k,s=[],b=[],f=[],p=L=0,z=C.length;L<z;p=++L){if(I=C[p],u=c[p],65535===I){s.push(0),b.push(0);break}if(I-(A=n[I].new)>=32768)for(s.push(0),b.push(2*(f.length+S-p)),r=R=I;I<=u?R<=u:R>=u;r=I<=u?++R:--R)f.push(n[r].new);else s.push(A-I),b.push(0)}for(P.writeUInt16(3),P.writeUInt16(1),P.writeUInt32(12),P.writeUInt16(4),P.writeUInt16(16+8*S+2*f.length),P.writeUInt16(0),P.writeUInt16(E),P.writeUInt16(k),P.writeUInt16(h),P.writeUInt16(w),U=0,D=c.length;U<D;U++)r=c[U],P.writeUInt16(r);for(P.writeUInt16(0),V=0,F=C.length;V<F;V++)r=C[V],P.writeUInt16(r);for(G=0,B=s.length;G<B;G++)a=s[G],P.writeUInt16(a);for(W=0,j=b.length;W<j;W++)_=b[W],P.writeUInt16(_);for(H=0,Z=f.length;H<Z;H++)d=f[H],P.writeUInt16(d);return{charMap:n,subtable:P.data,maxGlyphID:y+1}}},t}(),kn=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return xn(e,gn),e.prototype.tag="cmap",e.prototype.parse=function(t){var e,n,r;for(t.pos=this.offset,this.version=t.readUInt16(),r=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)e=new wn(t,this.offset),this.tables.push(e),e.isUnicode&&null==this.unicode&&(this.unicode=e);return!0},e.encode=function(t,e){var n,r;return null==e&&(e="macroman"),n=wn.encode(t,e),(r=new vn).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},e}(),Sn=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return xn(e,gn),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),En=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return xn(e,gn),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var e,n;for(n=[],e=0;e<10;++e)n.push(t.readByte());return n}(),this.charRange=function(){var e,n;for(n=[],e=0;e<4;++e)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var e,n;for(n=[],e=0;e<2;e=++e)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),In=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return xn(e,gn),e.prototype.tag="post",e.prototype.parse=function(t){var e,n,r;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],r=[];t.pos<this.offset+this.length;)e=t.readByte(),r.push(this.names.push(t.readString(e)));return r;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=function(){var e,n,r;for(r=[],i=e=0,n=this.file.maxp.numGlyphs;0<=n?e<n:e>n;i=0<=n?++e:--e)r.push(t.readUInt32());return r}.call(this)}},e}(),Cn=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},An=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return xn(e,gn),e.prototype.tag="name",e.prototype.parse=function(t){var e,n,r,i,o,a,s,l,u,c,h;for(t.pos=this.offset,t.readShort(),e=t.readShort(),a=t.readShort(),n=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+a+t.readShort()});for(s={},i=u=0,c=n.length;u<c;i=++u)r=n[i],t.pos=r.offset,l=t.readString(r.length),o=new Cn(l,r),null==s[h=r.nameID]&&(s[h]=[]),s[r.nameID].push(o);this.strings=s,this.copyright=s[0],this.fontFamily=s[1],this.fontSubfamily=s[2],this.uniqueSubfamily=s[3],this.fontName=s[4],this.version=s[5];try{this.postscriptName=s[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(t){this.postscriptName=s[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=s[7],this.manufacturer=s[8],this.designer=s[9],this.description=s[10],this.vendorUrl=s[11],this.designerUrl=s[12],this.license=s[13],this.licenseUrl=s[14],this.preferredFamily=s[15],this.preferredSubfamily=s[17],this.compatibleFull=s[18],this.sampleText=s[19]},e}(),Pn=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return xn(e,gn),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),Tn=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return xn(e,gn),e.prototype.tag="hmtx",e.prototype.parse=function(t){var e,n,r,i,o,a,s;for(t.pos=this.offset,this.metrics=[],e=0,a=this.file.hhea.numberOfMetrics;0<=a?e<a:e>a;e=0<=a?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,i;for(i=[],e=n=0;0<=r?n<r:n>r;e=0<=r?++n:--n)i.push(t.readInt16());return i}(),this.widths=function(){var t,e,n,r;for(r=[],t=0,e=(n=this.metrics).length;t<e;t++)i=n[t],r.push(i.advance);return r}.call(this),n=this.widths[this.widths.length-1],s=[],e=o=0;0<=r?o<r:o>r;e=0<=r?++o:--o)s.push(this.widths.push(n));return s},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),Mn=[].slice,Ln=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return xn(e,gn),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var e,n,r,i,o,a,s,l,u,c;return t in this.cache?this.cache[t]:(i=this.file.loca,e=this.file.contents,n=i.indexOf(t),0===(r=i.lengthOf(t))?this.cache[t]=null:(e.pos=this.offset+n,o=(a=new vn(e.read(r))).readShort(),l=a.readShort(),c=a.readShort(),s=a.readShort(),u=a.readShort(),this.cache[t]=-1===o?new Nn(a,l,c,s,u):new Rn(a,o,l,c,s,u),this.cache[t]))},e.prototype.encode=function(t,e,n){var r,i,o,a,s;for(o=[],i=[],a=0,s=e.length;a<s;a++)r=t[e[a]],i.push(o.length),r&&(o=o.concat(r.encode(n)));return i.push(o.length),{table:o,offsets:i}},e}(),Rn=function(){function t(t,e,n,r,i,o){this.raw=t,this.numberOfContours=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Nn=function(){function t(t,e,n,r,i){var o,a;for(this.raw=t,this.xMin=e,this.yMin=n,this.xMax=r,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var t,e,n;for(e=new vn(Mn.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)e.pos=this.glyphOffsets[t];return e.data},t}(),On=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return xn(e,gn),e.prototype.tag="loca",e.prototype.parse=function(t){var e,n;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=0===e?function(){var e,r;for(r=[],n=0,e=this.length;n<e;n+=2)r.push(2*t.readUInt16());return r}.call(this):function(){var e,r;for(r=[],n=0,e=this.length;n<e;n+=4)r.push(t.readUInt32());return r}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,e){for(var n=new Uint32Array(this.offsets.length),r=0,i=0,o=0;o<n.length;++o)if(n[o]=r,i<e.length&&e[i]==o){++i,n[o]=r;var a=this.offsets[o],s=this.offsets[o+1]-a;s>0&&(r+=s)}for(var l=new Array(4*n.length),u=0;u<n.length;++u)l[4*u+3]=255&n[u],l[4*u+2]=(65280&n[u])>>8,l[4*u+1]=(16711680&n[u])>>16,l[4*u]=(4278190080&n[u])>>24;return l},e}(),zn=function(){function t(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var t,e,n,r,i;for(e in r=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[e],t[e]=r[n];return t},t.prototype.glyphsFor=function(t){var e,n,r,i,o,a,s;for(r={},o=0,a=t.length;o<a;o++)r[i=t[o]]=this.font.glyf.glyphFor(i);for(i in e=[],r)(null!=(n=r[i])?n.compound:void 0)&&e.push.apply(e,n.glyphIDs);if(e.length>0)for(i in s=this.glyphsFor(e))n=s[i],r[i]=n;return r},t.prototype.encode=function(t,e){var n,r,i,o,a,s,l,u,c,h,f,p,d,m,g;for(r in n=kn.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),f={0:0},g=n.charMap)f[(s=g[r]).old]=s.new;for(p in h=n.maxGlyphID,o)p in f||(f[p]=h++);return u=function(t){var e,n;for(e in n={},t)n[t[e]]=e;return n}(f),c=Object.keys(u).sort((function(t,e){return t-e})),d=function(){var t,e,n;for(n=[],t=0,e=c.length;t<e;t++)a=c[t],n.push(u[a]);return n}(),i=this.font.glyf.encode(o,d,f),l=this.font.loca.encode(i.offsets,d),m={cmap:this.font.cmap.raw(),glyf:i.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(m["OS/2"]=this.font.os2.raw()),this.font.directory.encode(m)},t}();Kt.API.PDFObject=function(){var t;function e(){}return t=function(t,e){return(Array(e+1).join("0")+t).slice(-e)},e.convert=function(n){var r,i,o,a;if(Array.isArray(n))return"["+function(){var t,i,o;for(o=[],t=0,i=n.length;t<i;t++)r=n[t],o.push(e.convert(r));return o}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(i in o=["<<"],n)a=n[i],o.push("/"+i+" "+e.convert(a));return o.push(">>"),o.join("\n")}return""+n},e}();var Dn=Kt,Fn=n(9958),Bn=n(76),jn=n(1688),Zn=(n(1975),n(5438)),Un=n(125),Vn=e.useInsertionEffect?e.useInsertionEffect:t.useLayoutEffect,qn=(0,jn.w)((function(e,n){var r=e.styles,i=(0,Un.O)([r],void 0,(0,t.useContext)(jn.T)),o=(0,t.useRef)();return Vn((function(){var t=n.key+"-global",e=new n.sheet.constructor({key:t,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),r=!1,a=document.querySelector('style[data-emotion="'+t+" "+i.name+'"]');return n.sheet.tags.length&&(e.before=n.sheet.tags[0]),null!==a&&(r=!0,a.setAttribute("data-emotion",t),e.hydrate([a])),o.current=[e,r],function(){e.flush()}}),[n]),Vn((function(){var t=o.current,e=t[0];if(t[1])t[1]=!1;else{if(void 0!==i.next&&(0,Zn.My)(n,i.next,!0),e.tags.length){var r=e.tags[e.tags.length-1].nextElementSibling;e.before=r,e.flush()}n.insert("",i,e,!1)}}),[n,i.name]),null}));function Gn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,Un.O)(e)}var Wn=function(){var t=Gn.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var Hn=n(4434),Xn=n.n(Hn),Yn=n(3366),$n=n(7462),Kn=n(8182),Jn=n(5735);function Qn(t,e,n){var r={};return Object.keys(t).forEach((function(i){r[i]=t[i].reduce((function(t,r){return r&&(n&&n[r]&&t.push(n[r]),t.push(e(r))),t}),[]).join(" ")})),r}var tr=n(6189);function er(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)}function nr(t){if(t.type)return t;if("#"===t.charAt(0))return nr(function(t){t=t.slice(1);var e=new RegExp(".{1,".concat(t.length>=6?2:1,"}"),"g"),n=t.match(e);return n&&1===n[0].length&&(n=n.map((function(t){return t+t}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(t,e){return e<3?parseInt(t,16):Math.round(parseInt(t,16)/255*1e3)/1e3})).join(", "),")"):""}(t));var e=t.indexOf("("),n=t.substring(0,e);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,tr.Z)(9,t));var r,i=t.substring(e+1,t.length-1);if("color"===n){if(r=(i=i.split(" ")).shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,tr.Z)(10,r))}else i=i.split(",");return{type:n,values:i=i.map((function(t){return parseFloat(t)})),colorSpace:r}}function rr(t){var e=t.type,n=t.colorSpace,r=t.values;return-1!==e.indexOf("rgb")?r=r.map((function(t,e){return e<3?parseInt(t,10):t})):-1!==e.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==e.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(e,"(").concat(r,")")}function ir(t){var e="hsl"===(t=nr(t)).type?nr(function(t){var e=(t=nr(t)).values,n=e[0],r=e[1]/100,i=e[2]/100,o=r*Math.min(i,1-i),a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+n/30)%12;return i-o*Math.max(Math.min(e-3,9-e,1),-1)},s="rgb",l=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===t.type&&(s+="a",l.push(e[3])),rr({type:s,values:l})}(t)).values:t.values;return e=e.map((function(e){return"color"!==t.type&&(e/=255),e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function or(t,e){return t=nr(t),e=er(e),"rgb"!==t.type&&"hsl"!==t.type||(t.type+="a"),"color"===t.type?t.values[3]="/".concat(e):t.values[3]=e,rr(t)}function ar(t,e){if(t=nr(t),e=er(e),-1!==t.type.indexOf("hsl"))t.values[2]*=1-e;else if(-1!==t.type.indexOf("rgb")||-1!==t.type.indexOf("color"))for(var n=0;n<3;n+=1)t.values[n]*=1-e;return rr(t)}function sr(t,e){if(t=nr(t),e=er(e),-1!==t.type.indexOf("hsl"))t.values[2]+=(100-t.values[2])*e;else if(-1!==t.type.indexOf("rgb"))for(var n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(-1!==t.type.indexOf("color"))for(var r=0;r<3;r+=1)t.values[r]+=(1-t.values[r])*e;return rr(t)}var lr=n(5917),ur=n(2466),cr=["values","unit","step"];function hr(t){var e=t.values,n=void 0===e?{xs:0,sm:600,md:900,lg:1200,xl:1536}:e,r=t.unit,i=void 0===r?"px":r,o=t.step,a=void 0===o?5:o,s=(0,Yn.Z)(t,cr),l=function(t){var e=Object.keys(t).map((function(e){return{key:e,val:t[e]}}))||[];return e.sort((function(t,e){return t.val-e.val})),e.reduce((function(t,e){return(0,$n.Z)({},t,(0,c.Z)({},e.key,e.val))}),{})}(n),u=Object.keys(l);function h(t){var e="number"===typeof n[t]?n[t]:t;return"@media (min-width:".concat(e).concat(i,")")}function f(t){var e="number"===typeof n[t]?n[t]:t;return"@media (max-width:".concat(e-a/100).concat(i,")")}function p(t,e){var r=u.indexOf(e);return"@media (min-width:".concat("number"===typeof n[t]?n[t]:t).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[u[r]]?n[u[r]]:e)-a/100).concat(i,")")}return(0,$n.Z)({keys:u,values:l,up:h,down:f,between:p,only:function(t){return u.indexOf(t)+1<u.length?p(t,u[u.indexOf(t)+1]):h(t)},not:function(t){var e=u.indexOf(t);return 0===e?h(u[1]):e===u.length-1?f(u[e]):p(t,u[u.indexOf(t)+1]).replace("@media","@media not all and")},unit:i},s)}var fr={borderRadius:4},pr={xs:0,sm:600,md:900,lg:1200,xl:1536},dr={keys:["xs","sm","md","lg","xl"],up:function(t){return"@media (min-width:".concat(pr[t],"px)")}};function mr(t,e,n){var r=t.theme||{};if(Array.isArray(e)){var i=r.breakpoints||dr;return e.reduce((function(t,r,o){return t[i.up(i.keys[o])]=n(e[o]),t}),{})}if("object"===typeof e){var o=r.breakpoints||dr;return Object.keys(e).reduce((function(t,r){if(-1!==Object.keys(o.values||pr).indexOf(r)){t[o.up(r)]=n(e[r],r)}else{var i=r;t[i]=e[i]}return t}),{})}return n(e)}function gr(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==e||null==(t=e.keys)?void 0:t.reduce((function(t,n){return t[e.up(n)]={},t}),{});return n||{}}function vr(t,e){return t.reduce((function(t,e){var n=t[e];return(!n||0===Object.keys(n).length)&&delete t[e],t}),e)}var yr=n(7312);function _r(t,e){if(!e||"string"!==typeof e)return null;if(t&&t.vars){var n="vars.".concat(e).split(".").reduce((function(t,e){return t&&t[e]?t[e]:null}),t);if(null!=n)return n}return e.split(".").reduce((function(t,e){return t&&t[e]?t[e]:null}),t)}function xr(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof t?t(n):Array.isArray(t)?t[n]||i:_r(t,n)||i,e&&(r=e(r)),r}var br=function(t){var e=t.prop,n=t.cssProperty,r=void 0===n?t.prop:n,i=t.themeKey,o=t.transform,a=function(t){if(null==t[e])return null;var n=t[e],a=_r(t.theme,i)||{};return mr(t,n,(function(t){var n=xr(a,o,t);return t===n&&"string"===typeof t&&(n=xr(a,o,"".concat(e).concat("default"===t?"":(0,yr.Z)(t)),t)),!1===r?n:(0,c.Z)({},r,n)}))};return a.propTypes={},a.filterProps=[e],a};var wr=function(t,e){return e?(0,ur.Z)(t,e,{clone:!1}):t};var kr={m:"margin",p:"padding"},Sr={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Er={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Ir=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}((function(t){if(t.length>2){if(!Er[t])return[t];t=Er[t]}var e=t.split(""),n=(0,i.Z)(e,2),r=n[0],o=n[1],a=kr[r],s=Sr[o]||"";return Array.isArray(s)?s.map((function(t){return a+t})):[a+s]})),Cr=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Ar=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],Pr=[].concat(Cr,Ar);function Tr(t,e,n,r){var i=_r(t,e)||n;return"number"===typeof i?function(t){return"string"===typeof t?t:i*t}:Array.isArray(i)?function(t){return"string"===typeof t?t:i[t]}:"function"===typeof i?i:function(){}}function Mr(t){return Tr(t,"spacing",8)}function Lr(t,e){if("string"===typeof e||null==e)return e;var n=t(Math.abs(e));return e>=0?n:"number"===typeof n?-n:"-".concat(n)}function Rr(t,e,n,r){if(-1===e.indexOf(n))return null;var i=function(t,e){return function(n){return t.reduce((function(t,r){return t[r]=Lr(e,n),t}),{})}}(Ir(n),r);return mr(t,t[n],i)}function Nr(t,e){var n=Mr(t.theme);return Object.keys(t).map((function(r){return Rr(t,e,r,n)})).reduce(wr,{})}function Or(t){return Nr(t,Cr)}function zr(t){return Nr(t,Ar)}function Dr(t){return Nr(t,Pr)}Or.propTypes={},Or.filterProps=Cr,zr.propTypes={},zr.filterProps=Ar,Dr.propTypes={},Dr.filterProps=Pr;var Fr=Dr;function Br(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(t.mui)return t;var e=Mr({spacing:t}),n=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=0===n.length?[1]:n;return i.map((function(t){var n=e(t);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var jr=["breakpoints","palette","spacing","shape"];var Zr=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.breakpoints,n=void 0===e?{}:e,r=t.palette,i=void 0===r?{}:r,o=t.spacing,a=t.shape,s=void 0===a?{}:a,l=(0,Yn.Z)(t,jr),u=hr(n),c=Br(o),h=(0,ur.Z)({breakpoints:u,direction:"ltr",components:{},palette:(0,$n.Z)({mode:"light"},i),spacing:c,shape:(0,$n.Z)({},fr,s)},l),f=arguments.length,p=new Array(f>1?f-1:0),d=1;d<f;d++)p[d-1]=arguments[d];return h=p.reduce((function(t,e){return(0,ur.Z)(t,e)}),h)},Ur=["variant"];function Vr(t){return 0===t.length}function qr(t){var e=t.variant,n=(0,Yn.Z)(t,Ur),r=e||"";return Object.keys(n).sort().forEach((function(e){r+="color"===e?Vr(r)?t[e]:(0,yr.Z)(t[e]):"".concat(Vr(r)?e:(0,yr.Z)(e)).concat((0,yr.Z)(t[e].toString()))})),r}var Gr=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.reduce((function(t,e){return e.filterProps.forEach((function(n){t[n]=e})),t}),{}),i=function(t){return Object.keys(t).reduce((function(e,n){return r[n]?wr(e,r[n](t)):e}),{})};return i.propTypes={},i.filterProps=e.reduce((function(t,e){return t.concat(e.filterProps)}),[]),i};function Wr(t){return"number"!==typeof t?t:"".concat(t,"px solid")}var Hr=br({prop:"border",themeKey:"borders",transform:Wr}),Xr=br({prop:"borderTop",themeKey:"borders",transform:Wr}),Yr=br({prop:"borderRight",themeKey:"borders",transform:Wr}),$r=br({prop:"borderBottom",themeKey:"borders",transform:Wr}),Kr=br({prop:"borderLeft",themeKey:"borders",transform:Wr}),Jr=br({prop:"borderColor",themeKey:"palette"}),Qr=br({prop:"borderTopColor",themeKey:"palette"}),ti=br({prop:"borderRightColor",themeKey:"palette"}),ei=br({prop:"borderBottomColor",themeKey:"palette"}),ni=br({prop:"borderLeftColor",themeKey:"palette"}),ri=function(t){if(void 0!==t.borderRadius&&null!==t.borderRadius){var e=Tr(t.theme,"shape.borderRadius",4);return mr(t,t.borderRadius,(function(t){return{borderRadius:Lr(e,t)}}))}return null};ri.propTypes={},ri.filterProps=["borderRadius"];var ii=Gr(Hr,Xr,Yr,$r,Kr,Jr,Qr,ti,ei,ni,ri),oi=Gr(br({prop:"displayPrint",cssProperty:!1,transform:function(t){return{"@media print":{display:t}}}}),br({prop:"display"}),br({prop:"overflow"}),br({prop:"textOverflow"}),br({prop:"visibility"}),br({prop:"whiteSpace"})),ai=Gr(br({prop:"flexBasis"}),br({prop:"flexDirection"}),br({prop:"flexWrap"}),br({prop:"justifyContent"}),br({prop:"alignItems"}),br({prop:"alignContent"}),br({prop:"order"}),br({prop:"flex"}),br({prop:"flexGrow"}),br({prop:"flexShrink"}),br({prop:"alignSelf"}),br({prop:"justifyItems"}),br({prop:"justifySelf"})),si=function(t){if(void 0!==t.gap&&null!==t.gap){var e=Tr(t.theme,"spacing",8);return mr(t,t.gap,(function(t){return{gap:Lr(e,t)}}))}return null};si.propTypes={},si.filterProps=["gap"];var li=function(t){if(void 0!==t.columnGap&&null!==t.columnGap){var e=Tr(t.theme,"spacing",8);return mr(t,t.columnGap,(function(t){return{columnGap:Lr(e,t)}}))}return null};li.propTypes={},li.filterProps=["columnGap"];var ui=function(t){if(void 0!==t.rowGap&&null!==t.rowGap){var e=Tr(t.theme,"spacing",8);return mr(t,t.rowGap,(function(t){return{rowGap:Lr(e,t)}}))}return null};ui.propTypes={},ui.filterProps=["rowGap"];var ci=Gr(si,li,ui,br({prop:"gridColumn"}),br({prop:"gridRow"}),br({prop:"gridAutoFlow"}),br({prop:"gridAutoColumns"}),br({prop:"gridAutoRows"}),br({prop:"gridTemplateColumns"}),br({prop:"gridTemplateRows"}),br({prop:"gridTemplateAreas"}),br({prop:"gridArea"})),hi=Gr(br({prop:"position"}),br({prop:"zIndex",themeKey:"zIndex"}),br({prop:"top"}),br({prop:"right"}),br({prop:"bottom"}),br({prop:"left"})),fi=Gr(br({prop:"color",themeKey:"palette"}),br({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),br({prop:"backgroundColor",themeKey:"palette"})),pi=br({prop:"boxShadow",themeKey:"shadows"});function di(t){return t<=1&&0!==t?"".concat(100*t,"%"):t}var mi=br({prop:"width",transform:di}),gi=function(t){if(void 0!==t.maxWidth&&null!==t.maxWidth){return mr(t,t.maxWidth,(function(e){var n,r,i;return{maxWidth:(null==(n=t.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[e])||pr[e]||di(e)}}))}return null};gi.filterProps=["maxWidth"];var vi=br({prop:"minWidth",transform:di}),yi=br({prop:"height",transform:di}),_i=br({prop:"maxHeight",transform:di}),xi=br({prop:"minHeight",transform:di}),bi=(br({prop:"size",cssProperty:"width",transform:di}),br({prop:"size",cssProperty:"height",transform:di}),Gr(mi,gi,vi,yi,_i,xi,br({prop:"boxSizing"}))),wi=br({prop:"fontFamily",themeKey:"typography"}),ki=br({prop:"fontSize",themeKey:"typography"}),Si=br({prop:"fontStyle",themeKey:"typography"}),Ei=br({prop:"fontWeight",themeKey:"typography"}),Ii=br({prop:"letterSpacing"}),Ci=br({prop:"textTransform"}),Ai=br({prop:"lineHeight"}),Pi=br({prop:"textAlign"}),Ti=Gr(br({prop:"typography",cssProperty:!1,themeKey:"typography"}),wi,ki,Si,Ei,Ii,Ai,Pi,Ci),Mi={borders:ii.filterProps,display:oi.filterProps,flexbox:ai.filterProps,grid:ci.filterProps,positions:hi.filterProps,palette:fi.filterProps,shadows:pi.filterProps,sizing:bi.filterProps,spacing:Fr.filterProps,typography:Ti.filterProps},Li={borders:ii,display:oi,flexbox:ai,grid:ci,positions:hi,palette:fi,shadows:pi,sizing:bi,spacing:Fr,typography:Ti};Object.keys(Mi).reduce((function(t,e){return Mi[e].forEach((function(n){t[n]=Li[e]})),t}),{});function Ri(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.reduce((function(t,e){return t.concat(Object.keys(e))}),[]),i=new Set(r);return e.every((function(t){return i.size===Object.keys(t).length}))}function Ni(t,e){return"function"===typeof t?t(e):t}var Oi=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Li,e=Object.keys(t).reduce((function(e,n){return t[n].filterProps.forEach((function(r){e[r]=t[n]})),e}),{});function n(t,n,r){var i,o=(i={},(0,c.Z)(i,t,n),(0,c.Z)(i,"theme",r),i),a=e[t];return a?a(o):(0,c.Z)({},t,n)}function r(t){var i=t||{},o=i.sx,a=i.theme,s=void 0===a?{}:a;if(!o)return null;function l(t){var i=t;if("function"===typeof t)i=t(s);else if("object"!==typeof t)return t;if(!i)return null;var o=gr(s.breakpoints),a=Object.keys(o),l=o;return Object.keys(i).forEach((function(t){var o=Ni(i[t],s);if(null!==o&&void 0!==o)if("object"===typeof o)if(e[t])l=wr(l,n(t,o,s));else{var a=mr({theme:s},o,(function(e){return(0,c.Z)({},t,e)}));Ri(a,o)?l[t]=r({sx:o,theme:s}):l=wr(l,a)}else l=wr(l,n(t,o,s))})),vr(a,l)}return Array.isArray(o)?o.map(l):l(o)}return r}();Oi.filterProps=["sx"];var zi=Oi,Di=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],Fi=["theme"],Bi=["theme"];function ji(t){return 0===Object.keys(t).length}var Zi=function(t,e){return e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null},Ui=function(t,e){var n=[];e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants);var r={};return n.forEach((function(t){var e=qr(t.props);r[e]=t.style})),r},Vi=function(t,e,n,r){var i,o,a=t.ownerState,s=void 0===a?{}:a,l=[],u=null==n||null==(i=n.components)||null==(o=i[r])?void 0:o.variants;return u&&u.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(e){s[e]!==n.props[e]&&t[e]!==n.props[e]&&(r=!1)})),r&&l.push(e[qr(n.props)])})),l};function qi(t){return"ownerState"!==t&&"theme"!==t&&"sx"!==t&&"as"!==t}var Gi=Zr();function Wi(t,e,n){var r;return(0,$n.Z)({toolbar:(r={minHeight:56},(0,c.Z)(r,"".concat(t.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,c.Z)(r,t.up("sm"),{minHeight:64}),r)},n)}var Hi={black:"#000",white:"#fff"},Xi={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Yi={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},$i={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Ki={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Ji={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Qi={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},to={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},eo=["mode","contrastThreshold","tonalOffset"],no={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Hi.white,default:Hi.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},ro={text:{primary:Hi.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Hi.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function io(t,e,n,r){var i=r.light||r,o=r.dark||1.5*r;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:"light"===e?t.light=sr(t.main,i):"dark"===e&&(t.dark=ar(t.main,o)))}function oo(t){var e=t.mode,n=void 0===e?"light":e,r=t.contrastThreshold,i=void 0===r?3:r,o=t.tonalOffset,a=void 0===o?.2:o,s=(0,Yn.Z)(t,eo),l=t.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Ji[200],light:Ji[50],dark:Ji[400]}:{main:Ji[700],light:Ji[400],dark:Ji[800]}}(n),u=t.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Yi[200],light:Yi[50],dark:Yi[400]}:{main:Yi[500],light:Yi[300],dark:Yi[700]}}(n),c=t.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:$i[500],light:$i[300],dark:$i[700]}:{main:$i[700],light:$i[400],dark:$i[800]}}(n),h=t.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Qi[400],light:Qi[300],dark:Qi[700]}:{main:Qi[700],light:Qi[500],dark:Qi[900]}}(n),f=t.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:to[400],light:to[300],dark:to[700]}:{main:to[800],light:to[500],dark:to[900]}}(n),p=t.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Ki[400],light:Ki[300],dark:Ki[700]}:{main:"#ed6c02",light:Ki[500],dark:Ki[900]}}(n);function d(t){var e=function(t,e){var n=ir(t),r=ir(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(t,ro.text.primary)>=i?ro.text.primary:no.text.primary;return e}var m=function(t){var e=t.color,n=t.name,r=t.mainShade,i=void 0===r?500:r,o=t.lightShade,s=void 0===o?300:o,l=t.darkShade,u=void 0===l?700:l;if(!(e=(0,$n.Z)({},e)).main&&e[i]&&(e.main=e[i]),!e.hasOwnProperty("main"))throw new Error((0,tr.Z)(11,n?" (".concat(n,")"):"",i));if("string"!==typeof e.main)throw new Error((0,tr.Z)(12,n?" (".concat(n,")"):"",JSON.stringify(e.main)));return io(e,"light",s,a),io(e,"dark",u,a),e.contrastText||(e.contrastText=d(e.main)),e},g={dark:ro,light:no};return(0,ur.Z)((0,$n.Z)({common:Hi,mode:n,primary:m({color:l,name:"primary"}),secondary:m({color:u,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:c,name:"error"}),warning:m({color:p,name:"warning"}),info:m({color:h,name:"info"}),success:m({color:f,name:"success"}),grey:Xi,contrastThreshold:i,getContrastText:d,augmentColor:m,tonalOffset:a},g[n]),s)}var ao=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var so={textTransform:"uppercase"},lo='"Roboto", "Helvetica", "Arial", sans-serif';function uo(t,e){var n="function"===typeof e?e(t):e,r=n.fontFamily,i=void 0===r?lo:r,o=n.fontSize,a=void 0===o?14:o,s=n.fontWeightLight,l=void 0===s?300:s,u=n.fontWeightRegular,c=void 0===u?400:u,h=n.fontWeightMedium,f=void 0===h?500:h,p=n.fontWeightBold,d=void 0===p?700:p,m=n.htmlFontSize,g=void 0===m?16:m,v=n.allVariants,y=n.pxToRem,_=(0,Yn.Z)(n,ao);var x=a/14,b=y||function(t){return"".concat(t/g*x,"rem")},w=function(t,e,n,r,o){return(0,$n.Z)({fontFamily:i,fontWeight:t,fontSize:b(e),lineHeight:n},i===lo?{letterSpacing:"".concat((a=r/e,Math.round(1e5*a)/1e5),"em")}:{},o,v);var a},k={h1:w(l,96,1.167,-1.5),h2:w(l,60,1.2,-.5),h3:w(c,48,1.167,0),h4:w(c,34,1.235,.25),h5:w(c,24,1.334,0),h6:w(f,20,1.6,.15),subtitle1:w(c,16,1.75,.15),subtitle2:w(f,14,1.57,.1),body1:w(c,16,1.5,.15),body2:w(c,14,1.43,.15),button:w(f,14,1.75,.4,so),caption:w(c,12,1.66,.4),overline:w(c,12,2.66,1,so)};return(0,ur.Z)((0,$n.Z)({htmlFontSize:g,pxToRem:b,fontFamily:i,fontSize:a,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:f,fontWeightBold:d},k),_,{clone:!1})}function co(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var ho=["none",co(0,2,1,-1,0,1,1,0,0,1,3,0),co(0,3,1,-2,0,2,2,0,0,1,5,0),co(0,3,3,-2,0,3,4,0,0,1,8,0),co(0,2,4,-1,0,4,5,0,0,1,10,0),co(0,3,5,-1,0,5,8,0,0,1,14,0),co(0,3,5,-1,0,6,10,0,0,1,18,0),co(0,4,5,-2,0,7,10,1,0,2,16,1),co(0,5,5,-3,0,8,10,1,0,3,14,2),co(0,5,6,-3,0,9,12,1,0,3,16,2),co(0,6,6,-3,0,10,14,1,0,4,18,3),co(0,6,7,-4,0,11,15,1,0,4,20,3),co(0,7,8,-4,0,12,17,2,0,5,22,4),co(0,7,8,-4,0,13,19,2,0,5,24,4),co(0,7,9,-4,0,14,21,2,0,5,26,4),co(0,8,9,-5,0,15,22,2,0,6,28,5),co(0,8,10,-5,0,16,24,2,0,6,30,5),co(0,8,11,-5,0,17,26,2,0,6,32,5),co(0,9,11,-5,0,18,28,2,0,7,34,6),co(0,9,12,-6,0,19,29,2,0,7,36,6),co(0,10,13,-6,0,20,31,3,0,8,38,7),co(0,10,13,-6,0,21,33,3,0,8,40,7),co(0,10,14,-6,0,22,35,3,0,8,42,7),co(0,11,14,-7,0,23,36,3,0,9,44,8),co(0,11,15,-7,0,24,38,3,0,9,46,8)],fo=["duration","easing","delay"],po={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},mo={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function go(t){return"".concat(Math.round(t),"ms")}function vo(t){if(!t)return 0;var e=t/36;return Math.round(10*(4+15*Math.pow(e,.25)+e/5))}function yo(t){var e=(0,$n.Z)({},po,t.easing),n=(0,$n.Z)({},mo,t.duration);return(0,$n.Z)({getAutoHeightDuration:vo,create:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.duration,o=void 0===i?n.standard:i,a=r.easing,s=void 0===a?e.easeInOut:a,l=r.delay,u=void 0===l?0:l;(0,Yn.Z)(r,fo);return(Array.isArray(t)?t:[t]).map((function(t){return"".concat(t," ").concat("string"===typeof o?o:go(o)," ").concat(s," ").concat("string"===typeof u?u:go(u))})).join(",")}},t,{easing:e,duration:n})}var _o={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},xo=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function bo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mixins,n=void 0===e?{}:e,r=t.palette,i=void 0===r?{}:r,o=t.transitions,a=void 0===o?{}:o,s=t.typography,l=void 0===s?{}:s,u=(0,Yn.Z)(t,xo),c=oo(i),h=Zr(t),f=(0,ur.Z)(h,{mixins:Wi(h.breakpoints,h.spacing,n),palette:c,shadows:ho.slice(),typography:uo(c,l),transitions:yo(a),zIndex:(0,$n.Z)({},_o)});f=(0,ur.Z)(f,u);for(var p=arguments.length,d=new Array(p>1?p-1:0),m=1;m<p;m++)d[m-1]=arguments[m];return f=d.reduce((function(t,e){return(0,ur.Z)(t,e)}),f)}var wo=bo(),ko=function(t){return qi(t)&&"classes"!==t},So=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.defaultTheme,n=void 0===e?Gi:e,r=t.rootShouldForwardProp,o=void 0===r?qi:r,a=t.slotShouldForwardProp,s=void 0===a?qi:a,l=t.styleFunctionSx,c=void 0===l?zi:l;return function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.name,l=r.slot,h=r.skipVariantsResolver,f=r.skipSx,p=r.overridesResolver,d=(0,Yn.Z)(r,Di),m=void 0!==h?h:l&&"Root"!==l||!1,g=f||!1;var v=qi;"Root"===l?v=o:l&&(v=s);var y=(0,lr.ZP)(t,(0,$n.Z)({shouldForwardProp:v,label:e},d)),_=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];var s=r?r.map((function(t){return"function"===typeof t&&t.__emotion_real!==t?function(e){var r=e.theme,i=(0,Yn.Z)(e,Fi);return t((0,$n.Z)({theme:ji(r)?n:r},i))}:t})):[],l=t;a&&p&&s.push((function(t){var e=ji(t.theme)?n:t.theme,r=Zi(a,e);if(r){var o={};return Object.entries(r).forEach((function(e){var n=(0,i.Z)(e,2),r=n[0],a=n[1];o[r]="function"===typeof a?a(t):a})),p(t,o)}return null})),a&&!m&&s.push((function(t){var e=ji(t.theme)?n:t.theme;return Vi(t,Ui(a,e),e,a)})),g||s.push((function(t){var e=ji(t.theme)?n:t.theme;return c((0,$n.Z)({},t,{theme:e}))}));var h=s.length-r.length;if(Array.isArray(t)&&h>0){var f=new Array(h).fill("");(l=[].concat((0,u.Z)(t),(0,u.Z)(f))).raw=[].concat((0,u.Z)(t.raw),(0,u.Z)(f))}else"function"===typeof t&&t.__emotion_real!==t&&(l=function(e){var r=e.theme,i=(0,Yn.Z)(e,Bi);return t((0,$n.Z)({theme:ji(r)?n:r},i))});var d=y.apply(void 0,[l].concat((0,u.Z)(s)));return d};return y.withConfig&&(_.withConfig=y.withConfig),_}}({defaultTheme:wo,rootShouldForwardProp:ko}),Eo=So;var Io=n(9598);function Co(t){return 0===Object.keys(t).length}var Ao=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=(0,Io.Z)();return!e||Co(e)?t:e},Po=Zr();var To=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po;return Ao(t)};function Mo(t){var e=t.props,n=t.name,r=t.defaultTheme,i=function(t){var e=t.theme,n=t.name,r=t.props;return e&&e.components&&e.components[n]&&e.components[n].defaultProps?(0,Jn.Z)(e.components[n].defaultProps,r):r}({theme:To(r),name:n,props:e});return i}function Lo(t){return Mo({props:t.props,name:t.name,defaultTheme:wo})}var Ro=n(7563),No=Ro.Z,Oo=n(8956),zo=Oo.Z,Do=n(5372).Z,Fo=n(7326),Bo=n(9611);function jo(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,(0,Bo.Z)(t,e)}var Zo=t.createContext(null);function Uo(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(t){return t})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function Vo(t,e,n){return null!=n[e]?n[e]:t.props[e]}function qo(e,n,r){var i=Uo(e.children),o=function(t,e){function n(n){return n in e?e[n]:t[n]}t=t||{},e=e||{};var r,i=Object.create(null),o=[];for(var a in t)a in e?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in e){if(i[l])for(r=0;r<i[l].length;r++){var u=i[l][r];s[i[l][r]]=n(u)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(n,i);return Object.keys(o).forEach((function(a){var s=o[a];if((0,t.isValidElement)(s)){var l=a in n,u=a in i,c=n[a],h=(0,t.isValidElement)(c)&&!c.props.in;!u||l&&!h?u||!l||h?u&&l&&(0,t.isValidElement)(c)&&(o[a]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:c.props.in,exit:Vo(s,"exit",e),enter:Vo(s,"enter",e)})):o[a]=(0,t.cloneElement)(s,{in:!1}):o[a]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:Vo(s,"exit",e),enter:Vo(s,"enter",e)})}})),o}var Go=Object.values||function(t){return Object.keys(t).map((function(e){return t[e]}))},Wo=function(e){function n(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind((0,Fo.Z)(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}jo(n,e);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var r,i,o=n.children,a=n.handleExited;return{children:n.firstRender?(r=e,i=a,Uo(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:Vo(e,"appear",r),enter:Vo(e,"enter",r),exit:Vo(e,"exit",r)})}))):qo(e,o,a),firstRender:!1}},r.handleExited=function(t,e){var n=Uo(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState((function(e){var n=(0,$n.Z)({},e.children);return delete n[t.key],{children:n}})))},r.render=function(){var e=this.props,n=e.component,r=e.childFactory,i=(0,Yn.Z)(e,["component","childFactory"]),o=this.state.contextValue,a=Go(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?t.createElement(Zo.Provider,{value:o},a):t.createElement(Zo.Provider,{value:o},t.createElement(n,i,a))},n}(t.Component);Wo.propTypes={},Wo.defaultProps={component:"div",childFactory:function(t){return t}};var Ho=Wo,Xo=n(184);var Yo=function(e){var n=e.className,r=e.classes,o=e.pulsate,a=void 0!==o&&o,s=e.rippleX,l=e.rippleY,u=e.rippleSize,c=e.in,h=e.onExited,f=e.timeout,p=t.useState(!1),d=(0,i.Z)(p,2),m=d[0],g=d[1],v=(0,Kn.Z)(n,r.ripple,r.rippleVisible,a&&r.ripplePulsate),y={width:u,height:u,top:-u/2+l,left:-u/2+s},_=(0,Kn.Z)(r.child,m&&r.childLeaving,a&&r.childPulsate);return c||m||g(!0),t.useEffect((function(){if(!c&&null!=h){var t=setTimeout(h,f);return function(){clearTimeout(t)}}}),[h,c,f]),(0,Xo.jsx)("span",{className:v,style:y,children:(0,Xo.jsx)("span",{className:_})})},$o=function(t){return t},Ko=function(){var t=$o;return{configure:function(e){t=e},generate:function(e){return t(e)},reset:function(){t=$o}}}(),Jo={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function Qo(t,e){return Jo[e]||"".concat(Ko.generate(t),"-").concat(e)}function ta(t,e){var n={};return e.forEach((function(e){n[e]=Qo(t,e)})),n}var ea,na,ra,ia,oa,aa,sa,la,ua=ta("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),ca=["center","classes","className"],ha=Wn(oa||(oa=ea||(ea=o(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),fa=Wn(aa||(aa=na||(na=o(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),pa=Wn(sa||(sa=ra||(ra=o(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),da=Eo("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ma=Eo(Yo,{name:"MuiTouchRipple",slot:"Ripple"})(la||(la=ia||(ia=o(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),ua.rippleVisible,ha,550,(function(t){return t.theme.transitions.easing.easeInOut}),ua.ripplePulsate,(function(t){return t.theme.transitions.duration.shorter}),ua.child,ua.childLeaving,fa,550,(function(t){return t.theme.transitions.easing.easeInOut}),ua.childPulsate,pa,(function(t){return t.theme.transitions.easing.easeInOut})),ga=t.forwardRef((function(e,n){var r=Lo({props:e,name:"MuiTouchRipple"}),o=r.center,a=void 0!==o&&o,s=r.classes,l=void 0===s?{}:s,c=r.className,h=(0,Yn.Z)(r,ca),f=t.useState([]),p=(0,i.Z)(f,2),d=p[0],m=p[1],g=t.useRef(0),v=t.useRef(null);t.useEffect((function(){v.current&&(v.current(),v.current=null)}),[d]);var y=t.useRef(!1),_=t.useRef(null),x=t.useRef(null),b=t.useRef(null);t.useEffect((function(){return function(){clearTimeout(_.current)}}),[]);var w=t.useCallback((function(t){var e=t.pulsate,n=t.rippleX,r=t.rippleY,i=t.rippleSize,o=t.cb;m((function(t){return[].concat((0,u.Z)(t),[(0,Xo.jsx)(ma,{classes:{ripple:(0,Kn.Z)(l.ripple,ua.ripple),rippleVisible:(0,Kn.Z)(l.rippleVisible,ua.rippleVisible),ripplePulsate:(0,Kn.Z)(l.ripplePulsate,ua.ripplePulsate),child:(0,Kn.Z)(l.child,ua.child),childLeaving:(0,Kn.Z)(l.childLeaving,ua.childLeaving),childPulsate:(0,Kn.Z)(l.childPulsate,ua.childPulsate)},timeout:550,pulsate:e,rippleX:n,rippleY:r,rippleSize:i},g.current)])})),g.current+=1,v.current=o}),[l]),k=t.useCallback((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.pulsate,i=void 0!==r&&r,o=e.center,s=void 0===o?a||e.pulsate:o,l=e.fakeElement,u=void 0!==l&&l;if("mousedown"===t.type&&y.current)y.current=!1;else{"touchstart"===t.type&&(y.current=!0);var c,h,f,p=u?null:b.current,d=p?p.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===t.clientX&&0===t.clientY||!t.clientX&&!t.touches)c=Math.round(d.width/2),h=Math.round(d.height/2);else{var m=t.touches?t.touches[0]:t,g=m.clientX,v=m.clientY;c=Math.round(g-d.left),h=Math.round(v-d.top)}if(s)(f=Math.sqrt((2*Math.pow(d.width,2)+Math.pow(d.height,2))/3))%2===0&&(f+=1);else{var k=2*Math.max(Math.abs((p?p.clientWidth:0)-c),c)+2,S=2*Math.max(Math.abs((p?p.clientHeight:0)-h),h)+2;f=Math.sqrt(Math.pow(k,2)+Math.pow(S,2))}t.touches?null===x.current&&(x.current=function(){w({pulsate:i,rippleX:c,rippleY:h,rippleSize:f,cb:n})},_.current=setTimeout((function(){x.current&&(x.current(),x.current=null)}),80)):w({pulsate:i,rippleX:c,rippleY:h,rippleSize:f,cb:n})}}),[a,w]),S=t.useCallback((function(){k({},{pulsate:!0})}),[k]),E=t.useCallback((function(t,e){if(clearTimeout(_.current),"touchend"===t.type&&x.current)return x.current(),x.current=null,void(_.current=setTimeout((function(){E(t,e)})));x.current=null,m((function(t){return t.length>0?t.slice(1):t})),v.current=e}),[]);return t.useImperativeHandle(n,(function(){return{pulsate:S,start:k,stop:E}}),[S,k,E]),(0,Xo.jsx)(da,(0,$n.Z)({className:(0,Kn.Z)(l.root,ua.root,c),ref:b},h,{children:(0,Xo.jsx)(Ho,{component:null,exit:!0,children:d})}))})),va=ga;function ya(t){return Qo("MuiButtonBase",t)}var _a,xa=ta("MuiButtonBase",["root","disabled","focusVisible"]),ba=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],wa=Eo("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(t,e){return e.root}})((_a={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,c.Z)(_a,"&.".concat(xa.disabled),{pointerEvents:"none",cursor:"default"}),(0,c.Z)(_a,"@media print",{colorAdjust:"exact"}),_a)),ka=t.forwardRef((function(e,n){var r=Lo({props:e,name:"MuiButtonBase"}),o=r.action,a=r.centerRipple,s=void 0!==a&&a,l=r.children,u=r.className,c=r.component,h=void 0===c?"button":c,f=r.disabled,p=void 0!==f&&f,d=r.disableRipple,m=void 0!==d&&d,g=r.disableTouchRipple,v=void 0!==g&&g,y=r.focusRipple,_=void 0!==y&&y,x=r.LinkComponent,b=void 0===x?"a":x,w=r.onBlur,k=r.onClick,S=r.onContextMenu,E=r.onDragLeave,I=r.onFocus,C=r.onFocusVisible,A=r.onKeyDown,P=r.onKeyUp,T=r.onMouseDown,M=r.onMouseLeave,L=r.onMouseUp,R=r.onTouchEnd,N=r.onTouchMove,O=r.onTouchStart,z=r.tabIndex,D=void 0===z?0:z,F=r.TouchRippleProps,B=r.touchRippleRef,j=r.type,Z=(0,Yn.Z)(r,ba),U=t.useRef(null),V=t.useRef(null),q=No(V,B),G=Do(),W=G.isFocusVisibleRef,H=G.onFocus,X=G.onBlur,Y=G.ref,$=t.useState(!1),K=(0,i.Z)($,2),J=K[0],Q=K[1];p&&J&&Q(!1),t.useImperativeHandle(o,(function(){return{focusVisible:function(){Q(!0),U.current.focus()}}}),[]);var tt=t.useState(!1),et=(0,i.Z)(tt,2),nt=et[0],rt=et[1];t.useEffect((function(){rt(!0)}),[]);var it=nt&&!m&&!p;function ot(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return zo((function(r){return e&&e(r),!n&&V.current&&V.current[t](r),!0}))}t.useEffect((function(){J&&_&&!m&&nt&&V.current.pulsate()}),[m,_,J,nt]);var at=ot("start",T),st=ot("stop",S),lt=ot("stop",E),ut=ot("stop",L),ct=ot("stop",(function(t){J&&t.preventDefault(),M&&M(t)})),ht=ot("start",O),ft=ot("stop",R),pt=ot("stop",N),dt=ot("stop",(function(t){X(t),!1===W.current&&Q(!1),w&&w(t)}),!1),mt=zo((function(t){U.current||(U.current=t.currentTarget),H(t),!0===W.current&&(Q(!0),C&&C(t)),I&&I(t)})),gt=function(){var t=U.current;return h&&"button"!==h&&!("A"===t.tagName&&t.href)},vt=t.useRef(!1),yt=zo((function(t){_&&!vt.current&&J&&V.current&&" "===t.key&&(vt.current=!0,V.current.stop(t,(function(){V.current.start(t)}))),t.target===t.currentTarget&&gt()&&" "===t.key&&t.preventDefault(),A&&A(t),t.target===t.currentTarget&&gt()&&"Enter"===t.key&&!p&&(t.preventDefault(),k&&k(t))})),_t=zo((function(t){_&&" "===t.key&&V.current&&J&&!t.defaultPrevented&&(vt.current=!1,V.current.stop(t,(function(){V.current.pulsate(t)}))),P&&P(t),k&&t.target===t.currentTarget&&gt()&&" "===t.key&&!t.defaultPrevented&&k(t)})),xt=h;"button"===xt&&(Z.href||Z.to)&&(xt=b);var bt={};"button"===xt?(bt.type=void 0===j?"button":j,bt.disabled=p):(Z.href||Z.to||(bt.role="button"),p&&(bt["aria-disabled"]=p));var wt=No(Y,U),kt=No(n,wt);var St=(0,$n.Z)({},r,{centerRipple:s,component:h,disabled:p,disableRipple:m,disableTouchRipple:v,focusRipple:_,tabIndex:D,focusVisible:J}),Et=function(t){var e=t.disabled,n=t.focusVisible,r=t.focusVisibleClassName,i=Qn({root:["root",e&&"disabled",n&&"focusVisible"]},ya,t.classes);return n&&r&&(i.root+=" ".concat(r)),i}(St);return(0,Xo.jsxs)(wa,(0,$n.Z)({as:xt,className:(0,Kn.Z)(Et.root,u),ownerState:St,onBlur:dt,onClick:k,onContextMenu:st,onFocus:mt,onKeyDown:yt,onKeyUp:_t,onMouseDown:at,onMouseLeave:ct,onMouseUp:ut,onDragLeave:lt,onTouchEnd:ft,onTouchMove:pt,onTouchStart:ht,ref:kt,tabIndex:p?-1:D,type:j},bt,Z,{children:[l,it?(0,Xo.jsx)(va,(0,$n.Z)({ref:q,center:s},F)):null]}))})),Sa=ka,Ea=yr.Z;function Ia(t){return Qo("MuiButton",t)}var Ca=ta("MuiButton",["root","text","textInherit","textPrimary","textSecondary","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","contained","containedInherit","containedPrimary","containedSecondary","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var Aa=t.createContext({}),Pa=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Ta=function(t){return(0,$n.Z)({},"small"===t.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===t.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===t.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},Ma=Eo(Sa,{shouldForwardProp:function(t){return ko(t)||"classes"===t},name:"MuiButton",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,e[n.variant],e["".concat(n.variant).concat(Ea(n.color))],e["size".concat(Ea(n.size))],e["".concat(n.variant,"Size").concat(Ea(n.size))],"inherit"===n.color&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})((function(t){var e,n=t.theme,r=t.ownerState;return(0,$n.Z)({},n.typography.button,(e={minWidth:64,padding:"6px 16px",borderRadius:n.shape.borderRadius,transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short}),"&:hover":(0,$n.Z)({textDecoration:"none",backgroundColor:or(n.palette.text.primary,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===r.variant&&"inherit"!==r.color&&{backgroundColor:or(n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===r.variant&&"inherit"!==r.color&&{border:"1px solid ".concat(n.palette[r.color].main),backgroundColor:or(n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===r.variant&&{backgroundColor:n.palette.grey.A100,boxShadow:n.shadows[4],"@media (hover: none)":{boxShadow:n.shadows[2],backgroundColor:n.palette.grey[300]}},"contained"===r.variant&&"inherit"!==r.color&&{backgroundColor:n.palette[r.color].dark,"@media (hover: none)":{backgroundColor:n.palette[r.color].main}}),"&:active":(0,$n.Z)({},"contained"===r.variant&&{boxShadow:n.shadows[8]})},(0,c.Z)(e,"&.".concat(Ca.focusVisible),(0,$n.Z)({},"contained"===r.variant&&{boxShadow:n.shadows[6]})),(0,c.Z)(e,"&.".concat(Ca.disabled),(0,$n.Z)({color:n.palette.action.disabled},"outlined"===r.variant&&{border:"1px solid ".concat(n.palette.action.disabledBackground)},"outlined"===r.variant&&"secondary"===r.color&&{border:"1px solid ".concat(n.palette.action.disabled)},"contained"===r.variant&&{color:n.palette.action.disabled,boxShadow:n.shadows[0],backgroundColor:n.palette.action.disabledBackground})),e),"text"===r.variant&&{padding:"6px 8px"},"text"===r.variant&&"inherit"!==r.color&&{color:n.palette[r.color].main},"outlined"===r.variant&&{padding:"5px 15px",border:"1px solid ".concat("light"===n.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"outlined"===r.variant&&"inherit"!==r.color&&{color:n.palette[r.color].main,border:"1px solid ".concat(or(n.palette[r.color].main,.5))},"contained"===r.variant&&{color:n.palette.getContrastText(n.palette.grey[300]),backgroundColor:n.palette.grey[300],boxShadow:n.shadows[2]},"contained"===r.variant&&"inherit"!==r.color&&{color:n.palette[r.color].contrastText,backgroundColor:n.palette[r.color].main},"inherit"===r.color&&{color:"inherit",borderColor:"currentColor"},"small"===r.size&&"text"===r.variant&&{padding:"4px 5px",fontSize:n.typography.pxToRem(13)},"large"===r.size&&"text"===r.variant&&{padding:"8px 11px",fontSize:n.typography.pxToRem(15)},"small"===r.size&&"outlined"===r.variant&&{padding:"3px 9px",fontSize:n.typography.pxToRem(13)},"large"===r.size&&"outlined"===r.variant&&{padding:"7px 21px",fontSize:n.typography.pxToRem(15)},"small"===r.size&&"contained"===r.variant&&{padding:"4px 10px",fontSize:n.typography.pxToRem(13)},"large"===r.size&&"contained"===r.variant&&{padding:"8px 22px",fontSize:n.typography.pxToRem(15)},r.fullWidth&&{width:"100%"})}),(function(t){var e;return t.ownerState.disableElevation&&(e={boxShadow:"none","&:hover":{boxShadow:"none"}},(0,c.Z)(e,"&.".concat(Ca.focusVisible),{boxShadow:"none"}),(0,c.Z)(e,"&:active",{boxShadow:"none"}),(0,c.Z)(e,"&.".concat(Ca.disabled),{boxShadow:"none"}),e)})),La=Eo("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(t,e){var n=t.ownerState;return[e.startIcon,e["iconSize".concat(Ea(n.size))]]}})((function(t){var e=t.ownerState;return(0,$n.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===e.size&&{marginLeft:-2},Ta(e))})),Ra=Eo("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(t,e){var n=t.ownerState;return[e.endIcon,e["iconSize".concat(Ea(n.size))]]}})((function(t){var e=t.ownerState;return(0,$n.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===e.size&&{marginRight:-2},Ta(e))})),Na=t.forwardRef((function(e,n){var r=t.useContext(Aa),i=Lo({props:(0,Jn.Z)(r,e),name:"MuiButton"}),o=i.children,a=i.color,s=void 0===a?"primary":a,l=i.component,u=void 0===l?"button":l,c=i.className,h=i.disabled,f=void 0!==h&&h,p=i.disableElevation,d=void 0!==p&&p,m=i.disableFocusRipple,g=void 0!==m&&m,v=i.endIcon,y=i.focusVisibleClassName,_=i.fullWidth,x=void 0!==_&&_,b=i.size,w=void 0===b?"medium":b,k=i.startIcon,S=i.type,E=i.variant,I=void 0===E?"text":E,C=(0,Yn.Z)(i,Pa),A=(0,$n.Z)({},i,{color:s,component:u,disabled:f,disableElevation:d,disableFocusRipple:g,fullWidth:x,size:w,type:S,variant:I}),P=function(t){var e=t.color,n=t.disableElevation,r=t.fullWidth,i=t.size,o=t.variant,a=t.classes,s=Qn({root:["root",o,"".concat(o).concat(Ea(e)),"size".concat(Ea(i)),"".concat(o,"Size").concat(Ea(i)),"inherit"===e&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat(Ea(i))],endIcon:["endIcon","iconSize".concat(Ea(i))]},Ia,a);return(0,$n.Z)({},a,s)}(A),T=k&&(0,Xo.jsx)(La,{className:P.startIcon,ownerState:A,children:k}),M=v&&(0,Xo.jsx)(Ra,{className:P.endIcon,ownerState:A,children:v});return(0,Xo.jsxs)(Ma,(0,$n.Z)({ownerState:A,className:(0,Kn.Z)(c,r.className),component:u,disabled:f,focusRipple:!g,focusVisibleClassName:(0,Kn.Z)(P.focusVisible,y),ref:n,type:S},C,{classes:P,children:[T,o,M]}))})),Oa=Na,za=6371008.8,Da={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:250826616.45599997,kilometers:6371.0088,kilometres:6371.0088,meters:za,metres:za,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:3440.069546436285,radians:1,yards:6967335.223679999};function Fa(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function Ba(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ya(t[0])||!Ya(t[1]))throw new Error("coordinates must contain numbers");return Fa({type:"Point",coordinates:t},e,n)}function ja(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return Fa({type:"Polygon",coordinates:t},e,n)}function Za(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return Fa({type:"LineString",coordinates:t},e,n)}function Ua(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function Va(t,e,n){return void 0===n&&(n={}),Fa({type:"MultiLineString",coordinates:t},e,n)}function qa(t,e,n){return void 0===n&&(n={}),Fa({type:"MultiPoint",coordinates:t},e,n)}function Ga(t,e){void 0===e&&(e="kilometers");var n=Da[e];if(!n)throw new Error(e+" units is invalid");return t*n}function Wa(t,e){void 0===e&&(e="kilometers");var n=Da[e];if(!n)throw new Error(e+" units is invalid");return t/n}function Ha(t){return 180*(t%(2*Math.PI))/Math.PI}function Xa(t){return t%360*Math.PI/180}function Ya(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function $a(t){return!!t&&t.constructor===Object}function Ka(t,e,n){if(null!==t)for(var r,i,o,a,s,l,u,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,m="Feature"===p,g=d?t.features.length:1,v=0;v<g;v++){s=(c=!!(u=d?t.features[v].geometry:m?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var y=0;y<s;y++){var _=0,x=0;if(null!==(a=c?u.geometries[y]:u)){l=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,f,v,_,x))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],f,v,_,x))return!1;f++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],f,v,_,x))return!1;f++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(x=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],f,v,_,x))return!1;f++}x++}_++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===Ka(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ja(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function Qa(t,e){var n,r,i,o,a,s,l,u,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,m=p?t.features.length:1;for(n=0;n<m;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,u=p?t.features[n].properties:d?t.properties:{},c=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=l?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,u,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,u,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,u,c,h))return!1;f++}}function ts(t,e){Qa(t,(function(t,n,r,i,o){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Fa(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var u=t.coordinates[l];if(!1===e(Fa({type:a,coordinates:u},r),n,l))return!1}}))}function es(t,e,n){var r=n,i=!1;return function(t,e){ts(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var a,s=0,l=0,u=0;return!1!==Ka(t,(function(o,c,h,f,p){if(void 0===a||n>s||f>l||p>u)return a=o,s=n,l=f,u=p,void(i=0);var d=Za([a,o],t.properties);if(!1===e(d,n,r,p,i))return!1;i++,a=o}))&&void 0}}}))}(t,(function(t,o,a,s,l){r=!1===i&&void 0===n?t:e(r,t,o,a,s,l),i=!0})),r}function ns(t){var e=[1/0,1/0,-1/0,-1/0];return Ka(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}ns.default=ns;var rs=ns;function is(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function os(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function as(t){return"Feature"===t.type?t.geometry:t}n(1725);n(4161);function ss(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=is(t),i=as(e),o=i.type,a=e.bbox,s=i.coordinates;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,a))return!1;"Polygon"===o&&(s=[s]);for(var l=!1,u=0;u<s.length&&!l;u++)if(ls(r,s[u][0],n.ignoreBoundary)){for(var c=!1,h=1;h<s[u].length&&!c;)ls(r,s[u][h],!n.ignoreBoundary)&&(c=!0),h++;c||(l=!0)}return l}function ls(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],l=e[o][0],u=e[o][1];if(t[1]*(a-l)+s*(l-t[0])+u*(t[0]-a)===0&&(a-t[0])*(l-t[0])<=0&&(s-t[1])*(u-t[1])<=0)return!n;s>t[1]!==u>t[1]&&t[0]<(l-a)*(t[1]-s)/(u-s)+a&&(r=!r)}return r}var us=function(t,e,n){void 0===n&&(n={});var r=is(t),i=is(e),o=Xa(i[1]-r[1]),a=Xa(i[0]-r[0]),s=Xa(r[1]),l=Xa(i[1]),u=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(s)*Math.cos(l);return Ga(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),n.units)};Object.prototype.hasOwnProperty;var cs=new ArrayBuffer(16);new Float64Array(cs),new Uint32Array(cs);n(1977);!function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(e=0;e<this.centers.length-1;e++){var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])}}();var hs=function(t){return function(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[n,r];return ja([[a,[i,r],[i,o],[n,o],a]],e.properties,{bbox:t,id:e.id})}(rs(t))};function fs(t,e,n,r){void 0===r&&(r={});var i=is(t),o=Xa(i[0]),a=Xa(i[1]),s=Xa(n),l=Wa(e,r.units),u=Math.asin(Math.sin(a)*Math.cos(l)+Math.cos(a)*Math.sin(l)*Math.cos(s));return Ba([Ha(o+Math.atan2(Math.sin(s)*Math.sin(l)*Math.cos(a),Math.cos(l)-Math.sin(a)*Math.sin(u))),Ha(u)],r.properties)}var ps=function(t,e,n){void 0===n&&(n={});for(var r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],a=0;a<r;a++)o.push(fs(t,e,-360*a/r,n).geometry.coordinates);return o.push(o[0]),ja([o],i)};n(7089);var ds=function(t){if(!t)throw new Error("geojson is required");var e=[];return ts(t,(function(t){!function(t,e){var n=[],r=t.geometry;if(null!==r){switch(r.type){case"Polygon":n=os(r);break;case"LineString":n=[os(r)]}n.forEach((function(n){var r=function(t,e){var n=[];return t.reduce((function(t,r){var i=Za([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,r),n.push(i),r})),n}(n,t.properties);r.forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),Ua(e)},ms=n(9234);function gs(t,e){var n=os(t),r=os(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],a=n[1][0],s=n[1][1],l=r[0][0],u=r[0][1],c=r[1][0],h=r[1][1],f=(h-u)*(a-i)-(c-l)*(s-o),p=(c-l)*(o-u)-(h-u)*(i-l),d=(a-i)*(o-u)-(s-o)*(i-l);if(0===f)return null;var m=p/f,g=d/f;return m>=0&&m<=1&&g>=0&&g<=1?Ba([i+m*(a-i),o+m*(s-o)]):null}var vs=function(t,e){var n={},r=[];if("LineString"===t.type&&(t=Fa(t)),"LineString"===e.type&&(e=Fa(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=gs(t,e);return i&&r.push(i),Ua(r)}var o=ms();return o.load(ds(e)),Ja(ds(t),(function(t){Ja(o.search(t),(function(e){var i=gs(t,e);if(i){var o=os(i).join(",");n[o]||(n[o]=!0,r.push(i))}}))})),Ua(r)};var ys=6378137;function _s(t){return function(t,e,n){var r=n;return Qa(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r}(t,(function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return xs(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=xs(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}function xs(t){var e=0;if(t&&t.length>0){e+=Math.abs(bs(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(bs(t[n]))}return e}function bs(t){var e,n,r,i,o,a,s=0,l=t.length;if(l>2){for(a=0;a<l;a++)a===l-2?(r=l-2,i=l-1,o=0):a===l-1?(r=l-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],s+=(ws(t[o][0])-ws(e[0]))*Math.sin(ws(n[1]));s=s*ys*ys/2}return s}function ws(t){return t*Math.PI/180}var ks=Math.PI/180,Ss=180/Math.PI,Es=function(t,e){this.lon=t,this.lat=e,this.x=ks*t,this.y=ks*e};Es.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Es.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new Es(e,t)};var Is=function(){this.coords=[],this.length=0};Is.prototype.move_to=function(t){this.length++,this.coords.push(t)};var Cs=function(t){this.properties=t||{},this.geometries=[]};Cs.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Cs.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var As=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Es(t.x,t.y),this.end=new Es(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};As.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=Ss*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[Ss*Math.atan2(i,r),a]},As.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,a=this.interpolate(o);n.push(a)}for(var s=!1,l=0,u=e&&e.offset?e.offset:10,c=180-u,h=-180+u,f=360-u,p=1;p<n.length;++p){var d=n[p-1][0],m=n[p][0],g=Math.abs(m-d);g>f&&(m>c&&d<h||d>c&&m<h)?s=!0:g>l&&(l=g)}var v=[];if(s&&l<u){var y=[];v.push(y);for(var _=0;_<n.length;++_){var x=parseFloat(n[_][0]);if(_>0&&Math.abs(x-n[_-1][0])>f){var b=parseFloat(n[_-1][0]),w=parseFloat(n[_-1][1]),k=parseFloat(n[_][0]),S=parseFloat(n[_][1]);if(b>-180&&b<h&&180===k&&_+1<n.length&&n[_-1][0]>-180&&n[_-1][0]<h){y.push([-180,n[_][1]]),_++,y.push([n[_][0],n[_][1]]);continue}if(b>c&&b<180&&-180===k&&_+1<n.length&&n[_-1][0]>c&&n[_-1][0]<180){y.push([180,n[_][1]]),_++,y.push([n[_][0],n[_][1]]);continue}if(b<h&&k>c){var E=b;b=k,k=E;var I=w;w=S,S=I}if(b>c&&k<h&&(k+=360),b<=180&&k>=180&&b<k){var C=(180-b)/(k-b),A=C*S+(1-C)*w;y.push([n[_-1][0]>c?180:-180,A]),(y=[]).push([n[_-1][0]>c?-180:180,A]),v.push(y)}else y=[],v.push(y);y.push([x,n[_][1]])}else y.push([n[_][0],n[_][1]])}}else{var P=[];v.push(P);for(var T=0;T<n.length;++T)P.push([n[T][0],n[T][1]])}for(var M=new Cs(this.properties),L=0;L<v.length;++L){var R=new Is;M.geometries.push(R);for(var N=v[L],O=0;O<N.length;++O)R.move_to(N[O])}return M};function Ps(t){var e=t%360;return e<0&&(e+=360),e}function Ts(t,e){void 0===e&&(e={});var n=as(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return function(t,e){void 0===e&&(e={});var n=as(t).coordinates,r=e.properties?e.properties:"Feature"===t.type?t.properties:{};return Ms(n,r)}(n,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var n=as(t).coordinates,r=e.properties?e.properties:"Feature"===t.type?t.properties:{},i=[];return n.forEach((function(t){i.push(Ms(t,r))})),Ua(i)}(n,e);default:throw new Error("invalid poly")}}function Ms(t,e){return t.length>1?Va(t,e):Za(t[0],e)}n(4058);var Ls=function(t,e,n,r){void 0===r&&(r={});var i=e<0,o=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return Ga(Wa(t,e),n)}(Math.abs(e),r.units,"meters");i&&(o=-Math.abs(o));var a=is(t),s=function(t,e,n,r){r=void 0===r?za:Number(r);var i=e/r,o=t[0]*Math.PI/180,a=Xa(t[1]),s=Xa(n),l=i*Math.cos(s),u=a+l;Math.abs(u)>Math.PI/2&&(u=u>0?Math.PI-u:-Math.PI-u);var c=Math.log(Math.tan(u/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),h=Math.abs(c)>1e-11?l/c:Math.cos(a),f=i*Math.sin(s)/h;return[(180*(o+f)/Math.PI+540)%360-180,180*u/Math.PI]}(a,o,n);return s[0]+=s[0]-a[0]>180?-360:a[0]-s[0]>180?360:0,Ba(s,r.properties)};var Rs=[],Ns=[],Os=[],zs=[],Ds=[],Fs=[],Bs=[],js=[],Zs=[],Us=[],Vs=[],qs=[],Gs=[],Ws=[],Hs=[],Xs=[],Ys=[],$s=[],Ks=[],Js=[],Qs=[],tl=[],el=[],nl=[];Bs[85]=Us[85]=-1,js[85]=Vs[85]=0,Zs[85]=qs[85]=1,Ks[85]=tl[85]=1,Js[85]=el[85]=0,Qs[85]=nl[85]=1,Rs[85]=zs[85]=0,Ns[85]=Ds[85]=-1,Os[85]=Hs[85]=0,Xs[85]=Gs[85]=0,Ys[85]=Ws[85]=1,Fs[85]=$s[85]=1,tl[1]=tl[169]=0,el[1]=el[169]=-1,nl[1]=nl[169]=0,Gs[1]=Gs[169]=-1,Ws[1]=Ws[169]=0,Hs[1]=Hs[169]=0,Us[4]=Us[166]=0,Vs[4]=Vs[166]=-1,qs[4]=qs[166]=1,Xs[4]=Xs[166]=1,Ys[4]=Ys[166]=0,$s[4]=$s[166]=0,Bs[16]=Bs[154]=0,js[16]=js[154]=1,Zs[16]=Zs[154]=1,zs[16]=zs[154]=1,Ds[16]=Ds[154]=0,Fs[16]=Fs[154]=1,Ks[64]=Ks[106]=0,Js[64]=Js[106]=1,Qs[64]=Qs[106]=0,Rs[64]=Rs[106]=-1,Ns[64]=Ns[106]=0,Os[64]=Os[106]=1,Ks[2]=Ks[168]=0,Js[2]=Js[168]=-1,Qs[2]=Qs[168]=1,tl[2]=tl[168]=0,el[2]=el[168]=-1,nl[2]=nl[168]=0,Gs[2]=Gs[168]=-1,Ws[2]=Ws[168]=0,Hs[2]=Hs[168]=0,Xs[2]=Xs[168]=-1,Ys[2]=Ys[168]=0,$s[2]=$s[168]=1,Bs[8]=Bs[162]=0,js[8]=js[162]=-1,Zs[8]=Zs[162]=0,Us[8]=Us[162]=0,Vs[8]=Vs[162]=-1,qs[8]=qs[162]=1,Gs[8]=Gs[162]=1,Ws[8]=Ws[162]=0,Hs[8]=Hs[162]=1,Xs[8]=Xs[162]=1,Ys[8]=Ys[162]=0,$s[8]=$s[162]=0,Bs[32]=Bs[138]=0,js[32]=js[138]=1,Zs[32]=Zs[138]=1,Us[32]=Us[138]=0,Vs[32]=Vs[138]=1,qs[32]=qs[138]=0,Rs[32]=Rs[138]=1,Ns[32]=Ns[138]=0,Os[32]=Os[138]=0,zs[32]=zs[138]=1,Ds[32]=Ds[138]=0,Fs[32]=Fs[138]=1,tl[128]=tl[42]=0,el[128]=el[42]=1,nl[128]=nl[42]=1,Ks[128]=Ks[42]=0,Js[128]=Js[42]=1,Qs[128]=Qs[42]=0,Rs[128]=Rs[42]=-1,Ns[128]=Ns[42]=0,Os[128]=Os[42]=1,zs[128]=zs[42]=-1,Ds[128]=Ds[42]=0,Fs[128]=Fs[42]=0,Us[5]=Us[165]=-1,Vs[5]=Vs[165]=0,qs[5]=qs[165]=0,tl[5]=tl[165]=1,el[5]=el[165]=0,nl[5]=nl[165]=0,Xs[20]=Xs[150]=0,Ys[20]=Ys[150]=1,$s[20]=$s[150]=1,zs[20]=zs[150]=0,Ds[20]=Ds[150]=-1,Fs[20]=Fs[150]=1,Bs[80]=Bs[90]=-1,js[80]=js[90]=0,Zs[80]=Zs[90]=1,Ks[80]=Ks[90]=1,Js[80]=Js[90]=0,Qs[80]=Qs[90]=1,Gs[65]=Gs[105]=0,Ws[65]=Ws[105]=1,Hs[65]=Hs[105]=0,Rs[65]=Rs[105]=0,Ns[65]=Ns[105]=-1,Os[65]=Os[105]=0,Bs[160]=Bs[10]=-1,js[160]=js[10]=0,Zs[160]=Zs[10]=1,Us[160]=Us[10]=-1,Vs[160]=Vs[10]=0,qs[160]=qs[10]=0,tl[160]=tl[10]=1,el[160]=el[10]=0,nl[160]=nl[10]=0,Ks[160]=Ks[10]=1,Js[160]=Js[10]=0,Qs[160]=Qs[10]=1,Xs[130]=Xs[40]=0,Ys[130]=Ys[40]=1,$s[130]=$s[40]=1,Gs[130]=Gs[40]=0,Ws[130]=Ws[40]=1,Hs[130]=Hs[40]=0,Rs[130]=Rs[40]=0,Ns[130]=Ns[40]=-1,Os[130]=Os[40]=0,zs[130]=zs[40]=0,Ds[130]=Ds[40]=-1,Fs[130]=Fs[40]=1,Us[37]=Us[133]=0,Vs[37]=Vs[133]=1,qs[37]=qs[133]=1,tl[37]=tl[133]=0,el[37]=el[133]=1,nl[37]=nl[133]=0,Rs[37]=Rs[133]=-1,Ns[37]=Ns[133]=0,Os[37]=Os[133]=0,zs[37]=zs[133]=1,Ds[37]=Ds[133]=0,Fs[37]=Fs[133]=0,Xs[148]=Xs[22]=-1,Ys[148]=Ys[22]=0,$s[148]=$s[22]=0,tl[148]=tl[22]=0,el[148]=el[22]=-1,nl[148]=nl[22]=1,Ks[148]=Ks[22]=0,Js[148]=Js[22]=1,Qs[148]=Qs[22]=1,zs[148]=zs[22]=-1,Ds[148]=Ds[22]=0,Fs[148]=Fs[22]=1,Bs[82]=Bs[88]=0,js[82]=js[88]=-1,Zs[82]=Zs[88]=1,Xs[82]=Xs[88]=1,Ys[82]=Ys[88]=0,$s[82]=$s[88]=1,Gs[82]=Gs[88]=-1,Ws[82]=Ws[88]=0,Hs[82]=Hs[88]=1,Ks[82]=Ks[88]=0,Js[82]=Js[88]=-1,Qs[82]=Qs[88]=0,Bs[73]=Bs[97]=0,js[73]=js[97]=1,Zs[73]=Zs[97]=0,Us[73]=Us[97]=0,Vs[73]=Vs[97]=-1,qs[73]=qs[97]=0,Gs[73]=Gs[97]=1,Ws[73]=Ws[97]=0,Hs[73]=Hs[97]=0,Rs[73]=Rs[97]=1,Ns[73]=Ns[97]=0,Os[73]=Os[97]=1,Bs[145]=Bs[25]=0,js[145]=js[25]=-1,Zs[145]=Zs[25]=0,Gs[145]=Gs[25]=1,Ws[145]=Ws[25]=0,Hs[145]=Hs[25]=1,tl[145]=tl[25]=0,el[145]=el[25]=1,nl[145]=nl[25]=1,zs[145]=zs[25]=-1,Ds[145]=Ds[25]=0,Fs[145]=Fs[25]=0,Us[70]=Us[100]=0,Vs[70]=Vs[100]=1,qs[70]=qs[100]=0,Xs[70]=Xs[100]=-1,Ys[70]=Ys[100]=0,$s[70]=$s[100]=1,Ks[70]=Ks[100]=0,Js[70]=Js[100]=-1,Qs[70]=Qs[100]=1,Rs[70]=Rs[100]=1,Ns[70]=Ns[100]=0,Os[70]=Os[100]=0,Us[101]=Us[69]=0,Vs[101]=Vs[69]=1,qs[101]=qs[69]=0,Rs[101]=Rs[69]=1,Ns[101]=Ns[69]=0,Os[101]=Os[69]=0,tl[149]=tl[21]=0,el[149]=el[21]=1,nl[149]=nl[21]=1,zs[149]=zs[21]=-1,Ds[149]=Ds[21]=0,Fs[149]=Fs[21]=0,Xs[86]=Xs[84]=-1,Ys[86]=Ys[84]=0,$s[86]=$s[84]=1,Ks[86]=Ks[84]=0,Js[86]=Js[84]=-1,Qs[86]=Qs[84]=1,Bs[89]=Bs[81]=0,js[89]=js[81]=-1,Zs[89]=Zs[81]=0,Gs[89]=Gs[81]=1,Ws[89]=Ws[81]=0,Hs[89]=Hs[81]=1,Bs[96]=Bs[74]=0,js[96]=js[74]=1,Zs[96]=Zs[74]=0,Us[96]=Us[74]=-1,Vs[96]=Vs[74]=0,qs[96]=qs[74]=1,Ks[96]=Ks[74]=1,Js[96]=Js[74]=0,Qs[96]=Qs[74]=0,Rs[96]=Rs[74]=1,Ns[96]=Ns[74]=0,Os[96]=Os[74]=1,Bs[24]=Bs[146]=0,js[24]=js[146]=-1,Zs[24]=Zs[146]=1,Xs[24]=Xs[146]=1,Ys[24]=Ys[146]=0,$s[24]=$s[146]=1,Gs[24]=Gs[146]=0,Ws[24]=Ws[146]=1,Hs[24]=Hs[146]=1,zs[24]=zs[146]=0,Ds[24]=Ds[146]=-1,Fs[24]=Fs[146]=0,Us[6]=Us[164]=-1,Vs[6]=Vs[164]=0,qs[6]=qs[164]=1,Xs[6]=Xs[164]=-1,Ys[6]=Ys[164]=0,$s[6]=$s[164]=0,tl[6]=tl[164]=0,el[6]=el[164]=-1,nl[6]=nl[164]=1,Ks[6]=Ks[164]=1,Js[6]=Js[164]=0,Qs[6]=Qs[164]=0,Gs[129]=Gs[41]=0,Ws[129]=Ws[41]=1,Hs[129]=Hs[41]=1,tl[129]=tl[41]=0,el[129]=el[41]=1,nl[129]=nl[41]=0,Rs[129]=Rs[41]=-1,Ns[129]=Ns[41]=0,Os[129]=Os[41]=0,zs[129]=zs[41]=0,Ds[129]=Ds[41]=-1,Fs[129]=Fs[41]=0,Xs[66]=Xs[104]=0,Ys[66]=Ys[104]=1,$s[66]=$s[104]=0,Gs[66]=Gs[104]=-1,Ws[66]=Ws[104]=0,Hs[66]=Hs[104]=1,Ks[66]=Ks[104]=0,Js[66]=Js[104]=-1,Qs[66]=Qs[104]=0,Rs[66]=Rs[104]=0,Ns[66]=Ns[104]=-1,Os[66]=Os[104]=1,Bs[144]=Bs[26]=-1,js[144]=js[26]=0,Zs[144]=Zs[26]=0,tl[144]=tl[26]=1,el[144]=el[26]=0,nl[144]=nl[26]=1,Ks[144]=Ks[26]=0,Js[144]=Js[26]=1,Qs[144]=Qs[26]=1,zs[144]=zs[26]=-1,Ds[144]=Ds[26]=0,Fs[144]=Fs[26]=1,Us[36]=Us[134]=0,Vs[36]=Vs[134]=1,qs[36]=qs[134]=1,Xs[36]=Xs[134]=0,Ys[36]=Ys[134]=1,$s[36]=$s[134]=0,Rs[36]=Rs[134]=0,Ns[36]=Ns[134]=-1,Os[36]=Os[134]=1,zs[36]=zs[134]=1,Ds[36]=Ds[134]=0,Fs[36]=Fs[134]=0,Bs[9]=Bs[161]=-1,js[9]=js[161]=0,Zs[9]=Zs[161]=0,Us[9]=Us[161]=0,Vs[9]=Vs[161]=-1,qs[9]=qs[161]=0,Gs[9]=Gs[161]=1,Ws[9]=Ws[161]=0,Hs[9]=Hs[161]=0,tl[9]=tl[161]=1,el[9]=el[161]=0,nl[9]=nl[161]=1,Bs[136]=0,js[136]=1,Zs[136]=1,Us[136]=0,Vs[136]=1,qs[136]=0,Xs[136]=-1,Ys[136]=0,$s[136]=1,Gs[136]=-1,Ws[136]=0,Hs[136]=0,tl[136]=0,el[136]=-1,nl[136]=0,Ks[136]=0,Js[136]=-1,Qs[136]=1,Rs[136]=1,Ns[136]=0,Os[136]=0,zs[136]=1,Ds[136]=0,Fs[136]=1,Bs[34]=0,js[34]=-1,Zs[34]=0,Us[34]=0,Vs[34]=-1,qs[34]=1,Xs[34]=1,Ys[34]=0,$s[34]=0,Gs[34]=1,Ws[34]=0,Hs[34]=1,tl[34]=0,el[34]=1,nl[34]=1,Ks[34]=0,Js[34]=1,Qs[34]=0,Rs[34]=-1,Ns[34]=0,Os[34]=1,zs[34]=-1,Ds[34]=0,Fs[34]=0,Bs[35]=0,js[35]=1,Zs[35]=1,Us[35]=0,Vs[35]=-1,qs[35]=1,Xs[35]=1,Ys[35]=0,$s[35]=0,Gs[35]=-1,Ws[35]=0,Hs[35]=0,tl[35]=0,el[35]=-1,nl[35]=0,Ks[35]=0,Js[35]=1,Qs[35]=0,Rs[35]=-1,Ns[35]=0,Os[35]=1,zs[35]=1,Ds[35]=0,Fs[35]=1,Bs[153]=0,js[153]=1,Zs[153]=1,Gs[153]=-1,Ws[153]=0,Hs[153]=0,tl[153]=0,el[153]=-1,nl[153]=0,zs[153]=1,Ds[153]=0,Fs[153]=1,Us[102]=0,Vs[102]=-1,qs[102]=1,Xs[102]=1,Ys[102]=0,$s[102]=0,Ks[102]=0,Js[102]=1,Qs[102]=0,Rs[102]=-1,Ns[102]=0,Os[102]=1,Bs[155]=0,js[155]=-1,Zs[155]=0,Gs[155]=1,Ws[155]=0,Hs[155]=1,tl[155]=0,el[155]=1,nl[155]=1,zs[155]=-1,Ds[155]=0,Fs[155]=0,Us[103]=0,Vs[103]=1,qs[103]=0,Xs[103]=-1,Ys[103]=0,$s[103]=1,Ks[103]=0,Js[103]=-1,Qs[103]=1,Rs[103]=1,Ns[103]=0,Os[103]=0,Bs[152]=0,js[152]=1,Zs[152]=1,Xs[152]=-1,Ys[152]=0,$s[152]=1,Gs[152]=-1,Ws[152]=0,Hs[152]=0,tl[152]=0,el[152]=-1,nl[152]=0,Ks[152]=0,Js[152]=-1,Qs[152]=1,zs[152]=1,Ds[152]=0,Fs[152]=1,Bs[156]=0,js[156]=-1,Zs[156]=1,Xs[156]=1,Ys[156]=0,$s[156]=1,Gs[156]=-1,Ws[156]=0,Hs[156]=0,tl[156]=0,el[156]=-1,nl[156]=0,Ks[156]=0,Js[156]=1,Qs[156]=1,zs[156]=-1,Ds[156]=0,Fs[156]=1,Bs[137]=0,js[137]=1,Zs[137]=1,Us[137]=0,Vs[137]=1,qs[137]=0,Gs[137]=-1,Ws[137]=0,Hs[137]=0,tl[137]=0,el[137]=-1,nl[137]=0,Rs[137]=1,Ns[137]=0,Os[137]=0,zs[137]=1,Ds[137]=0,Fs[137]=1,Bs[139]=0,js[139]=1,Zs[139]=1,Us[139]=0,Vs[139]=-1,qs[139]=0,Gs[139]=1,Ws[139]=0,Hs[139]=0,tl[139]=0,el[139]=1,nl[139]=0,Rs[139]=-1,Ns[139]=0,Os[139]=0,zs[139]=1,Ds[139]=0,Fs[139]=1,Bs[98]=0,js[98]=-1,Zs[98]=0,Us[98]=0,Vs[98]=-1,qs[98]=1,Xs[98]=1,Ys[98]=0,$s[98]=0,Gs[98]=1,Ws[98]=0,Hs[98]=1,Ks[98]=0,Js[98]=1,Qs[98]=0,Rs[98]=-1,Ns[98]=0,Os[98]=1,Bs[99]=0,js[99]=1,Zs[99]=0,Us[99]=0,Vs[99]=-1,qs[99]=1,Xs[99]=1,Ys[99]=0,$s[99]=0,Gs[99]=-1,Ws[99]=0,Hs[99]=1,Ks[99]=0,Js[99]=-1,Qs[99]=0,Rs[99]=1,Ns[99]=0,Os[99]=1,Us[38]=0,Vs[38]=-1,qs[38]=1,Xs[38]=1,Ys[38]=0,$s[38]=0,tl[38]=0,el[38]=1,nl[38]=1,Ks[38]=0,Js[38]=1,Qs[38]=0,Rs[38]=-1,Ns[38]=0,Os[38]=1,zs[38]=-1,Ds[38]=0,Fs[38]=0,Us[39]=0,Vs[39]=1,qs[39]=1,Xs[39]=-1,Ys[39]=0,$s[39]=0,tl[39]=0,el[39]=-1,nl[39]=1,Ks[39]=0,Js[39]=1,Qs[39]=0,Rs[39]=-1,Ns[39]=0,Os[39]=1,zs[39]=1,Ds[39]=0,Fs[39]=0;var rl=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},il=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},ol=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},al=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},sl=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},ll=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},ul=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},cl=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},hl=[],fl=[],pl=[],dl=[],ml=[],gl=[],vl=[],yl=[];dl[1]=ml[1]=18,dl[169]=ml[169]=18,pl[4]=fl[4]=12,pl[166]=fl[166]=12,hl[16]=yl[16]=4,hl[154]=yl[154]=4,gl[64]=vl[64]=22,gl[106]=vl[106]=22,pl[2]=gl[2]=17,dl[2]=ml[2]=18,pl[168]=gl[168]=17,dl[168]=ml[168]=18,hl[8]=dl[8]=9,fl[8]=pl[8]=12,hl[162]=dl[162]=9,fl[162]=pl[162]=12,hl[32]=yl[32]=4,fl[32]=vl[32]=1,hl[138]=yl[138]=4,fl[138]=vl[138]=1,ml[128]=yl[128]=21,gl[128]=vl[128]=22,ml[42]=yl[42]=21,gl[42]=vl[42]=22,fl[5]=ml[5]=14,fl[165]=ml[165]=14,pl[20]=yl[20]=6,pl[150]=yl[150]=6,hl[80]=gl[80]=11,hl[90]=gl[90]=11,dl[65]=vl[65]=3,dl[105]=vl[105]=3,hl[160]=gl[160]=11,fl[160]=ml[160]=14,hl[10]=gl[10]=11,fl[10]=ml[10]=14,pl[130]=yl[130]=6,dl[130]=vl[130]=3,pl[40]=yl[40]=6,dl[40]=vl[40]=3,fl[101]=vl[101]=1,fl[69]=vl[69]=1,ml[149]=yl[149]=21,ml[21]=yl[21]=21,pl[86]=gl[86]=17,pl[84]=gl[84]=17,hl[89]=dl[89]=9,hl[81]=dl[81]=9,hl[96]=vl[96]=0,fl[96]=gl[96]=15,hl[74]=vl[74]=0,fl[74]=gl[74]=15,hl[24]=pl[24]=8,dl[24]=yl[24]=7,hl[146]=pl[146]=8,dl[146]=yl[146]=7,fl[6]=gl[6]=15,pl[6]=ml[6]=16,fl[164]=gl[164]=15,pl[164]=ml[164]=16,dl[129]=yl[129]=7,ml[129]=vl[129]=20,dl[41]=yl[41]=7,ml[41]=vl[41]=20,pl[66]=vl[66]=2,dl[66]=gl[66]=19,pl[104]=vl[104]=2,dl[104]=gl[104]=19,hl[144]=ml[144]=10,gl[144]=yl[144]=23,hl[26]=ml[26]=10,gl[26]=yl[26]=23,fl[36]=yl[36]=5,pl[36]=vl[36]=2,fl[134]=yl[134]=5,pl[134]=vl[134]=2,hl[9]=ml[9]=10,fl[9]=dl[9]=13,hl[161]=ml[161]=10,fl[161]=dl[161]=13,fl[37]=yl[37]=5,ml[37]=vl[37]=20,fl[133]=yl[133]=5,ml[133]=vl[133]=20,pl[148]=ml[148]=16,gl[148]=yl[148]=23,pl[22]=ml[22]=16,gl[22]=yl[22]=23,hl[82]=pl[82]=8,dl[82]=gl[82]=19,hl[88]=pl[88]=8,dl[88]=gl[88]=19,hl[73]=vl[73]=0,fl[73]=dl[73]=13,hl[97]=vl[97]=0,fl[97]=dl[97]=13,hl[145]=dl[145]=9,ml[145]=yl[145]=21,hl[25]=dl[25]=9,ml[25]=yl[25]=21,fl[70]=vl[70]=1,pl[70]=gl[70]=17,fl[100]=vl[100]=1,pl[100]=gl[100]=17,hl[34]=dl[34]=9,fl[34]=pl[34]=12,ml[34]=yl[34]=21,gl[34]=vl[34]=22,hl[136]=yl[136]=4,fl[136]=vl[136]=1,pl[136]=gl[136]=17,dl[136]=ml[136]=18,hl[35]=yl[35]=4,fl[35]=pl[35]=12,dl[35]=ml[35]=18,gl[35]=vl[35]=22,hl[153]=yl[153]=4,dl[153]=ml[153]=18,fl[102]=pl[102]=12,gl[102]=vl[102]=22,hl[155]=dl[155]=9,ml[155]=yl[155]=23,fl[103]=vl[103]=1,pl[103]=gl[103]=17,hl[152]=yl[152]=4,pl[152]=gl[152]=17,dl[152]=ml[152]=18,hl[156]=pl[156]=8,dl[156]=ml[156]=18,gl[156]=yl[156]=23,hl[137]=yl[137]=4,fl[137]=vl[137]=1,dl[137]=ml[137]=18,hl[139]=yl[139]=4,fl[139]=dl[139]=13,ml[139]=vl[139]=20,hl[98]=dl[98]=9,fl[98]=pl[98]=12,gl[98]=vl[98]=22,hl[99]=vl[99]=0,fl[99]=pl[99]=12,dl[99]=gl[99]=19,fl[38]=pl[38]=12,ml[38]=yl[38]=21,gl[38]=vl[38]=22,fl[39]=yl[39]=5,pl[39]=ml[39]=16,gl[39]=vl[39]=22;var _l=[];_l[1]=_l[169]=rl,_l[4]=_l[166]=il,_l[16]=_l[154]=ol,_l[64]=_l[106]=al,_l[168]=_l[2]=sl,_l[162]=_l[8]=ll,_l[138]=_l[32]=ul,_l[42]=_l[128]=cl,_l[5]=_l[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},_l[20]=_l[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},_l[80]=_l[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},_l[65]=_l[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},_l[160]=_l[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},_l[130]=_l[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},_l[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},_l[101]=_l[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},_l[149]=_l[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},_l[86]=_l[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},_l[89]=_l[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},_l[96]=_l[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},_l[24]=_l[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},_l[6]=_l[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},_l[129]=_l[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},_l[66]=_l[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},_l[144]=_l[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},_l[36]=_l[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},_l[9]=_l[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},_l[37]=_l[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},_l[148]=_l[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},_l[82]=_l[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},_l[73]=_l[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},_l[145]=_l[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},_l[70]=_l[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},_l[34]=function(t){return[cl(t),ll(t)]},_l[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},_l[136]=function(t){return[ul(t),sl(t)]},_l[153]=function(t){return[ol(t),rl(t)]},_l[102]=function(t){return[il(t),al(t)]},_l[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},_l[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},_l[152]=function(t){return[ol(t),sl(t)]},_l[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},_l[137]=function(t){return[ul(t),rl(t)]},_l[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},_l[98]=function(t){return[ll(t),al(t)]},_l[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},_l[38]=function(t){return[il(t),cl(t)]},_l[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};function xl(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=bl(t.properties),e.geometry=wl(t.geometry),e}function bl(t){var e={};return t?(Object.keys(t).forEach((function(n){var r=t[n];"object"===typeof r?null===r?e[n]=null:Array.isArray(r)?e[n]=r.map((function(t){return t})):e[n]=bl(r):e[n]=r})),e):e}function wl(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return wl(t)})),e):(e.coordinates=kl(t.coordinates),e)}function kl(t){var e=t;return"object"!==typeof e[0]?e.slice():e.map((function(t){return kl(t)}))}var Sl=function(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return xl(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return xl(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return wl(t);default:throw new Error("unknown GeoJSON type")}};var El=function(t,e,n,r){if(!$a(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,a=r.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");if(o&&"number"!==typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(void 0===n||null===n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==a&&void 0!==a||(t=Sl(t)),Ka(t,(function(t){var r=os(Ls(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)})),t};function Il(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function Cl(t,e){return t[0]*e[1]-e[0]*t[1]}function Al(t,e){return!function(t,e){return 0===Cl(Il(t),Il(e))}(t,e)&&function(t,e){var n,r,i=t[0],o=Il(t),a=e[0],s=Il(e),l=Cl(o,s),u=function(t,e){return[t[0]+e[0],t[1]+e[1]]}(i,function(t,e){return[t*e[0],t*e[1]]}(Cl((r=i,[(n=a)[0]-r[0],n[1]-r[1]]),s)/l,o));return u}(t,e)}function Pl(t,e,n){var r=[],i=function(t,e){return Ha(Wa(t,e))}(e,n),o=os(t),a=[];return o.forEach((function(t,e){if(e!==o.length-1){var n=function(t,e,n){var r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),i=t[0]+n*(e[1]-t[1])/r,o=e[0]+n*(e[1]-t[1])/r,a=t[1]+n*(t[0]-e[0])/r,s=e[1]+n*(t[0]-e[0])/r;return[[i,a],[o,s]]}(t,o[e+1],i);if(r.push(n),e>0){var s=r[e-1],l=Al(n,s);!1!==l&&(s[1]=l,n[0]=l),a.push(s[0]),e===o.length-2&&(a.push(n[0]),a.push(n[1]))}2===o.length&&(a.push(n[0]),a.push(n[1]))}})),Za(a,t.properties)}var Tl=function(t,e,n){if(!$a(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");var i=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}(t),o=t.properties;switch(i){case"LineString":return Pl(t,e,r);case"MultiLineString":var a=[];return ts(t,(function(t){a.push(Pl(t,e,r).geometry.coordinates)})),Va(a,o);default:throw new Error("geometry "+i+" is not supported")}};function Ml(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(r*(n[1]-e[1])-o*i)}function Ll(t,e){return e.geometry.coordinates[0].every((function(e){return ss(Ba(e),t)}))}var Rl=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]===0&&i.coordinates[0]-t.coordinates[0]===0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=Ml(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),Nl=Rl,Ol=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return Za([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return Ml(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),zl=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=Ml(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},t.prototype.toMultiPoint=function(){return qa(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=ja([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=hs(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,r,i=t.getEnvelope();return e.forEach((function(e){var o=e.getEnvelope();if(r&&(n=r.getEnvelope()),!function(t,e){var n=t.geometry.coordinates[0].map((function(t){return t[0]})),r=t.geometry.coordinates[0].map((function(t){return t[1]})),i=e.geometry.coordinates[0].map((function(t){return t[0]})),o=e.geometry.coordinates[0].map((function(t){return t[1]}));return Math.max.apply(null,n)===Math.max.apply(null,i)&&Math.max.apply(null,r)===Math.max.apply(null,o)&&Math.min.apply(null,n)===Math.min.apply(null,i)&&Math.min.apply(null,r)===Math.min.apply(null,o)}(o,i)&&Ll(o,i)){for(var a=t.map((function(t){return t.from.coordinates})),s=void 0,l=function(t){e.some((function(e){return n=t,r=e.from.coordinates,n[0]===r[0]&&n[1]===r[1];var n,r}))||(s=t)},u=0,c=a;u<c.length;u++){l(c[u])}s&&e.inside(Ba(s))&&(r&&!Ll(n,o)||(r=e))}})),r},t.prototype.inside=function(t){return ss(t,this.toPolygon())},t}(),Dl=zl;!function(){function t(){this.edges=[],this.nodes={}}t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return ts(e,(function(t){!function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}(t,"LineString","Graph::fromGeoJson"),function(t,e,n,r){var i=n;Ka(t,(function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)}),r)}(t,(function(t,e){if(t){var r=n.getNode(t),i=n.getNode(e);n.addEdge(r,i)}return e}))})),n},t.prototype.getNode=function(t){var e=Nl.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new Nl(t)),n},t.prototype.addEdge=function(t,e){var n=new Ol(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this;"undefined"===typeof t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var a=i[o],s=a.symetric,l=void 0,u=void 0;a.label===e&&(l=a),s.label===e&&(u=s),l&&u&&(u&&(r=u),l&&(r&&(r.next=l,r=void 0),n||(n=l)))}r&&(r.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}})),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new Dl;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()}}();function Fl(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(jl(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function Bl(t,e){for(var n=0,r=e.coordinates;n<r.length;n++){if(ss(r[n],t))return!0}return vs(e,Ts(t)).features.length>0}function jl(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],a=e[1]-t[1];return 0===r*a-i*o&&(Math.abs(o)>=Math.abs(a)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}var Zl=function(t,e){var n=!0;return ts(t,(function(t){ts(e,(function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return n=t.coordinates,r=e.coordinates,!(n[0]===r[0]&&n[1]===r[1]);case"LineString":return!Fl(e,t);case"Polygon":return!ss(t,e)}break;case"LineString":switch(e.type){case"Point":return!Fl(t,e);case"LineString":return!function(t,e){if(vs(t,e).features.length>0)return!0;return!1}(t,e);case"Polygon":return!Bl(e,t)}break;case"Polygon":switch(e.type){case"Point":return!ss(e,t);case"LineString":return!Bl(t,e);case"Polygon":return!function(t,e){for(var n=0,r=t.coordinates[0];n<r.length;n++){if(ss(r[n],e))return!0}for(var i=0,o=e.coordinates[0];i<o.length;i++){if(ss(o[i],t))return!0}if(vs(Ts(t),Ts(e)).features.length>0)return!0;return!1}(e,t)}}var n,r;return!1}(t.geometry,e.geometry)}))})),n};n(4042);n(5107);n(6530);function Ul(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var Vl={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||Vl.heuristics.manhattan,o=r.closest||!1,a=new Wl((function(t){return t.f})),s=e;for(e.h=i(e,n),a.push(e);a.size()>0;){var l=a.pop();if(l===n)return Ul(l);l.closed=!0;for(var u=t.neighbors(l),c=0,h=u.length;c<h;++c){var f=u[c];if(!f.closed&&!f.isWall()){var p=l.g+f.getCost(l),d=f.visited;(!d||p<f.g)&&(f.visited=!0,f.parent=l,f.h=f.h||i(f,n),f.g=p,f.f=f.g+f.h,t.markDirty(f),o&&(f.h<s.h||f.h===s.h&&f.g<s.g)&&(s=f),d?a.rescoreElement(f):a.push(f))}}}return o?Ul(s):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function ql(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Gl(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Gl(t,e,n){this.x=t,this.y=e,this.weight=n}function Wl(t){this.content=[],this.scoreFunction=t}ql.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Vl.cleanNode(this.nodes[t])},ql.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Vl.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},ql.prototype.markDirty=function(t){this.dirtyNodes.push(t)},ql.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},ql.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],n=0,r=(e=o[a]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Gl.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Gl.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Gl.prototype.isWall=function(){return 0===this.weight},Wl.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,a=o-1,s=null;if(a<e){var l=this.content[a];(i=this.scoreFunction(l))<r&&(s=a)}if(o<e){var u=this.content[o];this.scoreFunction(u)<(null===s?r:i)&&(s=o)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}};function Hl(){this._=null}function Xl(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Yl(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function $l(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Kl(t){for(;t.L;)t=t.L;return t}Hl.prototype={constructor:Hl,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Kl(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Yl(this,n),n=(t=n).U),n.C=!1,r.C=!0,$l(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&($l(this,n),n=(t=n).U),n.C=!1,r.C=!0,Yl(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Kl(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Yl(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,$l(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Yl(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,$l(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Yl(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,$l(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Jl=Hl;function Ql(t,e,n,r){var i=[null,null],o=ku.push(i)-1;return i.left=t,i.right=e,n&&eu(i,t,e,n),r&&eu(i,e,t,r),bu[t.index].halfedges.push(o),bu[e.index].halfedges.push(o),i}function tu(t,e,n){var r=[e,n];return r.left=t,r}function eu(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function nu(t,e,n,r,i){var o,a=t[0],s=t[1],l=a[0],u=a[1],c=0,h=1,f=s[0]-l,p=s[1]-u;if(o=e-l,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=r-l,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}if(o=n-u,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=i-u,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[l+c*f,u+c*p]),h<1&&(t[1]=[l+h*f,u+h*p]),!0)}}}}}function ru(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,l=t[0],u=t.left,c=t.right,h=u[0],f=u[1],p=c[0],d=c[1],m=(h+p)/2,g=(f+d)/2;if(d===f){if(m<e||m>=r)return;if(h>p){if(l){if(l[1]>=i)return}else l=[m,n];o=[m,i]}else{if(l){if(l[1]<n)return}else l=[m,i];o=[m,n]}}else if(s=g-(a=(h-p)/(d-f))*m,a<-1||a>1)if(h>p){if(l){if(l[1]>=i)return}else l=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(l){if(l[1]<n)return}else l=[(i-s)/a,i];o=[(n-s)/a,n]}else if(f<d){if(l){if(l[0]>=r)return}else l=[e,a*e+s];o=[r,a*r+s]}else{if(l){if(l[0]<e)return}else l=[r,a*r+s];o=[e,a*e+s]}return t[0]=l,t[1]=o,!0}function iu(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function ou(t,e){return e[+(e.left!==t.site)]}function au(t,e){return e[+(e.left===t.site)]}var su,lu=[];function uu(){Xl(this),this.x=this.y=this.arc=this.site=this.cy=null}function cu(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],l=r[0]-a,u=r[1]-s,c=o[0]-a,h=o[1]-s,f=2*(l*h-u*c);if(!(f>=-Eu)){var p=l*l+u*u,d=c*c+h*h,m=(h*p-u*d)/f,g=(l*d-c*p)/f,v=lu.pop()||new uu;v.arc=t,v.site=i,v.x=m+a,v.y=(v.cy=g+s)+Math.sqrt(m*m+g*g),t.circle=v;for(var y=null,_=wu._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}wu.insert(y,v),y||(su=v)}}}}function hu(t){var e=t.circle;e&&(e.P||(su=e.N),wu.remove(e),lu.push(e),Xl(e),t.circle=null)}var fu=[];function pu(){Xl(this),this.edge=this.site=this.circle=null}function du(t){var e=fu.pop()||new pu;return e.site=t,e}function mu(t){hu(t),xu.remove(t),fu.push(t),Xl(t)}function gu(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];mu(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<Su&&Math.abs(r-l.circle.cy)<Su;)o=l.P,s.unshift(l),mu(l),l=o;s.unshift(l),hu(l);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<Su&&Math.abs(r-u.circle.cy)<Su;)a=u.N,s.push(u),mu(u),u=a;s.push(u),hu(u);var c,h=s.length;for(c=1;c<h;++c)u=s[c],l=s[c-1],eu(u.edge,l.site,u.site,i);l=s[0],(u=s[h-1]).edge=Ql(l.site,u.site,null,i),cu(l),cu(u)}function vu(t){for(var e,n,r,i,o=t[0],a=t[1],s=xu._;s;)if((r=yu(s,a)-o)>Su)s=s.L;else{if(!((i=o-_u(s,a))>Su)){r>-Su?(e=s.P,n=s):i>-Su?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){bu[t.index]={site:t,halfedges:[]}}(t);var l=du(t);if(xu.insert(e,l),e||n){if(e===n)return hu(e),n=du(e.site),xu.insert(l,n),l.edge=n.edge=Ql(e.site,l.site),cu(e),void cu(n);if(n){hu(e),hu(n);var u=e.site,c=u[0],h=u[1],f=t[0]-c,p=t[1]-h,d=n.site,m=d[0]-c,g=d[1]-h,v=2*(f*g-p*m),y=f*f+p*p,_=m*m+g*g,x=[(g*y-p*_)/v+c,(f*_-m*y)/v+h];eu(n.edge,u,d,x),l.edge=Ql(u,t,null,x),n.edge=Ql(t,d,null,x),cu(e),cu(n)}else l.edge=Ql(e.site,l.site)}}function yu(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],l=n[1],u=l-e;if(!u)return s;var c=s-r,h=1/o-1/u,f=c/u;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*u)-l+u/2+i-o/2)))/h+r:(r+s)/2}function _u(t,e){var n=t.N;if(n)return yu(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var xu,bu,wu,ku,Su=1e-6,Eu=1e-12;function Iu(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function Cu(t,e){return e[1]-t[1]||e[0]-t[0]}function Au(t,e){var n,r,i,o=t.sort(Cu).pop();for(ku=[],bu=new Array(t.length),xu=new Jl,wu=new Jl;;)if(i=su,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(vu(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;gu(i.arc)}if(function(){for(var t,e,n,r,i=0,o=bu.length;i<o;++i)if((t=bu[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=iu(t,ku[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],l=+e[1][0],u=+e[1][1];!function(t,e,n,r){for(var i,o=ku.length;o--;)ru(i=ku[o],t,e,n,r)&&nu(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>Su||Math.abs(i[0][1]-i[1][1])>Su)||delete ku[o]}(a,s,l,u),function(t,e,n,r){var i,o,a,s,l,u,c,h,f,p,d,m,g=bu.length,v=!0;for(i=0;i<g;++i)if(o=bu[i]){for(a=o.site,s=(l=o.halfedges).length;s--;)ku[l[s]]||l.splice(s,1);for(s=0,u=l.length;s<u;)d=(p=au(o,ku[l[s]]))[0],m=p[1],h=(c=ou(o,ku[l[++s%u]]))[0],f=c[1],(Math.abs(d-h)>Su||Math.abs(m-f)>Su)&&(l.splice(s,0,ku.push(tu(a,p,Math.abs(d-t)<Su&&r-m>Su?[t,Math.abs(h-t)<Su?f:r]:Math.abs(m-r)<Su&&n-d>Su?[Math.abs(f-r)<Su?h:n,r]:Math.abs(d-n)<Su&&m-e>Su?[n,Math.abs(h-n)<Su?f:e]:Math.abs(m-e)<Su&&d-t>Su?[Math.abs(f-e)<Su?h:t,e]:null))-1),++u);u&&(v=!1)}if(v){var y,_,x,b=1/0;for(i=0,v=null;i<g;++i)(o=bu[i])&&(x=(y=(a=o.site)[0]-t)*y+(_=a[1]-e)*_)<b&&(b=x,v=o);if(v){var w=[t,e],k=[t,r],S=[n,r],E=[n,e];v.halfedges.push(ku.push(tu(a=v.site,w,k))-1,ku.push(tu(a,k,S))-1,ku.push(tu(a,S,E))-1,ku.push(tu(a,E,w))-1)}}for(i=0;i<g;++i)(o=bu[i])&&(o.halfedges.length||delete bu[i])}(a,s,l,u)}this.edges=ku,this.cells=bu,xu=wu=ku=bu=null}Au.prototype={constructor:Au,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return ou(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s=n.site,l=-1,u=e[i[o-1]],c=u.left===s?u.right:u.left;++l<o;)a=c,c=(u=e[i[l]]).left===s?u.right:u.left,a&&c&&r<a.index&&r<c.index&&Iu(s,a,c)<0&&t.push([s.data,a.data,c.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var l=t-i.site[0],u=e-i.site[1],c=l*l+u*u;do{i=o.cells[r=a],a=null,i.halfedges.forEach((function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var l=t-s[0],u=e-s[1],h=l*l+u*u;h<c&&(c=h,a=s.index)}}))}while(null!==a);return o._found=r,null==n||c<=n*n?i.site:null}};n(9056);n(4035);function Pu(){return new Tu}function Tu(){this.reset()}Tu.prototype={constructor:Tu,reset:function(){this.s=this.t=0},add:function(t){Lu(Mu,t,this.t),Lu(this,Mu.s,this.s),this.s?this.t+=Mu.t:this.s=Mu.t},valueOf:function(){return this.s}};var Mu=new Tu;function Lu(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var Ru=1e-6,Nu=Math.PI,Ou=Nu/2,zu=Nu/4,Du=2*Nu,Fu=Nu/180,Bu=Math.abs,ju=Math.atan,Zu=Math.atan2,Uu=Math.cos,Vu=(Math.ceil,Math.exp),qu=(Math.floor,Math.log),Gu=(Math.pow,Math.sin),Wu=(Math.sign,Math.sqrt),Hu=Math.tan;function Xu(t){return t>1?Ou:t<-1?-Ou:Math.asin(t)}function Yu(){}Pu(),Pu();function $u(t){var e=t[0],n=t[1],r=Uu(n);return[r*Uu(e),r*Gu(e),Gu(n)]}function Ku(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Ju(t){var e=Wu(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}Pu();function Qu(t,e){return[t>Nu?t-Du:t<-Nu?t+Du:t,e]}function tc(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function ec(t,e,n,r,i){var o,a,s=[],l=[];if(t.forEach((function(t){if(!(t.length-1<=0)){var e,n,r=t[0],a=t[e];if(function(t,e){return Bu(t[0]-e[0])<Ru&&Bu(t[1]-e[1])<Ru}(r,a)){for(i.lineStart(),0;o<e;++o)i.point(t[o][0],r[1]);i.lineEnd()}else s.push(new tc(r,t,null,!0)),l.push(n.o=new tc(r,null,n,!1)),s.push(new tc(a,t,null,!1)),l.push(n.o=new tc(a,null,n,!0))}})),s.length){for(l.sort(e),nc(s),nc(l),0,l.length;o<a;++o)l[o].e=!n;for(var u,c,h=s[0];;){for(var f=h,p=!0;f.v;)if(f.n===h)return;f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(0,u.length;o<a;++o)i.point(u[o][0],c[1]);else r(f.x,f.n.x,1,i);f.n}else{if(p)for(f.p.z,u.length-1;o>=0;--o)i.point(u[o][0],c[1]);else r(f.x,f.p.x,-1,i);f.p}f.o.z,!p}while(!f.v);i.lineEnd()}}}function nc(t){if(t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=t[r],n.p=i,n;i.n=t[0],n.p=i}}function rc(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Qu.invert=Qu;1===(ic=rc).length&&(ic=function(t){return function(e,n){return rc(t(e),n)}}(ic));var ic,oc=Array.prototype;oc.slice,oc.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var ac=Pu();function sc(t,e){var n=e[0],r=e[1],i=[Gu(n),-Uu(n),0],o=0,a=0;ac.reset();for(var s=0,l=t.length;s<l;++s)if(t[s].length)for(var u,c,h=u[c-1],f=h[0],p=h[1]/2+zu,d=Gu(p),m=Uu(p),g=0;g<c;y,x,b,v){var v=u[g],y=v[0],_=v[1]/2+zu,x=Gu(_),b=Uu(_),w=y-f,k=w>=0?1:-1,S=k*w,E=S>Nu,I=d*x;if(ac.add(Zu(I*k*Gu(S),m*b+I*Uu(S))),E?w+k*Du:w,E^f>=n^y>=n){var C=Ku($u(h),$u(v));Ju(C);var A=Ku(i,C);Ju(A);var P=(E^w>=0?-1:1)*Xu(A[2]);(r>P||r===P&&(C[0]||C[1]))&&(E^w>=0?1:-1)}}return(o<-1e-6||o<Ru&&ac<-1e-6)^1&a}Pu();Pu(),Pu();Pu();function lc(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function uc(t){return t.length>1}function cc(t,e){return(t.x[0]<0?t[1]-Ou-Ru:Ou-t[1])-(e.x[0]<0?e[1]-Ou-Ru:Ou-e[1])}lc(4.5);function hc(t){return function(e){var n=new fc;for(var r in t)n[r]=t[r];return n.stream=e,n}}function fc(){}fc.prototype={constructor:fc,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};Uu(30*Fu);hc({point:function(t,e){this.stream.point(t*Fu,e*Fu)}});function pc(t){return function(e,n){var r=Uu(e),i=Uu(n),o=t(r*i);return[o*i*Gu(e),o*Gu(n)]}}function dc(t){return function(e,n){var r=Wu(e*e+n*n),i=t(r),o=Gu(i),a=Uu(i);return[Zu(e*o,r*a),Xu(r&&n*o/r)]}}var mc=pc((function(t){return Wu(2/(1+t))}));mc.invert=dc((function(t){return 2*Xu(t/2)}));var gc=pc((function(t){return(t=function(t){return t>1?0:t<-1?Nu:Math.acos(t)}(t))&&t/Gu(t)}));function vc(t,e){return[t,qu(Hu((Ou+e)/2))]}function yc(t,e){return[t,e]}function _c(t,e){var n=Uu(e),r=Uu(t)*n;return[n*Gu(t)/r,Gu(e)/r]}function xc(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function bc(t,e){return[Uu(e)*Gu(t),Gu(e)]}function wc(t,e){var n=Uu(e),r=1+Uu(t)*n;return[n*Gu(t)/r,Gu(e)/r]}function kc(t,e){return[qu(Hu((Ou+e)/2)),-t]}gc.invert=dc((function(t){return t})),vc.invert=function(t,e){return[t,2*ju(Vu(e))-Ou]},yc.invert=yc,_c.invert=dc(ju),xc.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Bu(n)>Ru&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},bc.invert=dc(Xu),wc.invert=dc((function(t){return 2*ju(t)})),kc.invert=function(t,e){return[-e,2*ju(Vu(t))-Ou]};var Sc=n(8918),Ec=n(3840),Ic=n(3782),Cc=/[A-Z]|^ms/g,Ac=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Pc=function(t){return 45===t.charCodeAt(1)},Tc=function(t){return null!=t&&"boolean"!==typeof t},Mc=(0,Ic.Z)((function(t){return Pc(t)?t:t.replace(Cc,"-$&").toLowerCase()})),Lc=function(t,e){switch(t){case"animation":case"animationName":if("string"===typeof e)return e.replace(Ac,(function(t,e,n){return Nc={name:e,styles:n,next:Nc},e}))}return 1===Ec.Z[t]||Pc(t)||"number"!==typeof e||0===e?e:e+"px"};function Rc(t,e,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Nc={name:n.name,styles:n.styles,next:Nc},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)Nc={name:r.name,styles:r.styles,next:Nc},r=r.next;return n.styles+";"}return function(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Rc(t,e,n[i])+";";else for(var o in n){var a=n[o];if("object"!==typeof a)null!=e&&void 0!==e[a]?r+=o+"{"+e[a]+"}":Tc(a)&&(r+=Mc(o)+":"+Lc(o,a)+";");else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=e&&void 0!==e[a[0]]){var s=Rc(t,e,a);switch(o){case"animation":case"animationName":r+=Mc(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var l=0;l<a.length;l++)Tc(a[l])&&(r+=Mc(o)+":"+Lc(o,a[l])+";")}return r}(t,e,n);case"function":if(void 0!==t){var i=Nc,o=n(t);return Nc=i,Rc(t,e,o)}}if(null==e)return n;var a=e[n];return void 0!==a?a:n}var Nc,Oc=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var zc=function(t,e,n){if(1===t.length&&"object"===typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var r=!0,i="";Nc=void 0;var o=t[0];null==o||void 0===o.raw?(r=!1,i+=Rc(n,e,o)):i+=o[0];for(var a=1;a<t.length;a++)i+=Rc(n,e,t[a]),r&&(i+=o[a]);Oc.lastIndex=0;for(var s,l="";null!==(s=Oc.exec(i));)l+="-"+s[1];return{name:(0,Sc.Z)(i)+l,styles:i,next:Nc}};function Dc(t,e){if(void 0===t.inserted[e.name])return t.insert("",e,t.sheet,!0)}function Fc(t,e,n){var r=[],i=(0,Zn.fp)(t,r,n);return r.length<2?n:i+e(r)}var Bc=function t(e){for(var n="",r=0;r<e.length;r++){var i=e[r];if(null!=i){var o=void 0;switch(typeof i){case"boolean":break;case"object":if(Array.isArray(i))o=t(i);else for(var a in o="",i)i[a]&&a&&(o&&(o+=" "),o+=a);break;default:o=i}o&&(n&&(n+=" "),n+=o)}}return n},jc=function(t){var e=(0,Bn.Z)(t);e.sheet.speedy=function(t){this.isSpeedy=t},e.compat=!0;var n=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=zc(n,e.registered,void 0);return(0,Zn.My)(e,i,!1),e.key+"-"+i.name};return{css:n,cx:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return Fc(e.registered,n,Bc(r))},injectGlobal:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=zc(n,e.registered);Dc(e,i)},keyframes:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=zc(n,e.registered),o="animation-"+i.name;return Dc(e,{name:i.name,styles:"@keyframes "+o+"{"+i.styles+"}"}),o},hydrate:function(t){t.forEach((function(t){e.inserted[t]=!0}))},flush:function(){e.registered={},e.inserted={},e.sheet.flush()},sheet:e.sheet,cache:e,getRegisteredStyles:Zn.fp.bind(null,e.registered),merge:Fc.bind(null,e.registered,n)}},Zc=jc({key:"css"}),Uc=(Zc.flush,Zc.hydrate,Zc.cx,Zc.merge,Zc.getRegisteredStyles,Zc.injectGlobal,Zc.keyframes,Zc.css),Vc=(Zc.sheet,Zc.cache,n(1380),n(2962)),qc=n.n(Vc);function Gc(){}function Wc(t){return null==t?Gc:function(){return this.querySelector(t)}}function Hc(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function Xc(){return[]}function Yc(t){return null==t?Xc:function(){return this.querySelectorAll(t)}}function $c(t){return function(){return this.matches(t)}}function Kc(t){return function(e){return e.matches(t)}}var Jc=Array.prototype.find;function Qc(){return this.firstElementChild}var th=Array.prototype.filter;function eh(){return Array.from(this.children)}function nh(t){return new Array(t.length)}function rh(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function ih(t){return function(){return t}}function oh(t,e,n,r,i,o){for(var a,s=0,l=e.length,u=o.length;s<u;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new rh(t,o[s]);for(;s<l;++s)(a=e[s])&&(i[s]=a)}function ah(t,e,n,r,i,o,a){var s,l,u,c=new Map,h=e.length,f=o.length,p=new Array(h);for(s=0;s<h;++s)(l=e[s])&&(p[s]=u=a.call(l,l.__data__,s,e)+"",c.has(u)?i[s]=l:c.set(u,l));for(s=0;s<f;++s)u=a.call(t,o[s],s,o)+"",(l=c.get(u))?(r[s]=l,l.__data__=o[s],c.delete(u)):n[s]=new rh(t,o[s]);for(s=0;s<h;++s)(l=e[s])&&c.get(p[s])===l&&(i[s]=l)}function sh(t){return t.__data__}function lh(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}function uh(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}rh.prototype={constructor:rh,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var ch=n(7762);var hh="http://www.w3.org/1999/xhtml",fh={svg:"http://www.w3.org/2000/svg",xhtml:hh,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ph(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),fh.hasOwnProperty(e)?{space:fh[e],local:t}:t}function dh(t){return function(){this.removeAttribute(t)}}function mh(t){return function(){this.removeAttributeNS(t.space,t.local)}}function gh(t,e){return function(){this.setAttribute(t,e)}}function vh(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function yh(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function _h(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function xh(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function bh(t){return function(){this.style.removeProperty(t)}}function wh(t,e,n){return function(){this.style.setProperty(t,e,n)}}function kh(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Sh(t,e){return t.style.getPropertyValue(e)||xh(t).getComputedStyle(t,null).getPropertyValue(e)}function Eh(t){return function(){delete this[t]}}function Ih(t,e){return function(){this[t]=e}}function Ch(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Ah(t){return t.trim().split(/^|\s+/)}function Ph(t){return t.classList||new Th(t)}function Th(t){this._node=t,this._names=Ah(t.getAttribute("class")||"")}function Mh(t,e){for(var n=Ph(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Lh(t,e){for(var n=Ph(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Rh(t){return function(){Mh(this,t)}}function Nh(t){return function(){Lh(this,t)}}function Oh(t,e){return function(){(e.apply(this,arguments)?Mh:Lh)(this,t)}}function zh(){this.textContent=""}function Dh(t){return function(){this.textContent=t}}function Fh(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Bh(){this.innerHTML=""}function jh(t){return function(){this.innerHTML=t}}function Zh(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Uh(){this.nextSibling&&this.parentNode.appendChild(this)}function Vh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qh(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===hh&&e.documentElement.namespaceURI===hh?e.createElement(t):e.createElementNS(n,t)}}function Gh(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Wh(t){var e=ph(t);return(e.local?Gh:qh)(e)}function Hh(){return null}function Xh(){var t=this.parentNode;t&&t.removeChild(this)}function Yh(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function $h(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Kh(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Jh(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function Qh(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function tf(t,e,n){var r=xh(t),i=r.CustomEvent;"function"===typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ef(t,e){return function(){return tf(this,t,e)}}function nf(t,e){return function(){return tf(this,t,e.apply(this,arguments))}}Th.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var rf=n(7757),of=n.n(rf),af=rf.mark(sf);function sf(){var t,e,n,r,i,o,a;return rf.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t=this._groups,e=0,n=t.length;case 1:if(!(e<n)){s.next=13;break}r=t[e],i=0,o=r.length;case 3:if(!(i<o)){s.next=10;break}if(!(a=r[i])){s.next=7;break}return s.next=7,a;case 7:++i,s.next=3;break;case 10:++e,s.next=1;break;case 13:case"end":return s.stop()}}),af,this)}var lf=[null];function uf(t,e){this._groups=t,this._parents=e}function cf(){return new uf([[document.documentElement]],lf)}uf.prototype=cf.prototype=(0,c.Z)({constructor:uf,select:function(t){"function"!==typeof t&&(t=Wc(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],l=s.length,u=r[i]=new Array(l),c=0;c<l;++c)(o=s[c])&&(a=t.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),u[c]=a);return new uf(r,this._parents)},selectAll:function(t){t="function"===typeof t?function(t){return function(){return Hc(t.apply(this,arguments))}}(t):Yc(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],l=s.length,u=0;u<l;++u)(a=s[u])&&(r.push(t.call(a,a.__data__,u,s)),i.push(a));return new uf(r,i)},selectChild:function(t){return this.select(null==t?Qc:function(t){return function(){return Jc.call(this.children,t)}}("function"===typeof t?t:Kc(t)))},selectChildren:function(t){return this.selectAll(null==t?eh:function(t){return function(){return th.call(this.children,t)}}("function"===typeof t?t:Kc(t)))},filter:function(t){"function"!==typeof t&&(t=$c(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&t.call(o,o.__data__,u,a)&&l.push(o);return new uf(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,sh);var n=e?ah:oh,r=this._parents,i=this._groups;"function"!==typeof t&&(t=ih(t));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],h=i[u],f=h.length,p=lh(t.call(c,c&&c.__data__,u,r)),d=p.length,m=s[u]=new Array(d),g=a[u]=new Array(d),v=l[u]=new Array(f);n(c,h,m,g,v,p,e);for(var y,_,x=0,b=0;x<d;++x)if(y=m[x]){for(x>=b&&(b=x+1);!(_=g[b])&&++b<d;);y._next=_||null}}return(a=new uf(a,r))._enter=s,a._exit=l,a},enter:function(){return new uf(this._enter||this._groups.map(nh),this._parents)},exit:function(){return new uf(this._exit||this._groups.map(nh),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"===typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var u,c=n[l],h=r[l],f=c.length,p=s[l]=new Array(f),d=0;d<f;++d)(u=c[d]||h[d])&&(p[d]=u);for(;l<i;++l)s[l]=n[l];return new uf(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=uh);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,u=i[o]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(e)}return new uf(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t,e=0,n=(0,ch.Z)(this);try{for(n.s();!(t=n.n()).done;){t.value;++e}}catch(r){n.e(r)}finally{n.f()}return e},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=ph(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?mh:dh:"function"===typeof e?n.local?_h:yh:n.local?vh:gh)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?bh:"function"===typeof e?kh:wh)(t,e,null==n?"":n)):Sh(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Eh:"function"===typeof e?Ch:Ih)(t,e)):this.node()[t]},classed:function(t,e){var n=Ah(t+"");if(arguments.length<2){for(var r=Ph(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof e?Oh:e?Rh:Nh)(n,e))},text:function(t){return arguments.length?this.each(null==t?zh:("function"===typeof t?Fh:Dh)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Bh:("function"===typeof t?Zh:jh)(t)):this.node().innerHTML},raise:function(){return this.each(Uh)},lower:function(){return this.each(Vh)},append:function(t){var e="function"===typeof t?t:Wh(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"===typeof t?t:Wh(t),r=null==e?Hh:"function"===typeof e?e:Wc(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Xh)},clone:function(t){return this.select(t?$h:Yh)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=Kh(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?Qh:Jh,r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"===typeof e?nf:ef)(t,e))}},Symbol.iterator,sf);var hf=cf,ff={value:function(){}};function pf(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new df(r)}function df(t){this._=t}function mf(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function gf(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function vf(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ff,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}df.prototype=pf.prototype={constructor:df,on:function(t,e){var n,r=this._,i=mf(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=vf(r[n],t.name,e);else if(null==e)for(n in r)r[n]=vf(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=gf(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new df(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var yf,_f,xf=pf,bf=0,wf=0,kf=0,Sf=0,Ef=0,If=0,Cf="object"===typeof performance&&performance.now?performance:Date,Af="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Pf(){return Ef||(Af(Tf),Ef=Cf.now()+If)}function Tf(){Ef=0}function Mf(){this._call=this._time=this._next=null}function Lf(t,e,n){var r=new Mf;return r.restart(t,e,n),r}function Rf(){Ef=(Sf=Cf.now())+If,bf=wf=0;try{!function(){Pf(),++bf;for(var t,e=yf;e;)(t=Ef-e._time)>=0&&e._call.call(void 0,t),e=e._next;--bf}()}finally{bf=0,function(){var t,e,n=yf,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:yf=e);_f=t,Of(r)}(),Ef=0}}function Nf(){var t=Cf.now(),e=t-Sf;e>1e3&&(If-=e,Sf=t)}function Of(t){bf||(wf&&(wf=clearTimeout(wf)),t-Ef>24?(t<1/0&&(wf=setTimeout(Rf,t-Cf.now()-If)),kf&&(kf=clearInterval(kf))):(kf||(Sf=Cf.now(),kf=setInterval(Nf,1e3)),bf=1,Af(Rf)))}function zf(t,e,n){var r=new Mf;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r}Mf.prototype=Lf.prototype={constructor:Mf,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?Pf():+n)+(null==e?0:+e),this._next||_f===this||(_f?_f._next=this:yf=this,_f=this),this._call=t,this._time=n,Of()},stop:function(){this._call&&(this._call=null,this._time=1/0,Of())}};var Df=xf("start","end","cancel","interrupt"),Ff=[];function Bf(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(t){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(o){var u,c,h,f;if(1!==n.state)return l();for(u in i)if((f=i[u]).name===n.name){if(3===f.state)return zf(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[u]):+u<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[u])}if(zf((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),u=0,c=-1;u<h;++u)(f=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=f);r.length=c+1}}function s(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Lf(o,0,n.time)}(t,n,{name:e,index:r,group:i,on:Df,tween:Ff,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function jf(t,e){var n=Uf(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Zf(t,e){var n=Uf(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Uf(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Vf(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var qf,Gf=180/Math.PI,Wf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Hf(t,e,n,r,i,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Gf,skewX:Math.atan(l)*Gf,scaleX:a,scaleY:s}}function Xf(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],l=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var l=a.push("translate(",null,e,null,n);s.push({i:l-4,x:Vf(t,i)},{i:l-2,x:Vf(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Vf(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,l),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Vf(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,l),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:Vf(t,n)},{i:s-2,x:Vf(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(t){for(var e,n=-1,r=l.length;++n<r;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var Yf=Xf((function(t){var e=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Wf:Hf(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),$f=Xf((function(t){return null==t?Wf:(qf||(qf=document.createElementNS("http://www.w3.org/2000/svg","g")),qf.setAttribute("transform",t),(t=qf.transform.baseVal.consolidate())?Hf((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Wf)}),", ",")",")");function Kf(t,e){var n,r;return function(){var i=Zf(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function Jf(t,e,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var o=Zf(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=s;break}l===u&&i.push(s)}o.tween=i}}function Qf(t,e,n){var r=t._id;return t.each((function(){var t=Zf(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Uf(t,r).value[e]}}function tp(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ep(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function np(){}var rp=.7,ip=1/rp,op="\\s*([+-]?\\d+)\\s*",ap="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lp=/^#([0-9a-f]{3,8})$/,up=new RegExp("^rgb\\(".concat(op,",").concat(op,",").concat(op,"\\)$")),cp=new RegExp("^rgb\\(".concat(sp,",").concat(sp,",").concat(sp,"\\)$")),hp=new RegExp("^rgba\\(".concat(op,",").concat(op,",").concat(op,",").concat(ap,"\\)$")),fp=new RegExp("^rgba\\(".concat(sp,",").concat(sp,",").concat(sp,",").concat(ap,"\\)$")),pp=new RegExp("^hsl\\(".concat(ap,",").concat(sp,",").concat(sp,"\\)$")),dp=new RegExp("^hsla\\(".concat(ap,",").concat(sp,",").concat(sp,",").concat(ap,"\\)$")),mp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function gp(){return this.rgb().formatHex()}function vp(){return this.rgb().formatRgb()}function yp(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=lp.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?_p(e):3===n?new kp(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?xp(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?xp(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=up.exec(t))?new kp(e[1],e[2],e[3],1):(e=cp.exec(t))?new kp(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=hp.exec(t))?xp(e[1],e[2],e[3],e[4]):(e=fp.exec(t))?xp(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=pp.exec(t))?Pp(e[1],e[2]/100,e[3]/100,1):(e=dp.exec(t))?Pp(e[1],e[2]/100,e[3]/100,e[4]):mp.hasOwnProperty(t)?_p(mp[t]):"transparent"===t?new kp(NaN,NaN,NaN,0):null}function _p(t){return new kp(t>>16&255,t>>8&255,255&t,1)}function xp(t,e,n,r){return r<=0&&(t=e=n=NaN),new kp(t,e,n,r)}function bp(t){return t instanceof np||(t=yp(t)),t?new kp((t=t.rgb()).r,t.g,t.b,t.opacity):new kp}function wp(t,e,n,r){return 1===arguments.length?bp(t):new kp(t,e,n,null==r?1:r)}function kp(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Sp(){return"#".concat(Ap(this.r)).concat(Ap(this.g)).concat(Ap(this.b))}function Ep(){var t=Ip(this.opacity);return"".concat(1===t?"rgb(":"rgba(").concat(Cp(this.r),", ").concat(Cp(this.g),", ").concat(Cp(this.b)).concat(1===t?")":", ".concat(t,")"))}function Ip(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Cp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ap(t){return((t=Cp(t))<16?"0":"")+t.toString(16)}function Pp(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Mp(t,e,n,r)}function Tp(t){if(t instanceof Mp)return new Mp(t.h,t.s,t.l,t.opacity);if(t instanceof np||(t=yp(t)),!t)return new Mp;if(t instanceof Mp)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Mp(a,s,l,t.opacity)}function Mp(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Lp(t){return(t=(t||0)%360)<0?t+360:t}function Rp(t){return Math.max(0,Math.min(1,t||0))}function Np(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Op(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}tp(np,yp,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:gp,formatHex:gp,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Tp(this).formatHsl()},formatRgb:vp,toString:vp}),tp(kp,wp,ep(np,{brighter:function(t){return t=null==t?ip:Math.pow(ip,t),new kp(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?rp:Math.pow(rp,t),new kp(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new kp(Cp(this.r),Cp(this.g),Cp(this.b),Ip(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Sp,formatHex:Sp,formatHex8:function(){return"#".concat(Ap(this.r)).concat(Ap(this.g)).concat(Ap(this.b)).concat(Ap(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:Ep,toString:Ep})),tp(Mp,(function(t,e,n,r){return 1===arguments.length?Tp(t):new Mp(t,e,n,null==r?1:r)}),ep(np,{brighter:function(t){return t=null==t?ip:Math.pow(ip,t),new Mp(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?rp:Math.pow(rp,t),new Mp(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new kp(Np(t>=240?t-240:t+120,i,r),Np(t,i,r),Np(t<120?t+240:t-120,i,r),this.opacity)},clamp:function(){return new Mp(Lp(this.h),Rp(this.s),Rp(this.l),Ip(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=Ip(this.opacity);return"".concat(1===t?"hsl(":"hsla(").concat(Lp(this.h),", ").concat(100*Rp(this.s),"%, ").concat(100*Rp(this.l),"%").concat(1===t?")":", ".concat(t,")"))}}));var zp=function(t){return function(){return t}};function Dp(t,e){return function(n){return t+n*e}}function Fp(t){return 1===(t=+t)?Bp:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):zp(isNaN(e)?n:e)}}function Bp(t,e){var n=e-t;return n?Dp(t,n):zp(isNaN(t)?e:t)}var jp=function t(e){var n=Fp(e);function r(t,e){var r=n((t=wp(t)).r,(e=wp(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=Bp(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function Zp(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=wp(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}Zp((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return Op((n-r/e)*e,a,i,o,s)}})),Zp((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return Op((n-r/e)*e,i,o,a,s)}}));var Up=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vp=new RegExp(Up.source,"g");function qp(t,e){var n,r,i,o=Up.lastIndex=Vp.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=Up.exec(t))&&(r=Vp.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:Vf(n,r)})),o=Vp.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function Gp(t,e){var n;return("number"===typeof e?Vf:e instanceof yp?jp:(n=yp(e))?(e=n,jp):qp)(t,e)}function Wp(t){return function(){this.removeAttribute(t)}}function Hp(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Xp(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function Yp(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function $p(t,e,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(t))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,l));this.removeAttribute(t)}}function Kp(t,e,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,l));this.removeAttributeNS(t.space,t.local)}}function Jp(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Qp(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function td(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Qp(t,i)),n}return i._value=e,i}function ed(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Jp(t,i)),n}return i._value=e,i}function nd(t,e){return function(){jf(this,t).delay=+e.apply(this,arguments)}}function rd(t,e){return e=+e,function(){jf(this,t).delay=e}}function id(t,e){return function(){Zf(this,t).duration=+e.apply(this,arguments)}}function od(t,e){return e=+e,function(){Zf(this,t).duration=e}}function ad(t,e){if("function"!==typeof e)throw new Error;return function(){Zf(this,t).ease=e}}function sd(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?jf:Zf;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}var ld=hf.prototype.constructor;function ud(t){return function(){this.style.removeProperty(t)}}function cd(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function hd(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&cd(t,o,n)),r}return o._value=e,o}function fd(t){return function(e){this.textContent=t.call(this,e)}}function pd(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&fd(r)),e}return r._value=t,r}var dd=0;function md(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function gd(){return++dd}var vd=hf.prototype;md.prototype=function(t){return hf().transition(t)}.prototype=(0,c.Z)({constructor:md,select:function(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=Wc(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,u=r[a],c=u.length,h=o[a]=new Array(c),f=0;f<c;++f)(s=u[f])&&(l=t.call(s,s.__data__,f,u))&&("__data__"in s&&(l.__data__=s.__data__),h[f]=l,Bf(h[f],e,n,f,h,Uf(s,n)));return new md(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=Yc(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,u=r[s],c=u.length,h=0;h<c;++h)if(l=u[h]){for(var f,p=t.call(l,l.__data__,h,u),d=Uf(l,n),m=0,g=p.length;m<g;++m)(f=p[m])&&Bf(f,e,n,m,p,d);o.push(p),a.push(l)}return new md(o,a,e,n)},selectChild:vd.selectChild,selectChildren:vd.selectChildren,filter:function(t){"function"!==typeof t&&(t=$c(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&t.call(o,o.__data__,u,a)&&l.push(o);return new md(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,u=e[s],c=n[s],h=u.length,f=a[s]=new Array(h),p=0;p<h;++p)(l=u[p]||c[p])&&(f[p]=l);for(;s<r;++s)a[s]=e[s];return new md(a,this._parents,this._name,this._id)},selection:function(){return new ld(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=gd(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)if(a=s[u]){var c=Uf(a,e);Bf(a,t,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new md(r,this._parents,t,n)},call:vd.call,nodes:vd.nodes,node:vd.node,size:vd.size,empty:vd.empty,each:vd.each,on:function(t,e){var n=this._id;return arguments.length<2?Uf(this.node(),n).on.on(t):this.each(sd(n,t,e))},attr:function(t,e){var n=ph(t),r="transform"===n?$f:Gp;return this.attrTween(t,"function"===typeof e?(n.local?Kp:$p)(n,r,Qf(this,"attr."+t,e)):null==e?(n.local?Hp:Wp)(n):(n.local?Yp:Xp)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!==typeof e)throw new Error;var r=ph(t);return this.tween(n,(r.local?td:ed)(r,e))},style:function(t,e,n){var r="transform"===(t+="")?Yf:Gp;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=Sh(this,t),a=(this.style.removeProperty(t),Sh(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,ud(t)):"function"===typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=Sh(this,t),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=Sh(this,t)),a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,s))}}(t,r,Qf(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,s="end."+a;return function(){var l=Zf(this,t),u=l.on,c=null==l.value[a]?o||(o=ud(e)):void 0;u===n&&i===c||(r=(n=u).copy()).on(s,i=c),l.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=Sh(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!==typeof e)throw new Error;return this.tween(r,hd(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"===typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Qf(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!==typeof t)throw new Error;return this.tween(e,pd(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Uf(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?Kf:Jf)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?nd:rd)(e,t)):Uf(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?id:od)(e,t)):Uf(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(ad(e,t)):Uf(this.node(),e).ease},easeVarying:function(t){if("function"!==typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!==typeof n)throw new Error;Zf(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},l={value:function(){0===--i&&o()}};n.each((function(){var n=Zf(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),n.on=e})),0===i&&o()}))}},Symbol.iterator,vd[Symbol.iterator]);var yd={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function _d(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error("transition ".concat(e," not found"));return n}hf.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}(this,t)}))},hf.prototype.transition=function(t){var e,n;t instanceof md?(e=t._id,t=t._name):(e=gd(),(n=yd).time=Pf(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)(a=s[u])&&Bf(a,t,e,u,s,n||_d(a,e));return new md(r,this._parents,t,e)};Math.abs,Math.max,Math.min;function xd(t){return[+t[0],+t[1]]}function bd(t){return[xd(t[0]),xd(t[1])]}["w","e"].map(wd),["n","s"].map(wd),["n","w","e","s","nw","ne","sw","se"].map(wd);function wd(t){return{type:t}}var kd={},Sd={};function Ed(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function Id(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function Cd(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Ad(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+Cd(-e,6):e>9999?"+"+Cd(e,6):Cd(e,4))+"-"+Cd(t.getUTCMonth()+1,2)+"-"+Cd(t.getUTCDate(),2)+(o?"T"+Cd(n,2)+":"+Cd(r,2)+":"+Cd(i,2)+"."+Cd(o,3)+"Z":i?"T"+Cd(n,2)+":"+Cd(r,2)+":"+Cd(i,2)+"Z":r||n?"T"+Cd(n,2)+":"+Cd(r,2)+"Z":"")}function Pd(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,s=0,l=o<=0,u=!1;function c(){if(l)return Sd;if(u)return u=!1,kd;var e,r,i=a;if(34===t.charCodeAt(i)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(e=a)>=o?l=!0:10===(r=t.charCodeAt(a++))?u=!0:13===r&&(u=!0,10===t.charCodeAt(a)&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=t.charCodeAt(e=a++)))u=!0;else if(13===r)u=!0,10===t.charCodeAt(a)&&++a;else if(r!==n)continue;return t.slice(i,e)}return l=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=c())!==Sd;){for(var h=[];r!==kd&&r!==Sd;)h.push(r),r=c();e&&null==(h=e(h,s++))||i.push(h)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return a(e[t])})).join(t)}))}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?Ad(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=Ed(t);return function(r,i){return e(n(r),i,t)}}(t,e):Ed(t)}));return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=Id(e)),[n.map(a).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Id(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}var Td=Pd(","),Md=Td.parse,Ld=(Td.parseRows,Td.format,Td.formatBody,Td.formatRows,Td.formatRow,Td.formatValue,Pd("\t")),Rd=Ld.parse;Ld.parseRows,Ld.format,Ld.formatBody,Ld.formatRows,Ld.formatRow,Ld.formatValue;function Nd(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Od(t,e){return fetch(t,e).then(Nd)}function zd(t){return function(e,n,r){return 2===arguments.length&&"function"===typeof n&&(r=n,n=void 0),Od(e,n).then((function(e){return t(e,r)}))}}var Dd=zd(Md);zd(Rd);function Fd(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function Bd(t){return function(e,n){return Od(e,n).then((function(e){return(new DOMParser).parseFromString(e,t)}))}}var jd=Bd("application/xml");Bd("text/html"),Bd("image/svg+xml");function Zd(t,e,n){this.k=t,this.x=e,this.y=n}Zd.prototype={constructor:Zd,scale:function(t){return 1===t?this:new Zd(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Zd(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ud,Vd,qd,Gd,Wd;new Zd(1,0,0);Zd.prototype;var Hd=function(){return Hd=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Hd.apply(this,arguments)};function Xd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Yd(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(e){o(e)}}function s(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))}function $d(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Kd(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function Jd(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Qd=t.createContext({}),tm=function(e){var n=e.children,r=(0,t.useState)(void 0),i=r[0],o=r[1],a=(0,t.useState)([]),s=a[0],l=a[1],u=(0,t.useRef)([]),c=(0,t.useRef)({}),h={map:i,setMap:function(t){if(o(t),0===s.length){var e="anonymous_map";l(Kd(Kd([],s,!0),[e],!1)),c.current[e]=t}},maps:c.current,mapIds:s,registerMap:function(t,e){t&&e&&(c.current[t]=e,u.current.push(t),l(Kd([],u.current,!0)),i||o(e))},removeMap:function t(e){if(e){"undefined"!==typeof c.current[e]&&delete c.current[e];var n=u.current.indexOf(e);n>-1&&u.current.splice(n,1),l(Kd([],u.current,!0)),1===s.length&&i&&o(void 0)}else o(void 0),t("anonymous_map")},mapExists:function(t){return(!t||-1!==Object.keys(c.current).indexOf(t))&&!(!t&&!i)},getMap:function(t){return t&&-1!==s.indexOf(t)?c.current[t]:!t&&i?i:null}};return t.createElement(Qd.Provider,{value:h},n)},em=function(t){var e=this,n=this;this.registeredElements={},this.baseLayers=[],this.firstSymbolLayer=void 0,this.eventHandlers={layerchange:[],viewportchange:[]},this.wrapper={on:function(t,e,r,i){if(n.eventHandlers[t]){"string"===typeof r&&(i=r,r={}),n.eventHandlers[t].push({handler:e,options:r});var o=[t,e];i&&"string"===typeof i&&(n.initRegisteredElements(i),n.registeredElements[i].wrapperEvents.push(o))}},off:function(t,e){n.eventHandlers[t]&&(n.eventHandlers[t]=n.eventHandlers[t].filter((function(t){return!Object.is(t.handler,e)&&t})))},fire:function(t,e){if(n.eventHandlers[t]){var r=e||window,i=new Event(t);n.eventHandlers[t].forEach((function(t){t.handler.call(r,i,n)}))}},layerState:[],layerStateString:"",oldLayerStateStrings:{},buildLayerObject:function(t){return{id:t.id,type:t.type,visible:"none"!==t.visibility,baseLayer:-1!==n.baseLayers.indexOf(t.id)}},buildLayerObjects:function(){return n.style._order.map((function(t){return n.wrapper.buildLayerObject(n.map.style._layers[t])})).filter((function(t){return t}))},refreshLayerState:function(){n.wrapper.layerState=n.wrapper.buildLayerObjects(),JSON.stringify(n.wrapper.layerState)!==n.wrapper.layerStateString&&(n.wrapper.fire("layerchange"),n.wrapper.layerStateString=JSON.stringify(n.wrapper.layerState))},viewportState:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0},viewportStateString:"{}",oldViewportStateString:"{}",getViewport:function(){return"function"===typeof n.map.getCenter?{center:function(t){return{lng:t.lng,lat:t.lat}}(n.map.getCenter()),zoom:n.map.getZoom(),bearing:n.map.getBearing(),pitch:n.map.getPitch()}:{}},refreshViewport:function(){n.wrapper.viewportState=n.wrapper.getViewport()}},this.initRegisteredElements=function(t,e){("undefined"===typeof n.registeredElements[t]||"undefined"!==typeof e&&e)&&(n.registeredElements[t]={layers:[],sources:[],images:[],events:[],controls:[],wrapperEvents:[]})},this.addLayer=function(t,e,r){n.map.style&&(r&&"string"===typeof r&&"undefined"!==typeof t.id&&(n.initRegisteredElements(r),n.registeredElements[r].layers.push(t.id),"object"===typeof t.source&&n.registeredElements[r].sources.push(t.id)),n.map.addLayer(t,e))},this.addSource=function(t,e,r){n.map.style&&(r&&"string"===typeof r&&"undefined"!==typeof t&&(n.initRegisteredElements(r),n.registeredElements[r].sources.push(t)),n.map.addSource(t,e))},this.addImage=function(t,e,r,i){if(n.map.style){if("string"===typeof r&&"undefined"===typeof i)return n.addImage.call(n,t,e,void 0,r);i&&"string"===typeof i&&"undefined"!==typeof t&&(n.initRegisteredElements(i),n.registeredElements[i].images.push(t)),n.map.addImage(t,e,r)}},this.on=function(t,e,r,i){var o;if("string"===typeof r&&"function"===typeof e)return n.on.call(n,t,void 0,e,r);var a=[t,e,r];e||(a=[t,r]),i&&"string"===typeof i&&(n.initRegisteredElements(i),n.registeredElements[i].events.push(a)),(o=n.map).on.apply(o,a)},this.addControl=function(t,e,r){r&&"string"===typeof r&&(n.initRegisteredElements(r),n.registeredElements[r].controls.push(t)),n.map.addControl(t,e)},this.cleanup=function(t){n.map.style&&"undefined"!==typeof n.registeredElements[t]&&(n.registeredElements[t].layers.forEach((function(t){n.map.style.getLayer(t)&&n.map.style.removeLayer(t)})),n.registeredElements[t].sources.forEach((function(t){n.map.style.getSource(t)&&n.map.style.removeSource(t)})),n.registeredElements[t].images.forEach((function(t){n.map.hasImage(t)&&n.map.style.removeImage(t)})),n.registeredElements[t].events.forEach((function(t){var e;(e=n.map).off.apply(e,t)})),n.registeredElements[t].controls.forEach((function(t){n.map.removeControl(t)})),n.registeredElements[t].wrapperEvents.forEach((function(t){var e;(e=n.wrapper).off.apply(e,t)})),n.initRegisteredElements(t,!0))},["moveLayer","removeLayer","removeSource","setPaintProperty","setLayoutProperty"].forEach((function(t){e[t]=function(){for(var r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return n.map&&e.map.style&&"function"===typeof n.map.style[t]&&(r=n.map.style)[t].apply(r,i),n.map._update?n.map._update(!0):void 0}})),["getLayer","getSource","listImages","getPaintProperty","getLayoutProperty","removeImage"].forEach((function(t){e[t]=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return!(!n.map||!n.map.style)&&(e=n.map.style)[t].apply(e,r)}})),this.addNativeMaplibreFunctionsAndProps=function(){Object.getOwnPropertyNames(Object.getPrototypeOf(e.map)).forEach((function(t){"undefined"===typeof e[t]&&(e[t]=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return(e=n.map)[t].apply(e,r)})})),Object.keys(e.map).forEach((function(t){"undefined"===typeof e[t]&&(e[t]=n.map[t])}))},["getZoom","setZoom","getCenter","setCenter","getBearing","setBearing","getPitch","setPitch","jumpTo","flyTo","panTo","panBy","panBy","zoomTo","zoomIn","zoomOut","getPadding","setPadding","rotateTo","resetNorth","resetNorthPitch","snapToNorth","cameraForBounds","fitBounds","fitScreenCoordinates","getFreeCameraOptions","setFreeCameraOptions","easeTo","stop"].forEach((function(t){e[t]=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if("function"===typeof n.map[t])return(e=n.map[t]).call.apply(e,Kd([n.map],r,!1))}})),Yd(e,void 0,void 0,(function(){return $d(this,(function(e){switch(e.label){case 0:return"string"!==typeof t.mapOptions.style||-1!==t.mapOptions.style.indexOf("mapbox://")?[3,2]:[4,fetch(t.mapOptions.style).then((function(t){if(t.ok)return t.json();throw new Error("error loading map style.json")})).then((function(e){e.layers.forEach((function(t){n.baseLayers.push(t.id),n.firstSymbolLayer||"symbol"!==t.type||(n.firstSymbolLayer=t.id)})),n.styleJson=e,t.mapOptions.style=e})).catch((function(t){console.log(t)}))];case 1:e.sent(),e.label=2;case 2:return n.map=new h.Map(t.mapOptions),n.addNativeMaplibreFunctionsAndProps(),n.wrapper.refreshViewport(),n.wrapper.fire("viewportchange"),n.map.on("load",(function(){n.addNativeMaplibreFunctionsAndProps()})),n.map.on("move",(function(){n.wrapper.viewportState=n.wrapper.getViewport(),n.wrapper.fire("viewportchange")})),n.map.on("idle",(function(){n.wrapper.refreshLayerState()})),n.map.on("data",(function(){n.wrapper.refreshLayerState()})),"function"===typeof t.onReady&&t.onReady(n.map,n),[2]}}))}))},nm=function(e){var n=(0,t.useRef)(null),r=(0,t.useRef)(),i=(0,t.useContext)(Qd),o=(0,t.useRef)(e.mapId),a=(0,t.useRef)(!1);return(0,t.useEffect)((function(){var t=o.current;return function(){var e,r;i.removeMap(t),null===(r=null===(e=n.current)||void 0===e?void 0:e.remove)||void 0===r||r.call(e),n.current=null}}),[]),(0,t.useEffect)((function(){a.current||r.current&&(a.current=!0,n.current=new em({mapOptions:Hd({style:"",container:r.current},e.options),onReady:function(t,n){t.once("load",(function(){e.mapId?i.registerMap(e.mapId,n):i.setMap(n)}))}}))}),[e.options,e.mapId]),t.createElement("div",{ref:r,className:"mapContainer",style:e.style})};function rm(e){var n=(0,t.useContext)(Qd),r=(0,t.useRef)(!1),i=(0,t.useRef)(),o=(0,t.useState)(),a=o[0],s=o[1],l=(0,t.useRef)(void 0),u=(0,t.useState)([]),c=u[0],h=u[1],f=(0,t.useRef)(),p=(0,t.useRef)(_()),d=(0,t.useCallback)((function(t){var n,r;return!(!(null===(n=null===e||void 0===e?void 0:e.filter)||void 0===n?void 0:n.includeBaseLayers)&&t.baseLayer)&&("undefined"===typeof(null===(r=e.filter)||void 0===r?void 0:r.matchLayerIds)||(e.filter.matchLayerIds instanceof RegExp?e.filter.matchLayerIds.test(t.id):t.id.includes(e.filter.matchLayerIds)))}),[e.filter]),m=(0,t.useCallback)((function(){if(i.current){var t=i.current.wrapper.layerState.filter(d),e=JSON.stringify(t);f.current!==e&&(f.current=e,h(t))}}),[d]);return(0,t.useEffect)((function(){var t=p.current;return function(){i.current&&(i.current.cleanup(t),i.current=void 0),r.current=!1}}),[]),(0,t.useEffect)((function(){var t,o,a,u;n.mapExists(e.mapId)&&!r.current&&(r.current=!0,i.current=n.getMap(e.mapId),i.current?((null===(t=null===e||void 0===e?void 0:e.watch)||void 0===t?void 0:t.viewport)&&(s(i.current.wrapper.viewportState),i.current.wrapper.on("viewportchange",(function(){var t,e;l.current!==(null===(t=i.current)||void 0===t?void 0:t.wrapper.viewportStateString)&&s(null===(e=i.current)||void 0===e?void 0:e.wrapper.viewportState)}),p.current)),(null===(o=null===e||void 0===e?void 0:e.watch)||void 0===o?void 0:o.layers)&&(m(),i.current.wrapper.on("layerchange",m,{includeBaseLayers:null===(a=null===e||void 0===e?void 0:e.filter)||void 0===a?void 0:a.includeBaseLayers,matchLayerIds:null===(u=null===e||void 0===e?void 0:e.filter)||void 0===u?void 0:u.matchLayerIds},p.current))):r.current=!1)}),[n.mapIds,n,e.mapId,m,e]),{layers:c,viewport:a}}function im(e){var n=(0,t.useContext)(Qd),r=(0,t.useState)(),i=r[0],o=r[1],a=rm({mapId:e.mapId,watch:{viewport:!1,layers:!!e.waitForLayer,sources:!1},filter:{includeBaseLayers:!0}}),s=(0,t.useRef)(!1),l=(0,t.useRef)(void 0),u=(0,t.useRef)(_()),c=(0,t.useState)(!1),h=c[0],f=c[1],p=function(){l.current&&(l.current.cleanup(u.current),l.current=void 0),s.current=!1,f(!1)};return(0,t.useEffect)((function(){return p}),[]),(0,t.useEffect)((function(){var t;if(n.mapExists(e.mapId)&&!s.current){if(e.waitForLayer){var r=!1;if(null===(t=null===a||void 0===a?void 0:a.layers)||void 0===t||t.forEach((function(t){t.id===e.waitForLayer&&(r=!0)})),!r)return}s.current=!0,l.current=n.getMap(e.mapId),o(l.current),f(!0)}}),[n.mapIds,a.layers,n,e.waitForLayer,e.mapId]),{map:i,mapIsReady:h,componentId:u.current,layers:a.layers,cleanup:p}}nm.defaultProps={mapId:void 0,options:{center:{lng:8.607,lat:53.1409349},zoom:11,container:"",style:{version:8,name:"blank",center:[0,0],zoom:0,sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"rgba(80,0,0,0)"}}]}}},rm.defaultProps={mapId:void 0,watch:{layers:!0,sources:!1,viewport:!1},filter:{includeBaseLayers:!1}},rm.propTypes={mapId:b().string,watch:b().shape({layers:b().bool,sources:b().bool,viewport:b().bool}),filter:b().shape({includeBaseLayers:b().bool,matchLayerIds:b().oneOfType([b().string,b().instanceOf(RegExp)]),matchSourceIds:b().oneOfType([b().string,b().instanceOf(RegExp)])})};function om(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}var am,sm={},lm={exports:{}};(am=lm).exports=function(t){return t&&t.__esModule?t:{default:t}},am.exports.__esModule=!0,am.exports.default=am.exports;var um={},cm=function(t){return t},hm=function(){var t=cm;return{configure:function(e){t=e},generate:function(e){return t(e)},reset:function(){t=cm}}}();function fm(){return fm=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fm.apply(this,arguments)}function pm(t){return null!==t&&"object"===typeof t&&t.constructor===Object}function dm(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?fm({},t):t;return pm(t)&&pm(e)&&Object.keys(e).forEach((function(i){"__proto__"!==i&&(pm(e[i])&&i in t&&pm(t[i])?r[i]=dm(t[i],e[i],n):r[i]=e[i])})),r}var mm=(b().element,function(){return null});mm.isRequired=(b().element.isRequired,function(){return null});b().elementType;function gm(t){for(var e="https://mui.com/production-error/?code="+t,n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}var vm={exports:{}},ym={},_m=60103,xm=60106,bm=60107,wm=60108,km=60114,Sm=60109,Em=60110,Im=60112,Cm=60113,Am=60120,Pm=60115,Tm=60116,Mm=60121,Lm=60122,Rm=60117,Nm=60129,Om=60131;if("function"===typeof Symbol&&Symbol.for){var zm=Symbol.for;_m=zm("react.element"),xm=zm("react.portal"),bm=zm("react.fragment"),wm=zm("react.strict_mode"),km=zm("react.profiler"),Sm=zm("react.provider"),Em=zm("react.context"),Im=zm("react.forward_ref"),Cm=zm("react.suspense"),Am=zm("react.suspense_list"),Pm=zm("react.memo"),Tm=zm("react.lazy"),Mm=zm("react.block"),Lm=zm("react.server.block"),Rm=zm("react.fundamental"),Nm=zm("react.debug_trace_mode"),Om=zm("react.legacy_hidden")}function Dm(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case _m:switch(t=t.type){case bm:case km:case wm:case Cm:case Am:return t;default:switch(t=t&&t.$$typeof){case Em:case Im:case Tm:case Pm:case Sm:return t;default:return e}}case xm:return e}}}var Fm=Sm,Bm=_m,jm=Im,Zm=bm,Um=Tm,Vm=Pm,qm=xm,Gm=km,Wm=wm,Hm=Cm;ym.ContextConsumer=Em,ym.ContextProvider=Fm,ym.Element=Bm,ym.ForwardRef=jm,ym.Fragment=Zm,ym.Lazy=Um,ym.Memo=Vm,ym.Portal=qm,ym.Profiler=Gm,ym.StrictMode=Wm,ym.Suspense=Hm,ym.isAsyncMode=function(){return!1},ym.isConcurrentMode=function(){return!1},ym.isContextConsumer=function(t){return Dm(t)===Em},ym.isContextProvider=function(t){return Dm(t)===Sm},ym.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===_m},ym.isForwardRef=function(t){return Dm(t)===Im},ym.isFragment=function(t){return Dm(t)===bm},ym.isLazy=function(t){return Dm(t)===Tm},ym.isMemo=function(t){return Dm(t)===Pm},ym.isPortal=function(t){return Dm(t)===xm},ym.isProfiler=function(t){return Dm(t)===km},ym.isStrictMode=function(t){return Dm(t)===wm},ym.isSuspense=function(t){return Dm(t)===Cm},ym.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===bm||t===km||t===Nm||t===wm||t===Cm||t===Am||t===Om||"object"===typeof t&&null!==t&&(t.$$typeof===Tm||t.$$typeof===Pm||t.$$typeof===Sm||t.$$typeof===Em||t.$$typeof===Im||t.$$typeof===Rm||t.$$typeof===Mm||t[0]===Lm)},ym.typeOf=Dm,vm.exports=ym;b().oneOfType([b().func,b().object]);function Xm(t){if("string"!==typeof t)throw new Error(gm(7));return t.charAt(0).toUpperCase()+t.slice(1)}function Ym(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){return null==e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r),e.apply(this,r)}}),(function(){}))}function $m(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=function(){t.apply(r,o)};clearTimeout(e),e=setTimeout(s,n)}return r.clear=function(){clearTimeout(e)},r}function Km(e,n){return t.isValidElement(e)&&-1!==n.indexOf(e.type.muiName)}function Jm(t){return t&&t.ownerDocument||document}function Qm(t){return Jm(t).defaultView||window}function tg(t,e){"function"===typeof t?t(e):t&&(t.current=e)}var eg="undefined"!==typeof window?t.useLayoutEffect:t.useEffect,ng=0;var rg=e.useId;function ig(e){var n=t.useRef(e);return eg((function(){n.current=e})),t.useCallback((function(){return n.current.apply(void 0,arguments)}),[])}function og(e,n){return t.useMemo((function(){return null==e&&null==n?null:function(t){tg(e,t),tg(n,t)}}),[e,n])}var ag,sg=!0,lg=!1,ug={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function cg(t){t.metaKey||t.altKey||t.ctrlKey||(sg=!0)}function hg(){sg=!1}function fg(){"hidden"===this.visibilityState&&lg&&(sg=!0)}function pg(t){var e=t.target;try{return e.matches(":focus-visible")}catch(n){}return sg||function(t){var e=t.type,n=t.tagName;return!("INPUT"!==n||!ug[e]||t.readOnly)||"TEXTAREA"===n&&!t.readOnly||!!t.isContentEditable}(e)}function dg(){var e=t.useCallback((function(t){var e;null!=t&&((e=t.ownerDocument).addEventListener("keydown",cg,!0),e.addEventListener("mousedown",hg,!0),e.addEventListener("pointerdown",hg,!0),e.addEventListener("touchstart",hg,!0),e.addEventListener("visibilitychange",fg,!0))}),[]),n=t.useRef(!1);return{isFocusVisibleRef:n,onFocus:function(t){return!!pg(t)&&(n.current=!0,!0)},onBlur:function(){return!!n.current&&(lg=!0,window.clearTimeout(ag),ag=window.setTimeout((function(){lg=!1}),100),n.current=!1,!0)},ref:e}}Number.isInteger;function mg(){return null}mg.isRequired=mg;function gg(t,e){var n=fm({},e);return Object.keys(t).forEach((function(e){void 0===n[e]&&(n[e]=t[e])})),n}function vg(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function yg(t){var e,n,r="";if("string"===typeof t||"number"===typeof t)r+=t;else if("object"===typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=yg(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function _g(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=yg(t))&&(r&&(r+=" "),r+=e);return r}function xg(t){return"string"===typeof t}function bg(t,e,n){var r={};return Object.keys(t).forEach((function(i){r[i]=t[i].reduce((function(t,r){return r&&(n&&n[r]&&t.push(n[r]),t.push(e(r))),t}),[]).join(" ")})),r}var wg={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function kg(t,e){return wg[e]||"".concat(hm.generate(t),"-").concat(e)}function Sg(t,e){var n={};return e.forEach((function(e){n[e]=kg(t,e)})),n}var Eg={exports:{}},Ig={},Cg=Object.getOwnPropertySymbols,Ag=Object.prototype.hasOwnProperty,Pg=Object.prototype.propertyIsEnumerable;function Tg(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map((function(t){return e[t]}));if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(o){return!1}})()&&Object.assign;var Mg=t,Lg=60103;if(Ig.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var Rg=Symbol.for;Lg=Rg("react.element"),Ig.Fragment=Rg("react.fragment")}var Ng=Mg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Og=Object.prototype.hasOwnProperty,zg={key:!0,ref:!0,__self:!0,__source:!0};function Dg(t,e,n){var r,i={},o=null,a=null;for(r in void 0!==n&&(o=""+n),void 0!==e.key&&(o=""+e.key),void 0!==e.ref&&(a=e.ref),e)Og.call(e,r)&&!zg.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===i[r]&&(i[r]=e[r]);return{$$typeof:Lg,type:t,key:o,ref:a,props:i,_owner:Ng.current}}Ig.jsx=Dg,Ig.jsxs=Dg;Eg.exports=Ig;var Fg=t.forwardRef((function(e,n){var o=e.children,a=e.container,s=e.disablePortal,l=void 0!==s&&s,u=t.useState(null),c=(0,i.Z)(u,2),h=c[0],f=c[1],p=og(t.isValidElement(o)?o.ref:null,n);return eg((function(){l||f(function(t){return"function"===typeof t?t():t}(a)||document.body)}),[a,l]),eg((function(){if(h&&!l)return tg(n,h),function(){tg(n,null)}}),[n,h,l]),l?t.isValidElement(o)?t.cloneElement(o,{ref:p}):o:h?r.createPortal(o,h):h}));var Bg=Fg;function jg(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function Zg(t){return parseInt(Qm(t).getComputedStyle(t).paddingRight,10)||0}function Ug(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,o=[e,n].concat((0,u.Z)(r)),a=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(t.children,(function(t){-1===o.indexOf(t)&&-1===a.indexOf(t.tagName)&&jg(t,i)}))}function Vg(t,e){var n=-1;return t.some((function(t,r){return!!e(t)&&(n=r,!0)})),n}function qg(t,e){var n=[],r=t.container;if(!e.disableScrollLock){if(function(t){var e=Jm(t);return e.body===t?Qm(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}(r)){var i=function(t){var e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}(Jm(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(Zg(r)+i,"px");var o=Jm(r).querySelectorAll(".mui-fixed");[].forEach.call(o,(function(t){n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight="".concat(Zg(t)+i,"px")}))}var a=r.parentElement,s=Qm(r),l="HTML"===(null==a?void 0:a.nodeName)&&"scroll"===s.getComputedStyle(a).overflowY?a:r;n.push({value:l.style.overflow,property:"overflow",el:l},{value:l.style.overflowX,property:"overflow-x",el:l},{value:l.style.overflowY,property:"overflow-y",el:l}),l.style.overflow="hidden"}return function(){n.forEach((function(t){var e=t.value,n=t.el,r=t.property;e?n.style.setProperty(r,e):n.style.removeProperty(r)}))}}var Gg=function(){function t(){(0,s.Z)(this,t),this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}return(0,l.Z)(t,[{key:"add",value:function(t,e){var n=this.modals.indexOf(t);if(-1!==n)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&jg(t.modalRef,!1);var r=function(t){var e=[];return[].forEach.call(t.children,(function(t){"true"===t.getAttribute("aria-hidden")&&e.push(t)})),e}(e);Ug(e,t.mount,t.modalRef,r,!0);var i=Vg(this.containers,(function(t){return t.container===e}));return-1!==i?(this.containers[i].modals.push(t),n):(this.containers.push({modals:[t],container:e,restore:null,hiddenSiblings:r}),n)}},{key:"mount",value:function(t,e){var n=Vg(this.containers,(function(e){return-1!==e.modals.indexOf(t)})),r=this.containers[n];r.restore||(r.restore=qg(r,e))}},{key:"remove",value:function(t){var e=this.modals.indexOf(t);if(-1===e)return e;var n=Vg(this.containers,(function(e){return-1!==e.modals.indexOf(t)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(t),1),this.modals.splice(e,1),0===r.modals.length)r.restore&&r.restore(),t.modalRef&&jg(t.modalRef,!0),Ug(r.container,t.mount,t.modalRef,r.hiddenSiblings,!1),this.containers.splice(n,1);else{var i=r.modals[r.modals.length-1];i.modalRef&&jg(i.modalRef,!1)}return e}},{key:"isTopModal",value:function(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}]),t}(),Wg=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Hg(t){var e=[],n=[];return Array.from(t.querySelectorAll(Wg)).forEach((function(t,r){var i=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return Number.isNaN(e)?"true"===t.contentEditable||("AUDIO"===t.nodeName||"VIDEO"===t.nodeName||"DETAILS"===t.nodeName)&&null===t.getAttribute("tabindex")?0:t.tabIndex:e}(t);-1!==i&&function(t){return!(t.disabled||"INPUT"===t.tagName&&"hidden"===t.type||function(t){if("INPUT"!==t.tagName||"radio"!==t.type)return!1;if(!t.name)return!1;var e=function(e){return t.ownerDocument.querySelector('input[type="radio"]'.concat(e))},n=e('[name="'.concat(t.name,'"]:checked'));return n||(n=e('[name="'.concat(t.name,'"]'))),n!==t}(t))}(t)&&(0===i?e.push(t):n.push({documentOrder:r,tabIndex:i,node:t}))})),n.sort((function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex})).map((function(t){return t.node})).concat(e)}function Xg(){return!0}function Yg(e){var n=e.children,r=e.disableAutoFocus,i=void 0!==r&&r,o=e.disableEnforceFocus,a=void 0!==o&&o,s=e.disableRestoreFocus,l=void 0!==s&&s,u=e.getTabbable,c=void 0===u?Hg:u,h=e.isEnabled,f=void 0===h?Xg:h,p=e.open,d=t.useRef(),m=t.useRef(null),g=t.useRef(null),v=t.useRef(null),y=t.useRef(null),_=t.useRef(!1),x=t.useRef(null),b=og(n.ref,x),w=t.useRef(null);t.useEffect((function(){p&&x.current&&(_.current=!i)}),[i,p]),t.useEffect((function(){if(p&&x.current){var t=Jm(x.current);return x.current.contains(t.activeElement)||(x.current.hasAttribute("tabIndex")||x.current.setAttribute("tabIndex",-1),_.current&&x.current.focus()),function(){l||(v.current&&v.current.focus&&(d.current=!0,v.current.focus()),v.current=null)}}}),[p]),t.useEffect((function(){if(p&&x.current){var t=Jm(x.current),e=function(e){var n=x.current;if(null!==n)if(t.hasFocus()&&!a&&f()&&!d.current){if(!n.contains(t.activeElement)){if(e&&y.current!==e.target||t.activeElement!==y.current)y.current=null;else if(null!==y.current)return;if(!_.current)return;var r=[];if(t.activeElement!==m.current&&t.activeElement!==g.current||(r=c(x.current)),r.length>0){var i,o,s=Boolean((null==(i=w.current)?void 0:i.shiftKey)&&"Tab"===(null==(o=w.current)?void 0:o.key)),l=r[0],u=r[r.length-1];s?u.focus():l.focus()}else n.focus()}}else d.current=!1},n=function(e){w.current=e,!a&&f()&&"Tab"===e.key&&t.activeElement===x.current&&e.shiftKey&&(d.current=!0,g.current.focus())};t.addEventListener("focusin",e),t.addEventListener("keydown",n,!0);var r=setInterval((function(){"BODY"===t.activeElement.tagName&&e()}),50);return function(){clearInterval(r),t.removeEventListener("focusin",e),t.removeEventListener("keydown",n,!0)}}}),[i,a,l,f,p,c]);var k=function(t){null===v.current&&(v.current=t.relatedTarget),_.current=!0};return Eg.exports.jsxs(t.Fragment,{children:[Eg.exports.jsx("div",{tabIndex:0,onFocus:k,ref:m,"data-test":"sentinelStart"}),t.cloneElement(n,{ref:b,onFocus:function(t){null===v.current&&(v.current=t.relatedTarget),_.current=!0,y.current=t.target;var e=n.props.onFocus;e&&e(t)}}),Eg.exports.jsx("div",{tabIndex:0,onFocus:k,ref:g,"data-test":"sentinelEnd"})]})}function $g(t){return kg("MuiModal",t)}Sg("MuiModal",["root","hidden"]);var Kg=["BackdropComponent","BackdropProps","children","classes","className","closeAfterTransition","component","components","componentsProps","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","theme","onTransitionEnter","onTransitionExited"];var Jg=new Gg,Qg=t.forwardRef((function(e,n){var r=e.BackdropComponent,o=e.BackdropProps,a=e.children,s=e.classes,l=e.className,u=e.closeAfterTransition,c=void 0!==u&&u,h=e.component,f=void 0===h?"div":h,p=e.components,d=void 0===p?{}:p,m=e.componentsProps,g=void 0===m?{}:m,v=e.container,y=e.disableAutoFocus,_=void 0!==y&&y,x=e.disableEnforceFocus,b=void 0!==x&&x,w=e.disableEscapeKeyDown,k=void 0!==w&&w,S=e.disablePortal,E=void 0!==S&&S,I=e.disableRestoreFocus,C=void 0!==I&&I,A=e.disableScrollLock,P=void 0!==A&&A,T=e.hideBackdrop,M=void 0!==T&&T,L=e.keepMounted,R=void 0!==L&&L,N=e.manager,O=void 0===N?Jg:N,z=e.onBackdropClick,D=e.onClose,F=e.onKeyDown,B=e.open,j=e.theme,Z=e.onTransitionEnter,U=e.onTransitionExited,V=vg(e,Kg),q=t.useState(!0),G=(0,i.Z)(q,2),W=G[0],H=G[1],X=t.useRef({}),Y=t.useRef(null),$=t.useRef(null),K=og($,n),J=function(t){return!!t.children&&t.children.props.hasOwnProperty("in")}(e),Q=function(){return X.current.modalRef=$.current,X.current.mountNode=Y.current,X.current},tt=function(){O.mount(Q(),{disableScrollLock:P}),$.current.scrollTop=0},et=ig((function(){var t=function(t){return"function"===typeof t?t():t}(v)||Jm(Y.current).body;O.add(Q(),t),$.current&&tt()})),nt=t.useCallback((function(){return O.isTopModal(Q())}),[O]),rt=ig((function(t){Y.current=t,t&&(B&&nt()?tt():jg($.current,!0))})),it=t.useCallback((function(){O.remove(Q())}),[O]);t.useEffect((function(){return function(){it()}}),[it]),t.useEffect((function(){B?et():J&&c||it()}),[B,it,J,c,et]);var ot=fm({},e,{classes:s,closeAfterTransition:c,disableAutoFocus:_,disableEnforceFocus:b,disableEscapeKeyDown:k,disablePortal:E,disableRestoreFocus:C,disableScrollLock:P,exited:W,hideBackdrop:M,keepMounted:R}),at=function(t){var e=t.open,n=t.exited;return bg({root:["root",!e&&n&&"hidden"]},$g,t.classes)}(ot);if(!R&&!B&&(!J||W))return null;var st={};void 0===a.props.tabIndex&&(st.tabIndex="-1"),J&&(st.onEnter=Ym((function(){H(!1),Z&&Z()}),a.props.onEnter),st.onExited=Ym((function(){H(!0),U&&U(),c&&it()}),a.props.onExited));var lt=d.Root||f,ut=g.root||{};return Eg.exports.jsx(Bg,{ref:rt,container:v,disablePortal:E,children:Eg.exports.jsxs(lt,fm({role:"presentation"},ut,!xg(lt)&&{as:f,ownerState:fm({},ot,ut.ownerState),theme:j},V,{ref:K,onKeyDown:function(t){F&&F(t),"Escape"===t.key&&nt()&&(k||(t.stopPropagation(),D&&D(t,"escapeKeyDown")))},className:_g(at.root,ut.className,l),children:[!M&&r?Eg.exports.jsx(r,fm({"aria-hidden":!0,open:B,onClick:function(t){t.target===t.currentTarget&&(z&&z(t),D&&D(t,"backdropClick"))}},o)):null,Eg.exports.jsx(Yg,{disableEnforceFocus:b,disableAutoFocus:_,disableRestoreFocus:C,isEnabled:nt,open:B,children:t.cloneElement(a,st)})]}))})})),tv=Qg;function ev(t,e){return(0,Fn.Z)(t,e)}function nv(t,e){return e?dm(t,e,{clone:!1}):t}var rv={xs:0,sm:600,md:900,lg:1200,xl:1536},iv={keys:["xs","sm","md","lg","xl"],up:function(t){return"@media (min-width:".concat(rv[t],"px)")}};function ov(t,e,n){var r=t.theme||{};if(Array.isArray(e)){var i=r.breakpoints||iv;return e.reduce((function(t,r,o){return t[i.up(i.keys[o])]=n(e[o]),t}),{})}if("object"===typeof e){var o=r.breakpoints||iv;return Object.keys(e).reduce((function(t,r){if(-1!==Object.keys(o.values||rv).indexOf(r)){t[o.up(r)]=n(e[r],r)}else{var i=r;t[i]=e[i]}return t}),{})}return n(e)}function av(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==e||null==(t=e.keys)?void 0:t.reduce((function(t,n){return t[e.up(n)]={},t}),{});return n||{}}function sv(t,e){return t.reduce((function(t,e){var n=t[e];return(!n||0===Object.keys(n).length)&&delete t[e],t}),e)}function lv(t,e){return e&&"string"===typeof e?e.split(".").reduce((function(t,e){return t&&t[e]?t[e]:null}),t):null}function uv(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof t?t(n):Array.isArray(t)?t[n]||i:lv(t,n)||i,e&&(r=e(r)),r}function cv(t){var e=t.prop,n=t.cssProperty,r=void 0===n?t.prop:n,i=t.themeKey,o=t.transform,a=function(t){if(null==t[e])return null;var n=t[e],a=lv(t.theme,i)||{};return ov(t,n,(function(t){var n=uv(a,o,t);return t===n&&"string"===typeof t&&(n=uv(a,o,"".concat(e).concat("default"===t?"":Xm(t)),t)),!1===r?n:(0,c.Z)({},r,n)}))};return a.propTypes={},a.filterProps=[e],a}function hv(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.reduce((function(t,e){return e.filterProps.forEach((function(n){t[n]=e})),t}),{}),i=function(t){return Object.keys(t).reduce((function(e,n){return r[n]?nv(e,r[n](t)):e}),{})};return i.propTypes={},i.filterProps=e.reduce((function(t,e){return t.concat(e.filterProps)}),[]),i}var fv={m:"margin",p:"padding"},pv={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},dv={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},mv=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}((function(t){if(t.length>2){if(!dv[t])return[t];t=dv[t]}var e=t.split(""),n=(0,i.Z)(e,2),r=n[0],o=n[1],a=fv[r],s=pv[o]||"";return Array.isArray(s)?s.map((function(t){return a+t})):[a+s]})),gv=[].concat(["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"]);function vv(t,e,n,r){var i=lv(t,e)||n;return"number"===typeof i?function(t){return"string"===typeof t?t:i*t}:Array.isArray(i)?function(t){return"string"===typeof t?t:i[t]}:"function"===typeof i?i:function(){}}function yv(t){return vv(t,"spacing",8)}function _v(t,e){if("string"===typeof e||null==e)return e;var n=t(Math.abs(e));return e>=0?n:"number"===typeof n?-n:"-".concat(n)}function xv(t,e,n,r){if(-1===e.indexOf(n))return null;var i=function(t,e){return function(n){return t.reduce((function(t,r){return t[r]=_v(e,n),t}),{})}}(mv(n),r);return ov(t,t[n],i)}function bv(t){return function(t,e){var n=yv(t.theme);return Object.keys(t).map((function(r){return xv(t,e,r,n)})).reduce(nv,{})}(t,gv)}function wv(t){return"number"!==typeof t?t:"".concat(t,"px solid")}bv.propTypes={},bv.filterProps=gv;var kv=cv({prop:"border",themeKey:"borders",transform:wv}),Sv=cv({prop:"borderTop",themeKey:"borders",transform:wv}),Ev=cv({prop:"borderRight",themeKey:"borders",transform:wv}),Iv=cv({prop:"borderBottom",themeKey:"borders",transform:wv}),Cv=cv({prop:"borderLeft",themeKey:"borders",transform:wv}),Av=cv({prop:"borderColor",themeKey:"palette"}),Pv=cv({prop:"borderTopColor",themeKey:"palette"}),Tv=cv({prop:"borderRightColor",themeKey:"palette"}),Mv=cv({prop:"borderBottomColor",themeKey:"palette"}),Lv=cv({prop:"borderLeftColor",themeKey:"palette"}),Rv=function(t){if(void 0!==t.borderRadius&&null!==t.borderRadius){var e=vv(t.theme,"shape.borderRadius",4);return ov(t,t.borderRadius,(function(t){return{borderRadius:_v(e,t)}}))}return null};Rv.propTypes={},Rv.filterProps=["borderRadius"];var Nv=hv(kv,Sv,Ev,Iv,Cv,Av,Pv,Tv,Mv,Lv,Rv),Ov=hv(cv({prop:"displayPrint",cssProperty:!1,transform:function(t){return{"@media print":{display:t}}}}),cv({prop:"display"}),cv({prop:"overflow"}),cv({prop:"textOverflow"}),cv({prop:"visibility"}),cv({prop:"whiteSpace"})),zv=hv(cv({prop:"flexBasis"}),cv({prop:"flexDirection"}),cv({prop:"flexWrap"}),cv({prop:"justifyContent"}),cv({prop:"alignItems"}),cv({prop:"alignContent"}),cv({prop:"order"}),cv({prop:"flex"}),cv({prop:"flexGrow"}),cv({prop:"flexShrink"}),cv({prop:"alignSelf"}),cv({prop:"justifyItems"}),cv({prop:"justifySelf"})),Dv=function(t){if(void 0!==t.gap&&null!==t.gap){var e=vv(t.theme,"spacing",8);return ov(t,t.gap,(function(t){return{gap:_v(e,t)}}))}return null};Dv.propTypes={},Dv.filterProps=["gap"];var Fv=function(t){if(void 0!==t.columnGap&&null!==t.columnGap){var e=vv(t.theme,"spacing",8);return ov(t,t.columnGap,(function(t){return{columnGap:_v(e,t)}}))}return null};Fv.propTypes={},Fv.filterProps=["columnGap"];var Bv=function(t){if(void 0!==t.rowGap&&null!==t.rowGap){var e=vv(t.theme,"spacing",8);return ov(t,t.rowGap,(function(t){return{rowGap:_v(e,t)}}))}return null};Bv.propTypes={},Bv.filterProps=["rowGap"];var jv=hv(Dv,Fv,Bv,cv({prop:"gridColumn"}),cv({prop:"gridRow"}),cv({prop:"gridAutoFlow"}),cv({prop:"gridAutoColumns"}),cv({prop:"gridAutoRows"}),cv({prop:"gridTemplateColumns"}),cv({prop:"gridTemplateRows"}),cv({prop:"gridTemplateAreas"}),cv({prop:"gridArea"})),Zv=hv(cv({prop:"color",themeKey:"palette"}),cv({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),cv({prop:"backgroundColor",themeKey:"palette"})),Uv=hv(cv({prop:"position"}),cv({prop:"zIndex",themeKey:"zIndex"}),cv({prop:"top"}),cv({prop:"right"}),cv({prop:"bottom"}),cv({prop:"left"})),Vv=cv({prop:"boxShadow",themeKey:"shadows"});function qv(t){return t<=1&&0!==t?"".concat(100*t,"%"):t}var Gv=cv({prop:"width",transform:qv}),Wv=function(t){if(void 0!==t.maxWidth&&null!==t.maxWidth){return ov(t,t.maxWidth,(function(e){var n,r,i;return{maxWidth:(null==(n=t.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[e])||rv[e]||qv(e)}}))}return null};Wv.filterProps=["maxWidth"];var Hv=cv({prop:"minWidth",transform:qv}),Xv=cv({prop:"height",transform:qv}),Yv=cv({prop:"maxHeight",transform:qv}),$v=cv({prop:"minHeight",transform:qv});cv({prop:"size",cssProperty:"width",transform:qv}),cv({prop:"size",cssProperty:"height",transform:qv});var Kv=hv(Gv,Wv,Hv,Xv,Yv,$v,cv({prop:"boxSizing"})),Jv=cv({prop:"fontFamily",themeKey:"typography"}),Qv=cv({prop:"fontSize",themeKey:"typography"}),ty=cv({prop:"fontStyle",themeKey:"typography"}),ey=cv({prop:"fontWeight",themeKey:"typography"}),ny=cv({prop:"letterSpacing"}),ry=cv({prop:"textTransform"}),iy=cv({prop:"lineHeight"}),oy=cv({prop:"textAlign"}),ay=hv(cv({prop:"typography",cssProperty:!1,themeKey:"typography"}),Jv,Qv,ty,ey,ny,iy,oy,ry),sy={borders:Nv.filterProps,display:Ov.filterProps,flexbox:zv.filterProps,grid:jv.filterProps,positions:Uv.filterProps,palette:Zv.filterProps,shadows:Vv.filterProps,sizing:Kv.filterProps,spacing:bv.filterProps,typography:ay.filterProps},ly={borders:Nv,display:Ov,flexbox:zv,grid:jv,positions:Uv,palette:Zv,shadows:Vv,sizing:Kv,spacing:bv,typography:ay};Object.keys(sy).reduce((function(t,e){return sy[e].forEach((function(n){t[n]=ly[e]})),t}),{});function uy(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.reduce((function(t,e){return t.concat(Object.keys(e))}),[]),i=new Set(r);return e.every((function(t){return i.size===Object.keys(t).length}))}function cy(t,e){return"function"===typeof t?t(e):t}var hy=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ly,e=Object.keys(t).reduce((function(e,n){return t[n].filterProps.forEach((function(r){e[r]=t[n]})),e}),{});function n(t,n,r){var i,o=(i={},(0,c.Z)(i,t,n),(0,c.Z)(i,"theme",r),i),a=e[t];return a?a(o):(0,c.Z)({},t,n)}function r(t){var i=t||{},o=i.sx,a=i.theme,s=void 0===a?{}:a;if(!o)return null;function l(t){var i=t;if("function"===typeof t)i=t(s);else if("object"!==typeof t)return t;if(!i)return null;var o=av(s.breakpoints),a=Object.keys(o),l=o;return Object.keys(i).forEach((function(t){var o=cy(i[t],s);if(null!==o&&void 0!==o)if("object"===typeof o)if(e[t])l=nv(l,n(t,o,s));else{var a=ov({theme:s},o,(function(e){return(0,c.Z)({},t,e)}));uy(a,o)?l[t]=r({sx:o,theme:s}):l=nv(l,a)}else l=nv(l,n(t,o,s))})),sv(a,l)}return Array.isArray(o)?o.map(l):l(o)}return r}();hy.filterProps=["sx"];var fy=hy;var py=["values","unit","step"];function dy(t){var e=t.values,n=void 0===e?{xs:0,sm:600,md:900,lg:1200,xl:1536}:e,r=t.unit,i=void 0===r?"px":r,o=t.step,a=void 0===o?5:o,s=vg(t,py),l=function(t){var e=Object.keys(t).map((function(e){return{key:e,val:t[e]}}))||[];return e.sort((function(t,e){return t.val-e.val})),e.reduce((function(t,e){return fm({},t,(0,c.Z)({},e.key,e.val))}),{})}(n),u=Object.keys(l);function h(t){var e="number"===typeof n[t]?n[t]:t;return"@media (min-width:".concat(e).concat(i,")")}function f(t){var e="number"===typeof n[t]?n[t]:t;return"@media (max-width:".concat(e-a/100).concat(i,")")}function p(t,e){var r=u.indexOf(e);return"@media (min-width:".concat("number"===typeof n[t]?n[t]:t).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[u[r]]?n[u[r]]:e)-a/100).concat(i,")")}return fm({keys:u,values:l,up:h,down:f,between:p,only:function(t){return u.indexOf(t)+1<u.length?p(t,u[u.indexOf(t)+1]):h(t)},not:function(t){var e=u.indexOf(t);return 0===e?h(u[1]):e===u.length-1?f(u[e]):p(t,u[u.indexOf(t)+1]).replace("@media","@media not all and")},unit:i},s)}var my={borderRadius:4};function gy(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(t.mui)return t;var e=yv({spacing:t}),n=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=0===n.length?[1]:n;return i.map((function(t){var n=e(t);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var vy=["breakpoints","palette","spacing","shape"];function yy(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.breakpoints,n=void 0===e?{}:e,r=t.palette,i=void 0===r?{}:r,o=t.spacing,a=t.shape,s=void 0===a?{}:a,l=vg(t,vy),u=dy(n),c=gy(o),h=dm({breakpoints:u,direction:"ltr",components:{},palette:fm({mode:"light"},i),spacing:c,shape:fm({},my,s)},l),f=arguments.length,p=new Array(f>1?f-1:0),d=1;d<f;d++)p[d-1]=arguments[d];return h=p.reduce((function(t,e){return dm(t,e)}),h)}var _y=t.createContext(null);function xy(){return t.useContext(_y)}function by(t){return 0===Object.keys(t).length}function wy(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=xy();return!e||by(e)?t:e}var ky=yy();function Sy(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ky;return wy(t)}var Ey=["variant"];function Iy(t){return 0===t.length}function Cy(t){var e=t.variant,n=vg(t,Ey),r=e||"";return Object.keys(n).sort().forEach((function(e){r+="color"===e?Iy(r)?t[e]:Xm(t[e]):"".concat(Iy(r)?e:Xm(e)).concat(Xm(t[e].toString()))})),r}var Ay=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],Py=["theme"],Ty=["theme"];function My(t){return 0===Object.keys(t).length}var Ly=function(t,e){return e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null},Ry=function(t,e){var n=[];e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants);var r={};return n.forEach((function(t){var e=Cy(t.props);r[e]=t.style})),r},Ny=function(t,e,n,r){var i,o,a=t.ownerState,s=void 0===a?{}:a,l=[],u=null==n||null==(i=n.components)||null==(o=i[r])?void 0:o.variants;return u&&u.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(e){s[e]!==n.props[e]&&t[e]!==n.props[e]&&(r=!1)})),r&&l.push(e[Cy(n.props)])})),l};function Oy(t){return"ownerState"!==t&&"theme"!==t&&"sx"!==t&&"as"!==t}var zy=yy();function Dy(t){var e=t.theme,n=t.name,r=t.props;return e&&e.components&&e.components[n]&&e.components[n].defaultProps?gg(e.components[n].defaultProps,r):r}function Fy(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)}function By(t){if(t.type)return t;if("#"===t.charAt(0))return By(function(t){t=t.slice(1);var e=new RegExp(".{1,".concat(t.length>=6?2:1,"}"),"g"),n=t.match(e);return n&&1===n[0].length&&(n=n.map((function(t){return t+t}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(t,e){return e<3?parseInt(t,16):Math.round(parseInt(t,16)/255*1e3)/1e3})).join(", "),")"):""}(t));var e=t.indexOf("("),n=t.substring(0,e);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(gm(9,t));var r,i=t.substring(e+1,t.length-1);if("color"===n){if(r=(i=i.split(" ")).shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(gm(10,r))}else i=i.split(",");return{type:n,values:i=i.map((function(t){return parseFloat(t)})),colorSpace:r}}function jy(t){var e=t.type,n=t.colorSpace,r=t.values;return-1!==e.indexOf("rgb")?r=r.map((function(t,e){return e<3?parseInt(t,10):t})):-1!==e.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==e.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(e,"(").concat(r,")")}function Zy(t){var e="hsl"===(t=By(t)).type?By(function(t){var e=(t=By(t)).values,n=e[0],r=e[1]/100,i=e[2]/100,o=r*Math.min(i,1-i),a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+n/30)%12;return i-o*Math.max(Math.min(e-3,9-e,1),-1)},s="rgb",l=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===t.type&&(s+="a",l.push(e[3])),jy({type:s,values:l})}(t)).values:t.values;return e=e.map((function(e){return"color"!==t.type&&(e/=255),e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Uy(t,e){return t=By(t),e=Fy(e),"rgb"!==t.type&&"hsl"!==t.type||(t.type+="a"),"color"===t.type?t.values[3]="/".concat(e):t.values[3]=e,jy(t)}function Vy(t,e,n){var r;return fm({toolbar:(r={minHeight:56},(0,c.Z)(r,"".concat(t.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,c.Z)(r,t.up("sm"),{minHeight:64}),r)},n)}var qy={black:"#000",white:"#fff"},Gy={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Wy={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Hy={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Xy={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Yy={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},$y={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Ky={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Jy=["mode","contrastThreshold","tonalOffset"],Qy={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:qy.white,default:qy.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},t_={text:{primary:qy.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:qy.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function e_(t,e,n,r){var i=r.light||r,o=r.dark||1.5*r;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:"light"===e?t.light=function(t,e){if(t=By(t),e=Fy(e),-1!==t.type.indexOf("hsl"))t.values[2]+=(100-t.values[2])*e;else if(-1!==t.type.indexOf("rgb"))for(var n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(-1!==t.type.indexOf("color"))for(var r=0;r<3;r+=1)t.values[r]+=(1-t.values[r])*e;return jy(t)}(t.main,i):"dark"===e&&(t.dark=function(t,e){if(t=By(t),e=Fy(e),-1!==t.type.indexOf("hsl"))t.values[2]*=1-e;else if(-1!==t.type.indexOf("rgb")||-1!==t.type.indexOf("color"))for(var n=0;n<3;n+=1)t.values[n]*=1-e;return jy(t)}(t.main,o)))}function n_(t){var e=t.mode,n=void 0===e?"light":e,r=t.contrastThreshold,i=void 0===r?3:r,o=t.tonalOffset,a=void 0===o?.2:o,s=vg(t,Jy),l=t.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Yy[200],light:Yy[50],dark:Yy[400]}:{main:Yy[700],light:Yy[400],dark:Yy[800]}}(n),u=t.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Wy[200],light:Wy[50],dark:Wy[400]}:{main:Wy[500],light:Wy[300],dark:Wy[700]}}(n),c=t.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Hy[500],light:Hy[300],dark:Hy[700]}:{main:Hy[700],light:Hy[400],dark:Hy[800]}}(n),h=t.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:$y[400],light:$y[300],dark:$y[700]}:{main:$y[700],light:$y[500],dark:$y[900]}}(n),f=t.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Ky[400],light:Ky[300],dark:Ky[700]}:{main:Ky[800],light:Ky[500],dark:Ky[900]}}(n),p=t.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Xy[400],light:Xy[300],dark:Xy[700]}:{main:"#ed6c02",light:Xy[500],dark:Xy[900]}}(n);function d(t){var e=function(t,e){var n=Zy(t),r=Zy(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(t,t_.text.primary)>=i?t_.text.primary:Qy.text.primary;return e}var m=function(t){var e=t.color,n=t.name,r=t.mainShade,i=void 0===r?500:r,o=t.lightShade,s=void 0===o?300:o,l=t.darkShade,u=void 0===l?700:l;if(!(e=fm({},e)).main&&e[i]&&(e.main=e[i]),!e.hasOwnProperty("main"))throw new Error(gm(11,n?" (".concat(n,")"):"",i));if("string"!==typeof e.main)throw new Error(gm(12,n?" (".concat(n,")"):"",JSON.stringify(e.main)));return e_(e,"light",s,a),e_(e,"dark",u,a),e.contrastText||(e.contrastText=d(e.main)),e},g={dark:t_,light:Qy};return dm(fm({common:qy,mode:n,primary:m({color:l,name:"primary"}),secondary:m({color:u,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:c,name:"error"}),warning:m({color:p,name:"warning"}),info:m({color:h,name:"info"}),success:m({color:f,name:"success"}),grey:Gy,contrastThreshold:i,getContrastText:d,augmentColor:m,tonalOffset:a},g[n]),s)}var r_=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var i_={textTransform:"uppercase"},o_='"Roboto", "Helvetica", "Arial", sans-serif';function a_(t,e){var n="function"===typeof e?e(t):e,r=n.fontFamily,i=void 0===r?o_:r,o=n.fontSize,a=void 0===o?14:o,s=n.fontWeightLight,l=void 0===s?300:s,u=n.fontWeightRegular,c=void 0===u?400:u,h=n.fontWeightMedium,f=void 0===h?500:h,p=n.fontWeightBold,d=void 0===p?700:p,m=n.htmlFontSize,g=void 0===m?16:m,v=n.allVariants,y=n.pxToRem,_=vg(n,r_);var x=a/14,b=y||function(t){return"".concat(t/g*x,"rem")},w=function(t,e,n,r,o){return fm({fontFamily:i,fontWeight:t,fontSize:b(e),lineHeight:n},i===o_?{letterSpacing:"".concat((a=r/e,Math.round(1e5*a)/1e5),"em")}:{},o,v);var a},k={h1:w(l,96,1.167,-1.5),h2:w(l,60,1.2,-.5),h3:w(c,48,1.167,0),h4:w(c,34,1.235,.25),h5:w(c,24,1.334,0),h6:w(f,20,1.6,.15),subtitle1:w(c,16,1.75,.15),subtitle2:w(f,14,1.57,.1),body1:w(c,16,1.5,.15),body2:w(c,14,1.43,.15),button:w(f,14,1.75,.4,i_),caption:w(c,12,1.66,.4),overline:w(c,12,2.66,1,i_)};return dm(fm({htmlFontSize:g,pxToRem:b,fontFamily:i,fontSize:a,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:f,fontWeightBold:d},k),_,{clone:!1})}function s_(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var l_=["none",s_(0,2,1,-1,0,1,1,0,0,1,3,0),s_(0,3,1,-2,0,2,2,0,0,1,5,0),s_(0,3,3,-2,0,3,4,0,0,1,8,0),s_(0,2,4,-1,0,4,5,0,0,1,10,0),s_(0,3,5,-1,0,5,8,0,0,1,14,0),s_(0,3,5,-1,0,6,10,0,0,1,18,0),s_(0,4,5,-2,0,7,10,1,0,2,16,1),s_(0,5,5,-3,0,8,10,1,0,3,14,2),s_(0,5,6,-3,0,9,12,1,0,3,16,2),s_(0,6,6,-3,0,10,14,1,0,4,18,3),s_(0,6,7,-4,0,11,15,1,0,4,20,3),s_(0,7,8,-4,0,12,17,2,0,5,22,4),s_(0,7,8,-4,0,13,19,2,0,5,24,4),s_(0,7,9,-4,0,14,21,2,0,5,26,4),s_(0,8,9,-5,0,15,22,2,0,6,28,5),s_(0,8,10,-5,0,16,24,2,0,6,30,5),s_(0,8,11,-5,0,17,26,2,0,6,32,5),s_(0,9,11,-5,0,18,28,2,0,7,34,6),s_(0,9,12,-6,0,19,29,2,0,7,36,6),s_(0,10,13,-6,0,20,31,3,0,8,38,7),s_(0,10,13,-6,0,21,33,3,0,8,40,7),s_(0,10,14,-6,0,22,35,3,0,8,42,7),s_(0,11,14,-7,0,23,36,3,0,9,44,8),s_(0,11,15,-7,0,24,38,3,0,9,46,8)],u_=["duration","easing","delay"],c_={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},h_={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function f_(t){return"".concat(Math.round(t),"ms")}function p_(t){if(!t)return 0;var e=t/36;return Math.round(10*(4+15*Math.pow(e,.25)+e/5))}function d_(t){var e=fm({},c_,t.easing),n=fm({},h_,t.duration);return fm({getAutoHeightDuration:p_,create:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.duration,o=void 0===i?n.standard:i,a=r.easing,s=void 0===a?e.easeInOut:a,l=r.delay,u=void 0===l?0:l;vg(r,u_);return(Array.isArray(t)?t:[t]).map((function(t){return"".concat(t," ").concat("string"===typeof o?o:f_(o)," ").concat(s," ").concat("string"===typeof u?u:f_(u))})).join(",")}},t,{easing:e,duration:n})}var m_={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},g_=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];var v_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mixins,n=void 0===e?{}:e,r=t.palette,i=void 0===r?{}:r,o=t.transitions,a=void 0===o?{}:o,s=t.typography,l=void 0===s?{}:s,u=vg(t,g_),c=n_(i),h=yy(t),f=dm(h,{mixins:Vy(h.breakpoints,h.spacing,n),palette:c,shadows:l_.slice(),typography:a_(c,l),transitions:d_(a),zIndex:fm({},m_)});f=dm(f,u);for(var p=arguments.length,d=new Array(p>1?p-1:0),m=1;m<p;m++)d[m-1]=arguments[m];return f=d.reduce((function(t,e){return dm(t,e)}),f)}(),y_=v_;function __(t){return function(t){var e=t.props,n=t.name;return Dy({theme:Sy(t.defaultTheme),name:n,props:e})}({props:t.props,name:t.name,defaultTheme:y_})}var x_=function(t){return Oy(t)&&"classes"!==t},b_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.defaultTheme,n=void 0===e?zy:e,r=t.rootShouldForwardProp,o=void 0===r?Oy:r,a=t.slotShouldForwardProp,s=void 0===a?Oy:a,l=t.styleFunctionSx,c=void 0===l?fy:l;return function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.name,l=r.slot,h=r.skipVariantsResolver,f=r.skipSx,p=r.overridesResolver,d=vg(r,Ay),m=void 0!==h?h:l&&"Root"!==l||!1,g=f||!1;var v=Oy;"Root"===l?v=o:l&&(v=s);var y=ev(t,fm({shouldForwardProp:v,label:e},d)),_=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];var s=r?r.map((function(t){return"function"===typeof t&&t.__emotion_real!==t?function(e){var r=e.theme,i=vg(e,Py);return t(fm({theme:My(r)?n:r},i))}:t})):[],l=t;a&&p&&s.push((function(t){var e=My(t.theme)?n:t.theme,r=Ly(a,e);if(r){var o={};return Object.entries(r).forEach((function(e){var n=(0,i.Z)(e,2),r=n[0],a=n[1];o[r]="function"===typeof a?a(t):a})),p(t,o)}return null})),a&&!m&&s.push((function(t){var e=My(t.theme)?n:t.theme;return Ny(t,Ry(a,e),e,a)})),g||s.push((function(t){var e=My(t.theme)?n:t.theme;return c(fm({},t,{theme:e}))}));var h=s.length-r.length;if(Array.isArray(t)&&h>0){var f=new Array(h).fill("");(l=[].concat((0,u.Z)(t),(0,u.Z)(f))).raw=[].concat((0,u.Z)(t.raw),(0,u.Z)(f))}else"function"===typeof t&&t.__emotion_real!==t&&(l=function(e){var r=e.theme,i=vg(e,Ty);return t(fm({theme:My(r)?n:r},i))});var d=y.apply(void 0,[l].concat((0,u.Z)(s)));return d};return y.withConfig&&(_.withConfig=y.withConfig),_}}({defaultTheme:y_,rootShouldForwardProp:x_}),w_=b_;function k_(t){return kg("MuiSvgIcon",t)}Sg("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var S_=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],E_=w_("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,"inherit"!==n.color&&e["color".concat(Xm(n.color))],e["fontSize".concat(Xm(n.fontSize))]]}})((function(t){var e,n,r,i,o,a,s,l,u,c,h,f,p,d,m,g,v,y=t.theme,_=t.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(e=y.transitions)||null==(n=e.create)?void 0:n.call(e,"fill",{duration:null==(r=y.transitions)||null==(i=r.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(o=y.typography)||null==(a=o.pxToRem)?void 0:a.call(o,20))||"1.25rem",medium:(null==(s=y.typography)||null==(l=s.pxToRem)?void 0:l.call(s,24))||"1.5rem",large:(null==(u=y.typography)||null==(c=u.pxToRem)?void 0:c.call(u,35))||"2.1875"}[_.fontSize],color:null!=(h=null==(f=y.palette)||null==(p=f[_.color])?void 0:p.main)?h:{action:null==(d=y.palette)||null==(m=d.action)?void 0:m.active,disabled:null==(g=y.palette)||null==(v=g.action)?void 0:v.disabled,inherit:void 0}[_.color]}})),I_=t.forwardRef((function(t,e){var n=__({props:t,name:"MuiSvgIcon"}),r=n.children,i=n.className,o=n.color,a=void 0===o?"inherit":o,s=n.component,l=void 0===s?"svg":s,u=n.fontSize,c=void 0===u?"medium":u,h=n.htmlColor,f=n.inheritViewBox,p=void 0!==f&&f,d=n.titleAccess,m=n.viewBox,g=void 0===m?"0 0 24 24":m,v=vg(n,S_),y=fm({},n,{color:a,component:l,fontSize:c,instanceFontSize:t.fontSize,inheritViewBox:p,viewBox:g}),_={};p||(_.viewBox=g);var x=function(t){var e=t.color,n=t.fontSize,r=t.classes;return bg({root:["root","inherit"!==e&&"color".concat(Xm(e)),"fontSize".concat(Xm(n))]},k_,r)}(y);return Eg.exports.jsxs(E_,fm({as:l,className:_g(x.root,i),ownerState:y,focusable:"false",color:h,"aria-hidden":!d||void 0,role:d?"img":void 0,ref:e},_,v,{children:[r,d?Eg.exports.jsx("title",{children:d}):null]}))}));I_.muiName="SvgIcon";var C_=I_;var A_={configure:function(t){console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),hm.configure(t)}},P_=Object.freeze({__proto__:null,unstable_ClassNameGenerator:A_,capitalize:Xm,createChainedFunction:Ym,createSvgIcon:function(e,n){var r=function(t,r){return Eg.exports.jsx(C_,fm({"data-testid":"".concat(n,"Icon"),ref:r},t,{children:e}))};return r.muiName=C_.muiName,t.memo(t.forwardRef(r))},debounce:$m,deprecatedPropType:function(t,e){return function(){return null}},isMuiElement:Km,ownerDocument:Jm,ownerWindow:Qm,requirePropFactory:function(t,e){return function(){return null}},setRef:tg,unstable_useEnhancedEffect:eg,unstable_useId:function(e){if(void 0!==rg){var n=rg();return null!=e?e:n}return function(e){var n=t.useState(e),r=(0,i.Z)(n,2),o=r[0],a=r[1],s=e||o;return t.useEffect((function(){null==o&&a("mui-".concat(ng+=1))}),[o]),s}(e)},unsupportedProp:function(t,e,n,r,i){return null},useControlled:function(e){var n=e.controlled,r=e.default,o=(e.name,e.state,t.useRef(void 0!==n).current),a=t.useState(r),s=(0,i.Z)(a,2),l=s[0],u=s[1];return[o?n:l,t.useCallback((function(t){o||u(t)}),[])]},useEventCallback:ig,useForkRef:og,useIsFocusVisible:dg}),T_=om(P_);!function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=T_}(um);var M_=lm.exports;Object.defineProperty(sm,"__esModule",{value:!0});sm.default=void 0;var L_=M_(um),R_=Eg.exports,N_=(0,L_.default)((0,R_.jsx)("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"}),"Print");function O_(t,e){return O_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},O_(t,e)}function z_(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,O_(t,e)}sm.default=N_;var D_=!1,F_=t.createContext(null),B_="unmounted",j_="exited",Z_="entering",U_="entered",V_="exiting",q_=function(e){function n(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=j_,r.appearStatus=Z_):i=U_:i=t.unmountOnExit||t.mountOnEnter?B_:j_,r.state={status:i},r.nextCallback=null,r}z_(n,e),n.getDerivedStateFromProps=function(t,e){return t.in&&e.status===B_?{status:j_}:null};var i=n.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==Z_&&n!==U_&&(e=Z_):n!==Z_&&n!==U_||(e=V_)}this.updateStatus(!1,e)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!==typeof r&&(t=r.exit,e=r.enter,n=void 0!==r.appear?r.appear:e),{exit:t,enter:e,appear:n}},i.updateStatus=function(t,e){void 0===t&&(t=!1),null!==e?(this.cancelNextCallback(),e===Z_?this.performEnter(t):this.performExit()):this.props.unmountOnExit&&this.state.status===j_&&this.setState({status:B_})},i.performEnter=function(t){var e=this,n=this.props.enter,i=this.context?this.context.isMounting:t,o=this.props.nodeRef?[i]:[r.findDOMNode(this),i],a=o[0],s=o[1],l=this.getTimeouts(),u=i?l.appear:l.enter;!t&&!n||D_?this.safeSetState({status:U_},(function(){e.props.onEntered(a)})):(this.props.onEnter(a,s),this.safeSetState({status:Z_},(function(){e.props.onEntering(a,s),e.onTransitionEnd(u,(function(){e.safeSetState({status:U_},(function(){e.props.onEntered(a,s)}))}))})))},i.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:r.findDOMNode(this);e&&!D_?(this.props.onExit(i),this.safeSetState({status:V_},(function(){t.props.onExiting(i),t.onTransitionEnd(n.exit,(function(){t.safeSetState({status:j_},(function(){t.props.onExited(i)}))}))}))):this.safeSetState({status:j_},(function(){t.props.onExited(i)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},i.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},i.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this),i=null==t&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=o[0],s=o[1];this.props.addEndListener(a,s)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if(e===B_)return null;var n=this.props,r=n.children;n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef;var i=vg(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return t.createElement(F_.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},n}(t.Component);function G_(){}q_.contextType=F_,q_.propTypes={},q_.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:G_,onEntering:G_,onEntered:G_,onExit:G_,onExiting:G_,onExited:G_},q_.UNMOUNTED=B_,q_.EXITED=j_,q_.ENTERING=Z_,q_.ENTERED=U_,q_.EXITING=V_;var W_=q_;function H_(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(t){return t})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function X_(t,e,n){return null!=n[e]?n[e]:t.props[e]}function Y_(e,n,r){var i=H_(e.children),o=function(t,e){function n(n){return n in e?e[n]:t[n]}t=t||{},e=e||{};var r,i=Object.create(null),o=[];for(var a in t)a in e?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in e){if(i[l])for(r=0;r<i[l].length;r++){var u=i[l][r];s[i[l][r]]=n(u)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(n,i);return Object.keys(o).forEach((function(a){var s=o[a];if((0,t.isValidElement)(s)){var l=a in n,u=a in i,c=n[a],h=(0,t.isValidElement)(c)&&!c.props.in;!u||l&&!h?u||!l||h?u&&l&&(0,t.isValidElement)(c)&&(o[a]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:c.props.in,exit:X_(s,"exit",e),enter:X_(s,"enter",e)})):o[a]=(0,t.cloneElement)(s,{in:!1}):o[a]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:X_(s,"exit",e),enter:X_(s,"enter",e)})}})),o}var $_=Object.values||function(t){return Object.keys(t).map((function(e){return t[e]}))},K_=function(e){function n(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}z_(n,e);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var r,i,o=n.children,a=n.handleExited;return{children:n.firstRender?(r=e,i=a,H_(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:X_(e,"appear",r),enter:X_(e,"enter",r),exit:X_(e,"exit",r)})}))):Y_(e,o,a),firstRender:!1}},r.handleExited=function(t,e){var n=H_(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState((function(e){var n=fm({},e.children);return delete n[t.key],{children:n}})))},r.render=function(){var e=this.props,n=e.component,r=e.childFactory,i=vg(e,["component","childFactory"]),o=this.state.contextValue,a=$_(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?t.createElement(F_.Provider,{value:o},a):t.createElement(F_.Provider,{value:o},t.createElement(n,i,a))},n}(t.Component);K_.propTypes={},K_.defaultProps={component:"div",childFactory:function(t){return t}};var J_=K_;var Q_,tx,ex,nx,rx=Sg("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),ix=["center","classes","className"],ox=Wn(Q_||(Q_=Ud||(Ud=o(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),ax=Wn(tx||(tx=Vd||(Vd=o(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),sx=Wn(ex||(ex=qd||(qd=o(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),lx=w_("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ux=w_((function(e){var n=e.className,r=e.classes,o=e.pulsate,a=void 0!==o&&o,s=e.rippleX,l=e.rippleY,u=e.rippleSize,c=e.in,h=e.onExited,f=e.timeout,p=t.useState(!1),d=(0,i.Z)(p,2),m=d[0],g=d[1],v=_g(n,r.ripple,r.rippleVisible,a&&r.ripplePulsate),y={width:u,height:u,top:-u/2+l,left:-u/2+s},_=_g(r.child,m&&r.childLeaving,a&&r.childPulsate);return c||m||g(!0),t.useEffect((function(){if(!c&&null!=h){var t=setTimeout(h,f);return function(){clearTimeout(t)}}}),[h,c,f]),Eg.exports.jsx("span",{className:v,style:y,children:Eg.exports.jsx("span",{className:_})})}),{name:"MuiTouchRipple",slot:"Ripple"})(nx||(nx=Gd||(Gd=o(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),rx.rippleVisible,ox,550,(function(t){return t.theme.transitions.easing.easeInOut}),rx.ripplePulsate,(function(t){return t.theme.transitions.duration.shorter}),rx.child,rx.childLeaving,ax,550,(function(t){return t.theme.transitions.easing.easeInOut}),rx.childPulsate,sx,(function(t){return t.theme.transitions.easing.easeInOut})),cx=t.forwardRef((function(e,n){var r=__({props:e,name:"MuiTouchRipple"}),o=r.center,a=void 0!==o&&o,s=r.classes,l=void 0===s?{}:s,c=r.className,h=vg(r,ix),f=t.useState([]),p=(0,i.Z)(f,2),d=p[0],m=p[1],g=t.useRef(0),v=t.useRef(null);t.useEffect((function(){v.current&&(v.current(),v.current=null)}),[d]);var y=t.useRef(!1),_=t.useRef(null),x=t.useRef(null),b=t.useRef(null);t.useEffect((function(){return function(){clearTimeout(_.current)}}),[]);var w=t.useCallback((function(t){var e=t.pulsate,n=t.rippleX,r=t.rippleY,i=t.rippleSize,o=t.cb;m((function(t){return[].concat((0,u.Z)(t),[Eg.exports.jsx(ux,{classes:{ripple:_g(l.ripple,rx.ripple),rippleVisible:_g(l.rippleVisible,rx.rippleVisible),ripplePulsate:_g(l.ripplePulsate,rx.ripplePulsate),child:_g(l.child,rx.child),childLeaving:_g(l.childLeaving,rx.childLeaving),childPulsate:_g(l.childPulsate,rx.childPulsate)},timeout:550,pulsate:e,rippleX:n,rippleY:r,rippleSize:i},g.current)])})),g.current+=1,v.current=o}),[l]),k=t.useCallback((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.pulsate,i=void 0!==r&&r,o=e.center,s=void 0===o?a||e.pulsate:o,l=e.fakeElement,u=void 0!==l&&l;if("mousedown"===t.type&&y.current)y.current=!1;else{"touchstart"===t.type&&(y.current=!0);var c,h,f,p=u?null:b.current,d=p?p.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===t.clientX&&0===t.clientY||!t.clientX&&!t.touches)c=Math.round(d.width/2),h=Math.round(d.height/2);else{var m=t.touches?t.touches[0]:t,g=m.clientX,v=m.clientY;c=Math.round(g-d.left),h=Math.round(v-d.top)}if(s)(f=Math.sqrt((2*Math.pow(d.width,2)+Math.pow(d.height,2))/3))%2===0&&(f+=1);else{var k=2*Math.max(Math.abs((p?p.clientWidth:0)-c),c)+2,S=2*Math.max(Math.abs((p?p.clientHeight:0)-h),h)+2;f=Math.sqrt(Math.pow(k,2)+Math.pow(S,2))}t.touches?null===x.current&&(x.current=function(){w({pulsate:i,rippleX:c,rippleY:h,rippleSize:f,cb:n})},_.current=setTimeout((function(){x.current&&(x.current(),x.current=null)}),80)):w({pulsate:i,rippleX:c,rippleY:h,rippleSize:f,cb:n})}}),[a,w]),S=t.useCallback((function(){k({},{pulsate:!0})}),[k]),E=t.useCallback((function(t,e){if(clearTimeout(_.current),"touchend"===t.type&&x.current)return x.current(),x.current=null,void(_.current=setTimeout((function(){E(t,e)})));x.current=null,m((function(t){return t.length>0?t.slice(1):t})),v.current=e}),[]);return t.useImperativeHandle(n,(function(){return{pulsate:S,start:k,stop:E}}),[S,k,E]),Eg.exports.jsx(lx,fm({className:_g(l.root,rx.root,c),ref:b},h,{children:Eg.exports.jsx(J_,{component:null,exit:!0,children:d})}))})),hx=cx;function fx(t){return kg("MuiButtonBase",t)}var px=Sg("MuiButtonBase",["root","disabled","focusVisible"]),dx=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],mx=w_("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(t,e){return e.root}})((Wd={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,c.Z)(Wd,"&.".concat(px.disabled),{pointerEvents:"none",cursor:"default"}),(0,c.Z)(Wd,"@media print",{colorAdjust:"exact"}),Wd)),gx=t.forwardRef((function(e,n){var r=__({props:e,name:"MuiButtonBase"}),o=r.action,a=r.centerRipple,s=void 0!==a&&a,l=r.children,u=r.className,c=r.component,h=void 0===c?"button":c,f=r.disabled,p=void 0!==f&&f,d=r.disableRipple,m=void 0!==d&&d,g=r.disableTouchRipple,v=void 0!==g&&g,y=r.focusRipple,_=void 0!==y&&y,x=r.LinkComponent,b=void 0===x?"a":x,w=r.onBlur,k=r.onClick,S=r.onContextMenu,E=r.onDragLeave,I=r.onFocus,C=r.onFocusVisible,A=r.onKeyDown,P=r.onKeyUp,T=r.onMouseDown,M=r.onMouseLeave,L=r.onMouseUp,R=r.onTouchEnd,N=r.onTouchMove,O=r.onTouchStart,z=r.tabIndex,D=void 0===z?0:z,F=r.TouchRippleProps,B=r.touchRippleRef,j=r.type,Z=vg(r,dx),U=t.useRef(null),V=t.useRef(null),q=og(V,B),G=dg(),W=G.isFocusVisibleRef,H=G.onFocus,X=G.onBlur,Y=G.ref,$=t.useState(!1),K=(0,i.Z)($,2),J=K[0],Q=K[1];p&&J&&Q(!1),t.useImperativeHandle(o,(function(){return{focusVisible:function(){Q(!0),U.current.focus()}}}),[]);var tt=t.useState(!1),et=(0,i.Z)(tt,2),nt=et[0],rt=et[1];t.useEffect((function(){rt(!0)}),[]);var it=nt&&!m&&!p;function ot(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return ig((function(r){return e&&e(r),!n&&V.current&&V.current[t](r),!0}))}t.useEffect((function(){J&&_&&!m&&nt&&V.current.pulsate()}),[m,_,J,nt]);var at=ot("start",T),st=ot("stop",S),lt=ot("stop",E),ut=ot("stop",L),ct=ot("stop",(function(t){J&&t.preventDefault(),M&&M(t)})),ht=ot("start",O),ft=ot("stop",R),pt=ot("stop",N),dt=ot("stop",(function(t){X(t),!1===W.current&&Q(!1),w&&w(t)}),!1),mt=ig((function(t){U.current||(U.current=t.currentTarget),H(t),!0===W.current&&(Q(!0),C&&C(t)),I&&I(t)})),gt=function(){var t=U.current;return h&&"button"!==h&&!("A"===t.tagName&&t.href)},vt=t.useRef(!1),yt=ig((function(t){_&&!vt.current&&J&&V.current&&" "===t.key&&(vt.current=!0,V.current.stop(t,(function(){V.current.start(t)}))),t.target===t.currentTarget&&gt()&&" "===t.key&&t.preventDefault(),A&&A(t),t.target===t.currentTarget&&gt()&&"Enter"===t.key&&!p&&(t.preventDefault(),k&&k(t))})),_t=ig((function(t){_&&" "===t.key&&V.current&&J&&!t.defaultPrevented&&(vt.current=!1,V.current.stop(t,(function(){V.current.pulsate(t)}))),P&&P(t),k&&t.target===t.currentTarget&&gt()&&" "===t.key&&!t.defaultPrevented&&k(t)})),xt=h;"button"===xt&&(Z.href||Z.to)&&(xt=b);var bt={};"button"===xt?(bt.type=void 0===j?"button":j,bt.disabled=p):(Z.href||Z.to||(bt.role="button"),p&&(bt["aria-disabled"]=p));var wt=og(Y,U),kt=og(n,wt);var St=fm({},r,{centerRipple:s,component:h,disabled:p,disableRipple:m,disableTouchRipple:v,focusRipple:_,tabIndex:D,focusVisible:J}),Et=function(t){var e=t.disabled,n=t.focusVisible,r=t.focusVisibleClassName,i=bg({root:["root",e&&"disabled",n&&"focusVisible"]},fx,t.classes);return n&&r&&(i.root+=" ".concat(r)),i}(St);return Eg.exports.jsxs(mx,fm({as:xt,className:_g(Et.root,u),ownerState:St,onBlur:dt,onClick:k,onContextMenu:st,onFocus:mt,onKeyDown:yt,onKeyUp:_t,onMouseDown:at,onMouseLeave:ct,onMouseUp:ut,onDragLeave:lt,onTouchEnd:ft,onTouchMove:pt,onTouchStart:ht,ref:kt,tabIndex:p?-1:D,type:j},bt,Z,{children:[l,it?Eg.exports.jsx(hx,fm({ref:q,center:s},F)):null]}))})),vx=gx;function yx(t){return kg("MuiButton",t)}var _x=Sg("MuiButton",["root","text","textInherit","textPrimary","textSecondary","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","contained","containedInherit","containedPrimary","containedSecondary","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var xx=t.createContext({}),bx=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],wx=function(t){return fm({},"small"===t.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===t.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===t.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},kx=w_(vx,{shouldForwardProp:function(t){return x_(t)||"classes"===t},name:"MuiButton",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,e[n.variant],e["".concat(n.variant).concat(Xm(n.color))],e["size".concat(Xm(n.size))],e["".concat(n.variant,"Size").concat(Xm(n.size))],"inherit"===n.color&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})((function(t){var e,n=t.theme,r=t.ownerState;return fm({},n.typography.button,(e={minWidth:64,padding:"6px 16px",borderRadius:n.shape.borderRadius,transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short}),"&:hover":fm({textDecoration:"none",backgroundColor:Uy(n.palette.text.primary,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===r.variant&&"inherit"!==r.color&&{backgroundColor:Uy(n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===r.variant&&"inherit"!==r.color&&{border:"1px solid ".concat(n.palette[r.color].main),backgroundColor:Uy(n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===r.variant&&{backgroundColor:n.palette.grey.A100,boxShadow:n.shadows[4],"@media (hover: none)":{boxShadow:n.shadows[2],backgroundColor:n.palette.grey[300]}},"contained"===r.variant&&"inherit"!==r.color&&{backgroundColor:n.palette[r.color].dark,"@media (hover: none)":{backgroundColor:n.palette[r.color].main}}),"&:active":fm({},"contained"===r.variant&&{boxShadow:n.shadows[8]})},(0,c.Z)(e,"&.".concat(_x.focusVisible),fm({},"contained"===r.variant&&{boxShadow:n.shadows[6]})),(0,c.Z)(e,"&.".concat(_x.disabled),fm({color:n.palette.action.disabled},"outlined"===r.variant&&{border:"1px solid ".concat(n.palette.action.disabledBackground)},"outlined"===r.variant&&"secondary"===r.color&&{border:"1px solid ".concat(n.palette.action.disabled)},"contained"===r.variant&&{color:n.palette.action.disabled,boxShadow:n.shadows[0],backgroundColor:n.palette.action.disabledBackground})),e),"text"===r.variant&&{padding:"6px 8px"},"text"===r.variant&&"inherit"!==r.color&&{color:n.palette[r.color].main},"outlined"===r.variant&&{padding:"5px 15px",border:"1px solid ".concat("light"===n.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"outlined"===r.variant&&"inherit"!==r.color&&{color:n.palette[r.color].main,border:"1px solid ".concat(Uy(n.palette[r.color].main,.5))},"contained"===r.variant&&{color:n.palette.getContrastText(n.palette.grey[300]),backgroundColor:n.palette.grey[300],boxShadow:n.shadows[2]},"contained"===r.variant&&"inherit"!==r.color&&{color:n.palette[r.color].contrastText,backgroundColor:n.palette[r.color].main},"inherit"===r.color&&{color:"inherit",borderColor:"currentColor"},"small"===r.size&&"text"===r.variant&&{padding:"4px 5px",fontSize:n.typography.pxToRem(13)},"large"===r.size&&"text"===r.variant&&{padding:"8px 11px",fontSize:n.typography.pxToRem(15)},"small"===r.size&&"outlined"===r.variant&&{padding:"3px 9px",fontSize:n.typography.pxToRem(13)},"large"===r.size&&"outlined"===r.variant&&{padding:"7px 21px",fontSize:n.typography.pxToRem(15)},"small"===r.size&&"contained"===r.variant&&{padding:"4px 10px",fontSize:n.typography.pxToRem(13)},"large"===r.size&&"contained"===r.variant&&{padding:"8px 22px",fontSize:n.typography.pxToRem(15)},r.fullWidth&&{width:"100%"})}),(function(t){var e;return t.ownerState.disableElevation&&(e={boxShadow:"none","&:hover":{boxShadow:"none"}},(0,c.Z)(e,"&.".concat(_x.focusVisible),{boxShadow:"none"}),(0,c.Z)(e,"&:active",{boxShadow:"none"}),(0,c.Z)(e,"&.".concat(_x.disabled),{boxShadow:"none"}),e)})),Sx=w_("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(t,e){var n=t.ownerState;return[e.startIcon,e["iconSize".concat(Xm(n.size))]]}})((function(t){var e=t.ownerState;return fm({display:"inherit",marginRight:8,marginLeft:-4},"small"===e.size&&{marginLeft:-2},wx(e))})),Ex=w_("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(t,e){var n=t.ownerState;return[e.endIcon,e["iconSize".concat(Xm(n.size))]]}})((function(t){var e=t.ownerState;return fm({display:"inherit",marginRight:-4,marginLeft:8},"small"===e.size&&{marginRight:-2},wx(e))})),Ix=t.forwardRef((function(e,n){var r=t.useContext(xx),i=__({props:gg(r,e),name:"MuiButton"}),o=i.children,a=i.color,s=void 0===a?"primary":a,l=i.component,u=void 0===l?"button":l,c=i.className,h=i.disabled,f=void 0!==h&&h,p=i.disableElevation,d=void 0!==p&&p,m=i.disableFocusRipple,g=void 0!==m&&m,v=i.endIcon,y=i.focusVisibleClassName,_=i.fullWidth,x=void 0!==_&&_,b=i.size,w=void 0===b?"medium":b,k=i.startIcon,S=i.type,E=i.variant,I=void 0===E?"text":E,C=vg(i,bx),A=fm({},i,{color:s,component:u,disabled:f,disableElevation:d,disableFocusRipple:g,fullWidth:x,size:w,type:S,variant:I}),P=function(t){var e=t.color,n=t.disableElevation,r=t.fullWidth,i=t.size,o=t.variant,a=t.classes;return fm({},a,bg({root:["root",o,"".concat(o).concat(Xm(e)),"size".concat(Xm(i)),"".concat(o,"Size").concat(Xm(i)),"inherit"===e&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat(Xm(i))],endIcon:["endIcon","iconSize".concat(Xm(i))]},yx,a))}(A),T=k&&Eg.exports.jsx(Sx,{className:P.startIcon,ownerState:A,children:k}),M=v&&Eg.exports.jsx(Ex,{className:P.endIcon,ownerState:A,children:v});return Eg.exports.jsxs(kx,fm({ownerState:A,className:_g(c,r.className),component:u,disabled:f,focusRipple:!g,focusVisibleClassName:_g(P.focusVisible,y),ref:n,type:S},C,{classes:P,children:[T,o,M]}))})),Cx=Ix,Ax="mapbox-gl-draw_boxselect",Px="add",Tx="move",Mx="pointer",Lx="none",Rx="polygon",Nx="Feature",Ox="Polygon",zx="LineString",Dx="Point",Fx="Multi",Bx="MultiPoint",jx="MultiLineString",Zx="MultiPolygon",Ux="draw.create",Vx="draw.update",qx="draw.combine",Gx="draw.uncombine",Wx="move",Hx="change_coordinates",Xx="feature",Yx="midpoint",$x="vertex",Kx="true",Jx="false";function Qx(t){return function(e){var n=e.featureTarget;return!!n&&(!!n.properties&&n.properties.meta===t)}}function tb(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&(t.featureTarget.properties.active===Kx&&t.featureTarget.properties.meta===Xx))}function eb(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&(t.featureTarget.properties.active===Jx&&t.featureTarget.properties.meta===Xx))}function nb(t){return void 0===t.featureTarget}function rb(t){var e=t.featureTarget;return!!e&&(!!e.properties&&e.properties.meta===$x)}function ib(t){return!!t.originalEvent&&!0===t.originalEvent.shiftKey}var ob=function(t){setTimeout((function(){t.map&&t.map.doubleClickZoom&&t._ctx&&t._ctx.store&&t._ctx.store.getInitialConfigValue&&t._ctx.store.getInitialConfigValue("doubleClickZoom")&&t.map.doubleClickZoom.enable()}),0)},ab=function(t){setTimeout((function(){t.map&&t.map.doubleClickZoom&&t.map.doubleClickZoom.disable()}),0)};var sb=function(t,e,n,r){return{type:Nx,properties:{meta:$x,parent:t,coord_path:n,active:r?Kx:Jx},geometry:{type:Dx,coordinates:e}}},lb={onSetup:function(){console.log("Change mode: custom polygon");var t=this.newFeature({type:Nx,properties:{},geometry:{type:Ox,coordinates:[[]]}});return this.addFeature(t),this.clearSelectedFeatures(),ab(this),this.updateUIClasses({mouse:Px}),this.activateUIButton(Rx),this.setActionableState({trash:!0}),{polygon:t,currentVertexPosition:0}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&function(t,e){return!!t.lngLat&&t.lngLat.lng===e[0]&&t.lngLat.lat===e[1]}(e,t.polygon.coordinates[0][t.currentVertexPosition-1]))return this.changeMode("custom_select",{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:Px}),t.polygon.updateCoordinate("0.".concat(t.currentVertexPosition),e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++,t.polygon.updateCoordinate("0.".concat(t.currentVertexPosition),e.lngLat.lng,e.lngLat.lat),this.map.fire(Ux,{features:[t.polygon.toGeoJSON()]})},clickOnVertex:function(t){return this.changeMode("custom_select",{featureIds:[t.polygon.id]})},onMouseMove:function(t,e){t.polygon.updateCoordinate("0.".concat(t.currentVertexPosition),e.lngLat.lng,e.lngLat.lat),rb(e)&&this.updateUIClasses({mouse:Mx})}};lb.onTap=lb.onClick=function(t,e){return rb(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},lb.onKeyUp=function(t,e){!function(t){return 27===t.keyCode}(e)?function(t){return 13===t.keyCode}(e)&&this.changeMode("custom_select",{featureIds:[t.polygon.id]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode("custom_select"))},lb.onStop=function(t){this.updateUIClasses({mouse:Lx}),ob(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.removeCoordinate("0.".concat(t.currentVertexPosition)),t.polygon.isValid()?this.map.fire(Ux,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode("custom_select",{},{silent:!0})))},lb.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?Kx:Jx,!r)return n(e);if(0!==e.geometry.coordinates.length){var i=e.geometry.coordinates[0].length;if(!(i<3)){if(e.properties.meta=Xx,n(sb(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),i>3){var o=e.geometry.coordinates[0].length-3;n(sb(t.polygon.id,e.geometry.coordinates[0][o],"0.".concat(o),!1))}if(i<=4){var a=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:Nx,properties:e.properties,geometry:{coordinates:a,type:zx}}),3===i)return}return n(e)}}},lb.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode("custom_select")};var ub=cb;function cb(t,e){this.x=t,this.y=e}function hb(t,e){var n=e.getBoundingClientRect();return new ub(t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0))}cb.prototype={clone:function(){return new cb(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},cb.convert=function(t){return t instanceof cb?t:Array.isArray(t)?new cb(t[0],t[1]):t};var fb=function(t,e,n){var r=e.geometry.coordinates,i=n.geometry.coordinates;if(r[1]>85||r[1]<-85||i[1]>85||i[1]<-85)return null;var o={lng:(r[0]+i[0])/2,lat:(r[1]+i[1])/2};return{type:Nx,properties:{meta:Yx,parent:t,lng:o.lng,lat:o.lat,coord_path:n.properties.coord_path},geometry:{type:Dx,coordinates:[o.lng,o.lat]}}};function pb(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t.geometry,i=r.type,o=r.coordinates,a=t.properties&&t.properties.id,s=[];function l(t,n){var r="",i=null;t.forEach((function(t,o){var l=void 0!==n&&null!==n?"".concat(n,".").concat(o):String(o),c=sb(a,t,l,u(l));if(e.midpoints&&i){var h=fb(a,i,c);h&&s.push(h)}i=c;var f=JSON.stringify(t);r!==f&&s.push(c),0===o&&(r=f)}))}function u(t){return!!e.selectedPaths&&-1!==e.selectedPaths.indexOf(t)}function c(){var n=i.replace(Fx,"");o.forEach((function(r,i){var o={type:Nx,properties:t.properties,geometry:{type:n,coordinates:r}};s=s.concat(pb(o,e,i))}))}return i===Dx?s.push(sb(a,o,n,u(n))):i===Ox?o.forEach((function(t,e){l(t,null!==n?"".concat(n,".").concat(e):String(e))})):i===zx?l(o,n):0===i.indexOf(Fx)&&c(),s}function db(t){if(this._items={},this._nums={},this._length=t?t.length:0,t)for(var e=0,n=t.length;e<n;e++)this.add(t[e]),void 0!==t[e]&&("string"===typeof t[e]?this._items[t[e]]=e:this._nums[t[e]]=e)}db.prototype.add=function(t){return this.has(t)||(this._length++,"string"===typeof t?this._items[t]=this._length:this._nums[t]=this._length),this},db.prototype.delete=function(t){return!1===this.has(t)||(this._length--,delete this._items[t],delete this._nums[t]),this},db.prototype.has=function(t){return("string"===typeof t||"number"===typeof t)&&(void 0!==this._items[t]||void 0!==this._nums[t])},db.prototype.values=function(){var t=this,e=[];return Object.keys(this._items).forEach((function(n){e.push({k:n,v:t._items[n]})})),Object.keys(this._nums).forEach((function(n){e.push({k:JSON.parse(n),v:t._nums[n]})})),e.sort((function(t,e){return t.v-e.v})).map((function(t){return t.k}))},db.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var mb={exports:{}},gb=function(t){if(!t||!t.type)return null;var e=vb[t.type];if(!e)return null;if("geometry"===e)return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]};if("feature"===e)return{type:"FeatureCollection",features:[t]};if("featurecollection"===e)return t},vb={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};var yb=Object.freeze({__proto__:null,default:function t(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce((function(e,n){return e.concat(t(n))}),[]),e;case"Feature":return e.geometry?t(e.geometry).map((function(t){var n={type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:t};return void 0!==e.id&&(n.id=e.id),n})):[e];case"MultiPoint":return e.coordinates.map((function(t){return{type:"Point",coordinates:t}}));case"MultiPolygon":return e.coordinates.map((function(t){return{type:"Polygon",coordinates:t}}));case"MultiLineString":return e.coordinates.map((function(t){return{type:"LineString",coordinates:t}}));case"GeometryCollection":return e.geometries.map(t).reduce((function(t,e){return t.concat(e)}),[]);case"Point":case"Polygon":case"LineString":return[e]}}}),_b=gb,xb=om(yb),bb=function(t){return function t(e){if(Array.isArray(e)&&e.length&&"number"===typeof e[0])return[e];return e.reduce((function(e,n){return Array.isArray(n)&&Array.isArray(n[0])?e.concat(t(n)):(e.push(n),e)}),[])}(t)};xb instanceof Function||(xb=xb.default);var wb={exports:{}},kb=wb.exports=function(t){return new Sb(t)};function Sb(t){this.value=t}function Eb(t,e,n){var r=[],i=[],o=!0;return function t(a){var s=n?Ib(a):a,l={},u=!0,c={node:s,node_:a,path:[].concat(r),parent:i[i.length-1],parents:i,key:r.slice(-1)[0],isRoot:0===r.length,level:r.length,circular:null,update:function(t,e){c.isRoot||(c.parent.node[c.key]=t),c.node=t,e&&(u=!1)},delete:function(t){delete c.parent.node[c.key],t&&(u=!1)},remove:function(t){Pb(c.parent.node)?c.parent.node.splice(c.key,1):delete c.parent.node[c.key],t&&(u=!1)},keys:null,before:function(t){l.before=t},after:function(t){l.after=t},pre:function(t){l.pre=t},post:function(t){l.post=t},stop:function(){o=!1},block:function(){u=!1}};if(!o)return c;function h(){if("object"===typeof c.node&&null!==c.node){c.keys&&c.node_===c.node||(c.keys=Cb(c.node)),c.isLeaf=0==c.keys.length;for(var t=0;t<i.length;t++)if(i[t].node_===a){c.circular=i[t];break}}else c.isLeaf=!0,c.keys=null;c.notLeaf=!c.isLeaf,c.notRoot=!c.isRoot}h();var f=e.call(c,c.node);return void 0!==f&&c.update&&c.update(f),l.before&&l.before.call(c,c.node),u?("object"!=typeof c.node||null===c.node||c.circular||(i.push(c),h(),Tb(c.keys,(function(e,i){r.push(e),l.pre&&l.pre.call(c,c.node[e],e);var o=t(c.node[e]);n&&Mb.call(c.node,e)&&(c.node[e]=o.node),o.isLast=i==c.keys.length-1,o.isFirst=0==i,l.post&&l.post.call(c,o),r.pop()})),i.pop()),l.after&&l.after.call(c,c.node),c):c}(t).node}function Ib(t){if("object"===typeof t&&null!==t){var e;if(Pb(t))e=[];else if("[object Date]"===Ab(t))e=new Date(t.getTime?t.getTime():t);else if(function(t){return"[object RegExp]"===Ab(t)}(t))e=new RegExp(t);else if(function(t){return"[object Error]"===Ab(t)}(t))e={message:t.message};else if(function(t){return"[object Boolean]"===Ab(t)}(t))e=new Boolean(t);else if(function(t){return"[object Number]"===Ab(t)}(t))e=new Number(t);else if(function(t){return"[object String]"===Ab(t)}(t))e=new String(t);else if(Object.create&&Object.getPrototypeOf)e=Object.create(Object.getPrototypeOf(t));else if(t.constructor===Object)e={};else{var n=t.constructor&&t.constructor.prototype||t.__proto__||{},r=function(){};r.prototype=n,e=new r}return Tb(Cb(t),(function(n){e[n]=t[n]})),e}return t}Sb.prototype.get=function(t){for(var e=this.value,n=0;n<t.length;n++){var r=t[n];if(!e||!Mb.call(e,r)){e=void 0;break}e=e[r]}return e},Sb.prototype.has=function(t){for(var e=this.value,n=0;n<t.length;n++){var r=t[n];if(!e||!Mb.call(e,r))return!1;e=e[r]}return!0},Sb.prototype.set=function(t,e){for(var n=this.value,r=0;r<t.length-1;r++){var i=t[r];Mb.call(n,i)||(n[i]={}),n=n[i]}return n[t[r]]=e,e},Sb.prototype.map=function(t){return Eb(this.value,t,!0)},Sb.prototype.forEach=function(t){return this.value=Eb(this.value,t,!1),this.value},Sb.prototype.reduce=function(t,e){var n=1===arguments.length,r=n?this.value:e;return this.forEach((function(e){this.isRoot&&n||(r=t.call(this,r,e))})),r},Sb.prototype.paths=function(){var t=[];return this.forEach((function(e){t.push(this.path)})),t},Sb.prototype.nodes=function(){var t=[];return this.forEach((function(e){t.push(this.node)})),t},Sb.prototype.clone=function(){var t=[],e=[];return function n(r){for(var i=0;i<t.length;i++)if(t[i]===r)return e[i];if("object"===typeof r&&null!==r){var o=Ib(r);return t.push(r),e.push(o),Tb(Cb(r),(function(t){o[t]=n(r[t])})),t.pop(),e.pop(),o}return r}(this.value)};var Cb=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};function Ab(t){return Object.prototype.toString.call(t)}var Pb=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Tb=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)};Tb(Cb(Sb.prototype),(function(t){kb[t]=function(e){var n=[].slice.call(arguments,1),r=new Sb(e);return r[t].apply(r,n)}}));var Mb=Object.hasOwnProperty||function(t,e){return e in t},Lb=Rb;function Rb(t){if(!(this instanceof Rb))return new Rb(t);this._bbox=t||[1/0,1/0,-1/0,-1/0],this._valid=!!t}Rb.prototype.include=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[0]),this._bbox[3]=Math.max(this._bbox[3],t[1]),this},Rb.prototype.equals=function(t){var e;return e=t instanceof Rb?t.bbox():t,this._bbox[0]==e[0]&&this._bbox[1]==e[1]&&this._bbox[2]==e[2]&&this._bbox[3]==e[3]},Rb.prototype.center=function(t){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Rb.prototype.union=function(t){var e;return this._valid=!0,e=t instanceof Rb?t.bbox():t,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[2]),this._bbox[3]=Math.max(this._bbox[3],e[3]),this},Rb.prototype.bbox=function(){return this._valid?this._bbox:null},Rb.prototype.contains=function(t){if(!t)return this._fastContains();if(!this._valid)return null;var e=t[0],n=t[1];return this._bbox[0]<=e&&this._bbox[1]<=n&&this._bbox[2]>=e&&this._bbox[3]>=n},Rb.prototype.intersect=function(t){return this._valid?(e=t instanceof Rb?t.bbox():t,!(this._bbox[0]>e[2]||this._bbox[2]<e[0]||this._bbox[3]<e[1]||this._bbox[1]>e[3])):null;var e},Rb.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var t="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",t)},Rb.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Nb=function(t){if(!t)return[];var e=xb(_b(t)),n=[];return e.features.forEach((function(t){t.geometry&&(n=n.concat(bb(t.geometry.coordinates)))})),n},Ob=wb.exports,zb=Lb,Db={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Fb=Object.keys(Db);function Bb(t){for(var e=zb(),n=Nb(t),r=0;r<n.length;r++)e.include(n[r]);return e}mb.exports=function(t){return Bb(t).bbox()},mb.exports.polygon=function(t){return Bb(t).polygon()},mb.exports.bboxify=function(t){return Ob(t).map((function(t){t&&(Fb.some((function(e){return!!t[e]&&-1!==Db[e].indexOf(t.type)}))&&(t.bbox=Bb(t).bbox(),this.update(t)))}))};var jb=mb.exports,Zb=-90,Ub=function(t,e){var n=Zb,r=90,i=Zb,o=90,a=270,s=-270;t.forEach((function(t){var e=jb(t),l=e[1],u=e[3],c=e[0],h=e[2];l>n&&(n=l),u<r&&(r=u),u>i&&(i=u),l<o&&(o=l),c<a&&(a=c),h>s&&(s=h)}));var l=e;return n+l.lat>85&&(l.lat=85-n),i+l.lat>90&&(l.lat=90-i),r+l.lat<-85&&(l.lat=-85-r),o+l.lat<Zb&&(l.lat=Zb-o),a+l.lng<=-270&&(l.lng+=360*Math.ceil(Math.abs(l.lng)/360)),s+l.lng>=270&&(l.lng-=360*Math.ceil(Math.abs(l.lng)/360)),l},Vb=function(t,e){var n=Ub(t.map((function(t){return t.toGeoJSON()})),e);t.forEach((function(t){var e,r=t.getCoordinates(),i=function(t){var e={lng:t[0]+n.lng,lat:t[1]+n.lat};return[e.lng,e.lat]},o=function(t){return t.map((function(t){return i(t)}))};t.type===Dx?e=i(r):t.type===zx||t.type===Bx?e=r.map(i):t.type===Ox||t.type===jx?e=r.map(o):t.type===Zx&&(e=r.map((function(t){return t.map((function(t){return o(t)}))}))),t.incomingCoords(e)}))},qb={onSetup:function(t){var e=this;console.log("Change mode: custom select");var n={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:t.featureIds||[]};return this.setSelected(n.initiallySelectedFeatureIds.filter((function(t){return void 0!==e.getFeature(t)}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),n},fireUpdate:function(){this.map.fire(Vx,{action:Wx,features:this.getSelected().map((function(t){return t.toGeoJSON()}))})},fireActionable:function(){var t=this,e=this.getSelected(),n=e.filter((function(e){return t.isInstanceOf("MultiFeature",e)})),r=!1;if(e.length>1){r=!0;var i=e[0].type.replace("Multi","");e.forEach((function(t){t.type.replace("Multi","")!==i&&(r=!1)}))}var o=n.length>0,a=e.length>0;this.setActionableState({combineFeatures:r,uncombineFeatures:o,trash:a})},getUniqueIds:function(t){if(!t.length)return[];var e=t.map((function(t){return t.properties.id})).filter((function(t){return void 0!==t})).reduce((function(t,e){return t.add(e),t}),new db);return e.values()},stopExtendedInteractions:function(t){t.boxSelectElement&&(t.boxSelectElement.parentNode&&t.boxSelectElement.parentNode.removeChild(t.boxSelectElement),t.boxSelectElement=null),this.map.dragPan.enable(),t.boxSelecting=!1,t.canBoxSelect=!1,t.dragMoving=!1,t.canDragMove=!1},onStop:function(){ob(this)},onMouseMove:function(t){return this.stopExtendedInteractions(t)},onMouseOut:function(t){if(t.dragMoving)return this.fireUpdate()}};qb.onTap=qb.onClick=function(t,e){return nb(e)?this.clickAnywhere(t,e):Qx($x)(e)?this.clickOnVertex(t,e):function(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.meta===Xx}(e)?this.clickOnFeature(t,e):void 0},qb.clickAnywhere=function(t){var e=this,n=this.getSelectedIds();n.length&&(this.clearSelectedFeatures(),n.forEach((function(t){return e.doRender(t)}))),ob(this),this.stopExtendedInteractions(t)},qb.clickOnVertex=function(t,e){this.changeMode("custom_direct_select",{featureId:e.featureTarget.properties.parent,coordPath:e.featureTarget.properties.coord_path,startPos:e.lngLat}),this.updateUIClasses({mouse:Tx})},qb.startOnActiveFeature=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),this.doRender(e.featureTarget.properties.id),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},qb.clickOnFeature=function(t,e){var n=this;ab(this),this.stopExtendedInteractions(t);var r=ib(e),i=this.getSelectedIds(),o=e.featureTarget.properties.id,a=this.isSelected(o);if(!r&&a&&this.getFeature(o).type!==Dx)return this.changeMode("custom_direct_select",{featureId:o});a&&r?(this.deselect(o),this.updateUIClasses({mouse:Mx}),1===i.length&&ob(this)):!a&&r?(this.select(o),this.updateUIClasses({mouse:Tx})):a||r||(i.forEach((function(t){return n.doRender(t)})),this.setSelected(o),this.updateUIClasses({mouse:Tx})),this.doRender(o)},qb.onMouseDown=function(t,e){return tb(e)?this.startOnActiveFeature(t,e):this.drawConfig.boxSelect&&function(t){return!!t.originalEvent&&!!t.originalEvent.shiftKey&&0===t.originalEvent.button}(e)?this.startBoxSelect(t,e):void 0},qb.startBoxSelect=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),t.boxSelectStartLocation=hb(e.originalEvent,this.map.getContainer()),t.canBoxSelect=!0},qb.onTouchStart=function(t,e){if(tb(e))return this.startOnActiveFeature(t,e)},qb.onDrag=function(t,e){return t.canDragMove?this.dragMove(t,e):this.drawConfig.boxSelect&&t.canBoxSelect?this.whileBoxSelect(t,e):void 0},qb.whileBoxSelect=function(t,e){t.boxSelecting=!0,this.updateUIClasses({mouse:Px}),t.boxSelectElement||(t.boxSelectElement=document.createElement("div"),t.boxSelectElement.classList.add(Ax),this.map.getContainer().appendChild(t.boxSelectElement));var n=hb(e.originalEvent,this.map.getContainer()),r=Math.min(t.boxSelectStartLocation.x,n.x),i=Math.max(t.boxSelectStartLocation.x,n.x),o=Math.min(t.boxSelectStartLocation.y,n.y),a=Math.max(t.boxSelectStartLocation.y,n.y),s="translate(".concat(r,"px, ").concat(o,"px)");t.boxSelectElement.style.transform=s,t.boxSelectElement.style.WebkitTransform=s,t.boxSelectElement.style.width="".concat(i-r,"px"),t.boxSelectElement.style.height="".concat(a-o,"px")},qb.dragMove=function(t,e){t.dragMoving=!0,e.originalEvent.stopPropagation();var n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};Vb(this.getSelected(),n),t.dragMoveLocation=e.lngLat},qb.onMouseUp=function(t,e){var n=this;if(t.dragMoving)this.fireUpdate();else if(t.boxSelecting){var r=[t.boxSelectStartLocation,hb(e.originalEvent,this.map.getContainer())],i=this.featuresAt(null,r,"click"),o=this.getUniqueIds(i).filter((function(t){return!n.isSelected(t)}));o.length&&(this.select(o),o.forEach((function(t){return n.doRender(t)})),this.updateUIClasses({mouse:Tx}))}this.stopExtendedInteractions(t)},qb.toDisplayFeatures=function(t,e,n){e.properties.active=this.isSelected(e.properties.id)?Kx:Jx,n(e),this.fireActionable(),e.properties.active===Kx&&e.geometry.type!==Dx&&pb(e).forEach(n)},qb.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},qb.onCombineFeatures=function(){var t=this.getSelected();if(!(0===t.length||t.length<2)){for(var e=[],n=[],r=t[0].type.replace("Multi",""),i=0;i<t.length;i++){var o=t[i];if(o.type.replace("Multi","")!==r)return;o.type.includes("Multi")?o.getCoordinates().forEach((function(t){e.push(t)})):e.push(o.getCoordinates()),n.push(o.toGeoJSON())}if(n.length>1){var a=this.newFeature({type:Nx,properties:n[0].properties,geometry:{type:"Multi".concat(r),coordinates:e}});this.addFeature(a),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([a.id]),this.map.fire(qx,{createdFeatures:[a.toGeoJSON()],deletedFeatures:n})}this.fireActionable()}},qb.onUncombineFeatures=function(){var t=this,e=this.getSelected();if(0!==e.length){for(var n=[],r=[],i=function(i){var o=e[i];t.isInstanceOf("MultiFeature",o)&&(o.getFeatures().forEach((function(e){t.addFeature(e),e.properties=o.properties,n.push(e.toGeoJSON()),t.select([e.id])})),t.deleteFeature(o.id,{silent:!0}),r.push(o.toGeoJSON()))},o=0;o<e.length;o++)i(o);n.length>1&&this.map.fire(Gx,{createdFeatures:n,deletedFeatures:r}),this.fireActionable()}};var Gb=function(t,e,n,r){for(var i=[],o=t[0].toFixed(5),a=t[1].toFixed(5),s=0;s<n.length;s++)if(n[s].id!==e)for(var l=0;l<n[s].geometry.coordinates.length;l++)for(var u=0;u<n[s].geometry.coordinates[l].length;u++)o===n[s].geometry.coordinates[l][u][0].toFixed(5)&&a===n[s].geometry.coordinates[l][u][1].toFixed(5)&&i.push({featureId:n[s].id,coord_path:l+"."+u,lng:n[s].geometry.coordinates[l][u][0],lat:n[s].geometry.coordinates[l][u][1]});return i},Wb=function(t){for(var e=t._controls.length-1;e>=0;e--)if(t._controls[e].options&&"custom_select"===t._controls[e].options.defaultMode)return t._controls[e];return null},Hb=Qx($x),Xb=Qx(Yx),Yb={fireUpdate:function(){this.map.fire(Vx,{action:Hx,features:this.getSelected().map((function(t){return t.toGeoJSON()}))})},fireActionable:function(t){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:t.selectedCoordPaths.length>0})},startDragging:function(t,e){this.map.dragPan.disable(),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},stopDragging:function(t){this.map.dragPan.enable(),t.dragMoving=!1,t.canDragMove=!1,t.dragMoveLocation=null},onVertex:function(t,e){this.startDragging(t,e);var n=e.featureTarget.properties,r=t.selectedCoordPaths.indexOf(n.coord_path);ib(e)||-1!==r?ib(e)&&-1===r&&t.selectedCoordPaths.push(n.coord_path):t.selectedCoordPaths=[n.coord_path];var i=Wb(this.map).getAll(),o=Gb(e.featureTarget._geometry.coordinates,e.featureTarget.properties.parent,i.features,this.map);t.groupMove_vertices=o;for(var a=0;a<t.groupMove_vertices.length;a++)t.groupMove_vertices[a].feature=this.getFeature(t.groupMove_vertices[a].featureId);var s=this.pathsToCoordinates(t.featureId,t.selectedCoordPaths);this.setSelectedCoordinates(s)},onMidpoint:function(t,e){this.startDragging(t,e);var n=e.featureTarget.properties;t.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(),t.selectedCoordPaths=[n.coord_path]},pathsToCoordinates:function(t,e){return e.map((function(e){return{feature_id:t,coord_path:e}}))},onFeature:function(t,e){0===t.selectedCoordPaths.length?this.startDragging(t,e):this.stopDragging(t)},dragFeature:function(t,e,n){Vb(this.getSelected(),n),t.dragMoveLocation=e.lngLat},dragVertex:function(t,e,n){for(var r=t.selectedCoordPaths.map((function(e){return t.feature.getCoordinate(e)})),i=r.map((function(t){return{type:Nx,properties:{},geometry:{type:Dx,coordinates:t}}})),o=Ub(i,n),a=0;a<r.length;a++){var s=r[a];t.feature.updateCoordinate(t.selectedCoordPaths[a],s[0]+o.lng,s[1]+o.lat);for(var l=0;l<t.groupMove_vertices.length;l++){var u=t.groupMove_vertices[l].coord_path.split(".");if("undefined"!==typeof u[0]&&"undefined"!==typeof u[1]&&"undefined"!==typeof t.groupMove_vertices[l].feature.coordinates[u[0]]&&"undefined"!==typeof t.groupMove_vertices[l].feature.coordinates[u[0]][u[1]]){var c=t.groupMove_vertices[l].feature.coordinates[u[0]][u[1]];t.groupMove_vertices[l].feature.updateCoordinate(t.groupMove_vertices[l].coord_path,c[0]+o.lng,c[1]+o.lat)}}}},clickNoTarget:function(){this.changeMode("custom_select")},clickInactive:function(){this.changeMode("custom_select")},clickActiveFeature:function(t){t.selectedCoordPaths=[],this.clearSelectedCoordinates(),t.feature.changed()},onSetup:function(t){var e=t.featureId,n=this.getFeature(e);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===Dx)throw new TypeError("direct_select mode doesn't handle point features");var r={featureId:e,feature:n,dragMoveLocation:t.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:t.coordPath?[t.coordPath]:[],groupMove_vertices:t.groupMove_vertices?t.groupMove_vertices:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(e,r.selectedCoordPaths)),this.setSelected(e),ab(this),this.setActionableState({trash:!0}),r},onStop:function(){ob(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(t,e,n){t.featureId===e.properties.id?(e.properties.active=Kx,n(e),pb(e,{map:this.map,midpoints:!0,selectedPaths:t.selectedCoordPaths}).forEach(n)):(e.properties.active=Jx,n(e)),this.fireActionable(t)},onTrash:function(t){t.selectedCoordPaths.sort((function(t,e){return e.localeCompare(t,"en",{numeric:!0})})).forEach((function(e){return t.feature.removeCoordinate(e)})),this.fireUpdate(),t.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(t),!1===t.feature.isValid()&&(this.deleteFeature([t.featureId]),this.changeMode("custom_select",{}))},onMouseMove:function(t,e){var n=tb(e),r=Hb(e),i=0===t.selectedCoordPaths.length;n&&i||r&&!i?this.updateUIClasses({mouse:Tx}):this.updateUIClasses({mouse:Lx}),this.stopDragging(t)},onMouseOut:function(t){t.dragMoving&&this.fireUpdate()}};Yb.onTouchStart=Yb.onMouseDown=function(t,e){return Hb(e)?this.onVertex(t,e):tb(e)?this.onFeature(t,e):Xb(e)?this.onMidpoint(t,e):void 0},Yb.onDrag=function(t,e){if(!0===t.canDragMove){t.dragMoving=!0,e.originalEvent.stopPropagation();var n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};t.selectedCoordPaths.length>0?this.dragVertex(t,e,n):this.dragFeature(t,e,n),t.dragMoveLocation=e.lngLat}},Yb.onClick=function(t,e){return nb(e)?this.clickNoTarget(t,e):tb(e)?this.clickActiveFeature(t,e):eb(e)?this.clickInactive(t,e):void this.stopDragging(t)},Yb.onTap=function(t,e){return nb(e)?this.clickNoTarget(t,e):tb(e)?this.clickActiveFeature(t,e):eb(e)?this.clickInactive(t,e):void 0},Yb.onTouchEnd=Yb.onMouseUp=function(t){t.dragMoving&&this.fireUpdate(),this.stopDragging(t)};var $b=function(e){var n=(0,t.useRef)(),r=im({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),i=(0,t.useRef)(e.onChange),o=(0,t.useRef)(!1),a=(0,t.useState)(!1),s=a[0],l=a[1],u=(0,t.useState)(0),c=u[0],h=u[1],f=function(t){console.log("MlFeatureEditor mode change to "+t.mode)},p=function(){h(Math.random())};return(0,t.useEffect)((function(){var t;r.map&&!o.current&&(o.current=!0,r.map.map.style&&r.map.map.getSource("mapbox-gl-draw-cold")&&n.current&&(null===(t=n.current)||void 0===t||t.remove()),n.current=new(Xn())({displayControlsDefault:!1,defaultMode:e.mode||"custom_select",modes:Object.assign({custom_polygon:lb,custom_select:qb,custom_direct_select:Yb},Xn().modes)}),r.map.on("draw.modechange",f,r.componentId),r.map.addControl(n.current,"top-left",r.componentId),r.map.on("mouseup",p,r.componentId),l(!0))}),[r.map,e,o]),(0,t.useEffect)((function(){var t;n.current&&(null===(t=e.geojson)||void 0===t?void 0:t.geometry)&&n.current.set({type:"FeatureCollection",features:[e.geojson]})}),[e.geojson,s]),(0,t.useEffect)((function(){if(n.current&&c){var t=n.current.getAll();"function"===typeof i.current&&i.current(t.features)}}),[c]),(0,t.useEffect)((function(){e.mode&&n.current&&n.current.changeMode(e.mode)}),[e.mode]),t.createElement(t.Fragment,null)},Kb=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","hillshade","background"];function Jb(e){var n=im({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=(0,t.useRef)(""),i=(0,t.useRef)(""),o=(0,t.useRef)(""),a=(0,t.useState)(),s=a[0],l=a[1],u=(0,t.useRef)(!1),c=(0,t.useRef)(e.layerId||(e.idPrefix?e.idPrefix:"Layer-")+n.componentId),h=(0,t.useCallback)((function(){var t,a;!u.current&&n.map&&(u.current=!0,n.map.addLayer(Hd(Hd(Hd({},e.options),e.geojson?{source:{type:"geojson",data:e.geojson}}:{}),{id:c.current}),e.insertBeforeLayer?e.insertBeforeLayer:e.insertBeforeFirstSymbolLayer?n.map.firstSymbolLayer:void 0,n.componentId),l(n.map.map.getLayer(c.current)),"undefined"!==typeof e.onHover&&n.map.on("mousemove",c.current,e.onHover,n.componentId),"undefined"!==typeof e.onClick&&n.map.on("click",c.current,e.onClick,n.componentId),"undefined"!==typeof e.onLeave&&n.map.on("mouseleave",c.current,e.onLeave,n.componentId),i.current=JSON.stringify(null===(t=e.options)||void 0===t?void 0:t.paint),o.current=JSON.stringify(null===(a=e.options)||void 0===a?void 0:a.layout),r.current=e.options.type)}),[e,n.map]);(0,t.useEffect)((function(){if(n.map){if(u.current&&-1!==Kb.indexOf(e.options.type)&&r.current&&e.options.type!==r.current)f();else if(u.current&&(-1===Kb.indexOf(e.options.type)||-1!==Kb.indexOf(e.options.type)&&e.options.type===r.current))return;h()}}),[n.map,e.options,h]),(0,t.useEffect)((function(){var t,r,i,o;u.current&&(null===(r=null===(t=n.map)||void 0===t?void 0:t.map)||void 0===r?void 0:r.getSource(c.current))&&(null===(o=null===(i=n.map.map.getSource(c.current))||void 0===i?void 0:i.setData)||void 0===o||o.call(i,e.geojson))}),[e.geojson,n.map,e.options.type]),(0,t.useEffect)((function(){var t,r,a,s,l;if(n.map&&(null===(a=null===(r=null===(t=n.map)||void 0===t?void 0:t.map)||void 0===r?void 0:r.getLayer)||void 0===a?void 0:a.call(r,c.current))&&u.current){var h,f=JSON.stringify(e.options.layout);if(e.options.layout&&f!==o.current){var p=JSON.parse(o.current);for(h in e.options.layout)(null===(s=e.options.layout)||void 0===s?void 0:s[h])&&e.options.layout[h]!==p[h]&&n.map.map.setLayoutProperty(c.current,h,e.options.layout[h]);o.current=f}var d=JSON.stringify(e.options.paint);if(d!==i.current){var m=JSON.parse(i.current);for(h in e.options.paint)(null===(l=e.options.paint)||void 0===l?void 0:l[h])&&e.options.paint[h]!==m[h]&&n.map.map.setPaintProperty(c.current,h,e.options.paint[h]);i.current=d}}}),[e.options,n.map]);var f=function(){u.current=!1,n.cleanup()};return(0,t.useEffect)((function(){return function(){f()}}),[]),{map:n.map,layer:s,layerId:c.current,componentId:n.componentId,mapHook:n}}var Qb=function(e){return Jb({mapId:e.mapId,layerId:e.layerId||"MlFillExtrusionLayer-"+_(),options:{id:"",type:"fill-extrusion",source:e.sourceId||"openmaptiles","source-layer":e.sourceLayer||"building",minzoom:e.minZoom||14,paint:Hd({},e.paint)},insertBeforeFirstSymbolLayer:!0}),t.createElement(t.Fragment,null)};Qb.defaultProps={mapId:void 0,paint:{"fill-extrusion-color":"hsl(196, 61%, 83%)","fill-extrusion-height":{property:"render_height",type:"identity"},"fill-extrusion-base":{property:"render_min_height",type:"identity"},"fill-extrusion-opacity":1}};var tw=function(t,e){switch(t){case"fill":return(null===e||void 0===e?void 0:e.fill)?e.fill:{"fill-color":"rgba(10,240,256,0.6)"};case"line":return(null===e||void 0===e?void 0:e.line)?e.line:{"line-color":"rgb(203,211,2)","line-width":5};default:return(null===e||void 0===e?void 0:e.circle)?e.circle:{"circle-color":"rgba(10,240,256)","circle-stroke-color":"#fff","circle-stroke-width":2}}},ew={Position:"circle",Point:"circle",MultiPoint:"circle",LineString:"line",MultiLineString:"line",Polygon:"fill",MultiPolygon:"fill",GeometryCollection:"circle"},nw=function t(e){var n;return"Feature"===(null===e||void 0===e?void 0:e.type)?(null===ew||void 0===ew?void 0:ew[null===(n=null===e||void 0===e?void 0:e.geometry)||void 0===n?void 0:n.type])?ew[e.geometry.type]:"circle":"FeatureCollection"===(null===e||void 0===e?void 0:e.type)?e.features.length?t(e.features[0]):"circle":"fill"},rw=function(e){var n=e.type||nw(e.geojson);return Jb({mapId:e.mapId,layerId:e.layerId||"MlGeoJsonLayer-"+_(),geojson:e.geojson,options:Hd(Hd({paint:e.paint||tw(n,e.defaultPaintOverrides),layout:e.layout||{}},e.options),{type:n}),insertBeforeLayer:e.insertBeforeLayer,onHover:e.onHover,onClick:e.onClick,onLeave:e.onLeave}),t.createElement(t.Fragment,null)},iw={},ow=lm.exports;Object.defineProperty(iw,"__esModule",{value:!0});var aw=iw.default=void 0,sw=ow(um),lw=Eg.exports,uw=(0,sw.default)((0,lw.jsx)("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"}),"GpsFixed");aw=iw.default=uw;var cw=function(e){var n,r,i=im({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),o=(0,t.useState)(!1),a=o[0],s=o[1],l=(0,t.useState)(),u=l[0],c=l[1],h=(0,t.useState)(!1),f=h[0],p=h[1],d=(0,t.useState)(),m=d[0],g=d[1],v=(0,t.useState)(0),y=v[0],_=v[1],x=(0,t.useCallback)((function(t){if(i.map&&(i.map.map.flyTo({center:[t.coords.longitude,t.coords.latitude],zoom:18,speed:1,curve:1}),e.showUserLocation)){var n=Ba([t.coords.longitude,t.coords.latitude]);c(n),g(ps(n,t.coords.accuracy/1e3))}}),[i.map,e]),b=function(){console.log("Access of user location denied"),p(!0)},w=(0,t.useMemo)((function(){if(u){var t=function(t,e,n,r,i){void 0===i&&(i={});var o=i.steps||64,a=Ps(n),s=Ps(r),l=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(a===s)return Za(ps(t,e,i).geometry.coordinates[0],l);for(var u=a,c=a<s?s:s+360,h=u,f=[],p=0;h<c;)f.push(fs(t,e,h,i).geometry.coordinates),h=u+360*++p/o;return h>c&&f.push(fs(t,e,c,i).geometry.coordinates),Za(f,l)}(u,.02,y-15,y+15,{steps:65}),e=t;return e.geometry.coordinates.push(u.geometry.coordinates),e.geometry.coordinates.slice(0,0),e}}),[y,u]),k=function(t){_(-t.alpha)};return(0,t.useEffect)((function(){if(a){var t=k;return window.addEventListener("deviceorientation",t),function(){window.removeEventListener("deviceorientation",t)}}}),[a]),(0,t.useEffect)((function(){if(i.map&&a){var t=navigator.geolocation.watchPosition(x,b);return function(){navigator.geolocation.clearWatch(t)}}}),[i.map,a,x]),t.createElement(t.Fragment,null,a&&u&&t.createElement(rw,{geojson:m,type:"fill",paint:Hd({"fill-color":"#cbd300","fill-opacity":.3},e.accuracyPaint),insertBeforeLayer:e.insertBeforeLayer}),a&&w&&t.createElement(rw,{geojson:w,type:"fill",paint:{"fill-color":"#0000ff","fill-antialias":!1,"fill-opacity":.3},insertBeforeLayer:e.insertBeforeLayer}),a&&u&&t.createElement(rw,{geojson:u,type:"circle",paint:Hd({"circle-color":"#009ee0","circle-radius":5,"circle-stroke-color":"#fafaff","circle-stroke-width":1},e.circlePaint),insertBeforeLayer:e.insertBeforeLayer}),t.createElement(Oa,{sx:Hd({zIndex:1002,color:a?e.onColor:e.offColor},e.style),disabled:f,onClick:function(){s(!a)}}," ",t.createElement(aw,{sx:Hd({},(null===(n=e.style)||void 0===n?void 0:n.fontSize)?{fontSize:null===(r=e.style)||void 0===r?void 0:r.fontSize}:{})})," "))};cw.defaultProps={mapId:void 0,style:{minWidth:"30px",minHeight:"30px",width:"30px",height:"30px",backgroundColor:"#414141",borderRadius:"23%",margin:.15,fontSize:"1.3em",":hover":{backgroundColor:"#515151",color:"#ececec"}},onColor:"#ececec",offColor:"#666",showAccuracyCircle:!0,showUserLocation:!0,showOrientation:!0};function hw(t){return kg("MuiButtonGroup",t)}var fw=Sg("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary"]),pw=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],dw=w_("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[(0,c.Z)({},"& .".concat(fw.grouped),e.grouped),(0,c.Z)({},"& .".concat(fw.grouped),e["grouped".concat(Xm(n.orientation))]),(0,c.Z)({},"& .".concat(fw.grouped),e["grouped".concat(Xm(n.variant))]),(0,c.Z)({},"& .".concat(fw.grouped),e["grouped".concat(Xm(n.variant)).concat(Xm(n.orientation))]),(0,c.Z)({},"& .".concat(fw.grouped),e["grouped".concat(Xm(n.variant)).concat(Xm(n.color))]),e.root,e[n.variant],!0===n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth,"vertical"===n.orientation&&e.vertical]}})((function(t){var e=t.theme,n=t.ownerState;return fm({display:"inline-flex",borderRadius:e.shape.borderRadius},"contained"===n.variant&&{boxShadow:e.shadows[2]},n.disableElevation&&{boxShadow:"none"},n.fullWidth&&{width:"100%"},"vertical"===n.orientation&&{flexDirection:"column"},(0,c.Z)({},"& .".concat(fw.grouped),fm({minWidth:40,"&:not(:first-of-type)":fm({},"horizontal"===n.orientation&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},"vertical"===n.orientation&&{borderTopRightRadius:0,borderTopLeftRadius:0},"outlined"===n.variant&&"horizontal"===n.orientation&&{marginLeft:-1},"outlined"===n.variant&&"vertical"===n.orientation&&{marginTop:-1}),"&:not(:last-of-type)":fm({},"horizontal"===n.orientation&&{borderTopRightRadius:0,borderBottomRightRadius:0},"vertical"===n.orientation&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},"text"===n.variant&&"horizontal"===n.orientation&&{borderRight:"1px solid ".concat("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"text"===n.variant&&"vertical"===n.orientation&&{borderBottom:"1px solid ".concat("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"text"===n.variant&&"inherit"!==n.color&&{borderColor:Uy(e.palette[n.color].main,.5)},"outlined"===n.variant&&"horizontal"===n.orientation&&{borderRightColor:"transparent"},"outlined"===n.variant&&"vertical"===n.orientation&&{borderBottomColor:"transparent"},"contained"===n.variant&&"horizontal"===n.orientation&&(0,c.Z)({borderRight:"1px solid ".concat(e.palette.grey[400])},"&.".concat(fw.disabled),{borderRight:"1px solid ".concat(e.palette.action.disabled)}),"contained"===n.variant&&"vertical"===n.orientation&&(0,c.Z)({borderBottom:"1px solid ".concat(e.palette.grey[400])},"&.".concat(fw.disabled),{borderBottom:"1px solid ".concat(e.palette.action.disabled)}),"contained"===n.variant&&"inherit"!==n.color&&{borderColor:e.palette[n.color].dark},{"&:hover":fm({},"outlined"===n.variant&&"horizontal"===n.orientation&&{borderRightColor:"currentColor"},"outlined"===n.variant&&"vertical"===n.orientation&&{borderBottomColor:"currentColor"})}),"&:hover":fm({},"contained"===n.variant&&{boxShadow:"none"})},"contained"===n.variant&&{boxShadow:"none"})))})),mw=t.forwardRef((function(e,n){var r=__({props:e,name:"MuiButtonGroup"}),i=r.children,o=r.className,a=r.color,s=void 0===a?"primary":a,l=r.component,u=void 0===l?"div":l,c=r.disabled,h=void 0!==c&&c,f=r.disableElevation,p=void 0!==f&&f,d=r.disableFocusRipple,m=void 0!==d&&d,g=r.disableRipple,v=void 0!==g&&g,y=r.fullWidth,_=void 0!==y&&y,x=r.orientation,b=void 0===x?"horizontal":x,w=r.size,k=void 0===w?"medium":w,S=r.variant,E=void 0===S?"outlined":S,I=vg(r,pw),C=fm({},r,{color:s,component:u,disabled:h,disableElevation:p,disableFocusRipple:m,disableRipple:v,fullWidth:_,orientation:b,size:k,variant:E}),A=function(t){var e=t.classes,n=t.color,r=t.disabled,i=t.disableElevation,o=t.fullWidth,a=t.orientation,s=t.variant;return bg({root:["root",s,"vertical"===a&&"vertical",o&&"fullWidth",i&&"disableElevation"],grouped:["grouped","grouped".concat(Xm(a)),"grouped".concat(Xm(s)),"grouped".concat(Xm(s)).concat(Xm(a)),"grouped".concat(Xm(s)).concat(Xm(n)),r&&"disabled"]},hw,e)}(C),P=t.useMemo((function(){return{className:A.grouped,color:s,disabled:h,disableElevation:p,disableFocusRipple:m,disableRipple:v,fullWidth:_,size:k,variant:E}}),[s,h,p,m,v,_,k,E,A.grouped]);return Eg.exports.jsx(dw,fm({as:u,role:"group",className:_g(A.root,o),ref:n,ownerState:C},I,{children:Eg.exports.jsx(xx.Provider,{value:P,children:i})}))})),gw=mw,vw={},yw=lm.exports;Object.defineProperty(vw,"__esModule",{value:!0});var _w=vw.default=void 0,xw=yw(um),bw=Eg.exports,ww=(0,xw.default)((0,bw.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"ControlPoint");_w=vw.default=ww;var kw={},Sw=lm.exports;Object.defineProperty(kw,"__esModule",{value:!0});var Ew=kw.default=void 0,Iw=Sw(um),Cw=Eg.exports,Aw=(0,Iw.default)((0,Cw.jsx)("path",{d:"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"RemoveCircleOutline");function Pw(){return Pw=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pw.apply(this,arguments)}Ew=kw.default=Aw;var Tw,Mw=function(e){return t.createElement("svg",Pw({width:"39.675098mm",height:"104.27064mm",viewBox:"0 0 39.675098 104.27064"},e),t.createElement("g",{transform:"translate(-86.019554,-58.032633)"},t.createElement("path",{style:{strokeWidth:.744756},d:"m 442.74023,219.33594 -117.62695,32.32422 54.71094,31.12304 c -21.99397,41.5931 -32.8507,84.88283 -38.33008,127.89649 -6.86182,50.94051 -5.95715,103.99765 20.23828,155.46484 5.97246,11.72776 13.65817,23.59773 24.38867,35.06641 2.6597,2.84073 5.65602,5.75455 9.12891,8.68164 0.87557,0.7378 1.85363,1.52609 2.95117,2.35547 0.29669,0.22563 0.63616,0.47742 1.02149,0.75586 l 0.58203,0.42578 34.57812,-15.12305 -0.33789,-0.2207 c -0.0265,-0.0151 -0.0842,-0.0587 -0.18359,-0.13086 -0.46723,-0.34885 -0.9819,-0.76796 -1.56055,-1.25 -2.29757,-1.91343 -4.46539,-4.04643 -6.64062,-6.33985 -8.80052,-9.27114 -15.30333,-19.4993 -20.83985,-30.13867 -24.42289,-46.90715 -24.77465,-97.03535 -18.58008,-146.68164 4.94388,-37.37493 13.65299,-74.4847 30.20508,-109.92969 l 58.6211,33.34766 z",transform:"scale(0.26458333)"})))};function Lw(){return Lw=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lw.apply(this,arguments)}var Rw,Nw=function(e){return t.createElement("svg",Lw({width:"39.675098mm",height:"104.27064mm",viewBox:"0 0 39.675098 104.27064"},e),Tw||(Tw=t.createElement("g",{transform:"translate(-86.019554,-58.032633)"},t.createElement("path",{d:"m 94.572523,58.032633 31.122127,8.55245 -14.4756,8.234638 c 5.81924,11.004841 8.69175,22.458582 10.1415,33.839279 1.81552,13.47801 1.57616,27.51604 -5.35471,41.13341 -1.58021,3.10296 -3.61373,6.24356 -6.45284,9.27798 -0.70371,0.75161 -1.49649,1.52256 -2.41535,2.29702 -0.23167,0.19521 -0.49044,0.40378 -0.78083,0.62322 -0.0785,0.0597 -0.16832,0.12632 -0.27027,0.19999 l -0.154,0.11265 -9.148793,-4.00131 0.0894,-0.0584 c 0.007,-0.004 0.02228,-0.0155 0.04857,-0.0346 0.123621,-0.0923 0.259794,-0.20319 0.412895,-0.33073 0.607899,-0.50626 1.181468,-1.07062 1.756997,-1.67742 2.328481,-2.45299 4.049011,-5.15919 5.513881,-7.97419 6.46189,-12.41085 6.55496,-25.67394 4.91598,-38.80952 -1.30807,-9.888781 -3.61235,-19.707408 -7.99176,-29.085561 l -15.510171,8.823235 z"}))))};function Ow(){return Ow=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ow.apply(this,arguments)}var zw,Dw,Fw,Bw=function(e){return t.createElement("svg",Ow({width:"75.967445mm",height:"234.71339mm",viewBox:"0 0 75.967445 234.71339"},e),Rw||(Rw=t.createElement("g",{transform:"translate(-76.705281,-29.77268)"},t.createElement("path",{d:"m 114.68901,29.77268 37.98372,117.3567 H 76.705281 Z"}),t.createElement("path",{d:"m 114.68901,264.48608 37.98372,-117.3567 H 76.705281 Z"}))))},jw=Fn.Z.div(zw||(zw=Jd(["\n  width: 40%;\n  display: flex;\n  align-items: center;\n\n  &:hover {\n    cursor: pointer;\n  }\n  path {\n    filter: drop-shadow(0px 0px 15px rgba(0, 0, 0, 0.2));\n  }\n  &:hover path {\n    filter: drop-shadow(0px 0px 13px rgba(255, 255, 255, 0.1));\n  }\n  path:nth-of-type(2) {\n    fill: #343434;\n  }\n  &:hover path:nth-of-type(2) {\n    fill: #434343;\n  }\n  path:nth-of-type(1) {\n    fill: #e90318;\n  }\n  &:hover path:nth-of-type(1) {\n    fill: #fb4052;\n  }\n"],["\n  width: 40%;\n  display: flex;\n  align-items: center;\n\n  &:hover {\n    cursor: pointer;\n  }\n  path {\n    filter: drop-shadow(0px 0px 15px rgba(0, 0, 0, 0.2));\n  }\n  &:hover path {\n    filter: drop-shadow(0px 0px 13px rgba(255, 255, 255, 0.1));\n  }\n  path:nth-of-type(2) {\n    fill: #343434;\n  }\n  &:hover path:nth-of-type(2) {\n    fill: #434343;\n  }\n  path:nth-of-type(1) {\n    fill: #e90318;\n  }\n  &:hover path:nth-of-type(1) {\n    fill: #fb4052;\n  }\n"]))),Zw=Fn.Z.div(Dw||(Dw=Jd(["\n  pointer-events: none;\n  display: flex;\n  z-index: 1002;\n  position: absolute;\n  align-items: center;\n\n  margin-left: -30%;\n  path:nth-of-type(2) {\n  }\n  svg g {\n    transform: translate(-76.7053, -29.7727) scale(2, 1);\n  }\n  svg {\n    z-index: 9990;\n    height: 150px;\n    width: 200px;\n  }\n"],["\n  pointer-events: none;\n  display: flex;\n  z-index: 1002;\n  position: absolute;\n  align-items: center;\n\n  margin-left: -30%;\n  path:nth-of-type(2) {\n  }\n  svg g {\n    transform: translate(-76.7053, -29.7727) scale(2, 1);\n  }\n  svg {\n    z-index: 9990;\n    height: 150px;\n    width: 200px;\n  }\n"]))),Uw=Fn.Z.div(Fw||(Fw=Jd(["\n  width: 30%;\n  margin-top: 14px;\n  z-index: 999;\n  display: flex;\n\n  svg:hover {\n    cursor: pointer;\n  }\n  svg:hover path {\n    fill: #ececec;\n    filter: drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.1));\n  }\n  path {\n    fill: #bbb;\n  }\n  svg {\n    transform: scale(0.6);\n    z-index: 9990;\n    height: 172px;\n  }\n"],["\n  width: 30%;\n  margin-top: 14px;\n  z-index: 999;\n  display: flex;\n\n  svg:hover {\n    cursor: pointer;\n  }\n  svg:hover path {\n    fill: #ececec;\n    filter: drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.1));\n  }\n  path {\n    fill: #bbb;\n  }\n  svg {\n    transform: scale(0.6);\n    z-index: 9990;\n    height: 172px;\n  }\n"]))),Vw=function(e){var n=im({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=(0,t.useState)(0),i=r[0],o=r[1];return(0,t.useEffect)((function(){if(n.map){var t=function(){var t,e;(null===(e=null===(t=n.map)||void 0===t?void 0:t.map)||void 0===e?void 0:e.getBearing)&&o(Math.round(n.map.map.getBearing()))};return n.map.on("rotate",t,n.componentId),t(),function(){var e;null===(e=n.map)||void 0===e||e.map.off("rotate",t)}}}),[n.map,e.mapId]),t.createElement(t.Fragment,null,t.createElement("div",{className:Uc(Hd({zIndex:1e3,top:0,position:"absolute"},e.style))},t.createElement("div",{className:Uc(Hd({position:"absolute",border:"10px solid #bcbcbc",backgroundColor:"#717171",background:"radial-gradient(#717171, #414141)",height:"200px",width:"200px",borderRadius:"50%",display:"flex",justifyContent:"center",transform:"scale(0.2) translateX(-448px) translateY(-448px)"},e.backgroundStyle))},t.createElement(Uw,{className:Uc(Hd({},e.rotateRightStyle))},t.createElement(Mw,{onClick:function(){if(n.map){var t=Math.round(n.map.map.getBearing()),e=Math.round(t%90);t>0&&(e=90-e),0===e&&(e=90),n.map.map.setBearing(Math.round(t+Math.abs(e)))}}})),t.createElement(jw,{className:Uc(Hd({},e.needleStyle)),onClick:function(){var t;null===(t=n.map)||void 0===t||t.map.setBearing(0)}},t.createElement(Zw,{style:{transform:"rotate("+(i>0?"-"+i:-1*i)+"deg)"}},t.createElement(Bw,null))),t.createElement(Uw,{className:Uc(Hd({},e.rotateLeftStyle))},t.createElement(Nw,{onClick:function(){if(n.map){var t=Math.round(n.map.map.getBearing()),e=Math.round(t%90);t<0&&(e=90+e),0===e&&(e=90),n.map.map.setBearing(Math.round(t-Math.abs(e)))}}})))))};function qw(e,n,r,o,a){var s="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,l=t.useState((function(){return a&&s?r(e).matches:o?o(e).matches:n})),u=(0,i.Z)(l,2),c=u[0],h=u[1];return eg((function(){var t=!0;if(s){var n=r(e),i=function(){t&&h(n.matches)};return i(),n.addListener(i),function(){t=!1,n.removeListener(i)}}}),[e,r,s]),c}Vw.propTypes={idPrefix:b().string,style:b().object,backgroundStyle:b().object,needleStyle:b().object,rotateRightStyle:b().object,rotateLeftStyle:b().object};var Gw=e.useSyncExternalStore;function Ww(e,n,r,o){var a=t.useCallback((function(){return n}),[n]),s=t.useMemo((function(){if(null!==o){var t=o(e).matches;return function(){return t}}return a}),[a,e,o]),l=t.useMemo((function(){if(null===r)return[a,function(){return function(){}}];var t=r(e);return[function(){return t.matches},function(e){return t.addListener(e),function(){t.removeListener(e)}}]}),[a,r,e]),u=(0,i.Z)(l,2),c=u[0],h=u[1];return Gw(h,c,s)}function Hw(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=wy(),r="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,i=Dy({name:"MuiUseMediaQuery",props:e,theme:n}),o=i.defaultMatches,a=void 0!==o&&o,s=i.matchMedia,l=void 0===s?r?window.matchMedia:null:s,u=i.ssrMatchMedia,c=void 0===u?null:u,h=i.noSsr;var f="function"===typeof t?t(n):t;f=f.replace(/^@media( ?)/m,"");var p=void 0!==Gw?Ww:qw,d=p(f,a,l,c,h);return d}var Xw=function(e){var n=im({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=(0,t.useState)(0),i=r[0],o=r[1],a=Hw("(max-width:900px)"),s={minWidth:"20px",minHeight:"20px",width:a?"50px":"30px",height:a?"50px":"30px",backgroundColor:"#414141",borderRadius:"23%",margin:.15,fontSize:a?"1.5em":"1.2em",":hover":{backgroundColor:"#515151"},color:"#ececec"};(0,t.useEffect)((function(){n.map&&(n.map.on("pitchend",(function(){n.map&&o(n.map.map.getPitch())}),n.componentId),o(n.map.map.getPitch()))}),[n.map,e.mapId]);return t.createElement("div",{style:{zIndex:501,position:"absolute",right:a?"15px":"5px",bottom:a?"40px":"20px",display:"flex",flexDirection:"column"}},t.createElement(Vw,{style:{width:"31px",position:"relative",height:a?"55px":"45px",marginLeft:a?"3px":"-5px",transform:a?"scale(1.6)":"scale(1)"},backgroundStyle:{boxShadow:"0px 0px 18px rgba(0,0,0,.5)"}}),t.createElement(Cx,{sx:Hd(Hd({},s),{fontSize:a?"1.4em":"1em",fontWeight:600}),onClick:function(){if(n.map){var t=60;0!==n.map.map.getPitch()&&(t=0),n.map.map.easeTo({pitch:t})}}},i?"2D":"3D"),t.createElement(cw,{style:Hd({},function(t){return Xd(t,["color"])}(s))}),t.createElement(gw,{orientation:"vertical",sx:{width:"50px",border:"none",Button:{minWidth:"20px !important",border:"none",padding:0},"Button:hover":{border:"none"}}},t.createElement(Cx,{sx:Hd(Hd({},s),{color:"#ececec"}),onClick:function(){n.map&&n.map.map.transform._zoom+.5<=n.map.map.transform._maxZoom&&n.map.map.easeTo({zoom:n.map.map.transform._zoom+.5})}},t.createElement(_w,{sx:{fontSize:a?"1.5em":"1.2em"}})),t.createElement(Cx,{sx:Hd(Hd({},s),{color:"#ececec"}),onClick:function(){n.map&&n.map.map.transform._zoom-.5>=n.map.map.transform._minZoom&&n.map.map.easeTo({zoom:n.map.map.transform._zoom-.5})}},t.createElement(Ew,{sx:{fontSize:a?"1.5em":"1.2em"}}))))},Yw=function(e){return Jb({idPrefix:"MlLayer-",layerId:e.layerId,mapId:e.mapId,options:Hd({type:"background",paint:{"background-color":"rgba(0,0,0,0)"}},e.options),insertBeforeLayer:e.insertBeforeLayer}),t.createElement(t.Fragment,null)};b().string,b().object,b().object,b().string;var $w={visible:!0,urlParameters:{bbox:"{bbox-epsg-3857}",format:"image/png",service:"WMS",version:"1.1.1",request:"GetMap",srs:"EPSG:3857",width:256,height:256,styles:""},attribution:"",sourceOptions:{minZoom:0,maxZoom:20},layerOptions:{minZoom:0,maxZoom:20}},Kw=function(e){var n=im({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=(0,t.useRef)(!1),i=(0,t.useRef)(e.layerId||"MlWmsLayer-"+n.componentId);return(0,t.useEffect)((function(){if(n.map&&!r.current){var t;r.current=!0;var o=e.url;-1!==e.url.indexOf("?")&&(o=(t=e.url.split("?"))[0]);var a=new URLSearchParams(null===t||void 0===t?void 0:t[1]),s=Hd(Hd(Hd({},$w.urlParameters),Object.fromEntries(a)),e.urlParameters),l=new URLSearchParams(s),u=decodeURIComponent(l.toString())+"".replace(/%2F/g,"/").replace(/%3A/g,":");n.map.addSource(i.current,Hd({type:"raster",tiles:[o+"?"+u],tileSize:s.width,attribution:e.attribution},e.sourceOptions),n.componentId),n.map.addLayer(Hd({id:i.current,type:"raster",source:i.current},e.layerOptions),e.insertBeforeLayer,n.componentId),e.visible||n.map.map.setLayoutProperty(i.current,"visibility","none")}}),[n,e]),(0,t.useEffect)((function(){n.map&&r.current&&(e.visible?n.map.map.setLayoutProperty(i.current,"visibility","visible"):n.map.map.setLayoutProperty(i.current,"visibility","none"))}),[e.visible,n.map]),t.createElement(t.Fragment,null)};Kw.defaultProps=Hd({},$w),Kw.propTypes={url:b().string.isRequired,urlParameters:b().shape({layers:b().string.isRequired,bbox:b().string,format:b().string,service:b().string,version:b().string,request:b().string,srs:b().string,width:b().number,height:b().number}),mapId:b().string,attribution:b().string,layerOptions:b().object,sourceOptions:b().object,insertBeforeLayer:b().string,visible:b().bool};function Jw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Qw(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jw(Object(n),!0).forEach((function(e){ek(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jw(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function tk(t){return tk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tk(t)}function ek(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nk(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||ik(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rk(t){return function(t){if(Array.isArray(t))return ok(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ik(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ik(t,e){if(t){if("string"===typeof t)return ok(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ok(t,e):void 0}}function ok(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ak(){return Sy(y_)}function sk(t){return kg("MuiPaper",t)}Sg("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var lk=["className","component","elevation","square","variant"],uk=function(t){return((t<1?5.11916*Math.pow(t,2):4.5*Math.log(t+1)+2)/100).toFixed(2)},ck=w_("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,e[n.variant],!n.square&&e.rounded,"elevation"===n.variant&&e["elevation".concat(n.elevation)]]}})((function(t){var e=t.theme,n=t.ownerState;return fm({backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},!n.square&&{borderRadius:e.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat(e.palette.divider)},"elevation"===n.variant&&fm({boxShadow:e.shadows[n.elevation]},"dark"===e.palette.mode&&{backgroundImage:"linear-gradient(".concat(Uy("#fff",uk(n.elevation)),", ").concat(Uy("#fff",uk(n.elevation)),")")}))})),hk=t.forwardRef((function(t,e){var n=__({props:t,name:"MuiPaper"}),r=n.className,i=n.component,o=void 0===i?"div":i,a=n.elevation,s=void 0===a?1:a,l=n.square,u=void 0!==l&&l,c=n.variant,h=void 0===c?"elevation":c,f=vg(n,lk),p=fm({},n,{component:o,elevation:s,square:u,variant:h}),d=function(t){var e=t.square,n=t.elevation,r=t.variant,i=t.classes;return bg({root:["root",r,!e&&"rounded","elevation"===r&&"elevation".concat(n)]},sk,i)}(p);return Eg.exports.jsx(ck,fm({as:o,ownerState:p,className:_g(d.root,r),ref:e},f))})),fk=hk,pk=function(e){var n=im({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=rm({mapId:e.mapId,watch:{viewport:!0}}),i=(0,t.useRef)(null),o=(0,t.useState)({width:"400px",height:"500px"}),a=o[0],s=o[1],l=(0,t.useState)(),u=l[0],c=l[1];return(0,t.useEffect)((function(){var t,r;if(null===(r=null===(t=n.map)||void 0===t?void 0:t.map)||void 0===r?void 0:r.project){var i=n.map.map.project([e.lng,e.lat]);c(i)}}),[n.map,e.lng,e.lat,r.viewport]),(0,t.useEffect)((function(){var t,r,o,a,l,u,c,h,f,p,d,m;if(n.map&&(null===(a=null===(o=null===(r=null===(t=i.current)||void 0===t?void 0:t.contentWindow)||void 0===r?void 0:r.document)||void 0===o?void 0:o.body)||void 0===a?void 0:a.scrollHeight)){var g=n.map.map._container.clientHeight-n.map.map.project([e.lng,e.lat]).y,v=null===(h=null===(c=null===(u=null===(l=i.current)||void 0===l?void 0:l.contentWindow)||void 0===u?void 0:u.document)||void 0===c?void 0:c.body)||void 0===h?void 0:h.scrollHeight,y=null===(m=null===(d=null===(p=null===(f=i.current)||void 0===f?void 0:f.contentWindow)||void 0===p?void 0:p.document)||void 0===d?void 0:d.body)||void 0===m?void 0:m.scrollWidth;s({width:y+"px",height:(g<v?g:v)+"px"})}}),[e.lng,e.lat,e.content]),t.createElement(t.Fragment,null,t.createElement(rw,{geojson:{type:"Feature",geometry:{type:"Point",coordinates:[e.lng,e.lat]},properties:{}},paint:{"circle-radius":14,"circle-color":"rgba(40,200,20,0.5)"},type:"circle",mapId:e.mapId}),u&&t.createElement(fk,{sx:{opacity:.7,position:"fixed",display:"flex",left:u.x,top:u.y,width:a.width,height:a.height,"&:hover":{opacity:1},zIndex:-1}},t.createElement("iframe",{style:{width:"100%"},srcDoc:e.content,ref:i,sandbox:"allow-same-origin allow-popups-to-escape-sandbox",frameBorder:"0",title:n.componentId})))};pk.defaultProps={mapId:void 0},Sg("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);w_("div",{name:"MuiDivider",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,n.absolute&&e.absolute,e[n.variant],n.light&&e.light,"vertical"===n.orientation&&e.vertical,n.flexItem&&e.flexItem,n.children&&e.withChildren,n.children&&"vertical"===n.orientation&&e.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&e.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&e.textAlignLeft]}})((function(t){var e=t.theme,n=t.ownerState;return fm({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:e.palette.divider,borderBottomWidth:"thin"},n.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},n.light&&{borderColor:Uy(e.palette.divider,.08)},"inset"===n.variant&&{marginLeft:72},"middle"===n.variant&&"horizontal"===n.orientation&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},"middle"===n.variant&&"vertical"===n.orientation&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},"vertical"===n.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},n.flexItem&&{alignSelf:"stretch",height:"auto"})}),(function(t){var e=t.theme;return fm({},t.ownerState.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:"thin solid ".concat(e.palette.divider),top:"50%",content:'""',transform:"translateY(50%)"}})}),(function(t){var e=t.theme,n=t.ownerState;return fm({},n.children&&"vertical"===n.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:"thin solid ".concat(e.palette.divider),transform:"translateX(0%)"}})}),(function(t){var e=t.ownerState;return fm({},"right"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),w_("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:function(t,e){var n=t.ownerState;return[e.wrapper,"vertical"===n.orientation&&e.wrapperVertical]}})((function(t){var e=t.theme,n=t.ownerState;return fm({display:"inline-block",paddingLeft:"calc(".concat(e.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(e.spacing(1)," * 1.2)")},"vertical"===n.orientation&&{paddingTop:"calc(".concat(e.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(e.spacing(1)," * 1.2)")})}));Sg("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);w_("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,n.variant&&e[n.variant],"inherit"!==n.align&&e["align".concat(Xm(n.align))],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})((function(t){var e=t.theme,n=t.ownerState;return fm({margin:0},n.variant&&e.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})}));var dk=function(t){return t.scrollTop};function mk(t,e){var n,r,i=t.timeout,o=t.easing,a=t.style,s=void 0===a?{}:a;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof i?i:i[e.mode]||0,easing:null!=(r=s.transitionTimingFunction)?r:"object"===typeof o?o[e.mode]:o,delay:s.transitionDelay}}var gk=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],vk={entering:{opacity:1},entered:{opacity:1}},yk=t.forwardRef((function(e,n){var r=ak(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},o=e.addEndListener,a=e.appear,s=void 0===a||a,l=e.children,u=e.easing,c=e.in,h=e.onEnter,f=e.onEntered,p=e.onEntering,d=e.onExit,m=e.onExited,g=e.onExiting,v=e.style,y=e.timeout,_=void 0===y?i:y,x=e.TransitionComponent,b=void 0===x?W_:x,w=vg(e,gk),k=t.useRef(null),S=og(l.ref,n),E=og(k,S),I=function(t){return function(e){if(t){var n=k.current;void 0===e?t(n):t(n,e)}}},C=I(p),A=I((function(t,e){dk(t);var n=mk({style:v,timeout:_,easing:u},{mode:"enter"});t.style.webkitTransition=r.transitions.create("opacity",n),t.style.transition=r.transitions.create("opacity",n),h&&h(t,e)})),P=I(f),T=I(g),M=I((function(t){var e=mk({style:v,timeout:_,easing:u},{mode:"exit"});t.style.webkitTransition=r.transitions.create("opacity",e),t.style.transition=r.transitions.create("opacity",e),d&&d(t)})),L=I(m);return Eg.exports.jsx(b,fm({appear:s,in:c,nodeRef:k,onEnter:A,onEntered:P,onEntering:C,onExit:M,onExited:L,onExiting:T,addEndListener:function(t){o&&o(k.current,t)},timeout:_},w,{children:function(e,n){return t.cloneElement(l,fm({style:fm({opacity:0,visibility:"exited"!==e||c?void 0:"hidden"},vk[e],v,l.props.style),ref:E},n))}}))})),_k=yk;function xk(t){return kg("MuiBackdrop",t)}Sg("MuiBackdrop",["root","invisible"]);var bk=["children","component","components","componentsProps","className","invisible","open","transitionDuration","TransitionComponent"],wk=w_("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,n.invisible&&e.invisible]}})((function(t){return fm({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.ownerState.invisible&&{backgroundColor:"transparent"})})),kk=t.forwardRef((function(t,e){var n,r,i=__({props:t,name:"MuiBackdrop"}),o=i.children,a=i.component,s=void 0===a?"div":a,l=i.components,u=void 0===l?{}:l,c=i.componentsProps,h=void 0===c?{}:c,f=i.className,p=i.invisible,d=void 0!==p&&p,m=i.open,g=i.transitionDuration,v=i.TransitionComponent,y=void 0===v?_k:v,_=vg(i,bk),x=fm({},i,{component:s,invisible:d}),b=function(t){var e=t.classes;return bg({root:["root",t.invisible&&"invisible"]},xk,e)}(x);return Eg.exports.jsx(y,fm({in:m,timeout:g},_,{children:Eg.exports.jsx(wk,{"aria-hidden":!0,as:null!=(n=u.Root)?n:s,className:_g(b.root,f),ownerState:fm({},x,null==(r=h.root)?void 0:r.ownerState),classes:b,ref:e,children:o})}))})),Sk=kk,Ek=["BackdropComponent","closeAfterTransition","children","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted"],Ik=w_("div",{name:"MuiModal",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,!n.open&&n.exited&&e.hidden]}})((function(t){var e=t.theme,n=t.ownerState;return fm({position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),Ck=w_(Sk,{name:"MuiModal",slot:"Backdrop",overridesResolver:function(t,e){return e.backdrop}})({zIndex:-1}),Ak=t.forwardRef((function(e,n){var r,o=__({name:"MuiModal",props:e}),a=o.BackdropComponent,s=void 0===a?Ck:a,l=o.closeAfterTransition,u=void 0!==l&&l,c=o.children,h=o.components,f=void 0===h?{}:h,p=o.componentsProps,d=void 0===p?{}:p,m=o.disableAutoFocus,g=void 0!==m&&m,v=o.disableEnforceFocus,y=void 0!==v&&v,_=o.disableEscapeKeyDown,x=void 0!==_&&_,b=o.disablePortal,w=void 0!==b&&b,k=o.disableRestoreFocus,S=void 0!==k&&k,E=o.disableScrollLock,I=void 0!==E&&E,C=o.hideBackdrop,A=void 0!==C&&C,P=o.keepMounted,T=void 0!==P&&P,M=vg(o,Ek),L=t.useState(!0),R=(0,i.Z)(L,2),N=R[0],O=R[1],z={closeAfterTransition:u,disableAutoFocus:g,disableEnforceFocus:y,disableEscapeKeyDown:x,disablePortal:w,disableRestoreFocus:S,disableScrollLock:I,hideBackdrop:A,keepMounted:T},D=function(t){return t.classes}(fm({},o,z,{exited:N}));return Eg.exports.jsx(tv,fm({components:fm({Root:Ik},f),componentsProps:{root:fm({},d.root,(!f.Root||!xg(f.Root))&&{ownerState:fm({},null==(r=d.root)?void 0:r.ownerState)})},BackdropComponent:s,onTransitionEnter:function(){return O(!1)},onTransitionExited:function(){return O(!0)},ref:n},M,{classes:D},z,{children:c}))})),Pk=Ak;Sg("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);var Tk=function(t,e){var n=t.ownerState;return[e.root,("permanent"===n.variant||"persistent"===n.variant)&&e.docked,e.modal]};w_(Pk,{name:"MuiDrawer",slot:"Root",overridesResolver:Tk})((function(t){return{zIndex:t.theme.zIndex.drawer}})),w_("div",{shouldForwardProp:x_,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:Tk})({flex:"0 0 auto"}),w_(fk,{name:"MuiDrawer",slot:"Paper",overridesResolver:function(t,e){var n=t.ownerState;return[e.paper,e["paperAnchor".concat(Xm(n.anchor))],"temporary"!==n.variant&&e["paperAnchorDocked".concat(Xm(n.anchor))]]}})((function(t){var e=t.theme,n=t.ownerState;return fm({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:e.zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},"left"===n.anchor&&{left:0},"top"===n.anchor&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},"right"===n.anchor&&{right:0},"bottom"===n.anchor&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},"left"===n.anchor&&"temporary"!==n.variant&&{borderRight:"1px solid ".concat(e.palette.divider)},"top"===n.anchor&&"temporary"!==n.variant&&{borderBottom:"1px solid ".concat(e.palette.divider)},"right"===n.anchor&&"temporary"!==n.variant&&{borderLeft:"1px solid ".concat(e.palette.divider)},"bottom"===n.anchor&&"temporary"!==n.variant&&{borderTop:"1px solid ".concat(e.palette.divider)})}));var Mk=Sg("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Lk=(w_(vx,{name:"MuiIconButton",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,"default"!==n.color&&e["color".concat(Xm(n.color))],n.edge&&e["edge".concat(Xm(n.edge))],e["size".concat(Xm(n.size))]]}})((function(t){var e=t.theme,n=t.ownerState;return fm({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:Uy(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(function(t){var e=t.theme,n=t.ownerState;return fm({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&fm({color:e.palette[n.color].main},!n.disableRipple&&{"&:hover":{backgroundColor:Uy(e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),"small"===n.size&&{padding:5,fontSize:e.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:e.typography.pxToRem(28)},(0,c.Z)({},"&.".concat(Mk.disabled),{backgroundColor:"transparent",color:e.palette.action.disabled}))})),{}),Rk=lm.exports;Object.defineProperty(Lk,"__esModule",{value:!0});Lk.default=void 0;var Nk=Rk(um),Ok=Eg.exports,zk=(0,Nk.default)((0,Ok.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");Lk.default=zk;var Dk={},Fk=lm.exports;Object.defineProperty(Dk,"__esModule",{value:!0});Dk.default=void 0;var Bk=Fk(um),jk=Eg.exports,Zk=(0,Bk.default)((0,jk.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4 6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z"}),"FileCopy");Dk.default=Zk;var Uk=t.createContext({});Sg("MuiList",["root","padding","dense","subheader"]);w_("ul",{name:"MuiList",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})((function(t){var e=t.ownerState;return fm({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})}));var Vk=Sg("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),qk=Sg("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function Gk(t){return kg("MuiListItemSecondaryAction",t)}Sg("MuiListItemSecondaryAction",["root","disableGutters"]);var Wk=["className"],Hk=w_("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,n.disableGutters&&e.disableGutters]}})((function(t){return fm({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.ownerState.disableGutters&&{right:0})})),Xk=t.forwardRef((function(e,n){var r=__({props:e,name:"MuiListItemSecondaryAction"}),i=r.className,o=vg(r,Wk),a=fm({},r,{disableGutters:t.useContext(Uk).disableGutters}),s=function(t){return bg({root:["root",t.disableGutters&&"disableGutters"]},Gk,t.classes)}(a);return Eg.exports.jsx(Hk,fm({className:_g(s.root,i),ownerState:a,ref:n},o))}));Xk.muiName="ListItemSecondaryAction";w_("div",{name:"MuiListItem",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,n.dense&&e.dense,"flex-start"===n.alignItems&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.button&&e.button,n.hasSecondaryAction&&e.secondaryAction]}})((function(t){var e,n=t.theme,r=t.ownerState;return fm({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!r.disablePadding&&fm({paddingTop:8,paddingBottom:8},r.dense&&{paddingTop:4,paddingBottom:4},!r.disableGutters&&{paddingLeft:16,paddingRight:16},!!r.secondaryAction&&{paddingRight:48}),!!r.secondaryAction&&(0,c.Z)({},"& > .".concat(qk.root),{paddingRight:48}),(e={},(0,c.Z)(e,"&.".concat(Vk.focusVisible),{backgroundColor:n.palette.action.focus}),(0,c.Z)(e,"&.".concat(Vk.selected),(0,c.Z)({backgroundColor:Uy(n.palette.primary.main,n.palette.action.selectedOpacity)},"&.".concat(Vk.focusVisible),{backgroundColor:Uy(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)})),(0,c.Z)(e,"&.".concat(Vk.disabled),{opacity:n.palette.action.disabledOpacity}),e),"flex-start"===r.alignItems&&{alignItems:"flex-start"},r.divider&&{borderBottom:"1px solid ".concat(n.palette.divider),backgroundClip:"padding-box"},r.button&&(0,c.Z)({transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:n.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(Vk.selected,":hover"),{backgroundColor:Uy(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:Uy(n.palette.primary.main,n.palette.action.selectedOpacity)}}),r.hasSecondaryAction&&{paddingRight:48})})),w_("li",{name:"MuiListItem",slot:"Container",overridesResolver:function(t,e){return e.container}})({position:"relative"});var Yk=Sg("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),$k=(w_("div",{name:"MuiListItemText",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[(0,c.Z)({},"& .".concat(Yk.primary),e.primary),(0,c.Z)({},"& .".concat(Yk.secondary),e.secondary),e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})((function(t){var e=t.ownerState;return fm({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})})),t.createContext({}));$k.Provider,function(){var t,e=/\s*/g,r=/^\s*|\s*$/g,i=/\s+/;function o(t){if(!t||!t.length)return 0;for(var e=0,n=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e)|0;return n}function a(t,e){return t.getElementsByTagName(e)}function s(t,e){return t.getAttribute(e)}function l(t,e){return parseFloat(s(t,e))}function u(t,e){var n=a(t,e);return n.length?n[0]:null}function c(t){for(var e=0,n=[];e<t.length;e++)n[e]=parseFloat(t[e]);return n}function h(t){return t&&function(t){t.normalize&&t.normalize()}(t),t&&t.textContent||""}function f(t,e){var n,r,i={};for(r=0;r<e.length;r++)(n=u(t,e[r]))&&(i[e[r]]=h(n));return i}function p(t,e){for(var n in e)t[n]=e[n]}function d(t){return c(t.replace(e,"").split(","))}function m(t){for(var e=t.replace(r,"").split(i),n=[],o=0;o<e.length;o++)n.push(d(e[o]));return n}function g(t){var e,n=[l(t,"lon"),l(t,"lat")],r=u(t,"ele"),i=u(t,"gpxtpx:hr")||u(t,"hr"),o=u(t,"time");return r&&(e=parseFloat(h(r)),isNaN(e)||n.push(e)),{coordinates:n,time:o?h(o):null,heartRate:i?parseFloat(h(i)):null}}if("undefined"!==typeof XMLSerializer)t=new XMLSerializer;else{var v="object"===("undefined"===typeof process?"undefined":tk(process))&&!process.browser,y="object"===("undefined"===typeof Titanium?"undefined":tk(Titanium));if("object"!==("undefined"===typeof exports?"undefined":tk(exports))||!v&&!y)throw new Error("Unable to initialize serializer");t=new(n(8655).XMLSerializer)}function _(e){return void 0!==e.xml?e.xml:t.serializeToString(e)}var x={kml:function(t){for(var e={type:"FeatureCollection",features:[]},n={},r={},i={},l=["Polygon","LineString","Point","Track","gx:Track"],f=a(t,"Placemark"),p=a(t,"Style"),g=a(t,"StyleMap"),v=0;v<p.length;v++){var y=o(_(p[v])).toString(16);n["#"+s(p[v],"id")]=y,r[y]=p[v]}for(var x=0;x<g.length;x++){n["#"+s(g[x],"id")]=o(_(g[x])).toString(16);for(var b=a(g[x],"Pair"),w={},k=0;k<b.length;k++)w[h(u(b[k],"key"))]=h(u(b[k],"styleUrl"));i["#"+s(g[x],"id")]=w}for(var S=0;S<f.length;S++)e.features=e.features.concat(P(f[S]));function E(t){var e,n;return"#"===(t=t||"").substr(0,1)&&(t=t.substr(1)),6!==t.length&&3!==t.length||(e=t),8===t.length&&(n=parseInt(t.substr(0,2),16)/255,e="#"+t.substr(6,2)+t.substr(4,2)+t.substr(2,2)),[e,isNaN(n)?void 0:n]}function I(t){return c(t.split(" "))}function C(t){var e=a(t,"coord"),n=[],r=[];0===e.length&&(e=a(t,"gx:coord"));for(var i=0;i<e.length;i++)n.push(I(h(e[i])));for(var o=a(t,"when"),s=0;s<o.length;s++)r.push(h(o[s]));return{coords:n,times:r}}function A(t){var e,n,r,i,o,s=[],c=[];if(u(t,"MultiGeometry"))return A(u(t,"MultiGeometry"));if(u(t,"MultiTrack"))return A(u(t,"MultiTrack"));if(u(t,"gx:MultiTrack"))return A(u(t,"gx:MultiTrack"));for(r=0;r<l.length;r++)if(n=a(t,l[r]))for(i=0;i<n.length;i++)if(e=n[i],"Point"===l[r])s.push({type:"Point",coordinates:d(h(u(e,"coordinates")))});else if("LineString"===l[r])s.push({type:"LineString",coordinates:m(h(u(e,"coordinates")))});else if("Polygon"===l[r]){var f=a(e,"LinearRing"),p=[];for(o=0;o<f.length;o++)p.push(m(h(u(f[o],"coordinates"))));s.push({type:"Polygon",coordinates:p})}else if("Track"===l[r]||"gx:Track"===l[r]){var g=C(e);s.push({type:"LineString",coordinates:g.coords}),g.times.length&&c.push(g.times)}return{geoms:s,coordTimes:c}}function P(t){var e,o=A(t),l={},c=h(u(t,"name")),f=h(u(t,"address")),p=h(u(t,"styleUrl")),d=h(u(t,"description")),m=u(t,"TimeSpan"),g=u(t,"TimeStamp"),v=u(t,"ExtendedData"),y=u(t,"LineStyle"),_=u(t,"PolyStyle"),x=u(t,"visibility");if(!o.geoms.length)return[];if(c&&(l.name=c),f&&(l.address=f),p){"#"!==p[0]&&(p="#"+p),l.styleUrl=p,n[p]&&(l.styleHash=n[p]),i[p]&&(l.styleMapHash=i[p],l.styleHash=n[i[p].normal]);var b=r[l.styleHash];if(b){y||(y=u(b,"LineStyle")),_||(_=u(b,"PolyStyle"));var w=u(b,"IconStyle");if(w){var k=u(w,"Icon");if(k){var S=h(u(k,"href"));S&&(l.icon=S)}}}}if(d&&(l.description=d),m){var I=h(u(m,"begin")),C=h(u(m,"end"));l.timespan={begin:I,end:C}}if(g&&(l.timestamp=h(u(g,"when"))),y){var P=E(h(u(y,"color"))),T=P[0],M=P[1],L=parseFloat(h(u(y,"width")));T&&(l.stroke=T),isNaN(M)||(l["stroke-opacity"]=M),isNaN(L)||(l["stroke-width"]=L)}if(_){var R=E(h(u(_,"color"))),N=R[0],O=R[1],z=h(u(_,"fill")),D=h(u(_,"outline"));N&&(l.fill=N),isNaN(O)||(l["fill-opacity"]=O),z&&(l["fill-opacity"]="1"===z?l["fill-opacity"]||1:0),D&&(l["stroke-opacity"]="1"===D?l["stroke-opacity"]||1:0)}if(v){var F=a(v,"Data"),B=a(v,"SimpleData");for(e=0;e<F.length;e++)l[F[e].getAttribute("name")]=h(u(F[e],"value"));for(e=0;e<B.length;e++)l[B[e].getAttribute("name")]=h(B[e])}x&&(l.visibility=h(x)),o.coordTimes.length&&(l.coordTimes=1===o.coordTimes.length?o.coordTimes[0]:o.coordTimes);var j={type:"Feature",geometry:1===o.geoms.length?o.geoms[0]:{type:"GeometryCollection",geometries:o.geoms},properties:l};return s(t,"id")&&(j.id=s(t,"id")),[j]}return e},gpx:function(t){var e,n,r=a(t,"trk"),i=a(t,"rte"),o=a(t,"wpt"),l={type:"FeatureCollection",features:[]};for(e=0;e<r.length;e++)(n=m(r[e]))&&l.features.push(n);for(e=0;e<i.length;e++)(n=v(i[e]))&&l.features.push(n);for(e=0;e<o.length;e++)l.features.push(y(o[e]));function c(t,e){for(var n=0;n<e;n++)t.push(null);return t}function d(t,e){var n=a(t,e),r=[],i=[],o=[],s=n.length;if(s<2)return{};for(var l=0;l<s;l++){var u=g(n[l]);r.push(u.coordinates),u.time&&i.push(u.time),(u.heartRate||o.length)&&(o.length||c(o,l),o.push(u.heartRate||null))}return{line:r,times:i,heartRates:o}}function m(t){for(var e,n=a(t,"trkseg"),r=[],i=[],o=[],s=0;s<n.length;s++)if((e=d(n[s],"trkpt"))&&(e.line&&r.push(e.line),e.times&&e.times.length&&i.push(e.times),o.length||e.heartRates&&e.heartRates.length)){if(!o.length)for(var l=0;l<s;l++)o.push(c([],r[l].length));e.heartRates&&e.heartRates.length?o.push(e.heartRates):o.push(c([],e.line.length||0))}if(0!==r.length){var h=x(t);return p(h,_(u(t,"extensions"))),i.length&&(h.coordTimes=1===r.length?i[0]:i),o.length&&(h.heartRates=1===r.length?o[0]:o),{type:"Feature",properties:h,geometry:{type:1===r.length?"LineString":"MultiLineString",coordinates:1===r.length?r[0]:r}}}}function v(t){var e=d(t,"rtept");if(e.line){var n=x(t);return p(n,_(u(t,"extensions"))),{type:"Feature",properties:n,geometry:{type:"LineString",coordinates:e.line}}}}function y(t){var e=x(t);return p(e,f(t,["sym"])),{type:"Feature",properties:e,geometry:{type:"Point",coordinates:g(t).coordinates}}}function _(t){var e={};if(t){var n=u(t,"line");if(n){var r=h(u(n,"color")),i=parseFloat(h(u(n,"opacity"))),o=parseFloat(h(u(n,"width")));r&&(e.stroke=r),isNaN(i)||(e["stroke-opacity"]=i),isNaN(o)||(e["stroke-width"]=96*o/25.4)}}return e}function x(t){var e=f(t,["name","cmt","desc","type","time","keywords"]),n=a(t,"link");n.length&&(e.links=[]);for(var r,i=0;i<n.length;i++)p(r={href:s(n[i],"href")},f(n[i],["text","type"])),e.links.push(r);return e}return l}}}();function Kk(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}var Jk=function(e){var n=(0,t.useContext)(Qd),r=(0,t.useRef)((e.idPrefix?e.idPrefix:"MlSpatialElevationProfile-")+_()),i=(0,t.useRef)(null),o=(0,t.useRef)(!1),a=(0,t.useContext)($k),s=(0,t.useRef)("elevationprofile-"+_()),l=(0,t.useRef)("elevationprofile-layer-"+_()),u=(0,t.useCallback)((function(t,n,r,i,o){var a=function(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return Kk({type:"LineString",coordinates:t},e,n)}([[t,n],[i,o]]),s=Tl(a,5,{units:"meters"}),l=s.geometry.coordinates[0][0],u=s.geometry.coordinates[0][1];return function(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return Kk({type:"Polygon",coordinates:t},e,n)}([[[t,n],[i,o],[s.geometry.coordinates[1][0],s.geometry.coordinates[1][1]],[l,u],[t,n]]],{height:r*e.elevationFactor})}),[e.elevationFactor]);return(0,t.useEffect)((function(){var t=r.current;return function(){i.current&&(i.current.cleanup(t),i.current=null)}}),[]),(0,t.useEffect)((function(){n.mapExists(e.mapId)&&!o.current&&(o.current=!0,i.current=n.getMap(e.mapId),i.current.addSource(s.current,{type:"geojson",data:a.data},r.current),i.current.addLayer({id:l.current,source:s.current,type:"fill-extrusion",paint:{"fill-extrusion-height":["get","height"],"fill-extrusion-opacity":.9,"fill-extrusion-color":["interpolate",["linear"],["get","height"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"yellow"]}},e.insertBeforeLayer,r.current))}),[n.mapIds,e.insertBeforeLayer,e.mapId,a,n]),(0,t.useEffect)((function(){var t;if(i.current&&i.current.getLayer(l.current)){var n=a.data;if(n&&n.features){var r=n.features.find((function(t){return"LineString"===t.geometry.type}));if(r&&r.geometry){var o=r.geometry.coordinates.map((function(t,e){return t[2]})),c=Math.min.apply(Math,rk(o)),h=Math.max.apply(Math,rk(o))-c;h=0===h?1:h,i.current.setPaintProperty(l.current,"fill-extrusion-color",["interpolate",["linear"],["get","height"],0,"rgb(0,255,55)",h*e.elevationFactor,"rgb(255,0,0)"]);var f=function(t,e,n){return t*(1-n)+e*n},p=[];r.geometry.coordinates.forEach((function(t,e){if(r.geometry.coordinates[e+1]){var n=~~(1e3*us([t[0],t[1]],[r.geometry.coordinates[e+1][0],r.geometry.coordinates[e+1][1]],{units:"kilometers"})/10);n=n<1?1:n;for(var i=0;i<n;i++){var o=f(r.geometry.coordinates[e][0],r.geometry.coordinates[e+1][0],i/n),a=f(r.geometry.coordinates[e][1],r.geometry.coordinates[e+1][1],i/n),s=f(r.geometry.coordinates[e][2]-c,r.geometry.coordinates[e+1][2]-c,i/n),l=f(r.geometry.coordinates[e][0],r.geometry.coordinates[e+1][0],(i+1)/n),h=f(r.geometry.coordinates[e][1],r.geometry.coordinates[e+1][1],(i+1)/n),d=u(o,a,s,l,h);p.push(d)}}}));var d=a.getEmptyFeatureCollection();d.features=p,null===(t=i.current.getSource(s.current))||void 0===t||t.setData(d)}}}}),[a.data,u,a,e.elevationFactor,n]),t.createElement(t.Fragment,null)};Jk.defaultProps={elevationFactor:1},Jk.propTypes={mapId:b().string,idPrefix:b().string,elevationFactor:b().number,insertBeforeLayer:b().string};b().string,b().string,b().object,b().object,b().string;function Qk(e){var n=nk((0,t.useState)(void 0),2),r=n[0],i=n[1],o=nk((0,t.useState)(e.url),2),a=o[0],s=o[1],l=nk((0,t.useState)(""),2),u=l[0],c=l[1],h=nk((0,t.useState)(void 0),2),f=h[0],p=h[1],d=nk((0,t.useState)(void 0),2),m=d[0],g=d[1],v=function(){i(void 0),p(void 0),c("")};return(0,t.useEffect)((function(){var t;if(v(),g(void 0),a){var n,r=a;-1!==a.indexOf("?")&&(r=(n=a.split("?"))[0]);var i=new URLSearchParams(null===(t=n)||void 0===t?void 0:t[1]),o=Qw(Qw({},Object.fromEntries(i)),e.urlParameters),s=new URLSearchParams(o),l=decodeURIComponent(s.toString())+"".replace(/%2F/g,"/").replace(/%3A/g,":");fetch(r+"?"+l).then((function(t){if(t.ok)return t.text();throw Error(t.statusText+" ("+t.status+" - "+t.type+")")})).then((function(t){p(new(qc())(t).toJSON())})).catch((function(t){v(),console.log(t),g(t.message)}))}}),[a,e.urlParameters]),(0,t.useEffect)((function(){var t,e,n,r,o,a,s,l,u,h,p,d,m,g;null!==f&&void 0!==f&&f.Service&&(c(null===(t=f.Capability)||void 0===t||null===(e=t.Request)||void 0===e||null===(n=e.GetMap)||void 0===n||null===(r=n.DCPType)||void 0===r||null===(o=r[0])||void 0===o||null===(a=o.HTTP)||void 0===a||null===(s=a.Get)||void 0===s?void 0:s.OnlineResource),i(null===(l=f.Capability)||void 0===l||null===(u=l.Request)||void 0===u||null===(h=u.GetFeatureInfo)||void 0===h||null===(p=h.DCPType)||void 0===p||null===(d=p[0])||void 0===d||null===(m=d.HTTP)||void 0===m||null===(g=m.Get)||void 0===g?void 0:g.OnlineResource))}),[f]),{capabilities:f,getFeatureInfoUrl:r,wmsUrl:u,error:m,setUrl:s}}Qk.defaultProps={url:"",urlParameters:{SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"getCapabilities"}};var tS=t.createContext({}),eS=tS.Provider,nS=function(e){var n=nk((0,t.useState)(null),2),r=n[0],i=n[1];(0,t.useEffect)((function(){if(e.url){var t=null;"json"===e.format?t=function(t,e){return fetch(t,e).then(Fd)}(e.url):"csv"===e.format?t=Dd(e.url):"xml"===e.format&&(t=jd(e.url)),t&&t.then((function(t){if("xml"===e.format){if(e.nodeType){var n=[];t.querySelectorAll(e.nodeType).forEach((function(t){n.push(e.formatData(t))})),i(n)}}else e.data_property&&(t=t[e.data_property]),"function"===typeof e.formatData?i(t.map(e.formatData)):i(t);"function"===typeof e.onData&&e.onData()}))}}),[e.url,e]);var o={data:r,setData:i};return t.createElement(eS,{value:o},e.children)};function rS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function iS(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rS(Object(n),!0).forEach((function(e){(0,c.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}nS.propTypes={children:b().node.isRequired};var oS="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aS="object"===("undefined"===typeof window?"undefined":oS(window))&&"object"===("undefined"===typeof document?"undefined":oS(document))&&9===document.nodeType,sS={}.constructor;function lS(t){if(null==t||"object"!==typeof t)return t;if(Array.isArray(t))return t.map(lS);if(t.constructor!==sS)return t;var e={};for(var n in t)e[n]=lS(t[n]);return e}function uS(t,e,n){void 0===t&&(t="unnamed");var r=n.jss,i=lS(e),o=r.plugins.onCreateRule(t,i,n);return o||(t[0],null)}var cS=function(t,e){for(var n="",r=0;r<t.length&&"!important"!==t[r];r++)n&&(n+=e),n+=t[r];return n},hS=function(t,e){if(void 0===e&&(e=!1),!Array.isArray(t))return t;var n="";if(Array.isArray(t[0]))for(var r=0;r<t.length&&"!important"!==t[r];r++)n&&(n+=", "),n+=cS(t[r]," ");else n=cS(t,", ");return e||"!important"!==t[t.length-1]||(n+=" !important"),n};function fS(t){return t&&!1===t.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function pS(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function dS(t,e,n){void 0===n&&(n={});var r="";if(!e)return r;var i=n.indent,o=void 0===i?0:i,a=e.fallbacks;!1===n.format&&(o=-1/0);var s=fS(n),l=s.linebreak,u=s.space;if(t&&o++,a)if(Array.isArray(a))for(var c=0;c<a.length;c++){var h=a[c];for(var f in h){var p=h[f];null!=p&&(r&&(r+=l),r+=pS(f+":"+u+hS(p)+";",o))}}else for(var d in a){var m=a[d];null!=m&&(r&&(r+=l),r+=pS(d+":"+u+hS(m)+";",o))}for(var g in e){var v=e[g];null!=v&&"fallbacks"!==g&&(r&&(r+=l),r+=pS(g+":"+u+hS(v)+";",o))}return(r||n.allowEmpty)&&t?(r&&(r=""+l+r+l),pS(""+t+u+"{"+r,--o)+pS("}",o)):r}var mS=/([[\].#*$><+~=|^:(),"'`\s])/g,gS="undefined"!==typeof CSS&&CSS.escape,vS=function(t){return gS?gS(t):t.replace(mS,"\\$1")},yS=function(){function t(t,e,n){this.type="style",this.isProcessed=!1;var r=n.sheet,i=n.Renderer;this.key=t,this.options=n,this.style=e,r?this.renderer=r.renderer:i&&(this.renderer=new i)}return t.prototype.prop=function(t,e,n){if(void 0===e)return this.style[t];var r=!!n&&n.force;if(!r&&this.style[t]===e)return this;var i=e;n&&!1===n.process||(i=this.options.jss.plugins.onChangeValue(e,t,this));var o=null==i||!1===i,a=t in this.style;if(o&&!a&&!r)return this;var s=o&&a;if(s?delete this.style[t]:this.style[t]=i,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,t):this.renderer.setProperty(this.renderable,t,i),this;var l=this.options.sheet;return l&&l.attached,this},t}(),_S=function(t){function e(e,n,r){var i;i=t.call(this,e,n,r)||this;var o=r.selector,a=r.scoped,s=r.sheet,l=r.generateId;return o?i.selectorText=o:!1!==a&&(i.id=l((0,Fo.Z)((0,Fo.Z)(i)),s),i.selectorText="."+vS(i.id)),i}jo(e,t);var n=e.prototype;return n.applyTo=function(t){var e=this.renderer;if(e){var n=this.toJSON();for(var r in n)e.setProperty(t,r,n[r])}return this},n.toJSON=function(){var t={};for(var e in this.style){var n=this.style[e];"object"!==typeof n?t[e]=n:Array.isArray(n)&&(t[e]=hS(n))}return t},n.toString=function(t){var e=this.options.sheet,n=!!e&&e.options.link?(0,$n.Z)({},t,{allowEmpty:!0}):t;return dS(this.selectorText,this.style,n)},(0,l.Z)(e,[{key:"selector",set:function(t){if(t!==this.selectorText){this.selectorText=t;var e=this.renderer,n=this.renderable;if(n&&e)e.setSelector(n,t)||e.replaceRule(n,this)}},get:function(){return this.selectorText}}]),e}(yS),xS={onCreateRule:function(t,e,n){return"@"===t[0]||n.parent&&"keyframes"===n.parent.type?null:new _S(t,e,n)}},bS={indent:1,children:!0},wS=/@([\w-]+)/,kS=function(){function t(t,e,n){this.type="conditional",this.isProcessed=!1,this.key=t;var r=t.match(wS);for(var i in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new HS((0,$n.Z)({},n,{parent:this})),e)this.rules.add(i,e[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(t){return this.rules.get(t)},e.indexOf=function(t){return this.rules.indexOf(t)},e.addRule=function(t,e,n){var r=this.rules.add(t,e,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},e.replaceRule=function(t,e,n){var r=this.rules.replace(t,e,n);return r&&this.options.jss.plugins.onProcessRule(r),r},e.toString=function(t){void 0===t&&(t=bS);var e=fS(t).linebreak;if(null==t.indent&&(t.indent=bS.indent),null==t.children&&(t.children=bS.children),!1===t.children)return this.query+" {}";var n=this.rules.toString(t);return n?this.query+" {"+e+n+e+"}":""},t}(),SS=/@media|@supports\s+/,ES={onCreateRule:function(t,e,n){return SS.test(t)?new kS(t,e,n):null}},IS={indent:1,children:!0},CS=/@keyframes\s+([\w-]+)/,AS=function(){function t(t,e,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=t.match(CS);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var i=n.scoped,o=n.sheet,a=n.generateId;for(var s in this.id=!1===i?this.name:vS(a(this,o)),this.rules=new HS((0,$n.Z)({},n,{parent:this})),e)this.rules.add(s,e[s],(0,$n.Z)({},n,{parent:this}));this.rules.process()}return t.prototype.toString=function(t){void 0===t&&(t=IS);var e=fS(t).linebreak;if(null==t.indent&&(t.indent=IS.indent),null==t.children&&(t.children=IS.children),!1===t.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(t);return n&&(n=""+e+n+e),this.at+" "+this.id+" {"+n+"}"},t}(),PS=/@keyframes\s+/,TS=/\$([\w-]+)/g,MS=function(t,e){return"string"===typeof t?t.replace(TS,(function(t,n){return n in e?e[n]:t})):t},LS=function(t,e,n){var r=t[e],i=MS(r,n);i!==r&&(t[e]=i)},RS={onCreateRule:function(t,e,n){return"string"===typeof t&&PS.test(t)?new AS(t,e,n):null},onProcessStyle:function(t,e,n){return"style"===e.type&&n?("animation-name"in t&&LS(t,"animation-name",n.keyframes),"animation"in t&&LS(t,"animation",n.keyframes),t):t},onChangeValue:function(t,e,n){var r=n.options.sheet;if(!r)return t;switch(e){case"animation":case"animation-name":return MS(t,r.keyframes);default:return t}}},NS=function(t){function e(){return t.apply(this,arguments)||this}return jo(e,t),e.prototype.toString=function(t){var e=this.options.sheet,n=!!e&&e.options.link?(0,$n.Z)({},t,{allowEmpty:!0}):t;return dS(this.key,this.style,n)},e}(yS),OS={onCreateRule:function(t,e,n){return n.parent&&"keyframes"===n.parent.type?new NS(t,e,n):null}},zS=function(){function t(t,e,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=t,this.style=e,this.options=n}return t.prototype.toString=function(t){var e=fS(t).linebreak;if(Array.isArray(this.style)){for(var n="",r=0;r<this.style.length;r++)n+=dS(this.at,this.style[r]),this.style[r+1]&&(n+=e);return n}return dS(this.at,this.style,t)},t}(),DS=/@font-face/,FS={onCreateRule:function(t,e,n){return DS.test(t)?new zS(t,e,n):null}},BS=function(){function t(t,e,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=t,this.style=e,this.options=n}return t.prototype.toString=function(t){return dS(this.key,this.style,t)},t}(),jS={onCreateRule:function(t,e,n){return"@viewport"===t||"@-ms-viewport"===t?new BS(t,e,n):null}},ZS=function(){function t(t,e,n){this.type="simple",this.isProcessed=!1,this.key=t,this.value=e,this.options=n}return t.prototype.toString=function(t){if(Array.isArray(this.value)){for(var e="",n=0;n<this.value.length;n++)e+=this.key+" "+this.value[n]+";",this.value[n+1]&&(e+="\n");return e}return this.key+" "+this.value+";"},t}(),US={"@charset":!0,"@import":!0,"@namespace":!0},VS={onCreateRule:function(t,e,n){return t in US?new ZS(t,e,n):null}},qS=[xS,ES,RS,OS,FS,jS,VS],GS={process:!0},WS={force:!0,process:!0},HS=function(){function t(t){this.map={},this.raw={},this.index=[],this.counter=0,this.options=t,this.classes=t.classes,this.keyframes=t.keyframes}var e=t.prototype;return e.add=function(t,e,n){var r=this.options,i=r.parent,o=r.sheet,a=r.jss,s=r.Renderer,l=r.generateId,u=r.scoped,c=(0,$n.Z)({classes:this.classes,parent:i,sheet:o,jss:a,Renderer:s,generateId:l,scoped:u,name:t,keyframes:this.keyframes,selector:void 0},n),h=t;t in this.raw&&(h=t+"-d"+this.counter++),this.raw[h]=e,h in this.classes&&(c.selector="."+vS(this.classes[h]));var f=uS(h,e,c);if(!f)return null;this.register(f);var p=void 0===c.index?this.index.length:c.index;return this.index.splice(p,0,f),f},e.replace=function(t,e,n){var r=this.get(t),i=this.index.indexOf(r);r&&this.remove(r);var o=n;return-1!==i&&(o=(0,$n.Z)({},n,{index:i})),this.add(t,e,o)},e.get=function(t){return this.map[t]},e.remove=function(t){this.unregister(t),delete this.raw[t.key],this.index.splice(this.index.indexOf(t),1)},e.indexOf=function(t){return this.index.indexOf(t)},e.process=function(){var t=this.options.jss.plugins;this.index.slice(0).forEach(t.onProcessRule,t)},e.register=function(t){this.map[t.key]=t,t instanceof _S?(this.map[t.selector]=t,t.id&&(this.classes[t.key]=t.id)):t instanceof AS&&this.keyframes&&(this.keyframes[t.name]=t.id)},e.unregister=function(t){delete this.map[t.key],t instanceof _S?(delete this.map[t.selector],delete this.classes[t.key]):t instanceof AS&&delete this.keyframes[t.name]},e.update=function(){var t,e,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(e=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],t=null),t)this.updateOne(this.get(t),e,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],e,n)},e.updateOne=function(e,n,r){void 0===r&&(r=GS);var i=this.options,o=i.jss.plugins,a=i.sheet;if(e.rules instanceof t)e.rules.update(n,r);else{var s=e.style;if(o.onUpdate(n,e,a,r),r.process&&s&&s!==e.style){for(var l in o.onProcessStyle(e.style,e,a),e.style){var u=e.style[l];u!==s[l]&&e.prop(l,u,WS)}for(var c in s){var h=e.style[c],f=s[c];null==h&&h!==f&&e.prop(c,null,WS)}}}},e.toString=function(t){for(var e="",n=this.options.sheet,r=!!n&&n.options.link,i=fS(t).linebreak,o=0;o<this.index.length;o++){var a=this.index[o].toString(t);(a||r)&&(e&&(e+=i),e+=a)}return e},t}(),XS=function(){function t(t,e){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=(0,$n.Z)({},e,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),e.Renderer&&(this.renderer=new e.Renderer(this)),this.rules=new HS(this.options),t)this.rules.add(n,t[n]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(t,e,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(t,e,n);return i?(this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)):null},e.replaceRule=function(t,e,n){var r=this.rules.get(t);if(!r)return this.addRule(t,e,n);var i=this.rules.replace(t,e,n);return i&&this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(this.renderer&&(i?r.renderable&&this.renderer.replaceRule(r.renderable,i):this.renderer.deleteRule(r)),i):i:(this.deployed=!1,i)},e.insertRule=function(t){this.renderer&&this.renderer.insertRule(t)},e.addRules=function(t,e){var n=[];for(var r in t){var i=this.addRule(r,t[r],e);i&&n.push(i)}return n},e.getRule=function(t){return this.rules.get(t)},e.deleteRule=function(t){var e="object"===typeof t?t:this.rules.get(t);return!(!e||this.attached&&!e.renderable)&&(this.rules.remove(e),!(this.attached&&e.renderable&&this.renderer)||this.renderer.deleteRule(e.renderable))},e.indexOf=function(t){return this.rules.indexOf(t)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var t;return(t=this.rules).update.apply(t,arguments),this},e.updateOne=function(t,e,n){return this.rules.updateOne(t,e,n),this},e.toString=function(t){return this.rules.toString(t)},t}(),YS=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(t,e,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var i=this.registry.onCreateRule[r](t,e,n);if(i)return i}return null},e.onProcessRule=function(t){if(!t.isProcessed){for(var e=t.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](t,e);t.style&&this.onProcessStyle(t.style,t,e),t.isProcessed=!0}},e.onProcessStyle=function(t,e,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)e.style=this.registry.onProcessStyle[r](e.style,e,n)},e.onProcessSheet=function(t){for(var e=0;e<this.registry.onProcessSheet.length;e++)this.registry.onProcessSheet[e](t)},e.onUpdate=function(t,e,n,r){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](t,e,n,r)},e.onChangeValue=function(t,e,n){for(var r=t,i=0;i<this.registry.onChangeValue.length;i++)r=this.registry.onChangeValue[i](r,e,n);return r},e.use=function(t,e){void 0===e&&(e={queue:"external"});var n=this.plugins[e.queue];-1===n.indexOf(t)&&(n.push(t),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(t,e){for(var n in e)n in t&&t[n].push(e[n]);return t}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),$S=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(t){var e=this.registry,n=t.options.index;if(-1===e.indexOf(t))if(0===e.length||n>=this.index)e.push(t);else for(var r=0;r<e.length;r++)if(e[r].options.index>n)return void e.splice(r,0,t)},e.reset=function(){this.registry=[]},e.remove=function(t){var e=this.registry.indexOf(t);this.registry.splice(e,1)},e.toString=function(t){for(var e=void 0===t?{}:t,n=e.attached,r=(0,Yn.Z)(e,["attached"]),i=fS(r).linebreak,o="",a=0;a<this.registry.length;a++){var s=this.registry[a];null!=n&&s.attached!==n||(o&&(o+=i),o+=s.toString(r))}return o},(0,l.Z)(t,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),t}(),KS=new $S,JS="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),QS="2f1acc6c3a606b082e5eef5e54414ffb";null==JS[QS]&&(JS[QS]=0);var tE=JS[QS]++,eE=function(t){void 0===t&&(t={});var e=0;return function(n,r){e+=1;var i="",o="";return r&&(r.options.classNamePrefix&&(o=r.options.classNamePrefix),null!=r.options.jss.id&&(i=String(r.options.jss.id))),t.minify?""+(o||"c")+tE+i+e:o+n.key+"-"+tE+(i?"-"+i:"")+"-"+e}},nE=function(t){var e;return function(){return e||(e=t()),e}},rE=function(t,e){try{return t.attributeStyleMap?t.attributeStyleMap.get(e):t.style.getPropertyValue(e)}catch(n){return""}},iE=function(t,e,n){try{var r=n;if(Array.isArray(n)&&(r=hS(n,!0),"!important"===n[n.length-1]))return t.style.setProperty(e,r,"important"),!0;t.attributeStyleMap?t.attributeStyleMap.set(e,r):t.style.setProperty(e,r)}catch(i){return!1}return!0},oE=function(t,e){try{t.attributeStyleMap?t.attributeStyleMap.delete(e):t.style.removeProperty(e)}catch(n){}},aE=function(t,e){return t.selectorText=e,t.selectorText===e},sE=nE((function(){return document.querySelector("head")}));function lE(t){var e=KS.registry;if(e.length>0){var n=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&"string"===typeof r){var i=function(t){for(var e=sE(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===t)return r}return null}(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}var uE=nE((function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null})),cE=function(t,e,n){try{"insertRule"in t?t.insertRule(e,n):"appendRule"in t&&t.appendRule(e)}catch(r){return!1}return t.cssRules[n]},hE=function(t,e){var n=t.cssRules.length;return void 0===e||e>n?n:e},fE=function(){function t(t){this.getPropertyValue=rE,this.setProperty=iE,this.removeProperty=oE,this.setSelector=aE,this.hasInsertedRules=!1,this.cssRules=[],t&&KS.add(t),this.sheet=t;var e=this.sheet?this.sheet.options:{},n=e.media,r=e.meta,i=e.element;this.element=i||function(){var t=document.createElement("style");return t.textContent="\n",t}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var o=uE();o&&this.element.setAttribute("nonce",o)}var e=t.prototype;return e.attach=function(){if(!this.element.parentNode&&this.sheet){!function(t,e){var n=e.insertionPoint,r=lE(e);if(!1!==r&&r.parent)r.parent.insertBefore(t,r.node);else if(n&&"number"===typeof n.nodeType){var i=n,o=i.parentNode;o&&o.insertBefore(t,i.nextSibling)}else sE().appendChild(t)}(this.element,this.sheet.options);var t=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&t&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var t=this.element.parentNode;t&&t.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},e.deploy=function(){var t=this.sheet;t&&(t.options.link?this.insertRules(t.rules):this.element.textContent="\n"+t.toString()+"\n")},e.insertRules=function(t,e){for(var n=0;n<t.index.length;n++)this.insertRule(t.index[n],n,e)},e.insertRule=function(t,e,n){if(void 0===n&&(n=this.element.sheet),t.rules){var r=t,i=n;if("conditional"===t.type||"keyframes"===t.type){var o=hE(n,e);if(!1===(i=cE(n,r.toString({children:!1}),o)))return!1;this.refCssRule(t,o,i)}return this.insertRules(r.rules,i),i}var a=t.toString();if(!a)return!1;var s=hE(n,e),l=cE(n,a,s);return!1!==l&&(this.hasInsertedRules=!0,this.refCssRule(t,s,l),l)},e.refCssRule=function(t,e,n){t.renderable=n,t.options.parent instanceof XS&&this.cssRules.splice(e,0,n)},e.deleteRule=function(t){var e=this.element.sheet,n=this.indexOf(t);return-1!==n&&(e.deleteRule(n),this.cssRules.splice(n,1),!0)},e.indexOf=function(t){return this.cssRules.indexOf(t)},e.replaceRule=function(t,e){var n=this.indexOf(t);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(e,n))},e.getRules=function(){return this.element.sheet.cssRules},t}(),pE=0,dE=function(){function t(t){this.id=pE++,this.version="10.9.0",this.plugins=new YS,this.options={id:{minify:!1},createGenerateId:eE,Renderer:aS?fE:null,plugins:[]},this.generateId=eE({minify:!1});for(var e=0;e<qS.length;e++)this.plugins.use(qS[e],{queue:"internal"});this.setup(t)}var e=t.prototype;return e.setup=function(t){return void 0===t&&(t={}),t.createGenerateId&&(this.options.createGenerateId=t.createGenerateId),t.id&&(this.options.id=(0,$n.Z)({},this.options.id,t.id)),(t.createGenerateId||t.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=t.insertionPoint&&(this.options.insertionPoint=t.insertionPoint),"Renderer"in t&&(this.options.Renderer=t.Renderer),t.plugins&&this.use.apply(this,t.plugins),this},e.createStyleSheet=function(t,e){void 0===e&&(e={});var n=e.index;"number"!==typeof n&&(n=0===KS.index?0:KS.index+1);var r=new XS(t,(0,$n.Z)({},e,{jss:this,generateId:e.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},e.removeStyleSheet=function(t){return t.detach(),KS.remove(t),this},e.createRule=function(t,e,n){if(void 0===e&&(e={}),void 0===n&&(n={}),"object"===typeof t)return this.createRule(void 0,t,e);var r=(0,$n.Z)({},n,{name:t,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var i=uS(t,e,r);return i&&this.plugins.onProcessRule(i),i},e.use=function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach((function(e){t.plugins.use(e)})),this},t}(),mE=function(t){return new dE(t)},gE="object"===typeof CSS&&null!=CSS&&"number"in CSS;function vE(t){var e=null;for(var n in t){var r=t[n],i=typeof r;if("function"===i)e||(e={}),e[n]=r;else if("object"===i&&null!==r&&!Array.isArray(r)){var o=vE(r);o&&(e||(e={}),e[n]=o)}}return e}mE();function yE(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.baseClasses,n=t.newClasses;t.Component;if(!n)return e;var r=(0,$n.Z)({},e);return Object.keys(n).forEach((function(t){n[t]&&(r[t]="".concat(e[t]," ").concat(n[t]))})),r}var _E={set:function(t,e,n,r){var i=t.get(e);i||(i=new Map,t.set(e,i)),i.set(n,r)},get:function(t,e,n){var r=t.get(e);return r?r.get(n):void 0},delete:function(t,e,n){t.get(e).delete(n)}},xE=_E,bE="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",wE=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var kE=Date.now(),SE="fnValues"+kE,EE="fnStyle"+ ++kE,IE=function(){return{onCreateRule:function(t,e,n){if("function"!==typeof e)return null;var r=uS(t,{},n);return r[EE]=e,r},onProcessStyle:function(t,e){if(SE in e||EE in e)return t;var n={};for(var r in t){var i=t[r];"function"===typeof i&&(delete t[r],n[r]=i)}return e[SE]=n,t},onUpdate:function(t,e,n,r){var i=e,o=i[EE];o&&(i.style=o(t)||{});var a=i[SE];if(a)for(var s in a)i.prop(s,a[s](t),r)}}},CE="@global",AE="@global ",PE=function(){function t(t,e,n){for(var r in this.type="global",this.at=CE,this.isProcessed=!1,this.key=t,this.options=n,this.rules=new HS((0,$n.Z)({},n,{parent:this})),e)this.rules.add(r,e[r]);this.rules.process()}var e=t.prototype;return e.getRule=function(t){return this.rules.get(t)},e.addRule=function(t,e,n){var r=this.rules.add(t,e,n);return r&&this.options.jss.plugins.onProcessRule(r),r},e.replaceRule=function(t,e,n){var r=this.rules.replace(t,e,n);return r&&this.options.jss.plugins.onProcessRule(r),r},e.indexOf=function(t){return this.rules.indexOf(t)},e.toString=function(t){return this.rules.toString(t)},t}(),TE=function(){function t(t,e,n){this.type="global",this.at=CE,this.isProcessed=!1,this.key=t,this.options=n;var r=t.substr(AE.length);this.rule=n.jss.createRule(r,e,(0,$n.Z)({},n,{parent:this}))}return t.prototype.toString=function(t){return this.rule?this.rule.toString(t):""},t}(),ME=/\s*,\s*/g;function LE(t,e){for(var n=t.split(ME),r="",i=0;i<n.length;i++)r+=e+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}var RE=function(){return{onCreateRule:function(t,e,n){if(!t)return null;if(t===CE)return new PE(t,e,n);if("@"===t[0]&&t.substr(0,AE.length)===AE)return new TE(t,e,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=t),null},onProcessRule:function(t,e){"style"===t.type&&e&&(function(t,e){var n=t.options,r=t.style,i=r?r["@global"]:null;if(i){for(var o in i)e.addRule(o,i[o],(0,$n.Z)({},n,{selector:LE(o,t.selector)}));delete r["@global"]}}(t,e),function(t,e){var n=t.options,r=t.style;for(var i in r)if("@"===i[0]&&i.substr(0,CE.length)===CE){var o=LE(i.substr(CE.length),t.selector);e.addRule(o,r[i],(0,$n.Z)({},n,{selector:o})),delete r[i]}}(t,e))}}},NE=/\s*,\s*/g,OE=/&/g,zE=/\$([\w-]+)/g;var DE=function(){function t(t,e){return function(n,r){var i=t.getRule(r)||e&&e.getRule(r);return i?i.selector:r}}function e(t,e){for(var n=e.split(NE),r=t.split(NE),i="",o=0;o<n.length;o++)for(var a=n[o],s=0;s<r.length;s++){var l=r[s];i&&(i+=", "),i+=-1!==l.indexOf("&")?l.replace(OE,a):a+" "+l}return i}function n(t,e,n){if(n)return(0,$n.Z)({},n,{index:n.index+1});var r=t.options.nestingLevel;r=void 0===r?1:r+1;var i=(0,$n.Z)({},t.options,{nestingLevel:r,index:e.indexOf(t)+1});return delete i.name,i}return{onProcessStyle:function(r,i,o){if("style"!==i.type)return r;var a,s,l=i,u=l.options.parent;for(var c in r){var h=-1!==c.indexOf("&"),f="@"===c[0];if(h||f){if(a=n(l,u,a),h){var p=e(c,l.selector);s||(s=t(u,o)),p=p.replace(zE,s);var d=l.key+"-"+c;"replaceRule"in u?u.replaceRule(d,r[c],(0,$n.Z)({},a,{selector:p})):u.addRule(d,r[c],(0,$n.Z)({},a,{selector:p}))}else f&&u.addRule(c,{},a).addRule(l.key,r[c],{selector:l.selector});delete r[c]}}return r}}},FE=/[A-Z]/g,BE=/^ms-/,jE={};function ZE(t){return"-"+t.toLowerCase()}var UE=function(t){if(jE.hasOwnProperty(t))return jE[t];var e=t.replace(FE,ZE);return jE[t]=BE.test(e)?"-"+e:e};function VE(t){var e={};for(var n in t){e[0===n.indexOf("--")?n:UE(n)]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(VE):e.fallbacks=VE(t.fallbacks)),e}var qE=function(){return{onProcessStyle:function(t){if(Array.isArray(t)){for(var e=0;e<t.length;e++)t[e]=VE(t[e]);return t}return VE(t)},onChangeValue:function(t,e,n){if(0===e.indexOf("--"))return t;var r=UE(e);return e===r?t:(n.prop(r,t),null)}}},GE=gE&&CSS?CSS.px:"px",WE=gE&&CSS?CSS.ms:"ms",HE=gE&&CSS?CSS.percent:"%";function XE(t){var e=/(-[a-z])/g,n=function(t){return t[1].toUpperCase()},r={};for(var i in t)r[i]=t[i],r[i.replace(e,n)]=t[i];return r}var YE=XE({"animation-delay":WE,"animation-duration":WE,"background-position":GE,"background-position-x":GE,"background-position-y":GE,"background-size":GE,border:GE,"border-bottom":GE,"border-bottom-left-radius":GE,"border-bottom-right-radius":GE,"border-bottom-width":GE,"border-left":GE,"border-left-width":GE,"border-radius":GE,"border-right":GE,"border-right-width":GE,"border-top":GE,"border-top-left-radius":GE,"border-top-right-radius":GE,"border-top-width":GE,"border-width":GE,"border-block":GE,"border-block-end":GE,"border-block-end-width":GE,"border-block-start":GE,"border-block-start-width":GE,"border-block-width":GE,"border-inline":GE,"border-inline-end":GE,"border-inline-end-width":GE,"border-inline-start":GE,"border-inline-start-width":GE,"border-inline-width":GE,"border-start-start-radius":GE,"border-start-end-radius":GE,"border-end-start-radius":GE,"border-end-end-radius":GE,margin:GE,"margin-bottom":GE,"margin-left":GE,"margin-right":GE,"margin-top":GE,"margin-block":GE,"margin-block-end":GE,"margin-block-start":GE,"margin-inline":GE,"margin-inline-end":GE,"margin-inline-start":GE,padding:GE,"padding-bottom":GE,"padding-left":GE,"padding-right":GE,"padding-top":GE,"padding-block":GE,"padding-block-end":GE,"padding-block-start":GE,"padding-inline":GE,"padding-inline-end":GE,"padding-inline-start":GE,"mask-position-x":GE,"mask-position-y":GE,"mask-size":GE,height:GE,width:GE,"min-height":GE,"max-height":GE,"min-width":GE,"max-width":GE,bottom:GE,left:GE,top:GE,right:GE,inset:GE,"inset-block":GE,"inset-block-end":GE,"inset-block-start":GE,"inset-inline":GE,"inset-inline-end":GE,"inset-inline-start":GE,"box-shadow":GE,"text-shadow":GE,"column-gap":GE,"column-rule":GE,"column-rule-width":GE,"column-width":GE,"font-size":GE,"font-size-delta":GE,"letter-spacing":GE,"text-decoration-thickness":GE,"text-indent":GE,"text-stroke":GE,"text-stroke-width":GE,"word-spacing":GE,motion:GE,"motion-offset":GE,outline:GE,"outline-offset":GE,"outline-width":GE,perspective:GE,"perspective-origin-x":HE,"perspective-origin-y":HE,"transform-origin":HE,"transform-origin-x":HE,"transform-origin-y":HE,"transform-origin-z":HE,"transition-delay":WE,"transition-duration":WE,"vertical-align":GE,"flex-basis":GE,"shape-margin":GE,size:GE,gap:GE,grid:GE,"grid-gap":GE,"row-gap":GE,"grid-row-gap":GE,"grid-column-gap":GE,"grid-template-rows":GE,"grid-template-columns":GE,"grid-auto-rows":GE,"grid-auto-columns":GE,"box-shadow-x":GE,"box-shadow-y":GE,"box-shadow-blur":GE,"box-shadow-spread":GE,"font-line-height":GE,"text-shadow-x":GE,"text-shadow-y":GE,"text-shadow-blur":GE});function $E(t,e,n){if(null==e)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=$E(t,e[r],n);else if("object"===typeof e)if("fallbacks"===t)for(var i in e)e[i]=$E(i,e[i],n);else for(var o in e)e[o]=$E(t+"-"+o,e[o],n);else if("number"===typeof e&&!1===isNaN(e)){var a=n[t]||YE[t];return!a||0===e&&a===GE?e.toString():"function"===typeof a?a(e).toString():""+e+a}return e}var KE=function(t){void 0===t&&(t={});var e=XE(t);return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r in t)t[r]=$E(r,t[r],e);return t},onChangeValue:function(t,n){return $E(n,t,e)}}},JE="",QE="",tI="",eI="",nI=aS&&"ontouchstart"in document.documentElement;if(aS){var rI={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},iI=document.createElement("p").style;for(var oI in rI)if(oI+"Transform"in iI){JE=oI,QE=rI[oI];break}"Webkit"===JE&&"msHyphens"in iI&&(JE="ms",QE=rI.ms,eI="edge"),"Webkit"===JE&&"-apple-trailing-word"in iI&&(tI="apple")}var aI=JE,sI=QE,lI=tI,uI=eI,cI=nI;var hI={noPrefill:["appearance"],supportedProperty:function(t){return"appearance"===t&&("ms"===aI?"-webkit-"+t:sI+t)}},fI={noPrefill:["color-adjust"],supportedProperty:function(t){return"color-adjust"===t&&("Webkit"===aI?sI+"print-"+t:t)}},pI=/[-\s]+(.)?/g;function dI(t,e){return e?e.toUpperCase():""}function mI(t){return t.replace(pI,dI)}function gI(t){return mI("-"+t)}var vI,yI={noPrefill:["mask"],supportedProperty:function(t,e){if(!/^mask/.test(t))return!1;if("Webkit"===aI){var n="mask-image";if(mI(n)in e)return t;if(aI+gI(n)in e)return sI+t}return t}},_I={noPrefill:["text-orientation"],supportedProperty:function(t){return"text-orientation"===t&&("apple"!==lI||cI?t:sI+t)}},xI={noPrefill:["transform"],supportedProperty:function(t,e,n){return"transform"===t&&(n.transform?t:sI+t)}},bI={noPrefill:["transition"],supportedProperty:function(t,e,n){return"transition"===t&&(n.transition?t:sI+t)}},wI={noPrefill:["writing-mode"],supportedProperty:function(t){return"writing-mode"===t&&("Webkit"===aI||"ms"===aI&&"edge"!==uI?sI+t:t)}},kI={noPrefill:["user-select"],supportedProperty:function(t){return"user-select"===t&&("Moz"===aI||"ms"===aI||"apple"===lI?sI+t:t)}},SI={supportedProperty:function(t,e){return!!/^break-/.test(t)&&("Webkit"===aI?"WebkitColumn"+gI(t)in e&&sI+"column-"+t:"Moz"===aI&&("page"+gI(t)in e&&"page-"+t))}},EI={supportedProperty:function(t,e){if(!/^(border|margin|padding)-inline/.test(t))return!1;if("Moz"===aI)return t;var n=t.replace("-inline","");return aI+gI(n)in e&&sI+n}},II={supportedProperty:function(t,e){return mI(t)in e&&t}},CI={supportedProperty:function(t,e){var n=gI(t);return"-"===t[0]||"-"===t[0]&&"-"===t[1]?t:aI+n in e?sI+t:"Webkit"!==aI&&"Webkit"+n in e&&"-webkit-"+t}},AI={supportedProperty:function(t){return"scroll-snap"===t.substring(0,11)&&("ms"===aI?""+sI+t:t)}},PI={supportedProperty:function(t){return"overscroll-behavior"===t&&("ms"===aI?sI+"scroll-chaining":t)}},TI={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},MI={supportedProperty:function(t,e){var n=TI[t];return!!n&&(aI+gI(n)in e&&sI+n)}},LI={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},RI=Object.keys(LI),NI=function(t){return sI+t},OI={supportedProperty:function(t,e,n){var r=n.multiple;if(RI.indexOf(t)>-1){var i=LI[t];if(!Array.isArray(i))return aI+gI(i)in e&&sI+i;if(!r)return!1;for(var o=0;o<i.length;o++)if(!(aI+gI(i[0])in e))return!1;return i.map(NI)}return!1}},zI=[hI,fI,yI,_I,xI,bI,wI,kI,SI,EI,II,CI,AI,PI,MI,OI],DI=zI.filter((function(t){return t.supportedProperty})).map((function(t){return t.supportedProperty})),FI=zI.filter((function(t){return t.noPrefill})).reduce((function(t,e){return t.push.apply(t,(0,u.Z)(e.noPrefill)),t}),[]),BI={};if(aS){vI=document.createElement("p");var jI=window.getComputedStyle(document.documentElement,"");for(var ZI in jI)isNaN(ZI)||(BI[jI[ZI]]=jI[ZI]);FI.forEach((function(t){return delete BI[t]}))}function UI(t,e){if(void 0===e&&(e={}),!vI)return t;if(null!=BI[t])return BI[t];"transition"!==t&&"transform"!==t||(e[t]=t in vI.style);for(var n=0;n<DI.length&&(BI[t]=DI[n](t,vI.style,e),!BI[t]);n++);try{vI.style[t]=""}catch(r){return!1}return BI[t]}var VI,qI={},GI={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},WI=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function HI(t,e,n){if("var"===e)return"var";if("all"===e)return"all";if("all"===n)return", all";var r=e?UI(e):", "+UI(n);return r||(e||n)}function XI(t,e){var n=e;if(!VI||"content"===t)return e;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=t+n;if(null!=qI[r])return qI[r];try{VI.style[t]=n}catch(i){return qI[r]=!1,!1}if(GI[t])n=n.replace(WI,HI);else if(""===VI.style[t]&&("-ms-flex"===(n=sI+n)&&(VI.style[t]="-ms-flexbox"),VI.style[t]=n,""===VI.style[t]))return qI[r]=!1,!1;return VI.style[t]="",qI[r]=n,qI[r]}aS&&(VI=document.createElement("p"));var YI=function(){function t(e){for(var n in e){var r=e[n];if("fallbacks"===n&&Array.isArray(r))e[n]=r.map(t);else{var i=!1,o=UI(n);o&&o!==n&&(i=!0);var a=!1,s=XI(o,hS(r));s&&s!==r&&(a=!0),(i||a)&&(i&&delete e[n],e[o||n]=s||r)}}return e}return{onProcessRule:function(t){if("keyframes"===t.type){var e=t;e.at=function(t){return"-"===t[1]||"ms"===aI?t:"@"+sI+"keyframes"+t.substr(10)}(e.at)}},onProcessStyle:function(e,n){return"style"!==n.type?e:t(e)},onChangeValue:function(t,e){return XI(e,hS(t))||t}}};var $I=function(){var t=function(t,e){return t.length===e.length?t>e?1:-1:t.length-e.length};return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r={},i=Object.keys(e).sort(t),o=0;o<i.length;o++)r[i[o]]=e[i[o]];return r}}};var KI=mE({plugins:[IE(),RE(),DE(),qE(),KE(),"undefined"===typeof window?null:YI(),$I()]}),JI=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.disableGlobal,n=void 0!==e&&e,r=t.productionPrefix,i=void 0===r?"jss":r,o=t.seed,a=void 0===o?"":o,s=""===a?"":"".concat(a,"-"),l=0,u=function(){return l+=1};return function(t,e){var r=e.options.name;if(r&&0===r.indexOf("Mui")&&!e.options.link&&!n){if(-1!==wE.indexOf(t.key))return"Mui-".concat(t.key);var o="".concat(s).concat(r,"-").concat(t.key);return e.options.theme[bE]&&""===a?"".concat(o,"-").concat(u()):o}return"".concat(s).concat(i).concat(u())}}(),QI={disableGeneration:!1,generateClassName:JI,jss:KI,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},tC=t.createContext(QI);var eC=-1e9;function nC(){return eC+=1}var rC=["variant"];function iC(t){return 0===t.length}function oC(t){var e="function"===typeof t;return{create:function(n,r){var i;try{i=e?t(n):t}catch(l){throw l}if(!r||!n.components||!n.components[r]||!n.components[r].styleOverrides&&!n.components[r].variants)return i;var o=n.components[r].styleOverrides||{},a=n.components[r].variants||[],s=(0,$n.Z)({},i);return Object.keys(o).forEach((function(t){s[t]=(0,ur.Z)(s[t]||{},o[t])})),a.forEach((function(t){var e=function(t){var e=t.variant,n=(0,Yn.Z)(t,rC),r=e||"";return Object.keys(n).sort().forEach((function(e){r+="color"===e?iC(r)?t[e]:(0,yr.Z)(t[e]):"".concat(iC(r)?e:(0,yr.Z)(e)).concat((0,yr.Z)(t[e].toString()))})),r}(t.props);s[e]=(0,ur.Z)(s[e]||{},t.style)})),s},options:{}}}var aC={},sC=["name","classNamePrefix","Component","defaultTheme"];function lC(t,e,n){var r=t.state;if(t.stylesOptions.disableGeneration)return e||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var i=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,i=!0),e!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=e,i=!0),i&&(r.cacheClasses.value=yE({baseClasses:r.cacheClasses.lastJSS,newClasses:e,Component:n})),r.cacheClasses.value}function uC(t,e){var n=t.state,r=t.theme,i=t.stylesOptions,o=t.stylesCreator,a=t.name;if(!i.disableGeneration){var s=xE.get(i.sheetsManager,o,r);s||(s={refs:0,staticSheet:null,dynamicStyles:null},xE.set(i.sheetsManager,o,r,s));var l=(0,$n.Z)({},o.options,i,{theme:r,flip:"boolean"===typeof i.flip?i.flip:"rtl"===r.direction});l.generateId=l.serverGenerateClassName||l.generateClassName;var u=i.sheetsRegistry;if(0===s.refs){var c;i.sheetsCache&&(c=xE.get(i.sheetsCache,o,r));var h=o.create(r,a);c||((c=i.jss.createStyleSheet(h,(0,$n.Z)({link:!1},l))).attach(),i.sheetsCache&&xE.set(i.sheetsCache,o,r,c)),u&&u.add(c),s.staticSheet=c,s.dynamicStyles=vE(h)}if(s.dynamicStyles){var f=i.jss.createStyleSheet(s.dynamicStyles,(0,$n.Z)({link:!0},l));f.update(e),f.attach(),n.dynamicSheet=f,n.classes=yE({baseClasses:s.staticSheet.classes,newClasses:f.classes}),u&&u.add(f)}else n.classes=s.staticSheet.classes;s.refs+=1}}function cC(t,e){var n=t.state;n.dynamicSheet&&n.dynamicSheet.update(e)}function hC(t){var e=t.state,n=t.theme,r=t.stylesOptions,i=t.stylesCreator;if(!r.disableGeneration){var o=xE.get(r.sheetsManager,i,n);o.refs-=1;var a=r.sheetsRegistry;0===o.refs&&(xE.delete(r.sheetsManager,i,n),r.jss.removeStyleSheet(o.staticSheet),a&&a.remove(o.staticSheet)),e.dynamicSheet&&(r.jss.removeStyleSheet(e.dynamicSheet),a&&a.remove(e.dynamicSheet))}}function fC(e,n){var r,i=t.useRef([]),o=t.useMemo((function(){return{}}),n);i.current!==o&&(i.current=o,r=e()),t.useEffect((function(){return function(){r&&r()}}),[o])}function pC(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.name,i=n.classNamePrefix,o=n.Component,a=n.defaultTheme,s=void 0===a?aC:a,l=(0,Yn.Z)(n,sC),u=oC(e),c=r||i||"makeStyles";u.options={index:nC(),name:r,meta:c,classNamePrefix:c};var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,Io.Z)()||s,i=(0,$n.Z)({},t.useContext(tC),l),a=t.useRef(),c=t.useRef();fC((function(){var t={name:r,state:{},stylesCreator:u,stylesOptions:i,theme:n};return uC(t,e),c.current=!1,a.current=t,function(){hC(t)}}),[n,u]),t.useEffect((function(){c.current&&cC(a.current,e),c.current=!0}));var h=lC(a.current,e.classes,o);return h};return h}var dC=n(1979),mC=(0,dC.Z)({typography:{},components:{MuiSelect:{styleOverrides:{icon:{color:"#fff"},root:{"::before":{borderColor:"#fff"}}}},MuiInput:{styleOverrides:{root:{color:"#fff","::before":{borderColor:"#fff"}}}},MuiFormLabel:{styleOverrides:{root:{color:"#fff"}}}},shape:{borderRadius:0},palette:{primary:{main:"#2071B5"},secondary:{main:"#DD3333"},red:"#DD3333",yellow:"#FFDA00",blue:"#2071B5",greyV:"#4E4B48",white:"#FFFFFF",darkGreen:"#005C63",green:"#3DC07C"},zIndex:{snackbar:3e3}}),gC=n(9120),vC=n(3073),yC=n(162);function _C(e,n,r,o,a){var s="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,l=t.useState((function(){return a&&s?r(e).matches:o?o(e).matches:n})),u=(0,i.Z)(l,2),c=u[0],h=u[1];return(0,yC.Z)((function(){var t=!0;if(s){var n=r(e),i=function(){t&&h(n.matches)};return i(),n.addListener(i),function(){t=!1,n.removeListener(i)}}}),[e,r,s]),c}var xC=e.useSyncExternalStore;function bC(e,n,r,o){var a=t.useCallback((function(){return n}),[n]),s=t.useMemo((function(){if(null!==o){var t=o(e).matches;return function(){return t}}return a}),[a,e,o]),l=t.useMemo((function(){if(null===r)return[a,function(){return function(){}}];var t=r(e);return[function(){return t.matches},function(e){return t.addListener(e),function(){t.removeListener(e)}}]}),[a,r,e]),u=(0,i.Z)(l,2),c=u[0],h=u[1];return xC(h,c,s)}var wC=n(767),kC=n(7630),SC=n(3736),EC=n(4036),IC=n(2065),CC=n(5159),AC=n(208);function PC(t){return(0,CC.Z)("MuiPaper",t)}(0,AC.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var TC=["className","component","elevation","square","variant"],MC=function(t){return((t<1?5.11916*Math.pow(t,2):4.5*Math.log(t+1)+2)/100).toFixed(2)},LC=(0,kC.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,e[n.variant],!n.square&&e.rounded,"elevation"===n.variant&&e["elevation".concat(n.elevation)]]}})((function(t){var e=t.theme,n=t.ownerState;return(0,$n.Z)({backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},!n.square&&{borderRadius:e.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat(e.palette.divider)},"elevation"===n.variant&&(0,$n.Z)({boxShadow:e.shadows[n.elevation]},"dark"===e.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,IC.Fq)("#fff",MC(n.elevation)),", ").concat((0,IC.Fq)("#fff",MC(n.elevation)),")")}))})),RC=t.forwardRef((function(t,e){var n=(0,SC.Z)({props:t,name:"MuiPaper"}),r=n.className,i=n.component,o=void 0===i?"div":i,a=n.elevation,s=void 0===a?1:a,l=n.square,u=void 0!==l&&l,c=n.variant,h=void 0===c?"elevation":c,f=(0,Yn.Z)(n,TC),p=(0,$n.Z)({},n,{component:o,elevation:s,square:u,variant:h}),d=function(t){var e=t.square,n=t.elevation,r=t.variant,i=t.classes,o={root:["root",r,!e&&"rounded","elevation"===r&&"elevation".concat(n)]};return(0,wC.Z)(o,PC,i)}(p);return(0,Xo.jsx)(LC,(0,$n.Z)({as:o,ownerState:p,className:(0,Kn.Z)(d.root,r),ref:e},f))})),NC=RC;function OC(t){return(0,CC.Z)("MuiAppBar",t)}(0,AC.Z)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);var zC=["className","color","enableColorOnDark","position"],DC=(0,kC.ZP)(NC,{name:"MuiAppBar",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,e["position".concat((0,EC.Z)(n.position))],e["color".concat((0,EC.Z)(n.color))]]}})((function(t){var e=t.theme,n=t.ownerState,r="light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900];return(0,$n.Z)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===n.position&&{position:"fixed",zIndex:e.zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===n.position&&{position:"absolute",zIndex:e.zIndex.appBar,top:0,left:"auto",right:0},"sticky"===n.position&&{position:"sticky",zIndex:e.zIndex.appBar,top:0,left:"auto",right:0},"static"===n.position&&{position:"static"},"relative"===n.position&&{position:"relative"},"default"===n.color&&{backgroundColor:r,color:e.palette.getContrastText(r)},n.color&&"default"!==n.color&&"inherit"!==n.color&&"transparent"!==n.color&&{backgroundColor:e.palette[n.color].main,color:e.palette[n.color].contrastText},"inherit"===n.color&&{color:"inherit"},"dark"===e.palette.mode&&!n.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===n.color&&(0,$n.Z)({backgroundColor:"transparent",color:"inherit"},"dark"===e.palette.mode&&{backgroundImage:"none"}))})),FC=t.forwardRef((function(t,e){var n=(0,SC.Z)({props:t,name:"MuiAppBar"}),r=n.className,i=n.color,o=void 0===i?"primary":i,a=n.enableColorOnDark,s=void 0!==a&&a,l=n.position,u=void 0===l?"fixed":l,c=(0,Yn.Z)(n,zC),h=(0,$n.Z)({},n,{color:o,position:u,enableColorOnDark:s}),f=function(t){var e=t.color,n=t.position,r=t.classes,i={root:["root","color".concat((0,EC.Z)(e)),"position".concat((0,EC.Z)(n))]};return(0,wC.Z)(i,OC,r)}(h);return(0,Xo.jsx)(DC,(0,$n.Z)({square:!0,component:"header",ownerState:h,elevation:4,className:(0,Kn.Z)(f.root,r,"fixed"===u&&"mui-fixed"),ref:e},c))})),BC=FC;function jC(t){return(0,CC.Z)("MuiToolbar",t)}(0,AC.Z)("MuiToolbar",["root","gutters","regular","dense"]);var ZC=["className","component","disableGutters","variant"],UC=(0,kC.ZP)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})((function(t){var e=t.theme,n=t.ownerState;return(0,$n.Z)({position:"relative",display:"flex",alignItems:"center"},!n.disableGutters&&(0,c.Z)({paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),"dense"===n.variant&&{minHeight:48})}),(function(t){var e=t.theme;return"regular"===t.ownerState.variant&&e.mixins.toolbar})),VC=t.forwardRef((function(t,e){var n=(0,SC.Z)({props:t,name:"MuiToolbar"}),r=n.className,i=n.component,o=void 0===i?"div":i,a=n.disableGutters,s=void 0!==a&&a,l=n.variant,u=void 0===l?"regular":l,c=(0,Yn.Z)(n,ZC),h=(0,$n.Z)({},n,{component:o,disableGutters:s,variant:u}),f=function(t){var e=t.classes,n={root:["root",!t.disableGutters&&"gutters",t.variant]};return(0,wC.Z)(n,jC,e)}(h);return(0,Xo.jsx)(UC,(0,$n.Z)({as:o,className:(0,Kn.Z)(f.root,r),ref:e,ownerState:h},c))})),qC=VC,GC=n(2071),WC=n(9683),HC=n(8221);var XC=function(e){var n=e.className,r=e.classes,o=e.pulsate,a=void 0!==o&&o,s=e.rippleX,l=e.rippleY,u=e.rippleSize,c=e.in,h=e.onExited,f=e.timeout,p=t.useState(!1),d=(0,i.Z)(p,2),m=d[0],g=d[1],v=(0,Kn.Z)(n,r.ripple,r.rippleVisible,a&&r.ripplePulsate),y={width:u,height:u,top:-u/2+l,left:-u/2+s},_=(0,Kn.Z)(r.child,m&&r.childLeaving,a&&r.childPulsate);return c||m||g(!0),t.useEffect((function(){if(!c&&null!=h){var t=setTimeout(h,f);return function(){clearTimeout(t)}}}),[h,c,f]),(0,Xo.jsx)("span",{className:v,style:y,children:(0,Xo.jsx)("span",{className:_})})};var YC,$C,KC,JC,QC,tA,eA,nA,rA=(0,AC.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),iA=["center","classes","className"],oA=Wn(QC||(QC=YC||(YC=o(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),aA=Wn(tA||(tA=$C||($C=o(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),sA=Wn(eA||(eA=KC||(KC=o(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),lA=(0,kC.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),uA=(0,kC.ZP)(XC,{name:"MuiTouchRipple",slot:"Ripple"})(nA||(nA=JC||(JC=o(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),rA.rippleVisible,oA,550,(function(t){return t.theme.transitions.easing.easeInOut}),rA.ripplePulsate,(function(t){return t.theme.transitions.duration.shorter}),rA.child,rA.childLeaving,aA,550,(function(t){return t.theme.transitions.easing.easeInOut}),rA.childPulsate,sA,(function(t){return t.theme.transitions.easing.easeInOut})),cA=t.forwardRef((function(e,n){var r=(0,SC.Z)({props:e,name:"MuiTouchRipple"}),o=r.center,a=void 0!==o&&o,s=r.classes,l=void 0===s?{}:s,c=r.className,h=(0,Yn.Z)(r,iA),f=t.useState([]),p=(0,i.Z)(f,2),d=p[0],m=p[1],g=t.useRef(0),v=t.useRef(null);t.useEffect((function(){v.current&&(v.current(),v.current=null)}),[d]);var y=t.useRef(!1),_=t.useRef(null),x=t.useRef(null),b=t.useRef(null);t.useEffect((function(){return function(){clearTimeout(_.current)}}),[]);var w=t.useCallback((function(t){var e=t.pulsate,n=t.rippleX,r=t.rippleY,i=t.rippleSize,o=t.cb;m((function(t){return[].concat((0,u.Z)(t),[(0,Xo.jsx)(uA,{classes:{ripple:(0,Kn.Z)(l.ripple,rA.ripple),rippleVisible:(0,Kn.Z)(l.rippleVisible,rA.rippleVisible),ripplePulsate:(0,Kn.Z)(l.ripplePulsate,rA.ripplePulsate),child:(0,Kn.Z)(l.child,rA.child),childLeaving:(0,Kn.Z)(l.childLeaving,rA.childLeaving),childPulsate:(0,Kn.Z)(l.childPulsate,rA.childPulsate)},timeout:550,pulsate:e,rippleX:n,rippleY:r,rippleSize:i},g.current)])})),g.current+=1,v.current=o}),[l]),k=t.useCallback((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.pulsate,i=void 0!==r&&r,o=e.center,s=void 0===o?a||e.pulsate:o,l=e.fakeElement,u=void 0!==l&&l;if("mousedown"===t.type&&y.current)y.current=!1;else{"touchstart"===t.type&&(y.current=!0);var c,h,f,p=u?null:b.current,d=p?p.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===t.clientX&&0===t.clientY||!t.clientX&&!t.touches)c=Math.round(d.width/2),h=Math.round(d.height/2);else{var m=t.touches?t.touches[0]:t,g=m.clientX,v=m.clientY;c=Math.round(g-d.left),h=Math.round(v-d.top)}if(s)(f=Math.sqrt((2*Math.pow(d.width,2)+Math.pow(d.height,2))/3))%2===0&&(f+=1);else{var k=2*Math.max(Math.abs((p?p.clientWidth:0)-c),c)+2,S=2*Math.max(Math.abs((p?p.clientHeight:0)-h),h)+2;f=Math.sqrt(Math.pow(k,2)+Math.pow(S,2))}t.touches?null===x.current&&(x.current=function(){w({pulsate:i,rippleX:c,rippleY:h,rippleSize:f,cb:n})},_.current=setTimeout((function(){x.current&&(x.current(),x.current=null)}),80)):w({pulsate:i,rippleX:c,rippleY:h,rippleSize:f,cb:n})}}),[a,w]),S=t.useCallback((function(){k({},{pulsate:!0})}),[k]),E=t.useCallback((function(t,e){if(clearTimeout(_.current),"touchend"===t.type&&x.current)return x.current(),x.current=null,void(_.current=setTimeout((function(){E(t,e)})));x.current=null,m((function(t){return t.length>0?t.slice(1):t})),v.current=e}),[]);return t.useImperativeHandle(n,(function(){return{pulsate:S,start:k,stop:E}}),[S,k,E]),(0,Xo.jsx)(lA,(0,$n.Z)({className:(0,Kn.Z)(l.root,rA.root,c),ref:b},h,{children:(0,Xo.jsx)(Ho,{component:null,exit:!0,children:d})}))})),hA=cA;function fA(t){return(0,CC.Z)("MuiButtonBase",t)}var pA,dA=(0,AC.Z)("MuiButtonBase",["root","disabled","focusVisible"]),mA=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],gA=(0,kC.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(t,e){return e.root}})((pA={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,c.Z)(pA,"&.".concat(dA.disabled),{pointerEvents:"none",cursor:"default"}),(0,c.Z)(pA,"@media print",{colorAdjust:"exact"}),pA)),vA=t.forwardRef((function(e,n){var r=(0,SC.Z)({props:e,name:"MuiButtonBase"}),o=r.action,a=r.centerRipple,s=void 0!==a&&a,l=r.children,u=r.className,c=r.component,h=void 0===c?"button":c,f=r.disabled,p=void 0!==f&&f,d=r.disableRipple,m=void 0!==d&&d,g=r.disableTouchRipple,v=void 0!==g&&g,y=r.focusRipple,_=void 0!==y&&y,x=r.LinkComponent,b=void 0===x?"a":x,w=r.onBlur,k=r.onClick,S=r.onContextMenu,E=r.onDragLeave,I=r.onFocus,C=r.onFocusVisible,A=r.onKeyDown,P=r.onKeyUp,T=r.onMouseDown,M=r.onMouseLeave,L=r.onMouseUp,R=r.onTouchEnd,N=r.onTouchMove,O=r.onTouchStart,z=r.tabIndex,D=void 0===z?0:z,F=r.TouchRippleProps,B=r.touchRippleRef,j=r.type,Z=(0,Yn.Z)(r,mA),U=t.useRef(null),V=t.useRef(null),q=(0,GC.Z)(V,B),G=(0,HC.Z)(),W=G.isFocusVisibleRef,H=G.onFocus,X=G.onBlur,Y=G.ref,$=t.useState(!1),K=(0,i.Z)($,2),J=K[0],Q=K[1];p&&J&&Q(!1),t.useImperativeHandle(o,(function(){return{focusVisible:function(){Q(!0),U.current.focus()}}}),[]);var tt=t.useState(!1),et=(0,i.Z)(tt,2),nt=et[0],rt=et[1];t.useEffect((function(){rt(!0)}),[]);var it=nt&&!m&&!p;function ot(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return(0,WC.Z)((function(r){return e&&e(r),!n&&V.current&&V.current[t](r),!0}))}t.useEffect((function(){J&&_&&!m&&nt&&V.current.pulsate()}),[m,_,J,nt]);var at=ot("start",T),st=ot("stop",S),lt=ot("stop",E),ut=ot("stop",L),ct=ot("stop",(function(t){J&&t.preventDefault(),M&&M(t)})),ht=ot("start",O),ft=ot("stop",R),pt=ot("stop",N),dt=ot("stop",(function(t){X(t),!1===W.current&&Q(!1),w&&w(t)}),!1),mt=(0,WC.Z)((function(t){U.current||(U.current=t.currentTarget),H(t),!0===W.current&&(Q(!0),C&&C(t)),I&&I(t)})),gt=function(){var t=U.current;return h&&"button"!==h&&!("A"===t.tagName&&t.href)},vt=t.useRef(!1),yt=(0,WC.Z)((function(t){_&&!vt.current&&J&&V.current&&" "===t.key&&(vt.current=!0,V.current.stop(t,(function(){V.current.start(t)}))),t.target===t.currentTarget&&gt()&&" "===t.key&&t.preventDefault(),A&&A(t),t.target===t.currentTarget&&gt()&&"Enter"===t.key&&!p&&(t.preventDefault(),k&&k(t))})),_t=(0,WC.Z)((function(t){_&&" "===t.key&&V.current&&J&&!t.defaultPrevented&&(vt.current=!1,V.current.stop(t,(function(){V.current.pulsate(t)}))),P&&P(t),k&&t.target===t.currentTarget&&gt()&&" "===t.key&&!t.defaultPrevented&&k(t)})),xt=h;"button"===xt&&(Z.href||Z.to)&&(xt=b);var bt={};"button"===xt?(bt.type=void 0===j?"button":j,bt.disabled=p):(Z.href||Z.to||(bt.role="button"),p&&(bt["aria-disabled"]=p));var wt=(0,GC.Z)(Y,U),kt=(0,GC.Z)(n,wt);var St=(0,$n.Z)({},r,{centerRipple:s,component:h,disabled:p,disableRipple:m,disableTouchRipple:v,focusRipple:_,tabIndex:D,focusVisible:J}),Et=function(t){var e=t.disabled,n=t.focusVisible,r=t.focusVisibleClassName,i=t.classes,o={root:["root",e&&"disabled",n&&"focusVisible"]},a=(0,wC.Z)(o,fA,i);return n&&r&&(a.root+=" ".concat(r)),a}(St);return(0,Xo.jsxs)(gA,(0,$n.Z)({as:xt,className:(0,Kn.Z)(Et.root,u),ownerState:St,onBlur:dt,onClick:k,onContextMenu:st,onFocus:mt,onKeyDown:yt,onKeyUp:_t,onMouseDown:at,onMouseLeave:ct,onMouseUp:ut,onDragLeave:lt,onTouchEnd:ft,onTouchMove:pt,onTouchStart:ht,ref:kt,tabIndex:p?-1:D,type:j},bt,Z,{children:[l,it?(0,Xo.jsx)(hA,(0,$n.Z)({ref:q,center:s},F)):null]}))})),yA=vA;function _A(t){return(0,CC.Z)("MuiIconButton",t)}var xA,bA,wA,kA,SA=(0,AC.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),EA=["edge","children","className","color","disabled","disableFocusRipple","size"],IA=(0,kC.ZP)(yA,{name:"MuiIconButton",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,"default"!==n.color&&e["color".concat((0,EC.Z)(n.color))],n.edge&&e["edge".concat((0,EC.Z)(n.edge))],e["size".concat((0,EC.Z)(n.size))]]}})((function(t){var e=t.theme,n=t.ownerState;return(0,$n.Z)({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:(0,IC.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(function(t){var e=t.theme,n=t.ownerState;return(0,$n.Z)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,$n.Z)({color:e.palette[n.color].main},!n.disableRipple&&{"&:hover":{backgroundColor:(0,IC.Fq)(e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),"small"===n.size&&{padding:5,fontSize:e.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:e.typography.pxToRem(28)},(0,c.Z)({},"&.".concat(SA.disabled),{backgroundColor:"transparent",color:e.palette.action.disabled}))})),CA=t.forwardRef((function(t,e){var n=(0,SC.Z)({props:t,name:"MuiIconButton"}),r=n.edge,i=void 0!==r&&r,o=n.children,a=n.className,s=n.color,l=void 0===s?"default":s,u=n.disabled,c=void 0!==u&&u,h=n.disableFocusRipple,f=void 0!==h&&h,p=n.size,d=void 0===p?"medium":p,m=(0,Yn.Z)(n,EA),g=(0,$n.Z)({},n,{edge:i,color:l,disabled:c,disableFocusRipple:f,size:d}),v=function(t){var e=t.classes,n=t.disabled,r=t.color,i=t.edge,o=t.size,a={root:["root",n&&"disabled","default"!==r&&"color".concat((0,EC.Z)(r)),i&&"edge".concat((0,EC.Z)(i)),"size".concat((0,EC.Z)(o))]};return(0,wC.Z)(a,_A,e)}(g);return(0,Xo.jsx)(IA,(0,$n.Z)({className:(0,Kn.Z)(v.root,a),centerRipple:!0,focusRipple:!f,disabled:c,ref:e,ownerState:g},m,{children:o}))})),AA=CA,PA=n(5860),TA=n(3578),MA=n(98),LA=n(5539),RA=["title","titleId"];function NA(){return NA=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NA.apply(this,arguments)}function OA(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function zA(e,n){var r=e.title,i=e.titleId,o=OA(e,RA);return t.createElement("svg",NA({id:"Ebene_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 599.6 122.6",style:{enableBackground:"new 0 0 599.6 122.6"},xmlSpace:"preserve",ref:n,"aria-labelledby":i},o),r?t.createElement("title",{id:i},r):null,xA||(xA=t.createElement("style",{type:"text/css"},"\n\t.st0{fill:#FFFFFF;}\n\t.st1{fill:#009EE0;}\n\t.st2{fill:#747577;}\n\t.st3{fill:#CBD300;}\n")),bA||(bA=t.createElement("polygon",{className:"st0",points:"18.6,62.3 40.1,99.5 61.4,62.3 40.1,25.2 "})),wA||(wA=t.createElement("g",null,t.createElement("path",{className:"st1",d:"M61.5,65.3L41.7,99.9c-1.1,1.8-3.1,2-4.4-0.2L17.5,65.5c-1.7-2.8-1.7-4.3-0.1-7.2l20.3-35.1 c0.8-1.5,2.7-1.7,3.9,0.3l20.2,34.8C63,60.5,62.8,63,61.5,65.3"}),t.createElement("path",{className:"st2",d:"M98,106.5l20.5-35.4c1.2-2.2,0-4.1-2.8-4.1l-39.1,0c-2.8,0-4.5,0.8-5.8,3.2l-20.2,35.1c-1.2,2-0.2,3.6,2,3.6 l40.6-0.1C95.5,108.7,97,108.1,98,106.5"}),t.createElement("path",{className:"st3",d:"M97.1,17.1l20.5,35.4c1.2,2.2,0,4.1-2.8,4.1l-39.1,0c-2.8,0-4.5-0.8-5.8-3.2L49.7,18.4c-1.2-2-0.2-3.6,2-3.6 l40.6,0.1C94.6,14.9,96.2,15.5,97.1,17.1"}))),kA||(kA=t.createElement("g",null,t.createElement("path",{className:"st0",d:"M175.7,73.2c-0.4-0.9-0.9-2.1-1.5-3.6c-0.7-1.5-1.4-3.1-2.3-4.8c-0.8-1.7-1.7-3.5-2.5-5.4 c-0.9-1.9-1.7-3.6-2.5-5.2c-0.8-1.6-1.5-3-2.1-4.3c-0.6-1.2-1.1-2.1-1.4-2.6c-0.5,4.5-0.8,9.4-1.1,14.7c-0.3,5.3-0.5,10.8-0.7,16.6 H158c0.3-6.8,0.7-13.3,1.1-19.5c0.4-6.2,0.9-12.2,1.5-17.9h3.2c1.1,1.8,2.2,3.9,3.5,6.2s2.4,4.8,3.7,7.3s2.4,5,3.5,7.5 c1.1,2.5,2.1,4.7,3,6.7c0.9-2,1.9-4.2,3-6.7c1.1-2.5,2.3-5,3.5-7.5s2.4-5,3.7-7.3s2.4-4.4,3.5-6.2h3.1c0.6,5.7,1.1,11.6,1.5,17.9 c0.4,6.2,0.8,12.7,1.1,19.5h-3.7c-0.2-5.8-0.5-11.3-0.7-16.6c-0.3-5.3-0.6-10.2-1.1-14.7c-0.3,0.5-0.7,1.4-1.3,2.6 c-0.6,1.2-1.3,2.6-2.1,4.3c-0.8,1.6-1.6,3.4-2.5,5.2c-0.9,1.9-1.7,3.7-2.5,5.4c-0.8,1.7-1.6,3.4-2.2,4.8c-0.7,1.5-1.2,2.7-1.5,3.6 H175.7z"}),t.createElement("path",{className:"st0",d:"M213.9,50.1c1.8,0,3.4,0.3,4.7,0.8c1.3,0.5,2.3,1.2,3.1,2.2c0.8,0.9,1.4,2,1.7,3.3c0.4,1.3,0.5,2.6,0.5,4.1V78 c-0.4,0.1-0.9,0.2-1.6,0.4s-1.5,0.3-2.4,0.4c-0.9,0.1-1.9,0.3-3,0.4c-1.1,0.1-2.2,0.1-3.4,0.1c-1.5,0-2.8-0.2-4.1-0.5 c-1.2-0.3-2.3-0.8-3.2-1.5s-1.6-1.6-2.2-2.7c-0.5-1.1-0.8-2.4-0.8-4c0-1.5,0.3-2.8,0.9-3.9c0.6-1.1,1.4-2,2.4-2.7 c1-0.7,2.3-1.2,3.7-1.5c1.4-0.3,3-0.5,4.7-0.5c0.5,0,1,0,1.6,0.1c0.6,0.1,1.1,0.1,1.6,0.2c0.5,0.1,1,0.2,1.3,0.3s0.6,0.2,0.8,0.2 V61c0-1-0.1-1.9-0.2-2.8c-0.1-0.9-0.5-1.7-0.9-2.5s-1.2-1.3-2.1-1.8c-0.9-0.5-2-0.7-3.5-0.7c-2.1,0-3.6,0.1-4.6,0.4 s-1.7,0.5-2.2,0.7l-0.5-3.1c0.6-0.3,1.6-0.6,2.8-0.8C210.5,50.2,212.1,50.1,213.9,50.1z M214.2,76.1c1.4,0,2.6,0,3.6-0.1 s1.9-0.2,2.6-0.4v-9.8c-0.4-0.2-1-0.4-1.9-0.6c-0.9-0.2-2.1-0.3-3.6-0.3c-0.9,0-1.8,0.1-2.7,0.2c-0.9,0.1-1.8,0.4-2.6,0.8 s-1.4,1-1.9,1.7s-0.8,1.7-0.8,2.9c0,1,0.2,1.9,0.5,2.6c0.3,0.7,0.8,1.3,1.5,1.7c0.6,0.4,1.4,0.7,2.3,0.9 C212.1,76,213.1,76.1,214.2,76.1z"}),t.createElement("path",{className:"st0",d:"M236.4,88.6h-3.5V51.7c1-0.4,2.4-0.7,4-1c1.6-0.3,3.7-0.5,6.2-0.5c2.1,0,3.9,0.3,5.6,1 c1.7,0.7,3.1,1.6,4.3,2.9c1.2,1.3,2.1,2.8,2.8,4.6c0.7,1.8,1,3.8,1,6.1c0,2.1-0.3,4.1-0.8,5.9c-0.6,1.8-1.4,3.3-2.5,4.6 c-1.1,1.3-2.4,2.3-4,3s-3.4,1.1-5.4,1.1c-1.8,0-3.4-0.3-4.8-0.8c-1.3-0.5-2.3-1-2.9-1.5V88.6z M236.4,73.6c0.3,0.3,0.7,0.5,1.2,0.8 s1.1,0.6,1.7,0.8c0.6,0.3,1.3,0.5,2.1,0.6s1.5,0.2,2.4,0.2c1.7,0,3.2-0.3,4.3-0.9c1.2-0.6,2.1-1.4,2.8-2.4c0.7-1,1.2-2.2,1.6-3.6 s0.5-2.9,0.5-4.4c0-3.7-0.9-6.5-2.8-8.5c-1.8-2-4.3-2.9-7.3-2.9c-1.7,0-3.1,0.1-4.2,0.2s-1.9,0.3-2.4,0.5V73.6z"}),t.createElement("path",{className:"st0",d:"M280.1,79.4c-2.4,0-4.7-0.4-6.7-1.3c-2.1-0.9-3.9-2.1-5.4-3.8c-1.5-1.7-2.7-3.7-3.6-6.1 c-0.9-2.4-1.3-5.2-1.3-8.3s0.5-5.9,1.4-8.3c1-2.4,2.2-4.5,3.8-6.1c1.6-1.7,3.4-2.9,5.5-3.8s4.3-1.3,6.5-1.3c1.4,0,2.7,0.1,3.8,0.3 c1.2,0.2,2.2,0.4,3,0.7c0.9,0.3,1.6,0.5,2.2,0.8c0.6,0.3,1.1,0.5,1.4,0.7l-1.2,3.2c-0.9-0.5-2-1.1-3.4-1.6 c-1.4-0.5-3.1-0.8-5.2-0.8c-2.3,0-4.4,0.4-6.1,1.2c-1.7,0.8-3.2,1.9-4.4,3.3c-1.2,1.4-2.1,3.2-2.7,5.1c-0.6,2-0.9,4.2-0.9,6.6 c0,2.5,0.3,4.7,0.9,6.7s1.5,3.7,2.6,5.1c1.2,1.4,2.6,2.5,4.2,3.2c1.7,0.8,3.6,1.1,5.8,1.1c2.4,0,4.4-0.2,6-0.7 c1.6-0.4,2.8-0.9,3.6-1.4l1,3.1c-0.3,0.2-0.7,0.4-1.3,0.6c-0.6,0.2-1.4,0.5-2.3,0.7c-0.9,0.3-2,0.5-3.2,0.6 C283,79.4,281.6,79.4,280.1,79.4z"}),t.createElement("path",{className:"st0",d:"M321.1,64.7c0,2.2-0.3,4.2-0.9,6c-0.6,1.8-1.5,3.3-2.6,4.6s-2.5,2.2-4,2.9s-3.3,1.1-5.1,1.1 c-1.9,0-3.6-0.4-5.1-1.1s-2.9-1.7-4-2.9c-1.1-1.3-2-2.8-2.6-4.6c-0.6-1.8-0.9-3.8-0.9-6c0-2.2,0.3-4.2,0.9-6 c0.6-1.8,1.5-3.3,2.6-4.6c1.1-1.3,2.5-2.3,4-3s3.3-1.1,5.1-1.1c1.9,0,3.6,0.4,5.1,1.1s2.9,1.7,4,3c1.1,1.3,2,2.8,2.6,4.6 C320.7,60.5,321.1,62.5,321.1,64.7z M317.3,64.7c0-3.5-0.8-6.3-2.4-8.3c-1.6-2.1-3.8-3.1-6.6-3.1c-2.8,0-5,1-6.6,3.1 c-1.6,2.1-2.4,4.9-2.4,8.3c0,3.5,0.8,6.3,2.4,8.3s3.8,3.1,6.6,3.1c2.8,0,5-1,6.6-3.1S317.3,68.2,317.3,64.7z"}),t.createElement("path",{className:"st0",d:"M328.7,51.7c1-0.3,2.4-0.6,4.1-1c1.7-0.4,3.8-0.5,6.5-0.5c3.5,0,6.1,1,7.7,3.1c0.2-0.1,0.5-0.4,1.1-0.7 c0.5-0.3,1.2-0.7,2-1.1c0.8-0.4,1.7-0.7,2.8-0.9c1.1-0.3,2.2-0.4,3.5-0.4c2.1,0,3.8,0.3,5.2,0.9s2.3,1.5,3.1,2.6 c0.7,1.1,1.2,2.5,1.5,4.1c0.3,1.6,0.4,3.3,0.4,5.2v15.6h-3.5V64.2c0-1.8-0.1-3.4-0.2-4.8s-0.5-2.5-1-3.3c-0.5-0.9-1.2-1.5-2.1-2 s-2.1-0.7-3.5-0.7c-1.1,0-2.1,0.1-2.9,0.3c-0.9,0.2-1.6,0.4-2.3,0.7c-0.6,0.3-1.2,0.6-1.6,0.9s-0.7,0.5-0.9,0.6 c0.3,0.9,0.6,2,0.7,3.2c0.2,1.2,0.2,2.4,0.2,3.7v15.9h-3.5V64.2c0-1.8-0.1-3.4-0.2-4.8s-0.5-2.5-1-3.3s-1.2-1.5-2.1-2 s-2.1-0.7-3.6-0.7c-1.7,0-3.1,0.1-4.3,0.3c-1.2,0.2-1.9,0.3-2.2,0.5v24.5h-3.5V51.7z"}),t.createElement("path",{className:"st0",d:"M378.8,88.6h-3.5V51.7c1-0.4,2.4-0.7,4-1c1.6-0.3,3.7-0.5,6.2-0.5c2.1,0,3.9,0.3,5.6,1 c1.7,0.7,3.1,1.6,4.3,2.9c1.2,1.3,2.1,2.8,2.8,4.6c0.7,1.8,1,3.8,1,6.1c0,2.1-0.3,4.1-0.8,5.9c-0.6,1.8-1.4,3.3-2.5,4.6 c-1.1,1.3-2.4,2.3-4,3s-3.4,1.1-5.4,1.1c-1.8,0-3.4-0.3-4.8-0.8c-1.3-0.5-2.3-1-2.9-1.5V88.6z M378.8,73.6c0.3,0.3,0.7,0.5,1.2,0.8 s1.1,0.6,1.7,0.8c0.6,0.3,1.3,0.5,2.1,0.6c0.8,0.2,1.5,0.2,2.4,0.2c1.7,0,3.2-0.3,4.3-0.9c1.2-0.6,2.1-1.4,2.8-2.4 c0.7-1,1.2-2.2,1.6-3.6s0.5-2.9,0.5-4.4c0-3.7-0.9-6.5-2.8-8.5c-1.8-2-4.3-2.9-7.3-2.9c-1.7,0-3.1,0.1-4.2,0.2s-1.9,0.3-2.4,0.5 V73.6z"}),t.createElement("path",{className:"st0",d:"M430.6,64.7c0,2.2-0.3,4.2-0.9,6c-0.6,1.8-1.5,3.3-2.6,4.6s-2.5,2.2-4,2.9s-3.3,1.1-5.1,1.1 c-1.9,0-3.6-0.4-5.1-1.1s-2.9-1.7-4-2.9c-1.1-1.3-2-2.8-2.6-4.6c-0.6-1.8-0.9-3.8-0.9-6c0-2.2,0.3-4.2,0.9-6 c0.6-1.8,1.5-3.3,2.6-4.6c1.1-1.3,2.5-2.3,4-3s3.3-1.1,5.1-1.1c1.9,0,3.6,0.4,5.1,1.1s2.9,1.7,4,3c1.1,1.3,2,2.8,2.6,4.6 C430.3,60.5,430.6,62.5,430.6,64.7z M426.8,64.7c0-3.5-0.8-6.3-2.4-8.3c-1.6-2.1-3.8-3.1-6.6-3.1c-2.8,0-5,1-6.6,3.1 c-1.6,2.1-2.4,4.9-2.4,8.3c0,3.5,0.8,6.3,2.4,8.3s3.8,3.1,6.6,3.1c2.8,0,5-1,6.6-3.1S426.8,68.2,426.8,64.7z"}),t.createElement("path",{className:"st0",d:"M438.2,51.7c1-0.3,2.4-0.6,4.2-1c1.8-0.4,3.9-0.5,6.5-0.5c2.1,0,3.9,0.3,5.3,0.9c1.4,0.6,2.6,1.5,3.4,2.6 s1.4,2.5,1.8,4.1c0.4,1.6,0.5,3.3,0.5,5.2v15.6h-3.5V64.2c0-2-0.1-3.7-0.4-5c-0.3-1.4-0.7-2.5-1.4-3.3s-1.5-1.5-2.5-1.9 c-1-0.4-2.3-0.6-3.9-0.6c-1.7,0-3.1,0.1-4.3,0.3c-1.2,0.2-2,0.3-2.3,0.5v24.5h-3.5V51.7z"}),t.createElement("path",{className:"st0",d:"M467.2,64.6c0-2.4,0.4-4.6,1.1-6.4c0.7-1.8,1.6-3.3,2.8-4.6c1.1-1.2,2.4-2.1,3.9-2.7s3-0.9,4.5-0.9 c3.4,0,6.1,1.1,8.2,3.3c2,2.2,3.1,5.7,3.1,10.3c0,0.3,0,0.6,0,0.9c0,0.3,0,0.6-0.1,0.8H471c0.1,3.4,1,6,2.5,7.9 c1.6,1.8,4.1,2.8,7.6,2.8c1.9,0,3.4-0.2,4.5-0.5c1.1-0.4,1.9-0.7,2.4-0.9l0.6,3c-0.5,0.3-1.5,0.6-2.8,1c-1.4,0.4-3,0.6-4.9,0.6 c-2.4,0-4.5-0.4-6.3-1.1c-1.7-0.7-3.2-1.7-4.3-3c-1.1-1.3-1.9-2.8-2.4-4.6S467.2,66.8,467.2,64.6z M487.1,62.4 c-0.1-2.9-0.8-5.2-2.1-6.8s-3.1-2.4-5.5-2.4c-1.3,0-2.4,0.3-3.4,0.8s-1.9,1.2-2.6,2c-0.7,0.8-1.3,1.8-1.7,2.9 c-0.4,1.1-0.7,2.3-0.7,3.5H487.1z"}),t.createElement("path",{className:"st0",d:"M498.5,51.7c1-0.3,2.4-0.6,4.2-1c1.8-0.4,3.9-0.5,6.5-0.5c2.1,0,3.9,0.3,5.3,0.9c1.4,0.6,2.6,1.5,3.4,2.6 s1.4,2.5,1.8,4.1c0.4,1.6,0.5,3.3,0.5,5.2v15.6h-3.5V64.2c0-2-0.1-3.7-0.4-5c-0.3-1.4-0.7-2.5-1.4-3.3s-1.5-1.5-2.5-1.9 c-1-0.4-2.3-0.6-3.9-0.6c-1.7,0-3.1,0.1-4.3,0.3c-1.2,0.2-2,0.3-2.3,0.5v24.5h-3.5V51.7z"}),t.createElement("path",{className:"st0",d:"M532.5,50.7h11.1v3h-11.1v14.9c0,1.6,0.1,2.9,0.4,3.9c0.3,1,0.7,1.8,1.2,2.3c0.5,0.5,1.1,0.9,1.8,1.1 c0.7,0.2,1.5,0.3,2.4,0.3c1.5,0,2.7-0.2,3.6-0.5c0.9-0.3,1.6-0.7,2.1-0.9l0.9,2.9c-0.5,0.3-1.4,0.7-2.6,1.1 c-1.3,0.4-2.6,0.6-4.1,0.6c-1.7,0-3.2-0.2-4.3-0.7c-1.2-0.4-2.1-1.1-2.8-2.1s-1.2-2.1-1.5-3.4c-0.3-1.4-0.4-3-0.4-4.9V42.5l3.5-0.6 V50.7z"}),t.createElement("path",{className:"st0",d:"M555.8,76.1c2,0,3.7-0.3,5-1c1.3-0.7,2-1.8,2-3.4c0-0.8-0.1-1.4-0.4-1.9c-0.2-0.5-0.6-1-1.2-1.5 c-0.5-0.4-1.3-0.8-2.1-1.2c-0.9-0.4-2-0.9-3.3-1.4c-1-0.4-2-0.9-3-1.3c-0.9-0.5-1.8-1-2.5-1.6c-0.7-0.6-1.3-1.3-1.7-2.1 c-0.4-0.8-0.6-1.8-0.6-3c0-2.3,0.9-4.1,2.6-5.5c1.7-1.4,4.1-2.1,7-2.1c1.9,0,3.5,0.2,4.7,0.5s2.1,0.6,2.6,0.9l-0.8,3.1 c-0.4-0.2-1.2-0.5-2.2-0.9c-1-0.4-2.5-0.5-4.5-0.5c-0.8,0-1.5,0.1-2.2,0.2s-1.3,0.4-1.9,0.8c-0.5,0.3-1,0.8-1.3,1.3 c-0.3,0.5-0.5,1.2-0.5,1.9s0.1,1.4,0.4,1.9c0.3,0.5,0.7,1,1.3,1.4c0.6,0.4,1.2,0.8,2.1,1.2c0.8,0.4,1.7,0.8,2.8,1.2 c1.1,0.4,2.1,0.9,3.1,1.3c1,0.4,1.9,1,2.6,1.6c0.8,0.6,1.4,1.4,1.8,2.3c0.5,0.9,0.7,2,0.7,3.3c0,2.5-0.9,4.4-2.8,5.7 c-1.9,1.3-4.5,1.9-7.7,1.9c-2.4,0-4.3-0.2-5.6-0.6c-1.3-0.4-2.2-0.7-2.6-0.9l0.9-3.2c0.1,0.1,0.3,0.2,0.7,0.4 c0.4,0.2,0.8,0.3,1.5,0.5c0.6,0.2,1.3,0.4,2.2,0.5C553.7,76.1,554.7,76.1,555.8,76.1z"}))))}var DA,FA,BA=t.forwardRef(zA),jA=(n.p,["title","titleId"]);function ZA(){return ZA=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZA.apply(this,arguments)}function UA(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function VA(e,n){var r=e.title,i=e.titleId,o=UA(e,jA);return t.createElement("svg",ZA({id:"Ebene_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 138.1 122.6",style:{enableBackground:"new 0 0 138.1 122.6"},xmlSpace:"preserve",ref:n,"aria-labelledby":i},o),r?t.createElement("title",{id:i},r):null,DA||(DA=t.createElement("style",{type:"text/css"},"\n\t.st0{fill:#009EE0;}\n\t.st1{fill:#747577;}\n\t.st2{fill:#CBD300;}\n")),FA||(FA=t.createElement("g",null,t.createElement("path",{className:"st0",d:"M41.7,99.9c-1.1,1.8-3.1,2-4.4-0.2L17.5,65.5c-1.7-2.8-1.7-4.3-0.1-7.2l20.3-35.1c0.8-1.5,2.7-1.7,3.9,0.3 l20.2,34.8c1.3,2.3,1.1,4.8-0.2,7.1"}),t.createElement("path",{className:"st1",d:"M98,106.5l20.5-35.4c1.2-2.2,0-4.1-2.8-4.1l-39.1,0c-2.8,0-4.5,0.8-5.8,3.2l-20.2,35.1c-1.2,2-0.2,3.6,2,3.6 l40.6-0.1C95.5,108.7,97,108.1,98,106.5"}),t.createElement("path",{className:"st2",d:"M97.1,17.1l20.5,35.4c1.2,2.2,0,4.1-2.8,4.1l-39.1,0c-2.8,0-4.5-0.8-5.8-3.2L49.7,18.4c-1.2-2-0.2-3.6,2-3.6 l40.6,0.1C94.6,14.9,96.2,15.5,97.1,17.1"}))))}var qA=t.forwardRef(VA),GA=(n.p,n(9826)),WA=n(8363),HA=n(4949),XA=n(6443),YA=n(5035),$A=n(1598),KA=n(1184),JA=n(6001),QA=["sx"];function tP(t){var e,n=t.sx,r=function(t){var e={systemProps:{},otherProps:{}};return Object.keys(t).forEach((function(n){JA.Gc[n]?e.systemProps[n]=t[n]:e.otherProps[n]=t[n]})),e}((0,Yn.Z)(t,QA)),i=r.systemProps,o=r.otherProps;return e=Array.isArray(n)?[i].concat((0,u.Z)(n)):"function"===typeof n?function(){var t=n.apply(void 0,arguments);return(0,ur.P)(t)?(0,$n.Z)({},i,t):i}:(0,$n.Z)({},i,n),(0,$n.Z)({},o,{sx:e})}var eP=t.createContext();function nP(t){return(0,CC.Z)("MuiGrid",t)}var rP=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],iP=(0,AC.Z)("MuiGrid",["root","container","item","zeroMinWidth"].concat((0,u.Z)([0,1,2,3,4,5,6,7,8,9,10].map((function(t){return"spacing-xs-".concat(t)}))),(0,u.Z)(["column-reverse","column","row-reverse","row"].map((function(t){return"direction-xs-".concat(t)}))),(0,u.Z)(["nowrap","wrap-reverse","wrap"].map((function(t){return"wrap-xs-".concat(t)}))),(0,u.Z)(rP.map((function(t){return"grid-xs-".concat(t)}))),(0,u.Z)(rP.map((function(t){return"grid-sm-".concat(t)}))),(0,u.Z)(rP.map((function(t){return"grid-md-".concat(t)}))),(0,u.Z)(rP.map((function(t){return"grid-lg-".concat(t)}))),(0,u.Z)(rP.map((function(t){return"grid-xl-".concat(t)}))))),oP=iP,aP=["className","columns","columnSpacing","component","container","direction","item","lg","md","rowSpacing","sm","spacing","wrap","xl","xs","zeroMinWidth"];function sP(t){var e=parseFloat(t);return"".concat(e).concat(String(t).replace(String(e),"")||"px")}function lP(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!t||t<=0)return[];if("string"===typeof t&&!Number.isNaN(Number(t))||"number"===typeof t)return[n["spacing-xs-".concat(String(t))]||"spacing-xs-".concat(String(t))];var r=t.xs,i=t.sm,o=t.md,a=t.lg,s=t.xl;return[Number(r)>0&&(n["spacing-xs-".concat(String(r))]||"spacing-xs-".concat(String(r))),Number(i)>0&&(n["spacing-sm-".concat(String(i))]||"spacing-sm-".concat(String(i))),Number(o)>0&&(n["spacing-md-".concat(String(o))]||"spacing-md-".concat(String(o))),Number(a)>0&&(n["spacing-lg-".concat(String(a))]||"spacing-lg-".concat(String(a))),Number(s)>0&&(n["spacing-xl-".concat(String(s))]||"spacing-xl-".concat(String(s)))]}var uP=(0,kC.ZP)("div",{name:"MuiGrid",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState,r=n.container,i=n.direction,o=n.item,a=n.lg,s=n.md,l=n.sm,c=n.spacing,h=n.wrap,f=n.xl,p=n.xs,d=n.zeroMinWidth;return[e.root,r&&e.container,o&&e.item,d&&e.zeroMinWidth].concat((0,u.Z)(lP(c,r,e)),["row"!==i&&e["direction-xs-".concat(String(i))],"wrap"!==h&&e["wrap-xs-".concat(String(h))],!1!==p&&e["grid-xs-".concat(String(p))],!1!==l&&e["grid-sm-".concat(String(l))],!1!==s&&e["grid-md-".concat(String(s))],!1!==a&&e["grid-lg-".concat(String(a))],!1!==f&&e["grid-xl-".concat(String(f))]])}})((function(t){var e=t.ownerState;return(0,$n.Z)({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},"wrap"!==e.wrap&&{flexWrap:e.wrap})}),(function(t){var e=t.theme,n=t.ownerState,r=(0,KA.P$)({values:n.direction,breakpoints:e.breakpoints.values});return(0,KA.k9)({theme:e},r,(function(t){var e={flexDirection:t};return 0===t.indexOf("column")&&(e["& > .".concat(oP.item)]={maxWidth:"none"}),e}))}),(function(t){var e=t.theme,n=t.ownerState,r=n.container,i=n.rowSpacing,o={};if(r&&0!==i){var a=(0,KA.P$)({values:i,breakpoints:e.breakpoints.values});o=(0,KA.k9)({theme:e},a,(function(t){var n=e.spacing(t);return"0px"!==n?(0,c.Z)({marginTop:"-".concat(sP(n))},"& > .".concat(oP.item),{paddingTop:sP(n)}):{}}))}return o}),(function(t){var e=t.theme,n=t.ownerState,r=n.container,i=n.columnSpacing,o={};if(r&&0!==i){var a=(0,KA.P$)({values:i,breakpoints:e.breakpoints.values});o=(0,KA.k9)({theme:e},a,(function(t){var n=e.spacing(t);return"0px"!==n?(0,c.Z)({width:"calc(100% + ".concat(sP(n),")"),marginLeft:"-".concat(sP(n))},"& > .".concat(oP.item),{paddingLeft:sP(n)}):{}}))}return o}),(function(t){var e,n=t.theme,r=t.ownerState;return n.breakpoints.keys.reduce((function(t,i){var o={};if(r[i]&&(e=r[i]),!e)return t;if(!0===e)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===e)o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{var a=(0,KA.P$)({values:r.columns,breakpoints:n.breakpoints.values}),s="object"===typeof a?a[i]:a;if(void 0===s||null===s)return t;var l="".concat(Math.round(e/s*1e8)/1e6,"%"),u={};if(r.container&&r.item&&0!==r.columnSpacing){var c=n.spacing(r.columnSpacing);if("0px"!==c){var h="calc(".concat(l," + ").concat(sP(c),")");u={flexBasis:h,maxWidth:h}}}o=(0,$n.Z)({flexBasis:l,flexGrow:0,maxWidth:l},u)}return 0===n.breakpoints.values[i]?Object.assign(t,o):t[n.breakpoints.up(i)]=o,t}),{})})),cP=t.forwardRef((function(e,n){var r=tP((0,SC.Z)({props:e,name:"MuiGrid"})),i=r.className,o=r.columns,a=r.columnSpacing,s=r.component,l=void 0===s?"div":s,c=r.container,h=void 0!==c&&c,f=r.direction,p=void 0===f?"row":f,d=r.item,m=void 0!==d&&d,g=r.lg,v=void 0!==g&&g,y=r.md,_=void 0!==y&&y,x=r.rowSpacing,b=r.sm,w=void 0!==b&&b,k=r.spacing,S=void 0===k?0:k,E=r.wrap,I=void 0===E?"wrap":E,C=r.xl,A=void 0!==C&&C,P=r.xs,T=void 0!==P&&P,M=r.zeroMinWidth,L=void 0!==M&&M,R=(0,Yn.Z)(r,aP),N=x||S,O=a||S,z=t.useContext(eP),D=h?o||12:z,F=(0,$n.Z)({},r,{columns:D,container:h,direction:p,item:m,lg:v,md:_,sm:w,rowSpacing:N,columnSpacing:O,wrap:I,xl:A,xs:T,zeroMinWidth:L}),B=function(t){var e=t.classes,n=t.container,r=t.direction,i=t.item,o=t.lg,a=t.md,s=t.sm,l=t.spacing,c=t.wrap,h=t.xl,f=t.xs,p={root:["root",n&&"container",i&&"item",t.zeroMinWidth&&"zeroMinWidth"].concat((0,u.Z)(lP(l,n)),["row"!==r&&"direction-xs-".concat(String(r)),"wrap"!==c&&"wrap-xs-".concat(String(c)),!1!==f&&"grid-xs-".concat(String(f)),!1!==s&&"grid-sm-".concat(String(s)),!1!==a&&"grid-md-".concat(String(a)),!1!==o&&"grid-lg-".concat(String(o)),!1!==h&&"grid-xl-".concat(String(h))])};return(0,wC.Z)(p,nP,e)}(F);return(0,Xo.jsx)(eP.Provider,{value:D,children:(0,Xo.jsx)(uP,(0,$n.Z)({ownerState:F,className:(0,Kn.Z)(B.root,i),as:l,ref:n},R))})})),hP=cP,fP=n(4390),pP=n(9723);function dP(t){return t.substring(2).toLowerCase()}var mP=function(e){var n=e.children,r=e.disableReactTree,i=void 0!==r&&r,o=e.mouseEvent,a=void 0===o?"onClick":o,s=e.onClickAway,l=e.touchEvent,u=void 0===l?"onTouchEnd":l,c=t.useRef(!1),h=t.useRef(null),f=t.useRef(!1),p=t.useRef(!1);t.useEffect((function(){return setTimeout((function(){f.current=!0}),0),function(){f.current=!1}}),[]);var d=(0,Ro.Z)(n.ref,h),m=(0,Oo.Z)((function(t){var e=p.current;p.current=!1;var n=(0,pP.Z)(h.current);!f.current||!h.current||"clientX"in t&&function(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}(t,n)||(c.current?c.current=!1:(t.composedPath?t.composedPath().indexOf(h.current)>-1:!n.documentElement.contains(t.target)||h.current.contains(t.target))||!i&&e||s(t))})),g=function(t){return function(e){p.current=!0;var r=n.props[t];r&&r(e)}},v={ref:d};return!1!==u&&(v[u]=g(u)),t.useEffect((function(){if(!1!==u){var t=dP(u),e=(0,pP.Z)(h.current),n=function(){c.current=!0};return e.addEventListener(t,m),e.addEventListener("touchmove",n),function(){e.removeEventListener(t,m),e.removeEventListener("touchmove",n)}}}),[m,u]),!1!==a&&(v[a]=g(a)),t.useEffect((function(){if(!1!==a){var t=dP(a),e=(0,pP.Z)(h.current);return e.addEventListener(t,m),function(){e.removeEventListener(t,m)}}}),[m,a]),(0,Xo.jsx)(t.Fragment,{children:t.cloneElement(n,v)})},gP=n(418),vP=n(6482);function yP(){return(0,gP.Z)(vP.Z)}var _P=!1,xP="unmounted",bP="exited",wP="entering",kP="entered",SP="exiting",EP=function(e){function n(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=bP,r.appearStatus=wP):i=kP:i=t.unmountOnExit||t.mountOnEnter?xP:bP,r.state={status:i},r.nextCallback=null,r}jo(n,e),n.getDerivedStateFromProps=function(t,e){return t.in&&e.status===xP?{status:bP}:null};var i=n.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==wP&&n!==kP&&(e=wP):n!==wP&&n!==kP||(e=SP)}this.updateStatus(!1,e)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!==typeof r&&(t=r.exit,e=r.enter,n=void 0!==r.appear?r.appear:e),{exit:t,enter:e,appear:n}},i.updateStatus=function(t,e){void 0===t&&(t=!1),null!==e?(this.cancelNextCallback(),e===wP?this.performEnter(t):this.performExit()):this.props.unmountOnExit&&this.state.status===bP&&this.setState({status:xP})},i.performEnter=function(t){var e=this,n=this.props.enter,i=this.context?this.context.isMounting:t,o=this.props.nodeRef?[i]:[r.findDOMNode(this),i],a=o[0],s=o[1],l=this.getTimeouts(),u=i?l.appear:l.enter;!t&&!n||_P?this.safeSetState({status:kP},(function(){e.props.onEntered(a)})):(this.props.onEnter(a,s),this.safeSetState({status:wP},(function(){e.props.onEntering(a,s),e.onTransitionEnd(u,(function(){e.safeSetState({status:kP},(function(){e.props.onEntered(a,s)}))}))})))},i.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:r.findDOMNode(this);e&&!_P?(this.props.onExit(i),this.safeSetState({status:SP},(function(){t.props.onExiting(i),t.onTransitionEnd(n.exit,(function(){t.safeSetState({status:bP},(function(){t.props.onExited(i)}))}))}))):this.safeSetState({status:bP},(function(){t.props.onExited(i)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},i.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},i.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this),i=null==t&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=o[0],s=o[1];this.props.addEndListener(a,s)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if(e===xP)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,Yn.Z)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(Zo.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},n}(t.Component);function IP(){}EP.contextType=Zo,EP.propTypes={},EP.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:IP,onEntering:IP,onEntered:IP,onExit:IP,onExiting:IP,onExited:IP},EP.UNMOUNTED=xP,EP.EXITED=bP,EP.ENTERING=wP,EP.ENTERED=kP,EP.EXITING=SP;var CP=EP,AP=function(t){return t.scrollTop};function PP(t,e){var n,r,i=t.timeout,o=t.easing,a=t.style,s=void 0===a?{}:a;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof i?i:i[e.mode]||0,easing:null!=(r=s.transitionTimingFunction)?r:"object"===typeof o?o[e.mode]:o,delay:s.transitionDelay}}var TP=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function MP(t){return"scale(".concat(t,", ").concat(Math.pow(t,2),")")}var LP={entering:{opacity:1,transform:MP(1)},entered:{opacity:1,transform:"none"}},RP="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)[4-9]/i.test(navigator.userAgent),NP=t.forwardRef((function(e,n){var r=e.addEndListener,i=e.appear,o=void 0===i||i,a=e.children,s=e.easing,l=e.in,u=e.onEnter,c=e.onEntered,h=e.onEntering,f=e.onExit,p=e.onExited,d=e.onExiting,m=e.style,g=e.timeout,v=void 0===g?"auto":g,y=e.TransitionComponent,_=void 0===y?CP:y,x=(0,Yn.Z)(e,TP),b=t.useRef(),w=t.useRef(),k=yP(),S=t.useRef(null),E=(0,GC.Z)(a.ref,n),I=(0,GC.Z)(S,E),C=function(t){return function(e){if(t){var n=S.current;void 0===e?t(n):t(n,e)}}},A=C(h),P=C((function(t,e){AP(t);var n,r=PP({style:m,timeout:v,easing:s},{mode:"enter"}),i=r.duration,o=r.delay,a=r.easing;"auto"===v?(n=k.transitions.getAutoHeightDuration(t.clientHeight),w.current=n):n=i,t.style.transition=[k.transitions.create("opacity",{duration:n,delay:o}),k.transitions.create("transform",{duration:RP?n:.666*n,delay:o,easing:a})].join(","),u&&u(t,e)})),T=C(c),M=C(d),L=C((function(t){var e,n=PP({style:m,timeout:v,easing:s},{mode:"exit"}),r=n.duration,i=n.delay,o=n.easing;"auto"===v?(e=k.transitions.getAutoHeightDuration(t.clientHeight),w.current=e):e=r,t.style.transition=[k.transitions.create("opacity",{duration:e,delay:i}),k.transitions.create("transform",{duration:RP?e:.666*e,delay:RP?i:i||.333*e,easing:o})].join(","),t.style.opacity=0,t.style.transform=MP(.75),f&&f(t)})),R=C(p);return t.useEffect((function(){return function(){clearTimeout(b.current)}}),[]),(0,Xo.jsx)(_,(0,$n.Z)({appear:o,in:l,nodeRef:S,onEnter:P,onEntered:T,onEntering:A,onExit:L,onExited:R,onExiting:M,addEndListener:function(t){"auto"===v&&(b.current=setTimeout(t,w.current||0)),r&&r(S.current,t)},timeout:"auto"===v?null:v},x,{children:function(e,n){return t.cloneElement(a,(0,$n.Z)({style:(0,$n.Z)({opacity:0,transform:MP(.75),visibility:"exited"!==e||l?void 0:"hidden"},LP[e],m,a.props.style),ref:I},n))}}))}));NP.muiSupportAuto=!0;var OP=NP;function zP(t){return(0,CC.Z)("MuiSnackbarContent",t)}(0,AC.Z)("MuiSnackbarContent",["root","message","action"]);var DP=["action","className","message","role"],FP=(0,kC.ZP)(NC,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:function(t,e){return e.root}})((function(t){var e=t.theme,n="light"===e.palette.mode?.8:.98,r=(0,IC._4)(e.palette.background.default,n);return(0,$n.Z)({},e.typography.body2,(0,c.Z)({color:e.palette.getContrastText(r),backgroundColor:r,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:e.shape.borderRadius,flexGrow:1},e.breakpoints.up("sm"),{flexGrow:"initial",minWidth:288}))})),BP=(0,kC.ZP)("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:function(t,e){return e.message}})({padding:"8px 0"}),jP=(0,kC.ZP)("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:function(t,e){return e.action}})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),ZP=t.forwardRef((function(t,e){var n=(0,SC.Z)({props:t,name:"MuiSnackbarContent"}),r=n.action,i=n.className,o=n.message,a=n.role,s=void 0===a?"alert":a,l=(0,Yn.Z)(n,DP),u=n,c=function(t){var e=t.classes;return(0,wC.Z)({root:["root"],action:["action"],message:["message"]},zP,e)}(u);return(0,Xo.jsxs)(FP,(0,$n.Z)({role:s,square:!0,elevation:6,className:(0,Kn.Z)(c.root,i),ownerState:u,ref:e},l,{children:[(0,Xo.jsx)(BP,{className:c.message,ownerState:u,children:o}),r?(0,Xo.jsx)(jP,{className:c.action,ownerState:u,children:r}):null]}))})),UP=ZP;function VP(t){return(0,CC.Z)("MuiSnackbar",t)}(0,AC.Z)("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);var qP=["onEnter","onExited"],GP=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],WP=(0,kC.ZP)("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,e["anchorOrigin".concat((0,EC.Z)(n.anchorOrigin.vertical)).concat((0,EC.Z)(n.anchorOrigin.horizontal))]]}})((function(t){var e=t.theme,n=t.ownerState,r=(0,$n.Z)({},!n.isRtl&&{left:"50%",right:"auto",transform:"translateX(-50%)"},n.isRtl&&{right:"50%",left:"auto",transform:"translateX(50%)"});return(0,$n.Z)({zIndex:e.zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},"top"===n.anchorOrigin.vertical?{top:8}:{bottom:8},"left"===n.anchorOrigin.horizontal&&{justifyContent:"flex-start"},"right"===n.anchorOrigin.horizontal&&{justifyContent:"flex-end"},(0,c.Z)({},e.breakpoints.up("sm"),(0,$n.Z)({},"top"===n.anchorOrigin.vertical?{top:24}:{bottom:24},"center"===n.anchorOrigin.horizontal&&r,"left"===n.anchorOrigin.horizontal&&(0,$n.Z)({},!n.isRtl&&{left:24,right:"auto"},n.isRtl&&{right:24,left:"auto"}),"right"===n.anchorOrigin.horizontal&&(0,$n.Z)({},!n.isRtl&&{right:24,left:"auto"},n.isRtl&&{left:24,right:"auto"}))))})),HP=t.forwardRef((function(e,n){var r=(0,SC.Z)({props:e,name:"MuiSnackbar"}),o=yP(),a={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},s=r.action,l=r.anchorOrigin,u=(l=void 0===l?{vertical:"bottom",horizontal:"left"}:l).vertical,c=l.horizontal,h=r.autoHideDuration,f=void 0===h?null:h,p=r.children,d=r.className,m=r.ClickAwayListenerProps,g=r.ContentProps,v=r.disableWindowBlurListener,y=void 0!==v&&v,_=r.message,x=r.onBlur,b=r.onClose,w=r.onFocus,k=r.onMouseEnter,S=r.onMouseLeave,E=r.open,I=r.resumeHideDuration,C=r.TransitionComponent,A=void 0===C?OP:C,P=r.transitionDuration,T=void 0===P?a:P,M=r.TransitionProps,L=(M=void 0===M?{}:M).onEnter,R=M.onExited,N=(0,Yn.Z)(r.TransitionProps,qP),O=(0,Yn.Z)(r,GP),z="rtl"===o.direction,D=(0,$n.Z)({},r,{anchorOrigin:{vertical:u,horizontal:c},isRtl:z}),F=function(t){var e=t.classes,n=t.anchorOrigin,r={root:["root","anchorOrigin".concat((0,EC.Z)(n.vertical)).concat((0,EC.Z)(n.horizontal))]};return(0,wC.Z)(r,VP,e)}(D),B=t.useRef(),j=t.useState(!0),Z=(0,i.Z)(j,2),U=Z[0],V=Z[1],q=(0,WC.Z)((function(){b&&b.apply(void 0,arguments)})),G=(0,WC.Z)((function(t){b&&null!=t&&(clearTimeout(B.current),B.current=setTimeout((function(){q(null,"timeout")}),t))}));t.useEffect((function(){return E&&G(f),function(){clearTimeout(B.current)}}),[E,f,G]);var W=function(){clearTimeout(B.current)},H=t.useCallback((function(){null!=f&&G(null!=I?I:.5*f)}),[f,I,G]);return t.useEffect((function(){if(!y&&E)return window.addEventListener("focus",H),window.addEventListener("blur",W),function(){window.removeEventListener("focus",H),window.removeEventListener("blur",W)}}),[y,H,E]),t.useEffect((function(){if(E)return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)};function t(t){t.defaultPrevented||"Escape"!==t.key&&"Esc"!==t.key||b&&b(t,"escapeKeyDown")}}),[U,E,b]),!E&&U?null:(0,Xo.jsx)(mP,(0,$n.Z)({onClickAway:function(t){b&&b(t,"clickaway")}},m,{children:(0,Xo.jsx)(WP,(0,$n.Z)({className:(0,Kn.Z)(F.root,d),onBlur:function(t){x&&x(t),H()},onFocus:function(t){w&&w(t),W()},onMouseEnter:function(t){k&&k(t),W()},onMouseLeave:function(t){S&&S(t),H()},ownerState:D,ref:n,role:"presentation"},O,{children:(0,Xo.jsx)(A,(0,$n.Z)({appear:!0,in:E,timeout:T,direction:"top"===u?"down":"up",onEnter:function(t,e){V(!1),L&&L(t,e)},onExited:function(t){V(!0),R&&R(t)}},N,{children:p||(0,Xo.jsx)(UP,(0,$n.Z)({message:_,action:s},g))}))}))}))})),XP=HP;function YP(t){return(0,CC.Z)("MuiAlert",t)}var $P,KP=(0,AC.Z)("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),JP=n(9201),QP=(0,JP.Z)((0,Xo.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),tT=(0,JP.Z)((0,Xo.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),eT=(0,JP.Z)((0,Xo.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),nT=(0,JP.Z)((0,Xo.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),rT=(0,JP.Z)((0,Xo.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),iT=["action","children","className","closeText","color","icon","iconMapping","onClose","role","severity","variant"],oT=(0,kC.ZP)(NC,{name:"MuiAlert",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,e[n.variant],e["".concat(n.variant).concat((0,EC.Z)(n.color||n.severity))]]}})((function(t){var e=t.theme,n=t.ownerState,r="light"===e.palette.mode?IC._j:IC.$n,i="light"===e.palette.mode?IC.$n:IC._j,o=n.color||n.severity;return(0,$n.Z)({},e.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},o&&"standard"===n.variant&&(0,c.Z)({color:r(e.palette[o].light,.6),backgroundColor:i(e.palette[o].light,.9)},"& .".concat(KP.icon),{color:"dark"===e.palette.mode?e.palette[o].main:e.palette[o].light}),o&&"outlined"===n.variant&&(0,c.Z)({color:r(e.palette[o].light,.6),border:"1px solid ".concat(e.palette[o].light)},"& .".concat(KP.icon),{color:"dark"===e.palette.mode?e.palette[o].main:e.palette[o].light}),o&&"filled"===n.variant&&{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:"dark"===e.palette.mode?e.palette[o].dark:e.palette[o].main})})),aT=(0,kC.ZP)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:function(t,e){return e.icon}})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),sT=(0,kC.ZP)("div",{name:"MuiAlert",slot:"Message",overridesResolver:function(t,e){return e.message}})({padding:"8px 0"}),lT=(0,kC.ZP)("div",{name:"MuiAlert",slot:"Action",overridesResolver:function(t,e){return e.action}})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),uT={success:(0,Xo.jsx)(QP,{fontSize:"inherit"}),warning:(0,Xo.jsx)(tT,{fontSize:"inherit"}),error:(0,Xo.jsx)(eT,{fontSize:"inherit"}),info:(0,Xo.jsx)(nT,{fontSize:"inherit"})},cT=t.forwardRef((function(t,e){var n=(0,SC.Z)({props:t,name:"MuiAlert"}),r=n.action,i=n.children,o=n.className,a=n.closeText,s=void 0===a?"Close":a,l=n.color,u=n.icon,c=n.iconMapping,h=void 0===c?uT:c,f=n.onClose,p=n.role,d=void 0===p?"alert":p,m=n.severity,g=void 0===m?"success":m,v=n.variant,y=void 0===v?"standard":v,_=(0,Yn.Z)(n,iT),x=(0,$n.Z)({},n,{color:l,severity:g,variant:y}),b=function(t){var e=t.variant,n=t.color,r=t.severity,i=t.classes,o={root:["root","".concat(e).concat((0,EC.Z)(n||r)),"".concat(e)],icon:["icon"],message:["message"],action:["action"]};return(0,wC.Z)(o,YP,i)}(x);return(0,Xo.jsxs)(oT,(0,$n.Z)({role:d,elevation:0,ownerState:x,className:(0,Kn.Z)(b.root,o),ref:e},_,{children:[!1!==u?(0,Xo.jsx)(aT,{ownerState:x,className:b.icon,children:u||h[g]||uT[g]}):null,(0,Xo.jsx)(sT,{ownerState:x,className:b.message,children:i}),null!=r?(0,Xo.jsx)(lT,{className:b.action,children:r}):null,null==r&&f?(0,Xo.jsx)(lT,{ownerState:x,className:b.action,children:(0,Xo.jsx)(AA,{size:"small","aria-label":s,title:s,color:"inherit",onClick:f,children:$P||($P=(0,Xo.jsx)(rT,{fontSize:"small"}))})}):null]}))})),hT=cT,fT=(0,t.createContext)({}),pT=function(e){var n=e.children,r=(0,t.useState)({}),o=(0,i.Z)(r,2),a=o[0],s=o[1],l=(0,t.useState)(!1),u=(0,i.Z)(l,2),c=u[0],h=u[1],f=(0,t.useState)({"https://maps.heigit.org/histosm/wms?":!1,"http://gis-services.metria.se/arcgis/rest/services/nv/InspireNV_NMD/MapServer/exts/InspireView/SWE/service":!1}),p=(0,i.Z)(f,2),d=p[0],m=p[1],g=(0,t.useState)([]),v=(0,i.Z)(g,2),y=v[0],_=v[1],x=(0,t.useState)([]),b=(0,i.Z)(x,2),w={featureInfoContent:a,setFeatureInfoContent:s,featureInfoEnabled:c,setFeatureInfoEnabled:h,wmsOrGeoJSONVisible:d,setWmsOrGeoJSONVisible:m,includedWms:y,setIncludedWms:_,includedGeoJSONs:b[0],setIncludedGeoJSONs:b[1]};return(0,Xo.jsx)(fT.Provider,{value:w,children:n})},dT=fT,mT=pC((function(t){return{icon:{width:"40px",margin:"10px","@media (max-width: 900px)":{margin:"0px"}},iconV:{marginTop:"5px",height:"auto",width:"220px",minWidth:"220px",marginBottom:"auto"},iconM:{marginTop:"4px",width:"60px"},iconbutton:{padding:"0px !important"}}})),gT=t.forwardRef((function(t,e){return(0,Xo.jsx)(hT,iS({elevation:6,ref:e,variant:"filled"},t))}));var vT=function(e){var n=mT(mC),r=(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,gC.Z)(),r="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,i=(0,vC.Z)({name:"MuiUseMediaQuery",props:e,theme:n}),o=i.defaultMatches,a=void 0!==o&&o,s=i.matchMedia,l=void 0===s?r?window.matchMedia:null:s,u=i.ssrMatchMedia,c=void 0===u?null:u,h=i.noSsr,f="function"===typeof t?t(n):t;f=f.replace(/^@media( ?)/m,""),(void 0!==xC?bC:_C)(f,a,l,c,h)}("(max-width:900px)"),(0,t.useContext)(dT)),o=(0,t.useRef)(void 0),a=(0,t.useContext)(Qd),s=(0,t.useRef)(!1),l=t.useState(!1),u=(0,i.Z)(l,2),c=u[0],h=u[1],f=function(t,e){"clickaway"!==e&&h(!1)},p=im({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),d=(0,t.useState)(!1),m=(0,i.Z)(d,2),g=m[0],v=m[1],y=(0,t.useState)(!1),_=(0,i.Z)(y,2),x=_[0],b=_[1],w="invert(31%) sepia(92%) saturate(861%) hue-rotate(178deg) brightness(95%) contrast(86%)",k=(0,t.useCallback)((function(t){if(0!=r.includedGeoJSONs.length||"lgiFeatureInfo"!=t){var n=e.framesEnabled.slice();if(n.includes(t)){var i=n.indexOf(t);i>-1&&n.splice(i,1)}else n.push(t);if(["measurePolygon","measureLine","featureInfo","lgiFeatureInfo"].includes(t)){var o=n.indexOf("measurePolygon");o>-1&&"measurePolygon"!=t&&n.splice(o,1),(o=n.indexOf("measureLine"))>-1&&"measureLine"!=t&&n.splice(o,1),(o=n.indexOf("featureInfo"))>-1&&"featureInfo"!=t&&(n.splice(o,1),r.setFeatureInfoEnabled(!1)),(o=n.indexOf("lgiFeatureInfo"))>-1&&"lgiFeatureInfo"!=t&&n.splice(o,1)}"featureInfo"==t&&r.setFeatureInfoEnabled(n.includes(t)),e.setFramesEnabled(n)}else h(!0)}),[e.framesEnabled,r.includedGeoJSONs]),S=(0,t.useCallback)((function(){var t,e;b(!1),null===(t=o.current)||void 0===t||null===(e=t.off)||void 0===e||e.call(t,"move",S)})),E=function(t){p.map.setCenter([t.coords.longitude,t.coords.latitude]),o.current.on("move",S),b(!0)},I=function(){console.log("Access of user location denied"),v(!0)};return(0,t.useEffect)((function(){var t;null!==a&&void 0!==a&&null!==(t=a.mapExists)&&void 0!==t&&t.call(a,e.mapId)&&!s.current&&(s.current=!0,o.current=a.getMap(e.mapId))}),[a.mapIds,a,e.mapId]),(0,Xo.jsxs)(Xo.Fragment,{children:[(0,Xo.jsx)(BC,{position:"fixed",elevation:0,color:"primary",style:{marginTop:"50px",backgroundColor:"rgba(55,55,55,0.8)",height:"80px",width:e.extended?"":"105px"},children:(0,Xo.jsxs)(qC,{style:{paddingLeft:"10px"},children:[(0,Xo.jsxs)(hP,{container:!0,style:{marginTop:"10px"},children:[e.extended&&(0,Xo.jsxs)(hP,{item:!0,xs:4,style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,Xo.jsx)(AA,{color:"inherit",className:n.iconbutton,onClick:function(){return k("layers")},children:(0,Xo.jsx)(TA.Z,{style:e.framesEnabled.includes("layers")?{filter:w}:{},className:n.icon,sx:{fontSize:"1.5em"}})}),(0,Xo.jsx)(AA,{color:"inherit",className:n.iconbutton,onClick:function(){return k("featureInfo")},children:(0,Xo.jsx)(PA.Z,{style:e.framesEnabled.includes("featureInfo")?{filter:w}:{},className:n.icon,sx:{fontSize:"1.5em"}})}),(0,Xo.jsx)(AA,{color:"inherit",className:n.iconbutton,onClick:function(){return k("print")},children:(0,Xo.jsx)(MA.Z,{style:e.framesEnabled.includes("print")?{filter:w}:{},className:n.icon,sx:{fontSize:"1.5em"}})}),(0,Xo.jsx)(AA,{onClick:function(){return k("wmsLoader")},color:"inherit",className:n.iconbutton,children:(0,Xo.jsx)("div",{style:e.framesEnabled.includes("wmsLoader")?{filter:w,width:"45px"}:{width:"45px"},className:n.icon,children:"WMS"})}),(0,Xo.jsx)(AA,{color:"inherit",className:n.iconbutton,onClick:function(){navigator.geolocation.getCurrentPosition(E,I)},disabled:g,children:(0,Xo.jsx)(LA.Z,{style:x?{filter:w}:{},className:n.icon,sx:{fontSize:"1.5em"}})})]}),(0,Xo.jsx)(hP,{item:!0,xs:e.extended?4:12,style:{display:"flex",justifyContent:e.extended?"center":"flex-start"},children:e.extended?(0,Xo.jsx)(BA,{className:n.iconV}):(0,Xo.jsx)(qA,{className:n.iconM})}),e.extended&&(0,Xo.jsxs)(hP,{item:!0,xs:4,style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,Xo.jsx)(AA,{color:"inherit",className:n.iconbutton,onClick:function(){return k("measureLine")},children:(0,Xo.jsx)(GA.Z,{style:e.framesEnabled.includes("measureLine")?{filter:w}:{},className:n.icon,sx:{fontSize:"1.5em"}})}),(0,Xo.jsx)(AA,{color:"inherit",className:n.iconbutton,onClick:function(){return k("measurePolygon")},children:(0,Xo.jsx)(WA.Z,{style:e.framesEnabled.includes("measurePolygon")?{filter:w}:{},className:n.icon,sx:{fontSize:"1.5em"}})}),(0,Xo.jsx)(AA,{onClick:function(){return k("lgiFeatureInfo")},color:"inherit",className:n.iconbutton,children:(0,Xo.jsx)(XA.Z,{style:e.framesEnabled.includes("lgiFeatureInfo")?{filter:w}:{},className:n.icon,sx:{fontSize:"1.5em"}})}),(0,Xo.jsx)(AA,{onClick:function(){return k("geojsonLoader")},color:"inherit",className:n.iconbutton,children:(0,Xo.jsx)(HA.Z,{style:e.framesEnabled.includes("geojsonLoader")?{filter:w}:{},className:n.icon,sx:{fontSize:"1.5em"}})}),(0,Xo.jsx)(AA,{onClick:function(){return k("livedata")},color:"inherit",className:n.iconbutton,children:(0,Xo.jsx)(YA.Z,{style:e.framesEnabled.includes("livedata")?{filter:w}:{},className:n.icon,sx:{fontSize:"1.5em"}})})]})]}),(0,Xo.jsx)(AA,{style:{position:"absolute",marginBottom:"30px",right:"0"},edge:"start",color:"inherit",onClick:function(t){e.setHeaderExtended(!e.extended)},children:e.extended?(0,Xo.jsx)($A.Z,{style:{width:"30px"}}):(0,Xo.jsx)(fP.Z,{style:{width:"30px"}})})]})}),(0,Xo.jsx)(XP,{open:c,autoHideDuration:6e3,onClose:f,children:(0,Xo.jsx)(gT,{onClose:f,severity:"error",sx:{width:"100%"},children:"Bitte zun\xe4chst eine GeoJSON-Datei laden."})})]})},yT=pC((function(t){return{icon:{width:"30px",margin:"10px"},iconbutton:{padding:"0px !important"}}}));var _T=function(e){var n,r=(0,t.useState)(e.startPos),o=(0,i.Z)(r,2),a=o[0],s=o[1],l=(0,t.useState)(!1),u=(0,i.Z)(l,2),c=(u[0],u[1]),h=yT(mC),f=(0,t.useContext)(dT);(0,t.useEffect)((function(){"toolbar"==e.componentId&&window.addEventListener("resize",(function(t){s(iS(iS({},a),{},{x:window.innerWidth-100}))}),!0)}));var p=function t(e){console.log("onMouseUp"),c(!1),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",t),e.preventDefault(),e.stopPropagation()},d=function(t){var e=a.x-n.x+t.pageX,r=a.y-n.y+t.pageY;s({x:e,y:r<0?0:r}),t.preventDefault(),t.stopPropagation()},m=(0,t.useCallback)((function(){var t=e.framesEnabled.slice(),n=t.indexOf(e.componentId);n>-1&&(t.splice(n,1),"featureInfo"==e.componentId&&f.setFeatureInfoEnabled(!1)),e.setFramesEnabled(t)}),[e.framesEnabled]);return(0,Xo.jsxs)("div",{style:{minHeight:"150px",position:"fixed",background:"rgba(55,55,55,0.8)",left:a.x,top:a.y,zIndex:"2000",textAlign:"center",display:0==e.visible?"none":"block"},children:[(0,Xo.jsx)("div",{onMouseDown:function(t){n={x:t.pageX,y:t.pageY},console.log("onMouseDown"),0===t.button&&(c(!0),document.addEventListener("mousemove",d),document.addEventListener("mouseup",p),t.preventDefault(),t.stopPropagation())},style:{height:"15px",marginLeft:"5px",marginRight:"5px",marginTop:"5px",background:mC.palette.red,cursor:"pointer"}}),e.closable&&(0,Xo.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"},children:(0,Xo.jsx)(AA,{color:"inherit",className:h.iconbutton,style:{float:"right",color:mC.palette.white},onClick:m,children:(0,Xo.jsx)($A.Z,{className:h.icon})})}),e.children]})};function xT(t){var e=t.props,n=t.states,r=t.muiFormControl;return n.reduce((function(t,n){return t[n]=e[n],r&&"undefined"===typeof e[n]&&(t[n]=r[n]),t}),{})}var bT=t.createContext();function wT(){return t.useContext(bT)}function kT(t){return(0,CC.Z)("MuiFormLabel",t)}var ST=(0,AC.Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),ET=["children","className","color","component","disabled","error","filled","focused","required"],IT=(0,kC.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return(0,$n.Z)({},e.root,"secondary"===n.color&&e.colorSecondary,n.filled&&e.filled)}})((function(t){var e,n=t.theme,r=t.ownerState;return(0,$n.Z)({color:n.palette.text.secondary},n.typography.body1,(e={lineHeight:"1.4375em",padding:0,position:"relative"},(0,c.Z)(e,"&.".concat(ST.focused),{color:n.palette[r.color].main}),(0,c.Z)(e,"&.".concat(ST.disabled),{color:n.palette.text.disabled}),(0,c.Z)(e,"&.".concat(ST.error),{color:n.palette.error.main}),e))})),CT=(0,kC.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:function(t,e){return e.asterisk}})((function(t){var e=t.theme;return(0,c.Z)({},"&.".concat(ST.error),{color:e.palette.error.main})})),AT=t.forwardRef((function(t,e){var n=(0,SC.Z)({props:t,name:"MuiFormLabel"}),r=n.children,i=n.className,o=n.component,a=void 0===o?"label":o,s=(0,Yn.Z)(n,ET),l=xT({props:n,muiFormControl:wT(),states:["color","required","focused","disabled","error","filled"]}),u=(0,$n.Z)({},n,{color:l.color||"primary",component:a,disabled:l.disabled,error:l.error,filled:l.filled,focused:l.focused,required:l.required}),c=function(t){var e=t.classes,n=t.color,r=t.focused,i=t.disabled,o=t.error,a=t.filled,s=t.required,l={root:["root","color".concat((0,EC.Z)(n)),i&&"disabled",o&&"error",a&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",o&&"error"]};return(0,wC.Z)(l,kT,e)}(u);return(0,Xo.jsxs)(IT,(0,$n.Z)({as:a,ownerState:u,className:(0,Kn.Z)(c.root,i),ref:e},s,{children:[r,l.required&&(0,Xo.jsxs)(CT,{ownerState:u,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))})),PT=AT;function TT(t){return(0,CC.Z)("MuiInputLabel",t)}(0,AC.Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);var MT=["disableAnimation","margin","shrink","variant"],LT=(0,kC.ZP)(PT,{shouldForwardProp:function(t){return(0,kC.FO)(t)||"classes"===t},name:"MuiInputLabel",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[(0,c.Z)({},"& .".concat(ST.asterisk),e.asterisk),e.root,n.formControl&&e.formControl,"small"===n.size&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,e[n.variant]]}})((function(t){var e=t.theme,n=t.ownerState;return(0,$n.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},"filled"===n.variant&&(0,$n.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,$n.Z)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,$n.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"}))})),RT=t.forwardRef((function(t,e){var n=(0,SC.Z)({name:"MuiInputLabel",props:t}),r=n.disableAnimation,i=void 0!==r&&r,o=n.shrink,a=(0,Yn.Z)(n,MT),s=wT(),l=o;"undefined"===typeof l&&s&&(l=s.filled||s.focused||s.adornedStart);var u=xT({props:n,muiFormControl:s,states:["size","variant","required"]}),c=(0,$n.Z)({},n,{disableAnimation:i,formControl:s,shrink:l,size:u.size,variant:u.variant,required:u.required}),h=function(t){var e=t.classes,n=t.formControl,r=t.size,i=t.shrink,o={root:["root",n&&"formControl",!t.disableAnimation&&"animated",i&&"shrink","small"===r&&"sizeSmall",t.variant],asterisk:[t.required&&"asterisk"]},a=(0,wC.Z)(o,TT,e);return(0,$n.Z)({},e,a)}(c);return(0,Xo.jsx)(LT,(0,$n.Z)({"data-shrink":l,ownerState:c,ref:e},a,{classes:h}))})),NT=RT;var OT=t.createContext({});var zT=(0,AC.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);function DT(t){return(0,CC.Z)("MuiListItemIcon",t)}var FT=(0,AC.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);function BT(t){return(0,CC.Z)("MuiListItemText",t)}var jT=(0,AC.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function ZT(t){return(0,CC.Z)("MuiMenuItem",t)}var UT=(0,AC.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),VT=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex"],qT=(0,kC.ZP)(yA,{shouldForwardProp:function(t){return(0,kC.FO)(t)||"classes"===t},name:"MuiMenuItem",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]}})((function(t){var e,n=t.theme,r=t.ownerState;return(0,$n.Z)({},n.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!r.disableGutters&&{paddingLeft:16,paddingRight:16},r.divider&&{borderBottom:"1px solid ".concat(n.palette.divider),backgroundClip:"padding-box"},(e={"&:hover":{textDecoration:"none",backgroundColor:n.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,c.Z)(e,"&.".concat(UT.selected),(0,c.Z)({backgroundColor:(0,IC.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)},"&.".concat(UT.focusVisible),{backgroundColor:(0,IC.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)})),(0,c.Z)(e,"&.".concat(UT.selected,":hover"),{backgroundColor:(0,IC.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,IC.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}),(0,c.Z)(e,"&.".concat(UT.focusVisible),{backgroundColor:n.palette.action.focus}),(0,c.Z)(e,"&.".concat(UT.disabled),{opacity:n.palette.action.disabledOpacity}),(0,c.Z)(e,"& + .".concat(zT.root),{marginTop:n.spacing(1),marginBottom:n.spacing(1)}),(0,c.Z)(e,"& + .".concat(zT.inset),{marginLeft:52}),(0,c.Z)(e,"& .".concat(jT.root),{marginTop:0,marginBottom:0}),(0,c.Z)(e,"& .".concat(jT.inset),{paddingLeft:36}),(0,c.Z)(e,"& .".concat(FT.root),{minWidth:36}),e),!r.dense&&(0,c.Z)({},n.breakpoints.up("sm"),{minHeight:"auto"}),r.dense&&(0,$n.Z)({minHeight:32,paddingTop:4,paddingBottom:4},n.typography.body2,(0,c.Z)({},"& .".concat(FT.root," svg"),{fontSize:"1.25rem"})))})),GT=t.forwardRef((function(e,n){var r=(0,SC.Z)({props:e,name:"MuiMenuItem"}),i=r.autoFocus,o=void 0!==i&&i,a=r.component,s=void 0===a?"li":a,l=r.dense,u=void 0!==l&&l,c=r.divider,h=void 0!==c&&c,f=r.disableGutters,p=void 0!==f&&f,d=r.focusVisibleClassName,m=r.role,g=void 0===m?"menuitem":m,v=r.tabIndex,y=(0,Yn.Z)(r,VT),_=t.useContext(OT),x={dense:u||_.dense||!1,disableGutters:p},b=t.useRef(null);(0,yC.Z)((function(){o&&b.current&&b.current.focus()}),[o]);var w,k=(0,$n.Z)({},r,{dense:x.dense,divider:h,disableGutters:p}),S=function(t){var e=t.disabled,n=t.dense,r=t.divider,i=t.disableGutters,o=t.selected,a=t.classes,s={root:["root",n&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},l=(0,wC.Z)(s,ZT,a);return(0,$n.Z)({},a,l)}(r),E=(0,GC.Z)(b,n);return r.disabled||(w=void 0!==v?v:-1),(0,Xo.jsx)(OT.Provider,{value:x,children:(0,Xo.jsx)(qT,(0,$n.Z)({ref:E,role:g,tabIndex:w,component:s,focusVisibleClassName:(0,Kn.Z)(S.focusVisible,d)},y,{ownerState:k,classes:S}))})})),WT=GT;function HT(t){return null!=t&&!(Array.isArray(t)&&0===t.length)}function XT(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&(HT(t.value)&&""!==t.value||e&&HT(t.defaultValue)&&""!==t.defaultValue)}var YT=n(9103);function $T(t){return(0,CC.Z)("MuiFormControl",t)}(0,AC.Z)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);var KT=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],JT=(0,kC.ZP)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return(0,$n.Z)({},e.root,e["margin".concat((0,EC.Z)(n.margin))],n.fullWidth&&e.fullWidth)}})((function(t){var e=t.ownerState;return(0,$n.Z)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===e.margin&&{marginTop:16,marginBottom:8},"dense"===e.margin&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})})),QT=t.forwardRef((function(e,n){var r=(0,SC.Z)({props:e,name:"MuiFormControl"}),o=r.children,a=r.className,s=r.color,l=void 0===s?"primary":s,u=r.component,c=void 0===u?"div":u,h=r.disabled,f=void 0!==h&&h,p=r.error,d=void 0!==p&&p,m=r.focused,g=r.fullWidth,v=void 0!==g&&g,y=r.hiddenLabel,_=void 0!==y&&y,x=r.margin,b=void 0===x?"none":x,w=r.required,k=void 0!==w&&w,S=r.size,E=void 0===S?"medium":S,I=r.variant,C=void 0===I?"outlined":I,A=(0,Yn.Z)(r,KT),P=(0,$n.Z)({},r,{color:l,component:c,disabled:f,error:d,fullWidth:v,hiddenLabel:_,margin:b,required:k,size:E,variant:C}),T=function(t){var e=t.classes,n=t.margin,r=t.fullWidth,i={root:["root","none"!==n&&"margin".concat((0,EC.Z)(n)),r&&"fullWidth"]};return(0,wC.Z)(i,$T,e)}(P),M=t.useState((function(){var e=!1;return o&&t.Children.forEach(o,(function(t){if((0,YT.Z)(t,["Input","Select"])){var n=(0,YT.Z)(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)}})),e})),L=(0,i.Z)(M,2),R=L[0],N=L[1],O=t.useState((function(){var e=!1;return o&&t.Children.forEach(o,(function(t){(0,YT.Z)(t,["Input","Select"])&&XT(t.props,!0)&&(e=!0)})),e})),z=(0,i.Z)(O,2),D=z[0],F=z[1],B=t.useState(!1),j=(0,i.Z)(B,2),Z=j[0],U=j[1];f&&Z&&U(!1);var V=void 0===m||f?Z:m,q=t.useCallback((function(){F(!0)}),[]),G={adornedStart:R,setAdornedStart:N,color:l,disabled:f,error:d,filled:D,focused:V,fullWidth:v,hiddenLabel:_,size:E,onBlur:function(){U(!1)},onEmpty:t.useCallback((function(){F(!1)}),[]),onFilled:q,onFocus:function(){U(!0)},registerEffect:undefined,required:k,variant:C};return(0,Xo.jsx)(bT.Provider,{value:G,children:(0,Xo.jsx)(JT,(0,$n.Z)({as:c,ownerState:P,className:(0,Kn.Z)(T.root,a),ref:n},A,{children:o}))})})),tM=QT,eM=(n(7441),n(8301));function nM(t){return(0,CC.Z)("MuiList",t)}(0,AC.Z)("MuiList",["root","padding","dense","subheader"]);var rM=["children","className","component","dense","disablePadding","subheader"],iM=(0,kC.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})((function(t){var e=t.ownerState;return(0,$n.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})})),oM=t.forwardRef((function(e,n){var r=(0,SC.Z)({props:e,name:"MuiList"}),i=r.children,o=r.className,a=r.component,s=void 0===a?"ul":a,l=r.dense,u=void 0!==l&&l,c=r.disablePadding,h=void 0!==c&&c,f=r.subheader,p=(0,Yn.Z)(r,rM),d=t.useMemo((function(){return{dense:u}}),[u]),m=(0,$n.Z)({},r,{component:s,dense:u,disablePadding:h}),g=function(t){var e=t.classes,n={root:["root",!t.disablePadding&&"padding",t.dense&&"dense",t.subheader&&"subheader"]};return(0,wC.Z)(n,nM,e)}(m);return(0,Xo.jsx)(OT.Provider,{value:d,children:(0,Xo.jsxs)(iM,(0,$n.Z)({as:s,className:(0,Kn.Z)(g.root,o),ref:n,ownerState:m},p,{children:[f,i]}))})})),aM=oM;function sM(t){var e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}var lM=sM,uM=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function cM(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function hM(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function fM(t,e){if(void 0===e)return!0;var n=t.innerText;return void 0===n&&(n=t.textContent),0!==(n=n.trim().toLowerCase()).length&&(e.repeating?n[0]===e.keys[0]:0===n.indexOf(e.keys.join("")))}function pM(t,e,n,r,i,o){for(var a=!1,s=i(t,e,!!e&&n);s;){if(s===t.firstChild){if(a)return!1;a=!0}var l=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&fM(s,o)&&!l)return s.focus(),!0;s=i(t,s,n)}return!1}var dM=t.forwardRef((function(e,n){var r=e.actions,i=e.autoFocus,o=void 0!==i&&i,a=e.autoFocusItem,s=void 0!==a&&a,l=e.children,u=e.className,c=e.disabledItemsFocusable,h=void 0!==c&&c,f=e.disableListWrap,p=void 0!==f&&f,d=e.onKeyDown,m=e.variant,g=void 0===m?"selectedMenu":m,v=(0,Yn.Z)(e,uM),y=t.useRef(null),_=t.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,yC.Z)((function(){o&&y.current.focus()}),[o]),t.useImperativeHandle(r,(function(){return{adjustStyleForScrollbar:function(t,e){var n=!y.current.style.width;if(t.clientHeight<y.current.clientHeight&&n){var r="".concat(lM((0,eM.Z)(t)),"px");y.current.style["rtl"===e.direction?"paddingLeft":"paddingRight"]=r,y.current.style.width="calc(100% + ".concat(r,")")}return y.current}}}),[]);var x=(0,GC.Z)(y,n),b=-1;t.Children.forEach(l,(function(e,n){t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===g&&e.props.selected||-1===b)&&(b=n))}));var w=t.Children.map(l,(function(e,n){if(n===b){var r={};return s&&(r.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===g&&(r.tabIndex=0),t.cloneElement(e,r)}return e}));return(0,Xo.jsx)(aM,(0,$n.Z)({role:"menu",ref:x,className:u,onKeyDown:function(t){var e=y.current,n=t.key,r=(0,eM.Z)(e).activeElement;if("ArrowDown"===n)t.preventDefault(),pM(e,r,p,h,cM);else if("ArrowUp"===n)t.preventDefault(),pM(e,r,p,h,hM);else if("Home"===n)t.preventDefault(),pM(e,null,p,h,cM);else if("End"===n)t.preventDefault(),pM(e,null,p,h,hM);else if(1===n.length){var i=_.current,o=n.toLowerCase(),a=performance.now();i.keys.length>0&&(a-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=a,i.keys.push(o);var s=r&&!i.repeating&&fM(r,i);i.previousKeyMatched&&(s||pM(e,r,!1,h,cM,i))?t.preventDefault():i.previousKeyMatched=!1}d&&d(t)},tabIndex:o?0:-1},v,{children:w}))})),mM=dM,gM=n(3199),vM=n(7602);var yM=function(t){return"string"===typeof t},_M=n(8949),xM=n(5721),bM=n(2971);var wM=t.forwardRef((function(e,n){var o=e.children,a=e.container,s=e.disablePortal,l=void 0!==s&&s,u=t.useState(null),c=(0,i.Z)(u,2),h=c[0],f=c[1],p=(0,Ro.Z)(t.isValidElement(o)?o.ref:null,n);return(0,xM.Z)((function(){l||f(function(t){return"function"===typeof t?t():t}(a)||document.body)}),[a,l]),(0,xM.Z)((function(){if(h&&!l)return(0,bM.Z)(n,h),function(){(0,bM.Z)(n,null)}}),[n,h,l]),l?t.isValidElement(o)?t.cloneElement(o,{ref:p}):o:h?r.createPortal(o,h):h}));var kM=wM,SM=n(7979);function EM(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function IM(t){return parseInt((0,SM.Z)(t).getComputedStyle(t).paddingRight,10)||0}function CM(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,o=[e,n].concat((0,u.Z)(r)),a=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(t.children,(function(t){-1===o.indexOf(t)&&-1===a.indexOf(t.tagName)&&EM(t,i)}))}function AM(t,e){var n=-1;return t.some((function(t,r){return!!e(t)&&(n=r,!0)})),n}function PM(t,e){var n=[],r=t.container;if(!e.disableScrollLock){if(function(t){var e=(0,pP.Z)(t);return e.body===t?(0,SM.Z)(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}(r)){var i=sM((0,pP.Z)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(IM(r)+i,"px");var o=(0,pP.Z)(r).querySelectorAll(".mui-fixed");[].forEach.call(o,(function(t){n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight="".concat(IM(t)+i,"px")}))}var a=r.parentElement,s=(0,SM.Z)(r),l="HTML"===(null==a?void 0:a.nodeName)&&"scroll"===s.getComputedStyle(a).overflowY?a:r;n.push({value:l.style.overflow,property:"overflow",el:l},{value:l.style.overflowX,property:"overflow-x",el:l},{value:l.style.overflowY,property:"overflow-y",el:l}),l.style.overflow="hidden"}return function(){n.forEach((function(t){var e=t.value,n=t.el,r=t.property;e?n.style.setProperty(r,e):n.style.removeProperty(r)}))}}var TM=function(){function t(){(0,s.Z)(this,t),this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}return(0,l.Z)(t,[{key:"add",value:function(t,e){var n=this.modals.indexOf(t);if(-1!==n)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&EM(t.modalRef,!1);var r=function(t){var e=[];return[].forEach.call(t.children,(function(t){"true"===t.getAttribute("aria-hidden")&&e.push(t)})),e}(e);CM(e,t.mount,t.modalRef,r,!0);var i=AM(this.containers,(function(t){return t.container===e}));return-1!==i?(this.containers[i].modals.push(t),n):(this.containers.push({modals:[t],container:e,restore:null,hiddenSiblings:r}),n)}},{key:"mount",value:function(t,e){var n=AM(this.containers,(function(e){return-1!==e.modals.indexOf(t)})),r=this.containers[n];r.restore||(r.restore=PM(r,e))}},{key:"remove",value:function(t){var e=this.modals.indexOf(t);if(-1===e)return e;var n=AM(this.containers,(function(e){return-1!==e.modals.indexOf(t)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(t),1),this.modals.splice(e,1),0===r.modals.length)r.restore&&r.restore(),t.modalRef&&EM(t.modalRef,!0),CM(r.container,t.mount,t.modalRef,r.hiddenSiblings,!1),this.containers.splice(n,1);else{var i=r.modals[r.modals.length-1];i.modalRef&&EM(i.modalRef,!1)}return e}},{key:"isTopModal",value:function(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}]),t}(),MM=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function LM(t){var e=[],n=[];return Array.from(t.querySelectorAll(MM)).forEach((function(t,r){var i=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return Number.isNaN(e)?"true"===t.contentEditable||("AUDIO"===t.nodeName||"VIDEO"===t.nodeName||"DETAILS"===t.nodeName)&&null===t.getAttribute("tabindex")?0:t.tabIndex:e}(t);-1!==i&&function(t){return!(t.disabled||"INPUT"===t.tagName&&"hidden"===t.type||function(t){if("INPUT"!==t.tagName||"radio"!==t.type)return!1;if(!t.name)return!1;var e=function(e){return t.ownerDocument.querySelector('input[type="radio"]'.concat(e))},n=e('[name="'.concat(t.name,'"]:checked'));return n||(n=e('[name="'.concat(t.name,'"]'))),n!==t}(t))}(t)&&(0===i?e.push(t):n.push({documentOrder:r,tabIndex:i,node:t}))})),n.sort((function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex})).map((function(t){return t.node})).concat(e)}function RM(){return!0}var NM=function(e){var n=e.children,r=e.disableAutoFocus,i=void 0!==r&&r,o=e.disableEnforceFocus,a=void 0!==o&&o,s=e.disableRestoreFocus,l=void 0!==s&&s,u=e.getTabbable,c=void 0===u?LM:u,h=e.isEnabled,f=void 0===h?RM:h,p=e.open,d=t.useRef(),m=t.useRef(null),g=t.useRef(null),v=t.useRef(null),y=t.useRef(null),_=t.useRef(!1),x=t.useRef(null),b=(0,Ro.Z)(n.ref,x),w=t.useRef(null);t.useEffect((function(){p&&x.current&&(_.current=!i)}),[i,p]),t.useEffect((function(){if(p&&x.current){var t=(0,pP.Z)(x.current);return x.current.contains(t.activeElement)||(x.current.hasAttribute("tabIndex")||x.current.setAttribute("tabIndex",-1),_.current&&x.current.focus()),function(){l||(v.current&&v.current.focus&&(d.current=!0,v.current.focus()),v.current=null)}}}),[p]),t.useEffect((function(){if(p&&x.current){var t=(0,pP.Z)(x.current),e=function(e){var n=x.current;if(null!==n)if(t.hasFocus()&&!a&&f()&&!d.current){if(!n.contains(t.activeElement)){if(e&&y.current!==e.target||t.activeElement!==y.current)y.current=null;else if(null!==y.current)return;if(!_.current)return;var r=[];if(t.activeElement!==m.current&&t.activeElement!==g.current||(r=c(x.current)),r.length>0){var i,o,s=Boolean((null==(i=w.current)?void 0:i.shiftKey)&&"Tab"===(null==(o=w.current)?void 0:o.key)),l=r[0],u=r[r.length-1];s?u.focus():l.focus()}else n.focus()}}else d.current=!1},n=function(e){w.current=e,!a&&f()&&"Tab"===e.key&&t.activeElement===x.current&&e.shiftKey&&(d.current=!0,g.current.focus())};t.addEventListener("focusin",e),t.addEventListener("keydown",n,!0);var r=setInterval((function(){"BODY"===t.activeElement.tagName&&e()}),50);return function(){clearInterval(r),t.removeEventListener("focusin",e),t.removeEventListener("keydown",n,!0)}}}),[i,a,l,f,p,c]);var k=function(t){null===v.current&&(v.current=t.relatedTarget),_.current=!0};return(0,Xo.jsxs)(t.Fragment,{children:[(0,Xo.jsx)("div",{tabIndex:0,onFocus:k,ref:m,"data-test":"sentinelStart"}),t.cloneElement(n,{ref:b,onFocus:function(t){null===v.current&&(v.current=t.relatedTarget),_.current=!0,y.current=t.target;var e=n.props.onFocus;e&&e(t)}}),(0,Xo.jsx)("div",{tabIndex:0,onFocus:k,ref:g,"data-test":"sentinelEnd"})]})};function OM(t){return(0,CC.Z)("MuiModal",t)}(0,AC.Z)("MuiModal",["root","hidden"]);var zM=["BackdropComponent","BackdropProps","children","classes","className","closeAfterTransition","component","components","componentsProps","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","theme","onTransitionEnter","onTransitionExited"];var DM=new TM,FM=t.forwardRef((function(e,n){var r=e.BackdropComponent,o=e.BackdropProps,a=e.children,s=e.classes,l=e.className,u=e.closeAfterTransition,c=void 0!==u&&u,h=e.component,f=void 0===h?"div":h,p=e.components,d=void 0===p?{}:p,m=e.componentsProps,g=void 0===m?{}:m,v=e.container,y=e.disableAutoFocus,_=void 0!==y&&y,x=e.disableEnforceFocus,b=void 0!==x&&x,w=e.disableEscapeKeyDown,k=void 0!==w&&w,S=e.disablePortal,E=void 0!==S&&S,I=e.disableRestoreFocus,C=void 0!==I&&I,A=e.disableScrollLock,P=void 0!==A&&A,T=e.hideBackdrop,M=void 0!==T&&T,L=e.keepMounted,R=void 0!==L&&L,N=e.manager,O=void 0===N?DM:N,z=e.onBackdropClick,D=e.onClose,F=e.onKeyDown,B=e.open,j=e.theme,Z=e.onTransitionEnter,U=e.onTransitionExited,V=(0,Yn.Z)(e,zM),q=t.useState(!0),G=(0,i.Z)(q,2),W=G[0],H=G[1],X=t.useRef({}),Y=t.useRef(null),$=t.useRef(null),K=(0,Ro.Z)($,n),J=function(t){return!!t.children&&t.children.props.hasOwnProperty("in")}(e),Q=function(){return X.current.modalRef=$.current,X.current.mountNode=Y.current,X.current},tt=function(){O.mount(Q(),{disableScrollLock:P}),$.current.scrollTop=0},et=(0,Oo.Z)((function(){var t=function(t){return"function"===typeof t?t():t}(v)||(0,pP.Z)(Y.current).body;O.add(Q(),t),$.current&&tt()})),nt=t.useCallback((function(){return O.isTopModal(Q())}),[O]),rt=(0,Oo.Z)((function(t){Y.current=t,t&&(B&&nt()?tt():EM($.current,!0))})),it=t.useCallback((function(){O.remove(Q())}),[O]);t.useEffect((function(){return function(){it()}}),[it]),t.useEffect((function(){B?et():J&&c||it()}),[B,it,J,c,et]);var ot=(0,$n.Z)({},e,{classes:s,closeAfterTransition:c,disableAutoFocus:_,disableEnforceFocus:b,disableEscapeKeyDown:k,disablePortal:E,disableRestoreFocus:C,disableScrollLock:P,exited:W,hideBackdrop:M,keepMounted:R}),at=function(t){var e=t.open,n=t.exited,r=t.classes,i={root:["root",!e&&n&&"hidden"]};return(0,wC.Z)(i,OM,r)}(ot);if(!R&&!B&&(!J||W))return null;var st={};void 0===a.props.tabIndex&&(st.tabIndex="-1"),J&&(st.onEnter=(0,_M.Z)((function(){H(!1),Z&&Z()}),a.props.onEnter),st.onExited=(0,_M.Z)((function(){H(!0),U&&U(),c&&it()}),a.props.onExited));var lt=d.Root||f,ut=g.root||{};return(0,Xo.jsx)(kM,{ref:rt,container:v,disablePortal:E,children:(0,Xo.jsxs)(lt,(0,$n.Z)({role:"presentation"},ut,!yM(lt)&&{as:f,ownerState:(0,$n.Z)({},ot,ut.ownerState),theme:j},V,{ref:K,onKeyDown:function(t){F&&F(t),"Escape"===t.key&&nt()&&(k||(t.stopPropagation(),D&&D(t,"escapeKeyDown")))},className:(0,Kn.Z)(at.root,ut.className,l),children:[!M&&r?(0,Xo.jsx)(r,(0,$n.Z)({"aria-hidden":!0,open:B,onClick:function(t){t.target===t.currentTarget&&(z&&z(t),D&&D(t,"backdropClick"))}},o)):null,(0,Xo.jsx)(NM,{disableEnforceFocus:b,disableAutoFocus:_,disableRestoreFocus:C,isEnabled:nt,open:B,children:t.cloneElement(a,st)})]}))})})),BM=FM,jM=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],ZM={entering:{opacity:1},entered:{opacity:1}},UM=t.forwardRef((function(e,n){var r=yP(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},o=e.addEndListener,a=e.appear,s=void 0===a||a,l=e.children,u=e.easing,c=e.in,h=e.onEnter,f=e.onEntered,p=e.onEntering,d=e.onExit,m=e.onExited,g=e.onExiting,v=e.style,y=e.timeout,_=void 0===y?i:y,x=e.TransitionComponent,b=void 0===x?CP:x,w=(0,Yn.Z)(e,jM),k=t.useRef(null),S=(0,GC.Z)(l.ref,n),E=(0,GC.Z)(k,S),I=function(t){return function(e){if(t){var n=k.current;void 0===e?t(n):t(n,e)}}},C=I(p),A=I((function(t,e){AP(t);var n=PP({style:v,timeout:_,easing:u},{mode:"enter"});t.style.webkitTransition=r.transitions.create("opacity",n),t.style.transition=r.transitions.create("opacity",n),h&&h(t,e)})),P=I(f),T=I(g),M=I((function(t){var e=PP({style:v,timeout:_,easing:u},{mode:"exit"});t.style.webkitTransition=r.transitions.create("opacity",e),t.style.transition=r.transitions.create("opacity",e),d&&d(t)})),L=I(m);return(0,Xo.jsx)(b,(0,$n.Z)({appear:s,in:c,nodeRef:k,onEnter:A,onEntered:P,onEntering:C,onExit:M,onExited:L,onExiting:T,addEndListener:function(t){o&&o(k.current,t)},timeout:_},w,{children:function(e,n){return t.cloneElement(l,(0,$n.Z)({style:(0,$n.Z)({opacity:0,visibility:"exited"!==e||c?void 0:"hidden"},ZM[e],v,l.props.style),ref:E},n))}}))})),VM=UM;function qM(t){return(0,CC.Z)("MuiBackdrop",t)}(0,AC.Z)("MuiBackdrop",["root","invisible"]);var GM=["children","component","components","componentsProps","className","invisible","open","transitionDuration","TransitionComponent"],WM=(0,kC.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,n.invisible&&e.invisible]}})((function(t){var e=t.ownerState;return(0,$n.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})})),HM=t.forwardRef((function(t,e){var n,r,i=(0,SC.Z)({props:t,name:"MuiBackdrop"}),o=i.children,a=i.component,s=void 0===a?"div":a,l=i.components,u=void 0===l?{}:l,c=i.componentsProps,h=void 0===c?{}:c,f=i.className,p=i.invisible,d=void 0!==p&&p,m=i.open,g=i.transitionDuration,v=i.TransitionComponent,y=void 0===v?VM:v,_=(0,Yn.Z)(i,GM),x=(0,$n.Z)({},i,{component:s,invisible:d}),b=function(t){var e=t.classes,n={root:["root",t.invisible&&"invisible"]};return(0,wC.Z)(n,qM,e)}(x);return(0,Xo.jsx)(y,(0,$n.Z)({in:m,timeout:g},_,{children:(0,Xo.jsx)(WM,{"aria-hidden":!0,as:null!=(n=u.Root)?n:s,className:(0,Kn.Z)(b.root,f),ownerState:(0,$n.Z)({},x,null==(r=h.root)?void 0:r.ownerState),classes:b,ref:e,children:o})}))})),XM=HM,YM=["BackdropComponent","closeAfterTransition","children","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted"],$M=(0,kC.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,!n.open&&n.exited&&e.hidden]}})((function(t){var e=t.theme,n=t.ownerState;return(0,$n.Z)({position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),KM=(0,kC.ZP)(XM,{name:"MuiModal",slot:"Backdrop",overridesResolver:function(t,e){return e.backdrop}})({zIndex:-1}),JM=t.forwardRef((function(e,n){var r,o=(0,SC.Z)({name:"MuiModal",props:e}),a=o.BackdropComponent,s=void 0===a?KM:a,l=o.closeAfterTransition,u=void 0!==l&&l,c=o.children,h=o.components,f=void 0===h?{}:h,p=o.componentsProps,d=void 0===p?{}:p,m=o.disableAutoFocus,g=void 0!==m&&m,v=o.disableEnforceFocus,y=void 0!==v&&v,_=o.disableEscapeKeyDown,x=void 0!==_&&_,b=o.disablePortal,w=void 0!==b&&b,k=o.disableRestoreFocus,S=void 0!==k&&k,E=o.disableScrollLock,I=void 0!==E&&E,C=o.hideBackdrop,A=void 0!==C&&C,P=o.keepMounted,T=void 0!==P&&P,M=(0,Yn.Z)(o,YM),L=t.useState(!0),R=(0,i.Z)(L,2),N=R[0],O=R[1],z={closeAfterTransition:u,disableAutoFocus:g,disableEnforceFocus:y,disableEscapeKeyDown:x,disablePortal:w,disableRestoreFocus:S,disableScrollLock:I,hideBackdrop:A,keepMounted:T},D=function(t){return t.classes}((0,$n.Z)({},o,z,{exited:N}));return(0,Xo.jsx)(BM,(0,$n.Z)({components:(0,$n.Z)({Root:$M},f),componentsProps:{root:(0,$n.Z)({},d.root,(!f.Root||!yM(f.Root))&&{ownerState:(0,$n.Z)({},null==(r=d.root)?void 0:r.ownerState)})},BackdropComponent:s,onTransitionEnter:function(){return O(!1)},onTransitionExited:function(){return O(!0)},ref:n},M,{classes:D},z,{children:c}))})),QM=JM;function tL(t){return(0,CC.Z)("MuiPopover",t)}(0,AC.Z)("MuiPopover",["root","paper"]);var eL=["onEntering"],nL=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function rL(t,e){var n=0;return"number"===typeof e?n=e:"center"===e?n=t.height/2:"bottom"===e&&(n=t.height),n}function iL(t,e){var n=0;return"number"===typeof e?n=e:"center"===e?n=t.width/2:"right"===e&&(n=t.width),n}function oL(t){return[t.horizontal,t.vertical].map((function(t){return"number"===typeof t?"".concat(t,"px"):t})).join(" ")}function aL(t){return"function"===typeof t?t():t}var sL=(0,kC.ZP)(QM,{name:"MuiPopover",slot:"Root",overridesResolver:function(t,e){return e.root}})({}),lL=(0,kC.ZP)(NC,{name:"MuiPopover",slot:"Paper",overridesResolver:function(t,e){return e.paper}})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),uL=t.forwardRef((function(e,n){var r=(0,SC.Z)({props:e,name:"MuiPopover"}),i=r.action,o=r.anchorEl,a=r.anchorOrigin,s=void 0===a?{vertical:"top",horizontal:"left"}:a,l=r.anchorPosition,u=r.anchorReference,c=void 0===u?"anchorEl":u,h=r.children,f=r.className,p=r.container,d=r.elevation,m=void 0===d?8:d,g=r.marginThreshold,v=void 0===g?16:g,y=r.open,_=r.PaperProps,x=void 0===_?{}:_,b=r.transformOrigin,w=void 0===b?{vertical:"top",horizontal:"left"}:b,k=r.TransitionComponent,S=void 0===k?OP:k,E=r.transitionDuration,I=void 0===E?"auto":E,C=r.TransitionProps,A=(C=void 0===C?{}:C).onEntering,P=(0,Yn.Z)(r.TransitionProps,eL),T=(0,Yn.Z)(r,nL),M=t.useRef(),L=(0,GC.Z)(M,x.ref),R=(0,$n.Z)({},r,{anchorOrigin:s,anchorReference:c,elevation:m,marginThreshold:v,PaperProps:x,transformOrigin:w,TransitionComponent:S,transitionDuration:I,TransitionProps:P}),N=function(t){var e=t.classes;return(0,wC.Z)({root:["root"],paper:["paper"]},tL,e)}(R),O=t.useCallback((function(){if("anchorPosition"===c)return l;var t=aL(o),e=(t&&1===t.nodeType?t:(0,eM.Z)(M.current).body).getBoundingClientRect();return{top:e.top+rL(e,s.vertical),left:e.left+iL(e,s.horizontal)}}),[o,s.horizontal,s.vertical,l,c]),z=t.useCallback((function(t){return{vertical:rL(t,w.vertical),horizontal:iL(t,w.horizontal)}}),[w.horizontal,w.vertical]),D=t.useCallback((function(t){var e={width:t.offsetWidth,height:t.offsetHeight},n=z(e);if("none"===c)return{top:null,left:null,transformOrigin:oL(n)};var r=O(),i=r.top-n.vertical,a=r.left-n.horizontal,s=i+e.height,l=a+e.width,u=(0,vM.Z)(aL(o)),h=u.innerHeight-v,f=u.innerWidth-v;if(i<v){var p=i-v;i-=p,n.vertical+=p}else if(s>h){var d=s-h;i-=d,n.vertical+=d}if(a<v){var m=a-v;a-=m,n.horizontal+=m}else if(l>f){var g=l-f;a-=g,n.horizontal+=g}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(a),"px"),transformOrigin:oL(n)}}),[o,c,O,z,v]),F=t.useCallback((function(){var t=M.current;if(t){var e=D(t);null!==e.top&&(t.style.top=e.top),null!==e.left&&(t.style.left=e.left),t.style.transformOrigin=e.transformOrigin}}),[D]);t.useEffect((function(){y&&F()})),t.useImperativeHandle(i,(function(){return y?{updatePosition:function(){F()}}:null}),[y,F]),t.useEffect((function(){if(y){var t=(0,gM.Z)((function(){F()})),e=(0,vM.Z)(o);return e.addEventListener("resize",t),function(){t.clear(),e.removeEventListener("resize",t)}}}),[o,y,F]);var B=I;"auto"!==I||S.muiSupportAuto||(B=void 0);var j=p||(o?(0,eM.Z)(aL(o)).body:void 0);return(0,Xo.jsx)(sL,(0,$n.Z)({BackdropProps:{invisible:!0},className:(0,Kn.Z)(N.root,f),container:j,open:y,ref:n,ownerState:R},T,{children:(0,Xo.jsx)(S,(0,$n.Z)({appear:!0,in:y,onEntering:function(t,e){A&&A(t,e),F()},timeout:B},P,{children:(0,Xo.jsx)(lL,(0,$n.Z)({elevation:m},x,{ref:L,className:(0,Kn.Z)(N.paper,x.className),children:h}))}))}))})),cL=uL;function hL(t){return(0,CC.Z)("MuiMenu",t)}(0,AC.Z)("MuiMenu",["root","paper","list"]);var fL=["onEntering"],pL=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],dL={vertical:"top",horizontal:"right"},mL={vertical:"top",horizontal:"left"},gL=(0,kC.ZP)(cL,{shouldForwardProp:function(t){return(0,kC.FO)(t)||"classes"===t},name:"MuiMenu",slot:"Root",overridesResolver:function(t,e){return e.root}})({}),vL=(0,kC.ZP)(NC,{name:"MuiMenu",slot:"Paper",overridesResolver:function(t,e){return e.paper}})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),yL=(0,kC.ZP)(mM,{name:"MuiMenu",slot:"List",overridesResolver:function(t,e){return e.list}})({outline:0}),_L=t.forwardRef((function(e,n){var r=(0,SC.Z)({props:e,name:"MuiMenu"}),i=r.autoFocus,o=void 0===i||i,a=r.children,s=r.disableAutoFocusItem,l=void 0!==s&&s,u=r.MenuListProps,c=void 0===u?{}:u,h=r.onClose,f=r.open,p=r.PaperProps,d=void 0===p?{}:p,m=r.PopoverClasses,g=r.transitionDuration,v=void 0===g?"auto":g,y=r.TransitionProps,_=(y=void 0===y?{}:y).onEntering,x=r.variant,b=void 0===x?"selectedMenu":x,w=(0,Yn.Z)(r.TransitionProps,fL),k=(0,Yn.Z)(r,pL),S=yP(),E="rtl"===S.direction,I=(0,$n.Z)({},r,{autoFocus:o,disableAutoFocusItem:l,MenuListProps:c,onEntering:_,PaperProps:d,transitionDuration:v,TransitionProps:w,variant:b}),C=function(t){var e=t.classes;return(0,wC.Z)({root:["root"],paper:["paper"],list:["list"]},hL,e)}(I),A=o&&!l&&f,P=t.useRef(null),T=-1;return t.Children.map(a,(function(e,n){t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===b&&e.props.selected||-1===T)&&(T=n))})),(0,Xo.jsx)(gL,(0,$n.Z)({classes:m,onClose:h,anchorOrigin:{vertical:"bottom",horizontal:E?"right":"left"},transformOrigin:E?dL:mL,PaperProps:(0,$n.Z)({component:vL},d,{classes:(0,$n.Z)({},d.classes,{root:C.paper})}),className:C.root,open:f,ref:n,transitionDuration:v,TransitionProps:(0,$n.Z)({onEntering:function(t,e){P.current&&P.current.adjustStyleForScrollbar(t,S),_&&_(t,e)}},w),ownerState:I},k,{children:(0,Xo.jsx)(yL,(0,$n.Z)({onKeyDown:function(t){"Tab"===t.key&&(t.preventDefault(),h&&h(t,"tabKeyDown"))},actions:P,autoFocus:o&&(-1===T||l),autoFocusItem:A,variant:b},c,{className:(0,Kn.Z)(C.list,c.className),children:a}))}))})),xL=_L;function bL(t){return(0,CC.Z)("MuiNativeSelect",t)}var wL=(0,AC.Z)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),kL=["className","disabled","IconComponent","inputRef","variant"],SL=function(t){var e,n=t.ownerState,r=t.theme;return(0,$n.Z)((e={MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{backgroundColor:"light"===r.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"}},(0,c.Z)(e,"&.".concat(wL.disabled),{cursor:"default"}),(0,c.Z)(e,"&[multiple]",{height:"auto"}),(0,c.Z)(e,"&:not([multiple]) option, &:not([multiple]) optgroup",{backgroundColor:r.palette.background.paper}),(0,c.Z)(e,"&&&",{paddingRight:24,minWidth:16}),e),"filled"===n.variant&&{"&&&":{paddingRight:32}},"outlined"===n.variant&&{borderRadius:r.shape.borderRadius,"&:focus":{borderRadius:r.shape.borderRadius},"&&&":{paddingRight:32}})},EL=(0,kC.ZP)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:kC.FO,overridesResolver:function(t,e){var n=t.ownerState;return[e.select,e[n.variant],(0,c.Z)({},"&.".concat(wL.multiple),e.multiple)]}})(SL),IL=function(t){var e=t.ownerState,n=t.theme;return(0,$n.Z)((0,c.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:n.palette.action.active},"&.".concat(wL.disabled),{color:n.palette.action.disabled}),e.open&&{transform:"rotate(180deg)"},"filled"===e.variant&&{right:7},"outlined"===e.variant&&{right:7})},CL=(0,kC.ZP)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:function(t,e){var n=t.ownerState;return[e.icon,n.variant&&e["icon".concat((0,EC.Z)(n.variant))],n.open&&e.iconOpen]}})(IL),AL=t.forwardRef((function(e,n){var r=e.className,i=e.disabled,o=e.IconComponent,a=e.inputRef,s=e.variant,l=void 0===s?"standard":s,u=(0,Yn.Z)(e,kL),c=(0,$n.Z)({},e,{disabled:i,variant:l}),h=function(t){var e=t.classes,n=t.variant,r=t.disabled,i=t.multiple,o=t.open,a={select:["select",n,r&&"disabled",i&&"multiple"],icon:["icon","icon".concat((0,EC.Z)(n)),o&&"iconOpen",r&&"disabled"]};return(0,wC.Z)(a,bL,e)}(c);return(0,Xo.jsxs)(t.Fragment,{children:[(0,Xo.jsx)(EL,(0,$n.Z)({ownerState:c,className:(0,Kn.Z)(h.select,r),disabled:i,ref:a||n},u)),e.multiple?null:(0,Xo.jsx)(CL,{as:o,ownerState:c,className:h.icon})]})})),PL=AL,TL=n(8744);function ML(t){return(0,CC.Z)("MuiSelect",t)}var LL,RL=(0,AC.Z)("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),NL=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],OL=(0,kC.ZP)("div",{name:"MuiSelect",slot:"Select",overridesResolver:function(t,e){var n=t.ownerState;return[(0,c.Z)({},"&.".concat(RL.select),e.select),(0,c.Z)({},"&.".concat(RL.select),e[n.variant]),(0,c.Z)({},"&.".concat(RL.multiple),e.multiple)]}})(SL,(0,c.Z)({},"&.".concat(RL.select),{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"})),zL=(0,kC.ZP)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:function(t,e){var n=t.ownerState;return[e.icon,n.variant&&e["icon".concat((0,EC.Z)(n.variant))],n.open&&e.iconOpen]}})(IL),DL=(0,kC.ZP)("input",{shouldForwardProp:function(t){return(0,kC.Dz)(t)&&"classes"!==t},name:"MuiSelect",slot:"NativeInput",overridesResolver:function(t,e){return e.nativeInput}})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function FL(t,e){return"object"===typeof e&&null!==e?t===e:String(t)===String(e)}function BL(t){return null==t||"string"===typeof t&&!t.trim()}var jL=t.forwardRef((function(e,n){var r=e["aria-describedby"],o=e["aria-label"],a=e.autoFocus,s=e.autoWidth,l=e.children,u=e.className,c=e.defaultOpen,h=e.defaultValue,f=e.disabled,p=e.displayEmpty,d=e.IconComponent,m=e.inputRef,g=e.labelId,v=e.MenuProps,y=void 0===v?{}:v,_=e.multiple,x=e.name,b=e.onBlur,w=e.onChange,k=e.onClose,S=e.onFocus,E=e.onOpen,I=e.open,C=e.readOnly,A=e.renderValue,P=e.SelectDisplayProps,T=void 0===P?{}:P,M=e.tabIndex,L=e.value,R=e.variant,N=void 0===R?"standard":R,O=(0,Yn.Z)(e,NL),z=(0,TL.Z)({controlled:L,default:h,name:"Select"}),D=(0,i.Z)(z,2),F=D[0],B=D[1],j=(0,TL.Z)({controlled:I,default:c,name:"Select"}),Z=(0,i.Z)(j,2),U=Z[0],V=Z[1],q=t.useRef(null),G=t.useRef(null),W=t.useState(null),H=(0,i.Z)(W,2),X=H[0],Y=H[1],$=t.useRef(null!=I).current,K=t.useState(),J=(0,i.Z)(K,2),Q=J[0],tt=J[1],et=(0,GC.Z)(n,m),nt=t.useCallback((function(t){G.current=t,t&&Y(t)}),[]);t.useImperativeHandle(et,(function(){return{focus:function(){G.current.focus()},node:q.current,value:F}}),[F]),t.useEffect((function(){c&&U&&X&&!$&&(tt(s?null:X.clientWidth),G.current.focus())}),[X,s]),t.useEffect((function(){a&&G.current.focus()}),[a]),t.useEffect((function(){if(g){var t=(0,eM.Z)(G.current).getElementById(g);if(t){var e=function(){getSelection().isCollapsed&&G.current.focus()};return t.addEventListener("click",e),function(){t.removeEventListener("click",e)}}}}),[g]);var rt,it,ot=function(t,e){t?E&&E(e):k&&k(e),$||(tt(s?null:X.clientWidth),V(t))},at=t.Children.toArray(l),st=function(t){return function(e){var n;if(e.currentTarget.hasAttribute("tabindex")){if(_){n=Array.isArray(F)?F.slice():[];var r=F.indexOf(t.props.value);-1===r?n.push(t.props.value):n.splice(r,1)}else n=t.props.value;if(t.props.onClick&&t.props.onClick(e),F!==n&&(B(n),w)){var i=e.nativeEvent||e,o=new i.constructor(i.type,i);Object.defineProperty(o,"target",{writable:!0,value:{value:n,name:x}}),w(o,t)}_||ot(!1,e)}}},lt=null!==X&&U;delete O["aria-invalid"];var ut=[],ct=!1;(XT({value:F})||p)&&(A?rt=A(F):ct=!0);var ht=at.map((function(e,n,r){if(!t.isValidElement(e))return null;var i;if(_){if(!Array.isArray(F))throw new Error((0,tr.Z)(2));i=F.some((function(t){return FL(t,e.props.value)})),i&&ct&&ut.push(e.props.children)}else(i=FL(F,e.props.value))&&ct&&(it=e.props.children);if(i&&!0,void 0===e.props.value)return t.cloneElement(e,{"aria-readonly":!0,role:"option"});return t.cloneElement(e,{"aria-selected":i?"true":"false",onClick:st(e),onKeyUp:function(t){" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:void 0===r[0].props.value||!0===r[0].props.disabled?function(){if(F)return i;var t=r.find((function(t){return void 0!==t.props.value&&!0!==t.props.disabled}));return e===t||i}():i,value:void 0,"data-value":e.props.value})}));ct&&(rt=_?0===ut.length?null:ut.reduce((function(t,e,n){return t.push(e),n<ut.length-1&&t.push(", "),t}),[]):it);var ft,pt=Q;!s&&$&&X&&(pt=X.clientWidth),ft="undefined"!==typeof M?M:f?null:0;var dt=T.id||(x?"mui-component-select-".concat(x):void 0),mt=(0,$n.Z)({},e,{variant:N,value:F,open:lt}),gt=function(t){var e=t.classes,n=t.variant,r=t.disabled,i=t.multiple,o=t.open,a={select:["select",n,r&&"disabled",i&&"multiple"],icon:["icon","icon".concat((0,EC.Z)(n)),o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,wC.Z)(a,ML,e)}(mt);return(0,Xo.jsxs)(t.Fragment,{children:[(0,Xo.jsx)(OL,(0,$n.Z)({ref:nt,tabIndex:ft,role:"button","aria-disabled":f?"true":void 0,"aria-expanded":lt?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[g,dt].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:function(t){if(!C){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(t.key)&&(t.preventDefault(),ot(!0,t))}},onMouseDown:f||C?null:function(t){0===t.button&&(t.preventDefault(),G.current.focus(),ot(!0,t))},onBlur:function(t){!lt&&b&&(Object.defineProperty(t,"target",{writable:!0,value:{value:F,name:x}}),b(t))},onFocus:S},T,{ownerState:mt,className:(0,Kn.Z)(gt.select,u,T.className),id:dt,children:BL(rt)?LL||(LL=(0,Xo.jsx)("span",{className:"notranslate",children:"\u200b"})):rt})),(0,Xo.jsx)(DL,(0,$n.Z)({value:Array.isArray(F)?F.join(","):F,name:x,ref:q,"aria-hidden":!0,onChange:function(t){var e=at.map((function(t){return t.props.value})).indexOf(t.target.value);if(-1!==e){var n=at[e];B(n.props.value),w&&w(t,n)}},tabIndex:-1,disabled:f,className:gt.nativeInput,autoFocus:a,ownerState:mt},O)),(0,Xo.jsx)(zL,{as:d,className:gt.icon,ownerState:mt}),(0,Xo.jsx)(xL,(0,$n.Z)({id:"menu-".concat(x||""),anchorEl:X,open:lt,onClose:function(t){ot(!1,t)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},y,{MenuListProps:(0,$n.Z)({"aria-labelledby":g,role:"listbox",disableListWrap:!0},y.MenuListProps),PaperProps:(0,$n.Z)({},y.PaperProps,{style:(0,$n.Z)({minWidth:pt},null!=y.PaperProps?y.PaperProps.style:null)}),children:ht}))]})})),ZL=jL,UL=(0,JP.Z)((0,Xo.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),VL=n(3981),qL=["onChange","maxRows","minRows","style","value"];function GL(t,e){return parseInt(t[e],10)||0}var WL={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},HL=t.forwardRef((function(e,n){var r=e.onChange,o=e.maxRows,a=e.minRows,s=void 0===a?1:a,l=e.style,u=e.value,c=(0,Yn.Z)(e,qL),h=t.useRef(null!=u).current,f=t.useRef(null),p=(0,Ro.Z)(n,f),d=t.useRef(null),m=t.useRef(0),g=t.useState({}),v=(0,i.Z)(g,2),y=v[0],_=v[1],x=t.useCallback((function(){var t=f.current,n=(0,SM.Z)(t).getComputedStyle(t);if("0px"!==n.width){var r=d.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var i=n["box-sizing"],a=GL(n,"padding-bottom")+GL(n,"padding-top"),l=GL(n,"border-bottom-width")+GL(n,"border-top-width"),u=r.scrollHeight;r.value="x";var c=r.scrollHeight,h=u;s&&(h=Math.max(Number(s)*c,h)),o&&(h=Math.min(Number(o)*c,h));var p=(h=Math.max(h,c))+("border-box"===i?a+l:0),g=Math.abs(h-u)<=1;_((function(t){return m.current<20&&(p>0&&Math.abs((t.outerHeightStyle||0)-p)>1||t.overflow!==g)?(m.current+=1,{overflow:g,outerHeightStyle:p}):t}))}}),[o,s,e.placeholder]);t.useEffect((function(){var t,e=(0,VL.Z)((function(){m.current=0,x()})),n=(0,SM.Z)(f.current);return n.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(t=new ResizeObserver(e)).observe(f.current),function(){e.clear(),n.removeEventListener("resize",e),t&&t.disconnect()}}),[x]),(0,xM.Z)((function(){x()})),t.useEffect((function(){m.current=0}),[u]);return(0,Xo.jsxs)(t.Fragment,{children:[(0,Xo.jsx)("textarea",(0,$n.Z)({value:u,onChange:function(t){m.current=0,h||x(),r&&r(t)},ref:p,rows:s,style:(0,$n.Z)({height:y.outerHeightStyle,overflow:y.overflow?"hidden":null},l)},c)),(0,Xo.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:d,tabIndex:-1,style:(0,$n.Z)({},WL,l,{padding:0})})]})})),XL=HL;function YL(t){var e=t.styles,n=t.defaultTheme,r=void 0===n?{}:n,i="function"===typeof e?function(t){return e(void 0===(n=t)||null===n||0===Object.keys(n).length?r:t);var n}:e;return(0,Xo.jsx)(qn,{styles:i})}var $L=function(t){return(0,Xo.jsx)(YL,(0,$n.Z)({},t,{defaultTheme:vP.Z}))};function KL(t){return(0,CC.Z)("MuiInputBase",t)}var JL=(0,AC.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),QL=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","startAdornment","type","value"],tR=function(t,e){var n=t.ownerState;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,"small"===n.size&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e["color".concat((0,EC.Z)(n.color))],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},eR=function(t,e){var n=t.ownerState;return[e.input,"small"===n.size&&e.inputSizeSmall,n.multiline&&e.inputMultiline,"search"===n.type&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},nR=(0,kC.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:tR})((function(t){var e=t.theme,n=t.ownerState;return(0,$n.Z)({},e.typography.body1,(0,c.Z)({color:e.palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center"},"&.".concat(JL.disabled),{color:e.palette.text.disabled,cursor:"default"}),n.multiline&&(0,$n.Z)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),rR=(0,kC.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:eR})((function(t){var e,n=t.theme,r=t.ownerState,i="light"===n.palette.mode,o={color:"currentColor",opacity:i?.42:.5,transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})},a={opacity:"0 !important"},s={opacity:i?.42:.5};return(0,$n.Z)((e={font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"}},(0,c.Z)(e,"label[data-shrink=false] + .".concat(JL.formControl," &"),{"&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&:-ms-input-placeholder":a,"&::-ms-input-placeholder":a,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s}),(0,c.Z)(e,"&.".concat(JL.disabled),{opacity:1,WebkitTextFillColor:n.palette.text.disabled}),(0,c.Z)(e,"&:-webkit-autofill",{animationDuration:"5000s",animationName:"mui-auto-fill"}),e),"small"===r.size&&{paddingTop:1},r.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===r.type&&{MozAppearance:"textfield"})})),iR=(0,Xo.jsx)($L,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),oR=t.forwardRef((function(e,n){var r=(0,SC.Z)({props:e,name:"MuiInputBase"}),o=r["aria-describedby"],a=r.autoComplete,s=r.autoFocus,l=r.className,u=r.components,c=void 0===u?{}:u,h=r.componentsProps,f=void 0===h?{}:h,p=r.defaultValue,d=r.disabled,m=r.disableInjectingGlobalStyles,g=r.endAdornment,v=r.fullWidth,y=void 0!==v&&v,_=r.id,x=r.inputComponent,b=void 0===x?"input":x,w=r.inputProps,k=void 0===w?{}:w,S=r.inputRef,E=r.maxRows,I=r.minRows,C=r.multiline,A=void 0!==C&&C,P=r.name,T=r.onBlur,M=r.onChange,L=r.onClick,R=r.onFocus,N=r.onKeyDown,O=r.onKeyUp,z=r.placeholder,D=r.readOnly,F=r.renderSuffix,B=r.rows,j=r.startAdornment,Z=r.type,U=void 0===Z?"text":Z,V=r.value,q=(0,Yn.Z)(r,QL),G=null!=k.value?k.value:V,W=t.useRef(null!=G).current,H=t.useRef(),X=t.useCallback((function(t){0}),[]),Y=(0,GC.Z)(k.ref,X),$=(0,GC.Z)(S,Y),K=(0,GC.Z)(H,$),J=t.useState(!1),Q=(0,i.Z)(J,2),tt=Q[0],et=Q[1],nt=wT();var rt=xT({props:r,muiFormControl:nt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});rt.focused=nt?nt.focused:tt,t.useEffect((function(){!nt&&d&&tt&&(et(!1),T&&T())}),[nt,d,tt,T]);var it=nt&&nt.onFilled,ot=nt&&nt.onEmpty,at=t.useCallback((function(t){XT(t)?it&&it():ot&&ot()}),[it,ot]);(0,yC.Z)((function(){W&&at({value:G})}),[G,at,W]);t.useEffect((function(){at(H.current)}),[]);var st=b,lt=k;A&&"input"===st&&(lt=B?(0,$n.Z)({type:void 0,minRows:B,maxRows:B},lt):(0,$n.Z)({type:void 0,maxRows:E,minRows:I},lt),st=XL);t.useEffect((function(){nt&&nt.setAdornedStart(Boolean(j))}),[nt,j]);var ut=(0,$n.Z)({},r,{color:rt.color||"primary",disabled:rt.disabled,endAdornment:g,error:rt.error,focused:rt.focused,formControl:nt,fullWidth:y,hiddenLabel:rt.hiddenLabel,multiline:A,size:rt.size,startAdornment:j,type:U}),ct=function(t){var e=t.classes,n=t.color,r=t.disabled,i=t.error,o=t.endAdornment,a=t.focused,s=t.formControl,l=t.fullWidth,u=t.hiddenLabel,c=t.multiline,h=t.size,f=t.startAdornment,p=t.type,d={root:["root","color".concat((0,EC.Z)(n)),r&&"disabled",i&&"error",l&&"fullWidth",a&&"focused",s&&"formControl","small"===h&&"sizeSmall",c&&"multiline",f&&"adornedStart",o&&"adornedEnd",u&&"hiddenLabel"],input:["input",r&&"disabled","search"===p&&"inputTypeSearch",c&&"inputMultiline","small"===h&&"inputSizeSmall",u&&"inputHiddenLabel",f&&"inputAdornedStart",o&&"inputAdornedEnd"]};return(0,wC.Z)(d,KL,e)}(ut),ht=c.Root||nR,ft=f.root||{},pt=c.Input||rR;return lt=(0,$n.Z)({},lt,f.input),(0,Xo.jsxs)(t.Fragment,{children:[!m&&iR,(0,Xo.jsxs)(ht,(0,$n.Z)({},ft,!yM(ht)&&{ownerState:(0,$n.Z)({},ut,ft.ownerState)},{ref:n,onClick:function(t){H.current&&t.currentTarget===t.target&&H.current.focus(),L&&L(t)}},q,{className:(0,Kn.Z)(ct.root,ft.className,l),children:[j,(0,Xo.jsx)(bT.Provider,{value:null,children:(0,Xo.jsx)(pt,(0,$n.Z)({ownerState:ut,"aria-invalid":rt.error,"aria-describedby":o,autoComplete:a,autoFocus:s,defaultValue:p,disabled:rt.disabled,id:_,onAnimationStart:function(t){at("mui-auto-fill-cancel"===t.animationName?H.current:{value:"x"})},name:P,placeholder:z,readOnly:D,required:rt.required,rows:B,value:G,onKeyDown:N,onKeyUp:O,type:U},lt,!yM(pt)&&{as:st,ownerState:(0,$n.Z)({},ut,lt.ownerState)},{ref:K,className:(0,Kn.Z)(ct.input,lt.className),onBlur:function(t){T&&T(t),k.onBlur&&k.onBlur(t),nt&&nt.onBlur?nt.onBlur(t):et(!1)},onChange:function(t){if(!W){var e=t.target||H.current;if(null==e)throw new Error((0,tr.Z)(1));at({value:e.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];k.onChange&&k.onChange.apply(k,[t].concat(r)),M&&M.apply(void 0,[t].concat(r))},onFocus:function(t){rt.disabled?t.stopPropagation():(R&&R(t),k.onFocus&&k.onFocus(t),nt&&nt.onFocus?nt.onFocus(t):et(!0))}}))}),g,F?F((0,$n.Z)({},rt,{startAdornment:j})):null]}))]})})),aR=oR;function sR(t){return(0,CC.Z)("MuiInput",t)}var lR=(0,$n.Z)({},JL,(0,AC.Z)("MuiInput",["root","underline","input"])),uR=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","type"],cR=(0,kC.ZP)(nR,{shouldForwardProp:function(t){return(0,kC.FO)(t)||"classes"===t},name:"MuiInput",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[].concat((0,u.Z)(tR(t,e)),[!n.disableUnderline&&e.underline])}})((function(t){var e,n=t.theme,r=t.ownerState,i="light"===n.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return(0,$n.Z)({position:"relative"},r.formControl&&{"label + &":{marginTop:16}},!r.disableUnderline&&(e={"&:after":{borderBottom:"2px solid ".concat(n.palette[r.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"}},(0,c.Z)(e,"&.".concat(lR.focused,":after"),{transform:"scaleX(1) translateX(0)"}),(0,c.Z)(e,"&.".concat(lR.error,":after"),{borderBottomColor:n.palette.error.main,transform:"scaleX(1)"}),(0,c.Z)(e,"&:before",{borderBottom:"1px solid ".concat(i),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"}),(0,c.Z)(e,"&:hover:not(.".concat(lR.disabled,"):before"),{borderBottom:"2px solid ".concat(n.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(i)}}),(0,c.Z)(e,"&.".concat(lR.disabled,":before"),{borderBottomStyle:"dotted"}),e))})),hR=(0,kC.ZP)(rR,{name:"MuiInput",slot:"Input",overridesResolver:eR})({}),fR=t.forwardRef((function(t,e){var n=(0,SC.Z)({props:t,name:"MuiInput"}),r=n.disableUnderline,i=n.components,o=void 0===i?{}:i,a=n.componentsProps,s=n.fullWidth,l=void 0!==s&&s,u=n.inputComponent,c=void 0===u?"input":u,h=n.multiline,f=void 0!==h&&h,p=n.type,d=void 0===p?"text":p,m=(0,Yn.Z)(n,uR),g=function(t){var e=t.classes,n={root:["root",!t.disableUnderline&&"underline"],input:["input"]},r=(0,wC.Z)(n,sR,e);return(0,$n.Z)({},e,r)}(n),v={root:{ownerState:{disableUnderline:r}}},y=a?(0,ur.Z)(a,v):v;return(0,Xo.jsx)(aR,(0,$n.Z)({components:(0,$n.Z)({Root:cR,Input:hR},o),componentsProps:y,fullWidth:l,inputComponent:c,multiline:f,ref:e,type:d},m,{classes:g}))}));fR.muiName="Input";var pR=fR;function dR(t){return(0,CC.Z)("MuiFilledInput",t)}var mR=(0,$n.Z)({},JL,(0,AC.Z)("MuiFilledInput",["root","underline","input"])),gR=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","type"],vR=(0,kC.ZP)(nR,{shouldForwardProp:function(t){return(0,kC.FO)(t)||"classes"===t},name:"MuiFilledInput",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[].concat((0,u.Z)(tR(t,e)),[!n.disableUnderline&&e.underline])}})((function(t){var e,n,r=t.theme,i=t.ownerState,o="light"===r.palette.mode,a=o?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=o?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)";return(0,$n.Z)((e={position:"relative",backgroundColor:s,borderTopLeftRadius:r.shape.borderRadius,borderTopRightRadius:r.shape.borderRadius,transition:r.transitions.create("background-color",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),"&:hover":{backgroundColor:o?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:s}}},(0,c.Z)(e,"&.".concat(mR.focused),{backgroundColor:s}),(0,c.Z)(e,"&.".concat(mR.disabled),{backgroundColor:o?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}),e),!i.disableUnderline&&(n={"&:after":{borderBottom:"2px solid ".concat(r.palette[i.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:r.transitions.create("transform",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),pointerEvents:"none"}},(0,c.Z)(n,"&.".concat(mR.focused,":after"),{transform:"scaleX(1) translateX(0)"}),(0,c.Z)(n,"&.".concat(mR.error,":after"),{borderBottomColor:r.palette.error.main,transform:"scaleX(1)"}),(0,c.Z)(n,"&:before",{borderBottom:"1px solid ".concat(a),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:r.transitions.create("border-bottom-color",{duration:r.transitions.duration.shorter}),pointerEvents:"none"}),(0,c.Z)(n,"&:hover:not(.".concat(mR.disabled,"):before"),{borderBottom:"1px solid ".concat(r.palette.text.primary)}),(0,c.Z)(n,"&.".concat(mR.disabled,":before"),{borderBottomStyle:"dotted"}),n),i.startAdornment&&{paddingLeft:12},i.endAdornment&&{paddingRight:12},i.multiline&&(0,$n.Z)({padding:"25px 12px 8px"},"small"===i.size&&{paddingTop:21,paddingBottom:4},i.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),yR=(0,kC.ZP)(rR,{name:"MuiFilledInput",slot:"Input",overridesResolver:eR})((function(t){var e=t.theme,n=t.ownerState;return(0,$n.Z)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9})})),_R=t.forwardRef((function(t,e){var n=(0,SC.Z)({props:t,name:"MuiFilledInput"}),r=n.components,i=void 0===r?{}:r,o=n.componentsProps,a=n.fullWidth,s=void 0!==a&&a,l=n.inputComponent,u=void 0===l?"input":l,c=n.multiline,h=void 0!==c&&c,f=n.type,p=void 0===f?"text":f,d=(0,Yn.Z)(n,gR),m=(0,$n.Z)({},n,{fullWidth:s,inputComponent:u,multiline:h,type:p}),g=function(t){var e=t.classes,n={root:["root",!t.disableUnderline&&"underline"],input:["input"]},r=(0,wC.Z)(n,dR,e);return(0,$n.Z)({},e,r)}(n),v={root:{ownerState:m},input:{ownerState:m}},y=o?(0,ur.Z)(o,v):v;return(0,Xo.jsx)(aR,(0,$n.Z)({components:(0,$n.Z)({Root:vR,Input:yR},i),componentsProps:y,fullWidth:s,inputComponent:u,multiline:h,ref:e,type:p},d,{classes:g}))}));_R.muiName="Input";var xR,bR=_R,wR=["children","classes","className","label","notched"],kR=(0,kC.ZP)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),SR=(0,kC.ZP)("legend")((function(t){var e=t.ownerState,n=t.theme;return(0,$n.Z)({float:"unset",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},e.withLabel&&(0,$n.Z)({display:"block",width:"auto",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function ER(t){return(0,CC.Z)("MuiOutlinedInput",t)}var IR=(0,$n.Z)({},JL,(0,AC.Z)("MuiOutlinedInput",["root","notchedOutline","input"])),CR=["components","fullWidth","inputComponent","label","multiline","notched","type"],AR=(0,kC.ZP)(nR,{shouldForwardProp:function(t){return(0,kC.FO)(t)||"classes"===t},name:"MuiOutlinedInput",slot:"Root",overridesResolver:tR})((function(t){var e,n=t.theme,r=t.ownerState,i="light"===n.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,$n.Z)((e={position:"relative",borderRadius:n.shape.borderRadius},(0,c.Z)(e,"&:hover .".concat(IR.notchedOutline),{borderColor:n.palette.text.primary}),(0,c.Z)(e,"@media (hover: none)",(0,c.Z)({},"&:hover .".concat(IR.notchedOutline),{borderColor:i})),(0,c.Z)(e,"&.".concat(IR.focused," .").concat(IR.notchedOutline),{borderColor:n.palette[r.color].main,borderWidth:2}),(0,c.Z)(e,"&.".concat(IR.error," .").concat(IR.notchedOutline),{borderColor:n.palette.error.main}),(0,c.Z)(e,"&.".concat(IR.disabled," .").concat(IR.notchedOutline),{borderColor:n.palette.action.disabled}),e),r.startAdornment&&{paddingLeft:14},r.endAdornment&&{paddingRight:14},r.multiline&&(0,$n.Z)({padding:"16.5px 14px"},"small"===r.size&&{padding:"8.5px 14px"}))})),PR=(0,kC.ZP)((function(t){var e=t.className,n=t.label,r=t.notched,i=(0,Yn.Z)(t,wR),o=null!=n&&""!==n,a=(0,$n.Z)({},t,{notched:r,withLabel:o});return(0,Xo.jsx)(kR,(0,$n.Z)({"aria-hidden":!0,className:e,ownerState:a},i,{children:(0,Xo.jsx)(SR,{ownerState:a,children:o?(0,Xo.jsx)("span",{children:n}):xR||(xR=(0,Xo.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:function(t,e){return e.notchedOutline}})((function(t){return{borderColor:"light"===t.theme.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}})),TR=(0,kC.ZP)(rR,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:eR})((function(t){var e=t.theme,n=t.ownerState;return(0,$n.Z)({padding:"16.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderRadius:"inherit"}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),MR=t.forwardRef((function(e,n){var r,i=(0,SC.Z)({props:e,name:"MuiOutlinedInput"}),o=i.components,a=void 0===o?{}:o,s=i.fullWidth,l=void 0!==s&&s,u=i.inputComponent,c=void 0===u?"input":u,h=i.label,f=i.multiline,p=void 0!==f&&f,d=i.notched,m=i.type,g=void 0===m?"text":m,v=(0,Yn.Z)(i,CR),y=function(t){var e=t.classes,n=(0,wC.Z)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},ER,e);return(0,$n.Z)({},e,n)}(i),_=xT({props:i,muiFormControl:wT(),states:["required"]});return(0,Xo.jsx)(aR,(0,$n.Z)({components:(0,$n.Z)({Root:AR,Input:TR},a),renderSuffix:function(e){return(0,Xo.jsx)(PR,{className:y.notchedOutline,label:null!=h&&""!==h&&_.required?r||(r=(0,Xo.jsxs)(t.Fragment,{children:[h,"\xa0","*"]})):h,notched:"undefined"!==typeof d?d:Boolean(e.startAdornment||e.filled||e.focused)})},fullWidth:l,inputComponent:c,multiline:p,ref:n,type:g},v,{classes:(0,$n.Z)({},y,{notchedOutline:null})}))}));MR.muiName="Input";var LR,RR,NR=MR,OR=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],zR={name:"MuiSelect",overridesResolver:function(t,e){return e.root},shouldForwardProp:function(t){return(0,kC.FO)(t)&&"variant"!==t},slot:"Root"},DR=(0,kC.ZP)(pR,zR)(""),FR=(0,kC.ZP)(NR,zR)(""),BR=(0,kC.ZP)(bR,zR)(""),jR=t.forwardRef((function(e,n){var r=(0,SC.Z)({name:"MuiSelect",props:e}),i=r.autoWidth,o=void 0!==i&&i,a=r.children,s=r.classes,l=void 0===s?{}:s,u=r.className,c=r.defaultOpen,h=void 0!==c&&c,f=r.displayEmpty,p=void 0!==f&&f,d=r.IconComponent,m=void 0===d?UL:d,g=r.id,v=r.input,y=r.inputProps,_=r.label,x=r.labelId,b=r.MenuProps,w=r.multiple,k=void 0!==w&&w,S=r.native,E=void 0!==S&&S,I=r.onClose,C=r.onOpen,A=r.open,P=r.renderValue,T=r.SelectDisplayProps,M=r.variant,L=void 0===M?"outlined":M,R=(0,Yn.Z)(r,OR),N=E?PL:ZL,O=xT({props:r,muiFormControl:wT(),states:["variant"]}).variant||L,z=v||{standard:LR||(LR=(0,Xo.jsx)(DR,{})),outlined:(0,Xo.jsx)(FR,{label:_}),filled:RR||(RR=(0,Xo.jsx)(BR,{}))}[O],D=function(t){return t.classes}((0,$n.Z)({},r,{variant:O,classes:l})),F=(0,GC.Z)(n,z.ref);return t.cloneElement(z,(0,$n.Z)({inputComponent:N,inputProps:(0,$n.Z)({children:a,IconComponent:m,variant:O,type:void 0,multiple:k},E?{id:g}:{autoWidth:o,defaultOpen:h,displayEmpty:p,labelId:x,MenuProps:b,onClose:I,onOpen:C,open:A,renderValue:P,SelectDisplayProps:(0,$n.Z)({id:g},T)},y,{classes:y?(0,ur.Z)(D,y.classes):D},v?v.props.inputProps:{})},k&&E&&"outlined"===O?{notched:!0}:{},{ref:F,className:(0,Kn.Z)(z.props.className,u),variant:O},R))}));jR.muiName="Select";var ZR=jR,UR=n(104),VR=["className","component"];var qR=n(7829),GR=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.defaultTheme,r=e.defaultClassName,i=void 0===r?"MuiBox-root":r,o=e.generateClassName,a=e.styleFunctionSx,s=void 0===a?UR.Z:a,l=(0,lr.ZP)("div")(s),u=t.forwardRef((function(t,e){var r=(0,gP.Z)(n),a=tP(t),s=a.className,u=a.component,c=void 0===u?"div":u,h=(0,Yn.Z)(a,VR);return(0,Xo.jsx)(l,(0,$n.Z)({as:c,ref:e,className:(0,Kn.Z)(s,o?o(i):i),theme:r},h))}));return u}({defaultTheme:(0,dC.Z)(),defaultClassName:"MuiBox-root",generateClassName:qR.Z.generate}),WR=GR;function HR(t){return(0,CC.Z)("MuiFormGroup",t)}(0,AC.Z)("MuiFormGroup",["root","row","error"]);var XR=["className","row"],YR=(0,kC.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,n.row&&e.row]}})((function(t){var e=t.ownerState;return(0,$n.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})})),$R=t.forwardRef((function(t,e){var n=(0,SC.Z)({props:t,name:"MuiFormGroup"}),r=n.className,i=n.row,o=void 0!==i&&i,a=(0,Yn.Z)(n,XR),s=xT({props:n,muiFormControl:wT(),states:["error"]}),l=(0,$n.Z)({},n,{row:o,error:s.error}),u=function(t){var e=t.classes,n={root:["root",t.row&&"row",t.error&&"error"]};return(0,wC.Z)(n,HR,e)}(l);return(0,Xo.jsx)(YR,(0,$n.Z)({className:(0,Kn.Z)(u.root,r),ownerState:l,ref:e},a))})),KR=$R;function JR(t){return(0,CC.Z)("MuiTypography",t)}(0,AC.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var QR=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],tN=(0,kC.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,n.variant&&e[n.variant],"inherit"!==n.align&&e["align".concat((0,EC.Z)(n.align))],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})((function(t){var e=t.theme,n=t.ownerState;return(0,$n.Z)({margin:0},n.variant&&e.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),eN={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},nN={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},rN=t.forwardRef((function(t,e){var n=(0,SC.Z)({props:t,name:"MuiTypography"}),r=function(t){return nN[t]||t}(n.color),i=tP((0,$n.Z)({},n,{color:r})),o=i.align,a=void 0===o?"inherit":o,s=i.className,l=i.component,u=i.gutterBottom,c=void 0!==u&&u,h=i.noWrap,f=void 0!==h&&h,p=i.paragraph,d=void 0!==p&&p,m=i.variant,g=void 0===m?"body1":m,v=i.variantMapping,y=void 0===v?eN:v,_=(0,Yn.Z)(i,QR),x=(0,$n.Z)({},i,{align:a,color:r,className:s,component:l,gutterBottom:c,noWrap:f,paragraph:d,variant:g,variantMapping:y}),b=l||(d?"p":y[g]||eN[g])||"span",w=function(t){var e=t.align,n=t.gutterBottom,r=t.noWrap,i=t.paragraph,o=t.variant,a=t.classes,s={root:["root",o,"inherit"!==t.align&&"align".concat((0,EC.Z)(e)),n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return(0,wC.Z)(s,JR,a)}(x);return(0,Xo.jsx)(tN,(0,$n.Z)({as:b,ref:e,ownerState:x,className:(0,Kn.Z)(w.root,s)},_))})),iN=rN;function oN(t){return(0,CC.Z)("MuiFormControlLabel",t)}var aN=(0,AC.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]),sN=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","value"],lN=(0,kC.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[(0,c.Z)({},"& .".concat(aN.label),e.label),e.root,e["labelPlacement".concat((0,EC.Z)(n.labelPlacement))]]}})((function(t){var e=t.theme,n=t.ownerState;return(0,$n.Z)((0,c.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16},"&.".concat(aN.disabled),{cursor:"default"}),"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},(0,c.Z)({},"& .".concat(aN.label),(0,c.Z)({},"&.".concat(aN.disabled),{color:e.palette.text.disabled})))})),uN=t.forwardRef((function(e,n){var r=(0,SC.Z)({props:e,name:"MuiFormControlLabel"}),i=r.className,o=r.componentsProps,a=void 0===o?{}:o,s=r.control,l=r.disabled,u=r.disableTypography,c=r.label,h=r.labelPlacement,f=void 0===h?"end":h,p=(0,Yn.Z)(r,sN),d=wT(),m=l;"undefined"===typeof m&&"undefined"!==typeof s.props.disabled&&(m=s.props.disabled),"undefined"===typeof m&&d&&(m=d.disabled);var g={disabled:m};["checked","name","onChange","value","inputRef"].forEach((function(t){"undefined"===typeof s.props[t]&&"undefined"!==typeof r[t]&&(g[t]=r[t])}));var v=xT({props:r,muiFormControl:d,states:["error"]}),y=(0,$n.Z)({},r,{disabled:m,labelPlacement:f,error:v.error}),_=function(t){var e=t.classes,n=t.disabled,r=t.labelPlacement,i=t.error,o={root:["root",n&&"disabled","labelPlacement".concat((0,EC.Z)(r)),i&&"error"],label:["label",n&&"disabled"]};return(0,wC.Z)(o,oN,e)}(y),x=c;return null==x||x.type===iN||u||(x=(0,Xo.jsx)(iN,(0,$n.Z)({component:"span",className:_.label},a.typography,{children:x}))),(0,Xo.jsxs)(lN,(0,$n.Z)({className:(0,Kn.Z)(_.root,i),ownerState:y,ref:n},p,{children:[t.cloneElement(s,g),x]}))})),cN=uN;function hN(t){return(0,CC.Z)("PrivateSwitchBase",t)}(0,AC.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var fN=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],pN=(0,kC.ZP)(yA)((function(t){var e=t.ownerState;return(0,$n.Z)({padding:9,borderRadius:"50%"},"start"===e.edge&&{marginLeft:"small"===e.size?-3:-12},"end"===e.edge&&{marginRight:"small"===e.size?-3:-12})})),dN=(0,kC.ZP)("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),mN=t.forwardRef((function(t,e){var n=t.autoFocus,r=t.checked,o=t.checkedIcon,a=t.className,s=t.defaultChecked,l=t.disabled,u=t.disableFocusRipple,c=void 0!==u&&u,h=t.edge,f=void 0!==h&&h,p=t.icon,d=t.id,m=t.inputProps,g=t.inputRef,v=t.name,y=t.onBlur,_=t.onChange,x=t.onFocus,b=t.readOnly,w=t.required,k=t.tabIndex,S=t.type,E=t.value,I=(0,Yn.Z)(t,fN),C=(0,TL.Z)({controlled:r,default:Boolean(s),name:"SwitchBase",state:"checked"}),A=(0,i.Z)(C,2),P=A[0],T=A[1],M=wT(),L=l;M&&"undefined"===typeof L&&(L=M.disabled);var R="checkbox"===S||"radio"===S,N=(0,$n.Z)({},t,{checked:P,disabled:L,disableFocusRipple:c,edge:f}),O=function(t){var e=t.classes,n=t.checked,r=t.disabled,i=t.edge,o={root:["root",n&&"checked",r&&"disabled",i&&"edge".concat((0,EC.Z)(i))],input:["input"]};return(0,wC.Z)(o,hN,e)}(N);return(0,Xo.jsxs)(pN,(0,$n.Z)({component:"span",className:(0,Kn.Z)(O.root,a),centerRipple:!0,focusRipple:!c,disabled:L,tabIndex:null,role:void 0,onFocus:function(t){x&&x(t),M&&M.onFocus&&M.onFocus(t)},onBlur:function(t){y&&y(t),M&&M.onBlur&&M.onBlur(t)},ownerState:N,ref:e},I,{children:[(0,Xo.jsx)(dN,(0,$n.Z)({autoFocus:n,checked:r,defaultChecked:s,className:O.input,disabled:L,id:R&&d,name:v,onChange:function(t){if(!t.nativeEvent.defaultPrevented){var e=t.target.checked;T(e),_&&_(t,e)}},readOnly:b,ref:g,required:w,ownerState:N,tabIndex:k,type:S},"checkbox"===S&&void 0===E?{}:{value:E},m)),P?o:p]}))})),gN=mN,vN=(0,JP.Z)((0,Xo.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),yN=(0,JP.Z)((0,Xo.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),_N=(0,JP.Z)((0,Xo.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function xN(t){return(0,CC.Z)("MuiCheckbox",t)}var bN=(0,AC.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),wN=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size"],kN=(0,kC.ZP)(gN,{shouldForwardProp:function(t){return(0,kC.FO)(t)||"classes"===t},name:"MuiCheckbox",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,n.indeterminate&&e.indeterminate,"default"!==n.color&&e["color".concat((0,EC.Z)(n.color))]]}})((function(t){var e,n=t.theme,r=t.ownerState;return(0,$n.Z)({color:n.palette.text.secondary},!r.disableRipple&&{"&:hover":{backgroundColor:(0,IC.Fq)("default"===r.color?n.palette.action.active:n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&(e={},(0,c.Z)(e,"&.".concat(bN.checked,", &.").concat(bN.indeterminate),{color:n.palette[r.color].main}),(0,c.Z)(e,"&.".concat(bN.disabled),{color:n.palette.action.disabled}),e))})),SN=(0,Xo.jsx)(yN,{}),EN=(0,Xo.jsx)(vN,{}),IN=(0,Xo.jsx)(_N,{}),CN=t.forwardRef((function(e,n){var r,i,o=(0,SC.Z)({props:e,name:"MuiCheckbox"}),a=o.checkedIcon,s=void 0===a?SN:a,l=o.color,u=void 0===l?"primary":l,c=o.icon,h=void 0===c?EN:c,f=o.indeterminate,p=void 0!==f&&f,d=o.indeterminateIcon,m=void 0===d?IN:d,g=o.inputProps,v=o.size,y=void 0===v?"medium":v,_=(0,Yn.Z)(o,wN),x=p?m:h,b=p?m:s,w=(0,$n.Z)({},o,{color:u,indeterminate:p,size:y}),k=function(t){var e=t.classes,n=t.indeterminate,r=t.color,i={root:["root",n&&"indeterminate","color".concat((0,EC.Z)(r))]},o=(0,wC.Z)(i,xN,e);return(0,$n.Z)({},e,o)}(w);return(0,Xo.jsx)(kN,(0,$n.Z)({type:"checkbox",inputProps:(0,$n.Z)({"data-indeterminate":p},g),icon:t.cloneElement(x,{fontSize:null!=(r=x.props.fontSize)?r:y}),checkedIcon:t.cloneElement(b,{fontSize:null!=(i=b.props.fontSize)?i:y}),ownerState:w,ref:n},_,{classes:k}))})),AN=CN,PN={street:["footway","street","road","street_name","residential","path","pedestrian","road_reference","road_reference_intl","square","place"],number:["house_number","street_number"],place:["city","village","hamlet","locality","croft","neighbourhood","suburb","city_district","district","quarter","borough","city_block","residential","commercial","industrial","houses","subdivision","allotments","postal_city","town","municipality","local_administrative_area"],zip:["postcode","partial_postcode"],state:["state","province","state_code"]},TN=function(t){var e=[];for(var n in PN)PN[n].some((function(n){return!!t.hasOwnProperty(n)&&(e.push(t[n]),!0)}));return e.join(", ")},MN=function(t){return 25.4,3.7795275590551185*t+"px"},LN=function(t,e,n){n(!0);var r=window.devicePixelRatio,i=document.createElement("div");i.className="hidden-map",document.body.appendChild(i);var o=document.createElement("div");o.style.width=MN(210),o.style.height=MN(297),i.appendChild(o);var a=new(k().Map)({container:o,center:t.getCenter(),zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1}),s=t.getStyle(),l=function(t){var e=s.sources[t];Object.keys(e).forEach((function(t){e[t]||delete e[t]}))};for(var c in s.sources)l(c);a.setStyle(s),a.once("idle",(function(){var t,o=new Dn({orientation:"p",unit:"mm",compress:!0});Object.defineProperty(window,"devicePixelRatio",{get:function(){return 3.125}});var s=3.25,l=(e?TN(e.address):"").split(","),c=[];c.length&&l.forEach((function(t){var e=t.match(/.{1,34}/g);c.push.apply(c,(0,u.Z)(e))})),o.addImage(a.getCanvas().toDataURL("image/png"),"png",0,0,210,297,null,"FAST"),o.setFillColor("white"),o.rect(138,287,297,10,"F"),o.setFontSize(10),o.text("Datenquelle: \xa9 OpenStreetMap-Mitwirkende",140,o.internal.pageSize.height-3),o.setFillColor("white");var h=c.length*s+3+3+6.5+4+1;o.rect(2.5,2,66.5,h,"F"),o.setFontSize(10),o.text("Karten PDF:",6,5.5),o.rect(6,7,60,c.length*s+4+1),o.setFontSize(10),c.forEach((function(t,e){o.text(t.trim(),8,10+3.5*e+2)})),o.addImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKgAAACxCAMAAABnTAbVAAAC8VBMVEUAAAD/AACAAACqAFW/AECZMzOqK1W2JEm/IECqHDmzGk25F0aqFUCxJzu2JEmqIkSvIEC0HjyqHEeuG0OzGkC2GD2uI0axIUO1IECtHz2xHUWzHEKtG0CwGj6zIkS1IUKyHz60HkSvHUKxHECzHD6uG0OxIUGzIECuHz6wHkOyHkG0HUCwHD6xHEOzIUGvIECxHz6zH0KvHkGxHUCyHT+vHEKwHEGyIECzHz+wH0KxHkGzHkCwHT+xHUKyHEGvIECxHz+yH0KzHkGwHkCxHj+zHUKwHUGxHECyHz+wH0GxH0GyHkCwHj+xHUGyHUGzHUCwHz+xH0GyH0GwHkCxHj+yHkGwHUCxHUCyHT+wH0GxH0CxHkCyHj+wHkGxHkCyHUCwHT+xH0GyH0CwH0CxHj+yHkGwHkCxHUCxHT+yHUGwH0CxH0CyHj+wHkGxHkCyHkCwHT+xHUGxH0CyH0CxHz+xHkGyHkCwHkCxHj+yHUGwHUCxH0CwHkGxHkCxHkCyHj+xHUGxHUCyH0CwHz+xHkGyHkCwHkCxHj+xHkGwHUCxHUCxHz+yH0GxHkCyHj+wHkGxHUCxHUCwHz+xH0GxHkCyHkCxHj+xHkGyHkCxHUCxHT+yH0GwHkCxHkCxHj+wHkGxHkCxHkCyHT+xH0GxH0CyHkCxHj+xHkGxHkCwHkCxHT+xHUCwH0CxHkCxHj+yHkCxHkCxHkCyHj+xHUCxH0CxHkCwHj+xHkCxHkCwHkCxHj+xHkCyHUCxH0CxHj+xHkCxHkCxHkCxHj+wHkCxHUCxH0CyHj+xHkCxHkCyHkCxHj+xHkCxHUCxHz+xHkCwHkCxHkCxHj+yHkCxHkCxHkCxHkCxHkCxHkCxHj+xHkCwHkCxHT+xHkCxHkCxHkCxHj+xHkCxHkCxHkCxHj+xH0CxHkCxHkCyHj+xHkCxHkCxHkCxHj+xHkCxHkCxHkCxHj+xHkCxHkCxHkCxHj+xHkCxHkCxHkCxHj+xHkCxHkD///9g21WfAAAA+XRSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyEiIyQlJicoKSorLC0uLzAxMjM0NTY3ODk6Ozw9Pj9AQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpbXF1eX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ent8fn+AgYKDhIWGh4iJiouMjY6PkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc/Q0dLT1NXW19ja29zd3uDh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7v1AMKAAAAAWJLR0T61W0GSgAACWZJREFUGBnVwXlAVHUCB/DvmxkuD0QswFo3TcwzS0p01RVMpUytLKxMSVNpLUsLj7VDo7btsNTssrTMdAtWNjNbkyzF3EotwrXMI7XwAAxE5Jz5/rcaMMx782Z452/p84GV2na+ZmRqasrwxE4OtFRhI/+29SS9qn/86PGUKLQ4CW+X0p/n+xeTnGhB4v/NgIpXj3aihZhRyaCOPNYRwrW+KwkKmWxWTVYfiBRy49qzxW0hN5FaeLLiIUrv5UUkl0Au9iy1qXk1BgJIIzZ7eMG1kHuBmpVMkWCz0LQC1itzQkb6hTpsiYOdQmcfZ6M8yPWmLoWDYBsp9SCbZENuDPWpmgKbJO+mr9WQm0y95sEO8Zso9z7k7qJuj8JyzofPUeFjyA2nfvfDYl23089eyPWkfrXDYCXXI1X0Vy5BxllC/U50hHU676aqbpDLogEfoEFUR5g0qoTqJkJuAo0YjQZPpcIMab6bAayBXMgxGrDfiXrhBVnRMOyiTxhQkQtyGTTidjS4quZIEgzqfYRBjIFc2Pc0YCcaLWbdXyUY8acSBrMBCgPqqJ+nExpEniL/FQn9hpczKHdPKCyiAfeh0SMkf+wDvSbWsBlroCCtpX6volFkOcmzqdBntofN8QyGQkQudcuF12qe554DPWZRg70hUAjNoV6fwyuFv1nuhGYT3dRiDpRCVlCnHHiFlfM3m9tCo5trqUlFX/hJO0ddFqJJLut9HQ1NrquiRoc7wM/V31GPa9DkGTbIvwga9C+nZrlO+Al9opqabYWPqWy0NwbNuvQEdXgJKuI/oEaVfeFjFL32xaEZYV+yQeWBbVlZq15f9sp7W/YcrmYAS6AmOY9aeCbA13Vssv8SBPcazzuaPS/5Yvhy9bhtYfZxqlgiQU3SFg+bUzUJMtfTR0EUgpnK2s/n9oQ6qe+cT85R6SUnVPVYXsag9iVCLo2+dkQgsKv3zI9FUBGpuR7KbY6CulZ3bqplICfmhUHhWcpsdCGgi6FB16dOUeaHeATSbtyKI/Tn2TEtAn7yKLdSgkmt55ygr9M3I4ies9fkV7PJwXVTO0HFxbVUWAjTWj10kr7eikRQIb3vSJ8//5l5aSN7RyGAJ6nkuQXmRS1108eRZJgUeZp+yvvAAoP20od7VRxMeZEqDkXDAiFPuumjLCMExo3yUM2nLljhhhL6+iHVAYO6nqK6TFii05eU2ZfmhBHdf2YA7mRYIiybcnvTwqDbgJMM6Gh7WML5JhVOPvNH6CLNqmYQ62ENaSmVatbfFArNEvIoV7Phvmti2rXukrJgazXPmw6LLKa/4uUDHdAi/h8eylQtjoNX1H355JlOsIb0PtUUrhgTgeAcoza5KfddD8hIN37LjbBI+BdUV/HJI4NCEIBr2LKjVNrcFkquhypvh0UuOsCAzm5bktYnBHLRQx/d9Cv9veeCir550bBI3yoGVXv40xWZGdNT09LTH12yZmcR1X0VDlVtR8Aqc2mBXzrCdo7PaN44CHBZKc36CELMpUk1XSBE6EGa8xYEmUBT3L0giLSLZnwIYW6iGbdCGMdhGlcaAXHm07g3IVCHczRsHER6l0bVRkGk22jUTgjVpooGPQuxttCg8RDrARp0OcTqRWPKJYjlqqQh+RBtDw1ZD9FW0pDnIdqDNCQDoo2iIVMgWiINGQvRLqchwyBaFA35M0STamjEIAh3mkYMhnClNOJ6CHeGRqRCuCoakQ7RImhIJkSLoyFvQbSraMhWiDaWhhyFaDNpiKcdBFtOYwZCsG00ZjrEkoppzGsQqzsNyodY99CgukgI9TaNSoZIUiGNWgSREmjYfyDSszSsrj3EcRyjceMgTgpNWAlx1tGEYhdEiaygGddBlIdoyisQJKKQphx3QYxZNGk0hAj7mSblQIiZNKs2DgJEn6RpcyDACpr3kwu2S3TTAnfAbq58WmEP7PYYgzq1fdXf56anT5/ycOayNZ8WMaChsNeQWgZy4NXJie0hFzciY2MF1WyDrWJ/oaritfdchgAiRr18jP5ugI0cW6jCnZsWgaAcwzd6qPCdA/Z5mv4Ozr8EGvR4pZpyE2CbSR4qHU53QaP4LA99FbaDTW6po8L+iU7oMHg3fS2DPYZVUe50uhP6uBbWsom7P+xw7RnKrYuFfgMPsUl+KKw39FfKHEqBIW3Xs8lSWC61ijKrW8Egx1I2uQ0We8BNX1WzYMIsNxuVd4eVnIspc6gfTJnkZqP/RsM6l26nTG4UTHqAXl+1gVWGn6DMhnCYlkmvz8JhidDFHsqsdMICb9BrUxtY4M97KbdMghXCvqFXwWUwq+NaKjwHi3Qto1dhf5gSOruMCu9IsMqdbFI11wnDwmcepdLmEFhnHX18PQDGtM44Tj+72sBCl5yhD88/+0G/K18sor/CWFhqDuV2psfCq/UMNCdm9rdUU5cMa4V8TwVP/uszRicmJAyZ9m5ZJfCXpBAE4Lx2wWc1VLcQVhvHIN4DxrM0J2NwBBRikmdmlzCgrQ5YzbGfgaUA0k6eV1OQ8/y9qSMHJQy96e4HH389r5hBFcXBelMZ0DEngEQPdZsCG4T9zECewgUrqdcOCXZYyACqL8UFHYqoT21f2OJyD9WtQr1p1Oc52GQ3VXl6oZ6URz1OtYFNHqaqj9AovoI6LIBd/kBVQ+E1m9qVRMI2P1LFDjRx5FGzx2GfN+nPMxA+OpVQo7L2sM9k+suGzHhq9AJs1Jl+arpBbhW1uRJ2KqXSMii0LqAWu2Crb6hQGgOlrr9Sgxmw1ftUSIe/MR42q7I9bPU05bZLUPEEm5UDe02jTGU3qJHWsjn3wl7jKbMA6iK+YjO6wF430te3IQgg9hCDOgCbJdNH+RUIqMtxBvMybDaAPiYhiH5lDOJW2Kwfm7yBoJIqGFhX2CyJXgURCG74OQZS4YDNxrJR6RVozohKBrAHdpvEBjUj0LyUCqpbDbvdzwaTocWQUqqaB7stYr1MaJNQRDV3wG7v8DdrJGjU7SBVXA+7fcELPgyFZh2+oL/+sJmjjOd9HAYdWuXQzxWwWS+e92EodJEWeagQA5tNJ7khFHrdUk65cNgsh8wOhX4991GmFewVVs7nHTAiYil9tYO9Uuruh1F3n2GTONjr6dEwrnMevfrBXrEwwzGvig3GomXrvoP1HkQLJ6WV8II30OJ1XO0huQu/AwN3k5Vh+B1wpP3EIfhdCE2fhv+X/wF/AO+L9vuzfwAAAABJRU5ErkJggg==","png",5,12+3*c.length+4,3,3,null,"FAST"),o.setFontSize(10),o.text("wheregroup.com",40,12+c.length*s+4+1),o.setProperties({title:"Map export",subject:"Map export",creator:"WhereGroup GmbH",author:"(c)WhereGroup GmbH, (c)OpenStreetMap"}),o.save("Map.pdf"),a.remove(),null===(t=i.parentNode)||void 0===t||t.removeChild(i),Object.defineProperty(window,"devicePixelRatio",{get:function(){return r}}),n(!1)}))};function RN(t){return(0,CC.Z)("MuiButton",t)}var NN=(0,AC.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","contained","containedInherit","containedPrimary","containedSecondary","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var ON=t.createContext({}),zN=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],DN=function(t){return(0,$n.Z)({},"small"===t.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===t.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===t.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},FN=(0,kC.ZP)(yA,{shouldForwardProp:function(t){return(0,kC.FO)(t)||"classes"===t},name:"MuiButton",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,e[n.variant],e["".concat(n.variant).concat((0,EC.Z)(n.color))],e["size".concat((0,EC.Z)(n.size))],e["".concat(n.variant,"Size").concat((0,EC.Z)(n.size))],"inherit"===n.color&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})((function(t){var e,n,r,i=t.theme,o=t.ownerState;return(0,$n.Z)({},i.typography.button,(e={minWidth:64,padding:"6px 16px",borderRadius:(i.vars||i).shape.borderRadius,transition:i.transitions.create(["background-color","box-shadow","border-color","color"],{duration:i.transitions.duration.short}),"&:hover":(0,$n.Z)({textDecoration:"none",backgroundColor:i.vars?"rgba(".concat(i.vars.palette.text.primaryChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):(0,IC.Fq)(i.palette.text.primary,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===o.variant&&"inherit"!==o.color&&{backgroundColor:i.vars?"rgba(".concat(i.vars.palette[o.color].mainChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):(0,IC.Fq)(i.palette[o.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===o.variant&&"inherit"!==o.color&&{border:"1px solid ".concat((i.vars||i).palette[o.color].main),backgroundColor:i.vars?"rgba(".concat(i.vars.palette[o.color].mainChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):(0,IC.Fq)(i.palette[o.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===o.variant&&{backgroundColor:(i.vars||i).palette.grey.A100,boxShadow:(i.vars||i).shadows[4],"@media (hover: none)":{boxShadow:(i.vars||i).shadows[2],backgroundColor:(i.vars||i).palette.grey[300]}},"contained"===o.variant&&"inherit"!==o.color&&{backgroundColor:(i.vars||i).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(i.vars||i).palette[o.color].main}}),"&:active":(0,$n.Z)({},"contained"===o.variant&&{boxShadow:(i.vars||i).shadows[8]})},(0,c.Z)(e,"&.".concat(NN.focusVisible),(0,$n.Z)({},"contained"===o.variant&&{boxShadow:(i.vars||i).shadows[6]})),(0,c.Z)(e,"&.".concat(NN.disabled),(0,$n.Z)({color:(i.vars||i).palette.action.disabled},"outlined"===o.variant&&{border:"1px solid ".concat((i.vars||i).palette.action.disabledBackground)},"outlined"===o.variant&&"secondary"===o.color&&{border:"1px solid ".concat((i.vars||i).palette.action.disabled)},"contained"===o.variant&&{color:(i.vars||i).palette.action.disabled,boxShadow:(i.vars||i).shadows[0],backgroundColor:(i.vars||i).palette.action.disabledBackground})),e),"text"===o.variant&&{padding:"6px 8px"},"text"===o.variant&&"inherit"!==o.color&&{color:(i.vars||i).palette[o.color].main},"outlined"===o.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===o.variant&&"inherit"!==o.color&&{color:(i.vars||i).palette[o.color].main,border:i.vars?"1px solid rgba(".concat(i.vars.palette[o.color].mainChannel," / 0.5)"):"1px solid ".concat((0,IC.Fq)(i.palette[o.color].main,.5))},"contained"===o.variant&&{color:i.vars?i.vars.palette.text.primary:null==(n=(r=i.palette).getContrastText)?void 0:n.call(r,i.palette.grey[300]),backgroundColor:(i.vars||i).palette.grey[300],boxShadow:(i.vars||i).shadows[2]},"contained"===o.variant&&"inherit"!==o.color&&{color:(i.vars||i).palette[o.color].contrastText,backgroundColor:(i.vars||i).palette[o.color].main},"inherit"===o.color&&{color:"inherit",borderColor:"currentColor"},"small"===o.size&&"text"===o.variant&&{padding:"4px 5px",fontSize:i.typography.pxToRem(13)},"large"===o.size&&"text"===o.variant&&{padding:"8px 11px",fontSize:i.typography.pxToRem(15)},"small"===o.size&&"outlined"===o.variant&&{padding:"3px 9px",fontSize:i.typography.pxToRem(13)},"large"===o.size&&"outlined"===o.variant&&{padding:"7px 21px",fontSize:i.typography.pxToRem(15)},"small"===o.size&&"contained"===o.variant&&{padding:"4px 10px",fontSize:i.typography.pxToRem(13)},"large"===o.size&&"contained"===o.variant&&{padding:"8px 22px",fontSize:i.typography.pxToRem(15)},o.fullWidth&&{width:"100%"})}),(function(t){var e;return t.ownerState.disableElevation&&(e={boxShadow:"none","&:hover":{boxShadow:"none"}},(0,c.Z)(e,"&.".concat(NN.focusVisible),{boxShadow:"none"}),(0,c.Z)(e,"&:active",{boxShadow:"none"}),(0,c.Z)(e,"&.".concat(NN.disabled),{boxShadow:"none"}),e)})),BN=(0,kC.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(t,e){var n=t.ownerState;return[e.startIcon,e["iconSize".concat((0,EC.Z)(n.size))]]}})((function(t){var e=t.ownerState;return(0,$n.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===e.size&&{marginLeft:-2},DN(e))})),jN=(0,kC.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(t,e){var n=t.ownerState;return[e.endIcon,e["iconSize".concat((0,EC.Z)(n.size))]]}})((function(t){var e=t.ownerState;return(0,$n.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===e.size&&{marginRight:-2},DN(e))})),ZN=t.forwardRef((function(e,n){var r=t.useContext(ON),i=(0,Jn.Z)(r,e),o=(0,SC.Z)({props:i,name:"MuiButton"}),a=o.children,s=o.color,l=void 0===s?"primary":s,u=o.component,c=void 0===u?"button":u,h=o.className,f=o.disabled,p=void 0!==f&&f,d=o.disableElevation,m=void 0!==d&&d,g=o.disableFocusRipple,v=void 0!==g&&g,y=o.endIcon,_=o.focusVisibleClassName,x=o.fullWidth,b=void 0!==x&&x,w=o.size,k=void 0===w?"medium":w,S=o.startIcon,E=o.type,I=o.variant,C=void 0===I?"text":I,A=(0,Yn.Z)(o,zN),P=(0,$n.Z)({},o,{color:l,component:c,disabled:p,disableElevation:m,disableFocusRipple:v,fullWidth:b,size:k,type:E,variant:C}),T=function(t){var e=t.color,n=t.disableElevation,r=t.fullWidth,i=t.size,o=t.variant,a=t.classes,s={root:["root",o,"".concat(o).concat((0,EC.Z)(e)),"size".concat((0,EC.Z)(i)),"".concat(o,"Size").concat((0,EC.Z)(i)),"inherit"===e&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,EC.Z)(i))],endIcon:["endIcon","iconSize".concat((0,EC.Z)(i))]},l=(0,wC.Z)(s,RN,a);return(0,$n.Z)({},a,l)}(P),M=S&&(0,Xo.jsx)(BN,{className:T.startIcon,ownerState:P,children:S}),L=y&&(0,Xo.jsx)(jN,{className:T.endIcon,ownerState:P,children:y});return(0,Xo.jsxs)(FN,(0,$n.Z)({ownerState:P,className:(0,Kn.Z)(h,r.className),component:c,disabled:p,focusRipple:!v,focusVisibleClassName:(0,Kn.Z)(T.focusVisible,_),ref:n,type:E},A,{classes:T,children:[M,a,L]}))})),UN=ZN,VN=function(e){var n=(0,t.useContext)(Qd),r=(0,t.useRef)(!1),i=(0,t.useRef)(void 0);return(0,t.useEffect)((function(){n.mapExists(e.mapId)&&!r.current&&(r.current=!0,i.current=n.getMap(e.mapId))}),[n.mapIds,n,e.mapId]),(0,Xo.jsx)(Xo.Fragment,{children:(0,Xo.jsx)(UN,{variant:"contained",disableElevation:!0,style:{backgroundColor:mC.palette.blue,color:"white",float:"right",marginBottom:"20px"},onClick:function(){LN(i.current,null,(function(){}))},children:"Drucken"})})};VN.defaultProps={mapId:void 0};var qN=VN,GN=n(6248);function WN(t){return(0,CC.Z)("MuiFormHelperText",t)}var HN,XN=(0,AC.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),YN=["children","className","component","disabled","error","filled","focused","margin","required","variant"],$N=(0,kC.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,n.size&&e["size".concat((0,EC.Z)(n.size))],n.contained&&e.contained,n.filled&&e.filled]}})((function(t){var e,n=t.theme,r=t.ownerState;return(0,$n.Z)({color:n.palette.text.secondary},n.typography.caption,(e={textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0},(0,c.Z)(e,"&.".concat(XN.disabled),{color:n.palette.text.disabled}),(0,c.Z)(e,"&.".concat(XN.error),{color:n.palette.error.main}),e),"small"===r.size&&{marginTop:4},r.contained&&{marginLeft:14,marginRight:14})})),KN=t.forwardRef((function(t,e){var n=(0,SC.Z)({props:t,name:"MuiFormHelperText"}),r=n.children,i=n.className,o=n.component,a=void 0===o?"p":o,s=(0,Yn.Z)(n,YN),l=xT({props:n,muiFormControl:wT(),states:["variant","size","disabled","error","filled","focused","required"]}),u=(0,$n.Z)({},n,{component:a,contained:"filled"===l.variant||"outlined"===l.variant,variant:l.variant,size:l.size,disabled:l.disabled,error:l.error,filled:l.filled,focused:l.focused,required:l.required}),c=function(t){var e=t.classes,n=t.contained,r=t.size,i=t.disabled,o=t.error,a=t.filled,s=t.focused,l=t.required,u={root:["root",i&&"disabled",o&&"error",r&&"size".concat((0,EC.Z)(r)),n&&"contained",s&&"focused",a&&"filled",l&&"required"]};return(0,wC.Z)(u,WN,e)}(u);return(0,Xo.jsx)($N,(0,$n.Z)({as:a,ownerState:u,className:(0,Kn.Z)(c.root,i),ref:e},s,{children:" "===r?HN||(HN=(0,Xo.jsx)("span",{className:"notranslate",children:"\u200b"})):r}))})),JN=KN;function QN(t){return(0,CC.Z)("MuiTextField",t)}(0,AC.Z)("MuiTextField",["root"]);var tO=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],eO={standard:pR,filled:bR,outlined:NR},nO=(0,kC.ZP)(tM,{name:"MuiTextField",slot:"Root",overridesResolver:function(t,e){return e.root}})({}),rO=t.forwardRef((function(t,e){var n=(0,SC.Z)({props:t,name:"MuiTextField"}),r=n.autoComplete,i=n.autoFocus,o=void 0!==i&&i,a=n.children,s=n.className,l=n.color,u=void 0===l?"primary":l,c=n.defaultValue,h=n.disabled,f=void 0!==h&&h,p=n.error,d=void 0!==p&&p,m=n.FormHelperTextProps,g=n.fullWidth,v=void 0!==g&&g,y=n.helperText,_=n.id,x=n.InputLabelProps,b=n.inputProps,w=n.InputProps,k=n.inputRef,S=n.label,E=n.maxRows,I=n.minRows,C=n.multiline,A=void 0!==C&&C,P=n.name,T=n.onBlur,M=n.onChange,L=n.onFocus,R=n.placeholder,N=n.required,O=void 0!==N&&N,z=n.rows,D=n.select,F=void 0!==D&&D,B=n.SelectProps,j=n.type,Z=n.value,U=n.variant,V=void 0===U?"outlined":U,q=(0,Yn.Z)(n,tO),G=(0,$n.Z)({},n,{autoFocus:o,color:u,disabled:f,error:d,fullWidth:v,multiline:A,required:O,select:F,variant:V}),W=function(t){var e=t.classes;return(0,wC.Z)({root:["root"]},QN,e)}(G);var H={};"outlined"===V&&(x&&"undefined"!==typeof x.shrink&&(H.notched=x.shrink),H.label=S),F&&(B&&B.native||(H.id=void 0),H["aria-describedby"]=void 0);var X=(0,GN.Z)(_),Y=y&&X?"".concat(X,"-helper-text"):void 0,$=S&&X?"".concat(X,"-label"):void 0,K=eO[V],J=(0,Xo.jsx)(K,(0,$n.Z)({"aria-describedby":Y,autoComplete:r,autoFocus:o,defaultValue:c,fullWidth:v,multiline:A,name:P,rows:z,maxRows:E,minRows:I,type:j,value:Z,id:X,inputRef:k,onBlur:T,onChange:M,onFocus:L,placeholder:R,inputProps:b},H,w));return(0,Xo.jsxs)(nO,(0,$n.Z)({className:(0,Kn.Z)(W.root,s),disabled:f,error:d,fullWidth:v,ref:e,required:O,color:u,variant:V,ownerState:G},q,{children:[null!=S&&""!==S&&(0,Xo.jsx)(NT,(0,$n.Z)({htmlFor:X,id:$},x,{children:S})),F?(0,Xo.jsx)(ZR,(0,$n.Z)({"aria-describedby":Y,id:X,labelId:$,value:Z,input:J},B,{children:a})):J,y&&(0,Xo.jsx)(JN,(0,$n.Z)({id:Y},m,{children:y}))]}))})),iO=rO,oO=pC((function(t){return{icon:{width:"40px",margin:"10px"},iconTitle:{width:"40px",margin:"10px",marginTop:"0px",marginBottom:"0px",color:t.palette.white},iconbutton:{padding:"0px !important"}}}));var aO=function(t){var e=oO(mC);return(0,Xo.jsxs)("div",{style:{width:"300px"},children:[(0,Xo.jsxs)(hP,{container:!0,style:{textAlign:"left",alignItems:"center"},children:[(0,Xo.jsx)(MA.Z,{className:e.iconTitle}),(0,Xo.jsx)("h4",{style:{margin:"0px",color:mC.palette.white},children:"Drucken"})]}),(0,Xo.jsxs)(WR,{m:2,style:{textAlign:"left",color:mC.palette.white},children:[(0,Xo.jsxs)(tM,{fullWidth:!0,variant:"standard",style:{marginBottom:"20px"},children:[(0,Xo.jsx)(NT,{id:"select-label-1",children:"Vorlage"}),(0,Xo.jsx)(ZR,{labelId:"select-label-1",MenuProps:{style:{zIndex:"2001"}},label:"Vorlage",style:{},children:(0,Xo.jsx)(WT,{value:10,children:"nicht implementiert"})})]}),(0,Xo.jsxs)(tM,{fullWidth:!0,variant:"standard",style:{marginBottom:"20px"},children:[(0,Xo.jsx)(NT,{id:"select-label-1",children:"Qualit\xe4t"}),(0,Xo.jsx)(ZR,{labelId:"select-label-1",MenuProps:{style:{zIndex:"2001"}},label:"Vorlage",style:{},children:(0,Xo.jsx)(WT,{value:10,children:"nicht implementiert"})})]}),(0,Xo.jsxs)(tM,{fullWidth:!0,variant:"standard",style:{marginBottom:"20px"},children:[(0,Xo.jsx)(NT,{id:"select-label-1",children:"Vorlage"}),(0,Xo.jsx)(ZR,{labelId:"select-label-1",MenuProps:{style:{zIndex:"2001"}},label:"Vorlage",style:{},children:(0,Xo.jsx)(WT,{value:10,children:"nicht implementiert"})})]}),(0,Xo.jsxs)(tM,{fullWidth:!0,variant:"standard",style:{marginBottom:"20px"},children:[(0,Xo.jsx)(NT,{id:"select-label-1",children:"Drehung"}),(0,Xo.jsx)(ZR,{labelId:"select-label-1",MenuProps:{style:{zIndex:"2001"}},label:"Vorlage",style:{},children:(0,Xo.jsx)(WT,{value:10,children:"nicht implementiert"})})]}),(0,Xo.jsx)(tM,{fullWidth:!0,variant:"standard",style:{marginBottom:"20px"},children:(0,Xo.jsx)(iO,{id:"standard-basic",label:"Titel",variant:"standard"})}),(0,Xo.jsx)(KR,{children:(0,Xo.jsx)(cN,{control:(0,Xo.jsx)(AN,{style:{color:mC.palette.white}}),label:"Legende drucken"})}),(0,Xo.jsx)(qN,{})]})]})};function sO(t){return(0,CC.Z)("MuiListItem",t)}var lO=(0,AC.Z)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);var uO=(0,AC.Z)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function cO(t){return(0,CC.Z)("MuiListItemSecondaryAction",t)}(0,AC.Z)("MuiListItemSecondaryAction",["root","disableGutters"]);var hO=["className"],fO=(0,kC.ZP)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,n.disableGutters&&e.disableGutters]}})((function(t){var e=t.ownerState;return(0,$n.Z)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})})),pO=t.forwardRef((function(e,n){var r=(0,SC.Z)({props:e,name:"MuiListItemSecondaryAction"}),i=r.className,o=(0,Yn.Z)(r,hO),a=t.useContext(OT),s=(0,$n.Z)({},r,{disableGutters:a.disableGutters}),l=function(t){var e=t.disableGutters,n=t.classes,r={root:["root",e&&"disableGutters"]};return(0,wC.Z)(r,cO,n)}(s);return(0,Xo.jsx)(fO,(0,$n.Z)({className:(0,Kn.Z)(l.root,i),ownerState:s,ref:n},o))}));pO.muiName="ListItemSecondaryAction";var dO=pO,mO=["className"],gO=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected"],vO=(0,kC.ZP)("div",{name:"MuiListItem",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,n.dense&&e.dense,"flex-start"===n.alignItems&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.button&&e.button,n.hasSecondaryAction&&e.secondaryAction]}})((function(t){var e,n=t.theme,r=t.ownerState;return(0,$n.Z)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!r.disablePadding&&(0,$n.Z)({paddingTop:8,paddingBottom:8},r.dense&&{paddingTop:4,paddingBottom:4},!r.disableGutters&&{paddingLeft:16,paddingRight:16},!!r.secondaryAction&&{paddingRight:48}),!!r.secondaryAction&&(0,c.Z)({},"& > .".concat(uO.root),{paddingRight:48}),(e={},(0,c.Z)(e,"&.".concat(lO.focusVisible),{backgroundColor:n.palette.action.focus}),(0,c.Z)(e,"&.".concat(lO.selected),(0,c.Z)({backgroundColor:(0,IC.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)},"&.".concat(lO.focusVisible),{backgroundColor:(0,IC.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)})),(0,c.Z)(e,"&.".concat(lO.disabled),{opacity:n.palette.action.disabledOpacity}),e),"flex-start"===r.alignItems&&{alignItems:"flex-start"},r.divider&&{borderBottom:"1px solid ".concat(n.palette.divider),backgroundClip:"padding-box"},r.button&&(0,c.Z)({transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:n.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(lO.selected,":hover"),{backgroundColor:(0,IC.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,IC.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}),r.hasSecondaryAction&&{paddingRight:48})})),yO=(0,kC.ZP)("li",{name:"MuiListItem",slot:"Container",overridesResolver:function(t,e){return e.container}})({position:"relative"}),_O=t.forwardRef((function(e,n){var r=(0,SC.Z)({props:e,name:"MuiListItem"}),i=r.alignItems,o=void 0===i?"center":i,a=r.autoFocus,s=void 0!==a&&a,l=r.button,u=void 0!==l&&l,c=r.children,h=r.className,f=r.component,p=r.components,d=void 0===p?{}:p,m=r.componentsProps,g=void 0===m?{}:m,v=r.ContainerComponent,y=void 0===v?"li":v,_=r.ContainerProps,x=(_=void 0===_?{}:_).className,b=r.dense,w=void 0!==b&&b,k=r.disabled,S=void 0!==k&&k,E=r.disableGutters,I=void 0!==E&&E,C=r.disablePadding,A=void 0!==C&&C,P=r.divider,T=void 0!==P&&P,M=r.focusVisibleClassName,L=r.secondaryAction,R=r.selected,N=void 0!==R&&R,O=(0,Yn.Z)(r.ContainerProps,mO),z=(0,Yn.Z)(r,gO),D=t.useContext(OT),F={dense:w||D.dense||!1,alignItems:o,disableGutters:I},B=t.useRef(null);(0,yC.Z)((function(){s&&B.current&&B.current.focus()}),[s]);var j=t.Children.toArray(c),Z=j.length&&(0,YT.Z)(j[j.length-1],["ListItemSecondaryAction"]),U=(0,$n.Z)({},r,{alignItems:o,autoFocus:s,button:u,dense:F.dense,disabled:S,disableGutters:I,disablePadding:A,divider:T,hasSecondaryAction:Z,selected:N}),V=function(t){var e=t.alignItems,n=t.button,r=t.classes,i=t.dense,o=t.disabled,a={root:["root",i&&"dense",!t.disableGutters&&"gutters",!t.disablePadding&&"padding",t.divider&&"divider",o&&"disabled",n&&"button","flex-start"===e&&"alignItemsFlexStart",t.hasSecondaryAction&&"secondaryAction",t.selected&&"selected"],container:["container"]};return(0,wC.Z)(a,sO,r)}(U),q=(0,GC.Z)(B,n),G=d.Root||vO,W=g.root||{},H=(0,$n.Z)({className:(0,Kn.Z)(V.root,W.className,h),disabled:S},z),X=f||"li";return u&&(H.component=f||"div",H.focusVisibleClassName=(0,Kn.Z)(lO.focusVisible,M),X=yA),Z?(X=H.component||f?X:"div","li"===y&&("li"===X?X="div":"li"===H.component&&(H.component="div")),(0,Xo.jsx)(OT.Provider,{value:F,children:(0,Xo.jsxs)(yO,(0,$n.Z)({as:y,className:(0,Kn.Z)(V.container,x),ref:q,ownerState:U},O,{children:[(0,Xo.jsx)(G,(0,$n.Z)({},W,!yM(G)&&{as:X,ownerState:(0,$n.Z)({},U,W.ownerState)},H,{children:j})),j.pop()]}))})):(0,Xo.jsx)(OT.Provider,{value:F,children:(0,Xo.jsxs)(G,(0,$n.Z)({},W,{as:X,ref:q,ownerState:U},!yM(G)&&{ownerState:(0,$n.Z)({},U,W.ownerState)},H,{children:[j,L&&(0,Xo.jsx)(dO,{children:L})]}))})})),xO=_O,bO=["className"],wO=(0,kC.ZP)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,"flex-start"===n.alignItems&&e.alignItemsFlexStart]}})((function(t){var e=t.theme,n=t.ownerState;return(0,$n.Z)({minWidth:56,color:e.palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===n.alignItems&&{marginTop:8})})),kO=t.forwardRef((function(e,n){var r=(0,SC.Z)({props:e,name:"MuiListItemIcon"}),i=r.className,o=(0,Yn.Z)(r,bO),a=t.useContext(OT),s=(0,$n.Z)({},r,{alignItems:a.alignItems}),l=function(t){var e=t.alignItems,n=t.classes,r={root:["root","flex-start"===e&&"alignItemsFlexStart"]};return(0,wC.Z)(r,DT,n)}(s);return(0,Xo.jsx)(wO,(0,$n.Z)({className:(0,Kn.Z)(l.root,i),ownerState:s,ref:n},o))})),SO=kO,EO=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],IO=(0,kC.ZP)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[(0,c.Z)({},"& .".concat(jT.primary),e.primary),(0,c.Z)({},"& .".concat(jT.secondary),e.secondary),e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})((function(t){var e=t.ownerState;return(0,$n.Z)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})})),CO=t.forwardRef((function(e,n){var r=(0,SC.Z)({props:e,name:"MuiListItemText"}),i=r.children,o=r.className,a=r.disableTypography,s=void 0!==a&&a,l=r.inset,u=void 0!==l&&l,c=r.primary,h=r.primaryTypographyProps,f=r.secondary,p=r.secondaryTypographyProps,d=(0,Yn.Z)(r,EO),m=t.useContext(OT).dense,g=null!=c?c:i,v=f,y=(0,$n.Z)({},r,{disableTypography:s,inset:u,primary:!!g,secondary:!!v,dense:m}),_=function(t){var e=t.classes,n=t.inset,r=t.primary,i=t.secondary,o={root:["root",n&&"inset",t.dense&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,wC.Z)(o,BT,e)}(y);return null==g||g.type===iN||s||(g=(0,Xo.jsx)(iN,(0,$n.Z)({variant:m?"body2":"body1",className:_.primary,component:"span",display:"block"},h,{children:g}))),null==v||v.type===iN||s||(v=(0,Xo.jsx)(iN,(0,$n.Z)({variant:"body2",className:_.secondary,color:"text.secondary",display:"block"},p,{children:v}))),(0,Xo.jsxs)(IO,(0,$n.Z)({className:(0,Kn.Z)(_.root,o),ownerState:y,ref:n},d,{children:[g,v]}))})),AO=CO,PO=n(1314);function TO(t){return(0,CC.Z)("MuiCollapse",t)}(0,AC.Z)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);var MO=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],LO=(0,kC.ZP)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,e[n.orientation],"entered"===n.state&&e.entered,"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&e.hidden]}})((function(t){var e=t.theme,n=t.ownerState;return(0,$n.Z)({height:0,overflow:"hidden",transition:e.transitions.create("height")},"horizontal"===n.orientation&&{height:"auto",width:0,transition:e.transitions.create("width")},"entered"===n.state&&(0,$n.Z)({height:"auto",overflow:"visible"},"horizontal"===n.orientation&&{width:"auto"}),"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&{visibility:"hidden"})})),RO=(0,kC.ZP)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:function(t,e){return e.wrapper}})((function(t){var e=t.ownerState;return(0,$n.Z)({display:"flex",width:"100%"},"horizontal"===e.orientation&&{width:"auto",height:"100%"})})),NO=(0,kC.ZP)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:function(t,e){return e.wrapperInner}})((function(t){var e=t.ownerState;return(0,$n.Z)({width:"100%"},"horizontal"===e.orientation&&{width:"auto",height:"100%"})})),OO=t.forwardRef((function(e,n){var r=(0,SC.Z)({props:e,name:"MuiCollapse"}),i=r.addEndListener,o=r.children,a=r.className,s=r.collapsedSize,l=void 0===s?"0px":s,u=r.component,h=r.easing,f=r.in,p=r.onEnter,d=r.onEntered,m=r.onEntering,g=r.onExit,v=r.onExited,y=r.onExiting,_=r.orientation,x=void 0===_?"vertical":_,b=r.style,w=r.timeout,k=void 0===w?PO.x9.standard:w,S=r.TransitionComponent,E=void 0===S?CP:S,I=(0,Yn.Z)(r,MO),C=(0,$n.Z)({},r,{orientation:x,collapsedSize:l}),A=function(t){var e=t.orientation,n=t.classes,r={root:["root","".concat(e)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(e)],wrapperInner:["wrapperInner","".concat(e)]};return(0,wC.Z)(r,TO,n)}(C),P=yP(),T=t.useRef(),M=t.useRef(null),L=t.useRef(),R="number"===typeof l?"".concat(l,"px"):l,N="horizontal"===x,O=N?"width":"height";t.useEffect((function(){return function(){clearTimeout(T.current)}}),[]);var z=t.useRef(null),D=(0,GC.Z)(n,z),F=function(t){return function(e){if(t){var n=z.current;void 0===e?t(n):t(n,e)}}},B=function(){return M.current?M.current[N?"clientWidth":"clientHeight"]:0},j=F((function(t,e){M.current&&N&&(M.current.style.position="absolute"),t.style[O]=R,p&&p(t,e)})),Z=F((function(t,e){var n=B();M.current&&N&&(M.current.style.position="");var r=PP({style:b,timeout:k,easing:h},{mode:"enter"}),i=r.duration,o=r.easing;if("auto"===k){var a=P.transitions.getAutoHeightDuration(n);t.style.transitionDuration="".concat(a,"ms"),L.current=a}else t.style.transitionDuration="string"===typeof i?i:"".concat(i,"ms");t.style[O]="".concat(n,"px"),t.style.transitionTimingFunction=o,m&&m(t,e)})),U=F((function(t,e){t.style[O]="auto",d&&d(t,e)})),V=F((function(t){t.style[O]="".concat(B(),"px"),g&&g(t)})),q=F(v),G=F((function(t){var e=B(),n=PP({style:b,timeout:k,easing:h},{mode:"exit"}),r=n.duration,i=n.easing;if("auto"===k){var o=P.transitions.getAutoHeightDuration(e);t.style.transitionDuration="".concat(o,"ms"),L.current=o}else t.style.transitionDuration="string"===typeof r?r:"".concat(r,"ms");t.style[O]=R,t.style.transitionTimingFunction=i,y&&y(t)}));return(0,Xo.jsx)(E,(0,$n.Z)({in:f,onEnter:j,onEntered:U,onEntering:Z,onExit:V,onExited:q,onExiting:G,addEndListener:function(t){"auto"===k&&(T.current=setTimeout(t,L.current||0)),i&&i(z.current,t)},nodeRef:z,timeout:"auto"===k?null:k},I,{children:function(t,e){return(0,Xo.jsx)(LO,(0,$n.Z)({as:u,className:(0,Kn.Z)(A.root,a,{entered:A.entered,exited:!f&&"0px"===R&&A.hidden}[t]),style:(0,$n.Z)((0,c.Z)({},N?"minWidth":"minHeight",R),b),ownerState:(0,$n.Z)({},C,{state:t}),ref:D},e,{children:(0,Xo.jsx)(RO,{ownerState:(0,$n.Z)({},C,{state:t}),className:A.wrapper,ref:M,children:(0,Xo.jsx)(NO,{ownerState:(0,$n.Z)({},C,{state:t}),className:A.wrapperInner,children:o})})}))}}))}));OO.muiSupportAuto=!0;var zO=OO,DO=n(2885),FO=n(1131),BO=n(3746),jO=n(165);function ZO(e){var n,r,i,o,a=(0,t.useContext)(dT);return(0,t.useEffect)((function(){})),(0,Xo.jsxs)(Xo.Fragment,{children:[e.wmsUrl&&(0,Xo.jsxs)(xO,{disablePadding:!0,style:{paddingLeft:"16px",paddingRight:"16px",color:"#fff"},children:[(0,Xo.jsx)(SO,{style:{minWidth:"10px"},children:e.open[e.id]?(0,Xo.jsx)(AA,{style:{padding:"0px"},onClick:function(){return e.handleClick(e.id)},children:(0,Xo.jsx)(DO.Z,{style:{color:"#fff"}})}):(0,Xo.jsx)(AA,{style:{padding:"0px"},onClick:function(){return e.handleClick(e.id)},children:(0,Xo.jsx)(FO.Z,{style:{color:"#fff"}})})}),(0,Xo.jsx)(AA,{style:{padding:"0px",marginRight:"5px"},onClick:function(){a.setWmsOrGeoJSONVisible(iS(iS({},a.wmsOrGeoJSONVisible),{},(0,c.Z)({},e.wmsUrl,void 0!=a.wmsOrGeoJSONVisible[e.wmsUrl]&&!a.wmsOrGeoJSONVisible[e.wmsUrl])))},"aria-label":"toggle visibility",children:a.wmsOrGeoJSONVisible[e.wmsUrl]||void 0==a.wmsOrGeoJSONVisible[e.wmsUrl]?(0,Xo.jsx)(BO.Z,{style:{color:"#fff"}}):(0,Xo.jsx)(jO.Z,{style:{color:"#fff"}})}),(0,Xo.jsx)(AO,{primary:null===(n=e.capabilities)||void 0===n||null===(r=n.Service)||void 0===r?void 0:r.Title})]},e.id),null===(i=e.layers)||void 0===i||null===(o=i.map)||void 0===o?void 0:o.call(i,(function(t,n){return null!==t&&void 0!==t&&t.Name?(0,Xo.jsxs)(Xo.Fragment,{children:[(0,Xo.jsx)(zO,{in:e.open[e.id],timeout:"auto",unmountOnExit:!0,children:(0,Xo.jsx)(aM,{component:"div",disablePadding:!0,style:{paddingLeft:"16px",paddingRight:"16px"},children:(0,Xo.jsxs)(xO,{disablePadding:!0,sx:{pl:6},style:{color:"#fff"},children:[(0,Xo.jsx)(AA,{disabled:!a.wmsOrGeoJSONVisible[e.wmsUrl]&&void 0!=a.wmsOrGeoJSONVisible[e.wmsUrl],style:{padding:"0px",marginRight:"5px",color:"#fff"},onClick:function(){var t=(0,u.Z)(e.layers);t[n].visible=!t[n].visible,e.setLayers((0,u.Z)(t))},"aria-label":"toggle visibility",children:e.layers[n].visible?(0,Xo.jsx)(BO.Z,{}):(0,Xo.jsx)(jO.Z,{})}),(0,Xo.jsx)(AO,{primary:null===t||void 0===t?void 0:t.Title})]},t.Name+n)})}),(0,Xo.jsx)(Kw,{url:e.wmsUrl,urlParameters:iS(iS({},e.urlParams),{},{layers:null===t||void 0===t?void 0:t.Name}),visible:(a.wmsOrGeoJSONVisible[e.wmsUrl]||void 0==a.wmsOrGeoJSONVisible[e.wmsUrl])&&e.layers[n].visible,insertBeforeLayer:"Order-"+e.componentId.current+"-"+n},(null===t||void 0===t?void 0:t.Name)+n)]}):(0,Xo.jsx)(Xo.Fragment,{})}))]})}var UO=2*Math.PI*6378137/2,VO=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{enable:!0,decimal:1},r=t.lng,i=t.lat,o=r*UO/180,a=Math.log(Math.tan((90+i)*Math.PI/360))/(Math.PI/180);return a=a*UO/180,n.enable&&(o=Number(o.toFixed(n.decimal)),a=Number(a.toFixed(n.decimal))),[o,a]},qO=function(e){var n,r,o=(0,t.useContext)(Qd),a=Qk({url:void 0,urlParameters:e.urlParameters,username:e.username,password:e.password}),s=a.capabilities,l=(a.error,a.setUrl),u=a.getFeatureInfoUrl,h=a.wmsUrl,f=(0,t.useRef)(!1),p=(0,t.useRef)(void 0),d=(0,t.useRef)((e.idPrefix?e.idPrefix:"MlWmsLoader-")+_()),m=(0,t.useState)([]),g=(0,i.Z)(m,2),v=g[0],y=g[1],x=(0,t.useState)(void 0),b=(0,i.Z)(x,2),w=b[0],k=b[1],S=(0,t.useState)(void 0),E=(0,i.Z)(S,2),I=E[0],C=E[1],A=(0,t.useContext)(dT);(0,t.useEffect)((function(){})),(0,t.useEffect)((function(){var t=d.current;return function(){p.current&&(p.current.cleanup(t),p.current=void 0),f.current=!1}}),[]),(0,t.useEffect)((function(){f.current&&l(e.url)}),[e.url]);var P=(0,t.useCallback)((function(t){var n,r,i,o,a;k(void 0),C(void 0);var l,f=p.current.getBounds(),d=VO(f._sw),m=VO(f._ne),g={REQUEST:"GetFeatureInfo",BBOX:[d[0],d[1],m[0],m[1]].join(","),SERVICE:"WMS",INFO_FORMAT:-1!==(null===s||void 0===s||null===(n=s.Capability)||void 0===n||null===(r=n.Request)||void 0===r?void 0:r.GetFeatureInfo.Format.indexOf("text/html"))?"text/html":"text/plain",FEATURE_COUNT:"10",LAYERS:v.map((function(t,e){return t.visible&&t.queryable?t.Name:void 0})).filter((function(t){return t})),QUERY_LAYERS:v.map((function(t,e){return t.visible&&t.queryable?t.Name:void 0})).filter((function(t){return t})),WIDTH:p.current._container.clientWidth,HEIGHT:p.current._container.clientHeight,srs:"EPSG:3857",CRS:"EPSG:3857",version:"1.3.0",X:t.point.x,Y:t.point.y,I:t.point.x,J:t.point.y,buffer:"50"},y=u;-1!==(null===(i=y)||void 0===i||null===(o=i.indexOf)||void 0===o?void 0:o.call(i,"?"))&&(y=(l=e.url.split("?"))[0]);var _,x=new URLSearchParams(null===(a=l)||void 0===a?void 0:a[1]),b=[],w=(0,ch.Z)(x.keys());try{for(w.s();!(_=w.n()).done;){var S=_.value;for(var E in e.urlParameters)S.toLowerCase()==E.toLowerCase()&&b.push(S)}}catch(L){w.e(L)}finally{w.f()}for(var I=0,P=b;I<P.length;I++){S=P[I];x.delete(S)}var T=iS(iS({},Object.fromEntries(x)),g),M=new URLSearchParams(T);fetch(y+"?"+M.toString()).then((function(t){if(!t.ok)throw new Error("FeatureInfo could not be fetched");return t.text()})).then((function(e){k(t.lngLat),C(e),""!=h&&A.setFeatureInfoContent((function(t){return iS(iS({},t),{},(0,c.Z)({},h,e))}))})).catch((function(t){return console.log(t)}))}),[s,u,A.wmsOrGeoJSONVisible]);return(0,t.useEffect)((function(){if(p.current){var t,e,n=P;if(A.featureInfoEnabled)return p.current.on("click",n,d.current),function(){var t,e;null===(t=p.current)||void 0===t||null===(e=t.off)||void 0===e||e.call(t,"click",n)};null===(t=p.current)||void 0===t||null===(e=t.off)||void 0===e||e.call(t,"click",n)}}),[P,A.featureInfoEnabled]),(0,t.useEffect)((function(){var t,e,n,r,i,o,a,l;null!==s&&void 0!==s&&s.Service&&(-1===(null===s||void 0===s||null===(t=s.Capability)||void 0===t||null===(e=t.Layer)||void 0===e||null===(n=e.SRS)||void 0===n||null===(r=n.indexOf)||void 0===r?void 0:r.call(n,"EPSG:3857"))?console.log("MlWmsLoader ("+s.Service.Title+"): No WGS 84/Pseudo-Mercator support"):(console.log("MlWmsLoader ("+s.Service.Title+"): WGS 84/Pseudo-Mercator supported"),y(null===s||void 0===s||null===(i=s.Capability)||void 0===i||null===(o=i.Layer)||void 0===o?void 0:o.Layer.map((function(t,e){var n,r,i;return 0===e&&((a=t.LatLonBoundingBox)||(a=t.EX_GeographicBoundingBox)),t.visible=!((null===s||void 0===s||null===(n=s.Capability)||void 0===n||null===(r=n.Layer)||void 0===r||null===(i=r.Layer)||void 0===i?void 0:i.length)>2)||e>1,t}))),0==A.includedWms.length?p.current&&p.current.fitBounds([[12.947508,52.665291],[13.895765,52.325001]]):p.current&&(null===(l=a)||void 0===l?void 0:l.length)>3&&p.current.fitBounds([[a[0],a[1]],[a[2],a[3]]])))}),[s]),(0,t.useEffect)((function(){var t;null!==o&&void 0!==o&&null!==(t=o.mapExists)&&void 0!==t&&t.call(o,e.mapId)&&!f.current&&(f.current=!0,p.current=o.getMap(e.mapId),console.log("set url "+e.url),l(e.url))}),[o.mapIds,o,e.mapId,e.url]),(0,Xo.jsxs)(Xo.Fragment,{children:[console.log(d.current),null===s||void 0===s||null===(n=s.Capability)||void 0===n||null===(r=n.Layer)||void 0===r?void 0:r.Layer.map((function(t,e){return(0,Xo.jsx)(Yw,iS({layerId:"Order-"+d.current+"-"+e},e>0?{insertBeforeLayer:"Order-"+d.current+"-"+(e-1)}:void 0),d.current+"-"+e)})),(0,Xo.jsx)(ZO,{layers:v,setLayers:y,wmsUrl:h,urlParams:e.wmsUrlParameters,capabilities:s,componentId:d,open:e.open,handleClick:e.handleClick,id:e.id}),w&&A.featureInfoEnabled&&(0,Xo.jsx)(pk,iS(iS({},w),{},{content:I}))]})};qO.defaultProps={url:"",urlParameters:{SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"getCapabilities"},wmsUrlParameters:{TRANSPARENT:"TRUE"}};var GO=qO;function WO(e){var n=(0,t.useContext)(dT);return(0,Xo.jsxs)(Xo.Fragment,{children:[(0,Xo.jsxs)(xO,{disablePadding:!0,sx:{pl:5},style:{paddingRight:"16px"},children:[(0,Xo.jsx)(AA,{style:{padding:"0px",marginRight:"5px"},onClick:function(){n.setWmsOrGeoJSONVisible(iS(iS({},n.wmsOrGeoJSONVisible),{},(0,c.Z)({},e.geojson.name,void 0!=n.wmsOrGeoJSONVisible[e.geojson.name]&&!n.wmsOrGeoJSONVisible[e.geojson.name])))},"aria-label":"toggle visibility",children:n.wmsOrGeoJSONVisible[e.geojson.name]||void 0==n.wmsOrGeoJSONVisible[e.geojson.name]?(0,Xo.jsx)(BO.Z,{}):(0,Xo.jsx)(jO.Z,{})}),(0,Xo.jsx)(AO,{primary:e.geojson.name+" (GeoJSON)"})]},e.id),(n.wmsOrGeoJSONVisible[e.geojson.name]||void 0==n.wmsOrGeoJSONVisible[e.geojson.name])&&(0,Xo.jsx)(rw,{paint:{"fill-color":"rgba(82,224,223,0.3)","fill-outline-color":"rgb(0,0,0)"},geojson:e.geojson,mapId:"map_1"})]})}function HO(e){var n=t.useState({}),r=(0,i.Z)(n,2),o=r[0],a=r[1],s=(0,t.useContext)(dT),l=((0,t.useRef)(void 0),(0,t.useContext)(Qd),(0,t.useRef)(!1),(0,t.useCallback)((function(t){a(iS(iS({},o),{},(0,c.Z)({},t,!o[t])))}),[o]));return(0,t.useEffect)((function(){})),(0,Xo.jsxs)(aM,{sx:{width:"100%",maxWidth:360,marginTop:"20px",marginBottom:"20px"},component:"nav","aria-labelledby":"nested-list-subheader",children:[(0,Xo.jsx)(GO,{handleClick:l,open:o,url:"https://nvpub.vic-metria.nu/arcgis/services/Andra_skydd/MapServer/WMSServer",id:"1"}),(0,Xo.jsx)(GO,{handleClick:l,open:o,url:"https://gis-services.metria.se/arcgis/rest/services/nv/InspireNV_NMD/MapServer/exts/InspireView/service",id:"2"}),s.includedWms.map((function(t,e){return(0,Xo.jsx)(GO,{handleClick:l,open:o,url:t.url,id:""+(e+4),username:t.username,password:t.password})})),s.includedGeoJSONs.map((function(t,e){return(0,Xo.jsx)(Xo.Fragment,{children:(0,Xo.jsx)(WO,{id:""+(e+s.includedWms.length+4),geojson:t})})}))]})}var XO=pC((function(t){return{icon:{width:"40px",margin:"10px"},iconTitle:{width:"40px",margin:"10px",marginTop:"0px",marginBottom:"0px",color:t.palette.white},iconbutton:{padding:"0px !important"}}}));var YO=function(t){var e=XO(mC);return(0,Xo.jsx)("div",{style:{width:"300px",maxHeight:"60vh",overflow:"auto"},children:(0,Xo.jsxs)(hP,{container:!0,style:{textAlign:"left",alignItems:"center"},children:[(0,Xo.jsx)(TA.Z,{className:e.iconTitle}),(0,Xo.jsx)("h4",{style:{margin:"0px",color:mC.palette.white},children:"Ebenenbaum"}),(0,Xo.jsx)(HO,{})]})})},$O=pC((function(t){return{icon:{width:"40px",margin:"10px"},iconTitle:{width:"40px",margin:"10px",marginTop:"0px",marginBottom:"0px"},iconbutton:{padding:"0px !important"}}}));var KO=function(e){var n=$O(mC),r=(0,t.useState)(0),o=(0,i.Z)(r,2),a=o[0],s=o[1];return(0,Xo.jsxs)("div",{style:{width:"200px"},children:[(0,Xo.jsxs)(hP,{container:!0,style:{textAlign:"left",alignItems:"center"},children:[(0,Xo.jsx)(GA.Z,{className:n.iconTitle}),(0,Xo.jsx)("h4",{style:{margin:"0px"},children:"Measure Line"})]}),(0,Xo.jsxs)(WR,{m:2,style:{textAlign:"left"},children:[(0,Xo.jsx)($b,{debug:!0,onChange:function(t){console.log(t),s(function(t,e){return void 0===e&&(e={}),es(t,(function(t,n){var r=n.geometry.coordinates;return t+us(r[0],r[1],e)}),0)}(t[0]))},mode:"draw_line_string"}),"L\xe4nge: ",a," km"]})]})},JO=pC((function(t){return{icon:{width:"40px",margin:"10px"},iconTitle:{width:"40px",margin:"10px",marginTop:"0px",marginBottom:"0px"},iconbutton:{padding:"0px !important"}}}));var QO=function(e){var n=JO(mC),r=(0,t.useState)(0),o=(0,i.Z)(r,2),a=o[0],s=o[1];return(0,Xo.jsxs)("div",{style:{width:"200px"},children:[(0,Xo.jsxs)(hP,{container:!0,style:{textAlign:"left",alignItems:"center"},children:[(0,Xo.jsx)(WA.Z,{className:n.iconTitle}),(0,Xo.jsx)("h4",{style:{margin:"0px"},children:"Measure Polygon"})]}),(0,Xo.jsxs)(WR,{m:2,style:{textAlign:"left"},children:[(0,Xo.jsx)($b,{debug:!0,onChange:function(t){console.log(t);try{s(_s(t[0])/1e6)}catch(e){console.log(e)}},mode:"custom_polygon"}),"Fl\xe4che: ",a," km\xb2"]})]})},tz=pC((function(t){return{icon:{width:"40px",margin:"10px"},iconTitle:{width:"40px",margin:"10px",marginTop:"0px",marginBottom:"0px",color:t.palette.white},iconbutton:{padding:"0px !important"}}}));var ez=function(e){var n=tz(mC),r=(0,t.useContext)(dT);return(0,t.useEffect)((function(){})),(0,Xo.jsxs)("div",{style:{width:"500px"},children:[(0,Xo.jsxs)(hP,{container:!0,style:{textAlign:"left",alignItems:"center"},children:[(0,Xo.jsx)(PA.Z,{className:n.iconTitle}),(0,Xo.jsx)("h4",{style:{margin:"0px",color:mC.palette.white},children:"WMS Feature Info"})]}),Object.keys(r.featureInfoContent).map((function(t){return(0,Xo.jsx)(Xo.Fragment,{children:(0,Xo.jsx)("iframe",{style:{width:"100%",height:"150px",color:mC.palette.white,display:r.wmsOrGeoJSONVisible[t]||void 0==r.wmsOrGeoJSONVisible[t]?"block":"none"},srcDoc:r.featureInfoContent[t],sandbox:"allow-same-origin allow-popups-to-escape-sandbox",frameBorder:"0"})})}))]})},nz=n(1163),rz=pC((function(t){return{icon:{width:"40px",margin:"10px"},iconTitle:{width:"40px",margin:"10px",marginTop:"0px",marginBottom:"0px"},iconbutton:{padding:"0px !important"}}}));var iz=function(e){var n=rz(mC),r=(0,t.useContext)(dT),o=(0,t.useState)(""),a=(0,i.Z)(o,2),s=a[0],l=a[1],u=(0,t.useState)(""),c=(0,i.Z)(u,2),h=c[0],f=c[1],p=(0,t.useState)(""),d=(0,i.Z)(p,2),m=d[0],g=d[1],v=(0,t.useState)(!1),y=(0,i.Z)(v,2),_=y[0],x=y[1],b=(0,t.useCallback)((function(t,e,n){var i=r.includedWms.slice();i.push({url:t,username:e,password:n}),r.setIncludedWms(i),l(""),f(""),g("")}));return(0,Xo.jsxs)("div",{style:{width:"300px"},children:[(0,Xo.jsxs)(hP,{container:!0,style:{textAlign:"left",alignItems:"center"},children:[(0,Xo.jsx)(nz.Z,{className:n.iconTitle}),(0,Xo.jsx)("h4",{style:{margin:"0px"},children:"WMS Loader"})]}),(0,Xo.jsxs)(WR,{m:2,style:{textAlign:"left"},children:[(0,Xo.jsx)(iO,{onChange:function(t){l(t.target.value)},style:{marginBottom:"20px"},fullWidth:!0,label:"URL eingeben",variant:"standard",value:s}),(0,Xo.jsx)(KR,{children:(0,Xo.jsx)(cN,{control:(0,Xo.jsx)(AN,{checked:_,onChange:function(){return x(!_)}}),label:"Basic Auth"})}),_&&(0,Xo.jsxs)(Xo.Fragment,{children:[(0,Xo.jsx)(iO,{onChange:function(t){f(t.target.value)},style:{marginBottom:"20px"},fullWidth:!0,label:"Nutzername",variant:"standard",value:h}),(0,Xo.jsx)(iO,{onChange:function(t){g(t.target.value)},style:{marginBottom:"20px"},fullWidth:!0,label:"Passwort",variant:"standard",type:"password",value:m})]}),(0,Xo.jsx)(UN,{variant:"contained",disableElevation:!0,style:{backgroundColor:mC.palette.blue,marginTop:"20px",color:"white",float:"right",marginBottom:"20px"},onClick:function(){b(s,h,m)},children:"Einbinden"})]})]})},oz=pC((function(t){return{icon:{width:"40px",margin:"10px"},iconTitle:{width:"40px",margin:"10px",marginTop:"0px",marginBottom:"0px"},iconbutton:{padding:"0px !important"}}}));var az=function(e){var n=oz(mC),r=(0,t.useRef)(null),i=(0,t.useContext)(dT);return(0,Xo.jsxs)("div",{style:{width:"300px"},children:[(0,Xo.jsxs)(hP,{container:!0,style:{textAlign:"left",alignItems:"center"},children:[(0,Xo.jsx)(HA.Z,{className:n.iconTitle}),(0,Xo.jsx)("h4",{style:{margin:"0px"},children:"GeoJSON Loader"})]}),(0,Xo.jsxs)(WR,{m:2,style:{textAlign:"left"},children:[(0,Xo.jsx)(UN,{variant:"contained",disableElevation:!0,style:{backgroundColor:mC.palette.blue,marginTop:"20px",color:"white",float:"right",marginBottom:"20px"},onClick:function(){r.current.click()},children:"GeoJSON ausw\xe4hlen"}),(0,Xo.jsx)("input",{type:"file",hidden:"hidden",accept:"application/geo+json,application/vnd.geo+json,.geojson",ref:r,onChange:function(t){console.log("File selected.");var e=t.target.files[0],n=new FileReader;n.fileName=e.name,console.log(e.name),n.onload=function(t){console.log(t.target.fileName)},n.onload=function(t){var e=JSON.parse(t.target.result),n=i.includedGeoJSONs.slice();n.push(e),i.setIncludedGeoJSONs(n)},n.readAsText(e,"UTF-8")}})]})]})};var sz=t.createContext();function lz(t){return(0,CC.Z)("MuiTable",t)}(0,AC.Z)("MuiTable",["root","stickyHeader"]);var uz=["className","component","padding","size","stickyHeader"],cz=(0,kC.ZP)("table",{name:"MuiTable",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,n.stickyHeader&&e.stickyHeader]}})((function(t){var e=t.theme,n=t.ownerState;return(0,$n.Z)({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":(0,$n.Z)({},e.typography.body2,{padding:e.spacing(2),color:e.palette.text.secondary,textAlign:"left",captionSide:"bottom"})},n.stickyHeader&&{borderCollapse:"separate"})})),hz="table",fz=t.forwardRef((function(e,n){var r=(0,SC.Z)({props:e,name:"MuiTable"}),i=r.className,o=r.component,a=void 0===o?hz:o,s=r.padding,l=void 0===s?"normal":s,u=r.size,c=void 0===u?"medium":u,h=r.stickyHeader,f=void 0!==h&&h,p=(0,Yn.Z)(r,uz),d=(0,$n.Z)({},r,{component:a,padding:l,size:c,stickyHeader:f}),m=function(t){var e=t.classes,n={root:["root",t.stickyHeader&&"stickyHeader"]};return(0,wC.Z)(n,lz,e)}(d),g=t.useMemo((function(){return{padding:l,size:c,stickyHeader:f}}),[l,c,f]);return(0,Xo.jsx)(sz.Provider,{value:g,children:(0,Xo.jsx)(cz,(0,$n.Z)({as:a,role:a===hz?null:"table",ref:n,className:(0,Kn.Z)(m.root,i),ownerState:d},p))})})),pz=fz;var dz=t.createContext();function mz(t){return(0,CC.Z)("MuiTableBody",t)}(0,AC.Z)("MuiTableBody",["root"]);var gz=["className","component"],vz=(0,kC.ZP)("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:function(t,e){return e.root}})({display:"table-row-group"}),yz={variant:"body"},_z="tbody",xz=t.forwardRef((function(t,e){var n=(0,SC.Z)({props:t,name:"MuiTableBody"}),r=n.className,i=n.component,o=void 0===i?_z:i,a=(0,Yn.Z)(n,gz),s=(0,$n.Z)({},n,{component:o}),l=function(t){var e=t.classes;return(0,wC.Z)({root:["root"]},mz,e)}(s);return(0,Xo.jsx)(dz.Provider,{value:yz,children:(0,Xo.jsx)(vz,(0,$n.Z)({className:(0,Kn.Z)(l.root,r),as:o,ref:e,role:o===_z?null:"rowgroup",ownerState:s},a))})})),bz=xz;function wz(t){return(0,CC.Z)("MuiTableCell",t)}var kz=(0,AC.Z)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),Sz=["align","className","component","padding","scope","size","sortDirection","variant"],Ez=(0,kC.ZP)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,e[n.variant],e["size".concat((0,EC.Z)(n.size))],"normal"!==n.padding&&e["padding".concat((0,EC.Z)(n.padding))],"inherit"!==n.align&&e["align".concat((0,EC.Z)(n.align))],n.stickyHeader&&e.stickyHeader]}})((function(t){var e=t.theme,n=t.ownerState;return(0,$n.Z)({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:"1px solid\n    ".concat("light"===e.palette.mode?(0,IC.$n)((0,IC.Fq)(e.palette.divider,1),.88):(0,IC._j)((0,IC.Fq)(e.palette.divider,1),.68)),textAlign:"left",padding:16},"head"===n.variant&&{color:e.palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},"body"===n.variant&&{color:e.palette.text.primary},"footer"===n.variant&&{color:e.palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},"small"===n.size&&(0,c.Z)({padding:"6px 16px"},"&.".concat(kz.paddingCheckbox),{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}),"checkbox"===n.padding&&{width:48,padding:"0 0 0 4px"},"none"===n.padding&&{padding:0},"left"===n.align&&{textAlign:"left"},"center"===n.align&&{textAlign:"center"},"right"===n.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===n.align&&{textAlign:"justify"},n.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:e.palette.background.default})})),Iz=t.forwardRef((function(e,n){var r,i=(0,SC.Z)({props:e,name:"MuiTableCell"}),o=i.align,a=void 0===o?"inherit":o,s=i.className,l=i.component,u=i.padding,c=i.scope,h=i.size,f=i.sortDirection,p=i.variant,d=(0,Yn.Z)(i,Sz),m=t.useContext(sz),g=t.useContext(dz),v=g&&"head"===g.variant;r=l||(v?"th":"td");var y=c;!y&&v&&(y="col");var _=p||g&&g.variant,x=(0,$n.Z)({},i,{align:a,component:r,padding:u||(m&&m.padding?m.padding:"normal"),size:h||(m&&m.size?m.size:"medium"),sortDirection:f,stickyHeader:"head"===_&&m&&m.stickyHeader,variant:_}),b=function(t){var e=t.classes,n=t.variant,r=t.align,i=t.padding,o=t.size,a={root:["root",n,t.stickyHeader&&"stickyHeader","inherit"!==r&&"align".concat((0,EC.Z)(r)),"normal"!==i&&"padding".concat((0,EC.Z)(i)),"size".concat((0,EC.Z)(o))]};return(0,wC.Z)(a,wz,e)}(x),w=null;return f&&(w="asc"===f?"ascending":"descending"),(0,Xo.jsx)(Ez,(0,$n.Z)({as:r,ref:n,className:(0,Kn.Z)(b.root,s),"aria-sort":w,scope:y,ownerState:x},d))})),Cz=Iz;function Az(t){return(0,CC.Z)("MuiTableContainer",t)}(0,AC.Z)("MuiTableContainer",["root"]);var Pz=["className","component"],Tz=(0,kC.ZP)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:function(t,e){return e.root}})({width:"100%",overflowX:"auto"}),Mz=t.forwardRef((function(t,e){var n=(0,SC.Z)({props:t,name:"MuiTableContainer"}),r=n.className,i=n.component,o=void 0===i?"div":i,a=(0,Yn.Z)(n,Pz),s=(0,$n.Z)({},n,{component:o}),l=function(t){var e=t.classes;return(0,wC.Z)({root:["root"]},Az,e)}(s);return(0,Xo.jsx)(Tz,(0,$n.Z)({ref:e,as:o,className:(0,Kn.Z)(l.root,r),ownerState:s},a))})),Lz=Mz;function Rz(t){return(0,CC.Z)("MuiTableHead",t)}(0,AC.Z)("MuiTableHead",["root"]);var Nz=["className","component"],Oz=(0,kC.ZP)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:function(t,e){return e.root}})({display:"table-header-group"}),zz={variant:"head"},Dz="thead",Fz=t.forwardRef((function(t,e){var n=(0,SC.Z)({props:t,name:"MuiTableHead"}),r=n.className,i=n.component,o=void 0===i?Dz:i,a=(0,Yn.Z)(n,Nz),s=(0,$n.Z)({},n,{component:o}),l=function(t){var e=t.classes;return(0,wC.Z)({root:["root"]},Rz,e)}(s);return(0,Xo.jsx)(dz.Provider,{value:zz,children:(0,Xo.jsx)(Oz,(0,$n.Z)({as:o,className:(0,Kn.Z)(l.root,r),ref:e,role:o===Dz?null:"rowgroup",ownerState:s},a))})})),Bz=Fz;function jz(t){return(0,CC.Z)("MuiTableRow",t)}var Zz=(0,AC.Z)("MuiTableRow",["root","selected","hover","head","footer"]),Uz=["className","component","hover","selected"],Vz=(0,kC.ZP)("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,n.head&&e.head,n.footer&&e.footer]}})((function(t){var e,n=t.theme;return e={color:"inherit",display:"table-row",verticalAlign:"middle",outline:0},(0,c.Z)(e,"&.".concat(Zz.hover,":hover"),{backgroundColor:n.palette.action.hover}),(0,c.Z)(e,"&.".concat(Zz.selected),{backgroundColor:(0,IC.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity),"&:hover":{backgroundColor:(0,IC.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity)}}),e})),qz=t.forwardRef((function(e,n){var r=(0,SC.Z)({props:e,name:"MuiTableRow"}),i=r.className,o=r.component,a=void 0===o?"tr":o,s=r.hover,l=void 0!==s&&s,u=r.selected,c=void 0!==u&&u,h=(0,Yn.Z)(r,Uz),f=t.useContext(dz),p=(0,$n.Z)({},r,{component:a,hover:l,selected:c,head:f&&"head"===f.variant,footer:f&&"footer"===f.variant}),d=function(t){var e=t.classes,n={root:["root",t.selected&&"selected",t.hover&&"hover",t.head&&"head",t.footer&&"footer"]};return(0,wC.Z)(n,jz,e)}(p);return(0,Xo.jsx)(Vz,(0,$n.Z)({as:a,ref:n,className:(0,Kn.Z)(d.root,i),role:"tr"===a?null:"row",ownerState:p},h))})),Gz=qz,Wz=pC((function(t){return{icon:{width:"40px",margin:"10px"},iconTitle:{width:"40px",margin:"10px",marginTop:"0px",marginBottom:"0px"},iconbutton:{padding:"0px !important"}}}));function Hz(t,e,n,r,i){return{name:t,calories:e,fat:n,carbs:r,protein:i}}Hz("Frozen yoghurt",159),Hz("Ice cream sandwich",237),Hz("Eclair",262),Hz("Cupcake",305),Hz("Gingerbread",356);var Xz=function(e){var n=Wz(mC),r=(0,t.useContext)(dT),o=(0,t.useState)([]),a=(0,i.Z)(o,2),s=a[0],l=a[1];return(0,t.useEffect)((function(){})),(0,Xo.jsxs)("div",{style:{width:"400px",maxHeight:"60vh",overflow:"auto"},children:[(0,Xo.jsxs)(hP,{container:!0,style:{textAlign:"left",alignItems:"center"},children:[(0,Xo.jsx)(XA.Z,{className:n.iconTitle}),(0,Xo.jsx)("h4",{style:{margin:"0px"},children:"GeoJSON Feature Info by Line"})]}),(0,Xo.jsx)($b,{debug:!0,onChange:function(t){l([]),r.includedGeoJSONs.forEach((function(e){e.features.forEach((function(e){t.forEach((function(t){(function(t,e){var n=!1;return ts(t,(function(t){ts(e,(function(e){if(!0===n)return!0;n=!Zl(t.geometry,e.geometry)}))})),n})(t,e)&&l((function(t){return[].concat((0,u.Z)(t),[e])}))}))}))}))},mode:"draw_line_string"}),(0,Xo.jsx)(WR,{m:2,style:{},children:(0,Xo.jsxs)(iN,{style:{textAlign:"left"},children:[s.length," Treffer"]})}),s.map((function(t){return(0,Xo.jsx)(WR,{m:2,style:{},children:(0,Xo.jsx)(Lz,{component:NC,children:(0,Xo.jsxs)(pz,{sx:{},"aria-label":"simple table",children:[(0,Xo.jsx)(Bz,{children:(0,Xo.jsxs)(Gz,{children:[(0,Xo.jsx)(Cz,{children:t.type}),(0,Xo.jsx)(Cz,{align:"right"})]})}),(0,Xo.jsx)(bz,{children:Object.keys(t.properties).map((function(e){return(0,Xo.jsxs)(Gz,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,Xo.jsx)(Cz,{component:"th",scope:"row",children:e}),(0,Xo.jsx)(Cz,{align:"right",children:t.properties[e]})]},e)}))})]})})})}))]})};function Yz(){}function $z(t){return null==t?Yz:function(){return this.querySelector(t)}}function Kz(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}function Jz(){return[]}function Qz(t){return null==t?Jz:function(){return this.querySelectorAll(t)}}function tD(t){return function(){return this.matches(t)}}function eD(t){return function(e){return e.matches(t)}}var nD=Array.prototype.find;function rD(){return this.firstElementChild}var iD=Array.prototype.filter;function oD(){return this.children}function aD(t){return new Array(t.length)}function sD(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function lD(t){return function(){return t}}function uD(t,e,n,r,i,o){for(var a,s=0,l=e.length,u=o.length;s<u;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new sD(t,o[s]);for(;s<l;++s)(a=e[s])&&(i[s]=a)}function cD(t,e,n,r,i,o,a){var s,l,u,c=new Map,h=e.length,f=o.length,p=new Array(h);for(s=0;s<h;++s)(l=e[s])&&(p[s]=u=a.call(l,l.__data__,s,e)+"",c.has(u)?i[s]=l:c.set(u,l));for(s=0;s<f;++s)u=a.call(t,o[s],s,o)+"",(l=c.get(u))?(r[s]=l,l.__data__=o[s],c.delete(u)):n[s]=new sD(t,o[s]);for(s=0;s<h;++s)(l=e[s])&&c.get(p[s])===l&&(i[s]=l)}function hD(t){return t.__data__}function fD(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}sD.prototype={constructor:sD,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var pD="http://www.w3.org/1999/xhtml",dD={svg:"http://www.w3.org/2000/svg",xhtml:pD,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function mD(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),dD.hasOwnProperty(e)?{space:dD[e],local:t}:t}function gD(t){return function(){this.removeAttribute(t)}}function vD(t){return function(){this.removeAttributeNS(t.space,t.local)}}function yD(t,e){return function(){this.setAttribute(t,e)}}function _D(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function xD(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function bD(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function wD(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function kD(t){return function(){this.style.removeProperty(t)}}function SD(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ED(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ID(t,e){return t.style.getPropertyValue(e)||wD(t).getComputedStyle(t,null).getPropertyValue(e)}function CD(t){return function(){delete this[t]}}function AD(t,e){return function(){this[t]=e}}function PD(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function TD(t){return t.trim().split(/^|\s+/)}function MD(t){return t.classList||new LD(t)}function LD(t){this._node=t,this._names=TD(t.getAttribute("class")||"")}function RD(t,e){for(var n=MD(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ND(t,e){for(var n=MD(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function OD(t){return function(){RD(this,t)}}function zD(t){return function(){ND(this,t)}}function DD(t,e){return function(){(e.apply(this,arguments)?RD:ND)(this,t)}}function FD(){this.textContent=""}function BD(t){return function(){this.textContent=t}}function jD(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ZD(){this.innerHTML=""}function UD(t){return function(){this.innerHTML=t}}function VD(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function qD(){this.nextSibling&&this.parentNode.appendChild(this)}function GD(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function WD(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===pD&&e.documentElement.namespaceURI===pD?e.createElement(t):e.createElementNS(n,t)}}function HD(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function XD(t){var e=mD(t);return(e.local?HD:WD)(e)}function YD(){return null}function $D(){var t=this.parentNode;t&&t.removeChild(this)}function KD(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function JD(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function QD(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function tF(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function eF(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function nF(t,e,n){var r=wD(t),i=r.CustomEvent;"function"===typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function rF(t,e){return function(){return nF(this,t,e)}}function iF(t,e){return function(){return nF(this,t,e.apply(this,arguments))}}LD.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var oF=of().mark(aF);function aF(){var t,e,n,r,i,o,a;return of().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t=this._groups,e=0,n=t.length;case 1:if(!(e<n)){s.next=13;break}r=t[e],i=0,o=r.length;case 3:if(!(i<o)){s.next=10;break}if(!(a=r[i])){s.next=7;break}return s.next=7,a;case 7:++i,s.next=3;break;case 10:++e,s.next=1;break;case 13:case"end":return s.stop()}}),oF,this)}var sF=[null];function lF(t,e){this._groups=t,this._parents=e}function uF(){return new lF([[document.documentElement]],sF)}lF.prototype=uF.prototype=(0,c.Z)({constructor:lF,select:function(t){"function"!==typeof t&&(t=$z(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],l=s.length,u=r[i]=new Array(l),c=0;c<l;++c)(o=s[c])&&(a=t.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),u[c]=a);return new lF(r,this._parents)},selectAll:function(t){t="function"===typeof t?function(t){return function(){var e=t.apply(this,arguments);return null==e?[]:Kz(e)}}(t):Qz(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],l=s.length,u=0;u<l;++u)(a=s[u])&&(r.push(t.call(a,a.__data__,u,s)),i.push(a));return new lF(r,i)},selectChild:function(t){return this.select(null==t?rD:function(t){return function(){return nD.call(this.children,t)}}("function"===typeof t?t:eD(t)))},selectChildren:function(t){return this.selectAll(null==t?oD:function(t){return function(){return iD.call(this.children,t)}}("function"===typeof t?t:eD(t)))},filter:function(t){"function"!==typeof t&&(t=tD(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&t.call(o,o.__data__,u,a)&&l.push(o);return new lF(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,hD);var n=e?cD:uD,r=this._parents,i=this._groups;"function"!==typeof t&&(t=lD(t));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],h=i[u],f=h.length,p=Kz(t.call(c,c&&c.__data__,u,r)),d=p.length,m=s[u]=new Array(d),g=a[u]=new Array(d),v=l[u]=new Array(f);n(c,h,m,g,v,p,e);for(var y,_,x=0,b=0;x<d;++x)if(y=m[x]){for(x>=b&&(b=x+1);!(_=g[b])&&++b<d;);y._next=_||null}}return(a=new lF(a,r))._enter=s,a._exit=l,a},enter:function(){return new lF(this._enter||this._groups.map(aD),this._parents)},exit:function(){return new lF(this._exit||this._groups.map(aD),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"===typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){if(!(t instanceof lF))throw new Error("invalid merge");for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,u=e[s],c=n[s],h=u.length,f=a[s]=new Array(h),p=0;p<h;++p)(l=u[p]||c[p])&&(f[p]=l);for(;s<r;++s)a[s]=e[s];return new lF(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=fD);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,u=i[o]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(e)}return new lF(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t,e=0,n=(0,ch.Z)(this);try{for(n.s();!(t=n.n()).done;){t.value;++e}}catch(r){n.e(r)}finally{n.f()}return e},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=mD(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?vD:gD:"function"===typeof e?n.local?bD:xD:n.local?_D:yD)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?kD:"function"===typeof e?ED:SD)(t,e,null==n?"":n)):ID(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?CD:"function"===typeof e?PD:AD)(t,e)):this.node()[t]},classed:function(t,e){var n=TD(t+"");if(arguments.length<2){for(var r=MD(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof e?DD:e?OD:zD)(n,e))},text:function(t){return arguments.length?this.each(null==t?FD:("function"===typeof t?jD:BD)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ZD:("function"===typeof t?VD:UD)(t)):this.node().innerHTML},raise:function(){return this.each(qD)},lower:function(){return this.each(GD)},append:function(t){var e="function"===typeof t?t:XD(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"===typeof t?t:XD(t),r=null==e?YD:"function"===typeof e?e:$z(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each($D)},clone:function(t){return this.select(t?JD:KD)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=QD(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?eF:tF,r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"===typeof e?iF:rF)(t,e))}},Symbol.iterator,aF);var cF=uF,hF={value:function(){}};function fF(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new pF(r)}function pF(t){this._=t}function dF(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function mF(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function gF(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=hF,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}pF.prototype=fF.prototype={constructor:pF,on:function(t,e){var n,r=this._,i=dF(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=gF(r[n],t.name,e);else if(null==e)for(n in r)r[n]=gF(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=mF(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new pF(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var vF,yF,_F=fF,xF=0,bF=0,wF=0,kF=0,SF=0,EF=0,IF="object"===typeof performance&&performance.now?performance:Date,CF="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function AF(){return SF||(CF(PF),SF=IF.now()+EF)}function PF(){SF=0}function TF(){this._call=this._time=this._next=null}function MF(t,e,n){var r=new TF;return r.restart(t,e,n),r}function LF(){SF=(kF=IF.now())+EF,xF=bF=0;try{!function(){AF(),++xF;for(var t,e=vF;e;)(t=SF-e._time)>=0&&e._call.call(null,t),e=e._next;--xF}()}finally{xF=0,function(){var t,e,n=vF,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:vF=e);yF=t,NF(r)}(),SF=0}}function RF(){var t=IF.now(),e=t-kF;e>1e3&&(EF-=e,kF=t)}function NF(t){xF||(bF&&(bF=clearTimeout(bF)),t-SF>24?(t<1/0&&(bF=setTimeout(LF,t-IF.now()-EF)),wF&&(wF=clearInterval(wF))):(wF||(kF=IF.now(),wF=setInterval(RF,1e3)),xF=1,CF(LF)))}function OF(t,e,n){var r=new TF;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r}TF.prototype=MF.prototype={constructor:TF,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?AF():+n)+(null==e?0:+e),this._next||yF===this||(yF?yF._next=this:vF=this,yF=this),this._call=t,this._time=n,NF()},stop:function(){this._call&&(this._call=null,this._time=1/0,NF())}};var zF=_F("start","end","cancel","interrupt"),DF=[];function FF(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(t){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(o){var u,c,h,f;if(1!==n.state)return l();for(u in i)if((f=i[u]).name===n.name){if(3===f.state)return OF(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[u]):+u<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[u])}if(OF((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),u=0,c=-1;u<h;++u)(f=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=f);r.length=c+1}}function s(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=MF(o,0,n.time)}(t,n,{name:e,index:r,group:i,on:zF,tween:DF,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function BF(t,e){var n=ZF(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function jF(t,e){var n=ZF(t,e);if(n.state>3)throw new Error("too late; already running");return n}function ZF(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function UF(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var VF,qF=180/Math.PI,GF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function WF(t,e,n,r,i,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*qF,skewX:Math.atan(l)*qF,scaleX:a,scaleY:s}}function HF(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],l=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var l=a.push("translate(",null,e,null,n);s.push({i:l-4,x:UF(t,i)},{i:l-2,x:UF(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:UF(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,l),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:UF(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,l),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:UF(t,n)},{i:s-2,x:UF(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(t){for(var e,n=-1,r=l.length;++n<r;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var XF=HF((function(t){var e=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?GF:WF(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),YF=HF((function(t){return null==t?GF:(VF||(VF=document.createElementNS("http://www.w3.org/2000/svg","g")),VF.setAttribute("transform",t),(t=VF.transform.baseVal.consolidate())?WF((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):GF)}),", ",")",")");function $F(t,e){var n,r;return function(){var i=jF(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function KF(t,e,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var o=jF(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=s;break}l===u&&i.push(s)}o.tween=i}}function JF(t,e,n){var r=t._id;return t.each((function(){var t=jF(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return ZF(t,r).value[e]}}function QF(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function tB(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function eB(){}var nB=.7,rB=1/nB,iB="\\s*([+-]?\\d+)\\s*",oB="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",aB="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sB=/^#([0-9a-f]{3,8})$/,lB=new RegExp("^rgb\\("+[iB,iB,iB]+"\\)$"),uB=new RegExp("^rgb\\("+[aB,aB,aB]+"\\)$"),cB=new RegExp("^rgba\\("+[iB,iB,iB,oB]+"\\)$"),hB=new RegExp("^rgba\\("+[aB,aB,aB,oB]+"\\)$"),fB=new RegExp("^hsl\\("+[oB,aB,aB]+"\\)$"),pB=new RegExp("^hsla\\("+[oB,aB,aB,oB]+"\\)$"),dB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function mB(){return this.rgb().formatHex()}function gB(){return this.rgb().formatRgb()}function vB(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=sB.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?yB(e):3===n?new wB(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?_B(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?_B(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=lB.exec(t))?new wB(e[1],e[2],e[3],1):(e=uB.exec(t))?new wB(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=cB.exec(t))?_B(e[1],e[2],e[3],e[4]):(e=hB.exec(t))?_B(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=fB.exec(t))?IB(e[1],e[2]/100,e[3]/100,1):(e=pB.exec(t))?IB(e[1],e[2]/100,e[3]/100,e[4]):dB.hasOwnProperty(t)?yB(dB[t]):"transparent"===t?new wB(NaN,NaN,NaN,0):null}function yB(t){return new wB(t>>16&255,t>>8&255,255&t,1)}function _B(t,e,n,r){return r<=0&&(t=e=n=NaN),new wB(t,e,n,r)}function xB(t){return t instanceof eB||(t=vB(t)),t?new wB((t=t.rgb()).r,t.g,t.b,t.opacity):new wB}function bB(t,e,n,r){return 1===arguments.length?xB(t):new wB(t,e,n,null==r?1:r)}function wB(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function kB(){return"#"+EB(this.r)+EB(this.g)+EB(this.b)}function SB(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function EB(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function IB(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new AB(t,e,n,r)}function CB(t){if(t instanceof AB)return new AB(t.h,t.s,t.l,t.opacity);if(t instanceof eB||(t=vB(t)),!t)return new AB;if(t instanceof AB)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new AB(a,s,l,t.opacity)}function AB(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function PB(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function TB(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}QF(eB,vB,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:mB,formatHex:mB,formatHsl:function(){return CB(this).formatHsl()},formatRgb:gB,toString:gB}),QF(wB,bB,tB(eB,{brighter:function(t){return t=null==t?rB:Math.pow(rB,t),new wB(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?nB:Math.pow(nB,t),new wB(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kB,formatHex:kB,formatRgb:SB,toString:SB})),QF(AB,(function(t,e,n,r){return 1===arguments.length?CB(t):new AB(t,e,n,null==r?1:r)}),tB(eB,{brighter:function(t){return t=null==t?rB:Math.pow(rB,t),new AB(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?nB:Math.pow(nB,t),new AB(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new wB(PB(t>=240?t-240:t+120,i,r),PB(t,i,r),PB(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var MB=function(t){return function(){return t}};function LB(t,e){return function(n){return t+n*e}}function RB(t){return 1===(t=+t)?NB:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):MB(isNaN(e)?n:e)}}function NB(t,e){var n=e-t;return n?LB(t,n):MB(isNaN(t)?e:t)}var OB=function t(e){var n=RB(e);function r(t,e){var r=n((t=bB(t)).r,(e=bB(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=NB(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function zB(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=bB(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}zB((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return TB((n-r/e)*e,a,i,o,s)}})),zB((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return TB((n-r/e)*e,i,o,a,s)}}));var DB=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,FB=new RegExp(DB.source,"g");function BB(t,e){var n,r,i,o=DB.lastIndex=FB.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=DB.exec(t))&&(r=FB.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:UF(n,r)})),o=FB.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function jB(t,e){var n;return("number"===typeof e?UF:e instanceof vB?OB:(n=vB(e))?(e=n,OB):BB)(t,e)}function ZB(t){return function(){this.removeAttribute(t)}}function UB(t){return function(){this.removeAttributeNS(t.space,t.local)}}function VB(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function qB(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function GB(t,e,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(t))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,l));this.removeAttribute(t)}}function WB(t,e,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,l));this.removeAttributeNS(t.space,t.local)}}function HB(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function XB(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function YB(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&XB(t,i)),n}return i._value=e,i}function $B(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&HB(t,i)),n}return i._value=e,i}function KB(t,e){return function(){BF(this,t).delay=+e.apply(this,arguments)}}function JB(t,e){return e=+e,function(){BF(this,t).delay=e}}function QB(t,e){return function(){jF(this,t).duration=+e.apply(this,arguments)}}function tj(t,e){return e=+e,function(){jF(this,t).duration=e}}function ej(t,e){if("function"!==typeof e)throw new Error;return function(){jF(this,t).ease=e}}function nj(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?BF:jF;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}var rj=cF.prototype.constructor;function ij(t){return function(){this.style.removeProperty(t)}}function oj(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function aj(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&oj(t,o,n)),r}return o._value=e,o}function sj(t){return function(e){this.textContent=t.call(this,e)}}function lj(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&sj(r)),e}return r._value=t,r}var uj=0;function cj(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function hj(){return++uj}var fj=cF.prototype;cj.prototype=function(t){return cF().transition(t)}.prototype=(0,c.Z)({constructor:cj,select:function(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=$z(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,u=r[a],c=u.length,h=o[a]=new Array(c),f=0;f<c;++f)(s=u[f])&&(l=t.call(s,s.__data__,f,u))&&("__data__"in s&&(l.__data__=s.__data__),h[f]=l,FF(h[f],e,n,f,h,ZF(s,n)));return new cj(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=Qz(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,u=r[s],c=u.length,h=0;h<c;++h)if(l=u[h]){for(var f,p=t.call(l,l.__data__,h,u),d=ZF(l,n),m=0,g=p.length;m<g;++m)(f=p[m])&&FF(f,e,n,m,p,d);o.push(p),a.push(l)}return new cj(o,a,e,n)},filter:function(t){"function"!==typeof t&&(t=tD(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&t.call(o,o.__data__,u,a)&&l.push(o);return new cj(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,u=e[s],c=n[s],h=u.length,f=a[s]=new Array(h),p=0;p<h;++p)(l=u[p]||c[p])&&(f[p]=l);for(;s<r;++s)a[s]=e[s];return new cj(a,this._parents,this._name,this._id)},selection:function(){return new rj(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=hj(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)if(a=s[u]){var c=ZF(a,e);FF(a,t,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new cj(r,this._parents,t,n)},call:fj.call,nodes:fj.nodes,node:fj.node,size:fj.size,empty:fj.empty,each:fj.each,on:function(t,e){var n=this._id;return arguments.length<2?ZF(this.node(),n).on.on(t):this.each(nj(n,t,e))},attr:function(t,e){var n=mD(t),r="transform"===n?YF:jB;return this.attrTween(t,"function"===typeof e?(n.local?WB:GB)(n,r,JF(this,"attr."+t,e)):null==e?(n.local?UB:ZB)(n):(n.local?qB:VB)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!==typeof e)throw new Error;var r=mD(t);return this.tween(n,(r.local?YB:$B)(r,e))},style:function(t,e,n){var r="transform"===(t+="")?XF:jB;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=ID(this,t),a=(this.style.removeProperty(t),ID(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,ij(t)):"function"===typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=ID(this,t),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=ID(this,t)),a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,s))}}(t,r,JF(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,s="end."+a;return function(){var l=jF(this,t),u=l.on,c=null==l.value[a]?o||(o=ij(e)):void 0;u===n&&i===c||(r=(n=u).copy()).on(s,i=c),l.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=ID(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!==typeof e)throw new Error;return this.tween(r,aj(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"===typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(JF(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!==typeof t)throw new Error;return this.tween(e,lj(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=ZF(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?$F:KF)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?KB:JB)(e,t)):ZF(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?QB:tj)(e,t)):ZF(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(ej(e,t)):ZF(this.node(),e).ease},easeVarying:function(t){if("function"!==typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!==typeof n)throw new Error;jF(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},l={value:function(){0===--i&&o()}};n.each((function(){var n=jF(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),n.on=e})),0===i&&o()}))}},Symbol.iterator,fj[Symbol.iterator]);var pj={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function dj(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error("transition ".concat(e," not found"));return n}cF.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}(this,t)}))},cF.prototype.transition=function(t){var e,n;t instanceof cj?(e=t._id,t=t._name):(e=hj(),(n=pj).time=AF(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)(a=s[u])&&FF(a,t,e,u,s,n||dj(a,e));return new cj(r,this._parents,t,e)};Math.abs,Math.max,Math.min;function mj(t){return[+t[0],+t[1]]}function gj(t){return[mj(t[0]),mj(t[1])]}["w","e"].map(vj),["n","s"].map(vj),["n","w","e","s","nw","ne","sw","se"].map(vj);function vj(t){return{type:t}}var yj=Math.PI,_j=yj/2,xj=180/yj,bj=yj/180,wj=(Math.abs,Math.atan,Math.atan2),kj=Math.cos,Sj=(Math.ceil,Math.exp,Math.floor,Math.hypot,Math.log,Math.pow,Math.sin),Ej=(Math.sign,Math.sqrt);Math.tan;function Ij(t){return(t=Sj(t/2))*t}function Cj(t,e){var n=t[0]*bj,r=t[1]*bj,i=e[0]*bj,o=e[1]*bj,a=kj(r),s=Sj(r),l=kj(o),u=Sj(o),c=a*kj(n),h=a*Sj(n),f=l*kj(i),p=l*Sj(i),d=2*function(t){return t>1?_j:t<-1?-_j:Math.asin(t)}(Ej(Ij(o-r)+a*l*Ij(i-n))),m=Sj(d),g=d?function(t){var e=Sj(t*=d)/m,n=Sj(d-t)/m,r=n*c+e*f,i=n*h+e*p,o=n*s+e*u;return[wj(i,r)*xj,wj(o,Ej(r*r+i*i))*xj]}:function(){return[n*xj,r*xj]};return g.distance=d,g}function Aj(t,e,n){this.k=t,this.x=e,this.y=n}Aj.prototype={constructor:Aj,scale:function(t){return 1===t?this:new Aj(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Aj(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Aj(1,0,0);Aj.prototype;var Pj=t.createContext({}),Tj=(Pj.Provider,Pj),Mj=n(136),Lj=n(9388);function Rj(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nj(t){if("undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof process&&"object"===typeof process.versions&&Boolean(process.versions.electron))return!0;var e="object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function Oj(){return!("object"===typeof process&&"[object process]"===String(process)&&!process.browser)||Nj()}var zj="undefined"!==typeof __VERSION__?__VERSION__:"untranspiled source";Oj();function Dj(t){try{var e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(r){return null}}var Fj,Bj=function(){function t(e){(0,s.Z)(this,t);var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Rj(this,"storage",void 0),Rj(this,"id",void 0),Rj(this,"config",{}),this.storage=Dj(r),this.id=e,this.config={},Object.assign(this.config,n),this._loadConfiguration()}return(0,l.Z)(t,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(t){return this.config={},this.updateConfiguration(t)}},{key:"updateConfiguration",value:function(t){if(Object.assign(this.config,t),this.storage){var e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}return this}},{key:"_loadConfiguration",value:function(){var t={};if(this.storage){var e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}]),t}();function jj(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));var o=t.width*n,a=t.height*n,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),s]}function Zj(t){return"string"===typeof t?Fj[t.toUpperCase()]||Fj.WHITE:t}function Uj(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],r=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(r),o=(0,ch.Z)(i);try{var a=function(){var r=e.value;"function"===typeof t[r]&&(n.find((function(t){return r===t}))||(t[r]=t[r].bind(t)))};for(o.s();!(e=o.n()).done;)a()}catch(s){o.e(s)}finally{o.f()}}function Vj(t,e){if(!t)throw new Error(e||"Assertion failed")}!function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(Fj||(Fj={}));var qj={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof n.g&&n.g,document:"undefined"!==typeof document&&document,process:"object"===typeof process&&process},Gj=globalThis,Wj=qj.window||qj.self||qj.global,Hj=qj.process||{};console;function Xj(){var t,e,n;if(Oj&&"performance"in Wj)t=null===Wj||void 0===Wj||null===(e=Wj.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in Hj){var r,i=null===Hj||void 0===Hj||null===(r=Hj.hrtime)||void 0===r?void 0:r.call(Hj);t=1e3*i[0]+i[1]/1e6}else t=Date.now();return t}var Yj={debug:Oj&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},$j={enabled:!0,level:0};function Kj(){}var Jj={},Qj={once:!0},tZ=function(){function t(){(0,s.Z)(this,t);var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""},n=e.id;Rj(this,"id",void 0),Rj(this,"VERSION",zj),Rj(this,"_startTs",Xj()),Rj(this,"_deltaTs",Xj()),Rj(this,"_storage",void 0),Rj(this,"userData",{}),Rj(this,"LOG_THROTTLE_TIMEOUT",0),this.id=n,this._storage=new Bj("__probe-".concat(this.id,"__"),$j),this.userData={},this.timeStamp("".concat(this.id," started")),Uj(this),Object.seal(this)}return(0,l.Z)(t,[{key:"level",get:function(){return this.getLevel()},set:function(t){this.setLevel(t)}},{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number((Xj()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((Xj()-this._deltaTs).toPrecision(10))}},{key:"priority",get:function(){return this.level},set:function(t){this.level=t}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:t}),this}},{key:"setLevel",value:function(t){return this._storage.updateConfiguration({level:t}),this}},{key:"get",value:function(t){return this._storage.config[t]}},{key:"set",value:function(t,e){this._storage.updateConfiguration((0,c.Z)({},t,e))}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"assert",value:function(t,e){Vj(t,e)}},{key:"warn",value:function(t){return this._getLogFunction(0,t,Yj.warn,arguments,Qj)}},{key:"error",value:function(t){return this._getLogFunction(0,t,Yj.error,arguments)}},{key:"deprecated",value:function(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}},{key:"removed",value:function(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}},{key:"probe",value:function(t,e){return this._getLogFunction(t,e,Yj.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(t,e){return this._getLogFunction(t,e,Yj.debug,arguments)}},{key:"info",value:function(t,e){return this._getLogFunction(t,e,console.info,arguments)}},{key:"once",value:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction(t,e,Yj.debug||Yj.info,arguments,Qj)}},{key:"table",value:function(t,e,n){return e?this._getLogFunction(t,e,console.table||Kj,n&&[n],{tag:rZ(e)}):Kj}},{key:"image",value:function(t){var e=t.logLevel,r=t.priority,i=t.image,o=t.message,a=void 0===o?"":o,s=t.scale,l=void 0===s?1:s;return this._shouldLog(e||r)?Oj?function(t){var e=t.image,n=t.message,r=void 0===n?"":n,i=t.scale,o=void 0===i?1:i;if("string"===typeof e){var a=new Image;return a.onload=function(){var t,e=jj(a,r,o);(t=console).log.apply(t,(0,u.Z)(e))},a.src=e,Kj}var s=e.nodeName||"";if("img"===s.toLowerCase()){var l;return(l=console).log.apply(l,(0,u.Z)(jj(e,r,o))),Kj}if("canvas"===s.toLowerCase()){var c=new Image;return c.onload=function(){var t;return(t=console).log.apply(t,(0,u.Z)(jj(c,r,o)))},c.src=e.toDataURL(),Kj}return Kj}({image:i,message:a,scale:l}):function(t){var e=t.image,r=(t.message,t.scale),i=void 0===r?1:r,o=null;try{o=n(9214)}catch(a){}if(o)return function(){return o(e,{fit:"box",width:"".concat(Math.round(80*i),"%")}).then((function(t){return console.log(t)}))};return Kj}({image:i,message:a,scale:l}):Kj}},{key:"time",value:function(t,e){return this._getLogFunction(t,e,console.time?console.time:console.info)}},{key:"timeEnd",value:function(t,e){return this._getLogFunction(t,e,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(t,e){return this._getLogFunction(t,e,console.timeStamp||Kj)}},{key:"group",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},r=nZ({logLevel:t,message:e,opts:n}),i=n.collapsed;return r.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}},{key:"groupCollapsed",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}},{key:"groupEnd",value:function(t){return this._getLogFunction(t,"",console.groupEnd||Kj)}},{key:"withGroup",value:function(t,e,n){this.group(t,e)();try{n()}finally{this.groupEnd(t)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(t){return this.isEnabled()&&this.getLevel()>=eZ(t)}},{key:"_getLogFunction",value:function(t,e,n,r,i){if(this._shouldLog(t)){var o;i=nZ({logLevel:t,message:e,args:r,opts:i}),Vj(n=n||i.method),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=Xj();var a=i.tag||i.message;if(i.once){if(Jj[a])return Kj;Jj[a]=Xj()}return e=function(t,e,n){if("string"===typeof e){var r=n.time?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function(t){return t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s")}(n.total)):"";e=function(t,e,n){return Oj||"string"!==typeof t||(e&&(e=Zj(e),t="\x1b[".concat(e,"m").concat(t,"\x1b[39m")),n&&(e=Zj(n),t="\x1b[".concat(n+10,"m").concat(t,"\x1b[49m"))),t}(e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,i.message,i),(o=n).bind.apply(o,[console,e].concat((0,u.Z)(i.args)))}return Kj}}]),t}();function eZ(t){if(!t)return 0;var e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Vj(Number.isFinite(e)&&e>=0),e}function nZ(t){var e=t.logLevel,n=t.message;t.logLevel=eZ(e);for(var r=t.args?Array.from(t.args):[];r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"===typeof t.message&&(t.message=t.message());var i=typeof t.message;return Vj("string"===i||"object"===i),Object.assign(t,{args:r},t.opts)}function rZ(t){for(var e in t)for(var n in t[e])return n||"untitled";return"empty"}Rj(tZ,"VERSION",zj);var iZ=new tZ({id:"deck"}),oZ=function(){function t(e){(0,s.Z)(this,t),this._pool=[],this.props={overAlloc:2,poolSize:100},this.setProps(e)}return(0,l.Z)(t,[{key:"setProps",value:function(t){Object.assign(this.props,t)}},{key:"allocate",value:function(t,e,n){var r,i=n.size,o=void 0===i?1:i,a=n.type,s=n.padding,l=void 0===s?0:s,u=n.copy,c=void 0!==u&&u,h=n.initialize,f=void 0!==h&&h,p=n.maxCount,d=a||t&&t.constructor||Float32Array,m=e*o+l;if(ArrayBuffer.isView(t)){if(m<=t.length)return t;if(m*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new d(t.buffer,0,m)}p&&(r=p*o+l);var g=this._allocate(d,m,f,r);return t&&c?g.set(t):f||g.fill(0,0,4),this._release(t),g}},{key:"release",value:function(t){this._release(t)}},{key:"_allocate",value:function(t,e,n,r){var i=Math.max(Math.ceil(e*this.props.overAlloc),1);i>r&&(i=r);var o=this._pool,a=t.BYTES_PER_ELEMENT*i,s=o.findIndex((function(t){return t.byteLength>=a}));if(s>=0){var l=new t(o.splice(s,1)[0],0,i);return n&&l.fill(0),l}return new t(i)}},{key:"_release",value:function(t){if(ArrayBuffer.isView(t)){var e=this._pool,n=t.buffer,r=n.byteLength,i=e.findIndex((function(t){return t.byteLength>=r}));i<0?e.push(n):(i>0||e.length<this.props.poolSize)&&e.splice(i,0,n),e.length>this.props.poolSize&&e.shift()}}}]),t}(),aZ=new oZ,sZ=(Math.PI,Math.PI,{});function lZ(t){return Math.round(t/sZ.EPSILON)*sZ.EPSILON}function uZ(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.precision,r=void 0===n?sZ.precision||4:n;return t=lZ(t),"".concat(parseFloat(t.toPrecision(r)))}function cZ(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function hZ(t,e,n){if(cZ(t)){n=n||function(t){return t.clone?t.clone():new Array(t.length)}(t);for(var r=0;r<n.length&&r<t.length;++r)n[r]=e(t[r],r,n);return n}return e(t)}function fZ(t,e,n){return hZ(t,(function(t){return Math.max(e,Math.min(n,t))}))}function pZ(t,e,n){return cZ(t)?t.map((function(t,r){return pZ(t,e[r],n)})):n*e+(1-n)*t}function dZ(t,e,n){var r=sZ.EPSILON;n&&(sZ.EPSILON=n);try{if(t===e)return!0;if(cZ(t)&&cZ(e)){if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(!dZ(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):!(!Number.isFinite(t)||!Number.isFinite(e))&&Math.abs(t-e)<=sZ.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{sZ.EPSILON=r}}function mZ(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}sZ.EPSILON=1e-12,sZ.debug=!1,sZ.precision=4,sZ.printTypes=!1,sZ.printDegrees=!1,sZ.printRowMajor=!0;var gZ=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(){return(0,s.Z)(this,n),e.apply(this,arguments)}return(0,l.Z)(n,[{key:"ELEMENTS",get:function(){return mZ(!1),0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"from",value:function(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}},{key:"to",value:function(t){return t===this?this:cZ(t)?this.toArray(t):this.toObject(t)}},{key:"toTarget",value:function(t){return t?this.to(t):this}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"toString",value:function(){return this.formatString(sZ)}},{key:"formatString",value:function(t){for(var e="",n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+uZ(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}},{key:"equals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(!dZ(this[e],t[e]))return!1;return!0}},{key:"exactEquals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}},{key:"negate",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}},{key:"lerp",value:function(t,e,n){void 0===n&&(n=e,e=t,t=this);for(var r=0;r<this.ELEMENTS;++r){var i=t[r];this[r]=i+n*(e[r]-i)}return this.check()}},{key:"min",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}},{key:"max",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}},{key:"clamp",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++)for(var o=i[r],a=0;a<this.ELEMENTS;++a)this[a]+=o[a];return this.check()}},{key:"subtract",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++)for(var o=i[r],a=0;a<this.ELEMENTS;++a)this[a]-=o[a];return this.check()}},{key:"scale",value:function(t){if(Array.isArray(t))return this.multiply(t);for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"sub",value:function(t){return this.subtract(t)}},{key:"setScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}},{key:"addScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}},{key:"subScalar",value:function(t){return this.addScalar(-t)}},{key:"multiplyScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"divideScalar",value:function(t){return this.scale(1/t)}},{key:"clampScalar",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}},{key:"multiplyByScalar",value:function(t){return this.scale(t)}},{key:"elements",get:function(){return this}},{key:"check",value:function(){if(sZ.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"validate",value:function(){for(var t=this.length===this.ELEMENTS,e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}}]),n}(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array));function vZ(t,e){if(t.length!==e)return!1;for(var n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function yZ(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function _Z(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(sZ.debug&&!vZ(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}var xZ={};function bZ(t,e){xZ[t]||(xZ[t]=!0,console.warn("".concat(t," has been removed in version ").concat(e,", see upgrade guide for more information")))}var wZ=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(){return(0,s.Z)(this,n),e.apply(this,arguments)}return(0,l.Z)(n,[{key:"ELEMENTS",get:function(){return mZ(!1),0}},{key:"copy",value:function(t){return mZ(!1),this}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=yZ(t)}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=yZ(t)}},{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return this.len()}},{key:"lengthSquared",value:function(){for(var t=0,e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}},{key:"magnitudeSquared",value:function(){return this.lengthSquared()}},{key:"distance",value:function(t){return Math.sqrt(this.distanceSquared(t))}},{key:"distanceSquared",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-t[n];e+=r*r}return yZ(e)}},{key:"dot",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return yZ(e)}},{key:"normalize",value:function(){var t=this.magnitude();if(0!==t)for(var e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}},{key:"multiply",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++)for(var o=i[r],a=0;a<this.ELEMENTS;++a)this[a]*=o[a];return this.check()}},{key:"divide",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++)for(var o=i[r],a=0;a<this.ELEMENTS;++a)this[a]/=o[a];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(t){return this.distance(t)}},{key:"distanceToSquared",value:function(t){return this.distanceSquared(t)}},{key:"getComponent",value:function(t){return mZ(t>=0&&t<this.ELEMENTS,"index is out of range"),yZ(this[t])}},{key:"setComponent",value:function(t,e){return mZ(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}},{key:"addVectors",value:function(t,e){return this.copy(t).add(e)}},{key:"subVectors",value:function(t,e){return this.copy(t).subtract(e)}},{key:"multiplyVectors",value:function(t,e){return this.copy(t).multiply(e)}},{key:"addScaledVector",value:function(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}]),n}(gZ),kZ=1e-6,SZ="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function EZ(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var IZ=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t};!function(){var t=function(){var t=new SZ(3);return SZ!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}()}();function CZ(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o||1;return t[0]=(n[0]*r+n[4]*i+n[8]*o)/a,t[1]=(n[1]*r+n[5]*i+n[9]*o)/a,t[2]=(n[2]*r+n[6]*i+n[10]*o)/a,t}var AZ=[0,0,0],PZ={},TZ=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,s.Z)(this,n),t=e.call(this,-0,-0,-0),1===arguments.length&&cZ(r)?t.copy(r):(sZ.debug&&(yZ(r),yZ(i),yZ(o)),t[0]=r,t[1]=i,t[2]=o),t}return(0,l.Z)(n,[{key:"set",value:function(t,e,n){return this[0]=t,this[1]=e,this[2]=n,this.check()}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}},{key:"fromObject",value:function(t){return sZ.debug&&(yZ(t.x),yZ(t.y),yZ(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}},{key:"toObject",value:function(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=yZ(t)}},{key:"angle",value:function(t){return function(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2],l=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+a*a+s*s),u=l&&function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}(t,e)/l;return Math.acos(Math.min(Math.max(u,-1),1))}(this,t)}},{key:"cross",value:function(t){return function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],l=n[2];t[0]=i*l-o*s,t[1]=o*a-r*l,t[2]=r*s-i*a}(this,this,t),this.check()}},{key:"rotateX",value:function(t){var e=t.radians,n=t.origin;return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,void 0===n?AZ:n,e),this.check()}},{key:"rotateY",value:function(t){var e=t.radians,n=t.origin;return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,void 0===n?AZ:n,e),this.check()}},{key:"rotateZ",value:function(t){var e=t.radians,n=t.origin;return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,void 0===n?AZ:n,e),this.check()}},{key:"transform",value:function(t){return this.transformAsPoint(t)}},{key:"transformAsPoint",value:function(t){return EZ(this,this,t),this.check()}},{key:"transformAsVector",value:function(t){return CZ(this,this,t),this.check()}},{key:"transformByMatrix3",value:function(t){return function(t,e,n){var r=e[0],i=e[1],o=e[2];t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8]}(this,this,t),this.check()}},{key:"transformByMatrix2",value:function(t){return function(t,e,n){var r=e[0],i=e[1];t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2]}(this,this,t),this.check()}},{key:"transformByQuaternion",value:function(t){return function(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],l=e[1],u=e[2],c=i*u-o*l,h=o*s-r*u,f=r*l-i*s,p=i*f-o*h,d=o*c-r*f,m=r*h-i*c,g=2*a;c*=g,h*=g,f*=g,p*=2,d*=2,m*=2,t[0]=s+c+p,t[1]=l+h+d,t[2]=u+f+m}(this,this,t),this.check()}}],[{key:"ZERO",get:function(){return PZ.ZERO=PZ.ZERO||Object.freeze(new n(0,0,0,0))}}]),n}(wZ);var MZ,LZ=new TZ;function RZ(t,e,n,r){LZ.set(t,e,n);var i=LZ.len();return{distance:r/i,normal:new TZ(-t/i,-e/i,-n/i)}}function NZ(t){return t-Math.fround(t)}function OZ(t,e){var n=e.size,r=void 0===n?1:n,i=e.startIndex,o=void 0===i?0:i,a=void 0!==e.endIndex?e.endIndex:t.length,s=(a-o)/r;MZ=aZ.allocate(MZ,s,{type:Float32Array,size:2*r});for(var l=o,u=0;l<a;){for(var c=0;c<r;c++){var h=t[l++];MZ[u+c]=h,MZ[u+c+r]=NZ(h)}u+=2*r}return MZ.subarray(0,s*r*2)}var zZ=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(){return(0,s.Z)(this,n),e.apply(this,arguments)}return(0,l.Z)(n,[{key:"ELEMENTS",get:function(){return mZ(!1),0}},{key:"RANK",get:function(){return mZ(!1),0}},{key:"toString",value:function(){var t="[";if(sZ.printRowMajor){t+="row-major:";for(var e=0;e<this.RANK;++e)for(var n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+e])}else{t+="column-major:";for(var r=0;r<this.ELEMENTS;++r)t+=" ".concat(this[r])}return t+="]"}},{key:"getElementIndex",value:function(t,e){return e*this.RANK+t}},{key:"getElement",value:function(t,e){return this[e*this.RANK+t]}},{key:"setElement",value:function(t,e,n){return this[e*this.RANK+t]=yZ(n),this}},{key:"getColumn",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0),n=t*this.RANK,r=0;r<this.RANK;++r)e[r]=this[n+r];return e}},{key:"setColumn",value:function(t,e){for(var n=t*this.RANK,r=0;r<this.RANK;++r)this[n+r]=e[r];return this}}]),n}(gZ);function DZ(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],p=e[11],d=e[12],m=e[13],g=e[14],v=e[15],y=n*s-r*a,_=n*l-i*a,x=n*u-o*a,b=r*l-i*s,w=r*u-o*s,k=i*u-o*l,S=c*m-h*d,E=c*g-f*d,I=c*v-p*d,C=h*g-f*m,A=h*v-p*m,P=f*v-p*g,T=y*P-_*A+x*C+b*I-w*E+k*S;return T?(T=1/T,t[0]=(s*P-l*A+u*C)*T,t[1]=(i*A-r*P-o*C)*T,t[2]=(m*k-g*w+v*b)*T,t[3]=(f*w-h*k-p*b)*T,t[4]=(l*I-a*P-u*E)*T,t[5]=(n*P-i*I+o*E)*T,t[6]=(g*x-d*k-v*_)*T,t[7]=(c*k-f*x+p*_)*T,t[8]=(a*A-s*I+u*S)*T,t[9]=(r*I-n*A-o*S)*T,t[10]=(d*w-m*x+v*y)*T,t[11]=(h*x-c*w-p*y)*T,t[12]=(s*E-a*C-l*S)*T,t[13]=(n*C-r*E+i*S)*T,t[14]=(m*_-d*b-g*y)*T,t[15]=(c*b-h*_+f*y)*T,t):null}function FZ(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],m=e[12],g=e[13],v=e[14],y=e[15],_=n[0],x=n[1],b=n[2],w=n[3];return t[0]=_*r+x*s+b*h+w*m,t[1]=_*i+x*l+b*f+w*g,t[2]=_*o+x*u+b*p+w*v,t[3]=_*a+x*c+b*d+w*y,_=n[4],x=n[5],b=n[6],w=n[7],t[4]=_*r+x*s+b*h+w*m,t[5]=_*i+x*l+b*f+w*g,t[6]=_*o+x*u+b*p+w*v,t[7]=_*a+x*c+b*d+w*y,_=n[8],x=n[9],b=n[10],w=n[11],t[8]=_*r+x*s+b*h+w*m,t[9]=_*i+x*l+b*f+w*g,t[10]=_*o+x*u+b*p+w*v,t[11]=_*a+x*c+b*d+w*y,_=n[12],x=n[13],b=n[14],w=n[15],t[12]=_*r+x*s+b*h+w*m,t[13]=_*i+x*l+b*f+w*g,t[14]=_*o+x*u+b*p+w*v,t[15]=_*a+x*c+b*d+w*y,t}function BZ(t,e,n){var r,i,o,a,s,l,u,c,h,f,p,d,m=n[0],g=n[1],v=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*v+e[12],t[13]=e[1]*m+e[5]*g+e[9]*v+e[13],t[14]=e[2]*m+e[6]*g+e[10]*v+e[14],t[15]=e[3]*m+e[7]*g+e[11]*v+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=f,t[10]=p,t[11]=d,t[12]=r*m+s*g+h*v+e[12],t[13]=i*m+l*g+f*v+e[13],t[14]=o*m+u*g+p*v+e[14],t[15]=a*m+c*g+d*v+e[15]),t}function jZ(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ZZ(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+u*r,t[5]=a*i+c*r,t[6]=s*i+h*r,t[7]=l*i+f*r,t[8]=u*i-o*r,t[9]=c*i-a*r,t[10]=h*i-s*r,t[11]=f*i-l*r,t}function UZ(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+u*r,t[1]=a*i+c*r,t[2]=s*i+h*r,t[3]=l*i+f*r,t[4]=u*i-o*r,t[5]=c*i-a*r,t[6]=h*i-s*r,t[7]=f*i-l*r,t}function VZ(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function qZ(t,e,n,r){var i,o,a,s,l,u,c,h,f,p,d=e[0],m=e[1],g=e[2],v=r[0],y=r[1],_=r[2],x=n[0],b=n[1],w=n[2];return Math.abs(d-x)<kZ&&Math.abs(m-b)<kZ&&Math.abs(g-w)<kZ?function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}(t):(c=d-x,h=m-b,f=g-w,i=y*(f*=p=1/Math.hypot(c,h,f))-_*(h*=p),o=_*(c*=p)-v*f,a=v*h-y*c,(p=Math.hypot(i,o,a))?(i*=p=1/p,o*=p,a*=p):(i=0,o=0,a=0),s=h*a-f*o,l=f*i-c*a,u=c*o-h*i,(p=Math.hypot(s,l,u))?(s*=p=1/p,l*=p,u*=p):(s=0,l=0,u=0),t[0]=i,t[1]=s,t[2]=c,t[3]=0,t[4]=o,t[5]=l,t[6]=h,t[7]=0,t[8]=a,t[9]=u,t[10]=f,t[11]=0,t[12]=-(i*d+o*m+a*g),t[13]=-(s*d+l*m+u*g),t[14]=-(c*d+h*m+f*g),t[15]=1,t)}function GZ(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function WZ(t,e){return t[0]=-e[0],t[1]=-e[1],t}function HZ(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}!function(){var t=function(){var t=new SZ(2);return SZ!=Float32Array&&(t[0]=0,t[1]=0),t}()}();function XZ(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}!function(){var t=function(){var t=new SZ(4);return SZ!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}()}();var YZ=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),$Z=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),KZ=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),JZ={},QZ=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){var r;return(0,s.Z)(this,n),r=e.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?r.copy(t):r.identity(),r}return(0,l.Z)(n,[{key:"INDICES",get:function(){return KZ}},{key:"ELEMENTS",get:function(){return 16}},{key:"RANK",get:function(){return 4}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}},{key:"set",value:function(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,m){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=l,this[9]=u,this[10]=c,this[11]=h,this[12]=f,this[13]=p,this[14]=d,this[15]=m,this.check()}},{key:"setRowMajor",value:function(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,m){return this[0]=t,this[1]=i,this[2]=l,this[3]=f,this[4]=e,this[5]=o,this[6]=u,this[7]=p,this[8]=n,this[9]=a,this[10]=c,this[11]=d,this[12]=r,this[13]=s,this[14]=h,this[15]=m,this.check()}},{key:"toRowMajor",value:function(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}},{key:"identity",value:function(){return this.copy(YZ)}},{key:"fromQuaternion",value:function(t){return function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,l=i+i,u=n*a,c=r*a,h=r*s,f=i*a,p=i*s,d=i*l,m=o*a,g=o*s,v=o*l;t[0]=1-h-d,t[1]=c+v,t[2]=f-g,t[3]=0,t[4]=c-v,t[5]=1-u-d,t[6]=p+m,t[7]=0,t[8]=f+g,t[9]=p-m,t[10]=1-u-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this.check()}},{key:"frustum",value:function(t){var e=t.left,r=t.right,i=t.bottom,o=t.top,a=t.near,s=t.far;return s===1/0?n._computeInfinitePerspectiveOffCenter(this,e,r,i,o,a):function(t,e,n,r,i,o,a){var s=1/(n-e),l=1/(i-r),u=1/(o-a);t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*l,t[10]=(a+o)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*u,t[15]=0}(this,e,r,i,o,a,s),this.check()}},{key:"lookAt",value:function(t,e,n){if(1===arguments.length){var r=t;t=r.eye,e=r.center,n=r.up}return qZ(this,t,e=e||[0,0,0],n=n||[0,1,0]),this.check()}},{key:"ortho",value:function(t){var e=t.left,n=t.right,r=t.bottom,i=t.top,o=t.near,a=void 0===o?.1:o,s=t.far;return function(t,e,n,r,i,o,a){var s=1/(e-n),l=1/(r-i),u=1/(o-a);t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(a+o)*u,t[15]=1}(this,e,n,r,i,a,void 0===s?500:s),this.check()}},{key:"orthographic",value:function(t){var e=t.fovy,r=void 0===e?45*Math.PI/180:e,i=t.aspect,o=void 0===i?1:i,a=t.focalDistance,s=void 0===a?1:a,l=t.near,u=void 0===l?.1:l,c=t.far,h=void 0===c?500:c;if(r>2*Math.PI)throw Error("radians");var f=r/2,p=s*Math.tan(f),d=p*o;return(new n).ortho({left:-d,right:d,bottom:-p,top:p,near:u,far:h})}},{key:"perspective",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fovy,n=void 0===e?void 0:e,r=t.fov,i=void 0===r?45*Math.PI/180:r,o=t.aspect,a=void 0===o?1:o,s=t.near,l=void 0===s?.1:s,u=t.far,c=void 0===u?500:u;if((n=n||i)>2*Math.PI)throw Error("radians");return VZ(this,n,a,l,c),this.check()}},{key:"determinant",value:function(){return function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],f=t[11],p=t[12],d=t[13],m=t[14],g=t[15];return(e*a-n*o)*(h*g-f*m)-(e*s-r*o)*(c*g-f*d)+(e*l-i*o)*(c*m-h*d)+(n*s-r*a)*(u*g-f*p)-(n*l-i*a)*(u*m-h*p)+(r*l-i*s)*(u*d-c*p)}(this)}},{key:"getScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}},{key:"getTranslation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}},{key:"getRotation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getScale(e||[-0,-0,-0]),r=1/n[0],i=1/n[1],o=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*o,t[3]=0,t[4]=this[4]*r,t[5]=this[5]*i,t[6]=this[6]*o,t[7]=0,t[8]=this[8]*r,t[9]=this[9]*i,t[10]=this[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{key:"getRotationMatrix3",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getScale(e||[-0,-0,-0]),r=1/n[0],i=1/n[1],o=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*o,t[3]=this[4]*r,t[4]=this[5]*i,t[5]=this[6]*o,t[6]=this[8]*r,t[7]=this[9]*i,t[8]=this[10]*o,t}},{key:"transpose",value:function(){return function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}},{key:"invert",value:function(){return DZ(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return FZ(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return FZ(this,this,t),this.check()}},{key:"rotateX",value:function(t){return ZZ(this,this,t),this.check()}},{key:"rotateY",value:function(t){return function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[8],c=e[9],h=e[10],f=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-u*r,t[1]=a*i-c*r,t[2]=s*i-h*r,t[3]=l*i-f*r,t[8]=o*r+u*i,t[9]=a*r+c*i,t[10]=s*r+h*i,t[11]=l*r+f*i}(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return UZ(this,this,t),this.check()}},{key:"rotateXYZ",value:function(t){var e=(0,i.Z)(t,3),n=e[0],r=e[1],o=e[2];return this.rotateX(n).rotateY(r).rotateZ(o)}},{key:"rotateAxis",value:function(t,e){return function(t,e,n,r){var i,o,a,s,l,u,c,h,f,p,d,m,g,v,y,_,x,b,w,k,S,E,I,C,A=r[0],P=r[1],T=r[2],M=Math.hypot(A,P,T);M<kZ||(A*=M=1/M,P*=M,T*=M,i=Math.sin(n),a=1-(o=Math.cos(n)),s=e[0],l=e[1],u=e[2],c=e[3],h=e[4],f=e[5],p=e[6],d=e[7],m=e[8],g=e[9],v=e[10],y=e[11],_=A*A*a+o,x=P*A*a+T*i,b=T*A*a-P*i,w=A*P*a-T*i,k=P*P*a+o,S=T*P*a+A*i,E=A*T*a+P*i,I=P*T*a-A*i,C=T*T*a+o,t[0]=s*_+h*x+m*b,t[1]=l*_+f*x+g*b,t[2]=u*_+p*x+v*b,t[3]=c*_+d*x+y*b,t[4]=s*w+h*k+m*S,t[5]=l*w+f*k+g*S,t[6]=u*w+p*k+v*S,t[7]=c*w+d*k+y*S,t[8]=s*E+h*I+m*C,t[9]=l*E+f*I+g*C,t[10]=u*E+p*I+v*C,t[11]=c*E+d*I+y*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,t,e),this.check()}},{key:"scale",value:function(t){return Array.isArray(t)?jZ(this,this,t):jZ(this,this,[t,t,t]),this.check()}},{key:"translate",value:function(t){return BZ(this,this,t),this.check()}},{key:"transform",value:function(t,e){return 4===t.length?(_Z(e=XZ(e||[-0,-0,-0,-0],t,this),4),e):this.transformAsPoint(t,e)}},{key:"transformAsPoint",value:function(t,e){switch(t.length){case 2:e=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(e||[-0,-0],t,this);break;case 3:e=EZ(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return _Z(e,t.length),e}},{key:"transformAsVector",value:function(t,e){switch(t.length){case 2:e=function(t,e,n){var r=e[0],i=e[1],o=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/o,t[1]=(n[1]*r+n[5]*i)/o,t}(e||[-0,-0],t,this);break;case 3:e=CZ(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return _Z(e,t.length),e}},{key:"makeRotationX",value:function(t){return this.identity().rotateX(t)}},{key:"makeTranslation",value:function(t,e,n){return this.identity().translate([t,e,n])}},{key:"transformPoint",value:function(t,e){return bZ("Matrix4.transformPoint","3.0"),this.transformAsPoint(t,e)}},{key:"transformVector",value:function(t,e){return bZ("Matrix4.transformVector","3.0"),this.transformAsPoint(t,e)}},{key:"transformDirection",value:function(t,e){return bZ("Matrix4.transformDirection","3.0"),this.transformAsVector(t,e)}}],[{key:"IDENTITY",get:function(){return JZ.IDENTITY=JZ.IDENTITY||Object.freeze(new n(YZ)),JZ.IDENTITY}},{key:"ZERO",get:function(){return JZ.ZERO=JZ.ZERO||Object.freeze(new n($Z)),JZ.ZERO}},{key:"_computeInfinitePerspectiveOffCenter",value:function(t,e,n,r,i,o){var a=2*o/(n-e),s=2*o/(i-r),l=(n+e)/(n-e),u=(i+r)/(i-r),c=-2*o;return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=l,t[9]=u,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=c,t[15]=0,t}}]),n}(zZ);function tU(t,e){var n=XZ([],e,t);return function(t,e,n){t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n}(n,n,1/n[3]),n}function eU(t,e){var n=t%e;return n<0?e+n:n}function nU(t,e,n){return t<e?e:t>n?n:t}var rU=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function iU(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}var oU=Math.PI,aU=oU/4,sU=oU/180,lU=180/oU,uU=512,cU=4003e4,hU=85.051129;function fU(t){var e=(0,i.Z)(t,2),n=e[0],r=e[1];iU(Number.isFinite(n)),iU(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");var o=r*sU;return[uU*(n*sU+oU)/(2*oU),uU*(oU+Math.log(Math.tan(aU+.5*o)))/(2*oU)]}function pU(t){var e=(0,i.Z)(t,2),n=e[0],r=e[1],o=n/uU*(2*oU)-oU,a=2*(Math.atan(Math.exp(r/uU*(2*oU)-oU))-aU);return[o*lU,a*lU]}function dU(t){var e=t.latitude;iU(Number.isFinite(e));var n=Math.cos(e*sU);return function(t){return rU(t)}(cU*n)-9}function mU(t){var e=t.latitude,n=t.longitude,r=t.highPrecision,i=void 0!==r&&r;iU(Number.isFinite(e)&&Number.isFinite(n));var o={},a=Math.cos(e*sU),s=512/360,l=s/a,u=12790407194604047e-21/a;if(o.unitsPerMeter=[u,u,u],o.metersPerUnit=[1/u,1/u,1/u],o.unitsPerDegree=[s,l,u],o.degreesPerUnit=[.703125,1/l,1/u],i){var c=sU*Math.tan(e*sU)/a,h=s*c/2,f=12790407194604047e-21*c,p=f/l*u;o.unitsPerDegree2=[0,h,f],o.unitsPerMeter2=[p,0,p]}return o}function gU(t,e){var n=(0,i.Z)(t,3),r=n[0],o=n[1],a=n[2],s=(0,i.Z)(e,3),l=s[0],u=s[1],c=s[2],h=mU({longitude:r,latitude:o,highPrecision:!0}),f=h.unitsPerMeter,p=h.unitsPerMeter2,d=fU(t);d[0]+=l*(f[0]+p[0]*u),d[1]+=u*(f[1]+p[1]*u);var m=pU(d),g=(a||0)+(c||0);return Number.isFinite(a)||Number.isFinite(c)?[m[0],m[1],g]:m}function vU(t){var e=t.height,n=t.pitch,r=t.bearing,i=t.altitude,o=t.scale,a=t.center,s=void 0===a?null:a,l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return BZ(l,l,[0,0,-i]),ZZ(l,l,-n*sU),UZ(l,l,r*sU),jZ(l,l,[o/=e,o,o]),s&&BZ(l,l,function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}([],s)),l}function yU(t){var e=t.width,n=t.height,r=t.fovy,i=void 0===r?_U(1.5):r,o=t.altitude,a=t.pitch,s=void 0===a?0:a,l=t.nearZMultiplier,u=void 0===l?1:l,c=t.farZMultiplier,h=void 0===c?1:c;void 0!==o&&(i=_U(o));var f=.5*i*sU,p=xU(i),d=s*sU,m=Math.sin(f)*p/Math.sin(Math.min(Math.max(Math.PI/2-d-f,.01),Math.PI-.01));return{fov:2*f,aspect:e/n,focalDistance:p,near:u,far:(Math.sin(d)*m+p)*h}}function _U(t){return 2*Math.atan(.5/t)*lU}function xU(t){return.5/Math.tan(.5*t*sU)}function bU(t,e){var n=(0,i.Z)(t,3),r=n[0],o=n[1],a=n[2],s=void 0===a?0:a;return iU(Number.isFinite(r)&&Number.isFinite(o)&&Number.isFinite(s)),tU(e,[r,o,s,1])}function wU(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=(0,i.Z)(t,3),o=r[0],a=r[1],s=r[2];if(iU(Number.isFinite(o)&&Number.isFinite(a),"invalid pixel coordinate"),Number.isFinite(s)){var l=tU(e,[o,a,s,1]);return l}var u=tU(e,[o,a,0,1]),c=tU(e,[o,a,1,1]),h=u[2],f=c[2],p=h===f?0:((n||0)-h)/(f-h);return HZ([],u,c,p)}function kU(t){var e=t.width,n=t.height,r=t.bounds,o=t.minExtent,a=void 0===o?0:o,s=t.maxZoom,l=void 0===s?24:s,u=t.padding,c=void 0===u?0:u,h=t.offset,f=void 0===h?[0,0]:h,p=(0,i.Z)(r,2),d=(0,i.Z)(p[0],2),m=d[0],g=d[1],v=(0,i.Z)(p[1],2),y=v[0],_=v[1];if(Number.isFinite(c)){c={top:c,bottom:c,left:c,right:c}}else iU(Number.isFinite(c.top)&&Number.isFinite(c.bottom)&&Number.isFinite(c.left)&&Number.isFinite(c.right));var x=fU([m,nU(_,-85.051129,hU)]),b=fU([y,nU(g,-85.051129,hU)]),w=[Math.max(Math.abs(b[0]-x[0]),a),Math.max(Math.abs(b[1]-x[1]),a)],k=[e-c.left-c.right-2*Math.abs(f[0]),n-c.top-c.bottom-2*Math.abs(f[1])];iU(k[0]>0&&k[1]>0);var S=k[0]/w[0],E=k[1]/w[1],I=(c.right-c.left)/2/S,C=(c.bottom-c.top)/2/E,A=pU([(b[0]+x[0])/2+I,(b[1]+x[1])/2+C]),P=Math.min(l,rU(Math.abs(Math.min(S,E))));return iU(Number.isFinite(P)),{longitude:A[0],latitude:A[1],zoom:P}}var SU=Math.PI/180;function EU(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t.width,o=t.height,a=t.unproject,s={targetZ:r},l=a([0,o],s),u=a([i,o],s),c=t.fovy?.5*t.fovy*SU:Math.atan(.5/t.altitude),h=(90-t.pitch)*SU;return c>h-.01?(e=IU(t,0,r),n=IU(t,i,r)):(e=a([0,0],s),n=a([i,0],s)),[l,u,n,e]}function IU(t,e,n){var r=t.pixelUnprojectionMatrix,i=tU(r,[e,0,1,1]),o=tU(r,[e,t.height,1,1]),a=pU(HZ([],i,o,(n*t.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2])));return a[2]=n,a}var CU={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(CU,"IDENTITY",{get:function(){return iZ.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0}});var AU={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},PU={common:0,meters:1,pixels:2},TU={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},MU="draw",LU="mask",RU=Math.PI/180,NU=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],OU=[0,0,0],zU={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]},DU=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.Z)(this,t);var n=e.id,r=void 0===n?null:n,i=e.x,o=void 0===i?0:i,a=e.y,l=void 0===a?0:a,u=e.width,c=void 0===u?1:u,h=e.height,f=void 0===h?1:h;this.id=r||this.constructor.displayName||"viewport",this.x=o,this.y=l,this.width=c||1,this.height=f||1,this._frustumPlanes={},this._initViewMatrix(e),this._initProjectionMatrix(e),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,l.Z)(t,[{key:"metersPerPixel",get:function(){return this.distanceScales.metersPerUnit[2]/this.scale}},{key:"projectionMode",get:function(){return this.isGeospatial?this.zoom<12?AU.WEB_MERCATOR:AU.WEB_MERCATOR_AUTO_OFFSET:AU.IDENTITY}},{key:"equals",value:function(e){return e instanceof t&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&dZ(e.projectionMatrix,this.projectionMatrix)&&dZ(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,o=this.projectPosition(t),a=bU(o,this.pixelProjectionMatrix),s=(0,i.Z)(a,2),l=s[0],u=s[1],c=r?u:this.height-u;return 2===t.length?[l,c]:[l,c,a[2]]}},{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,o=e.targetZ,a=(0,i.Z)(t,3),s=a[0],l=a[1],u=a[2],c=r?l:this.height-l,h=o&&o*this.distanceScales.unitsPerMeter[2],f=wU([s,c,u],this.pixelUnprojectionMatrix,h),p=this.unprojectPosition(f),d=(0,i.Z)(p,3),m=d[0],g=d[1],v=d[2];return Number.isFinite(u)?[m,g,v]:Number.isFinite(o)?[m,g,o]:[m,g]}},{key:"projectPosition",value:function(t){var e=this.projectFlat(t),n=(0,i.Z)(e,2);return[n[0],n[1],(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}},{key:"unprojectPosition",value:function(t){var e=this.unprojectFlat(t),n=(0,i.Z)(e,2);return[n[0],n[1],(t[2]||0)*this.distanceScales.metersPerUnit[2]]}},{key:"projectFlat",value:function(t){if(this.isGeospatial){var e=fU(t);return e[1]=fZ(e[1],-318,830),e}return t}},{key:"unprojectFlat",value:function(t){return this.isGeospatial?pU(t):t}},{key:"getBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={targetZ:t.z||0},n=this.unproject([0,0],e),r=this.unproject([this.width,0],e),i=this.unproject([0,this.height],e),o=this.unproject([this.width,this.height],e);return[Math.min(n[0],r[0],i[0],o[0]),Math.min(n[1],r[1],i[1],o[1]),Math.max(n[0],r[0],i[0],o[0]),Math.max(n[1],r[1],i[1],o[1])]}},{key:"getDistanceScales",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?mU({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}},{key:"containsPixel",value:function(t){var e=t.x,n=t.y,r=t.width,i=void 0===r?1:r,o=t.height,a=void 0===o?1:o;return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+a}},{key:"getFrustumPlanes",value:function(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,{left:RZ((t=this.viewProjectionMatrix)[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:RZ(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:RZ(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:RZ(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:RZ(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:RZ(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}),this._frustumPlanes;var t}},{key:"panByPosition",value:function(t,e){return null}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"getCameraDirection",value:function(){return this.cameraDirection}},{key:"getCameraUp",value:function(){return this.cameraUp}},{key:"_createProjectionMatrix",value:function(t){var e=t.orthographic,n=t.fovyRadians,r=t.aspect,i=t.focalDistance,o=t.near,a=t.far;return e?(new QZ).orthographic({fovy:n,aspect:r,focalDistance:i,near:o,far:a}):(new QZ).perspective({fovy:n,aspect:r,near:o,far:a})}},{key:"_initViewMatrix",value:function(t){var e=t.viewMatrix,n=void 0===e?NU:e,r=t.longitude,i=void 0===r?null:r,o=t.latitude,a=void 0===o?null:o,s=t.zoom,l=void 0===s?null:s,u=t.position,c=void 0===u?null:u,h=t.modelMatrix,f=void 0===h?null:h,p=t.focalDistance,d=void 0===p?1:p,m=t.distanceScales,g=void 0===m?null:m;this.isGeospatial=Number.isFinite(a)&&Number.isFinite(i),this.zoom=l,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?dU({latitude:a})+Math.log2(d):0);var v=Math.pow(2,this.zoom);this.scale=v,this.distanceScales=this.isGeospatial?mU({latitude:a,longitude:i}):g||zU,this.focalDistance=d,this.distanceScales.metersPerUnit=new TZ(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new TZ(this.distanceScales.unitsPerMeter),this.position=OU,this.meterOffset=OU,c&&(this.position=c,this.modelMatrix=f,this.meterOffset=f?f.transformVector(c):c),this.isGeospatial?(this.longitude=i,this.latitude=a,this.center=this._getCenterInWorld({longitude:i,latitude:a})):this.center=c?this.projectPosition(c):[0,0,0],this.viewMatrixUncentered=n,this.viewMatrix=(new QZ).multiplyRight(this.viewMatrixUncentered).translate(new TZ(this.center||OU).negate())}},{key:"_getCenterInWorld",value:function(t){var e=t.longitude,n=t.latitude,r=this.meterOffset,i=this.distanceScales,o=new TZ(this.projectPosition([e,n,0]));if(r){var a=new TZ(r).scale(i.unitsPerMeter);o.add(a)}return o}},{key:"_initProjectionMatrix",value:function(t){var e=t.projectionMatrix,n=void 0===e?null:e,r=t.orthographic,i=void 0!==r&&r,o=t.fovyRadians,a=t.fovy,s=void 0===a?75:a,l=t.near,u=void 0===l?.1:l,c=t.far,h=void 0===c?1e3:c,f=t.focalDistance,p=void 0===f?1:f;this.projectionMatrix=n||this._createProjectionMatrix({orthographic:i,fovyRadians:o||s*RU,aspect:this.width/this.height,focalDistance:p,near:u,far:h})}},{key:"_initPixelMatrices",value:function(){var t,e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];FZ(e,e,this.projectionMatrix),FZ(e,e,this.viewMatrix),this.viewProjectionMatrix=e,this.viewMatrixInverse=DZ([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=[(t=this.viewMatrixInverse)[12],t[13],t[14]];var n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];jZ(n,n,[this.width/2,-this.height/2,1]),BZ(n,n,[1,-1,0]),FZ(r,n,this.viewProjectionMatrix),this.pixelProjectionMatrix=r,this.viewportMatrix=n,this.pixelUnprojectionMatrix=DZ([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||iZ.warn("Pixel project matrix not invertible")()}}]),t}();DU.displayName="Viewport";var FU=/([0-9]+\.?[0-9]*)(%|px)/;function BU(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":var e=FU.exec(t);if(e&&e.length>=3){var n="%"===e[2],r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function jU(t,e){return t.relative?Math.round(t.position*e):t.position}function ZU(t,e){if(t===e)return!0;if(!t||!e)return!1;for(var n in t){var r=t[n],i=e[n];if(!(r===i||Array.isArray(r)&&Array.isArray(i)&&ZU(r,i)))return!1}return!0}function UU(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}var VU=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.Z)(this,t);var n=e.id,r=void 0===n?null:n,i=e.x,o=void 0===i?0:i,a=e.y,l=void 0===a?0:a,u=e.width,c=void 0===u?"100%":u,h=e.height,f=void 0===h?"100%":h,p=e.viewportInstance,d=e.type,m=void 0===d?DU:d;UU(!p||p instanceof DU),this.viewportInstance=p,this.id=r||this.constructor.displayName||"view",this.type=m,this.props=iS(iS({},e),{},{id:this.id}),this._parseDimensions({x:o,y:l,width:c,height:f}),this.equals=this.equals.bind(this),Object.seal(this)}return(0,l.Z)(t,[{key:"equals",value:function(t){return this===t||(this.viewportInstance?t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance):ZU(this.props,t.props))}},{key:"makeViewport",value:function(t){var e=t.width,n=t.height,r=t.viewState;if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);var i=this.getDimensions({width:e,height:n});return this._getViewport(r,i)}},{key:"getViewStateId",value:function(){switch(typeof this.props.viewState){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function(t){if(this.props.viewState&&"object"===typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;var e=iS({},t);for(var n in this.props.viewState)"id"!==n&&(e[n]=this.props.viewState[n]);return e}return t}},{key:"getDimensions",value:function(t){var e=t.width,n=t.height;return{x:jU(this._x,e),y:jU(this._y,n),width:jU(this._width,e),height:jU(this._height,n)}}},{key:"_getControllerProps",value:function(t){var e=this.props.controller;return e?!0===e?t:("function"===typeof e&&(e={type:e}),iS(iS({},t),e)):null}},{key:"_getViewport",value:function(t,e){return new(0,this.type)(iS(iS(iS({},t),this.props),e))}},{key:"_parseDimensions",value:function(t){var e=t.x,n=t.y,r=t.width,i=t.height;this._x=BU(e),this._y=BU(n),this._width=BU(r),this._height=BU(i)}}]),t}(),qU=n(1752),GU=n(1120),WU=Math.PI/180;function HU(t){return 512/4003e4/Math.cos(t*WU)}var XU=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.Z)(this,n);var i,o=r.latitude,a=void 0===o?0:o,l=r.longitude,u=void 0===l?0:l,c=r.zoom,h=void 0===c?11:c,f=r.pitch,p=void 0===f?0:f,d=r.bearing,m=void 0===d?0:d,g=r.nearZMultiplier,v=void 0===g?.1:g,y=r.farZMultiplier,_=void 0===y?1.01:y,x=r.orthographic,b=void 0!==x&&x,w=r.projectionMatrix,k=r.repeat,S=void 0!==k&&k,E=r.worldOffset,I=void 0===E?0:E,C=r.legacyMeterSizes,A=void 0!==C&&C,P=r.width,T=r.height,M=r.altitude,L=void 0===M?1.5:M,R=Math.pow(2,h);P=P||1,T=T||1;var N=null;w?i=_U(L=w[5]/2):(r.fovy?L=xU(i=r.fovy):i=_U(L),N=yU({width:P,height:T,pitch:p,fovy:i,nearZMultiplier:v,farZMultiplier:_}));var O=vU({height:T,pitch:p,bearing:m,scale:R,altitude:L});if(I){var z=(new QZ).translate([512*I,0,0]);O=z.multiplyLeft(O)}return(t=e.call(this,iS(iS(iS({},r),{},{width:P,height:T,viewMatrix:O,longitude:u,latitude:a,zoom:h},N),{},{fovy:i,focalDistance:L}))).latitude=a,t.longitude=u,t.zoom=h,t.pitch=p,t.bearing=m,t.altitude=L,t.fovy=i,t.orthographic=b,t._subViewports=S?[]:null,t._pseudoMeters=A,Object.freeze((0,Fo.Z)(t)),t}return(0,l.Z)(n,[{key:"subViewports",get:function(){if(this._subViewports&&!this._subViewports.length)for(var t=this.getBounds(),e=Math.floor((t[0]+180)/360),r=Math.ceil((t[2]-180)/360),i=e;i<=r;i++){var o=i?new n(iS(iS({},this),{},{worldOffset:i})):this;this._subViewports.push(o)}return this._subViewports}},{key:"projectPosition",value:function(t){if(this._pseudoMeters)return(0,qU.Z)((0,GU.Z)(n.prototype),"projectPosition",this).call(this,t);var e=this.projectFlat(t),r=(0,i.Z)(e,2);return[r[0],r[1],(t[2]||0)*HU(t[1])]}},{key:"unprojectPosition",value:function(t){if(this._pseudoMeters)return(0,qU.Z)((0,GU.Z)(n.prototype),"unprojectPosition",this).call(this,t);var e=this.unprojectFlat(t),r=(0,i.Z)(e,2),o=r[0],a=r[1];return[o,a,(t[2]||0)/HU(a)]}},{key:"addMetersToLngLat",value:function(t,e){return gU(t,e)}},{key:"panByPosition",value:function(t,e){var n=wU(e,this.pixelUnprojectionMatrix),r=GZ([],this.projectFlat(t),WZ([],n)),o=GZ([],this.center,r),a=this.unprojectFlat(o),s=(0,i.Z)(a,2);return{longitude:s[0],latitude:s[1]}}},{key:"getBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=EU(this,t.z||0);return[Math.min(e[0][0],e[1][0],e[2][0],e[3][0]),Math.min(e[0][1],e[1][1],e[2][1],e[3][1]),Math.max(e[0][0],e[1][0],e[2][0],e[3][0]),Math.max(e[0][1],e[1][1],e[2][1],e[3][1])]}},{key:"fitBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=kU(iS({width:r,height:i,bounds:t},e)),a=o.longitude,s=o.latitude,l=o.zoom;return new n({width:r,height:i,longitude:a,latitude:s,zoom:l})}}]),n}(DU);function YU(){}XU.displayName="WebMercatorViewport";var $U={onStart:YU,onUpdate:YU,onInterrupt:YU,onEnd:YU},KU=function(){function t(e){(0,s.Z)(this,t),this._inProgress=!1,this._handle=null,this.timeline=e,this.settings={}}return(0,l.Z)(t,[{key:"inProgress",get:function(){return this._inProgress}},{key:"start",value:function(t){this.cancel(),this.settings=iS(iS({},$U),t),this._inProgress=!0,this.settings.onStart(this)}},{key:"end",value:function(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}},{key:"cancel",value:function(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}},{key:"update",value:function(){if(!this._inProgress)return!1;if(null===this._handle){var t=this.timeline,e=this.settings;this._handle=t.addChannel({delay:t.getTime(),duration:e.duration})}return this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0}},{key:"_onUpdate",value:function(){}}]),t}(),JU=function(){},QU=1,tV=2,eV=3,nV={transitionEasing:function(t){return t},transitionInterruption:QU,onTransitionStart:JU,onTransitionInterrupt:JU,onTransitionEnd:JU},rV=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Z)(this,t),this.ControllerState=e,this.props=iS(iS({},nV),n),this.propsInTransition=null,this.transition=new KU(n.timeline),this.onViewStateChange=n.onViewStateChange||JU,this.onStateChange=n.onStateChange||JU,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}return(0,l.Z)(t,[{key:"finalize",value:function(){this.transition.cancel()}},{key:"getViewportInTransition",value:function(){return this.propsInTransition}},{key:"processViewStateChange",value:function(t){var e=!1,n=this.props;if(t=iS(iS({},nV),t),this.props=t,this._shouldIgnoreViewportChange(n,t))return e;if(this._isTransitionEnabled(t)){var r=this.transition.settings,i=r.interruption,o=r.endProps,a=iS(iS({},n),i===tV?o:this.propsInTransition||n);this._triggerTransition(a,t),e=!0}else this.transition.cancel();return e}},{key:"updateTransition",value:function(){this.transition.update()}},{key:"_isTransitionEnabled",value:function(t){var e=t.transitionDuration,n=t.transitionInterpolator;return(e>0||"auto"===e)&&Boolean(n)}},{key:"_isUpdateDueToCurrentTransition",value:function(t){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(t,e){return this.transition.inProgress?this.transition.settings.interruption===eV||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}},{key:"_triggerTransition",value:function(t,e){var n=new this.ControllerState(t),r=new this.ControllerState(e).shortestPathFrom(n),i=e.transitionInterpolator,o=i.getDuration?i.getDuration(t,e):e.transitionDuration;if(0!==o){var a=e.transitionInterpolator.initializeProps(t,r);this.propsInTransition={},this.duration=o,this.transition.start({duration:o,easing:e.transitionEasing,interpolator:e.transitionInterpolator,interruption:e.transitionInterruption,startProps:a.start,endProps:a.end,onStart:e.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(e.onTransitionInterrupt),onEnd:this._onTransitionEnd(e.onTransitionEnd)}),this.onStateChange({inTransition:!0}),this.updateTransition()}}},{key:"_onTransitionEnd",value:function(t){var e=this;return function(n){e.propsInTransition=null,e.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),t(n)}}},{key:"_onTransitionUpdate",value:function(t){var e=t.time,n=t.settings,r=n.interpolator,i=n.startProps,o=n.endProps,a=n.duration,s=(0,n.easing)(e/a),l=r.interpolateProps(i,o,s);this.propsInTransition=new this.ControllerState(iS(iS({},this.props),l)).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}}]),t}(),iV=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.Z)(this,t),Array.isArray(e)&&(e={compare:e,extract:e,required:e});var n=e,r=n.compare,i=n.extract,o=n.required;this._propsToCompare=r,this._propsToExtract=i,this._requiredProps=o}return(0,l.Z)(t,[{key:"arePropsEqual",value:function(t,e){var n,r=(0,ch.Z)(this._propsToCompare||Object.keys(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!(i in t)||!(i in e)||!dZ(t[i],e[i]))return!1}}catch(o){r.e(o)}finally{r.f()}return!0}},{key:"initializeProps",value:function(t,e){var n;if(this._propsToExtract){var r,i={},o={},a=(0,ch.Z)(this._propsToExtract);try{for(a.s();!(r=a.n()).done;){var s=r.value;i[s]=t[s],o[s]=e[s]}}catch(l){a.e(l)}finally{a.f()}n={start:i,end:o}}else n={start:t,end:e};return this._checkRequiredProps(n.start),this._checkRequiredProps(n.end),n}},{key:"interpolateProps",value:function(t,e,n){return e}},{key:"getDuration",value:function(t,e){return e.transitionDuration}},{key:"_checkRequiredProps",value:function(t){this._requiredProps&&this._requiredProps.forEach((function(e){var n=t[e];UU(Number.isFinite(n)||Array.isArray(n),"".concat(e," is required for transition"))}))}}]),t}(),oV=["longitude","latitude","zoom","bearing","pitch"],aV=["longitude","latitude","zoom"],sV=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.Z)(this,n);var i=Array.isArray(r)?r:r.transitionProps;return(t=e.call(this,i||{compare:oV,extract:oV,required:aV})).opts=r,t}return(0,l.Z)(n,[{key:"initializeProps",value:function(t,e){var r=(0,qU.Z)((0,GU.Z)(n.prototype),"initializeProps",this).call(this,t,e),i=this.opts,o=i.makeViewport,a=i.around;if(o&&a){var s=o(t),l=o(e),u=s.unproject(a);r.start.around=a,Object.assign(r.end,{around:l.project(u),aroundPosition:u,width:e.width,height:e.height})}return r}},{key:"interpolateProps",value:function(t,e,n){var r,i={},o=(0,ch.Z)(this._propsToExtract);try{for(o.s();!(r=o.n()).done;){var a=r.value;i[a]=pZ(t[a]||0,e[a]||0,n)}}catch(l){o.e(l)}finally{o.f()}if(e.aroundPosition){var s=this.opts.makeViewport(iS(iS({},e),i));Object.assign(i,s.panByPosition(e.aroundPosition,pZ(t.around,e.around,n)))}return i}}]),n}(iV),lV={transitionDuration:0},uV={transitionDuration:300,transitionEasing:function(t){return t},transitionInterruption:QU},cV=function(t){return 1-(1-t)*(1-t)},hV=["wheel"],fV=["panstart","panmove","panend"],pV=["pinchstart","pinchmove","pinchend"],dV=["tripanstart","tripanmove","tripanend"],mV=["doubletap"],gV=["keydown"],vV=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Z)(this,t),(0,c.Z)(this,"ControllerState",void 0),(0,c.Z)(this,"controllerState",null),(0,c.Z)(this,"controllerStateProps",null),(0,c.Z)(this,"transitionManager",void 0),(0,c.Z)(this,"_transition",void 0),(0,c.Z)(this,"_events",null),(0,c.Z)(this,"eventManager",null),(0,c.Z)(this,"_interactionState",{isDragging:!1}),(0,c.Z)(this,"_customEvents",[]),(0,c.Z)(this,"onViewStateChange",null),(0,c.Z)(this,"onStateChange",null),(0,c.Z)(this,"makeViewport",void 0),(0,c.Z)(this,"_eventStartBlocked",void 0),(0,c.Z)(this,"_state",void 0),(0,c.Z)(this,"_panMove",void 0),(0,c.Z)(this,"invertPan",void 0),(0,c.Z)(this,"dragMode","rotate"),(0,c.Z)(this,"inertia",0),(0,c.Z)(this,"scrollZoom",!0),(0,c.Z)(this,"dragPan",!0),(0,c.Z)(this,"dragRotate",!0),(0,c.Z)(this,"doubleClickZoom",!0),(0,c.Z)(this,"touchZoom",!0),(0,c.Z)(this,"touchRotate",!1),(0,c.Z)(this,"keyboard",!0),this.ControllerState=e,this.transitionManager=new rV(e,iS(iS({},n),{},{onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}));var r=this.linearTransitionProps;this._transition=r&&iS(iS({},uV),{},{transitionInterpolator:new sV({transitionProps:r})}),this.handleEvent=this.handleEvent.bind(this),this.setProps(n)}return(0,l.Z)(t,[{key:"linearTransitionProps",get:function(){return null}},{key:"events",set:function(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.setProps(this.controllerStateProps)}},{key:"finalize",value:function(){for(var t in this._events)this._events[t]&&this.eventManager.off(t,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function(t){var e=this.ControllerState;this.controllerState=new e(iS(iS({makeViewport:this.makeViewport},this.controllerStateProps),this._state));var n=this._eventStartBlocked;switch(t.type){case"panstart":return!n&&this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return!n&&this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return!n&&this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}},{key:"getCenter",value:function(t){var e=this.controllerStateProps,n=e.x,r=e.y,i=t.offsetCenter;return[i.x-n,i.y-r]}},{key:"isPointInBounds",value:function(t,e){var n=this.controllerStateProps,r=n.width,i=n.height;if(e&&e.handled)return!1;var o=t[0]>=0&&t[0]<=r&&t[1]>=0&&t[1]<=i;return o&&e&&e.stopPropagation(),o}},{key:"isFunctionKeyPressed",value:function(t){var e=t.srcEvent;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},{key:"isDragging",value:function(){return this._interactionState.isDragging}},{key:"blockEvents",value:function(t){var e=this,n=setTimeout((function(){e._eventStartBlocked===n&&(e._eventStartBlocked=null)}),t);this._eventStartBlocked=n}},{key:"setProps",value:function(t){"onViewStateChange"in t&&(this.onViewStateChange=t.onViewStateChange),"onStateChange"in t&&(this.onStateChange=t.onStateChange),"makeViewport"in t&&(this.makeViewport=t.makeViewport),"dragMode"in t&&(this.dragMode=t.dragMode),this.controllerStateProps=t,"eventManager"in t&&this.eventManager!==t.eventManager&&(this.eventManager=t.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);var e=t.inertia;!0===e&&(e=300),this.inertia=e;var n=t.scrollZoom,r=void 0===n||n,i=t.dragPan,o=void 0===i||i,a=t.dragRotate,s=void 0===a||a,l=t.doubleClickZoom,u=void 0===l||l,c=t.touchZoom,h=void 0===c||c,f=t.touchRotate,p=void 0!==f&&f,d=t.keyboard,m=void 0===d||d,g=Boolean(this.onViewStateChange);this.toggleEvents(hV,g&&r),this.toggleEvents(fV,g&&(o||s)),this.toggleEvents(pV,g&&(h||p)),this.toggleEvents(dV,g&&p),this.toggleEvents(mV,g&&u),this.toggleEvents(gV,g&&m),this.scrollZoom=r,this.dragPan=o,this.dragRotate=s,this.doubleClickZoom=u,this.touchZoom=h,this.touchRotate=p,this.keyboard=m}},{key:"updateTransition",value:function(){this.transitionManager.updateTransition()}},{key:"toggleEvents",value:function(t,e){var n=this;this.eventManager&&t.forEach((function(t){n._events[t]!==e&&(n._events[t]=e,e?n.eventManager.on(t,n.handleEvent):n.eventManager.off(t,n.handleEvent))}))}},{key:"updateViewport",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=iS(iS({},t.getViewportProps()),e),i=this.controllerState!==t;if(this._state=t.getState(),this._setInteractionState(n),i){var o=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:o})}}},{key:"_onTransition",value:function(t){this.onViewStateChange&&(t.interactionState=this._interactionState,this.onViewStateChange(t))}},{key:"_setInteractionState",value:function(t){Object.assign(this._interactionState,t),this.onStateChange&&this.onStateChange(this._interactionState)}},{key:"_onPanStart",value:function(t){var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.isFunctionKeyPressed(t)||t.rightButton;(this.invertPan||"pan"===this.dragMode)&&(n=!n);var r=this.controllerState[n?"panStart":"rotateStart"]({pos:e});return this._panMove=n,this.updateViewport(r,lV,{isDragging:!0}),!0}},{key:"_onPan",value:function(t){return!!this.isDragging()&&(this._panMove?this._onPanMove(t):this._onPanRotate(t))}},{key:"_onPanEnd",value:function(t){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t))}},{key:"_onPanMove",value:function(t){if(!this.dragPan)return!1;var e=this.getCenter(t),n=this.controllerState.pan({pos:e});return this.updateViewport(n,lV,{isDragging:!0,isPanning:!0}),!0}},{key:"_onPanMoveEnd",value:function(t){var e=this.inertia;if(this.dragPan&&e&&t.velocity){var n=this.getCenter(t),r=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],i=this.controllerState.pan({pos:r}).panEnd();this.updateViewport(i,iS(iS({},this._getTransitionProps()),{},{transitionDuration:e,transitionEasing:cV}),{isDragging:!1,isPanning:!0})}else{var o=this.controllerState.panEnd();this.updateViewport(o,null,{isDragging:!1,isPanning:!1})}return!0}},{key:"_onPanRotate",value:function(t){if(!this.dragRotate)return!1;var e=this.getCenter(t),n=this.controllerState.rotate({pos:e});return this.updateViewport(n,lV,{isDragging:!0,isRotating:!0}),!0}},{key:"_onPanRotateEnd",value:function(t){var e=this.inertia;if(this.dragRotate&&e&&t.velocity){var n=this.getCenter(t),r=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],i=this.controllerState.rotate({pos:r}).rotateEnd();this.updateViewport(i,iS(iS({},this._getTransitionProps()),{},{transitionDuration:e,transitionEasing:cV}),{isDragging:!1,isRotating:!0})}else{var o=this.controllerState.rotateEnd();this.updateViewport(o,null,{isDragging:!1,isRotating:!1})}return!0}},{key:"_onWheel",value:function(t){if(!this.scrollZoom)return!1;t.preventDefault();var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.scrollZoom,r=n.speed,i=void 0===r?.01:r,o=n.smooth,a=void 0!==o&&o,s=t.delta,l=2/(1+Math.exp(-Math.abs(s*i)));s<0&&0!==l&&(l=1/l);var u=this.controllerState.zoom({pos:e,scale:l});return this.updateViewport(u,iS(iS({},this._getTransitionProps({around:e})),{},{transitionDuration:a?250:1}),{isZooming:!0,isPanning:!0}),!0}},{key:"_onTriplePanStart",value:function(t){var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.controllerState.rotateStart({pos:e});return this.updateViewport(n,lV,{isDragging:!0}),!0}},{key:"_onTriplePan",value:function(t){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;var e=this.getCenter(t);e[0]-=t.deltaX;var n=this.controllerState.rotate({pos:e});return this.updateViewport(n,lV,{isDragging:!0,isRotating:!0}),!0}},{key:"_onTriplePanEnd",value:function(t){if(!this.isDragging())return!1;var e=this.inertia;if(this.touchRotate&&e&&t.velocityY){var n=this.getCenter(t),r=[n[0],n[1]+=t.velocityY*e/2],i=this.controllerState.rotate({pos:r});this.updateViewport(i,iS(iS({},this._getTransitionProps()),{},{transitionDuration:e,transitionEasing:cV}),{isDragging:!1,isRotating:!0}),this.blockEvents(e)}else{var o=this.controllerState.rotateEnd();this.updateViewport(o,null,{isDragging:!1,isRotating:!1})}return!0}},{key:"_onPinchStart",value:function(t){var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return this._startPinchRotation=t.rotation,this._lastPinchEvent=t,this.updateViewport(n,lV,{isDragging:!0}),!0}},{key:"_onPinch",value:function(t){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;var e=this.controllerState;if(this.touchZoom){var n=t.scale,r=this.getCenter(t);e=e.zoom({pos:r,scale:n})}if(this.touchRotate){var i=t.rotation;e=e.rotate({deltaAngleX:this._startPinchRotation-i})}return this.updateViewport(e,lV,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),this._lastPinchEvent=t,!0}},{key:"_onPinchEnd",value:function(t){if(!this.isDragging())return!1;var e=this.inertia,n=this._lastPinchEvent;if(this.touchZoom&&e&&n&&t.scale!==n.scale){var r=this.getCenter(t),i=this.controllerState.rotateEnd(),o=Math.log2(t.scale),a=(o-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),s=Math.pow(2,o+a*e/2);i=i.zoom({pos:r,scale:s}).zoomEnd(),this.updateViewport(i,iS(iS({},this._getTransitionProps({around:r})),{},{transitionDuration:e,transitionEasing:cV}),{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(e)}else{var l=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(l,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return this._startPinchRotation=null,this._lastPinchEvent=null,!0}},{key:"_onDoubleTap",value:function(t){if(!this.doubleClickZoom)return!1;var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.isFunctionKeyPressed(t),r=this.controllerState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps({around:e}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}},{key:"_onKeyDown",value:function(t){if(!this.keyboard)return!1;var e,n=this.isFunctionKeyPressed(t),r=this.keyboard,i=r.zoomSpeed,o=r.moveSpeed,a=r.rotateSpeedX,s=r.rotateSpeedY,l=this.controllerState,u={};switch(t.srcEvent.code){case"Minus":e=n?l.zoomOut(i).zoomOut(i):l.zoomOut(i),u.isZooming=!0;break;case"Equal":e=n?l.zoomIn(i).zoomIn(i):l.zoomIn(i),u.isZooming=!0;break;case"ArrowLeft":n?(e=l.rotateLeft(a),u.isRotating=!0):(e=l.moveLeft(o),u.isPanning=!0);break;case"ArrowRight":n?(e=l.rotateRight(a),u.isRotating=!0):(e=l.moveRight(o),u.isPanning=!0);break;case"ArrowUp":n?(e=l.rotateUp(s),u.isRotating=!0):(e=l.moveUp(o),u.isPanning=!0);break;case"ArrowDown":n?(e=l.rotateDown(s),u.isRotating=!0):(e=l.moveDown(o),u.isPanning=!0);break;default:return!1}return this.updateViewport(e,this._getTransitionProps(),u),!0}},{key:"_getTransitionProps",value:function(t){var e=this._transition;return e?t?iS(iS({},e),{},{transitionInterpolator:new sV(iS(iS({},t),{},{transitionProps:this.linearTransitionProps,makeViewport:this.controllerState.makeViewport}))}):e:lV}}]),t}(),yV=function(){function t(e){(0,s.Z)(this,t),(0,c.Z)(this,"_viewportProps",void 0),(0,c.Z)(this,"_state",void 0),this._viewportProps=this._applyConstraints(e)}return(0,l.Z)(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getState",value:function(){return this._state}},{key:"shortestPathFrom",value:function(t){return this._viewportProps}},{key:"_applyConstraints",value:function(t){return t}}]),t}(),_V={pitch:0,bearing:0,altitude:1.5,minZoom:0,maxZoom:20,minPitch:0,maxPitch:60,position:[0,0,0]},xV=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){var r;(0,s.Z)(this,n);var i=(t=iS(iS({},_V),t))||{},o=i.makeViewport,a=i.width,l=i.height,u=i.latitude,c=i.longitude,h=i.zoom,f=i.bearing,p=i.pitch,d=i.altitude,m=i.position,g=i.maxZoom,v=i.minZoom,y=i.maxPitch,_=i.minPitch,x=i.startPanLngLat,b=i.startZoomLngLat,w=i.startRotatePos,k=i.startBearing,S=i.startPitch,E=i.startZoom,I=i.normalize;return UU(Number.isFinite(c)),UU(Number.isFinite(u)),UU(Number.isFinite(h)),(r=e.call(this,{width:a,height:l,latitude:u,longitude:c,zoom:h,bearing:f,pitch:p,altitude:d,maxZoom:g,minZoom:v,maxPitch:y,minPitch:_,normalize:I,position:m}))._state={startPanLngLat:x,startZoomLngLat:b,startRotatePos:w,startBearing:k,startPitch:S,startZoom:E},r.makeViewport=o,r}return(0,l.Z)(n,[{key:"panStart",value:function(t){var e=t.pos;return this._getUpdatedState({startPanLngLat:this._unproject(e)})}},{key:"pan",value:function(t){var e=t.pos,n=t.startPos,r=this._state.startPanLngLat||this._unproject(n);if(!r)return this;var i=this.makeViewport(this._viewportProps).panByPosition(r,e);return this._getUpdatedState(i)}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(t){var e=t.pos;return this._getUpdatedState({startRotatePos:e,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(t){var e,n=t.pos,r=t.deltaAngleX,i=void 0===r?0:r,o=t.deltaAngleY,a=void 0===o?0:o,s=this._state,l=s.startRotatePos,u=s.startBearing,c=s.startPitch;return l&&Number.isFinite(u)&&Number.isFinite(c)?(e=n?this._calculateNewPitchAndBearing(iS(iS({},this._getRotationParams(n,l)),{},{startBearing:u,startPitch:c})):{bearing:u+i,pitch:c+a},this._getUpdatedState(e)):this}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,n=t.startPos,r=t.scale,i=this._state,o=i.startZoom,a=i.startZoomLngLat;Number.isFinite(o)||(o=this._viewportProps.zoom,a=this._unproject(n)||this._unproject(e));var s=this._calculateNewZoom({scale:r,startZoom:o}),l=this.makeViewport(iS(iS({},this._viewportProps),{},{zoom:s}));return this._getUpdatedState(iS({zoom:s},l.panByPosition(a,e)))}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(t)}},{key:"zoomOut",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(1/t)}},{key:"moveLeft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([t,0])}},{key:"moveRight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([-t,0])}},{key:"moveUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,t])}},{key:"moveDown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,-t])}},{key:"rotateLeft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this._viewportProps.bearing-t})}},{key:"rotateRight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this._viewportProps.bearing+t})}},{key:"rotateUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this._viewportProps.pitch+t})}},{key:"rotateDown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this._viewportProps.pitch-t})}},{key:"shortestPathFrom",value:function(t){var e=t.getViewportProps(),n=iS({},this._viewportProps),r=n.bearing,i=n.longitude;return Math.abs(r-e.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-e.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}},{key:"_zoomFromCenter",value:function(t){var e=this._viewportProps,n=e.width,r=e.height;return this.zoom({pos:[n/2,r/2],scale:t})}},{key:"_panFromCenter",value:function(t){var e=this._viewportProps,n=e.width,r=e.height;return this.pan({startPos:[n/2,r/2],pos:[n/2+t[0],r/2+t[1]]})}},{key:"_getUpdatedState",value:function(t){return new this.constructor(iS(iS(iS({makeViewport:this.makeViewport},this._viewportProps),this._state),t))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom;t.zoom=fZ(r,n,e);var i=t.maxPitch,o=t.minPitch,a=t.pitch;t.pitch=fZ(a,o,i);var s=t.normalize;return(void 0===s||s)&&Object.assign(t,function(t){var e=t.width,n=t.height,r=t.longitude,i=t.latitude,o=t.zoom,a=t.pitch,s=void 0===a?0:a,l=t.bearing,u=void 0===l?0:l;(r<-180||r>180)&&(r=eU(r+180,360)-180),(u<-180||u>180)&&(u=eU(u+180,360)-180);var c=rU(n/512);if(o<=c)o=c,i=0;else{var h=n/2/Math.pow(2,o),f=pU([0,h])[1];if(i<f)i=f;else{var p=pU([0,512-h])[1];i>p&&(i=p)}}return{width:e,height:n,longitude:r,latitude:i,zoom:o,pitch:s,bearing:u}}(t)),t}},{key:"_unproject",value:function(t){var e=this.makeViewport(this._viewportProps);return t&&e.unproject(t)}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,n=t.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom;return fZ(n+Math.log2(e),o,i)}},{key:"_calculateNewPitchAndBearing",value:function(t){var e=t.deltaScaleX,n=t.deltaScaleY,r=t.startBearing,i=t.startPitch;n=fZ(n,-1,1);var o=this._viewportProps,a=o.minPitch,s=o.maxPitch,l=i;return n>0?l=i+n*(s-i):n<0&&(l=i-n*(a-i)),{pitch:l,bearing:r+180*e}}},{key:"_getRotationParams",value:function(t,e){var n=t[0]-e[0],r=t[1]-e[1],i=t[1],o=e[1],a=this._viewportProps,s=a.width,l=a.height,u=n/s,c=0;return r>0?Math.abs(l-o)>5&&(c=r/(o-l)*1.2):r<0&&o>5&&(c=1-i/o),{deltaScaleX:u,deltaScaleY:c=Math.min(1,Math.max(-1,c))}}}]),n}(yV),bV=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){return(0,s.Z)(this,n),t.dragMode=t.dragMode||"pan",e.call(this,xV,t)}return(0,l.Z)(n,[{key:"setProps",value:function(t){t.position=t.position||[0,0,0];var e=this.controllerStateProps;(0,qU.Z)((0,GU.Z)(n.prototype),"setProps",this).call(this,t),(!e||e.height!==t.height)&&this.updateViewport(new this.ControllerState(iS(iS({makeViewport:this.makeViewport},this.controllerStateProps),this._state)))}},{key:"linearTransitionProps",get:function(){return["longitude","latitude","zoom","bearing","pitch","position"]}}]),n}(vV),wV=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){return(0,s.Z)(this,n),e.call(this,iS(iS({},t),{},{type:XU}))}return(0,l.Z)(n,[{key:"controller",get:function(){return this._getControllerProps({type:bV})}}]),n}(VU);wV.displayName="MapView";var kV=1,SV=1,EV=function(){function t(){(0,s.Z)(this,t),this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}return(0,l.Z)(t,[{key:"addChannel",value:function(t){var e=t.delay,n=void 0===e?0:e,r=t.duration,i=void 0===r?Number.POSITIVE_INFINITY:r,o=t.rate,a=void 0===o?1:o,s=t.repeat,l=kV++,u={time:0,delay:n,duration:i,rate:a,repeat:void 0===s?1:s};return this._setChannelTime(u,this.time),this.channels.set(l,u),l}},{key:"removeChannel",value:function(t){this.channels.delete(t);var e,n=(0,ch.Z)(this.animations);try{for(n.s();!(e=n.n()).done;){var r=(0,i.Z)(e.value,2),o=r[0];r[1].channel===t&&this.detachAnimation(o)}}catch(a){n.e(a)}finally{n.f()}}},{key:"isFinished",value:function(t){var e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}},{key:"getTime",value:function(t){if(void 0===t)return this.time;var e=this.channels.get(t);return void 0===e?-1:e.time}},{key:"setTime",value:function(t){this.time=Math.max(0,t);var e,n=this.channels.values(),r=(0,ch.Z)(n);try{for(r.s();!(e=r.n()).done;){var i=e.value;this._setChannelTime(i,this.time)}}catch(h){r.e(h)}finally{r.f()}var o,a=this.animations.values(),s=(0,ch.Z)(a);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=l.animation,c=l.channel;u.setTime(this.getTime(c))}}catch(h){s.e(h)}finally{s.f()}}},{key:"play",value:function(){this.playing=!0}},{key:"pause",value:function(){this.playing=!1,this.lastEngineTime=-1}},{key:"reset",value:function(){this.setTime(0)}},{key:"attachAnimation",value:function(t,e){var n=SV++;return this.animations.set(n,{animation:t,channel:e}),t.setTime(this.getTime(e)),n}},{key:"detachAnimation",value:function(t){this.animations.delete(t)}},{key:"update",value:function(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}},{key:"_setChannelTime",value:function(t,e){var n=e-t.delay;n>=t.duration*t.repeat?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}]),t}(),IV="Awaiting state",CV="Matched. State transferred from previous layer",AV="Initialized",PV="Discarded. Awaiting garbage collection",TV="No longer matched. Awaiting garbage collection",MV="Finalized! Awaiting garbage collection",LV=Symbol.for("component"),RV=Symbol.for("asyncPropDefaults"),NV=Symbol.for("asyncPropOriginal"),OV=Symbol.for("asyncPropResolved"),zV={};function DV(t){var e;iZ.level>0&&zV[t]&&(e=zV[t]).call.apply(e,arguments)}function FV(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};return Array.isArray(t)?BV(t,e,[]):e(t)?[t]:[]}function BV(t,e,n){for(var r=-1;++r<t.length;){var i=t[r];Array.isArray(i)?BV(i,e,n):e(i)&&n.push(i)}return n}function jV(t){for(var e=t.target,n=t.source,r=t.start,i=void 0===r?0:r,o=t.count,a=void 0===o?1:o,s=n.length,l=a*s,u=0,c=i;u<s;u++)e[c++]=n[u];for(;u<l;)u<l-u?(e.copyWithin(i+u,i,i+u),u*=2):(e.copyWithin(i+u,i,i+l-u),u=l);return e}function ZV(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UV(){var t;if("undefined"!==typeof window&&window.performance)t=window.performance.now();else if("undefined"!==typeof process&&process.hrtime){var e=process.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}var VV=function(){function t(e,n){(0,s.Z)(this,t),ZV(this,"name",void 0),ZV(this,"type",void 0),ZV(this,"sampleSize",1),ZV(this,"time",void 0),ZV(this,"count",void 0),ZV(this,"samples",void 0),ZV(this,"lastTiming",void 0),ZV(this,"lastSampleTime",void 0),ZV(this,"lastSampleCount",void 0),ZV(this,"_count",0),ZV(this,"_time",0),ZV(this,"_samples",0),ZV(this,"_startTime",0),ZV(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}return(0,l.Z)(t,[{key:"setSampleSize",value:function(t){return this.sampleSize=t,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(t){return this._count+=t,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(t){return this._count-=t,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=UV(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime(UV()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),t}(),qV=function(){function t(e){(0,s.Z)(this,t),ZV(this,"id",void 0),ZV(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}return(0,l.Z)(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}},{key:"size",get:function(){return Object.keys(this.stats).length}},{key:"reset",value:function(){for(var t in this.stats)this.stats[t].reset();return this}},{key:"forEach",value:function(t){for(var e in this.stats)t(this.stats[e])}},{key:"getTable",value:function(){var t={};return this.forEach((function(e){t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}},{key:"_initializeStats",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(e){return t._getOrCreate(e)}))}},{key:"_getOrCreate",value:function(t){if(!t||!t.name)return null;var e=t.name,n=t.type;return this.stats[e]||(this.stats[e]=t instanceof VV?t:new VV(e,n)),this.stats[e]}}]),t}(),GV=n(5861),WV=function(t){return"boolean"===typeof t},HV=function(t){return"function"===typeof t},XV=function(t){return null!==t&&"object"===typeof t},YV=function(t){return XV(t)&&t.constructor==={}.constructor},$V=function(t){return t&&"function"===typeof t[Symbol.iterator]},KV=function(t){return t&&"function"===typeof t[Symbol.asyncIterator]},JV=function(t){return"undefined"!==typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json},QV=function(t){return"undefined"!==typeof Blob&&t instanceof Blob},tq=function(t){return function(t){return"undefined"!==typeof ReadableStream&&t instanceof ReadableStream||XV(t)&&HV(t.tee)&&HV(t.cancel)&&HV(t.getReader)}(t)||function(t){return XV(t)&&HV(t.read)&&HV(t.pipe)&&WV(t.readable)}(t)};function eq(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function nq(t){var e;return!!t&&(Array.isArray(t)&&(t=t[0]),Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions))}function rq(t){var e,n,r;return eq(t,"null loader"),eq(nq(t),"invalid loader"),Array.isArray(t)&&(r=t[1],t=iS(iS({},t=t[0]),{},{options:iS(iS({},t.options),r)})),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(n=t)&&void 0!==n&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}var iq="",oq={};function aq(t){for(var e in oq)if(t.startsWith(e)){var n=oq[e];t=t.replace(e,n)}return t.startsWith("http://")||t.startsWith("https://")||(t="".concat(iq).concat(t)),t}var sq=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,lq=/^([-\w.]+\/[-\w.+]+)/;function uq(t){var e=lq.exec(t);return e?e[1]:t}function cq(t){var e=sq.exec(t);return e?e[1]:""}var hq=/\?.*/;function fq(t){if(JV(t)){var e=dq(t.url||"");return{url:e,type:uq(t.headers.get("content-type")||"")||cq(e)}}return QV(t)?{url:dq(t.name||""),type:t.type||""}:"string"===typeof t?{url:dq(t),type:cq(t)}:{url:"",type:""}}function pq(t){return JV(t)?t.headers["content-length"]||-1:QV(t)?t.size:"string"===typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}function dq(t){return t.replace(hq,"")}function mq(t){return gq.apply(this,arguments)}function gq(){return gq=(0,GV.Z)(of().mark((function t(e){var n,r,i,o,a,s,l;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!JV(e)){t.next=2;break}return t.abrupt("return",e);case 2:return n={},(r=pq(e))>=0&&(n["content-length"]=String(r)),i=fq(e),o=i.url,(a=i.type)&&(n["content-type"]=a),t.next=9,bq(e);case 9:return(s=t.sent)&&(n["x-first-bytes"]=s),"string"===typeof e&&(e=(new TextEncoder).encode(e)),l=new Response(e,{headers:n}),Object.defineProperty(l,"url",{value:o}),t.abrupt("return",l);case 15:case"end":return t.stop()}}),t)}))),gq.apply(this,arguments)}function vq(t){return yq.apply(this,arguments)}function yq(){return(yq=(0,GV.Z)(of().mark((function t(e){var n;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ok){t.next=5;break}return t.next=3,_q(e);case 3:throw n=t.sent,new Error(n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _q(t){return xq.apply(this,arguments)}function xq(){return(xq=(0,GV.Z)(of().mark((function t(e){var n,r,i;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): "),t.prev=1,r=e.headers.get("Content-Type"),i=e.statusText,!r.includes("application/json")){t.next=11;break}return t.t0=i,t.t1=" ",t.next=9,e.text();case 9:t.t2=t.sent,i=t.t0+=t.t1.concat.call(t.t1,t.t2);case 11:n=(n+=i).length>60?"".concat(n.slice(60),"..."):n,t.next=17;break;case 15:t.prev=15,t.t3=t.catch(1);case 17:return t.abrupt("return",n);case 18:case"end":return t.stop()}}),t,null,[[1,15]])})))).apply(this,arguments)}function bq(t){return wq.apply(this,arguments)}function wq(){return(wq=(0,GV.Z)(of().mark((function t(e){var n,r,i,o;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=5,"string"!==typeof e){t.next=3;break}return t.abrupt("return","data:,".concat(e.slice(0,n)));case 3:if(!(e instanceof Blob)){t.next=8;break}return r=e.slice(0,5),t.next=7,new Promise((function(t){var e=new FileReader;e.onload=function(e){var n;return t(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.result)},e.readAsDataURL(r)}));case 7:return t.abrupt("return",t.sent);case 8:if(!(e instanceof ArrayBuffer)){t.next=12;break}return i=e.slice(0,n),o=kq(i),t.abrupt("return","data:base64,".concat(o));case 12:return t.abrupt("return",null);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function kq(t){for(var e="",n=new Uint8Array(t),r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}function Sq(t,e){return Eq.apply(this,arguments)}function Eq(){return Eq=(0,GV.Z)(of().mark((function t(e,n){var r;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!==typeof e){t.next=7;break}return e=aq(e),r=n,null!==n&&void 0!==n&&n.fetch&&"function"!==typeof(null===n||void 0===n?void 0:n.fetch)&&(r=n.fetch),t.next=6,fetch(e,r);case 6:case 9:return t.abrupt("return",t.sent);case 7:return t.next=9,mq(e);case 10:case"end":return t.stop()}}),t)}))),Eq.apply(this,arguments)}var Iq=new tZ({id:"loaders.gl"}),Cq=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"log",value:function(){return function(){}}},{key:"info",value:function(){return function(){}}},{key:"warn",value:function(){return function(){}}},{key:"error",value:function(){return function(){}}}]),t}(),Aq=function(){function t(){(0,s.Z)(this,t),(0,c.Z)(this,"console",void 0),this.console=console}return(0,l.Z)(t,[{key:"log",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=this.console.log).bind.apply(t,[this.console].concat(n))}},{key:"info",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=this.console.info).bind.apply(t,[this.console].concat(n))}},{key:"warn",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=this.console.warn).bind.apply(t,[this.console].concat(n))}},{key:"error",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=this.console.error).bind.apply(t,[this.console].concat(n))}}]),t}(),Pq={fetch:null,mimeType:void 0,nothrow:!1,log:new Aq,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},Tq={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function Mq(){globalThis.loaders=globalThis.loaders||{};var t=globalThis.loaders;return t._state=t._state||{},t._state}var Lq=function(){var t=Mq();return t.globalOptions=t.globalOptions||iS({},Pq),t.globalOptions};function Rq(t,e,n,r){return n=n||[],function(t,e){Oq(t,null,Pq,Tq,e);var n,r=(0,ch.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=t&&t[i.id]||{},a=i.options&&i.options[i.id]||{},s=i.deprecatedOptions&&i.deprecatedOptions[i.id]||{};Oq(o,i.id,a,s,e)}}catch(l){r.e(l)}finally{r.f()}}(t,n=Array.isArray(n)?n:[n]),Dq(e,t,r)}function Nq(t,e){var n=Lq(),r=t||n;return"function"===typeof r.fetch?r.fetch:XV(r.fetch)?function(t){return Sq(t,r)}:null!==e&&void 0!==e&&e.fetch?null===e||void 0===e?void 0:e.fetch:Sq}function Oq(t,e,n,r,i){var o=e||"Top level",a=e?"".concat(e,"."):"";for(var s in t){var l=!e&&XV(t[s]);if(!(s in n)&&!("baseUri"===s&&!e)&&!("workerUrl"===s&&e))if(s in r)Iq.warn("".concat(o," loader option '").concat(a).concat(s,"' no longer supported, use '").concat(r[s],"'"))();else if(!l){var u=zq(s,i);Iq.warn("".concat(o," loader option '").concat(a).concat(s,"' not recognized. ").concat(u))()}}}function zq(t,e){var n,r=t.toLowerCase(),i="",o=(0,ch.Z)(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;for(var s in a.options){if(t===s)return"Did you mean '".concat(a.id,".").concat(s,"'?");var l=s.toLowerCase();(r.startsWith(l)||l.startsWith(r))&&(i=i||"Did you mean '".concat(a.id,".").concat(s,"'?"))}}}catch(u){o.e(u)}finally{o.f()}return i}function Dq(t,e,n){var r=iS({},t.options||{});return function(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(r,n),null===r.log&&(r.log=new Cq),Fq(r,Lq()),Fq(r,e),r}function Fq(t,e){for(var n in e)if(n in e){var r=e[n];YV(r)&&YV(t[n])?t[n]=iS(iS({},t[n]),e[n]):t[n]=e[n]}}function Bq(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}var jq="3.1.8";function Zq(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jq;Bq(t,"no worker provided");var n=t.version;return!(!e||!n)}"undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof n.g&&n.g,"undefined"!==typeof document&&document,"object"!==typeof process||"[object process]"!==String(process)||process.browser;var Uq="undefined"!==typeof window&&"undefined"!==typeof window.orientation,Vq="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version),qq=(Vq&&parseFloat(Vq[1]),new Map);function Gq(t){Bq(t.source&&!t.url||!t.source&&t.url);var e=qq.get(t.source||t.url);return e||(t.url&&(e=function(t){if(!t.startsWith("http"))return t;return Wq((e=t,"try {\n  importScripts('".concat(e,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")));var e}(t.url),qq.set(t.url,e)),t.source&&(e=Wq(t.source),qq.set(t.source,e))),Bq(e),e}function Wq(t){var e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function Hq(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=n||new Set;if(t){if(Xq(t))r.add(t);else if(Xq(t.buffer))r.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"===typeof t)for(var i in t)Hq(t[i],e,r)}else;return void 0===n?Array.from(r):[]}function Xq(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!==typeof MessagePort&&t instanceof MessagePort||("undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}var Yq=function(){},$q=function(){function t(e){(0,s.Z)(this,t),(0,c.Z)(this,"name",void 0),(0,c.Z)(this,"source",void 0),(0,c.Z)(this,"url",void 0),(0,c.Z)(this,"terminated",!1),(0,c.Z)(this,"worker",void 0),(0,c.Z)(this,"onMessage",void 0),(0,c.Z)(this,"onError",void 0),(0,c.Z)(this,"_loadableURL","");var n=e.name,r=e.source,i=e.url;Bq(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=Yq,this.onError=function(t){return console.log(t)},this.worker=this._createBrowserWorker()}return(0,l.Z)(t,[{key:"destroy",value:function(){this.onMessage=Yq,this.onError=Yq,this.worker.terminate(),this.terminated=!0}},{key:"isRunning",get:function(){return Boolean(this.onMessage)}},{key:"postMessage",value:function(t,e){e=e||Hq(t),this.worker.postMessage(t,e)}},{key:"_getErrorFromErrorEvent",value:function(t){var e="Failed to load ";return e+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(e+="".concat(t.message," in ")),t.lineno&&(e+=":".concat(t.lineno,":").concat(t.colno)),new Error(e)}},{key:"_createBrowserWorker",value:function(){var t=this;this._loadableURL=Gq({source:this.source,url:this.url});var e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=function(e){e.data?t.onMessage(e.data):t.onError(new Error("No data received"))},e.onerror=function(e){t.onError(t._getErrorFromErrorEvent(e)),t.terminated=!0},e.onmessageerror=function(t){return console.error(t)},e}}],[{key:"isSupported",value:function(){return"undefined"!==typeof Worker}}]),t}(),Kq=function(){function t(e,n){var r=this;(0,s.Z)(this,t),(0,c.Z)(this,"name",void 0),(0,c.Z)(this,"workerThread",void 0),(0,c.Z)(this,"isRunning",void 0),(0,c.Z)(this,"result",void 0),(0,c.Z)(this,"_resolve",void 0),(0,c.Z)(this,"_reject",void 0),this.name=e,this.workerThread=n,this.isRunning=!0,this._resolve=function(){},this._reject=function(){},this.result=new Promise((function(t,e){r._resolve=t,r._reject=e}))}return(0,l.Z)(t,[{key:"postMessage",value:function(t,e){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:e})}},{key:"done",value:function(t){Bq(this.isRunning),this.isRunning=!1,this._resolve(t)}},{key:"error",value:function(t){Bq(this.isRunning),this.isRunning=!1,this._reject(t)}}]),t}(),Jq=function(){function t(e){(0,s.Z)(this,t),(0,c.Z)(this,"name","unnamed"),(0,c.Z)(this,"source",void 0),(0,c.Z)(this,"url",void 0),(0,c.Z)(this,"maxConcurrency",1),(0,c.Z)(this,"maxMobileConcurrency",1),(0,c.Z)(this,"onDebug",(function(){})),(0,c.Z)(this,"reuseWorkers",!0),(0,c.Z)(this,"props",{}),(0,c.Z)(this,"jobQueue",[]),(0,c.Z)(this,"idleQueue",[]),(0,c.Z)(this,"count",0),(0,c.Z)(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}return(0,l.Z)(t,[{key:"destroy",value:function(){this.idleQueue.forEach((function(t){return t.destroy()})),this.isDestroyed=!0}},{key:"setProps",value:function(t){this.props=iS(iS({},this.props),t),void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)}},{key:"startJob",value:function(){var t=(0,GV.Z)(of().mark((function t(e){var n,r,i,o=this,a=arguments;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:function(t,e,n){return t.done(n)},r=a.length>2&&void 0!==a[2]?a[2]:function(t,e){return t.error(e)},i=new Promise((function(t){return o.jobQueue.push({name:e,onMessage:n,onError:r,onStart:t}),o})),this._startQueuedJob(),t.next=6,i;case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_startQueuedJob",value:function(){var t=(0,GV.Z)(of().mark((function t(){var e,n,r;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.jobQueue.length){t.next=2;break}return t.abrupt("return");case 2:if(e=this._getAvailableWorker()){t.next=5;break}return t.abrupt("return");case 5:if(!(n=this.jobQueue.shift())){t.next=18;break}return this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length}),r=new Kq(n.name,e),e.onMessage=function(t){return n.onMessage(r,t.type,t.payload)},e.onError=function(t){return n.onError(r,t)},n.onStart(r),t.prev=12,t.next=15,r.result;case 15:return t.prev=15,this.returnWorkerToQueue(e),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[12,,15,18]])})));return function(){return t.apply(this,arguments)}}()},{key:"returnWorkerToQueue",value:function(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}},{key:"_getAvailableWorker",value:function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;var t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new $q({name:t,source:this.source,url:this.url})}return null}},{key:"_getMaxConcurrency",value:function(){return Uq?this.maxMobileConcurrency:this.maxConcurrency}}]),t}(),Qq={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},tG=function(){function t(e){(0,s.Z)(this,t),(0,c.Z)(this,"props",void 0),(0,c.Z)(this,"workerPools",new Map),this.props=iS({},Qq),this.setProps(e),this.workerPools=new Map}return(0,l.Z)(t,[{key:"destroy",value:function(){var t,e=(0,ch.Z)(this.workerPools.values());try{for(e.s();!(t=e.n()).done;){t.value.destroy()}}catch(n){e.e(n)}finally{e.f()}}},{key:"setProps",value:function(t){this.props=iS(iS({},this.props),t);var e,n=(0,ch.Z)(this.workerPools.values());try{for(n.s();!(e=n.n()).done;){e.value.setProps(this._getWorkerPoolProps())}}catch(r){n.e(r)}finally{n.f()}}},{key:"getWorkerPool",value:function(t){var e=t.name,n=t.source,r=t.url,i=this.workerPools.get(e);return i||((i=new Jq({name:e,source:n,url:r})).setProps(this._getWorkerPoolProps()),this.workerPools.set(e,i)),i}},{key:"_getWorkerPoolProps",value:function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}],[{key:"isSupported",value:function(){return $q.isSupported()}},{key:"getWorkerFarm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t._workerFarm=t._workerFarm||new t({}),t._workerFarm.setProps(e),t._workerFarm}}]),t}();(0,c.Z)(tG,"_workerFarm",void 0);var eG="latest";function nG(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e[t.id]||{},r="".concat(t.id,"-worker.js"),i=n.workerUrl;if(i||"compression"!==t.id||(i=e.workerUrl),"test"===e._workerType&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){var o=t.version;"latest"===o&&(o=eG);var a=o?"@".concat(o):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(a,"/dist/").concat(r)}return Bq(i),i}function rG(t,e){return!!tG.isSupported()&&(t.worker&&(null===e||void 0===e?void 0:e.worker))}function iG(t,e,n,r,i){return oG.apply(this,arguments)}function oG(){return oG=(0,GV.Z)(of().mark((function t(e,n,r,i,o){var a,s,l,u,c,h;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.id,s=nG(e,r),l=tG.getWorkerFarm(r),u=l.getWorkerPool({name:a,url:s}),r=JSON.parse(JSON.stringify(r)),t.next=7,u.startJob("process-on-worker",aG.bind(null,o));case 7:return(c=t.sent).postMessage("process",{input:n,options:r}),t.next=11,c.result;case 11:return h=t.sent,t.next=14,h.result;case 14:return t.abrupt("return",t.sent);case 15:case"end":return t.stop()}}),t)}))),oG.apply(this,arguments)}function aG(t,e,n,r){return sG.apply(this,arguments)}function sG(){return sG=(0,GV.Z)(of().mark((function t(e,n,r,i){var o,a,s,l,u;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=r,t.next="done"===t.t0?3:"error"===t.t0?5:"process"===t.t0?7:20;break;case 3:return n.done(i),t.abrupt("break",21);case 5:return n.error(new Error(i.error)),t.abrupt("break",21);case 7:return o=i.id,a=i.input,s=i.options,t.prev=8,t.next=11,e(a,s);case 11:l=t.sent,n.postMessage("done",{id:o,result:l}),t.next=19;break;case 15:t.prev=15,t.t1=t.catch(8),u=t.t1 instanceof Error?t.t1.message:"unknown error",n.postMessage("error",{id:o,error:u});case 19:return t.abrupt("break",21);case 20:console.warn("parse-with-worker unknown message ".concat(r));case 21:case"end":return t.stop()}}),t,null,[[8,15]])}))),sG.apply(this,arguments)}function lG(t){var e,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(e=t[n]))return e.call(t);if(r&&null!=(e=t[r]))return new uG(e.call(t));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function uG(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return uG=function(t){this.s=t,this.n=t.next},uG.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new uG(t)}n(9521);function cG(t){return t&&"object"===typeof t&&t.isBuffer}function hG(t){if(cG(t))return function(t){return cG(t)?new Uint8Array(t.buffer,t.byteOffset,t.length).slice().buffer:t}(t);if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"===typeof t){var e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"===typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function fG(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=e.map((function(t){return t instanceof ArrayBuffer?new Uint8Array(t):t})),o=i.reduce((function(t,e){return t+e.byteLength}),0),a=new Uint8Array(o),s=0,l=(0,ch.Z)(i);try{for(l.s();!(r=l.n()).done;){var u=r.value;a.set(u,s),s+=u.byteLength}}catch(c){l.e(c)}finally{l.f()}return a.buffer}function pG(t){return dG.apply(this,arguments)}function dG(){return(dG=(0,GV.Z)(of().mark((function t(e){var n,r,i,o,a,s,l;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],r=!1,i=!1,t.prev=3,a=lG(e);case 5:return t.next=7,a.next();case 7:if(!(r=!(s=t.sent).done)){t.next=13;break}l=s.value,n.push(l);case 10:r=!1,t.next=5;break;case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(3),i=!0,o=t.t0;case 19:if(t.prev=19,t.prev=20,!r||null==a.return){t.next=24;break}return t.next=24,a.return();case 24:if(t.prev=24,!i){t.next=27;break}throw o;case 27:return t.finish(24);case 28:return t.finish(19);case 29:return t.abrupt("return",fG.apply(void 0,n));case 30:case"end":return t.stop()}}),t,null,[[3,15,19,29],[20,,24,28]])})))).apply(this,arguments)}var mG=of().mark(gG);function gG(t,e){var n,r,i,o,a;return of().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:n=(null===e||void 0===e?void 0:e.chunkSize)||262144,r=0,i=new TextEncoder;case 3:if(!(r<t.length)){s.next=11;break}return o=Math.min(t.length-r,n),a=t.slice(r,r+o),r+=o,s.next=9,i.encode(a);case 9:s.next=3;break;case 11:case"end":return s.stop()}}),mG)}var vG=of().mark(_G),yG=262144;function _G(t){var e,n,r,i,o,a,s,l=arguments;return of().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:e=l.length>1&&void 0!==l[1]?l[1]:{},n=e.chunkSize,r=void 0===n?yG:n,i=0;case 3:if(!(i<t.byteLength)){u.next=14;break}return o=Math.min(t.byteLength-i,r),a=new ArrayBuffer(o),s=new Uint8Array(t,i,o),new Uint8Array(a).set(s),i+=o,u.next=12,a;case 12:u.next=3;break;case 14:case"end":return u.stop()}}),vG)}function xG(t){this.wrapped=t}function bG(t){return new xG(t)}function wG(t){var e,n;function r(e,n){try{var o=t[e](n),a=o.value,s=a instanceof xG;Promise.resolve(s?a.wrapped:a).then((function(t){s?r("return"===e?"return":"next",t):i(o.done?"return":"normal",t)}),(function(t){r("throw",t)}))}catch(l){i("throw",l)}}function i(t,i){switch(t){case"return":e.resolve({value:i,done:!0});break;case"throw":e.reject(i);break;default:e.resolve({value:i,done:!1})}(e=e.next)?r(e.key,e.arg):n=null}this._invoke=function(t,i){return new Promise((function(o,a){var s={key:t,arg:i,resolve:o,reject:a,next:null};n?n=n.next=s:(e=n=s,r(t,i))}))},"function"!==typeof t.return&&(this.return=void 0)}function kG(t){return function(){return new wG(t.apply(this,arguments))}}wG.prototype["function"===typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},wG.prototype.next=function(t){return this._invoke("next",t)},wG.prototype.throw=function(t){return this._invoke("throw",t)},wG.prototype.return=function(t){return this._invoke("return",t)};var SG=1048576;function EG(){return EG=kG(of().mark((function t(e,n){var r,i,o,a;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=(null===n||void 0===n?void 0:n.chunkSize)||SG,i=0;case 2:if(!(i<e.size)){t.next=12;break}return o=i+r,t.next=6,bG(e.slice(i,o).arrayBuffer());case 6:return a=t.sent,i=o,t.next=10,a;case 10:t.next=2;break;case 12:case"end":return t.stop()}}),t)}))),EG.apply(this,arguments)}"undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof n.g&&n.g,"undefined"!==typeof document&&document;var IG=Boolean("object"!==typeof process||"[object process]"!==String(process)||process.browser),CG="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version);CG&&parseFloat(CG[1]);function AG(t,e){return IG?function(t,e){return PG.apply(this,arguments)}(t,e):function(t,e){return TG.apply(this,arguments)}(t,e)}function PG(){return PG=kG(of().mark((function t(e,n){var r,i,o,a,s,l;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.getReader(),t.prev=1;case 2:return o=i||r.read(),null!==n&&void 0!==n&&n._streamReadAhead&&(i=r.read()),t.next=7,bG(o);case 7:if(a=t.sent,s=a.done,l=a.value,!s){t.next=12;break}return t.abrupt("return");case 12:return t.next=14,hG(l);case 14:t.next=2;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(1),r.releaseLock();case 21:case"end":return t.stop()}}),t,null,[[1,18]])}))),PG.apply(this,arguments)}function TG(){return(TG=kG(of().mark((function t(e,n){var r,i,o,a,s,l;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,i=!1,t.prev=2,a=lG(e);case 4:return t.next=6,bG(a.next());case 6:if(!(r=!(s=t.sent).done)){t.next=13;break}return l=s.value,t.next=10,hG(l);case 10:r=!1,t.next=4;break;case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(2),i=!0,o=t.t0;case 19:if(t.prev=19,t.prev=20,!r||null==a.return){t.next=24;break}return t.next=24,bG(a.return());case 24:if(t.prev=24,!i){t.next=27;break}throw o;case 27:return t.finish(24);case 28:return t.finish(19);case 29:case"end":return t.stop()}}),t,null,[[2,15,19,29],[20,,24,28]])})))).apply(this,arguments)}function MG(t,e){if("string"===typeof t)return gG(t,e);if(t instanceof ArrayBuffer)return _G(t,e);if(QV(t))return function(t,e){return EG.apply(this,arguments)}(t,e);if(tq(t))return AG(t,e);if(JV(t))return AG(t.body,e);throw new Error("makeIterator")}var LG="Cannot convert supplied data type";function RG(t,e,n){if(e.text&&"string"===typeof t)return t;if(function(t){return t&&"object"===typeof t&&t.isBuffer}(t)&&(t=t.buffer),t instanceof ArrayBuffer){var r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);var i=t.buffer,o=t.byteLength||t.length;return 0===t.byteOffset&&o===i.byteLength||(i=i.slice(t.byteOffset,t.byteOffset+o)),i}throw new Error(LG)}function NG(t,e,n){return OG.apply(this,arguments)}function OG(){return OG=(0,GV.Z)(of().mark((function t(e,n,r){var i,o;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e instanceof ArrayBuffer||ArrayBuffer.isView(e),"string"!==typeof e&&!i){t.next=3;break}return t.abrupt("return",RG(e,n));case 3:if(!QV(e)){t.next=7;break}return t.next=6,mq(e);case 6:e=t.sent;case 7:if(!JV(e)){t.next=21;break}return o=e,t.next=11,vq(o);case 11:if(!n.binary){t.next=17;break}return t.next=14,o.arrayBuffer();case 14:t.t0=t.sent,t.next=20;break;case 17:return t.next=19,o.text();case 19:t.t0=t.sent;case 20:return t.abrupt("return",t.t0);case 21:if(tq(e)&&(e=MG(e,r)),!$V(e)&&!KV(e)){t.next=24;break}return t.abrupt("return",pG(e));case 24:throw new Error(LG);case 25:case"end":return t.stop()}}),t)}))),OG.apply(this,arguments)}function zG(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n)return n;var r=iS({fetch:Nq(e,t)},t);return Array.isArray(r.loaders)||(r.loaders=null),r}function DG(t,e){if(!e&&t&&!Array.isArray(t))return t;var n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){var r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[].concat((0,u.Z)(n),(0,u.Z)(r)):r}return n&&n.length?n:null}var FG=new tZ({id:"loaders.gl"}),BG=function(){var t=Mq();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function jG(){return BG()}var ZG=/\.([^.]+)$/;function UG(t){return VG.apply(this,arguments)}function VG(){return VG=(0,GV.Z)(of().mark((function t(e){var n,r,i,o,a=arguments;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:[],r=a.length>2?a[2]:void 0,i=a.length>3?a[3]:void 0,WG(e)){t.next=5;break}return t.abrupt("return",null);case 5:if(!(o=qG(e,n,iS(iS({},r),{},{nothrow:!0}),i))){t.next=8;break}return t.abrupt("return",o);case 8:if(!QV(e)){t.next=13;break}return t.next=11,e.slice(0,10).arrayBuffer();case 11:e=t.sent,o=qG(e,n,r,i);case 13:if(o||null!==r&&void 0!==r&&r.nothrow){t.next=15;break}throw new Error(HG(e));case 15:return t.abrupt("return",o);case 16:case"end":return t.stop()}}),t)}))),VG.apply(this,arguments)}function qG(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!WG(t))return null;if(e&&!Array.isArray(e))return rq(e);var i,o=[];(e&&(o=o.concat(e)),null!==n&&void 0!==n&&n.ignoreRegisteredLoaders)||(i=o).push.apply(i,(0,u.Z)(jG()));XG(o);var a=GG(t,o,n,r);if(!a&&(null===n||void 0===n||!n.nothrow))throw new Error(HG(t));return a}function GG(t,e,n,r){var i,o=fq(t),a=o.url,s=o.type,l=a||(null===r||void 0===r?void 0:r.url),u=null,c="";(null!==n&&void 0!==n&&n.mimeType&&(u=YG(e,null===n||void 0===n?void 0:n.mimeType),c="match forced by supplied MIME type ".concat(null===n||void 0===n?void 0:n.mimeType)),u=u||function(t,e){var n=e&&ZG.exec(e),r=n&&n[1];return r?function(t,e){e=e.toLowerCase();var n,r=(0,ch.Z)(t);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,a=(0,ch.Z)(o.extensions);try{for(a.s();!(i=a.n()).done;){if(i.value.toLowerCase()===e)return o}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(t,r):null}(e,l),c=c||(u?"matched url ".concat(l):""),u=u||YG(e,s),c=c||(u?"matched MIME type ".concat(s):""),u=u||function(t,e){if(!e)return null;var n,r=(0,ch.Z)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("string"===typeof e){if($G(e,i))return i}else if(ArrayBuffer.isView(e)){if(KG(e.buffer,e.byteOffset,i))return i}else if(e instanceof ArrayBuffer){if(KG(e,0,i))return i}}}catch(o){r.e(o)}finally{r.f()}return null}(e,t),c=c||(u?"matched initial data ".concat(JG(t)):""),u=u||YG(e,null===n||void 0===n?void 0:n.fallbackMimeType),c=c||(u?"matched fallback MIME type ".concat(s):""))&&FG.log(1,"selectLoader selected ".concat(null===(i=u)||void 0===i?void 0:i.name,": ").concat(c,"."));return u}function WG(t){return!(t instanceof Response&&204===t.status)}function HG(t){var e=fq(t),n=e.url,r=e.type,i="No valid loader found (";i+=n?"".concat(function(t){var e=t&&t.lastIndexOf("/");return e>=0?t.substr(e+1):""}(n),", "):"no url provided, ",i+="MIME type: ".concat(r?'"'.concat(r,'"'):"not provided",", ");var o=t?JG(t):"";return i+=o?' first bytes: "'.concat(o,'"'):"first bytes: not available",i+=")"}function XG(t){var e,n=(0,ch.Z)(t);try{for(n.s();!(e=n.n()).done;){rq(e.value)}}catch(r){n.e(r)}finally{n.f()}}function YG(t,e){var n,r=(0,ch.Z)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.mimeTypes&&i.mimeTypes.includes(e))return i;if(e==="application/x.".concat(i.id))return i}}catch(o){r.e(o)}finally{r.f()}return null}function $G(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some((function(e){return t.startsWith(e)}))}function KG(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((function(r){return function(t,e,n,r){if(r instanceof ArrayBuffer)return function(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;for(var r=new Uint8Array(t),i=new Uint8Array(e),o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":return r===QG(t,e,r.length);default:return!1}}(t,e,n,r)}))}function JG(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"===typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return QG(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer){var n=0;return QG(t,n,e)}return""}function QG(t,e,n){if(t.byteLength<e+n)return"";for(var r=new DataView(t),i="",o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(e+o));return i}function tW(t,e,n,r){return eW.apply(this,arguments)}function eW(){return eW=(0,GV.Z)(of().mark((function t(e,n,r,i){var o,a,s,l;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Bq(!i||"object"===typeof i),!n||Array.isArray(n)||nq(n)||(i=void 0,r=n,n=void 0),t.next=4,e;case 4:return e=t.sent,r=r||{},o=fq(e),a=o.url,s=DG(n,i),t.next=11,UG(e,s,r);case 11:if(l=t.sent){t.next=14;break}return t.abrupt("return",null);case 14:return r=Rq(r,l,s,a),i=zG({url:a,parse:tW,loaders:s},r,i),t.next=18,nW(l,e,r,i);case 18:return t.abrupt("return",t.sent);case 19:case"end":return t.stop()}}),t)}))),eW.apply(this,arguments)}function nW(t,e,n,r){return rW.apply(this,arguments)}function rW(){return rW=(0,GV.Z)(of().mark((function t(e,n,r,i){return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Zq(e),t.next=3,NG(n,e,r);case 3:if(n=t.sent,!e.parseTextSync||"string"!==typeof n){t.next=7;break}return r.dataType="text",t.abrupt("return",e.parseTextSync(n,r,i,e));case 7:if(!rG(e,r)){t.next=11;break}return t.next=10,iG(e,n,r,i,tW);case 10:case 14:case 18:return t.abrupt("return",t.sent);case 11:if(!e.parseText||"string"!==typeof n){t.next=15;break}return t.next=14,e.parseText(n,r,i,e);case 15:if(!e.parse){t.next=19;break}return t.next=18,e.parse(n,r,i,e);case 19:throw Bq(!e.parseSync),new Error("".concat(e.id," loader - no parser found and worker is disabled"));case 21:case"end":return t.stop()}}),t)}))),rW.apply(this,arguments)}function iW(t,e,n,r){return oW.apply(this,arguments)}function oW(){return oW=(0,GV.Z)(of().mark((function t(e,n,r,i){var o,a;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Array.isArray(n)||nq(n)||(void 0,r=n,n=void 0),o=Nq(r),a=e,"string"!==typeof e){t.next=7;break}return t.next=6,o(e);case 6:a=t.sent;case 7:if(!QV(e)){t.next=11;break}return t.next=10,o(e);case 10:a=t.sent;case 11:return t.next=13,tW(a,n,r);case 13:return t.abrupt("return",t.sent);case 14:case"end":return t.stop()}}),t)}))),oW.apply(this,arguments)}var aW=function(){function t(e,n,r){(0,s.Z)(this,t),this.id=e,this.context=r,this._loadCount=0,this._subscribers=new Set,this.setData(n)}return(0,l.Z)(t,[{key:"subscribe",value:function(t){this._subscribers.add(t)}},{key:"unsubscribe",value:function(t){this._subscribers.delete(t)}},{key:"inUse",value:function(){return this._subscribers.size>0}},{key:"delete",value:function(){}},{key:"getData",value:function(){var t=this;return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((function(){return t.getData()}))}},{key:"setData",value:function(t,e){var n=this;if(t!==this._data||e){this._data=t;var r=++this._loadCount,i=t;"string"===typeof t&&(i=iW(t)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then((function(t){n._loadCount===r&&(n.isLoaded=!0,n._error=null,n._content=t)})).catch((function(t){n._loadCount===r&&(n.isLoaded=!0,n._error=t||!0)}))):(this.isLoaded=!0,this._error=null,this._content=t);var o,a=(0,ch.Z)(this._subscribers);try{for(a.s();!(o=a.n()).done;){o.value.onChange(this.getData())}}catch(s){a.e(s)}finally{a.f()}}}}]),t}(),sW=function(){function t(e){var n=e.gl,r=e.protocol;(0,s.Z)(this,t),this.protocol=r||"resource://",this._context={gl:n,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}return(0,l.Z)(t,[{key:"contains",value:function(t){return!!t.startsWith(this.protocol)||t in this._resources}},{key:"add",value:function(t){var e=t.resourceId,n=t.data,r=t.forceUpdate,i=void 0!==r&&r,o=t.persistent,a=void 0===o||o,s=this._resources[e];s?s.setData(n,i):(s=new aW(e,n,this._context),this._resources[e]=s),s.persistent=a}},{key:"remove",value:function(t){var e=this._resources[t];e&&(e.delete(),delete this._resources[t])}},{key:"unsubscribe",value:function(t){var e=t.consumerId,n=this._consumers[e];if(n){for(var r in n){var i=n[r];i.resource&&i.resource.unsubscribe(i)}delete this._consumers[e],this.prune()}}},{key:"subscribe",value:function(t){var e=t.resourceId,n=t.onChange,r=t.consumerId,i=t.requestId,o=void 0===i?"default":i,a=this._resources,s=this.protocol;e.startsWith(s)&&(a[e=e.replace(s,"")]||this.add({resourceId:e,data:null,persistent:!1}));var l=a[e];if(this._track(r,o,l,n),l)return l.getData()}},{key:"prune",value:function(){var t=this;this._pruneRequest||(this._pruneRequest=setTimeout((function(){return t._prune()}),0))}},{key:"finalize",value:function(){for(var t in this._resources)this._resources[t].delete()}},{key:"_track",value:function(t,e,n,r){var i=this._consumers,o=i[t]=i[t]||{},a=o[e]||{};a.resource&&(a.resource.unsubscribe(a),a.resource=null,this.prune()),n&&(o[e]=a,a.onChange=r,a.resource=n,n.subscribe(a))}},{key:"_prune",value:function(){this._pruneRequest=null;for(var t=0,e=Object.keys(this._resources);t<e.length;t++){var n=e[t],r=this._resources[n];r.persistent||r.inUse()||(r.delete(),delete this._resources[n])}}}]),t}(),lW="vs",uW="fs";function cW(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}var hW={number:{validate:function(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate:function(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function fW(t){var e=pW(t);return"object"===e?t?"type"in t?Object.assign({},t,hW[t.type]):"value"in t?(e=pW(t.value),Object.assign({type:e},t,hW[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},hW[e])}function pW(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}var dW=function(){function t(e){var n=e.name,r=e.vs,i=e.fs,o=e.dependencies,a=void 0===o?[]:o,l=e.uniforms,u=e.getUniforms,c=e.deprecations,h=void 0===c?[]:c,f=e.defines,p=void 0===f?{}:f,d=e.inject,m=void 0===d?{}:d,g=e.vertexShader,v=e.fragmentShader;(0,s.Z)(this,t),cW("string"===typeof n),this.name=n,this.vs=r||g,this.fs=i||v,this.getModuleUniforms=u,this.dependencies=a,this.deprecations=this._parseDeprecationDefinitions(h),this.defines=p,this.injections=function(t){var e={vs:{},fs:{}};for(var n in t){var r=t[n];"string"===typeof r&&(r={order:0,injection:r}),e[n.slice(0,2)][n]=r}return e}(m),l&&(this.uniforms=function(t){var e={};for(var n in t){var r=fW(t[n]);e[n]=r}return e}(l))}return(0,l.Z)(t,[{key:"getModuleSource",value:function(t){var e;switch(t){case"vs":e=this.vs||"";break;case"fs":e=this.fs||"";break;default:cW(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(e,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(t,e){return this.getModuleUniforms?this.getModuleUniforms(t,e):this.uniforms?this._defaultGetUniforms(t):{}}},{key:"getDefines",value:function(){return this.defines}},{key:"checkDeprecations",value:function(t,e){this.deprecations.forEach((function(n){n.regex.test(t)&&(n.deprecated?e.deprecated(n.old,n.new)():e.removed(n.old,n.new)())}))}},{key:"_parseDeprecationDefinitions",value:function(t){return t.forEach((function(t){if("function"===t.type)t.regex=new RegExp("\\b".concat(t.old,"\\("));else t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))})),t}},{key:"_defaultGetUniforms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={},n=this.uniforms;for(var r in n){var i=n[r];r in t&&!i.private?(i.validate&&cW(i.validate(t[r],i),"".concat(this.name,": invalid ").concat(r)),e[r]=t[r]):e[r]=i.value}return e}}]),t}();function mW(t){return gW(yW(t))}function gW(t){var e={},n={};return vW({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((function(t,e){return n[e]-n[t]})).map((function(t){return e[t]}))}function vW(t){var e=t.modules,n=t.level,r=t.moduleMap,i=t.moduleDepth;if(n>=5)throw new Error("Possible loop in shader dependency graph");var o,a=(0,ch.Z)(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;r[s.name]=s,(void 0===i[s.name]||i[s.name]<n)&&(i[s.name]=n)}}catch(h){a.e(h)}finally{a.f()}var l,u=(0,ch.Z)(e);try{for(u.s();!(l=u.n()).done;){var c=l.value;c.dependencies&&vW({modules:c.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}}catch(h){u.e(h)}finally{u.f()}}function yW(t,e){return t.map((function(t){return t instanceof dW||(cW("string"!==typeof t,"Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),cW(t.name,"shader module has no name"),(t=new dW(t)).dependencies=yW(t.dependencies)),t}))}function _W(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="undefined"!==typeof window&&window.navigator||{},n=t.userAgent||e.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}var xW={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},bW={};Object.keys(xW).forEach((function(t){bW[t]=t}));var wW={};function kW(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=xW[e];if(cW(r,e),!_W(n))return!0;if(e in wW)return wW[e];var i=r[0],o=n.behavior||"enable",a="#extension GL_".concat(i," : ").concat(o,"\nvoid main(void) {}"),s=t.createShader(35633);t.shaderSource(s,a),t.compileShader(s);var l=t.getShaderParameter(s,35713);return t.deleteShader(s),wW[e]=l,l}function SW(t,e){var n=xW[e];cW(n,e);var r=function(t){return"undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}(t)&&n[1]||n[0],i="string"===typeof r?Boolean(t.getExtension(r)):r;return cW(!1===i||!0===i),i}function EW(t,e){return(e=Array.isArray(e)?e:[e]).every((function(e){return SW(t,e)}))}var IW,CW=(IW={},(0,c.Z)(IW,lW,"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n"),(0,c.Z)(IW,uW,"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"),IW),AW="__LUMA_INJECT_DECLARATIONS__",PW=/void\s+main\s*\([^)]*\)\s*\{\n?/,TW=/}\n?[^{}]*$/,MW=[];function LW(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e===lW,o=function(e){var r=n[e];r.sort((function(t,e){return t.order-e.order})),MW.length=r.length;for(var o=0,a=r.length;o<a;++o)MW[o]=r[o].injection;var s="".concat(MW.join("\n"),"\n");switch(e){case"vs:#decl":i&&(t=t.replace(AW,s));break;case"vs:#main-start":i&&(t=t.replace(PW,(function(t){return t+s})));break;case"vs:#main-end":i&&(t=t.replace(TW,(function(t){return s+t})));break;case"fs:#decl":i||(t=t.replace(AW,s));break;case"fs:#main-start":i||(t=t.replace(PW,(function(t){return t+s})));break;case"fs:#main-end":i||(t=t.replace(TW,(function(t){return s+t})));break;default:t=t.replace(e,(function(t){return t+s}))}};for(var a in n)o(a);return t=t.replace(AW,""),r&&(t=t.replace(/\}\s*$/,(function(t){return t+CW[e]}))),t}function RW(t){var e={};return cW(Array.isArray(t)&&t.length>1),t.forEach((function(t){for(var n in t)e[n]=e[n]?"".concat(e[n],"\n").concat(t[n]):t[n]})),e}function NW(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}var OW,zW=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],DW=[].concat(zW,[[NW("attribute"),"in $1"],[NW("varying"),"out $1"]]),FW=[].concat(zW,[[NW("varying"),"in $1"]]),BW=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],jW=[].concat(BW,[[NW("in"),"attribute $1"],[NW("out"),"varying $1"]]),ZW=[].concat(BW,[[NW("in"),"varying $1"]]),UW="gl_FragColor",VW=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,qW=/void\s+main\s*\([^)]*\)\s*\{\n?/;function GW(t,e,n){switch(e){case 300:return n?WW(t,DW):function(t){var e=(t=WW(t,FW)).match(VW);if(e){var n=e[1];t=t.replace(new RegExp("\\b".concat(UW,"\\b"),"g"),n)}else{var r="fragmentColor";t=t.replace(qW,(function(t){return"out vec4 ".concat(r,";\n").concat(t)})).replace(new RegExp("\\b".concat(UW,"\\b"),"g"),r)}return t}(t);case 100:return n?WW(t,jW):function(t){var e=(t=WW(t,ZW)).match(VW);if(e){var n=e[1];t=t.replace(VW,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),UW)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}function WW(t,e){var n,r=(0,ch.Z)(e);try{for(r.s();!(n=r.n()).done;){var o=(0,i.Z)(n.value,2),a=o[0],s=o[1];t=t.replace(a,s)}}catch(l){r.e(l)}finally{r.f()}return t}var HW="\n\n".concat(AW,"\n\n"),XW=(OW={},(0,c.Z)(OW,lW,"vertex"),(0,c.Z)(OW,uW,"fragment"),OW);function YW(t,e){var n=e.vs,r=e.fs,i=mW(e.modules||[]);return{gl:t,vs:$W(t,Object.assign({},e,{source:n,type:lW,modules:i})),fs:$W(t,Object.assign({},e,{source:r,type:uW,modules:i})),getUniforms:KW(i)}}function $W(t,e){var n=e.id,r=e.source,o=e.type,a=e.modules,s=e.defines,l=void 0===s?{}:s,u=e.hookFunctions,c=void 0===u?[]:u,h=e.inject,f=void 0===h?{}:h,p=e.transpileToGLSL100,d=void 0!==p&&p,m=e.prologue,g=void 0===m||m,v=e.log;cW("string"===typeof r,"shader source must be a string");var y=o===lW,_=r.split("\n"),x=100,b="",w=r;0===_[0].indexOf("#version ")?(x=300,b=_[0],w=_.slice(1).join("\n")):b="#version ".concat(x);var k={};a.forEach((function(t){Object.assign(k,t.getDefines())})),Object.assign(k,l);var S=g?"".concat(b,"\n").concat(function(t){var e=t.id,n=t.source,r=t.type;return e&&"string"===typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(XW[r],"\n\n"):""}({id:n,source:r,type:o}),"\n").concat(function(t){var e=t.type;return"\n#define SHADER_TYPE_".concat(XW[e].toUpperCase(),"\n")}({type:o}),"\n").concat(function(t){var e=function(t){var e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||7936),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||7937),i=function(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(n,r);return{gpuVendor:i,vendor:n,renderer:r,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t);switch(e.gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t),"\n").concat(function(t,e,n){var r="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return EW(t,bW.GLSL_FRAG_DEPTH)&&(r+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),EW(t,bW.GLSL_DERIVATIVES)&&kW(t,bW.GLSL_DERIVATIVES)&&(r+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),EW(t,bW.GLSL_FRAG_DATA)&&kW(t,bW.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),EW(t,bW.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),r}(t),"\n").concat(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(var r in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;var i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],"\n"))}0===e&&(n+="\n");return n}(k),"\n").concat(y?"":"precision highp float;\n\n","\n"):"".concat(b,"\n"),E=function(t){var e={vs:{},fs:{}};return t.forEach((function(t){var n;"string"!==typeof t?t=(n=t).hook:n={};var r=(t=t.trim()).split(":"),o=(0,i.Z)(r,2),a=o[0],s=o[1],l=t.replace(/\(.+/,"");e[a][l]=Object.assign(n,{signature:s})})),e}(c),I={},C={},A={};for(var P in f){var T="string"===typeof f[P]?{injection:f[P],order:0}:f[P],M=P.match(/^(v|f)s:(#)?([\w-]+)$/);if(M){var L=M[2],R=M[3];L?"decl"===R?C[P]=[T]:A[P]=[T]:I[P]=[T]}else A[P]=[T]}var N,O=(0,ch.Z)(a);try{for(O.s();!(N=O.n()).done;){var z=N.value;v&&z.checkDeprecations(w,v),S+=z.getModuleSource(o,x);var D=z.injections[o];for(var F in D){var B=F.match(/^(v|f)s:#([\w-]+)$/);if(B){var j="decl"===B[2]?C:A;j[F]=j[F]||[],j[F].push(D[F])}else I[F]=I[F]||[],I[F].push(D[F])}}}catch(Z){O.e(Z)}finally{O.f()}return S=LW(S+=HW,o,C),S+=function(t,e){var n="";for(var r in t){var i=t[r];if(n+="void ".concat(i.signature," {\n"),i.header&&(n+="  ".concat(i.header)),e[r]){var o=e[r];o.sort((function(t,e){return t.order-e.order}));var a,s=(0,ch.Z)(o);try{for(s.s();!(a=s.n()).done;){var l=a.value;n+="  ".concat(l.injection,"\n")}}catch(Z){s.e(Z)}finally{s.f()}}i.footer&&(n+="  ".concat(i.footer)),n+="}\n"}return n}(E[o],I),S=GW(S=LW(S+=w,o,A),d?100:x,y)}function KW(t){return function(e){var n,r={},i=(0,ch.Z)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value.getUniforms(e,r);Object.assign(r,o)}}catch(a){i.e(a)}finally{i.f()}return r}}var JW=new tZ({id:"luma.gl"});function QW(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}var tH="Invalid WebGLRenderingContext";function eH(t){return"undefined"!==typeof WebGLRenderingContext&&t instanceof WebGLRenderingContext||("undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&Number.isFinite(t._version)))}function nH(t){return"undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}function rH(t){return QW(eH(t),tH),t}function iH(t){return QW(nH(t),"Requires WebGL2"),t}var oH={};function aH(t,e){var n;oH[t]=!0,void 0!==e&&(n=e,Gj.console&&Gj.console.error&&Gj.console.error(n))}var sH=function t(e){var n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(var r=0;r<this.attribs.length;r++){var i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};(sH.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var lH,uH=function(t){var e=this;this.gl=t,function(t){var e=t.getError;t.getError=function(){var n;do{0!==(n=e.apply(t))&&(oH[n]=!0)}while(0!==n);for(n in oH)if(oH[n])return delete oH[n],parseInt(n,10);return 0}}(t);var n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(t){return t===e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject===e.defaultVertexArrayObject?null:e.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(t){var r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);var i=r.attribs[t];return i.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(t){var r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);var i=r.attribs[t];return i.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(t,r){switch(t){case 34962:e.currentArrayBuffer=r;break;case 34963:e.currentVertexArrayObject.elementArrayBuffer=r}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(t,r){var i=e.currentVertexArrayObject,o=i.attribs[t];switch(r){case 34975:return o.buffer;case 34338:return o.enabled;case 34339:return o.size;case 34340:return o.stride;case 34341:return o.type;case 34922:return o.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(t,r,i,o,a,s){var l=e.currentVertexArrayObject;l.maxAttrib=Math.max(l.maxAttrib,t);var u=l.attribs[t];return u.buffer=e.currentArrayBuffer,u.size=r,u.type=i,u.normalized=o,u.stride=a,u.offset=s,u.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",(function(){var t;t="OESVertexArrayObject emulation library context restored",Gj.console&&Gj.console.log&&Gj.console.log(t),e.reset_()}),!0),this.reset_()};uH.prototype.VERTEX_ARRAY_BINDING_OES=34229,uH.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(var t=0;t<this.vertexArrayObjects.length;++t)this.vertexArrayObjects.isAlive=!1;var e=this.gl;this.maxVertexAttribs=e.getParameter(34921),this.defaultVertexArrayObject=new sH(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},uH.prototype.createVertexArrayOES=function(){var t=new sH(this);return this.vertexArrayObjects.push(t),t},uH.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)},uH.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof sH&&t.hasBeenBound&&t.ext===this)},uH.prototype.bindVertexArrayOES=function(t){var e=this.gl;if(!t||t.isAlive){var n=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;var i=this.currentVertexArrayObject;if(r!==i){r&&i.elementArrayBuffer===r.elementArrayBuffer||n.bindBuffer.call(e,34963,i.elementArrayBuffer);for(var o=this.currentArrayBuffer,a=Math.max(r?r.maxAttrib:0,i.maxAttrib),s=0;s<=a;s++){var l=i.attribs[s],u=r?r.attribs[s]:null;if(r&&l.enabled===u.enabled||(l.enabled?n.enableVertexAttribArray.call(e,s):n.disableVertexAttribArray.call(e,s)),l.enabled){var c=!1;r&&l.buffer===u.buffer||(o!==l.buffer&&(n.bindBuffer.call(e,34962,l.buffer),o=l.buffer),c=!0),(c||l.cached!==u.cached)&&n.vertexAttribPointer.call(e,s,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==o&&n.bindBuffer.call(e,34962,this.currentArrayBuffer)}}else aH(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject")};var cH,hH="OES_element_index",fH="WEBGL_draw_buffers",pH="WEBGL_debug_renderer_info",dH=function(t){return nH(t)?void 0:0},mH=(lH={},(0,c.Z)(lH,3074,(function(t){return nH(t)?void 0:36064})),(0,c.Z)(lH,35723,(function(t){return nH(t)?void 0:4352})),(0,c.Z)(lH,35977,dH),(0,c.Z)(lH,32937,dH),(0,c.Z)(lH,36795,(function(t,e){var n=nH(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0})),(0,c.Z)(lH,37445,(function(t,e){var n=t.getExtension(pH);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)})),(0,c.Z)(lH,37446,(function(t,e){var n=t.getExtension(pH);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)})),(0,c.Z)(lH,34047,(function(t,e){var n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1})),(0,c.Z)(lH,32883,dH),(0,c.Z)(lH,35071,dH),(0,c.Z)(lH,37447,dH),(0,c.Z)(lH,36063,(function(t,e){if(!nH(t)){var n=t.getExtension(fH);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}})),(0,c.Z)(lH,35379,dH),(0,c.Z)(lH,35374,dH),(0,c.Z)(lH,35377,dH),(0,c.Z)(lH,34852,(function(t){if(!nH(t)){var e=t.getExtension(fH);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}})),(0,c.Z)(lH,36203,(function(t){return t.getExtension(hH)?2147483647:65535})),(0,c.Z)(lH,33001,(function(t){return t.getExtension(hH)?16777216:65535})),(0,c.Z)(lH,33e3,(function(t){return 16777216})),(0,c.Z)(lH,37157,dH),(0,c.Z)(lH,35373,dH),(0,c.Z)(lH,35657,dH),(0,c.Z)(lH,36183,dH),(0,c.Z)(lH,37137,dH),(0,c.Z)(lH,34045,dH),(0,c.Z)(lH,35978,dH),(0,c.Z)(lH,35979,dH),(0,c.Z)(lH,35968,dH),(0,c.Z)(lH,35376,dH),(0,c.Z)(lH,35375,dH),(0,c.Z)(lH,35659,dH),(0,c.Z)(lH,37154,dH),(0,c.Z)(lH,35371,dH),(0,c.Z)(lH,35658,dH),(0,c.Z)(lH,35076,dH),(0,c.Z)(lH,35077,dH),(0,c.Z)(lH,35380,dH),lH);var gH="ANGLE_instanced_arrays";var vH,yH,_H,xH=(cH={},(0,c.Z)(cH,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function(){QW(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),(0,c.Z)(cH,gH,{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(t,e){QW(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),(0,c.Z)(cH,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function(){QW(!1)}}),(0,c.Z)(cH,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function(){QW(!1)},deleteQuery:function(){QW(!1)},beginQuery:function(){QW(!1)},endQuery:function(){},getQuery:function(t,e){return this.getQueryObject(t,e)},getQueryParameter:function(t,e){return this.getQueryObject(t,e)},getQueryObject:function(){}}),cH),bH={readBuffer:function(t,e,n){nH(t)&&e(n)},getVertexAttrib:function(t,e,n,r){var i,o=function(t,e){return{webgl2:nH(t),ext:t.getExtension(e)}}(t,gH),a=o.webgl2,s=o.ext;switch(r){case 35069:i=!!a&&void 0;break;case 35070:i=a||s?void 0:0}return void 0!==i?i:e(n,r)},getProgramParameter:function(t,e,n,r){if(!nH(t))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,r)},getInternalformatParameter:function(t,e,n,r,i){return nH(t)||32937!==i?t.getInternalformatParameter(n,r,i):new Int32Array([0])},getTexParameter:function(t,e,n,r){if(34046===r){var i=t.luma.extensions.EXT_texture_filter_anisotropic;r=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,r)},getParameter:function(t,e,n){var r=mH[n],i="function"===typeof r?r(t,e,n):r;return void 0!==i?i:e(n)},hint:function(t,e,n,r){return e(n,r)}};function wH(t,e){var n=e.extension,r=e.target,i=e.target2,o=xH[n];QW(o);for(var a=o.meta,s=(void 0===a?{}:a).suffix,l=void 0===s?"":s,u=t.getExtension(n),c=function(){var e=f[h],n="".concat(e).concat(l),a=null;"meta"===e||"function"===typeof t[e]||(u&&"function"===typeof u[n]?a=function(){return u[n].apply(u,arguments)}:"function"===typeof o[e]&&(a=o[e].bind(r))),a&&(r[e]=a,i[e]=a)},h=0,f=Object.keys(o);h<f.length;h++)c()}("undefined"!==typeof n.g?n.g:window).polyfillContext=function(t){t.luma=t.luma||{};var e=t.luma;return e.polyfilled||(!function(t){if("function"!==typeof t.createVertexArray){var e=t.getSupportedExtensions;t.getSupportedExtensions=function(){var t=e.call(this)||[];return t.indexOf("OES_vertex_array_object")<0&&t.push("OES_vertex_array_object"),t};var n=t.getExtension;t.getExtension=function(e){return n.call(this,e)||("OES_vertex_array_object"!==e?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new uH(this)),this.__OESVertexArrayObject))}}}(t),function(t){t.luma.extensions={};var e,n=t.getSupportedExtensions()||[],r=(0,ch.Z)(n);try{for(r.s();!(e=r.n()).done;){var i=e.value;t.luma[i]=t.getExtension(i)}}catch(o){r.e(o)}finally{r.f()}}(t),function(t,e){var n,r=(0,ch.Z)(Object.getOwnPropertyNames(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;"overrides"!==i&&wH(t,{extension:i,target:t.luma,target2:t})}}catch(o){r.e(o)}finally{r.f()}}(t,xH),function(t,e){var n=e.target,r=e.target2;Object.keys(bH).forEach((function(e){if("function"===typeof bH[e]){var i=t[e]?t[e].bind(t):function(){},o=bH[e].bind(null,t,i);n[e]=o,r[e]=o}}))}(t,{target:e,target2:t}),e.polyfilled=!0),t};var kH=(vH={},(0,c.Z)(vH,3042,!1),(0,c.Z)(vH,32773,new Float32Array([0,0,0,0])),(0,c.Z)(vH,32777,32774),(0,c.Z)(vH,34877,32774),(0,c.Z)(vH,32969,1),(0,c.Z)(vH,32968,0),(0,c.Z)(vH,32971,1),(0,c.Z)(vH,32970,0),(0,c.Z)(vH,3106,new Float32Array([0,0,0,0])),(0,c.Z)(vH,3107,[!0,!0,!0,!0]),(0,c.Z)(vH,2884,!1),(0,c.Z)(vH,2885,1029),(0,c.Z)(vH,2929,!1),(0,c.Z)(vH,2931,1),(0,c.Z)(vH,2932,513),(0,c.Z)(vH,2928,new Float32Array([0,1])),(0,c.Z)(vH,2930,!0),(0,c.Z)(vH,3024,!0),(0,c.Z)(vH,36006,null),(0,c.Z)(vH,2886,2305),(0,c.Z)(vH,33170,4352),(0,c.Z)(vH,2849,1),(0,c.Z)(vH,32823,!1),(0,c.Z)(vH,32824,0),(0,c.Z)(vH,10752,0),(0,c.Z)(vH,32938,1),(0,c.Z)(vH,32939,!1),(0,c.Z)(vH,3089,!1),(0,c.Z)(vH,3088,new Int32Array([0,0,1024,1024])),(0,c.Z)(vH,2960,!1),(0,c.Z)(vH,2961,0),(0,c.Z)(vH,2968,4294967295),(0,c.Z)(vH,36005,4294967295),(0,c.Z)(vH,2962,519),(0,c.Z)(vH,2967,0),(0,c.Z)(vH,2963,4294967295),(0,c.Z)(vH,34816,519),(0,c.Z)(vH,36003,0),(0,c.Z)(vH,36004,4294967295),(0,c.Z)(vH,2964,7680),(0,c.Z)(vH,2965,7680),(0,c.Z)(vH,2966,7680),(0,c.Z)(vH,34817,7680),(0,c.Z)(vH,34818,7680),(0,c.Z)(vH,34819,7680),(0,c.Z)(vH,2978,[0,0,1024,1024]),(0,c.Z)(vH,3333,4),(0,c.Z)(vH,3317,4),(0,c.Z)(vH,37440,!1),(0,c.Z)(vH,37441,!1),(0,c.Z)(vH,37443,37444),(0,c.Z)(vH,35723,4352),(0,c.Z)(vH,36010,null),(0,c.Z)(vH,35977,!1),(0,c.Z)(vH,3330,0),(0,c.Z)(vH,3332,0),(0,c.Z)(vH,3331,0),(0,c.Z)(vH,3314,0),(0,c.Z)(vH,32878,0),(0,c.Z)(vH,3316,0),(0,c.Z)(vH,3315,0),(0,c.Z)(vH,32877,0),vH),SH=function(t,e,n){return e?t.enable(n):t.disable(n)},EH=function(t,e,n){return t.hint(n,e)},IH=function(t,e,n){return t.pixelStorei(n,e)};function CH(t){return Array.isArray(t)||ArrayBuffer.isView(t)}var AH=(yH={},(0,c.Z)(yH,3042,SH),(0,c.Z)(yH,32773,(function(t,e){return t.blendColor.apply(t,(0,u.Z)(e))})),(0,c.Z)(yH,32777,"blendEquation"),(0,c.Z)(yH,34877,"blendEquation"),(0,c.Z)(yH,32969,"blendFunc"),(0,c.Z)(yH,32968,"blendFunc"),(0,c.Z)(yH,32971,"blendFunc"),(0,c.Z)(yH,32970,"blendFunc"),(0,c.Z)(yH,3106,(function(t,e){return t.clearColor.apply(t,(0,u.Z)(e))})),(0,c.Z)(yH,3107,(function(t,e){return t.colorMask.apply(t,(0,u.Z)(e))})),(0,c.Z)(yH,2884,SH),(0,c.Z)(yH,2885,(function(t,e){return t.cullFace(e)})),(0,c.Z)(yH,2929,SH),(0,c.Z)(yH,2931,(function(t,e){return t.clearDepth(e)})),(0,c.Z)(yH,2932,(function(t,e){return t.depthFunc(e)})),(0,c.Z)(yH,2928,(function(t,e){return t.depthRange.apply(t,(0,u.Z)(e))})),(0,c.Z)(yH,2930,(function(t,e){return t.depthMask(e)})),(0,c.Z)(yH,3024,SH),(0,c.Z)(yH,35723,EH),(0,c.Z)(yH,36006,(function(t,e){var n=nH(t)?36009:36160;return t.bindFramebuffer(n,e)})),(0,c.Z)(yH,2886,(function(t,e){return t.frontFace(e)})),(0,c.Z)(yH,33170,EH),(0,c.Z)(yH,2849,(function(t,e){return t.lineWidth(e)})),(0,c.Z)(yH,32823,SH),(0,c.Z)(yH,32824,"polygonOffset"),(0,c.Z)(yH,10752,"polygonOffset"),(0,c.Z)(yH,35977,SH),(0,c.Z)(yH,32938,"sampleCoverage"),(0,c.Z)(yH,32939,"sampleCoverage"),(0,c.Z)(yH,3089,SH),(0,c.Z)(yH,3088,(function(t,e){return t.scissor.apply(t,(0,u.Z)(e))})),(0,c.Z)(yH,2960,SH),(0,c.Z)(yH,2961,(function(t,e){return t.clearStencil(e)})),(0,c.Z)(yH,2968,(function(t,e){return t.stencilMaskSeparate(1028,e)})),(0,c.Z)(yH,36005,(function(t,e){return t.stencilMaskSeparate(1029,e)})),(0,c.Z)(yH,2962,"stencilFuncFront"),(0,c.Z)(yH,2967,"stencilFuncFront"),(0,c.Z)(yH,2963,"stencilFuncFront"),(0,c.Z)(yH,34816,"stencilFuncBack"),(0,c.Z)(yH,36003,"stencilFuncBack"),(0,c.Z)(yH,36004,"stencilFuncBack"),(0,c.Z)(yH,2964,"stencilOpFront"),(0,c.Z)(yH,2965,"stencilOpFront"),(0,c.Z)(yH,2966,"stencilOpFront"),(0,c.Z)(yH,34817,"stencilOpBack"),(0,c.Z)(yH,34818,"stencilOpBack"),(0,c.Z)(yH,34819,"stencilOpBack"),(0,c.Z)(yH,2978,(function(t,e){return t.viewport.apply(t,(0,u.Z)(e))})),(0,c.Z)(yH,3333,IH),(0,c.Z)(yH,3317,IH),(0,c.Z)(yH,37440,IH),(0,c.Z)(yH,37441,IH),(0,c.Z)(yH,37443,IH),(0,c.Z)(yH,3330,IH),(0,c.Z)(yH,3332,IH),(0,c.Z)(yH,3331,IH),(0,c.Z)(yH,36010,(function(t,e){return t.bindFramebuffer(36008,e)})),(0,c.Z)(yH,3314,IH),(0,c.Z)(yH,32878,IH),(0,c.Z)(yH,3316,IH),(0,c.Z)(yH,3315,IH),(0,c.Z)(yH,32877,IH),(0,c.Z)(yH,"framebuffer",(function(t,e){var n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)})),(0,c.Z)(yH,"blend",(function(t,e){return e?t.enable(3042):t.disable(3042)})),(0,c.Z)(yH,"blendColor",(function(t,e){return t.blendColor.apply(t,(0,u.Z)(e))})),(0,c.Z)(yH,"blendEquation",(function(t,e){e=CH(e)?e:[e,e],t.blendEquationSeparate.apply(t,(0,u.Z)(e))})),(0,c.Z)(yH,"blendFunc",(function(t,e){e=CH(e)&&2===e.length?[].concat((0,u.Z)(e),(0,u.Z)(e)):e,t.blendFuncSeparate.apply(t,(0,u.Z)(e))})),(0,c.Z)(yH,"clearColor",(function(t,e){return t.clearColor.apply(t,(0,u.Z)(e))})),(0,c.Z)(yH,"clearDepth",(function(t,e){return t.clearDepth(e)})),(0,c.Z)(yH,"clearStencil",(function(t,e){return t.clearStencil(e)})),(0,c.Z)(yH,"colorMask",(function(t,e){return t.colorMask.apply(t,(0,u.Z)(e))})),(0,c.Z)(yH,"cull",(function(t,e){return e?t.enable(2884):t.disable(2884)})),(0,c.Z)(yH,"cullFace",(function(t,e){return t.cullFace(e)})),(0,c.Z)(yH,"depthTest",(function(t,e){return e?t.enable(2929):t.disable(2929)})),(0,c.Z)(yH,"depthFunc",(function(t,e){return t.depthFunc(e)})),(0,c.Z)(yH,"depthMask",(function(t,e){return t.depthMask(e)})),(0,c.Z)(yH,"depthRange",(function(t,e){return t.depthRange.apply(t,(0,u.Z)(e))})),(0,c.Z)(yH,"dither",(function(t,e){return e?t.enable(3024):t.disable(3024)})),(0,c.Z)(yH,"derivativeHint",(function(t,e){t.hint(35723,e)})),(0,c.Z)(yH,"frontFace",(function(t,e){return t.frontFace(e)})),(0,c.Z)(yH,"mipmapHint",(function(t,e){return t.hint(33170,e)})),(0,c.Z)(yH,"lineWidth",(function(t,e){return t.lineWidth(e)})),(0,c.Z)(yH,"polygonOffsetFill",(function(t,e){return e?t.enable(32823):t.disable(32823)})),(0,c.Z)(yH,"polygonOffset",(function(t,e){return t.polygonOffset.apply(t,(0,u.Z)(e))})),(0,c.Z)(yH,"sampleCoverage",(function(t,e){return t.sampleCoverage.apply(t,(0,u.Z)(e))})),(0,c.Z)(yH,"scissorTest",(function(t,e){return e?t.enable(3089):t.disable(3089)})),(0,c.Z)(yH,"scissor",(function(t,e){return t.scissor.apply(t,(0,u.Z)(e))})),(0,c.Z)(yH,"stencilTest",(function(t,e){return e?t.enable(2960):t.disable(2960)})),(0,c.Z)(yH,"stencilMask",(function(t,e){var n=e=CH(e)?e:[e,e],r=(0,i.Z)(n,2),o=r[0],a=r[1];t.stencilMaskSeparate(1028,o),t.stencilMaskSeparate(1029,a)})),(0,c.Z)(yH,"stencilFunc",(function(t,e){var n=e=CH(e)&&3===e.length?[].concat((0,u.Z)(e),(0,u.Z)(e)):e,r=(0,i.Z)(n,6),o=r[0],a=r[1],s=r[2],l=r[3],c=r[4],h=r[5];t.stencilFuncSeparate(1028,o,a,s),t.stencilFuncSeparate(1029,l,c,h)})),(0,c.Z)(yH,"stencilOp",(function(t,e){var n=e=CH(e)&&3===e.length?[].concat((0,u.Z)(e),(0,u.Z)(e)):e,r=(0,i.Z)(n,6),o=r[0],a=r[1],s=r[2],l=r[3],c=r[4],h=r[5];t.stencilOpSeparate(1028,o,a,s),t.stencilOpSeparate(1029,l,c,h)})),(0,c.Z)(yH,"viewport",(function(t,e){return t.viewport.apply(t,(0,u.Z)(e))})),yH);function PH(t,e,n){return void 0!==e[t]?e[t]:n[t]}var TH={blendEquation:function(t,e,n){return t.blendEquationSeparate(PH(32777,e,n),PH(34877,e,n))},blendFunc:function(t,e,n){return t.blendFuncSeparate(PH(32969,e,n),PH(32968,e,n),PH(32971,e,n),PH(32970,e,n))},polygonOffset:function(t,e,n){return t.polygonOffset(PH(32824,e,n),PH(10752,e,n))},sampleCoverage:function(t,e,n){return t.sampleCoverage(PH(32938,e,n),PH(32939,e,n))},stencilFuncFront:function(t,e,n){return t.stencilFuncSeparate(1028,PH(2962,e,n),PH(2967,e,n),PH(2963,e,n))},stencilFuncBack:function(t,e,n){return t.stencilFuncSeparate(1029,PH(34816,e,n),PH(36003,e,n),PH(36004,e,n))},stencilOpFront:function(t,e,n){return t.stencilOpSeparate(1028,PH(2964,e,n),PH(2965,e,n),PH(2966,e,n))},stencilOpBack:function(t,e,n){return t.stencilOpSeparate(1029,PH(34817,e,n),PH(34818,e,n),PH(34819,e,n))}},MH={enable:function(t,e){return t((0,c.Z)({},e,!0))},disable:function(t,e){return t((0,c.Z)({},e,!1))},pixelStorei:function(t,e,n){return t((0,c.Z)({},e,n))},hint:function(t,e,n){return t((0,c.Z)({},e,n))},bindFramebuffer:function(t,e,n){var r;switch(e){case 36160:return t((r={},(0,c.Z)(r,36006,n),(0,c.Z)(r,36010,n),r));case 36009:return t((0,c.Z)({},36006,n));case 36008:return t((0,c.Z)({},36010,n));default:return null}},blendColor:function(t,e,n,r,i){return t((0,c.Z)({},32773,new Float32Array([e,n,r,i])))},blendEquation:function(t,e){var n;return t((n={},(0,c.Z)(n,32777,e),(0,c.Z)(n,34877,e),n))},blendEquationSeparate:function(t,e,n){var r;return t((r={},(0,c.Z)(r,32777,e),(0,c.Z)(r,34877,n),r))},blendFunc:function(t,e,n){var r;return t((r={},(0,c.Z)(r,32969,e),(0,c.Z)(r,32968,n),(0,c.Z)(r,32971,e),(0,c.Z)(r,32970,n),r))},blendFuncSeparate:function(t,e,n,r,i){var o;return t((o={},(0,c.Z)(o,32969,e),(0,c.Z)(o,32968,n),(0,c.Z)(o,32971,r),(0,c.Z)(o,32970,i),o))},clearColor:function(t,e,n,r,i){return t((0,c.Z)({},3106,new Float32Array([e,n,r,i])))},clearDepth:function(t,e){return t((0,c.Z)({},2931,e))},clearStencil:function(t,e){return t((0,c.Z)({},2961,e))},colorMask:function(t,e,n,r,i){return t((0,c.Z)({},3107,[e,n,r,i]))},cullFace:function(t,e){return t((0,c.Z)({},2885,e))},depthFunc:function(t,e){return t((0,c.Z)({},2932,e))},depthRange:function(t,e,n){return t((0,c.Z)({},2928,new Float32Array([e,n])))},depthMask:function(t,e){return t((0,c.Z)({},2930,e))},frontFace:function(t,e){return t((0,c.Z)({},2886,e))},lineWidth:function(t,e){return t((0,c.Z)({},2849,e))},polygonOffset:function(t,e,n){var r;return t((r={},(0,c.Z)(r,32824,e),(0,c.Z)(r,10752,n),r))},sampleCoverage:function(t,e,n){var r;return t((r={},(0,c.Z)(r,32938,e),(0,c.Z)(r,32939,n),r))},scissor:function(t,e,n,r,i){return t((0,c.Z)({},3088,new Int32Array([e,n,r,i])))},stencilMask:function(t,e){var n;return t((n={},(0,c.Z)(n,2968,e),(0,c.Z)(n,36005,e),n))},stencilMaskSeparate:function(t,e,n){return t((0,c.Z)({},1028===e?2968:36005,n))},stencilFunc:function(t,e,n,r){var i;return t((i={},(0,c.Z)(i,2962,e),(0,c.Z)(i,2967,n),(0,c.Z)(i,2963,r),(0,c.Z)(i,34816,e),(0,c.Z)(i,36003,n),(0,c.Z)(i,36004,r),i))},stencilFuncSeparate:function(t,e,n,r,i){var o;return t((o={},(0,c.Z)(o,1028===e?2962:34816,n),(0,c.Z)(o,1028===e?2967:36003,r),(0,c.Z)(o,1028===e?2963:36004,i),o))},stencilOp:function(t,e,n,r){var i;return t((i={},(0,c.Z)(i,2964,e),(0,c.Z)(i,2965,n),(0,c.Z)(i,2966,r),(0,c.Z)(i,34817,e),(0,c.Z)(i,34818,n),(0,c.Z)(i,34819,r),i))},stencilOpSeparate:function(t,e,n,r,i){var o;return t((o={},(0,c.Z)(o,1028===e?2964:34817,n),(0,c.Z)(o,1028===e?2965:34818,r),(0,c.Z)(o,1028===e?2966:34819,i),o))},viewport:function(t,e,n,r,i){return t((0,c.Z)({},2978,[e,n,r,i]))}},LH=function(t,e){return t.isEnabled(e)},RH=(_H={},(0,c.Z)(_H,3042,LH),(0,c.Z)(_H,2884,LH),(0,c.Z)(_H,2929,LH),(0,c.Z)(_H,3024,LH),(0,c.Z)(_H,32823,LH),(0,c.Z)(_H,32926,LH),(0,c.Z)(_H,32928,LH),(0,c.Z)(_H,3089,LH),(0,c.Z)(_H,2960,LH),(0,c.Z)(_H,35977,LH),_H);function NH(t){for(var e in t)return!1;return!0}function OH(t,e){if(t===e)return!0;var n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function zH(t,e){var n=t[e].bind(t);t[e]=function(){var e=arguments.length<=0?void 0:arguments[0];return e in t.state.cache&&t.state.enable?t.state.cache[e]:n.apply(void 0,arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function DH(t,e,n){var r=t[e].bind(t);t[e]=function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];var a=n.apply(void 0,[t.state._updateCache].concat(i)),s=a.valueChanged,l=a.oldValue;return s&&r.apply(void 0,i),l},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function FH(t){var e=t.useProgram.bind(t);t.useProgram=function(n){t.state.program!==n&&(e(n),t.state.program=n)}}var BH=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.copyState,i=void 0!==r&&r,o=n.log,a=void 0===o?function(){}:o;(0,s.Z)(this,t),this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=i?VH(e):Object.assign({},kH),this.log=a,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return(0,l.Z)(t,[{key:"push",value:function(){this.stateStack.push({})}},{key:"pop",value:function(){QW(this.stateStack.length>0);var t=this.stateStack[this.stateStack.length-1];UH(this.gl,t),this.stateStack.pop()}},{key:"_updateCache",value:function(t){var e,n=!1,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var i in t){QW(void 0!==i);var o=t[i],a=this.cache[i];OH(o,a)||(n=!0,e=a,r&&!(i in r)&&(r[i]=a),this.cache[i]=o)}return{valueChanged:n,oldValue:e}}}]),t}();function jH(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.enable,i=void 0===r||r,o=e.copyState;if(QW(void 0!==o),!t.state){var a="undefined"!==typeof n.g?n.g:window,s=a.polyfillContext;for(var l in s&&s(t),t.state=new BH(t,{copyState:o}),FH(t),MH){var u=MH[l];DH(t,l,u)}zH(t,"getParameter"),zH(t,"isEnabled")}return t.state.enable=i,t}function ZH(t){QW(t.state),t.state.pop()}function UH(t,e){if(QW(eH(t),"setParameters requires a WebGL context"),!NH(e)){var n={};for(var r in e){var i=Number(r),o=AH[r];o&&("string"===typeof o?n[o]=!0:o(t,e[r],i))}var a=t.state&&t.state.cache;if(a)for(var s in n){(0,TH[s])(t,e,a)}}}function VH(t,e){if("number"===typeof(e=e||kH)){var n=e,r=RH[n];return r?r(t,n):t.getParameter(n)}var i,o=Array.isArray(e)?e:Object.keys(e),a={},s=(0,ch.Z)(o);try{for(s.s();!(i=s.n()).done;){var l=i.value,u=RH[l];a[l]=u?u(t,Number(l)):t.getParameter(Number(l))}}catch(c){s.e(c)}finally{s.f()}return a}function qH(t,e,n){if(NH(e))return n(t);var r,i=e.nocatch,o=void 0===i||i;if(function(t){t.state||jH(t,{copyState:!1}),t.state.push()}(t),UH(t,e),o)r=n(t),ZH(t);else try{r=n(t)}finally{ZH(t)}return r}function GH(t){var e=t.luma;if(t.canvas&&e){var n=e.canvasSizeInfo.clientWidth;return n?t.drawingBufferWidth/n:1}return 1}function WH(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=GH(t),i=t.drawingBufferWidth,o=t.drawingBufferHeight;return XH(e,r,i,o,n)}function HH(t){var e="undefined"===typeof window?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function XH(t,e,n,r,i){var o,a=YH(t[0],e,n),s=$H(t[1],e,r,i),l=YH(t[0]+1,e,n),u=l===n-1?l:l-1;return l=$H(t[1]+1,e,r,i),i?(o=s,s=l=0===l?l:l+1):o=l===r-1?l:l-1,{x:a,y:s,width:Math.max(u-a+1,1),height:Math.max(o-s+1,1)}}function YH(t,e,n){return Math.min(Math.round(t*e),n-1)}function $H(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}var KH=Oj(),JH=KH&&"undefined"!==typeof document,QH={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function tX(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};QW(KH,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils");var e,n=t=Object.assign({},QH,t),r=n.width,i=n.height;function o(e){if(t.throwOnError)throw new Error(e);return console.error(e),null}t.onError=o;var a=t,s=a.canvas,l=rX({canvas:s,width:r,height:i,onError:o});return(e=nX(l,t))?(iX(e=eX(e,t)),e):null}function eX(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||oX(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};var n=e=Object.assign({},QH,e),r=n.manageState,i=n.debug;return r&&jH(t,{copyState:!1,log:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return JW.log.apply(JW,[1].concat(e))()}}),KH&&i&&(Gj.makeDebugContext?(t=Gj.makeDebugContext(t,e),JW.level=Math.max(JW.level,1)):JW.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function nX(t,e){var n=e.onError,r=null,i=function(t){return r=t.statusMessage||r};t.addEventListener("webglcontextcreationerror",i,!1);var o=e.webgl1,a=void 0===o||o,s=e.webgl2,l=void 0===s||s,u=null;return l&&(u=(u=u||t.getContext("webgl2",e))||t.getContext("experimental-webgl2",e)),a&&(u=(u=u||t.getContext("webgl",e))||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),u?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),u):n("Failed to create ".concat(l&&!a?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function rX(t){var e,n=t.canvas,r=t.width,i=void 0===r?800:r,o=t.height,a=void 0===o?600:o,s=t.onError;"string"===typeof n?(JH&&"complete"===document.readyState||s("createGLContext called on canvas '".concat(n,"' before page was loaded")),e=document.getElementById(n)):n?e=n:((e=document.createElement("canvas")).id="lumagl-canvas",e.style.width=Number.isFinite(i)?"".concat(i,"px"):"100%",e.style.height=Number.isFinite(a)?"".concat(a,"px"):"100%",document.body.insertBefore(e,document.body.firstChild));return e}function iX(t){var e=nH(t)?"WebGL2":"WebGL1",n=function(t){var e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info");return{vendor:r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";JW.info(1,"".concat(e).concat(i," context ").concat(r))()}function oX(t){return"undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext?2:1}function aX(t,e,n){var r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;r&&i||(JW.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};var o=t.luma.canvasSizeInfo;if(o.clientWidth!==r||o.clientHeight!==i||o.devicePixelRatio!==e){var a=e,s=Math.floor(r*a),l=Math.floor(i*a);t.canvas.width=s,t.canvas.height=l,t.drawingBufferWidth===s&&t.drawingBufferHeight===l||(JW.warn("Device pixel ratio clamped")(),a=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*a),t.canvas.height=Math.floor(i*a)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}var sX="8.5.10",lX=new(function(){function t(){(0,s.Z)(this,t),this.stats=new Map}return(0,l.Z)(t,[{key:"get",value:function(t){return this.stats.has(t)||this.stats.set(t,new qV({id:t})),this.stats.get(t)}}]),t}());if(Gj.luma&&Gj.luma.VERSION!==sX)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(Gj.luma.VERSION," vs ").concat(sX));Gj.luma||(Oj()&&JW.log(1,"luma.gl ".concat(sX," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),Gj.luma=Gj.luma||{VERSION:sX,version:sX,log:JW,stats:lX,globals:{modules:{},nodeIO:{}}});Gj.luma;function uX(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function cX(t,e){if("string"!==typeof e)return e;var n=Number(e);if(!isNaN(n))return n;var r=t[e=e.replace(/^.*\./,"")];return uX(void 0!==r,"Accessing undefined constant GL.".concat(e)),r}function hX(t,e){for(var n in e=Number(e),t)if(t[n]===e)return"GL.".concat(n);return String(e)}var fX={};function pX(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";fX[t]=fX[t]||1;var e=fX[t]++;return"".concat(t,"-").concat(e)}function dX(t){return uX("number"===typeof t,"Input must be a number"),t&&0===(t&t-1)}function mX(t){var e=!0;for(var n in t){e=!1;break}return e}function gX(t,e,n,r){var i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(t);r.forEach((function(t){o.methodName||(o[t]=function(){throw JW.removed("Calling removed method ".concat(e,".").concat(t,": "),i)(),new Error(t)})}))}var vX="Resource subclass must define virtual methods",yX=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Z)(this,t),rH(e);var r=n.id,i=n.userData,o=void 0===i?{}:i;this.gl=e,this.gl2=e,this.id=r||pX(this.constructor.name),this.userData=o,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}return(0,l.Z)(t,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"handle",get:function(){return this._handle}},{key:"delete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.deleteChildren,n=void 0!==e&&e,r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&n&&r.filter(Boolean).forEach((function(t){return t.delete()})),this}},{key:"bind",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!==typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};uX(t=cX(this.gl,t));var n=this.constructor.PARAMETERS||{},r=n[t];if(r){var i=nH(this.gl),o=(!("webgl2"in r)||i)&&(!("extension"in r)||this.gl.getExtension(r.extension));if(!o){var a=r.webgl1,s="webgl2"in r?r.webgl2:r.webgl1,l=i?s:a;return l}}return this._getParameter(t,e)}},{key:"getParameters",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.parameters,r=e.keys,i=this.constructor.PARAMETERS||{},o=nH(this.gl),a={},s=n||Object.keys(i),l=(0,ch.Z)(s);try{for(l.s();!(t=l.n()).done;){var u=t.value,c=i[u],h=c&&(!("webgl2"in c)||o)&&(!("extension"in c)||this.gl.getExtension(c.extension));if(h){var f=r?hX(this.gl,u):u;a[f]=this.getParameter(u,e),r&&"GLenum"===c.type&&(a[f]=hX(this.gl,a[f]))}}}catch(p){l.e(p)}finally{l.f()}return a}},{key:"setParameter",value:function(t,e){uX(t=cX(this.gl,t));var n=(this.constructor.PARAMETERS||{})[t];if(n){var r=nH(this.gl);if(!((!("webgl2"in n)||r)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(e=cX(e))}return this._setParameter(t,e),this}},{key:"setParameters",value:function(t){for(var e in t)this.setParameter(e,t[e]);return this}},{key:"stubRemovedMethods",value:function(t,e,n){return gX(this,t,e,n)}},{key:"initialize",value:function(t){}},{key:"_createHandle",value:function(){throw new Error(vX)}},{key:"_deleteHandle",value:function(){throw new Error(vX)}},{key:"_bindHandle",value:function(t){throw new Error(vX)}},{key:"_getOptsFromHandle",value:function(){throw new Error(vX)}},{key:"_getParameter",value:function(t,e){throw new Error(vX)}},{key:"_setParameter",value:function(t,e){throw new Error(vX)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var t=this.constructor.name,e=lX.get("Resource Counts");e.get("Resources Created").incrementCount(),e.get("".concat(t,"s Created")).incrementCount(),e.get("".concat(t,"s Active")).incrementCount()}},{key:"_removeStats",value:function(){var t=this.constructor.name;lX.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.name,n=lX.get("Memory Usage");n.get("GPU Memory").addCount(t),n.get("".concat(e," Memory")).addCount(t),this.byteLength=t}},{key:"_trackDeallocatedMemory",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.name,e=lX.get("Memory Usage");e.get("GPU Memory").subtractCount(this.byteLength),e.get("".concat(t," Memory")).subtractCount(this.byteLength),this.byteLength=0}}]),t}(),_X=n(8814);function xX(t,e,n){return xX=(0,_X.Z)()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&(0,Bo.Z)(i,n.prototype),i},xX.apply(null,arguments)}function bX(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function wX(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.clamped,r=void 0===n||n;switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return r?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function kX(t){var e=t.data,n=t.width,r=t.height,i=t.bytesPerPixel,o=void 0===i?4:i,a=t.temp,s=n*o;a=a||new Uint8Array(s);for(var l=0;l<r/2;++l){var u=l*s,c=(r-l-1)*s;a.set(e.subarray(u,u+s)),e.copyWithin(u,c,c+s),e.set(a,c)}}function SX(t){for(var e=t.data,n=t.width,r=t.height,i=Math.round(n/2),o=Math.round(r/2),a=new Uint8Array(i*o*4),s=0;s<o;s++)for(var l=0;l<i;l++)for(var u=0;u<4;u++)a[4*(s*i+l)+u]=e[4*(2*s*n+2*l)+u];return{data:a,width:i,height:o}}function EX(t,e,n){var r=n.removedProps,i=void 0===r?{}:r,o=n.deprecatedProps,a=void 0===o?{}:o,s=n.replacedProps,l=void 0===s?{}:s;for(var u in i)if(u in e){var c=i[u]?"".concat(t,".").concat(i[u]):"N/A";JW.removed("".concat(t,".").concat(u),c)()}for(var h in a)if(h in e){var f=a[h];JW.deprecated("".concat(t,".").concat(h),"".concat(t,".").concat(f))()}var p=null;for(var d in l)if(d in e){var m=l[d];JW.deprecated("".concat(t,".").concat(d),"".concat(t,".").concat(m))(),(p=p||Object.assign({},e))[m]=e[d],delete p[d]}return p||e}var IX,CX,AX,PX={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},TX={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},MX=function(){function t(){var e=this;(0,s.Z)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((function(t){return e._assign(t)})),Object.freeze(this)}return(0,l.Z)(t,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"BYTES_PER_ELEMENT",get:function(){return t.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return t.getBytesPerVertex(this)}},{key:"_assign",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==(t=EX("Accessor",t,TX)).type&&(this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&("boolean"===typeof t.index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),this}}],[{key:"getBytesPerElement",value:function(t){return wX(t.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(t){return uX(t.size),wX(t.type||5126).BYTES_PER_ELEMENT*t.size}},{key:"resolve",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return xX(t,[PX].concat(n))}}]),t}(),LX={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},RX={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:LX},NX={removedProps:LX},OX=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.Z)(this,n),(r=e.call(this,t,i)).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),r.target=i.target||(r.gl.webgl2?36662:34962),r.initialize(i),Object.seal((0,Fo.Z)(r)),r}return(0,l.Z)(n,[{key:"getElementCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/MX.getBytesPerElement(t))}},{key:"getVertexCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/MX.getBytesPerVertex(t))}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=EX("Buffer",t,RX),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}},{key:"setProps",value:function(t){return"accessor"in(t=EX("Buffer",t,NX))&&this.setAccessor(t.accessor),this}},{key:"setAccessor",value:function(t){return delete(t=Object.assign({},t)).buffer,this.accessor=new MX(t),this}},{key:"reallocate",value:function(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}},{key:"setData",value:function(t){return this.initialize(t)}},{key:"subData",value:function(t){ArrayBuffer.isView(t)&&(t={data:t});var e=t,n=e.data,r=e.offset,i=void 0===r?0:r,o=e.srcOffset,a=void 0===o?0:o,s=t.byteLength||t.length;uX(n);var l=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(l,this.handle),0!==a||void 0!==s?(iH(this.gl),this.gl.bufferSubData(this.target,i,n,a,s)):this.gl.bufferSubData(l,i,n),this.gl.bindBuffer(l,null),this.debugData=null,this._inferType(n),this}},{key:"copyData",value:function(t){var e=t.sourceBuffer,n=t.readOffset,r=void 0===n?0:n,i=t.writeOffset,o=void 0===i?0:i,a=t.size,s=this.gl;return iH(s),s.bindBuffer(36662,e.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,r,o,a),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.dstData,n=void 0===e?null:e,r=t.srcByteOffset,i=void 0===r?0:r,o=t.dstOffset,a=void 0===o?0:o,s=t.length,l=void 0===s?0:s;iH(this.gl);var u,c,h=wX(this.accessor.type||5126,{clamped:!1}),f=this._getAvailableElementCount(i),p=a;n?u=(c=n.length)-p:c=p+(u=Math.min(f,l||f));var d=Math.min(f,u);return uX((l=l||d)<=d),n=n||new h(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,i,n,a,l),this.gl.bindBuffer(36662,null),n}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?this.target:e,r=t.index,i=void 0===r?this.accessor&&this.accessor.index:r,o=t.offset,a=void 0===o?0:o,s=t.size;return 35345===n||35982===n?void 0!==s?this.gl.bindBufferRange(n,i,this.handle,a,s):(uX(0===a),this.gl.bindBufferBase(n,i,this.handle)):this.gl.bindBuffer(n,this.handle),this}},{key:"unbind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?this.target:e,r=t.index,i=void 0===r?this.accessor&&this.accessor.index:r,o=35345===n||35982===n;return o?this.gl.bindBufferBase(n,i,null):this.gl.bindBuffer(n,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength+e;uX(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();var r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,this.usage),this.gl.bufferSubData(r,e,t),this.gl.bindBuffer(r,null),this.debugData=t.slice(0,10),this.bytesUsed=n,this._trackAllocatedMemory(n);var i=bX(t);return uX(i),this.setAccessor(new MX(this.accessor,{type:i})),this}},{key:"_setByteLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;uX(t>=0),this._trackDeallocatedMemory();var n=t;0===t&&(n=new Float32Array(0));var r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,e),this.gl.bindBuffer(r,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(t){var e=t/wX(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-e}},{key:"_inferType",value:function(t){this.accessor.type||this.setAccessor(new MX(this.accessor,{type:bX(t)}))}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function(t){this.gl.bindBuffer(this.target,this.handle);var e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}},{key:"type",get:function(){return JW.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return JW.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}},{key:"setByteLength",value:function(t){return JW.deprecated("setByteLength","reallocate")(),this.reallocate(t)}},{key:"updateAccessor",value:function(t){return JW.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new MX(this.accessor,t),this}}]),n}(yX),zX=(IX={},(0,c.Z)(IX,6407,{dataFormat:6407,types:[5121,33635]}),(0,c.Z)(IX,6408,{dataFormat:6408,types:[5121,32819,32820]}),(0,c.Z)(IX,6406,{dataFormat:6406,types:[5121]}),(0,c.Z)(IX,6409,{dataFormat:6409,types:[5121]}),(0,c.Z)(IX,6410,{dataFormat:6410,types:[5121]}),(0,c.Z)(IX,33326,{dataFormat:6403,types:[5126],gl2:!0}),(0,c.Z)(IX,33328,{dataFormat:33319,types:[5126],gl2:!0}),(0,c.Z)(IX,34837,{dataFormat:6407,types:[5126],gl2:!0}),(0,c.Z)(IX,34836,{dataFormat:6408,types:[5126],gl2:!0}),IX),DX=(CX={},(0,c.Z)(CX,6403,1),(0,c.Z)(CX,36244,1),(0,c.Z)(CX,33319,2),(0,c.Z)(CX,33320,2),(0,c.Z)(CX,6407,3),(0,c.Z)(CX,36248,3),(0,c.Z)(CX,6408,4),(0,c.Z)(CX,36249,4),(0,c.Z)(CX,6402,1),(0,c.Z)(CX,34041,1),(0,c.Z)(CX,6406,1),(0,c.Z)(CX,6409,1),(0,c.Z)(CX,6410,2),CX),FX=(AX={},(0,c.Z)(AX,5126,4),(0,c.Z)(AX,5125,4),(0,c.Z)(AX,5124,4),(0,c.Z)(AX,5123,2),(0,c.Z)(AX,5122,2),(0,c.Z)(AX,5131,2),(0,c.Z)(AX,5120,1),(0,c.Z)(AX,5121,1),AX);function BX(t,e){var n=zX[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;var r=nH(t)&&n.gl2||n.gl1;return"string"===typeof r?t.getExtension(r):r}function jX(t,e){var n=zX[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}var ZX=[9729,9728],UX=Gj.WebGLBuffer||function(){},VX=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t,r){var i;(0,s.Z)(this,n);var o=r.id,a=void 0===o?pX("texture"):o,l=r.handle,u=r.target;return(i=e.call(this,t,{id:a,handle:l})).target=u,i.textureUnit=void 0,i.loaded=!1,i.width=void 0,i.height=void 0,i.depth=void 0,i.format=void 0,i.type=void 0,i.dataFormat=void 0,i.border=void 0,i.textureUnit=void 0,i.mipmaps=void 0,i}return(0,l.Z)(n,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then((function(n){return t.initialize(Object.assign({},e,{pixels:n,data:n}))})),this;var r="undefined"!==typeof HTMLVideoElement&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",(function(){return t.initialize(e)})),this;var i=e.pixels,o=void 0===i?null:i,a=e.format,s=void 0===a?6408:a,l=e.border,u=void 0===l?0:l,c=e.recreate,h=void 0!==c&&c,f=e.parameters,p=void 0===f?{}:f,d=e.pixelStore,m=void 0===d?{}:d,g=e.textureUnit,v=void 0===g?void 0:g;n||(n=o);var y=e.width,_=e.height,x=e.dataFormat,b=e.type,w=e.compressed,k=void 0!==w&&w,S=e.mipmaps,E=void 0===S||S,I=e.depth,C=void 0===I?0:I,A=this._deduceParameters({format:s,type:b,dataFormat:x,compressed:k,data:n,width:y,height:_});return y=A.width,_=A.height,k=A.compressed,x=A.dataFormat,b=A.type,this.width=y,this.height=_,this.depth=C,this.format=s,this.type=b,this.dataFormat=x,this.border=u,this.textureUnit=v,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),E&&this._isNPOT()&&(JW.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),E=!1,this._updateForNPOT(p)),this.mipmaps=E,this.setImageData({data:n,width:y,height:_,depth:C,format:s,type:b,dataFormat:x,border:u,mipmaps:E,parameters:m,compressed:k}),E&&this.generateMipmap(),this.setParameters(p),h&&(this.data=n),r&&(this._video={video:n,parameters:p,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}},{key:"update",value:function(){if(this._video){var t=this._video,e=t.video,n=t.parameters;if(t.lastTime===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}},{key:"resize",value:function(t){var e=t.height,n=t.width,r=t.mipmaps,i=void 0!==r&&r;return n!==this.width||e!==this.height?this.initialize({width:n,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}},{key:"generateMipmap",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(JW.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),qH(this.gl,e,(function(){t.gl.generateMipmap(t.target)})),this.gl.bindTexture(this.target,null),this)}},{key:"setImageData",value:function(t){this._trackDeallocatedMemory("Texture");var e=t.target,n=void 0===e?this.target:e,r=t.pixels,o=void 0===r?null:r,a=t.level,s=void 0===a?0:a,l=t.format,u=void 0===l?this.format:l,c=t.border,h=void 0===c?this.border:c,f=t.offset,p=void 0===f?0:f,d=t.parameters,m=void 0===d?{}:d,g=t.data,v=void 0===g?null:g,y=t.type,_=void 0===y?this.type:y,x=t.width,b=void 0===x?this.width:x,w=t.height,k=void 0===w?this.height:w,S=t.dataFormat,E=void 0===S?this.dataFormat:S,I=t.compressed,C=void 0!==I&&I;v||(v=o);var A=this._deduceParameters({format:u,type:_,dataFormat:E,compressed:C,data:v,width:b,height:k});_=A.type,E=A.dataFormat,C=A.compressed,b=A.width,k=A.height;var P=this.gl;P.bindTexture(this.target,this.handle);var T,M,L=this._getDataType({data:v,compressed:C});if(v=L.data,T=L.dataType,qH(this.gl,m,(function(){switch(T){case"null":P.texImage2D(n,s,u,b,k,h,E,_,v);break;case"typed-array":P.texImage2D(n,s,u,b,k,h,E,_,v,p);break;case"buffer":(M=iH(P)).bindBuffer(35052,v.handle||v),M.texImage2D(n,s,u,b,k,h,E,_,p),M.bindBuffer(35052,null);break;case"browser-object":nH(P)?P.texImage2D(n,s,u,b,k,h,E,_,v):P.texImage2D(n,s,u,E,_,v);break;case"compressed":var t,e=(0,ch.Z)(v.entries());try{for(e.s();!(t=e.n()).done;){var r=(0,i.Z)(t.value,2),o=r[0],a=r[1];P.compressedTexImage2D(n,o,a.format,a.width,a.height,h,a.data)}}catch(l){e.e(l)}finally{e.f()}break;default:uX(!1,"Unknown image data type")}})),v&&v.byteLength)this._trackAllocatedMemory(v.byteLength,"Texture");else{var R=DX[this.dataFormat]||4,N=FX[this.type]||1;this._trackAllocatedMemory(this.width*this.height*R*N,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function(t){var e=this,n=t.target,r=void 0===n?this.target:n,i=t.pixels,o=void 0===i?null:i,a=t.data,s=void 0===a?null:a,l=t.x,u=void 0===l?0:l,c=t.y,h=void 0===c?0:c,f=t.width,p=void 0===f?this.width:f,d=t.height,m=void 0===d?this.height:d,g=t.level,v=void 0===g?0:g,y=t.format,_=void 0===y?this.format:y,x=t.type,b=void 0===x?this.type:x,w=t.dataFormat,k=void 0===w?this.dataFormat:w,S=t.compressed,E=void 0!==S&&S,I=t.offset,C=void 0===I?0:I,A=t.border,P=(void 0===A&&this.border,t.parameters),T=void 0===P?{}:P,M=this._deduceParameters({format:_,type:b,dataFormat:k,compressed:E,data:s,width:p,height:m});if(b=M.type,k=M.dataFormat,E=M.compressed,p=M.width,m=M.height,uX(0===this.depth,"texSubImage not supported for 3D textures"),s||(s=o),s&&s.data){var L=s;s=L.data,p=L.shape[0],m=L.shape[1]}s instanceof OX&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),qH(this.gl,T,(function(){if(E)e.gl.compressedTexSubImage2D(r,v,u,h,p,m,_,s);else if(null===s)e.gl.texSubImage2D(r,v,u,h,p,m,k,b,null);else if(ArrayBuffer.isView(s))e.gl.texSubImage2D(r,v,u,h,p,m,k,b,s,C);else if(s instanceof UX){var t=iH(e.gl);t.bindBuffer(35052,s),t.texSubImage2D(r,v,u,h,p,m,k,b,C),t.bindBuffer(35052,null)}else if(nH(e.gl)){iH(e.gl).texSubImage2D(r,v,u,h,p,m,k,b,s)}else e.gl.texSubImage2D(r,v,u,h,k,b,s)})),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(){return JW.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,e=this.gl;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}},{key:"unbind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,e=this.gl;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}},{key:"_getDataType",value:function(t){var e=t.data,n=t.compressed;return void 0!==n&&n?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof OX?{data:e.handle,dataType:"buffer"}:e instanceof UX?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}},{key:"_deduceParameters",value:function(t){var e=t.format,n=t.data,r=t.width,i=t.height,o=t.dataFormat,a=t.type,s=t.compressed,l=zX[e];o=o||l&&l.dataFormat,a=a||l&&l.types[0],s=s||l&&l.compressed;var u=this._deduceImageSize(n,r,i);return{dataFormat:o,type:a,compressed:s,width:r=u.width,height:i=u.height,format:e,data:n}}},{key:"_deduceImageSize",value:function(t,e,n){var r;return uX(r="undefined"!==typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:n}:{width:e>=0?e:1,height:n>=0?n:1},"Could not deduced texture size"),uX(void 0===e||r.width===e,"Deduced texture width does not match supplied width"),uX(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}},{key:"_setParameter",value:function(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:uX(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!nH(this.gl)&&(!(!this.width||!this.height)&&(!dX(this.width)||!dX(this.height)))}},{key:"_updateForNPOT",value:function(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(t,e){if(this._isNPOT())switch(t){case 10241:-1===ZX.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071)}return e}}],[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.format,r=e.linearFiltering,i=!0;return n&&(i=(i=i&&BX(t,n))&&(!r||jX(t,n))),i}}]),n}(yX),qX="";function GX(t,e){return uX("string"===typeof t),t=qX+t,new Promise((function(n,r){try{var i=new Image;i.onload=function(){return n(i)},i.onerror=function(){return r(new Error("Could not load image ".concat(t,".")))},i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(o){r(o)}}))}var WX,HX=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.Z)(this,n),rH(t),(i instanceof Promise||"string"===typeof i)&&(i={data:i}),"string"===typeof i.data&&(i=Object.assign({},i,{data:GX(i.data)})),(r=e.call(this,t,Object.assign({},i,{target:3553}))).initialize(i),Object.seal((0,Fo.Z)(r)),r}return(0,l.Z)(n,null,[{key:"isSupported",value:function(t,e){return VX.isSupported(t,e)}}]),n}(VX),XX="EXT_color_buffer_float",YX=(WX={},(0,c.Z)(WX,33189,{bpp:2}),(0,c.Z)(WX,33190,{gl2:!0,bpp:3}),(0,c.Z)(WX,36012,{gl2:!0,bpp:4}),(0,c.Z)(WX,36168,{bpp:1}),(0,c.Z)(WX,34041,{bpp:4}),(0,c.Z)(WX,35056,{gl2:!0,bpp:4}),(0,c.Z)(WX,36013,{gl2:!0,bpp:5}),(0,c.Z)(WX,32854,{bpp:2}),(0,c.Z)(WX,36194,{bpp:2}),(0,c.Z)(WX,32855,{bpp:2}),(0,c.Z)(WX,33321,{gl2:!0,bpp:1}),(0,c.Z)(WX,33330,{gl2:!0,bpp:1}),(0,c.Z)(WX,33329,{gl2:!0,bpp:1}),(0,c.Z)(WX,33332,{gl2:!0,bpp:2}),(0,c.Z)(WX,33331,{gl2:!0,bpp:2}),(0,c.Z)(WX,33334,{gl2:!0,bpp:4}),(0,c.Z)(WX,33333,{gl2:!0,bpp:4}),(0,c.Z)(WX,33323,{gl2:!0,bpp:2}),(0,c.Z)(WX,33336,{gl2:!0,bpp:2}),(0,c.Z)(WX,33335,{gl2:!0,bpp:2}),(0,c.Z)(WX,33338,{gl2:!0,bpp:4}),(0,c.Z)(WX,33337,{gl2:!0,bpp:4}),(0,c.Z)(WX,33340,{gl2:!0,bpp:8}),(0,c.Z)(WX,33339,{gl2:!0,bpp:8}),(0,c.Z)(WX,32849,{gl2:!0,bpp:3}),(0,c.Z)(WX,32856,{gl2:!0,bpp:4}),(0,c.Z)(WX,32857,{gl2:!0,bpp:4}),(0,c.Z)(WX,36220,{gl2:!0,bpp:4}),(0,c.Z)(WX,36238,{gl2:!0,bpp:4}),(0,c.Z)(WX,36975,{gl2:!0,bpp:4}),(0,c.Z)(WX,36214,{gl2:!0,bpp:8}),(0,c.Z)(WX,36232,{gl2:!0,bpp:8}),(0,c.Z)(WX,36226,{gl2:!0,bpp:16}),(0,c.Z)(WX,36208,{gl2:!0,bpp:16}),(0,c.Z)(WX,33325,{gl2:XX,bpp:2}),(0,c.Z)(WX,33327,{gl2:XX,bpp:4}),(0,c.Z)(WX,34842,{gl2:XX,bpp:8}),(0,c.Z)(WX,33326,{gl2:XX,bpp:4}),(0,c.Z)(WX,33328,{gl2:XX,bpp:8}),(0,c.Z)(WX,34836,{gl2:XX,bpp:16}),(0,c.Z)(WX,35898,{gl2:XX,bpp:4}),WX);function $X(t,e,n){var r=n[e];if(!r)return!1;var i=nH(t)&&r.gl2||r.gl1;return"string"===typeof i?t.getExtension(i):i}var KX=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.Z)(this,n),(r=e.call(this,t,i)).initialize(i),Object.seal((0,Fo.Z)(r)),r}return(0,l.Z)(n,[{key:"initialize",value:function(t){var e=t.format,n=t.width,r=void 0===n?1:n,i=t.height,o=void 0===i?1:i,a=t.samples,s=void 0===a?0:a;return uX(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&nH(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,e,r,o):this.gl.renderbufferStorage(36161,e,r,o),this.format=e,this.width=r,this.height=o,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*YX[this.format].bpp),this}},{key:"resize",value:function(t){var e=t.width,n=t.height;return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function(t){this.gl.bindRenderbuffer(36161,t)}},{key:"_syncHandle",value:function(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}],[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null},n=e.format;return!n||$X(t,n,YX)}},{key:"getSamplesForFormat",value:function(t,e){var n=e.format;return t.getInternalformatParameter(36161,n,32937)}}]),n}(yX),JX=6144,QX=6145,tY=6146,eY=34041,nY="clear: bad arguments";function rY(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.framebuffer,r=void 0===n?null:n,i=e.color,o=void 0===i?null:i,a=e.depth,s=void 0===a?null:a,l=e.stencil,u=void 0===l?null:l,c={};r&&(c.framebuffer=r);var h=0;o&&(h|=16384,!0!==o&&(c.clearColor=o)),s&&(h|=256,!0!==s&&(c.clearDepth=s)),u&&(h|=1024,!0!==s&&(c.clearStencil=s)),uX(0!==h,nY),qH(t,c,(function(){t.clear(h)}))}function iY(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.framebuffer,r=void 0===n?null:n,o=e.buffer,a=void 0===o?JX:o,s=e.drawBuffer,l=void 0===s?0:s,u=e.value,c=void 0===u?[0,0,0,0]:u;iH(t),qH(t,{framebuffer:r},(function(){switch(a){case JX:switch(c.constructor){case Int32Array:t.clearBufferiv(a,l,c);break;case Uint32Array:t.clearBufferuiv(a,l,c);break;case Float32Array:default:t.clearBufferfv(a,l,c)}break;case QX:t.clearBufferfv(QX,0,[c]);break;case tY:t.clearBufferiv(tY,0,[c]);break;case eY:var e=(0,i.Z)(c,2),n=e[0],r=e[1];t.clearBufferfi(eY,0,n,r);break;default:uX(!1,nY)}}))}var oY=[34069,34070,34071,34072,34073,34074],aY=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.Z)(this,n),rH(t),(r=e.call(this,t,Object.assign({},i,{target:34067}))).initialize(i),Object.seal((0,Fo.Z)(r)),r}return(0,l.Z)(n,[{key:"initialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.mipmaps,r=void 0===n||n,i=e.parameters,o=void 0===i?{}:i;return this.opts=e,this.setCubeMapImageData(e).then((function(){t.loaded=!0,r&&t.generateMipmap(e),t.setParameters(o)})),this}},{key:"subImage",value:function(t){var e=t.face,n=t.data,r=t.x,i=void 0===r?0:r,o=t.y,a=void 0===o?0:o,s=t.mipmapLevel,l=void 0===s?0:s;return this._subImage({target:e,data:n,x:i,y:a,mipmapLevel:l})}},{key:"setCubeMapImageData",value:function(){var t=(0,GV.Z)(of().mark((function t(e){var n,r,i,o,a,s,l,u,c,h,f,p,d,m=this;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.width,r=e.height,i=e.pixels,o=e.data,a=e.border,s=void 0===a?0:a,l=e.format,u=void 0===l?6408:l,c=e.type,h=void 0===c?5121:c,f=this.gl,p=i||o,t.next=5,Promise.all(oY.map((function(t){var e=p[t];return Promise.all(Array.isArray(e)?e:[e])})));case 5:d=t.sent,this.bind(),oY.forEach((function(t,e){d[e].length>1&&!1!==m.opts.mipmaps&&JW.warn("".concat(m.id," has mipmap and multiple LODs."))(),d[e].forEach((function(e,i){n&&r?f.texImage2D(t,i,u,n,r,s,u,h,e):f.texImage2D(t,i,u,u,h,e)}))})),this.unbind();case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"setImageDataForFace",value:function(t){var e=this,n=t.face,r=t.width,i=t.height,o=t.pixels,a=t.data,s=t.border,l=void 0===s?0:s,u=t.format,c=void 0===u?6408:u,h=t.type,f=void 0===h?5121:h,p=this.gl,d=o||a;return this.bind(),d instanceof Promise?d.then((function(r){return e.setImageDataForFace(Object.assign({},t,{face:n,data:r,pixels:r}))})):this.width||this.height?p.texImage2D(n,0,c,r,i,l,c,f,d):p.texImage2D(n,0,c,c,f,d),this}}]),n}(VX);aY.FACES=oY;var sY,lY=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.Z)(this,n),iH(t),i=Object.assign({depth:1},i,{target:32879,unpackFlipY:!1}),(r=e.call(this,t,i)).initialize(i),Object.seal((0,Fo.Z)(r)),r}return(0,l.Z)(n,[{key:"setImageData",value:function(t){var e=this,n=t.level,r=void 0===n?0:n,i=t.dataFormat,o=void 0===i?6408:i,a=t.width,s=t.height,l=t.depth,u=void 0===l?1:l,c=t.border,h=void 0===c?0:c,f=t.format,p=t.type,d=void 0===p?5121:p,m=t.offset,g=void 0===m?0:m,v=t.data,y=t.parameters,_=void 0===y?{}:y;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),qH(this.gl,_,(function(){ArrayBuffer.isView(v)&&e.gl.texImage3D(e.target,r,o,a,s,u,h,f,d,v),v instanceof OX&&(e.gl.bindBuffer(35052,v.handle),e.gl.texImage3D(e.target,r,o,a,s,u,h,f,d,g))})),v&&v.byteLength)this._trackAllocatedMemory(v.byteLength,"Texture");else{var x=DX[this.dataFormat]||4,b=FX[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*x*b,"Texture")}return this.loaded=!0,this}}],[{key:"isSupported",value:function(t){return nH(t)}}]),n}(VX);function uY(t,e){uX(t instanceof HX||t instanceof aY||t instanceof lY);var n=t.constructor,r=t.gl,i=t.width,o=t.height,a=t.format,s=t.type,l=t.dataFormat,u=t.border,c=t.mipmaps;return new n(r,Object.assign({width:i,height:o,format:a,type:s,dataFormat:l,border:u,mipmaps:c},e))}function cY(t,e){var n=t.gl,r=t.width,i=t.height,o=t.id;return new ZY(n,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:r,height:i,attachments:(0,c.Z)({},36064,t)}))}function hY(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.sourceX,r=void 0===n?0:n,i=e.sourceY,o=void 0===i?0:i,a=e.sourceFormat,s=void 0===a?6408:a,l=e.sourceAttachment,u=void 0===l?36064:l,c=e.target,h=void 0===c?null:c,f=e.sourceWidth,p=e.sourceHeight,d=e.sourceType,m=pY(t),g=m.framebuffer,v=m.deleteFramebuffer;uX(g);var y=g.gl,_=g.handle,x=g.attachments;f=f||g.width,p=p||g.height,36064===u&&null===_&&(u=1028),uX(x[u]),h=dY(h,d=d||x[u].type,s,f,p),d=d||bX(h);var b=y.bindFramebuffer(36160,_);return y.readPixels(r,o,f,p,s,d,h),y.bindFramebuffer(36160,b||null),v&&g.delete(),h}function fY(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.sourceAttachment,r=void 0===n?36064:n,i=e.targetMaxHeight,o=void 0===i?Number.MAX_SAFE_INTEGER:i,a=hY(t,{sourceAttachment:r}),s=t.width,l=t.height;l>o;){var u=SX({data:a,width:s,height:l});a=u.data,s=u.width,l=u.height}kX({data:a,width:s,height:l});var c=document.createElement("canvas");c.width=s,c.height=l;var h=c.getContext("2d"),f=h.createImageData(s,l);return f.data.set(a),h.putImageData(f,0,0),c.toDataURL()}function pY(t){return t instanceof ZY?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:cY(t),deleteFramebuffer:!0}}function dY(t,e,n,r,i){if(t)return t;var o=wX(e=e||5121,{clamped:!1}),a=function(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return uX(!1),0}}(n);return new o(r*i*a)}var mY="WEBGL2",gY="VERTEX_ARRAY_OBJECT",vY="TIMER_QUERY",yY="INSTANCED_RENDERING",_Y="MULTIPLE_RENDER_TARGETS",xY="ELEMENT_INDEX_UINT32",bY="BLEND_EQUATION_MINMAX",wY="FLOAT_BLEND",kY="COLOR_ENCODING_SRGB",SY="TEXTURE_DEPTH",EY="TEXTURE_FLOAT",IY="TEXTURE_HALF_FLOAT",CY="TEXTURE_FILTER_LINEAR_FLOAT",AY="TEXTURE_FILTER_LINEAR_HALF_FLOAT",PY="TEXTURE_FILTER_ANISOTROPIC",TY="COLOR_ATTACHMENT_RGBA32F",MY="COLOR_ATTACHMENT_FLOAT",LY="COLOR_ATTACHMENT_HALF_FLOAT",RY="GLSL_FRAG_DATA",NY="GLSL_FRAG_DEPTH",OY="GLSL_DERIVATIVES",zY="GLSL_TEXTURE_LOD";var DY=(sY={},(0,c.Z)(sY,mY,[!1,!0]),(0,c.Z)(sY,gY,["OES_vertex_array_object",!0]),(0,c.Z)(sY,vY,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),(0,c.Z)(sY,yY,["ANGLE_instanced_arrays",!0]),(0,c.Z)(sY,_Y,["WEBGL_draw_buffers",!0]),(0,c.Z)(sY,xY,["OES_element_index_uint",!0]),(0,c.Z)(sY,bY,["EXT_blend_minmax",!0]),(0,c.Z)(sY,wY,["EXT_float_blend"]),(0,c.Z)(sY,kY,["EXT_sRGB",!0]),(0,c.Z)(sY,SY,["WEBGL_depth_texture",!0]),(0,c.Z)(sY,EY,["OES_texture_float",!0]),(0,c.Z)(sY,IY,["OES_texture_half_float",!0]),(0,c.Z)(sY,CY,["OES_texture_float_linear"]),(0,c.Z)(sY,AY,["OES_texture_half_float_linear"]),(0,c.Z)(sY,PY,["EXT_texture_filter_anisotropic"]),(0,c.Z)(sY,TY,[function(t){var e=new HX(t,{format:6408,type:5126,dataFormat:6408}),n=new ZY(t,{id:"test-framebuffer",check:!1,attachments:(0,c.Z)({},36064,e)}),r=n.getStatus();return e.delete(),n.delete(),36053===r},"EXT_color_buffer_float"]),(0,c.Z)(sY,MY,[!1,"EXT_color_buffer_float"]),(0,c.Z)(sY,LY,["EXT_color_buffer_half_float"]),(0,c.Z)(sY,RY,["WEBGL_draw_buffers",!0]),(0,c.Z)(sY,NY,["EXT_frag_depth",!0]),(0,c.Z)(sY,OY,["OES_standard_derivatives",!0]),(0,c.Z)(sY,zY,["EXT_shader_texture_lod",!0]),sY);function FY(t,e){return(e=Array.isArray(e)?e:[e]).every((function(e){return BY(t,e)}))}function BY(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function(t,e){var n,r=DY[e];uX(r,e);var i=nH(t)&&r[1]||r[0];if("function"===typeof i)n=i(t);else if(Array.isArray(i)){n=!0;var o,a=(0,ch.Z)(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;n=n&&Boolean(t.getExtension(s))}}catch(l){a.e(l)}finally{a.f()}}else"string"===typeof i?n=Boolean(t.getExtension(i)):"boolean"===typeof i?n=i:uX(!1);return n}(t,e)),t.luma.caps[e]||JW.log(2,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}var jY="Multiple render targets not supported",ZY=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.Z)(this,n),(r=e.call(this,t,i)).width=null,r.height=null,r.attachments={},r.readBuffer=36064,r.drawBuffers=[36064],r.ownResources=[],r.initialize(i),Object.seal((0,Fo.Z)(r)),r}return(0,l.Z)(n,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){var t=iH(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){var t=iH(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}},{key:"initialize",value:function(t){var e=t.width,n=void 0===e?1:e,r=t.height,i=void 0===r?1:r,o=t.attachments,a=void 0===o?null:o,s=t.color,l=void 0===s||s,u=t.depth,c=void 0===u||u,h=t.stencil,f=void 0!==h&&h,p=t.check,d=void 0===p||p,m=t.readBuffer,g=void 0===m?void 0:m,v=t.drawBuffers,y=void 0===v?void 0:v;if(uX(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,a)for(var _ in a){var x=a[_];(Array.isArray(x)?x[0]:x).resize({width:n,height:i})}else a=this._createDefaultAttachments(l,c,f,n,i);this.update({clearAttachments:!0,attachments:a,readBuffer:g,drawBuffers:y}),a&&d&&this.checkStatus()}},{key:"delete",value:function(){var t,e=(0,ch.Z)(this.ownResources);try{for(e.s();!(t=e.n()).done;){t.value.delete()}}catch(r){e.e(r)}finally{e.f()}return(0,qU.Z)((0,GU.Z)(n.prototype),"delete",this).call(this),this}},{key:"update",value:function(t){var e=t.attachments,n=void 0===e?{}:e,r=t.readBuffer,i=t.drawBuffers,o=t.clearAttachments,a=void 0!==o&&o,s=t.resizeAttachments,l=void 0===s||s;this.attach(n,{clearAttachments:a,resizeAttachments:l});var u=this.gl,c=u.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),u.bindFramebuffer(36160,c||null),this}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,n=t.height;if(null===this.handle)return uX(void 0===e&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var r in void 0===e&&(e=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),e!==this.width&&n!==this.height&&JW.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(e,"x").concat(n))(),this.attachments)this.attachments[r].resize({width:e,height:n});return this.width=e,this.height=n,this}},{key:"attach",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.clearAttachments,o=void 0!==r&&r,a=n.resizeAttachments,s=void 0===a||a,l={};o&&Object.keys(this.attachments).forEach((function(t){l[t]=null})),Object.assign(l,t);var u=this.gl.bindFramebuffer(36160,this.handle);for(var c in l){uX(void 0!==c,"Misspelled framebuffer binding point?");var h=Number(c),f=l[h],p=f;if(p)if(p instanceof KX)this._attachRenderbuffer({attachment:h,renderbuffer:p});else if(Array.isArray(f)){var d=(0,i.Z)(f,3),m=d[0],g=d[1],v=void 0===g?0:g,y=d[2],_=void 0===y?0:y;p=m,this._attachTexture({attachment:h,texture:m,layer:v,level:_})}else this._attachTexture({attachment:h,texture:p,layer:0,level:0});else this._unattach(h);s&&p&&p.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,u||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter((function(t){return!e.attachments[t]})).forEach((function(t){delete e.attachments[t]}))}},{key:"checkStatus",value:function(){this.gl;var t=this.getStatus();if(36053!==t)throw new Error(UY(t));return this}},{key:"getStatus",value:function(){var t=this.gl,e=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,e||null),n}},{key:"clear",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.color,r=e.depth,i=e.stencil,o=e.drawBuffers,a=void 0===o?[]:o,s=this.gl.bindFramebuffer(36160,this.handle);return(n||r||i)&&rY(this.gl,{color:n,depth:r,stencil:i}),a.forEach((function(e,n){iY(t.gl,{drawBuffer:n,value:e})})),this.gl.bindFramebuffer(36160,s||null),this}},{key:"readPixels",value:function(){return JW.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function(){return JW.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function(){return JW.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function(){return JW.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function(){return JW.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function(){return JW.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function(t){var e=t.attachments,n=void 0===e?[]:e,r=t.x,i=void 0===r?0:r,o=t.y,a=void 0===o?0:o,s=t.width,l=t.height,u=iH(this.gl),c=u.bindFramebuffer(36008,this.handle);return 0===i&&0===a&&void 0===s&&void 0===l?u.invalidateFramebuffer(36008,n):u.invalidateFramebuffer(36008,n,i,a,s,l),u.bindFramebuffer(36008,c),this}},{key:"getAttachmentParameter",value:function(t,e,n){var r=this._getAttachmentParameterFallback(e);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=hX(this.gl,r)),r}},{key:"getAttachmentParameters",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],i={},o=(0,ch.Z)(r);try{for(o.s();!(t=o.n()).done;){var a=t.value,s=n?hX(this.gl,a):a;i[s]=this.getAttachmentParameter(e,a,n)}}catch(l){o.e(l)}finally{o.f()}return i}},{key:"getParameters",value:function(){for(var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=Object.keys(this.attachments),n={},r=0,i=e;r<i.length;r++){var o=i[r],a=Number(o),s=t?hX(this.gl,a):a;n[s]=this.getAttachmentParameters(a,t)}return n}},{key:"show",value:function(){return"undefined"!==typeof window&&window.open(fY(this),"luma-debug-texture"),this}},{key:"log",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t>JW.level||"undefined"===typeof window)return this;e=e||"Framebuffer ".concat(this.id);var n=fY(this,{targetMaxHeight:100});return JW.image({logLevel:t,message:e,image:n},e)(),this}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?36160:e;return this.gl.bindFramebuffer(n,this.handle),this}},{key:"unbind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?36160:e;return this.gl.bindFramebuffer(n,null),this}},{key:"_createDefaultAttachments",value:function(t,e,n,r,i){var o,a=null;t&&((a=a||{})[36064]=new HX(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:i,mipmaps:!1,parameters:(o={},(0,c.Z)(o,10241,9729),(0,c.Z)(o,10240,9729),(0,c.Z)(o,10242,33071),(0,c.Z)(o,10243,33071),o)}),this.ownResources.push(a[36064]));return e&&n?((a=a||{})[33306]=new KX(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(a[33306])):e?((a=a||{})[36096]=new KX(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:i}),this.ownResources.push(a[36096])):n&&uX(!1),a}},{key:"_unattach",value:function(t){var e=this.attachments[t];e&&(e instanceof KX?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}},{key:"_attachRenderbuffer",value:function(t){var e=t.attachment,n=void 0===e?36064:e,r=t.renderbuffer;this.gl.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}},{key:"_attachTexture",value:function(t){var e=t.attachment,n=void 0===e?36064:e,r=t.texture,i=t.layer,o=t.level,a=this.gl;switch(a.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:iH(a).framebufferTextureLayer(36160,n,r.target,o,i);break;case 34067:var s=function(t){return t<34069?t+34069:t}(i);a.framebufferTexture2D(36160,n,s,r.handle,o);break;case 3553:a.framebufferTexture2D(36160,n,3553,r.handle,o);break;default:uX(!1,"Illegal texture type")}a.bindTexture(r.target,null),this.attachments[n]=r}},{key:"_setReadBuffer",value:function(t){var e,n=nH(e=this.gl)?e:null;n?n.readBuffer(t):uX(36064===t||1029===t,jY),this.readBuffer=t}},{key:"_setDrawBuffers",value:function(t){var e=this.gl,n=iH(e);if(n)n.drawBuffers(t);else{var r=e.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(t):uX(1===t.length&&(36064===t[0]||1029===t[0]),jY)}this.drawBuffers=t}},{key:"_getAttachmentParameterFallback",value:function(t){var e=function(t){for(var e in t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},DY)void 0===t.luma.caps[e]&&(t.luma.caps[e]=BY(t,e));return t.luma.caps}(this.gl);switch(t){case 36052:return e.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.WEBGL2?null:8;case 33297:return e.WEBGL2?null:5125;case 33296:return e.WEBGL2||e.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(t){return this.gl.bindFramebuffer(36160,t)}}],[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.colorBufferFloat,r=e.colorBufferHalfFloat,i=!0;return n&&(i=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),r&&(i=i&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),i}},{key:"getDefaultFramebuffer",value:function(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new n(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}}]),n}(yX);function UY(t){return(ZY.STATUS||{})[t]||"Framebuffer error ".concat(t)}var VY;ZY.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];var qY=(VY={},(0,c.Z)(VY,5126,o$.bind(null,"uniform1fv",$Y,1,a$)),(0,c.Z)(VY,35664,o$.bind(null,"uniform2fv",$Y,2,a$)),(0,c.Z)(VY,35665,o$.bind(null,"uniform3fv",$Y,3,a$)),(0,c.Z)(VY,35666,o$.bind(null,"uniform4fv",$Y,4,a$)),(0,c.Z)(VY,5124,o$.bind(null,"uniform1iv",KY,1,a$)),(0,c.Z)(VY,35667,o$.bind(null,"uniform2iv",KY,2,a$)),(0,c.Z)(VY,35668,o$.bind(null,"uniform3iv",KY,3,a$)),(0,c.Z)(VY,35669,o$.bind(null,"uniform4iv",KY,4,a$)),(0,c.Z)(VY,35670,o$.bind(null,"uniform1iv",KY,1,a$)),(0,c.Z)(VY,35671,o$.bind(null,"uniform2iv",KY,2,a$)),(0,c.Z)(VY,35672,o$.bind(null,"uniform3iv",KY,3,a$)),(0,c.Z)(VY,35673,o$.bind(null,"uniform4iv",KY,4,a$)),(0,c.Z)(VY,35674,o$.bind(null,"uniformMatrix2fv",$Y,4,s$)),(0,c.Z)(VY,35675,o$.bind(null,"uniformMatrix3fv",$Y,9,s$)),(0,c.Z)(VY,35676,o$.bind(null,"uniformMatrix4fv",$Y,16,s$)),(0,c.Z)(VY,35678,i$),(0,c.Z)(VY,35680,i$),(0,c.Z)(VY,5125,o$.bind(null,"uniform1uiv",JY,1,a$)),(0,c.Z)(VY,36294,o$.bind(null,"uniform2uiv",JY,2,a$)),(0,c.Z)(VY,36295,o$.bind(null,"uniform3uiv",JY,3,a$)),(0,c.Z)(VY,36296,o$.bind(null,"uniform4uiv",JY,4,a$)),(0,c.Z)(VY,35685,o$.bind(null,"uniformMatrix2x3fv",$Y,6,s$)),(0,c.Z)(VY,35686,o$.bind(null,"uniformMatrix2x4fv",$Y,8,s$)),(0,c.Z)(VY,35687,o$.bind(null,"uniformMatrix3x2fv",$Y,6,s$)),(0,c.Z)(VY,35688,o$.bind(null,"uniformMatrix3x4fv",$Y,12,s$)),(0,c.Z)(VY,35689,o$.bind(null,"uniformMatrix4x2fv",$Y,8,s$)),(0,c.Z)(VY,35690,o$.bind(null,"uniformMatrix4x3fv",$Y,12,s$)),(0,c.Z)(VY,35678,i$),(0,c.Z)(VY,35680,i$),(0,c.Z)(VY,35679,i$),(0,c.Z)(VY,35682,i$),(0,c.Z)(VY,36289,i$),(0,c.Z)(VY,36292,i$),(0,c.Z)(VY,36293,i$),(0,c.Z)(VY,36298,i$),(0,c.Z)(VY,36299,i$),(0,c.Z)(VY,36300,i$),(0,c.Z)(VY,36303,i$),(0,c.Z)(VY,36306,i$),(0,c.Z)(VY,36307,i$),(0,c.Z)(VY,36308,i$),(0,c.Z)(VY,36311,i$),VY),GY={},WY={},HY={},XY=[0];function YY(t,e,n,r){1===e&&"boolean"===typeof t&&(t=t?1:0),Number.isFinite(t)&&(XY[0]=t,t=XY);var i=t.length;if(i%e&&JW.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;var o=r[i];o||(o=new n(i),r[i]=o);for(var a=0;a<i;a++)o[a]=t[a];return o}function $Y(t,e){return YY(t,e,Float32Array,GY)}function KY(t,e){return YY(t,e,Int32Array,WY)}function JY(t,e){return YY(t,e,Uint32Array,HY)}function QY(t,e,n){var r=qY[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function t$(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};var e=t.match(/([^[]*)(\[[0-9]+\])?/);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function e$(t,e,n){for(var r in t){var i=t[r];if((!n||Boolean(n[r]))&&!n$(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function n$(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function(t){if(0===t.length)return!1;for(var e=Math.min(t.length,16),n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!isFinite(t)||(!0===t||!1===t||(t instanceof VX||(t instanceof KX||t instanceof ZY&&Boolean(t.texture))))}function r$(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e])for(var r=t[e],i=0,o=n.length;i<o;++i)r[i]=n[i];else t[e]=n.slice();else t[e]=n}function i$(){var t=null;return function(e,n,r){var i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function o$(t,e,n,r){var i=null,o=null;return function(a,s,l){var u=e(l,n),c=u.length,h=!1;if(null===i)i=new Float32Array(c),o=c,h=!0;else{uX(o===c,"Uniform length cannot change.");for(var f=0;f<c;++f)if(u[f]!==i[f]){h=!0;break}}return h&&(r(a,t,s,u),i.set(u)),h}}function a$(t,e,n,r){t[e](n,r)}function s$(t,e,n,r){t[e](n,!1,r)}function l$(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}function u$(t,e,n,r){for(var i=t.split(/\r?\n/),o={},a={},s=r||l$(e)||"(unnamed)",l="".concat(function(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(s),u=0;u<i.length;u++){var c=i[u];if(!(c.length<=1)){var h=c.split(":"),f=h[0],p=parseInt(h[2],10);if(isNaN(p))throw new Error("GLSL compilation error in ".concat(l,": ").concat(t));"WARNING"!==f?o[p]=c:a[p]=c}}var d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((function(t,r){var o=String(r+e),a=o.length;return h$(o,i-a)+n+t}))}(e);return{shaderName:l,errors:c$(o,d),warnings:c$(a,d)}}function c$(t,e){for(var n="",r=0;r<e.length;r++){var i=e[r];if((t[r+3]||t[r+2]||t[r+1])&&(n+="".concat(i,"\n"),t[r+1])){var o=t[r+1],a=o.split(":",3),s=a[0],l=parseInt(a[1],10)||0,u=o.substring(a.join(":").length+1).trim();n+=h$("^^^ ".concat(s,": ").concat(u,"\n\n"),l)}}return n}function h$(t,e){for(var n="",r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}var f$,p$=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t,r){var i;(0,s.Z)(this,n),rH(t),uX("string"===typeof r.source,"Shader: GLSL source code must be a JavaScript string");var o=l$(r.source,null)||r.id||pX("unnamed ".concat(n.getTypeName(r.shaderType)));return(i=e.call(this,t,{id:o})).shaderType=r.shaderType,i.source=r.source,i.initialize(r),i}return(0,l.Z)(n,[{key:"initialize",value:function(t){var e=t.source,n=l$(e,null);n&&(this.id=pX(n)),this._compile(e)}},{key:"getParameter",value:function(t){return this.gl.getShaderParameter(this.handle,t)}},{key:"toString",value:function(){return"".concat(n.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return l$(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}},{key:"_compile",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;t.startsWith("#version ")||(t="#version 100\n".concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);var e=this.getParameter(35713);if(!e){var n=this.gl.getShaderInfoLog(this.handle),r=u$(n,this.source,this.shaderType,this.id),i=r.shaderName,o=r.errors,a=r.warnings;throw JW.error("GLSL compilation errors in ".concat(i,"\n").concat(o))(),JW.warn("GLSL compilation warnings in ".concat(i,"\n").concat(a))(),new Error("GLSL compilation errors in ".concat(i))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}],[{key:"getTypeName",value:function(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return uX(!1),"unknown"}}}]),n}(yX),d$=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t,r){return(0,s.Z)(this,n),"string"===typeof r&&(r={source:r}),e.call(this,t,Object.assign({},r,{shaderType:35633}))}return(0,l.Z)(n,[{key:"_createHandle",value:function(){return this.gl.createShader(35633)}}]),n}(p$),m$=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t,r){return(0,s.Z)(this,n),"string"===typeof r&&(r={source:r}),e.call(this,t,Object.assign({},r,{shaderType:35632}))}return(0,l.Z)(n,[{key:"_createHandle",value:function(){return this.gl.createShader(35632)}}]),n}(p$),g$=5126,v$=5124,y$=5125,_$=(f$={},(0,c.Z)(f$,g$,[g$,1,"float"]),(0,c.Z)(f$,35664,[g$,2,"vec2"]),(0,c.Z)(f$,35665,[g$,3,"vec3"]),(0,c.Z)(f$,35666,[g$,4,"vec4"]),(0,c.Z)(f$,v$,[v$,1,"int"]),(0,c.Z)(f$,35667,[v$,2,"ivec2"]),(0,c.Z)(f$,35668,[v$,3,"ivec3"]),(0,c.Z)(f$,35669,[v$,4,"ivec4"]),(0,c.Z)(f$,y$,[y$,1,"uint"]),(0,c.Z)(f$,36294,[y$,2,"uvec2"]),(0,c.Z)(f$,36295,[y$,3,"uvec3"]),(0,c.Z)(f$,36296,[y$,4,"uvec4"]),(0,c.Z)(f$,35670,[g$,1,"bool"]),(0,c.Z)(f$,35671,[g$,2,"bvec2"]),(0,c.Z)(f$,35672,[g$,3,"bvec3"]),(0,c.Z)(f$,35673,[g$,4,"bvec4"]),(0,c.Z)(f$,35674,[g$,8,"mat2"]),(0,c.Z)(f$,35685,[g$,8,"mat2x3"]),(0,c.Z)(f$,35686,[g$,8,"mat2x4"]),(0,c.Z)(f$,35675,[g$,12,"mat3"]),(0,c.Z)(f$,35687,[g$,12,"mat3x2"]),(0,c.Z)(f$,35688,[g$,12,"mat3x4"]),(0,c.Z)(f$,35676,[g$,16,"mat4"]),(0,c.Z)(f$,35689,[g$,16,"mat4x2"]),(0,c.Z)(f$,35690,[g$,16,"mat4x3"]),f$);function x$(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return uX(!1),0}}function b$(t){var e=_$[t];if(!e)return null;var n=(0,i.Z)(e,2);return{type:n[0],components:n[1]}}function w$(t,e){switch(t){case 5120:case 5121:case 5122:case 5123:t=g$}for(var n in _$){var r=(0,i.Z)(_$[n],3),o=r[0],a=r[1],s=r[2];if(o===t&&a===e)return{glType:n,name:s}}return null}var k$=function(){function t(e){(0,s.Z)(this,t),this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}return(0,l.Z)(t,[{key:"getAttributeInfo",value:function(t){var e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}},{key:"getAttributeLocation",value:function(t){var e=this.getAttributeInfo(t);return e?e.location:-1}},{key:"getAttributeAccessor",value:function(t){var e=this.getAttributeInfo(t);return e?e.accessor:null}},{key:"getVaryingInfo",value:function(t){var e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}},{key:"getVaryingIndex",value:function(t){var e=this.getVaryingInfo();return e?e.location:-1}},{key:"getVaryingAccessor",value:function(t){var e=this.getVaryingInfo();return e?e.accessor:null}},{key:"_readAttributesFromProgram",value:function(t){for(var e=t.gl,n=e.getProgramParameter(t.handle,35721),r=0;r<n;r++){var i=e.getActiveAttrib(t.handle,r),o=i.name,a=i.type,s=i.size,l=e.getAttribLocation(t.handle,o);l>=0&&this._addAttribute(l,o,a,s)}this.attributeInfos.sort((function(t,e){return t.location-e.location}))}},{key:"_readVaryingsFromProgram",value:function(t){var e=t.gl;if(nH(e)){for(var n=e.getProgramParameter(t.handle,35971),r=0;r<n;r++){var i=e.getTransformFeedbackVarying(t.handle,r),o=i.name,a=i.type,s=i.size;this._addVarying(r,o,a,s)}this.varyingInfos.sort((function(t,e){return t.location-e.location}))}}},{key:"_addAttribute",value:function(t,e,n,r){var i=b$(n),o={type:i.type,size:r*i.components};this._inferProperties(t,e,o);var a={location:t,name:e,accessor:new MX(o)};this.attributeInfos.push(a),this.attributeInfosByLocation[t]=a,this.attributeInfosByName[a.name]=a}},{key:"_inferProperties",value:function(t,e,n){/instance/i.test(e)&&(n.divisor=1)}},{key:"_addVarying",value:function(t,e,n,r){var i=b$(n),o=i.type,a=i.components,s={location:t,name:e,accessor:new MX({type:o,size:r*a})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}]),t}(),S$=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],E$=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.Z)(this,n),(r=e.call(this,t,i)).stubRemovedMethods("Program","v6.0",S$),r._isCached=!1,r.initialize(i),Object.seal((0,Fo.Z)(r)),r._setId(i.id),r}return(0,l.Z)(n,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.hash,n=t.vs,r=t.fs,i=t.varyings,o=t.bufferMode,a=void 0===o?35981:o;return this.hash=e||"",this.vs="string"===typeof n?new d$(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs="string"===typeof r?new m$(this.gl,{id:"".concat(t.id,"-fs"),source:r}):r,uX(this.vs instanceof d$),uX(this.fs instanceof m$),this.uniforms={},this._textureUniforms={},i&&i.length>0&&(iH(this.gl),this.varyings=i,this.gl2.transformFeedbackVaryings(this.handle,i,a)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new k$(this),this.setProps(t)}},{key:"delete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:(0,qU.Z)((0,GU.Z)(n.prototype),"delete",this).call(this,t)}},{key:"setProps",value:function(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}},{key:"draw",value:function(t){var e=this,n=t.logPriority,r=t.drawMode,i=void 0===r?4:r,o=t.vertexCount,a=t.offset,s=void 0===a?0:a,l=t.start,u=t.end,c=t.isIndexed,h=void 0!==c&&c,f=t.indexType,p=void 0===f?5123:f,d=t.instanceCount,m=void 0===d?0:d,g=t.isInstanced,v=void 0===g?m>0:g,y=t.vertexArray,_=void 0===y?null:y,x=t.transformFeedback,b=t.framebuffer,w=t.parameters,k=void 0===w?{}:w,S=t.uniforms,E=t.samplers;if((S||E)&&(JW.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(S||{})),JW.priority>=n){var I=b?b.id:"default",C="mode=".concat(hX(this.gl,i)," verts=").concat(o," ")+"instances=".concat(m," indexType=").concat(hX(this.gl,p)," ")+"isInstanced=".concat(v," isIndexed=").concat(h," ")+"Framebuffer=".concat(I);JW.log(n,C)()}return uX(_),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===o||v&&0===m)&&(_.bindForDraw(o,m,(function(){if(void 0!==b&&(k=Object.assign({},k,{framebuffer:b})),x){var t=x$(i);x.begin(t)}e._bindTextures(),qH(e.gl,k,(function(){h&&v?e.gl2.drawElementsInstanced(i,o,p,s,m):h&&nH(e.gl)&&!isNaN(l)&&!isNaN(u)?e.gl2.drawRangeElements(i,l,u,o,p,s):h?e.gl.drawElements(i,o,p,s):v?e.gl2.drawArraysInstanced(i,s,o,m):e.gl.drawArrays(i,s,o)})),x&&x.end()})),!0)}},{key:"setUniforms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var e in JW.priority>=2&&e$(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle),t){var n=t[e],r=this._uniformSetters[e];if(r){var i=n,o=!1;if(i instanceof ZY&&(i=i.texture),i instanceof VX)if(o=this.uniforms[e]!==n){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);var a=i,s=r.textureIndex;a.bind(s),i=s,this._textureUniforms[e]=a}else i=r.textureIndex;else this._textureUniforms[e]&&delete this._textureUniforms[e];(r(i)||o)&&r$(this.uniforms,e,n)}}return this}},{key:"_areTexturesRenderable",value:function(){var t=!0;for(var e in this._textureUniforms){var n=this._textureUniforms[e];n.update(),t=t&&n.loaded}return t}},{key:"_bindTextures",value:function(){for(var t in this._textureUniforms){var e=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(e)}}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(t){var e,n=this.gl.getAttachedShaders(t),r={},i=(0,ch.Z)(n);try{for(i.s();!(e=i.n()).done;){var o=e.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new d$({handle:o});break;case 35632:r.fs=new m$({handle:o})}}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"_getParameter",value:function(t){return this.gl.getProgramParameter(this.handle,t)}},{key:"_setId",value:function(t){if(!t){var e=this._getName();this.id=pX(e)}}},{key:"_getName",value:function(){var t=this.vs.getName()||this.fs.getName();return t=(t=t.replace(/shader/i,""))?"".concat(t,"-program"):"program"}},{key:"_compileAndLink",value:function(){var t=this.gl;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),JW.time(4,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),JW.timeEnd(4,"linkProgram for ".concat(this._getName()))(),t.debug||JW.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var t=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var e=0;e<this._uniformCount;e++){var n=this.gl.getActiveUniform(this.handle,e),r=t$(n.name).name,i=t.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=QY(t,i,n),n.size>1)for(var o=0;o<n.size;o++)i=t.getUniformLocation(this.handle,"".concat(r,"[").concat(o,"]")),this._uniformSetters["".concat(r,"[").concat(o,"]")]=QY(t,i,n)}this._textureIndexCounter=0}},{key:"getActiveUniforms",value:function(t,e){return this.gl2.getActiveUniforms(this.handle,t,e)}},{key:"getUniformBlockIndex",value:function(t){return this.gl2.getUniformBlockIndex(this.handle,t)}},{key:"getActiveUniformBlockParameter",value:function(t,e){return this.gl2.getActiveUniformBlockParameter(this.handle,t,e)}},{key:"uniformBlockBinding",value:function(t,e){this.gl2.uniformBlockBinding(this.handle,t,e)}}]),n}(yX),I$=function(){function t(e){(0,s.Z)(this,t),this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}return(0,l.Z)(t,[{key:"addDefaultModule",value:function(t){this._defaultModules.find((function(e){return e.name===t.name}))||this._defaultModules.push(t),this.stateHash++}},{key:"removeDefaultModule",value:function(t){var e="string"===typeof t?t:t.name;this._defaultModules=this._defaultModules.filter((function(t){return t.name!==e})),this.stateHash++}},{key:"addShaderHook",value:function(t,e){e&&(t=Object.assign(e,{hook:t})),this._hookFunctions.push(t),this.stateHash++}},{key:"get",value:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.vs,i=void 0===r?"":r,o=n.fs,a=void 0===o?"":o,s=n.defines,l=void 0===s?{}:s,u=n.inject,c=void 0===u?{}:u,h=n.varyings,f=void 0===h?[]:h,p=n.bufferMode,d=void 0===p?35981:p,m=n.transpileToGLSL100,g=void 0!==m&&m,v=this._getModuleList(n.modules),y=this._getHash(i),_=this._getHash(a),x=v.map((function(t){return e._getHash(t.name)})).sort(),b=f.map((function(t){return e._getHash(t)})),w=Object.keys(l).sort(),k=Object.keys(c).sort(),S=[],E=[],I=(0,ch.Z)(w);try{for(I.s();!(t=I.n()).done;){var C=t.value;S.push(this._getHash(C)),S.push(this._getHash(l[C]))}}catch(R){I.e(R)}finally{I.f()}var A,P=(0,ch.Z)(k);try{for(P.s();!(A=P.n()).done;){var T=A.value;E.push(this._getHash(T)),E.push(this._getHash(c[T]))}}catch(R){P.e(R)}finally{P.f()}var M="".concat(y,"/").concat(_,"D").concat(S.join("/"),"M").concat(x.join("/"),"I").concat(E.join("/"),"V").concat(b.join("/"),"H").concat(this.stateHash,"B").concat(d).concat(g?"T":"");if(!this._programCache[M]){var L=YW(this.gl,{vs:i,fs:a,modules:v,inject:c,defines:l,hookFunctions:this._hookFunctions,transpileToGLSL100:g});this._programCache[M]=new E$(this.gl,{hash:M,vs:L.vs,fs:L.fs,varyings:f,bufferMode:d}),this._getUniforms[M]=L.getUniforms||function(t){},this._useCounts[M]=0}return this._useCounts[M]++,this._programCache[M]}},{key:"getUniforms",value:function(t){return this._getUniforms[t.hash]||null}},{key:"release",value:function(t){var e=t.hash;this._useCounts[e]--,0===this._useCounts[e]&&(this._programCache[e].delete(),delete this._programCache[e],delete this._getUniforms[e],delete this._useCounts[e])}},{key:"_getHash",value:function(t){return void 0===this._hashes[t]&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}},{key:"_getModuleList",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=new Array(this._defaultModules.length+t.length),n={},r=0,i=0,o=this._defaultModules.length;i<o;++i){var a=this._defaultModules[i],s=a.name;e[r++]=a,n[s]=!0}for(var l=0,u=t.length;l<u;++l){var c=t[l],h=c.name;n[h]||(e[r++]=c,n[h]=!0)}return e.length=r,e}}],[{key:"getDefaultProgramManager",value:function(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new t(e),e.luma.defaultProgramManager}}]),t}(),C$={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},A$="#define SMOOTH_EDGE_RADIUS 0.5",P$={name:"geometry",vs:"\n".concat(A$,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(A$,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},T$=Object.keys(CU).map((function(t){return"const int COORDINATE_SYSTEM_".concat(t," = ").concat(CU[t],";")})).join(""),M$=Object.keys(AU).map((function(t){return"const int PROJECTION_MODE_".concat(t," = ").concat(AU[t],";")})).join(""),L$=Object.keys(PU).map((function(t){return"const int UNIT_".concat(t.toUpperCase()," = ").concat(PU[t],";")})).join(""),R$="".concat(T$,"\n").concat(M$,"\n").concat(L$,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n    \n    if (geometry.position.w == 0.0) {\n      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);\n      return 1.0 / cos(radians(y));\n    }\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n");function N$(t,e){if(t===e)return!0;if(Array.isArray(t)){var n=t.length;if(!e||e.length!==n)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function O$(t){var e,n={};return function(r){for(var i in r)if(!N$(r[i],n[i])){e=t(r),n=r;break}return e}}var z$=[0,0,0,0],D$=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],F$=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],B$=[0,0,0],j$=[0,0,0],Z$=O$((function(t){var e=t.viewport,n=t.devicePixelRatio,r=t.coordinateSystem,i=t.coordinateOrigin,o=function(t,e,n){var r=t.viewMatrixUncentered,i=t.projectionMatrix,o=t.viewMatrix,a=t.viewProjectionMatrix,s=z$,l=z$,u=t.cameraPosition,c=U$(t,e,n),h=c.geospatialOrigin,f=c.shaderCoordinateOrigin;c.offsetMode&&(l=t.projectPosition(h||f),u=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],l[3]=1,s=XZ([],l,a),a=FZ([],i,o=r||o),a=FZ([],a,D$));return{viewMatrix:o,viewProjectionMatrix:a,projectionCenter:s,originCommon:l,cameraPosCommon:u,shaderCoordinateOrigin:f,geospatialOrigin:h}}(e,r,i),a=o.projectionCenter,s=o.viewProjectionMatrix,l=o.originCommon,u=o.cameraPosCommon,c=o.shaderCoordinateOrigin,h=o.geospatialOrigin,f=e.getDistanceScales(),p=[e.width*n,e.height*n],d=XZ([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,m={project_uCoordinateSystem:r,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:l.slice(0,3),project_uCenter:a,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:p,project_uDevicePixelRatio:n,project_uFocalDistance:d,project_uCommonUnitsPerMeter:f.unitsPerMeter,project_uCommonUnitsPerWorldUnit:f.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:B$,project_uScale:e.scale,project_uViewProjectionMatrix:s,project_uCameraPosition:u};if(h){var g=e.getDistanceScales(h);switch(r){case CU.METER_OFFSETS:m.project_uCommonUnitsPerWorldUnit=g.unitsPerMeter,m.project_uCommonUnitsPerWorldUnit2=g.unitsPerMeter2;break;case CU.LNGLAT:case CU.LNGLAT_OFFSETS:e._pseudoMeters||(m.project_uCommonUnitsPerMeter=g.unitsPerMeter),m.project_uCommonUnitsPerWorldUnit=g.unitsPerDegree,m.project_uCommonUnitsPerWorldUnit2=g.unitsPerDegree2;break;case CU.CARTESIAN:m.project_uCommonUnitsPerWorldUnit=[1,1,g.unitsPerMeter[2]],m.project_uCommonUnitsPerWorldUnit2=[0,0,g.unitsPerMeter2[2]]}}return m}));function U$(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j$;n.length<3&&(n=[n[0],n[1],0]);var r,i=n,o=!0;switch(r=e===CU.LNGLAT_OFFSETS||e===CU.METER_OFFSETS?n:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case AU.WEB_MERCATOR:e!==CU.LNGLAT&&e!==CU.CARTESIAN||(r=[0,0,0],o=!1);break;case AU.WEB_MERCATOR_AUTO_OFFSET:e===CU.LNGLAT?i=r:e===CU.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case AU.IDENTITY:(i=t.position.map(Math.fround))[2]=i[2]||0;break;case AU.GLOBE:o=!1,r=null;break;default:o=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:o}}function V$(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.viewport,n=t.devicePixelRatio,r=void 0===n?1:n,i=t.modelMatrix,o=void 0===i?null:i,a=t.coordinateSystem,s=void 0===a?CU.DEFAULT:a,l=t.coordinateOrigin,u=t.autoWrapLongitude,c=void 0!==u&&u;s===CU.DEFAULT&&(s=e.isGeospatial?CU.LNGLAT:CU.CARTESIAN);var h=Z$({viewport:e,devicePixelRatio:r,coordinateSystem:s,coordinateOrigin:l});return h.project_uWrapLongitude=c,h.project_uModelMatrix=o||F$,h}var q$={};var G$={name:"project",dependencies:[C$,P$],vs:R$,getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q$;return t.viewport?V$(t):{}}},W$=[G$],H$=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function X$(t){var e,n=I$.getDefaultProgramManager(t),r=(0,ch.Z)(W$);try{for(r.s();!(e=r.n()).done;){var i=e.value;n.addDefaultModule(i)}}catch(l){r.e(l)}finally{r.f()}var o,a=(0,ch.Z)(H$);try{for(a.s();!(o=a.n()).done;){var s=o.value;n.addShaderHook(s)}}catch(l){a.e(l)}finally{a.f()}return n}var Y$=Object.seal({layerManager:null,resourceManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}}),$$=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.deck,i=n.stats,o=n.viewport,a=n.timeline;(0,s.Z)(this,t),this.lastRenderedLayers=[],this.layers=[],this.resourceManager=new sW({gl:e,protocol:"deck://"}),this.context=iS(iS({},Y$),{},{layerManager:this,gl:e,deck:r,programManager:e&&X$(e),stats:i||new qV({id:"deck.gl"}),viewport:o||new DU({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:a||new EV,resourceManager:this.resourceManager}),this._nextLayers=null,this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}return(0,l.Z)(t,[{key:"finalize",value:function(){this.resourceManager.finalize();var t,e=(0,ch.Z)(this.layers);try{for(e.s();!(t=e.n()).done;){var n=t.value;this._finalizeLayer(n)}}catch(r){e.e(r)}finally{e.f()}}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);var n,r=(0,ch.Z)(this.layers);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.getNeedsRedraw(t);e=e||o}}catch(a){r.e(a)}finally{r.f()}return e}},{key:"needsUpdate",value:function(){return this._nextLayers&&this._nextLayers!==this.lastRenderedLayers?"layers changed":this._needsUpdate}},{key:"setNeedsRedraw",value:function(t){this._needsRedraw=this._needsRedraw||t}},{key:"setNeedsUpdate",value:function(t){this._needsUpdate=this._needsUpdate||t}},{key:"getLayers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.layerIds,n=void 0===e?null:e;return n?this.layers.filter((function(t){return n.find((function(e){return 0===t.id.indexOf(e)}))})):this.layers}},{key:"setProps",value:function(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}},{key:"setLayers",value:function(t,e){DV("layerManager.setLayers",this,e,t),this.lastRenderedLayers=t,t=FV(t,Boolean);var n,r=(0,ch.Z)(t);try{for(r.s();!(n=r.n()).done;){n.value.context=this.context}}catch(i){r.e(i)}finally{r.f()}return this._updateLayers(this.layers,t),this}},{key:"updateLayers",value:function(){var t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this.lastRenderedLayers,t)),this._nextLayers=null}},{key:"activateViewport",value:function(t){return DV("layerManager.activateViewport",this,t),t&&(this.context.viewport=t),this}},{key:"_handleError",value:function(t,e,n){n.raiseError(e,"".concat(t," of ").concat(n))}},{key:"_updateLayers",value:function(t,e){var n,r={},i=(0,ch.Z)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;r[o.id]?iZ.warn("Multiple old layers with same id ".concat(o.id))():r[o.id]=o}}catch(c){i.e(c)}finally{i.f()}var a=[];this._updateSublayersRecursively(e,r,a),this._finalizeOldLayers(r);for(var s=!1,l=0,u=a;l<u.length;l++){if(u[l].hasUniformTransition()){s=!0;break}}this._needsUpdate=s,this.layers=a}},{key:"_updateSublayersRecursively",value:function(t,e,n){var r,i=(0,ch.Z)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.context=this.context;var a=e[o.id];null===a&&iZ.warn("Multiple new layers with same id ".concat(o.id))(),e[o.id]=null;var s=null;try{this._debug&&a!==o&&o.validateProps(),a?(this._transferLayerState(a,o),this._updateLayer(o)):this._initializeLayer(o),n.push(o),s=o.isComposite&&o.getSubLayers()}catch(l){this._handleError("matching",l,o)}s&&this._updateSublayersRecursively(s,e,n)}}catch(l){i.e(l)}finally{i.f()}}},{key:"_finalizeOldLayers",value:function(t){for(var e in t){var n=t[e];n&&this._finalizeLayer(n)}}},{key:"_initializeLayer",value:function(t){try{t._initialize(),t.lifecycle=AV}catch(e){this._handleError("initialization",e,t)}}},{key:"_transferLayerState",value:function(t,e){e._transferState(t),e.lifecycle=CV,e!==t&&(t.lifecycle=PV)}},{key:"_updateLayer",value:function(t){try{t._update()}catch(e){this._handleError("update",e,t)}}},{key:"_finalizeLayer",value:function(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=TV;try{t._finalize(),t.lifecycle=MV}catch(e){this._handleError("finalization",e,t)}}}]),t}(),K$=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.Z)(this,t),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}return(0,l.Z)(t,[{key:"finalize",value:function(){for(var t in this.controllers)this.controllers[t]&&this.controllers[t].finalize();this.controllers={}}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}},{key:"setNeedsUpdate",value:function(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}},{key:"updateViewStates",value:function(){for(var t in this.controllers){var e=this.controllers[t];e&&e.updateTransition()}}},{key:"getViewports",value:function(t){return t?this._viewports.filter((function(e){return e.containsPixel(t)})):this._viewports}},{key:"getViews",value:function(){var t={};return this.views.forEach((function(e){t[e.id]=e})),t}},{key:"getView",value:function(t){return"string"===typeof t?this.views.find((function(e){return e.id===t})):t}},{key:"getViewState",value:function(t){var e=this.getView(t),n=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(n):n}},{key:"getViewport",value:function(t){return this._viewportMap[t]}},{key:"unproject",value:function(t,e){for(var n=this.getViewports(),r={x:t[0],y:t[1]},i=n.length-1;i>=0;--i){var o=n[i];if(o.containsPixel(r)){var a=t.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,e)}}return null}},{key:"setProps",value:function(t){"views"in t&&this._setViews(t.views),"viewState"in t&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}},{key:"_update",value:function(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function(t,e){t===this.width&&e===this.height||(this.width=t,this.height=e,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function(t){t=FV(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}},{key:"_setViewState",value:function(t){t?(!ZU(t,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):iZ.warn("missing `viewState` or `initialViewState`")()}},{key:"_onViewStateChange",value:function(t,e){e.viewId=t,this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange(e)}},{key:"_createController",value:function(t,e){return new(0,e.type)(iS({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:function(e){return t._getViewport(e,{width:e.width,height:e.height})}},e))}},{key:"_updateController",value:function(t,e,n,r){var i=t.controller;return i?(i=iS(iS(iS(iS({},e),t.props),i),{},{id:t.id,x:n.x,y:n.y,width:n.width,height:n.height}),r?r.setProps(i):r=this._createController(t,i),r):null}},{key:"_rebuildViewports",value:function(){var t=this.width,e=this.height,n=this.views,r=this.controllers;this._viewports=[],this.controllers={};for(var i=!1,o=n.length;o--;){var a=n[o],s=this.getViewState(a),l=a.makeViewport({width:t,height:e,viewState:s}),u=r[a.id];a.controller&&!u&&(i=!0),!i&&a.controller||!u||(u.finalize(),u=null),this.controllers[a.id]=this._updateController(a,s,l,u),this._viewports.unshift(l)}for(var c in r)r[c]&&!this.controllers[c]&&r[c].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function(){var t=this;this._viewportMap={},this._viewports.forEach((function(e){e.id&&(t._viewportMap[e.id]=t._viewportMap[e.id]||e)}))}},{key:"_diffViews",value:function(t,e){return t.length!==e.length||t.some((function(n,r){return!t[r].equals(e[r])}))}}]),t}(),J$=[255,255,255],Q$=0,tK=(0,l.Z)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.Z)(this,t);var n=e.color,r=void 0===n?J$:n,i=e.intensity,o=void 0===i?1:i;this.id=e.id||"ambient-".concat(Q$++),this.color=r,this.intensity=o,this.type="ambient"})),eK=[255,255,255],nK=[0,0,-1],rK=0,iK=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.Z)(this,t);var n=e.color,r=void 0===n?eK:n,i=e.intensity,o=void 0===i?1:i,a=e.direction,l=void 0===a?nK:a,u=e._shadow,c=void 0!==u&&u;this.id=e.id||"directional-".concat(rK++),this.color=r,this.intensity=o,this.type="directional",this.direction=new TZ(l).normalize().toArray(),this.shadow=c}return(0,l.Z)(t,[{key:"getProjectedLight",value:function(){return this}}]),t}(),oK=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.Z)(this,t),(0,c.Z)(this,"id",void 0),(0,c.Z)(this,"props",void 0),(0,c.Z)(this,"useInPicking",void 0);var n=e.id,r=void 0===n?"effect":n;this.id=r,this.props=iS({},e),this.useInPicking=!1}return(0,l.Z)(t,[{key:"preRender",value:function(){}},{key:"getModuleParameters",value:function(t){}},{key:"cleanup",value:function(){}}]),t}(),aK=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:"pass"};(0,s.Z)(this,t),(0,c.Z)(this,"id",void 0),(0,c.Z)(this,"gl",void 0),(0,c.Z)(this,"props",void 0);var r=n.id;this.id=r,this.gl=e,this.props=iS({},n)}return(0,l.Z)(t,[{key:"setProps",value:function(t){Object.assign(this.props,t)}},{key:"render",value:function(t){}},{key:"cleanup",value:function(){}}]),t}(),sK=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(){return(0,s.Z)(this,n),e.apply(this,arguments)}return(0,l.Z)(n,[{key:"render",value:function(t){return UH(this.gl,{framebuffer:t.target}),this._drawLayers(t)}},{key:"_drawLayers",value:function(t){var e=t.target,n=t.moduleParameters,r=t.viewports,i=t.views,o=t.onViewportActive,a=t.clearCanvas,s=void 0===a||a;t.pass=t.pass||"unknown";var l=this.gl;s&&function(t){var e=t.drawingBufferWidth,n=t.drawingBufferHeight;UH(t,{viewport:[0,0,e,n]}),t.clear(16640)}(l);var u,c=[],h=(0,ch.Z)(r);try{for(h.s();!(u=h.n()).done;){var f=u.value,p=i&&i[f.id];o(f);var d,m=this._getDrawLayerParams(f,t),g=f.subViewports||[f],v=(0,ch.Z)(g);try{for(v.s();!(d=v.n()).done;){var y=d.value,_=this._drawLayersInViewport(l,{target:e,moduleParameters:n,viewport:y,view:p,pass:t.pass,layers:t.layers},m);c.push(_)}}catch(x){v.e(x)}finally{v.f()}}}catch(x){h.e(x)}finally{h.f()}return c}},{key:"_getDrawLayerParams",value:function(t,e){for(var n=e.layers,r=e.pass,i=e.layerFilter,o=e.effects,a=e.moduleParameters,s=[],l=lK(),u={layer:n[0],viewport:t,isPicking:r.startsWith("picking"),renderPass:r},c={},h=0;h<n.length;h++){var f=n[h],p=this._shouldDrawLayer(f,u,i,c),d={shouldDrawLayer:p,layerRenderIndex:l(f,p)};p&&(d.moduleParameters=this._getModuleParameters(f,o,r,a),d.layerParameters=this.getLayerParameters(f,h,t)),s[h]=d}return s}},{key:"_drawLayersInViewport",value:function(t,e,n){var r=e.layers,i=e.moduleParameters,o=e.pass,a=e.target,s=e.viewport,l=e.view,u=function(t,e){var n=e.moduleParameters,r=e.target,i=e.viewport,o=r&&"default-framebuffer"!==r.id,a=n&&n.devicePixelRatio||GH(t),s=o?r.height:t.drawingBufferHeight,l=i;return[l.x*a,s-(l.y+l.height)*a,l.width*a,l.height*a]}(t,{moduleParameters:i,target:a,viewport:s});if(l&&l.props.clear){var c=!0===l.props.clear?{color:!0,depth:!0}:l.props.clear;qH(t,{scissorTest:!0,scissor:u},(function(){return rY(t,c)}))}var h={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};UH(t,{viewport:u});for(var f=0;f<r.length;f++){var p=r[f],d=n[f],m=d.shouldDrawLayer,g=d.layerRenderIndex,v=d.moduleParameters,y=d.layerParameters;if(m&&p.props.pickable&&h.pickableCount++,p.isComposite)h.compositeCount++;else if(m){h.visibleCount++,v.viewport=s;try{p.drawLayer({moduleParameters:v,uniforms:{layerIndex:g},parameters:y})}catch(_){p.raiseError(_,"drawing ".concat(p," to ").concat(o))}}}return h}},{key:"shouldDrawLayer",value:function(t){return!0}},{key:"getModuleParameters",value:function(t,e){return null}},{key:"getLayerParameters",value:function(t,e,n){return t.props.parameters}},{key:"_shouldDrawLayer",value:function(t,e,n,r){if(!(this.shouldDrawLayer(t)&&t.props.visible))return!1;e.layer=t;for(var i=t.parent;i;){if(!i.props.visible||!i.filterSubLayer(e))return!1;e.layer=i,i=i.parent}if(n){var o=e.layer.id;if(o in r||(r[o]=n(e)),!r[o])return!1}return t.activateViewport(e.viewport),!0}},{key:"_getModuleParameters",value:function(t,e,n,r){var i,o=Object.assign(Object.create((null===(i=t.internalState)||void 0===i?void 0:i.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:GH(this.gl)});if(e){var a,s=(0,ch.Z)(e);try{for(s.s();!(a=s.n()).done;){var l=a.value;Object.assign(o,l.getModuleParameters(t))}}catch(u){s.e(u)}finally{s.f()}}return Object.assign(o,this.getModuleParameters(t,e),r)}}]),n}(aK);function lK(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=function r(i,o){var a,s=i.props._offset,l=i.id,u=i.parent&&i.parent.id;if(u&&!(u in e)&&r(i.parent,!1),u in n){var c=n[u]=n[u]||lK(e[u],e);a=c(i,o),n[l]=c}else Number.isFinite(s)?(a=s+(e[u]||0),n[l]=null):a=t;return o&&a>=t&&(t=a+1),e[l]=a,a};return r}var uK=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t,r){var i,o,a;return(0,s.Z)(this,n),a=e.call(this,t,r),(0,c.Z)((0,Fo.Z)(a),"shadowMap",void 0),(0,c.Z)((0,Fo.Z)(a),"depthBuffer",void 0),(0,c.Z)((0,Fo.Z)(a),"fbo",void 0),a.shadowMap=new HX(t,{width:1,height:1,parameters:(i={},(0,c.Z)(i,10241,9729),(0,c.Z)(i,10240,9729),(0,c.Z)(i,10242,33071),(0,c.Z)(i,10243,33071),i)}),a.depthBuffer=new KX(t,{format:33189,width:1,height:1}),a.fbo=new ZY(t,{id:"shadowmap",width:1,height:1,attachments:(o={},(0,c.Z)(o,36064,a.shadowMap),(0,c.Z)(o,36096,a.depthBuffer),o)}),a}return(0,l.Z)(n,[{key:"render",value:function(t){var e=this,r=this.fbo;qH(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(function(){var i=t.viewports[0],o=GH(e.gl),a=i.width*o,s=i.height*o;a===r.width&&s===r.height||r.resize({width:a,height:s}),(0,qU.Z)((0,GU.Z)(n.prototype),"render",e).call(e,iS(iS({},t),{},{target:r,pass:"shadow"}))}))}},{key:"shouldDrawLayer",value:function(t){return!1!==t.props.shadowEnabled}},{key:"getModuleParameters",value:function(){return{drawToShadowMap:!0}}},{key:"delete",value:function(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}]),n}(sK),cK=O$((function(t){var e=t.viewport,n=t.center;return new QZ(e.viewProjectionMatrix).invert().transform(n)})),hK=O$((function(t){var e,n=t.viewport,r=t.shadowMatrices,o=[],a=n.pixelUnprojectionMatrix,s=n.isGeospatial?void 0:1,l=[[0,0,s],[n.width,0,s],[0,n.height,s],[n.width,n.height,s],[0,0,-1],[n.width,0,-1],[0,n.height,-1],[n.width,n.height,-1]].map((function(t){return function(t,e){var n=(0,i.Z)(t,3),r=n[0],o=n[1],a=n[2],s=wU([r,o,a],e);if(Number.isFinite(a))return s;return[s[0],s[1],0]}(t,a)})),c=(0,ch.Z)(r);try{var h=function(){var t=e.value,r=t.clone().translate(new TZ(n.center).negate()),i=l.map((function(t){return r.transform(t)})),a=(new QZ).ortho({left:Math.min.apply(Math,(0,u.Z)(i.map((function(t){return t[0]})))),right:Math.max.apply(Math,(0,u.Z)(i.map((function(t){return t[0]})))),bottom:Math.min.apply(Math,(0,u.Z)(i.map((function(t){return t[1]})))),top:Math.max.apply(Math,(0,u.Z)(i.map((function(t){return t[1]})))),near:Math.min.apply(Math,(0,u.Z)(i.map((function(t){return-t[2]})))),far:Math.max.apply(Math,(0,u.Z)(i.map((function(t){return-t[2]}))))});o.push(a.multiplyRight(t))};for(c.s();!(e=c.n()).done;)h()}catch(f){c.e(f)}finally{c.f()}return o})),fK=[0,0,0,1],pK=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function dK(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||fK,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},r=cK({viewport:t.viewport,center:e.project_uCenter}),i=[],o=hK({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice(),a=0;a<t.shadowMatrices.length;a++){var s=o[a],l=s.clone().translate(new TZ(t.viewport.center).negate());e.project_uCoordinateSystem===CU.LNGLAT&&e.project_uProjectionMode===AU.WEB_MERCATOR?(o[a]=l,i[a]=r):(o[a]=s.clone().multiplyRight(pK),i[a]=l.transform(r))}for(var u=0;u<o.length;u++)n["shadow_uViewProjectionMatrices[".concat(u,"]")]=o[u],n["shadow_uProjectCenters[".concat(u,"]")]=i[u],t.shadowMaps&&t.shadowMaps.length>0?n["shadow_uShadowMap".concat(u)]=t.shadowMaps[u]:n["shadow_uShadowMap".concat(u)]=t.dummyShadowMap;return n}var mK={name:"shadow",dependencies:[G$],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0){var n=t.shadowEnabled,r=void 0===n||n;return r&&t.shadowMatrices&&t.shadowMatrices.length>0?dK(t,e):{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}}return{}}},gK={color:[255,255,255],intensity:1},vK=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],yK=[0,0,0,200/255],_K=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){var r;for(var i in(0,s.Z)(this,n),(r=e.call(this,t)).ambientLight=null,r.directionalLights=[],r.pointLights=[],r.shadowColor=yK,r.shadowPasses=[],r.shadowMaps=[],r.dummyShadowMap=null,r.shadow=!1,r.programManager=null,t){var o=t[i];switch(o.type){case"ambient":r.ambientLight=o;break;case"directional":r.directionalLights.push(o);break;case"point":r.pointLights.push(o)}}return r._applyDefaultLights(),r.shadow=r.directionalLights.some((function(t){return t.shadow})),r}return(0,l.Z)(n,[{key:"preRender",value:function(t,e){var n=e.layers,r=e.layerFilter,i=e.viewports,o=e.onViewportActive,a=e.views;if(this.shadow){this.shadowMatrices=this._createLightMatrix(),0===this.shadowPasses.length&&this._createShadowPasses(t),this.programManager||(this.programManager=I$.getDefaultProgramManager(t),mK&&this.programManager.addDefaultModule(mK)),this.dummyShadowMap||(this.dummyShadowMap=new HX(t,{width:1,height:1}));for(var s=0;s<this.shadowPasses.length;s++){this.shadowPasses[s].render({layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:a,moduleParameters:{shadowLightId:s,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}},{key:"getModuleParameters",value:function(t){var e=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return e.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((function(e){return e.getProjectedLight({layer:t})})),pointLights:this.pointLights.map((function(e){return e.getProjectedLight({layer:t})}))},e}},{key:"cleanup",value:function(){var t,e=(0,ch.Z)(this.shadowPasses);try{for(e.s();!(t=e.n()).done;){t.value.delete()}}catch(n){e.e(n)}finally{e.f()}this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(mK),this.programManager=null)}},{key:"_createLightMatrix",value:function(){var t,e=[],n=(0,ch.Z)(this.directionalLights);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=(new QZ).lookAt({eye:new TZ(r.direction).negate()});e.push(i)}}catch(o){n.e(o)}finally{n.f()}return e}},{key:"_createShadowPasses",value:function(t){for(var e=0;e<this.directionalLights.length;e++){var n=new uK(t);this.shadowPasses[e]=n,this.shadowMaps[e]=n.shadowMap}}},{key:"_applyDefaultLights",value:function(){var t=this.ambientLight,e=this.pointLights,n=this.directionalLights;t||0!==e.length||0!==n.length||(this.ambientLight=new tK(gK),this.directionalLights.push(new iK(vK[0]),new iK(vK[1])))}}]),n}(oK),xK=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t,r){var i,o;(0,s.Z)(this,n),o=e.call(this,t,r),(0,c.Z)((0,Fo.Z)(o),"maskMap",void 0),(0,c.Z)((0,Fo.Z)(o),"fbo",void 0);var a=r.mapSize,l=void 0===a?2048:a;return o.maskMap=new HX(t,{width:l,height:l,parameters:(i={},(0,c.Z)(i,10241,9729),(0,c.Z)(i,10240,9729),(0,c.Z)(i,10242,33071),(0,c.Z)(i,10243,33071),i)}),o.fbo=new ZY(t,{id:"maskmap",width:l,height:l,attachments:(0,c.Z)({},36064,o.maskMap)}),o}return(0,l.Z)(n,[{key:"render",value:function(t){var e=this,r=this.gl,i=[!1,!1,!1,!1];return i[t.channel]=!0,qH(r,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:i,depthTest:!1},(function(){return(0,qU.Z)((0,GU.Z)(n.prototype),"render",e).call(e,iS(iS({},t),{},{target:e.fbo,pass:"mask"}))}))}},{key:"shouldDrawLayer",value:function(t){return t.props.operation===LU}},{key:"delete",value:function(){this.fbo.delete(),this.maskMap.delete()}}]),n}(sK),bK={rotationX:0,rotationOrbit:0,zoom:0,target:[0,0,0],minRotationX:-90,maxRotationX:90,minZoom:-1/0,maxZoom:1/0},wK=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){var r,i=t.makeViewport,o=t.width,a=t.height,l=t.rotationX,u=void 0===l?bK.rotationX:l,c=t.rotationOrbit,h=void 0===c?bK.rotationOrbit:c,f=t.target,p=void 0===f?bK.target:f,d=t.zoom,m=void 0===d?bK.zoom:d,g=t.minRotationX,v=void 0===g?bK.minRotationX:g,y=t.maxRotationX,_=void 0===y?bK.maxRotationX:y,x=t.minZoom,b=void 0===x?bK.minZoom:x,w=t.maxZoom,k=void 0===w?bK.maxZoom:w,S=t.startPanPosition,E=t.startRotatePos,I=t.startRotationX,C=t.startRotationOrbit,A=t.startZoomPosition,P=t.startZoom;return(0,s.Z)(this,n),(r=e.call(this,{width:o,height:a,rotationX:u,rotationOrbit:h,target:p,zoom:m,minRotationX:v,maxRotationX:_,minZoom:b,maxZoom:k}))._state={startPanPosition:S,startRotatePos:E,startRotationX:I,startRotationOrbit:C,startZoomPosition:A,startZoom:P},r.makeViewport=i,r}return(0,l.Z)(n,[{key:"panStart",value:function(t){var e=t.pos;return this._getUpdatedState({startPanPosition:this._unproject(e)})}},{key:"pan",value:function(t){var e=t.pos,n=t.startPosition,r=this._state.startPanPosition||n;if(!r)return this;var i=this.makeViewport(this._viewportProps).panByPosition(r,e);return this._getUpdatedState(i)}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null})}},{key:"rotateStart",value:function(t){var e=t.pos;return this._getUpdatedState({startRotatePos:e,startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}},{key:"rotate",value:function(t){var e,n=t.pos,r=t.deltaAngleX,i=void 0===r?0:r,o=t.deltaAngleY,a=void 0===o?0:o,s=this._state,l=s.startRotatePos,u=s.startRotationX,c=s.startRotationOrbit,h=this._viewportProps,f=h.width,p=h.height;if(!l||!Number.isFinite(u)||!Number.isFinite(c))return this;if(n){var d=(n[0]-l[0])/f;(u<-90||u>90)&&(d*=-1),e={rotationX:u+180*((n[1]-l[1])/p),rotationOrbit:c+180*d}}else e={rotationX:u+a,rotationOrbit:c+i};return this._getUpdatedState(e)}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}},{key:"shortestPathFrom",value:function(t){var e=t.getViewportProps(),n=iS({},this._viewportProps),r=n.rotationOrbit;return Math.abs(r-e.rotationOrbit)>180&&(n.rotationOrbit=r<0?r+360:r-360),n}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,n=t.startPos,r=t.scale,i=this._viewportProps.zoom,o=this._state,a=o.startZoom,s=o.startZoomPosition;Number.isFinite(a)||(a=i,s=this._unproject(n)||this._unproject(e));var l=this._calculateNewZoom({scale:r,startZoom:a}),u=this.makeViewport(iS(iS({},this._viewportProps),{},{zoom:l}));return this._getUpdatedState(iS({zoom:l},u.panByPosition(s,e)))}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}},{key:"zoomIn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}},{key:"zoomOut",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}},{key:"moveLeft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([-t,0])}},{key:"moveRight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([t,0])}},{key:"moveUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([0,-t])}},{key:"moveDown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([0,t])}},{key:"rotateLeft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-t})}},{key:"rotateRight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+t})}},{key:"rotateUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({rotationX:this._viewportProps.rotationX-t})}},{key:"rotateDown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({rotationX:this._viewportProps.rotationX+t})}},{key:"_unproject",value:function(t){var e=this.makeViewport(this._viewportProps);return t&&e.unproject(t)}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,n=t.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom;return Number.isFinite(n)||(n=this._viewportProps.zoom),fZ(n+Math.log2(e),o,i)}},{key:"_panFromCenter",value:function(t){var e=this._viewportProps,n=e.width,r=e.height,i=e.target;return this.pan({startPosition:i,pos:[n/2+t[0],r/2+t[1]]})}},{key:"_getUpdatedState",value:function(t){return new this.constructor(iS(iS(iS({},this._viewportProps),this._state),t))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom,i=t.maxRotationX,o=t.minRotationX,a=t.rotationOrbit;return t.zoom=fZ(r,n,e),t.rotationX=fZ(t.rotationX,o,i),(a<-180||a>180)&&(t.rotationOrbit=function(t,e){var n=t%e;return n<0?e+n:n}(a+180,360)-180),t}}]),n}(yV),kK=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){var r;return(0,s.Z)(this,n),r=e.call(this,t),(0,c.Z)((0,Fo.Z)(r),"zoomAxis",void 0),r.zoomAxis=t.zoomAxis||"all",r}return(0,l.Z)(n,[{key:"_applyConstraints",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom;return t.zoom=Array.isArray(r)?[fZ(r[0],n,e),fZ(r[1],n,e)]:fZ(r,n,e),t}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,n=t.startZoom,r=this._viewportProps,o=r.maxZoom,a=r.minZoom;n||0===n||(n=this._viewportProps.zoom);var s=Math.log2(e);if(Array.isArray(n)){var l=n,u=(0,i.Z)(l,2),c=u[0],h=u[1];switch(this.zoomAxis){case"X":c=fZ(c+s,a,o);break;case"Y":h=fZ(h+s,a,o);break;default:var f=Math.min(c+s,h+s);f<a&&(s+=a-f),(f=Math.max(c+s,h+s))>o&&(s+=o-f),c+=s,h+=s}return[c,h]}return fZ(n+s,a,o)}}]),n}(wK),SK=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){return(0,s.Z)(this,n),t.dragMode=t.dragMode||"pan",e.call(this,kK,t)}return(0,l.Z)(n,[{key:"_onPanRotate",value:function(t){return!1}},{key:"linearTransitionProps",get:function(){return["target","zoom"]}}]),n}(vV),EK=(new QZ).lookAt({eye:[0,0,1]});function IK(t){var e=t.width,n=t.height,r=t.near,i=t.far;return e=e||1,n=n||1,(new QZ).ortho({left:-e/2,right:e/2,bottom:-n/2,top:n/2,near:r,far:i})}var CK=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){(0,s.Z)(this,n);var r,i=t.width,o=t.height,a=t.near,l=void 0===a?.1:a,u=t.far,c=void 0===u?1e3:u,h=t.zoom,f=void 0===h?0:h,p=t.target,d=void 0===p?[0,0,0]:p,m=t.flipY,g=void 0===m||m,v=Array.isArray(f)?f[0]:f,y=Array.isArray(f)?f[1]:f,_=Math.min(v,y),x=Math.pow(2,_);if(v!==y){var b=Math.pow(2,v),w=Math.pow(2,y);r={unitsPerMeter:[b/x,w/x,1],metersPerUnit:[x/b,x/w,1]}}return e.call(this,iS(iS({},t),{},{longitude:null,position:d,viewMatrix:EK.clone().scale([x,x*(g?-1:1),x]),projectionMatrix:IK({width:i,height:o,near:l,far:c}),zoom:_,distanceScales:r}))}return(0,l.Z)(n,[{key:"projectFlat",value:function(t){var e=(0,i.Z)(t,2),n=e[0],r=e[1],o=this.distanceScales.unitsPerMeter;return[n*o[0],r*o[1]]}},{key:"unprojectFlat",value:function(t){var e=(0,i.Z)(t,2),n=e[0],r=e[1],o=this.distanceScales.metersPerUnit;return[n*o[0],r*o[1]]}},{key:"panByPosition",value:function(t,e){var n=wU(e,this.pixelUnprojectionMatrix),r=GZ([],this.projectFlat(t),WZ([],n)),i=GZ([],this.center,r);return{target:this.unprojectFlat(i)}}}]),n}(DU),AK=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){return(0,s.Z)(this,n),e.call(this,iS(iS({},t),{},{type:CK}))}return(0,l.Z)(n,[{key:"controller",get:function(){return this._getControllerProps({type:SK})}}]),n}(VU);AK.displayName="OrthographicView";var PK=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){var r;return(0,s.Z)(this,n),(r=e.call(this,t)).dummyMaskMap=null,r.useInPicking=!0,r.channels=[],r.masks=null,r}return(0,l.Z)(n,[{key:"preRender",value:function(t,e){var n=e.layers,r=e.layerFilter,i=e.viewports,o=e.onViewportActive,a=e.views;this.dummyMaskMap||(this.dummyMaskMap=new HX(t,{width:1,height:1}));var s=n.filter((function(t){return t.props.operation===LU&&t.props.visible}));if(0===s.length)return this.masks=null,void(this.channels.length=0);this.masks={},this.maskPass||(this.maskPass=new xK(t,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);var l=this._sortMaskChannels(s),u=i[0],c=!this.lastViewport||!this.lastViewport.equals(u);for(var h in l)this._renderChannel(l[h],{layerFilter:r,onViewportActive:o,views:a,viewport:u,viewportChanged:c})}},{key:"_renderChannel",value:function(t,e){var n=e.layerFilter,r=e.onViewportActive,i=e.views,o=e.viewport,a=e.viewportChanged,s=this.channels[t.index],l=t===s||s.layers.length!==t.layers.length||t.layerBounds.some((function(t,e){return t!==s.layerBounds[e]}));if(t.bounds=s.bounds,t.maskBounds=s.maskBounds,this.channels[t.index]=t,(l||a)&&(this.lastViewport=o,t.bounds=function(t){var e,n=t.layers,r=t.viewport,i=null,o=(0,ch.Z)(n);try{for(o.s();!(e=o.n()).done;){var a=e.value.getBounds();a&&(i?(i[0]=Math.min(i[0],a[0][0]),i[1]=Math.min(i[1],a[0][1]),i[2]=Math.max(i[2],a[1][0]),i[3]=Math.max(i[3],a[1][1])):i=[a[0][0],a[0][1],a[1][0],a[1][1]])}}catch(u){o.e(u)}finally{o.f()}var s=r.getBounds();if(!i)return s;var l=function(t){var e={x:t[2]-t[0],y:t[3]-t[1]},n={x:t[0]+.5*e.x,y:t[1]+.5*e.y};return[n.x-e.x,n.y-e.y,n.x+e.x,n.y+e.y]}(s);return i[2]-i[0]<l[2]-l[0]||i[3]-i[1]<l[3]-l[1]||(i[0]=Math.max(i[0],l[0]),i[1]=Math.max(i[1],l[1]),i[2]=Math.min(i[2],l[2]),i[3]=Math.min(i[3],l[3])),i}({layers:t.layers,viewport:o}),l||!dZ(t.bounds,s.bounds))){var u=this.maskPass,c=this.maskMap,h=function(t){var e=t.bounds,n=t.viewport,r=t.width,i=t.height;if(e[2]<=e[0]||e[3]<=e[1])return null;if(r-=2,i-=2,n instanceof XU){var o=kU({width:r,height:i,bounds:[[e[0],e[1]],[e[2],e[3]]],maxZoom:20}),a=o.longitude,s=o.latitude,l=o.zoom;return new XU({longitude:a,latitude:s,zoom:l,x:1,y:1,width:r,height:i})}var u=[(e[0]+e[2])/2,(e[1]+e[3])/2,0],c=Math.min(20,r/(e[2]-e[0]),i/(e[3]-e[1]));return new AK({x:1,y:1}).makeViewport({width:r,height:i,viewState:{target:u,zoom:Math.log2(c)}})}({bounds:t.bounds,viewport:o,width:c.width,height:c.height});t.maskBounds=h?h.getBounds():[0,0,1,1],u.render({channel:t.index,layers:t.layers,layerFilter:n,viewports:h?[h]:[],onViewportActive:r,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[t.id]={index:t.index,bounds:t.maskBounds,coordinateOrigin:t.coordinateOrigin,coordinateSystem:t.coordinateSystem}}},{key:"_sortMaskChannels",value:function(t){var e,n=this,r={},i=0,o=(0,ch.Z)(t);try{var a=function(){var t=e.value,o=t.root.id,a=r[o];if(!a){if(++i>4)return iZ.warn("Too many mask layers. The max supported is 4")(),"continue";a={id:o,index:n.channels.findIndex((function(t){return(null===t||void 0===t?void 0:t.id)===o})),layers:[],layerBounds:[],coordinateOrigin:t.root.props.coordinateOrigin,coordinateSystem:t.root.props.coordinateSystem},r[o]=a}a.layers.push(t),a.layerBounds.push(t.getBounds())};for(o.s();!(e=o.n()).done;)a()}catch(h){o.e(h)}finally{o.f()}for(var s=0;s<4;s++){var l=this.channels[s];l&&l.id in r||(this.channels[s]=null)}for(var u in r){var c=r[u];c.index<0&&(c.index=this.channels.findIndex((function(t){return!t})),this.channels[c.index]=c)}return r}},{key:"getModuleParameters",value:function(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}},{key:"cleanup",value:function(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=null),this.maskPass&&(this.maskPass.delete(),this.maskPass=null,this.maskMap=null),this.lastViewport=null,this.masks=null,this.channels.length=0}}]),n}(oK),TK=new _K,MK=function(){function t(){(0,s.Z)(this,t),(0,c.Z)(this,"effects",void 0),(0,c.Z)(this,"_internalEffects",void 0),(0,c.Z)(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}return(0,l.Z)(t,[{key:"setProps",value:function(t){"effects"in t&&(t.effects.length===this.effects.length&&ZU(t.effects,this.effects)||(this.setEffects(t.effects),this._needsRedraw="effects changed"))}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}},{key:"getEffects",value:function(){return this._internalEffects}},{key:"finalize",value:function(){this.cleanup()}},{key:"setEffects",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cleanup(),this.effects=t,this._internalEffects=t.slice(),this._internalEffects.push(new PK),t.some((function(t){return t instanceof _K}))||this._internalEffects.push(TK)}},{key:"cleanup",value:function(){var t,e=(0,ch.Z)(this.effects);try{for(e.s();!(t=e.n()).done;){t.value.cleanup()}}catch(i){e.e(i)}finally{e.f()}var n,r=(0,ch.Z)(this._internalEffects);try{for(r.s();!(n=r.n()).done;){n.value.cleanup()}}catch(i){r.e(i)}finally{r.f()}this.effects.length=0,this._internalEffects.length=0}}]),t}(),LK=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(){return(0,s.Z)(this,n),e.apply(this,arguments)}return(0,l.Z)(n,[{key:"shouldDrawLayer",value:function(t){return t.props.operation===MU}}]),n}(sK),RK={blendFunc:[1,0,32771,0],blendEquation:32774},NK=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(){var t;(0,s.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),(0,c.Z)((0,Fo.Z)(t),"pickZ",void 0),(0,c.Z)((0,Fo.Z)(t),"_colors",null),t}return(0,l.Z)(n,[{key:"render",value:function(t){return t.pickingFBO?this._drawPickingBuffer(t):(0,qU.Z)((0,GU.Z)(n.prototype),"render",this).call(this,t)}},{key:"_drawPickingBuffer",value:function(t){var e=this,r=t.layers,i=t.layerFilter,o=t.views,a=t.viewports,s=t.onViewportActive,l=t.pickingFBO,u=t.deviceRect,c=u.x,h=u.y,f=u.width,p=u.height,d=t.effects,m=t.pass,g=void 0===m?"picking":m,v=t.pickZ,y=this.gl;this.pickZ=v;var _=v?null:{byLayer:new Map,byAlpha:[]};this._colors=_;var x=qH(y,iS(iS({scissorTest:!0,scissor:[c,h,f,p],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},RK),{},{blend:!v}),(function(){return(0,qU.Z)((0,GU.Z)(n.prototype),"render",e).call(e,{target:l,layers:r,layerFilter:i,views:o,viewports:a,onViewportActive:s,effects:null===d||void 0===d?void 0:d.filter((function(t){return t.useInPicking})),pass:g})}));return this._colors=null,{decodePickingColor:_&&OK.bind(null,_),stats:x}}},{key:"shouldDrawLayer",value:function(t){return t.props.pickable&&t.props.operation===MU}},{key:"getModuleParameters",value:function(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}},{key:"getLayerParameters",value:function(t,e,n){var r=iS({},t.props.parameters);return this._colors?(Object.assign(r,RK),r.blend=!0,r.blendColor=function(t,e,n){var r,i=t.byLayer,o=t.byAlpha,a=i.get(e);a?(a.viewports.push(n),r=a.a):(r=i.size+1)<=255?(a={a:r,layer:e,viewports:[n]},i.set(e,a),o[r]=a):(iZ.warn("Too many pickable layers, only picking the first 255")(),r=0);return[0,0,0,r/255]}(this._colors,t,n)):r.blend=!1,r}}]),n}(sK);function OK(t,e){var n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}var zK=function(){function t(e){(0,s.Z)(this,t),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new LK(e),this.pickLayersPass=new NK(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}return(0,l.Z)(t,[{key:"setProps",value:function(t){"layerFilter"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in t&&this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}},{key:"renderLayers",value:function(t){var e=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;t.layerFilter=t.layerFilter||this.layerFilter,t.effects=t.effects||[],t.target=t.target||ZY.getDefaultFramebuffer(this.gl),this._preRender(t.effects,t);var n=this.lastPostProcessEffect?this.renderBuffers[0]:t.target,r=e.render(iS(iS({},t),{},{target:n}));this._postRender(t.effects,t),this.renderCount++,DV("deckRenderer.renderLayers",this,r,t)}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}},{key:"finalize",value:function(){var t,e=this.renderBuffers,n=(0,ch.Z)(e);try{for(n.s();!(t=n.n()).done;){t.value.delete()}}catch(r){n.e(r)}finally{n.f()}e.length=0}},{key:"_preRender",value:function(t,e){var n,r=null,i=(0,ch.Z)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.preRender(this.gl,e),o.postRender&&(r=o)}}catch(a){i.e(a)}finally{i.f()}r&&this._resizeRenderBuffers(),this.lastPostProcessEffect=r}},{key:"_resizeRenderBuffers",value:function(){var t=this.renderBuffers;0===t.length&&t.push(new ZY(this.gl),new ZY(this.gl));var e,n=(0,ch.Z)(t);try{for(n.s();!(e=n.n()).done;){e.value.resize()}}catch(r){n.e(r)}finally{n.f()}}},{key:"_postRender",value:function(t,e){var n,r=this.renderBuffers,i={inputBuffer:r[0],swapBuffer:r[1],target:null},o=(0,ch.Z)(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.postRender){if(a===this.lastPostProcessEffect){i.target=e.target,a.postRender(this.gl,i);break}var s=a.postRender(this.gl,i);i.inputBuffer=s,i.swapBuffer=s===r[0]?r[1]:r[0]}}}catch(l){o.e(l)}finally{o.f()}}}]),t}(),DK={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function FK(t){var e=t.pickedColors,n=t.decodePickingColor,r=t.deviceX,i=t.deviceY,o=t.deviceRadius,a=t.deviceRect;if(e){for(var s=a.x,l=a.y,u=a.width,c=a.height,h=o*o,f=-1,p=0,d=0;d<c;d++){var m=d+l-i,g=m*m;if(g>h)p+=4*u;else for(var v=0;v<u;v++){if(e[p+3]-1>=0){var y=v+s-r,_=y*y+g;_<=h&&(h=_,f=p)}p+=4}}if(f>=0){var x=e.slice(f,f+4),b=n(x);if(b){var w=Math.floor(f/4/u),k=f/4-w*u;return iS(iS({},b),{},{pickedColor:x,pickedX:s+k,pickedY:l+w})}iZ.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return DK}function BK(t){var e=t.pickInfo,n=t.viewports,r=t.pixelRatio,i=t.x,o=t.y,a=t.z,s=n[0];n.length>1&&(s=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.containsPixel(e))return r}return t[0]}((null===e||void 0===e?void 0:e.pickedViewports)||n,{x:i,y:o}));var l=s&&s.unproject([i-s.x,o-s.y,a]);return{color:null,layer:null,viewport:s,index:-1,picked:!1,x:i,y:o,pixel:[i,o],coordinate:l,devicePixel:e&&"pickedX"in e?[e.pickedX,e.pickedY]:null,pixelRatio:r}}function jK(t){var e=t.pickInfo,n=t.lastPickedInfo,r=t.mode,i=t.layers,o=e.pickedColor,a=e.pickedLayer,s=e.pickedObjectIndex,l=a?[a]:[];if("hover"===r){var u=n.index,c=n.layerId,h=a&&a.props.id;if(h!==c||s!==u){if(h!==c){var f=i.find((function(t){return t.props.id===c}));f&&l.unshift(f)}n.layerId=h,n.index=s,n.info=null}}var p=BK(t),d=new Map;return d.set(null,p),l.forEach((function(t){var e=iS({},p);t===a&&(e.color=o,e.index=s,e.picked=!0),e=ZK({layer:t,info:e,mode:r}),t===a&&"hover"===r&&(n.info=e),d.set(e.layer.id,e),"hover"===r&&e.layer.updateAutoHighlight(e)})),d}function ZK(t){for(var e=t.layer,n=t.info,r=t.mode;e&&n;){var i=n.layer||null;n.sourceLayer=i,n.layer=e,n=e.getPickingInfo({info:n,mode:r,sourceLayer:i}),e=e.parent}return n}var UK=function(){function t(e){(0,s.Z)(this,t),this.gl=e,this.pickingFBO=null,this.pickLayersPass=new NK(e),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}return(0,l.Z)(t,[{key:"setProps",value:function(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}},{key:"finalize",value:function(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}},{key:"pickObject",value:function(t){return this._pickClosestObject(t)}},{key:"pickObjects",value:function(t){return this._pickVisibleObjects(t)}},{key:"getLastPickedObject",value:function(t){var e=t.x,n=t.y,r=t.layers,i=t.viewports,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info,a=o&&o.layer&&o.layer.id,s=o&&o.viewport&&o.viewport.id,l=a?r.find((function(t){return t.id===a})):null,u=s&&i.find((function(t){return t.id===s}))||i[0],c=u&&u.unproject([e-u.x,n-u.y]),h={x:e,y:n,viewport:u,coordinate:c,layer:l};return iS(iS({},o),h)}},{key:"_resizeBuffer",value:function(){var t=this.gl;return this.pickingFBO||(this.pickingFBO=new ZY(t),ZY.isSupported(t,{colorBufferFloat:!0})&&(this.depthFBO=new ZY(t),this.depthFBO.attach((0,c.Z)({},36064,new HX(t,{format:nH(t)?34836:6408,type:5126}))))),this.pickingFBO.resize({width:t.canvas.width,height:t.canvas.height}),this.depthFBO&&this.depthFBO.resize({width:t.canvas.width,height:t.canvas.height}),this.pickingFBO}},{key:"_getPickable",value:function(t){if(!1===this._pickable)return null;var e=t.filter((function(t){return t.isPickable()&&!t.isComposite}));return e.length?e:null}},{key:"_pickClosestObject",value:function(t){var e=t.layers,n=t.views,r=t.viewports,i=t.x,o=t.y,a=t.radius,s=void 0===a?0:a,l=t.depth,u=void 0===l?1:l,c=t.mode,h=void 0===c?"query":c,f=t.unproject3D,p=t.onViewportActive,d=t.effects;if(!(e=this._getPickable(e)))return{result:[],emptyInfo:BK({viewports:r,x:i,y:o})};this._resizeBuffer();for(var m,g=GH(this.gl),v=WH(this.gl,[i,o],!0),y=[v.x+Math.floor(v.width/2),v.y+Math.floor(v.height/2)],_=Math.round(s*g),x=this.pickingFBO,b=x.width,w=x.height,k=this._getPickingRect({deviceX:y[0],deviceY:y[1],deviceRadius:_,deviceWidth:b,deviceHeight:w}),S=[],E=new Set,I=0;I<u;I++){var C=FK(iS(iS({},k&&this._drawAndSample({layers:e,views:n,viewports:r,onViewportActive:p,deviceRect:k,effects:d,pass:"picking:".concat(h),redrawReason:h})),{},{deviceX:y[0],deviceY:y[1],deviceRadius:_,deviceRect:k})),A=void 0;if(C.pickedLayer&&f&&this.depthFBO)A=this._drawAndSample({layers:[C.pickedLayer],views:n,viewports:r,onViewportActive:p,deviceRect:{x:C.pickedX,y:C.pickedY,width:1,height:1},effects:d,pass:"picking:".concat(h),redrawReason:"pick-z",pickZ:!0}).pickedColors[0];C.pickedLayer&&I+1<u&&(E.add(C.pickedLayer),C.pickedLayer.disablePickingIndex(C.pickedObjectIndex)),m=jK({pickInfo:C,lastPickedInfo:this.lastPickedInfo,mode:h,layers:e,viewports:r,x:i,y:o,z:A,pixelRatio:g});var P,T=(0,ch.Z)(m.values());try{for(T.s();!(P=T.n()).done;){var M=P.value;M.layer&&S.push(M)}}catch(N){T.e(N)}finally{T.f()}if(!C.pickedColor)break}var L,R=(0,ch.Z)(E);try{for(R.s();!(L=R.n()).done;){L.value.restorePickingColors()}}catch(N){R.e(N)}finally{R.f()}return{result:S,emptyInfo:m&&m.get(null)}}},{key:"_pickVisibleObjects",value:function(t){var e=t.layers,n=t.views,r=t.viewports,i=t.x,o=t.y,a=t.width,s=void 0===a?1:a,l=t.height,u=void 0===l?1:l,c=t.mode,h=void 0===c?"query":c,f=t.maxObjects,p=void 0===f?null:f,d=t.onViewportActive,m=t.effects;if(!(e=this._getPickable(e)))return[];this._resizeBuffer();for(var g=GH(this.gl),v=WH(this.gl,[i,o],!0),y=v.x,_=v.y+v.height,x=WH(this.gl,[i+s,o+u],!0),b=x.x+x.width,w=x.y,k={x:y,y:w,width:b-y,height:_-w},S=function(t){var e=t.pickedColors,n=t.decodePickingColor,r=new Map;if(e)for(var i=0;i<e.length;i+=4)if(e[i+3]-1>=0){var o=e.slice(i,i+4),a=o.join(",");if(!r.has(a)){var s=n(o);s?r.set(a,iS(iS({},s),{},{pickedColor:o})):iZ.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(r.values())}(this._drawAndSample({layers:e,views:n,viewports:r,onViewportActive:d,deviceRect:k,effects:m,pass:"picking:".concat(h),redrawReason:h})),E=new Map,I=Number.isFinite(p),C=0;C<S.length&&!(I&&E.size>=p);C++){var A=S[C],P={color:A.pickedColor,layer:null,index:A.pickedObjectIndex,picked:!0,x:i,y:o,width:s,height:u,pixelRatio:g};P=ZK({layer:A.pickedLayer,info:P,mode:h}),E.has(P.object)||E.set(P.object,P)}return Array.from(E.values())}},{key:"_drawAndSample",value:function(t){var e=t.layers,n=t.views,r=t.viewports,i=t.onViewportActive,o=t.deviceRect,a=t.effects,s=t.pass,l=t.redrawReason,u=t.pickZ,c=u?this.depthFBO:this.pickingFBO,h=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:c,deviceRect:o,effects:a,pass:s,redrawReason:l,pickZ:u}).decodePickingColor,f=o.x,p=o.y,d=o.width,m=o.height,g=new(u?Float32Array:Uint8Array)(d*m*4);return hY(c,{sourceX:f,sourceY:p,sourceWidth:d,sourceHeight:m,target:g}),{pickedColors:g,decodePickingColor:h}}},{key:"_getPickingRect",value:function(t){var e=t.deviceX,n=t.deviceY,r=t.deviceRadius,i=t.deviceWidth,o=t.deviceHeight,a=Math.max(0,e-r),s=Math.max(0,n-r),l=Math.min(i,e+r+1)-a,u=Math.min(o,n+r+1)-s;return l<=0||u<=0?null:{x:a,y:s,width:l,height:u}}}]),t}(),VK={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"},qK=function(){function t(e){(0,s.Z)(this,t);var n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,VK),n.appendChild(this.el)),this.isVisible=!1}return(0,l.Z)(t,[{key:"setTooltip",value:function(t,e,n){var r=this.el;if("string"===typeof t)r.innerText=t;else{if(!t)return this.isVisible=!1,void(r.style.display="none");"text"in t&&(r.innerText=t.text),"html"in t&&(r.innerHTML=t.html),"className"in t&&(r.className=t.className),Object.assign(r.style,t.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(e,"px, ").concat(n,"px)")}},{key:"remove",value:function(){this.el&&this.el.remove()}}]),t}(),GK=globalThis._parseImageNode,WK="undefined"!==typeof Image,HK="undefined"!==typeof ImageBitmap,XK=Boolean(GK),YK=!!IG||XK;function $K(t){var e=JK(t);if(!e)throw new Error("Not an image");return e}function KK(t){switch($K(t)){case"data":return t;case"image":case"imagebitmap":var e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function JK(t){return"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!==typeof Image&&t instanceof Image?"image":t&&"object"===typeof t&&t.data&&t.width&&t.height?"data":null}var QK=/^data:image\/svg\+xml/,tJ=/\.svg((\?|#).*)?$/;function eJ(t){return t&&(QK.test(t)||tJ.test(t))}function nJ(t,e){if(eJ(e)){var n=(new TextDecoder).decode(t);try{"function"===typeof unescape&&"function"===typeof encodeURIComponent&&(n=unescape(encodeURIComponent(n)))}catch(r){throw new Error(r.message)}return"data:image/svg+xml;base64,".concat(btoa(n))}return rJ(t,e)}function rJ(t,e){if(eJ(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function iJ(t,e,n){return oJ.apply(this,arguments)}function oJ(){return oJ=(0,GV.Z)(of().mark((function t(e,n,r){var i,o,a;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=nJ(e,r),o=self.URL||self.webkitURL,a="string"!==typeof i&&o.createObjectURL(i),t.prev=3,t.next=6,aJ(a||i,n);case 6:return t.abrupt("return",t.sent);case 7:return t.prev=7,a&&o.revokeObjectURL(a),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[3,,7,10]])}))),oJ.apply(this,arguments)}function aJ(t,e){return sJ.apply(this,arguments)}function sJ(){return sJ=(0,GV.Z)(of().mark((function t(e,n){var r;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=new Image).src=e,!(n.image&&n.image.decode&&r.decode)){t.next=6;break}return t.next=5,r.decode();case 5:return t.abrupt("return",r);case 6:return t.next=8,new Promise((function(t,n){try{r.onload=function(){return t(r)},r.onerror=function(t){return n(new Error("Could not load image ".concat(e,": ").concat(t)))}}catch(i){n(i)}}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)}))),sJ.apply(this,arguments)}var lJ={},uJ=!0;function cJ(t,e,n){return hJ.apply(this,arguments)}function hJ(){return hJ=(0,GV.Z)(of().mark((function t(e,n,r){var i,o,a;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!eJ(r)){t.next=7;break}return t.next=3,iJ(e,n,r);case 3:o=t.sent,i=o,t.next=8;break;case 7:i=rJ(e,r);case 8:return a=n&&n.imagebitmap,t.next=11,fJ(i,a);case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)}))),hJ.apply(this,arguments)}function fJ(t){return pJ.apply(this,arguments)}function pJ(){return pJ=(0,GV.Z)(of().mark((function t(e){var n,r=arguments;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!dJ(n=r.length>1&&void 0!==r[1]?r[1]:null)&&uJ||(n=null),!n){t.next=13;break}return t.prev=3,t.next=6,createImageBitmap(e,n);case 6:return t.abrupt("return",t.sent);case 9:t.prev=9,t.t0=t.catch(3),console.warn(t.t0),uJ=!1;case 13:return t.next=15,createImageBitmap(e);case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t,null,[[3,9]])}))),pJ.apply(this,arguments)}function dJ(t){for(var e in t||lJ)return!1;return!0}var mJ=!1,gJ=!0;function vJ(t){var e=yJ(t);return function(t){var e=yJ(t);if(!(e.byteLength>=24&&2303741511===e.getUint32(0,mJ)))return null;return{mimeType:"image/png",width:e.getUint32(16,mJ),height:e.getUint32(20,mJ)}}(e)||function(t){var e=yJ(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,mJ)&&255===e.getUint8(2)))return null;var n=function(){for(var t=new Set([65499,65476,65484,65501,65534]),e=65504;e<65520;++e)t.add(e);var n=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:n}}(),r=n.tableMarkers,i=n.sofMarkers,o=2;for(;o+9<e.byteLength;){var a=e.getUint16(o,mJ);if(i.has(a))return{mimeType:"image/jpeg",height:e.getUint16(o+5,mJ),width:e.getUint16(o+7,mJ)};if(!r.has(a))return null;o+=2,o+=e.getUint16(o,mJ)}return null}(e)||function(t){var e=yJ(t);if(!(e.byteLength>=10&&1195984440===e.getUint32(0,mJ)))return null;return{mimeType:"image/gif",width:e.getUint16(6,gJ),height:e.getUint16(8,gJ)}}(e)||function(t){var e=yJ(t);if(!(e.byteLength>=14&&16973===e.getUint16(0,mJ)&&e.getUint32(2,gJ)===e.byteLength))return null;return{mimeType:"image/bmp",width:e.getUint32(18,gJ),height:e.getUint32(22,gJ)}}(e)}function yJ(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function _J(t,e){return xJ.apply(this,arguments)}function xJ(){return xJ=(0,GV.Z)(of().mark((function t(e,n){var r,i,o;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=vJ(e)||{},i=r.mimeType,eq(o=globalThis._parseImageNode),t.next=5,o(e,i);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)}))),xJ.apply(this,arguments)}function bJ(){return bJ=(0,GV.Z)(of().mark((function t(e,n,r){var i,o,a,s,l;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=(n=n||{}).image||{},o=i.type||"auto",a=(r||{}).url,s=wJ(o),t.t0=s,t.next="imagebitmap"===t.t0?8:"image"===t.t0?12:"data"===t.t0?16:20;break;case 8:return t.next=10,cJ(e,n,a);case 10:return l=t.sent,t.abrupt("break",21);case 12:return t.next=14,iJ(e,n,a);case 14:return l=t.sent,t.abrupt("break",21);case 16:return t.next=18,_J(e,n);case 18:return l=t.sent,t.abrupt("break",21);case 20:eq(!1);case 21:return"data"===o&&(l=KK(l)),t.abrupt("return",l);case 23:case"end":return t.stop()}}),t)}))),bJ.apply(this,arguments)}function wJ(t){switch(t){case"auto":case"data":return function(){if(HK)return"imagebitmap";if(WK)return"image";if(YK)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(t){switch(t){case"auto":return HK||WK||YK;case"imagebitmap":return HK;case"image":return WK;case"data":return YK;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}var kJ={id:"image",module:"images",name:"Images",version:"3.1.8",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function(t,e,n){return bJ.apply(this,arguments)},tests:[function(t){return Boolean(vJ(new DataView(t)))}],options:{image:{type:"auto",decode:!0}}};var SJ={name:"JSON",extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(t){var e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse},EJ="8.7.8",IJ=globalThis.deck&&globalThis.deck.VERSION;if(IJ&&IJ!==EJ)throw new Error("deck.gl - multiple versions detected: ".concat(IJ," vs ").concat(EJ));IJ||(iZ.log(1,"deck.gl ".concat(EJ))(),globalThis.deck=iS(iS({},globalThis.deck),{},{VERSION:EJ,version:EJ,log:iZ,_registerLoggers:function(t){zV=t}}),function(t){var e=BG();t=Array.isArray(t)?t:[t];var n,r=(0,ch.Z)(t);try{var i=function(){var t=rq(n.value);e.find((function(e){return t===e}))||e.unshift(t)};for(r.s();!(n=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}}([SJ,[kJ,{imagebitmap:{premultiplyAlpha:"none"}}]]));var CJ=globalThis.deck,AJ=globalThis;function PJ(t){if(!t&&!Oj())return"Node";if(Nj(t))return"Electron";var e="undefined"!==typeof navigator?navigator:{},n=t||e.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";var r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i?"IE":AJ.chrome?"Chrome":AJ.safari?"Safari":AJ.mozInnerScreenX?"Firefox":"Unknown"}var TJ=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.Z)(this,n),(r=e.call(this,t,i)).target=null,r._queryPending=!1,r._pollingPromise=null,Object.seal((0,Fo.Z)(r)),r}return(0,l.Z)(n,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.conservative,n=void 0!==e&&e;return this.begin(n?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(35976)}},{key:"begin",value:function(t){return this._queryPending||(this.target=t,this.gl2.beginQuery(this.target,this.handle)),this}},{key:"end",value:function(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}},{key:"isResultAvailable",value:function(){if(!this._queryPending)return!1;var t=this.gl2.getQueryParameter(this.handle,34919);return t&&(this._queryPending=!1),t}},{key:"isTimerDisjoint",value:function(){return this.gl2.getParameter(36795)}},{key:"getResult",value:function(){return this.gl2.getQueryParameter(this.handle,34918)}},{key:"getTimerMilliseconds",value:function(){return this.getResult()/1e6}},{key:"createPoll",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;var n=0;return this._pollingPromise=new Promise((function(r,i){requestAnimationFrame((function o(){t.isResultAvailable()?(r(t.getResult()),t._pollingPromise=null):n++>e?(i("Timed out"),t._pollingPromise=null):requestAnimationFrame(o)}))})),this._pollingPromise}},{key:"_createHandle",value:function(){return n.isSupported(this.gl)?this.gl2.createQuery():null}},{key:"_deleteHandle",value:function(){this.gl2.deleteQuery(this.handle)}}],[{key:"isSupported",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=nH(t),i=FY(t,vY),o=r||i,a=(0,ch.Z)(n);try{for(a.s();!(e=a.n()).done;){var s=e.value;switch(s){case"queries":o=o&&r;break;case"timers":o=o&&i;break;default:uX(!1)}}}catch(l){a.e(l)}finally{a.f()}return o}}]),n}(yX);var MJ=Oj()&&"undefined"!==typeof document,LJ=0,RJ=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.Z)(this,t);var n=e.onCreateContext,r=void 0===n?function(t){return tX(t)}:n,i=e.onAddHTML,o=void 0===i?null:i,a=e.onInitialize,l=void 0===a?function(){}:a,u=e.onRender,c=void 0===u?function(){}:u,h=e.onFinalize,f=void 0===h?function(){}:h,p=e.onError,d=e.gl,m=void 0===d?null:d,g=e.glOptions,v=void 0===g?{}:g,y=e.debug,_=void 0!==y&&y,x=e.createFramebuffer,b=void 0!==x&&x,w=e.autoResizeViewport,k=void 0===w||w,S=e.autoResizeDrawingBuffer,E=void 0===S||S,I=e.stats,C=void 0===I?lX.get("animation-loop-".concat(LJ++)):I,A=e.useDevicePixels,P=void 0===A||A;"useDevicePixelRatio"in e&&(JW.deprecated("useDevicePixelRatio","useDevicePixels")(),P=e.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:o,onInitialize:l,onRender:c,onFinalize:f,onError:p,gl:m,glOptions:v,debug:_,createFramebuffer:b},this.gl=m,this.needsRedraw=null,this.timeline=null,this.stats=C,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:k,autoResizeDrawingBuffer:E,useDevicePixels:P}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}return(0,l.Z)(t,[{key:"delete",value:function(){this.stop(),this._setDisplay(null)}},{key:"setNeedsRedraw",value:function(t){return uX("string"===typeof t),this.needsRedraw=this.needsRedraw||t,this}},{key:"setProps",value:function(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;var n=this._getPageLoadPromise().then((function(){return!t._running||t._initialized?null:(t._createWebGLContext(e),t._createFramebuffer(),t._startEventHandling(),t._initializeCallbackData(),t._updateCallbackData(),t._resizeCanvasDrawingBuffer(),t._resizeViewport(),t._gpuTimeQuery=TJ.isSupported(t.gl,["timers"])?new TJ(t.gl):null,t._initialized=!0,t.onInitialize(t.animationProps))})).then((function(e){t._running&&(t._addCallbackData(e||{}),!1!==e&&t._startLoop())}));return this.props.onError&&n.catch(this.props.onError),this}},{key:"redraw",value:function(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}},{key:"stop",value:function(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}},{key:"attachTimeline",value:function(t){return this.timeline=t,this.timeline}},{key:"detachTimeline",value:function(){this.timeline=null}},{key:"waitForRender",value:function(){var t=this;return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((function(e){t._resolveNextFrame=e}))),this._nextFramePromise}},{key:"toDataURL",value:function(){var t=(0,GV.Z)(of().mark((function t(){return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setNeedsRedraw("toDataURL"),t.next=3,this.waitForRender();case 3:return t.abrupt("return",this.gl.canvas.toDataURL());case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isContextLost",value:function(){return this.gl.isContextLost()}},{key:"onCreateContext",value:function(){var t;return(t=this.props).onCreateContext.apply(t,arguments)}},{key:"onInitialize",value:function(){var t;return(t=this.props).onInitialize.apply(t,arguments)}},{key:"onRender",value:function(){var t;return(t=this.props).onRender.apply(t,arguments)}},{key:"onFinalize",value:function(){var t;return(t=this.props).onFinalize.apply(t,arguments)}},{key:"getHTMLControlValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=document.getElementById(t);return n?Number(n.value):e}},{key:"setViewParameters",value:function(){return JW.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function(){var t=this;this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame((function e(){t._running&&(t.redraw(),t._animationFrameId=t._requestAnimationFrame(e))}))}},{key:"_getPageLoadPromise",value:function(){return this._pageLoadPromise||(this._pageLoadPromise=MJ?new Promise((function(t,e){MJ&&"complete"===document.readyState?t(document):window.addEventListener("load",(function(){t(document)}))})):Promise.resolve({})),this._pageLoadPromise}},{key:"_setDisplay",value:function(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}},{key:"_cancelAnimationFrame",value:function(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):(e=t,"undefined"!==typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e));var e}},{key:"_requestAnimationFrame",value:function(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):(e=t,"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60));var e}},{key:"_renderFrame",value:function(){var t;this.display?(t=this.display)._renderFrame.apply(t,arguments):this.onRender.apply(this,arguments)}},{key:"_clearNeedsRedraw",value:function(){this.needsRedraw=null}},{key:"_setupFrame",value:function(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){var t=this._getSizeAndAspect(),e=t.width,n=t.height,r=t.aspect;e===this.animationProps.width&&n===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(t){"object"===typeof t&&null!==t&&(this.animationProps=Object.assign({},this.animationProps,t))}},{key:"_createWebGLContext",value:function(t){if(this.offScreen=t.canvas&&"undefined"!==typeof OffscreenCanvas&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?eX(this.props.gl,t):this.onCreateContext(t),!eH(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");UH(this.gl,kH),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";var e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(e);var n=this.props.onAddHTML(e);n&&(e.innerHTML=n)}}},{key:"_getSizeAndAspect",value:function(){var t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight,n=1,r=this.gl.canvas;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:t>0&&e>0&&(n=t/e),{width:t,height:e,aspect:n}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){aX(t,HH(e.useDevicePixels),e)}else{var n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}}(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new ZY(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_beginTimers",value:function(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}},{key:"_endTimers",value:function(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}},{key:"_startEventHandling",value:function(){var t=this.gl.canvas;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}},{key:"_onMousemove",value:function(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}},{key:"_onMouseleave",value:function(t){this.animationProps._mousePosition=null}}]),t}(),NJ=n(4097),OJ=n.n(NJ),zJ={mousedown:1,mousemove:2,mouseup:4};!function(t){var e=t.prototype.handler;t.prototype.handler=function(t){var n=this.store;t.button>0&&"pointerdown"===t.type&&(function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(n,(function(e){return e.pointerId===t.pointerId}))||n.push(t)),e.call(this,t)}}(OJ().PointerEventInput),OJ().MouseInput.prototype.handler=function(t){var e=zJ[t.type];1&e&&t.button>=0&&(this.pressed=!0),2&e&&0===t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))};var DJ=OJ().Manager,FJ=OJ(),BJ=FJ?[[FJ.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[FJ.Rotate,{enable:!1}],[FJ.Pinch,{enable:!1}],[FJ.Swipe,{enable:!1}],[FJ.Pan,{threshold:0,enable:!1}],[FJ.Press,{enable:!1}],[FJ.Tap,{event:"doubletap",taps:2,enable:!1}],[FJ.Tap,{event:"anytap",enable:!1}],[FJ.Tap,{enable:!1}]]:null,jJ={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},ZJ={doubletap:["tap"]},UJ={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},VJ=["keydown","keyup"],qJ=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],GJ=["wheel","mousewheel"],WJ={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},HJ={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},XJ="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",YJ="undefined"!==typeof window?window:n.g,$J=("undefined"!==typeof n.g?n.g:window,"undefined"!==typeof document&&document,!1);try{var KJ={get passive(){return $J=!0,!0}};YJ.addEventListener("test",KJ,KJ),YJ.removeEventListener("test",KJ,KJ)}catch(s2){}var JJ=-1!==XJ.indexOf("firefox"),QJ=GJ,tQ="wheel",eQ=4.000244140625,nQ=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,s.Z)(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},i),this.events=QJ.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(t){return e.addEventListener(t,r.handleEvent,!!$J&&{passive:!1})}))}return(0,l.Z)(t,[{key:"destroy",value:function(){var t=this;this.events.forEach((function(e){return t.element.removeEventListener(e,t.handleEvent)}))}},{key:"enableEventType",value:function(t,e){t===tQ&&(this.options.enable=e)}},{key:"handleEvent",value:function(t){if(this.options.enable){var e=t.deltaY;YJ.WheelEvent&&(JJ&&t.deltaMode===YJ.WheelEvent.DOM_DELTA_PIXEL&&(e/=YJ.devicePixelRatio),t.deltaMode===YJ.WheelEvent.DOM_DELTA_LINE&&(e*=40));var n={x:t.clientX,y:t.clientY};0!==e&&e%eQ===0&&(e=Math.floor(e/eQ)),t.shiftKey&&e&&(e*=.25),this._onWheel(t,-e,n)}}},{key:"_onWheel",value:function(t,e,n){this.callback({type:tQ,center:n,delta:e,srcEvent:t,pointerType:"mouse",target:t.target})}}]),t}(),rQ=qJ,iQ="pointermove",oQ="pointerover",aQ="pointerout",sQ="pointerleave",lQ=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,s.Z)(this,t),this.element=e,this.callback=n,this.pressed=!1,this.options=Object.assign({enable:!0},i),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=rQ.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(t){return e.addEventListener(t,r.handleEvent)}))}return(0,l.Z)(t,[{key:"destroy",value:function(){var t=this;this.events.forEach((function(e){return t.element.removeEventListener(e,t.handleEvent)}))}},{key:"enableEventType",value:function(t,e){t===iQ&&(this.enableMoveEvent=e),t===oQ&&(this.enableOverEvent=e),t===aQ&&(this.enableOutEvent=e),t===sQ&&(this.enableLeaveEvent=e)}},{key:"handleEvent",value:function(t){this.handleOverEvent(t),this.handleOutEvent(t),this.handleLeaveEvent(t),this.handleMoveEvent(t)}},{key:"handleOverEvent",value:function(t){this.enableOverEvent&&"mouseover"===t.type&&this.callback({type:oQ,srcEvent:t,pointerType:"mouse",target:t.target})}},{key:"handleOutEvent",value:function(t){this.enableOutEvent&&"mouseout"===t.type&&this.callback({type:aQ,srcEvent:t,pointerType:"mouse",target:t.target})}},{key:"handleLeaveEvent",value:function(t){this.enableLeaveEvent&&"mouseleave"===t.type&&this.callback({type:sQ,srcEvent:t,pointerType:"mouse",target:t.target})}},{key:"handleMoveEvent",value:function(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.which&&(this.pressed=!1),this.pressed||this.callback({type:iQ,srcEvent:t,pointerType:"mouse",target:t.target});break;case"mouseup":this.pressed=!1}}}]),t}(),uQ=VJ,cQ="keydown",hQ="keyup",fQ=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,s.Z)(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},i),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=uQ.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=i.tabIndex||0,e.style.outline="none",this.events.forEach((function(t){return e.addEventListener(t,r.handleEvent)}))}return(0,l.Z)(t,[{key:"destroy",value:function(){var t=this;this.events.forEach((function(e){return t.element.removeEventListener(e,t.handleEvent)}))}},{key:"enableEventType",value:function(t,e){t===cQ&&(this.enableDownEvent=e),t===hQ&&(this.enableUpEvent=e)}},{key:"handleEvent",value:function(t){var e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:cQ,srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:hQ,srcEvent:t,key:t.key,target:t.target}))}}]),t}(),pQ="contextmenu",dQ=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,s.Z)(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},r),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}return(0,l.Z)(t,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function(t,e){t===pQ&&(this.options.enable=e)}},{key:"handleEvent",value:function(t){this.options.enable&&this.callback({type:pQ,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}]),t}(),mQ={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};var gQ={srcElement:"root",priority:0},vQ=function(){function t(e){(0,s.Z)(this,t),this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}return(0,l.Z)(t,[{key:"isEmpty",value:function(){return!this._active}},{key:"add",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.handlers,a=this.handlersByElement;n&&("object"!==typeof n||n.addEventListener)&&(n={srcElement:n}),n=n?Object.assign({},gQ,n):gQ;var s=a.get(n.srcElement);s||(s=[],a.set(n.srcElement,s));var l={type:t,handler:e,srcElement:n.srcElement,priority:n.priority};r&&(l.once=!0),i&&(l.passive=!0),o.push(l),this._active=this._active||!l.passive;for(var u=s.length-1;u>=0&&!(s[u].priority>=l.priority);)u--;s.splice(u+1,0,l)}},{key:"remove",value:function(t,e){for(var n=this.handlers,r=this.handlersByElement,i=n.length-1;i>=0;i--){var o=n[i];if(o.type===t&&o.handler===e){n.splice(i,1);var a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}this._active=n.some((function(t){return!t.passive}))}},{key:"handleEvent",value:function(t){if(!this.isEmpty()){for(var e=this._normalizeEvent(t),n=t.srcEvent.target;n&&n!==e.rootElement;){if(this._emit(e,n),e.handled)return;n=n.parentNode}this._emit(e,"root")}}},{key:"_emit",value:function(t,e){var n=this.handlersByElement.get(e);if(n){for(var r=!1,i=function(){t.handled=!0},o=function(){t.handled=!0,r=!0},a=[],s=0;s<n.length;s++){var l=n[s],u=l.type,c=l.handler,h=l.once;if(c(Object.assign({},t,{type:u,stopPropagation:i,stopImmediatePropagation:o})),h&&a.push(n[s]),r)break}for(var f=0;f<a.length;f++){var p=a[f],d=p.type,m=p.handler;this.remove(d,m)}}}},{key:"_normalizeEvent",value:function(t){var e=this.eventManager.element;return Object.assign({},t,function(t){var e=mQ[t.srcEvent.type];if(!e)return null;var n=t.srcEvent,r=n.buttons,i=n.button,o=n.which,a=!1,s=!1,l=!1;return 4===e||2===e&&!Number.isFinite(r)?(a=1===o,s=2===o,l=3===o):2===e?(a=Boolean(1&r),s=Boolean(4&r),l=Boolean(2&r)):1===e&&(a=0===i,s=1===i,l=2===i),{leftButton:a,middleButton:s,rightButton:l}}(t),function(t,e){var n=t.srcEvent;if(!t.center&&!Number.isFinite(n.clientX))return null;var r=t.center||{x:n.clientX,y:n.clientY},i=e.getBoundingClientRect(),o=i.width/e.offsetWidth||1,a=i.height/e.offsetHeight||1;return{center:r,offsetCenter:{x:(r.x-i.left-e.clientLeft)/o,y:(r.y-i.top-e.clientTop)/a}}}(t,e),{handled:!1,rootElement:e})}}]),t}(),yQ={events:null,recognizers:null,recognizerOptions:{},Manager:DJ,touchAction:"none",tabIndex:0},_Q=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Z)(this,t),this.options=Object.assign({},yQ,n),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);var r=n.events;r&&this.on(r)}return(0,l.Z)(t,[{key:"setElement",value:function(t){var e=this;if(this.element&&this.destroy(),this.element=t,t){var n=this.options,r=n.Manager;for(var o in this.manager=new r(t,{touchAction:n.touchAction,recognizers:n.recognizers||BJ}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(jJ).forEach((function(t){var n=e.manager.get(t);n&&jJ[t].forEach((function(t){n.recognizeWith(t)}))})),n.recognizerOptions){var a=this.manager.get(o);if(a){var s=n.recognizerOptions[o];delete s.enable,a.set(s)}}this.wheelInput=new nQ(t,this._onOtherEvent,{enable:!1}),this.moveInput=new lQ(t,this._onOtherEvent,{enable:!1}),this.keyInput=new fQ(t,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new dQ(t,this._onOtherEvent,{enable:!1});var l,u=(0,ch.Z)(this.events);try{for(u.s();!(l=u.n()).done;){var c=(0,i.Z)(l.value,2),h=c[0],f=c[1];f.isEmpty()||(this._toggleRecognizer(f.recognizerName,!0),this.manager.on(h,f.handleEvent))}}catch(s2){u.e(s2)}finally{u.f()}}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(t,e,n){this._addEventHandler(t,e,n,!1)}},{key:"once",value:function(t,e,n){this._addEventHandler(t,e,n,!0)}},{key:"watch",value:function(t,e,n){this._addEventHandler(t,e,n,!1,!0)}},{key:"off",value:function(t,e){this._removeEventHandler(t,e)}},{key:"_toggleRecognizer",value:function(t,e){var n=this.manager;if(n){var r=n.get(t);if(r&&r.options.enable!==e){r.set({enable:e});var i=ZJ[t];i&&!this.options.recognizers&&i.forEach((function(i){var o=n.get(i);e?(o.requireFailure(t),r.dropRequireFailure(i)):o.dropRequireFailure(t)}))}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}}},{key:"_addEventHandler",value:function(t,e,n,r,i){if("string"===typeof t){var o=this.manager,a=this.events,s=HJ[t]||t,l=a.get(s);l||(l=new vQ(this),a.set(s,l),l.recognizerName=WJ[s]||s,o&&o.on(s,l.handleEvent)),l.add(t,e,n,r,i),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}else for(var u in n=e,t)this._addEventHandler(u,t[u],n,r,i)}},{key:"_removeEventHandler",value:function(t,e){if("string"===typeof t){var n=this.events,r=HJ[t]||t,i=n.get(r);if(i&&(i.remove(t,e),i.isEmpty())){var o,a=i.recognizerName,s=!1,l=(0,ch.Z)(n.values());try{for(l.s();!(o=l.n()).done;){var u=o.value;if(u.recognizerName===a&&!u.isEmpty()){s=!0;break}}}catch(s2){l.e(s2)}finally{l.f()}s||this._toggleRecognizer(a,!1)}}else for(var c in t)this._removeEventHandler(c,t[c])}},{key:"_onBasicInput",value:function(t){var e=t.srcEvent,n=UJ[e.type];n&&this.manager.emit(n,t)}},{key:"_onOtherEvent",value:function(t){this.manager.emit(t.type,t)}}]),t}();function xQ(){}var bQ={id:"",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},onWebGLInitialized:xQ,onResize:xQ,onViewStateChange:xQ,onInteractionStateChange:xQ,onBeforeRender:xQ,onAfterRender:xQ,onLoad:xQ,onError:function(t,e){return iZ.error(t)()},_onMetrics:null,getCursor:function(t){return t.isDragging?"grabbing":"grab"},debug:!1,drawPickingColors:!1},wQ=function(){function t(e){(0,s.Z)(this,t),e=iS(iS({},bQ),e),this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isHovering:!1,isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),e.viewState&&e.initialViewState&&iZ.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===PJ()&&iZ.warn("IE 11 support will be deprecated in v8.0")(),e.gl||"undefined"!==typeof document&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new qV({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&aZ.setProps(e._typedArrayManagerProps),this.animationLoop.start()}return(0,l.Z)(t,[{key:"finalize",value:function(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),this.props.canvas||this.props.gl||!this.canvas||(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}},{key:"setProps",value:function(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&iZ.removed("onLayerHover","onHover")(),"onLayerClick"in t&&iZ.removed("onLayerClick","onClick")(),t.initialViewState&&!ZU(this.props.initialViewState,t.initialViewState)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);var e=Object.create(this.props);Object.assign(e,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(e),this.layerManager&&(this.viewManager.setProps(e),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(e),this.effectManager.setProps(e),this.deckRenderer.setProps(e),this.deckPicker.setProps(e)),this.stats.get("setProps Time").timeEnd()}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(this.props._animate)return"Deck._animate";var e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);var n=this.viewManager.needsRedraw(t),r=this.layerManager.needsRedraw(t),i=this.effectManager.needsRedraw(t),o=this.deckRenderer.needsRedraw(t);return e=e||n||r||i||o}},{key:"redraw",value:function(t){if(this.layerManager){var e=t||this.needsRedraw({clearRedrawFlags:!0});e&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(e):this._drawLayers(e))}}},{key:"getViews",value:function(){return this.viewManager.views}},{key:"getViewports",value:function(t){return this.viewManager.getViewports(t)}},{key:"pickObject",value:function(t){var e=this._pick("pickObject","pickObject Time",t).result;return e.length?e[0]:null}},{key:"pickMultipleObjects",value:function(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}},{key:"pickObjects",value:function(t){return this._pick("pickObjects","pickObjects Time",t)}},{key:"_addResources",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:e})}},{key:"_removeResources",value:function(t){var e,n=(0,ch.Z)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.layerManager.resourceManager.remove(r)}}catch(s2){n.e(s2)}finally{n.f()}}},{key:"_pick",value:function(t,e,n){var r=this.stats;r.get("Pick Count").incrementCount(),r.get(e).timeStart();var i=this.deckPicker[t](iS({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects()},n));return r.get(e).timeEnd(),i}},{key:"_createCanvas",value:function(t){var e=t.canvas;("string"===typeof e&&UU(e=document.getElementById(e)),e)||((e=document.createElement("canvas")).id=t.id||"deckgl-overlay",(t.parent||document.body).appendChild(e));return Object.assign(e.style,t.style),e}},{key:"_setCanvasSize",value:function(t){if(this.canvas){var e=t.width,n=t.height;(e||0===e)&&(e=Number.isFinite(e)?"".concat(e,"px"):e,this.canvas.style.width=e),(n||0===n)&&(n=Number.isFinite(n)?"".concat(n,"px"):n,this.canvas.style.position="absolute",this.canvas.style.height=n)}}},{key:"_updateCanvasSize",value:function(){if(this._checkForCanvasSizeChange()){var t=this.width,e=this.height;this.viewManager.setProps({width:t,height:e}),this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function(){var t=this.canvas;if(!t)return!1;var e=t.clientWidth||t.width,n=t.clientHeight||t.height;return(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,!0)}},{key:"_createAnimationLoop",value:function(t){var e=this,n=t.width,r=t.height,i=t.gl,o=t.glOptions,a=t.debug,s=t.onError,l=t.onBeforeRender,u=t.onAfterRender,c=t.useDevicePixels,h=t.autoResizeDrawingBuffer;return new RJ({width:n,height:r,useDevicePixels:c,autoResizeDrawingBuffer:h,autoResizeViewport:!1,gl:i,onCreateContext:function(t){return tX(iS(iS(iS({},o),t),{},{canvas:e.canvas,debug:a,onContextLost:function(){return e._onContextLost()}}))},onInitialize:function(t){return e._setGLContext(t.gl)},onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:u,onError:s})}},{key:"_getViewState",value:function(){return this.props.viewState||this.viewState}},{key:"_getViews",value:function(){var t=this.props.views||[new wV({id:"default-view"})];return(t=Array.isArray(t)?t:[t]).length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}},{key:"_onContextLost",value:function(){var t=this.props.onError;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}},{key:"_onPointerMove",value:function(t){var e=this._pickRequest;if("pointerleave"===t.type)e.x=-1,e.y=-1,e.radius=0;else{if(t.leftButton||t.rightButton)return;var n=t.offsetCenter;if(!n)return;e.x=n.x,e.y=n.y,e.radius=this.props.pickingRadius}this.layerManager&&(this.layerManager.context.mousePosition={x:e.x,y:e.y}),e.event=t,e.mode="hover"}},{key:"_pickAndCallback",value:function(){var t=this._pickRequest;if(t.event){var e=this._pick("pickObject","pickObject Time",t),n=e.result,r=e.emptyInfo;this.interactiveState.isHovering=n.length>0;var i,o=r,a=!1,s=(0,ch.Z)(n);try{for(s.s();!(i=s.n()).done;){var l=i.value;o=l,a=l.layer.onHover(l,t.event)}}catch(s2){s.e(s2)}finally{s.f()}if(!a&&this.props.onHover&&this.props.onHover(o,t.event),this.props.getTooltip){var u=this.props.getTooltip(o);this.tooltip.setTooltip(u,o.x,o.y)}t.event=null}}},{key:"_updateCursor",value:function(){var t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_setGLContext",value:function(t){if(!this.layerManager){this.canvas||(this.canvas=t.canvas,eX(t,{enable:!0,copyState:!0})),this.tooltip=new qK(this.canvas),UH(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);var e=new EV;for(var n in e.play(),this.animationLoop.attachTimeline(e),this.eventManager=new _Q(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}}),TU)this.eventManager.on(n,this._onEvent);this.viewManager=new K$({timeline:e,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});var r=this.viewManager.getViewports()[0];this.layerManager=new $$(t,{deck:this,stats:this.stats,viewport:r,timeline:e}),this.effectManager=new MK,this.deckRenderer=new zK(t),this.deckPicker=new UK(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function(t,e){var n=this.layerManager.context.gl;UH(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers(iS({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:t,effects:this.effectManager.getEffects()},e)),this.props.onAfterRender({gl:n})}},{key:"_onRenderFrame",value:function(t){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),iZ.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}},{key:"_onViewStateChange",value:function(t){var e=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState=iS(iS({},this.viewState),{},(0,c.Z)({},t.viewId,e)),this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}},{key:"_onInteractionStateChange",value:function(t){this.interactiveState.isDragging=t.isDragging,this.props.onInteractionStateChange(t)}},{key:"_onEvent",value:function(t){var e=TU[t.type],n=t.offsetCenter;if(e&&n){var r=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:r,viewports:this.getViewports(n)},this._lastPointerDownInfo),o=i.layer,a=o&&(o[e.handler]||o.props[e.handler]),s=this.props[e.handler],l=!1;a&&(l=a.call(o,i,t)),!l&&s&&s(i,t)}}},{key:"_onPointerDown",value:function(t){var e=t.offsetCenter,n=this._pick("pickObject","pickObject Time",{x:e.x,y:e.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=n.result[0]||n.emptyInfo}},{key:"_getFrameStats",value:function(){var t=this.stats;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();var e=this.animationLoop.stats;t.get("GPU Time").addTime(e.get("GPU Time").lastTiming),t.get("CPU Time").addTime(e.get("CPU Time").lastTiming)}},{key:"_getMetrics",value:function(){var t=this.metrics,e=this.stats;t.fps=e.get("frameRate").getHz(),t.setPropsTime=e.get("setProps Time").time,t.updateAttributesTime=e.get("Update Attributes").time,t.framesRedrawn=e.get("Redraw Count").count,t.pickTime=e.get("pickObject Time").time+e.get("pickMultipleObjects Time").time+e.get("pickObjects Time").time,t.pickCount=e.get("Pick Count").count,t.gpuTime=e.get("GPU Time").time,t.cpuTime=e.get("CPU Time").time,t.gpuTimePerFrame=e.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=e.get("CPU Time").getAverageTime();var n=lX.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}]),t}();function kQ(t){var e=t.map,n=t.gl,r=t.deck;if(e.__deck)return e.__deck;var o=r&&r.props._customRender,a={useDevicePixels:!0,_customRender:function(){e.triggerRepaint(),o&&o()},parameters:{depthMask:!0,depthTest:!0,blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthFunc:515,blendEquation:32774},userData:{isExternal:!1,mapboxLayers:new Set},views:r&&r.props.views||[new wV({id:"mapbox"})]};return r&&r.props.gl!==n||(Object.assign(a,{gl:n,width:!1,height:!1,touchAction:"unset",viewState:SQ(e)}),e.on("move",(function(){return function(t,e){t.setProps({viewState:SQ(e)}),t.needsRedraw({clearRedrawFlags:!0})}(r,e)}))),r?(r.setProps(a),r.props.userData.isExternal=!0):(r=new wQ(a),e.on("remove",(function(){r.finalize(),e.__deck=null}))),r.props.userData.mapboxVersion=function(t){var e=0,n=0;if(t.version){var r=t.version.split(".").slice(0,2).map(Number),o=(0,i.Z)(r,2);e=o[0],n=o[1]}return{major:e,minor:n}}(e),e.__deck=r,e.on("render",(function(){r.layerManager&&function(t,e){var n=t.props.userData,r=n.mapboxLayers;if(n.isExternal){var i=Array.from(r,(function(t){return t.id})),o=t.props.layers.some((function(t){return!i.includes(t.id)})),a=t.getViewports(),s=a.findIndex((function(t){return"mapbox"===t.id})),l=a.length>1||s<0;(o||l)&&(s>=0&&((a=a.slice())[s]=EQ(t,e,!1)),t._drawLayers("mapbox-repaint",{viewports:a,layerFilter:function(e){return(!t.props.layerFilter||t.props.layerFilter(e))&&("mapbox"!==e.viewport.id||!i.includes(e.layer.id))},clearCanvas:!1}))}t.props.userData.currentViewport=null}(r,e)})),r}function SQ(t){var e=t.getCenter();return{longitude:e.lng,latitude:e.lat,zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch()}}function EQ(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.props.userData.mapboxVersion;return new XU(Object.assign({id:"mapbox",x:0,y:0,width:t.width,height:t.height,repeat:e.getRenderWorldCopies()},SQ(e),n?{nearZMultiplier:1===r.major&&r.minor>=3||r.major>=2?.02:1/(t.height||1)}:{nearZMultiplier:.1}))}function IQ(t){if(!t.props.userData.isExternal){var e=[],n=0;t.props.userData.mapboxLayers.forEach((function(t){var r=new(0,t.props.type)(t.props,{_offset:n++});e.push(r)})),t.setProps({layers:e})}}wQ.getPropTypes=function(t){return{id:t.string,width:t.oneOfType([t.number,t.string]),height:t.oneOfType([t.number,t.string]),layers:t.oneOfType([t.object,t.array]),layerFilter:t.func,views:t.oneOfType([t.object,t.array]),viewState:t.object,effects:t.arrayOf(t.instanceOf(oK)),controller:t.oneOfType([t.func,t.bool,t.object]),gl:t.object,glOptions:t.object,parameters:t.object,pickingRadius:t.number,useDevicePixels:t.oneOfType([t.bool,t.number]),touchAction:t.string,eventRecognizerOptions:t.object,onWebGLInitialized:t.func,onResize:t.func,onViewStateChange:t.func,onInteractionStateChange:t.func,onBeforeRender:t.func,onAfterRender:t.func,onLoad:t.func,onError:t.func,debug:t.bool,drawPickingColors:t.bool,_framebuffer:t.object,_animate:t.bool,_pickable:t.bool,_typedArrayManagerProps:t.object}},wQ.defaultProps=bQ,wQ.VERSION=CJ.VERSION;var CQ=function(){function t(e){if((0,s.Z)(this,t),!e.id)throw new Error("Layer must have an unique id");this.id=e.id,this.type="custom",this.renderingMode=e.renderingMode||"3d",this.map=null,this.deck=null,this.props=e}return(0,l.Z)(t,[{key:"onAdd",value:function(t,e){var n,r;this.map=t,this.deck=kQ({map:t,gl:e,deck:this.props.deck}),n=this.deck,r=this,n.props.userData.mapboxLayers.add(r),IQ(n)}},{key:"onRemove",value:function(){var t,e;t=this.deck,e=this,t.props.userData.mapboxLayers.delete(e),IQ(t)}},{key:"setProps",value:function(t){Object.assign(this.props,t,{id:this.id}),this.deck&&IQ(this.deck)}},{key:"render",value:function(t,e){!function(t,e,n){var r=t.props.userData.currentViewport;r||(r=EQ(t,e,!0),t.props.userData.currentViewport=r),t.layerManager&&t._drawLayers("mapbox-repaint",{viewports:[r],layerFilter:function(t){var e=t.layer;return n.id===e.id},clearCanvas:!1})}(this.deck,this.map,this)}}]),t}(),AQ={name:"project32",dependencies:[G$],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},PQ={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1};var TQ={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:PQ,e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){var n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){var r=Array.from(t.pickingHighlightColor,(function(t){return t/255}));Number.isFinite(r[3])||(r[3]=1),e.picking_uHighlightColor=r}return void 0!==t.pickingActive&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}},MQ=iS({inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}}},TQ),LQ=function(){function t(e,n){(0,s.Z)(this,t),this.opts=n,this.source=e}return(0,l.Z)(t,[{key:"value",get:function(){return this.source.value}},{key:"getValue",value:function(){var t=this.source.getBuffer(),e=this.getAccessor();if(t)return[t,e];var n=this.source.value,r=e.size,i=n;if(n&&n.length!==r){i=new Float32Array(r);for(var o=e.elementOffset||0,a=0;a<r;++a)i[a]=n[o+a]}return i}},{key:"getAccessor",value:function(){return iS(iS({},this.source.getAccessor()),this.opts)}}]),t}();function RQ(t){return t.stride||t.size*t.bytesPerElement}function NQ(t,e){e.offset&&iZ.removed("shaderAttribute.offset","vertexOffset, elementOffset")();var n=RQ(t),r=("vertexOffset"in e?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return iS(iS({},e),{},{offset:r,stride:n})}var OQ=function(){function t(e,n){(0,s.Z)(this,t),this.gl=e,this.id=n.id,this.size=n.size;var r=n.logicalType||n.type,i=5130===r,o=n.defaultValue;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0),n.defaultValue=o;var a=r;i?a=5126:!a&&n.isIndexed?a=e&&function(t,e){return FY(t,e)}(e,xY)?5125:5123:a||(a=5126),n.logicalType=r,n.type=a;var l=function(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||a||5126);this.shaderAttributes={},this.doublePrecision=i,i&&!1===n.fp64&&(l=Float32Array),n.bytesPerElement=l.BYTES_PER_ELEMENT,this.defaultType=l,this.value=null,this.settings=n,this.state={externalBuffer:null,bufferAccessor:n,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null,this.setData(n)}return(0,l.Z)(t,[{key:"buffer",get:function(){if(!this._buffer){var t=this.settings,e=t.isIndexed,n=t.type;this._buffer=new OX(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}},{key:"byteOffset",get:function(){var t=this.getAccessor();return t.vertexOffset?t.vertexOffset*RQ(t):0}},{key:"numInstances",get:function(){return this.state.numInstances},set:function(t){this.state.numInstances=t}},{key:"delete",value:function(){this._buffer&&(this._buffer.delete(),this._buffer=null),aZ.release(this.state.allocatedValue)}},{key:"getShaderAttributes",value:function(t,e){if(this.doublePrecision){var n={},r=this.value instanceof Float64Array,i=function(t,e){var n=NQ(t,e);return{high:n,low:iS(iS({},n),{},{offset:n.offset+4*t.size})}}(this.getAccessor(),e||{});return n[t]=new LQ(this,i.high),n["".concat(t,"64Low")]=r?new LQ(this,i.low):new Float32Array(this.size),n}if(e){var o=NQ(this.getAccessor(),e);return(0,c.Z)({},t,new LQ(this,o))}return(0,c.Z)({},t,this)}},{key:"getBuffer",value:function(){return this.state.constant?null:this.state.externalBuffer||this._buffer}},{key:"getValue",value:function(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}},{key:"getAccessor",value:function(){return this.state.bufferAccessor}},{key:"getBounds",value:function(){if(this.state.bounds)return this.state.bounds;var t=null;if(this.state.constant){var e=this.value.slice();t=[e,e]}else{var n=this.value,r=this.numInstances,i=this.size,o=r*i;if(n&&o&&n.length>=o){for(var a=new Array(i).fill(1/0),s=new Array(i).fill(-1/0),l=0;l<o;)for(var u=0;u<i;u++){var c=n[l++];c<a[u]&&(a[u]=c),c>s[u]&&(s[u]=c)}t=[a,s]}}return this.state.bounds=t,t}},{key:"setData",value:function(t){var e=this.state;ArrayBuffer.isView(t)?t={value:t}:t instanceof OX&&(t={buffer:t});var n=iS(iS({},this.settings),t);if(e.bufferAccessor=n,e.bounds=null,t.constant){var r=t.value;if(r=this._normalizeValue(r,[],0),this.settings.normalized&&(r=this._normalizeConstant(r)),!(!e.constant||!this._areValuesEqual(r,this.value)))return!1;e.externalBuffer=null,e.constant=!0,this.value=r}else if(t.buffer){var i=t.buffer;e.externalBuffer=i,e.constant=!1,this.value=t.value;var o=t.value instanceof Float64Array;n.type=t.type||i.accessor.type,n.bytesPerElement=i.accessor.BYTES_PER_ELEMENT*(o?2:1),n.stride=RQ(n)}else if(t.value){this._checkExternalBuffer(t);var a=t.value;e.externalBuffer=null,e.constant=!1,this.value=a,n.bytesPerElement=a.BYTES_PER_ELEMENT,n.stride=RQ(n);var s=this.buffer,l=this.byteOffset;this.doublePrecision&&a instanceof Float64Array&&(a=OZ(a,n));var u=a.byteLength+l+2*n.stride;s.byteLength<u&&s.reallocate(u),s.setAccessor(null),s.subData({data:a,offset:l}),n.type=t.type||s.accessor.type}return!0}},{key:"updateSubBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state.bounds=null;var e=this.value,n=t.startOffset,r=void 0===n?0:n,i=t.endOffset;this.buffer.subData({data:this.doublePrecision&&e instanceof Float64Array?OZ(e,{size:this.size,startIndex:r,endIndex:i}):e.subarray(r,i),offset:r*e.BYTES_PER_ELEMENT+this.byteOffset})}},{key:"allocate",value:function(t){var e=t.numInstances,n=t.copy,r=void 0!==n&&n,i=this.state,o=i.allocatedValue,a=aZ.allocate(o,e+1,{size:this.size,type:this.defaultType,copy:r});this.value=a;var s=this.buffer,l=this.byteOffset;return s.byteLength<a.byteLength+l&&(s.reallocate(a.byteLength+l),r&&o&&s.subData({data:o instanceof Float64Array?OZ(o,this):o,offset:l})),i.allocatedValue=a,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}},{key:"_checkExternalBuffer",value:function(t){var e=t.value;if(!t.constant&&e){var n=this.defaultType,r=!1;if(this.doublePrecision&&(r=e.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(e.constructor.name));e instanceof n||!this.settings.normalized||"normalized"in t||iZ.warn("Attribute ".concat(this.id," is normalized"))()}}},{key:"_normalizeConstant",value:function(t){switch(this.settings.type){case 5120:return new Float32Array(t).map((function(t){return(t+128)/255*2-1}));case 5122:return new Float32Array(t).map((function(t){return(t+32768)/65535*2-1}));case 5121:return new Float32Array(t).map((function(t){return t/255}));case 5123:return new Float32Array(t).map((function(t){return t/65535}));default:return t}}},{key:"_normalizeValue",value:function(t,e,n){var r=this.settings,i=r.defaultValue,o=r.size;if(Number.isFinite(t))return e[n]=t,e;if(!t)return e[n]=i[0],e;switch(o){case 4:e[n+3]=Number.isFinite(t[3])?t[3]:i[3];case 3:e[n+2]=Number.isFinite(t[2])?t[2]:i[2];case 2:e[n+1]=Number.isFinite(t[1])?t[1]:i[1];case 1:e[n+0]=Number.isFinite(t[0])?t[0]:i[0];break;default:for(var a=o;--a>=0;)e[n+a]=Number.isFinite(t[a])?t[a]:i[a]}return e}},{key:"_areValuesEqual",value:function(t,e){if(!t||!e)return!1;for(var n=this.size,r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}}]),t}(),zQ=[],DQ=[];function FQ(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=zQ,i={index:-1,data:t,target:[]};return t?"function"===typeof t[Symbol.iterator]?r=t:t.length>0&&(DQ.length=t.length,r=DQ):r=zQ,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function BQ(t){return t&&t[Symbol.asyncIterator]}function jQ(t,e){var n=e.size,r=e.stride,i=e.offset,o=e.startIndices,a=e.nested,s=t.BYTES_PER_ELEMENT,l=r?r/s:n,u=i?i/s:0,c=Math.floor((t.length-u)/l);return function(e,r){var i=r.index,s=r.target;if(!o){for(var h=i*l+u,f=0;f<n;f++)s[f]=t[h+f];return s}var p,d=o[i],m=o[i+1]||c;if(a){p=new Array(m-d);for(var g=d;g<m;g++){var v=g*l+u;s=new Array(n);for(var y=0;y<n;y++)s[y]=t[v+y];p[g-d]=s}}else if(l===n)p=t.subarray(d*n+u,m*n+u);else{p=new t.constructor((m-d)*n);for(var _=0,x=d;x<m;x++)for(var b=x*l+u,w=0;w<n;w++)p[_++]=t[b+w]}return p}}var ZQ=[],UQ=[[0,1/0]];function VQ(t,e){if(t===UQ)return t;if(e[0]<0&&(e[0]=0),e[0]>=e[1])return t;for(var n=[],r=t.length,i=0,o=0;o<r;o++){var a=t[o];a[1]<e[0]?(n.push(a),i=o+1):a[0]>e[1]?n.push(a):e=[Math.min(a[0],e[0]),Math.max(a[1],e[1])]}return n.splice(i,0,e),n}function qQ(t){var e=t.source,n=t.target,r=t.start,i=void 0===r?0:r,o=t.size,a=t.getData,s=t.end||n.length,l=e.length,u=s-i;if(l>u)n.set(e.subarray(0,u),i);else if(n.set(e,i),a)for(var c=l;c<u;)for(var h=a(c,e),f=0;f<o;f++)n[i+c]=h[f]||0,c++}var GQ={interpolation:{duration:0,easing:function(t){return t}},spring:{stiffness:.05,damping:.5}};function WQ(t,e){return t?(Number.isFinite(t)&&(t={duration:t}),t.type=t.type||"interpolation",iS(iS(iS({},GQ[t.type]),e),t)):null}function HQ(t,e){return e.getBuffer()?[e.getBuffer(),{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function XQ(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function YQ(t){t.push(t.shift())}function $Q(t,e){var n=t.doublePrecision,r=t.settings,i=t.value,o=t.size,a=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*o)*a}function KQ(t){var e=t.buffer,n=t.numInstances,r=t.attribute,i=t.fromLength,o=t.fromStartIndices,a=t.getData,s=void 0===a?function(t){return t}:a,l=r.doublePrecision&&r.value instanceof Float64Array?2:1,u=r.size*l,c=r.byteOffset,h=r.startIndices,f=o&&h,p=$Q(r,n),d=r.state.constant;if(f||!(i>=p)){var m=d?r.value:r.getBuffer().getData({srcByteOffset:c});if(r.settings.normalized&&!d){var g=s;s=function(t,e){return r._normalizeConstant(g(t,e))}}var v=d?function(t,e){return s(m,e)}:function(t,e){return s(m.subarray(t,t+u),e)},y=e.getData({length:i}),_=new Float32Array(p);!function(t){var e=t.source,n=t.target,r=t.size,i=t.getData,o=t.sourceStartIndices,a=t.targetStartIndices;if(!Array.isArray(a))return qQ({source:e,target:n,size:r,getData:i}),n;for(var s=0,l=0,u=i&&function(t,e){return i(t+l,e)},c=Math.min(o.length,a.length),h=1;h<c;h++){var f=o[h]*r,p=a[h]*r;qQ({source:e.subarray(s,f),target:n,start:l,end:p,size:r,getData:u}),s=f,l=p}l<n.length&&qQ({source:[],target:n,start:l,size:r,getData:u})}({source:y,target:_,sourceStartIndices:o,targetStartIndices:h,size:u,getData:v}),e.byteLength<_.byteLength+c&&e.reallocate(_.byteLength+c),e.subData({data:_,offset:c})}}var JQ=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Z)(this,n),r=e.call(this,t,i);var o=i.transition,a=void 0!==o&&o,l=i.noAlloc,u=void 0!==l&&l,c=i.update,h=void 0===c?null:c,f=i.accessor,p=void 0===f?null:f,d=i.transform,m=void 0===d?null:d,g=i.startIndices,v=void 0===g?null:g;return Object.assign(r.settings,{transition:a,noAlloc:u,update:h||p&&r._autoUpdater,accessor:p,transform:m}),Object.assign(r.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:UQ,startIndices:v}),Object.seal(r.settings),Object.seal(r.state),r._validateAttributeUpdaters(),r}return(0,l.Z)(n,[{key:"startIndices",get:function(){return this.state.startIndices},set:function(t){this.state.startIndices=t}},{key:"needsUpdate",value:function(){return this.state.needsUpdate}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearChangedFlags,n=void 0!==e&&e,r=this.state.needsRedraw;return this.state.needsRedraw=r&&!n,r}},{key:"getUpdateTriggers",value:function(){var t=this.settings.accessor;return[this.id].concat("function"!==typeof t&&t||[])}},{key:"supportsTransition",value:function(){return Boolean(this.settings.transition)}},{key:"getTransitionSetting",value:function(t){if(!t||!this.supportsTransition())return null;var e=this.settings.accessor,n=this.settings.transition,r=Array.isArray(e)?t[e.find((function(e){return t[e]}))]:t[e];return WQ(r,n)}},{key:"setNeedsUpdate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,e=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),e){var n=e.startRow,r=void 0===n?0:n,i=e.endRow,o=void 0===i?1/0:i;this.state.updateRanges=VQ(this.state.updateRanges,[r,o])}else this.state.updateRanges=UQ}},{key:"clearNeedsUpdate",value:function(){this.state.needsUpdate=!1,this.state.updateRanges=ZQ}},{key:"setNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||t}},{key:"update",value:function(t){this.setData(t)}},{key:"allocate",value:function(t){var e=this.state,r=this.settings;return!r.noAlloc&&(!!r.update&&((0,qU.Z)((0,GU.Z)(n.prototype),"allocate",this).call(this,{numInstances:t,copy:e.updateRanges!==UQ}),!0))}},{key:"updateBuffer",value:function(t){var e=t.numInstances,r=t.data,o=t.props,a=t.context;if(!this.needsUpdate())return!1;var s=this.state.updateRanges,l=this.settings,u=l.update,c=l.noAlloc,h=!0;if(u){var f,p=(0,ch.Z)(s);try{for(p.s();!(f=p.n()).done;){var d=(0,i.Z)(f.value,2),m=d[0],g=d[1];u.call(a,this,{data:r,startRow:m,endRow:g,props:o,numInstances:e})}}catch(s2){p.e(s2)}finally{p.f()}if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else{var v,y=(0,ch.Z)(s);try{for(y.s();!(v=y.n()).done;){var _=(0,i.Z)(v.value,2),x=_[0],b=_[1],w=Number.isFinite(x)?this.getVertexOffset(x):0,k=Number.isFinite(b)?this.getVertexOffset(b):c||!Number.isFinite(e)?this.value.length:e*this.size;(0,qU.Z)((0,GU.Z)(n.prototype),"updateSubBuffer",this).call(this,{startOffset:w,endOffset:k})}}catch(s2){y.e(s2)}finally{y.f()}}else;this._checkAttributeArray()}else h=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),h}},{key:"setConstantValue",value:function(t){return void 0!==t&&"function"!==typeof t&&(this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}},{key:"setExternalBuffer",value:function(t){var e=this.state;return t?(this.clearNeedsUpdate(),e.lastExternalBuffer===t||(e.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(e.lastExternalBuffer=null,!1)}},{key:"setBinaryValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.state,r=this.settings;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;n.binaryValue=t,this.setNeedsRedraw(),ArrayBuffer.isView(t)&&(t={value:t});var i=r.transform||e!==this.startIndices;if(i){UU(ArrayBuffer.isView(t.value),"invalid ".concat(r.accessor));var o=t.size&&t.size!==this.size;return n.binaryAccessor=jQ(t.value,{size:t.size||this.size,stride:t.stride,offset:t.offset,startIndices:e,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}},{key:"getVertexOffset",value:function(t){var e=this.startIndices;return(e?e[t]:t)*this.size}},{key:"getShaderAttributes",value:function(){var t=this.settings.shaderAttributes||(0,c.Z)({},this.id,null),e={};for(var r in t)Object.assign(e,(0,qU.Z)((0,GU.Z)(n.prototype),"getShaderAttributes",this).call(this,r,t[r]));return e}},{key:"_autoUpdater",value:function(t,e){var n=e.data,r=e.startRow,i=e.endRow,o=e.props,a=e.numInstances;if(!t.constant){var s=t.settings,l=t.state,u=t.value,c=t.size,h=t.startIndices,f=s.accessor,p=s.transform,d=l.binaryAccessor||("function"===typeof f?f:o[f]);UU("function"===typeof d,'accessor "'.concat(f,'" is not a function'));var m,g=t.getVertexOffset(r),v=FQ(n,r,i),y=v.iterable,_=v.objectInfo,x=(0,ch.Z)(y);try{for(x.s();!(m=x.n()).done;){var b=m.value;_.index++;var w=d(b,_);if(p&&(w=p.call(this,w)),h){var k=(_.index<h.length-1?h[_.index+1]:a)-h[_.index];if(w&&Array.isArray(w[0])){var S,E=g,I=(0,ch.Z)(w);try{for(I.s();!(S=I.n()).done;){var C=S.value;t._normalizeValue(C,u,E),E+=c}}catch(s2){I.e(s2)}finally{I.f()}}else w&&w.length>c?u.set(w,g):(t._normalizeValue(w,_.target,0),jV({target:u,source:_.target,start:g,count:k}));g+=k*c}else t._normalizeValue(w,u,g),g+=c}}catch(s2){x.e(s2)}finally{x.f()}}}},{key:"_validateAttributeUpdaters",value:function(){var t=this.settings;if(!(t.noAlloc||"function"===typeof t.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function(){var t=this.value,e=Math.min(4,this.size);if(t&&t.length>=e){var n=!0;switch(e){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}]),n}(OQ),QQ="void main() {gl_FragColor = vec4(0);}",t0="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",e0="#version 300 es\n".concat(t0);function n0(t,e){e=Array.isArray(e)?e:[e];var n=t.replace(/^\s+/,"").split(/\s+/),r=(0,i.Z)(n,3),o=r[0],a=r[1],s=r[2];return e.includes(o)&&a&&s?{qualifier:o,type:a,name:s.split(";")[0]}:null}function r0(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.version,n=void 0===e?100:e,r=t.input,i=t.inputType,o=t.output;if(!r)return 300===n?e0:n>300?"#version ".concat(n,"\n").concat(t0):QQ;var a=o0(r,i);return n>=300?"#version ".concat(n," ").concat(300===n?"es":"","\nin ").concat(i," ").concat(r,";\nout vec4 ").concat(o,";\nvoid main() {\n  ").concat(o," = ").concat(a,";\n}"):"varying ".concat(i," ").concat(r,";\nvoid main() {\n  gl_FragColor = ").concat(a,";\n}")}function i0(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return cW(!1),null}}function o0(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return cW(!1),null}}var a0=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.Z)(this,n),iH(t),(r=e.call(this,t,i)).initialize(i),r.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal((0,Fo.Z)(r)),r}return(0,l.Z)(n,[{key:"initialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,mX(this.buffers)||this.bind((function(){return t._unbindBuffers()})),this.setProps(e),this}},{key:"setProps",value:function(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}},{key:"setBuffers",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((function(){for(var n in e)t.setBuffer(n,e[n])})),this}},{key:"setBuffer",value:function(t,e){var n=this,r=this._getVaryingIndex(t),i=this._getBufferParams(e),o=i.buffer,a=i.byteSize,s=i.byteOffset;return r<0?(this.unused[t]=o,JW.warn((function(){return"".concat(n.id," unused varying buffer ").concat(t)}))(),this):(this.buffers[r]=e,this.bindOnUse||this._bindBuffer(r,o,s,a),this)}},{key:"begin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function(t){var e,n,r;return t instanceof OX===!1?(r=t.buffer,n=t.byteSize,e=t.byteOffset):r=t,void 0===e&&void 0===n||(e=e||0,n=n||r.byteLength-e),{buffer:r,byteOffset:e,byteSize:n}}},{key:"_getVaryingInfo",value:function(t){return this.configuration&&this.configuration.getVaryingInfo(t)}},{key:"_getVaryingIndex",value:function(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;var e=Number(t);return Number.isFinite(e)?e:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var t in this.buffers){var e=this._getBufferParams(this.buffers[t]),n=e.buffer,r=e.byteSize,i=e.byteOffset;this._bindBuffer(t,n,i,r)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var t in this.buffers)this._bindBuffer(t,null)}},{key:"_bindBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=e&&e.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,t,i,n,r):this.gl.bindBufferBase(35982,t,i),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(t){this.gl.bindTransformFeedback(36386,this.handle)}}],[{key:"isSupported",value:function(t){return nH(t)}}]),n}(yX),s0=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Z)(this,t),this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}return(0,l.Z)(t,[{key:"setupResources",value:function(t){var e,n=(0,ch.Z)(this.bindings);try{for(n.s();!(e=n.n()).done;){var r=e.value;this._setupTransformFeedback(r,t)}}catch(s2){n.e(s2)}finally{n.f()}}},{key:"updateModelProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.varyings;return e.length>0&&(t=Object.assign({},t,{varyings:e})),t}},{key:"getDrawOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.bindings[this.currentIndex],n=e.sourceBuffers,r=e.transformFeedback,i=Object.assign({},n,t.attributes);return{attributes:i,transformFeedback:r}}},{key:"swap",value:function(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t)}},{key:"getBuffer",value:function(t){var e=this.bindings[this.currentIndex].feedbackBuffers,n=t?e[t]:null;return n?n instanceof OX?n:n.buffer:null}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.varyingName,n=this.getBuffer(e);return n?n.getData():null}},{key:"delete",value:function(){for(var t in this.resources)this.resources[t].delete()}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&uX(nH(this.gl))}},{key:"_getFeedbackBuffers",value:function(t){var e=t.sourceBuffers,n=void 0===e?{}:e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(var i in this.feedbackMap){var o=this.feedbackMap[i];i in n&&(r[o]=i)}for(var a in Object.assign(r,t.feedbackBuffers),r){var s=r[a];if("string"===typeof s){var l=n[s],u=l.byteLength,c=l.usage,h=l.accessor;r[a]=this._createNewBuffer(a,{byteLength:u,usage:c,accessor:h})}}return r}},{key:"_setupBuffers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.sourceBuffers,n=void 0===e?null:e;Object.assign(this.feedbackMap,t.feedbackMap);var r=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}},{key:"_setupTransformFeedback",value:function(t,e){var n=e.model.program;t.transformFeedback=new a0(this.gl,{program:n,buffers:t.feedbackBuffers})}},{key:"_updateBindings",value:function(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){var e=this._swapBuffers(this.bindings[this.currentIndex]),n=e.sourceBuffers,r=e.feedbackBuffers,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}},{key:"_updateBinding",value:function(t,e){return t?(Object.assign(t.sourceBuffers,e.sourceBuffers),Object.assign(t.feedbackBuffers,e.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},e.sourceBuffers),feedbackBuffers:Object.assign({},e.feedbackBuffers)}}},{key:"_swapBuffers",value:function(t){if(!this.feedbackMap)return null;var e=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(var r in this.feedbackMap){var i=this.feedbackMap[r];e[r]=t.feedbackBuffers[i],n[i]=t.sourceBuffers[r],uX(n[i]instanceof OX)}return{sourceBuffers:e,feedbackBuffers:n}}},{key:"_createNewBuffer",value:function(t,e){var n=new OX(this.gl,e);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}}]),t}();function l0(t){var e=100,n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){var r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}var u0,c0={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},h0="transform_uSampler_",f0="transform_uSize_",p0="transform_position";function d0(t){var e=t.vs,n=t.sourceTextureMap,r=t.targetTextureVarying,i=t.targetTexture,o=Object.keys(n).length,a=null,s={},l=e,u={};if(o>0||r){var c=l.split("\n"),h=c.slice();if(c.forEach((function(t,e,i){if(o>0){var l=function(t,e){var n={},r=function(t){return n0(t,["attribute","in"])}(t);if(!r)return null;var i=r.type,o=r.name;if(o&&e[o]){var a="// ".concat(t," => Replaced by Transform with a sampler"),s=function(t){var e="".concat(h0).concat(t),n="".concat(f0).concat(t),r="  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}(o),l=s.samplerName,u=s.sizeName,c=s.uniformDeclerations,h=function(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return cW(!1),null}}(i),f="  ".concat(i," ").concat(o," = transform_getInput(").concat(l,", ").concat(u,").").concat(h,";\n");return n[l]=o,{updatedLine:a,inject:{"vs:#decl":c,"vs:#main-start":f},samplerTextureMap:n}}return null}(t,n);if(l){var c=l.updatedLine,f=l.inject;h[e]=c,u=RW([u,f]),Object.assign(s,l.samplerTextureMap),o--}}r&&!a&&(a=function(t,e){var n=n0(t,["varying","out"]);if(!n)return null;return n.name===e?n.type:null}(t,r))})),r){uX(i);var f="".concat(f0).concat(r),p="uniform vec2 ".concat(f,";\n"),d="     vec2 ".concat(p0," = transform_getPos(").concat(f,");\n     gl_Position = vec4(").concat(p0,", 0, 1.);\n");u=RW([u,{"vs:#decl":p,"vs:#main-start":d}])}l=h.join("\n")}return{vs:l,targetTextureType:a,inject:u,samplerTextureMap:s}}function m0(t){var e,n,r=t.sourceTextureMap,i=t.targetTextureVarying,o=t.targetTexture,a={};for(var s in i&&(e=o.width,n=o.height,a["".concat(f0).concat(i)]=[e,n]),r){var l=r[s];e=l.width,n=l.height,a["".concat(f0).concat(s)]=[e,n]}return a}var g0=(u0={},(0,c.Z)(u0,10241,9728),(0,c.Z)(u0,10240,9728),(0,c.Z)(u0,10242,33071),(0,c.Z)(u0,10243,33071),u0),v0="transform_output",y0=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Z)(this,t),this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}return(0,l.Z)(t,[{key:"updateModelProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._processVertexShader(t);return Object.assign({},t,e)}},{key:"getDrawOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.bindings[this.currentIndex],n=e.sourceBuffers,r=e.sourceTextures,i=e.framebuffer,o=e.targetTexture,a=Object.assign({},n,t.attributes),s=Object.assign({},t.uniforms),l=Object.assign({},t.parameters),u=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){for(var c in a.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var h=this.samplerTextureMap[c];s[c]=r[h]}this._setSourceTextureParameters();var f=m0({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(s,f)}return this.hasTargetTexture&&(u=!1,l.viewport=[0,0,i.width,i.height]),{attributes:a,framebuffer:i,uniforms:s,discard:u,parameters:l}}},{key:"swap",value:function(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(t)}},{key:"getTargetTexture",value:function(){return this.bindings[this.currentIndex].targetTexture}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.packed,n=void 0!==e&&e,r=this.bindings[this.currentIndex].framebuffer,i=hY(r);if(!n)return i;for(var o=i.constructor,a=i0(this.targetTextureType),s=new o(i.length*a/4),l=0,u=0;u<i.length;u+=4)for(var c=0;c<a;c++)s[l++]=i[u+c];return s}},{key:"getFramebuffer",value:function(){return this.bindings[this.currentIndex].framebuffer}},{key:"delete",value:function(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t._targetTextureVarying,n=t._swapTexture;this._swapTexture=n,this.targetTextureVarying=e,this.hasTargetTexture=e,this._setupTextures(t)}},{key:"_createTargetTexture",value:function(t){var e=t.sourceTextures,n=t.textureOrReference;if(n instanceof HX)return n;var r=e[n];return r?(this._targetRefTexName=n,this._createNewTexture(r)):null}},{key:"_setupTextures",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.sourceBuffers,n=t._sourceTextures,r=void 0===n?{}:n,i=t._targetTexture,o=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:e,sourceTextures:r,targetTexture:o}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}},{key:"_updateElementIDBuffer",value:function(t){if(!("number"!==typeof t||this.elementCount>=t)){var e=new Float32Array(t);e.forEach((function(t,e,n){n[e]=e})),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new OX(this.gl,{data:e,accessor:{size:1}}),this.elementCount=t}}},{key:"_updateBindings",value:function(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){var e=this._swapTextures(this.bindings[this.currentIndex]),n=e.sourceTextures,r=e.targetTexture,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}},{key:"_updateBinding",value:function(t,e){var n=e.sourceBuffers,r=e.sourceTextures,i=e.targetTexture;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,r),Object.assign(t.sourceBuffers,n),i){t.targetTexture=i;var o=i.width,a=i.height,s=t.framebuffer;s?(s.update({attachments:(0,c.Z)({},36064,i),resizeAttachments:!1}),s.resize({width:o,height:a})):t.framebuffer=new ZY(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:(0,c.Z)({},36064,i)})}return t}},{key:"_setSourceTextureParameters",value:function(){var t=this.currentIndex,e=this.bindings[t].sourceTextures;for(var n in e)e[n].setParameters(g0)}},{key:"_swapTextures",value:function(t){if(!this._swapTexture)return null;var e=Object.assign({},t.sourceTextures);return e[this._swapTexture]=t.targetTexture,{sourceTextures:e,targetTexture:t.sourceTextures[this._swapTexture]}}},{key:"_createNewTexture",value:function(t){var e,n=uY(t,{parameters:(e={},(0,c.Z)(e,10241,9728),(0,c.Z)(e,10240,9728),(0,c.Z)(e,10242,33071),(0,c.Z)(e,10243,33071),e),pixelStore:(0,c.Z)({},37440,!1)});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}},{key:"_processVertexShader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.bindings[this.currentIndex],n=e.sourceTextures,r=e.targetTexture,i=d0({vs:t.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),o=i.vs,a=i.uniforms,s=i.targetTextureType,l=i.inject,u=i.samplerTextureMap,c=RW([t.inject||{},l]);this.targetTextureType=s,this.samplerTextureMap=u;var h=t._fs||r0({version:l0(o),input:this.targetTextureVarying,inputType:s,output:v0}),f=this.hasSourceTextures||this.targetTextureVarying?[c0].concat(t.modules||[]):t.modules;return{vs:o,fs:h,modules:f,uniforms:a,inject:c}}}]),t}(),_0=null;function x0(t,e){var n;return new t((n=t.BYTES_PER_ELEMENT*e,(!_0||_0.byteLength<n)&&(_0=new ArrayBuffer(n)),_0),0,e)}var b0="elements must be GL.ELEMENT_ARRAY_BUFFER",w0=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Z)(this,n);var o=i.id||i.program&&i.program.id;return(r=e.call(this,t,Object.assign({},i,{id:o}))).buffer=null,r.bufferValue=null,r.isDefaultArray=i.isDefaultArray||!1,r.gl2=t,r.initialize(i),Object.seal((0,Fo.Z)(r)),r}return(0,l.Z)(n,[{key:"delete",value:function(){return(0,qU.Z)((0,GU.Z)(n.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete(),this}},{key:"MAX_ATTRIBUTES",get:function(){return n.getMaxAttributes(this.gl)}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(t)}},{key:"setProps",value:function(t){return this}},{key:"setElementBuffer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return uX(!e||34963===e.target,b0),this.bind((function(){t.gl.bindBuffer(34963,e?e.handle:null)})),this}},{key:"setBuffer",value:function(t,e,n){if(34963===e.target)return this.setElementBuffer(e,n);var r=n.size,i=n.type,o=n.stride,a=n.offset,s=n.normalized,l=n.integer,u=n.divisor,c=this.gl,h=this.gl2;return t=Number(t),this.bind((function(){c.bindBuffer(34962,e.handle),l?(uX(nH(c)),h.vertexAttribIPointer(t,r,i,o,a)):c.vertexAttribPointer(t,r,i,s,o,a),c.enableVertexAttribArray(t),h.vertexAttribDivisor(t,u||0)})),this}},{key:"enable",value:function(t){var e=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!r&&0===t&&!n.isSupported(this.gl,{constantAttributeZero:!0});return i||(t=Number(t),this.bind((function(){return r?e.gl.enableVertexAttribArray(t):e.gl.disableVertexAttribArray(t)}))),this}},{key:"getConstantBuffer",value:function(t,e){var n=this._normalizeConstantArrayValue(e),r=n.byteLength*t,i=n.length*t,o=!this.buffer;if(this.buffer=this.buffer||new OX(this.gl,r),o=(o=o||this.buffer.reallocate(r))||!this._compareConstantArrayValues(n,this.bufferValue)){var a=x0(e.constructor,i);!function(t){for(var e=t.target,n=t.source,r=t.start,i=void 0===r?0:r,o=t.count,a=void 0===o?1:o,s=n.length,l=a*s,u=0,c=i;u<s;u++)e[c++]=n[u];for(;u<l;)u<l-u?(e.copyWithin(i+u,i,i+u),u*=2):(e.copyWithin(i+u,i,i+l-u),u=l)}({target:a,source:n,start:0,count:i}),this.buffer.subData(a),this.bufferValue=e}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(t){return Array.isArray(t)?new Float32Array(t):t}},{key:"_compareConstantArrayValues",value:function(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}},{key:"_createHandle",value:function(){return this.gl.createVertexArray()}},{key:"_deleteHandle",value:function(t){return this.gl2.deleteVertexArray(t),[this.elements]}},{key:"_bindHandle",value:function(t){this.gl2.bindVertexArray(t)}},{key:"_getParameter",value:function(t,e){var n=this,r=e.location;return uX(Number.isFinite(r)),this.bind((function(){return 34373===t?n.gl.getVertexAttribOffset(r,t):n.gl.getVertexAttrib(r,t)}))}}],[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!e.constantAttributeZero||(nH(t)||"Chrome"===PJ())}},{key:"getDefaultArray",value:function(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new n(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(t){return n.MAX_ATTRIBUTES=n.MAX_ATTRIBUTES||t.getParameter(34921),n.MAX_ATTRIBUTES}},{key:"setConstant",value:function(t,e,r){switch(r.constructor){case Float32Array:n._setConstantFloatArray(t,e,r);break;case Int32Array:n._setConstantIntArray(t,e,r);break;case Uint32Array:n._setConstantUintArray(t,e,r);break;default:uX(!1)}}},{key:"_setConstantFloatArray",value:function(t,e,n){switch(n.length){case 1:t.vertexAttrib1fv(e,n);break;case 2:t.vertexAttrib2fv(e,n);break;case 3:t.vertexAttrib3fv(e,n);break;case 4:t.vertexAttrib4fv(e,n);break;default:uX(!1)}}},{key:"_setConstantIntArray",value:function(t,e,n){switch(uX(nH(t)),n.length){case 1:t.vertexAttribI1iv(e,n);break;case 2:t.vertexAttribI2iv(e,n);break;case 3:t.vertexAttribI3iv(e,n);break;case 4:t.vertexAttribI4iv(e,n);break;default:uX(!1)}}},{key:"_setConstantUintArray",value:function(t,e,n){switch(uX(nH(t)),n.length){case 1:t.vertexAttribI1uiv(e,n);break;case 2:t.vertexAttribI2uiv(e,n);break;case 3:t.vertexAttribI3uiv(e,n);break;case 4:t.vertexAttribI4uiv(e,n);break;default:uX(!1)}}}]),n}(yX),k0=/^(.+)__LOCATION_([0-9]+)$/,S0=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],E0=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Z)(this,t);var r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new w0(e),gX(this,"VertexArray","v6.0",S0),this.initialize(n),Object.seal(this)}return(0,l.Z)(t,[{key:"delete",value:function(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}},{key:"reset",value:function(){this.elements=null,this.elementsAccessor=null;var t=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}},{key:"setAttributes",value:function(t){var e=this;return Object.assign(this.attributes,t),this.vertexArrayObject.bind((function(){for(var n in t){var r=t[n];e._setAttribute(n,r)}e.gl.bindBuffer(34962,null)})),this}},{key:"setElementBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this}},{key:"setBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===e.target)return this.setElementBuffer(e,n);var r=this._resolveLocationAndAccessor(t,e,e.accessor,n),i=r.location,o=r.accessor;return i>=0&&(this.values[i]=e,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,e,o)),this}},{key:"setConstant",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},n)),i=r.location,o=r.accessor;return i>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e),this.values[i]=e,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}},{key:"unbindBuffers",value:function(){var t=this;return this.vertexArrayObject.bind((function(){t.elements&&t.vertexArrayObject.setElementBuffer(null),t.buffer=t.buffer||new OX(t.gl,{accessor:{size:4}});for(var e=0;e<t.vertexArrayObject.MAX_ATTRIBUTES;e++)t.values[e]instanceof OX&&(t.gl.disableVertexAttribArray(e),t.gl.bindBuffer(34962,t.buffer.handle),t.gl.vertexAttribPointer(e,1,5126,!1,0,0))})),this}},{key:"bindBuffers",value:function(){var t=this;return this.vertexArrayObject.bind((function(){t.elements&&t.setElementBuffer(t.elements);for(var e=0;e<t.vertexArrayObject.MAX_ATTRIBUTES;e++){var n=t.values[e];n instanceof OX&&t.setBuffer(e,n)}})),this}},{key:"bindForDraw",value:function(t,e,n){var r,i=this;return this.vertexArrayObject.bind((function(){i._setConstantAttributes(t,e),r=n()})),r}},{key:"_resolveLocationAndAccessor",value:function(t,e,n,r){var i=this,o={location:-1,accessor:null},a=this._getAttributeIndex(t),s=a.location,l=a.name;if(!Number.isFinite(s)||s<0)return this.unused[t]=e,JW.once(3,(function(){return"unused value ".concat(t," in ").concat(i.id)}))(),o;var u=this._getAttributeInfo(l||s);if(!u)return o;var c=this.accessors[s]||{},h=MX.resolve(u.accessor,c,n,r),f=h.size,p=h.type;return uX(Number.isFinite(f)&&Number.isFinite(p)),{location:s,accessor:h}}},{key:"_getAttributeInfo",value:function(t){return this.configuration&&this.configuration.getAttributeInfo(t)}},{key:"_getAttributeIndex",value:function(t){var e=Number(t);if(Number.isFinite(e))return{location:e};var n=k0.exec(t),r=n?n[1]:t,i=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+i,name:r}:{location:-1}}},{key:"_setAttribute",value:function(t,e){if(e instanceof OX)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof OX){var n=e[0],r=e[1];this.setBuffer(t,n,r)}else if(ArrayBuffer.isView(e)||Array.isArray(e)){var i=e;this.setConstant(t,i)}else{if(!(e.buffer instanceof OX))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");var o=e;this.setBuffer(t,o.buffer,o)}}},{key:"_setConstantAttributes",value:function(t,e){var n=Math.max(0|t,0|e),r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(var i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)r=this.values[i],ArrayBuffer.isView(r)&&this._setConstantAttribute(i,r)}},{key:"_setConstantAttributeZero",value:function(t,e){if(w0.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,t);else{var n=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}}},{key:"_setConstantAttribute",value:function(t,e){w0.setConstant(this.gl,t,e)}},{key:"_updateDrawParams",value:function(){for(var t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}},{key:"_updateDrawParamsForLocation",value:function(t,e){var n=this.values[e],r=this.accessors[e];if(n){var i=r.divisor>0;if(t.isInstanced=t.isInstanced||i,n instanceof OX){var o=n;if(i){var a=o.getVertexCount(r);t.instanceCount=Math.min(t.instanceCount,a)}else{var s=o.getVertexCount(r);t.vertexCount=Math.min(t.vertexCount,s)}}}}},{key:"setElements",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return JW.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,e)}}]),t}();function I0(t,e){for(var n=e.maxElts,r=void 0===n?16:n,i=e.size,o=void 0===i?1:i,a="[",s=0;s<t.length&&s<r;++s)s>0&&(a+=",".concat(s%o===0?" ":"")),a+=C0(t[s],e);var l=t.length>r?"...":"]";return"".concat(a).concat(l)}function C0(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=1e-16,r=e.isInteger,i=void 0!==r&&r;if(Array.isArray(t)||ArrayBuffer.isView(t))return I0(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return i?"0":"0.";if(i)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);var o=t.toPrecision(2),a=o.indexOf(".0");return a===o.length-2?o.slice(0,-1):o}function A0(t,e,n,r){var i,o,a=t.gl;if(!e)return o={},(0,c.Z)(o,r,"null"),(0,c.Z)(o,"Format ","N/A"),o;var s,l,u,h="NOT PROVIDED",f=1,p=0,d=0;if(n&&(h=n.type,f=n.size,s=-1!==(h=String(h).replace("Array","")).indexOf("nt")),e instanceof OX){var m,g,v=e,y=v.getDebugData(),_=y.data;if(l=y.changed?"*":"",u=_,p=(d=v.byteLength)/_.BYTES_PER_ELEMENT/f,n){var x=n.divisor>0;g="".concat(x?"I ":"P "," ").concat(p," (x").concat(f,"=").concat(d," bytes ").concat(hX(a,h),")")}else s=!0,g="".concat(d," bytes");return m={},(0,c.Z)(m,r,"".concat(l).concat(C0(u,{size:f,isInteger:s}))),(0,c.Z)(m,"Format ",g),m}return u=e,f=e.length,s=-1!==(h=String(e.constructor.name).replace("Array","")).indexOf("nt"),i={},(0,c.Z)(i,r,"".concat(C0(u,{size:f,isInteger:s})," (constant)")),(0,c.Z)(i,"Format ","".concat(f,"x").concat(h," (constant)")),i}function P0(t,e){var n=w$(e.type,e.size);return n?"".concat(t," (").concat(n.name,")"):t}function T0(t){var e=t.header,n=void 0===e?"Uniforms":e,r=t.program,i=t.uniforms,o=t.undefinedOnly,a=void 0!==o&&o;uX(r);var s,l=".*Matrix",u=r._uniformSetters,h={},f=Object.keys(u).sort(),p=0,d=(0,ch.Z)(f);try{for(d.s();!(s=d.n()).done;){var m=s.value;m.match(".*_.*")||m.match(l)||M0({table:h,header:n,uniforms:i,uniformName:m,undefinedOnly:a})&&p++}}catch(s2){d.e(s2)}finally{d.f()}var g,v=(0,ch.Z)(f);try{for(v.s();!(g=v.n()).done;){var y=g.value;y.match(l)&&M0({table:h,header:n,uniforms:i,uniformName:y,undefinedOnly:a})&&p++}}catch(s2){v.e(s2)}finally{v.f()}var _,x=(0,ch.Z)(f);try{for(x.s();!(_=x.n()).done;){var b=_.value;h[b]||M0({table:h,header:n,uniforms:i,uniformName:b,undefinedOnly:a})&&p++}}catch(s2){x.e(s2)}finally{x.f()}var w=0,k={};if(!a)for(var S in i){var E=i[S];h[S]||(w++,k[S]=(0,c.Z)({Type:"NOT USED: ".concat(E)},n,C0(E)))}return{table:h,count:p,unusedTable:k,unusedCount:w}}function M0(t){var e,n=t.table,r=t.header,i=t.uniforms,o=t.uniformName,a=t.undefinedOnly,s=i[o],l=function(t){return void 0!==t&&null!==t}(s);return(!a||!l)&&(n[o]=(e={},(0,c.Z)(e,r,l?C0(s):"N/A"),(0,c.Z)(e,"Uniform Type",l?s:"NOT PROVIDED"),e),!0)}function L0(t){var e=t.accessor,n=w$(e.type,e.size);return n?"".concat(n.name," ").concat(t.name):t.name}var R0={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function N0(t,e){var n=(e||{}).attributeMap,r=void 0===n?R0:n;return r&&r[t]||t}function O0(t,e){var n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}uX(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}var z0=function(){},D0={},F0=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Z)(this,t);var r=n.id,i=void 0===r?pX("model"):r;uX(eH(e)),this.id=i,this.gl=e,this.id=n.id||pX("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}return(0,l.Z)(t,[{key:"initialize",value:function(t){this.props={},this.programManager=t.programManager||I$.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;var e=t.program,n=void 0===e?null:e,r=t.vs,i=t.fs,o=t.modules,a=t.defines,s=t.inject,l=t.varyings,u=t.bufferMode,c=t.transpileToGLSL100;this.programProps={program:n,vs:r,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=void 0!==t.drawMode?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},uX(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function(t){this._setModelProps(t)}},{key:"delete",value:function(){for(var t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getProgram",value:function(){return this.program}},{key:"setProgram",value:function(t){var e=t.program,n=t.vs,r=t.fs,i=t.modules,o=t.defines,a=t.inject,s=t.varyings,l=t.bufferMode,u=t.transpileToGLSL100;this.programProps={program:e,vs:n,fs:r,modules:i,defines:o,inject:a,varyings:s,bufferMode:l,transpileToGLSL100:u},this._programDirty=!0}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"setDrawMode",value:function(t){return this.drawMode=t,this}},{key:"setVertexCount",value:function(t){return uX(Number.isFinite(t)),this.vertexCount=t,this}},{key:"setInstanceCount",value:function(t){return uX(Number.isFinite(t)),this.instanceCount=t,this}},{key:"setGeometry",value:function(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(t,e,n){var r={},i=e.indices;for(var o in e.attributes){var a=e.attributes[o],s=N0(o,n);if("indices"===o)i=a;else if(a.constant)r[s]=a.value;else{var l=a.value,u=iS({},a);delete u.value,r[s]=[new OX(t,l),u],O0(o,u)}}if(i){var c=i.value||i;uX(c instanceof Uint16Array||c instanceof Uint32Array,'attribute array for "indices" must be of integer type');var h={size:1,isIndexed:void 0===i.isIndexed||i.isIndexed};r.indices=[new OX(t,{data:c,target:34963}),h]}return r}(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:"setAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(mX(t))return this;var e={};for(var n in t){var r=t[n];e[n]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(e),this}},{key:"setUniforms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,t),this}},{key:"getModuleUniforms",value:function(t){this._checkProgram();var e=this.programManager.getUniforms(this.program);return e?e(t):{}}},{key:"updateModuleSettings",value:function(t){var e=this.getModuleUniforms(t||{});return this.setUniforms(e)}},{key:"clear",value:function(t){return rY(this.program.gl,t),this}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();var e,n=t.moduleSettings,r=void 0===n?null:n,i=t.framebuffer,o=t.uniforms,a=void 0===o?{}:o,s=t.attributes,l=void 0===s?{}:s,u=t.transformFeedback,c=void 0===u?this.transformFeedback:u,h=t.parameters,f=void 0===h?{}:h,p=t.vertexArray,d=void 0===p?this.vertexArray:p;this.setAttributes(l),this.updateModuleSettings(r),this.setUniforms(a),JW.priority>=2&&(e=this._logDrawCallStart(2));var m=this.vertexArray.getDrawParams(),g=this.props,v=g.isIndexed,y=void 0===v?m.isIndexed:v,_=g.indexType,x=void 0===_?m.indexType:_,b=g.indexOffset,w=void 0===b?m.indexOffset:b,k=g.vertexArrayInstanced,S=void 0===k?m.isInstanced:k;S&&!this.isInstanced&&JW.warn("Found instanced attributes on non-instanced model",this.id)();var E=this.isInstanced,I=this.instanceCount,C=this.props,A=C.onBeforeRender,P=void 0===A?z0:A,T=C.onAfterRender,M=void 0===T?z0:T;P(),this.program.setUniforms(this.uniforms);var L=this.program.draw(Object.assign(D0,t,{logPriority:e,uniforms:null,framebuffer:i,parameters:f,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:d,transformFeedback:c,isIndexed:y,indexType:x,isInstanced:E,instanceCount:I,offset:y?w:0}));return M(),JW.priority>=2&&this._logDrawCallEnd(e,d,i),L}},{key:"transform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.discard,n=void 0===e||e,r=t.feedbackBuffers,i=t.unbindModels,o=void 0===i?[]:i,a=t.parameters;r&&this._setFeedbackBuffers(r),n&&(a=Object.assign({},a,(0,c.Z)({},35977,n))),o.forEach((function(t){return t.vertexArray.unbindBuffers()}));try{this.draw(Object.assign({},t,{parameters:a}))}finally{o.forEach((function(t){return t.vertexArray.bindBuffers()}))}return this}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return JW.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}},{key:"_setModelProps",value:function(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}},{key:"_checkProgram",value:function(){if(this._programDirty||this.programManager.stateHash!==this._programManagerState){var t=this.programProps.program;if(t)this._managedProgram=!1;else{var e=this.programProps,n=e.vs,r=e.fs,i=e.modules,o=e.inject,a=e.defines,s=e.varyings,l=e.bufferMode,u=e.transpileToGLSL100;t=this.programManager.get({vs:n,fs:r,modules:i,inject:o,defines:a,varyings:s,bufferMode:l,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}uX(t instanceof E$,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new E0(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}}},{key:"_deleteGeometryBuffers",value:function(){for(var t in this.geometryBuffers){var e=this.geometryBuffers[t][0]||this.geometryBuffers[t];e instanceof OX&&e.delete()}}},{key:"_setAnimationProps",value:function(t){this.animated&&uX(t,"Model.draw(): animated uniforms but no animationProps")}},{key:"_setFeedbackBuffers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(mX(t))return this;var e=this.program.gl;return this.transformFeedback=this.transformFeedback||new a0(e,{program:this.program}),this.transformFeedback.setBuffers(t),this}},{key:"_logDrawCallStart",value:function(t){var e=t>3?0:1e4;if(!(Date.now()-this.lastLogTime<e))return this.lastLogTime=Date.now(),JW.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:JW.level<=2})(),t}},{key:"_logDrawCallEnd",value:function(t,e,n,r){if(void 0!==t){var i=function(t){var e=t.vertexArray,n=t.header,r=void 0===n?"Attributes":n;if(!e.configuration)return{};var i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=A0(e,e.elements,null,r));var o=e.values;for(var a in o){var s=e._getAttributeInfo(a);if(s){var l="".concat(a,": ").concat(s.name),u=e.accessors[s.location];u&&(l="".concat(a,": ").concat(P0(s.name,u))),i[l]=A0(e,o[a],u,r)}}return i}({vertexArray:e,header:"".concat(this.id," attributes"),attributes:this._attributes}),o=T0({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),a=o.table,s=o.unusedTable,l=o.unusedCount,u=T0({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0}),h=u.table;u.count>0&&JW.log("MISSING UNIFORMS",Object.keys(h))(),l>0&&JW.log("UNUSED UNIFORMS",Object.keys(s))();var f=function(t){var e,n={},r="Accessors for ".concat(t.id),i=(0,ch.Z)(t.attributeInfos);try{for(i.s();!(e=i.n()).done;){var o=e.value;if(o){var a=L0(o);n["in ".concat(a)]=(0,c.Z)({},r,JSON.stringify(o.accessor))}}}catch(s2){i.e(s2)}finally{i.f()}var s,l=(0,ch.Z)(t.varyingInfos);try{for(l.s();!(s=l.n()).done;){var u=s.value;if(u){var h=L0(u);n["out ".concat(h)]=(0,c.Z)({},r,JSON.stringify(u.accessor))}}}catch(s2){l.e(s2)}finally{l.f()}return n}(this.vertexArray.configuration);JW.table(t,i)(),JW.table(t,a)(),JW.table(t+1,f)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),JW.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}}]),t}(),B0=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Z)(this,t),this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}return(0,l.Z)(t,[{key:"delete",value:function(){var t=this.model,e=this.bufferTransform,n=this.textureTransform;t&&t.delete(),e&&e.delete(),n&&n.delete()}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearRenderTarget,n=void 0===e||e,r=this._updateDrawOptions(t);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}},{key:"swap",value:function(){var t,e=!1,n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=(0,ch.Z)(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;e=e||i.swap()}}catch(s2){r.e(s2)}finally{r.f()}uX(e,"Nothing to swap")}},{key:"getBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}},{key:"getData",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=(0,ch.Z)(n);try{for(r.s();!(t=r.n()).done;){var i=t.value,o=i.getData(e);if(o)return o}}catch(s2){r.e(s2)}finally{r.f()}return null}},{key:"getFramebuffer",value:function(){return this.textureTransform&&this.textureTransform.getFramebuffer()}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);var e,n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=(0,ch.Z)(n);try{for(r.s();!(e=r.n()).done;){var i=e.value;i.update(t)}}catch(s2){r.e(s2)}finally{r.f()}}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.gl;this._buildResourceTransforms(e,t),t=this._updateModelProps(t),this.model=new F0(e,Object.assign({},t,{fs:t.fs||r0({version:l0(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}},{key:"_updateModelProps",value:function(t){var e,n=Object.assign({},t),r=[this.bufferTransform,this.textureTransform].filter(Boolean),i=(0,ch.Z)(r);try{for(i.s();!(e=i.n()).done;){n=e.value.updateModelProps(n)}}catch(s2){i.e(s2)}finally{i.f()}return n}},{key:"_buildResourceTransforms",value:function(t,e){(function(t){if(!mX(t.feedbackBuffers)||!mX(t.feedbackMap)||t.varyings&&t.varyings.length>0)return!0;return!1})(e)&&(this.bufferTransform=new s0(t,e)),function(t){if(!mX(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)return!0;return!1}(e)&&(this.textureTransform=new y0(t,e)),uX(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}},{key:"_updateDrawOptions",value:function(t){var e,n=Object.assign({},t),r=[this.bufferTransform,this.textureTransform].filter(Boolean),i=(0,ch.Z)(r);try{for(i.s();!(e=i.n()).done;){var o=e.value;n=Object.assign(n,o.getDrawOptions(n))}}catch(s2){i.e(s2)}finally{i.f()}return n}}],[{key:"isSupported",value:function(t){return nH(t)}}]),t}();var j0=function(){function t(e){var n=e.gl,r=e.attribute,i=e.timeline;(0,s.Z)(this,t),this.gl=n,this.type="interpolation",this.transition=new KU(i),this.attribute=r,this.attributeInTransition=new JQ(n,r.settings),this.currentStartIndices=r.startIndices,this.currentLength=0,this.transform=function(t,e){var n=XQ(e.size);return new B0(t,{vs:Z0,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(n,r);var o={byteLength:0,usage:35050};this.buffers=[new OX(n,o),new OX(n,o)]}return(0,l.Z)(t,[{key:"inProgress",get:function(){return this.transition.inProgress}},{key:"start",value:function(t,e){if(t.duration<=0)this.transition.cancel();else{this.gl;var n=this.buffers,r=this.attribute;YQ(n);var i,o={numInstances:e,attribute:r,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter},a=(0,ch.Z)(n);try{for(a.s();!(i=a.n()).done;){KQ(iS({buffer:i.value},o))}}catch(s2){a.e(s2)}finally{a.f()}this.currentStartIndices=r.startIndices,this.currentLength=$Q(r,e),this.attributeInTransition.update({buffer:n[1],value:r.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/r.size),sourceBuffers:{aFrom:n[0],aTo:HQ(0,r)},feedbackBuffers:{vCurrent:n[1]}})}}},{key:"update",value:function(){var t=this.transition.update();if(t){var e=this.transition,n=e.time,r=e.settings,i=r.duration,o=(0,r.easing)(n/i);this.transform.run({uniforms:{time:o}})}return t}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}}]),t}(),Z0="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n";var U0=function(){function t(e){var n=e.gl,r=e.attribute,i=e.timeline;(0,s.Z)(this,t),this.gl=n,this.type="spring",this.transition=new KU(i),this.attribute=r,this.attributeInTransition=new JQ(n,iS(iS({},r.settings),{},{normalized:!1})),this.currentStartIndices=r.startIndices,this.currentLength=0,this.texture=function(t){return new HX(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(n),this.framebuffer=function(t,e){return new ZY(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:(0,c.Z)({},36064,e)})}(n,this.texture),this.transform=function(t,e,n){var r=XQ(e.size);return new B0(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}(n,r,this.framebuffer);var o={byteLength:0,usage:35050};this.buffers=[new OX(n,o),new OX(n,o),new OX(n,o)]}return(0,l.Z)(t,[{key:"inProgress",get:function(){return this.transition.inProgress}},{key:"start",value:function(t,e){this.gl;var n,r=this.buffers,i=this.attribute,o={numInstances:e,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter},a=(0,ch.Z)(r);try{for(a.s();!(n=a.n()).done;){KQ(iS({buffer:n.value},o))}}catch(s2){a.e(s2)}finally{a.f()}this.currentStartIndices=i.startIndices,this.currentLength=$Q(i,e),this.attributeInTransition.update({buffer:r[1],value:i.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aTo:HQ(0,i)}})}},{key:"update",value:function(){var t=this.buffers,e=this.transform,n=this.framebuffer,r=this.transition;return!!r.update()&&(e.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),e.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:r.settings.stiffness,damping:r.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),YQ(t),this.attributeInTransition.update({buffer:t[1],value:this.attribute.value}),hY(n)[0]>0||r.end(),!0)}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}}]),t}();var V0={interpolation:j0,spring:U0},q0=function(){function t(e,n){var r=n.id,i=n.timeline;(0,s.Z)(this,t),this.id=r,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=B0.isSupported(e)}return(0,l.Z)(t,[{key:"finalize",value:function(){for(var t in this.transitions)this._removeTransition(t)}},{key:"update",value:function(t){var e=t.attributes,n=t.transitions,r=t.numInstances;for(var i in this.numInstances=r||1,e){var o=e[i],a=o.getTransitionSetting(n);a&&this._updateAttribute(i,o,a)}for(var s in this.transitions){var l=e[s];l&&l.getTransitionSetting(n)||this._removeTransition(s)}}},{key:"hasAttribute",value:function(t){var e=this.transitions[t];return e&&e.inProgress}},{key:"getAttributes",value:function(){var t={};for(var e in this.transitions){var n=this.transitions[e];n.inProgress&&(t[e]=n.attributeInTransition)}return t}},{key:"run",value:function(){if(!this.isSupported||0===this.numInstances)return!1;for(var t in this.transitions){this.transitions[t].update()&&(this.needsRedraw=!0)}var e=this.needsRedraw;return this.needsRedraw=!1,e}},{key:"_removeTransition",value:function(t){this.transitions[t].cancel(),delete this.transitions[t]}},{key:"_updateAttribute",value:function(t,e,n){var r=this.transitions[t],i=!r||r.type!==n.type;if(i){if(!this.isSupported)return void iZ.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();r&&this._removeTransition(t);var o=V0[n.type];o?this.transitions[t]=new o({attribute:e,timeline:this.timeline,gl:this.gl}):(iZ.error("unsupported transition type '".concat(n.type,"'"))(),i=!1)}(i||e.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}]),t}(),G0="attributeManager.invalidate",W0="attributeManager.updateStart",H0="attributeManager.updateEnd",X0=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.id,i=void 0===r?"attribute-manager":r,o=n.stats,a=n.timeline;(0,s.Z)(this,t),this.id=i,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=o,this.attributeTransitionManager=new q0(e,{id:"".concat(i,"-transitions"),timeline:a}),Object.seal(this)}return(0,l.Z)(t,[{key:"finalize",value:function(){for(var t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,e&&this.id}},{key:"setNeedsRedraw",value:function(){return this.needsRedraw=!0,this}},{key:"add",value:function(t,e){this._add(t,e)}},{key:"addInstanced",value:function(t,e){this._add(t,e,{instanced:1})}},{key:"remove",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}}},{key:"invalidate",value:function(t,e){var n=this._invalidateTrigger(t,e);DV(G0,this,t,n)}},{key:"invalidateAll",value:function(t){for(var e in this.attributes)this.attributes[e].setNeedsUpdate(e,t);DV(G0,this,"all")}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data,n=t.numInstances,r=t.startIndices,i=void 0===r?null:r,o=t.transitions,a=t.props,s=void 0===a?{}:a,l=t.buffers,u=void 0===l?{}:l,c=t.context,h=void 0===c?{}:c,f=!1;for(var p in DV(W0,this),this.stats&&this.stats.get("Update Attributes").timeStart(),this.attributes){var d=this.attributes[p],m=d.settings.accessor;d.startIndices=i,d.numInstances=n,s[p]&&iZ.removed("props.".concat(p),"data.attributes.".concat(p))(),d.setExternalBuffer(u[p])||d.setBinaryValue(u[m],e.startIndices)||!u[m]&&d.setConstantValue(s[m])||d.needsUpdate()&&(f=!0,this._updateAttribute({attribute:d,numInstances:n,data:e,props:s,context:h})),this.needsRedraw|=d.needsRedraw()}f&&DV(H0,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:o})}},{key:"updateTransition",value:function(){var t=this.attributeTransitionManager.run();return this.needsRedraw=this.needsRedraw||t,t}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1},e=this.attributes,n=this.attributeTransitionManager,r=iS({},n.getAttributes());for(var i in e){var o=e[i];o.needsRedraw(t)&&!n.hasAttribute(i)&&(r[i]=o)}return r}},{key:"getShaderAttributes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t||(t=this.getAttributes());var n={};for(var r in t)e[r]||Object.assign(n,t[r].getShaderAttributes());return n}},{key:"getAccessors",value:function(){return this.updateTriggers}},{key:"_add",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var r in e&&iZ.warn("AttributeManager.add({updaters}) - updater map no longer supported")(),t){var i=t[r];this.attributes[r]=this._createAttribute(r,i,n)}this._mapUpdateTriggersToAttributes()}},{key:"_createAttribute",value:function(t,e,n){var r=iS(iS({},e),{},{id:t,isIndexed:e.isIndexed||e.elements||!1,constant:e.constant||!1,size:(e.elements?1:e.size)||1,value:e.value||null,divisor:e.instanced||n.instanced?1:e.divisor||0});return new JQ(this.gl,r)}},{key:"_mapUpdateTriggersToAttributes",value:function(){var t=this,e={},n=function(n){t.attributes[n].getUpdateTriggers().forEach((function(t){e[t]||(e[t]=[]),e[t].push(n)}))};for(var r in this.attributes)n(r);this.updateTriggers=e}},{key:"_invalidateTrigger",value:function(t,e){var n=this.attributes,r=this.updateTriggers[t];return r&&r.forEach((function(t){var r=n[t];r&&r.setNeedsUpdate(r.id,e)})),r}},{key:"_updateAttribute",value:function(t){var e=t.attribute,n=t.numInstances;(DV("attribute.updateStart",e),e.constant)?e.setConstantValue(e.value):(e.allocate(n)&&DV("attribute.allocate",e,n),e.updateBuffer(t)&&(this.needsRedraw=!0,DV("attribute.updateEnd",e,n)))}}]),t}(),Y0=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(){return(0,s.Z)(this,n),e.apply(this,arguments)}return(0,l.Z)(n,[{key:"value",get:function(){return this._value}},{key:"_onUpdate",value:function(){var t=this.time,e=this.settings,n=e.fromValue,r=e.toValue,i=e.duration,o=(0,e.easing)(t/i);this._value=pZ(n,r,o)}}]),n}(KU),$0=1e-5;function K0(t,e,n,r,i){var o=e-t;return(n-e)*i+-o*r+o+e}function J0(t,e){if(Array.isArray(t)){for(var n=0,r=0;r<t.length;r++){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}var Q0=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(){return(0,s.Z)(this,n),e.apply(this,arguments)}return(0,l.Z)(n,[{key:"value",get:function(){return this._currValue}},{key:"_onUpdate",value:function(){var t=this.settings,e=t.fromValue,n=t.toValue,r=t.damping,i=t.stiffness,o=this._prevValue,a=void 0===o?e:o,s=this._currValue,l=void 0===s?e:s,u=function(t,e,n,r,i){if(Array.isArray(n)){for(var o=[],a=0;a<n.length;a++)o[a]=K0(t[a],e[a],n[a],r,i);return o}return K0(t,e,n,r,i)}(a,l,n,r,i),c=J0(u,n),h=J0(u,l);c<$0&&h<$0&&(u=n,this.end()),this._prevValue=l,this._currValue=u}}]),n}(KU),t1={interpolation:Y0,spring:Q0},e1=function(){function t(e){(0,s.Z)(this,t),this.transitions=new Map,this.timeline=e}return(0,l.Z)(t,[{key:"active",get:function(){return this.transitions.size>0}},{key:"add",value:function(t,e,n,r){var i=this.transitions;if(i.has(t)){var o=i.get(t),a=o.value;e=void 0===a?o.settings.fromValue:a,this.remove(t)}if(r=WQ(r)){var s=t1[r.type];if(s){var l=new s(this.timeline);l.start(iS(iS({},r),{},{fromValue:e,toValue:n})),i.set(t,l)}else iZ.error("unsupported transition type '".concat(r.type,"'"))()}}},{key:"remove",value:function(t){var e=this.transitions;e.has(t)&&(e.get(t).cancel(),e.delete(t))}},{key:"update",value:function(){var t,e={},n=(0,ch.Z)(this.transitions);try{for(n.s();!(t=n.n()).done;){var r=(0,i.Z)(t.value,2),o=r[0],a=r[1];a.update(),e[o]=a.value,a.inProgress||this.remove(o)}}catch(s2){n.e(s2)}finally{n.f()}return e}},{key:"clear",value:function(){var t,e=(0,ch.Z)(this.transitions.keys());try{for(e.s();!(t=e.n()).done;){var n=t.value;this.remove(n)}}catch(s2){e.e(s2)}finally{e.f()}}}]),t}();function n1(t,e){var n=i1({newProps:t,oldProps:e,propTypes:l1(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(t,e){if(null===e)return"oldProps is null, initial diff";var n=null,r=t.dataComparator,i=t._dataDiff;r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied");n&&i&&(n=i(t.data,e.data)||n);return n}(t,e),i=!1;return r||(i=function(t,e){if(null===e)return"oldProps is null, initial diff";if("all"in t.updateTriggers){if(s1(t,e,"all"))return{all:!0}}var n={},r=!1;for(var i in t.updateTriggers){if("all"!==i)s1(t,e,i)&&(n[i]=!0,r=n)}return r}(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:a1(t,e),transitionsChanged:r1(t,e)}}function r1(t,e){if(!t.transitions)return null;var n={},r=l1(t);for(var i in t.transitions){var o=r[i],a=o&&o.type;("number"===a||"color"===a||"array"===a)&&o1(t[i],e[i],o)&&(n[i]=!0)}return n}function i1(t){var e=t.newProps,n=t.oldProps,r=t.ignoreProps,i=void 0===r?{}:r,o=t.propTypes,a=void 0===o?{}:o,s=t.triggerName,l=void 0===s?"props":s;if(n===e)return null;if("object"!==typeof e||null===e)return"".concat(l," changed shallowly");if("object"!==typeof n||null===n)return"".concat(l," changed shallowly");for(var u=0,c=Object.keys(e);u<c.length;u++){var h=c[u];if(!(h in i)){if(!(h in n))return"".concat(l,".").concat(h," added");var f=o1(e[h],n[h],a[h]);if(f)return"".concat(l,".").concat(h," ").concat(f)}}for(var p=0,d=Object.keys(n);p<d.length;p++){var m=d[p];if(!(m in i)){if(!(m in e))return"".concat(l,".").concat(m," dropped");if(!Object.hasOwnProperty.call(e,m)){var g=o1(e[m],n[m],a[m]);if(g)return"".concat(l,".").concat(m," ").concat(g)}}}return null}function o1(t,e,n){var r=n&&n.equal;return r&&!r(t,e,n)?"changed deeply":r||!(r=t&&e&&t.equals)||r.call(t,e)?r||e===t?null:"changed shallowly":"changed deeply"}function a1(t,e){if(null===e)return!0;var n=e.extensions,r=t.extensions;if(r===n)return!1;if(!n||!r)return!0;if(r.length!==n.length)return!0;for(var i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function s1(t,e,n){var r=t.updateTriggers[n];r=void 0===r||null===r?{}:r;var i=e.updateTriggers[n];return i1({oldProps:i=void 0===i||null===i?{}:i,newProps:r,triggerName:n})}function l1(t){var e=t[LV],n=e&&e.constructor;return n?n._propTypes:{}}var u1;function c1(t){if(null===(e=t)||"object"!==typeof e)throw new Error("count(): argument not an object");var e;if("function"===typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function(t){return null!==t&&"object"===typeof t&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}function h1(t,e){if(!e)return t;var n=iS(iS({},t),e);if("defines"in e&&(n.defines=iS(iS({},t.defines),e.defines)),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some((function(t){return"project64"===t.name})))){var r=n.modules.findIndex((function(t){return"project32"===t.name}));r>=0&&n.modules.splice(r,1)}if("inject"in e)if(t.inject){var i=iS({},t.inject);for(var o in e.inject)i[o]=(i[o]||"")+e.inject[o];n.inject=i}else n.inject=e.inject;return n}function f1(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.projectPosition(t);if(n&&e instanceof XU){var o=(0,i.Z)(t,3),a=o[0],s=o[1],l=o[2],u=void 0===l?0:l,c=e.getDistanceScales([a,s]);r[2]=u*c.unitsPerMeter[2]}return r}function p1(t,e){var n=e.viewport,r=e.modelMatrix,o=e.coordinateSystem,a=e.coordinateOrigin,s=e.offsetMode,l=(0,i.Z)(t,3),u=l[0],c=l[1],h=l[2],f=void 0===h?0:h;if(r){var p=XZ([],[u,c,f,1],r),d=(0,i.Z)(p,3);u=d[0],c=d[1],f=d[2]}switch(o){case CU.LNGLAT:return f1([u,c,f],n,s);case CU.LNGLAT_OFFSETS:return f1([u+a[0],c+a[1],f+(a[2]||0)],n,s);case CU.METER_OFFSETS:return f1(gU(a,[u,c,f]),n,s);default:return n.isGeospatial?[u+a[0],c+a[1],f+a[2]]:n.projectPosition([u,c,f])}}function d1(t,e){var n=function(t){var e=iS({},t),n=t.coordinateSystem,r=t.viewport,i=t.coordinateOrigin,o=t.fromCoordinateSystem,a=t.fromCoordinateOrigin;return n===CU.DEFAULT&&(n=r.isGeospatial?CU.LNGLAT:CU.CARTESIAN),void 0===o&&(e.fromCoordinateSystem=n),void 0===a&&(e.fromCoordinateOrigin=i),e.coordinateSystem=n,e}(e),r=n.viewport,i=n.coordinateSystem,o=n.coordinateOrigin,a=n.modelMatrix,s=n.fromCoordinateSystem,l=n.fromCoordinateOrigin,u=U$(r,i,o),c=u.geospatialOrigin,h=u.shaderCoordinateOrigin,f=u.offsetMode,p=p1(t,{viewport:r,modelMatrix:a,coordinateSystem:s,coordinateOrigin:l,offsetMode:f});if(f){var d=r.projectPosition(c||h);IZ(p,p,d)}return p}var m1=(u1={},(0,c.Z)(u1,10241,9987),(0,c.Z)(u1,10240,9729),(0,c.Z)(u1,10242,33071),(0,c.Z)(u1,10243,33071),u1),g1={};var v1={boolean:{validate:function(t,e){return!0},equal:function(t,e,n){return Boolean(t)===Boolean(e)}},number:{validate:function(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate:function(t,e){return e.optional&&!t||b1(t)&&(3===t.length||4===t.length)},equal:function(t,e,n){return y1(t,e)}},accessor:{validate:function(t,e){var n=w1(t);return"function"===n||n===w1(e.value)},equal:function(t,e,n){return"function"===typeof e||y1(t,e)}},array:{validate:function(t,e){return e.optional&&!t||b1(t)},equal:function(t,e,n){return n.compare?y1(t,e):t===e}},object:{equal:function(t,e,n){return n.compare?ZU(t,e):t===e}},function:{validate:function(t,e){return e.optional&&!t||"function"===typeof t},equal:function(t,e,n){return!n.compare||t===e}},data:{transform:function(t,e,n){var r=n.props.dataTransform;return r&&t?r(t):t}},image:{transform:function(t,e,n){return function(t,e){var n=t.context&&t.context.gl;if(!n||!e)return null;if(e instanceof HX)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});var r=null;e.compressed&&(r=(0,c.Z)({},10241,e.data.length>1?9985:9729));var i=new HX(n,iS(iS({},e),{},{parameters:iS(iS(iS({},m1),r),t.props.textureParameters)}));return g1[i.id]=!0,i}(n,t)},release:function(t){var e;(e=t)&&e instanceof HX&&g1[e.id]&&(e.delete(),delete g1[e.id])}}};function y1(t,e){if(t===e)return!0;if(!b1(t)||!b1(e))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function _1(t,e){switch(w1(e)){case"object":return x1(t,e);case"array":return x1(t,{type:"array",value:e,compare:!1});case"boolean":return x1(t,{type:"boolean",value:e});case"number":return x1(t,{type:"number",value:e});case"function":return x1(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function x1(t,e){return"type"in e?iS(iS({name:t},v1[e.type]),e):"value"in e?iS({name:t,type:w1(e.value)},e):{name:t,type:"object",value:e}}function b1(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function w1(t){return b1(t)?"array":null===t?"null":typeof t}function k1(t,e){var n=S1(t.constructor),r=Object.create(n);r[LV]=t,r[NV]={},r[OV]={};for(var i=0;i<e.length;++i){var o=e[i];for(var a in o)r[a]=o[a]}return Object.freeze(r),r}function S1(t){var e=C1(t,"_mergedDefaultProps");return e||(function(t){if(!t.prototype)return;var e=Object.getPrototypeOf(t),n=S1(e),r=function(t){for(var e={},n={},r={},o=0,a=Object.entries(t);o<a.length;o++){var s=(0,i.Z)(a[o],2),l=s[0],u=s[1],c=null===u||void 0===u?void 0:u.deprecatedFor;if(c)r[l]=Array.isArray(c)?c:[c];else{var h=_1(l,u);e[l]=h,n[l]=h.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}(C1(t,"defaultProps")||{}),o=function(t,e,n){var r=Object.create(null);Object.assign(r,e,t);var i=function(t){var e=C1(t,"layerName")||C1(t,"componentName");e||iZ.once(0,"".concat(t.name,".componentName not specified"))();return e||t.name}(n);return delete t.id,Object.defineProperties(r,{id:{writable:!0,value:i}}),r}(r.defaultProps,n,t),a=iS(iS({},e._propTypes),r.propTypes);!function(t,e){var n={},r={};for(var i in e){var o=e[i],a=o.name,s=o.value;o.async&&(n[a]=s,r[a]=E1(a))}t[RV]=n,t[NV]={},Object.defineProperties(t,r)}(o,a);var s=iS(iS({},e._deprecatedProps),r.deprecatedProps);(function(t,e){var n=function(n){Object.defineProperty(t,n,{enumerable:!1,set:function(t){var r,i="".concat(this.id,": ").concat(n),o=(0,ch.Z)(e[n]);try{for(o.s();!(r=o.n()).done;){var a=r.value;I1(this,a)||(this[a]=t)}}catch(s2){o.e(s2)}finally{o.f()}iZ.deprecated(i,e[n].join("/"))()}})};for(var r in e)n(r)})(o,s),t._mergedDefaultProps=o,t._propTypes=a,t._deprecatedProps=s}(t),t._mergedDefaultProps)}function E1(t){return{enumerable:!0,set:function(e){"string"===typeof e||e instanceof Promise||BQ(e)?this[NV][t]=e:this[OV][t]=e},get:function(){if(this[OV]){if(t in this[OV])return this[OV][t]||this[RV][t];if(t in this[NV]){var e=this[LV]&&this[LV].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[RV][t]}}return this[RV][t]}}}function I1(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function C1(t,e){return I1(t,e)&&t[e]}var A1=Object.freeze({}),P1=function(){function t(e){(0,s.Z)(this,t),(0,c.Z)(this,"component",void 0),(0,c.Z)(this,"onAsyncPropUpdated",void 0),(0,c.Z)(this,"asyncProps",void 0),(0,c.Z)(this,"oldProps",void 0),(0,c.Z)(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=null,this.oldAsyncProps=null}return(0,l.Z)(t,[{key:"finalize",value:function(){for(var t in this.asyncProps){var e=this.asyncProps[t];e&&e.type&&e.type.release&&e.type.release(e.resolvedValue,e.type,this.component)}}},{key:"getOldProps",value:function(){return this.oldAsyncProps||this.oldProps||A1}},{key:"resetOldProps",value:function(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"hasAsyncProp",value:function(t){return t in this.asyncProps}},{key:"getAsyncProp",value:function(t){var e=this.asyncProps[t];return e&&e.resolvedValue}},{key:"isAsyncPropLoading",value:function(t){if(t){var e=this.asyncProps[t];return Boolean(e&&e.pendingLoadCount>0&&e.pendingLoadCount!==e.resolvedLoadCount)}for(var n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}},{key:"reloadAsyncProp",value:function(t,e){this._watchPromise(t,Promise.resolve(e))}},{key:"setAsyncProps",value:function(t){var e=t[OV]||{},n=t[NV]||t,r=t[RV]||{};for(var i in e){var o=e[i];this._createAsyncPropData(i,r[i]),this._updateAsyncProp(i,o),e[i]=this.getAsyncProp(i)}for(var a in n){var s=n[a];this._createAsyncPropData(a,r[a]),this._updateAsyncProp(a,s)}}},{key:"_fetch",value:function(t,e){return e}},{key:"_onResolve",value:function(t,e){}},{key:"_onError",value:function(t,e){}},{key:"_updateAsyncProp",value:function(t,e){this._didAsyncInputValueChange(t,e)&&("string"===typeof e&&(e=this._fetch(t,e)),e instanceof Promise?this._watchPromise(t,e):BQ(e)?this._resolveAsyncIterable(t,e):this._setPropValue(t,e))}},{key:"_freezeAsyncOldProps",value:function(){if(!this.oldAsyncProps&&this.oldProps)for(var t in this.oldAsyncProps=Object.create(this.oldProps),this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}},{key:"_didAsyncInputValueChange",value:function(t,e){var n=this.asyncProps[t];return e!==n.resolvedValue&&e!==n.lastValue&&(n.lastValue=e,!0)}},{key:"_setPropValue",value:function(t,e){this._freezeAsyncOldProps();var n=this.asyncProps[t];n&&(e=this._postProcessValue(n,e),n.resolvedValue=e,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}},{key:"_setAsyncPropValue",value:function(t,e,n){var r=this.asyncProps[t];r&&n>=r.resolvedLoadCount&&void 0!==e&&(this._freezeAsyncOldProps(),r.resolvedValue=e,r.resolvedLoadCount=n,this.onAsyncPropUpdated(t,e))}},{key:"_watchPromise",value:function(t,e){var n=this,r=this.asyncProps[t];if(r){r.pendingLoadCount++;var i=r.pendingLoadCount;e.then((function(e){e=n._postProcessValue(r,e),n._setAsyncPropValue(t,e,i),n._onResolve(t,e)})).catch((function(e){n._onError(t,e)}))}}},{key:"_resolveAsyncIterable",value:function(){var t=(0,GV.Z)(of().mark((function t(e,n){var r,i,o,a,s,l,u,c,h,f,p;return of().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("data"===e){t.next=3;break}return this._setPropValue(e,n),t.abrupt("return");case 3:if(r=this.asyncProps[e]){t.next=6;break}return t.abrupt("return");case 6:r.pendingLoadCount++,i=r.pendingLoadCount,o=[],a=0,s=!1,l=!1,t.prev=12,c=lG(n);case 14:return t.next=16,c.next();case 16:if(!(s=!(h=t.sent).done)){t.next=26;break}f=h.value,p=this.component.props.dataTransform,o=p?p(f,o):o.concat(f),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,this._setAsyncPropValue(e,o,i);case 23:s=!1,t.next=14;break;case 26:t.next=32;break;case 28:t.prev=28,t.t0=t.catch(12),l=!0,u=t.t0;case 32:if(t.prev=32,t.prev=33,!s||null==c.return){t.next=37;break}return t.next=37,c.return();case 37:if(t.prev=37,!l){t.next=40;break}throw u;case 40:return t.finish(37);case 41:return t.finish(32);case 42:this._onResolve(e,o);case 43:case"end":return t.stop()}}),t,this,[[12,28,32,42],[33,,37,41]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"_postProcessValue",value:function(t,e){var n=t.type;return n&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(e,n,this.component):e}},{key:"_createAsyncPropData",value:function(t,e){if(!this.asyncProps[t]){var n=this.component&&this.component.constructor._propTypes;this.asyncProps[t]={type:n&&n[t],lastValue:null,resolvedValue:e,pendingLoadCount:0,resolvedLoadCount:0}}}}]),t}(),T1=0,M1=function(){function t(){(0,s.Z)(this,t),(0,c.Z)(this,"id",void 0),(0,c.Z)(this,"props",void 0),(0,c.Z)(this,"count",void 0),(0,c.Z)(this,"lifecycle",void 0),(0,c.Z)(this,"parent",void 0),(0,c.Z)(this,"context",void 0),(0,c.Z)(this,"state",void 0),(0,c.Z)(this,"internalState",void 0);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.props=k1(this,n),this.id=this.props.id,this.count=T1++,this.lifecycle=IV,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return(0,l.Z)(t,[{key:"root",get:function(){for(var t=this;t.parent;)t=t.parent;return t}},{key:"clone",value:function(t){var e=this.props,n={};for(var r in e[RV])r in e[OV]?n[r]=e[OV][r]:r in e[NV]&&(n[r]=e[NV][r]);return new this.constructor(iS(iS(iS({},e),n),t))}},{key:"_initState",value:function(){this.internalState=new P1(this)}}]),t}();(0,c.Z)(M1,"componentName","Component"),(0,c.Z)(M1,"defaultProps",{});var L1=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(t){var r,i=t.attributeManager,o=t.layer;return(0,s.Z)(this,n),r=e.call(this,o),(0,c.Z)((0,Fo.Z)(r),"attributeManager",void 0),(0,c.Z)((0,Fo.Z)(r),"needsRedraw",void 0),(0,c.Z)((0,Fo.Z)(r),"subLayers",void 0),(0,c.Z)((0,Fo.Z)(r),"usesPickingColorCache",void 0),r.attributeManager=i,r.needsRedraw=!0,r.subLayers=null,r.usesPickingColorCache=!1,r}return(0,l.Z)(n,[{key:"layer",get:function(){return this.component},set:function(t){this.component=t}},{key:"_fetch",value:function(t,e){var r=this.component.props.fetch;return r?r(e,{propName:t,layer:this.layer}):(0,qU.Z)((0,GU.Z)(n.prototype),"_fetch",this).call(this,t,e)}},{key:"_onResolve",value:function(t,e){var n=this.component.props.onDataLoad;"data"===t&&n&&n(e,{propName:t,layer:this.layer})}},{key:"_onError",value:function(t,e){this.layer.raiseError(e,"loading ".concat(t," of ").concat(this.layer))}}]),n}(P1),R1=Math.pow(2,24)-1,N1=Object.freeze([]),O1=O$((function(t){var e=t.oldViewport,n=t.viewport;return e.equals(n)})),z1=new Uint8ClampedArray(0),D1={data:{type:"data",value:N1,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:function(t){return t&&t.__diff},compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:function(t,e){var n,r=e.propName,i=e.layer,o=e.loaders,a=e.loadOptions,s=e.signal,l=i.context.resourceManager;(a=a||i.getLoadOptions(),o=o||i.props.loaders,s)&&(a=iS(iS({},a),{},{fetch:iS(iS({},null===(n=a)||void 0===n?void 0:n.fetch),{},{signal:s})}));var u=l.contains(t);return u||a||(l.add({resourceId:t,data:iW(t,o),persistent:!1}),u=!0),u?l.subscribe({resourceId:t,onChange:function(t){return i.internalState.reloadAsyncProp(r,t)},consumerId:i.id,requestId:r}):iW(t,o,a)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:MU,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:CU.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:function(t){return[0,100*-t.layerIndex]},compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}},F1=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(){return(0,s.Z)(this,n),e.apply(this,arguments)}return(0,l.Z)(n,[{key:"toString",value:function(){var t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}},{key:"raiseError",value:function(t,e){var n,r,i,o;(e&&(t.message="".concat(e,": ").concat(t.message)),null!==(n=(r=this.props).onError)&&void 0!==n&&n.call(r,t))||(null===(i=this.context)||void 0===i||null===(o=i.onError)||void 0===o||o.call(i,t,this))}},{key:"setState",value:function(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=t)}},{key:"setNeedsUpdate",value:function(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(t)}},{key:"needsUpdate",value:function(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}},{key:"hasUniformTransition",value:function(){return this.internalState.uniformTransitions.active}},{key:"isLoaded",get:function(){return this.internalState&&!this.internalState.isAsyncPropLoading()}},{key:"wrapLongitude",get:function(){return this.props.wrapLongitude}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},{key:"getLoadOptions",value:function(){return this.props.loadOptions}},{key:"project",value:function(t){var e=this.context.viewport,n=bU(p1(t,{viewport:e,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),e.pixelProjectionMatrix),r=(0,i.Z)(n,3),o=r[0],a=r[1],s=r[2];return 2===t.length?[o,a]:[o,a,s]}},{key:"unproject",value:function(t){return this.context.viewport.unproject(t)}},{key:"projectPosition",value:function(t,e){return d1(t,iS({viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem},e))}},{key:"use64bitPositions",value:function(){var t=this.props.coordinateSystem;return t===CU.DEFAULT||t===CU.LNGLAT||t===CU.CARTESIAN}},{key:"onHover",value:function(t,e){return!!this.props.onHover&&this.props.onHover(t,e)}},{key:"onClick",value:function(t,e){return!!this.props.onClick&&this.props.onClick(t,e)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[0]=t+1&255,e[1]=t+1>>8&255,e[2]=t+1>>8>>8&255,e}},{key:"decodePickingColor",value:function(t){UU(t instanceof Uint8Array);var e=(0,i.Z)(t,3);return e[0]+256*e[1]+65536*e[2]-1}},{key:"initializeState",value:function(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"getShaders",value:function(t){var e,n=(0,ch.Z)(this.props.extensions);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=h1(t,r.getShaders.call(this,r))}}catch(s2){n.e(s2)}finally{n.f()}return t}},{key:"getBounds",value:function(){var t,e=this.getAttributeManager();if(!e)return null;var n=e.attributes,r=n.positions,i=n.instancePositions;return null===(t=r||i)||void 0===t?void 0:t.getBounds()}},{key:"shouldUpdateState",value:function(t){t.oldProps,t.props,t.context;return t.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(t){var e=t.oldProps,n=t.props,r=(t.context,t.changeFlags),i=this.getAttributeManager();if(r.dataChanged&&i){var o=r.dataChanged;if(Array.isArray(o)){var a,s=(0,ch.Z)(o);try{for(s.s();!(a=s.n()).done;){var l=a.value;i.invalidateAll(l)}}catch(s2){s.e(s2)}finally{s.f()}}else i.invalidateAll()}var u=Number.isInteger(e.highlightedObjectIndex)||e.pickable,c=Number.isInteger(n.highlightedObjectIndex)||n.pickable;if(u!==c&&i){var h=i.attributes,f=h.pickingColors,p=h.instancePickingColors,d=f||p;d&&(c&&d.constant&&(d.constant=!1,i.invalidate(d.id)),d.value||c||(d.constant=!0,d.value=[0,0,0]))}}},{key:"finalizeState",value:function(){var t,e=(0,ch.Z)(this.getModels());try{for(e.s();!(t=e.n()).done;){t.value.delete()}}catch(s2){e.e(s2)}finally{e.f()}var n=this.getAttributeManager();n&&n.finalize(),this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState.uniformTransitions.clear(),this.internalState.finalize()}},{key:"draw",value:function(t){var e,n=(0,ch.Z)(this.getModels());try{for(n.s();!(e=n.n()).done;){e.value.draw(t)}}catch(s2){n.e(s2)}finally{n.f()}}},{key:"getPickingInfo",value:function(t){var e=t.info,n=(t.mode,e.index);return n>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[n]),e}},{key:"activateViewport",value:function(t){var e=this.internalState.viewport;this.internalState.viewport=t,e&&O1({oldViewport:e,viewport:t})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}},{key:"invalidateAttribute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=this.getAttributeManager();e&&("all"===t?e.invalidateAll():e.invalidate(t))}},{key:"updateAttributes",value:function(t){var e,n=(0,ch.Z)(this.getModels());try{for(n.s();!(e=n.n()).done;){var r=e.value;this._setModelAttributes(r,t)}}catch(s2){n.e(s2)}finally{n.f()}}},{key:"_updateAttributes",value:function(t){var e=this.getAttributeManager();if(e){var n=this.getNumInstances(t),r=this.getStartIndices(t);e.update({data:t.data,numInstances:n,startIndices:r,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this,ignoreUnknownAttributes:!0});var i=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}}},{key:"_updateAttributeTransition",value:function(){var t=this.getAttributeManager();t&&t.updateTransition()}},{key:"_updateUniformTransition",value:function(){var t=this.internalState.uniformTransitions;if(t.active){var e=t.update(),n=Object.create(this.props);for(var r in e)Object.defineProperty(n,r,{value:e[r]});return n}return this.props}},{key:"calculateInstancePickingColors",value:function(t,e){var n=e.numInstances;if(!t.constant){var r=Math.floor(z1.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>R1&&iZ.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),z1=aZ.allocate(z1,n,{size:3,copy:!0,maxCount:Math.max(n,R1)});for(var i=Math.floor(z1.length/3),o=[],a=r;a<i;a++)this.encodePickingColor(a,o),z1[3*a+0]=o[0],z1[3*a+1]=o[1],z1[3*a+2]=o[2]}t.value=z1.subarray(0,3*n)}}},{key:"_setModelAttributes",value:function(t,e){var n=this.getAttributeManager(),r=t.userData.excludeAttributes||{},i=n.getShaderAttributes(e,r);t.setAttributes(i)}},{key:"disablePickingIndex",value:function(t){this._disablePickingIndex(t)}},{key:"_disablePickingIndex",value:function(t){var e=this.getAttributeManager().attributes,n=e.pickingColors,r=e.instancePickingColors,i=n||r,o=i.getVertexOffset(t),a=i.getVertexOffset(t+1);i.buffer.subData({data:new Uint8Array(a-o),offset:o})}},{key:"restorePickingColors",value:function(){var t=this.getAttributeManager().attributes,e=t.pickingColors,n=t.instancePickingColors,r=e||n;this.internalState.usesPickingColorCache&&r.value.buffer!==z1.buffer&&(r.value=z1.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0})}},{key:"getNumInstances",value:function(t){return void 0!==(t=t||this.props).numInstances?t.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:c1(t.data)}},{key:"getStartIndices",value:function(t){return void 0!==(t=t||this.props).startIndices?t.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}},{key:"_initialize",value:function(){DV("layer.initialize",this),this._initState(),this.initializeState(this.context);var t,e=(0,ch.Z)(this.props.extensions);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.initializeState.call(this,this.context,n)}}catch(s2){e.e(s2)}finally{e.f()}this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}},{key:"_update",value:function(){var t=this.needsUpdate();DV("layer.update",this,t),t&&this._updateState()}},{key:"_updateState",value:function(){var t=this.props,e=this.context.viewport,n=this._updateUniformTransition();this.internalState.propsInTransition=n,this.context.viewport=this.internalState.viewport||e,this.props=n;try{var r=this._getUpdateParams(),i=this.getModels();if(this.context.gl)this.updateState(r);else try{this.updateState(r)}catch(u){}var o,a=(0,ch.Z)(this.props.extensions);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.updateState.call(this,r,s)}}catch(s2){a.e(s2)}finally{a.f()}var l=this.getModels()[0]!==i[0];this._updateModules(r,l),this.isComposite?this._renderLayers(r):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances()))}finally{this.context.viewport=e,this.props=t,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}}},{key:"_finalize",value:function(){DV("layer.finalize",this),this.finalizeState(this.context);var t,e=(0,ch.Z)(this.props.extensions);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.finalizeState.call(this,n)}}catch(s2){e.e(s2)}finally{e.f()}}},{key:"drawLayer",value:function(t){var e=this,n=t.moduleParameters,r=void 0===n?null:n,i=t.uniforms,o=void 0===i?{}:i,a=t.parameters,s=void 0===a?{}:a;this._updateAttributeTransition();var l=this.props;this.props=this.internalState.propsInTransition||l;var u=this.props.opacity;o.opacity=Math.pow(u,1/2.2);try{r&&this.setModuleParameters(r);var c=this.props.getPolygonOffset,h=c&&c(o)||[0,0];UH(this.context.gl,{polygonOffset:h}),qH(this.context.gl,s,(function(){var t,n={moduleParameters:r,uniforms:o,parameters:s,context:e.context},i=(0,ch.Z)(e.props.extensions);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.draw.call(e,n,a)}}catch(s2){i.e(s2)}finally{i.f()}e.draw(n)}))}finally{this.props=l}}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(t){var e=this.internalState.changeFlags;for(var n in t)if(t[n]){var r=!1;"dataChanged"===n&&Array.isArray(e[n])&&(e[n]=Array.isArray(t[n])?e[n].concat(t[n]):t[n],r=!0),e[n]||(e[n]=t[n],r=!0),r&&DV("layer.changeFlag",this,n,t)}var i=e.dataChanged||e.updateTriggersChanged||e.propsChanged||e.extensionsChanged;e.propsOrDataChanged=i,e.somethingChanged=i||t.viewportChanged||t.stateChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"diffProps",value:function(t,e){var n=n1(t,e);if(n.updateTriggersChanged)for(var r in n.updateTriggersChanged)n.updateTriggersChanged[r]&&this.invalidateAttribute(r);if(n.transitionsChanged)for(var i in n.transitionsChanged)this.internalState.uniformTransitions.add(i,e[i],t[i],t.transitions[i]);return this.setChangeFlags(n)}},{key:"validateProps",value:function(){!function(t){var e=l1(t);for(var n in e){var r=e[n],i=r.validate;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}(this.props)}},{key:"setModuleParameters",value:function(t){var e,n=(0,ch.Z)(this.getModels());try{for(n.s();!(e=n.n()).done;){e.value.updateModuleSettings(t)}}catch(s2){n.e(s2)}finally{n.f()}}},{key:"updateAutoHighlight",value:function(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}},{key:"_updateAutoHighlight",value:function(t){var e={pickingSelectedColor:t.picked?t.color:null},n=this.props.highlightColor;t.picked&&"function"===typeof n&&(e.pickingHighlightColor=n(t)),this.setModuleParameters(e),this.setNeedsRedraw()}},{key:"_updateModules",value:function(t,e){var n=t.props,r=t.oldProps,i=n.autoHighlight,o=n.highlightedObjectIndex,a=n.highlightColor;if(e||r.autoHighlight!==i||r.highlightedObjectIndex!==o||r.highlightColor!==a){var s={};i||(s.pickingSelectedColor=null),Array.isArray(a)&&(s.pickingHighlightColor=a),Number.isInteger(o)&&(s.pickingSelectedColor=o>=0?this.encodePickingColor(o):null),this.setModuleParameters(s)}}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(t){if(!this.internalState)return!1;var e=!1;e=e||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;var n=this.getAttributeManager(),r=n&&n.getNeedsRedraw(t);return e=e||r}},{key:"_getAttributeManager",value:function(){return new X0(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}},{key:"_initState",value:function(){UU(!this.internalState&&!this.state),UU(isFinite(this.props.coordinateSystem));var t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new L1({attributeManager:t,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:function(){return iZ.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),t}}),this.internalState.layer=this,this.internalState.uniformTransitions=new e1(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function(t){DV("layer.matched",this,this===t);var e=t.state,n=t.internalState;this!==t&&(this.internalState=n,this.internalState.layer=this,this.state=e,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}},{key:"_onAsyncPropUpdated",value:function(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}]),n}(M1);F1.layerName="Layer",F1.defaultProps=D1;var B1,j1={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Z1=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.Z)(this,t);var n=e.id,r=void 0===n?pX("geometry"):n,i=e.drawMode,o=void 0===i?j1.TRIANGLES:i,a=e.attributes,l=void 0===a?{}:a,u=e.indices,c=void 0===u?null:u,h=e.vertexCount,f=void 0===h?null:h;this.id=r,this.drawMode=0|o,this.attributes={},this.userData={},this._setAttributes(l,c),this.vertexCount=f||this._calculateVertexCount(this.attributes,this.indices)}return(0,l.Z)(t,[{key:"mode",get:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getAttributes",value:function(){return this.indices?iS({indices:this.indices},this.attributes):this.attributes}},{key:"_print",value:function(t){return"Geometry ".concat(this.id," attribute ").concat(t)}},{key:"_setAttributes",value:function(t,e){for(var n in e&&(this.indices=ArrayBuffer.isView(e)?{value:e,size:1}:e),t){var r=t[n];r=ArrayBuffer.isView(r)?{value:r}:r,uX(ArrayBuffer.isView(r.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),"POSITION"!==n&&"positions"!==n||r.size||(r.size=3),"indices"===n?(uX(!this.indices),this.indices=r):this.attributes[n]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}},{key:"_calculateVertexCount",value:function(t,e){if(e)return e.value.length;var n=1/0;for(var r in t){var i=t[r],o=i.value,a=i.size;!i.constant&&o&&a>=1&&(n=Math.min(n,o.length/a))}return uX(Number.isFinite(n)),n}}],[{key:"DRAW_MODE",get:function(){return j1}}]),t}(),U1=function(){},V1=(B1={},(0,c.Z)(B1,10241,9987),(0,c.Z)(B1,10240,9729),(0,c.Z)(B1,10242,33071),(0,c.Z)(B1,10243,33071),B1);function q1(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function G1(t){return t&&(t.id||t.url)}function W1(t,e,n,r){var i=e.width,o=e.height,a=uY(e,{width:n,height:r});return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.sourceX,i=void 0===r?0:r,o=n.sourceY,a=void 0===o?0:o,s=n.targetMipmaplevel,l=void 0===s?0:s,u=n.targetInternalFormat,c=void 0===u?6408:u,h=n.targetX,f=n.targetY,p=n.targetZ,d=n.width,m=n.height,g=pY(t),v=g.framebuffer,y=g.deleteFramebuffer;uX(v);var _=v.gl,x=v.handle,b="undefined"!==typeof h||"undefined"!==typeof f||"undefined"!==typeof p;h=h||0,f=f||0,p=p||0;var w=_.bindFramebuffer(36160,x);uX(e);var k=null;if(e instanceof VX&&(k=e,d=Number.isFinite(d)?d:k.width,m=Number.isFinite(m)?m:k.height,k.bind(0),e=k.target),b)switch(e){case 3553:case 34067:_.copyTexSubImage2D(e,l,h,f,i,a,d,m);break;case 35866:case 32879:iH(_).copyTexSubImage3D(e,l,h,f,p,i,a,d,m)}else _.copyTexImage2D(e,l,c,i,a,d,m,0);k&&k.unbind(),_.bindFramebuffer(36160,w||null),y&&v.delete()}(e,a,{targetY:0,width:i,height:o}),e.delete(),a}function H1(t,e,n){for(var r=0;r<e.length;r++){var i=e[r],o=i.icon,a=i.xOffset;t[G1(o)]=iS(iS({},o),{},{x:a,y:n})}}var X1=function(){function t(e,n){var r=n.onUpdate,i=void 0===r?U1:r,o=n.onError,a=void 0===o?U1:o;(0,s.Z)(this,t),this.gl=e,this.onUpdate=i,this.onError=a,this._loadOptions=null,this._getIcon=null,this._texture=null,this._externalTexture=null,this._mapping={},this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=4,this._canvasWidth=1024,this._canvasHeight=0,this._canvas=null}return(0,l.Z)(t,[{key:"finalize",value:function(){var t;null===(t=this._texture)||void 0===t||t.delete()}},{key:"getTexture",value:function(){return this._texture||this._externalTexture}},{key:"getIconMapping",value:function(t){var e=this._autoPacking?G1(t):t;return this._mapping[e]||{}}},{key:"setProps",value:function(t){var e=t.loadOptions,n=t.autoPacking,r=t.iconAtlas,i=t.iconMapping,o=t.data,a=t.getIcon;e&&(this._loadOptions=e),void 0!==n&&(this._autoPacking=n),a&&(this._getIcon=a),i&&(this._mapping=i),r&&this._updateIconAtlas(r),this._autoPacking&&(o||a)&&"undefined"!==typeof document&&(this._canvas=this._canvas||document.createElement("canvas"),this._updateAutoPacking(o))}},{key:"isLoaded",get:function(){return 0===this._pendingCount}},{key:"_updateIconAtlas",value:function(t){var e;null===(e=this._texture)||void 0===e||e.delete(),this._texture=null,this._externalTexture=t,this.onUpdate()}},{key:"_updateAutoPacking",value:function(t){var e=Object.values(function(t,e,n){if(!t||!e)return null;n=n||{};var r,i={},o=FQ(t),a=o.iterable,s=o.objectInfo,l=(0,ch.Z)(a);try{for(l.s();!(r=l.n()).done;){var u=r.value;s.index++;var c=e(u,s),h=G1(c);if(!c)throw new Error("Icon is missing.");if(!c.url)throw new Error("Icon url is missing.");i[h]||n[h]&&c.url===n[h].url||(i[h]=iS(iS({},c),{},{source:u,sourceIndex:s.index}))}}catch(s2){l.e(s2)}finally{l.f()}return i}(t,this._getIcon,this._mapping)||{});if(e.length>0){var n=function(t){for(var e=t.icons,n=t.buffer,r=t.mapping,i=void 0===r?{}:r,o=t.xOffset,a=void 0===o?0:o,s=t.yOffset,l=void 0===s?0:s,u=t.rowHeight,c=void 0===u?0:u,h=t.canvasWidth,f=[],p=0;p<e.length;p++){var d=e[p];if(!i[G1(d)]){var m=d.height,g=d.width;a+g+n>h&&(H1(i,f,l),a=0,l=c+l+n,c=0,f=[]),f.push({icon:d,xOffset:a}),a=a+g+n,c=Math.max(c,m)}}return f.length>0&&H1(i,f,l),{mapping:i,rowHeight:c,xOffset:a,yOffset:l,canvasWidth:h,canvasHeight:q1(c+l+n)}}({icons:e,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset}),r=n.mapping,i=n.xOffset,o=n.yOffset,a=n.rowHeight,s=n.canvasHeight;this._rowHeight=a,this._mapping=r,this._xOffset=i,this._yOffset=o,this._canvasHeight=s,this._texture||(this._texture=new HX(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:V1})),this._texture.height!==this._canvasHeight&&(this._texture=W1(this.gl,this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._loadIcons(e)}}},{key:"_loadIcons",value:function(t){var e,n=this,r=this._canvas.getContext("2d"),i=(0,ch.Z)(t);try{var o=function(){var t=e.value;n._pendingCount++,iW(t.url,kJ,n._loadOptions).then((function(e){var i=G1(t),o=n._mapping[i],a=o.x,s=o.y,l=o.width,u=o.height,c=function(t,e,n,r){return n===e.width&&r===e.height?e:(t.canvas.height=r,t.canvas.width=n,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e,0,0,e.width,e.height,0,0,n,r),t.canvas)}(r,e,l,u);n._texture.setSubImageData({data:c,x:a,y:s,width:l,height:u}),n._texture.generateMipmap(),n.onUpdate()})).catch((function(e){n.onError({url:t.url,source:t.source,sourceIndex:t.sourceIndex,loadOptions:n._loadOptions,error:e})})).finally((function(){n._pendingCount--}))};for(i.s();!(e=i.n()).done;)o()}catch(s2){i.e(s2)}finally{i.f()}}}]),t}(),Y1=[0,0,0,255],$1={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:function(t){return t.position}},getIcon:{type:"accessor",value:function(t){return t.icon}},getColor:{type:"accessor",value:Y1},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}},K1=function(t){(0,Mj.Z)(n,t);var e=(0,Lj.Z)(n);function n(){return(0,s.Z)(this,n),e.apply(this,arguments)}return(0,l.Z)(n,[{key:"getShaders",value:function(){return(0,qU.Z)((0,GU.Z)(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[AQ,MQ]})}},{key:"initializeState",value:function(){this.state={iconManager:new X1(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:Y1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}},{key:"updateState",value:function(t){var e=t.oldProps,r=t.props,i=t.changeFlags;(0,qU.Z)((0,GU.Z)(n.prototype),"updateState",this).call(this,{props:r,oldProps:e,changeFlags:i});var o=this.getAttributeManager(),a=r.iconAtlas,s=r.iconMapping,l=r.data,u=r.getIcon,c=this.state.iconManager;c.setProps({loadOptions:r.loadOptions});var h=!1;if(a||this.internalState.isAsyncPropLoading("iconAtlas")?(e.iconAtlas!==r.iconAtlas&&c.setProps({iconAtlas:a,autoPacking:!1}),e.iconMapping!==r.iconMapping&&(c.setProps({iconMapping:s}),h=!0)):c.setProps({autoPacking:!0}),(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&c.setProps({data:l,getIcon:u}),h&&(o.invalidate("instanceOffsets"),o.invalidate("instanceIconFrames"),o.invalidate("instanceColorModes")),i.extensionsChanged){var f,p=this.context.gl;null===(f=this.state.model)||void 0===f||f.delete(),this.state.model=this._getModel(p),o.invalidateAll()}}},{key:"isLoaded",get:function(){return(0,qU.Z)((0,GU.Z)(n.prototype),"isLoaded",this)&&this.state.iconManager.isLoaded}},{key:"finalizeState",value:function(){(0,qU.Z)((0,GU.Z)(n.prototype),"finalizeState",this).call(this),this.state.iconManager.finalize()}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,r=n.sizeScale,i=n.sizeMinPixels,o=n.sizeMaxPixels,a=n.sizeUnits,s=n.billboard,l=n.alphaCutoff,u=this.state.iconManager.getTexture();u&&this.state.model.setUniforms(e).setUniforms({iconsTexture:u,iconsTextureDim:[u.width,u.height],sizeUnits:PU[a],sizeScale:r,sizeMinPixels:i,sizeMaxPixels:o,billboard:s,alphaCutoff:l}).draw()}},{key:"_getModel",value:function(t){return new F0(t,iS(iS({},this.getShaders()),{},{id:this.props.id,geometry:new Z1({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0}))}},{key:"_onUpdate",value:function(){this.setNeedsRedraw()}},{key:"_onError",value:function(t){var e=this.getCurrentLayer().props.onIconError;e?e(t):iZ.error(t.error)()}},{key:"getInstanceOffset",value:function(t){var e=this.state.iconManager.getIconMapping(t);return[e.width/2-e.anchorX||0,e.height/2-e.anchorY||0]}},{key:"getInstanceColorMode",value:function(t){return this.state.iconManager.getIconMapping(t).mask?1:0}},{key:"getInstanceIconFrame",value:function(t){var e=this.state.iconManager.getIconMapping(t);return[e.x||0,e.y||0,e.width||0,e.height||0]}}]),n}(F1);K1.layerName="IconLayer",K1.defaultProps=$1;var J1=n(3772),Q1=function(e){var n=(0,t.useContext)(Qd),r=(0,t.useRef)(null),o=((0,t.useContext)(Tj),(0,t.useContext)(tS)),a=(0,t.useRef)(!1),s="icondeckgl-layer",l=(0,t.useRef)(null),c=(0,t.useRef)(null),h=(0,t.useRef)(),f=(0,t.useRef)([]),p=(0,t.useState)([]),d=(0,i.Z)(p,2),m=d[0],g=d[1],v=(0,t.useState)({}),y=(0,i.Z)(v,2),_=y[0],x=y[1],b=function(){c.current&&c.current.stop(),l.current=0,c.current=MF(k)};(0,t.useEffect)((function(){o.data&&(f.current=(0,u.Z)(o.data),b())}),[o.data]);var w=(0,t.useMemo)((function(){return{id:s,type:K1,data:m,pickable:!0,iconAtlas:J1,iconMapping:{airplane:{x:0,y:0,width:512,height:512},blue_airplane:{x:512,y:0,width:512,height:512}},sizeScale:20,autoHighlight:!0,onHover:function(t){t.picked?x(t):x({})},getPosition:function(t){return[t.longitude,t.latitude]},getIcon:function(t){return"Germany"===t.origin_country?"blue_airplane":"airplane"},getAngle:function(t){return-t.true_track}}}),[m]),k=function(){if(o.data){var t=f.current,e=(new Date).getTime();t=t.map((function(t){var n=t.interpolatePos((e-1e3*t.time_contact)/1e3/10),r=(0,i.Z)(n,2),o=r[0],a=r[1];return iS(iS({},t),{},{longitude:o,latitude:a})})),l.current+=1,g(t)}},S=function(){c.current&&c.current.stop(),r.current&&(r.current.style&&(r.current.getLayer(s)&&r.current.removeLayer(s),r.current.getSource(s)&&r.current.removeSource(s)),r.current=null)};return(0,t.useEffect)((function(){return S}),[]),(0,t.useEffect)((function(){h.current&&h.current.deck.setProps({layers:[new K1(iS({},w))]})}),[w]),(0,t.useEffect)((function(){o.data&&n.mapExists(e.mapId)&&!a.current&&(a.current=!0,r.current=n.getMap(e.mapId),h.current=new CQ(iS(iS({id:s,type:K1},w),{},{data:o.data})),window.mapBoxLayer=h.current,r.current.addLayer(h.current,"poi_label"),b(),"function"===typeof e.onDone&&e.onDone())}),[n.mapIds,n,o.data]),(0,Xo.jsx)(Xo.Fragment,{children:function(t){var e=t.object,n=t.x,r=t.y;return e?(0,Xo.jsxs)("div",{className:"tooltip",style:{zIndex:1e3,position:"fixed",padding:"8px",borderRadius:"4px",border:"1px solid rgba(12, 12, 120, .9)",backgroundColor:"rgba(12, 12, 120, .5)",color:"rgb(255, 255, 255)",opacity:1,left:n,top:r,marginTop:"20px",marginLeft:"20px",display:"flex"},children:[(0,Xo.jsxs)("div",{style:{paddingRight:"10px"},children:["Callsign:",(0,Xo.jsx)("br",{}),e.altitude&&(0,Xo.jsxs)(Xo.Fragment,{children:["H\xf6he:",(0,Xo.jsx)("br",{})]}),"Land:",(0,Xo.jsx)("br",{}),"Geschwindigkeit:"]}),(0,Xo.jsxs)("div",{style:{fontWeight:"bold"},children:[e.callsign,(0,Xo.jsx)("br",{}),e.altitude&&(0,Xo.jsxs)(Xo.Fragment,{children:[e.altitude,"m",(0,Xo.jsx)("br",{})]}),e.origin_country,(0,Xo.jsx)("br",{}),e.velocity,"mph"]})]}):null}(_)})},t2=function(e){var n=(0,t.useContext)(Qd),r=(0,t.useState)(),o=(0,i.Z)(r,2),a=o[0],s=o[1],l=(0,t.useMemo)((function(){return a?"https://opensky-network.org/api/states/all?vv="+a:""}),[a]),u=function(){s(a+1)};return(0,t.useEffect)((function(){n.map&&(n.map.setZoom(8.5),s(Math.floor((new Date).getTime()/1e3)-5))}),[n.map]),(0,Xo.jsx)(nS,{format:"json",url:l,formatData:function(t){return{id:t[1],callsign:t[1],time_contact:t[3]?t[3]:t[4],lon:t[5],lat:t[6],longitude:t[5],latitude:t[6],velocity:t[9],altitude:t[13],origin_country:t[2],true_track:t[10],interpolatePos:Cj([t[5],t[6]],null===t[5]?[t[5],t[6]]:El(Ba([t[5],t[6]]),10*t[9],t[10],{units:"meters"}).geometry.coordinates)}},data_property:"states",onData:function(){setTimeout(u,1e3)},children:(0,Xo.jsx)(Q1,{})})}.bind({});t2.parameters={},t2.args={};var e2=function(){var e=(0,t.useState)(!1),n=(0,i.Z)(e,2),r=n[0],o=n[1],a=(0,t.useState)([]),s=(0,i.Z)(a,2),l=s[0],u=s[1],c=(0,t.useState)(!1),h=(0,i.Z)(c,2),f=h[0];return h[1],(0,t.useContext)(dT),(0,Xo.jsxs)(Xo.Fragment,{children:[(0,Xo.jsx)(vT,{extended:r,setHeaderExtended:o,framesEnabled:l,setFramesEnabled:u}),(0,Xo.jsx)(_T,{startPos:{x:100,y:200},closable:!0,componentId:"print",framesEnabled:l,setFramesEnabled:u,visible:l.includes("print"),children:(0,Xo.jsx)(aO,{})}),(0,Xo.jsx)(_T,{startPos:{x:500,y:200},closable:!0,componentId:"layers",framesEnabled:l,setFramesEnabled:u,visible:l.includes("layers"),children:(0,Xo.jsx)(YO,{})}),l.includes("measureLine")&&(0,Xo.jsx)(_T,{startPos:{x:900,y:200},closable:!0,componentId:"measureLine",framesEnabled:l,setFramesEnabled:u,children:(0,Xo.jsx)(KO,{})}),l.includes("measurePolygon")&&(0,Xo.jsx)(_T,{startPos:{x:900,y:200},closable:!0,componentId:"measurePolygon",framesEnabled:l,setFramesEnabled:u,children:(0,Xo.jsx)(QO,{})}),l.includes("featureInfo")&&(0,Xo.jsx)(_T,{startPos:{x:600,y:200},closable:!0,componentId:"featureInfo",framesEnabled:l,setFramesEnabled:u,children:(0,Xo.jsx)(ez,{})}),l.includes("lgiFeatureInfo")&&(0,Xo.jsx)(_T,{startPos:{x:600,y:200},closable:!0,componentId:"lgiFeatureInfo",framesEnabled:l,setFramesEnabled:u,children:(0,Xo.jsx)(Xz,{})}),(0,Xo.jsx)(Xw,{componentId:"toolbar"}),l.includes("livedata")&&(0,Xo.jsx)(t2,{}),(0,Xo.jsx)(_T,{startPos:{x:50,y:200},closable:!0,componentId:"wmsLoader",framesEnabled:l,setFramesEnabled:u,visible:l.includes("wmsLoader"),children:(0,Xo.jsx)(iz,{})}),(0,Xo.jsx)(_T,{startPos:{x:50,y:400},closable:!0,componentId:"geojsonLoader",framesEnabled:l,setFramesEnabled:u,visible:l.includes("geojsonLoader"),children:(0,Xo.jsx)(az,{})}),f&&(0,Xo.jsx)(Qb,{}),(0,Xo.jsx)(nm,{mapId:"map_1",options:{zoom:8,style:"https://wms.wheregroup.com/tileserver/style/klokantech-basic.json",center:[7.0851268,50.73884]}})]})},n2=function(t){t&&t instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(e){var n=e.getCLS,r=e.getFID,i=e.getFCP,o=e.getLCP,a=e.getTTFB;n(t),r(t),i(t),o(t),a(t)}))},r2=n(8023);var i2=function(e){var n=e.children,r=e.theme,i=(0,Io.Z)(),o=t.useMemo((function(){var t=null===i?r:function(t,e){return"function"===typeof e?e(t):(0,$n.Z)({},t,e)}(i,r);return null!=t&&(t[bE]=null!==i),t}),[r,i]);return(0,Xo.jsx)(r2.Z.Provider,{value:o,children:n})};function o2(t){var e=(0,gP.Z)();return(0,Xo.jsx)(jn.T.Provider,{value:"object"===typeof e?e:{},children:t.children})}var a2=function(t){var e=t.children,n=t.theme;return(0,Xo.jsx)(i2,{theme:n,children:(0,Xo.jsx)(o2,{children:e})})};r.render((0,Xo.jsx)(t.StrictMode,{children:(0,Xo.jsx)(pT,{children:(0,Xo.jsx)(tm,{children:(0,Xo.jsx)(a2,{theme:mC,children:(0,Xo.jsx)(e2,{})})})})}),document.getElementById("root")),n2()}()}();
//# sourceMappingURL=main.de2def81.js.map